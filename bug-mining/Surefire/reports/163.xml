<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:08:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-482] Surefire tries to run JUnit4 tests that contain no @Test annotations</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-482</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-346&quot; title=&quot;build failure when there is any class with name matching the test pattern, but is not a testcase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-346&quot;&gt;&lt;del&gt;SUREFIRE-346&lt;/del&gt;&lt;/a&gt; but for JUnit4, Surefire tries to run classes that contain no @Test annotations as tests, resulting in the exception:&lt;/p&gt;

&lt;p&gt;java.lang.Exception: No runnable methods&lt;br/&gt;
        at org.junit.internal.runners.MethodValidator.validateInstanceMethods(MethodValidator.java:32)&lt;br/&gt;
        at org.junit.internal.runners.MethodValidator.validateMethodsForDefaultRunner(MethodValidator.java:43)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner.validate(JUnit4ClassRunner.java:36)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner.&amp;lt;init&amp;gt;(JUnit4ClassRunner.java:27)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)&lt;br/&gt;
        at org.junit.internal.requests.ClassRequest.buildRunner(ClassRequest.java:33)&lt;br/&gt;
        at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:28)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4TestSet.&amp;lt;init&amp;gt;(JUnit4TestSet.java:45)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4DirectoryTestSuite.createTestSet(JUnit4DirectoryTestSuite.java:56)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.locateTestSets(AbstractDirectoryTestSuite.java:96)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.createSuiteFromDefinition(Surefire.java:209)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.run(Surefire.java:156)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997)&lt;/p&gt;

&lt;p&gt;Such classes should be ignored by Surefire.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12810154">SUREFIRE-482</key>
            <summary>Surefire tries to run JUnit4 tests that contain no @Test annotations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="markh">Mark Hobson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Apr 2008 05:26:58 +0000</created>
                <updated>Fri, 4 Jul 2025 07:10:06 +0000</updated>
                            <resolved>Thu, 11 Nov 2010 05:46:20 +0000</resolved>
                                    <version>2.4.2</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Junit 4.x support</component>
                        <due></due>
                            <votes>40</votes>
                                    <watches>22</watches>
                                                                                                                <comments>
                            <comment id="14454210" author="dfabulich" created="Thu, 1 May 2008 20:09:46 +0000"  >&lt;p&gt;I&apos;m marking this won&apos;t fix, though I could be convinced otherwise.  Forgetting to add @Test annotations is a common error for users upgrading from JUnit 3, and even occasionally for experienced users.  Naming a class *Test without making it abstract and without putting any @Test annotations is quite unusual, and probably shouldn&apos;t be silently ignored.&lt;/p&gt;</comment>
                            <comment id="14454291" author="mihobson" created="Fri, 2 May 2008 03:34:47 +0000"  >&lt;p&gt;This is more to address the situation where mock classes named *Test are not run by Surefire.  Similar to JUnit3 where classes that do not extend TestCase are not run by Surefire (&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-346&quot; title=&quot;build failure when there is any class with name matching the test pattern, but is not a testcase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-346&quot;&gt;&lt;del&gt;SUREFIRE-346&lt;/del&gt;&lt;/a&gt;), the defining factor of a JUnit4 test case is the occurrence of one or more @Test annotations, hence for consistency Surefire should ignore classes that do not contain any @Test annotations.&lt;/p&gt;

&lt;p&gt;This also mirrors the behaviour in Eclipse, whereby:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a JUnit3 test case can only be run if it extends TestCase&lt;/li&gt;
	&lt;li&gt;a JUnit4 test case can only be run if it contains one or more @Test annotations&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It&apos;d be good to have consistency across Maven and IDEs.&lt;/p&gt;</comment>
                            <comment id="14454424" author="garu" created="Thu, 20 Nov 2008 03:57:21 +0000"  >&lt;p&gt;Excuse me i don&apos;t understand why you fixed this same problem for Junit 3 (&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-346&quot; title=&quot;build failure when there is any class with name matching the test pattern, but is not a testcase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-346&quot;&gt;&lt;del&gt;SUREFIRE-346&lt;/del&gt;&lt;/a&gt;) and you refuse to solve it for Junit 4.&lt;br/&gt;
Why you should put a restriction on class names when Junit does not?&lt;br/&gt;
As Mark pointed out, don&apos;t you think that behavior consistency, given that this request doesn&apos;t violate any rule, should be more important than anything else?&lt;br/&gt;
Thanks,  Gabriele&lt;/p&gt;</comment>
                            <comment id="14454408" author="garu" created="Thu, 20 Nov 2008 04:18:29 +0000"  >&lt;p&gt;Just to clarify better what i mean, why surefire should try to run a class just because it is named  &quot;Tester*&quot; when that class does not extend TestCase nor has any Junit 4 annotation in it and it doesn&apos;t even import from any junit.* package?&lt;/p&gt;

&lt;p&gt;Note that instead a class named &quot;*Tester&quot; is happily ignored.&lt;/p&gt;

&lt;p&gt;It looks like surefire is violating its own rules &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14456894" author="mihbor@wp.pl" created="Thu, 11 Dec 2008 08:40:35 +0000"  >&lt;p&gt;This is an issue for me too.&lt;/p&gt;

&lt;p&gt;&quot;Naming a class *Test without making it abstract and without putting any @Test annotation&quot; does not seam unusual to me.&lt;/p&gt;

&lt;p&gt;Mock object are one case.&lt;br/&gt;
Another one is starting a new project and creating a test class not having implemented any test methods yet. Having to make it abstract is an unnecessary nuisance. What is worse, you then have to remember to make it non-abstract again once you have written the first test.&lt;br/&gt;
Another case is wanting to temporarily disabling tests by annotating them with @Ignore. It is inconsistent that you can do it UNLESS there are no more methods with @Test annotation left in the class in which case the exception is raised.&lt;/p&gt;

&lt;p&gt;In the end even if these cases were unusual they are not in any way an error and should not be reported as such and should not break a build.&lt;/p&gt;

&lt;p&gt;I hope someone is convinced one day that this should be fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14456886" author="clint.popetz" created="Thu, 26 Feb 2009 12:23:10 +0000"  >&lt;p&gt;This blows my mind.  Having just switched to maven for builds, it&apos;s ridiculous that I now have to come up with a set of naming patterns for tests that have never needed them previously.  Blech.&lt;/p&gt;</comment>
                            <comment id="14454386" author="mihobson" created="Thu, 26 Feb 2009 12:58:09 +0000"  >&lt;p&gt;There seems to be enough dissatisfaction with this issue to warrant reopening it.  What do you think Dan, shall we take it to the mailing lists for a vote?&lt;/p&gt;</comment>
                            <comment id="14456882" author="kutzi@gmx.de" created="Mon, 2 Mar 2009 09:27:45 +0000"  >&lt;p&gt;This has also bitten me more than once. Maven shouldn&apos;t get in my way too much and it should definitely NOT dictate how I have to name my test support classes (TestUtils.java anyone?).&lt;br/&gt;
I&apos;m in the lucky situation where I started a new project with Maven, so it doesn&apos;t hurt too much. But imagine I would migrate an existing project with dozens of &quot;Test*&quot; classes which are no test cases, this would be a blocker to switch to maven.&lt;/p&gt;

&lt;p&gt;This behavior should be configurable at least.&lt;/p&gt;</comment>
                            <comment id="14454425" author="alexeev.net" created="Sat, 7 Mar 2009 18:45:47 +0000"  >&lt;p&gt;I would also vote for reopening this bug. &lt;/p&gt;

&lt;p&gt;Perhaps, this solution would work:&lt;/p&gt;

&lt;p&gt;@Ignore @Test &lt;br/&gt;
public void ignoredMethod() &lt;/p&gt;
{...}&lt;br/&gt;
&lt;br/&gt;
while the following one results in  &quot;java.lang.Exception: No runnable methods&quot;:&lt;br/&gt;
&lt;br/&gt;
//@Ignore @Test &lt;br/&gt;
public void ignoredMethod() {...}



</comment>
                            <comment id="14454357" author="riksmith" created="Thu, 12 Mar 2009 09:41:24 +0000"  >&lt;p&gt;In my current project, support classes for testing can also be named like *Test. &lt;br/&gt;
I don&apos;t see why this is so strange, and why surefire cannot silently ignore this. The class doesn&apos;t extend testcase (which is by my knowledge required by JUnit 3) and it does not  have any annotations  (Isn&apos;t this also required for JUnit 4?)&lt;/p&gt;

&lt;p&gt;This generates a lot of false failed tests.&lt;/p&gt;</comment>
                            <comment id="14454370" author="amanica" created="Tue, 24 Mar 2009 08:26:48 +0000"  >&lt;p&gt;Please fix this.&lt;br/&gt;
I don&apos;t think its reasonable to fail if you have non-junit-test-classes coincidently named Test* or *Test.&lt;br/&gt;
Use the annotation, that is what it is there for.&lt;/p&gt;</comment>
                            <comment id="14454314" author="mihobson" created="Tue, 24 Mar 2009 08:34:36 +0000"  >&lt;p&gt;Reopening this bug as there&apos;s obvious dissatisfaction with the outcome.  Please vote if you&apos;d like to see it fixed.&lt;/p&gt;</comment>
                            <comment id="14454278" author="markpollack" created="Thu, 26 Mar 2009 20:37:14 +0000"  >&lt;p&gt;I just got bit by this behavior and it is very annoying. the rule &apos;a JUnit4 test case can only be run if it contains one or more @Test annotations&apos; seems to the correct and simple solution to the problem.&lt;/p&gt;</comment>
                            <comment id="14456898" author="astubbs" created="Fri, 27 Mar 2009 02:28:50 +0000"  >&lt;p&gt;This is an issue with anonymous inner classes in a test class, that themselves do not contain @test&apos;s:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;initializationError0(x.x.x.x.x.TestHomePage$1)  Time elapsed: 0.002 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.Exception: Test &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;should have &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; zero-argument constructor
	at org.junit.internal.runners.MethodValidator.validateNoArgConstructor(MethodValidator.java:56)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NB: TestHomePage is an actual junit, but contains at least one anonymous inner class which is not.&lt;/p&gt;

&lt;p&gt;Very annoying... To fix this, I&apos;ll have to rename &apos;test&apos; out of the class name. Ugh.&lt;/p&gt;

&lt;p&gt;I also have &quot;TestPages&quot; that are not actually junit tests, but SureFire still tries to run them as junits. Workaround was to put them all inside  a package, and exclude it manually.&lt;/p&gt;</comment>
                            <comment id="14456881" author="astubbs" created="Fri, 27 Mar 2009 02:32:02 +0000"  >&lt;p&gt;Oh dear - it only seems to run test classes that are names &lt;b&gt;Test or Test&lt;/b&gt; - crap. I thought that was for detecting junit3 tests only. :/ this issue just got worse for me. Seems like surefire can&apos;t run my tests then?&lt;/p&gt;</comment>
                            <comment id="14454440" author="jkwuc89" created="Fri, 24 Apr 2009 08:51:44 +0000"  >&lt;p&gt;I would also like to see surefire&apos;s JUnit 4.4 support fixed so that it matches what JUnit 4.4 does (i.e. run classes that contain @Test annotations).  Currently, surefire requires that the class name contain &quot;Test&quot; in order for the class to be considered a test class.  A workaround is to use &amp;lt;includes&amp;gt; and/or &amp;lt;excludes&amp;gt; inside the plugin configuration to include or exclude specific classes. &lt;/p&gt;</comment>
                            <comment id="14456915" author="daniel.spangler@gmail.com" created="Thu, 9 Jul 2009 13:23:16 +0000"  >&lt;p&gt;We had the same thing happen that @Antony Stubbs had.&lt;/p&gt;

&lt;p&gt;x.x.x.x.TestDriveSecurityServiceTest$1.initializationError0 =================&lt;br/&gt;
java.lang.Exception: Test class should have public zero-argument constructor&lt;/p&gt;

&lt;p&gt;Renaming the class to TDriveSecurityServiceTest solved our problem.&lt;/p&gt;</comment>
                            <comment id="14454401" author="tom_chj" created="Mon, 31 Aug 2009 05:21:06 +0000"  >&lt;p&gt;Hi, I would also like this to be fixed. I do want to name my classes as I wish without them to be executed as tests, especially when I use junit 4 annotations to specify what classes are actual tests or not.&lt;br/&gt;
Thank you !&lt;br/&gt;
Thomas&lt;/p&gt;</comment>
                            <comment id="14454445" author="dgashby" created="Sat, 12 Sep 2009 22:58:02 +0000"  >&lt;p&gt;I&apos;m a relative newcomer to Maven and this one bit me too.  Seems odd that I should have to rename my class called DomainTestCase to something without Test in it in order to get Maven to process my tests without complaining.  This really should be fixed.&lt;/p&gt;</comment>
                            <comment id="14454458" author="mleduque" created="Mon, 28 Sep 2009 04:58:14 +0000"  >&lt;p&gt;It should be fixed. I have classes named Test* that are about some completely different kind of tests (i.e. do not talk about unit testing) that are in /src/main/java (not /src/test) and that surefire tries to run with no reasons.&lt;/p&gt;</comment>
                            <comment id="14454382" author="mihobson" created="Tue, 13 Oct 2009 06:28:26 +0000"  >&lt;p&gt;A good workaround is to add @Ignore to the class that shouldn&apos;t be run.&lt;/p&gt;</comment>
                            <comment id="14454450" author="dtriphaus" created="Wed, 24 Mar 2010 07:26:02 +0000"  >&lt;p&gt;This should be fixed, for me this is no real junit4 support if I need a naming-convention for my classfiles.&lt;/p&gt;</comment>
                            <comment id="14454571" author="ben_hutchison" created="Mon, 26 Apr 2010 23:31:58 +0000"  >&lt;p&gt;This bug is an embarrassment to Maven. Ignore the JUnit4 standard protocol and instead invent your own undocumented test discovery method! 2 years have passed since this was reported, and its still broken...&lt;/p&gt;</comment>
                            <comment id="14454463" author="amnesiac" created="Thu, 29 Apr 2010 01:37:21 +0000"  >&lt;p&gt;This is one of most annoying bug/feature I have ever come across. How can you go against the grain of Junit, it is like breaking the law. I want to disable all tests in my project and start fixing them one by one by having a Cobertura report that starts from 0 and goes up as we fix them. I took great pain in deleting/commenting the @Test and other annotations and also added a prefix &apos;skip&apos; to all the test methods. And after all the effort I see this bug and the plugin owner&apos;s disgusting behaviour.  &lt;/p&gt;</comment>
                            <comment id="14454558" author="mihobson" created="Thu, 29 Apr 2010 03:46:19 +0000"  >&lt;p&gt;This is the second most popular issue for Surefire so we need to resolve it.  First step would be for someone to contribute a patch that fixes this behaviour.&lt;/p&gt;</comment>
                            <comment id="14454521" author="tbee" created="Tue, 20 Jul 2010 06:48:39 +0000"  >&lt;p&gt;I took a quick peek in the source code. The logic that decides what to include is in the surefire-api artifact (maven-surefire-plugin -&amp;gt; surefire-booter -&amp;gt; surefire-api). In the plugin a default filename include pattern (Test*.java, *Test.java, *TestCase.java) is defined and that is handed over to the collectTests() method in the SurefireDirectoryScanner class. This method uses org.codehaus.plexus.util.DirectoryScanner to simply scan for files matching the patterns. There is no checking on extending of TestCase or annotations what so ever.&lt;/p&gt;

&lt;p&gt;So. &lt;/p&gt;

&lt;p&gt;It would not be too difficult to examine the resulting list of classes for these things. The problem is; the code at this level does not know what the actual test environment is, it just handles files. It has no awareness of JUnit3, JUnit4 or possibly other testers. I have not enough understanding of SureFire at this time.&lt;/p&gt;</comment>
                            <comment id="14454455" author="tbee" created="Tue, 20 Jul 2010 09:54:42 +0000"  >&lt;p&gt;Ok. I figured it out; in surefire-providers there are classes for different testrunners. A.o. there is a JUnit4DirectoryTestSuite which extends and heavily relies on AbstractDirectoryTestSuite which uses the directory scanner. This class should get additional code to filter the resulting classes on the @Test annotation. Likewise there is a JUnit 3 class which should filter on &quot;extends TestCase&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;ll see what I can do.&lt;/p&gt;</comment>
                            <comment id="14454604" author="tbee" created="Tue, 20 Jul 2010 10:11:40 +0000"  >&lt;p&gt;Oh my, that was easy. JUnit4DirectoryTestSuite has a method that actually creates the test runner and it is allowed to return null. So all that needs to be done is check for a method with the @Test annotation. If not found, return null.&lt;/p&gt;

&lt;p&gt;Here it is: &lt;/p&gt;


&lt;p&gt;    protected SurefireTestSet createTestSet( Class testClass, ClassLoader classLoader )&lt;br/&gt;
        throws TestSetFailedException&lt;br/&gt;
    {&lt;br/&gt;
		// this is JUnit4: check to see if there are any methods with a @Test annotations&lt;br/&gt;
		boolean lTestFound = false;&lt;br/&gt;
		for (Method lMethod : testClass.getDeclaredMethods())&lt;br/&gt;
		{&lt;br/&gt;
			for (Annotation lAnnotation : lMethod.getAnnotations())&lt;br/&gt;
			{&lt;br/&gt;
				if (org.junit.Test.class.isAssignableFrom( lAnnotation.annotationType() ))&lt;/p&gt;
				{
					lTestFound = true;
					break;
				}
&lt;p&gt;			}&lt;br/&gt;
		}&lt;br/&gt;
		// if not test found, simply return null&lt;br/&gt;
		if (lTestFound == false) return null;&lt;/p&gt;

&lt;p&gt;		// create the testset&lt;br/&gt;
        return new JUnit4TestSet( testClass );&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="14454511" author="krosenvold" created="Tue, 20 Jul 2010 10:13:53 +0000"  >&lt;p&gt;Please note that there is a solution to this issue already:&lt;/p&gt;

&lt;p&gt;Surefire contains three different Junit providers, 3.x, 4.x and the (parallel) 4.7+ provider.&lt;/p&gt;

&lt;p&gt;The 4.7 provider only runs valid junit tests, and it is possible to force the use of this provider even for serial runs, using this (somewhat exotic) configuration setting: &amp;lt;parallel&amp;gt;none&amp;lt;/parallel&amp;gt;. As long as junit 4.7+ is used, this will only run proper junit tests.&lt;/p&gt;

&lt;p&gt;Please note that due to a few bugs in the 2.5 junit 4.7 provider, it is probably wise to test this with 2.6-SNAPSHOT or better.&lt;/p&gt;</comment>
                            <comment id="14454468" author="tbee" created="Tue, 20 Jul 2010 10:25:30 +0000"  >&lt;p&gt;The fixed source for JUnit4.&lt;/p&gt;</comment>
                            <comment id="14454564" author="tbee" created="Tue, 20 Jul 2010 11:43:23 +0000"  >&lt;p&gt;IMHO adding those 6 lines of code to the JUnit4 provider is a better solution that the exotic configuration.&lt;/p&gt;</comment>
                            <comment id="14454575" author="krosenvold" created="Tue, 20 Jul 2010 14:49:40 +0000"  >&lt;p&gt;Thanks for the patch, Tom.&lt;/p&gt;

&lt;p&gt;As can be seen from several of the comments to this issue, there is the problem that this bug has been around long enough to become a feature (pardon the pun). I also know from experience that this &quot;feature&quot; is used by quite a lot of projects.&lt;/p&gt;

&lt;p&gt;I believe that any patch to this issue will need to include one or more of the following features:&lt;br/&gt;
A) Solve the issue by making the provider-switch more explicit (i.e. leave 4.x provider as-is)&lt;br/&gt;
B) Solve 4.x problem more or less as you suggest, but provide log warnings about classes that will not be run any more due to behavior change. While this initially may seem like a nice fix, the problem is that the message will have to be more or less permanently in place - which means we&apos;ll be nagging users indefinitely due to what is basically a bug.&lt;br/&gt;
C) Make some kind of &quot;strictJunit4classscanning&quot; attribute on surefire plugin that allows the correct behavior to be turned on/off. &lt;/p&gt;

&lt;p&gt;I&apos;m sure there&apos;s may be other ways to fix this, but I think the fix (in one way or another) needs to respect that it&apos;s become somewhat of a &quot;feature&quot;.&lt;/p&gt;

&lt;p&gt;There also needs to be an integration test for whatever fix is chosen, after all it&apos;s a test framework &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14454643" author="rotsor" created="Tue, 9 Nov 2010 06:34:22 +0000"  >&lt;p&gt;Wow, I totally missed the discussion here. Please see my comment and patch at &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-535&quot; title=&quot;surefire tries to treat nested classes, even anonymous ones, as test classes?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-535&quot;&gt;&lt;del&gt;SUREFIRE-535&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I think this must be fixed. I can&apos;t see a use case when skipping a class without test methods would cause problems. Kristian, could you please elaborate on this? Why would anyone want the test without test methods to fail?&lt;/p&gt;</comment>
                            <comment id="14454712" author="krosenvold" created="Tue, 9 Nov 2010 07:30:57 +0000"  >&lt;p&gt;I will fix this issue for 2.7 as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Impelement the correct behaviour.&lt;/li&gt;
	&lt;li&gt;Adda -Dsurefire.upgrade=true system property that can be run when upgrading, so that users will have warning if their project contains testcases that will not be run anymore (this is the reason why this issue is a bit hard to fix).&lt;/li&gt;
	&lt;li&gt;Include a warning to run (at least once) with this flag when upgrading in release notes.&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="14454668" author="krosenvold" created="Thu, 11 Nov 2010 05:46:20 +0000"  >&lt;p&gt;Fixed in r1033896. Users upgrading to this version of the plugin should run mvn -Dsurefire.junit4.upgradecheck=true install at least once to verify that they don&apos;t have any tests that will be ignored by the new plugin version.&lt;/p&gt;</comment>
                            <comment id="14454546" author="rotsor" created="Thu, 11 Nov 2010 09:07:36 +0000"  >&lt;p&gt;Kristian, thank you for fixing this.&lt;/p&gt;

&lt;p&gt;However, I think I&apos;ve found a bug that could lead to more serious consequences than we have thought of.&lt;br/&gt;
When checking &apos;value&apos; parameter for @RunWith attribute&lt;br/&gt;
instead of &quot;if ( suite.isAssignableFrom( value ) )&quot;&lt;br/&gt;
it  should be &quot;if ( runner.isAssignableFrom( value ) )&quot; &lt;br/&gt;
or better yet &quot;if ( true )&quot;.&lt;/p&gt;

&lt;p&gt;As it is now, classes with custom runners, or even with a standard Theories runner could be ignored. Should I create a new issue with a test?&lt;/p&gt;</comment>
                            <comment id="14454613" author="krosenvold" created="Thu, 11 Nov 2010 10:28:13 +0000"  >&lt;p&gt;That&apos;s  really good catch and a nice simplification ! r1033985 just scans for the presence of @RunWith, testcases updated.&lt;/p&gt;</comment>
                            <comment id="17993820" author="olamy" created="Fri, 4 Jul 2025 07:10:06 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1264&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12810053">SUREFIRE-522</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810150">SUREFIRE-535</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12720119" name="JUnit4DirectoryTestSuite.java" size="2656" author="tbee" created="Tue, 20 Jul 2010 10:25:30 +0000"/>
                            <attachment id="12719905" name="test.zip" size="972" author="markh" created="Wed, 9 Apr 2008 05:26:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bb2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>