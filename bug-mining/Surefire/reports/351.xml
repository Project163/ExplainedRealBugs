<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:11:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-985] Some Parameterized tests are not executed (or not reported)</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-985</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The test itself does nothing. The problem occurs when you have a lot of test classes with different categories, that&apos;s why I haven&apos;t been able to extract it (I suppose generating test classes would work): the report &apos;forgets&apos; some tests.&lt;/p&gt;

&lt;p&gt;here is a branch I created to reproduce the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git clone -b surefire git:&lt;span class=&quot;code-comment&quot;&gt;//github.com/nkeywal/hbase.git
&lt;/span&gt;mvn clean install -D skipTests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is a lot of third parties and code. Then:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn test -pl hbase-server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will give back a random number of test executed (from 0 to 9).&lt;/p&gt;

&lt;p&gt;If you specify the test name with -Dtest= the number of tests is always 9 (as expected).&lt;/p&gt;

&lt;p&gt;Building will take time, but there is a single test to execute.&lt;/p&gt;

&lt;p&gt;It&apos;s fragile: I tried to move the test to a difference package and the problem was not reproducable anymore. But I do reproduce it on a clean install with the branch above, and I do reproduce it all the time on our test suite, on different Linux machines.&lt;/p&gt;

&lt;p&gt;test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.hbase.regionserver;


&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.*;

@org.junit.runner.RunWith(org.junit.runners.Parameterized.class)
@org.junit.experimental.categories.Category(org.apache.hadoop.hbase.S1Tests.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestSurefire {

  @org.junit.runners.Parameterized.Parameters
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Collection&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]&amp;gt; parameters() {
    ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]&amp;gt; configurations = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 1; i &amp;lt; 10; i++) {
      configurations.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] { i });
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; configurations;
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TestSurefire(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o) {
  }

  @org.junit.Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testM()  {
  }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;settings&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &amp;lt;plugin&amp;gt;
          &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
          &amp;lt;version&amp;gt;2.14&amp;lt;/version&amp;gt;
          &amp;lt;configuration&amp;gt;
            &amp;lt;reuseForks&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/reuseForks&amp;gt;
            &amp;lt;forkCount&amp;gt;2&amp;lt;/forkCount&amp;gt;
	          &amp;lt;groups&amp;gt;org.apache.hadoop.hbase.S1Tests&amp;lt;/groups&amp;gt;
            &amp;lt;redirectTestOutputToFile&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/redirectTestOutputToFile&amp;gt;
          &amp;lt;/configuration&amp;gt;
        &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example of output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-------------------------------------------------------
 T E S T S
-------------------------------------------------------
parallel=&apos;none&apos;, perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false
parallel=&apos;none&apos;, perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-------------------------------------------------------
 T E S T S
-------------------------------------------------------
parallel=&apos;none&apos;, perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false
parallel=&apos;none&apos;, perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false
Running org.apache.hadoop.hbase.regionserver.TestSurefire
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</description>
                <environment>linux, 2 *4 cores, 32 Gb RAM (The sample does not work on Windows)&lt;br/&gt;
</environment>
        <key id="12809579">SUREFIRE-985</key>
            <summary>Some Parameterized tests are not executed (or not reported)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="agudian">Andreas Gudian</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Apr 2013 09:07:37 +0000</created>
                <updated>Fri, 4 Jul 2025 07:20:42 +0000</updated>
                            <resolved>Fri, 12 Apr 2013 13:10:46 +0000</resolved>
                                    <version>2.14</version>
                                    <fixVersion>2.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14455894" author="agudian" created="Thu, 11 Apr 2013 14:51:16 +0000"  >&lt;p&gt;OK, the good news: I was able to build and reproduce the error, even though I&apos;m on Windows (Cygwin). And indeed, it looks funny. I&apos;ll take a closer look.&lt;/p&gt;</comment>
                            <comment id="14455827" author="nkeywal" created="Thu, 11 Apr 2013 16:08:57 +0000"  >&lt;p&gt;Ok, it&apos;s great you reproduced it, I was quite afraid of the &quot;not reproduced&quot; scenario. Please tell me if you need anything from me.&lt;/p&gt;</comment>
                            <comment id="14455908" author="agudian" created="Fri, 12 Apr 2013 01:34:44 +0000"  >&lt;p&gt;Last night I found the problem and fixed it. I&apos;ll create an IT for it and commit tonight. The way I see the code, it&apos;s much likely that the issue is much older than 2.14 - the code that causes the trouble is there now for at least a year.&lt;/p&gt;

&lt;p&gt;You can probably use the following work-around, in case you don&apos;t want to wait for the next release:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;..
@Parameterized.Parameters(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;{index} - &quot;&lt;/span&gt; + TestSurefire.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName())
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Collection ...
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14455816" author="nkeywal" created="Fri, 12 Apr 2013 02:47:11 +0000"  >&lt;p&gt;That was fast! Thanks a lot. We&apos;re using a fork of the 2.11, that could explain why we don&apos;t have the issue. The workaround is great, I&apos;m going to try it.&lt;/p&gt;</comment>
                            <comment id="14455786" author="krosenvold" created="Fri, 12 Apr 2013 02:51:52 +0000"  >&lt;p&gt;@Nicolas Is there a jira that documents the reason you forked 2.11 ? I&apos;m just curious since I&apos;m gathering some use-cases for version &quot;3.0&quot; where we try to make more extensibility cases&lt;/p&gt;</comment>
                            <comment id="14455967" author="nkeywal" created="Fri, 12 Apr 2013 04:07:58 +0000"  >&lt;p&gt;The full story is in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4763&quot; title=&quot;Integrate surefire and junit for category management&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4763&quot;&gt;&lt;del&gt;HBASE-4763&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4955&quot; title=&quot;Use the official versions of surefire &amp;amp; junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4955&quot;&gt;&lt;del&gt;HBASE-4955&lt;/del&gt;&lt;/a&gt;, but basically it was just to get the features we needed (categorization and parallelization) before they were officially integrated in surefire. When I did it, I was not expecting that going back to the official version will take more than a year &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. We&apos;re close now, I think the last issue is  &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-969&quot; title=&quot;Log line on screen output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-969&quot;&gt;&lt;del&gt;SUREFIRE-969&lt;/del&gt;&lt;/a&gt;. We also patched JUnit, and as they release a version a year we had to wait as well.&lt;/p&gt;

&lt;p&gt;If I list my pain points, or what we did, it would be:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;all this work on categories/parallelisation, it&apos;s integrated now.&lt;/li&gt;
	&lt;li&gt;the double path junit4 / junit47: changing some setting was going to a totally different behavior in junit, so we discovered new bugs&lt;/li&gt;
	&lt;li&gt;when a process dies or does not terminate, surefire does not always says there is an issue nor kill the process. We added some ps | jstack | kill to do that (see zombie related stuff in &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/dev-support/test-patch.sh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hbase/blob/trunk/dev-support/test-patch.sh&lt;/a&gt;).&lt;/li&gt;
	&lt;li&gt;we added a junit listener to add some info on the context. Having the workload of the machine, the number of threads, this kind of things, helps when the tests don&apos;t work as expected.&lt;/li&gt;
	&lt;li&gt;timeouts are difficult to manage. People use test timeout to workaround that when surefire kills a process, you don&apos;t know what was executed. So they put the timeout in the test vs. the global surefire timeout. And then if the build machine is too slow your test suite becomes flaky.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14455946" author="agudian" created="Fri, 12 Apr 2013 13:10:46 +0000"  >&lt;p&gt;Fixed with 199c6162596b19d5b6e25cc0c3706bd657d92b1e&lt;/p&gt;</comment>
                            <comment id="17994382" author="olamy" created="Fri, 4 Jul 2025 07:20:42 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1584&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bc6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>