<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:07:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-639] Error inside systemOut parser: java.lang.IllegalStateException: testSetStarting called twice</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-639</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;After upgrading surefire/surefire report from 2.5 to 2.6 it fails after test are run with&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Error while executing forked tests.; nested exception is org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.CommandLineException: Error&lt;br/&gt;
inside systemOut parser&lt;/p&gt;

&lt;p&gt;testSetStarting called twice&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Error while executing forked tests.; nested exception is org.apache.maven.surefire.booter.shade.org.code&lt;br/&gt;
haus.plexus.util.cli.CommandLineException: Error inside systemOut parser&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)&lt;br/&gt;
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)&lt;br/&gt;
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;br/&gt;
Caused by: org.apache.maven.plugin.MojoExecutionException: Error while executing forked tests.; nested exception is org.apache.maven.surefire.booter.shade.org.c&lt;br/&gt;
odehaus.plexus.util.cli.CommandLineException: Error inside systemOut parser&lt;br/&gt;
        at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:579)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: org.apache.maven.surefire.booter.SurefireBooterForkException: Error while executing forked tests.; nested exception is org.apache.maven.surefire.boot&lt;br/&gt;
er.shade.org.codehaus.plexus.util.cli.CommandLineException: Error inside systemOut parser&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.fork(SurefireBooter.java:685)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.forkSuites(SurefireBooter.java:485)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesForkOnce(SurefireBooter.java:385)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.run(SurefireBooter.java:246)&lt;br/&gt;
        at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:575)&lt;br/&gt;
        ... 19 more&lt;br/&gt;
Caused by: org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.CommandLineException: Error inside systemOut parser&lt;br/&gt;
        at org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:222)&lt;br/&gt;
        at org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:114)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.fork(SurefireBooter.java:681)&lt;br/&gt;
        ... 23 more&lt;br/&gt;
Caused by: java.lang.IllegalStateException: testSetStarting called twice&lt;br/&gt;
        at org.apache.maven.surefire.booter.output.FileOutputConsumerProxy.testSetStarting(FileOutputConsumerProxy.java:112)&lt;br/&gt;
        at org.apache.maven.surefire.booter.output.ForkingStreamConsumer.consumeLine(ForkingStreamConsumer.java:60)&lt;br/&gt;
        at org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.StreamPumper.consumeLine(StreamPumper.java:197)&lt;br/&gt;
        at org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:137)&lt;/p&gt;</description>
                <environment>Windows 7&lt;br/&gt;
java version &amp;quot;1.6.0_19&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_19-b04)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 16.2-b04, mixed mode)&lt;br/&gt;
Maven 2.2.1</environment>
        <key id="12809527">SUREFIRE-639</key>
            <summary>Error inside systemOut parser: java.lang.IllegalStateException: testSetStarting called twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="mhinterseher">Michael Hinterseher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Aug 2010 10:52:00 +0000</created>
                <updated>Fri, 4 Jul 2025 07:14:08 +0000</updated>
                            <resolved>Mon, 8 Nov 2010 03:34:41 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14454608" author="mhinterseher" created="Wed, 18 Aug 2010 10:59:57 +0000"  >&lt;p&gt;The error occurs only when &amp;lt;redirectTestOutputToFile&amp;gt;true&amp;lt;/redirectTestOutputToFile&amp;gt; is configured. &lt;/p&gt;</comment>
                            <comment id="14454683" author="krosenvold" created="Wed, 18 Aug 2010 13:25:20 +0000"  >&lt;p&gt;Thank you for reporting this issue. I am unable to reproduce it, so there is obviously some other part of your configuration that I am missing. If you can assist with the following:&lt;/p&gt;

&lt;p&gt;svn co &lt;a href=&quot;https://svn.apache.org/repos/asf/maven/surefire/trunk/surefire-integration-tests/src/test/resources/surefire-639-redirectTestOutputToFileWhenForking&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/maven/surefire/trunk/surefire-integration-tests/src/test/resources/surefire-639-redirectTestOutputToFileWhenForking&lt;/a&gt; &lt;br/&gt;
cd surefire-639-redirectTestOutputToFileWhenForking&lt;/p&gt;

&lt;p&gt;mvn -Dsurefire.version=2.6 -DforkMode=once -Dredirect.to.file=false test&lt;/p&gt;

&lt;p&gt;You can try adjusting various parameters, and also maybe try to find out which modifications to the pom.xml in this project that is required to reproduce the problem. &lt;/p&gt;</comment>
                            <comment id="14454581" author="krosenvold" created="Wed, 18 Aug 2010 13:36:36 +0000"  >&lt;p&gt;You might want to try with the actual provider (junit/testng) and the versions you&apos;re using.&lt;/p&gt;</comment>
                            <comment id="14454473" author="mhinterseher" created="Thu, 19 Aug 2010 04:29:59 +0000"  >&lt;p&gt;I found the problem.&lt;br/&gt;
In case the last System.out doesn&apos;t force a line break the test results get appended on the end of the previous System.out.&lt;br/&gt;
This causes an error during reading the results but only in case of redirect to file is on&lt;br/&gt;
To reproduce just change in Test2 &quot;println&quot; to &quot;print&quot; like following:&lt;br/&gt;
    @AfterClass&lt;br/&gt;
    public static void testWithFailingAssumption3() &lt;/p&gt;
{
        System.out.print( &quot;After628Test2 on&quot; + Thread.currentThread().getName());
    }</comment>
                            <comment id="14454642" author="krosenvold" created="Wed, 3 Nov 2010 14:59:00 +0000"  >&lt;p&gt;There is a decent chance this issue was fixed by the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-640&quot; title=&quot;org.apache.maven.surefire.booter.shade.org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-640&quot;&gt;&lt;del&gt;SUREFIRE-640&lt;/del&gt;&lt;/a&gt;. I am still not able to reproduce this, even if I change the System.out.println as you suggest. Please re-test with 2.7-SNAPSHOT, which I have also deployed to repository.apache.org. Please report back if this resolves the issue.&lt;/p&gt;</comment>
                            <comment id="14454612" author="mhinterseher" created="Mon, 8 Nov 2010 03:34:41 +0000"  >&lt;p&gt;I tested with 2.7-SNAPSHOT and the problem seems to be solved.&lt;/p&gt;</comment>
                            <comment id="14456968" author="gchen77" created="Tue, 25 Jan 2011 09:05:05 +0000"  >&lt;p&gt;This is occurring (again?) with 2.7.1.&lt;br/&gt;
This is running m3 with -T 1C (8 core build machine).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[17:52:38]: [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.7.1:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) on project hornet-stinger: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing forked tests.; nested exception is java.lang.IllegalStateException: testSetCompleted called before testSetStarting -&amp;gt; [Help 1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems like it doesn&apos;t happen as frequently as previously&lt;/p&gt;</comment>
                            <comment id="14454770" author="krosenvold" created="Wed, 26 Jan 2011 04:55:15 +0000"  >&lt;p&gt;Gin-Ting, although you&apos;re right it&apos;s &quot;related&quot;; this is actually a separate problem. This issue is related to redirectTestOutputToFile=true and output at the end of the last test in the fork. Please file a separate issue and I will fix it for 2.7.3&lt;/p&gt;</comment>
                            <comment id="14454885" author="gchen77" created="Wed, 26 Jan 2011 13:18:27 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-690&quot; title=&quot;testSetCompleted called before testSetStarting when using m3 parallel builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-690&quot;&gt;&lt;del&gt;SUREFIRE-690&lt;/del&gt;&lt;/a&gt;. Thanks Kristian.&lt;/p&gt;</comment>
                            <comment id="17994030" author="olamy" created="Fri, 4 Jul 2025 07:14:08 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1934&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12809524">SUREFIRE-640</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>