<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:07:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-628] Parallel Execution: Output from junit.framework.TestListener.endTest() is swallowed</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-628</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I am using a junit.framework.TestListener to print some bookkeeping information on System.out before and after the testcase.&lt;/p&gt;

&lt;p&gt;When executed single-threaded, everything works fine, and I am getting both messages before and after the testcase. In parallel, only the message before the start of testcase is printed, while the message after the testcase disappears.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------------&lt;br/&gt;
Testcase output (single-threaded execution): both messages are printed&lt;br/&gt;
----------------------------------------------------------------------------------------&lt;br/&gt;
Running mho.SimpleSuiteTest&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; starting testcase mho.SimpleSuiteTest&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;mho.SimpleSuiteTest:testError - ERROR&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; finished testcase mho.SimpleSuiteTest, duration=0ms&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.062 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests in error:&lt;br/&gt;
  testError(mho.SimpleSuiteTest)&lt;/p&gt;

&lt;p&gt;Tests run: 1, Failures: 0, Errors: 1, Skipped: 0&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------------&lt;br/&gt;
Testcase output (parallel execution): second message is missing&lt;br/&gt;
----------------------------------------------------------------------------------------&lt;br/&gt;
Running mho.SimpleSuiteTest&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; starting testcase mho.SimpleSuiteTest&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;mho.SimpleSuiteTest:testError - ERROR&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.031 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests in error:&lt;br/&gt;
  testError(mho.SimpleSuiteTest)&lt;/p&gt;

&lt;p&gt;Tests run: 1, Failures: 0, Errors: 1, Skipped: 0&lt;/p&gt;</description>
                <environment>Windows/Cygwin, self-compiled version of the surefire-plugin 2.6-SNAPSHOT</environment>
        <key id="12809520">SUREFIRE-628</key>
            <summary>Parallel Execution: Output from junit.framework.TestListener.endTest() is swallowed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="mag">Magnus Naeslund</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jul 2010 07:20:59 +0000</created>
                <updated>Fri, 4 Jul 2025 07:14:11 +0000</updated>
                            <resolved>Sun, 8 May 2011 15:10:13 +0000</resolved>
                                                    <fixVersion>2.6</fixVersion>
                                    <component>Junit 4.7+ (parallel) support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14454573" author="mag" created="Fri, 9 Jul 2010 07:41:54 +0000"  >&lt;p&gt;The reason for this behaviour seems to be as follows:&lt;/p&gt;

&lt;p&gt;In class ConcurrentPrintStream.write(byte[], int, int), TestMethod.getThreadTestMethod() returns null when the endTest()-statement from the TestListener is printed. In this case, printing is delegated to the ByteArrayOutputStream out, which is never printed.&lt;/p&gt;</comment>
                            <comment id="14454563" author="krosenvold" created="Sat, 10 Jul 2010 09:29:00 +0000"  >&lt;p&gt;Made a partial fix in r962846&lt;/p&gt;

&lt;p&gt;Console output is now not discarded, The &quot;static&quot; output from a test run is output at the end, and in no particular order wrt the test methods.&lt;/p&gt;

&lt;p&gt;It should be possible to improve this, most notably for run-mode &quot;classes&quot; it should be possible to attach the TestSet to the Thread much the same way as we attach the TestMethod. For &quot;methods&quot;, it seems like all the static test methods are run sequentially on the main thread before threading is started, so it should possible to record and associate this with the correct test. As for &quot;both&quot; I think the best that can be done is to do /all/ the beforeclass stuff &lt;b&gt;before&lt;/b&gt; the test run and &lt;b&gt;all&lt;/b&gt; the afterClass stuff after the test runs.&lt;/p&gt;

&lt;p&gt;I will gladly review any patches received to further improve  this. The IT for surefire-628 should be extendable to verify the proper order.&lt;/p&gt;

&lt;p&gt;Anyone wishing to experiment with this can do the following:&lt;/p&gt;

&lt;p&gt;In directory:&lt;br/&gt;
surefire/surefire-integration-tests/src/test/resources/surefire-628-consoleoutputbeforeandafterclass&lt;/p&gt;

&lt;p&gt;Run commands tests like this:&lt;br/&gt;
mvn -Dsurefire.version=2.6-SNAPSHOT -Djunit.parallel=methods clean test&lt;br/&gt;
mvn -Dsurefire.version=2.6-SNAPSHOT -Djunit.parallel=classes clean test&lt;/p&gt;

&lt;p&gt;You should be able to test &amp;amp; observe the effects of any patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Deployed updated 2.6-SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="14454919" author="krosenvold" created="Sun, 8 May 2011 15:10:13 +0000"  >&lt;p&gt;We are unable to do anything about output that is not associated with a test because making assumptions about this would have severe implications for embedded use. Therefore, test output that cannot be associated with a testcase will just float right out to the console and the fix that was made for 2.6 is the end of this issue.&lt;/p&gt;</comment>
                            <comment id="17994032" author="olamy" created="Fri, 4 Jul 2025 07:14:11 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1958&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1958&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12720120" name="surefire-output.tar.gz" size="2121" author="mag" created="Fri, 9 Jul 2010 07:20:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bf87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>