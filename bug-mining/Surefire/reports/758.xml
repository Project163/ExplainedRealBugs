<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:18:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-2224] StatelessXmlReporter#getTestProblems() does not properly reflect report schema structure</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-2224</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;According to &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&lt;/a&gt; and &lt;a href=&quot;https://maven.apache.org/surefire/maven-failsafe-plugin/xsd/failsafe-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-failsafe-plugin/xsd/failsafe-test-report.xsd&lt;/a&gt; not all nested elements contain &lt;tt&gt;stackTrace&lt;/tt&gt;, &lt;tt&gt;system-out&lt;/tt&gt; and &lt;tt&gt;system-err&lt;/tt&gt; elements, but the code makes it conditional whether there is a stack trace or not. This does not comply with the schema definition. Either the nested element is simple content or complex. In the latter &lt;tt&gt;stackTrace&lt;/tt&gt; is mandatory, even if there is no strack trace according to the schema. The system streams are optional.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13562628">SUREFIRE-2224</key>
            <summary>StatelessXmlReporter#getTestProblems() does not properly reflect report schema structure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michael-o">Michael Osipov</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Dec 2023 15:35:39 +0000</created>
                <updated>Fri, 4 Jul 2025 07:43:56 +0000</updated>
                            <resolved>Fri, 22 Dec 2023 19:48:34 +0000</resolved>
                                    <version>3.2.3</version>
                                    <fixVersion>3.2.4</fixVersion>
                    <fixVersion>3.2.5</fixVersion>
                                    <component>xml generation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17799624" author="githubbot" created="Fri, 22 Dec 2023 01:03:27 +0000"  >&lt;p&gt;kriegaex commented on PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#issuecomment-1867103417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#issuecomment-1867103417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @michael-o, actually, I am a bit out of context here and not 100% sure what that code does and currently am busy otherwise, i.e. I am just looking at the code here on the website, which IMO is *&lt;b&gt;not&lt;/b&gt;* a good way to conduct a proper review. You have to check out the code and see what it does, inspect/run tests covering the code etc.&lt;/p&gt;

&lt;p&gt;   It looks as if in case of reported test errors or failures, it adds something like an &quot;error&quot; or &quot;failure&quot; tag to the XML and then, if any stack trace exists, also a &quot;stackTrace&quot; element and &quot;system-out&quot;/&quot;system-err&quot;.&lt;/p&gt;

&lt;p&gt;   Am I seeing correctly, that you just refactored the code with no functional changes, only reflecting the nesting structure of the XML output in the logical structure (`if` block) of the source code? If so, it looks good to me.&lt;/p&gt;

</comment>
                            <comment id="17799806" author="githubbot" created="Fri, 22 Dec 2023 11:44:02 +0000"  >&lt;p&gt;michael-o commented on PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#issuecomment-1867589786&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#issuecomment-1867589786&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; @michael-o, actually, I am a bit out of context here and not 100% sure what that code does and currently am busy otherwise, i.e. I am just looking at the code here on the website, which IMO is *&lt;b&gt;not&lt;/b&gt;* a good way to conduct a proper review. You have to check out the code and see what it does, inspect/run tests covering the code etc.&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; It looks as if in case of reported test errors or failures, it adds something like an &quot;error&quot; or &quot;failure&quot; tag to the XML and then, if any stack trace exists, also a &quot;stackTrace&quot; element and &quot;system-out&quot;/&quot;system-err&quot;.&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; Am I seeing correctly, that you just refactored the code with no functional changes, only reflecting the nesting structure of the XML output in the logical structure (`if` block) of the source code? If so, it looks good to me.&lt;/p&gt;

&lt;p&gt;   Just refactoring and abiding to the XML schemas: &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&lt;/a&gt; and &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17799920" author="githubbot" created="Fri, 22 Dec 2023 19:48:22 +0000"  >&lt;p&gt;asfgit merged PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17799921" author="michael-o" created="Fri, 22 Dec 2023 19:48:34 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=6eb7d7e5492d72cbb9528c722548b31acd9e7c57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6eb7d7e5492d72cbb9528c722548b31acd9e7c57&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17801871" author="githubbot" created="Tue, 2 Jan 2024 17:31:02 +0000"  >&lt;p&gt;marcphilipp commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1439664959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1439664959&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   This still needs to be called if `stackTrace != null` and `!enableNestedOutErrElements`. Otherwise, `error` and `failure` elements won&apos;t contain the stack trace as their content.&lt;/p&gt;


</comment>
                            <comment id="17801873" author="githubbot" created="Tue, 2 Jan 2024 17:37:57 +0000"  >&lt;p&gt;michael-o commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1439670377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1439670377&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   I think I understand what you mean. Let me rephrase and I guess you are right here, the schema is poorly designed. According to &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&lt;/a&gt; both `failure` and `error` aren&apos;t complex elements, thus do &lt;b&gt;not&lt;/b&gt; contain `stackTrace`. Their element body contains the strack trace?&lt;/p&gt;


</comment>
                            <comment id="17801874" author="githubbot" created="Tue, 2 Jan 2024 17:38:27 +0000"  >&lt;p&gt;michael-o commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1439670377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1439670377&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   I think I understand what you mean. Let me rephrase and I guess you are right here, the schema is poorly designed. According to &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd&lt;/a&gt; both `failure` and `error` aren&apos;t complex elements, thus do &lt;b&gt;not&lt;/b&gt; contain `stackTrace`. Their element body contains the strack trace? Is that the case, if so I will cancel the vote and work on a fix and let you know.&lt;/p&gt;


</comment>
                            <comment id="17802035" author="githubbot" created="Wed, 3 Jan 2024 07:13:45 +0000"  >&lt;p&gt;marcphilipp commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1440135518&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1440135518&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Yes, that&apos;s right.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Before (with 3.2.3 and earlier)&lt;br/&gt;
   ```xml&lt;br/&gt;
   &amp;lt;testcase name=&quot;addsTwoNumbers&quot; classname=&quot;com.example.project.CalculatorTests&quot; time=&quot;0.014&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;failure message=&quot;1 + 1 should equal 2 ==&amp;gt; expected: &amp;lt;3&amp;gt; but was: &amp;lt;2&amp;gt;&quot; type=&quot;org.opentest4j.AssertionFailedError&quot;&amp;gt;&amp;lt;![CDATA[org.opentest4j.AssertionFailedError: 1 + 1 should equal 2 ==&amp;gt; expected: &amp;lt;3&amp;gt; but was: &amp;lt;2&amp;gt;&lt;br/&gt;
     at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)&lt;br/&gt;
     at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)&lt;br/&gt;
     at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
     at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)&lt;br/&gt;
     at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:563)&lt;br/&gt;
     at com.example.project.CalculatorTests.addsTwoNumbers(CalculatorTests.java:26)&lt;br/&gt;
     at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
     at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)&lt;br/&gt;
     at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)&lt;br/&gt;
   ]]&amp;gt;&amp;lt;/failure&amp;gt;&lt;br/&gt;
   &amp;lt;/testcase&amp;gt;&lt;br/&gt;
   ```&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;After this change&lt;br/&gt;
   ```xml&lt;br/&gt;
   &amp;lt;testcase name=&quot;addsTwoNumbers&quot; classname=&quot;com.example.project.CalculatorTests&quot; time=&quot;0.014&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;failure message=&quot;1 + 1 should equal 2 ==&amp;gt; expected: &amp;lt;3&amp;gt; but was: &amp;lt;2&amp;gt;&quot; type=&quot;org.opentest4j.AssertionFailedError&quot;/&amp;gt;&lt;br/&gt;
   &amp;lt;/testcase&amp;gt;&lt;br/&gt;
   ```&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;



</comment>
                            <comment id="17802091" author="githubbot" created="Wed, 3 Jan 2024 09:42:24 +0000"  >&lt;p&gt;michael-o commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1440247439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1440247439&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Thanks for the confirmation. I will cancel the vote today, create an improvement request to change the schema in the next major to a complex element with `stackTrace` to align with the rest and another one to fix this regression. I will ping you as soon as I have something to test.&lt;/p&gt;


</comment>
                            <comment id="17802115" author="githubbot" created="Wed, 3 Jan 2024 10:55:00 +0000"  >&lt;p&gt;michael-o commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1440318628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1440318628&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }&lt;br/&gt;
+            ppw.endElement();&lt;br/&gt;
 &lt;br/&gt;
-            extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;br/&gt;
&lt;br/&gt;
Review Comment:&lt;br/&gt;
   Vote canceled.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;br/&gt;
 &lt;br/&gt;
-        boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;br/&gt;
-        if (stackTrace != null) {&lt;br/&gt;
-            if (hasNestedElements) {&lt;br/&gt;
-                ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) {+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Vote canceled and repo dropped.&lt;/p&gt;


</comment>
                            <comment id="17802226" author="githubbot" created="Wed, 3 Jan 2024 15:45:16 +0000"  >&lt;p&gt;michael-o commented on code in PR #702:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/702#discussion_r1440602428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/702#discussion_r1440602428&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -456,21 +456,13 @@ private static void getTestProblems(&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;boolean hasNestedElements = createOutErrElementsInside &amp;amp; stackTrace != null;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;if (stackTrace != null) {&lt;/li&gt;
	&lt;li&gt;if (hasNestedElements) {&lt;/li&gt;
	&lt;li&gt;ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+        if (enableNestedOutErrElements) {&lt;br/&gt;
+            ppw.startElement(&quot;stackTrace&quot;);&lt;br/&gt;
+            if (stackTrace != null) 
{
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
&lt;p&gt;+            ppw.endElement();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Fix: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/709&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="17995588" author="olamy" created="Fri, 4 Jul 2025 07:43:56 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2760&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13563454">SUREFIRE-2229</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1meaw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>