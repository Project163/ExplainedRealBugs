<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:16:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1675] Forked JVM terminates with &apos;halt&apos; when another module&apos;s tests fail</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1675</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;&lt;b&gt;Steps to reproduce:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Run the attached project with the following command:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn test -T2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;Expected outcome:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &apos;long&apos; modules&apos;s test&apos;s shutdown hook should be called&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;b&gt;Actual outcome:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &apos;long&apos; modules test&apos;s shutdown hook is never called&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Workaround:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Use &lt;tt&gt;shutdown=exit&lt;/tt&gt; configuration as below:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                &amp;lt;plugin&amp;gt;
                    &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
                    &amp;lt;configuration&amp;gt;
                        &amp;lt;shutdown&amp;gt;exit&amp;lt;/shutdown&amp;gt;
                    &amp;lt;/configuration&amp;gt;
                &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13243694">SUREFIRE-1675</key>
            <summary>Forked JVM terminates with &apos;halt&apos; when another module&apos;s tests fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="mohsenhariri">Mohsen Hariri</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jul 2019 14:10:07 +0000</created>
                <updated>Fri, 4 Jul 2025 07:33:40 +0000</updated>
                            <resolved>Wed, 24 Jul 2019 15:20:48 +0000</resolved>
                                    <version>2.22.2</version>
                    <version>3.0.0-M2</version>
                                    <fixVersion>3.0.0-M4</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16880400" author="mohsenhariri" created="Mon, 8 Jul 2019 14:20:39 +0000"  >&lt;p&gt;While running tests of&#160;a multi-module project in parallel, as soon as one module&apos;s tests fail, the maven parent process exits without waiting for the other forked test processes to run through their &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java#L296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&apos;acknowledgedExit&apos;&lt;/a&gt; procedure, so the forked processes hang until they are killed by a `halt` call in the &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java#L350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;`kill`&lt;/a&gt; method.&lt;/p&gt;</comment>
                            <comment id="16883843" author="tibor17" created="Fri, 12 Jul 2019 14:12:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohsenhariri&quot; class=&quot;user-hover&quot; rel=&quot;mohsenhariri&quot;&gt;mohsenhariri&lt;/a&gt;&lt;br/&gt;
Try to use the latest version 3.0.0-M3 and let me know how it works. Thx&lt;/p&gt;</comment>
                            <comment id="16883851" author="mohsenhariri" created="Fri, 12 Jul 2019 14:21:26 +0000"  >&lt;p&gt;It&apos;s exactly the same behavior.&lt;/p&gt;</comment>
                            <comment id="16885088" author="tibor17" created="Mon, 15 Jul 2019 11:05:02 +0000"  >&lt;p&gt;We in ASF Maven have failing build of Surefire project because of the same issue, at least it looks the same.&lt;br/&gt;
Trying to investigate it in the branch &lt;tt&gt;buildfix&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16888682" author="tibor17" created="Fri, 19 Jul 2019 08:14:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohsenhariri&quot; class=&quot;user-hover&quot; rel=&quot;mohsenhariri&quot;&gt;mohsenhariri&lt;/a&gt;&lt;br/&gt;
Currently the configuration parameter &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#shutdown&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;shutdown&lt;/a&gt; is set to &lt;tt&gt;testset&lt;/tt&gt; by default. There are other two options &lt;tt&gt;exit&lt;/tt&gt; and &lt;tt&gt;kill&lt;/tt&gt;.&lt;br/&gt;
Should I change the defaule value from &lt;tt&gt;testset&lt;/tt&gt; to &lt;tt&gt;exit&lt;/tt&gt; or &lt;tt&gt;kill&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="16891719" author="mohsenhariri" created="Wed, 24 Jul 2019 09:15:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; For me changing it to &lt;tt&gt;exit&lt;/tt&gt; resulted in shutdown hooks being called, as mentioned in the workaround in the ticket description.&lt;/p&gt;</comment>
                            <comment id="16891723" author="tibor17" created="Wed, 24 Jul 2019 09:23:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohsenhariri&quot; class=&quot;user-hover&quot; rel=&quot;mohsenhariri&quot;&gt;mohsenhariri&lt;/a&gt;&lt;br/&gt;
Thx for your reply. We have found real root cause of this bug and we have fixed it in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=623205bcde63efc02b5dc305119c87ad08a86276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=623205bcde63efc02b5dc305119c87ad08a86276&lt;/a&gt;&lt;br/&gt;
Currently I am writing additional tests.&lt;br/&gt;
Regarding the change of default value for the configuration parameter &lt;tt&gt;shutdown&lt;/tt&gt;, I will open a separate ticket.&lt;/p&gt;</comment>
                            <comment id="16891943" author="tibor17" created="Wed, 24 Jul 2019 15:20:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=bca90b23e264bb21db9c447f22f039d0cb5a0c1f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=bca90b23e264bb21db9c447f22f039d0cb5a0c1f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17995061" author="olamy" created="Fri, 4 Jul 2025 07:33:40 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2042&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12973938" name="badshutdown.zip" size="5065" author="mohsenhariri" created="Mon, 8 Jul 2019 14:14:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04gm8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>