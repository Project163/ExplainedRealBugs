<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:13:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1193] Surefire 2.19 hangs in the log4j build</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1193</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Log4j is getting periodic failures in Jenkins with the messages shown below. I am also seeing running the tests hang in various log4j modules when building on my MacBook Pro. The build never hung when using 2.18. We have reverted back to surefire 2.18 due to this.&lt;/p&gt;

&lt;p&gt;The full build output is temporarily available at &lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/1520/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/1520/console&lt;/a&gt;. We only keep the last 15 builds.&lt;/p&gt;

&lt;p&gt;ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.19:test (default-test) on project log4j-api: ExecutionException The forked VM terminated without properly saying goodbye. VM crash or System.exit called?&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Command was /bin/sh -c cd &quot;&amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api&lt;/a&gt;&quot;&amp;gt; &amp;amp;&amp;amp; /home/jenkins/jenkins-slave/tools/hudson.model.JDK/jdk-1.7u51/jre/bin/java -XX:MaxPermSize=512m -jar &apos;&amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefirebooter7073284324062596703.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefirebooter7073284324062596703.jar&lt;/a&gt;&apos;&amp;gt; &apos;&amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefire9073033079471575703tmp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefire9073033079471575703tmp&lt;/a&gt;&apos;&amp;gt; &apos;&amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefire_84682619741166881372tmp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/ws/log4j-api/target/surefire/surefire_84682619741166881372tmp&lt;/a&gt;&apos;&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :log4j-api&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;JENKINS&amp;#93;&lt;/span&gt; Archiving &amp;lt;&lt;a href=&quot;https://builds.apache.org/job/Log4j%202.x/ws/l&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Log4j%202.x/ws/l&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12909554">SUREFIRE-1193</key>
            <summary>Surefire 2.19 hangs in the log4j build</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="rgoers">Ralph Goers</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 05:16:41 +0000</created>
                <updated>Fri, 4 Jul 2025 07:24:42 +0000</updated>
                            <resolved>Sat, 28 Nov 2015 07:44:31 +0000</resolved>
                                    <version>2.19</version>
                                    <fixVersion>2.19.1</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14984766" author="garydgregory" created="Mon, 2 Nov 2015 05:25:38 +0000"  >&lt;p&gt;Console output attached.&lt;/p&gt;</comment>
                            <comment id="14987242" author="tibor17" created="Tue, 3 Nov 2015 13:14:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
I have run mvn test on project &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; with latest commit &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; and nothing hangs in Log4j API.&lt;br/&gt;
I did change surefire and failsafe version from 2.18.1 to 2.19 in the first POM.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Log4j 2 .................................... SUCCESS [ 10.075 s]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Log4j API .................................. SUCCESS [ 39.760 s]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Log4j Core ................................. FAILURE &lt;span class=&quot;error&quot;&gt;&amp;#91;09:50 min&amp;#93;&lt;/span&gt;&lt;br/&gt;
Tests in error:&lt;br/&gt;
  SslConfigurationTest.connectionFailsWithoutValidServerCertificate:53 &#187; Connect&lt;br/&gt;
  SslConfigurationTest.emptyConfigurationHasDefaultTrustStore:43 &#187; Connect Conne...&lt;/p&gt;

&lt;p&gt;Tests run: 949, Failures: 0, Errors: 2, Skipped: 31&lt;/p&gt;

&lt;p&gt;Do you have Jenkins CI timeout setup to  [ 50.035 s] ?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; commit 71c863dd52110766b6aadf3aaeb72f4607a3caf2&lt;/p&gt;

&lt;p&gt;I am using Win7. Can you check it out with Windows?&lt;br/&gt;
Is any test platform dependent?&lt;/p&gt;</comment>
                            <comment id="14987786" author="garydgregory" created="Tue, 3 Nov 2015 18:26:47 +0000"  >&lt;p&gt;I know &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt; is on the road today, but he might be able to provide this info...&lt;/p&gt;

&lt;p&gt;I too am using Win7. The Jenkins build failure was with commit &lt;tt&gt;1ee6758622f925c36fcaa9988f022b6747303bed&lt;/tt&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Do you have Jenkins CI timeout setup to [ 50.035 s] ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is that 50 seconds? I doubt that we have it set that low because the build takes at least 8 minutes on my (pretty beefy) laptop.&lt;/p&gt;

&lt;p&gt;The Jenkins build env vars are:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Build #1520

Environment variables

Name  &#8595;
Value   
_	/home/jenkins/tools/java/jdk1.7.0_55/bin/java
BUILD_CAUSE	SCMTRIGGER
BUILD_CAUSE_SCMTRIGGER	true
BUILD_DISPLAY_NAME	#1520
BUILD_ID	1520
BUILD_NUMBER	1520
BUILD_TAG	jenkins-Log4j 2.x-1520
BUILD_URL	https://builds.apache.org/job/Log4j%202.x/1520/
EXECUTOR_NUMBER	1
GIT_AUTHOR_EMAIL	builds@apache.org
GIT_AUTHOR_NAME	jenkins
GIT_BRANCH	origin/master
GIT_COMMIT	1ee6758622f925c36fcaa9988f022b6747303bed
GIT_COMMITTER_EMAIL	builds@apache.org
GIT_COMMITTER_NAME	jenkins
GIT_PREVIOUS_COMMIT	1ee6758622f925c36fcaa9988f022b6747303bed
GIT_PREVIOUS_SUCCESSFUL_COMMIT	d53af50c9500d1eae1bfa88424396e515fcb04ad
GIT_URL	https://git-wip-us.apache.org/repos/asf/logging-log4j2.git
HOME	/home/jenkins
HUDSON_HOME	/x1/jenkins/jenkins-home
HUDSON_SERVER_COOKIE	f4ebd1e6b0d976e8
HUDSON_URL	https://builds.apache.org/
JAVA_HOME	/home/jenkins/jenkins-slave/tools/hudson.model.JDK/jdk-1.7u51
JENKINS_HOME	/x1/jenkins/jenkins-home
JENKINS_SERVER_COOKIE	f4ebd1e6b0d976e8
JENKINS_URL	https://builds.apache.org/
JOB_NAME	Log4j 2.x
JOB_URL	https://builds.apache.org/job/Log4j%202.x/
LANG	en_US.UTF-8
LOGNAME	jenkins
MAIL	/var/mail/jenkins
NLSPATH	/usr/dt/lib/nls/msg/%L/%N.cat
NODE_LABELS	H10 Ubuntu ubuntu
NODE_NAME	H10
OLDPWD	/home/jenkins
PATH	/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
PATH+JDK	/home/jenkins/jenkins-slave/tools/hudson.model.JDK/jdk-1.7u51/bin
PWD	/home/jenkins/jenkins-slave
ROOT_BUILD_CAUSE	SCMTRIGGER
ROOT_BUILD_CAUSE_SCMTRIGGER	true
SHELL	/bin/bash
SHLVL	1
SSH_AGENT_PID	28580
SSH_AUTH_SOCK	/tmp/ssh-DfYyIzNqtK0R/agent.28579
SSH_CLIENT	140.211.11.14 53585 22
SSH_CONNECTION	140.211.11.14 53585 67.195.81.154 22
TEMP	/tmp/user/10021
TEMPDIR	/tmp/user/10021
TMP	/tmp/user/10021
TMPDIR	/tmp/user/10021
USER	jenkins
WORKSPACE	/home/jenkins/jenkins-slave/workspace/Log4j 2.x
XDG_RUNTIME_DIR	/run/user/10021
XDG_SESSION_ID	51
XFILESEARCHPATH	/usr/dt/app-defaults/%L/Dt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14987805" author="ralph.goers@dslextreme.com" created="Tue, 3 Nov 2015 18:32:44 +0000"  >&lt;p&gt;Yeah, I don&apos;t have the Jenkins info in front of me. But when I ran the build on my MacBook Pro I was getting hangs - sometimes in log4j-api and sometimes in log4j-iostreams. It wasn&apos;t consistent. With the older versions of the surefire plugin we have never experienced this. I should note that on the Mac Maven just completely hangs - I don&apos;t see the failure that happens in Jenkins. I can&apos;t even get a thread dump with jstack.&lt;/p&gt;

&lt;p&gt;Gary - do you know why he is getting those failures in log4j-core? We have one or two tests that seem to periodically fail in Jenkins - but they never fail on my Mac. However, I&apos;ve never seen those two particular tests fail.&lt;/p&gt;</comment>
                            <comment id="14987861" author="garydgregory" created="Tue, 3 Nov 2015 18:57:27 +0000"  >&lt;blockquote&gt;
&lt;p&gt;SslConfigurationTest.connectionFailsWithoutValidServerCertificate:53 &#187; Connect&lt;br/&gt;
SslConfigurationTest.emptyConfigurationHasDefaultTrustStore:43 &#187; Connect Conne...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Those tests would fail if &lt;tt&gt;login.yahoo.com:443&lt;/tt&gt; is not reachable.&lt;/p&gt;</comment>
                            <comment id="14988209" author="tibor17" created="Tue, 3 Nov 2015 21:50:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
Why the Jenkins build crashed after hanging? It really hanged for some time so that the CPU was very low?&lt;br/&gt;
Who did shutdown the forked JVM?&lt;/p&gt;

&lt;p&gt;Can you just print test class name in @BeforeClass?&lt;br/&gt;
We need to see which class is in the middle.&lt;/p&gt;

&lt;p&gt;There&apos;s one situation when the JVM may shutdown itself. The plugin JVM sends commands to forked JVM. The Forked JVM receives the command in std/in. If the std/in stream is corrupted so that the command cannot be decoded, the reader throws an exception which may result in shutdown. We should find out if this is happening. If it is this case then the question is why Maven process would corrupt the stream.&lt;/p&gt;</comment>
                            <comment id="14988221" author="tibor17" created="Tue, 3 Nov 2015 21:57:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
Is log4j calling System.setIn() in src/main or src/test?&lt;/p&gt;</comment>
                            <comment id="14988311" author="ralph.goers@dslextreme.com" created="Tue, 3 Nov 2015 22:34:02 +0000"  >&lt;p&gt;We did nothing the the Jenkins server - it crashed on its own.  I suspect Jenkins looks for this and kills jobs that are hung.&lt;/p&gt;

&lt;p&gt;As far as I know Log4j doesn&apos;t call System.setIn(). The ConsoleAppender test does call System.setOut() and System.setErr(). &lt;/p&gt;

&lt;p&gt;When I get home I can modify Log4j to use 2.19 again.  But the hang always seems to occur either on the very last test or after all the tests have run in a module.&lt;/p&gt;</comment>
                            <comment id="14989175" author="tibor17" created="Wed, 4 Nov 2015 09:16:08 +0000"  >&lt;p&gt;3rd party libs used by log4j do not use System.setIn()?&lt;br/&gt;
In that case it must be OS or Java issue.&lt;br/&gt;
I used Java 1.8.0_60. Please try to use the same JDK and I will try with Java 1.7.0_51 on Win7.&lt;br/&gt;
Please provide the Thread dump and try to print class in @BeforeClass.&lt;/p&gt;</comment>
                            <comment id="14989217" author="tibor17" created="Wed, 4 Nov 2015 09:54:22 +0000"  >&lt;p&gt;I can make an update in surefire SNAPSHOT version on the code I have suspicion.&lt;br/&gt;
If you are open for such test, it would help both.&lt;/p&gt;</comment>
                            <comment id="14989416" author="ralph.goers@dslextreme.com" created="Wed, 4 Nov 2015 11:50:34 +0000"  >&lt;p&gt;Absolutely. We&apos;d be happy to test.&lt;/p&gt;</comment>
                            <comment id="14991954" author="ralph.goers@dslextreme.com" created="Thu, 5 Nov 2015 16:48:33 +0000"  >&lt;p&gt;I reset the version to 2.19 on my Mac. The first time I ran the build it completed successfully. The second time it hung in log4j-api.  I see 3 processes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;23031 s001  S      0:27.15 /Library/Java/JavaVirtualMachines/Java7/Contents/Home/bin/java -Xmx1024m -Xms1024m -XX:MaxPermSize=512M -classpath /opt/maven/maven/boot/plexus-classworlds-2.5.1.jar -Dclassworlds.conf=/opt/maven/maven/bin/m2.conf -Dmaven.home=/opt/maven/maven org.codehaus.plexus.classworlds.launcher.Launcher clean install
23045 s001  S      0:00.00 /bin/sh -c cd /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api &amp;amp;&amp;amp; /Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home/jre/bin/java -XX:MaxPermSize=512m -jar /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefirebooter261715733872482261.jar /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefire2137188065857541949tmp /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefire_128688342312074142606tmp
23056 s001  S      0:09.18 /Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home/jre/bin/java -XX:MaxPermSize=512m -jar /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefirebooter261715733872482261.jar /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefire2137188065857541949tmp /Users/rgoers/projects/apache/logging/log4j/log4j2/logging-log4j2/log4j-api/target/surefire/surefire_128688342312074142606tmp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can get thread dumps of 23031 and 23056 but jstack on 23045 fails and I see no output from kill -3 23045. From what I can tell 23031 is waiting for 23056 and 23056 is waiting for 23045.&lt;/p&gt;</comment>
                            <comment id="14992145" author="tibor17" created="Thu, 5 Nov 2015 18:08:20 +0000"  >&lt;p&gt;I would say both 23056 and 23045 were triggered by master 23031.&lt;br/&gt;
Can you find out if all tests were finished and find the number of completed tests? Please see the reports in target/surefire-reports. Count them and compare with expected count.&lt;/p&gt;

&lt;p&gt;If the test set was completed, then only non-daemon thread may hold on VM. But this VM cannot exit normally while using non-daemon Threads in tests and therefore it times out after 30 sec and kills itself (this operation only on after all tests completed).&lt;/p&gt;

&lt;p&gt;Is it this case?&lt;br/&gt;
AFAIK shutdown hook in Java ThreadPoolService was not properly handling System.exit() in order to interrupt the threads.&lt;br/&gt;
Maybe that&apos;s why I did not see this issue on JDK 1.8. I will try with 1.7.&lt;/p&gt;

&lt;p&gt;Notice we added default configuration which is not agresive:&lt;br/&gt;
&amp;lt;shutdown&amp;gt;testset&amp;lt;/shutdown&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14992201" author="ralph.goers@dslextreme.com" created="Thu, 5 Nov 2015 18:36:21 +0000"  >&lt;p&gt;I ran it again with Java8. This time it hung in the log4j-web module. The output shows that it ran 6 of the 8 test classes. Once again I cannot get a thread dump. On my Mac it doesn&apos;t time out. It hangs until I do a kill -9.  I should note that Log4j has its own shutdown hook.&lt;/p&gt;

&lt;p&gt;I am happy to try with a SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="14992579" author="tibor17" created="Thu, 5 Nov 2015 22:01:40 +0000"  >&lt;p&gt;Thx Ralph. Let me investigate a little bit where I should prepare a new&lt;br/&gt;
snapshot version for you.&lt;/p&gt;

</comment>
                            <comment id="14992580" author="tibor17" created="Thu, 5 Nov 2015 22:02:40 +0000"  >&lt;p&gt;Thx Ralph. Let me investigate a little bit where I should prepare a new&lt;br/&gt;
snapshot version for you.&lt;/p&gt;

</comment>
                            <comment id="14993154" author="ralph.goers@dslextreme.com" created="Fri, 6 Nov 2015 05:27:30 +0000"  >&lt;p&gt;I realized that I was looking at the processes incorrectly. The first process is running Maven, the second process is a shell command (which is why I can&apos;t get a thread dump) and the third process is the one that is actually hung.  I&apos;ve attached a stack trace for that process. It seems to be in FileInputStream.readBytes().&lt;/p&gt;</comment>
                            <comment id="14993357" author="tibor17" created="Fri, 6 Nov 2015 08:42:40 +0000"  >&lt;p&gt;Ok, it means the Maven process does not send test class to forked VM.&lt;br/&gt;
As I understand 6 out of 8 tests has ran and it hangs since then.&lt;br/&gt;
Can you attach the thread dump of the master as well?&lt;br/&gt;
Sent from GMail.&lt;/p&gt;

</comment>
                            <comment id="14993676" author="ralph.goers@dslextreme.com" created="Fri, 6 Nov 2015 13:43:42 +0000"  >&lt;p&gt;I didn&apos;t get a thread dump of the master. I&apos;ll run it again and get thread dumps of both, although it may fail at a different spot.&lt;/p&gt;</comment>
                            <comment id="14993696" author="ralph.goers@dslextreme.com" created="Fri, 6 Nov 2015 13:55:31 +0000"  >&lt;p&gt;I ran the test again. This time it hung in log4j-slf4j-impl. It ran 4 of 6 tests. Attached are the thread dumps of both the master and the hung process.&lt;/p&gt;</comment>
                            <comment id="15009702" author="tibor17" created="Tue, 17 Nov 2015 22:24:34 +0000"  >&lt;p&gt;diagnosis of surefire ForkedBooter&lt;/p&gt;</comment>
                            <comment id="15009728" author="tibor17" created="Tue, 17 Nov 2015 22:33:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
It seems the Junit4Provider threw an exception.&lt;br/&gt;
I uploaded local repo for surefire 2.20-SNAPSHOT as diagnosis of surefire ForkedBooter.&lt;br/&gt;
This produces *.txt files in some target folders of log4j project.&lt;br/&gt;
Generated file names start with surefire-finished1, surefire-finished2, surefire-error-ite, surefire-error-t1, surefire-error-t2.&lt;br/&gt;
Please extract the zip in your Maven local repository run (perhaps your repo is mapped to ~/.m2/repository/), run the project again and upload the files as a zip to Jira. I will analyze it. &lt;/p&gt;</comment>
                            <comment id="15012419" author="tibor17" created="Thu, 19 Nov 2015 00:02:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
Pls see my message above. Can you check it out? I dont have chance to reproduce this bug.&lt;/p&gt;</comment>
                            <comment id="15012476" author="ralph.goers@dslextreme.com" created="Thu, 19 Nov 2015 00:36:14 +0000"  >&lt;p&gt;I will try as soon as I get a chance.&lt;/p&gt;</comment>
                            <comment id="15021235" author="tibor17" created="Sun, 22 Nov 2015 23:24:05 +0000"  >&lt;p&gt;I have a fix, but I need you guys to confirm it&apos;s working.&lt;br/&gt;
It is in my branch &lt;a href=&quot;https://github.com/Tibor17/maven-surefire/tree/surefire-1193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Tibor17/maven-surefire/tree/surefire-1193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Build Surefire 2.20-SNAPSHOT and check it out with your project.&lt;br/&gt;
$ git -b surefire-1193 clone &lt;a href=&quot;https://github.com/Tibor17/maven-surefire.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Tibor17/maven-surefire.git&lt;/a&gt;&lt;br/&gt;
$ cd maven-surefire&lt;br/&gt;
$ mvn install -DskipTests&lt;/p&gt;</comment>
                            <comment id="15030205" author="ralph.goers@dslextreme.com" created="Fri, 27 Nov 2015 19:57:15 +0000"  >&lt;p&gt;I tested this and it seems to work. I ran the build twice and it did not hang.&lt;/p&gt;</comment>
                            <comment id="15030221" author="tibor17" created="Fri, 27 Nov 2015 20:25:40 +0000"  >&lt;p&gt;Cool. I have to make some refactoring in the same part of code where the&lt;br/&gt;
fix was made. Can you repeat the test, let&apos;s say on Monday? The changes&lt;br/&gt;
will be done in master repo &lt;a href=&quot;https://github.com/apache/maven-surefire&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire&lt;/a&gt;&lt;br/&gt;
Thx.&lt;/p&gt;

</comment>
                            <comment id="15030222" author="ralph.goers@dslextreme.com" created="Fri, 27 Nov 2015 20:27:37 +0000"  >&lt;p&gt;Sure. Just let me know.&lt;/p&gt;</comment>
                            <comment id="15030417" author="tibor17" created="Sat, 28 Nov 2015 07:44:31 +0000"  >&lt;p&gt;commit c643b32d6c0ee6b963dc063b11dfd91de31875aa&lt;/p&gt;</comment>
                            <comment id="15030418" author="tibor17" created="Sat, 28 Nov 2015 07:46:17 +0000"  >&lt;p&gt;The master was updated. Please wait an hour untill ASF Jenkins completes Surefire job: &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/&lt;/a&gt;&lt;br/&gt;
The Version 2.20-SNAPSHOT should be available by then.&lt;/p&gt;</comment>
                            <comment id="15030427" author="hudson" created="Sat, 28 Nov 2015 08:24:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in maven-surefire #1512 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1512/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1512/&lt;/a&gt;)&lt;br/&gt;
surefire-1193 (tibor17: rev c643b32d6c0ee6b963dc063b11dfd91de31875aa)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;surefire-booter/src/test/java/org/apache/maven/surefire/booter/MasterProcessReaderTest.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/MasterProcessReader.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1193&quot; title=&quot;Surefire 2.19 hangs in the log4j build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1193&quot;&gt;&lt;del&gt;SUREFIRE-1193&lt;/del&gt;&lt;/a&gt; reworked MasterProcessReader (tibor17: rev 0693bd900cdb38d3aa0bd2d79cbf0c2f786783c5)&lt;/li&gt;
	&lt;li&gt;surefire-providers/surefire-junit47/src/main/java/org/apache/maven/surefire/junitcore/JUnitCoreProvider.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/TwoPropertiesWrapper.java&lt;/li&gt;
	&lt;li&gt;surefire-booter/src/test/java/org/apache/maven/surefire/booter/MasterProcessReaderTest.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/MasterProcessListener.java&lt;/li&gt;
	&lt;li&gt;surefire-booter/src/test/java/org/apache/maven/surefire/booter/CommandReaderTest.java&lt;/li&gt;
	&lt;li&gt;surefire-providers/surefire-testng/src/main/java/org/apache/maven/surefire/testng/TestNGProvider.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/CommandListener.java&lt;/li&gt;
	&lt;li&gt;surefire-booter/src/main/java/org/apache/maven/surefire/booter/LazyTestsToRun.java&lt;/li&gt;
	&lt;li&gt;surefire-providers/surefire-junit4/src/main/java/org/apache/maven/surefire/junit4/JUnit4Provider.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/BiProperty.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/CommandReader.java&lt;/li&gt;
	&lt;li&gt;surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java&lt;/li&gt;
	&lt;li&gt;surefire-api/src/main/java/org/apache/maven/surefire/booter/MasterProcessReader.java&lt;/li&gt;
	&lt;li&gt;surefire-booter/src/test/java/org/apache/maven/surefire/booter/JUnit4SuiteTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15331378" author="mxm" created="Wed, 15 Jun 2016 08:21:46 +0000"  >&lt;p&gt;Seeing the same error in Apache Flink builds after upgrading from 2.18.1 to 2.19.1. No errors, builds just gets stuck at the beginning of tests with no log output from the test itself, e.g. &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/137118454/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/137118454/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17994593" author="olamy" created="Fri, 4 Jul 2025 07:24:42 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2499&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12917529">SUREFIRE-1203</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12979298">SUREFIRE-1255</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12770035" name="SUREFIRE-1193.console.txt" size="25518" author="ggregory" created="Mon, 2 Nov 2015 05:25:38 +0000"/>
                            <attachment id="12770958" name="stack.txt" size="6282" author="rgoers" created="Fri, 6 Nov 2015 05:27:30 +0000"/>
                            <attachment id="12772850" name="surefire.local.repository.zip" size="1387899" author="tibordigana" created="Tue, 17 Nov 2015 22:24:34 +0000"/>
                            <attachment id="12771020" name="threads.zip" size="4448" author="rgoers" created="Fri, 6 Nov 2015 13:55:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nsw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>