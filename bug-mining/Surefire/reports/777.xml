<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:18:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1643] JUnit 5 in parallel execution mode confuses Surefire reports</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1643</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Hi I hope somebody here can help me out. I am observing something strange while using JUNIT 5 parallel execution. I have two test classes TagTests, and TagTypeTests. When I set the execution mode to CONCURRENT on both classes, and run them, the test report shows the test cases on the wrong test class. For example, the test case testA belongs to class TagTests, but it is shown in the TagTypeTests test report. TagTests has 11 test cases, and TagType has 13 test cases. But the test report shows there are 22 test cases in TagTypeTests, and 2 in TagTests. Is this a known issue of parallelism? How to get around the issue?&lt;/p&gt;

&lt;p&gt;Sam Brannen @sbrannen Mar 01 18:00&lt;br/&gt;
How is the test report generated? In an IDE? Using a build tool?&lt;/p&gt;

&lt;p&gt;James Zhou @jazhou Mar 01 19:47&lt;br/&gt;
@sbrannen I am using maven surefire plugin(ver 3.0.0-M3) to run the tests. Here is the results:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.42 s - in org.aaa.test.functional.tests.TagCrudTests&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Tests run: 23, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.148 s - in org.aaa.test.functional.tests.TagTypeTests&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Results:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Tests run: 24, Failures: 0, Errors: 0, Skipped: 0&lt;br/&gt;
@sbrannen there are actually 11 tests under TagCrudTests. Somehow only one test is shown in the report generated by surefire plugin&lt;/p&gt;

&lt;p&gt;Christian Stein @sormuras Mar 01 20:31&lt;br/&gt;
@jazhou Do you have a minimal (failing) example project to share?&lt;/p&gt;

&lt;p&gt;James Zhou @jazhou Mar 01 22:56&lt;br/&gt;
@sormuras Sure. Here is the code: &lt;a href=&quot;https://github.com/jazhou/junit5-parallel-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jazhou/junit5-parallel-test&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13219059">SUREFIRE-1643</key>
            <summary>JUnit 5 in parallel execution mode confuses Surefire reports</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olamy">Olivier Lamy</assignee>
                                    <reporter username="sor">Christian Stein</reporter>
                        <labels>
                            <label>triaged</label>
                    </labels>
                <created>Sat, 2 Mar 2019 05:17:34 +0000</created>
                <updated>Fri, 4 Jul 2025 07:33:18 +0000</updated>
                            <resolved>Sun, 23 Mar 2025 12:00:39 +0000</resolved>
                                    <version>3.0.0-M3</version>
                                    <fixVersion>3.5.3</fixVersion>
                                    <component>JUnit 5.x support</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="16782290" author="sor" created="Sat, 2 Mar 2019 05:37:46 +0000"  >&lt;p&gt;Using `junit-platform-maven-plugin` shows that the issue is within Surefire, details at&#160;&lt;a href=&quot;https://github.com/jazhou/junit5-parallel-test/issues/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jazhou/junit5-parallel-test/issues/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16818582" author="tibor17" created="Tue, 16 Apr 2019 03:14:57 +0000"  >&lt;p&gt;IMHO this is caused by the implementation of &lt;tt&gt;JUnitPlatformProvider&lt;/tt&gt; calling methods on &lt;tt&gt;RunListener&lt;/tt&gt; in stateful fashion. The &lt;tt&gt;ReportFactory.createReporter&lt;/tt&gt; creates a single instance but it is expected to create a proxy hiding stateless listener in the way how it is done in &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-providers/surefire-junit47/src/main/java/org/apache/maven/surefire/junitcore/ConcurrentRunListener.java#L64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JUnit4 provider&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16819862" author="tibor17" created="Wed, 17 Apr 2019 08:48:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sor&quot; class=&quot;user-hover&quot; rel=&quot;sor&quot;&gt;sor&lt;/a&gt;&lt;br/&gt;
Did you use &lt;tt&gt;forkCount=0&lt;/tt&gt; or &lt;tt&gt;forkMode=never&lt;/tt&gt; in the test for this issue?&lt;/p&gt;</comment>
                            <comment id="16819870" author="sor" created="Wed, 17 Apr 2019 09:04:18 +0000"  >&lt;p&gt;According to&#160;&lt;a href=&quot;https://github.com/jazhou/junit5-parallel-test/blob/master/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jazhou/junit5-parallel-test/blob/master/pom.xml&lt;/a&gt;&#160;... linked in the initial description ... it uses default values for both properties.&lt;/p&gt;</comment>
                            <comment id="16819993" author="tibor17" created="Wed, 17 Apr 2019 11:41:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sor&quot; class=&quot;user-hover&quot; rel=&quot;sor&quot;&gt;sor&lt;/a&gt;&lt;br/&gt;
I checked it out twice and i&apos;ve got two different results with the current snapshot version.&lt;br/&gt;
The &lt;tt&gt;RunListenerAdapter&lt;/tt&gt; in Surefire is too simple to be stateful with method statistics.&lt;br/&gt;
It means it is issue in JUnit5. Have you investigated the issue in Jupiter engine?&lt;/p&gt;</comment>
                            <comment id="16821305" author="tibor17" created="Thu, 18 Apr 2019 17:03:08 +0000"  >&lt;p&gt;Problem to solve: &lt;tt&gt;TesSetRunListener&lt;/tt&gt; is built on the philosophy that test-sets are arrived in a sequence and do not overlap. This should be reworked to a full parallelism support.&lt;/p&gt;</comment>
                            <comment id="17127076" author="tibor17" created="Fri, 5 Jun 2020 20:32:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1797&quot; title=&quot;Surefire report with parameterized tests contain all names of test the same&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1797&quot;&gt;&lt;del&gt;SUREFIRE-1797&lt;/del&gt;&lt;/a&gt; provides the integration test:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/tree/empty_element_on_failure_with_ParameterizedTest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/tree/empty_element_on_failure_with_ParameterizedTest&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17677333" author="JIRAUSER287608" created="Mon, 16 Jan 2023 11:39:54 +0000"  >&lt;p&gt;I had this same issue with xmls, it was causing reporting problem with rerunFailingTestsCount in parallel runs. Sometimes first run and rerun ended up in different xml files, and another report generator treating them as two separate tests.&lt;/p&gt;

&lt;p&gt;Small workaround was to use custom JUnit5Xml30StatelessReporter with custom StatelessXmlReporter.&lt;br/&gt;
This custom reporter then removes results that doesn&apos;t belong to the completed test set (class) and stores them in internal cache for later. If cache contains something that belongs to current completed test set then it just restores that entry from internal cache. Report entries can be modified easily, reference is available from TestSetStats. Completed, failed, skipped count fields can be modified using reflection. If anyone is interested I can share some code, but it&apos;s a bit hacky solution.&lt;/p&gt;</comment>
                            <comment id="17995043" author="olamy" created="Fri, 4 Jul 2025 07:33:18 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2082&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2082&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13229179">SUREFIRE-1661</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13586710">SUREFIRE-2252</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13249282">SUREFIRE-1687</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13306797">SUREFIRE-1795</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13550670">SUREFIRE-2195</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13302412">SUREFIRE-1786</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13200151">SUREFIRE-1603</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13613340">SUREFIRE-2298</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13613657">SUREFIRE-2299</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13586710">SUREFIRE-2252</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z009eo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>