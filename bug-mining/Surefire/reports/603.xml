<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:15:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1424] javax.transaction.TransactionManager not visible with Java9</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1424</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I am trying to port Spring Boot to Java9 and I am hitting an issue that looks like Maven specific. I&apos;ve managed to trim down the problem to &lt;a href=&quot;https://github.com/snicoll-scratches/test-jta-java9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a simple class that doesn&apos;t involve Spring Boot&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If I run this project on the command line, I get the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.043 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in com.example.testjtajava9.TestJtaJava9ApplicationTests
contextLoads(com.example.testjtajava9.TestJtaJava9ApplicationTests)  Time elapsed: 0.006 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NoClassDefFoundError: javax/transaction/TransactionManager
	at com.example.testjtajava9.TestJtaJava9ApplicationTests.contextLoads(TestJtaJava9ApplicationTests.java:9)
Caused by: java.lang.ClassNotFoundException: javax.transaction.TransactionManager
	at com.example.testjtajava9.TestJtaJava9ApplicationTests.contextLoads(TestJtaJava9ApplicationTests.java:9)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I run that test with IntelliJ IDEA, it passes. This sample project has also a simple Gradle build that shows it works with Gradle as well.&lt;/p&gt;
</description>
                <environment>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T21:39:06+02:00)&lt;br/&gt;
Maven home: /Users/snicoll/tools/maven&lt;br/&gt;
Java version: 9, vendor: Oracle Corporation&lt;br/&gt;
Java home: /Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home&lt;br/&gt;
Default locale: en_BE, platform encoding: UTF-8&lt;br/&gt;
OS name: &amp;quot;mac os x&amp;quot;, version: &amp;quot;10.12.6&amp;quot;, arch: &amp;quot;x86_64&amp;quot;, family: &amp;quot;mac&amp;quot;</environment>
        <key id="13105016">SUREFIRE-1424</key>
            <summary>javax.transaction.TransactionManager not visible with Java9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="snicoll">Stephane Nicoll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Sep 2017 08:16:08 +0000</created>
                <updated>Fri, 4 Jul 2025 07:29:23 +0000</updated>
                            <resolved>Sat, 2 Dec 2017 15:57:59 +0000</resolved>
                                    <version>2.20.1</version>
                                    <fixVersion>2.21.0</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>23</watches>
                                                                                                                <comments>
                            <comment id="16180527" author="awilkinson" created="Tue, 26 Sep 2017 09:24:21 +0000"  >&lt;p&gt;This appears to be a regression in 2.20.1. The sample linked above works with Surefire 2.20 but fails with 2.20.1. With 2.20.1, the JVM is launched with &lt;tt&gt;--add-modules java.se.ee&lt;/tt&gt; but with 2.20 it is not. Adding the &lt;tt&gt;java.se.ee&lt;/tt&gt; module breaks JTA as only some of its classes are in that module. This split package leads to the &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; reported above. This would appear to be an unanticipated side-effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1403&quot; title=&quot;[Jigsaw] [Java 9] add &amp;quot;--add-modules java.se.ee&amp;quot; to forked CLI argument&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1403&quot;&gt;&lt;del&gt;SUREFIRE-1403&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16180538" author="awilkinson" created="Tue, 26 Sep 2017 09:34:40 +0000"  >&lt;p&gt;A workaround is to explicitly add the &lt;tt&gt;java.base&lt;/tt&gt; module which stops the unwanted &lt;tt&gt;java.se.ee&lt;/tt&gt; module from being added:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-surefire-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.20.1&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;argLine&amp;gt;&lt;/span&gt;--add-modules java.base&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/argLine&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16184813" author="tibor17" created="Thu, 28 Sep 2017 20:23:51 +0000"  >&lt;p&gt;I added &lt;tt&gt;--add-modules java.se.ee&lt;/tt&gt; to Version &lt;tt&gt;2.20.1&lt;/tt&gt; because we wanted to fix such ClassLoader issues reported in Jira.&lt;br/&gt;
This is not a regression and not a bug in Surefire. This is actually problem with Oracle because broke backwards compatibility. Several years ago Oracle planned to design JDK in a way that JDK would be extensible. So if you imaging that you put &lt;tt&gt;javax&lt;/tt&gt; extensions JAR &lt;tt&gt;javax.transctions.jar&lt;/tt&gt; as a module in your JRE installation, this could extend Java SE API with JTA from Java EE7.&lt;br/&gt;
This mechanism and such JTA JAR/module does not exist and the only thing is to apply &lt;tt&gt;--add-modules java.se.ee&lt;/tt&gt; or any other module &lt;tt&gt;java.base&lt;/tt&gt; in &lt;tt&gt;argLine&lt;/tt&gt; and &lt;tt&gt;.mvn/jvm.config&lt;/tt&gt; or add dependency &lt;tt&gt;javax:javaee-api:7.0&lt;/tt&gt; with &lt;tt&gt;test&lt;/tt&gt; scope in you POM.&lt;br/&gt;
Another issue is that Java API is not exposed however it is inside of JRE.&lt;br/&gt;
Oracle says that &lt;tt&gt;javax.xml.bind&lt;/tt&gt; and &lt;tt&gt;javax.activation&lt;/tt&gt; is EE related. I disagree. This is also SE and people use it in console Swing applications because these two modules are a pure set of utilities and not managed by container. The plan is to delete several APIs.&lt;br/&gt;
If Oracle wants to delete some APIs then they should introduce a mechanism to &lt;tt&gt;extend&lt;/tt&gt; JRE and segregate deleted JAR modules with  deleted API to download such modules from Oracle web page + let the user install extensions in JRE. Thus the user will have a chance to recover broken compatibility.&lt;/p&gt;</comment>
                            <comment id="16185460" author="rfscholte" created="Fri, 29 Sep 2017 07:36:00 +0000"  >&lt;p&gt;Hi Tibor,&lt;/p&gt;

&lt;p&gt;moving this to the dev-list, I don&apos;t think JIRA is the right place for  &lt;br/&gt;
this kind of discussions.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is not a regression and not a bug in Surefire.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, I don&apos;t agree with you. The Java8 project provided by St&#233;phane  &lt;br/&gt;
works with 2.20.0, but not with 2.20.1, so for me this is clearly a  &lt;br/&gt;
regression in surefire.&lt;/p&gt;

&lt;p&gt;We are all aware that the modularization in Java 9 can break things, and  &lt;br/&gt;
yes sometimes that can be quite frustrating. I think it is the task of  &lt;br/&gt;
Maven to solve these kind of issues where possible. Maven should solve the  &lt;br/&gt;
hard parts for using Java to let users experience a great way to develop  &lt;br/&gt;
with Java.&lt;/p&gt;

&lt;p&gt;I don&apos;t mind picking this issue up and try to get rid of the  &lt;br/&gt;
&quot;--add-modules java.se.ee&quot; (this issue just confirms to me it is indeed a  &lt;br/&gt;
hack). Alan pointed me to some dependencies we should add, which should  &lt;br/&gt;
solve this issue.&lt;/p&gt;

&lt;p&gt;Robert&lt;/p&gt;</comment>
                            <comment id="16185477" author="eolivelli" created="Fri, 29 Sep 2017 07:58:00 +0000"  >&lt;p&gt;Robert, Tibor,&lt;br/&gt;
I agree with Robert that the tweak about adding --add-modules java.se.ee&lt;br/&gt;
has really limited effect as I pointed out in another private email thread,&lt;br/&gt;
actually the hack does not work with more than one forked JVM.&lt;/p&gt;

&lt;p&gt;My proposal is to drop that fix and document how to deal with changes in&lt;br/&gt;
java9, most of the tricks are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;using JDK_JAVA_OPTIONS=--add-modules=java.se.ee&lt;/li&gt;
	&lt;li&gt;using .mvn/jvm.config&lt;/li&gt;
	&lt;li&gt;using profiles activated on java version &amp;gt;= 9&lt;/li&gt;
	&lt;li&gt;adding explicit dependencies for APIs dropped by default (non included in&lt;br/&gt;
java.base)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have some issues which I cannot resolve:&lt;br/&gt;
1) licensing about those new dependencies&lt;br/&gt;
if you load javax.xml.xxxx from the JDK you do not have to redistribute it,&lt;br/&gt;
but if you bundle those jars within your app maybe you will not be happy&lt;br/&gt;
about the CCDL license&lt;/p&gt;

&lt;p&gt;2) dealing with modules like java.sql which as not in java.base (&lt;br/&gt;
&lt;a href=&quot;http://download.java.net/java/jdk9/docs/api/java.base-summary.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.java.net/java/jdk9/docs/api/java.base-summary.html&lt;/a&gt;)&lt;br/&gt;
Currently I have no solution as there is no official maven dependency for&lt;br/&gt;
java.sql package&lt;/p&gt;

&lt;p&gt;Enrico&lt;/p&gt;


</comment>
                            <comment id="16185514" author="alanb" created="Fri, 29 Sep 2017 08:43:00 +0000"  >&lt;p&gt;You shouldn&apos;t need to be concerned with the java.sql module. The only &lt;br/&gt;
modules that you need to be concerned about are:&lt;/p&gt;

&lt;p&gt;java.corba&lt;br/&gt;
java.transaction&lt;br/&gt;
java.activation&lt;br/&gt;
java.xml.bind&lt;br/&gt;
java.xml.ws&lt;br/&gt;
java.xml.ws.annotation&lt;/p&gt;

&lt;p&gt;and the java.se.ee aggregator.&lt;/p&gt;

&lt;p&gt;These modules are deprecated in Java SE and are proposed to be removed &lt;br/&gt;
in a future release.&lt;/p&gt;

&lt;p&gt;Aside from java.corba, the 5 modules shared with Java EE are standalone &lt;br/&gt;
technologies, each with one or more JSRs and its own download. Each of &lt;br/&gt;
these projects used to be on java.net but moved to the Java EE github &lt;br/&gt;
project recently. I don&apos;t know if the move to Eclipse will change &lt;br/&gt;
anything there.&lt;/p&gt;

&lt;p&gt;In any case, each of the standalone versions can be deployed on the &lt;br/&gt;
class path with JDK 9.&lt;/p&gt;

&lt;p&gt;In time they will be deployable as modules too and this will allow them &lt;br/&gt;
to be deployed on the upgrade module path (--upgrade-module-path) to &lt;br/&gt;
upgrade/override the module in the run-time image with the standalone or &lt;br/&gt;
Java EE module. This will actually work with all except for the &lt;br/&gt;
transaction API as there are a couple of issues to sort out there before &lt;br/&gt;
it can be deployed as a module.&lt;/p&gt;

&lt;p&gt;As I understand it, the Spring folks in the JIRA issue are deploying the &lt;br/&gt;
JTA JAR file on the class path. That should just work but is complicated &lt;br/&gt;
by `--add-module=java.se.ee` as that will cause the java.transaction &lt;br/&gt;
module to be resolved. You can&apos;t split the javax.transaction package &lt;br/&gt;
between a module and the class path.&lt;/p&gt;

&lt;p&gt;For the surefire plugin then dropping the --add-modules should be looked &lt;br/&gt;
at. You&apos;ll need to do that anyway once java.se.ee goes away. If the &lt;br/&gt;
plugin relies on JAXB then adding a dependency on the standalone version &lt;br/&gt;
should work.&lt;/p&gt;

&lt;p&gt;-Alan&lt;/p&gt;



</comment>
                            <comment id="16185556" author="eolivelli" created="Fri, 29 Sep 2017 09:23:01 +0000"  >


&lt;p&gt;From the point of view of a developer which uses Maven there is no Maven&lt;br/&gt;
style way to use java.sql module, like &quot;adding a dependency&quot;&lt;br/&gt;
The hack on surefire tried to solve this problem.&lt;/p&gt;

&lt;p&gt;Using JDK_JAVA_OPTIONS is an option, but as it is a env entry it must be&lt;br/&gt;
set externally to the maven pom.xml or config&lt;br/&gt;
Using .mvn/jvm.config will prevent the build to work on java8 (except from&lt;br/&gt;
using -XX:+IgnoreUnrecognizedVMOptions which will be dropped in java11 ??)&lt;/p&gt;

&lt;p&gt;Which is the best suggestion to give to maven users ?&lt;/p&gt;

&lt;p&gt;&amp;#8211; Enrico&lt;/p&gt;


</comment>
                            <comment id="16186079" author="alanbateman" created="Fri, 29 Sep 2017 16:57:18 +0000"  >&lt;p&gt;Maven runs on the class path. The default set of root modules when you are compiling code or running on the class path includes the java.sql module &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; so you don&apos;t need to do anything (you don&apos;t need `--add-modules java.sql`). Once you get the all the plugins using the standalone versions of the modules shared with Java EE then you shouldn&apos;t need any special module options.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://openjdk.java.net/jeps/261#Root-modules&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/261#Root-modules&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16186122" author="tibor17" created="Fri, 29 Sep 2017 17:30:53 +0000"  >&lt;p&gt;Robert,&lt;br/&gt;
Yes it is a regression but in JDK9. Oracle was given a trust from Java community to introduce modular JDK. Additionally Oracle broke backwards compatibility and user&apos;s experience with JDK. This is not our problem.&lt;br/&gt;
In Summer Enrico in Jira required to have the same user&apos;s experience with Surefire like it was in JDK8. Therefore we added &lt;tt&gt;--add-module&lt;/tt&gt;.&lt;br/&gt;
I could not imaging that Oracle did more and removed &lt;tt&gt;TransactionManager&lt;/tt&gt; - even if EE related.&lt;br/&gt;
I would like to open &lt;tt&gt;src.zip&lt;/tt&gt; in JDK9 and JDK8 and I will compare these modules/packages. Then I will try to make a test and see if &lt;tt&gt;TransactionManager&lt;/tt&gt; would be taken from dependency &lt;tt&gt;javax:javaee-api:7.0&lt;/tt&gt;:&lt;br/&gt;
java.corba&lt;br/&gt;
java.transaction&lt;br/&gt;
java.activation&lt;br/&gt;
java.xml.bind&lt;br/&gt;
java.xml.ws&lt;br/&gt;
java.xml.ws.annotation&lt;/p&gt;

&lt;p&gt;Let&apos;s see what we can do in order to satisfy both parties; one who want to have comfort like before and another who want avoid current issue.&lt;/p&gt;

&lt;p&gt;bwt, regarding &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1262&quot; title=&quot;Add modulepath support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1262&quot;&gt;&lt;del&gt;SUREFIRE-1262&lt;/del&gt;&lt;/a&gt; I am finishing the polymorphism around &lt;tt&gt;ForkConfiguration&lt;/tt&gt;, &lt;tt&gt;ClassPath*&lt;/tt&gt; and the result will be very nice. The CLI of Jigsaw was taken from Robert&apos;s branch, so Big Thanks to Robert&apos;s effort.&lt;/p&gt;</comment>
                            <comment id="16210827" author="reschke" created="Thu, 19 Oct 2017 10:12:29 +0000"  >&lt;p&gt;Note there&apos;s a similar problem with javax.transaction.UserTransaction - see &amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-4200&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JCR-4200&lt;/a&gt;&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="16210846" author="alanbateman" created="Thu, 19 Oct 2017 10:25:46 +0000"  >&lt;p&gt;It&apos;s the same issue. If you run with - -add-modules $XXX where XXX is any of &quot;java.transaction&quot;, &quot;java.corba&quot;, &quot;java.se.ee&quot; or &quot;ALL-SYSTEM&quot; then you&apos;ll load the java.transaction module from the JDK. I think you are instead hoping that the Java Transaction classes on the class path will be loaded and this will work if the - -add-modules is dropped.&lt;/p&gt;

&lt;p&gt;This will all be much similar once the JDK jettisons these modules, the first steps in that direction happened in JDK 9. Running with - -add-modules to use the java.transaction in the JDK unwinds that, and makes it harder to upgrade.&lt;/p&gt;</comment>
                            <comment id="16210879" author="reschke" created="Thu, 19 Oct 2017 11:14:03 +0000"  >&lt;p&gt;I think the magic to include --add-modules was indeed well-intended, but if the edge cases affect you it&apos;s becoming hard to use 2.20.1 with Java 9. A potential compromise would be to leave the magic in, but to have a way to disable it.&lt;/p&gt;</comment>
                            <comment id="16211054" author="reschke" created="Thu, 19 Oct 2017 13:36:01 +0000"  >&lt;p&gt;FWIW, I&apos;ve for now worked around the issue by always specifying:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-XX:+IgnoreUnrecognizedVMOptions --add-modules=java.xml.bind
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Note the &quot;=&quot; because otherwise Java 8 will see two arguments)&lt;/p&gt;</comment>
                            <comment id="16213126" author="tibor17" created="Fri, 20 Oct 2017 19:46:00 +0000"  >&lt;p&gt;The Surefire was design so that JDK version is recognized.&lt;br/&gt;
If it was successfully recognized (does not matter whether from Toolchain&lt;br/&gt;
or java_home, or jvm parameter) and the version is &amp;gt;= 9 then&lt;br/&gt;
&quot;--add-modules&quot; is added.&lt;br/&gt;
The JDK 8 should not have this problem; otherwise the CI build of Surefire&lt;br/&gt;
could not pass.&lt;br/&gt;
If you have still have this problem, please attach your project as a zip&lt;br/&gt;
file to Jira, include command you start it and add a list of all&lt;br/&gt;
environment variables (+ mvn --version).&lt;br/&gt;
Thx.&lt;/p&gt;

&lt;p&gt;On Thu, Oct 19, 2017 at 3:37 PM, Julian Reschke (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16213145" author="reschke" created="Fri, 20 Oct 2017 20:00:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; - the problem is the default of adding &lt;tt&gt;&amp;#45;&amp;#45;add-modules&lt;/tt&gt; under Java 9. Because it does,  &lt;tt&gt;javax.transaction.UserTransaction&lt;/tt&gt; becomes invisible, &lt;b&gt;although&lt;/b&gt; it is on the classpath. My workaround is to set &lt;tt&gt;-&amp;#45;add-modules java.xml.bind&lt;/tt&gt;, so that surefire does not add &lt;tt&gt;&amp;#45;&amp;#45;add-modules&lt;/tt&gt; itself. A config parameter that disables this behavior would help a lot.&lt;/p&gt;

&lt;p&gt;If you want to reproduce this, checkout &lt;a href=&quot;https://svn.apache.org/repos/asf/jackrabbit/trunk/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/jackrabbit/trunk/&lt;/a&gt; with a revision prior to &lt;a href=&quot;http://svn.apache.org/r1812634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1812634&lt;/a&gt;, and then try to build with jdk-9.&lt;/p&gt;</comment>
                            <comment id="16213560" author="tibor17" created="Sat, 21 Oct 2017 00:15:00 +0000"  >&lt;p&gt;Also Surefire is designed so that &quot;--add-modules&quot; is not added if user&lt;br/&gt;
already did so, nevertheless what modules are specified.&lt;/p&gt;

&lt;p&gt;On Fri, Oct 20, 2017 at 10:01 PM, Julian Reschke (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16213622" author="tibor17" created="Sat, 21 Oct 2017 01:05:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=julian.reschke%40gmx.de&quot; class=&quot;user-hover&quot; rel=&quot;julian.reschke@gmx.de&quot;&gt;julian.reschke@gmx.de&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&lt;br/&gt;
The problem is that Oracle removed all classes from &lt;tt&gt;javax.transaction.xa.*&lt;/tt&gt; in &lt;tt&gt;java.transaction&lt;/tt&gt; module except for JTA exceptions and the module is unplugged.&lt;br/&gt;
IIYUC you say that you added &lt;tt&gt;javax.transaction.UserTransaction&lt;/tt&gt; via Maven dependency on classpath but because of Java 9 already associated &lt;tt&gt;javax.transaction&lt;/tt&gt; package with internal module having same module/package name as in your dependency, your dependency does not take precedence?&lt;br/&gt;
How many decisions the new configuration should do?&lt;/p&gt;</comment>
                            <comment id="16213718" author="reschke" created="Sat, 21 Oct 2017 04:00:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;IIYUC you say that you added javax.transaction.UserTransaction via Maven dependency on classpath but because of Java 9 already associated javax.transaction package with internal module having same module/package name as in your dependency, your dependency does not take precedence?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How many decisions the new configuration should do?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure what you&apos;re getting at. The current situation where &lt;tt&gt;&amp;#45;&amp;#45;add-modules&lt;/tt&gt; is added silently definitively causes harm in cases like this, though. An override would be appreciated.&lt;/p&gt;</comment>
                            <comment id="16213778" author="alanbateman" created="Sat, 21 Oct 2017 07:14:04 +0000"  >&lt;p&gt;Again, at issue here is that you cannot upgrade a module  by means of a JAR file on the class path. For class path applications, the JDK does not resolve the java.transaction module so you can put JTA on the class path and it should work like any library on the class path. However if you compile or run with `--add-modules java.transaction` (or &quot;java.se.ee&quot; or &quot;ALL-SYSTEM&quot;) then java.transaction will be resolved so the class path will never be search for classes in the javax.transaction package.&lt;/p&gt;

&lt;p&gt;Constrast that with JDK 8 where the only supported way to upgrade JTA with the version from Java EE was to use the endorsed standards override mechanism. Aside from app servers, few knew about that mechanism and instead deployed the JTA JAR file on the class path. If you probe closely then you&apos;ll see that the javax.transaction.xa classes were always loaded from the JDK. In the case of the javax.transaction package (where Java SE only defines a small subset), some of the classes were loaded from the JDK, some from the JAR file. It was only an accident that it ever worked.&lt;/p&gt;</comment>
                            <comment id="16213817" author="tibor17" created="Sat, 21 Oct 2017 08:41:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanb&quot; class=&quot;user-hover&quot; rel=&quot;alanb&quot;&gt;alanb&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlanBateman&quot; class=&quot;user-hover&quot; rel=&quot;AlanBateman&quot;&gt;AlanBateman&lt;/a&gt;&lt;br/&gt;
Again, however I understand class loading issue, the Oracle did not do what they planned to initially to do. They wanted JDK/JRE to simply extend by adding jar modules. Current status in Java 9 is a precedence and anything can be changed so that you would not tell that it would be Java in few years. Java was built on fact that it was stable and not removed.&lt;br/&gt;
So Oracle should rely on initial idea that &lt;tt&gt;javax&lt;/tt&gt; packages and &lt;tt&gt;java.transaction&lt;/tt&gt; are extensions and should go to separate jar file files and User would download them from Oracle&apos;s &lt;tt&gt;downloads.html&lt;/tt&gt; and/or installation on Windows will interactively download it in to JRE 9 and reconstruct what people rely on. The bad is that Oracle &lt;tt&gt;unplugged&lt;/tt&gt; modules and &lt;tt&gt;removed&lt;/tt&gt; classes without giving ability to get it back to previous status preventing from happened precedence.&lt;br/&gt;
Instead your arguments are &lt;tt&gt;because of EE classes&lt;/tt&gt;, but it is not entirely truth because &lt;tt&gt;Java Activation&lt;/tt&gt; and &lt;tt&gt;JAXB&lt;/tt&gt; are pure static utilities and annotations which have nothing to do with container managed app. You can easily run the utilities in &lt;tt&gt;public static void main()&lt;/tt&gt;.&lt;br/&gt;
Oracle could make it so dynamic that application without &lt;tt&gt;module-info&lt;/tt&gt; would behave as before and all modules are on classpath as it was in Java 8, and opposite in modular app is recognized. &lt;tt&gt;Now Surefire substitutes this behavior and I think this is what Users want&lt;/tt&gt;. But no, Oracle &lt;tt&gt;dictated&lt;/tt&gt; something in the world and we have the problem, we have to do your job! This is the problem.&lt;/p&gt;</comment>
                            <comment id="16213822" author="krzyk" created="Sat, 21 Oct 2017 09:09:21 +0000"  >&lt;p&gt;I don&apos;t think there is a point in arguing what should be in JDK and what shouldn&apos;t, who is right and who is not.&lt;/p&gt;

&lt;p&gt;Current situation is that surefire makes something that user doesn&apos;t expect (adding all modules under java.se.ee) and has to do workarounds to make surefire work with given application (make user choose which modules to load, don&apos;t do it for him). As of now when one encounters a problem similar to the one discussed here, &quot;the net&quot; recommends using older surefire/failsafe version. I think this is not a healthy situation.&lt;/p&gt;</comment>
                            <comment id="16213831" author="tibor17" created="Sat, 21 Oct 2017 09:47:42 +0000"  >&lt;p&gt;No it is not healthy but it is feature required from your group, Users. Just check it in Jira and you will see. I am now comparing the set of classes in modules for removal against Java 8. This is really bad situation and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmusgrov&quot; class=&quot;user-hover&quot; rel=&quot;mmusgrov&quot;&gt;mmusgrov&lt;/a&gt; in &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1265&quot; title=&quot;reuseForks=false fails on jdk-9-ea builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1265&quot;&gt;&lt;del&gt;SUREFIRE-1265&lt;/del&gt;&lt;/a&gt;&lt;/tt&gt; required this feature so the users should say what to do now. But the worst is that I and we spent our private time to enter integration tests and code and I am really angry about what Oracle&apos;s consequences cause here!!!&lt;/p&gt;</comment>
                            <comment id="16213850" author="eolivelli" created="Sat, 21 Oct 2017 11:19:31 +0000"  >&lt;p&gt;IMHO we have two options:&lt;br/&gt;
1)  Add a flag to inject java.ee.se in case of java9&lt;br/&gt;
Or&lt;br/&gt;
2) Drop it and write a doc which explains how to use maven profiles and surefire arg line to add java.ee.se in case of java9&lt;/p&gt;

&lt;p&gt;I can send a pr for 1) or help writing a blog post for 2)&lt;/p&gt;
</comment>
                            <comment id="16213853" author="tibor17" created="Sat, 21 Oct 2017 11:27:34 +0000"  >&lt;p&gt;I want to update documentation and list all dependencies which must be added by the user instead of removed modules.&lt;br/&gt;
I did some research by myself but I am not sure if the substitutes of removed API is compliant with Java 9 and implementation.&lt;br/&gt;
Please help somebody!&lt;br/&gt;
Oracle should add Maven dependencies as substitutes of removed modules here: &lt;a href=&quot;http://openjdk.java.net/jeps/261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/261&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;These are the removed modules:&lt;br/&gt;
java.corba&lt;br/&gt;
java.transaction&lt;br/&gt;
java.activation&lt;br/&gt;
java.xml.bind&lt;br/&gt;
java.xml.ws&lt;br/&gt;
java.xml.ws.annotation&lt;/p&gt;

&lt;p&gt;These are the Maven artifacts as API (no implementation), which I am not sure if versions are compatible with API in Java 9:&lt;br/&gt;
javax.activation:javax.activation-api:1.2.0&lt;br/&gt;
javax.transaction:javax.transaction-api:1.2&lt;br/&gt;
javax.xml.bind:activation:1.0.2&lt;br/&gt;
javax.xml.bind:jaxb-api:2.3.0&lt;br/&gt;
javax.xml.ws:jaxws-api:2.3.0&lt;/p&gt;

&lt;p&gt;This is the implementation of JAXB but I am missing version 2.3.0:&lt;br/&gt;
javax.xml:jaxb-impl:2.1&lt;/p&gt;

&lt;p&gt;I am missing CORBA and implementation for the APIs.&lt;/p&gt;</comment>
                            <comment id="16213855" author="alanbateman" created="Sat, 21 Oct 2017 11:34:46 +0000"  >&lt;p&gt;Dropping `--add-modules=java.se.ee`, which I think is what Enrico is proposing with #2, is the way to go. Anyone with a library or application that depend on the Maven artifact and it should just work. Ditto for module projects where they can deploy the java.transaction module on the module path and it should just work too.&lt;/p&gt;</comment>
                            <comment id="16213859" author="tibor17" created="Sat, 21 Oct 2017 11:47:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
Flag=config param means for me that this configuration would be obsolete in Java 10, and I do not want to maintain one more parameter, therefore I vote to drop the feature &lt;tt&gt;-add-modules java.ee.se&lt;/tt&gt; of version 2.20.1 and commit the removal in 2.21.0.Jigsaw. Of course old documentation should stay and a new one should be added related to 2.21.0.&lt;br/&gt;
We already have too many configuration parameters, so better to drop this and throw exception on Build Error (if any test fails) with clear link to our documentation (if Java specification version &amp;gt;= 9).&lt;br/&gt;
The documentation in Surefire should mention on how to use Maven profiles, &lt;tt&gt;-add-modules java.ee.se&lt;/tt&gt; in &lt;tt&gt;argLine&lt;/tt&gt; for version 2.21.0 or higher, Maven dependencies substituting removed API and implementation, and a link to Jigsaw doc where Oracle must update it.&lt;br/&gt;
If somebody removes a feature, he should obviously take care of writing documentation which gives the user alternatives and contact the communities about consequencies.&lt;/p&gt;</comment>
                            <comment id="16213913" author="eolivelli" created="Sat, 21 Oct 2017 13:40:14 +0000"  >&lt;p&gt;+1 for dropping -add-modules java.ee.se&lt;/p&gt;</comment>
                            <comment id="16213946" author="tibor17" created="Sat, 21 Oct 2017 14:52:25 +0000"  >&lt;p&gt;Do you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt; or anybody else wants to do it?&lt;br/&gt;
There is more work. As in my comment, but also to keep *Java9*IT integration tests working. Let them fail and the error message should be asserted with something like &quot;Do you use deleted Java SE API? Please see &lt;a href=&quot;http://maven.apache.org/surefire/maven-surefire-plugin/java9.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/surefire/maven-surefire-plugin/java9.html&lt;/a&gt;&quot;.&lt;/p&gt;</comment>
                            <comment id="16213964" author="eolivelli" created="Sat, 21 Oct 2017 15:26:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; I will be happy to help.&lt;br/&gt;
Next week I will be very busy, but if there is no hurry I can do this.&lt;br/&gt;
Remove the hack, add the help msg and  change it tests.&lt;br/&gt;
I will need your help eventually for it tests.&lt;br/&gt;
Feel free to assign the issue to me if there is no rush&lt;/p&gt;</comment>
                            <comment id="16213983" author="tibor17" created="Sat, 21 Oct 2017 15:49:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
Additionally, documentation &lt;tt&gt;java9.html&lt;/tt&gt; and FAQ.&lt;br/&gt;
I am working on unit tests in the branch &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1262&quot; title=&quot;Add modulepath support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1262&quot;&gt;&lt;del&gt;SUREFIRE-1262&lt;/del&gt;&lt;/a&gt; and one more issue.&lt;br/&gt;
If we were two, the release would go out faster too.&lt;/p&gt;</comment>
                            <comment id="16214006" author="tibor17" created="Sat, 21 Oct 2017 16:23:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
We still do not have answer for &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and clarity what to say in documentation regarding dependencies which will substitute removed API. The Oracle should answer this.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16213853&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16213853&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16213853&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16213853&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16214045" author="eolivelli" created="Sat, 21 Oct 2017 18:04:27 +0000"  >&lt;p&gt;IMO we can drop the trick and add the help as soon as possible, then we have time to give suggestions.&lt;br/&gt;
Every one, even non maven users, has the same issue, of finding the good set of dependency to replace legacy parts of the JRE.&lt;/p&gt;

&lt;p&gt;Sure I can work on this&lt;/p&gt;</comment>
                            <comment id="16214049" author="tibor17" created="Sat, 21 Oct 2017 18:16:21 +0000"  >&lt;p&gt;No, this is not serious.&lt;br/&gt;
Serious would be to let Oracle answer &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16213853&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16213853&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1424?focusedCommentId=16213853&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16213853&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16214096" author="eolivelli" created="Sat, 21 Oct 2017 20:37:50 +0000"  >&lt;p&gt;Ok let&apos;s wait, there is no hurry.&lt;br/&gt;
If you want me to start working on the patch just ping me.&lt;br/&gt;
I think that most of the work will be about changing it tests and then writing docs.&lt;/p&gt;

&lt;p&gt;Anyway IMHO I think that we not in charge of answering with maven documentation to questions which are directed to JDK maintainers.&lt;/p&gt;</comment>
                            <comment id="16214230" author="alanbateman" created="Sun, 22 Oct 2017 08:35:22 +0000"  >&lt;p&gt;I assume this is what you are looking for:&lt;/p&gt;

&lt;p&gt;Commons Annotations&lt;br/&gt;
  javax.annotation:javax.annotation-api:1.3.1&lt;/p&gt;

&lt;p&gt;JavaBeans Activation Framework&lt;br/&gt;
  javax.activation:javax.activation-api:1.2.0&lt;/p&gt;

&lt;p&gt;Java Transaction API&lt;br/&gt;
  javax.transaction:javax.transaction-api:1.2&lt;/p&gt;

&lt;p&gt;JAXB&lt;br/&gt;
  javax.xml.bind:jaxb-api:2.3.0&lt;br/&gt;
  org.glassfish.jaxb:jaxb-runtime:2.3.0 (implementation)&lt;/p&gt;

&lt;p&gt;JAX-WS&lt;br/&gt;
  javax.xml.ws:jaxws-api:2.3.0&lt;br/&gt;
  com.sun.xml.ws:jaxws-rt::2.3.0 (implementation)&lt;/p&gt;

&lt;p&gt;The source code for each of these is maintained at &lt;a href=&quot;https://github.com/javaee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/javaee&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="16217701" author="eolivelli" created="Tue, 24 Oct 2017 21:03:43 +0000"  >&lt;p&gt;I think that Alan&apos;s answer is complete.&lt;br/&gt;
Maybe we could just add this list to the  FAQ page about java9. It is not a surefire issue indeed.&lt;br/&gt;
We can drop the -add-modules and fix the it tests just by adding the required dependencies on the poms in order to demonstrate that this approch is working.&lt;br/&gt;
For java.sql package we can add an it test which adds -add-modules=java.sql in case of build on java9 using a profile.&lt;/p&gt;


&lt;p&gt;Does this sound good to you Tibor and Robert?&lt;/p&gt;</comment>
                            <comment id="16217715" author="rfscholte" created="Tue, 24 Oct 2017 21:18:50 +0000"  >&lt;p&gt;I would expect users to hit such issue already at compile time when working with Java 9. I don&apos;t remember all the details about the &lt;tt&gt;java.sql&lt;/tt&gt; package, but the original fix does more harm than good. &lt;/p&gt;</comment>
                            <comment id="16219647" author="tibor17" created="Wed, 25 Oct 2017 22:15:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
I think &lt;tt&gt;java.sql&lt;/tt&gt; was &lt;tt&gt;for removal&lt;/tt&gt; that time we investigated previous issue for &lt;tt&gt;2.20.1&lt;/tt&gt;.&lt;br/&gt;
I checked JDK internals, it is no more marked for removal in &lt;tt&gt;module-info&lt;/tt&gt;. So I think it was a bug in Java 9 and should not be tested with &lt;tt&gt;--add-modules=java.sql&lt;/tt&gt; now. At least this how far my understanding goes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
&amp;gt;&amp;gt;Does this sound good to you&lt;br/&gt;
Yes it does.&lt;br/&gt;
Feel free to write a patch at GitHub.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&lt;br/&gt;
This &lt;tt&gt;mave-compiler-plugin&lt;/tt&gt; issue should be then investigated in &lt;a href=&quot;https://issues.apache.org/jira/browse/MCOMPILER&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MCOMPILER&lt;/a&gt;, right?&lt;/p&gt;</comment>
                            <comment id="16220256" author="krzyk" created="Thu, 26 Oct 2017 09:59:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanb&quot; class=&quot;user-hover&quot; rel=&quot;alanb&quot;&gt;alanb&lt;/a&gt; I think to have a complete java ee api, we need also javax.sql, do you know if it exists somewhere in maven central (I have a project that fails in failsafe with java.lang.NoClassDefFoundError: javax/sql/DataSource)?&lt;/p&gt;</comment>
                            <comment id="16220269" author="alanbateman" created="Thu, 26 Oct 2017 10:13:42 +0000"  >&lt;p&gt;The java.sql and java.sql.rowset modules are not upgradeable.&lt;/p&gt;

&lt;p&gt;It would be useful to get more details on the NoClassDefFoundError: javax/sql/DataSource issue. Is there a custom class loader in the picture with the null/bootstrap class loader as its parent? There is no guarantee that the classes in all of the standard modules are visible via the bootstrap class loader. If there is code that assumes all classes are visible via the bootstrap class loader then it will need to be fixed to use the application/system or platform class loader as its parent for delegation.&lt;/p&gt;</comment>
                            <comment id="16220270" author="eolivelli" created="Thu, 26 Oct 2017 10:14:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krzyk&quot; class=&quot;user-hover&quot; rel=&quot;krzyk&quot;&gt;krzyk&lt;/a&gt; you should simply add --add-modules=java.sql&lt;/p&gt;

&lt;p&gt;AFAIK java.sql is not &quot;deprecated&quot; and will not be removed from JRE&lt;br/&gt;
you can do it using a profile which is activated only on Java9 and adds such parameter to the argLine of surefire&lt;/p&gt;</comment>
                            <comment id="16220296" author="krzyk" created="Thu, 26 Oct 2017 10:46:12 +0000"  >&lt;p&gt;I&apos;m using surefire/failsafe 2.19.1 (because 2.20 has problem with jaxb, 2.20.1 adds modules) and in one project using the dependencies above fixes Java 9 compilation.&lt;br/&gt;
But in other project I get following error just before any failsafe is started:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project portal-api-definitions-web: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test failed: java.lang.NoClassDefFoundError: javax/sql/DataSource: javax.sql.DataSource -&amp;gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project portal-api-definitions-web: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test failed: java.lang.NoClassDefFoundError: javax/sql/DataSource
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:154)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:146)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)
	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:309)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:194)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:107)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:993)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:345)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:191)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; of goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test failed: java.lang.NoClassDefFoundError: javax/sql/DataSource
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:145)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
	... 20 more
Caused by: org.apache.maven.surefire.util.SurefireReflectionException: java.lang.NoClassDefFoundError: javax/sql/DataSource
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:193)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeGetter(ReflectionUtils.java:72)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.getSuites(ProviderFactory.java:140)
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.getSuitesIterator(ForkStarter.java:615)
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.runSuitesForkOnceMultiple(ForkStarter.java:268)
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:242)
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:201)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:1026)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:862)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:755)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)
	... 21 more
Caused by: java.lang.NoClassDefFoundError: javax/sql/DataSource
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getDeclaredMethods0(Native Method)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.privateGetDeclaredMethods(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:3139)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getMethodsRecursive(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:3280)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getMethod0(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:3266)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getMethod(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:2063)
	at org.apache.maven.surefire.util.ReflectionUtils.tryGetMethod(ReflectionUtils.java:61)
	at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isSuiteOnly(JUnit3TestChecker.java:64)
	at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isValidJUnit3Test(JUnit3TestChecker.java:59)
	at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.accept(JUnit3TestChecker.java:54)
	at org.apache.maven.surefire.common.junit4.JUnit4TestChecker.accept(JUnit4TestChecker.java:52)
	at org.apache.maven.surefire.util.DefaultScanResult.applyFilter(DefaultScanResult.java:98)
	at org.apache.maven.surefire.junit4.JUnit4Provider.scanClassPath(JUnit4Provider.java:311)
	at org.apache.maven.surefire.junit4.JUnit4Provider.getSuites(JUnit4Provider.java:305)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:185)
	... 31 more
Caused by: java.lang.ClassNotFoundException: javax.sql.DataSource
	at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:466)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:563)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:496)
	at org.apache.maven.surefire.booter.IsolatedClassLoader.loadClass(IsolatedClassLoader.java:97)
	... 49 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This project indeed has javax.sql.DataSource used in the code.&lt;/p&gt;</comment>
                            <comment id="16220300" author="eolivelli" created="Thu, 26 Oct 2017 10:49:49 +0000"  >&lt;p&gt;are you using forkCount &amp;gt; 1 ?&lt;br/&gt;
you can still use 2.20.1, but you have to explicitly add a --add-modules=java.sql (or --add-modules=java.base).&lt;br/&gt;
in fact 2.20.1 detectes that you are handling explicitly --add-modules and then it will not add --add-modules=java.ee.se&lt;/p&gt;</comment>
                            <comment id="16220306" author="alanbateman" created="Thu, 26 Oct 2017 10:53:46 +0000"  >&lt;p&gt;--add-modules java.sql is a no-op when compiling or running code on the class path.&lt;/p&gt;

&lt;p&gt;In order to diagnose the issue then someone needs to look at org.apache.maven.surefire.booter.IsolatedClassLoader, I assume it must be created with a parent of &quot;null&quot; rather than the system class loader.&lt;/p&gt;</comment>
                            <comment id="16220318" author="krzyk" created="Thu, 26 Oct 2017 11:00:08 +0000"  >&lt;p&gt;Yes, I&apos;m using forkCount &amp;gt; 1.&lt;br/&gt;
I changed to 2.20.1 and added --add-modules java.base, and it works without exception, thank you for help.&lt;/p&gt;</comment>
                            <comment id="16220339" author="tibor17" created="Thu, 26 Oct 2017 11:29:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanb&quot; class=&quot;user-hover&quot; rel=&quot;alanb&quot;&gt;alanb&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlanBateman&quot; class=&quot;user-hover&quot; rel=&quot;AlanBateman&quot;&gt;AlanBateman&lt;/a&gt;&lt;br/&gt;
Why javax/sql is different? In the forked JVM we don&apos;t use module-path. We yet use classpath with bootstrap class loader.&lt;br/&gt;
You say we have to use Platform CL and not Bootstrap CL?&lt;br/&gt;
How would Platform CL be different from Bootstrap CL in case of using old classpath?&lt;/p&gt;</comment>
                            <comment id="16220343" author="githubbot" created="Thu, 26 Oct 2017 11:44:46 +0000"  >&lt;p&gt;GitHub user eolivelli opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with Java9&lt;/p&gt;

&lt;p&gt;    Contents of the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;drop --add-modules=java.ee.se&lt;/li&gt;
	&lt;li&gt;add a testcase on javax.transaction.TransactionManager&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/eolivelli/maven-surefire&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eolivelli/maven-surefire&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt;-noaddmodules&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #168&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 42a8b161ebdd38837ba66be3588514df2b8c2b05&lt;br/&gt;
Author: Enrico Olivelli &amp;lt;eolivelli@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-10-26T11:44:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with Java9&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16220399" author="eolivelli" created="Thu, 26 Oct 2017 13:04:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; As you can see I am preparing a patch.&lt;br/&gt;
I need an hint.&lt;br/&gt;
How can I run the tests on Java9, like Java9FullApiIT ?&lt;/p&gt;

&lt;p&gt;cd surefire-integration-tests&lt;br/&gt;
JAVA_HOME=/path/tojdk9 mvn verify -Dit.test=Java9FullApiIT&lt;/p&gt;

&lt;p&gt;the build fails as there is the enforcer plugin which prevents execution on java9, I have temporary disable that check but then I think that there is some toolchain setup to do as test fails.&lt;br/&gt;
Do you have any doc on how to setup the env or can you give me some hint ?&lt;/p&gt;

&lt;p&gt;regarding the documentation, I think that the list of dependencies should not go into surefire docs but in maven general documentation or even it is a problem of OpenJDK itseft&lt;/p&gt;</comment>
                            <comment id="16220403" author="alanbateman" created="Thu, 26 Oct 2017 13:07:17 +0000"  >&lt;p&gt;The java.sql module is one of several &quot;non-core&quot; modules that have been moved away from the boot loader so that they can run with reduced permissions. This was done as part of the ongoing security / defense-in-depth work in the JDK. The spec guarantees that all standard types are visible to the platform class loader (formerly known as the extension class loader). It does not guarantee that all standard types are visible to the boot loader.  This should only impact code that uses custom class loaders with &quot;null&quot; as the parent and tries to load some non-core classes.&lt;/p&gt;</comment>
                            <comment id="16220821" author="rfscholte" created="Thu, 26 Oct 2017 17:14:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt; I run surefire like this &lt;tt&gt;mvn verify -Prun-its -Djdk.home=&quot;c:\Program Files\Java\jdk-9.0.1&quot; -Denforcer.skip&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16222149" author="eolivelli" created="Fri, 27 Oct 2017 10:44:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&lt;br/&gt;
I have updated the patch.&lt;/p&gt;

&lt;p&gt;Unfortunately adding java.corba implies to load javax.transaction and so excludes TransactionManager so I have preferred to focus the test on loading JAXB, JAX-WS and TransactionManager using the explicit dependencies approach suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanb&quot; class=&quot;user-hover&quot; rel=&quot;alanb&quot;&gt;alanb&lt;/a&gt;.&lt;br/&gt;
The test still uses java.sql too in order to demonstrate that on the classpath java.sql module is available.&lt;br/&gt;
I have also stated in the javadocs of the test case that the test cases works in &apos;class path mode&apos;.&lt;/p&gt;

&lt;p&gt;In order to have a test which covers CORBA we have to simply add a new sample project and the testcase.&lt;/p&gt;

&lt;p&gt;I think that the patch demonstrates how to run TransactionManager with surefire (and it is is working for the compiler as well).&lt;/p&gt;

&lt;p&gt;I don&apos;t know if the patch respects your coding conventions I have tried to respect the style.&lt;/p&gt;</comment>
                            <comment id="16222152" author="eolivelli" created="Fri, 27 Oct 2017 10:45:46 +0000"  >&lt;p&gt;Actually the command line to make the test run is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn verify -Prun-its -Djdk.home=FULL-PATH-TO-JDK9  -Denforcer.skip -Dit.test=Java9FullApiIT -Dmaven.toolchains.file=~PATH-TO-TOOLCHAINS-FILE.xml 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and you have to create a toolchains file for jdk9 (there is a test which explicitly wants maven.toolchains.file set)&lt;/p&gt;</comment>
                            <comment id="16223335" author="tibor17" created="Sat, 28 Oct 2017 08:50:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanb&quot; class=&quot;user-hover&quot; rel=&quot;alanb&quot;&gt;alanb&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlanBateman&quot; class=&quot;user-hover&quot; rel=&quot;AlanBateman&quot;&gt;AlanBateman&lt;/a&gt;&lt;br/&gt;
The JavaEE8 was released one week ago and I was impressed by what is written there:&lt;br/&gt;
&quot;JAX-B and JAX-WS are no longer part of the Java EE Platform&quot;&lt;br/&gt;
The I opened the PDF document and read this:&lt;br/&gt;
&quot;JAXB and JAX-WS no longer part of Java EE platform&quot;&lt;br/&gt;
...&lt;br/&gt;
&quot;are shipped with Java SE since version 6.&quot;&lt;br/&gt;
&lt;a href=&quot;http://www.oracle.com/technetwork/java/javaee/documentation/ee8-release-notes-3894362.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.oracle.com/technetwork/java/javaee/documentation/ee8-release-notes-3894362.html&lt;/a&gt;&lt;br/&gt;
It looks to me that Oracle has two teams, i.e. SE and EE, and they are not fully synchronized.&lt;br/&gt;
IMHO the JAXB is SE technology, but JAX-WS and JAX-RS are not. Additionally, REST Client is pure SE API as designed nowadays but REST Server is EE. The Oracle should make REST Client managed by Container and they should provide a mechanism to manage it by Cloud Orchestrator like Messos, Kubernetes, Consul.&lt;/p&gt;</comment>
                            <comment id="16223940" author="tibor17" created="Sun, 29 Oct 2017 10:35:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
From what I have understood &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlanBateman&quot; class=&quot;user-hover&quot; rel=&quot;AlanBateman&quot;&gt;AlanBateman&lt;/a&gt; in Oracle is that we do not have one problem with Java 9 (removed modules) but actually three (&quot;removed modules/classes&quot;, &quot;core&quot; modules, and &quot;non-core&quot; modules) and all are loaded in another manner.&lt;/p&gt;

&lt;p&gt;The &quot;removed&quot; modules are loaded via current solution which is also deprecated &lt;tt&gt;--add-modules java.se.ee&lt;/tt&gt;.&lt;br/&gt;
The &quot;core&quot; modules appear in System CL.&lt;br/&gt;
The &quot;non-core&quot; modules appear in Platform CL which means we have to not to put user&apos;s libraries in typical Class-Path in Manifest and programmatically extent Platform CL, load user&apos;s libraries in Platform CL and use reflection on entire Surefire Provider to load user&apos;s libs. Hoping that resources would be loaded properly and another unexpected problems would not appear.&lt;/p&gt;

&lt;p&gt;In my understanding we should decide about one of these two options in case of Java 9 non-modular app:&lt;br/&gt;
+ Use Platform CL and not Class-Path in META-INF/MANIFEST.MF in surefirebooter*.jar&lt;br/&gt;
+ or Use --module-path instead. In this case I doubt that Arquillian, Mockito, and proxy frameworks would be able to work with it. I think they rely on system property &quot;java.class.path&quot; and this might be empty then.&lt;/p&gt;

&lt;p&gt;So it&apos;s quite bad situation for us, I have no clear how to decide, and I guess we need to make some tests to understand it better and/or more collaborate with Oracle.&lt;/p&gt;</comment>
                            <comment id="16224180" author="alanbateman" created="Sun, 29 Oct 2017 20:10:19 +0000"  >&lt;p&gt;Tibor - the &quot;Class loaders&quot; section of JEP 261 (&lt;a href=&quot;http://openjdk.java.net/jeps/261#Class-loaders&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/261#Class-loaders&lt;/a&gt;) has all the details. The important thing is that the class loader arrangement is identical to past releases (system/application -&amp;gt; platform -&amp;gt; boot). Custom class loader that use the default class loader for delegation will not notice. The only code that will be impacted is code that has been bypassing the delegation and going directly to the boot loader.&lt;/p&gt;</comment>
                            <comment id="16224200" author="tibor17" created="Sun, 29 Oct 2017 20:50:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AlanBateman&quot; class=&quot;user-hover&quot; rel=&quot;AlanBateman&quot;&gt;AlanBateman&lt;/a&gt;&lt;br/&gt;
Thx Alan, this is positive information.&lt;/p&gt;</comment>
                            <comment id="16224428" author="eolivelli" created="Mon, 30 Oct 2017 06:34:42 +0000"  >&lt;p&gt;Tibor,&lt;br/&gt;
I think we have to give two different options to users:&lt;br/&gt;
Use the classpath&lt;br/&gt;
Use the module path&lt;/p&gt;

&lt;p&gt;In this issue we are talking about classpath based applications, legacy.&lt;br/&gt;
I think the best here is to just drop the java.se.ee addition.&lt;br/&gt;
In the patch the only thing I don&apos;t like is that it works only for java9 and not for upcoming releases.&lt;br/&gt;
In the original testcase there is an assertion about java.specification.version = 9.&lt;br/&gt;
I think we should drop that assertion. Ok?&lt;/p&gt;

&lt;p&gt;For the module path I think you are already working on it in another issue. I think the user should be able to configure a flag to decide the execution mode.&lt;br/&gt;
It should be consistent with the exec plugin.&lt;/p&gt;

&lt;p&gt;The issue on IsolatedClassloader is for forkCount &amp;gt; 1.&lt;br/&gt;
I will take a look deeper if it helps. My feelings is that we should run that code on a forked jvm and/or use the AppClassloader instead of the Boot classloader&lt;/p&gt;</comment>
                            <comment id="16224468" author="tibor17" created="Mon, 30 Oct 2017 07:51:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eolivelli&quot; class=&quot;user-hover&quot; rel=&quot;eolivelli&quot;&gt;eolivelli&lt;/a&gt;&lt;br/&gt;
&amp;gt;&amp;gt; In the original testcase there is an assertion about java.specification.version = 9.&lt;br/&gt;
No, because we are on &lt;em&gt;javac -source 1.6 -target 1.6&lt;/em&gt;, and JDK8 due to &lt;em&gt;-Xdoclint:all&lt;/em&gt;.&lt;br/&gt;
Maybe next time we will do it but we should more focus on planed features the required from user group: JUnit5, Jigsaw, Maven 3, and our community: communication protocol between JVMs and socket communication. It&apos;s quite a lot of work I see. Changing dependencies to Maven 3 would be the first preparation step for JDK9.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; I think the user should be able to configure a flag to decide the execution mode.&lt;br/&gt;
No, because this will be automatically switched if module-info presents. See the branch SUREFIRE 1262_2.&lt;br/&gt;
I have to create a new branch SUREFIRE 1262_3 with more tests on the top of current HEAD of master.&lt;br/&gt;
After CI says success in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1262&quot; title=&quot;Add modulepath support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1262&quot;&gt;&lt;del&gt;SUREFIRE-1262&lt;/del&gt;&lt;/a&gt;, I will merge your changes. Maybe we will change something in your patch but it of course depends on a result of code review.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; The issue on IsolatedClassloader is for forkCount &amp;gt; 1.&lt;br/&gt;
This is a limitation in Java 9, because CL#findClass(module, fullyQualidiedClassName) does nothing with the first parameter in UrlClassLoader.&lt;br/&gt;
This means the user has to add &quot;--add-modules&quot; in .mvn/jvm.config for entire Maven run (Maven 3.3.1+) or in MAVEN_OPTS for older versions of Maven.&lt;/p&gt;

&lt;p&gt;Thx for your work and effort.&lt;/p&gt;</comment>
                            <comment id="16224628" author="eolivelli" created="Mon, 30 Oct 2017 10:24:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt;&lt;br/&gt;
I mean&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/660a4cfab8bf78d8db42aa6cfc3366d8806035a0/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java#L69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/660a4cfab8bf78d8db42aa6cfc3366d8806035a0/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java#L69&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 .verifyTextInLog( &lt;span class=&quot;code-quote&quot;&gt;&quot;java.specification.version=9&quot;&lt;/span&gt; );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I will run this on Java 18.3 (next major release) the test won&apos;t work (or will be skipped because we are not on java9).&lt;br/&gt;
We can create a new issue in order to support future major java releases for this kind of tests (test on legacy classpath based applications).&lt;br/&gt;
I am fine with keeping the test as it is now&lt;/p&gt;</comment>
                            <comment id="16224630" author="eolivelli" created="Mon, 30 Oct 2017 10:25:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; I agree that we should move forward as required by users. There is still much work to do. Thank you&lt;/p&gt;</comment>
                            <comment id="16244713" author="russgold" created="Wed, 8 Nov 2017 20:56:00 +0000"  >&lt;p&gt;Is there a way to disable this hack? &lt;/p&gt;

&lt;p&gt;I am trying to build the glassfish-corba project &amp;lt;&lt;a href=&quot;https://github.com/javaee/glassfish-corba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/javaee/glassfish-corba&lt;/a&gt;&amp;gt;, which defines its own version of classes in the javax.rmi.CORBA package, and having --add-modules java.se.ee on the command line means that those classes aren&#8217;t found during unit tests.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Russ&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="16248456" author="rfscholte" created="Sat, 11 Nov 2017 10:50:38 +0000"  >&lt;p&gt;You can disable it by adding another value for &lt;tt&gt;--add-modules&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16248469" author="reschke" created="Sat, 11 Nov 2017 11:27:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; - as a workaround, yes. But this should really be fixed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=russgold&quot; class=&quot;user-hover&quot; rel=&quot;russgold&quot;&gt;russgold&lt;/a&gt; - this is what I did in Jackrabbit: &lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-parent/pom.xml?r1=1812543&amp;amp;r2=1812634&amp;amp;pathrev=1812634&amp;amp;diff_format=h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-parent/pom.xml?r1=1812543&amp;amp;r2=1812634&amp;amp;pathrev=1812634&amp;amp;diff_format=h&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16248474" author="rfscholte" created="Sat, 11 Nov 2017 11:35:58 +0000"  >&lt;p&gt;Of course this must be fixed, no question about that. It was a first attempt to solve some Java9 related issues. It felt incorrect to me, which is now confirmed. &lt;/p&gt;</comment>
                            <comment id="16258411" author="githubbot" created="Sun, 19 Nov 2017 10:04:32 +0000"  >&lt;p&gt;Github user Tibor17 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168#discussion_r151860059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168#discussion_r151860059&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: maven-surefire-plugin/src/site/markdown/java9.md &amp;#8212;&lt;br/&gt;
    @@ -17,15 +17,6 @@ specific language governing permissions and limitations&lt;br/&gt;
     under the License.&lt;br/&gt;
     --&amp;gt;&lt;/p&gt;

&lt;p&gt;    -Java 9 in JAVA_HOME&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    You should bring back the history. Some users still use 2.20.1 and there was another behavior. We should add a new point for 2.21 and recommendations. Please add the list of Java API from Jira that the Oracle guy listed Maven artifacts, implementations. This is missing in Java documentation and people will needed to be announced about them.&lt;/p&gt;</comment>
                            <comment id="16258413" author="githubbot" created="Sun, 19 Nov 2017 10:05:06 +0000"  >&lt;p&gt;Github user Tibor17 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168#discussion_r151860070&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168#discussion_r151860070&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java &amp;#8212;&lt;br/&gt;
    @@ -78,12 +83,13 @@ public void shouldLoadMultipleJavaModules_ToolchainsXML() throws IOException&lt;br/&gt;
                                                 .addGoal( &quot;--toolchains&quot; )&lt;br/&gt;
                                                 .addGoal( System.getProperty( &quot;maven.toolchains.file&quot; ) )&lt;br/&gt;
                                                 .execute( &quot;verify&quot; )&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.verifyErrorFree( 2 );&lt;br/&gt;
    +                                            .verifyErrorFree( 1 );
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Why it has changed from 2 to 1?&lt;br/&gt;
    There was two tests?&lt;/p&gt;</comment>
                            <comment id="16258414" author="githubbot" created="Sun, 19 Nov 2017 10:06:24 +0000"  >&lt;p&gt;Github user eolivelli commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168#discussion_r151860088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168#discussion_r151860088&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: maven-surefire-plugin/src/site/markdown/java9.md &amp;#8212;&lt;br/&gt;
    @@ -17,15 +17,6 @@ specific language governing permissions and limitations&lt;br/&gt;
     under the License.&lt;br/&gt;
     --&amp;gt;&lt;/p&gt;

&lt;p&gt;    -Java 9 in JAVA_HOME&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    will do&lt;/p&gt;</comment>
                            <comment id="16258415" author="githubbot" created="Sun, 19 Nov 2017 10:07:05 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I had to prefer pushing my commit regarding Jigsaw modularity supported in Surefire project because it was too big to merge after yours. Please create a new PR with your changes.&lt;/p&gt;</comment>
                            <comment id="16258416" author="githubbot" created="Sun, 19 Nov 2017 10:09:04 +0000"  >&lt;p&gt;Github user eolivelli commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168#discussion_r151860152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168#discussion_r151860152&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java &amp;#8212;&lt;br/&gt;
    @@ -78,12 +83,13 @@ public void shouldLoadMultipleJavaModules_ToolchainsXML() throws IOException&lt;br/&gt;
                                                 .addGoal( &quot;--toolchains&quot; )&lt;br/&gt;
                                                 .addGoal( System.getProperty( &quot;maven.toolchains.file&quot; ) )&lt;br/&gt;
                                                 .execute( &quot;verify&quot; )&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.verifyErrorFree( 2 );&lt;br/&gt;
    +                                            .verifyErrorFree( 1 );
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I have dropped tet_corba_mod.&lt;br/&gt;
    It is not possible to have  legacy &quot;corba module&quot; + dependency of JTA, because module java.corba require legacy transaction packages which be loaded from the JDK and so in turn this will hide the explicit dependency.&lt;/p&gt;

&lt;p&gt;    I could create one more IT only for corba&lt;/p&gt;</comment>
                            <comment id="16258417" author="githubbot" created="Sun, 19 Nov 2017 10:09:04 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Try to name the PR like this ([] brackets):&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with Java9&lt;/p&gt;</comment>
                            <comment id="16258418" author="githubbot" created="Sun, 19 Nov 2017 10:11:16 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sure, I will rebase once you merged your big changes&lt;/p&gt;</comment>
                            <comment id="16258438" author="githubbot" created="Sun, 19 Nov 2017 10:51:04 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It was done. But I don&apos;t think you can easily rebase it since some classes were deleted or methods moved.&lt;/p&gt;</comment>
                            <comment id="16258518" author="githubbot" created="Sun, 19 Nov 2017 15:46:39 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    No problem, the change was minimal, I will start from scratch&lt;/p&gt;</comment>
                            <comment id="16263763" author="githubbot" created="Thu, 23 Nov 2017 03:46:00 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eolivelli &lt;br/&gt;
    I have finished my changes in master. Can you continue?&lt;/p&gt;</comment>
                            <comment id="16263869" author="githubbot" created="Thu, 23 Nov 2017 06:22:37 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok will do asap&lt;/p&gt;</comment>
                            <comment id="16264541" author="githubbot" created="Thu, 23 Nov 2017 16:02:58 +0000"  >&lt;p&gt;Github user eolivelli commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168#discussion_r152835233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168#discussion_r152835233&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java &amp;#8212;&lt;br/&gt;
    @@ -78,12 +83,13 @@ public void shouldLoadMultipleJavaModules_ToolchainsXML() throws IOException&lt;br/&gt;
                                                 .addGoal( &quot;--toolchains&quot; )&lt;br/&gt;
                                                 .addGoal( System.getProperty( &quot;maven.toolchains.file&quot; ) )&lt;br/&gt;
                                                 .execute( &quot;verify&quot; )&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;.verifyErrorFree( 2 );&lt;br/&gt;
    +                                            .verifyErrorFree( 1 );
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @Tibor17 do you think it has some value to have an IT for corba ? I think that the given one is already a good proof, it tests other more important modules.&lt;br/&gt;
    Tell me, if you want I will clone this IT test only of corba&lt;/p&gt;</comment>
                            <comment id="16264542" author="githubbot" created="Thu, 23 Nov 2017 16:04:29 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @Tibor17  I have rewritten the patch and address your comment of not altering the docs.&lt;br/&gt;
    Tell me the next step in your vision, I will be happy to move forward and finish this important task&lt;/p&gt;</comment>
                            <comment id="16269616" author="githubbot" created="Tue, 28 Nov 2017 22:50:09 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eolivelli &lt;br/&gt;
    I will have a look. I was busy last week.&lt;/p&gt;</comment>
                            <comment id="16271536" author="githubbot" created="Wed, 29 Nov 2017 21:02:27 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eolivelli &lt;br/&gt;
    We need to add a new chapter on the top in &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/maven-surefire-plugin/src/site/markdown/java9.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/maven-surefire-plugin/src/site/markdown/java9.md&lt;/a&gt; and add the following API. Please mention that version 2.21.0+ does not add &quot;--add-modules java.se.ee&quot;, the user should specify dependencies with API and implementation, and that we support Jigsaw modularity as well.&lt;/p&gt;

&lt;p&gt;    Commons Annotations&lt;br/&gt;
    javax.annotation:javax.annotation-api:1.3.1&lt;/p&gt;

&lt;p&gt;    JavaBeans Activation Framework&lt;br/&gt;
    javax.activation:javax.activation-api:1.2.0&lt;/p&gt;

&lt;p&gt;    Java Transaction API&lt;br/&gt;
    javax.transaction:javax.transaction-api:1.2&lt;/p&gt;

&lt;p&gt;    JAXB&lt;br/&gt;
    javax.xml.bind:jaxb-api:2.3.0&lt;br/&gt;
    org.glassfish.jaxb:jaxb-runtime:2.3.0 (implementation)&lt;/p&gt;

&lt;p&gt;    JAX-WS&lt;br/&gt;
    javax.xml.ws:jaxws-api:2.3.0&lt;br/&gt;
    com.sun.xml.ws:jaxws-rt::2.3.0 (implementation)&lt;/p&gt;

&lt;p&gt;    The source code for each of these is maintained at &lt;a href=&quot;https://github.com/javaee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/javaee&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="16271569" author="githubbot" created="Wed, 29 Nov 2017 21:32:29 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @Tibor17 ok I will do this change. Will send tomorrow.&lt;/p&gt;</comment>
                            <comment id="16274590" author="githubbot" created="Fri, 1 Dec 2017 16:33:28 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @Tibor17 I am trying to update the site, how can I rebuild the site locally ?&lt;br/&gt;
    I am trying with &quot;mvn site&quot; but it fails&lt;/p&gt;</comment>
                            <comment id="16274592" author="githubbot" created="Fri, 1 Dec 2017 16:35:25 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oh, got it, I have to run &quot;mvn site&quot; on the root of the project not only on maven-surefire-plugin&lt;/p&gt;</comment>
                            <comment id="16274608" author="githubbot" created="Fri, 1 Dec 2017 16:43:49 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @Tibor17 please check it out&lt;/p&gt;</comment>
                            <comment id="16275498" author="githubbot" created="Sat, 2 Dec 2017 10:18:30 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If you could squash these two commits in one, it would be great.&lt;/p&gt;</comment>
                            <comment id="16275500" author="githubbot" created="Sat, 2 Dec 2017 10:22:25 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The comment `&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with Java9` should be in commit.&lt;/p&gt;</comment>
                            <comment id="16275519" author="githubbot" created="Sat, 2 Dec 2017 11:36:38 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, will do this afternoon. Thanks&lt;/p&gt;</comment>
                            <comment id="16275539" author="githubbot" created="Sat, 2 Dec 2017 12:40:49 +0000"  >&lt;p&gt;Github user eolivelli commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @Tibor17 Ihave squashed the commits and reworded the commit msg.&lt;/p&gt;</comment>
                            <comment id="16275627" author="tibor17" created="Sat, 2 Dec 2017 15:57:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git1-us-west.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16275636" author="githubbot" created="Sat, 2 Dec 2017 16:14:47 +0000"  >&lt;p&gt;Github user Tibor17 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eolivelli &lt;br/&gt;
    Thx for contributing. Close this PR. It was pushed to master.&lt;/p&gt;</comment>
                            <comment id="16275647" author="githubbot" created="Sat, 2 Dec 2017 16:47:08 +0000"  >&lt;p&gt;Github user eolivelli closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/168&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16275667" author="hudson" created="Sat, 2 Dec 2017 17:30:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build maven-surefire #1807 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1807/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1807/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with (tibor17: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/?p=maven-surefire.git&amp;amp;a=commit&amp;amp;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/?p=maven-surefire.git&amp;amp;a=commit&amp;amp;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/AbstractClasspathForkConfiguration.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-plugin/src/site/markdown/java9.md&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/src/test/java/J9IT.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/src/test/java/J9Test.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16325254" author="hudson" created="Sat, 13 Jan 2018 17:46:12 +0000"  >&lt;p&gt;ABORTED: Integrated in Jenkins build maven-surefire-dev #103 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire-dev/103/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire-dev/103/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1424&quot; title=&quot;javax.transaction.TransactionManager not visible with Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1424&quot;&gt;&lt;del&gt;SUREFIRE-1424&lt;/del&gt;&lt;/a&gt; javax.transaction.TransactionManager not visible with (tibor17: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/?p=maven-surefire.git&amp;amp;a=commit&amp;amp;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/?p=maven-surefire.git&amp;amp;a=commit&amp;amp;h=7ac85f283a08fa8d0b447ca5685f545ae8acdc9d&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/pom.xml&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/src/test/java/J9Test.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-plugin/src/site/markdown/java9.md&lt;/li&gt;
	&lt;li&gt;(edit) surefire-integration-tests/src/test/resources/java9-full-api/src/test/java/J9IT.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/AbstractClasspathForkConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16337622" author="eolivelli" created="Wed, 24 Jan 2018 14:04:31 +0000"  >&lt;p&gt;Workaround&#160; for blocked users, just add the &apos;word&apos; --add-modules inside the &apos;argLine&apos; parameter, for instance inside a dummy system property.&lt;/p&gt;

&lt;p&gt;This way surefire will think that you have explicitly added some module and it will skip adding java.ee.se&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                   &amp;lt;plugin&amp;gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;version&amp;gt;2.20.1&amp;lt;/version&amp;gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;configuration&amp;gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;argLine&amp;gt;....... -Dbadprop=&lt;span class=&quot;code-quote&quot;&gt;&apos;--add-modules&apos;&lt;/span&gt;&amp;lt;/argLine&amp;gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;/configuration&amp;gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17994837" author="olamy" created="Fri, 4 Jul 2025 07:29:23 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2264&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12992964">SUREFIRE-1265</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13110596">JCR-4200</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13092838">SUREFIRE-1403</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kjfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>