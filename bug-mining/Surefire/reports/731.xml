<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:17:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-2082] Huge test sets may open too many files</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-2082</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Test sets with a very large number of tests (such as a JUnit &lt;tt&gt;ParameterizedTest&lt;/tt&gt; with a large number of test inputs) cause surefire to open a file for &lt;em&gt;stdout&lt;/em&gt; and another file for &lt;em&gt;stderr&lt;/em&gt; as soon as a test method prints to either of these output streams.&lt;/p&gt;

&lt;p&gt;Surefire captures &lt;em&gt;stdout&lt;/em&gt; and &lt;em&gt;stderr&lt;/em&gt; in temporary files.&lt;/p&gt;

&lt;p&gt;These file handles are kept until the very end of the test set (&lt;tt&gt;TestSetRunListener.testSetCompleted&lt;/tt&gt;) which may cause the limit of open files to be reached on a system, resulting in test errors (&lt;tt&gt;java.nio.file.FileSystemException&lt;/tt&gt;, too many open files).&lt;/p&gt;

&lt;p&gt;This behavior may have been introduced with the performance improvements of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1845&quot; title=&quot;Fixed the performance of Utf8RecodingDeferredFileOutputStream as a bottleneck for the tests with logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1845&quot;&gt;&lt;del&gt;SUREFIRE-1845&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To reproduce, set the maximum allowed open files to a value lower than test iterations in a test class:&lt;br/&gt;
&lt;tt&gt;ulimit -n &amp;lt;limit&amp;gt;&lt;/tt&gt;&lt;br/&gt;
where &lt;tt&gt;limit&lt;/tt&gt; is the maximum number of open files for a user (Linux).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13443574">SUREFIRE-2082</key>
            <summary>Huge test sets may open too many files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="spannjp">Markus Spann</reporter>
                        <labels>
                            <label>patch</label>
                            <label>performance</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 6 May 2022 09:22:53 +0000</created>
                <updated>Fri, 4 Jul 2025 07:41:44 +0000</updated>
                            <resolved>Thu, 9 Jun 2022 21:26:16 +0000</resolved>
                                    <version>3.0.0-M6</version>
                                    <fixVersion>3.0.0-M8</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17551772" author="iloveeclipse" created="Wed, 8 Jun 2022 20:17:57 +0000"  >&lt;p&gt;Looks lile a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-2094&quot; title=&quot;Leaked file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-2094&quot;&gt;&lt;del&gt;SUREFIRE-2094&lt;/del&gt;&lt;/a&gt;, see there for the possible root cause.&#160;&lt;/p&gt;</comment>
                            <comment id="17551788" author="spannjp" created="Wed, 8 Jun 2022 20:44:12 +0000"  >&lt;p&gt;Rather &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-2094&quot; title=&quot;Leaked file descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-2094&quot;&gt;&lt;del&gt;SUREFIRE-2094&lt;/del&gt;&lt;/a&gt; is a dup of this&lt;/p&gt;</comment>
                            <comment id="17552447" author="tibor17" created="Thu, 9 Jun 2022 21:26:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=d51e7c958a4f93876fafd23d12db0e1c686ec10a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=d51e7c958a4f93876fafd23d12db0e1c686ec10a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17995473" author="olamy" created="Fri, 4 Jul 2025 07:41:44 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2813&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13448634">SUREFIRE-2094</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13448634">SUREFIRE-2094</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z124mg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>