<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:09:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-766] Regression in excludes feature between surefire 2.6 and 2.7.</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-766</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I have a build that excludes certain JUnit 4 test cases by allowing users to specify a -Dtest.exclude.pattern=*&lt;b&gt;/TestA&lt;/b&gt;.java,*&lt;b&gt;/TestB&lt;/b&gt;.java style command line argument.  This worked for surefire 2.5, 2.6 but fails to work in 2.7, 2.7.1, 2.7.2, 2.8, 2.8.1, and 2.9 releases.  &lt;/p&gt;

&lt;p&gt;Here&apos;s how I pass in the excludes from the command line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&amp;lt;plugins&amp;gt; &amp;lt;plugin&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
        &amp;lt;configuration&amp;gt;
          &amp;lt;forkMode&amp;gt;always&amp;lt;/forkMode&amp;gt;
          &amp;lt;includes&amp;gt;
            &amp;lt;include&amp;gt;**/Test*.java&amp;lt;/include&amp;gt;
          &amp;lt;/includes&amp;gt;
          &amp;lt;excludes&amp;gt;
            &amp;lt;exclude&amp;gt;**/*$*&amp;lt;/exclude&amp;gt;
            &amp;lt;exclude&amp;gt;${test.exclude.pattern}&amp;lt;/exclude&amp;gt;
          &amp;lt;/excludes&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&amp;lt;properties&amp;gt;
   ...
   &amp;lt;!-- For flaky tests exclusion --&amp;gt;
    &amp;lt;test.exclude /&amp;gt;
    &amp;lt;test.exclude.pattern&amp;gt;**/${test.exclude}.java&amp;lt;/test.exclude.pattern&amp;gt;
  &amp;lt;/properties&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12810291">SUREFIRE-766</key>
            <summary>Regression in excludes feature between surefire 2.6 and 2.7.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pgier">Paul Gier</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Sep 2011 19:27:38 +0000</created>
                <updated>Fri, 4 Jul 2025 07:16:47 +0000</updated>
                            <resolved>Fri, 23 Sep 2011 23:24:46 +0000</resolved>
                                    <version>2.7</version>
                    <version>2.7.1</version>
                    <version>2.7.2</version>
                    <version>2.8</version>
                    <version>2.8.1</version>
                    <version>2.9</version>
                                    <fixVersion>2.10</fixVersion>
                                    <component>Junit 4.x support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14455059" author="jmhsieh" created="Mon, 5 Sep 2011 19:30:14 +0000"  >&lt;p&gt;Notice that I exclude *&lt;b&gt;/Test&lt;/b&gt;.java, yet TestFlumeShell runs.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Version 2.8.1 based build.
jon@grimlock:~/proj/cdh-flume$ mvn test -Dtest.exclude.pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/TestA*.java,**/TestF*.java&quot;&lt;/span&gt;
...
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running dk.brics.automaton.TestAutomaton
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.089 sec
Running com.cloudera.flume.shell.TestFlumeShell
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Notice that initially we start testing with TestConsistentHash&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Version 2.6 based build.
jon@grimlock:~/proj/cdh-flume$ mvn test
...
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.cloudera.util.consistenthash.TestConsistentHash
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.288 sec
Running com.cloudera.flume.master.TestMasterReport
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.487 sec
Running com.cloudera.flume.agent.diskfailover.TestConcurrentDFOMan
Tests run: 11, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 17.853 sec
Running com.cloudera.util.TestNetUtils
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.959 sec
Running com.cloudera.flume.agent.TestEndToEndAckFailureRecovery
^CDestroying 1 processes
Destroying process..
Destroyed 1 processes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now we exclue TestC* and TestM* &amp;#8211; we have excluded thos tests and started with TestEndToEndAckFailureRecovery.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;jon@grimlock:~/proj/cdh-flume$ mvn test -Dtest.exclude.pattern=**/TestC*.java,**/TestM*.java
...
Running com.cloudera.util.TestNetUtils
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.65 sec
Running com.cloudera.flume.agent.TestEndToEndAckFailureRecovery
^CDestroying 1 processes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14455082" author="pgier" created="Fri, 23 Sep 2011 17:47:55 +0000"  >&lt;p&gt;I found that to reproduce the problem, you have to have forkMode set to &quot;always&quot; or &quot;never&quot;.  If it&apos;s set to &quot;once&quot;, the problem goes away.  Also, the problem only occurs when there is a comma in the list of excludes.&lt;/p&gt;</comment>
                            <comment id="14455126" author="pgier" created="Fri, 23 Sep 2011 23:24:46 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1175098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1175098&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The reason that &quot;once&quot; worked but not &quot;always&quot; and &quot;never&quot;, is because forking &quot;once&quot; uses the directory scanner after the list of excludes is split and put into a properties file and then read back in as separate elements.  &quot;always&quot; and &quot;never&quot; use the list of excludes without splitting the elements with a comma, and the plexus utils scanner couldn&apos;t deal with elements with a comma in them.&lt;/p&gt;</comment>
                            <comment id="17994172" author="olamy" created="Fri, 4 Jul 2025 07:16:47 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1812&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bgxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>