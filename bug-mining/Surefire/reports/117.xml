<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:07:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-455] XML delimiter characters in attribute and text content are escaped twice. </title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-455</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;XML delimiter characters (left angle bracket, ampersand, etc.) are escaped twice in &lt;em&gt;TEST-*.xml&lt;/em&gt; files in &lt;em&gt;surefire-reports&lt;/em&gt; directory. For example the left angle bracket is replaced with &amp;amp;lt; instead of &amp;lt; and the right angle bracket with &amp;amp;gt; instead of &amp;gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;testcase time=&lt;span class=&quot;code-quote&quot;&gt;&quot;2.306&quot;&lt;/span&gt; classname=&lt;span class=&quot;code-quote&quot;&gt;&quot;MyTest&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;testItem&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;failure message=&lt;span class=&quot;code-quote&quot;&gt;&quot;expected:&amp;amp;amp;lt;10&amp;amp;amp;gt; but was:&amp;amp;amp;lt;7&amp;amp;amp;gt;&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;junit.framework.AssertionFailedError&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
junit.framework.AssertionFailedError: expected:&amp;amp;amp;lt;10&amp;amp;amp;gt; but was:&amp;amp;amp;lt;7&amp;amp;amp;gt;
        at junit.framework.Assert.fail(Assert.java:47)
        at junit.framework.Assert.failNotSame(Assert.java:278)
        at junit.framework.Assert.assertSame(Assert.java:242)
        at MyTest.testItem(MyTest.java:38)
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/failure&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/testcase&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that both &lt;b&gt;org.apache.maven.surefire.report.XMLReporter&lt;/b&gt; and &lt;b&gt;org.apache.maven.surefire.util.PrettyPrintXMLWriter&lt;/b&gt; are escaping the XML content. As a result the ampersand character is escaped once more time. In addition &lt;b&gt;org.apache.maven.surefire.util.PrettyPrintXMLWriter#escapeXml&lt;/b&gt; has implementation error: three characters (ampersand, left angle bracket and right angle bracket) are replaced with &lt;b&gt;&amp;amp;amp;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;In the attached patch (for surefire-2.4.1) I removed &lt;b&gt;org.apache.maven.surefire.report.XMLReporter#escapeAttribute&lt;/b&gt; method and fixed &lt;b&gt;org.apache.maven.surefire.util.PrettyPrintXMLWriter#escapeXml&lt;/b&gt; implementation. Afterwards the XML report was generated as expected:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;testcase time=&lt;span class=&quot;code-quote&quot;&gt;&quot;2.306&quot;&lt;/span&gt; classname=&lt;span class=&quot;code-quote&quot;&gt;&quot;MyTest&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;testItem&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;failure message=&lt;span class=&quot;code-quote&quot;&gt;&quot;expected:&amp;amp;lt;10&amp;amp;gt; but was:&amp;amp;lt;7&amp;amp;gt;&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;junit.framework.AssertionFailedError&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
junit.framework.AssertionFailedError: expected:&amp;amp;lt;10&amp;amp;gt; but was:&amp;amp;lt;7&amp;amp;gt;
        at junit.framework.Assert.fail(Assert.java:47)
        at junit.framework.Assert.failNotSame(Assert.java:278)
        at junit.framework.Assert.assertSame(Assert.java:242)
        at MyTest.testItem(MyTest.java:38)
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/failure&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/testcase&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12810134">SUREFIRE-455</key>
            <summary>XML delimiter characters in attribute and text content are escaped twice. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="todorst">Todor Todorov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2008 08:35:29 +0000</created>
                <updated>Fri, 4 Jul 2025 07:09:36 +0000</updated>
                            <resolved>Mon, 11 Feb 2008 16:56:23 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.4.1</version>
                                    <fixVersion>2.4.2</fixVersion>
                                    <component>xml generation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14454170" author="dfabulich" created="Mon, 11 Feb 2008 16:56:23 +0000"  >&lt;p&gt;Thanks for your work here.  We actually have an integration test for this that verified XML validity, but it didn&apos;t catch this case (I examined the XML by eye and it looked fine).  I&apos;ve enhanced the integration test to examine the messages explicitly to catch this case.&lt;/p&gt;

&lt;p&gt;Interestingly, this highlighted a bug in the way we handle non-visible control characters (e.g. the null charater \0).  You added code to explicitly filter out null characters in your patch.  That was a reasonable choice, but I decided that we didn&apos;t want to throw away information.  Also, it&apos;s not just nulls; all non-visible control characters except for \t \n and \r are invalid in XML 1.0, even in entity form.  So I deliberately introduced &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-456&quot; title=&quot;Surefire doubly XML-escapes non-visible control characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-456&quot;&gt;&lt;del&gt;SUREFIRE-456&lt;/del&gt;&lt;/a&gt; to handle this case.&lt;/p&gt;

&lt;p&gt;Submitted revision 620660.&lt;/p&gt;</comment>
                            <comment id="14454235" author="todorst" created="Tue, 12 Feb 2008 09:07:59 +0000"  >&lt;p&gt;Thanks for your fast reaction. I agree, throwing information away is a bad idea. In my test case I need a string delimiter and I use &lt;em&gt;null&lt;/em&gt; character. It is unusual, but if the string contains XML fragments, it is a good choice I think. I filtered only the &lt;em&gt;null&lt;/em&gt; character, because I read by mistake &lt;a href=&quot;http://www.w3.org/TR/xml11/#charsets&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;XML 1.1 Specification&lt;/a&gt;. It extends the character range with &lt;tt&gt;RestrictedChar&lt;/tt&gt; set, so &lt;em&gt;null&lt;/em&gt; is probably the only bad character left there.&lt;/p&gt;</comment>
                            <comment id="17993795" author="olamy" created="Fri, 4 Jul 2025 07:09:36 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1318&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12719903" name="surefire-api.patch" size="4054" author="todorst" created="Mon, 11 Feb 2008 08:35:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bg53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>