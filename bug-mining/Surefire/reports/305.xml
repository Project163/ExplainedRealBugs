<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:10:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-906] Sometimes get NullPointerException in forked process</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-906</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;(This is using the latest 2.13-SNAPSHOT)&lt;/p&gt;

&lt;p&gt;Using forkMode=perthread, the child processes sometimes abort with this exception:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at java.io.File.&amp;lt;init&amp;gt;(File.java:251)&lt;br/&gt;
	at org.apache.maven.surefire.booter.BooterDeserializer.deserialize(BooterDeserializer.java:61)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:63)&lt;/p&gt;

&lt;p&gt;It only happens sometimes.&lt;br/&gt;
Using -X keeps the temp files, and looking at the file that&apos;s supposed to pass the properties, I see that the file is truncated midway, causing the exception.&lt;/p&gt;

&lt;p&gt;Possibly the parent process needs to &lt;b&gt;flush&lt;/b&gt; the file after it writes to it before is closes it.&lt;/p&gt;</description>
                <environment>Arch linux</environment>
        <key id="12810375">SUREFIRE-906</key>
            <summary>Sometimes get NullPointerException in forked process</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="cmosher01">Christopher Mosher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2012 09:09:10 +0000</created>
                <updated>Fri, 4 Jul 2025 07:19:19 +0000</updated>
                            <resolved>Fri, 17 Aug 2012 17:11:45 +0000</resolved>
                                    <version>2.12.3</version>
                                    <fixVersion>2.12.3</fixVersion>
                                    <component>process forking</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14455326" author="krosenvold" created="Fri, 17 Aug 2012 11:19:19 +0000"  >&lt;p&gt;Interesting how the &quot;flush&quot; method on FileOutputStream does nothign....&lt;/p&gt;</comment>
                            <comment id="14455498" author="cmosher01" created="Fri, 17 Aug 2012 12:23:22 +0000"  >&lt;p&gt;Maybe out.getFD().sync() ?&lt;/p&gt;</comment>
                            <comment id="14455559" author="cmosher01" created="Fri, 17 Aug 2012 13:48:26 +0000"  >&lt;p&gt;I was able to fix it with the attached patch. It did not have to do with the output files. Instead it was a non-thread-safe issue with the properties object. Multiple threads in the parent (forking) process were accessing the same properties... the clone() call that was there must not have been enough to ensure thread safety.&lt;/p&gt;</comment>
                            <comment id="14455354" author="krosenvold" created="Fri, 17 Aug 2012 17:11:45 +0000"  >&lt;p&gt;Fixed with a slightly different patch in r1374556, thanks for testing the solution.&lt;/p&gt;
</comment>
                            <comment id="14455500" author="cmosher01" created="Fri, 17 Aug 2012 19:36:04 +0000"  >&lt;p&gt;Your fix is confirmed. Thanks for your quick response, Kristian.&lt;br/&gt;
Note that the revision is actually r1374456.&lt;/p&gt;</comment>
                            <comment id="17994308" author="olamy" created="Fri, 4 Jul 2025 07:19:19 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1704&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12720322" name="SUREFIRE-906-0001.patch" size="1432" author="cmosher01" created="Fri, 17 Aug 2012 13:48:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>