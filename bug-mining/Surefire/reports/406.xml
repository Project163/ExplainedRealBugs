<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:11:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1096] ClassCastException: Fork test for TestNG with xmlsuite</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1096</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;When i setup surefire for forking tests via:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;forkCount&amp;gt;3&amp;lt;/forkCount&amp;gt;
&amp;lt;reuseForks&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/reuseForks&amp;gt;
&amp;lt;parallel&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/parallel&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And i&apos;m using TestNG provider with xml suite definition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;suiteXmlFiles&amp;gt;
&amp;lt;suiteXmlFile&amp;gt;suite.xml&amp;lt;/suiteXmlFile&amp;gt;
&amp;lt;/suiteXmlFiles&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m getting exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassCastException: java.io.File cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.runSuitesForkOnceMultiple(ForkStarter.java:201)
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:160)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:806)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:701)
	at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:629)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12810495">SUREFIRE-1096</key>
            <summary>ClassCastException: Fork test for TestNG with xmlsuite</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="agudian">Andreas Gudian</assignee>
                                    <reporter username="michal.bocek">Michal Bocek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2014 03:24:46 +0000</created>
                <updated>Fri, 4 Jul 2025 07:22:40 +0000</updated>
                            <resolved>Sat, 27 Sep 2014 18:58:15 +0000</resolved>
                                    <version>2.14</version>
                    <version>2.15</version>
                    <version>2.16</version>
                    <version>2.17</version>
                                    <fixVersion>2.18</fixVersion>
                                    <component>TestNG support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14456068" author="michal.bocek" created="Thu, 4 Sep 2014 03:30:37 +0000"  >&lt;p&gt;After quick investigation it looks like when surefire trying to get the suite collection in ForkStarter class it expected collection of classes but TestNgProvider will generate in TestNGXmlTestSuite collection of suite files.&lt;/p&gt;</comment>
                            <comment id="14456244" author="michal.bocek" created="Thu, 4 Sep 2014 03:32:50 +0000"  >&lt;p&gt;Can be connected with &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-463&quot; title=&quot;ClassCastException when using testng suiteXmlFile and forkMode=always&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-463&quot;&gt;&lt;del&gt;SUREFIRE-463&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14456290" author="agudian" created="Thu, 25 Sep 2014 13:05:24 +0000"  >&lt;p&gt;That exception is really emberrasing and we should deal with that case properly. But: forkCount=3 and reuseForks=true won&apos;t have much effect when using a suite.xml anyway. Surefire creates the forked JVMs, but TestNG is responsible for executing the units of work that we feed in. Typically, we feed in the test classes, which we would do indiviually in case of reuseForks=true and forkCount&amp;gt;1. In this case, we only have one unit of work that Surefire understands: that suite.xml. &lt;br/&gt;
What we could (and should) support is to correctly feed in the suite.xml, and if there is more than one specified, feed them in separately in the different JVM forks.&lt;/p&gt;

&lt;p&gt;I&apos;ll set the issue to fixVersion 2.18, but it&apos;s more likely that it won&apos;t make it into this one. I would then push it to the next release. In the meantime, it should work for you with forkCount=1.&lt;/p&gt;

&lt;p&gt;Is that OK?&lt;/p&gt;</comment>
                            <comment id="14456311" author="michal.bocek" created="Thu, 25 Sep 2014 14:06:53 +0000"  >&lt;p&gt;Sounds good. At the moment we decided to use different strategy of test execution but it will be nice to know that more &quot;suites.xml&quot; files will be possible to execute in forked jvms. &lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="14456237" author="agudian" created="Sat, 27 Sep 2014 18:58:18 +0000"  >&lt;p&gt;For now, I committed a fix that lets surefire not crash when using forkCount&amp;gt;1, forkMode=true and suiteXmlFiles. Surefire will simply fall-back to acting like it was configured with forkCount=1.&lt;/p&gt;

&lt;p&gt;I&apos;ll create a new issue for extending the reusable-forks feature to also work based on suiteXml files.&lt;/p&gt;</comment>
                            <comment id="17994487" author="olamy" created="Fri, 4 Jul 2025 07:22:40 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1497&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12810485">SUREFIRE-1078</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bd6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>