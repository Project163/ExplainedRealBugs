<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:09:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-793] JUnit47 provider reports incorrect time in the XML report</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-793</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;With this test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class Test0 {

  @Test
  public void testT0() throws Exception {
    Thread.sleep(2000);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The time presented in the XML report is wrong (close to zero), both for the total time and the time spent in the method. It&apos;s a side effect of the replay mechanism. I can&apos;t make it working without hacking the code quite a lot and probably breaking the other use cases, so a clean fix would be really appreciated. The complete test case would include before &amp;amp; after stuff, like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class Test0 {

  @Test
  public void testT0() throws Exception {
    Thread.sleep(2000);
  }

  @Test
  public void testT1() throws Exception {
    Thread.sleep(2000);
  }

  @BeforeClass
  public static void setUpBeforeClass() throws Exception {
     Thread.sleep(2000);
  }

  @AfterClass
  public static void tearDownAfterClass() throws Exception {
     Thread.sleep(2000);
  }


  @Before
  public void setUp() throws Exception {
     Thread.sleep(2000);
  }

  @After
  public void tearDown() throws Exception {
     Thread.sleep(2000);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The data are correct (at least individual method time) when using JUnit4 provider.&lt;br/&gt;
It&apos;s important, because the XML reports are used by Jenkins, and the test time is something we monitor very carefully.&lt;/p&gt;</description>
                <environment>all</environment>
        <key id="12809554">SUREFIRE-793</key>
            <summary>JUnit47 provider reports incorrect time in the XML report</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Nov 2011 15:38:07 +0000</created>
                <updated>Fri, 4 Jul 2025 07:17:12 +0000</updated>
                            <resolved>Tue, 13 Dec 2011 13:53:10 +0000</resolved>
                                    <version>2.10</version>
                    <version>2.11</version>
                                    <fixVersion>2.11</fixVersion>
                    <fixVersion>2.12</fixVersion>
                                    <component>Junit 4.7+ (parallel) support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14455075" author="nkeywal" created="Fri, 18 Nov 2011 06:03:58 +0000"  >&lt;p&gt;I&apos;ve managed to reduce the changes to something small. Imperfect patch, but small and seems to work for us.&lt;/p&gt;</comment>
                            <comment id="14455115" author="krosenvold" created="Wed, 23 Nov 2011 04:21:16 +0000"  >&lt;p&gt;This was fixed (the proper way) in r1205186. replay now transmits correct runtime&lt;/p&gt;</comment>
                            <comment id="14455133" author="nkeywal" created="Mon, 5 Dec 2011 01:50:03 +0000"  >&lt;p&gt;I still have a wrong reported time in the xml file on 2.12-snapshot:&lt;/p&gt;

&lt;p&gt;With JUnit47:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;
&amp;lt;testsuite failures=&quot;0&quot; time=&quot;0.007&quot; errors=&quot;0&quot; skipped=&quot;0&quot; tests=&quot;2&quot; name=&quot;Test0&quot;&amp;gt;
  &amp;lt;testcase time=&quot;6.004&quot; classname=&quot;Test0&quot; name=&quot;testT0&quot;/&amp;gt;
  &amp;lt;testcase time=&quot;6&quot; classname=&quot;Test0&quot; name=&quot;testT1&quot;/&amp;gt;
&amp;lt;/testsuite&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With JUnit4:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;
&amp;lt;testsuite failures=&quot;0&quot; time=&quot;16.062&quot; errors=&quot;0&quot; skipped=&quot;0&quot; tests=&quot;2&quot; name=&quot;Test0&quot;&amp;gt;
  [skip properties]
  &amp;lt;testcase time=&quot;6.004&quot; classname=&quot;Test0&quot; name=&quot;testT0&quot;/&amp;gt;
  &amp;lt;testcase time=&quot;5.997&quot; classname=&quot;Test0&quot; name=&quot;testT1&quot;/&amp;gt;
&amp;lt;/testsuite&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14455166" author="nkeywal" created="Mon, 5 Dec 2011 02:31:23 +0000"  >&lt;p&gt;As a side note, the times reported on screen differ as well:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2.12-snapshot/Junit47:
Running Test0
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.004 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2.12-snapshot/Junit4:
Running Test0
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.056 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2.10/Junit47:
Running Test0
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.003 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14455188" author="krosenvold" created="Mon, 5 Dec 2011 15:40:55 +0000"  >&lt;p&gt;Fixed in r1210641, added IT. Deployed updated 2.12-SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="14455118" author="nkeywal" created="Mon, 5 Dec 2011 16:15:52 +0000"  >&lt;p&gt;The original issue is fixed, thank you!&lt;/p&gt;

&lt;p&gt;The difference between the times reported I was mentioning in my latest comment is still there. Do you want me to create another jira for this?&lt;/p&gt;</comment>
                            <comment id="14455097" author="krosenvold" created="Tue, 6 Dec 2011 01:50:21 +0000"  >&lt;p&gt;I&apos;ll take another look&lt;/p&gt;</comment>
                            <comment id="14455098" author="nkeywal" created="Mon, 12 Dec 2011 03:47:04 +0000"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;You changed the priority to minor (which is fine for me), but the bug it still in the close state. Is it an error or should I create another bug for the wrong reporting time?&lt;/p&gt;</comment>
                            <comment id="14455169" author="krosenvold" created="Mon, 12 Dec 2011 05:15:24 +0000"  >&lt;p&gt;Good to see you&apos;re keeping track. Time spent in beforeclass/afterclass is not being counted properly&lt;/p&gt;</comment>
                            <comment id="14455184" author="nkeywal" created="Mon, 12 Dec 2011 13:04:28 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Well it&apos;s actually important for us, as &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-800&quot; title=&quot;redirectTestOutputToFile is not taken into account in all cases with JUnit47 provider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-800&quot;&gt;&lt;del&gt;SUREFIRE-800&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-798&quot; title=&quot;JUnit47 provider could print immediatly the test class name, as JUnit4, instead of waiting for the test to finish.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-798&quot;&gt;&lt;del&gt;SUREFIRE-798&lt;/del&gt;&lt;/a&gt;, as we&apos;re running a set of complex tests that takes quite a long time... And I have not been able to work out a good fix for them.&lt;/p&gt;</comment>
                            <comment id="14455121" author="krosenvold" created="Tue, 13 Dec 2011 13:53:10 +0000"  >&lt;p&gt;I&apos;m closing this issue as fixed. Unfortunately the JUnit API&apos;s do not allow us to measure time spent in beforeClass/afterClass, to my knowledge there is no way to get that information. Please file this issue with the JUnit project if you want this fixed. If you want to investigate further on the JUnit mailing lists, that may also be possible.&lt;/p&gt;

&lt;p&gt;Unless some further information becomes available, it is quite pointless to create a separate issue, but feel free to do so if you want to; especially if there is some relevant information to track in this context.&lt;/p&gt;
</comment>
                            <comment id="14455122" author="nkeywal" created="Wed, 14 Dec 2011 08:55:49 +0000"  >&lt;p&gt;I have a partial fix for it: with the fix, the time reported on the screen and on the .txt file is right. The time reported in the .xml remains wrong.&lt;/p&gt;

&lt;p&gt;I used the testSetStarting / testSetCompleted timestamps. Is it an issue?&lt;/p&gt;

&lt;p&gt;The diff is there: &lt;a href=&quot;https://github.com/nkeywal/maven-surefire/commit/2543565ed23ed9b7f9c2db730cd0a92448b7a824&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nkeywal/maven-surefire/commit/2543565ed23ed9b7f9c2db730cd0a92448b7a824&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14455234" author="krosenvold" created="Wed, 14 Dec 2011 09:32:43 +0000"  >&lt;p&gt;As far as I am aware, testSetStarting/testSetCompleted is only fired once per test-run, which can span multiple classes. Maybe not entirely what we&apos;re looking for...?&lt;/p&gt;</comment>
                            <comment id="14455151" author="nkeywal" created="Wed, 14 Dec 2011 09:57:02 +0000"  >&lt;p&gt;I checked, you&apos;re right, this works with forkMode=always only. How comes JUnit4 provider works when forkMode=once?&lt;/p&gt;</comment>
                            <comment id="14455123" author="krosenvold" created="Wed, 14 Dec 2011 15:48:24 +0000"  >&lt;p&gt;Because we only run 1 class at a time with JUnit4, whereas with 4.7+ we send junit the whole load of classes in one go&lt;/p&gt;</comment>
                            <comment id="17994194" author="olamy" created="Fri, 4 Jul 2025 07:17:12 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1782&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810318">SUREFIRE-800</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12720263" name="surefire_793_trunk.v3.patch" size="3729" author="nkeywal" created="Fri, 18 Nov 2011 06:03:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2betb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>