<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:16:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1570] Maven-fail-safe doesn&apos;t put testing JPMS module on module path</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1570</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I uploaded project - mavenproject20. Run `mvn verify`. You will see the following:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Scanning &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building mavenproject20 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-resources) @ mavenproject20 ---
[INFO] Using &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt; encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.0:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) @ mavenproject20 ---
[WARNING] ********************************************************************************************************************
[WARNING] * Required filename-based automodules detected. Please don&apos;t publish &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; project to a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; artifact repository! *
[WARNING] ********************************************************************************************************************
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 3 source files to /home/Jim/NetBeansProjects/mavenproject20/target/classes
[WARNING] /home/Jim/NetBeansProjects/mavenproject20/src/main/java/module-info.java:[1,8] module name component Mavenproject20 should avoid terminal digits
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testResources) @ mavenproject20 ---
[INFO] Using &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/Jim/NetBeansProjects/mavenproject20/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.0:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) @ mavenproject20 ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /home/Jim/NetBeansProjects/mavenproject20/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) @ mavenproject20 ---
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-jar) @ mavenproject20 ---
[INFO] Building jar: /home/Jim/NetBeansProjects/mavenproject20/target/mavenproject20-0.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-failsafe-plugin:2.22.0:integration-test (integration-tests) @ mavenproject20 ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running me.pavel.mavenproject20.ServiceIT
JDKModulePath:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
ModuleName:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
module jdk.unsupported
module jdk.sctp
module java.naming
module java.jnlp
module jdk.httpserver
module java.xml
module javafx.controls
module java.datatransfer
module jdk.javadoc
module jdk.jconsole
module java.instrument
module jdk.packager
module jdk.deploy
module jdk.jfr
module jdk.management
module jdk.charsets
module oracle.net
module jdk.jdeps
module java.sql.rowset
module jdk.net
module jdk.accessibility
module jdk.attach
module jdk.internal.le
module jdk.snmp
module java.base
module jdk.plugin
module jdk.dynalink
module jdk.naming.rmi
module jdk.internal.opt
module java.management.rmi
module jdk.management.jfr
module javafx.swing
module jdk.editpad
module jdk.crypto.ec
module jdk.javaws
module jdk.jstatd
module jdk.management.agent
module javafx.graphics
module javafx.media
module java.rmi
module java.prefs
module jdk.security.jgss
module javafx.fxml
module java.smartcardio
module jdk.xml.dom
module java.xml.crypto
module jdk.jsobject
module jdk.jdi
module jdk.compiler
module java.management
module jdk.management.cmm
module jdk.packager.services
module jdk.jartool
module jdk.scripting.nashorn
module java.security.jgss
module jdk.localedata
module java.desktop
module jdk.zipfs
module jdk.jshell
module oracle.desktop
module jdk.internal.ed
module java.security.sasl
module jdk.jdwp.agent
module java.compiler
module jdk.plugin.dom
module javafx.web
module jdk.naming.dns
module jdk.crypto.cryptoki
module jdk.management.resource
module javafx.base
module java.sql
module jdk.security.auth
module java.se
module jdk.internal.jvmstat
module jdk.jlink
module java.logging
module java.scripting
[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.049 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in me.pavel.mavenproject20.ServiceIT
[ERROR] testGetString  Time elapsed: 0.037 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.util.NoSuchElementException: No value present
	at me.pavel.mavenproject20.ServiceIT.testGetString(ServiceIT.java:16)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   ServiceIT.testGetString:16 &#187; NoSuchElement No value present
[INFO] 
[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-failsafe-plugin:2.22.0:verify (integration-tests) @ mavenproject20 ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.148 s
[INFO] Finished at: 2018-09-15T19:20:44+03:00
[INFO] Final Memory: 16M/54M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.22.0:verify (integration-tests) on project mavenproject20: There are test failures.
[ERROR] 
[ERROR] Please refer to /home/Jim/NetBeansProjects/mavenproject20/target/failsafe-reports &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the individual test results.
[ERROR] Please refer to dump files (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[ERROR] -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
[ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you see it shows that `JDKModulePath:null and ModuleName:null`. At the same time there is no Mavenproject20 in boot layer, although all other modules are present (I don&apos;t think that the plugin creates another layer). Because of this it is impossible to test JPMS services.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13185317">SUREFIRE-1570</key>
            <summary>Maven-fail-safe doesn&apos;t put testing JPMS module on module path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="Pavel_K">Pavel_K</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Sep 2018 16:27:31 +0000</created>
                <updated>Fri, 4 Jul 2025 07:31:55 +0000</updated>
                            <resolved>Sat, 16 May 2020 19:13:07 +0000</resolved>
                                    <version>2.22.0</version>
                                    <fixVersion>3.0.0-M5</fixVersion>
                                    <component>Maven Failsafe Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16620959" author="rfscholte" created="Wed, 19 Sep 2018 17:56:05 +0000"  >&lt;p&gt;You&apos;ve forgot to add the following file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;src/main/resources/META-INF/services/me.pavel.mavenproject20.Service&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
me.pavel.mavenproject20.ServiceImpl
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After that the test is green&#160;and build succeeds&lt;/p&gt;</comment>
                            <comment id="16620972" author="pavel_k" created="Wed, 19 Sep 2018 18:02:22 +0000"  >&lt;p&gt;No. This is not right. The way you described is old way for creating services. But I am speaking about JPMS! When we use JPMS we don&apos;t create services in META-INF folder. Please, read comments to this questions - there is a lot of explanation of this &lt;a href=&quot;https://stackoverflow.com/questions/52314884/how-to-test-jpms-service-with-failsafe-and-junit5-without-creating-additional-te&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/52314884/how-to-test-jpms-service-with-failsafe-and-junit5-without-creating-additional-te&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;The problem here is that fail-safe doesn&apos;t put the testing module on module path.&lt;/p&gt;</comment>
                            <comment id="16621013" author="rfscholte" created="Wed, 19 Sep 2018 18:31:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;When we use JPMS we don&apos;t create services in META-INF folder&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Who says you don&apos;t need to create this file? Show me a reliable source that says so. It looks like you&apos;re mixing up the purpose of the module descriptor and the need for these service loader files.&lt;/p&gt;</comment>
                            <comment id="16621031" author="pavel_k" created="Wed, 19 Sep 2018 18:45:13 +0000"  >&lt;p&gt;OK. Read JPMS specification. See also ServiceProvider javadoc &lt;a href=&quot;https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html&lt;/a&gt; . Read tutorials in internet. Try them. See how they work.  &lt;/p&gt;

&lt;p&gt;We don&apos;t create META-INF/services we create only one file - module-info, which contains all the information about service (provides with). JPMS manages services itself. You are confused because for getting JPMS service is used old ServiceProvider. &lt;/p&gt;</comment>
                            <comment id="16621058" author="rfscholte" created="Wed, 19 Sep 2018 19:07:07 +0000"  >&lt;p&gt;Reopening. Using the same test with surefire does work as expected.&lt;br/&gt;
When running with &lt;tt&gt;-X&lt;/tt&gt; you&apos;ll see that surefire does show the modulepath, but failsafe is missing that part.&lt;/p&gt;</comment>
                            <comment id="16806761" author="yrodiere" created="Mon, 1 Apr 2019 13:42:05 +0000"  >&lt;p&gt;I just experienced this bug, and investigated a little bit. Apparently the failsafe plugin never considers the modulepath, because it is unable to detect that a given JAR contains &lt;tt&gt;module-info.class&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;See how the module descriptor is retrieved in &lt;tt&gt;org.apache.maven.plugin.surefire.AbstractSurefireMojo&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File getModuleDescriptor()
{
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( getClassesDirectory(), &lt;span class=&quot;code-quote&quot;&gt;&quot;module-info.class&quot;&lt;/span&gt; );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the failsafe plugin, &lt;tt&gt;getClassesDirectory()&lt;/tt&gt; returns the path of the JAR, not the path of a directory. As a result, &lt;tt&gt;getModuleDescriptor().exists()&lt;/tt&gt;, called in other methods on this file, ends up being always false, because &lt;tt&gt;File.exists()&lt;/tt&gt; does not handle JAR/ZIP file traversal transparently.&lt;/p&gt;</comment>
                            <comment id="16825459" author="jshook" created="Wed, 24 Apr 2019 19:39:39 +0000"  >&lt;p&gt;Is there a fix planned for this? Presently, it is difficult to do proper integration testing of JPMS-enabled projects with inter-module dependencies. Can we simply allow failsafe to use the same module path initialization as the surefire plugin?&lt;/p&gt;</comment>
                            <comment id="16827015" author="jshook" created="Fri, 26 Apr 2019 14:41:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;, There is indeed a need to support JPMS-only testing modes. I had similar issues with testing with JMPS as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yrodiere&quot; class=&quot;user-hover&quot; rel=&quot;yrodiere&quot;&gt;yrodiere&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt; did.&lt;/p&gt;

&lt;p&gt;To be more specific, the META-INF/services mechanism is meant to be used as a pre-JPMS mechanism, and the service entries (provides and uses) in the module-info file are meant to be used with JPMS. Both can be present if you are trying to make a jar that can also act like a module. However, for testing, this is insufficient, as with JPMS testing you will be more concerned with whether or not a downstream JPMS module can see the service entries without falling back to Jar mode. Additionally, I believe the mode that you use is determined by whether or not the caller is a module or not. If it is, then the META-INF/services entry is useless.&lt;/p&gt;

&lt;p&gt;For now, I&apos;m having to do lots of hackish things in my mojo in order to get testing working at all with JPMS services. This will be too much for lots of users and they simply won&apos;t.&lt;/p&gt;

&lt;p&gt;Also, I&apos;ve verified the same issue that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yrodiere&quot; class=&quot;user-hover&quot; rel=&quot;yrodiere&quot;&gt;yrodiere&lt;/a&gt; identified above with the JPMS mode detection. These issues are causing lots of confusion for users trying to bridge into JPMS mode with artifact-level testing. How do we help move this along in terms of fixing the issues?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16829634" author="rfscholte" created="Mon, 29 Apr 2019 19:14:01 +0000"  >&lt;p&gt;I see &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yrodiere&quot; class=&quot;user-hover&quot; rel=&quot;yrodiere&quot;&gt;yrodiere&lt;/a&gt; discovered the root cause, so I believe any of you should be able to fix that, right? The surefire project has some dedicated maintainers, so they should be able to help with the PR.&lt;/p&gt;</comment>
                            <comment id="16830944" author="pavel_k" created="Wed, 1 May 2019 10:36:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; Thank you for the clarification. Only one thing - don&apos;t mark yourself as Assignee. Because people will wait some actions from you while you don&apos;t take them.&lt;/p&gt;</comment>
                            <comment id="16831070" author="rfscholte" created="Wed, 1 May 2019 15:36:41 +0000"  >&lt;p&gt;It was still assigned to me, because I closed it at first. With reopening it should be unassigned again.&lt;/p&gt;</comment>
                            <comment id="16831071" author="rfscholte" created="Wed, 1 May 2019 15:38:59 +0000"  >&lt;p&gt;A hint: you can use &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/blob/master/plexus-java/src/main/java/org/codehaus/plexus/languages/java/jpms/LocationManager.java#L111-L118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/codehaus-plexus/plexus-languages/blob/master/plexus-java/src/main/java/org/codehaus/plexus/languages/java/jpms/LocationManager.java#L111-L118&lt;/a&gt; to get the required information&lt;/p&gt;</comment>
                            <comment id="17087197" author="pavel_k" created="Sun, 19 Apr 2020 21:21:51 +0000"  >&lt;p&gt;Is anyone going to fix this issue? A year and a half has passed, jdk 14 was released and we still has no tool to test jpms services in integrations tests. That&apos;s really funny.&lt;/p&gt;</comment>
                            <comment id="17087213" author="tibor17" created="Sun, 19 Apr 2020 21:56:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
It&apos;s not funny. It&apos;s pitty because we are still waiting for the open source contributor on GitHub who would provide a fix. If you are an expert in JPMS, provide a fix in GitHub or concept here in Jira.&lt;/p&gt;</comment>
                            <comment id="17087247" author="pavel_k" created="Sun, 19 Apr 2020 23:13:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I know only one JPMS expert - Alan Bateman, because I got answers almost to all difficult JPMS questions from him (SO/jigsaw-dev). I have some JPMS experience but I have no idea how maven and failsafe work and how they load jars and classes. If someone who knows maven/failsafe well can help me, we can try to fix this issue.&lt;/p&gt;</comment>
                            <comment id="17087253" author="tibor17" created="Sun, 19 Apr 2020 23:32:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
What you think of the comment &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16806761&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16806761&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16806761&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16806761&lt;/a&gt;&lt;br/&gt;
Can you use your test project, attached in this Jira, and fix the method&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File getModuleDescriptor()
    {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( getClassesDirectory(), &lt;span class=&quot;code-quote&quot;&gt;&quot;module-info.class&quot;&lt;/span&gt; );
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I guess we should make this method &lt;tt&gt;protected&lt;/tt&gt; and override it in the class &lt;tt&gt;IntegrationTestMojo&lt;/tt&gt;. See the method &lt;tt&gt;getClassesDirectory()&lt;/tt&gt; in &lt;tt&gt;IntegrationTestMojo&lt;/tt&gt; which sometimes returns JAR file and sometimes directory, depending of packaging.&lt;/p&gt;</comment>
                            <comment id="17087268" author="tibor17" created="Mon, 20 Apr 2020 00:29:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt;&lt;br/&gt;
How is it with &lt;tt&gt;module-info.class&lt;/tt&gt; in multi module JAR?&lt;br/&gt;
Is &lt;tt&gt;module-info.class&lt;/tt&gt; in every directory of java versions?&lt;br/&gt;
How your &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16831071&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16831071&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;hint&lt;/a&gt; would help in real? I am asking because I want to know whether we should call plexus java or the following: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( getClassesDirectory(), &lt;span class=&quot;code-quote&quot;&gt;&quot;module-info.class&quot;&lt;/span&gt; )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17087911" author="rfscholte" created="Mon, 20 Apr 2020 16:33:39 +0000"  >&lt;p&gt;Every &lt;tt&gt;META-INF/versions/x&lt;/tt&gt; may contain a &lt;tt&gt;module-info.class&lt;/tt&gt;. The JDK will try to pick the module-info matching the version, otherwise it will try the lower versions, ending in the base directory.&lt;/p&gt;

&lt;p&gt;What you can do is use &lt;tt&gt;ResolvePathRequest&lt;/tt&gt; (single path) to get the module descriptor. With &lt;tt&gt;ResolvePathsRequest&lt;/tt&gt; (multiple paths) you can set this module descriptor;&lt;/p&gt;</comment>
                            <comment id="17089789" author="pavel_k" created="Wed, 22 Apr 2020 15:37:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I am trying to understand how failsafe works from from `-X` log I see that failsafe uses only boot classpath and all modules are on it. Is this correct? If yes, then how will we test jpms services if our modules are on classpath?&lt;/p&gt;</comment>
                            <comment id="17089950" author="tibor17" created="Wed, 22 Apr 2020 19:00:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
Both, MP and CP, are discovered. You should have &lt;tt&gt;module-info.java&lt;/tt&gt; in &lt;tt&gt;src/main/java&lt;/tt&gt;. Do not bother with test dependencies in &lt;tt&gt;module-info.java&lt;/tt&gt; because compile and runtime dependencies are discovered. The test artifacts go to CP but we have an ambition to discover test dependencies in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1733&quot; title=&quot;Surefire and Failsafe JPMS additions for JUnit 5.x execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1733&quot;&gt;&lt;del&gt;SUREFIRE-1733&lt;/del&gt;&lt;/a&gt; and split them to CP and MP too.&lt;/p&gt;

&lt;p&gt;If you want to provide a fix for this Jira issue, i can guide you where the fix should be applied. Simply the &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1295&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getModuleDescriptor()&lt;/a&gt; should be polymorphic and the behavior should be like that in &lt;tt&gt;SurefirePluginMojo&lt;/tt&gt; but different in &lt;tt&gt;IntegrationTestMojo&lt;/tt&gt;. Then you will see that the &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;descriptor&lt;/a&gt; is used in order to split the path to CP and MP.&lt;br/&gt;
Your taks will be to substitute the descriptor path (File) with &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-languages/blob/master/plexus-java/src/main/java/org/codehaus/plexus/languages/java/jpms/LocationManager.java#L111-L118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResolvePathResult&lt;/a&gt;, see Robet&apos;s hint in his &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16831071&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16831071&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt;.&lt;/p&gt;

</comment>
                            <comment id="17091673" author="tibor17" created="Fri, 24 Apr 2020 15:38:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
I would like to release 3.0.0-M5 with JPMS fixes. There are 3 candidates at least.&lt;br/&gt;
Since we have started our discussions in another issue and you also need to have stable Surefire, we can maybe participate in the fix for this bug. What about to start with my analysis &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, go to the details, and then we can open a PR on GH and finally fix it? Would you participate?&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=17089950&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17089950&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=17089950&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17089950&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17092146" author="pavel_k" created="Sat, 25 Apr 2020 09:07:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I will be glad to help, but as I said I don&apos;t know maven plugins work and now have no time to do it now. What I can is to test, to debug, to give comments from jpms point of view. I can create simple jpms project with services we could start.&lt;/p&gt;</comment>
                            <comment id="17092160" author="tibor17" created="Sat, 25 Apr 2020 09:38:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt; Stay tuned. Pls try to find the time to test the fix.&lt;br/&gt;
Can you meanwhile check the &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12939841/mavenproject20.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;attached project&lt;/a&gt; whether it is suitable project for integration testing?&lt;/p&gt;</comment>
                            <comment id="17092221" author="pavel_k" created="Sat, 25 Apr 2020 12:54:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Why when do I run my IT tests this way:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
             &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;maven-failsafe-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;3.0.0-M4&amp;lt;/version&amp;gt;
                &amp;lt;executions&amp;gt;
                    &amp;lt;execution&amp;gt;
                        &amp;lt;id&amp;gt;integration-tests&amp;lt;/id&amp;gt;
                        &amp;lt;goals&amp;gt;
                            &amp;lt;goal&amp;gt;integration-test&amp;lt;/goal&amp;gt;
                            &amp;lt;goal&amp;gt;verify&amp;lt;/goal&amp;gt;
                        &amp;lt;/goals&amp;gt;
                        &amp;lt;configuration&amp;gt;
                            &amp;lt;skipTests&amp;gt;${skip.integration.tests}&amp;lt;/skipTests&amp;gt;
                        &amp;lt;/configuration&amp;gt;
                    &amp;lt;/execution&amp;gt;
                &amp;lt;/executions&amp;gt;
            &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;They are not on module-path? Module-path does work with surefire, why not with failsafe?&lt;/p&gt;</comment>
                            <comment id="17092226" author="tibor17" created="Sat, 25 Apr 2020 13:05:59 +0000"  >&lt;p&gt;JPMS works for both but this issue is about Multi-Realease versions which are recognized only in JAR by the Manifest entry Multi-Release.&lt;br/&gt;
That&apos;s why we are talking only about the Failsafe plugin.&lt;br/&gt;
The Surefire does not care off the JAR file in current POM. The dependency projects are another story.&lt;/p&gt;</comment>
                            <comment id="17092227" author="pavel_k" created="Sat, 25 Apr 2020 13:12:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; To tell the truth I understood nothing. Why do you think this issue is about multi-release versions? I opened it and I don&apos;t remember I meant something like this. Still can&apos;t understand why my IT tests with failsafe doesn&apos;t run on module-path. Or lets start from the beginning - I prepare project and we will try to run its IT tests. Agree?&lt;/p&gt;</comment>
                            <comment id="17092246" author="tibor17" created="Sat, 25 Apr 2020 14:04:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
You have to see all the comments above because &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yrodiere&quot; class=&quot;user-hover&quot; rel=&quot;yrodiere&quot;&gt;yrodiere&lt;/a&gt; found the cause but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; found the solution, and what is interesting is the fact that this is fix for both:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;your problem with the Failsafe plugin AND JUnit 5.5.0+ (first version at JPMS), and&lt;/li&gt;
	&lt;li&gt;the Multi Realease as well.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So now it looks like we will fix two errors by one.&lt;br/&gt;
One is this bad code in Failsafe&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File getModuleDescriptor()
{
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( getClassesDirectory(), &lt;span class=&quot;code-quote&quot;&gt;&quot;module-info.class&quot;&lt;/span&gt; );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the same fix is able to fix the Multi Release.&lt;/p&gt;</comment>
                            <comment id="17092247" author="tibor17" created="Sat, 25 Apr 2020 14:09:32 +0000"  >&lt;p&gt;So what i want to say is that it is useless to create two Jira tickets if the same fix (right use of plexus-java) will fix two issues.&lt;br/&gt;
Reporting a new Jira with no change in the code and with a reference to this Jira issue looks strange, so it&apos;s worth to have it in one.&lt;/p&gt;</comment>
                            <comment id="17092250" author="tibor17" created="Sat, 25 Apr 2020 14:24:11 +0000"  >&lt;p&gt;Just for your information, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;, both plugins Surefire and Failsafe are 99% the same. The code you saw above &lt;tt&gt;getModuleDescriptor()&lt;/tt&gt; is the collision code.&lt;br/&gt;
That&apos;s the collision because Surefire operates with &lt;tt&gt;target/classes&lt;/tt&gt; but the Failsafe operates with &lt;tt&gt;target/artifact.jar&lt;/tt&gt; and of course this &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File getModuleDescriptor()
{
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( getClassesDirectory(), &lt;span class=&quot;code-quote&quot;&gt;&quot;module-info.class&quot;&lt;/span&gt; );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is fine for Surefire but the developer did not realize that Failsafe cannot call the descriptor like this &lt;tt&gt;target/artifact.jar/module-info.class&lt;/tt&gt;. And here the Plexus Java should be used help us observing the descriptor.&lt;br/&gt;
If we did not make this mistake initially then nobody, either you and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yrodiere&quot; class=&quot;user-hover&quot; rel=&quot;yrodiere&quot;&gt;yrodiere&lt;/a&gt; would write in Jira.&lt;/p&gt;
</comment>
                            <comment id="17092251" author="pavel_k" created="Sat, 25 Apr 2020 14:32:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Ok. I see. If you have 1-2 free minutes, could you run the following commands:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/PashaTurok/plugin-jpms
&lt;/span&gt;cd plugin-jpms
mvn clean install
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;and see the output of surefire and failsafe plugins for module - com.foo.plugin. Please, just take a look. I don&apos;t know why they give different outputs if they are same. Maybe I do something wrong. &lt;/p&gt;</comment>
                            <comment id="17092263" author="tibor17" created="Sat, 25 Apr 2020 14:59:10 +0000"  >&lt;p&gt;Of course, it is null &lt;br/&gt;
&lt;tt&gt;Lets see JDKModulePath: null&lt;/tt&gt;&lt;br/&gt;
because of the code I showed you in the previous comments.&lt;/p&gt;

&lt;p&gt;Surefire wil work with that because it is not in a collision. The Failsafe is in collision - it has the problem which is the 1% difference.&lt;br/&gt;
There are code references, you can help us with the fix on GitHub.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\vcs\github\plugin-jpms&amp;gt;mvn clean install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] Com Foo
[INFO] Com Foo Api
[INFO] Com Foo Plugin
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Com Foo 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ com.foo ---
[INFO] Deleting C:\vcs\github\plugin-jpms\target
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-source (add-integration-test-sources) @ com.foo ---
[INFO] Test Source directory: C:\vcs\github\plugin-jpms\src\it\java added.
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-resource (add-integration-test-resources) @ com.foo ---
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:integration-test (integration-tests) @ com.foo ---
[INFO] No tests to run.
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:verify (integration-tests) @ com.foo ---
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ com.foo ---
[INFO] Installing C:\vcs\github\plugin-jpms\pom.xml to c:\Users\tibor17\.m2\repository\com\foo\com.foo\1.0.0\com.foo-1.0.0.pom
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Com Foo Api 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ com.foo.api ---
[INFO] Deleting C:\vcs\github\plugin-jpms\com.foo.api\target
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ com.foo.api ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.api\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.6.2:compile (default-compile) @ com.foo.api ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\vcs\github\plugin-jpms\com.foo.api\target\classes
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-source (add-integration-test-sources) @ com.foo.api ---
[INFO] Test Source directory: C:\vcs\github\plugin-jpms\com.foo.api\src\it\java added.
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-resource (add-integration-test-resources) @ com.foo.api ---
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ com.foo.api ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.api\src\test\resources
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.api\src\it\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.6.2:testCompile (default-testCompile) @ com.foo.api ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-surefire-plugin:3.0.0-SNAPSHOT:test (default-test) @ com.foo.api ---
[INFO] No tests to run.
[INFO]
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ com.foo.api ---
[INFO] Building jar: C:\vcs\github\plugin-jpms\com.foo.api\target\com.foo.api-1.0.0.jar
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:integration-test (integration-tests) @ com.foo.api ---
[INFO] No tests to run.
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:verify (integration-tests) @ com.foo.api ---
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ com.foo.api ---
[INFO] Installing C:\vcs\github\plugin-jpms\com.foo.api\target\com.foo.api-1.0.0.jar to c:\Users\tibor17\.m2\repository\com\foo\com.foo.api\1.0.0\com.foo.api-1.0.0.jar
[INFO] Installing C:\vcs\github\plugin-jpms\com.foo.api\pom.xml to c:\Users\tibor17\.m2\repository\com\foo\com.foo.api\1.0.0\com.foo.api-1.0.0.pom
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Com Foo Plugin 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ com.foo.plugin ---
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ com.foo.plugin ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.plugin\src\main\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ com.foo.plugin ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\vcs\github\plugin-jpms\com.foo.plugin\target\classes
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-source (add-integration-test-sources) @ com.foo.plugin ---
[INFO] Test Source directory: C:\vcs\github\plugin-jpms\com.foo.plugin\src\it\java added.
[INFO]
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-resource (add-integration-test-resources) @ com.foo.plugin ---
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ com.foo.plugin ---
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.plugin\src\test\resources
[INFO] skip non existing resourceDirectory C:\vcs\github\plugin-jpms\com.foo.plugin\src\it\resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ com.foo.plugin ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\vcs\github\plugin-jpms\com.foo.plugin\target\test-classes
[INFO]
[INFO] --- maven-surefire-plugin:3.0.0-SNAPSHOT:test (default-test) @ com.foo.plugin ---
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.foo.plugin.BarTest
[main] INFO com.foo.plugin.BarTest - ======UNIT TEST=======
[main] INFO com.foo.plugin.BarTest - Lets see JDKModulePath: C:\vcs\github\plugin-jpms\com.foo.plugin\target\classes;c:\Users\tibor17\.m2\repository\org\slf4j\slf4j-simple\1.8.0-beta2\slf4j-simple-1.8.0-beta2.jar;C:\vcs\github\plugin-jpms\com.foo.api\target\com.foo.api-1.0.0.jar;c:\Users\tibor17\.m2\repository\jakarta\ws\rs\jakarta.ws.rs-api\2.1.6\jakarta.ws.rs-api-2.1.6.jar;c:\Users\tibor17\.m2\repository\jakarta\xml\bind\jakarta.xml.bind-api\2.3.2\jakarta.xml.bind-api-2.3.2.jar;c:\Users\tibor17\.m2\repository\jakarta\activation\jakarta.activation-api\1.2.1\jakarta.activation-api-1.2.1.jar;c:\Users\tibor17\.m2\repository\org\slf4j\slf4j-api\1.8.0-beta2\slf4j-api-1.8.0-beta2.jar
[main] INFO com.foo.plugin.BarTest -
[main] INFO com.foo.plugin.BarTest - Let&apos;s see if I or SLF4J are among boot layer modules: true
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.121 s - in com.foo.plugin.BarTest
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO]
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ com.foo.plugin ---
[INFO] Building jar: C:\vcs\github\plugin-jpms\com.foo.plugin\target\com.foo.plugin-1.0.0.jar
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:integration-test (integration-tests) @ com.foo.plugin ---
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.foo.plugin.BarIT
[main] INFO com.foo.plugin.BarIT - ======INTEGRATION TEST=======
[main] INFO com.foo.plugin.BarIT - Lets see JDKModulePath: null
[main] INFO com.foo.plugin.BarIT -
[main] INFO com.foo.plugin.BarIT - Let&apos;s see if I or SLF4J are among boot layer modules: false
[main] INFO com.foo.plugin.BarIT - Maybe we are in child layer? Or this is not module path?
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 s - in com.foo.plugin.BarIT
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO]
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:verify (integration-tests) @ com.foo.plugin ---
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ com.foo.plugin ---
[INFO] Installing C:\vcs\github\plugin-jpms\com.foo.plugin\target\com.foo.plugin-1.0.0.jar to c:\Users\tibor17\.m2\repository\com\foo\com.foo.plugin\1.0.0\com.foo.plugin-1.0.0.jar
[INFO] Installing C:\vcs\github\plugin-jpms\com.foo.plugin\pom.xml to c:\Users\tibor17\.m2\repository\com\foo\com.foo.plugin\1.0.0\com.foo.plugin-1.0.0.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] Com Foo ............................................ SUCCESS [  2.907 s]
[INFO] Com Foo Api ........................................ SUCCESS [  5.080 s]
[INFO] Com Foo Plugin ..................................... SUCCESS [  8.909 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 17.114 s
[INFO] Finished at: 2020-04-25T16:52:04+02:00
[INFO] Final Memory: 18M/64M
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17092277" author="pavel_k" created="Sat, 25 Apr 2020 15:19:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Thank you very much for your explanation as I thought I am getting crazy (so many days in quarantine). Now I know, that:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;You know that it doesn&apos;t work.&lt;/li&gt;
	&lt;li&gt;You did it intentionally.&lt;/li&gt;
	&lt;li&gt;You know where the problem is.&lt;/li&gt;
	&lt;li&gt;You are going to shoot two issues with one bullet.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Ok. That&apos;s good news.&lt;/p&gt;</comment>
                            <comment id="17092315" author="tibor17" created="Sat, 25 Apr 2020 18:40:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt; and 5 - i am not alone. I have alway a team in the background.&lt;/p&gt;</comment>
                            <comment id="17109178" author="tibor17" created="Sat, 16 May 2020 19:13:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=feb0efc1c73a009c49f22eb2bc0c923a36d78ab6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=feb0efc1c73a009c49f22eb2bc0c923a36d78ab6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17109645" author="pavel_k" created="Sun, 17 May 2020 21:06:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I&apos;ve seen that you resolved this issue and wanted to test it. I compiled plugins from master and did&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/PashaTurok/plugin-jpms
&lt;/span&gt;cd plugin-jpms
mvn clean install
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;However, no one of my test run - neither unit, nor integration. Do I do something wrong?&lt;/p&gt;
</comment>
                            <comment id="17109705" author="tibor17" created="Sun, 17 May 2020 23:44:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
Check my commit above. There is the integration test motivated by your project. Compare them.&lt;/p&gt;</comment>
                            <comment id="17109986" author="pavel_k" created="Mon, 18 May 2020 07:51:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt;Thank you very much for solving this issue and your answer. Now I am testing how it works and have the following queston - if you comment this line &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/13ff5483f591662143f40014bb5f2e7556c9557f/surefire-its/src/test/resources/surefire-1570/com.foo.impl/src/main/java/module-info.java#L24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/13ff5483f591662143f40014bb5f2e7556c9557f/surefire-its/src/test/resources/surefire-1570/com.foo.impl/src/main/java/module-info.java#L24&lt;/a&gt; , you will get:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.reflect.InaccessibleObjectException: Unable to make void com.foo.impl.BarTest.shouldPrintModulePath() accessible: module com.foo.impl does not &lt;span class=&quot;code-quote&quot;&gt;&quot;opens com.foo.impl&quot;&lt;/span&gt; to unnamed module @68567e20&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, if we want to run it tests we must open the package where it is located. And as the module has no name we need to open package to all modules? As a workaround it is possible to place it tests in separate packages and open them, but it is not good. Or I don&apos;t understand something?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17110076" author="tibor17" created="Mon, 18 May 2020 09:24:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
All the purpose of this fix is not JPMS modularity and visibility of packages, nothing but fixing the method &lt;tt&gt;getModuleDescriptor()&lt;/tt&gt; to have the access to the &lt;tt&gt;module-info&lt;/tt&gt;, see this comment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16806761&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16806761&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1570?focusedCommentId=16806761&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16806761&lt;/a&gt;&lt;br/&gt;
We cannot do more and do more magic.&lt;/p&gt;</comment>
                            <comment id="17110078" author="tibor17" created="Mon, 18 May 2020 09:27:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
I think you are talking about another problem. I guess you mean this issue in progress &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/293&lt;/a&gt;&lt;br/&gt;
but then also your project must be correct and the tests must contain &lt;tt&gt;src/test/java/module-info.java&lt;/tt&gt;. I guess you do not have it in your project and even if you do then it would not work because the PR is not completed.&lt;/p&gt;</comment>
                            <comment id="17110080" author="pavel_k" created="Mon, 18 May 2020 09:27:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Besides, I noted if you add to &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/13ff5483f591662143f40014bb5f2e7556c9557f/surefire-its/src/test/resources/surefire-1570/com.foo.impl/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/13ff5483f591662143f40014bb5f2e7556c9557f/surefire-its/src/test/resources/surefire-1570/com.foo.impl/pom.xml&lt;/a&gt; the following dependency:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
&#160;&#160;&#160; &amp;lt;groupId&amp;gt;org.junit.platform&amp;lt;/groupId&amp;gt;
&#160;&#160;&#160; &amp;lt;artifactId&amp;gt;junit-platform-runner&amp;lt;/artifactId&amp;gt;
&#160;&#160;&#160; &amp;lt;version&amp;gt;1.6.2&amp;lt;/version&amp;gt;
&#160;&#160;&#160; &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
 &amp;lt;/dependency&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then test won&apos;t be run anymore. But if I need this dependency, for example for running suites?&lt;/p&gt;</comment>
                            <comment id="17110086" author="tibor17" created="Mon, 18 May 2020 09:36:07 +0000"  >&lt;p&gt;that&apos;s intended because this dependency is JUnit4 runner&lt;/p&gt;</comment>
                            <comment id="17110090" author="pavel_k" created="Mon, 18 May 2020 09:41:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Could you then explain what I should do if I want &lt;/p&gt;

&lt;p&gt;import org.junit.platform.runner.JUnitPlatform;&lt;br/&gt;
import org.junit.platform.suite.api.SelectPackages;&lt;br/&gt;
import org.junit.platform.suite.api.SuiteDisplayName;&lt;br/&gt;
import org.junit.runner.RunWith;&lt;/p&gt;

&lt;p&gt;@RunWith(JUnitPlatform.class)&lt;br/&gt;
@SuiteDisplayName(&quot;JUnit Platform Suite Demo&quot;)&lt;br/&gt;
@SelectPackages(&quot;example&quot;)&lt;br/&gt;
public class JUnitPlatformSuiteDemo {&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;as it it explained &lt;a href=&quot;https://junit.org/junit5/docs/current/user-guide/#running-tests-junit-platform-runner-test-suite&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt;. Without that dependency I can&apos;t compile project.&lt;/p&gt;</comment>
                            <comment id="17110125" author="tibor17" created="Mon, 18 May 2020 10:34:59 +0000"  >&lt;p&gt;In this &lt;a href=&quot;https://github.com/apache/maven-surefire/commit/d5bbb3f9ae37ff5ad2bb7e8b3c11d1f24ea6f041#diff-4a6be0bdcb206076a5b7b8ab87b41234R45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt; you can see what you are talking about. It is the IT for such a runner.&lt;br/&gt;
But I really do not understand your problem. Onece you are talking about JPMS, then JUnit4 Runner. Notice that this issue is not about JPMS. It is about accessing module-info within the jar for the purposes of Failsafe plugin.&lt;br/&gt;
If you don&apos;t like &quot;&lt;tt&gt;opens com.foo.impl;&lt;/tt&gt;&quot; then it is another story but i think we were talking about it before. Pls confirm that the issue with &quot;&lt;tt&gt;opens com.foo.impl;&lt;/tt&gt;&quot; is what you expect to solve in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1733&quot; title=&quot;Surefire and Failsafe JPMS additions for JUnit 5.x execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1733&quot;&gt;&lt;del&gt;SUREFIRE-1733&lt;/del&gt;&lt;/a&gt; (full modularity main + test).&lt;/p&gt;</comment>
                            <comment id="17110141" author="pavel_k" created="Mon, 18 May 2020 10:58:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I had two questions: 1) about package visibility 2) about Junit4 runner. I asked these two questions one by one. &lt;/p&gt;</comment>
                            <comment id="17110158" author="pavel_k" created="Mon, 18 May 2020 11:29:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; Yes, my package visibility problem is described here &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1733&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1733&lt;/a&gt; . Thank you very much for your help and the link.&lt;/p&gt;</comment>
                            <comment id="17110937" author="tibor17" created="Tue, 19 May 2020 07:45:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Pavel_K&quot; class=&quot;user-hover&quot; rel=&quot;Pavel_K&quot;&gt;Pavel_K&lt;/a&gt;&lt;br/&gt;
I have a problem with the test 1570 on Jenkins.&lt;br/&gt;
The build &lt;a href=&quot;https://builds.apache.org/job/maven-box/job/maven-surefire/job/master/210/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;210&lt;/a&gt; passed successfully and there was the fix already integrated. The latest build failed &lt;tt&gt;ClassNotFoundException: org.junit.platform.engine.TestEngine&lt;/tt&gt;.&lt;br/&gt;
The interesting thing is that the build process does not fail on &lt;a href=&quot;https://github.com/apache/maven-surefire/commits/master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;br/&gt;
It is also successful on my PC.&lt;br/&gt;
Can you check it out on your PC with this command?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn install -DskipTests -nsu
cd surefire-its/src/test/resources/surefire-1570
mvn verify -nsu -Dsurefire.version=3.0.0-SNAPSHOT
rm -rf target
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17111235" author="pavel_k" created="Tue, 19 May 2020 14:36:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt; I don&apos;t have any problems:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pavel@pc1:~/Temp$ java -version
openjdk version &lt;span class=&quot;code-quote&quot;&gt;&quot;14&quot;&lt;/span&gt; 2020-03-17
OpenJDK &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 14+36-1461)
OpenJDK 64-Bit Server VM (build 14+36-1461, mixed mode, sharing)

pavel@pc1:~/Temp$ git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/maven-surefire.git
&lt;/span&gt;Cloning into &lt;span class=&quot;code-quote&quot;&gt;&apos;maven-surefire&apos;&lt;/span&gt;...
remote: Enumerating objects: 808, done.
remote: Counting objects: 100% (808/808), done.
remote: Compressing objects: 100% (441/441), done.
remote: Total 70097 (delta 194), reused 602 (delta 115), pack-reused 69289
Receiving objects: 100% (70097/70097), 12.55 MiB | 2.36 MiB/s, done.
Resolving deltas: 100% (23491/23491), done.

pavel@pc1:~/Temp$ cd maven-surefire
pavel@pc1:~/Temp/maven-surefire$ 

pavel@pc1:~/Temp/maven-surefire$ mvn install -DskipTests -nsu

....
[INFO] Reactor Summary &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Apache Maven Surefire 3.0.0-SNAPSHOT:
[INFO] 
[INFO] Apache Maven Surefire .............................. SUCCESS [  9.445 s]
[INFO] SureFire Logger API ................................ SUCCESS [  4.226 s]
[INFO] SureFire API ....................................... SUCCESS [  5.182 s]
[INFO] Surefire Extensions API ............................ SUCCESS [  2.361 s]
[INFO] Surefire Extensions SPI ............................ SUCCESS [  1.110 s]
[INFO] SureFire Booter .................................... SUCCESS [  5.290 s]
[INFO] Maven Surefire Test-Grouping Support ............... SUCCESS [  2.872 s]
[INFO] SureFire Providers ................................. SUCCESS [  0.451 s]
[INFO] Shared JUnit3 Provider Code ........................ SUCCESS [  1.925 s]
[INFO] Shared Java 5 Provider Base ........................ SUCCESS [  2.399 s]
[INFO] Shared JUnit4 Provider Code ........................ SUCCESS [  2.473 s]
[INFO] Shared JUnit48 Provider Code ....................... SUCCESS [  2.877 s]
[INFO] SureFire JUnit Runner .............................. SUCCESS [  2.162 s]
[INFO] SureFire JUnit4 Runner ............................. SUCCESS [  2.071 s]
[INFO] Maven Surefire Common .............................. SUCCESS [  9.952 s]
[INFO] SureFire JUnitCore Runner .......................... SUCCESS [  5.007 s]
[INFO] SureFire JUnit Platform Runner ..................... SUCCESS [  4.309 s]
[INFO] SureFire TestNG Utils .............................. SUCCESS [  2.166 s]
[INFO] SureFire TestNG Runner ............................. SUCCESS [  2.967 s]
[INFO] ShadeFire JUnit3 Provider .......................... SUCCESS [  1.249 s]
[INFO] Surefire Report Parser ............................. SUCCESS [  2.975 s]
[INFO] Maven Surefire Plugin .............................. SUCCESS [  5.779 s]
[INFO] Maven Failsafe Plugin .............................. SUCCESS [  4.652 s]
[INFO] Maven Surefire Report Plugin ....................... SUCCESS [  6.318 s]
[INFO] Maven Surefire Integration Tests ................... SUCCESS [  5.776 s]
[INFO] Surefire Shared Utils .............................. SUCCESS [  0.946 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:37 min
[INFO] Finished at: 2020-05-19T17:29:34+03:00

pavel@pc1:~/Temp/maven-surefire$ cd surefire-its/src/test/resources/surefire-1570
pavel@pc1:~/Temp/maven-surefire/surefire-its/src/test/resources/surefire-1570$

pavel@pc1:~/Temp/maven-surefire/surefire-its/src/test/resources/surefire-1570$ mvn verify -nsu -Dsurefire.version=3.0.0-SNAPSHOT
...
[INFO] --- maven-surefire-plugin:3.0.0-SNAPSHOT:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) @ com.foo.impl ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.foo.impl.BarTest
[main] INFO com.foo.impl.BarTest - ======UNIT TEST=======
...
[main] INFO com.foo.impl.Bar - 
[main] INFO com.foo.impl.Bar - Let&apos;s see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; I or SLF4J are among boot layer modules: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.084 s - in com.foo.impl.BarTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-jar-plugin:3.2.0:jar (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-jar) @ com.foo.impl ---
[INFO] Building jar: /home/pavel/Temp/maven-surefire/surefire-its/src/test/resources/surefire-1570/com.foo.impl/target/com.foo.impl-1.0.0.jar
[INFO] 
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:integration-test (integration-tests) @ com.foo.impl ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.foo.impl.BarIT
[main] INFO com.foo.impl.BarIT - ======INTEGRATION TEST=======
...
[main] INFO com.foo.impl.Bar - 
[main] INFO com.foo.impl.Bar - Let&apos;s see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; I or SLF4J are among boot layer modules: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 s - in com.foo.impl.BarIT
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-failsafe-plugin:3.0.0-SNAPSHOT:verify (integration-tests) @ com.foo.impl ---
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; com.foo 1.0.0:
[INFO] 
[INFO] com.foo ............................................ SUCCESS [  0.004 s]
[INFO] com.foo.api ........................................ SUCCESS [  1.796 s]
[INFO] com.foo.impl ....................................... SUCCESS [  2.320 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.214 s
[INFO] Finished at: 2020-05-19T17:30:43+03:00
[INFO] ------------------------------------------------------------------------

pavel@pc1:~/Temp/maven-surefire/surefire-its/src/test/resources/surefire-1570$ rm -rf target
pavel@pc1:~/Temp/maven-surefire/surefire-its/src/test/resources/surefire-1570$

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17115976" author="tibor17" created="Mon, 25 May 2020 12:08:57 +0000"  >&lt;p&gt;I was an issue with JDK 11 on our Jenkins.&lt;br/&gt;
It&apos;s gone now.&lt;/p&gt;</comment>
                            <comment id="17994970" author="olamy" created="Fri, 4 Jul 2025 07:31:55 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2166&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13321758">SUREFIRE-1830</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13272275">SUREFIRE-1733</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12939841" name="mavenproject20.zip" size="4351" author="Pavel_K" created="Sat, 15 Sep 2018 16:37:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/maven-surefire/pull/297]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y4nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>