<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:16:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1588] Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1588</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;See issue &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, but in short: latest Java8 on Ubuntu/Debian/Mint family of Linuxes (am on Mint, Ubuntu derivative) contains this patch &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;, and eforces Manifest class path entries to be relative, as defined in &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;Hence, surefire booter and rest of Maven classpath, that uses absolute URLs are simply discarded.&lt;/p&gt;

&lt;p&gt;Example error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# Created at 2018-10-30T21:34:43.339
Error: Could not find or load main class org.apache.maven.surefire.booter.ForkedBooter&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;using the new property &lt;tt&gt;-Djdk.net.URLClassPath.disableClassPathURLCheck=debug&lt;/tt&gt; clearly shows that all the entries from the surefire JAR are simply ignored.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://hg.openjdk.java.net/jdk/jdk/rev/27135de165ac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hg.openjdk.java.net/jdk/jdk/rev/27135de165ac&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13195231">SUREFIRE-1588</key>
            <summary>Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="cstamas">Tamas Cservenak</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Oct 2018 21:05:33 +0000</created>
                <updated>Fri, 4 Jul 2025 07:32:14 +0000</updated>
                            <resolved>Fri, 2 Nov 2018 14:57:38 +0000</resolved>
                                    <version>2.22.1</version>
                                    <fixVersion>3.0.0-M1</fixVersion>
                                        <due></due>
                            <votes>6</votes>
                                    <watches>24</watches>
                                                                                                                <comments>
                            <comment id="16669907" author="lassewesth" created="Wed, 31 Oct 2018 10:38:26 +0000"  >&lt;p&gt;This is a complete production halt for us, please fix soon, thanks!&lt;/p&gt;</comment>
                            <comment id="16670083" author="mirabilos" created="Wed, 31 Oct 2018 13:10:03 +0000"  >&lt;p&gt;This is apparently a bug in the Debian package, in that they did not backport the patch that disables these new stricter checks by default: &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#38&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There&#8217;s a workaround, but that involves either touching the POM of &lt;b&gt;every&lt;/b&gt; project one develops with manually to set useSystemClassLoader=false for Surefire (and I&#8217;m not sure what other implications this has) &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#10&lt;/a&gt; or, worse, setting a JVM property (I&#8217;m not sure where to even begin doing so, considering java is invoked indirectly under a bazillion layers, from Jenkins over Maven to its plugins&#8230;) &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Considering this is supposed to be a new stricter check for something, is there a way we can get a new Surefire release that adheres to these stricter standards? The Canonical/Debian people are, unfortunately, unwilling to consider a full development showstopper as bug and consider it a &#8220;security feature&#8221; and an &#8220;intentional upstream change&#8221; instead: &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=912333#53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=912333#53&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For now, general advice is to downgrade to the last working OpenJDK version in a development environment (and yes, thus not getting the latest security fixes, which is extremely unfortunate) until the OpenJDK, Canonical/Debian, and Maven/Surefire people &#8220;fight&#8221; this out among themselves. (And who knows what &lt;b&gt;else&lt;/b&gt; will break due to this change&#8230; there&#8217;s not even a warning output!)&lt;/p&gt;</comment>
                            <comment id="16670087" author="cstamas" created="Wed, 31 Oct 2018 13:11:26 +0000"  >&lt;p&gt;Currently several workarounds exists, none of them are w/o problems:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Set &lt;tt&gt;useSystemClassLoader&lt;/tt&gt; = false in POM (this may work if your app is &quot;well behaved&quot;, see &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Set &lt;tt&gt;jdk.net.URLClassPath.disableClassPathURLCheck=true&lt;/tt&gt;&#160;system property on forked JVM (see &lt;tt&gt;argLine&lt;/tt&gt; configuration)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;On my setup (again, this is project dependant, see 1. bullet), both works ok.&lt;/p&gt;</comment>
                            <comment id="16670105" author="tibi" created="Wed, 31 Oct 2018 13:25:52 +0000"  >&lt;p&gt;i can confirm it also happens on 2.22.0&lt;/p&gt;

&lt;p&gt;i updated my pom.xml and added this line:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;useSystemClassLoader&amp;gt;&lt;/span&gt;false&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/useSystemClassLoader&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-surefire-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.22.1&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;useSystemClassLoader&amp;gt;&lt;/span&gt;false&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/useSystemClassLoader&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;which did help&lt;/p&gt;

&lt;p&gt;or for now skip test using -DskipTests&lt;/p&gt;</comment>
                            <comment id="16670107" author="cstamas" created="Wed, 31 Oct 2018 13:29:54 +0000"  >&lt;p&gt;Re fix: &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/7149edc6f24fa8bff06372e24a177e86d4960d8c/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java#L110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/7149edc6f24fa8bff06372e24a177e86d4960d8c/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java#L110&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As the manifest should contain relative paths only (unlike absolute as now), and generated &quot;manifest jar&quot; is not meant to be relocated, it could easily calculated the relative paths of the classpath entries, and use them instead?&lt;/p&gt;</comment>
                            <comment id="16670138" author="gkamath" created="Wed, 31 Oct 2018 13:57:55 +0000"  >&lt;p&gt;I got it working by setting forkCount to 0 in the surefire plugin configuration&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;plugin&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.21.0&amp;lt;/version&amp;gt;
    &amp;lt;configuration&amp;gt;
        &amp;lt;forkCount&amp;gt;0&amp;lt;/forkCount&amp;gt;
        &amp;lt;argLine&amp;gt;-Xmx1024m -XX:MaxPermSize=256m&amp;lt;/argLine&amp;gt;
    &amp;lt;/configuration&amp;gt;
&amp;lt;/plugin&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16670208" author="githubbot" created="Wed, 31 Oct 2018 15:03:09 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434721855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434721855&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @cstamas &lt;br/&gt;
   Thx for the fix. We will release version 3.0.0-M1 nd we discontinued versions 2.x.&lt;br/&gt;
   The only issue is that we develop new version in branch `3.0.0-M1` and there are last things to finish support of Maven Plugin API 3.0 as for instance we want to use `scope=provided` on Maven api dependencies. It should be finished these days. Next problem is unstable ASF Jenkins. I hope the INFRA team will fix it soon. Then I plan is to have Java 1.7, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1474&lt;/a&gt;, on the top of the branch `3.0.0-M1` which includes your change with JavaVersion property and Java code in I/O. But I would rather wait with this PR few days and rebase it after `&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1474&quot; title=&quot;Java 1.7 as minimum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1474&quot;&gt;&lt;del&gt;SUREFIRE-1474&lt;/del&gt;&lt;/a&gt;` has been finished too.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670209" author="cstamas" created="Wed, 31 Oct 2018 15:04:47 +0000"  >&lt;p&gt;A maven-surefire 2.22.1 patch that &quot;works for me&quot;:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But word of warnings: if you build the PR as-is, you a) will &lt;b&gt;make surefire plugin java7&lt;/b&gt; (is java6 currently), and b) will &lt;b&gt;replace official surefire plugin 2.22.1 in your local repo&lt;/b&gt; (something you really don&apos;t want unless you know what are you doing)&lt;/p&gt;</comment>
                            <comment id="16670212" author="githubbot" created="Wed, 31 Oct 2018 15:05:34 +0000"  >&lt;p&gt;Tibor17 edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434721855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434721855&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @cstamas &lt;br/&gt;
   Thx for the fix. We will release version 3.0.0-M1 and we discontinued versions 2.x.&lt;br/&gt;
   The only issue is that we develop new version in branch `3.0.0-M1` and there are last things to finish support of Maven Plugin API 3.0 as for instance we want to use `scope=provided` on Maven api dependencies. It should be finished these days. Next problem is unstable ASF Jenkins. I hope the INFRA team will fix it soon. Then I plan to have Java 1.7, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1474&lt;/a&gt;, on the top of the branch `3.0.0-M1` which includes your change with JavaVersion property and Java code in I/O. But I would rather wait with this PR few days and rebase it after `&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1474&quot; title=&quot;Java 1.7 as minimum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1474&quot;&gt;&lt;del&gt;SUREFIRE-1474&lt;/del&gt;&lt;/a&gt;` has been finished too.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670228" author="githubbot" created="Wed, 31 Oct 2018 15:16:29 +0000"  >&lt;p&gt;GitHub user kemitix opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-client/pull/71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-client/pull/71&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be&lt;br/&gt;
    relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kemitix/brooklyn-client&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kemitix/brooklyn-client&lt;/a&gt; fix-for-&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-client/pull/71.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-client/pull/71.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #71&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 82413a4dce2b4221fab28b8b0f167f01ffe2eed4&lt;br/&gt;
Author: Paul Campbell &amp;lt;pcampbell@...&amp;gt;&lt;br/&gt;
Date:   2018-10-31T15:11:52Z&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be&lt;br/&gt;
    relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16670234" author="githubbot" created="Wed, 31 Oct 2018 15:20:26 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434728533&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434728533&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Tibor17 Hi there! It might become necessary to make 2.22.2 bugfix release, as this seems to affect a LOT of people out there (seems this check is also in Oracle Java 1.8.0_191?)&lt;br/&gt;
   Will try to backport to java6 code then the fix, to not perform java language version change in a bugfix release. (or anyone out there is welcome to do the same)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670286" author="githubbot" created="Wed, 31 Oct 2018 15:54:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-client/pull/71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-client/pull/71&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16670325" author="mirabilos" created="Wed, 31 Oct 2018 16:12:09 +0000"  >&lt;p&gt;Erm, can&#8217;t you please release a 2.x with the fix, as this is really important &lt;font color=&quot;#FF0000&quot;&gt;RIGHT NOW&lt;/font&gt;?&lt;/p&gt;

&lt;p&gt;We can upgrade to an incompatible 3.x later, but we&#8217;ll not use a -Mxxx milestone snapshot in production, and who knows what other incompatibilities 3.x will have.&lt;/p&gt;

&lt;p&gt;(As for making it Java 7+ that&#8217;s no problem, we got even the slowest and most conservative of customers to upgrade to Java 7 years ago, and almost all to Java 8 even, years ago even.)&lt;/p&gt;</comment>
                            <comment id="16670423" author="githubbot" created="Wed, 31 Oct 2018 17:30:42 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434777977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434777977&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   This will be a mess in project. As I said please wait a bit, I will fork the issues of 3.0.0-M1 to multiple versions and we will make very frequent releases. That&apos;s much better for us and one or two day plus minus is not a difference.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16670432" author="githubbot" created="Wed, 31 Oct 2018 17:37:16 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434780362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434780362&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   I will try to do my bets today. Okay?&lt;br/&gt;
   And then I will ask you to rebase this branch.&lt;br/&gt;
   We can start release tomorrow.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671038" author="githubbot" created="Thu, 1 Nov 2018 02:33:20 +0000"  >&lt;p&gt;olamy commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434910977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434910977&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1 to have this released ASAP as it&apos;s really blocker.&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671218" author="githubbot" created="Thu, 1 Nov 2018 07:48:11 +0000"  >&lt;p&gt;rockysingh commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434960527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434960527&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This issue is also affecting open jdk 8 and oracle jdk 8&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671413" author="githubbot" created="Thu, 1 Nov 2018 10:19:00 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434996412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434996412&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Now the API 3.0 is applied. I will work on Java 1.7 in that branch.&lt;br/&gt;
   Btw somebody broke the behavior of maven:shared-utils:3.2.0+. I have to use older version 3.1.0.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671537" author="githubbot" created="Thu, 1 Nov 2018 12:23:43 +0000"  >&lt;p&gt;Tibor17 edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-434996412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-434996412&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Now the API 3.0 is applied. I am working on Java 1.7 and plexus-java@java7 in branch `3.0.0-M1`, and the release can start today late evening.&lt;br/&gt;
   Btw somebody broke the behavior of maven:shared-utils:3.2.0+. I have to use older version 3.1.0.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671777" author="jglick@netbeans.org" created="Thu, 1 Nov 2018 15:43:40 +0000"  >&lt;p&gt;Building on the tip by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cstamas&quot; class=&quot;user-hover&quot; rel=&quot;cstamas&quot;&gt;cstamas&lt;/a&gt; I was able to work around this issue without POM modifications by adding to the &lt;tt&gt;&amp;lt;profiles&amp;gt;&lt;/tt&gt; section of my &lt;tt&gt;~/.m2/settings.xml&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;SUREFIRE-1588&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activation&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;activeByDefault&amp;gt;&lt;/span&gt;true&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activeByDefault&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/activation&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;argLine&amp;gt;&lt;/span&gt;-Djdk.net.URLClassPath.disableClassPathURLCheck=true&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/argLine&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Note that this assumes that the project did not already have an important &lt;tt&gt;argLine&lt;/tt&gt; defined.)&lt;/p&gt;

&lt;p&gt;I would also be eager to see an emergency 2.x fix.&lt;/p&gt;</comment>
                            <comment id="16671797" author="githubbot" created="Thu, 1 Nov 2018 15:59:57 +0000"  >&lt;p&gt;jglick commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230093176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230093176&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -111,7 +113,8 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+&lt;br/&gt;
+                String uri = parent.relativize( file1.toPath() ).toString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Not sure offhand what the paths here are like (have not yet tested this patch), but beware that this might throw `IllegalArgumentException` on Windows if they are on different drive letters. It might be wise to catch this exception and either&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fall back to the original implementation and hope for the best&lt;/li&gt;
	&lt;li&gt;copy some of the classpath entries to a nearby location&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   There is also a possible bug here with paths containing spaces or other special characters. From &lt;span class=&quot;error&quot;&gt;&amp;#91;what I can make out&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&lt;/a&gt;), the expectation is that entries are relative URIs, not relative filenames. The original code used `File.toURI`, which escaped most characters into URI form (though NIO does a better job, for example handling Windows UNC paths). The new code uses `Path.toString`, which would not do that escaping. I suspect you meant to use&lt;/p&gt;

&lt;p&gt;   ```suggestion&lt;br/&gt;
                   String uri = new URI(null, parent.relativize( file1.toPath() ).toString(), null).toString();&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671818" author="githubbot" created="Thu, 1 Nov 2018 16:16:30 +0000"  >&lt;p&gt;jglick commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230093176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230093176&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -111,7 +113,8 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+&lt;br/&gt;
+                String uri = parent.relativize( file1.toPath() ).toString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Not sure offhand what the paths here are like (have not yet tested this patch), but beware that this might throw `IllegalArgumentException` on Windows if they are on different drive letters. It might be wise to catch this exception and either&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fall back to the original implementation and hope for the best&lt;/li&gt;
	&lt;li&gt;copy some of the classpath entries to a nearby location&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   There is also a possible bug here with paths containing spaces or other special characters. From &lt;span class=&quot;error&quot;&gt;&amp;#91;what I can make out&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&lt;/a&gt;), the expectation is that entries are relative URIs, not relative filenames. The original code used `File.toURI`, which escaped most characters into URI form (though NIO does a better job, for example handling Windows UNC paths). The new code uses `Path.toString`, which would not do that escaping. I suspect you meant to use&lt;/p&gt;

&lt;p&gt;   ```suggestion&lt;br/&gt;
                   String uri = new URI( null, parent.relativize( file1.toPath() ).toString(), null ).toString();&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671837" author="githubbot" created="Thu, 1 Nov 2018 16:36:34 +0000"  >&lt;p&gt;cstamas commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230109074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230109074&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -111,7 +113,8 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+&lt;br/&gt;
+                String uri = parent.relativize( file1.toPath() ).toString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Great observations, thanks! I completely forgot about Windows drive letters thingy (am on Linux). Applied your proposal with some changes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671933" author="githubbot" created="Thu, 1 Nov 2018 17:51:03 +0000"  >&lt;p&gt;jglick commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230134884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230134884&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -111,7 +114,17 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+                String uri;&lt;br/&gt;
+                try&lt;br/&gt;
+                {&lt;br/&gt;
+                    uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   There is a reason I suggested the three-arg `URI` constructor rather than `create`. You want to &lt;em&gt;construct&lt;/em&gt; a URI from a raw path, not &lt;em&gt;parse&lt;/em&gt; a URI.&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   jshell&amp;gt; URI.create(&quot;../../a b/c.jar&quot;)&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  java.lang.IllegalArgumentException thrown: Illegal character in path at index 7: ../../a b/c.jar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        at URI.create (URI.java:883)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;        at (#6:1)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;   jshell&amp;gt; new URI(null, &quot;../../a b/c.jar&quot;, null)&lt;br/&gt;
   $7 ==&amp;gt; ../../a%20b/c.jar&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16671936" author="githubbot" created="Thu, 1 Nov 2018 17:54:28 +0000"  >&lt;p&gt;GitHub user kemitix opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-server/pull/1012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-server/pull/1012&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kemitix/brooklyn-server&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kemitix/brooklyn-server&lt;/a&gt; fix-for-&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-server/pull/1012.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-server/pull/1012.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1012&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 41890b9440593802e7a8c8612bdf7ffb185d83f3&lt;br/&gt;
Author: Paul Campbell &amp;lt;pcampbell@...&amp;gt;&lt;br/&gt;
Date:   2018-11-01T17:49:54Z&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be&lt;br/&gt;
    relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16671982" author="githubbot" created="Thu, 1 Nov 2018 18:41:24 +0000"  >&lt;p&gt;rfscholte commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435143408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435143408&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Btw somebody broke the behavior of maven:shared-utils:3.2.0+. I have to use older version 3.1.0.&lt;br/&gt;
   Can you be more specific and/or create an issue for it?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672005" author="githubbot" created="Thu, 1 Nov 2018 18:52:06 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435146720&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435146720&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @rfscholte . The CLI in shared-utils executes a subprocess and we in surefire rely on a callback that the process finished. It seems we do not receive this notification and therefore the process waits next 10 seconds till timeout has elapsed. This prolonged ITs from 1 hour to 2 hours. Using the older version 3.1.0 all is same as before. I will have time to debug it after Surefire release. Are you fine with that yet?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672079" author="githubbot" created="Thu, 1 Nov 2018 19:38:50 +0000"  >&lt;p&gt;rfscholte commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435160849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435160849&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   My guess: &lt;a href=&quot;https://github.com/apache/maven-shared-utils/commit/f2246e0653b185297451902ee278e6aec1ff470e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shared-utils/commit/f2246e0653b185297451902ee278e6aec1ff470e&lt;/a&gt; Would be nice if you could have a look at it once you&apos;ve finished this phase of surefire.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672100" author="githubbot" created="Thu, 1 Nov 2018 19:58:31 +0000"  >&lt;p&gt;cstamas commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230177007&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230177007&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -111,7 +114,17 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+                String uri;&lt;br/&gt;
+                try&lt;br/&gt;
+                {&lt;br/&gt;
+                    uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Ack, my bad. Thanks.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672118" author="githubbot" created="Thu, 1 Nov 2018 20:11:34 +0000"  >&lt;p&gt;rockysingh commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435170813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435170813&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I think it&apos;s worth trying with an integration test that uses a random port.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672197" author="githubbot" created="Thu, 1 Nov 2018 21:03:48 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435186507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435186507&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   @rockysingh &lt;br/&gt;
   @jglick &lt;br/&gt;
   Why we did not do it with `java.i.File.toURI()`?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672229" author="githubbot" created="Thu, 1 Nov 2018 21:19:16 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435190994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435190994&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   A new branch `3.0.0-M1-J7` went out.&lt;br/&gt;
   It contains API 3.0 and Java 1.7 (&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1493&quot; title=&quot;Maven Plugin API 3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1493&quot;&gt;&lt;del&gt;SUREFIRE-1493&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1474&quot; title=&quot;Java 1.7 as minimum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1474&quot;&gt;&lt;del&gt;SUREFIRE-1474&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
   Let&apos;s wait for the Jenkins build...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672377" author="githubbot" created="Thu, 1 Nov 2018 23:56:28 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435226142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435226142&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   We should see the Manifest. Why this issue does not exist on Windows? I think it should because the code base is in TEMP since the `surefire.jar` (surefire booter) is always on `C:\` and not your Local repo on `D:\`.&lt;br/&gt;
   See the first two sentenses in &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath&lt;/a&gt;&lt;br/&gt;
   Are we sure that we identified the bug and it is in Class-Path of the Manifest??&lt;br/&gt;
   Why the Main-Class is not found according to the bugs related to Debian dist?&lt;br/&gt;
   The users say the `useSystemClassLoader` helps but it is because environment variable `CLASSPATH` is used with absolute paths. It is a bit contradictory with Manifest&apos;s Class-Path. I remember that the spec was different and that the file URL (`&lt;a href=&quot;file:/path/to/jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/path/to/jar&lt;/a&gt;`) was supported, so I guess absolute.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672585" author="githubbot" created="Fri, 2 Nov 2018 05:27:17 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435275114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435275114&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas Can you please squash the commits in one? Exclude the `pom.xml` because the master is already on Java 1.7.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672586" author="githubbot" created="Fri, 2 Nov 2018 05:30:16 +0000"  >&lt;p&gt;Tibor17 edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435275114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435275114&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas Can you please squash the commits in one? Exclude the `pom.xml` because the master is already on Java 1.7. The commit message should be then according to Jira: `&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672859" author="githubbot" created="Fri, 2 Nov 2018 10:08:45 +0000"  >&lt;p&gt;Github user tbouron commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-server/pull/1012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-server/pull/1012&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM @kemitix and Jenkins is happy, thanks &#128077; &lt;/p&gt;</comment>
                            <comment id="16672861" author="githubbot" created="Fri, 2 Nov 2018 10:10:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-server/pull/1012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-server/pull/1012&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16673034" author="githubbot" created="Fri, 2 Nov 2018 12:34:10 +0000"  >&lt;p&gt;Tibor17 commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230358750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230358750&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -114,7 +115,7 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = parent.relativize( file1.toPath() ).toString();&lt;br/&gt;
+                String uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Works for me but the annoying are logs because we log every Jar file.&lt;br/&gt;
   This can be fixed by using a boolean flag preventing from repeative logs with same message.&lt;br/&gt;
   Can you segregate the try-catch to a private method?&lt;br/&gt;
   I have a question regarding the bug. The build plugin crashed with plugin version `2.22.1` on 1.8.0_192? It did not crash on my Windows system. It is different experience on Linux?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673039" author="githubbot" created="Fri, 2 Nov 2018 12:40:31 +0000"  >&lt;p&gt;Tibor17 commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -114,7 +115,7 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = parent.relativize( file1.toPath() ).toString();&lt;br/&gt;
+                String uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   AFAIK our users, they won&apos;t see any warnings. So. We should write the log down to a dump file, see `InPluginProcessDumpSingleton`. You need to specify reports dir and pass it to the class.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673041" author="githubbot" created="Fri, 2 Nov 2018 12:41:33 +0000"  >&lt;p&gt;Tibor17 commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -114,7 +115,7 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = parent.relativize( file1.toPath() ).toString();&lt;br/&gt;
+                String uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   AFAIK our users, they won&apos;t see any warnings. So. We should write the log down to a dump file, see `InPluginProcessDumpSingleton`. I do not think it user error. You need to specify reports dir and pass it to the class because the `InPluginProcessDumpSingleton` requires the dir.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673044" author="githubbot" created="Fri, 2 Nov 2018 12:42:00 +0000"  >&lt;p&gt;Tibor17 commented on a change in pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#discussion_r230360224&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -114,7 +115,7 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = parent.relativize( file1.toPath() ).toString();&lt;br/&gt;
+                String uri = URI.create( parent.relativize( file1.toPath() ).toString() ).toASCIIString();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   AFAIK our users, they won&apos;t see any warnings. So. We should write the log down to a dump file, see `InPluginProcessDumpSingleton`. I do not think it is user error. You need to specify reports dir and pass it to the class because the `InPluginProcessDumpSingleton` requires the dir.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673057" author="githubbot" created="Fri, 2 Nov 2018 12:53:59 +0000"  >&lt;p&gt;mirabilos commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435369499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435369499&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Now the API 3.0 is applied. I am working on Java 1.7 and plexus-java@java7 in branch `3.0.0-M1`, and the release can start today late evening.&lt;br/&gt;
   &amp;gt; Btw somebody broke the behavior of maven:shared-utils:3.2.0+. I have to use older version 3.1.0.&lt;/p&gt;

&lt;p&gt;   What does this even mean?&lt;/p&gt;

&lt;p&gt;   We need a fixed release, and I don&#8217;t mind bumping the minimum Java version as everything here is Java 8 anyway (with one Java 7 project from another team), but what &lt;b&gt;other&lt;/b&gt; incompatible changes will you introduce in version `3.0.0`? We really need a drop-in replacement soon.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673068" author="githubbot" created="Fri, 2 Nov 2018 12:58:13 +0000"  >&lt;p&gt;GitHub user kemitix opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-dist/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-dist/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kemitix/brooklyn-dist&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kemitix/brooklyn-dist&lt;/a&gt; fix-for-&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-dist/pull/127.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-dist/pull/127.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #127&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0d4736ec8e32c9292c0dc3755d01b2de4e086d2b&lt;br/&gt;
Author: Paul Campbell &amp;lt;pcampbell@...&amp;gt;&lt;br/&gt;
Date:   2018-11-02T12:56:33Z&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Latest version of Java 1.8.0_191 enforces that Manifest classpath entries be relative.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1588&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16673071" author="githubbot" created="Fri, 2 Nov 2018 12:58:59 +0000"  >&lt;p&gt;Github user kemitix commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-dist/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-dist/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @tbouron please review&lt;/p&gt;</comment>
                            <comment id="16673072" author="githubbot" created="Fri, 2 Nov 2018 13:00:41 +0000"  >&lt;p&gt;mirabilos commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435371608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435371608&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Why this issue does not exist on Windows?&lt;/p&gt;

&lt;p&gt;   The issue is caused by a bad backport of some new security features from OpenJDK via JDK 10 to JDK 8 in Debian, by the Ubuntu-employed maintainer and the Debian security team.&lt;/p&gt;

&lt;p&gt;   There are a couple new checks for JAR files, and one of them triggers the issue. According to someone who analysed the OpenJDK upstream changes, the OpenJDK team later disabled that new check by default, but this did not get backported to Debian.&lt;/p&gt;

&lt;p&gt;   So I expect that OpenJDK itself will enable the new check some time in the future, at which point it will fail everywhere. For now, it only fails on Debian and derivatives, and it&#8217;s extremely unlucky that this change was forcefully pushed even onto stable release users prematurely, under the umbrella of security fixes and &#8220;a deliberate upstream change&#8221;.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673099" author="githubbot" created="Fri, 2 Nov 2018 13:33:09 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435381394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435381394&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Are there any objections if I proceed with pushing the fix to master?&lt;br/&gt;
   Can somebody run a test?&lt;/p&gt;

&lt;p&gt;   @mirabilos &lt;br/&gt;
   We are not waiting for 3.0. It is already in master. It is not a blocker.&lt;br/&gt;
   We are updating all Maven plugins to 3.0 because we have to and there there is no problem to accept it. We did not break your build. It was change of behavior in JDK itself as many other changes since of Java 9 and we only react on these changes one or two years.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673110" author="githubbot" created="Fri, 2 Nov 2018 13:42:55 +0000"  >&lt;p&gt;Github user tbouron commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-dist/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-dist/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Same as the others, fixes up the build. Thanks @kemitix &#128077; &lt;/p&gt;
</comment>
                            <comment id="16673112" author="githubbot" created="Fri, 2 Nov 2018 13:43:47 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/brooklyn-dist/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/brooklyn-dist/pull/127&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16673114" author="githubbot" created="Fri, 2 Nov 2018 13:44:13 +0000"  >&lt;p&gt;mirabilos commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435384329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435384329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; @mirabilos&lt;br/&gt;
   &amp;gt; We did not break your build. It was change of behavior in JDK itself as many other changes since of Java 9 and we only react on these changes one or two years.&lt;/p&gt;

&lt;p&gt;   I know that. I was just asking whether upgrading from 2.x to 3.x will break anything except Java 6.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673116" author="githubbot" created="Fri, 2 Nov 2018 13:46:06 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435384927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435384927&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   ok, I am just running a local build and I will push it to master in few minutes only and then I will start the release Vote. Hoping this helps.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673121" author="githubbot" created="Fri, 2 Nov 2018 13:50:08 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386084&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Tibor17 So, do you want the changes you asked or you are fine? (priv method, logging changes, etc)?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673123" author="githubbot" created="Fri, 2 Nov 2018 13:52:14 +0000"  >&lt;p&gt;fischey commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386698&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386698&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Details to the Problem from the openJdK bugtracker can be found here: &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673124" author="githubbot" created="Fri, 2 Nov 2018 13:52:48 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386856&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435386856&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas I have already done it in my working copy. Is it necessary to log it? I removed the log because of what i wrote. But I can accept any of your decision of course.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673128" author="githubbot" created="Fri, 2 Nov 2018 13:53:55 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435387194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435387194&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I just removed the log &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;   But go ahead, I dont want to stall&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673145" author="githubbot" created="Fri, 2 Nov 2018 14:17:56 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435394570&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435394570&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   It&apos;s in master. The log dump was added too.&lt;br/&gt;
   I will cut the release.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673154" author="githubbot" created="Fri, 2 Nov 2018 14:23:17 +0000"  >&lt;p&gt;mirabilos commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435396229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435396229&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Please ping back when the release (and which `&amp;lt;version&amp;gt;`) is published and available from Central, I can test it. (I&#8217;m testing a JDK patch in parallel, so I have a test env set up.)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673156" author="githubbot" created="Fri, 2 Nov 2018 14:26:16 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435397200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435397200&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @mirabilos &lt;br/&gt;
   It will take 3 days or longer. Sorry, this is the process of Vote for the release. So you are welcome to join our mailing list and Vote there for this release. I understand how urgent it is for you but this is not my decision that you will wait till next week.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673157" author="githubbot" created="Fri, 2 Nov 2018 14:28:02 +0000"  >&lt;p&gt;Tibor17 edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435397200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435397200&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @mirabilos &lt;br/&gt;
   It will take 3 days or longer. Sorry, this is the process of Vote for the release. So you are welcome to join our mailing list and Vote there for this release. I understand how urgent it is for you but this is not my decision that you will wait till next week.&lt;br/&gt;
   The version 3.0.0-M1 will be available in ASF Nexus. So you can use it from there but it is not Central repo.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673186" author="githubbot" created="Fri, 2 Nov 2018 14:52:05 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435405583&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435405583&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @mirabilos &lt;br/&gt;
   You can check it out now from our staging repo &lt;a href=&quot;https://repository.apache.org/content/repositories/maven-1463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/maven-1463&lt;/a&gt;. See the guide to testing staged releases &lt;a href=&quot;http://maven.apache.org/guides/development/guide-testing-releases.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/guides/development/guide-testing-releases.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673201" author="tibor17" created="Fri, 2 Nov 2018 14:57:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=9dab1bfdd9864e1c9cc5e076b6a72f5d1a915937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=9dab1bfdd9864e1c9cc5e076b6a72f5d1a915937&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16673225" author="githubbot" created="Fri, 2 Nov 2018 15:08:30 +0000"  >&lt;p&gt;mirabilos commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435410915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435410915&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; You can check it out now from our staging repo &lt;a href=&quot;https://repository.apache.org/content/repositories/maven-1463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/maven-1463&lt;/a&gt;. See the guide to testing staged releases &lt;a href=&quot;http://maven.apache.org/guides/development/guide-testing-releases.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/guides/development/guide-testing-releases.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Ah thanks, I was trying to figure that out, but did not get as far.&lt;/p&gt;

&lt;p&gt;   Yes, I can confirm that the snapshot version `3.0.0-M1` fixes this particular issue. (Meaning we&#8217;ll switch to a 3.0.0 release once that&#8217;s there.)&lt;/p&gt;

&lt;p&gt;   I&#8217;m a bit wary of major upgrades though, due to unwelcome surprises such as the still-unfixed `&lt;a href=&quot;https://issues.apache.org/jira/browse/MRESOURCES-237&quot; title=&quot;Resource plugin&amp;#39;s handling of symbolic links changed in 3.0.x, broke existing behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRESOURCES-237&quot;&gt;MRESOURCES-237&lt;/a&gt;`. That&#8217;s why I was asking whether anything else would change as part of the 2.x &#8594; 3.x switch.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673260" author="cstamas" created="Fri, 2 Nov 2018 15:23:25 +0000"  >&lt;p&gt;Tested staged 3.0.0-M1 and it works fine on my machine (where I spotted initially the issue).&lt;/p&gt;

&lt;p&gt;Linux Mint 19 + openjdk 8 (8u181-b13-1ubuntu0.18.04.1)&lt;/p&gt;

&lt;p&gt;Cool beans!&lt;/p&gt;</comment>
                            <comment id="16673262" author="githubbot" created="Fri, 2 Nov 2018 15:24:52 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435416391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435416391&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Tibor17 Tested 3.0.0-M1 on my machine, and it is OK.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673273" author="githubbot" created="Fri, 2 Nov 2018 15:33:21 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435419279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435419279&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @mirabilos &lt;br/&gt;
   I understand, but &lt;a href=&quot;https://issues.apache.org/jira/browse/MRESOURCES-237&quot; title=&quot;Resource plugin&amp;#39;s handling of symbolic links changed in 3.0.x, broke existing behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRESOURCES-237&quot;&gt;MRESOURCES-237&lt;/a&gt; is a problem of symbolic links in maven-resources-plugin. Nothing to do with us in my understanding. Do not worry, we are running 1400 tests on multiple platforms, so the likelihood should not be high.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673376" author="githubbot" created="Fri, 2 Nov 2018 16:28:58 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435436625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435436625&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   I think nobody run the ITs on this PR. The problem is that we broke the build with this fix.&lt;br/&gt;
   There are two failing ITs.&lt;br/&gt;
   The first one `Surefire141PluggableProvidersIT` can be fixed easily if we comment the dump logger. The test got two dump files and it expects one, which is the error. Or fix it in the IT would not be a problem.&lt;br/&gt;
   The second is bad `Surefire1535TestNGParallelSuitesIT`and I do not understand it. So, please help.&lt;br/&gt;
   See this dump file `surefire-its\target\Surefire1535TestNGParallelSuitesIT_forks2Redirected\target\surefire-reports-${surefire.forkNumber}\2018-11-02T17-13-42_917.dump`&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Created at 2018-11-02T17:13:43.787&lt;br/&gt;
   Boot Manifest-JAR contains absolute paths in classpath D:\.m2\repository\org\apache\maven\surefire\surefire-api\3.0.0-M2-SNAPSHOT\surefire-api-3.0.0-M2-SNAPSHOT.jar&lt;br/&gt;
   java.lang.IllegalArgumentException: &apos;other&apos; has different root&lt;br/&gt;
   	at sun.nio.fs.WindowsPath.relativize(WindowsPath.java:392)&lt;br/&gt;
   	at sun.nio.fs.WindowsPath.relativize(WindowsPath.java:44)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.JarManifestForkConfiguration.toClasspathElementUri(JarManifestForkConfiguration.java:147)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.JarManifestForkConfiguration.createJar(JarManifestForkConfiguration.java:117)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.JarManifestForkConfiguration.resolveClasspath(JarManifestForkConfiguration.java:73)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.DefaultForkConfiguration.createCommandLine(DefaultForkConfiguration.java:143)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:579)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.access$600(ForkStarter.java:115)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:444)&lt;br/&gt;
   	at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:420)&lt;br/&gt;
   	at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
   	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
   	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
   	at java.lang.Thread.run(Thread.java:748)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   I am inhurry with other appointments. Feel free to investigate. If you want to fix it, feel free, but please run the `mvn install -P run-its` and then make a commit to master or better a branch.&lt;br/&gt;
   I do not understand this stack trace. I hope you know what is going on.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673388" author="githubbot" created="Fri, 2 Nov 2018 16:36:13 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435438509&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435438509&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The problem is that `TEST-TestSuite.xml` appears in wrong folder and it should be in `target/surefire-reports-1` and 2. Not sure how this change could influence the reports dir and resolution of it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673625" author="githubbot" created="Fri, 2 Nov 2018 20:19:49 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Tibor17 I ran locally ITs of the current master (on affected Linux with b13 openjdk8), and I got totally different outcome: none of those ITs you mention failed, but instead I have:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Results :&lt;/p&gt;

&lt;p&gt;   Tests in error: &lt;br/&gt;
     jarShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     warShouldUseClasses(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
    osgiBundleShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testCharsetProvider(org.apache.maven.surefire.its.jiras.Surefire162CharsetProviderIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testSiblingAggregator(org.apache.maven.surefire.its.SiblingAggregatorIT): Exit code was non-zero: 1; command line and log = (..)&lt;/p&gt;

&lt;p&gt;   Tests run: 780, Failures: 0, Errors: 5, Skipped: 138&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   And the most interesting part: some ITs failed due &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;! &lt;/p&gt;

&lt;p&gt;   For example, &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; causes org.apache.maven.surefire.its.SiblingAggregatorIT failure, produced traces like these:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ? -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
   org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   Please note, all 2.x surefire plugin versions are affected of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;, hence it failed (unsure why IT uses 2.12.4 in the first place and not the built plugin).&lt;/p&gt;

&lt;p&gt;   Surefire162CharsetProviderIT fails due this&lt;br/&gt;
   ```&lt;br/&gt;
   Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project org.apache.maven.surefire.its:surefire-162-charsetProvider:jar:1.0-SNAPSHOT: Could not find artifact jcharset:jcharset:jar:1.2.1 in central (&lt;a href=&quot;https://repo.maven.apache.org/maven2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo.maven.apache.org/maven2/&lt;/a&gt;)&lt;br/&gt;
   ``&lt;/p&gt;

&lt;p&gt;   And is right, there is no such thing.&lt;/p&gt;

&lt;p&gt;   And finally the Surefire855 tests fails as they assert this&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Expected: a string containing &quot;/target/jiras-surefire-855-jar-1.0.jar&quot;&lt;br/&gt;
        but: was &quot;../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-booter/3.0.0-M1-SNAPSHOT/surefire-booter-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-api/3.0.0-M1-SNAPSHOT/surefire-api-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-logger-api/3.0.0-M1-SNAPSHOT/surefire-logger-api-3.0.0-M1-SNAPSHOT.jar ../test-classes/ ../jiras-surefire-855-jar-1.0.jar ../../../../../../../../.m2/repository-oss/junit/junit/4.11/junit-4.11.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-assert-core/2.0M9/fest-assert-core-2.0M9.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-util/1.2.4/fest-util-1.2.4.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-library/1.3/hamcrest-library-1.3.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-junit4/3.0.0-M1-SNAPSHOT/surefire-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-java5/3.0.0-M1-SNAPSHOT/common-java5-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit3/3.0.0-M1-SNAPSHOT/common-junit3-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit4/3.0.0-M1-SNAPSHOT/common-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/shared/maven-shared-utils/3.1.0/maven-shared-utils-3.1.0.jar&quot;&lt;br/&gt;
   ```&lt;br/&gt;
   So, it is there but as relative URI `../jiras-surefire-855-jar-1.0.jar`.&lt;/p&gt;

&lt;p&gt;   So all in all, I have no clue what is happening on master. In the mean time, I started ITs of this PR (so 2.22.1+this patch w/ logger removed). Will report back how that goes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673626" author="githubbot" created="Fri, 2 Nov 2018 20:20:38 +0000"  >&lt;p&gt;cstamas edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Tibor17 I ran locally ITs of the current master (on affected Linux with b13 openjdk8), and I got totally different outcome: none of those ITs you mention failed, but instead I have:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Results :&lt;/p&gt;

&lt;p&gt;   Tests in error: &lt;br/&gt;
     jarShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     warShouldUseClasses(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
    osgiBundleShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testCharsetProvider(org.apache.maven.surefire.its.jiras.Surefire162CharsetProviderIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testSiblingAggregator(org.apache.maven.surefire.its.SiblingAggregatorIT): Exit code was non-zero: 1; command line and log = (..)&lt;/p&gt;

&lt;p&gt;   Tests run: 780, Failures: 0, Errors: 5, Skipped: 138&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   And the most interesting part: some ITs failed due &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;! &lt;/p&gt;

&lt;p&gt;   For example, &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; causes org.apache.maven.surefire.its.SiblingAggregatorIT failure, produced traces like these:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ? -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
   org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   Please note, all 2.x surefire plugin versions are affected of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;, hence it failed (unsure why IT uses 2.12.4 in the first place and not the built plugin).&lt;/p&gt;

&lt;p&gt;   Surefire162CharsetProviderIT fails due this&lt;br/&gt;
   ```&lt;br/&gt;
   Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project org.apache.maven.surefire.its:surefire-162-charsetProvider:jar:1.0-SNAPSHOT: Could not find artifact jcharset:jcharset:jar:1.2.1 in central (&lt;a href=&quot;https://repo.maven.apache.org/maven2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo.maven.apache.org/maven2/&lt;/a&gt;)&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   And is right, there is no such thing.&lt;/p&gt;

&lt;p&gt;   And finally the Surefire855 tests fails as they assert this&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Expected: a string containing &quot;/target/jiras-surefire-855-jar-1.0.jar&quot;&lt;br/&gt;
        but: was &quot;../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-booter/3.0.0-M1-SNAPSHOT/surefire-booter-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-api/3.0.0-M1-SNAPSHOT/surefire-api-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-logger-api/3.0.0-M1-SNAPSHOT/surefire-logger-api-3.0.0-M1-SNAPSHOT.jar ../test-classes/ ../jiras-surefire-855-jar-1.0.jar ../../../../../../../../.m2/repository-oss/junit/junit/4.11/junit-4.11.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-assert-core/2.0M9/fest-assert-core-2.0M9.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-util/1.2.4/fest-util-1.2.4.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-library/1.3/hamcrest-library-1.3.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-junit4/3.0.0-M1-SNAPSHOT/surefire-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-java5/3.0.0-M1-SNAPSHOT/common-java5-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit3/3.0.0-M1-SNAPSHOT/common-junit3-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit4/3.0.0-M1-SNAPSHOT/common-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/shared/maven-shared-utils/3.1.0/maven-shared-utils-3.1.0.jar&quot;&lt;br/&gt;
   ```&lt;br/&gt;
   So, it is there but as relative URI `../jiras-surefire-855-jar-1.0.jar`.&lt;/p&gt;

&lt;p&gt;   So all in all, I have no clue what is happening on master. In the mean time, I started ITs of this PR (so 2.22.1+this patch w/ logger removed). Will report back how that goes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673633" author="githubbot" created="Fri, 2 Nov 2018 20:25:40 +0000"  >&lt;p&gt;cstamas edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435497122&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   *&lt;b&gt;IMPORTANT UPDATE&lt;/b&gt;*: as I removed the logging from the PR locally (mention above), I also removed the report stuff from master, and then I got these IT results, so please mind me, I forgot to mention and defs don&apos;t want to mislead you or anyone else. Sorry again.&lt;/p&gt;

&lt;p&gt;   @Tibor17 I ran locally ITs of the current master *&lt;b&gt;modified by removing line 152 in JarManifestForkConfiguration, the logDump call&lt;/b&gt;* (on affected Linux with b13 openjdk8), and I got totally different outcome: none of those ITs you mention failed, but instead I have:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Results :&lt;/p&gt;

&lt;p&gt;   Tests in error: &lt;br/&gt;
     jarShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     warShouldUseClasses(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
    osgiBundleShouldUseFile(org.apache.maven.surefire.its.jiras.Surefire855AllowFailsafeUseArtifactFileIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testCharsetProvider(org.apache.maven.surefire.its.jiras.Surefire162CharsetProviderIT): Exit code was non-zero: 1; command line and log = (..)&lt;br/&gt;
     testSiblingAggregator(org.apache.maven.surefire.its.SiblingAggregatorIT): Exit code was non-zero: 1; command line and log = (..)&lt;/p&gt;

&lt;p&gt;   Tests run: 780, Failures: 0, Errors: 5, Skipped: 138&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   And the most interesting part: some ITs failed due &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;! &lt;/p&gt;

&lt;p&gt;   For example, &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; causes org.apache.maven.surefire.its.SiblingAggregatorIT failure, produced traces like these:&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ? -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
   org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project child2: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   Please note, all 2.x surefire plugin versions are affected of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt;, hence it failed (unsure why IT uses 2.12.4 in the first place and not the built plugin).&lt;/p&gt;

&lt;p&gt;   Surefire162CharsetProviderIT fails due this&lt;br/&gt;
   ```&lt;br/&gt;
   Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project org.apache.maven.surefire.its:surefire-162-charsetProvider:jar:1.0-SNAPSHOT: Could not find artifact jcharset:jcharset:jar:1.2.1 in central (&lt;a href=&quot;https://repo.maven.apache.org/maven2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo.maven.apache.org/maven2/&lt;/a&gt;)&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   And is right, there is no such thing.&lt;/p&gt;

&lt;p&gt;   And finally the Surefire855 tests fails as they assert this&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   Expected: a string containing &quot;/target/jiras-surefire-855-jar-1.0.jar&quot;&lt;br/&gt;
        but: was &quot;../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-booter/3.0.0-M1-SNAPSHOT/surefire-booter-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-api/3.0.0-M1-SNAPSHOT/surefire-api-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-logger-api/3.0.0-M1-SNAPSHOT/surefire-logger-api-3.0.0-M1-SNAPSHOT.jar ../test-classes/ ../jiras-surefire-855-jar-1.0.jar ../../../../../../../../.m2/repository-oss/junit/junit/4.11/junit-4.11.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-assert-core/2.0M9/fest-assert-core-2.0M9.jar ../../../../../../../../.m2/repository-oss/org/easytesting/fest-util/1.2.4/fest-util-1.2.4.jar ../../../../../../../../.m2/repository-oss/org/hamcrest/hamcrest-library/1.3/hamcrest-library-1.3.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/surefire-junit4/3.0.0-M1-SNAPSHOT/surefire-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-java5/3.0.0-M1-SNAPSHOT/common-java5-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit3/3.0.0-M1-SNAPSHOT/common-junit3-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/surefire/common-junit4/3.0.0-M1-SNAPSHOT/common-junit4-3.0.0-M1-SNAPSHOT.jar ../../../../../../../../.m2/repository-oss/org/apache/maven/shared/maven-shared-utils/3.1.0/maven-shared-utils-3.1.0.jar&quot;&lt;br/&gt;
   ```&lt;br/&gt;
   So, it is there but as relative URI `../jiras-surefire-855-jar-1.0.jar`.&lt;/p&gt;

&lt;p&gt;   So all in all, I have no clue what is happening on master. In the mean time, I started ITs of this PR (so 2.22.1+this patch w/ logger removed). Will report back how that goes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673671" author="githubbot" created="Fri, 2 Nov 2018 20:57:24 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435506871&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435506871&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Btw, second look:&lt;/p&gt;

&lt;p&gt;   SiblingAggregatorIT POMs are not using `it-parent`, so that IT is kinda fluke, it always tests with use Maven (3.6.0 it my case) Super-POM defined surefire, not the built one. So it will never pass on affected JDK.&lt;/p&gt;

&lt;p&gt;   Surefire162CharsetProviderIT copied the jcharset into wrong repo, this is why it did not found the artifact in local repo: it copied it to `surefire-its/${env.HOME}/.m2/repository-oss/jcharset/jcharset/1.2.1/jcharset-1.2.1.jar`, like did not interpolate things. Yes, my settings.xml defines my local repo as `${env.HOME}/.m2/repository-oss`.&lt;/p&gt;

&lt;p&gt;   and finally, the Surefire1535TestNGParallelSuitesIT failure you got, don&apos;t know what is it about, but: seems you are on Windows and you have local repo and maven workdir on different drive letters. With affected JDK and this kind of Windows setup this PR will not work. Unlike UN*X, Windows due drive letter will not be able to &quot;relativise&quot; paths like these.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673688" author="githubbot" created="Fri, 2 Nov 2018 21:19:18 +0000"  >&lt;p&gt;jglick commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435512386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435512386&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; With affected JDK and this kind of Windows setup this PR will not work.&lt;/p&gt;

&lt;p&gt;   So maybe we do need to fall back to copying classpath JARs into the `target` directory somewhere. Would be slow, but better than not working at all.&lt;/p&gt;

&lt;p&gt;   Can the whole issue be bypassed by running the booter with an explicit `-cp` rather than trying to use a `Class-Path` attribute?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673698" author="githubbot" created="Fri, 2 Nov 2018 21:26:16 +0000"  >&lt;p&gt;cstamas commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435514071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435514071&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jglick re copying, then we open a total different &quot;pandora&quot; box, think about dep artifact GAVs with differrent G&apos;s but same As and Vs (for example `/org/foo/1.0/api-1.0.jar` vs `/com/bar/1.0/api-1.0.jar`), we&apos;d need to handle conflicts like these. Or we could copy them in maven2 layout (ie. create a mini &quot;local repo&quot; for surefire booter), and handle that.&lt;/p&gt;

&lt;p&gt;   I&apos;d def look into other directions as well...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673700" author="githubbot" created="Fri, 2 Nov 2018 21:27:44 +0000"  >&lt;p&gt;cstamas edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435514071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435514071&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jglick re copying, then we open a total different &quot;pandora&quot; box, think about dep artifact GAVs with differrent G&apos;s but same As and Vs (for example `/org/foo/1.0/api-1.0.jar` vs `/com/bar/1.0/api-1.0.jar`), we&apos;d need to handle conflicts like these. Or we could copy them in maven2 layout (ie. create a mini &quot;local repo&quot; for surefire booter), and handle that.&lt;/p&gt;

&lt;p&gt;   I&apos;d def look into other directions as well...&lt;/p&gt;

&lt;p&gt;   This whole thing started due `-cp` and different command line length constraints, look here &lt;a href=&quot;https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673964" author="githubbot" created="Sat, 3 Nov 2018 08:17:22 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435569639&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435569639&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   I have fixed that problem. My bad, the reportsDir should be passed via method and not constructor to the ForkedCnfig because the dir is parameterized and it can be resolved only via the method.&lt;br/&gt;
   Can I fix it in master now and finish the release?&lt;br/&gt;
   The ITs failed because they expected only one dump file and tried to search a text in all of them but of course the second dump does not have expected text to assert.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16673974" author="tibor17" created="Sat, 3 Nov 2018 09:03:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=23427bbcb3dfb7d678ad0f807ea6bdff228cc421&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=23427bbcb3dfb7d678ad0f807ea6bdff228cc421&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16674037" author="githubbot" created="Sat, 3 Nov 2018 12:49:03 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435585356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435585356&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Feedback for everybody. We are on the Slack ASF chat with @cstamas and we are fixing and testing old ITs one by one and the changes are being pushed to the branch &quot;buildfix&quot; on Surefire project, and @cstamas has his own branch, so we cooperate. Pls be patient while we are working on current issues. Thx&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16674352" author="tibor17" created="Sun, 4 Nov 2018 08:56:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=a483296b8496cb0966f874c92ea67938c8f4beed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=a483296b8496cb0966f874c92ea67938c8f4beed&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16674370" author="githubbot" created="Sun, 4 Nov 2018 10:27:22 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-435657984&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-435657984&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   Thx for contributing. Pls close this PR.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16674389" author="githubbot" created="Sun, 4 Nov 2018 11:30:38 +0000"  >&lt;p&gt;cstamas closed pull request #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java b/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
index 3bcf7a322..c8e90f9aa 100644&lt;br/&gt;
&amp;#8212; a/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
+++ b/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
@@ -30,6 +30,9 @@&lt;br/&gt;
 import java.io.File;&lt;br/&gt;
 import java.io.FileOutputStream;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
+import java.net.URI;&lt;br/&gt;
+import java.net.URISyntaxException;&lt;br/&gt;
+import java.nio.file.Path;&lt;br/&gt;
 import java.util.Iterator;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
@@ -95,6 +98,7 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;/p&gt;
         {
             file.deleteOnExit();
         }
&lt;p&gt;+        Path parent = file.getParentFile().toPath();&lt;br/&gt;
         FileOutputStream fos = new FileOutputStream( file );&lt;br/&gt;
         JarOutputStream jos = new JarOutputStream( fos );&lt;br/&gt;
         try&lt;br/&gt;
@@ -111,7 +115,21 @@ private File createJar( @Nonnull List&amp;lt;String&amp;gt; classPath, @Nonnull String startCl&lt;br/&gt;
             for ( Iterator&amp;lt;String&amp;gt; it = classPath.iterator(); it.hasNext(); )&lt;br/&gt;
             {&lt;br/&gt;
                 File file1 = new File( it.next() );&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;String uri = file1.toURI().toASCIIString();&lt;br/&gt;
+                String uri;&lt;br/&gt;
+                try&lt;br/&gt;
+                
{
+                    uri = new URI( null, parent.relativize( file1.toPath() ).toString(), null ).toASCIIString();
+                }
&lt;p&gt;+                catch ( IllegalArgumentException e )&lt;br/&gt;
+                &lt;/p&gt;
{
+                    uri = file1.toURI().toASCIIString();
+                }
&lt;p&gt;+                catch ( URISyntaxException e )&lt;br/&gt;
+                &lt;/p&gt;
{
+                    // This is really unexpected, so fail
+                    throw new IOException( &quot;Could not relativize path &quot; + file1 + &quot; against &quot; + parent, e );
+                }
&lt;p&gt;+&lt;br/&gt;
                 cp.append( uri );&lt;br/&gt;
                 if ( file1.isDirectory() &amp;amp;&amp;amp; !uri.endsWith( &quot;/&quot; ) )&lt;br/&gt;
                 {&lt;br/&gt;
diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index ce0756c8d..024c4a532 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -84,6 +84,7 @@&lt;br/&gt;
   &amp;lt;/distributionManagement&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;properties&amp;gt;&lt;br/&gt;
+    &amp;lt;javaVersion&amp;gt;7&amp;lt;/javaVersion&amp;gt;&lt;br/&gt;
     &amp;lt;mavenVersion&amp;gt;2.2.1&amp;lt;/mavenVersion&amp;gt;&lt;br/&gt;
     &amp;lt;!-- &amp;lt;shadedVersion&amp;gt;2.12.4&amp;lt;/shadedVersion&amp;gt; commented out due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MRELEASE-799&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MRELEASE-799&lt;/a&gt; --&amp;gt;&lt;br/&gt;
     &amp;lt;commonsLang3Version&amp;gt;3.5&amp;lt;/commonsLang3Version&amp;gt;&lt;br/&gt;
@@ -434,8 +435,8 @@&lt;br/&gt;
               &amp;lt;configuration&amp;gt;&lt;br/&gt;
                 &amp;lt;signature&amp;gt;&lt;br/&gt;
                   &amp;lt;groupId&amp;gt;org.codehaus.mojo.signature&amp;lt;/groupId&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;artifactId&amp;gt;java16&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;1.1&amp;lt;/version&amp;gt;&lt;br/&gt;
+                  &amp;lt;artifactId&amp;gt;java17&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+                  &amp;lt;version&amp;gt;1.0&amp;lt;/version&amp;gt;&lt;br/&gt;
                 &amp;lt;/signature&amp;gt;&lt;br/&gt;
                 &amp;lt;excludeDependencies&amp;gt;&lt;br/&gt;
                   &amp;lt;param&amp;gt;org.codehaus.plexus:plexus-java&amp;lt;/param&amp;gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678124" author="githubbot" created="Wed, 7 Nov 2018 12:05:47 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436602084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436602084&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas &lt;br/&gt;
   @jglick &lt;br/&gt;
   @mirabilos &lt;br/&gt;
   @rockysingh &lt;br/&gt;
   Version `3.0.0-M1` is on Maven Central now.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678303" author="githubbot" created="Wed, 7 Nov 2018 14:36:23 +0000"  >&lt;p&gt;jglick commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436643272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436643272&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @cstamas I was thinking about ways &lt;span class=&quot;error&quot;&gt;&amp;#91;this behavior&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#appendToSystemClassLoaderSearch(java.util.jar.JarFile&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/11/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#appendToSystemClassLoaderSearch(java.util.jar.JarFile&lt;/a&gt;)) could be used to inject JARs into the system class loader from the booter (after 8 it is no longer a `URLClassLoader`) but then you run into access control errors on 9+.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678363" author="githubbot" created="Wed, 7 Nov 2018 15:12:45 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436656371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436656371&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jglick &lt;br/&gt;
   This decision must be bullet proof. If we want to go this way, we have to run a branch with this prototype on Jenkins using multiple JDKs. Since we do not have Mac somebody has to test it locally.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678669" author="githubbot" created="Wed, 7 Nov 2018 19:21:52 +0000"  >&lt;p&gt;jglick commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436745833&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436745833&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Running into some problems on Windows which I am digging into. For reference: the &lt;span class=&quot;error&quot;&gt;&amp;#91;actual committed fixes&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/maven-surefire/compare/fecadb89606a3013f9bea0999e2c3ad2013412fc...a483296b8496cb0966f874c92ea67938c8f4beed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/compare/fecadb89606a3013f9bea0999e2c3ad2013412fc...a483296b8496cb0966f874c92ea67938c8f4beed&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678708" author="githubbot" created="Wed, 7 Nov 2018 19:57:24 +0000"  >&lt;p&gt;jglick opened a new pull request #198: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Correcting relativization logic to produce valid URIs on Windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/198&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Amends #197 or the commits it turned in to. The root issue is that `Path.relativize` uses a native path separator while `URI.path` expects `/`.&lt;/p&gt;

&lt;p&gt;   Observed errors running Jenkins functional tests on a Windows CI machine in which the system temporary directory (used for the booter as of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1400&quot; title=&quot;Windows surefire boot directory should appear in system default temporary-directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1400&quot;&gt;&lt;del&gt;SUREFIRE-1400&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1400&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-1400&lt;/a&gt;)) used the same drive as the local repository, and Surefire thus attempted relativization.&lt;/p&gt;

&lt;p&gt;   (When the drives were different, it falls back to the original behavior of using absolute paths, which still works at least on the Windows JDK 8u191. This made it harder for me to reproduce at first. Passing `-Djava.io.tmpdir=&#8230;` to `mvn` allows it to be reproduced locally, and to confirm that the test passes when using a snapshot version of Surefire.)&lt;/p&gt;

&lt;p&gt;   The problem was that `Class-Path` entries included nonsense URIs with components like `..%5C` rather than `../`. The Java class loader is apparently able to load classes from the result, but then the `Class.protectionDomain.codeSource.location` is weird.&lt;/p&gt;

&lt;p&gt;   @Tibor17 @cstamas&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678800" author="githubbot" created="Wed, 7 Nov 2018 21:32:24 +0000"  >&lt;p&gt;Tibor17 commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436784820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436784820&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jglick &lt;br/&gt;
   You do not have to investigate on Windows. We were talking about it here because Windows has typically many disks and anyway the `surefirebooter.jar` is stored on Windows TEMP. Therefore you have to specify the system property `-Djdk.net.URLClassPath.disableClassPathURLCheck=true` for Windows.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678801" author="githubbot" created="Wed, 7 Nov 2018 21:33:26 +0000"  >&lt;p&gt;Tibor17 edited a comment on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436784820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436784820&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jglick &lt;br/&gt;
   You do not have to investigate on Windows. We were talking about it here because Windows has typically many disks and anyway the `surefirebooter.jar` is stored in Windows TEMP. Therefore you have to specify the system property `-Djdk.net.URLClassPath.disableClassPathURLCheck=true` on Windows.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678803" author="githubbot" created="Wed, 7 Nov 2018 21:34:17 +0000"  >&lt;p&gt;jglick commented on issue #197: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Patch (Java7)&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/197#issuecomment-436785354&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/197#issuecomment-436785354&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; You do not have to investigate on Windows.&lt;/p&gt;

&lt;p&gt;   Already done: #198&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16679347" author="githubbot" created="Thu, 8 Nov 2018 06:38:12 +0000"  >&lt;p&gt;Tibor17 commented on issue #198: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Correcting relativization logic to produce valid URIs on Windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/198#issuecomment-436889136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/198#issuecomment-436889136&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Create a new Jira ticket. It would be worth to write a unit test for edge cases.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16679350" author="githubbot" created="Thu, 8 Nov 2018 06:44:52 +0000"  >&lt;p&gt;Tibor17 commented on a change in pull request #198: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Correcting relativization logic to produce valid URIs on Windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/198#discussion_r231778368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/198#discussion_r231778368&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -150,8 +150,10 @@ private static String toClasspathElementUri( @Nonnull Path parent,&lt;br/&gt;
     {&lt;br/&gt;
         try&lt;br/&gt;
         {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return new URI( null, parent.relativize( classPathElement.toPath() ).toString(), null )&lt;/li&gt;
	&lt;li&gt;.toASCIIString();&lt;br/&gt;
+            return new URI( null,&lt;br/&gt;
+                            parent.relativize( classPathElement.toPath() ).toString().&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   You could use a separate variable since this is getting long line. It would be at least easy to debug.&lt;br/&gt;
   ```&lt;br/&gt;
   Path absolutePath = classPathElement.toPath();&lt;br/&gt;
   String relativeUriPath = parent.relativize( absolutePath )&lt;br/&gt;
   .toString()&lt;br/&gt;
   .replace( File.separatorChar, &apos;/&apos; );&lt;br/&gt;
   return new URI( null, relativeUriPath, null ).toASCIIString();&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16679844" author="githubbot" created="Thu, 8 Nov 2018 14:38:17 +0000"  >&lt;p&gt;jglick commented on issue #198: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1588&quot; title=&quot;Surefire manifest jar classloading broken on latest Debian/Ubuntu Java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1588&quot;&gt;&lt;del&gt;SUREFIRE-1588&lt;/del&gt;&lt;/a&gt; Correcting relativization logic to produce valid URIs on Windows&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/198#issuecomment-437015281&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/198#issuecomment-437015281&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; write a unit test for edge cases&lt;/p&gt;

&lt;p&gt;   This would only be meaningful when run on Windows, so I am not sure how valuable that is. I would put more trust into integration tests.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16704836" author="jglick@netbeans.org" created="Fri, 30 Nov 2018 14:49:26 +0000"  >&lt;p&gt;The problem seems to have been resolved upstream if you update the OpenJDK package. (For me, from &lt;tt&gt;1.8.0_181-8u181-b13-1ubuntu0.18.10.1-b13&lt;/tt&gt; to &lt;tt&gt;1.8.0_191-8u191-b12-0ubuntu0.18.10.1-b12&lt;/tt&gt;.) See &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911925#97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Debian&lt;/a&gt; and &lt;a href=&quot;https://bugs.launchpad.net/ubuntu/+source/openjdk-8/+bug/1800792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Ubuntu&lt;/a&gt; notices.&lt;/p&gt;</comment>
                            <comment id="16704866" author="mirabilos" created="Fri, 30 Nov 2018 15:03:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jglick%40netbeans.org&quot; class=&quot;user-hover&quot; rel=&quot;jglick@netbeans.org&quot;&gt;jglick@netbeans.org&lt;/a&gt; don&#8217;t rely on that.&lt;/p&gt;

&lt;p&gt;The newer versions of OpenJDK just have the new stricter check disabled &lt;b&gt;by default&lt;/b&gt; but the code still exists, and we can expect it to eventually be enabled by default again, probably when not so much stuff will be breaking.&lt;/p&gt;

&lt;p&gt;So, a fix of the underlying issue in surefire-maven-plugin would still be very much welcome, but is not as urgent any more.&lt;/p&gt;</comment>
                            <comment id="16705149" author="tibor17" created="Fri, 30 Nov 2018 18:38:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jglick%40netbeans.org&quot; class=&quot;user-hover&quot; rel=&quot;jglick@netbeans.org&quot;&gt;jglick@netbeans.org&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mirabilos&quot; class=&quot;user-hover&quot; rel=&quot;mirabilos&quot;&gt;mirabilos&lt;/a&gt;&lt;br/&gt;
Are you talking about white spaces in paths. This was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1593&quot; title=&quot;3.0.0-M1 produces invalid code sources on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1593&quot;&gt;&lt;del&gt;SUREFIRE-1593&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Otherwise this issue regarding multiple disks and relative paths was fixed or workarounded in &lt;tt&gt;3.0.0-M1&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17994986" author="olamy" created="Fri, 4 Jul 2025 07:32:14 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2132&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13174058">SUREFIRE-1541</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13195368">SUREFIRE-1589</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13197314">GUACAMOLE-656</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13197287">HADOOP-15916</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13197142">SUREFIRE-1593</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13197471">RATIS-405</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ztjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>