<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:06:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-100] environmentVariables does not work with windows</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-100</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;MSUREFIRE-44 added environmentVariables fields to all additional environment variables to be added to when forking the test &lt;br/&gt;
It works on UNIX but not windows.  Suspect it is platform specific problem for windows in plexus-util&apos;s cli library&lt;/p&gt;

&lt;p&gt;Here is the plugin configuration to reproduce the problem&lt;/p&gt;

&lt;p&gt;     &amp;lt;plugin&amp;gt;&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
       &amp;lt;configuration&amp;gt;&lt;br/&gt;
         &amp;lt;environmentVariables&amp;gt;&lt;br/&gt;
           &amp;lt;key&amp;gt;value&amp;lt;/key&amp;gt;&lt;br/&gt;
         &amp;lt;/environmentVariables&amp;gt;&lt;br/&gt;
         &amp;lt;forkMode&amp;gt;once&amp;lt;/forkMode&amp;gt;&lt;br/&gt;
       &amp;lt;/configuration&amp;gt;&lt;br/&gt;
     &amp;lt;/plugin&amp;gt;&lt;/p&gt;


&lt;p&gt;and the stack trace is&lt;/p&gt;

&lt;p&gt;....&lt;/p&gt;

&lt;p&gt;[&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Adding to surefire test classpath: c:\dev\maven\maven-2.0.2\core\plexus-&lt;br/&gt;
utils-1.1.jar&lt;br/&gt;
Environment: key=value added.&lt;br/&gt;
java -classpath &quot;C:\Documents and Settings\dtran\.m2\repository\org\apache\maven&lt;br/&gt;
\surefire\surefire-booter\1.5.3-SNAPSHOT\surefire-booter-1.5.3-SNAPSHOT.jar;c:\d&lt;br/&gt;
ev\maven\maven-2.0.2\core\plexus-utils-1.1.jar&quot; org.apache.maven.surefire.Surefi&lt;br/&gt;
reBooter C:\dev\maven\src\surefire\surefire&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------------------&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------------------&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; There are some test failure.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------------------&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: There are some test fail&lt;br/&gt;
ure.&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa&lt;br/&gt;
ultLifecycleExecutor.java:556)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLi&lt;br/&gt;
fecycle(DefaultLifecycleExecutor.java:472)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defau&lt;br/&gt;
ltLifecycleExecutor.java:451)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHan&lt;br/&gt;
dleFailures(DefaultLifecycleExecutor.java:303)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegmen&lt;br/&gt;
ts(DefaultLifecycleExecutor.java:270)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLi&lt;br/&gt;
fecycleExecutor.java:139)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:322)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:115)&lt;br/&gt;
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:249)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:324)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;/p&gt;

&lt;p&gt;        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;br/&gt;
Caused by: org.apache.maven.plugin.MojoExecutionException: There are some test f&lt;br/&gt;
ailure.&lt;br/&gt;
        at org.apache.maven.test.SurefirePlugin.execute(SurefirePlugin.java:404)&lt;/p&gt;

&lt;p&gt;        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi&lt;br/&gt;
nManager.java:415)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa&lt;br/&gt;
ultLifecycleExecutor.java:531)&lt;br/&gt;
        ... 16 more&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------------------&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 4 seconds&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Sat Jan 21 10:18:59 PST 2006&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 3M/6M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------------------&lt;br/&gt;
&amp;#8212;&lt;/p&gt;</description>
                <environment>windows </environment>
        <key id="12810559">SUREFIRE-100</key>
            <summary>environmentVariables does not work with windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dantran">Dan Tran</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Jan 2006 12:21:10 +0000</created>
                <updated>Fri, 4 Jul 2025 05:48:47 +0000</updated>
                            <resolved>Fri, 23 Nov 2007 11:08:00 +0000</resolved>
                                    <version>1.5.2 (2.1.2 plugin)</version>
                    <version>2.0 (2.2 plugin)</version>
                                                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14456757" author="dantran" created="Mon, 13 Feb 2006 01:54:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-30&quot; title=&quot;Wrong classpath separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-30&quot;&gt;&lt;del&gt;SUREFIRE-30&lt;/del&gt;&lt;/a&gt; related?&lt;/p&gt;</comment>
                            <comment id="14456769" author="dantran" created="Mon, 27 Feb 2006 01:16:23 +0000"  >&lt;p&gt;Not sure why, but latest surefire in svn does not exhibit this problem any more&lt;/p&gt;</comment>
                            <comment id="14456812" author="dantran" created="Fri, 2 Jun 2006 00:22:28 +0000"  >&lt;p&gt;reproducable on windows. see attached log for detail&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;surefire:test&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Surefire report directory: C:\dev\opti\dev\agent\it\pri\target\surefire-r&lt;br/&gt;
eports&lt;br/&gt;
&apos;java&apos; is not recognized as an internal or external command,&lt;br/&gt;
operable program or batch file.&lt;/p&gt;
</comment>
                            <comment id="14453438" author="carlos" created="Fri, 2 Jun 2006 00:59:42 +0000"  >&lt;p&gt;With the log you send I can only see that &quot;java&quot; is not in your PATH&lt;/p&gt;</comment>
                            <comment id="14456796" author="dantran" created="Fri, 2 Jun 2006 01:17:07 +0000"  >&lt;p&gt;note that, insert any thing into environmentVariables breaks the invocation of jvm ( ie java ). It seems that cli processing of environment variables corrupt the system path&lt;/p&gt;</comment>
                            <comment id="14456801" author="dantran" created="Fri, 2 Jun 2006 09:09:37 +0000"  >&lt;p&gt;a few more findings:&lt;/p&gt;

&lt;p&gt;  1. the work around is to explicitly set jvm param to ${java.home}/bin/java&lt;/p&gt;

&lt;p&gt;  2. environmentVariables does get set correctly in plexus&apos; commandline and it works&lt;br/&gt;
      commandline with env settings are known to work since I use it intensively in native-maven-plugin&lt;/p&gt;

&lt;p&gt;So the root cause this issue lies some where in the surefire plugin itself, not plexus&lt;/p&gt;
</comment>
                            <comment id="14453686" author="dantran" created="Mon, 13 Nov 2006 11:30:50 +0000"  >&lt;p&gt;Confirm it is plexus&apos; cli problem where Commandline.addEnvironment() wipes out the existing environment variables.&lt;br/&gt;
Commandline.getEnvironments also returns empty array.&lt;/p&gt;

&lt;p&gt;-D&lt;/p&gt;
</comment>
                            <comment id="14456841" author="dantran" created="Sat, 9 Dec 2006 01:14:31 +0000"  >&lt;p&gt;latest plexus-utils snapshot does not exhibit this problem any more.  Does it mean we need to get this new plexus-utils into maven-2.0.5 and release this plugin after that?&lt;/p&gt;</comment>
                            <comment id="14454048" author="dfabulich" created="Fri, 23 Nov 2007 11:08:00 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-308&quot; title=&quot;Setting environment variables in surefire configuration overwrite the existing environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-308&quot;&gt;&lt;del&gt;SUREFIRE-308&lt;/del&gt;&lt;/a&gt;.  The log explains the problem: the PATH was overwritten when an environment variable was specified; hence &quot;java&quot; couldn&apos;t be found on the path.&lt;/p&gt;</comment>
                            <comment id="17993518" author="olamy" created="Fri, 4 Jul 2025 05:48:47 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1079&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1079&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810566">SUREFIRE-30</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719739" name="MSUREFIRE-49.log" size="106957" author="danttran" created="Fri, 2 Jun 2006 00:30:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2begn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>