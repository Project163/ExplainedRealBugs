<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:13:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1274] maven test fails when running inside a profile if executing for single class</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1274</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;##Conditions which led to the issue&lt;br/&gt;
Prior to the issue occurring, try and use jacoco-maven-plugin with maven-surefire-plugin while inside a profile to address as yet unknown issues when adding maven-docker-plugin to pom.xml&lt;/p&gt;

&lt;p&gt;##Maven configuration&lt;/p&gt;

&lt;p&gt;After:&lt;br/&gt;
1. Opening a project POM which hasn&apos;t yet been migrated to docker&lt;br/&gt;
2. Moving maven-surefire-plugin and jacoco-maven-plugin to a &quot;test&quot; profile&lt;br/&gt;
3. Setting plugin version to 2.19.1 in POM&lt;br/&gt;
4. Switching to &quot;test&quot; profile&lt;br/&gt;
5. Run mvn:build from Netbeans&lt;br/&gt;
6. Running mv:test on any specific class&lt;/p&gt;

&lt;p&gt;##Outcome&lt;/p&gt;

&lt;p&gt;maven-surefire-plugin fails while Forking: Error: Could not find or load main class ${argLine}&lt;/p&gt;

&lt;p&gt;See attached error.log and pom.xml&lt;/p&gt;

&lt;p&gt;##Notes&lt;/p&gt;

&lt;p&gt;Test fails with or without following pom.xml section commented out in plugin configuration&lt;/p&gt;

&lt;p&gt;  ...&lt;br/&gt;
  &amp;lt;forkCount&amp;gt;1&amp;lt;/forkCount&amp;gt;&lt;br/&gt;
  &amp;lt;reuseForks&amp;gt;true&amp;lt;/reuseForks&amp;gt;&lt;br/&gt;
   ...&lt;/p&gt;</description>
                <environment>Maven v3.0.5&lt;br/&gt;
Netbeans IDE 8.1 Release&lt;br/&gt;
Windows 10 Pro v6.3&lt;br/&gt;
jacoco-maven-plugin 0.7.7.201606060606&lt;br/&gt;
Spring Boot</environment>
        <key id="12998897">SUREFIRE-1274</key>
            <summary>maven test fails when running inside a profile if executing for single class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="jodi.curtis@gmail.com">Jodi</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>test</label>
                            <label>windows</label>
                    </labels>
                <created>Mon, 22 Aug 2016 13:58:13 +0000</created>
                <updated>Fri, 4 Jul 2025 07:26:20 +0000</updated>
                            <resolved>Mon, 22 Aug 2016 14:11:48 +0000</resolved>
                                    <version>2.19.1</version>
                                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15430808" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 14:02:02 +0000"  >&lt;p&gt;Added log and pom file causing issue&lt;/p&gt;</comment>
                            <comment id="15430834" author="tibor17" created="Mon, 22 Aug 2016 14:11:49 +0000"  >&lt;p&gt;the same root cause as in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1273&quot; title=&quot;Adding plugin inside Maven profile breaks mvn:build on project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1273&quot;&gt;&lt;del&gt;SUREFIRE-1273&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
see the logs:&lt;br/&gt;
Error: Could not find or load main class &lt;br class=&quot;atl-forced-newline&quot; /&gt;${argLine}&lt;/p&gt;</comment>
                            <comment id="15430857" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 14:25:09 +0000"  >&lt;p&gt;This issue seems to be highly intermittent, which is telling me there is a problem with the plugin, it wasn&apos;t happening before moving to profiles.&lt;/p&gt;

&lt;p&gt;Pointing me at the project source repository doesn&apos;t really tell me much about what I am doing wrong, it looks to me like some sort of issue related to the threading, but I don&apos;t have the experience to know for sure, but I do think dismissing it because of the error message may be a mistake unless there is a concrete cause, ie Netbeans executing the test using the wrong command line call, or some clear directive regarding setting the main class when calling a specific test (or any tests if inside the profile)&lt;/p&gt;</comment>
                            <comment id="15430877" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 14:37:02 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Setting forks to 0 seems to resolve the issue in some repetitive testing so it seems to be related to threading within a project within the hierarchy. This is without making changes anywhere else.&lt;/p&gt;

&lt;p&gt;Unless this threading is a problem within Maven I think closing this issue may be a mistake&lt;/p&gt;</comment>
                            <comment id="15431112" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 16:22:31 +0000"  >&lt;p&gt;Switching on forking may cause an issue related to this thread: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-335&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE-335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t know if this is what you are trying to explain with regards to maven being the ultimate cause&lt;/p&gt;

&lt;p&gt;when forking is disabled this is one message which jumps out regarding the classparth ${argLine} error&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;WARNING&amp;#93;&lt;/span&gt; useSystemClassloader setting has no effect when not forking&lt;/p&gt;

&lt;p&gt;I don&apos;t know the internals of surefire or maven so I&apos;ll leave this as resolve with forking disabled when inside profiles&lt;/p&gt;</comment>
                            <comment id="15431114" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 16:25:13 +0000"  >&lt;p&gt;I&apos;m guessing this one is useful too if fork=0 is a problem&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15431121" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 16:31:00 +0000"  >&lt;p&gt;It seems that you might be able to remove ${argLine} completely when within a profile.&lt;/p&gt;

&lt;p&gt;This setting was a solution on stack-exchange for problems with JaCoCo and surefire integration, but I cannot remember the specific problem it solved&lt;/p&gt;</comment>
                            <comment id="15431158" author="tibor17" created="Mon, 22 Aug 2016 16:45:17 +0000"  >&lt;p&gt;Don&apos;t use &lt;tt&gt;forkCount=0&lt;/tt&gt; otherwise you are not able to start Java agent; means jacoco.&lt;br/&gt;
Keep using default &lt;tt&gt;forkCount&lt;/tt&gt; or obsolete parameter &lt;tt&gt;forkMode&lt;/tt&gt; or higher than 1.&lt;/p&gt;</comment>
                            <comment id="15431163" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 16:47:58 +0000"  >&lt;p&gt;Hi, correct method seems to be to remove ${argLine}, thanks for clarifying risk with forkCount=0 impact to me and others&lt;/p&gt;</comment>
                            <comment id="15431448" author="hudson" created="Mon, 22 Aug 2016 19:18:10 +0000"  >&lt;p&gt;UNSTABLE: Integrated in Jenkins build maven-surefire #1596 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1596/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1596/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1274&quot; title=&quot;maven test fails when running inside a profile if executing for single class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1274&quot;&gt;&lt;del&gt;SUREFIRE-1274&lt;/del&gt;&lt;/a&gt; reverted c9b0914116cb49fb082ffa7d3af0ce0314f8fbc1 (tibor17: rev 4ad2e4c11f0a9e1309841292c69b81d3f34e95bb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-booter/src/main/java/org/apache/maven/surefire/booter/IsolatedClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17994677" author="olamy" created="Fri, 4 Jul 2025 07:26:20 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2411&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2411&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12998866">SUREFIRE-1273</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12824846" name="pom-surefire-single-test-fail.xml" size="10203" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 14:02:02 +0000"/>
                            <attachment id="12824845" name="surefilre-plugin-single-test.log" size="87070" author="jodi.curtis@gmail.com" created="Mon, 22 Aug 2016 14:02:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32le7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>