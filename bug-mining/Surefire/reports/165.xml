<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:08:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-495] OutOfMemory Exception </title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-495</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;when we run testNG Tests in Parallel Mode, we become a OutOfMemory Exception from the jvm. &lt;/p&gt;

&lt;p&gt;Surfire safe the log information as a lot of byte-Arrays, and dosn&apos;t destroy this, so we run into a memmoryleak.&lt;/p&gt;

&lt;p&gt;in a example stackdump we bekomme ~1500 &apos;org.apache.maven.surefire.util.TeeStream&apos; objects whitch have ~500MB retained size. &lt;br/&gt;
We have found the Problem in the log handling from surfire, when surfire sends the output into StreamArrays. &lt;/p&gt;

&lt;p&gt;surfire plugin-call in pom.xml:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
            &amp;lt;plugin&amp;gt;&lt;br/&gt;
                &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
                &amp;lt;configuration&amp;gt;&lt;br/&gt;
                    &amp;lt;forkMode&amp;gt;once&amp;lt;/forkMode&amp;gt;&lt;br/&gt;
                    &amp;lt;systemProperties&amp;gt;&lt;br/&gt;
                        &amp;lt;catalina.base&amp;gt;.&amp;lt;/catalina.base&amp;gt;&lt;br/&gt;
                    &amp;lt;/systemProperties&amp;gt;&lt;br/&gt;
                    &amp;lt;testFailureIgnore&amp;gt;&lt;br/&gt;
                        ${sdit.testFailureIgnore}&lt;br/&gt;
                    &amp;lt;/testFailureIgnore&amp;gt;&lt;br/&gt;
                    &amp;lt;suiteXmlFiles&amp;gt;&lt;br/&gt;
                        &amp;lt;suiteXmlFile&amp;gt;${sdit.testSuite}&amp;lt;/suiteXmlFile&amp;gt;&lt;br/&gt;
                    &amp;lt;/suiteXmlFiles&amp;gt;&lt;br/&gt;
                    &amp;lt;argLine&amp;gt;-Xmx1000M&amp;lt;/argLine&amp;gt;&lt;br/&gt;
                &amp;lt;/configuration&amp;gt;&lt;br/&gt;
                &amp;lt;version&amp;gt;2.4.2&amp;lt;/version&amp;gt;&lt;br/&gt;
            &amp;lt;/plugin&amp;gt;&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;In Attachment I give you the jesult from JConsole (with surfire and without surfire) ans Eclipse Memory Analyzer &lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------------------&lt;br/&gt;
The bugreport in german:&lt;/p&gt;

&lt;p&gt;Wir haben das Problem, dass der Speicherverbrauch der JVM wenn wir testng tests mit dem surfire-plugin aus maven2 aufrufen nahezu linear ansteigt. Wir machen Performencemessungen bei denen wir testng tests mit unterschiedlicher anzahl threads ausf&#252;hren lassen.&lt;/p&gt;

&lt;p&gt;Nach l&#228;ngerer Suche konnten wir das Problem in org.apache.maven.surefire.util.TeeStream entdecken. Die logausgeben welche normalerweise auf die Konsole ausgegeben werden werden vom surfireplugin in byteArrays geschrieben, welche nicht mehr freigegeben werden. &lt;br/&gt;
In unserem Beispiel hatten wir ~1500 TeeStream Objekte welche ~500MB Speicher nutzen. &lt;br/&gt;
Scheinbar ist surfire nicht 100% Threadsafe und hat an diese Stelle ein Speicherleak.&lt;/p&gt;

</description>
                <environment>VMWare with Suse Linux 32bit,&lt;br/&gt;
Surfire Plugin with Maven2 and TestNG</environment>
        <key id="12809501">SUREFIRE-495</key>
            <summary>OutOfMemory Exception </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="anbr">Andre</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 May 2008 07:27:46 +0000</created>
                <updated>Fri, 4 Jul 2025 07:10:12 +0000</updated>
                            <resolved>Mon, 13 Dec 2010 15:32:59 +0000</resolved>
                                    <version>2.4.2</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14454671" author="krosenvold" created="Mon, 13 Dec 2010 15:32:59 +0000"  >&lt;p&gt;Fixed in r1045382&lt;/p&gt;</comment>
                            <comment id="14454595" author="jeffjensen" created="Mon, 13 Dec 2010 15:52:46 +0000"  >&lt;p&gt;Wonderful!  Can&apos;t wait for 2.7... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Thank you!&lt;/p&gt;</comment>
                            <comment id="17993825" author="olamy" created="Fri, 4 Jul 2025 07:10:12 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1297&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12809437">SUREFIRE-581</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12810207">SUREFIRE-647</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810190">SUREFIRE-599</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12810268">SUREFIRE-711</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719693" name="bugreport.zip" size="422834" author="anbr" created="Thu, 8 May 2008 07:27:46 +0000"/>
                            <attachment id="12720116" name="space wtih surfireplugin.jpg" size="44723" author="anbr" created="Tue, 13 May 2008 03:25:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bc3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>