<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:09:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-763] environmentVariables fails with useSystemClassLoader=false or forkMode=always</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-763</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I can&apos;t upgrade from surefire 2.6 because environmentVariables does not get properly populuated from 2.7 when using useSystemClassLoader=false or forkMode=always . &lt;br/&gt;
In 2.6 my tests pass. From 2.7 if I only run the the test that requires the PATH to be set and have forkMode=once,&lt;br/&gt;
the test passes, but if run all the tests or set forkMode=always then it breaks. &lt;/p&gt;

&lt;p&gt;        &amp;lt;plugin&amp;gt;&lt;br/&gt;
          &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
          &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
          &amp;lt;!-&lt;del&gt;&amp;lt;version&amp;gt;2.6&amp;lt;/version&amp;gt;&lt;/del&gt;-&amp;gt;&lt;br/&gt;
          &amp;lt;!-&lt;del&gt;&amp;lt;version&amp;gt;2.7&amp;lt;/version&amp;gt;&lt;/del&gt;-&amp;gt;&lt;br/&gt;
          &amp;lt;version&amp;gt;2.9&amp;lt;/version&amp;gt;&lt;br/&gt;
          &amp;lt;configuration&amp;gt;&lt;br/&gt;
            &amp;lt;useSystemClassLoader&amp;gt;false&amp;lt;/useSystemClassLoader&amp;gt;&lt;br/&gt;
            &amp;lt;!--&lt;br/&gt;
              &amp;lt;forkMode&amp;gt;never&amp;lt;/forkMode&amp;gt;&lt;br/&gt;
            &amp;lt;forkMode&amp;gt;once&amp;lt;/forkMode&amp;gt;&lt;br/&gt;
&amp;lt;forkMode&amp;gt;always&amp;lt;/forkMode&amp;gt;&lt;br/&gt;
            --&amp;gt;&lt;br/&gt;
            &amp;lt;environmentVariables&amp;gt;&lt;br/&gt;
              &amp;lt;HOME&amp;gt;${env.HOME}&amp;lt;/HOME&amp;gt;&lt;br/&gt;
              &amp;lt;PATH&amp;gt;${env.PATH}&amp;lt;/PATH&amp;gt;&lt;br/&gt;
            &amp;lt;/environmentVariables&amp;gt;&lt;br/&gt;
          &amp;lt;/configuration&amp;gt;&lt;br/&gt;
        &amp;lt;/plugin&amp;gt;&lt;/p&gt;


&lt;p&gt;my tests work fine with 2.6: &lt;br/&gt;
useSystemClassLoader=false and forkMode=once or forkMode=always&lt;br/&gt;
mvn test -Dtest=TestTaskUtils&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &amp;#8212; maven-surefire-plugin:2.6:test (default-test) &lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;/p&gt;


&lt;p&gt;2.7:&lt;br/&gt;
useSystemClassLoader=false and forkMode=once&lt;br/&gt;
mvn test&lt;br/&gt;
Tests run: 92, Failures: 1, Errors: 1, Skipped: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
mvn test -Dtest=TestTaskUtils&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;/p&gt;

&lt;p&gt;useSystemClassLoader=false and forkMode=always&lt;br/&gt;
mvn test -Dtest=TestTaskUtils&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.7:test (default-test) on project ebr-orchestration-engine: There are test failures.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Please refer to /stf_fast/prj/e-breadboard/work/ebr-orchestration-engine/target/surefire-reports for the individual test results.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.7:test (default-test) on project ebr-orchestration-engine: There are test failures.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(**/target/surefire-reports does not exist)&lt;/p&gt;


&lt;p&gt;With 2.9 I get other strange behaviour:&lt;br/&gt;
useSystemClassLoader=false and forkMode=always&lt;br/&gt;
Forking command line: /bin/sh -c cd /stf_fast/prj/e-breadboard/work/ebr-orchestration-engine &amp;amp;&amp;amp; /usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin/java org.apache.maven.surefire.booter.ForkedBooter /stf_fast/prj/e-breadboard/work/ebr-orchestration-engine/target/surefire/surefire6100107079468387212tmp /stf_fast/prj/e-breadboard/work/ebr-orchestration-engine/target/surefire/surefire6665672219640431542tmp&lt;br/&gt;
org.apache.maven.surefire.util.SurefireReflectionException: java.lang.ClassNotFoundException: za.co.enerweb.ebr.task.TestTaskUtils; nested exception is java.lang.ClassNotFoundException: za.co.enerweb.ebr.task.TestTaskUtils&lt;br/&gt;
java.lang.ClassNotFoundException: za.co.enerweb.ebr.task.TestTaskUtils&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)&lt;br/&gt;
	at org.apache.maven.surefire.util.ReflectionUtils.loadClass(ReflectionUtils.java:203)&lt;br/&gt;
	at org.apache.maven.surefire.booter.PropertiesWrapper.getParamValue(PropertiesWrapper.java:132)&lt;br/&gt;
	at org.apache.maven.surefire.booter.PropertiesWrapper.getTypeDecoded(PropertiesWrapper.java:117)&lt;br/&gt;
	at org.apache.maven.surefire.booter.BooterDeserializer.deserialize(BooterDeserializer.java:63)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:63)&lt;br/&gt;
Tests run: 0, Failures: 0, Errors: 0, Skipped: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.9:test (default-test) on project ebr-orchestration-engine: No tests were executed!  (Set -DfailIfNoTests=false to ignore this error.) -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.9:test (default-test) on project ebr-orchestration-engine: No tests were executed!  (Set -DfailIfNoTests=false to ignore this error.)&lt;/p&gt;

&lt;p&gt;Let me know if you need more info or need a sample app.&lt;/p&gt;</description>
                <environment>Apache Maven 3.0.3 (r1075438; 2011-02-28 19:31:09+0200)&lt;br/&gt;
Maven home: /stf/opt/apache-maven-3.0.3&lt;br/&gt;
Java version: 1.6.0_26, vendor: Sun Microsystems Inc.&lt;br/&gt;
Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre&lt;br/&gt;
Default locale: en_ZA, platform encoding: UTF-8&lt;br/&gt;
OS name: &amp;quot;linux&amp;quot;, version: &amp;quot;2.6.38-11-generic&amp;quot;, arch: &amp;quot;amd64&amp;quot;, family: &amp;quot;unix&amp;quot;</environment>
        <key id="12810278">SUREFIRE-763</key>
            <summary>environmentVariables fails with useSystemClassLoader=false or forkMode=always</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="amanica">Marius Kruger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2011 19:20:58 +0000</created>
                <updated>Fri, 4 Jul 2025 07:16:39 +0000</updated>
                            <resolved>Thu, 25 Aug 2011 10:21:41 +0000</resolved>
                                    <version>2.7</version>
                    <version>2.7.2</version>
                    <version>2.9</version>
                                    <fixVersion>2.10</fixVersion>
                                    <component>classloading</component>
                    <component>process forking</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14455109" author="krosenvold" created="Thu, 25 Aug 2011 10:21:41 +0000"  >&lt;p&gt;Fixed with testcase in r1161579. Thanks for the report&lt;/p&gt;</comment>
                            <comment id="14455147" author="amanica" created="Mon, 5 Dec 2011 07:30:16 +0000"  >&lt;p&gt;As far as I can tell this issue is fixed in 2.10 (although I have lots of other failures),&lt;br/&gt;
but in 2.11 this fails again (but all my other stuff works).&lt;/p&gt;</comment>
                            <comment id="14455202" author="krosenvold" created="Mon, 5 Dec 2011 07:57:11 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-804&quot; title=&quot;Testcase fails with forkMode=always and useSystemClassLoader=false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-804&quot;&gt;&lt;del&gt;SUREFIRE-804&lt;/del&gt;&lt;/a&gt; for this issue, which is linked to this issue.&lt;/p&gt;</comment>
                            <comment id="17994165" author="olamy" created="Fri, 4 Jul 2025 07:16:39 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1821&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12810309">SUREFIRE-804</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>