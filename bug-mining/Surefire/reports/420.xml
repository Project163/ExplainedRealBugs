<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:12:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-649] Might be impossible to have empty strings in systemPropertyVariables element</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-649</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;This stanza:&lt;/p&gt;

&lt;p&gt;&amp;lt;systemProperties&amp;gt;&lt;br/&gt;
  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;emptyProperty&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/systemProperties&amp;gt;&lt;/p&gt;

&lt;p&gt;...yields &quot;&quot; from System.getProperty(&quot;emptyProperty&quot;).&lt;/p&gt;

&lt;p&gt;This (supposedly better) stanza:&lt;/p&gt;

&lt;p&gt;&amp;lt;systemPropertyVariables&amp;gt;&lt;br/&gt;
  &amp;lt;emptyProperty&amp;gt;&amp;lt;/emptyProperty&amp;gt;&lt;br/&gt;
&amp;lt;/systemPropertyVariables&amp;gt;&lt;/p&gt;

&lt;p&gt;...yields null from System.getProperty(&quot;emptyProperty&quot;).&lt;/p&gt;

&lt;p&gt;A test case is attached that demonstrates the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12810218">SUREFIRE-649</key>
            <summary>Might be impossible to have empty strings in systemPropertyVariables element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="ljnelson">Laird Nelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Oct 2010 14:03:30 +0000</created>
                <updated>Fri, 4 Jul 2025 07:14:39 +0000</updated>
                            <resolved>Mon, 27 Oct 2014 09:37:58 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.18</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14454710" author="ljnelson" created="Tue, 5 Oct 2010 14:06:59 +0000"  >&lt;p&gt;I neglected to set the priority down from major, as the workaround is simply to continue to use the deprecated systemProperties stanza.  My apologies.&lt;/p&gt;</comment>
                            <comment id="14456971" author="mail@stefan-birkner.de" created="Fri, 14 Jan 2011 14:32:08 +0000"  >&lt;p&gt;The Bug happens inside of org.codehaus.plexus.component.configurator.converters.AbstractConfigurationConverter.fromExpression( PlexusConfiguration configuration, ExpressionEvaluator expressionEvaluator ). Within this method the empty string is converted to null.&lt;/p&gt;</comment>
                            <comment id="14456303" author="tibor17" created="Sun, 26 Oct 2014 19:07:40 +0000"  >&lt;p&gt;Fixed in&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/62&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14456399" author="tibor17" created="Mon, 27 Oct 2014 09:37:58 +0000"  >&lt;p&gt;Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/maven-surefire/commit/cfa25240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/maven-surefire/commit/cfa25240&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14456464" author="afranken" created="Thu, 13 Nov 2014 08:38:33 +0000"  >&lt;p&gt;I just updated to Surefire 2.18.&lt;/p&gt;

&lt;p&gt;Before the fix, it was possible to set empty and null System Properties, after the fix, it&apos;s not possible to pass null System Properties (which are in turn ignored by Surefire) any more.&lt;/p&gt;

&lt;p&gt;Is there a proposed workaround?&lt;/p&gt;

&lt;p&gt;We rely on it being possible to optionally set System Properties for Maven builds by passing -Dpropertyname to the mvn executable, otherwise the system property should be ignored by Surefire (maven-tomcat-plugin behaves the same way, it even logs &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; skip sysProps propertyname with empty value&quot;)&lt;/p&gt;</comment>
                            <comment id="14456284" author="tibor17" created="Thu, 13 Nov 2014 09:02:40 +0000"  >&lt;p&gt;The null string means that the system property is unspecified in the configuration.&lt;br/&gt;
The workaround would be to set null property if getSystemProperty() returns empty string in @BeforeClass.&lt;/p&gt;</comment>
                            <comment id="14456350" author="afranken" created="Thu, 13 Nov 2014 09:44:17 +0000"  >&lt;p&gt;maybe this is a misunderstanding:&lt;/p&gt;

&lt;p&gt;Before, when setting an empty SystemProperty &amp;lt;myproperty/&amp;gt;, Surefire would not set that System Property at all for the forked process.&lt;br/&gt;
Now, the System Property is set with an empty value.&lt;/p&gt;

&lt;p&gt;We actually want Surefire to ignore empty SystemProperty, just as maven-tomcat-plugin does.&lt;/p&gt;</comment>
                            <comment id="14456392" author="afranken" created="Thu, 13 Nov 2014 12:02:27 +0000"  >&lt;p&gt;as a background:&lt;br/&gt;
We have a Spring Framework based application that uses the &lt;a href=&quot;http://docs.spring.io/spring-framework/docs/2.0.8/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html#SYSTEM_PROPERTIES_MODE_OVERRIDE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PropertyPlaceholderConfigurer in System Properties Override mode&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The defaults for properties are managed by the application.&lt;/p&gt;

&lt;p&gt;We execute a test with Failsafe, loading the application with the test.&lt;/p&gt;

&lt;p&gt;In order to be able to override properties in tests (for example URLs to connect against), we use System Properties:&lt;/p&gt;

&lt;p&gt;#POM#&lt;br/&gt;
&amp;lt;properties&amp;gt;&lt;br/&gt;
&amp;lt;myProperty/&amp;gt;&lt;br/&gt;
&amp;lt;/properties&amp;gt;&lt;br/&gt;
...&lt;br/&gt;
failsafe configration&lt;br/&gt;
&amp;lt;systemPropertyVariables&amp;gt;&lt;br/&gt;
&amp;lt;myProperty&amp;gt;${myProperty}&amp;lt;/myProperty&amp;gt;&lt;br/&gt;
&amp;lt;/systemPropertyVariables&amp;gt;&lt;br/&gt;
#POM#&lt;/p&gt;

&lt;p&gt;If the plugin is executed without setting -DmyProperty, Surefire 2.16 ignored the configuration and the application would use the property default when creating the Spring Beans.&lt;/p&gt;

&lt;p&gt;Now, an empty String is passed to the JVM, so an empty String is used when creating the Spring Beans...&lt;/p&gt;

&lt;p&gt;Why was the behaviour changed if it was working fine before and there is syntax to set empty System Properties?&lt;/p&gt;

&lt;p&gt;Now, there is no way to optionally pass SystemProperties to the process started by Surefire...&lt;/p&gt;</comment>
                            <comment id="14456466" author="tibor17" created="Thu, 13 Nov 2014 16:49:52 +0000"  >&lt;p&gt;As far as I remember the Spring you can call a method of A bean in B bean.&lt;br/&gt;
&amp;lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;location&quot;&amp;gt;&amp;lt;value&amp;gt;database.properties&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;br/&gt;
&amp;lt;bean id=&quot;conv&quot; class=&quot;your.company.Converter&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;dataSource&quot; ...&lt;br/&gt;
&amp;lt;property name=&quot;password&quot; value=&quot;#{conv.treatEmptyAsNull(${jdbc.password})}&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;The fix in surefire was done in the same way with environment variables and system properties, so that java.lang.System#getenv(String) and #getProperty(String) return null only for unspecified properties.&lt;br/&gt;
The other issue of Maven itself is that null or not existing POM properties are always interpreted as empty string, so yet there&apos;s no way to distinguish between null and empty string.&lt;/p&gt;</comment>
                            <comment id="14456331" author="samuli" created="Fri, 14 Nov 2014 04:43:03 +0000"  >&lt;p&gt;I stumbled to this as well when upgrading failsafe plugin. Our build also relied on the behavior described by @afranken above. There really should be a way to tackle this from maven/surefire side of things instead of using tricks in application code. Maybe a switch to surefire/failsafe plugin to use the old behavior if desired?&lt;/p&gt;</comment>
                            <comment id="17994057" author="olamy" created="Fri, 4 Jul 2025 07:14:39 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1926&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1926&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13135128">LUCENE-8146</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13062404">OAK-6057</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12720015" name="surefireEmptyStringIssue.tar.gz" size="2199" author="ljnelson" created="Tue, 5 Oct 2010 14:03:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bfpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>