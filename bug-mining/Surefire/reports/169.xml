<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:08:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-665] Output to file stops after a while</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-665</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;After some tests of proper behavior, surefire stops logging the console output (stderr &amp;amp; stdout) to the files.  For the first tests that are executed, the Xxxxx-output.txt files contain the correct console output.  But from some test in the test suite, all those files are blank.  &lt;/p&gt;

&lt;p&gt;My environment: Mac with &lt;/p&gt;

&lt;p&gt;Java(TM) SE Runtime Environment (build 1.6.0_20-b02-279-10M3065)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 16.3-b01-279, mixed mode)&lt;/p&gt;

&lt;p&gt;Apache Maven 2.2.0 (r788681; 2009-06-26 15:04:01+0200)&lt;br/&gt;
Java version: 1.6.0_20&lt;br/&gt;
Java home: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home&lt;br/&gt;
Default locale: en_US, platform encoding: MacRoman&lt;br/&gt;
OS name: &quot;mac os x&quot; version: &quot;10.6.4&quot; arch: &quot;x86_64&quot; Family: &quot;mac&quot;&lt;/p&gt;

&lt;p&gt;Using Surefire 2.6&lt;/p&gt;

&lt;p&gt;I&apos;ve done following observations:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The exact test where the console capturing stops can vary a couple of tests, but it always happens.  Could it be related to memory?  Increasing from MAVEN_OPTS=&quot;-Xmx1024m -Xms512m&quot; to MAVEN_OPTS=&quot;-Xmx2048m -Xms512m&quot; didn&apos;t have an effect&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;When debugging, as long as the output is ok, System.err.checkError() returns false.  Once the output files get blank, System.err.checkError() returns true.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The problem doesn&apos;t occur when running the same test suite in eclipse.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;When I didn&apos;t specify surefire version, I got 2.4.something.  When I explicitely set the version to 2.6, then the test suite started failing half way with out of memory exceptions.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Then I configured &amp;lt;forkMode&amp;gt;always&amp;lt;/forkMode&amp;gt;.  That made the whole test suite run fine (no memory exceptions and all log files being produced) but then it takes a very long time.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I traced closing of the system err stream until SystemStreamCapturer&lt;br/&gt;
76     public void restoreStreams()&lt;br/&gt;
77     
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {78         // Note that the fields can be null if the test hasn&amp;#39;t even started yet (an early error)79         if ( oldOut != null )80         {
81             System.setOut( oldOut );
82         }83         if ( oldErr != null )84         {
85             System.setErr( oldErr );
86         }87 88         IOUtil.close( newOut );89         IOUtil.close( newErr );90     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But there I couldn&apos;t find how to trace it further and gave up.&lt;/p&gt;


&lt;p&gt;To reproduce: (only tested on mac)&lt;/p&gt;

&lt;p&gt;check out &lt;a href=&quot;https://svn.codehaus.org/activiti/activiti/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.codehaus.org/activiti/activiti/trunk&lt;/a&gt; and then on the root do&lt;br/&gt;
mvn clean install&lt;/p&gt;

&lt;p&gt;only the first executed tests will contain properly captured output in modules/activiti-engine/target/surefire-reports/*-output.txt&lt;/p&gt;</description>
                <environment></environment>
        <key id="12809565">SUREFIRE-665</key>
            <summary>Output to file stops after a while</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="tombaeyens">Tom Baeyens</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Dec 2010 02:59:03 +0000</created>
                <updated>Fri, 4 Jul 2025 07:14:46 +0000</updated>
                            <resolved>Wed, 15 Dec 2010 14:35:49 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14454694" author="tombaeyens" created="Tue, 14 Dec 2010 03:01:02 +0000"  >&lt;p&gt;currently in the activiti svn, no version of surefire is configured.  on my system it was using 2.4.something.  but also when I configured 2.6 the problem persisted (and also I got an extra out of memory problem)&lt;/p&gt;</comment>
                            <comment id="14454647" author="krosenvold" created="Tue, 14 Dec 2010 07:23:46 +0000"  >&lt;p&gt;Could you try this with the 2.7-SNAPSHOT that is out now ? This should be fixed in 2.7&lt;/p&gt;</comment>
                            <comment id="14454716" author="tombaeyens" created="Wed, 15 Dec 2010 02:37:35 +0000"  >&lt;p&gt;The results with 2.7-SNAPSHOT are different, but still not OK.&lt;/p&gt;

&lt;p&gt;The first &lt;del&gt;output.txt files --this time in alfabetical order&lt;/del&gt;- now contain the logging.  The last file that contains logging is a big one (4,051,585  bytes)&lt;/p&gt;

&lt;p&gt;Console output:&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;Running org.activiti.standalone.initialization.ProcessEnginesTest&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.255 sec&lt;br/&gt;
Running org.activiti.standalone.interceptor.CommandContextTest&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.238 sec&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 465, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Error while executing forked tests.; nested exception is org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Trace&lt;br/&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Error while executing forked tests.; nested exception is org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:540)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:519)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)&lt;br/&gt;
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)&lt;br/&gt;
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)&lt;br/&gt;
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)&lt;br/&gt;
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;br/&gt;
Caused by: org.apache.maven.plugin.MojoExecutionException: Error while executing forked tests.; nested exception is org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&lt;br/&gt;
	at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:614)&lt;br/&gt;
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)&lt;br/&gt;
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)&lt;br/&gt;
	... 17 more&lt;br/&gt;
Caused by: org.apache.maven.surefire.booter.SurefireBooterForkException: Error while executing forked tests.; nested exception is org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:227)&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.runSuitesForkOnce(ForkStarter.java:118)&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:102)&lt;br/&gt;
	at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:600)&lt;br/&gt;
	... 19 more&lt;br/&gt;
Caused by: org.codehaus.plexus.util.cli.CommandLineException: Error inside systemErr parser&lt;br/&gt;
	at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:227)&lt;br/&gt;
	at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:114)&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:223)&lt;br/&gt;
	... 22 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.output.FileOutputConsumerProxy.consumeOutputLine(FileOutputConsumerProxy.java:125)&lt;br/&gt;
	at org.apache.maven.plugin.surefire.booterclient.ForkingStreamConsumer.consumeLine(ForkingStreamConsumer.java:75)&lt;br/&gt;
	at org.codehaus.plexus.util.cli.StreamPumper.consumeLine(StreamPumper.java:197)&lt;br/&gt;
	at org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:137)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 1 minute 8 seconds&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Wed Dec 15 09:35:44 CET 2010&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 48M/528M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="14454552" author="krosenvold" created="Wed, 15 Dec 2010 14:35:50 +0000"  >&lt;p&gt;Fixed in r1049669. It&apos;s the redirectOutputToFile that is buggy and can have race conditions.&lt;/p&gt;</comment>
                            <comment id="17994063" author="olamy" created="Fri, 4 Jul 2025 07:14:46 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1911&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bcy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>