<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:07:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-463] ClassCastException when using testng suiteXmlFile and forkMode=always</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-463</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The related pom part is:&lt;br/&gt;
        &amp;lt;profile&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;browser&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;build&amp;gt;&lt;br/&gt;
                &amp;lt;plugins&amp;gt;&lt;br/&gt;
                    &amp;lt;plugin&amp;gt;&lt;br/&gt;
                        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
                        &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
                        &amp;lt;configuration&amp;gt;&lt;br/&gt;
                            &amp;lt;suiteXmlFiles&amp;gt;&lt;br/&gt;
                                &amp;lt;suiteXmlFile&amp;gt;src/test/resources/testng-browser.xml&amp;lt;/suiteXmlFile&amp;gt;&lt;br/&gt;
                            &amp;lt;/suiteXmlFiles&amp;gt;&lt;br/&gt;
                        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
                    &amp;lt;/plugin&amp;gt;&lt;br/&gt;
                &amp;lt;/plugins&amp;gt;&lt;br/&gt;
            &amp;lt;/build&amp;gt;&lt;br/&gt;
        &amp;lt;/profile&amp;gt;&lt;/p&gt;

&lt;p&gt;Issuing mvn -Pbrowser test results in the exception:&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: java.io.File cannot be cast to java.lang.String&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesForkPerTestSet(SurefireBooter.java:403)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.run(SurefireBooter.java:249)&lt;br/&gt;
        at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:492)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:447)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:539)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:480)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:459)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:311)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:278)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:143)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:333)&lt;br/&gt;
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:126)&lt;br/&gt;
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:282)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)&lt;/p&gt;

&lt;p&gt;Any workarounds for this?&lt;/p&gt;</description>
                <environment>linux 2.6.22-1-mepis-smp</environment>
        <key id="12810149">SUREFIRE-463</key>
            <summary>ClassCastException when using testng suiteXmlFile and forkMode=always</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andyhot">Andreas Andreou</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Feb 2008 21:41:22 +0000</created>
                <updated>Fri, 4 Jul 2025 07:09:48 +0000</updated>
                            <resolved>Tue, 29 Apr 2008 18:28:34 +0000</resolved>
                                    <version>2.4.2</version>
                                    <fixVersion>2.4.3</fixVersion>
                                        <due></due>
                            <votes>6</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14454322" author="andyhot" created="Sun, 2 Mar 2008 02:21:05 +0000"  >&lt;p&gt;Digging into the source a bit... &lt;br/&gt;
Looks like AbstractDirectoryTestSuite.locateTestSets returns a Map&amp;lt;String, SurefireTestSet&amp;gt;&lt;br/&gt;
while TestNGXmlTestSuite returns Map&amp;lt;File, String&amp;gt;&lt;/p&gt;

&lt;p&gt;SurefireBooter doesn&apos;t differentiate between the two, hence the ClassCastException&lt;/p&gt;</comment>
                            <comment id="14454202" author="andyhot" created="Sun, 2 Mar 2008 06:08:43 +0000"  >&lt;p&gt;Trivial patch that fixes this issue on the 2.5-SNAPSHOT trunk - all tests pass.&lt;/p&gt;</comment>
                            <comment id="14454206" author="dfabulich" created="Wed, 26 Mar 2008 18:29:12 +0000"  >&lt;p&gt;Well, I think I like the idea of this patch, but I&apos;m a bit creeped out by it, because I can&apos;t reproduce your example.  We&apos;ve got a sample integration test that uses suiteXmlFile and it passes (and, more generally, I use that feature all the time).  I tried just pasting your snippet into that test and running it with &quot;-P browser&quot;, hoping that maybe the problem was with the use of a profile, but no, the test ran just fine on my machine.&lt;/p&gt;

&lt;p&gt;Can you provide a minimal example Maven project that reproduces the problem?  We can check that into the integration test suite to make sure that issues like this don&apos;t crop up again in the future.&lt;/p&gt;</comment>
                            <comment id="14454239" author="andyhot" created="Wed, 26 Mar 2008 21:01:21 +0000"  >&lt;p&gt;Took me a while to recreate this in a simple project, but i consistently get it when configuring surefire to use a pertest forkMode and defining the profile (and surefire extra configurations) in a child project...&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a zip for you to recreate this, from the top level try:&lt;br/&gt;
mvn test&lt;br/&gt;
and then &lt;br/&gt;
mvn -Pbrowser test &lt;/p&gt;

</comment>
                            <comment id="14454208" author="dfabulich" created="Mon, 28 Apr 2008 17:28:11 +0000"  >&lt;p&gt;Using your project I narrowed the problem down more specifically.  The issue occurs when using forkMode=pertest aka forkMode=always.&lt;/p&gt;</comment>
                            <comment id="14454349" author="dfabulich" created="Tue, 29 Apr 2008 18:28:34 +0000"  >&lt;p&gt;Fixed revision 652188.&lt;/p&gt;</comment>
                            <comment id="14456170" author="ahoehma" created="Mon, 3 Feb 2014 03:48:49 +0000"  >&lt;p&gt;I&apos;m using 2.16. and this bug is back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;mvn help:effective-pom ...&lt;/p&gt;

&lt;p&gt;   &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;version&amp;gt;2.16&amp;lt;/version&amp;gt;&lt;br/&gt;
        &amp;lt;executions&amp;gt;&lt;br/&gt;
          &amp;lt;execution&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;default-test&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;phase&amp;gt;test&amp;lt;/phase&amp;gt;&lt;br/&gt;
            &amp;lt;goals&amp;gt;&lt;br/&gt;
              &amp;lt;goal&amp;gt;test&amp;lt;/goal&amp;gt;&lt;br/&gt;
            &amp;lt;/goals&amp;gt;&lt;br/&gt;
            &amp;lt;configuration&amp;gt;&lt;br/&gt;
              &amp;lt;forkCount&amp;gt;2.5C&amp;lt;/forkCount&amp;gt;&lt;br/&gt;
              &amp;lt;reuseForks&amp;gt;true&amp;lt;/reuseForks&amp;gt;&lt;br/&gt;
              &amp;lt;parallel&amp;gt;none&amp;lt;/parallel&amp;gt;&lt;br/&gt;
              &amp;lt;testFailureIgnore&amp;gt;false&amp;lt;/testFailureIgnore&amp;gt;&lt;br/&gt;
              &amp;lt;redirectTestOutputToFile&amp;gt;true&amp;lt;/redirectTestOutputToFile&amp;gt;&lt;br/&gt;
              &amp;lt;excludes&amp;gt;&lt;br/&gt;
                &amp;lt;exclude&amp;gt;**/Abstract*Test.java&amp;lt;/exclude&amp;gt;&lt;br/&gt;
                &amp;lt;exclude&amp;gt;**/Abstract*TestCase.java&amp;lt;/exclude&amp;gt;&lt;br/&gt;
              &amp;lt;/excludes&amp;gt;&lt;br/&gt;
              &amp;lt;suiteXmlFiles&amp;gt;&lt;br/&gt;
                &amp;lt;suiteXmlFile&amp;gt;D:\DEV\ws_hscm\hscm-vaadin-webapp/src/test/resources/Testsuite.xml&amp;lt;/suiteXmlFile&amp;gt;&lt;br/&gt;
              &amp;lt;/suiteXmlFiles&amp;gt;&lt;br/&gt;
              &amp;lt;excludedGroups combine.self=&quot;override&quot; /&amp;gt;&lt;br/&gt;
              &amp;lt;printSummary&amp;gt;true&amp;lt;/printSummary&amp;gt;&lt;br/&gt;
            &amp;lt;/configuration&amp;gt;&lt;br/&gt;
          &amp;lt;/execution&amp;gt;&lt;br/&gt;
        &amp;lt;/executions&amp;gt;&lt;br/&gt;
 ...&lt;/p&gt;</comment>
                            <comment id="14456113" author="michal.bocek" created="Tue, 2 Sep 2014 04:02:03 +0000"  >&lt;p&gt;Looks like bug is also in surefire plugin version 2.17.&lt;/p&gt;</comment>
                            <comment id="17993805" author="olamy" created="Fri, 4 Jul 2025 07:09:48 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1183&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12720112" name="SUREFIRE-463__handle_TestNG_xmlTestSuites.patch" size="1551" author="andyhot" created="Sun, 2 Mar 2008 06:08:43 +0000"/>
                            <attachment id="12720006" name="surefire-bug.zip" size="3943" author="andyhot" created="Wed, 26 Mar 2008 21:04:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>