<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:08:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-679] [regression] TestNG suite no longer succeeds, with error &quot;testSetStarting called twice&quot;</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-679</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I&apos;m receiving this error in 2.7.1:&lt;br/&gt;
&quot;Error while executing forked tests.; nested exception is java.lang.IllegalStateException: testSetStarting called twice&quot;&lt;/p&gt;

&lt;p&gt;This did not occur with 2.5 on the same project. It is using TestNG with a suite XML and Cargo + Selenium&lt;/p&gt;

&lt;p&gt;You should be able to reproduce it by checking out &lt;a href=&quot;http://svn.apache.org/repos/asf/archiva/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/archiva/trunk&lt;/a&gt;, changing the surefire version in the root POM, and running:&lt;br/&gt;
mvn clean install&lt;br/&gt;
cd archiva-modules/archiva-web/archiva-webapp-test&lt;br/&gt;
mvn clean install&lt;/p&gt;

&lt;p&gt;I&apos;ll have to come back to investigate the cause later - the project is quite crusty and there may be some misconfiguration also.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12810239">SUREFIRE-679</key>
            <summary>[regression] TestNG suite no longer succeeds, with error &quot;testSetStarting called twice&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="brett">Brett Porter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Dec 2010 05:58:12 +0000</created>
                <updated>Fri, 4 Jul 2025 07:15:08 +0000</updated>
                            <resolved>Sun, 2 Jan 2011 06:22:49 +0000</resolved>
                                    <version>2.7.1</version>
                                    <fixVersion>2.7.2</fixVersion>
                                    <component>TestNG support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14454720" author="brettporter" created="Wed, 29 Dec 2010 06:00:40 +0000"  >&lt;p&gt;I should point out that this was at a point in time where initializeArchiva(org.apache.archiva.web.test.ArchivaAdminTest) was failing (causing all other tests to be skipped). I&apos;ll re-verify whether 2.7.1 works once the test suite is passing correctly.&lt;/p&gt;</comment>
                            <comment id="14454637" author="brettporter" created="Wed, 29 Dec 2010 08:03:01 +0000"  >&lt;p&gt;after repairing the startup problems, the test suite progresses as normal. However, at the end the same error appears, so it seems it&apos;s not related to the initializeArchiva method.&lt;/p&gt;

&lt;p&gt;I can see if I can come up with a test case soon.&lt;/p&gt;</comment>
                            <comment id="14454797" author="brettporter" created="Wed, 29 Dec 2010 08:21:02 +0000"  >&lt;p&gt;further data - the output is mixed up (seems related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-639&quot; title=&quot;Error inside systemOut parser: java.lang.IllegalStateException: testSetStarting called twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-639&quot;&gt;&lt;del&gt;SUREFIRE-639&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;In TestSuite.txt:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------------------------------
Test set: TestSuite
-------------------------------------------------------------------------------

Results :

Failed tests: 
  testBuildNumberOfSnapshotArtifact(org.apache.archiva.web.test.BrowseTest)
  testDeleteMetadataProperty(org.apache.archiva.web.test.BrowseTest)
  testMerging(org.apache.archiva.web.test.MergingRepositoriesTest)

Tests run: 123, Failures: 3, Errors: 0, Skipped: 4

ert.java:84)
        at org.testng.Assert.failNotEquals(Assert.java:438)
        at org.testng.Assert.assertTrue(Assert.java:32)
        at org.testng.Assert.assertTrue(Assert.java:42)
        at org.apache.archiva.web.test.BrowseTest.testBuildNumberOfSnapshotArtifact(BrowseTest.java:137)

testDeleteMetadataProperty(org.apache.archiva.web.test.BrowseTest)  Time elapsed: 1.407 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: &lt;span class=&quot;code-quote&quot;&gt;&apos;foo=bar&apos;&lt;/span&gt; isn&apos;t present. expected:&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was:&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;
        at org.testng.Assert.fail(Assert.java:84)
        at org.testng.Assert.failNotEquals(Assert.java:438)
        at org.testng.Assert.assertTrue(Assert.java:32)
        at org.apache.archiva.web.test.parent.AbstractSeleniumTest.assertTextPresent(AbstractSeleniumTest.java:163)
        at org.apache.archiva.web.test.BrowseTest.deleteMetadataProperty(BrowseTest.java:229)
        at org.apache.archiva.web.test.BrowseTest.testDeleteMetadataProperty(BrowseTest.java:170)

testMerging(org.apache.archiva.web.test.MergingRepositoriesTest)  Time elapsed: 3.231 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: &lt;span class=&quot;code-quote&quot;&gt;&apos;No conflicting artifacts&apos;&lt;/span&gt; isn&apos;t present. expected:&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;gt; but was:&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;gt;
        at org.testng.Assert.fail(Assert.java:84)
        at org.testng.Assert.failNotEquals(Assert.java:438)
        at org.testng.Assert.assertTrue(Assert.java:32)
        at org.apache.archiva.web.test.parent.AbstractSeleniumTest.assertTextPresent(AbstractSeleniumTest.java:163)
        at org.apache.archiva.web.test.MergingRepositoriesTest.testMerging(MergingRepositoriesTest.java:55)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;while the output was:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing forked tests.; nested exception is java.lang.IllegalStateException: testSetStarting called twice
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note the partial exception and the overwritten summary in the wrong file.&lt;/p&gt;</comment>
                            <comment id="14454678" author="krosenvold" created="Sun, 2 Jan 2011 06:22:49 +0000"  >&lt;p&gt;Fixed with testcase in r1054391. Bug required TestNG AND redirectTestOutputToFile=true AND non-suite setup (&amp;gt;1 test). It would also cause &quot;Test Set Starting&quot; to be printed twice. It is not related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-639&quot; title=&quot;Error inside systemOut parser: java.lang.IllegalStateException: testSetStarting called twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-639&quot;&gt;&lt;del&gt;SUREFIRE-639&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I am getting initializeArchiva(org.apache.archiva.web.test.ArchivaAdminTest) failing now, which I suspect is totally different. You may want to re-test your use-case.&lt;/p&gt;</comment>
                            <comment id="17994083" author="olamy" created="Fri, 4 Jul 2025 07:15:08 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1898&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12809532">SUREFIRE-680</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>