<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:18:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-2211] additionalClasspathElement with UNC path not working with Maven Failsafe Plugin</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-2211</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;We are using the configuration parameter additionalClasspathElements (&lt;a href=&quot;https://maven.apache.org/surefire/maven-failsafe-plugin/integration-test-mojo.html#additionalClasspathElements&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire/maven-failsafe-plugin/integration-test-mojo.html#additionalClasspathElements&lt;/a&gt;) to provide a log4j2 xml configuration during tests. There is configured an UNC path like this //our-server/build/failsafe containing the file.&lt;br/&gt;
Until version 3.0.0-M2 everything was fine, the ressource could be found within the class loader and log4j was configured correctly (so 3.0.0-M1 was ok).&lt;br/&gt;
However since the Milestone 2 of version 3 and with all later versions, the ressource could not be found within the classpath, leaving log4j unconfigured.&lt;br/&gt;
From the reporting xml the classpath is configured the same, but the class loader behaves differently.&lt;br/&gt;
When using a normal path like c:/build/failsafe the ressource can be found without issues. &lt;/p&gt;</description>
                <environment>Windows JDK17.0.5+8</environment>
        <key id="13558370">SUREFIRE-2211</key>
            <summary>additionalClasspathElement with UNC path not working with Maven Failsafe Plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michael-o">Michael Osipov</assignee>
                                    <reporter username="robert.seidel@aeb.com">Robert Seidel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Nov 2023 08:35:04 +0000</created>
                <updated>Fri, 4 Jul 2025 07:44:36 +0000</updated>
                            <resolved>Mon, 4 Dec 2023 12:29:09 +0000</resolved>
                                    <version>3.0.0-M2</version>
                    <version>3.2.2</version>
                                    <fixVersion>3.2.3</fixVersion>
                                    <component>Maven Failsafe Plugin</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17787120" author="michael-o" created="Fri, 17 Nov 2023 10:11:38 +0000"  >&lt;p&gt;Are you able to bisect to the first broken commit?&lt;/p&gt;</comment>
                            <comment id="17787147" author="JIRAUSER295788" created="Fri, 17 Nov 2023 11:28:19 +0000"  >&lt;p&gt;The first failing commit is this one: &lt;a href=&quot;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-8b7d87de30078d9465dc3a997b7121b77e70b150bde4678ffed0fade332ade51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-8b7d87de30078d9465dc3a997b7121b77e70b150bde4678ffed0fade332ade51&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m pretty sure &lt;a href=&quot;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-831c3693e03bf74af278a55df4af2ce453b674930f1932b4f7334b2417cbb595R169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-831c3693e03bf74af278a55df4af2ce453b674930f1932b4f7334b2417cbb595R169&lt;/a&gt; destroys UNC paths. Here is how the java.class.path property looks like (from failsafe report xml):&lt;br/&gt;
&amp;lt;property name=&quot;java.class.path&quot; value=&quot;...;\\our-server\build\failsafe;&quot;/&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="17787159" author="michael-o" created="Fri, 17 Nov 2023 12:03:10 +0000"  >&lt;p&gt;I agree with you that line 169 is wrong.&lt;/p&gt;</comment>
                            <comment id="17787177" author="JIRAUSER295788" created="Fri, 17 Nov 2023 12:30:22 +0000"  >&lt;p&gt;I&apos;ve removed the line, but it doesn&apos;t help. Maybe it has also something to do with other changes around there.&lt;/p&gt;</comment>
                            <comment id="17787182" author="michael-o" created="Fri, 17 Nov 2023 12:48:06 +0000"  >&lt;p&gt;Please raise your voice on the offending PRs...&lt;/p&gt;</comment>
                            <comment id="17787183" author="michael-o" created="Fri, 17 Nov 2023 12:48:23 +0000"  >&lt;p&gt;In the meantime, is mounting as a drive letter possible?&lt;/p&gt;</comment>
                            <comment id="17787233" author="JIRAUSER295788" created="Fri, 17 Nov 2023 14:27:02 +0000"  >&lt;p&gt;Mounting as a drive letter will probably be possible, the easier solution would be to copy the files to some local temp dir and add this to the classpath. &lt;br/&gt;
In the meantime I did find out, what is done wrong:&lt;br/&gt;
In the past \\our-server\build\failsafe from classpath was added as &lt;a href=&quot;file:////our-server/build/failsafe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////our-server/build/failsafe&lt;/a&gt; to the manifest of the surefirebooter jar. Now it looks like &lt;a href=&quot;file://our-server/build/failsafe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://our-server/build/failsafe&lt;/a&gt; which would be correct as an url, but Java expects an URI there &lt;a href=&quot;https://wiki.eclipse.org/Eclipse/UNC_Paths#java.net.URI&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.eclipse.org/Eclipse/UNC_Paths#java.net.URI&lt;/a&gt;.&lt;br/&gt;
I&apos;ll debug further to find the root cause.&lt;/p&gt;</comment>
                            <comment id="17787251" author="JIRAUSER295788" created="Fri, 17 Nov 2023 15:06:36 +0000"  >&lt;p&gt;The root cause is &lt;a href=&quot;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-831c3693e03bf74af278a55df4af2ce453b674930f1932b4f7334b2417cbb595R157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/commit/f5cca5bcc2c85060c21c82eea0081d016cb86909#diff-831c3693e03bf74af278a55df4af2ce453b674930f1932b4f7334b2417cbb595R157&lt;/a&gt; .&lt;br/&gt;
Paths.get(&quot;c:&lt;br class=&quot;atl-forced-newline&quot; /&gt;test&quot;).toUri().toASCIISTRING() results &lt;a href=&quot;file:///c:/test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///c:/test&lt;/a&gt;&lt;br/&gt;
But Paths.get(&quot;\\\\test&lt;br class=&quot;atl-forced-newline&quot; /&gt;path&quot;).toUri().toASCIIString() results &lt;a href=&quot;file://test/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://test/path/&lt;/a&gt; which is fine for the usage in an url, but not for the classpath attribute in the manifest of a jar file, therefor it should be &lt;a href=&quot;file:////test/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////test/path/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17787281" author="JIRAUSER295788" created="Fri, 17 Nov 2023 15:50:44 +0000"  >&lt;p&gt;So an easy fix would be to add these lines to toAbsoluteUri:&lt;br/&gt;
		// unc paths needs to be written as &lt;a href=&quot;file:////&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////&lt;/a&gt;&lt;br/&gt;
		if ( absolutePath.toString().startsWith( &quot;\\\\&quot; )) &lt;/p&gt;
{
			return absolutePath.toFile().toURI().toASCIIString();
		}
&lt;p&gt;I&apos;ll try to provide a PR with tests at the beginning of next week.&lt;/p&gt;</comment>
                            <comment id="17787987" author="githubbot" created="Mon, 20 Nov 2023 12:32:52 +0000"  >&lt;p&gt;robseidel opened a new pull request, #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Following this checklist to help us incorporate your &lt;br/&gt;
   contribution quickly and easily:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Make sure there is a &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SUREFIRE&lt;/a&gt;) filed&lt;br/&gt;
          for the change (usually before you start working on it).  Trivial changes like typos do not &lt;br/&gt;
          require a JIRA issue.  Your pull request should address just this issue, without &lt;br/&gt;
          pulling in other changes.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Each commit in the pull request should have a meaningful subject line and body.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Format the pull request title like `&lt;span class=&quot;error&quot;&gt;&amp;#91;SUREFIRE-XXX&amp;#93;&lt;/span&gt; - Fixes bug in ApproximateQuantiles`,&lt;br/&gt;
          where you replace `SUREFIRE-XXX` with the appropriate JIRA issue. Best practice&lt;br/&gt;
          is to use the JIRA issue title in the pull request title and in the first line of the &lt;br/&gt;
          commit message.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Write a pull request description that is detailed enough to understand what the pull request does, how, and why.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Run `mvn clean install` to make sure basic checks pass. A more thorough check will&lt;br/&gt;
          be performed on your pull request automatically.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; You have run the integration tests successfully (`mvn -Prun-its clean install`).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   If your pull request is about ~20 lines of code you don&apos;t need to sign an&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;) if you are unsure&lt;br/&gt;
   please ask on the developers list.&lt;/p&gt;

&lt;p&gt;   To make clear that you license your contribution under &lt;br/&gt;
   the &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache License Version 2.0, January 2004&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;)&lt;br/&gt;
   you have to acknowledge this by using the following check-box.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; I hereby declare this contribution to be licenced under the &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache License Version 2.0, January 2004&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[] In any other case, please file an &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache Individual Contributor License Agreement&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://www.apache.org/licenses/icla.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/icla.pdf&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="17788057" author="githubbot" created="Mon, 20 Nov 2023 15:16:00 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1819260190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1819260190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Is there a way to disable the additional tests for linux builds (as unc paths exists only in Windows)?&lt;/p&gt;

</comment>
                            <comment id="17788064" author="JIRAUSER295788" created="Mon, 20 Nov 2023 15:31:30 +0000"  >&lt;p&gt;Found a way to disable the test in non windows test environments, as there are no unc paths there.&lt;/p&gt;</comment>
                            <comment id="17789251" author="githubbot" created="Thu, 23 Nov 2023 20:03:04 +0000"  >&lt;p&gt;michael-o commented on code in PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#discussion_r1403697890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#discussion_r1403697890&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -179,6 +179,10 @@ static String relativize(@Nonnull Path parent, @Nonnull Path child) throws Illeg&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     static String toAbsoluteUri(@Nonnull Path absolutePath) {&lt;br/&gt;
+        // unc paths needs to be written as &lt;a href=&quot;file:////&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////&lt;/a&gt;&lt;br/&gt;
+        if (absolutePath.toString().startsWith(&quot;\\\\&quot;)) &lt;/p&gt;
{
+            return absolutePath.toFile().toURI().toASCIIString();
+        }

&lt;p&gt;Review Comment:&lt;br/&gt;
   That looks so sick...it should be identical. It thos really so broken in Java?&lt;/p&gt;


</comment>
                            <comment id="17789253" author="michael-o" created="Thu, 23 Nov 2023 20:16:27 +0000"  >&lt;p&gt;Both representations seems to be valid: &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8089.html#appendix-E.3.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.rfc-editor.org/rfc/rfc8089.html#appendix-E.3.2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789255" author="michael-o" created="Thu, 23 Nov 2023 20:18:44 +0000"  >&lt;p&gt;Before I proceed with your PR, can you profile a simple Java example w/o Surefire and a sample CP is provided by Surefire which fails for you. I wonder whether we need to report with OpenJDK because I apply your PR.&lt;/p&gt;</comment>
                            <comment id="17789261" author="michael-o" created="Thu, 23 Nov 2023 21:07:15 +0000"  >&lt;p&gt;Seems to be very related: &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8178726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8178726&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789266" author="michael-o" created="Thu, 23 Nov 2023 22:03:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://hg.openjdk.org/jdk9/jdk9/jdk/rev/8cba9cc074b8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hg.openjdk.org/jdk9/jdk9/jdk/rev/8cba9cc074b8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789340" author="JIRAUSER295788" created="Fri, 24 Nov 2023 06:20:29 +0000"  >&lt;p&gt;I&apos;ll guess that the issue is related, but its not the same.&lt;br/&gt;
The problem comes when creating and using the fork jar. Inside of the jar is a manifest with the Class-Path: attribute. While all the related paths works fine like this one ../../../../.m2/repository/org/apache/maven/surefire/surefire-booter/3.0.0-M2-SNAPSHOT/surefire-booter-3.0.0-M2-SNAPSHOT.jar, the unc path works only with this sick looking format: &lt;a href=&quot;file:////server/somePath/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////server/somePath/&lt;/a&gt;.&lt;br/&gt;
The correct URL path would look like &lt;a href=&quot;file://server/somePath/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://server/somePath/&lt;/a&gt; that is what &amp;lt;Path&amp;gt;.toUri() &amp;amp; &amp;lt;Path&amp;gt;.toRealPath().toUri() provides (guess it was a fix when introducing nio), but that won&apos;t work there. Funny thing is, for drive letters the syntax also changed from &amp;lt;File&amp;gt; &lt;a href=&quot;file:/c:/temp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/c:/temp/&lt;/a&gt; to &amp;lt;Path&amp;gt; &lt;a href=&quot;file:///c:/temp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///c:/temp&lt;/a&gt;, but there work both ways.&lt;br/&gt;
It did not find any more specification regarding absolute files, as it seems an edge case. &lt;a href=&quot;https://download.java.net/java/early_access/loom/docs/specs/jar/jar.html#class-path-attribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://download.java.net/java/early_access/loom/docs/specs/jar/jar.html#class-path-attribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789357" author="JIRAUSER295788" created="Fri, 24 Nov 2023 07:51:31 +0000"  >&lt;p&gt;here is a short example of manifests which I tested under Windows&lt;/p&gt;

&lt;p&gt;this doesn&apos;t work (surefire &amp;gt; 3.0.0M1):&lt;/p&gt;

&lt;p&gt;Manifest-Version: 1.0&lt;br/&gt;
Class-Path: &lt;a href=&quot;file://server/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://server/path/&lt;/a&gt;&lt;br/&gt;
Main-Class: com.main.Start&lt;/p&gt;

&lt;p&gt;but this does (surefire &amp;lt; 3.0.0M2):&lt;/p&gt;

&lt;p&gt;Manifest-Version: 1.0&lt;br/&gt;
Class-Path: &lt;a href=&quot;file:////server/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////server/path/&lt;/a&gt;&lt;br/&gt;
Main-Class: com.main.Start&lt;/p&gt;

&lt;p&gt;for windows files located in drives, both will work:&lt;/p&gt;

&lt;p&gt;(surefire &amp;gt; 3.0.0M1)&lt;br/&gt;
Manifest-Version: 1.0&lt;br/&gt;
Class-Path: &lt;a href=&quot;file:///c:/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///c:/path/&lt;/a&gt;&lt;br/&gt;
Main-Class: com.main.Start&lt;/p&gt;

&lt;p&gt;(surefire &amp;lt; 3.0.0M2)&lt;br/&gt;
Manifest-Version: 1.0&lt;br/&gt;
Class-Path: &lt;a href=&quot;file:/c:/path/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/c:/path/&lt;/a&gt;&lt;br/&gt;
Main-Class: com.main.Start&lt;/p&gt;
</comment>
                            <comment id="17789363" author="michael-o" created="Fri, 24 Nov 2023 08:08:53 +0000"  >&lt;p&gt;Can you raise a bug with OpenJDK? This must be documented. Then I&apos;d link it and merge your PR with pleasure. &lt;/p&gt;</comment>
                            <comment id="17789371" author="JIRAUSER295788" created="Fri, 24 Nov 2023 08:36:48 +0000"  >&lt;p&gt;I have no account for &lt;a href=&quot;https://bugs.openjdk.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/&lt;/a&gt; so I cannot raise an issue there. And you have to be an author to create issues (so no easy registration is possible).&lt;/p&gt;</comment>
                            <comment id="17789379" author="michael-o" created="Fri, 24 Nov 2023 08:53:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://bugreport.java.com/bugreport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugreport.java.com/bugreport/&lt;/a&gt; and reference this issue as well. It will be flagged as &lt;tt&gt;maven-found&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17789399" author="JIRAUSER295788" created="Fri, 24 Nov 2023 09:24:55 +0000"  >&lt;p&gt;I created a report and got the review id 9076264.&lt;/p&gt;</comment>
                            <comment id="17789411" author="michael-o" created="Fri, 24 Nov 2023 09:54:27 +0000"  >&lt;p&gt;OK. Let&apos;s wait a few days. I should then be visible publically.&lt;/p&gt;</comment>
                            <comment id="17790111" author="JIRAUSER295788" created="Mon, 27 Nov 2023 14:56:18 +0000"  >&lt;p&gt;Bug is now listed in JDK - &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8320760&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17790175" author="michael-o" created="Mon, 27 Nov 2023 16:46:16 +0000"  >&lt;p&gt;I do not fully understand Alan&apos;s answer and what type of solution Surefire should take. I will try to re-read his answer in the next couple of days.&lt;/p&gt;</comment>
                            <comment id="17790178" author="michael-o" created="Mon, 27 Nov 2023 16:55:33 +0000"  >&lt;p&gt;Edit: Re-read. My understanding: &lt;tt&gt;Class-Path&lt;/tt&gt; should only contain relative paths. Your absolute path is brittle and there for compat reasons. If present, it must use &lt;tt&gt;File&lt;/tt&gt; only? Is that what Alan is trying to say? Regardless of this bug: Would it make sense for your to bundle it into a JAR to make it available as a dependency in the future?&lt;/p&gt;</comment>
                            <comment id="17790182" author="michael-o" created="Mon, 27 Nov 2023 17:11:47 +0000"  >&lt;p&gt;This one is broken for me: &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/aa864f4532282100667bf3d81dc7cbd460845408/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java#L228-L240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/aa864f4532282100667bf3d81dc7cbd460845408/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java#L228-L240&lt;/a&gt; because this is pure form encoding, no URI encoding.&lt;/p&gt;

&lt;p&gt;Spec: &lt;a href=&quot;https://docs.oracle.com/en/java/javase/17/docs/specs/jar/jar.html#class-path-attribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/17/docs/specs/jar/jar.html#class-path-attribute&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I wonder what would happen with entried like &lt;tt&gt;b&#246;se.jar&lt;/tt&gt; vs &lt;tt&gt;b{{{}%C3%B6&lt;/tt&gt;.jar}}.&lt;/p&gt;</comment>
                            <comment id="17790455" author="githubbot" created="Tue, 28 Nov 2023 09:10:19 +0000"  >&lt;p&gt;michael-o commented on code in PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#discussion_r1403697890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#discussion_r1403697890&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -179,6 +179,10 @@ static String relativize(@Nonnull Path parent, @Nonnull Path child) throws Illeg&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     static String toAbsoluteUri(@Nonnull Path absolutePath) {&lt;br/&gt;
+        // unc paths needs to be written as &lt;a href=&quot;file:////&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////&lt;/a&gt;&lt;br/&gt;
+        if (absolutePath.toString().startsWith(&quot;\\\\&quot;)) &lt;/p&gt;
{
+            return absolutePath.toFile().toURI().toASCIIString();
+        }

&lt;p&gt;Review Comment:&lt;br/&gt;
   That looks so sick...it should be identical. It this really so broken in Java?&lt;/p&gt;


</comment>
                            <comment id="17790457" author="githubbot" created="Tue, 28 Nov 2023 09:10:59 +0000"  >&lt;p&gt;michael-o commented on code in PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#discussion_r1407440529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#discussion_r1407440529&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -179,6 +179,10 @@ static String relativize(@Nonnull Path parent, @Nonnull Path child) throws Illeg&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     static String toAbsoluteUri(@Nonnull Path absolutePath) {&lt;br/&gt;
+        // unc paths needs to be written as &lt;a href=&quot;file:////&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////&lt;/a&gt;&lt;br/&gt;
+        if (absolutePath.toString().startsWith(&quot;\\\\&quot;)) &lt;/p&gt;
{

Review Comment:
   Please add the JAva issue URL to the comment, e.g., see ...



##########
maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/JarManifestForkConfiguration.java:
##########
@@ -179,6 +179,10 @@ static String relativize(@Nonnull Path parent, @Nonnull Path child) throws Illeg
     }

&lt;p&gt;     static String toAbsoluteUri(@Nonnull Path absolutePath) {&lt;br/&gt;
+        // unc paths needs to be written as &lt;a href=&quot;file:////&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   UNC paths need to be ...&lt;/p&gt;


</comment>
                            <comment id="17791526" author="JIRAUSER295788" created="Thu, 30 Nov 2023 09:24:43 +0000"  >&lt;p&gt;Sorry, I didn&apos;t had the time in the last days to look after this.&lt;br/&gt;
I&apos;ve updated the PR and put the changes into one commit and fix the comment + added a link to the jdk issue.&lt;/p&gt;

&lt;p&gt;As Alan writes, it is unusual to use absolute paths in a jar manifest (from a jar point of view). The clean solution would be to include only the relative paths in the manifest and explicitly specify the absolute paths. But that would be a lot to change and you can&apos;t specify -jar and -classpath at the same time. For this reason, the proposed solution is a compromise to solve the problem without major side effects.&lt;/p&gt;</comment>
                            <comment id="17791955" author="JIRAUSER295788" created="Fri, 1 Dec 2023 08:46:46 +0000"  >&lt;p&gt;Sorry again. I didn&apos;t rerun the build after adding the assumption. I&apos;ve removed the line that was too much, rerun the test locally and updated the PR.&lt;/p&gt;</comment>
                            <comment id="17792046" author="githubbot" created="Fri, 1 Dec 2023 13:06:15 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1836089883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1836089883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Sorry, I didn&apos;t see your changes. I applied this PR&apos;s changes to the current master branch (and removed another tab character in my changes, which was interfering with the build before). I hope everything fits now.&lt;/p&gt;

</comment>
                            <comment id="17792059" author="githubbot" created="Fri, 1 Dec 2023 13:48:38 +0000"  >&lt;p&gt;michael-o commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1836148945&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1836148945&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; Sorry, I didn&apos;t see your changes. I applied this PR&apos;s changes to the current master branch (and removed another tab character in my changes, which was interfering with the build before). I hope everything fits now.&lt;/p&gt;

&lt;p&gt;   Still not the commit message I have applied. &#128513;&lt;/p&gt;

</comment>
                            <comment id="17792647" author="githubbot" created="Mon, 4 Dec 2023 06:04:37 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1837898208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1837898208&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I&apos;ve now restored the commit message.&lt;/p&gt;

</comment>
                            <comment id="17792709" author="githubbot" created="Mon, 4 Dec 2023 08:10:19 +0000"  >&lt;p&gt;michael-o commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838031197&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838031197&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @robseidel Thanks! Can you have a look why the assumption fails?&lt;/p&gt;

</comment>
                            <comment id="17792711" author="githubbot" created="Mon, 4 Dec 2023 08:14:51 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838037352&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838037352&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Yeah, I will have a look at it. I want to exclude this test in non Windows environments and thought assumption is the way to go, like at SurefireHelperTest shouldEscapeWindowsPath, but I&apos;m probably missing something.&lt;/p&gt;

</comment>
                            <comment id="17792717" author="githubbot" created="Mon, 4 Dec 2023 08:23:46 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838050550&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838050550&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Seems like PowerMockRunner does not work with assumptions. I&apos;ll have to find another way to skip the test in a non Windows environment.&lt;/p&gt;

</comment>
                            <comment id="17792729" author="githubbot" created="Mon, 4 Dec 2023 08:49:06 +0000"  >&lt;p&gt;robseidel commented on PR #689:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838087634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689#issuecomment-1838087634&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I found a solution for the assumption problem. It works in my environment (changed assumeTrue to assumeFalse), so hopefully the build does run now.&lt;br/&gt;
   (&lt;a href=&quot;https://youtrack.jetbrains.com/issue/IDEA-288919/JUnit-4-assumption-throwing-error-instead-of-ignoring-test-when-using-PowerMock-runner&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://youtrack.jetbrains.com/issue/IDEA-288919/JUnit-4-assumption-throwing-error-instead-of-ignoring-test-when-using-PowerMock-runner&lt;/a&gt;)&lt;/p&gt;

</comment>
                            <comment id="17792808" author="githubbot" created="Mon, 4 Dec 2023 12:28:57 +0000"  >&lt;p&gt;michael-o closed pull request #689: &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-2211&quot; title=&quot;additionalClasspathElement with UNC path not working with Maven Failsafe Plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-2211&quot;&gt;&lt;del&gt;SUREFIRE-2211&lt;/del&gt;&lt;/a&gt; Fix UNC classpath elements&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-surefire/pull/689&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/689&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17792809" author="michael-o" created="Mon, 4 Dec 2023 12:29:09 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-surefire.git&amp;amp;a=commit&amp;amp;h=55ccd06a027f1693557c2a3ec3690ac91dcc59ba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;55ccd06a027f1693557c2a3ec3690ac91dcc59ba&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17995623" author="olamy" created="Fri, 4 Jul 2025 07:44:36 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2709&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lod4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>