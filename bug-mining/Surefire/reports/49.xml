<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:06:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-61] Incorrect classpath ordering</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-61</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Surefire incorrectly interprets classpath ordering.&lt;br/&gt;
Steps to reproduce: &lt;br/&gt;
1. unzip my-app.zip - it&apos;s a simple mvn project created with&lt;br/&gt;
mvn archetype:create -DgroupId=com.mycompany.app -DartifactId=my-app&lt;br/&gt;
and lightly patched &lt;br/&gt;
2. mvn test&lt;br/&gt;
in my case, it prints out&lt;br/&gt;
jar:&lt;a href=&quot;file:/home/vyzivus/.m2/repository/jxta/jxta/2.0/jxta-2.0.jar!/log4j.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/vyzivus/.m2/repository/jxta/jxta/2.0/jxta-2.0.jar!/log4j.properties&lt;/a&gt;&lt;br/&gt;
jar:&lt;a href=&quot;file:/home/vyzivus/.m2/repository/jxta/jxta/2.0/jxta-2.0.jar!/log4j.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/vyzivus/.m2/repository/jxta/jxta/2.0/jxta-2.0.jar!/log4j.properties&lt;/a&gt;&lt;br/&gt;
which is incorrect. log4j.properties is located both in jxta.jar and src/test/resources, but I think that src/test/resources takes precedence over jxta. This ordering is set correctly in surefire36745tmp file I think, but surefire seems to ignore the ordering.&lt;/p&gt;</description>
                <environment>maven2.0.4, sun-jdk-1.5.0.09, maven-surefire-plugin 2.2, surefire 2.0, gentoo linux x86</environment>
        <key id="12810056">SUREFIRE-61</key>
            <summary>Incorrect classpath ordering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brett">Brett Porter</assignee>
                                    <reporter username="vyzivus">Martin Vysny</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2007 04:22:45 +0000</created>
                <updated>Fri, 4 Jul 2025 05:48:37 +0000</updated>
                            <resolved>Wed, 8 Aug 2007 06:03:05 +0000</resolved>
                                    <version>2.0 (2.2 plugin)</version>
                                    <fixVersion>2.3.1</fixVersion>
                                    <component>JUnit 3.x support</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14453739" author="barrettas" created="Fri, 5 Jan 2007 17:29:20 +0000"  >&lt;p&gt;This seems to be due to adding classpath entries into the surefire properties file in the form of &quot;classpath.&lt;span class=&quot;error&quot;&gt;&amp;#91;number&amp;#93;&lt;/span&gt;&quot; and then these are getting sorted with a string sort. Therefore 29 classpath entries would be sorted as:&lt;br/&gt;
classPathUrl.9&lt;br/&gt;
classPathUrl.8&lt;br/&gt;
classPathUrl.7&lt;br/&gt;
classPathUrl.6&lt;br/&gt;
classPathUrl.5&lt;br/&gt;
classPathUrl.4&lt;br/&gt;
classPathUrl.3&lt;br/&gt;
classPathUrl.2&lt;br/&gt;
classPathUrl.1&lt;br/&gt;
classPathUrl.0&lt;br/&gt;
classPathUrl.29&lt;br/&gt;
classPathUrl.28&lt;br/&gt;
classPathUrl.27&lt;br/&gt;
classPathUrl.26&lt;br/&gt;
classPathUrl.25&lt;br/&gt;
classPathUrl.24&lt;br/&gt;
classPathUrl.23&lt;br/&gt;
classPathUrl.22&lt;br/&gt;
classPathUrl.21&lt;br/&gt;
classPathUrl.20&lt;br/&gt;
classPathUrl.19&lt;br/&gt;
classPathUrl.18&lt;br/&gt;
classPathUrl.17&lt;br/&gt;
classPathUrl.16&lt;br/&gt;
classPathUrl.15&lt;br/&gt;
classPathUrl.14&lt;br/&gt;
classPathUrl.13&lt;br/&gt;
classPathUrl.12&lt;br/&gt;
classPathUrl.11&lt;br/&gt;
classPathUrl.10&lt;/p&gt;

&lt;p&gt;This then gets read back in via the SurefireBooter.main method (only if execution was forked) and never re-sorted by number to correct the order, thus causing the classpath to get loaded in the incorrect order.&lt;/p&gt;</comment>
                            <comment id="14453649" author="barrettas" created="Fri, 5 Jan 2007 19:34:25 +0000"  >&lt;p&gt;After a bit more research and testing I was able to create a patch for the surefire-booter revision 489098. Patch is attached.&lt;/p&gt;</comment>
                            <comment id="14453681" author="barrettas" created="Fri, 5 Jan 2007 19:34:56 +0000"  >&lt;p&gt;Applies to revision 489098.&lt;/p&gt;</comment>
                            <comment id="14453720" author="asgeirn" created="Thu, 22 Feb 2007 11:11:39 +0000"  >&lt;p&gt;Any hope on getting this fixed and released on the maven-surefire-plugin 2.2 branch?&lt;/p&gt;</comment>
                            <comment id="14453754" author="kenney" created="Sun, 3 Jun 2007 16:57:56 +0000"  >&lt;p&gt;Cannot reproduce with surefire 2.4-snapshot from trunk. The classpath seems ok:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;first target/test-classes&lt;/li&gt;
	&lt;li&gt;then target/classes&lt;/li&gt;
	&lt;li&gt;then dependencies&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It prints out the path to the target/test-classes/log4j.properties.&lt;/p&gt;

&lt;p&gt;There&apos;s no &apos;sort&apos; anywhere in the surefire sources.&lt;/p&gt;

&lt;p&gt;Can you please check this again with the latest surefire snapshots to see if it&apos;s solved?&lt;/p&gt;</comment>
                            <comment id="14456871" author="mread@spotd.co.uk" created="Wed, 6 Jun 2007 08:25:09 +0000"  >&lt;p&gt;2.4-SNAPSHOT gives me the opposite result, i.e. target/class first, then target/test-classes, then dependencies. As does 2.3.&lt;/p&gt;

&lt;p&gt;I have attached output of the following commands:&lt;/p&gt;

&lt;p&gt;mvn archetype:create -DgroupId=test -DartifactId=classpath_test -DarchetypeArtifactId=maven-archetype-quickstart&lt;br/&gt;
cd classpath_test&lt;br/&gt;
mvn -X test &amp;gt; output.log&lt;/p&gt;

&lt;p&gt;Note this bit:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; Test Classpath :&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   C:\TEMP\a_directory_of_my_choosing\classpath_test\target\classes&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   C:\TEMP\a_directory_of_my_choosing\classpath_test\target\test-classes&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt;   C:\data\sandbox\maven2\repo\junit\junit\3.8.1\junit-3.8.1.jar&lt;/p&gt;
</comment>
                            <comment id="14456860" author="mread@spotd.co.uk" created="Fri, 20 Jul 2007 05:11:50 +0000"  >&lt;p&gt;This is causing me some major problems now. Can anyone comment in any way on why I&apos;m getting an ordering of target/classes before target/test-classes in the example above? I have to go back to 2.1.3 to find a version that puts target/test-classes in front of target/classes.&lt;/p&gt;</comment>
                            <comment id="14456869" author="mread@spotd.co.uk" created="Mon, 23 Jul 2007 05:19:40 +0000"  >&lt;p&gt;I&apos;ve checked out the surefire code and SurefirePlugin.java - line 649 says:&lt;/p&gt;

&lt;p&gt;// no need to add classes/test classes directory here - they are in the classpath elements already&lt;/p&gt;

&lt;p&gt;I&apos;m having major problems digging out exactly what is putting these directories on the classpath in the first place - it doesn&apos;t seem to be the responsibility of the SureFire plugin but perhaps passed in from Plexus? Can anyone point me in the right direction?&lt;/p&gt;

&lt;p&gt;This issue is blocking a major release for me and I&apos;m looking for as much help as possible. i&apos;ll certainly supply the patch if I get to the bottom of this!&lt;/p&gt;
</comment>
                            <comment id="14453767" author="pgier" created="Mon, 23 Jul 2007 10:27:04 +0000"  >&lt;p&gt;The classes directory is put in front of the test-classes directory in MavenProject.java.&lt;br/&gt;
I created another issue under maven-project to fix this.&lt;/p&gt;</comment>
                            <comment id="14453732" author="pgier" created="Mon, 23 Jul 2007 11:02:20 +0000"  >&lt;p&gt;The issue can be seen mainly when the fork mode is set to never.  Because if the surefire plugin forks, then the ordering gets rearranged similar to what Barrett described.  However, I think this is caused by loading the paths into the properties object and then using an enumeration to iterate through them.  The Properties object doesn&apos;t retain the order of the loaded props, so they really could come out in any order, not just the sorted order that is shown above.&lt;/p&gt;

&lt;p&gt;So I think that Barrett&apos;s approach is the right one.  The classpath elements really need to be sorted after they are loaded from properties file.  Hopefully someone will apply his patch or something similar to it soon &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14453794" author="pgier" created="Mon, 23 Jul 2007 11:36:11 +0000"  >&lt;p&gt;Attaching a slightly cleaned up patch.&lt;/p&gt;</comment>
                            <comment id="14453853" author="brettporter" created="Mon, 23 Jul 2007 18:57:48 +0000"  >&lt;p&gt;will review patch for 2.3.1&lt;/p&gt;</comment>
                            <comment id="14453795" author="brettporter" created="Wed, 8 Aug 2007 06:03:05 +0000"  >&lt;p&gt;applied, thanks&lt;/p&gt;</comment>
                            <comment id="17993497" author="olamy" created="Fri, 4 Jul 2025 05:48:37 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1420&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12810063">SUREFIRE-289</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810081">SUREFIRE-318</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12797462">MNG-3118</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719681" name="SUREFIRE61-surefire-booter-r558713.patch" size="2474" author="pgier" created="Mon, 23 Jul 2007 11:36:11 +0000"/>
                            <attachment id="12720099" name="SUREFIRE61_barrettas_surefire_surefire-booter_for_rev_489098.patch" size="2092" author="barrettas" created="Fri, 5 Jan 2007 19:34:56 +0000"/>
                            <attachment id="12719824" name="my-app.zip" size="4971" author="vyzivus" created="Thu, 4 Jan 2007 04:22:45 +0000"/>
                            <attachment id="12719991" name="output.log" size="22593" author="" created="Wed, 6 Jun 2007 08:25:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2baif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>