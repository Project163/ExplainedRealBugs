<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:17:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1993] Failsafe fails to detect module dependencies</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1993</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Please see the attached project. It has three Maven modules, each defining its own JPMS module. The &lt;b&gt;application&lt;/b&gt; module depends on an interface from the &lt;b&gt;studentservice&lt;/b&gt; module, and the implementation for that interface lives in &lt;b&gt;studentservice-provider&lt;/b&gt;. The &lt;tt&gt;module-info.java&lt;/tt&gt; for the &lt;b&gt;studentservice-provider&lt;/b&gt; module declares the implementation of that interface.&lt;/p&gt;

&lt;p&gt;When you run the application using &lt;tt&gt;./manually.sh&lt;/tt&gt;, it correctly loads the &lt;b&gt;studentservice-provider&lt;/b&gt; module. When you run the IT, it does not.&lt;/p&gt;

&lt;p&gt;The application prints the module path to standard out.&lt;/p&gt;

&lt;p&gt;From the test script it prints:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
application/target/application-1.jar
studentservice/target/studentservice-1.jar
studentservice-provider/target/studentservice-provider-1.jar&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the integration test, which starts the same application, it prints:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
application/target/application-1.jar
studentservice/target/studentservice-1.jar&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Note how in the integration test the &lt;b&gt;studentservice-provider&lt;/b&gt; is missing in the output.&lt;/p&gt;</description>
                <environment>Java 17&lt;br/&gt;
Maven 4.0.0-alpha-SNAPSHOT and 3.8.4</environment>
        <key id="13425445">SUREFIRE-1993</key>
            <summary>Failsafe fails to detect module dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mthmulders">Maarten Mulders</assignee>
                                    <reporter username="mthmulders">Maarten Mulders</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jan 2022 16:44:42 +0000</created>
                <updated>Fri, 4 Jul 2025 07:40:04 +0000</updated>
                            <resolved>Fri, 11 Feb 2022 12:35:44 +0000</resolved>
                                    <version>3.0.0-M5</version>
                                    <fixVersion>3.0.0-M6</fixVersion>
                                    <component>Maven Failsafe Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17484110" author="tibor17" created="Sat, 29 Jan 2022 08:59:40 +0000"  >&lt;p&gt;Run the command&lt;br/&gt;
mv -X verify&lt;br/&gt;
and you will see the following for your analysis.&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[DEBUG] Path to args file: C:\Users\tibor17\AppData\Local\Temp\surefire18235081086826102489\surefireargs13821900620996408063
[DEBUG] args file content:
--module-path
&quot;C:\\Users\\tibor17\\reproducer\\application\\target\\application-1.jar;C:\\Users\\tibor17\\reproducer\\studentservice\\target\\studentservice-1.jar&quot;
--class-path
&quot;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-booter\\3.0.0-M5\\surefire-booter-3.0.0-M5.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-api\\3.0.0-M5\\surefire-api-3.0.0-M5.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-logger-api\\3.0.0-M5\\surefire-logger-api-3.0.0-M5.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-shared-utils\\3.0.0-M4\\surefire-shared-utils-3.0.0-M4.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-extensions-spi\\3.0.0-M5\\surefire-extensions-spi-3.0.0-M5.jar;C:\\Users\\tibor17\\reproducer\\application\\target\\test-classes;C:\\Users\\tibor17\\reproducer\\studentservice-provider\\target\\studentservice-provider-1.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\jupiter\\junit-jupiter\\5.8.2\\junit-jupiter-5.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\jupiter\\junit-jupiter-api\\5.8.2\\junit-jupiter-api-5.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\opentest4j\\opentest4j\\1.2.0\\opentest4j-1.2.0.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\platform\\junit-platform-commons\\1.8.2\\junit-platform-commons-1.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apiguardian\\apiguardian-api\\1.1.2\\apiguardian-api-1.1.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\jupiter\\junit-jupiter-params\\5.8.2\\junit-jupiter-params-5.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\jupiter\\junit-jupiter-engine\\5.8.2\\junit-jupiter-engine-5.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\platform\\junit-platform-engine\\1.8.2\\junit-platform-engine-1.8.2.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\assertj\\assertj-core\\3.21.0\\assertj-core-3.21.0.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire-junit-platform\\3.0.0-M5\\surefire-junit-platform-3.0.0-M5.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\apache\\maven\\surefire\\common-java5\\3.0.0-M5\\common-java5-3.0.0-M5.jar;c:\\Users\\tibor17\\.m2\\repository\\org\\junit\\platform\\junit-platform-launcher\\1.8.2\\junit-platform-launcher-1.8.2.jar&quot;
--patch-module
application=&quot;C:\\Users\\tibor17\\reproducer\\application\\target\\test-classes&quot;
--add-exports
application/org.apache.failsafe.its.serviceloader.application=ALL-UNNAMED
--add-modules
application
--add-reads
application=ALL-UNNAMED
org.apache.maven.surefire.booter.ForkedBooter
[DEBUG] Forking command line: cmd.exe /X /C &quot;&quot;C:\Program Files\Java\jdk-17.0.1\bin\java&quot; --add-modules ALL-DEFAULT --add-opens application/org.apache.failsafe.its.serviceloader.application=ALL-UNNAMED @C:\Users\tibor17\AppData\Local\Temp\surefire18235081086826102489\surefireargs13821900620996408063 C:\Users\tibor17\AppData\Local\Temp\surefire18235081086826102489 2022-01-29T09-49-52_477-jvmRun1 surefire2344428537137764536tmp surefire_016549986728040054363tmp&quot;
[DEBUG] Fork Channel [1] connected to the client.
[INFO] Running org.apache.failsafe.its.serviceloader.application.TrainingApplicationIT
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17484111" author="tibor17" created="Sat, 29 Jan 2022 09:04:48 +0000"  >&lt;p&gt;If you need to discuss JPMS issues, pls contact Robert Scholte because he is our expert regarding JPMS.&lt;/p&gt;</comment>
                            <comment id="17488712" author="rfscholte" created="Tue, 8 Feb 2022 09:56:56 +0000"  >&lt;p&gt;By default if a module consumes (uses) a services, its service providers are not included. This makes sense for compilation: you&apos;re not interested in implementation details. &lt;br/&gt;
However, for failsafe it makes sense to include these service providers. You can achieve this by calling &lt;tt&gt;ResolvePathsRequest.setIncludeAllProviders( true )&lt;/tt&gt; (as already discovered by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mthmulders&quot; class=&quot;user-hover&quot; rel=&quot;mthmulders&quot;&gt;mthmulders&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17488713" author="mthmulders" created="Tue, 8 Feb 2022 09:57:44 +0000"  >&lt;p&gt;I&apos;ll&#160; happily provide a pull request with a reproducer project (integration test) and a fix.&lt;/p&gt;</comment>
                            <comment id="17488982" author="mthmulders" created="Tue, 8 Feb 2022 16:20:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt;, I&apos;m having a hard time getting the IT&apos;s to run locally. I tried to run them with &lt;tt&gt;mvn verify -P run-its&lt;/tt&gt; but even the existing ones (for example &lt;tt&gt;JUnitPlatformIT.testMultipleEngines&lt;/tt&gt;) fail with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Caused by: java.lang.ClassNotFoundException: org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[ERROR] 	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
[ERROR] 	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
[ERROR] 	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:522)
[ERROR] 	at org.apache.maven.surefire.api.util.ReflectionUtils.loadClass(ReflectionUtils.java:215)
[ERROR] 	... 6 more
[ERROR] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s probably something stupid I&apos;m missing - does it make a bell ring for you?&lt;/p&gt;</comment>
                            <comment id="17489047" author="tibor17" created="Tue, 8 Feb 2022 18:14:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mthmulders&quot; class=&quot;user-hover&quot; rel=&quot;mthmulders&quot;&gt;mthmulders&lt;/a&gt;&lt;br/&gt;
See the README.md, you should use &lt;tt&gt;mvn install -P run-its&lt;/tt&gt;.&lt;br/&gt;
There should not be a bell nor magic, it&apos;s a pure CLI command. And if you would like to choose the integration test, add &lt;tt&gt;-Dit.test=JUnitPlatformIT&lt;/tt&gt;.&lt;br/&gt;
Does it work for you?&lt;/p&gt;</comment>
                            <comment id="17489057" author="tibor17" created="Tue, 8 Feb 2022 18:23:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mthmulders&quot; class=&quot;user-hover&quot; rel=&quot;mthmulders&quot;&gt;mthmulders&lt;/a&gt;&lt;br/&gt;
Feel free to provide a patch on GH.&lt;br/&gt;
Lucky to see you there.&lt;br/&gt;
T&lt;/p&gt;</comment>
                            <comment id="17489305" author="mthmulders" created="Wed, 9 Feb 2022 07:42:30 +0000"  >&lt;p&gt;Thanks, running &lt;tt&gt;install&lt;/tt&gt; rather than &lt;tt&gt;verify&lt;/tt&gt; did the trick. Expect a PR soonish&#8482;.&lt;/p&gt;</comment>
                            <comment id="17490888" author="mthmulders" created="Fri, 11 Feb 2022 12:35:44 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/maven-surefire/commit/6ea957ef1f0be5321c5bef0f86e5003289fe8cd0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;6ea957e&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17995390" author="olamy" created="Fri, 4 Jul 2025 07:40:04 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2823&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13039485" name="reproducer.zip" size="19350" author="mthmulders" created="Fri, 28 Jan 2022 18:40:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z274:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>