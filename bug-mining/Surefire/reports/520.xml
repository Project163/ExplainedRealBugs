<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:13:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1287] Improve logging to understand why test run failed and report the right failed category</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1287</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;As part of our automated jenkins builds that run after every checkin, we have been seeing a lot of these failures:&lt;/p&gt;

&lt;p&gt;Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:verify (ParallelStatsEnabledTest) on project phoenix-core: There was a timeout or other error in the fork&lt;/p&gt;

&lt;p&gt;Sample run:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Phoenix-master/1420/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Phoenix-master/1420/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately that bit of error information doesn&apos;t really help. It would be good to know why exactly the fork timed out or failed. What we do know is that some of the tests in the Junit category ParallelStatsDisabledTest failed to complete. However, failsafe incorrectly reports the failed category as the first category that ran. In this case it happened to be ParallelStatsEnabledTest. Also to note is the fact that failsafe kicks off next category run even before all the tests in the current category have finished. I am not sure if that is by design or a bug. &lt;/p&gt;

&lt;p&gt;FYI, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008303">SUREFIRE-1287</key>
            <summary>Improve logging to understand why test run failed and report the right failed category</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="samarthjain">Samarth Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Sep 2016 17:15:09 +0000</created>
                <updated>Fri, 4 Jul 2025 07:26:32 +0000</updated>
                                            <version>2.19.1</version>
                                    <fixVersion>Backlog</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15530863" author="jamestaylor" created="Wed, 28 Sep 2016 21:03:20 +0000"  >&lt;p&gt;Would it be possible for surefire to output the names of the tests that haven&apos;t completed yet when the fork times out, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15537022" author="tibor17" created="Fri, 30 Sep 2016 20:46:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samarthjain&quot; class=&quot;user-hover&quot; rel=&quot;samarthjain&quot;&gt;samarthjain&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samarth.jain%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;samarth.jain@gmail.com&quot;&gt;samarth.jain@gmail.com&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
It could be because of this &lt;tt&gt;Runtime.getRuntime().halt(0);&lt;/tt&gt;, see &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; , because the forked jvm was abruptly failed killed and the main process recognized that the std/ in/out streams were closed which threw &lt;tt&gt;IOException&lt;/tt&gt; and reported this uncertain error in console.&lt;br/&gt;
If you want me to add more error messages observed from main process, I can add it. It would help us better understand what&apos;s going on but not what&apos;s going on in the forked jvm. We developers of Surefire also do not like the situation that we do not have more details about these errors. For that you would have to change failsafe/surefire Version to 2.19.2-SNAPSHOT and refer to our snapshot repo in Maven Central.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=phoenix.git;a=commitdiff;h=ad07077c7271398a17d14dc4cd11b8bee3b7d4d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=phoenix.git;a=commitdiff;h=ad07077c7271398a17d14dc4cd11b8bee3b7d4d9&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15537253" author="jamestaylor" created="Fri, 30 Sep 2016 22:31:12 +0000"  >&lt;p&gt;Thanks for the info, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt;. That&apos;d be great if you could add more logging. Let us know and we can start using a snapshot build to get to the bottom of it.&lt;/p&gt;

&lt;p&gt;FWIW, we had this error occur (There was a timeout or other error in the fork) much more frequently before we added the &lt;tt&gt;Runtime.getRuntime().halt(0)&lt;/tt&gt; call. This is called from a shutdown hook so will be called when the JVM exits. We found that often the HBase mini-cluster server on which we rely was hanging on attempts to let it shutdown gracefully (and we really don&apos;t need any of the shutdown actions to be performed by HBase when we&apos;re running our tests).&lt;/p&gt;

&lt;p&gt;A couple of brainstorming ideas:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Our assumption is that this error is caused by a test that&apos;s hanging. Would it be possible for surefire to track tests that haven&apos;t completed yet and before exiting the forked JVM, print out a message about which tests haven&apos;t completed yet?&lt;/li&gt;
	&lt;li&gt;If that&apos;s not possible, then how about a new method in RunListener that&apos;s called before the forked JVM is exited? Then we could track which tests haven&apos;t completed yet ourselves in our own RunListener. I suppose we could do the same if we keep some kind of static state in our RunListener, but that gets kind of ugly.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We&apos;re actually having to resort to a python script that looks at the output logging to infer which tests haven&apos;t completed - kind of a brittle solution, though.&lt;/p&gt;</comment>
                            <comment id="15537314" author="tibor17" created="Fri, 30 Sep 2016 22:51:13 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;Our assumption is that this error is caused by a test that&apos;s hanging.&lt;br/&gt;
In normal circumstances, unless configured so in pom.xml, the plugin does not timeout the tests. Then it can be only Jenkins. Why then so unusual timeout 53 min? Can you check Jenkins job config for timeouts?&lt;/p&gt;</comment>
                            <comment id="15537319" author="jamestaylor" created="Fri, 30 Sep 2016 22:52:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mujtabachohan&quot; class=&quot;user-hover&quot; rel=&quot;mujtabachohan&quot;&gt;mujtabachohan&lt;/a&gt; - do you know?&lt;/p&gt;</comment>
                            <comment id="15537343" author="mujtabachohan" created="Fri, 30 Sep 2016 23:00:52 +0000"  >&lt;p&gt;Jenkins timeout is set to 200 min. (i.e. abort the build if it&apos;s stuck)&lt;/p&gt;</comment>
                            <comment id="15537350" author="jamestaylor" created="Fri, 30 Sep 2016 23:03:38 +0000"  >&lt;p&gt;Perhaps one of the JVMs is crashing then?&lt;/p&gt;</comment>
                            <comment id="15537366" author="tibor17" created="Fri, 30 Sep 2016 23:08:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Would it be possible for surefire to track tests that haven&apos;t completed yet&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes and no. It depends on what we understand by hanging. If somebody has corrupted std/out communication channel between plugin process and forked process or your application hangs, I cannot do anything about it. There is ping sent to forked jvm every 10 seconds and this is used in opposite manner when Maven process is killed then forked jvms are killed by themselves.&lt;/p&gt;</comment>
                            <comment id="15537376" author="tibor17" created="Fri, 30 Sep 2016 23:14:01 +0000"  >&lt;p&gt;thats still better than hanging. It means I can add more logs but as I said before I would not see inside of forked jvm. This may still not answer the question who kills jvm.&lt;br/&gt;
halt(0) is even worse than System.exit(). I would be able to detect if Surefire or application executed System.exit() but Runtime.halt() does not give me a chance.&lt;/p&gt;</comment>
                            <comment id="15537402" author="tibor17" created="Fri, 30 Sep 2016 23:28:22 +0000"  >&lt;p&gt;I think we will get exception in log &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CommandLineException( &lt;span class=&quot;code-quote&quot;&gt;&quot;Error inside systemOut parser&quot;&lt;/span&gt;, outputPumper.getException() );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but we are not tolerant to this. Maybe adding config parameter to be more tolerant.&lt;/p&gt;</comment>
                            <comment id="15537586" author="tibor17" created="Sat, 1 Oct 2016 01:06:19 +0000"  >&lt;p&gt;Can you fix it so that HBase wold be started in pre-integration-tests phase via a script?&lt;br/&gt;
What about kill it after the tests.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = ManagementFactory.getRuntimeMXBean().getName();
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; indexOfAt = name.indexOf( &lt;span class=&quot;code-quote&quot;&gt;&apos;@&apos;&lt;/span&gt; );
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( indexOfAt &amp;gt; 0 )
                {
                    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pid = name.substring( 0, indexOfAt );
                    getLog().warn( &lt;span class=&quot;code-quote&quot;&gt;&quot;Going to kill process with PID &quot;&lt;/span&gt; + pid );

                    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; args = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;os.name&quot;&lt;/span&gt; ).startsWith( &lt;span class=&quot;code-quote&quot;&gt;&quot;Windows&quot;&lt;/span&gt; ) )
                    {
                        args.add( &lt;span class=&quot;code-quote&quot;&gt;&quot;taskkill&quot;&lt;/span&gt; );
                        args.add( &lt;span class=&quot;code-quote&quot;&gt;&quot;/PID&quot;&lt;/span&gt; );
                    }
                    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                    {
                        args.add( &lt;span class=&quot;code-quote&quot;&gt;&quot;kill&quot;&lt;/span&gt; );
                        args.add( &lt;span class=&quot;code-quote&quot;&gt;&quot;-INT&quot;&lt;/span&gt; );
                    }
                    args.add( pid );

                    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
                    {
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProcessBuilder( args ).start();
                    }
                    &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( IOException e )
                    {
                        getLog().error( &lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to spawn process. Killing with &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit.&quot;&lt;/span&gt;, e );
                    }
                }
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                {
                    getLog().warn( &lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to determine my PID... Using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit&quot;&lt;/span&gt; );
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15540184" author="tibor17" created="Sun, 2 Oct 2016 10:54:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samarthjain&quot; class=&quot;user-hover&quot; rel=&quot;samarthjain&quot;&gt;samarthjain&lt;/a&gt;&lt;br/&gt;
Please see my comment with the code above.&lt;br/&gt;
I guess you should start HBase before integration tests and kill it after tests but not within nor by the tests. WDYT?&lt;/p&gt;</comment>
                            <comment id="15540785" author="jamestaylor" created="Sun, 2 Oct 2016 18:39:37 +0000"  >&lt;p&gt;We start an HBase mini cluster per test category in a BeforeClass method, so the same cluster is used for many test classes. We need to be able to modify the HBase server-side configurations on the cluster for different categories of tests to mimic different options provided by Phoenix, thus we cannot just spin up a single cluster. We also have a category of tests that simulate various failure scenarios (i.e. region server crashes), so each of these needs to spin up and tear down it&apos;s own mini cluster.&lt;/p&gt;

&lt;p&gt;The parallel framework of surefire has been very helpful to us because it&apos;s enabled us to run test methods in parallel, cutting our test time in half. To do this, we need to create unique HBase tables for each test so that they don&apos;t conflict (since they&apos;re running on the same cluster). With too many tables, though, HBase starts to get over taxed and we must restart the mini cluster after some time. We monitor that through our own test runner which invokes the tear down after a threshold is reached. Having separate JVMs on top of the parallelization surefire enables helps alleviate this. FWIW, we tried just spawning a single JVM per test category, but unless we only run a few tests, the framework would just seem to inexplicably hang.&lt;/p&gt;

&lt;p&gt;More logging would be very helpful. I&apos;m pretty sure the JVM is crashing, but it&apos;s difficult for us to say which test was running at the time. Maybe it&apos;d be possible for the forked JVM to communicate with the boot JVM after each test class is complete? Or maybe the pings that you do could (or already do?) communicate this back to the main JVM.&lt;/p&gt;

&lt;p&gt;Thanks for your help, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt;. Really appreciate it!&lt;/p&gt;</comment>
                            <comment id="15540819" author="tibor17" created="Sun, 2 Oct 2016 19:00:21 +0000"  >&lt;p&gt;We needed a feature in surefire which would log internal exceptions in &lt;tt&gt;/target/surefire-reports&lt;/tt&gt;.&lt;br/&gt;
In case of OOM suspicion you can use configuration parameter &lt;br/&gt;
&lt;tt&gt;argLine=-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=./target/&lt;/tt&gt;. &lt;br/&gt;
I hope the JVM would correctly understand &lt;tt&gt;./&lt;/tt&gt; as currently running Maven module basedir.&lt;br/&gt;
Then all you need to do is to go to Jenkins job and open &lt;tt&gt;Workspace&lt;/tt&gt; and download target folder as a zip file.&lt;/p&gt;</comment>
                            <comment id="15540830" author="tibor17" created="Sun, 2 Oct 2016 19:08:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
If you used old config parameter &lt;tt&gt;forkMode=pertest&lt;/tt&gt;, you would have isolated JVMs per test class and HBase as well and maybe no issues with database. Not sure if HBase can have datasource per test. If it can then the solution would be simple, just use &lt;tt&gt;surefire.forkNumber&lt;/tt&gt; in datasource definition and &lt;tt&gt;forkCount=8&lt;/tt&gt; and &lt;tt&gt;reuseForks=false&lt;/tt&gt;, see the documentation &lt;a href=&quot;http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html&lt;/a&gt;&lt;br/&gt;
It seems to me that the &lt;tt&gt;surefire.forkNumber&lt;/tt&gt; can be reused because it is thread index in thread-pool.&lt;/p&gt;</comment>
                            <comment id="15540857" author="tibor17" created="Sun, 2 Oct 2016 19:27:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
I wanted to add to configuring &lt;tt&gt;forkCount&lt;/tt&gt; that each test class may run in a separate JMV and therefore no need to use parameter &lt;tt&gt;parallel&lt;/tt&gt; and thread-counts. If you have a problem with HBase which still runs anyway after your class has completed, do not worry because the forked JVM will kill itself after 30 seconds. In Version 2.19.2 this timeout can be configured as well. Seee &lt;a href=&quot;http://maven.apache.org/surefire/maven-surefire-plugin/examples/shutdown.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/surefire/maven-surefire-plugin/examples/shutdown.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15540884" author="jamestaylor" created="Sun, 2 Oct 2016 19:48:07 +0000"  >&lt;p&gt;Thanks - I&apos;ve added these arguments to our pom. Will let you know if we get some useful info.&lt;/p&gt;</comment>
                            <comment id="15540888" author="jamestaylor" created="Sun, 2 Oct 2016 19:51:11 +0000"  >&lt;p&gt;It wouldn&apos;t be feasible to spin up a separate HBase cluster per test class as the startup time for HBase is too high. We leverage the &lt;tt&gt;reuseForks=true&lt;/tt&gt; in our pom to prevent having to spin new clusters up and it works very well.&lt;/p&gt;</comment>
                            <comment id="15540892" author="jamestaylor" created="Sun, 2 Oct 2016 19:52:40 +0000"  >&lt;p&gt;Is this the &lt;tt&gt;forkedProcessTimeoutInSeconds&lt;/tt&gt; option? That would be useful, especially if surefire could log the test(s) that are hung.&lt;/p&gt;</comment>
                            <comment id="15540912" author="tibor17" created="Sun, 2 Oct 2016 20:06:48 +0000"  >&lt;p&gt;yes, &lt;tt&gt;forkedProcessTimeoutInSeconds&lt;/tt&gt; but the point is that this option becomes active after the tests in particular JVM finished but there is still some kind of non-daemon Thread for which Java shutdown-hook Threads could not be executed even if Surefire called &lt;tt&gt;System.exit&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15543696" author="tibor17" created="Mon, 3 Oct 2016 23:08:11 +0000"  >&lt;p&gt;commit &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=e0ce6cb021d42d021704f77a689e3b663aebf084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=e0ce6cb021d42d021704f77a689e3b663aebf084&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15543702" author="tibor17" created="Mon, 3 Oct 2016 23:10:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
I tested my changes but I don&apos;t think it would help us.&lt;br/&gt;
Try to log OOM as we talked about previously. What would help me is some stack trace from forked JVM.&lt;/p&gt;</comment>
                            <comment id="15543983" author="hudson" created="Tue, 4 Oct 2016 01:16:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build maven-surefire #1633 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1633/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1633/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1287&quot; title=&quot;Improve logging to understand why test run failed and report the right failed category&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1287&quot;&gt;SUREFIRE-1287&lt;/a&gt; Improve logging to understand why test run failed and (tibor17: rev e0ce6cb021d42d021704f77a689e3b663aebf084)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/ForkStarter.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireBooterForkException.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/output/ForkClient.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15573102" author="hudson" created="Thu, 13 Oct 2016 20:32:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build maven-surefire-junit5 #8 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire-junit5/8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire-junit5/8/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1287&quot; title=&quot;Improve logging to understand why test run failed and report the right failed category&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1287&quot;&gt;SUREFIRE-1287&lt;/a&gt; Improve logging to understand why test run failed and (tibor17: rev e0ce6cb021d42d021704f77a689e3b663aebf084)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireBooterForkException.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/output/ForkClient.java&lt;/li&gt;
	&lt;li&gt;(edit) maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/booterclient/ForkStarter.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15617843" author="tibor17" created="Sat, 29 Oct 2016 09:51:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
Have you found failed tests using &lt;tt&gt;argLine=-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=./target/&lt;/tt&gt; ?&lt;br/&gt;
May be you will find file &lt;tt&gt;hs_err_pid***.log&lt;/tt&gt; in project dir or child module.&lt;/p&gt;</comment>
                            <comment id="15622467" author="tibor17" created="Mon, 31 Oct 2016 15:28:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;giacomotaylor&lt;/a&gt;&lt;br/&gt;
Have you found failed tests using argLine=-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=./target/ ?&lt;br/&gt;
May be you will find file hs_err_pid***.log in project dir or child module.&lt;/p&gt;</comment>
                            <comment id="15629539" author="jamestaylor" created="Wed, 2 Nov 2016 16:44:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mujtabachohan&quot; class=&quot;user-hover&quot; rel=&quot;mujtabachohan&quot;&gt;mujtabachohan&lt;/a&gt; - can you check if these log files are present for our Jenkins builds when they hang? I think the 4.x branch builds are hanging frequently, so you may want to check those.&lt;/p&gt;</comment>
                            <comment id="15717450" author="tibor17" created="Sat, 3 Dec 2016 05:26:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
We improved logging when forked Surefire JVM crashed. The crashed tests are listed in console. This was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1295&quot; title=&quot;JVM crashes in forks do not log the name of the failing test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1295&quot;&gt;&lt;del&gt;SUREFIRE-1295&lt;/del&gt;&lt;/a&gt;. Can you please use Version &lt;tt&gt;2.19.2-SNAPSHOT&lt;/tt&gt; and let me know it this helps you?&lt;/p&gt;</comment>
                            <comment id="15961823" author="tibor17" created="Sat, 8 Apr 2017 12:43:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samarth.jain%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;samarth.jain@gmail.com&quot;&gt;samarth.jain@gmail.com&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samarthjain&quot; class=&quot;user-hover&quot; rel=&quot;samarthjain&quot;&gt;samarthjain&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;jamestaylor&lt;/a&gt;&lt;br/&gt;
Pls try to use Surefire and Failsafe Version 2.20. You have to specify pluginRepository in your POM&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/repositories/maven-1330/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/maven-1330/&lt;/a&gt;&lt;br/&gt;
We will remove this repo after three days.&lt;br/&gt;
We improved stability of the plugins.&lt;/p&gt;</comment>
                            <comment id="17421062" author="rongr" created="Mon, 27 Sep 2021 21:55:17 +0000"  >&lt;p&gt;sorry to &quot;reopen&quot; this thread. I am using 3.0.0-M5 and the issue still occurs.&#160;&lt;br/&gt;
I am getting this error msg from log using surefire with testng&lt;br/&gt;
```&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time:  01:50 h&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: 2021-09-24T11:13:32Z&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
Error:  Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M5:test (default-test) on project my-project There was a timeout in the fork -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
```&lt;br/&gt;
but in the surefire report JVM dump I can tell exactly which test class were running before the fork timeout. can we actually print that info in the error message in &lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/SurefireHelper.java#L287?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/SurefireHelper.java#L287?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17808228" author="apache9" created="Thu, 18 Jan 2024 14:16:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibordigana&quot; class=&quot;user-hover&quot; rel=&quot;tibordigana&quot;&gt;tibordigana&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is an example&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-hbase.apache.org/job/HBase-PreCommit-GitHub-PR/job/PR-5634/1/PR_20JDK8_20Hadoop3_20Check_20Report/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-hbase.apache.org/job/HBase-PreCommit-GitHub-PR/job/PR-5634/1/PR_20JDK8_20Hadoop3_20Check_20Report/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The build fails with &apos;There was a timeout in the fork&apos;, but I can not find any broken tests.&lt;/p&gt;

&lt;p&gt;We use surefire version 3.1.0.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="17994687" author="olamy" created="Fri, 4 Jul 2025 07:26:32 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2399&lt;/a&gt;. Please visit the GitHub issue to view further activity, add comments, or subscribe to receive notifications.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i347cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>