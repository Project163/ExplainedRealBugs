<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:12:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-817] JUnit 4.7 test output is always buffered, lost if forked process exits abnormally</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-817</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The junit47 provider and above support multi-threaded test execution, and thus interpose a buffering layer (ConcurrentReporterManager) in between the test output and the actual stderr/stdout. This is ostensibly to allow the multiple threads&apos; stderr and stdout to be demuxed nicely when the suite completes. But, if the JVM exits abnormally (eg due to a segfault or a System.exit() call), no output is generated. This is problematic since it&apos;s very hard to debug the test failure!&lt;/p&gt;

&lt;p&gt;In my opinion, the buffering layer should only be interposed &lt;em&gt;when parallel running is enabled&lt;/em&gt;. For the non-parallel case, there&apos;s no need to buffer the output. A simple test case is to write a JUnit test which prints a line of output to stderr and then calls System.exit(1). The output doesn&apos;t show up anywhere.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12809439">SUREFIRE-817</key>
            <summary>JUnit 4.7 test output is always buffered, lost if forked process exits abnormally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jan 2012 13:20:55 +0000</created>
                <updated>Fri, 4 Jul 2025 07:17:34 +0000</updated>
                            <resolved>Thu, 16 Oct 2014 16:50:34 +0000</resolved>
                                    <version>2.11</version>
                                                    <component>Junit 4.7+ (parallel) support</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14455347" author="famod" created="Tue, 26 Jun 2012 16:28:43 +0000"  >&lt;p&gt;Runtime.getRuntime().addShutdownHook(...) might worth a look.&lt;/p&gt;

&lt;p&gt;I also strongly support that:&lt;br/&gt;
&quot;the buffering layer should only be interposed when parallel running is enabled&quot;&lt;/p&gt;</comment>
                            <comment id="14455227" author="tlipcon" created="Tue, 26 Jun 2012 16:34:42 +0000"  >&lt;p&gt;Another option is to have the buffering (at least for stderr) be done only at a line granularity, and then flushed to the calling process with prefixes indicating which test each line corresponds to.&lt;/p&gt;</comment>
                            <comment id="14455324" author="pwojnowski" created="Fri, 13 Jul 2012 04:50:38 +0000"  >&lt;p&gt;I&apos;m also for enabling buffering layer only when running in parallel.&lt;/p&gt;</comment>
                            <comment id="14455599" author="tlipcon" created="Fri, 5 Oct 2012 17:18:21 +0000"  >&lt;p&gt;I spent some time looking into this, and it appears that it was fixed in Surefire 2.12.3, probably by one of the following commits:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;commit 30f9991b6645ebb1520fdeb70addffe5c22a3938
Author: Kristian Rosenvold &amp;lt;krosenvold@apache.org&amp;gt;
Date:   Mon Aug 20 17:02:21 2012 +0000

    o Removed last remains of CDR
    
    git-svn-id: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/maven/surefire/trunk@1375109 13f79535-47bb-0310-9956-ffa450edef68
&lt;/span&gt;
commit f8cb5724b82cd5faec37f1d37f3fdc8dc2bb6643
Author: Kristian Rosenvold &amp;lt;krosenvold@apache.org&amp;gt;
Date:   Thu Aug 16 16:38:34 2012 +0000

    o Refactored all the duplicated shared state out of the reporters
    
    git-svn-id: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/maven/surefire/trunk@1373909 13f79535-47bb-0310-9956-ffa450edef68
&lt;/span&gt;
commit 22643d3b4c6ac6c2c3f0d48586924b3d8b3194f3
Author: Kristian Rosenvold &amp;lt;krosenvold@apache.org&amp;gt;
Date:   Tue Aug 14 14:29:32 2012 +0000

    o Worked on simplifying the reporting stuff
    
    git-svn-id: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/maven/surefire/trunk@1372903 13f79535-47bb-0310-9956-ffa450edef68&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Given that, I&apos;m inclined to resolve this JIRA. Agreed?&lt;/p&gt;</comment>
                            <comment id="14456358" author="tibor17" created="Thu, 9 Oct 2014 15:30:53 +0000"  >&lt;p&gt;@Todd Lipcon&lt;br/&gt;
Can you tell us if surefire 2.12.3 works fine for you now?&lt;br/&gt;
Is the latest version 2.17 reports the latest logs at system exit?&lt;/p&gt;</comment>
                            <comment id="14456123" author="tibor17" created="Sun, 12 Oct 2014 12:40:39 +0000"  >&lt;p&gt;I will check the behavior with buggy 2.11, and fixed 2.12.3, 2.18-SNAPSHOT as well.&lt;br/&gt;
I will close this issue if not reproducible.&lt;/p&gt;</comment>
                            <comment id="14456321" author="tibor17" created="Thu, 16 Oct 2014 16:50:35 +0000"  >&lt;p&gt;Fixed already in 2.12.3 and tested up to 2.18-SNAPSHOT.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-817&quot; title=&quot;JUnit 4.7 test output is always buffered, lost if forked process exits abnormally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-817&quot;&gt;&lt;del&gt;SUREFIRE-817&lt;/del&gt;&lt;/a&gt; JUnit 4.7+ Provider and behavior of System Exit proved by ITs&lt;/p&gt;

&lt;p&gt;Commit: 40b4b48a323c46e1b2ace3d5acb4add183b12d02&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/pull/59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/pull/59&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Surefire817SystemExitIT.java&lt;br/&gt;
Test.java&lt;br/&gt;
pom.xml&lt;/p&gt;</comment>
                            <comment id="17994214" author="olamy" created="Fri, 4 Jul 2025 07:17:34 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1774&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>