<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:06:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-162] Service providers are not available during unit testing when defined by dependencies</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-162</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;If a dependency defines some service provider by e.g. a file like  META-INF/services/java.nio.charset.spi.CharsetProvider these providers are not available during unit testing. For this example an UnsupportedEncodingException would be thrown when using a charset defined in the file during unit testing. For Reference see: &amp;lt;&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/guide/jar/jar.html#Service%20Provider&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/guide/jar/jar.html#Service%20Provider&lt;/a&gt;&amp;gt; or &amp;lt;&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/spi/CharsetProvider.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/spi/CharsetProvider.html&lt;/a&gt;&amp;gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12809880">SUREFIRE-162</key>
            <summary>Service providers are not available during unit testing when defined by dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="schulte77">Christian Schulte</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Mar 2006 08:38:35 +0000</created>
                <updated>Fri, 4 Jul 2025 07:13:34 +0000</updated>
                            <resolved>Fri, 23 Nov 2007 17:10:32 +0000</resolved>
                                                                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14453262" author="mdwheaton@gmail.com" created="Thu, 13 Apr 2006 17:18:56 +0000"  >&lt;p&gt;I&apos;ve opened almost the identical issue.&lt;br/&gt;
&lt;a href=&quot;http://jira.codehaus.org/browse/MSUREFIRE-91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MSUREFIRE-91&lt;/a&gt;&lt;br/&gt;
This one is just about strike 3 for me and Maven2. ANT will be back in full swing if seemingly simple things like this cannot be fixed.&lt;/p&gt;</comment>
                            <comment id="14453325" author="brettporter" created="Mon, 1 May 2006 09:15:18 +0000"  >&lt;p&gt;You have to use forkMode = once or always. The default, running inside the current JVM, cannot work as charset providers are looked up from the system classloader (despite the fact the javadocs say they come from the context classloader, that simply isn&apos;t true - the ctx CL is correctly set and never used for this purpose).&lt;/p&gt;

&lt;p&gt;Will document.&lt;/p&gt;</comment>
                            <comment id="14453516" author="cressie176" created="Tue, 26 Sep 2006 05:17:49 +0000"  >&lt;p&gt;Setting forkMode doesn&apos;t make any difference. According to the Maven 2 doco the default is false anyway.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://maven.apache.org/plugins/maven-surefire-plugin/howto.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/plugins/maven-surefire-plugin/howto.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14453546" author="cressie176" created="Tue, 26 Sep 2006 05:21:10 +0000"  >&lt;p&gt;typo - should have said&lt;/p&gt;

&lt;p&gt;the default is &quot;once&quot; anyway.&lt;/p&gt;</comment>
                            <comment id="14453656" author="brettporter" created="Tue, 26 Sep 2006 05:42:07 +0000"  >&lt;p&gt;reopening per Stephen&apos;s comment. Stephen - please provide a test case, as I was unable to reproduce otherwise (it worked in mine when forking).&lt;/p&gt;</comment>
                            <comment id="14453629" author="cressie176" created="Tue, 26 Sep 2006 11:39:16 +0000"  >&lt;p&gt;I&apos;ve attached a junit test case, my pom and jcharset.jar (the jar containing the GSM charsets). Running the test case in eclipse works fine, but from mvn -e test I get the following...&lt;/p&gt;

&lt;p&gt;Running uk.co.henriettasms.MSUREFIRE77TestCase&lt;br/&gt;
java.io.UnsupportedEncodingException: GSM_0338&lt;br/&gt;
        at sun.io.Converters.getConverterClass(Unknown Source)&lt;br/&gt;
        at sun.io.Converters.newConverter(Unknown Source)&lt;br/&gt;
        at sun.io.ByteToCharConverter.getConverter(Unknown Source)&lt;br/&gt;
        at java.lang.StringCoding.decode(Unknown Source)&lt;br/&gt;
        at java.lang.String.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
        at java.lang.String.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
        at uk.co.henriettasms.MSUREFIRE77TestCase.testThatICanUseCharsets(MSUREFIRE77TestCase.java:12)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:164)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:228)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:223)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:210)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:135&lt;br/&gt;
)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:122)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.run(Surefire.java:129)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:225)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:747)&lt;/p&gt;

&lt;p&gt;Workaround I&apos;m using at the moment is to add jcharset to JRE/lib/ext. It&apos;s my first attempt using maven so apologies if I&apos;ve missed something obvious.&lt;/p&gt;</comment>
                            <comment id="14453642" author="brettporter" created="Thu, 28 Sep 2006 20:09:39 +0000"  >&lt;p&gt;ok, reproducible. Here&apos;s a tarball that is easier to test with as its self contained&lt;/p&gt;</comment>
                            <comment id="14454024" author="dfabulich" created="Fri, 23 Nov 2007 17:10:32 +0000"  >&lt;p&gt;This test passes just fine with useSystemClassLoader=true; integration test checked in 597756.  It would be nice if you didn&apos;t have to pass that parameter in (or if useSystemClassLoader were the default) but that would create a lot of other problems (particularly with plexus version conflicts).  That&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-334&quot; title=&quot;useSystemClassLoader introduces dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-334&quot;&gt;&lt;del&gt;SUREFIRE-334&lt;/del&gt;&lt;/a&gt; and it probably won&apos;t get fixed any time soon.&lt;/p&gt;

&lt;p&gt;Beware of &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-389&quot; title=&quot;IncompatibleClassChangeError when useSystemClassLoader=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-389&quot;&gt;&lt;del&gt;SUREFIRE-389&lt;/del&gt;&lt;/a&gt; which I just fixed; without that useSystemClassLoader=true may cause an IncompatibleClassChangeError.&lt;/p&gt;</comment>
                            <comment id="17993999" author="olamy" created="Fri, 4 Jul 2025 07:13:34 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/998&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#998&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12809458">SUREFIRE-225</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12810502">SUREFIRE-230</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719955" name="MSUREFIRE-77.tar.bz2" size="22583" author="brett" created="Thu, 28 Sep 2006 20:09:39 +0000"/>
                            <attachment id="12719983" name="MSUREFIRE77TestCase.java" size="384" author="cressie176" created="Tue, 26 Sep 2006 11:39:16 +0000"/>
                            <attachment id="12719750" name="jcharset-1.2.1.jar" size="22719" author="cressie176" created="Tue, 26 Sep 2006 11:39:16 +0000"/>
                            <attachment id="12719982" name="pom.xml" size="6891" author="cressie176" created="Tue, 26 Sep 2006 11:39:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2befr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>