diff --git a/surefire-api/src/main/java/org/apache/maven/surefire/report/ReporterManager.java b/surefire-api/src/main/java/org/apache/maven/surefire/report/ReporterManager.java
index b72d7cd2f..8d9b57fdd 100644
--- a/surefire-api/src/main/java/org/apache/maven/surefire/report/ReporterManager.java
+++ b/surefire-api/src/main/java/org/apache/maven/surefire/report/ReporterManager.java
@@ -17,6 +17,7 @@
  */
 
 import org.apache.maven.surefire.util.TeeStream;
+import org.codehaus.plexus.util.IOUtil;
 
 import java.io.ByteArrayOutputStream;
 import java.io.PrintStream;
@@ -282,9 +283,10 @@ public void testFailed( ReportEntry reportEntry )
 
     private void testFailed( ReportEntry reportEntry, String typeError )
     {
-        String stdOutLog = stdOut.toString();
+        // Note that the fields can be null if the test hasn't even started yet (an early error)
+        String stdOutLog = stdOut != null ? stdOut.toString() : "";
 
-        String stdErrLog = stdErr.toString();
+        String stdErrLog = stdErr != null ? stdErr.toString() : "";
 
         resetStreams();
 
@@ -305,11 +307,18 @@ private void testFailed( ReportEntry reportEntry, String typeError )
 
     private void resetStreams()
     {
-        System.setOut( oldOut );
-        System.setErr( oldErr );
+        // Note that the fields can be null if the test hasn't even started yet (an early error)
+        if ( oldOut != null )
+        {
+            System.setOut( oldOut );
+        }
+        if ( oldErr != null )
+        {
+            System.setErr( oldErr );
+        }
 
-        newOut.close();
-        newErr.close();
+        IOUtil.close( newOut );
+        IOUtil.close( newErr );
     }
 
     public void reset()
diff --git a/surefire-api/src/main/java/org/apache/maven/surefire/report/XMLReporter.java b/surefire-api/src/main/java/org/apache/maven/surefire/report/XMLReporter.java
index 3590e7dc7..0b3ca5821 100644
--- a/surefire-api/src/main/java/org/apache/maven/surefire/report/XMLReporter.java
+++ b/surefire-api/src/main/java/org/apache/maven/surefire/report/XMLReporter.java
@@ -183,6 +183,12 @@ public void testFailed( ReportEntry report, String stdOut, String stdErr )
 
     private void writeTestProblems( ReportEntry report, String stdOut, String stdErr, String name )
     {
+        if ( testCase == null )
+        {
+            // This can occur if the error happens before the test starts
+            testStarting( report );
+        }
+
         Xpp3Dom element = createElement( testCase, name );
 
         String stackTrace = getStackTrace( report );
