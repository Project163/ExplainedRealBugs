diff --git a/maven-failsafe-plugin/pom.xml b/maven-failsafe-plugin/pom.xml
index 0dadfdf11..824da8b2e 100644
--- a/maven-failsafe-plugin/pom.xml
+++ b/maven-failsafe-plugin/pom.xml
@@ -151,6 +151,13 @@
           </execution>
         </executions>
       </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-site-plugin</artifactId>
+        <configuration>
+          <siteDirectory>${project.build.directory}/source-site</siteDirectory>
+        </configuration>
+      </plugin>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-shade-plugin</artifactId>
diff --git a/maven-surefire-plugin/pom.xml b/maven-surefire-plugin/pom.xml
index 902256000..54d99e619 100644
--- a/maven-surefire-plugin/pom.xml
+++ b/maven-surefire-plugin/pom.xml
@@ -101,6 +101,50 @@
           </dependency>
         </dependencies>
       </plugin>
+      <plugin>
+        <artifactId>maven-site-plugin</artifactId>
+        <executions>
+          <execution>
+            <id>prepare-site-source</id>
+            <phase>process-resources</phase>
+            <goals>
+              <goal>effective-site</goal>
+            </goals>
+            <configuration>
+              <siteDirectory>${basedir}/src/site</siteDirectory>
+              <output>${project.build.directory}/source-site/site.xml</output>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+      <!-- BEGIN HACK: use replacer plugin to remove the second xml processing instruction (MSITE-670).  -->
+      <!-- can be removed once maven-site-plugin 3.3 is released. -->
+      <plugin>
+        <groupId>com.google.code.maven-replacer-plugin</groupId>
+        <artifactId>replacer</artifactId>
+        <version>1.5.2</version>
+        <executions>
+           <execution>
+               <phase>prepare-package</phase>
+               <goals>
+                   <goal>replace</goal>
+               </goals>                   
+           </execution>
+        </executions>
+        <configuration>
+           <regexFlags>
+             <regexFlag>DOTALL</regexFlag>
+           </regexFlags>
+           <file>${project.build.directory}/source-site/site.xml</file>
+           <replacements>
+               <replacement>
+                   <token>(.+)&lt;\?xml [^&gt;]+&gt;(.*)</token>
+                   <value>$1$2</value>
+               </replacement>         
+           </replacements>
+        </configuration>
+      </plugin>
+      <!-- END HACK ->
       <plugin>
         <artifactId>maven-assembly-plugin</artifactId>
         <executions>
diff --git a/maven-surefire-plugin/src/assembly/site-source.xml b/maven-surefire-plugin/src/assembly/site-source.xml
index 0c563ebd7..ff550c5af 100644
--- a/maven-surefire-plugin/src/assembly/site-source.xml
+++ b/maven-surefire-plugin/src/assembly/site-source.xml
@@ -28,6 +28,15 @@
     <fileSet>
       <useDefaultExcludes>true</useDefaultExcludes>
       <directory>${basedir}/src/site</directory>
+      <excludes>
+        <exclude>site.xml</exclude>
+      </excludes>
+      <filtered>false</filtered>
+      <outputDirectory>/</outputDirectory>
+    </fileSet>
+    <fileSet>
+      <useDefaultExcludes>true</useDefaultExcludes>
+      <directory>${project.build.directory}/source-site</directory>
       <filtered>false</filtered>
       <outputDirectory>/</outputDirectory>
     </fileSet>
diff --git a/pom.xml b/pom.xml
index 59fd5bccf..677b367e9 100644
--- a/pom.xml
+++ b/pom.xml
@@ -316,6 +316,13 @@
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-site-plugin</artifactId>
           <version>3.2</version>
+          <dependencies>
+            <dependency>
+              <groupId>org.apache.maven.doxia</groupId>
+              <artifactId>doxia-module-markdown</artifactId>
+              <version>1.3</version>
+            </dependency>
+          </dependencies>
         </plugin>
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
@@ -425,11 +432,6 @@
                   <artifactId>surefire-shadefire</artifactId>
                   <version>${project.version}</version>
                 </dependency -->
-                <dependency>
-                  <groupId>org.apache.maven.doxia</groupId>
-                  <artifactId>doxia-module-markdown</artifactId>
-                  <version>1.3</version>
-                </dependency>
               </dependencies>
             </plugin>
           </plugins>
