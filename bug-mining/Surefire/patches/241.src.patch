diff --git a/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerProviderConfigurationTest.java b/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerProviderConfigurationTest.java
index ee3bf213b..4292759b2 100644
--- a/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerProviderConfigurationTest.java
+++ b/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerProviderConfigurationTest.java
@@ -26,22 +26,22 @@
 import java.util.Arrays;
 import java.util.List;
 import java.util.Properties;
-
-import junit.framework.Assert;
-import junit.framework.TestCase;
-
 import org.apache.maven.surefire.booter.BooterDeserializer;
 import org.apache.maven.surefire.booter.ClassLoaderConfiguration;
 import org.apache.maven.surefire.booter.ClasspathConfiguration;
 import org.apache.maven.surefire.booter.ProviderConfiguration;
 import org.apache.maven.surefire.booter.StartupConfiguration;
 import org.apache.maven.surefire.booter.SystemPropertyManager;
+import org.apache.maven.surefire.booter.TypeEncodedValue;
 import org.apache.maven.surefire.report.ReporterConfiguration;
 import org.apache.maven.surefire.testset.DirectoryScannerParameters;
 import org.apache.maven.surefire.testset.TestArtifactInfo;
 import org.apache.maven.surefire.testset.TestRequest;
 import org.apache.maven.surefire.util.RunOrder;
 
+import junit.framework.Assert;
+import junit.framework.TestCase;
+
 /**
  * Performs roundtrip testing of serialization/deserialization of the ProviderConfiguration
  *
@@ -51,7 +51,7 @@ public class BooterDeserializerProviderConfigurationTest
     extends TestCase
 {
 
-    private final String aTest = "aTest";
+    public static final TypeEncodedValue aTestTyped = new TypeEncodedValue( String.class.getName(), "aTest" );
 
     private final String aUserRequestedTest = "aUserRequestedTest";
 
@@ -128,7 +128,7 @@ public void testTestForFork()
         throws IOException
     {
         final ProviderConfiguration reloaded = getReloadedProviderConfiguration();
-        Assert.assertEquals( aTest, reloaded.getTestForForkString() );
+        Assert.assertEquals( aTestTyped, reloaded.getTestForFork() );
 
     }
 
@@ -170,6 +170,7 @@ private ProviderConfiguration saveAndReload( ProviderConfiguration booterConfigu
         final ForkConfiguration forkConfiguration = ForkConfigurationTest.getForkConfiguration();
         Properties props = new Properties();
         BooterSerializer booterSerializer = new BooterSerializer( forkConfiguration, props );
+        String aTest = "aTest";
         booterSerializer.serialize( booterConfiguration, testProviderConfiguration, aTest, "never" );
         final File propsTest =
             SystemPropertyManager.writePropertiesFile( props, forkConfiguration.getTempDirectory(), "propsTest", true );
@@ -181,15 +182,14 @@ private ProviderConfiguration getTestProviderConfiguration( DirectoryScannerPara
     {
 
         File cwd = new File( "." );
-        ReporterConfiguration reporterConfiguration =
-            new ReporterConfiguration( cwd, Boolean.TRUE );
+        ReporterConfiguration reporterConfiguration = new ReporterConfiguration( cwd, Boolean.TRUE );
         String aUserRequestedTestMethod = "aUserRequestedTestMethod";
         TestRequest testSuiteDefinition =
             new TestRequest( getSuiteXmlFileStrings(), getTestSourceDirectory(), aUserRequestedTest,
                              aUserRequestedTestMethod );
         return new ProviderConfiguration( directoryScannerParameters, true, reporterConfiguration,
                                           new TestArtifactInfo( "5.0", "ABC" ), testSuiteDefinition, new Properties(),
-                                          aTest );
+                                          aTestTyped );
     }
 
     private StartupConfiguration getTestStartupConfiguration( ClassLoaderConfiguration classLoaderConfiguration )
diff --git a/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerStartupConfigurationTest.java b/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerStartupConfigurationTest.java
index 126456903..6aadb8a46 100644
--- a/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerStartupConfigurationTest.java
+++ b/maven-surefire-common/src/test/java/org/apache/maven/plugin/surefire/booterclient/BooterDeserializerStartupConfigurationTest.java
@@ -50,8 +50,6 @@ public class BooterDeserializerStartupConfigurationTest
 {
     private final ClasspathConfiguration classpathConfiguration = createClasspathConfiguration();
 
-    private final String aTest = "aTest";
-
     public void testProvider()
         throws IOException
     {
@@ -129,6 +127,7 @@ private StartupConfiguration saveAndReload( StartupConfiguration startupConfigur
         final ForkConfiguration forkConfiguration = ForkConfigurationTest.getForkConfiguration();
         Properties props = new Properties();
         BooterSerializer booterSerializer = new BooterSerializer( forkConfiguration, props );
+        String aTest = "aTest";
         booterSerializer.serialize( getProviderConfiguration(), startupConfiguration, aTest, "never" );
         final File propsTest =
             SystemPropertyManager.writePropertiesFile( props, forkConfiguration.getTempDirectory(), "propsTest", true );
@@ -150,7 +149,7 @@ private ProviderConfiguration getProviderConfiguration()
                              aUserRequestedTestMethod );
         return new ProviderConfiguration( directoryScannerParameters, true, reporterConfiguration,
                                           new TestArtifactInfo( "5.0", "ABC" ), testSuiteDefinition, new Properties(),
-                                          aTest );
+                                          BooterDeserializerProviderConfigurationTest.aTestTyped );
     }
 
     private StartupConfiguration getTestStartupConfiguration( ClassLoaderConfiguration classLoaderConfiguration )
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/BooterDeserializer.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/BooterDeserializer.java
index e022ee440..241f858ed 100644
--- a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/BooterDeserializer.java
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/BooterDeserializer.java
@@ -60,7 +60,7 @@ public ProviderConfiguration deserialize()
         final File reportsDirectory = new File( properties.getProperty( REPORTSDIRECTORY ) );
         final String testNgVersion = properties.getProperty( TESTARTIFACT_VERSION );
         final String testArtifactClassifier = properties.getProperty( TESTARTIFACT_CLASSIFIER );
-        final Object testForFork = properties.getTypeDecoded( FORKTESTSET );
+        final TypeEncodedValue typeEncodedTestForFork = properties.getTypeEncodedValue( FORKTESTSET );
         final String requestedTest = properties.getProperty( REQUESTEDTEST );
         final String requestedTestMethod = properties.getProperty( REQUESTEDTESTMETHOD );
         final File sourceDirectory = properties.getFileProperty( SOURCE_DIRECTORY );
@@ -85,7 +85,7 @@ public ProviderConfiguration deserialize()
 
         return new ProviderConfiguration( dirScannerParams, properties.getBooleanProperty( FAILIFNOTESTS ),
                                           reporterConfiguration, testNg, testSuiteDefinition,
-                                          properties.getProperties(), testForFork );
+                                          properties.getProperties(), typeEncodedTestForFork );
     }
 
     public StartupConfiguration getProviderConfiguration()
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java
index 21a2b5a2c..f3f790c87 100644
--- a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ForkedBooter.java
@@ -51,7 +51,6 @@ public static void main( String[] args )
     {
         try
         {
-            long start = System.currentTimeMillis();
             if ( args.length > 1 )
             {
                 SystemPropertyManager.setSystemProperties( new File( args[1] ) );
@@ -63,12 +62,11 @@ public static void main( String[] args )
             ProviderConfiguration booterConfiguration = booterDeserializer.deserialize();
             final StartupConfiguration providerConfiguration = booterDeserializer.getProviderConfiguration();
 
-
             SurefireStarter starter = new SurefireStarter( providerConfiguration, booterConfiguration, null );
 
-            Object forkedTestSet = booterConfiguration.getTestForFork();
+            TypeEncodedValue forkedTestSet = booterConfiguration.getTestForFork();
             final RunResult result = forkedTestSet != null
-                ? starter.runSuitesInProcessWhenForked(forkedTestSet )
+                ? starter.runSuitesInProcessWhenForked( forkedTestSet )
                 : starter.runSuitesInProcessWhenForked();
 
             // noinspection CallToSystemExit
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/PropertiesWrapper.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/PropertiesWrapper.java
index f20c86398..81ccc8308 100644
--- a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/PropertiesWrapper.java
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/PropertiesWrapper.java
@@ -19,14 +19,11 @@
  * under the License.
  */
 
-import java.io.ByteArrayInputStream;
 import java.io.File;
 import java.util.ArrayList;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Properties;
-import org.apache.maven.surefire.util.NestedRuntimeException;
-import org.apache.maven.surefire.util.ReflectionUtils;
 import org.apache.maven.surefire.util.internal.StringUtils;
 
 /**
@@ -83,7 +80,8 @@ public File getFileProperty( String key )
         {
             return null;
         }
-        return (File) getParamValue( property, File.class.getName() );
+        TypeEncodedValue typeEncodedValue = new TypeEncodedValue( File.class.getName(), property );
+        return (File) typeEncodedValue.getDecodedValue();
     }
 
     public List getStringList( String propertyPrefix )
@@ -104,7 +102,7 @@ public List getStringList( String propertyPrefix )
      * @param key The key for the propery
      * @return The object, of a supported type
      */
-    public Object getTypeDecoded( String key )
+    public TypeEncodedValue getTypeEncodedValue( String key )
     {
         String typeEncoded = getProperty( key );
         if ( typeEncoded == null )
@@ -114,89 +112,9 @@ public Object getTypeDecoded( String key )
         int typeSep = typeEncoded.indexOf( "|" );
         String type = typeEncoded.substring( 0, typeSep );
         String value = typeEncoded.substring( typeSep + 1 );
-        return getParamValue( value, type );
+        return new TypeEncodedValue( type, value );
     }
 
-    private Object getParamValue( String param, String typeName )
-    {
-        if ( typeName.trim().length() == 0 )
-        {
-            return null;
-        }
-        else if ( typeName.equals( String.class.getName() ) )
-        {
-            return param;
-        }
-        else if ( typeName.equals( Class.class.getName() ) )
-        {
-            return ReflectionUtils.loadClass( Thread.currentThread().getContextClassLoader(), param );
-        }
-        else if ( typeName.equals( File.class.getName() ) )
-        {
-            return new File( param );
-        }
-        else if ( typeName.equals( File[].class.getName() ) )
-        {
-            List stringList = processStringList( param );
-            File[] fileList = new File[stringList.size()];
-            for ( int j = 0; j < stringList.size(); j++ )
-            {
-                fileList[j] = new File( (String) stringList.get( j ) );
-            }
-            return fileList;
-        }
-        else if ( typeName.equals( ArrayList.class.getName() ) )
-        {
-            return processStringList( param );
-        }
-        else if ( typeName.equals( Boolean.class.getName() ) )
-        {
-            return Boolean.valueOf( param );
-        }
-        else if ( typeName.equals( Integer.class.getName() ) )
-        {
-            return Integer.valueOf( param );
-        }
-        else if ( typeName.equals( Properties.class.getName() ) )
-        {
-            final Properties result = new Properties();
-            try
-            {
-                ByteArrayInputStream bais = new ByteArrayInputStream( param.getBytes( "8859_1" ) );
-                result.load( bais );
-            }
-            catch ( Exception e )
-            {
-                throw new NestedRuntimeException( "bug in property conversion", e );
-            }
-            return result;
-        }
-        else
-        {
-            // TODO: could attempt to construct with a String constructor if needed
-            throw new IllegalArgumentException( "Unknown parameter type: " + typeName );
-        }
-    }
-
-    private static List processStringList( String stringList )
-    {
-        String sl = stringList;
-
-        if ( sl.startsWith( "[" ) && sl.endsWith( "]" ) )
-        {
-            sl = sl.substring( 1, sl.length() - 1 );
-        }
-
-        List list = new ArrayList();
-
-        String[] stringArray = StringUtils.split( sl, "," );
-
-        for ( int i = 0; i < stringArray.length; i++ )
-        {
-            list.add( stringArray[i].trim() );
-        }
-        return list;
-    }
 
     public void setProperty( String key, File file )
     {
@@ -214,7 +132,7 @@ public void setProperty( String key, Boolean aBoolean )
         }
     }
 
-    Classpath getClasspath( String prefix  )
+    Classpath getClasspath( String prefix )
     {
         List elements = getStringList( prefix );
         return new Classpath( elements );
@@ -246,7 +164,7 @@ public void addList( List items, String propertyPrefix )
             return;
         }
         int i = 0;
-        for (Iterator iterator = items.iterator(); iterator.hasNext();)
+        for ( Iterator iterator = items.iterator(); iterator.hasNext(); )
         {
             Object item = iterator.next();
             if ( item == null )
@@ -254,7 +172,7 @@ public void addList( List items, String propertyPrefix )
                 throw new NullPointerException( propertyPrefix + i + " has null value" );
             }
 
-            String[] stringArray = StringUtils.split(item.toString(), ",");
+            String[] stringArray = StringUtils.split( item.toString(), "," );
 
             for ( int j = 0; j < stringArray.length; j++ )
             {
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ProviderConfiguration.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ProviderConfiguration.java
index f36d7e967..d425e75f1 100644
--- a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ProviderConfiguration.java
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/ProviderConfiguration.java
@@ -60,11 +60,12 @@ public class ProviderConfiguration
 
     private final boolean failIfNoTests;
 
-    private final Object forkTestSet;
+    private final TypeEncodedValue forkTestSet;
 
     public ProviderConfiguration( DirectoryScannerParameters directoryScannerParameters, boolean failIfNoTests,
                                   ReporterConfiguration reporterConfiguration, TestArtifactInfo testArtifact,
-                                  TestRequest testSuiteDefinition, Properties providerProperties, Object forkTestSet )
+                                  TestRequest testSuiteDefinition, Properties providerProperties,
+                                  TypeEncodedValue typeEncodedTestSet )
     {
         this.providerProperties = providerProperties;
         this.reporterConfiguration = reporterConfiguration;
@@ -72,7 +73,7 @@ public ProviderConfiguration( DirectoryScannerParameters directoryScannerParamet
         this.testSuiteDefinition = testSuiteDefinition;
         this.dirScannerParams = directoryScannerParameters;
         this.failIfNoTests = failIfNoTests;
-        this.forkTestSet = forkTestSet;
+        this.forkTestSet = typeEncodedTestSet;
     }
 
 
@@ -123,19 +124,10 @@ public Properties getProviderProperties()
         return providerProperties;
     }
 
-    public Object getTestForFork()
+    public TypeEncodedValue getTestForFork()
     {
         return forkTestSet;
     }
 
-    public String getTestForForkString()
-    {
-        if ( forkTestSet instanceof File )
-        {
-            return forkTestSet.toString();
-        }
-        return (String) forkTestSet;
-    }
-
 
 }
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireStarter.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireStarter.java
index 5f211b9cf..9906c0fa0 100644
--- a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireStarter.java
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/SurefireStarter.java
@@ -25,6 +25,7 @@
 import org.apache.maven.surefire.suite.RunResult;
 import org.apache.maven.surefire.testset.TestSetFailedException;
 import org.apache.maven.surefire.util.NestedRuntimeException;
+import org.apache.maven.surefire.util.ReflectionUtils;
 
 /**
  * Invokes surefire with the correct classloader setup.
@@ -57,7 +58,7 @@ public SurefireStarter( StartupConfiguration startupConfiguration, ProviderConfi
         this.startupReportConfiguration = startupReportConfiguration;
     }
 
-    public RunResult runSuitesInProcessWhenForked( Object testSet )
+    public RunResult runSuitesInProcessWhenForked( TypeEncodedValue testSet )
         throws SurefireExecutionException
     {
         writeSurefireTestClasspathProperty();
@@ -75,7 +76,9 @@ public RunResult runSuitesInProcessWhenForked( Object testSet )
 
         final Object forkingReporterFactory = createForkingReporterFactory( surefireReflector );
 
-        return invokeProvider( testSet, testsClassLoader, surefireClassLoader, forkingReporterFactory );
+        Object test = testSet.getDecodedValue();
+
+        return invokeProvider( test, testsClassLoader, surefireClassLoader, forkingReporterFactory );
     }
 
     private Object createForkingReporterFactory( SurefireReflector surefireReflector )
diff --git a/surefire-booter/src/main/java/org/apache/maven/surefire/booter/TypeEncodedValue.java b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/TypeEncodedValue.java
new file mode 100644
index 000000000..6895a84a4
--- /dev/null
+++ b/surefire-booter/src/main/java/org/apache/maven/surefire/booter/TypeEncodedValue.java
@@ -0,0 +1,126 @@
+package org.apache.maven.surefire.booter;
+
+/*
+* Licensed to the Apache Software Foundation (ASF) under one
+* or more contributor license agreements.  See the NOTICE file
+* distributed with this work for additional information
+* regarding copyright ownership.  The ASF licenses this file
+* to you under the Apache License, Version 2.0 (the
+* "License"); you may not use this file except in compliance
+* with the License.  You may obtain a copy of the License at
+*
+*     http://www.apache.org/licenses/LICENSE-2.0
+*
+* Unless required by applicable law or agreed to in writing,
+* software distributed under the License is distributed on an
+* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+* KIND, either express or implied.  See the License for the
+* specific language governing permissions and limitations
+* under the License.
+*/
+
+import java.io.ByteArrayInputStream;
+import java.io.File;
+import java.util.Properties;
+import org.apache.maven.surefire.util.NestedRuntimeException;
+import org.apache.maven.surefire.util.ReflectionUtils;
+
+/**
+ * @author Kristian Rosenvold
+ */
+public class TypeEncodedValue
+{
+    String type;
+
+    String value;
+
+    public TypeEncodedValue( String type, String value )
+    {
+        this.type = type;
+        this.value = value;
+    }
+
+    public String getType()
+    {
+        return type;
+    }
+
+    public boolean isTypeClass()
+    {
+        return Class.class.getName().equals( type );
+    }
+
+    public Object getDecodedValue()
+    {
+        if ( type.trim().length() == 0 )
+        {
+            return null;
+        }
+        else if ( type.equals( String.class.getName() ) )
+        {
+            return value;
+        }
+        else if ( isTypeClass() )
+        {
+            return ReflectionUtils.loadClass( Thread.currentThread().getContextClassLoader(), value );
+        }
+        else if ( type.equals( File.class.getName() ) )
+        {
+            return new File( value );
+        }
+        else if ( type.equals( Boolean.class.getName() ) )
+        {
+            return Boolean.valueOf( value );
+        }
+        else if ( type.equals( Integer.class.getName() ) )
+        {
+            return Integer.valueOf( value );
+        }
+        else if ( type.equals( Properties.class.getName() ) )
+        {
+            final Properties result = new Properties();
+            try
+            {
+                ByteArrayInputStream bais = new ByteArrayInputStream( value.getBytes( "8859_1" ) );
+                result.load( bais );
+            }
+            catch ( Exception e )
+            {
+                throw new NestedRuntimeException( "bug in property conversion", e );
+            }
+            return result;
+        }
+        else
+        {
+            throw new IllegalArgumentException( "Unknown parameter type: " + type );
+        }
+    }
+
+    public boolean equals( Object o )
+    {
+        if ( this == o )
+        {
+            return true;
+        }
+        if ( o == null || getClass() != o.getClass() )
+        {
+            return false;
+        }
+
+        TypeEncodedValue that = (TypeEncodedValue) o;
+
+        if ( type != null ? !type.equals( that.type ) : that.type != null )
+        {
+            return false;
+        }
+        return !( value != null ? !value.equals( that.value ) : that.value != null );
+
+    }
+
+    public int hashCode()
+    {
+        int result = type != null ? type.hashCode() : 0;
+        result = 31 * result + ( value != null ? value.hashCode() : 0 );
+        return result;
+    }
+}
diff --git a/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/ForkModeTestNGIT.java b/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/ForkModeTestNGIT.java
old mode 100755
new mode 100644
diff --git a/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/TestNgTestMethodPatternAfterIT.java b/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/TestNgTestMethodPatternAfterIT.java
old mode 100755
new mode 100644
diff --git a/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/misc/Surefire763EnvironmentForkMode.java b/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/misc/Surefire763EnvironmentForkMode.java
new file mode 100644
index 000000000..dfc1fbfec
--- /dev/null
+++ b/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/misc/Surefire763EnvironmentForkMode.java
@@ -0,0 +1,52 @@
+package org.apache.maven.surefire.its.misc;
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+
+import org.apache.maven.surefire.its.SurefireVerifierTestClass;
+
+/**
+ * SUREFIRE-674 Asserts that the build fails when tests have errors
+ *
+ * @author Kristian Rosenvold
+ */
+public class Surefire763EnvironmentForkMode
+    extends SurefireVerifierTestClass
+{
+
+    public Surefire763EnvironmentForkMode()
+    {
+        super( "/environment-variables" );
+    }
+
+    public void okWhenUseSystemClassLoader()
+        throws Exception
+    {
+        addGoal( "-DuseSystemClassLoader=true" );
+        executeTest();
+    }
+
+    public void okeWhenDontUseSystemClassLoader()
+        throws Exception
+    {
+        addGoal( "-DuseSystemClassLoader=false" );
+        executeTest();
+    }
+
+}
\ No newline at end of file
diff --git a/surefire-integration-tests/src/test/resources/environment-variables/pom.xml b/surefire-integration-tests/src/test/resources/environment-variables/pom.xml
new file mode 100644
index 000000000..57c05c33b
--- /dev/null
+++ b/surefire-integration-tests/src/test/resources/environment-variables/pom.xml
@@ -0,0 +1,68 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+  ~ Licensed to the Apache Software Foundation (ASF) under one
+  ~ or more contributor license agreements.  See the NOTICE file
+  ~ distributed with this work for additional information
+  ~ regarding copyright ownership.  The ASF licenses this file
+  ~ to you under the Apache License, Version 2.0 (the
+  ~ "License"); you may not use this file except in compliance
+  ~ with the License.  You may obtain a copy of the License at
+  ~
+  ~     http://www.apache.org/licenses/LICENSE-2.0
+  ~
+  ~ Unless required by applicable law or agreed to in writing,
+  ~ software distributed under the License is distributed on an
+  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+  ~ KIND, either express or implied.  See the License for the
+  ~ specific language governing permissions and limitations
+  ~ under the License.
+  -->
+
+<project xmlns="http://maven.apache.org/POM/4.0.0"
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
+  <modelVersion>4.0.0</modelVersion>
+
+  <groupId>org.apache.maven.plugins.surefire</groupId>
+  <artifactId>environment-variables</artifactId>
+  <version>1.0-SNAPSHOT</version>
+  <name>Test for checking environment variables into forks</name>
+
+    <properties>
+          <forkMode>always</forkMode>
+          <useSystemClassLoader>false</useSystemClassLoader>
+    </properties>
+  <dependencies>
+    <dependency>
+      <groupId>junit</groupId>
+      <artifactId>junit</artifactId>
+      <version>4.4</version>
+      <scope>test</scope>
+    </dependency>
+  </dependencies>
+  
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-surefire-plugin</artifactId>
+        <version>${surefire.version}</version>
+        <configuration>
+          <forkMode>${forkMode}</forkMode>
+          <useSystemClassLoader>${useSystemClassLoader}</useSystemClassLoader>
+          <environmentVariables>
+            <DUMMY_ENV_VAR>foo</DUMMY_ENV_VAR>
+          </environmentVariables>
+        </configuration>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-compiler-plugin</artifactId>
+        <configuration>
+          <source>1.5</source>
+          <target>1.5</target>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+
+</project>
diff --git a/surefire-integration-tests/src/test/resources/environment-variables/src/test/java/environment/BasicTest.java b/surefire-integration-tests/src/test/resources/environment-variables/src/test/java/environment/BasicTest.java
new file mode 100644
index 000000000..a0640474a
--- /dev/null
+++ b/surefire-integration-tests/src/test/resources/environment-variables/src/test/java/environment/BasicTest.java
@@ -0,0 +1,21 @@
+package environment;
+import org.junit.Assert;
+import org.junit.Test;
+
+import static org.hamcrest.core.Is.is;
+import static org.hamcrest.core.IsNull.notNullValue;
+
+
+public class BasicTest
+{
+
+    
+    @Test
+    public void testEnvVar()
+    {
+        Assert.assertThat( System.getenv( "PATH" ), notNullValue() );
+        Assert.assertThat( System.getenv( "DUMMY_ENV_VAR" ), is( "foo" ) );
+    }
+
+
+}
diff --git a/surefire-integration-tests/src/test/resources/fork-mode-testng/pom.xml b/surefire-integration-tests/src/test/resources/fork-mode-testng/pom.xml
old mode 100755
new mode 100644
diff --git a/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test1.java b/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test1.java
old mode 100755
new mode 100644
diff --git a/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test2.java b/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test2.java
old mode 100755
new mode 100644
diff --git a/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test3.java b/surefire-integration-tests/src/test/resources/fork-mode-testng/src/test/java/forkMode/Test3.java
old mode 100755
new mode 100644
