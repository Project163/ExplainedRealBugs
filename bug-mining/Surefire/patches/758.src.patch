diff --git a/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java b/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java
index 62299da4e..a0aad4007 100644
--- a/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java
+++ b/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/StatelessXmlReporter.java
@@ -432,7 +432,7 @@ private static void getTestProblems(
             boolean trimStackTrace,
             OutputStream fw,
             String testErrorType,
-            boolean createOutErrElementsInside)
+            boolean enableNestedOutErrElements)
             throws IOException {
         ppw.startElement(testErrorType);
 
@@ -456,21 +456,13 @@ private static void getTestProblems(
             }
         }
 
-        boolean hasNestedElements = createOutErrElementsInside & stackTrace != null;
-
-        if (stackTrace != null) {
-            if (hasNestedElements) {
-                ppw.startElement("stackTrace");
+        if (enableNestedOutErrElements) {
+            ppw.startElement("stackTrace");
+            if (stackTrace != null) {
+                extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
             }
+            ppw.endElement();
 
-            extraEscapeElementValue(stackTrace, outputStreamWriter, ppw, fw);
-
-            if (hasNestedElements) {
-                ppw.endElement();
-            }
-        }
-
-        if (createOutErrElementsInside) {
             createOutErrElements(outputStreamWriter, ppw, report, fw);
         }
 
