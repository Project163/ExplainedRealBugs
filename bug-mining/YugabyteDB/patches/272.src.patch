diff --git a/CMakeLists.txt b/CMakeLists.txt
index cdd8d41bc9..f366383e06 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -376,9 +376,10 @@ if(IS_CLANG)
   ADD_CXX_FLAGS("-Wshorten-64-to-32")
 
   # Allow variable length arrays in C++.
+
   if("${COMPILER_VERSION}" VERSION_GREATER_EQUAL "18.0.0" OR
-     (APPLE AND "${COMPILER_VERSION}" VERSION_GREATER_EQUAL "17.0.0"))
-    ADD_CXX_FLAGS("-Wno-vla-cxx-extension")
+     (APPLE AND "${YB_COMPILER_TYPE}" STREQUAL "clang" AND "${COMPILER_VERSION}" VERSION_GREATER_EQUAL "17.0.0"))
+     ADD_CXX_FLAGS("-Wno-vla-cxx-extension")
   endif()
 endif()
 
