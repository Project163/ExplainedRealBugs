diff --git a/python/yugabyte/dependency_graph.py b/python/yugabyte/dependency_graph.py
index 10aa400ed5..7d36666ec3 100755
--- a/python/yugabyte/dependency_graph.py
+++ b/python/yugabyte/dependency_graph.py
@@ -554,6 +554,13 @@ class DependencyGraphTest(unittest.TestCase):
         yb_master = self.get_yb_master_target()
         self.assert_all_unaffected_by([yb_master], 'tablet_server_main.cc')
 
+    def test_yb_admin(self) -> None:
+        self.assert_all_affected_by(['yb-admin'], 'yb-admin_cli.cc')
+
+        self.assert_all_unaffected_by(['yb-admin'], 'tablet_server.cc')
+        self.assert_all_unaffected_by(['yb-admin'], 'pggate.cc')
+        self.assert_all_unaffected_by(['yb-admin'], 'catalog_manager.cc')
+
     def test_call_home(self) -> None:
         yb_master = self.get_yb_master_target()
         yb_tserver = self.get_yb_tserver_target()
diff --git a/src/yb/tools/CMakeLists.txt b/src/yb/tools/CMakeLists.txt
index 478b08c2f6..7c8a6e0458 100644
--- a/src/yb/tools/CMakeLists.txt
+++ b/src/yb/tools/CMakeLists.txt
@@ -35,14 +35,9 @@ set(YB_PCH_DEP_LIBS yb_test_util boost_program_options)
 
 set(LINK_LIBS
   yb_client
-  log
-  consensus
-  tserver
   yb_common
-  yb_fs
   yb_util
   gutil
-  tablet
   ${YB_BASE_LIBS}
 )
 
@@ -67,10 +62,13 @@ target_link_libraries(yb-admin
 add_library(yb-admin_lib
   yb-admin_client.cc
   yb-admin_util.cc)
-target_link_libraries(yb-admin_lib ${LINK_LIBS})
+target_link_libraries(yb-admin_lib
+  encryption
+  ${LINK_LIBS})
 
 add_executable(yb-ts-cli ts-cli.cc)
 target_link_libraries(yb-ts-cli
+  server_base_proto
   ${LINK_LIBS})
 
 add_executable(data-patcher data-patcher.cc)
