{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789","repository_url":"https://api.github.com/repos/yugabyte/yugabyte-db","labels_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789/labels{/name}","comments_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789/comments","events_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789/events","html_url":"https://github.com/yugabyte/yugabyte-db/issues/20789","id":2101061604,"node_id":"I_kwDOBlCVUc59O6fk","number":20789,"title":"[xCluster] Errors stored in altered universe is not cleared after it is merged back","user":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":711841622,"node_id":"MDU6TGFiZWw3MTE4NDE2MjI=","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/kind/bug","name":"kind/bug","color":"c2e0c6","default":false,"description":"This issue is a bug"},{"id":1290759928,"node_id":"MDU6TGFiZWwxMjkwNzU5OTI4","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/area/docdb","name":"area/docdb","color":"0c4fcc","default":false,"description":"YugabyteDB core features"},{"id":1419821900,"node_id":"MDU6TGFiZWwxNDE5ODIxOTAw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/priority/medium","name":"priority/medium","color":"ffdc5e","default":false,"description":"Medium priority issue"}],"state":"closed","locked":false,"assignee":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-01-25T19:47:04Z","updated_at":"2025-05-28T21:25:53Z","closed_at":"2024-01-26T19:43:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Jira Link: [DB-9785](https://yugabyte.atlassian.net/browse/DB-9785)\r\n### Description\n\n> F0125 11:06:26.086361 1855172608 xrepl_catalog_manager.cc:5996] xcluster_consumer_replication_error_map_ contains consumer table 000033c0000030008000000000004003 in replication group RG1.ALTER but xcluster_consumer_table_stream_ids_map_ does not.\r\n> Fatal failure details written to /Users/hsunder/yugabyte-data2/node-1/disk-1/yb-data/master/logs/yb-master.FATAL.details.2024-01-25T11_06_26.pid57595.txt\r\n> F20240125 11:06:26 ../../src/yb/master/xrepl_catalog_manager.cc:5996] xcluster_consumer_replication_error_map_ contains consumer table 000033c0000030008000000000004003 in replication group RG1.ALTER but xcluster_consumer_table_stream_ids_map_ does not.\r\n>     @        0x11dc03240  yb::LogFatalHandlerSink::send()\r\n>     @        0x10e8eef84  google::LogDestination::LogToSinks()\r\n>     @        0x10e8ee0e0  google::LogMessage::SendToLog()\r\n>     @        0x10e8eea84  google::LogMessage::Flush()\r\n>     @        0x10e8ee888  google::LogMessage::~LogMessage()\r\n>     @        0x107a892f8  yb::master::CatalogManager::PopulateReplicationGroupErrors()\r\n>     @        0x107a88f58  yb::master::CatalogManager::GetReplicationStatus()\r\n>     @        0x1077f1028  yb::master::MasterPathHandlers::GetXClusterConfigs()\r\n>     @        0x1077f1970  yb::master::MasterPathHandlers::HandleXCluster()\r\n>     @        0x10782e104  _ZNSt3__18__invokeB7v160006IRMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEERPS3_JS7_S9_EvEEDTcldsdeclsr3stdE7declvalIT0_EEclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT1_EEEEOSG_OSF_DpOSH_\r\n>     @        0x10782e070  _ZNSt3__115__apply_functorB7v160006IMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEENS_5tupleIJPS3_NS_12placeholders4__phILi1EEENSF_ILi2EEEEEEJLm0ELm1ELm2EENSC_IJS7_OS9_EEEEENS_13__bind_returnIT_T0_T2_Xsr22__is_valid_bind_returnISM_SN_SO_EE5valueEE4typeERSM_RSN_NS_15__tuple_indicesIJXspT1_EEEEOSO_\r\n>     @        0x10782dff8  _ZNSt3__16__bindIMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEEJPS3_RKNS_12placeholders4__phILi1EEERKNSE_ILi2EEEEEclB7v160006IJS7_S9_EEENS_13__bind_returnISB_NS_5tupleIJSC_SF_SI_EEENSO_IJDpOT_EEEXsr22__is_valid_bind_returnISB_SP_ST_EE5valueEE4typeESS_\r\n>     @        0x10782dfa0  _ZNSt3__18__invokeB7v160006IRNS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS2_19WebCallbackRegistry10WebRequestEPNS5_11WebResponseEEJPS4_RKNS_12placeholders4__phILi1EEERKNSF_ILi2EEEEEEJS8_SA_EEEDTclclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT0_EEEEOSO_DpOSP_\r\n>     @        0x10782df48  std::__1::__invoke_void_return_wrapper<>::__call<>()\r\n>     @        0x10782df14  _ZNSt3__110__function12__alloc_funcINS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS3_19WebCallbackRegistry10WebRequestEPNS6_11WebResponseEEJPS5_RKNS_12placeholders4__phILi1EEERKNSG_ILi2EEEEEENS_9allocatorISN_EEFvS9_SB_EEclB7v160006ES9_OSB_\r\n>     @        0x10782d2a0  std::__1::__function::__func<>::operator()()\r\n>     @        0x10780dc8c  _ZNKSt3__110__function12__value_funcIFvRKN2yb19WebCallbackRegistry10WebRequestEPNS3_11WebResponseEEEclB7v160006ES6_OS8_\r\n>     @        0x1077d9f10  std::__1::function<>::operator()()\r\n>     @        0x1077d9ea4  yb::master::MasterPathHandlers::CallIfLeaderOrPrintRedirect()\r\n>     @        0x10783183c  _ZNSt3__18__invokeB7v160006IRMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEERPS3_JS7_S9_RSC_EvEEDTcldsdeclsr3stdE7declvalIT0_EEclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT1_EEEEOSM_OSL_DpOSN_\r\n>     @        0x1078317a0  _ZNSt3__115__apply_functorB7v160006IMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEENS_5tupleIJPS3_NS_12placeholders4__phILi1EEENSK_ILi2EEESC_EEEJLm0ELm1ELm2ELm3EENSH_IJS7_OS9_EEEEENS_13__bind_returnIT_T0_T2_Xsr22__is_valid_bind_returnISR_SS_ST_EE5valueEE4typeERSR_RSS_NS_15__tuple_indicesIJXspT1_EEEEOST_\r\n>     @        0x107831710  _ZNSt3__16__bindIMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEEJPS3_RKNS_12placeholders4__phILi1EEERKNSJ_ILi2EEERSC_EEclB7v160006IJS7_S9_EEENS_13__bind_returnISG_NS_5tupleIJSH_SK_SN_SC_EEENSU_IJDpOT_EEEXsr22__is_valid_bind_returnISG_SV_SZ_EE5valueEE4typeESY_\r\n>     @        0x1078316b8  _ZNSt3__18__invokeB7v160006IRNS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS2_19WebCallbackRegistry10WebRequestEPNS5_11WebResponseERKNS_8functionIFvS8_SA_EEEEJPS4_RKNS_12placeholders4__phILi1EEERKNSK_ILi2EEERSD_EEEJS8_SA_EEEDTclclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT0_EEEEOSU_DpOSV_\r\n>     @        0x107831660  std::__1::__invoke_void_return_wrapper<>::__call<>()\r\n>     @        0x10783162c  _ZNSt3__110__function12__alloc_funcINS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS3_19WebCallbackRegistry10WebRequestEPNS6_11WebResponseERKNS_8functionIFvS9_SB_EEEEJPS5_RKNS_12placeholders4__phILi1EEERKNSL_ILi2EEERSE_EEENS_9allocatorIST_EESD_EclB7v160006ES9_OSB_\r\n>     @        0x107830428  std::__1::__function::__func<>::operator()()\r\n>     @        0x10780dc8c  _ZNKSt3__110__function12__value_funcIFvRKN2yb19WebCallbackRegistry10WebRequestEPNS3_11WebResponseEEEclB7v160006ES6_OS8_\r\n>     @        0x1077d9f10  std::__1::function<>::operator()()\r\n>     @        0x10c189a9c  yb::Webserver::Impl::RunPathHandler()\r\n>     @        0x10c1891f0  yb::Webserver::Impl::BeginRequestCallback()\r\n>     @        0x10c187cbc  yb::Webserver::Impl::BeginRequestCallbackStatic()\r\n>     @        0x10c1a94c4  handle_request\r\n> \r\n> *** Check failure stack trace: ***\r\n>     @        0x11dc00d88  yb::(anonymous namespace)::DumpStackTraceAndExit()\r\n>     @        0x10e8ee29c  google::LogMessage::SendToLog()\r\n>     @        0x10e8eea84  google::LogMessage::Flush()\r\n>     @        0x10e8ee888  google::LogMessage::~LogMessage()\r\n>     @        0x107a892f8  yb::master::CatalogManager::PopulateReplicationGroupErrors()\r\n>     @        0x107a88f58  yb::master::CatalogManager::GetReplicationStatus()\r\n>     @        0x1077f1028  yb::master::MasterPathHandlers::GetXClusterConfigs()\r\n>     @        0x1077f1970  yb::master::MasterPathHandlers::HandleXCluster()\r\n>     @        0x10782e104  _ZNSt3__18__invokeB7v160006IRMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEERPS3_JS7_S9_EvEEDTcldsdeclsr3stdE7declvalIT0_EEclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT1_EEEEOSG_OSF_DpOSH_\r\n>     @        0x10782e070  _ZNSt3__115__apply_functorB7v160006IMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEENS_5tupleIJPS3_NS_12placeholders4__phILi1EEENSF_ILi2EEEEEEJLm0ELm1ELm2EENSC_IJS7_OS9_EEEEENS_13__bind_returnIT_T0_T2_Xsr22__is_valid_bind_returnISM_SN_SO_EE5valueEE4typeERSM_RSN_NS_15__tuple_indicesIJXspT1_EEEEOSO_\r\n>     @        0x10782dff8  _ZNSt3__16__bindIMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseEEJPS3_RKNS_12placeholders4__phILi1EEERKNSE_ILi2EEEEEclB7v160006IJS7_S9_EEENS_13__bind_returnISB_NS_5tupleIJSC_SF_SI_EEENSO_IJDpOT_EEEXsr22__is_valid_bind_returnISB_SP_ST_EE5valueEE4typeESS_\r\n>     @        0x10782dfa0  _ZNSt3__18__invokeB7v160006IRNS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS2_19WebCallbackRegistry10WebRequestEPNS5_11WebResponseEEJPS4_RKNS_12placeholders4__phILi1EEERKNSF_ILi2EEEEEEJS8_SA_EEEDTclclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT0_EEEEOSO_DpOSP_\r\n>     @        0x10782df48  std::__1::__invoke_void_return_wrapper<>::__call<>()\r\n>     @        0x10782df14  _ZNSt3__110__function12__alloc_funcINS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS3_19WebCallbackRegistry10WebRequestEPNS6_11WebResponseEEJPS5_RKNS_12placeholders4__phILi1EEERKNSG_ILi2EEEEEENS_9allocatorISN_EEFvS9_SB_EEclB7v160006ES9_OSB_\r\n>     @        0x10782d2a0  std::__1::__function::__func<>::operator()()\r\n>     @        0x10780dc8c  _ZNKSt3__110__function12__value_funcIFvRKN2yb19WebCallbackRegistry10WebRequestEPNS3_11WebResponseEEEclB7v160006ES6_OS8_\r\n>     @        0x1077d9f10  std::__1::function<>::operator()()\r\n>     @        0x1077d9ea4  yb::master::MasterPathHandlers::CallIfLeaderOrPrintRedirect()\r\n>     @        0x10783183c  _ZNSt3__18__invokeB7v160006IRMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEERPS3_JS7_S9_RSC_EvEEDTcldsdeclsr3stdE7declvalIT0_EEclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT1_EEEEOSM_OSL_DpOSN_\r\n>     @        0x1078317a0  _ZNSt3__115__apply_functorB7v160006IMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEENS_5tupleIJPS3_NS_12placeholders4__phILi1EEENSK_ILi2EEESC_EEEJLm0ELm1ELm2ELm3EENSH_IJS7_OS9_EEEEENS_13__bind_returnIT_T0_T2_Xsr22__is_valid_bind_returnISR_SS_ST_EE5valueEE4typeERSR_RSS_NS_15__tuple_indicesIJXspT1_EEEEOST_\r\n>     @        0x107831710  _ZNSt3__16__bindIMN2yb6master18MasterPathHandlersEFvRKNS1_19WebCallbackRegistry10WebRequestEPNS4_11WebResponseERKNS_8functionIFvS7_S9_EEEEJPS3_RKNS_12placeholders4__phILi1EEERKNSJ_ILi2EEERSC_EEclB7v160006IJS7_S9_EEENS_13__bind_returnISG_NS_5tupleIJSH_SK_SN_SC_EEENSU_IJDpOT_EEEXsr22__is_valid_bind_returnISG_SV_SZ_EE5valueEE4typeESY_\r\n>     @        0x1078316b8  _ZNSt3__18__invokeB7v160006IRNS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS2_19WebCallbackRegistry10WebRequestEPNS5_11WebResponseERKNS_8functionIFvS8_SA_EEEEJPS4_RKNS_12placeholders4__phILi1EEERKNSK_ILi2EEERSD_EEEJS8_SA_EEEDTclclsr3stdE7declvalIT_EEspclsr3stdE7declvalIT0_EEEEOSU_DpOSV_\r\n>     @        0x107831660  std::__1::__invoke_void_return_wrapper<>::__call<>()\r\n>     @        0x10783162c  _ZNSt3__110__function12__alloc_funcINS_6__bindIMN2yb6master18MasterPathHandlersEFvRKNS3_19WebCallbackRegistry10WebRequestEPNS6_11WebResponseERKNS_8functionIFvS9_SB_EEEEJPS5_RKNS_12placeholders4__phILi1EEERKNSL_ILi2EEERSE_EEENS_9allocatorIST_EESD_EclB7v160006ES9_OSB_\r\n>     @        0x107830428  std::__1::__function::__func<>::operator()()\r\n>     @        0x10780dc8c  _ZNKSt3__110__function12__value_funcIFvRKN2yb19WebCallbackRegistry10WebRequestEPNS3_11WebResponseEEEclB7v160006ES6_OS8_\r\n>     @        0x1077d9f10  std::__1::function<>::operator()()\r\n>     @        0x10c189a9c  yb::Webserver::Impl::RunPathHandler()\r\n>     @        0x10c1891f0  yb::Webserver::Impl::BeginRequestCallback()\r\n>     @        0x10c187cbc  yb::Webserver::Impl::BeginRequestCallbackStatic()\r\n>     @        0x10c1a94c4  handle_request\r\n>     @        0x10c1a8138  worker_thread\r\n> \n\n### Issue Type\n\nkind/bug\n\n### Warning: Please confirm that this issue does not contain any sensitive information\n\n- [X] I confirm this issue does not contain any sensitive information.\n\n[DB-9785]: https://yugabyte.atlassian.net/browse/DB-9785?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ","closed_by":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/20789/timeline","performed_via_github_app":null,"state_reason":"completed"}