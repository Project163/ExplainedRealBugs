{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917","repository_url":"https://api.github.com/repos/yugabyte/yugabyte-db","labels_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917/labels{/name}","comments_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917/comments","events_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917/events","html_url":"https://github.com/yugabyte/yugabyte-db/issues/21917","id":2237328155,"node_id":"I_kwDOBlCVUc6FWusb","number":21917,"title":"[DocDB] Fatal: Check failed: call ","user":{"login":"shishir2001-yb","id":59393494,"node_id":"MDQ6VXNlcjU5MzkzNDk0","avatar_url":"https://avatars.githubusercontent.com/u/59393494?v=4","gravatar_id":"","url":"https://api.github.com/users/shishir2001-yb","html_url":"https://github.com/shishir2001-yb","followers_url":"https://api.github.com/users/shishir2001-yb/followers","following_url":"https://api.github.com/users/shishir2001-yb/following{/other_user}","gists_url":"https://api.github.com/users/shishir2001-yb/gists{/gist_id}","starred_url":"https://api.github.com/users/shishir2001-yb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shishir2001-yb/subscriptions","organizations_url":"https://api.github.com/users/shishir2001-yb/orgs","repos_url":"https://api.github.com/users/shishir2001-yb/repos","events_url":"https://api.github.com/users/shishir2001-yb/events{/privacy}","received_events_url":"https://api.github.com/users/shishir2001-yb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":711841622,"node_id":"MDU6TGFiZWw3MTE4NDE2MjI=","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/kind/bug","name":"kind/bug","color":"c2e0c6","default":false,"description":"This issue is a bug"},{"id":1290759928,"node_id":"MDU6TGFiZWwxMjkwNzU5OTI4","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/area/docdb","name":"area/docdb","color":"0c4fcc","default":false,"description":"YugabyteDB core features"},{"id":1419821900,"node_id":"MDU6TGFiZWwxNDE5ODIxOTAw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/priority/medium","name":"priority/medium","color":"ffdc5e","default":false,"description":"Medium priority issue"},{"id":3248174344,"node_id":"MDU6TGFiZWwzMjQ4MTc0MzQ0","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/QA","name":"QA","color":"A01624","default":false,"description":"QA filed bugs"},{"id":6312498755,"node_id":"LA_kwDOBlCVUc8AAAABeEEWQw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/qa_stress","name":"qa_stress","color":"03660D","default":false,"description":"Bugs identified via Stress automation"}],"state":"closed","locked":false,"assignee":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-04-11T09:43:46Z","updated_at":"2024-06-28T10:56:02Z","closed_at":"2024-04-12T21:58:32Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Jira Link: [DB-10833](https://yugabyte.atlassian.net/browse/DB-10833)\r\n### Description\n\nVersion: 2.23.0.0-b146\r\nLogs: [https://drive.google.com/file/d/1YdhCVDItoEDHQXt50QWpIsun64RWZiXn/view?usp=sharing](https://drive.google.com/file/d/1YdhCVDItoEDHQXt50QWpIsun64RWZiXn/view?usp=sharing)\r\n\r\nEncountered the below Fatal while running Cross DB DDLs sample app with DDL atomicity \r\n```\r\nF20240411 06:08:34 ../../src/yb/rpc/rpc.cc:321] Check failed: call \r\n    @     0xaaaad942113c  google::LogMessage::SendToLog()\r\n    @     0xaaaad9421fe0  google::LogMessage::Flush()\r\n    @     0xaaaad942267c  google::LogMessageFatal::~LogMessageFatal()\r\n    @     0xaaaada650820  yb::rpc::Rpcs::DoRequestAbortAll()\r\n    @     0xaaaada6508ec  yb::rpc::Rpcs::Shutdown()\r\n    @     0xaaaada1a036c  yb::master::PollTransactionStatusBase::Shutdown()\r\n    @     0xaaaada01e990  yb::master::MultiStepMonitoredTask::EndTask()\r\n    @     0xaaaada01ef80  yb::master::MultiStepMonitoredTask::AbortAndReturnPrevState()\r\n    @     0xaaaad9dacae0  yb::master::CatalogEntityWithTasks::AbortTasksAndCloseIfRequested()\r\n    @     0xaaaad9e56444  yb::master::CatalogManager::DeleteTableInMemory()\r\n    @     0xaaaad9e51188  yb::master::CatalogManager::DeleteTableInternal()\r\n    @     0xaaaada19cbf4  yb::master::CatalogManager::YsqlDdlTxnDropTableHelper()\r\n    @     0xaaaada19b724  yb::RunnableImpl<>::Run()\r\n    @     0xaaaadaedeb98  yb::ThreadPool::DispatchThread()\r\n    @     0xaaaadaedb318  yb::Thread::SuperviseThread()\r\n    @     0xffffa75678b8  start_thread\r\n    @     0xffffa75c3afc  thread_start\r\n\r\n```\r\n\r\nTest Description:\r\n```\r\n1. Create a universe with DDL atomicity and Per DB Catalog mode\r\n2. Run cross DB DDL sample app\r\n```\r\n\r\n**Also saw the coredump mention in this issue [https://github.com/yugabyte/yugabyte-db/issues/21877](https://github.com/yugabyte/yugabyte-db/issues/21877)**\r\n\r\nG-flags:\r\n```\r\nmaster_gflags={\r\n                    \"ysql_yb_ddl_rollback_enabled\": True,\r\n                    \"allowed_preview_flags_csv\": \"ysql_yb_ddl_rollback_enabled\",\r\n                    \"ysql_transaction_bg_task_wait_ms\": ysql_transaction_bg_task_wait_ms,\r\n                    **disable_guradrail_gflags,\r\n                    **config.additional_master_gflags\r\n                },\r\ntserver_gflags={\r\n                    \"ysql_yb_ddl_rollback_enabled\": True,\r\n                    \"allowed_preview_flags_csv\": \"ysql_yb_ddl_rollback_enabled\",\r\n                    # let CM bg task poll for txn status\r\n                    \"report_ysql_ddl_txn_status_to_master\": report_ysql_ddl_txn_status_to_master,\r\n                    \"ysql_catalog_preload_additional_tables\": True,\r\n                    \"ysql_enable_read_request_caching\": True,\r\n                    **disable_guradrail_gflags,\r\n                    **config.additional_tserver_gflags\r\n                }\r\n```\r\n\n\n### Issue Type\n\nkind/bug\n\n### Warning: Please confirm that this issue does not contain any sensitive information\n\n- [X] I confirm this issue does not contain any sensitive information.\n\n[DB-10833]: https://yugabyte.atlassian.net/browse/DB-10833?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ","closed_by":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21917/timeline","performed_via_github_app":null,"state_reason":"completed"}