{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648","repository_url":"https://api.github.com/repos/yugabyte/yugabyte-db","labels_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648/labels{/name}","comments_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648/comments","events_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648/events","html_url":"https://github.com/yugabyte/yugabyte-db/issues/21648","id":2202754585,"node_id":"I_kwDOBlCVUc6DS14Z","number":21648,"title":"[DocDB] Segmentation Fault in yb-master: CatalogManagerBgTasks::Run(), Mutex Issue","user":{"login":"shamanthchandra-yb","id":109518123,"node_id":"U_kgDOBocdKw","avatar_url":"https://avatars.githubusercontent.com/u/109518123?v=4","gravatar_id":"","url":"https://api.github.com/users/shamanthchandra-yb","html_url":"https://github.com/shamanthchandra-yb","followers_url":"https://api.github.com/users/shamanthchandra-yb/followers","following_url":"https://api.github.com/users/shamanthchandra-yb/following{/other_user}","gists_url":"https://api.github.com/users/shamanthchandra-yb/gists{/gist_id}","starred_url":"https://api.github.com/users/shamanthchandra-yb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shamanthchandra-yb/subscriptions","organizations_url":"https://api.github.com/users/shamanthchandra-yb/orgs","repos_url":"https://api.github.com/users/shamanthchandra-yb/repos","events_url":"https://api.github.com/users/shamanthchandra-yb/events{/privacy}","received_events_url":"https://api.github.com/users/shamanthchandra-yb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":711841622,"node_id":"MDU6TGFiZWw3MTE4NDE2MjI=","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/kind/bug","name":"kind/bug","color":"c2e0c6","default":false,"description":"This issue is a bug"},{"id":1290759928,"node_id":"MDU6TGFiZWwxMjkwNzU5OTI4","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/area/docdb","name":"area/docdb","color":"0c4fcc","default":false,"description":"YugabyteDB core features"},{"id":1419821900,"node_id":"MDU6TGFiZWwxNDE5ODIxOTAw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/priority/medium","name":"priority/medium","color":"ffdc5e","default":false,"description":"Medium priority issue"}],"state":"closed","locked":false,"assignee":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-03-22T15:24:41Z","updated_at":"2024-10-25T07:50:13Z","closed_at":"2024-03-25T17:52:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Jira Link: [DB-10542](https://yugabyte.atlassian.net/browse/DB-10542)\r\n### Description\r\n\r\nOne of the CDC run on `2.23.0.0-b37-arm` hit yb-master core.\r\n\r\nPlease refer stress link in JIRA description:\r\n\r\nTestcase name: `test_cdc_main_without_tablet_splitting `\r\n\r\nCore trace:\r\n\r\n```\r\n* thread #1, name = 'yb-master', stop reason = signal SIGSEGV\r\n  * frame #0: 0x0000ffffade19f60 libpthread.so.0`__pthread_mutex_lock + 16\r\n    frame #1: 0x0000aaaac45bf828 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::Mutex::Acquire(this=0x0000000000000008) at mutex.cc:85:12\r\n    frame #2: 0x0000aaaac45bf824 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::MutexLock::MutexLock(this=<unavailable>, lock=0x0000000000000008) at mutex.h:107:12\r\n    frame #3: 0x0000aaaac45bf824 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::RWCLock::ReadLock(this=0x0000000000000008) at rwc_lock.cc:74:13\r\n    frame #4: 0x0000aaaac45bf824 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::CowObject<yb::master::PersistentTableInfo>::ReadLock(this=0x0000000000000008) const at cow_object.h:59:11\r\n    frame #5: 0x0000aaaac45bf824 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::CowReadLock<yb::master::PersistentTableInfo>::CowReadLock(this=0x0000ffff94996af0, cow=0x0000000000000008) at cow_object.h:172:11\r\n    frame #6: 0x0000aaaac45bf820 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::master::MetadataCowWrapper<yb::master::PersistentTableInfo>::LockForRead(this=0x0000000000000000) const at catalog_entity_base.h:84:41\r\n    frame #7: 0x0000aaaac45bf820 yb-master`yb::master::CatalogManagerBgTasks::Run() [inlined] yb::master::TableInfo::GetSchema(this=0x0000000000000000, schema=0x0000ffff949968a0) const at catalog_entity_info.cc:460:23\r\n    frame #8: 0x0000aaaac45bf820 yb-master`yb::master::CatalogManagerBgTasks::Run() at xrepl_catalog_manager.cc:1589:30\r\n    frame #9: 0x0000aaaac45bf1a8 yb-master`yb::master::CatalogManagerBgTasks::Run(this=<unavailable>) at catalog_manager_bg_tasks.cc:282:33\r\n    frame #10: 0x0000aaaac55b0bb8 yb-master`yb::Thread::SuperviseThread(void*) [inlined] std::__1::__function::__value_func<void ()>::operator()[abi:v170002](this=0x000027ec7e6d3820) const at function.h:517:16\r\n    frame #11: 0x0000aaaac55b0ba4 yb-master`yb::Thread::SuperviseThread(void*) [inlined] std::__1::function<void ()>::operator()(this=0x000027ec7e6d3820) const at function.h:1168:12\r\n    frame #12: 0x0000aaaac55b0ba4 yb-master`yb::Thread::SuperviseThread(arg=0x000027ec7e6d37c0) at thread.cc:853:3\r\n    frame #13: 0x0000ffffade178b8 libpthread.so.0`start_thread + 392\r\n    frame #14: 0x0000ffffade73afc libc.so.6`thread_start + 12\r\n```\r\n\r\n\r\n\r\n### Issue Type\r\n\r\nkind/bug\r\n\r\n### Warning: Please confirm that this issue does not contain any sensitive information\r\n\r\n- [X] I confirm this issue does not contain any sensitive information.\r\n\r\n[DB-10542]: https://yugabyte.atlassian.net/browse/DB-10542?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ","closed_by":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/21648/timeline","performed_via_github_app":null,"state_reason":"completed"}