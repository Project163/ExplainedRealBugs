{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228","repository_url":"https://api.github.com/repos/yugabyte/yugabyte-db","labels_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228/labels{/name}","comments_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228/comments","events_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228/events","html_url":"https://github.com/yugabyte/yugabyte-db/issues/26228","id":2885329216,"node_id":"I_kwDOBlCVUc6r-qFA","number":26228,"title":"[yugabyted] pg15 catalog upgrade fails on a secure cluster.","user":{"login":"nchandrappa","id":13372144,"node_id":"MDQ6VXNlcjEzMzcyMTQ0","avatar_url":"https://avatars.githubusercontent.com/u/13372144?v=4","gravatar_id":"","url":"https://api.github.com/users/nchandrappa","html_url":"https://github.com/nchandrappa","followers_url":"https://api.github.com/users/nchandrappa/followers","following_url":"https://api.github.com/users/nchandrappa/following{/other_user}","gists_url":"https://api.github.com/users/nchandrappa/gists{/gist_id}","starred_url":"https://api.github.com/users/nchandrappa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nchandrappa/subscriptions","organizations_url":"https://api.github.com/users/nchandrappa/orgs","repos_url":"https://api.github.com/users/nchandrappa/repos","events_url":"https://api.github.com/users/nchandrappa/events{/privacy}","received_events_url":"https://api.github.com/users/nchandrappa/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":711841622,"node_id":"MDU6TGFiZWw3MTE4NDE2MjI=","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/kind/bug","name":"kind/bug","color":"c2e0c6","default":false,"description":"This issue is a bug"},{"id":2847566040,"node_id":"MDU6TGFiZWwyODQ3NTY2MDQw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/area/ecosystem","name":"area/ecosystem","color":"15B52E","default":false,"description":"Label for all ecosystem related projects"},{"id":5270144347,"node_id":"LA_kwDOBlCVUc8AAAABOiAFWw","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/priority/highest","name":"priority/highest","color":"ffdc5e","default":false,"description":"Highest priority issue"},{"id":8061129906,"node_id":"LA_kwDOBlCVUc8AAAAB4HsUsg","url":"https://api.github.com/repos/yugabyte/yugabyte-db/labels/2.25.1_blocker","name":"2.25.1_blocker","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"hari90","id":12418230,"node_id":"MDQ6VXNlcjEyNDE4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/12418230?v=4","gravatar_id":"","url":"https://api.github.com/users/hari90","html_url":"https://github.com/hari90","followers_url":"https://api.github.com/users/hari90/followers","following_url":"https://api.github.com/users/hari90/following{/other_user}","gists_url":"https://api.github.com/users/hari90/gists{/gist_id}","starred_url":"https://api.github.com/users/hari90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hari90/subscriptions","organizations_url":"https://api.github.com/users/hari90/orgs","repos_url":"https://api.github.com/users/hari90/repos","events_url":"https://api.github.com/users/hari90/events{/privacy}","received_events_url":"https://api.github.com/users/hari90/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2025-02-27T18:51:39Z","updated_at":"2025-02-28T17:52:06Z","closed_at":"2025-02-28T17:52:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Jira Link: [DB-15577](https://yugabyte.atlassian.net/browse/DB-15577)\r\n### Description\n\nOn executing the catalog upgrade, initdb is crashing with a core dump.\n\n```\nF20250226 20:45:48 ../../src/yb/util/path_util.cc:62] Check failed: !out->empty() empty first component: \n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/util/logging.cc:464:     @     0x7704a32c2770  yb::LogFatalHandlerSink::send(int, char const*, char const*, int, tm const*, char const*, unsigned long)\n    @     0x7704a3d0f1d9 \n    @     0x7704a3d0fc5f \n    @     0x7704a3d129c8 \n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/util/path_util.cc:62:     @     0x7704a33ecccf  yb::AppendPathSegments(std::basic_string<char, std::char_traits<char>, std::allocator<char>>*, std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&)\n../../src/yb/util/path_util.h:55:                                                                       @     0x7704a45d17ba  std::basic_string<char, std::char_traits<char>, std::allocator<char>> yb::JoinPathSegments<char const (&) [7]>(std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, char const (&) [7])\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/rpc/secure.cc:194:     @     0x7704a45d000b  yb::rpc::ReloadSecureContextKeysAndCertificates(yb::rpc::SecureContext*, std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/rpc/secure.cc:164:     @     0x7704a45cfb8c  yb::rpc::CreateSecureContext(std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, yb::StronglyTypedBool<yb::rpc::UseClientCerts_Tag>, std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/yql/pggate/pggate.cc:119:     @     0x7704ab9b3c68  yb::pggate::(anonymous namespace)::BuildMessenger(std::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, int, scoped_refptr<yb::MetricEntity> const&, shared_ptr<yb::MemTracker> const&)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/yql/pggate/pggate.cc:591:     @     0x7704ab9b2b9b  yb::pggate::PgApiImpl::PgApiImpl(YbcPgTypeEntities, YbcPgCallbacks const&, std::optional<unsigned long>, YbcPgAshConfig const&)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/yql/pggate/ybc_pggate.cc:283:     @     0x7704aba8895d  yb::pggate::(anonymous namespace)::InitPgGateImpl(YbcPgTypeEntities, YbcPgCallbacks const&, YbcPgAshConfig const&, std::optional<unsigned long>)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/yql/pggate/ybc_pggate.cc:534:     @     0x7704aba8877b  YBCInitPgGate::$_0::operator()() const\n../../src/yb/util/signal_util.h:62:                                                                     @     0x7704aba7553c  std::invoke_result<YBCInitPgGate::$_0>::type yb::WithMaskedYsqlSignals<YBCInitPgGate::$_0>(YBCInitPgGate::$_0)\n/home/nikhil/code/code-11-30-2024/yugabyte-db/build/debug-clang17-dynamic-ninja/../../src/yb/yql/pggate/ybc_pggate.cc:534:     @     0x7704aba751ef  YBCInitPgGate\n/home/nikhil/code/code-11-30-2024/yugabyte-db/src/postgres/src/backend/utils/misc/../../../../../../../src/postgres/src/backend/utils/misc/pg_yb_utils.c:1016:     @     0x5a87f0eb8ec8  YBInitPostgresBackend\n/home/nikhil/code/code-11-30-2024/yugabyte-db/src/postgres/src/backend/utils/init/../../../../../../../src/postgres/src/backend/utils/init/postinit.c:854:     @     0x5a87f0eaccbb  InitPostgresImpl\n/home/nikhil/code/code-11-30-2024/yugabyte-db/src/postgres/src/backend/utils/init/../../../../../../../src/postgres/src/backend/utils/init/postinit.c:724:     @     0x5a87f0eac825  InitPostgres\n/home/nikhil/code/code-11-30-2024/yugabyte-db/src/postgres/src/backend/bootstrap/../../../../../../src/postgres/src/backend/bootstrap/bootstrap.c:366:     @     0x5a87f0641d78  BootstrapModeMain\n/home/nikhil/code/code-11-30-2024/yugabyte-db/src/postgres/src/backend/main/../../../../../../src/postgres/src/backend/main/main.c:198:     @     0x5a87f09c2dea  PostgresServerProcessMain\n    @     0x5a87f09c34a1 \n../sysdeps/nptl/libc_start_call_main.h:58:                                                              @     0x7704ab229d8f  __libc_start_call_main\n../csu/libc-start.c:392:                                                                                @     0x7704ab229e3f  __libc_start_main_impl\n    @     0x5a87f04863a4\n```\n\n### Warning: Please confirm that this issue does not contain any sensitive information\n\n- [x] I confirm this issue does not contain any sensitive information.\n\n[DB-15577]: https://yugabyte.atlassian.net/browse/DB-15577?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ","closed_by":{"login":"yugabyte-ci","id":17281578,"node_id":"MDQ6VXNlcjE3MjgxNTc4","avatar_url":"https://avatars.githubusercontent.com/u/17281578?v=4","gravatar_id":"","url":"https://api.github.com/users/yugabyte-ci","html_url":"https://github.com/yugabyte-ci","followers_url":"https://api.github.com/users/yugabyte-ci/followers","following_url":"https://api.github.com/users/yugabyte-ci/following{/other_user}","gists_url":"https://api.github.com/users/yugabyte-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/yugabyte-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yugabyte-ci/subscriptions","organizations_url":"https://api.github.com/users/yugabyte-ci/orgs","repos_url":"https://api.github.com/users/yugabyte-ci/repos","events_url":"https://api.github.com/users/yugabyte-ci/events{/privacy}","received_events_url":"https://api.github.com/users/yugabyte-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yugabyte/yugabyte-db/issues/26228/timeline","performed_via_github_app":null,"state_reason":"completed"}