diff --git a/src/java/org/apache/commons/cli2/Argument.java b/src/java/org/apache/commons/cli2/Argument.java
deleted file mode 100644
index b5fb4660..00000000
--- a/src/java/org/apache/commons/cli2/Argument.java
+++ /dev/null
@@ -1,106 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.ListIterator;
-
-/**
- * An Option that can process values passed on the command line in the form
- * "--file README".
- */
-public interface Argument extends Option {
-
-    /**
-     * Returns the initial separator character or
-     * '\0' if no character has been set.
-     * 
-     * @return char the initial separator character
-     */
-    char getInitialSeparator();
-    
-    /**
-     * Processes the "README" style element of the argument.
-     *
-     * Values identified should be added to the CommandLine object in
-     * association with this Argument.
-     *
-     * @see WriteableCommandLine#addValue(Option,Object)
-     *
-     * @param commandLine The CommandLine object to store results in.
-     * @param args The arguments to process.
-     * @param option The option to register value against.
-     * @throws OptionException if any problems occur.
-     */
-    void processValues(
-        final WriteableCommandLine commandLine,
-        final ListIterator args,
-        final Option option)
-            throws OptionException;
-    
-    /**
-     * Adds defaults to a CommandLine.
-     * 
-     * @param commandLine
-     *            The CommandLine object to store defaults in.
-     * @param option
-     *            The Option to store the defaults against.
-     */
-    void defaultValues(final WriteableCommandLine commandLine, final Option option);
-
-    /**
-     * Performs any necessary validation on the values added to the
-     * CommandLine.
-     *
-     * Validation will typically involve using the
-     * CommandLine.getValues(option) method to retrieve the values
-     * and then either checking each value.  Optionally the String
-     * value can be replaced by another Object such as a Number
-     * instance or a File instance.
-     *
-     * @see CommandLine#getValues(Option)
-     *
-     * @param commandLine The CommandLine object to query.
-     * @param option The option to lookup values with.
-     * @throws OptionException if any problems occur.
-     */
-    void validate(final WriteableCommandLine commandLine, final Option option)
-        throws OptionException;
-
-    /**
-     * Indicates whether argument values must be present for the CommandLine to
-     * be valid.
-     *
-     * @see #getMinimum()
-     * @see #getMaximum()
-     * @return true iff the CommandLine will be invalid without at least one 
-     *         value
-     */
-    boolean isRequired();
-
-    /**
-     * Retrieves the minimum number of values required for a valid Argument
-     *
-     * @return the minimum number of values
-     */
-    int getMinimum();
-
-    /**
-     * Retrieves the maximum number of values acceptable for a valid Argument
-     *
-     * @return the maximum number of values
-     */
-    int getMaximum();
-}
diff --git a/src/java/org/apache/commons/cli2/CommandLine.java b/src/java/org/apache/commons/cli2/CommandLine.java
deleted file mode 100644
index cad65cae..00000000
--- a/src/java/org/apache/commons/cli2/CommandLine.java
+++ /dev/null
@@ -1,214 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.List;
-import java.util.Set;
-
-/**
- * Instances of CommandLine represent a command line that has been processed
- * according to the definition supplied to the parser.
- */
-public interface CommandLine {
-	
-    /**
-     * Detects the presence of an option with the specified trigger in this 
-     * CommandLine.
-     * 
-     * @param trigger the trigger to search for
-     * @return true iff an option with this trigger is present
-     */
-    boolean hasOption(final String trigger);
-    
-    /**
-     * Detects the presence of an option in this CommandLine.
-     * 
-     * @param option the Option to search for
-     * @return true iff the option is present
-     */
-    boolean hasOption(final Option option);
-    
-    /**
-     * Finds the Option with the specified trigger
-     * 
-     * @param trigger the name of the option to retrieve
-     * @return the Option matching the trigger or null if none exists
-     */
-    Option getOption(final String trigger);
-    
-    /**
-     * Retrieves the Argument values associated with the specified Option
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @return a list of values or an empty List if none are found
-     */
-    List getValues(final String trigger);
-    
-    /**
-     * Retrieves the Argument values associated with the specified Option
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @param defaultValues the result to return if no values are found
-     * @return a list of values or defaultValues if none are found
-     */
-    List getValues(final String trigger, final List defaultValues);
-    
-    /**
-     * Retrieves the Argument values associated with the specified Option
-     * 
-     * @param option the Option associated with the values
-     * @return a list of values or an empty List if none are found
-     */
-    List getValues(final Option option);
-    
-    /**
-     * Retrieves the Argument values associated with the specified Option
-     * 
-     * @param option the Option associated with the values
-     * @param defaultValues the result to return if no values are found
-     * @return a list of values or defaultValues if none are found
-     */
-    List getValues(final Option option, final List defaultValues);
-    
-    /**
-     * Retrieves the single Argument value associated with the specified Option
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @return the matching value or null if none exists
-     * @throws IllegalStateException if more than one values are found
-     */
-    Object getValue(final String trigger) throws IllegalStateException;
-    
-    /**
-     * Retrieves the single Argument value associated with the specified Option
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @param defaultValue the result to use if no values are found
-     * @return the matching value or defaultValue if none exists
-     * @throws IllegalStateException if more than one values are found
-     */
-    Object getValue(final String trigger, final Object defaultValue) throws IllegalStateException;
-    
-    /**
-     * Retrieves the single Argument value associated with the specified Option
-     * 
-     * @param option the Option associated with the value
-     * @return the matching value or null if none exists
-     * @throws IllegalStateException if more than one values are found
-     */
-    Object getValue(final Option option) throws IllegalStateException;
-    
-    /**
-     * Retrieves the single Argument value associated with the specified Option
-     * 
-     * @param option the Option associated with the value
-     * @param defaultValue the result to use if no values are found
-     * @return the matching value or defaultValue if none exists
-     * @throws IllegalStateException if more than one values are found
-     */
-    Object getValue(final Option option, final Object defaultValue) throws IllegalStateException;
-    
-    /**
-     * Retrieves the Boolean value associated with the specified Switch
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @return the Boolean associated with trigger or null if none exists
-     */
-    Boolean getSwitch(final String trigger);
-    
-    /**
-     * Retrieves the Boolean value associated with the specified Switch
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @param defaultValue the Boolean to use if none match
-     * @return the Boolean associated with trigger or defaultValue if none exists
-     */
-    Boolean getSwitch(final String trigger, final Boolean defaultValue);
-    
-    /**
-     * Retrieves the Boolean value associated with the specified Switch
-     * 
-     * @param option the Option associated with the value
-     * @return the Boolean associated with option or null if none exists
-     */
-    Boolean getSwitch(final Option option);
-    
-    /**
-     * Retrieves the Boolean value associated with the specified Switch
-     * 
-     * @param option the Option associated with the value
-     * @param defaultValue the Boolean to use if none match
-     * @return the Boolean associated with option or defaultValue if none exists
-     */
-    Boolean getSwitch(final Option option, final Boolean defaultValue);
-    
-    
-    /**
-     * Retrieves the value associated with the specified property 
-     * 
-     * @param property the property name to lookup
-     * @return the value of the property or null
-     */
-    String getProperty(final String property);
-    
-    /**
-     * Retrieves the value associated with the specified property 
-     * 
-     * @param property the property name to lookup
-     * @param defaultValue the value to use if no other is found
-     * @return the value of the property or defaultValue
-     */
-    String getProperty(final String property, final String defaultValue);
-    
-    /**
-     * Retrieves the set of all property names associated with this CommandLine
-     * 
-     * @return a none null set of property names 
-     */
-    Set getProperties();
-    
-    /**
-     * Retrieves the number of times the specified Option appeared in this 
-     * CommandLine
-     * 
-     * @param trigger a trigger used to lookup the Option
-     * @return the number of occurrences of the option
-     */
-    int getOptionCount(final String trigger);
-    
-    /**
-     * Retrieves the number of times the specified Option appeared in this 
-     * CommandLine
-     * 
-     * @param option the Option associated to check
-     * @return the number of occurrences of the option
-     */
-    int getOptionCount(final Option option);
-    
-    /**
-     * Retrieves a list of all Options found in this CommandLine
-     * 
-     * @return a none null list of Options
-     */
-    List getOptions();
-    
-    /**
-     * Retrieves a list of all Option triggers found in this CommandLine
-     * 
-     * @return a none null list of Option triggers
-     */
-    Set getOptionTriggers();
-}
diff --git a/src/java/org/apache/commons/cli2/DisplaySetting.java b/src/java/org/apache/commons/cli2/DisplaySetting.java
deleted file mode 100644
index eacd1cdc..00000000
--- a/src/java/org/apache/commons/cli2/DisplaySetting.java
+++ /dev/null
@@ -1,154 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.Set;
-
-/**
- * An enum of possible display settings. These settings are used to control the
- * presence of various features in the String representations of options,
- * CommandLines and usage strings.  Usually a Set of DisplaySetting instances
- * will be passed to a method that will lookup the presence of the values.
- */
-public class DisplaySetting {
-	
-    private static final Set all = new HashSet();
-
-    /**
-     * A Set guarenteed to contain all possible DisplaySetting values
-     */
-    public static final Set ALL = Collections.unmodifiableSet(all);
-    
-    /**
-     * A Set guarenteed to contain no DisplaySetting values
-     */
-    public static final Set NONE = Collections.EMPTY_SET;
-    
-    /**
-     * Indicates that aliases should be included
-     */
-    public static final DisplaySetting DISPLAY_ALIASES =
-        new DisplaySetting("DISPLAY_ALIASES");
-    
-    /**
-     * Indicates that optionality should be included
-     */
-    public static final DisplaySetting DISPLAY_OPTIONAL =
-        new DisplaySetting("DISPLAY_OPTIONAL");
-    
-    /**
-     * Indicates that property options should be included
-     */
-    public static final DisplaySetting DISPLAY_PROPERTY_OPTION =
-        new DisplaySetting("DISPLAY_PROPERTY_OPTION");
-    
-    /**
-     * Indicates that switches should be included enabled
-     */
-    public static final DisplaySetting DISPLAY_SWITCH_ENABLED =
-        new DisplaySetting("DISPLAY_SWITCH_ENABLED");
-    
-    /**
-     * Indicates that switches should be included disabled
-     */
-    public static final DisplaySetting DISPLAY_SWITCH_DISABLED =
-        new DisplaySetting("DISPLAY_SWITCH_DISABLED");
-    
-    /**
-     * Indicates that group names should be included
-     */
-    public static final DisplaySetting DISPLAY_GROUP_NAME =
-        new DisplaySetting("DISPLAY_GROUP_NAME");
-    
-    /**
-     * Indicates that groups should be included expanded
-     */
-    public static final DisplaySetting DISPLAY_GROUP_EXPANDED =
-        new DisplaySetting("DISPLAY_GROUP_EXPANDED");
-    
-    /**
-     * Indicates that group arguments should be included
-     */
-    public static final DisplaySetting DISPLAY_GROUP_ARGUMENT =
-        new DisplaySetting("DISPLAY_GROUP_ARGUMENT");
-    
-    /**
-     * Indicates that group outer brackets should be included
-     */
-    public static final DisplaySetting DISPLAY_GROUP_OUTER =
-        new DisplaySetting("DISPLAY_GROUP_OUTER");
-    
-    /**
-     * Indicates that arguments should be included numbered
-     */
-    public static final DisplaySetting DISPLAY_ARGUMENT_NUMBERED =
-        new DisplaySetting("DISPLAY_ARGUMENT_NUMBERED");
-    
-    /**
-     * Indicates that arguments should be included bracketed
-     */
-    public static final DisplaySetting DISPLAY_ARGUMENT_BRACKETED =
-        new DisplaySetting("DISPLAY_ARGUMENT_BRACKETED");
-    
-    /**
-     * Indicates that arguments of Parents should be included
-     */
-    public static final DisplaySetting DISPLAY_PARENT_ARGUMENT =
-        new DisplaySetting("DISPLAY_PARENT_ARGUMENT");
-    
-    /**
-     * Indicates that children of Parents should be included
-     */
-    public static final DisplaySetting DISPLAY_PARENT_CHILDREN =
-        new DisplaySetting("DISPLAY_PARENT_CHILDREN");
-    
-    /**
-     * The name of the setting
-     */
-    private final String name;
-    
-    /**
-     * The hashCode of the setting
-     */
-    private final int hashCode;
-
-    /**
-     * Creates a new DisplaySetting with the specified name
-     * @param name the name of the setting
-     */
-    private DisplaySetting(final String name) {
-        this.name = name;
-        this.hashCode = name.hashCode();
-        all.add(this);
-    }
-
-    public int hashCode() {
-        return hashCode;
-    }
-
-    public boolean equals(final Object that) {
-        if (that instanceof DisplaySetting) {
-            return name.compareTo(that.toString()) == 0;
-        }
-        return false;
-    }
-
-    public String toString() {
-        return name;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/Group.java b/src/java/org/apache/commons/cli2/Group.java
deleted file mode 100644
index 90ae08cd..00000000
--- a/src/java/org/apache/commons/cli2/Group.java
+++ /dev/null
@@ -1,64 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Comparator;
-import java.util.Set;
-
-/**
- * An Option representing a choice or group of Options in the form "-a|-b|-c".
- */
-public interface Group extends Option {
-
-    /**
-     * Appends usage information to the specified StringBuffer
-     * 
-     * @param buffer the buffer to append to
-     * @param helpSettings a set of display settings @see DisplaySetting
-     * @param comp a comparator used to sort the Options
-     * @param separator the String used to separate member Options 
-     */
-    void appendUsage(
-        final StringBuffer buffer,
-        final Set helpSettings,
-        final Comparator comp,
-        final String separator);
-
-    /**
-     * Indicates whether group members must be present for the CommandLine to be
-     * valid.
-     *
-     * @see #getMinimum()
-     * @see #getMaximum()
-     * @return true iff the CommandLine will be invalid without at least one 
-     *         member option
-     */
-    boolean isRequired();
-
-    /**
-     * Retrieves the minimum number of members required for a valid Group
-     *
-     * @return the minimum number of members
-     */
-    int getMinimum();
-
-    /**
-     * Retrieves the maximum number of members acceptable for a valid Group
-     *
-     * @return the maximum number of members
-     */
-    int getMaximum();
-}
diff --git a/src/java/org/apache/commons/cli2/HelpLine.java b/src/java/org/apache/commons/cli2/HelpLine.java
deleted file mode 100644
index a7ad5b7d..00000000
--- a/src/java/org/apache/commons/cli2/HelpLine.java
+++ /dev/null
@@ -1,52 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Comparator;
-import java.util.Set;
-
-/**
- * Represents a line of help for a particular Option.
- */
-public interface HelpLine {
-
-    /**
-     * @return The description of the option
-     */
-    String getDescription();
-
-    /**
-     * @return The level of indentation for this line
-     */
-    int getIndent();
-
-    /**
-     * @return The Option that the help line relates to
-     */
-    Option getOption();
-
-    /**
-     * Builds a usage string for the option using the specified settings and
-     * comparator.
-     * 
-     * @param helpSettings
-     *            the settings to apply
-     * @param comparator
-     *            a comparator to sort options when applicable
-     * @return the usage string
-     */
-    String usage(final Set helpSettings, final Comparator comparator);
-}
\ No newline at end of file
diff --git a/src/java/org/apache/commons/cli2/Option.java b/src/java/org/apache/commons/cli2/Option.java
deleted file mode 100644
index c6509398..00000000
--- a/src/java/org/apache/commons/cli2/Option.java
+++ /dev/null
@@ -1,196 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Comparator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-/**
- * The super type of all options representing a particular element of the
- * command line interface.
- */
-public interface Option {
-
-    /**
-     * Processes String arguments into a CommandLine.
-     * 
-     * The iterator will initially point at the first argument to be processed
-     * and at the end of the method should point to the first argument not
-     * processed. This method MUST process at least one argument from the
-     * ListIterator.
-     * 
-     * @param commandLine
-     *            The CommandLine object to store results in
-     * @param args
-     *            The arguments to process
-     * @throws OptionException
-     *             if any problems occur
-     */
-    void process(
-        final WriteableCommandLine commandLine,
-        final ListIterator args)
-        throws OptionException;
-    
-    /**
-     * Adds defaults to a CommandLine.
-     * 
-     * Any defaults for this option are applied as well as the defaults for 
-     * any contained options
-     * 
-     * @param commandLine
-     *            The CommandLine object to store defaults in
-     */
-    void defaults(final WriteableCommandLine commandLine);
-
-    /**
-     * Indicates whether this Option will be able to process the particular
-     * argument.
-     * 
-     * @param argument
-     *            The argument to be tested
-     * @return true if the argument can be processed by this Option
-     */
-    boolean canProcess(final WriteableCommandLine commandLine, final String argument);
-
-    /**
-     * Indicates whether this Option will be able to process the particular
-     * argument. The ListIterator must be restored to the initial state before
-     * returning the boolean.
-     * 
-     * @see #canProcess(WriteableCommandLine,String)
-     * @param arguments
-     *            the ListIterator over String arguments
-     * @return true if the argument can be processed by this Option
-     */
-    boolean canProcess(final WriteableCommandLine commandLine, final ListIterator arguments);
-
-    /**
-     * Identifies the argument prefixes that should trigger this option. This
-     * is used to decide which of many Options should be tried when processing
-     * a given argument string.
-     * 
-     * The returned Set must not be null.
-     * 
-     * @return The set of triggers for this Option
-     */
-    Set getTriggers();
-
-    /**
-     * Identifies the argument prefixes that should be considered options. This
-     * is used to identify whether a given string looks like an option or an
-     * argument value. Typically an option would return the set [--,-] while
-     * switches might offer [-,+].
-     * 
-     * The returned Set must not be null.
-     * 
-     * @return The set of prefixes for this Option
-     */
-    Set getPrefixes();
-
-    /**
-     * Checks that the supplied CommandLine is valid with respect to this
-     * option.
-     * 
-     * @param commandLine
-     *            The CommandLine to check.
-     * @throws OptionException
-     *             if the CommandLine is not valid.
-     */
-    void validate(final WriteableCommandLine commandLine)
-        throws OptionException;
-
-    /**
-     * Builds up a list of HelpLineImpl instances to be presented by HelpFormatter.
-     * 
-     * @see HelpLine
-     * @see org.apache.commons.cli2.util.HelpFormatter
-     * @param depth
-     *            the initial indent depth
-     * @param helpSettings
-     *            the HelpSettings that should be applied
-     * @param comp
-     *            a comparator used to sort options when applicable.
-     * @return a List of HelpLineImpl objects
-     */
-    List helpLines(
-        final int depth,
-        final Set helpSettings,
-        final Comparator comp);
-
-    /**
-     * Appends usage information to the specified StringBuffer
-     * 
-     * @param buffer the buffer to append to
-     * @param helpSettings a set of display settings @see DisplaySetting
-     * @param comp a comparator used to sort the Options
-     */
-    void appendUsage(
-        final StringBuffer buffer,
-        final Set helpSettings,
-        final Comparator comp);
-
-    /**
-     * The preferred name of an option is used for generating help and usage
-     * information.
-     * 
-     * @return The preferred name of the option
-     */
-    String getPreferredName();
-
-    /**
-     * Returns a description of the option. This string is used to build help
-     * messages as in the HelpFormatter.
-     * 
-     * @see org.apache.commons.cli2.util.HelpFormatter
-     * @return a description of the option.
-     */
-    String getDescription();
-
-    /**
-     * Returns the id of the option.  This can be used in a loop and switch 
-     * construct:
-     * 
-     * <code>
-     * for(Option o : cmd.getOptions()){
-     *     switch(o.getId()){
-     *         case POTENTIAL_OPTION:
-     *             ...
-     *     }
-     * }
-     * </code> 
-     * 
-     * The returned value is not guarenteed to be unique.
-     * 
-     * @return the id of the option.
-     */
-    int getId();
-
-	/**
-	 * Recursively searches for an option with the supplied trigger.
-	 *
-	 * @param trigger the trigger to search for.
-	 * @return the matching option or null.
-	 */
-	Option findOption(final String trigger);
-
-    /**
-     * Indicates whether this option is required to be present.
-     * @return true iff the CommandLine will be invalid without this Option
-     */
-    boolean isRequired();
-}
diff --git a/src/java/org/apache/commons/cli2/OptionException.java b/src/java/org/apache/commons/cli2/OptionException.java
deleted file mode 100644
index 613f9aee..00000000
--- a/src/java/org/apache/commons/cli2/OptionException.java
+++ /dev/null
@@ -1,106 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Collections;
-import java.util.Set;
-
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * A problem found while dealing with command line options.
- */
-public class OptionException
-    extends Exception {
-    /**
-     * The settings used when displaying the related Option.
-     *
-     * @see DisplaySetting
-     */
-    public static final Set HELP_SETTINGS =
-        Collections.unmodifiableSet(Collections.singleton(DisplaySetting.DISPLAY_PROPERTY_OPTION));
-
-    /** resource helper instance */
-    private static final ResourceHelper helper = ResourceHelper.getResourceHelper();
-
-    /** The Option the exception relates to */
-    private final Option option;
-
-    /** The message explaining the Exception */
-    private final String message;
-
-    /**
-     * Creates a new OptionException.
-     *
-     * @param option
-     *            The Option the exception relates to
-     */
-    public OptionException(final Option option) {
-        this(option, null, null);
-    }
-
-    /**
-     * Creates a new OptionException.
-     * @param option the Option the exception relates to
-     * @param messageKey the id of the message to display
-     */
-    public OptionException(final Option option,
-                           final String messageKey) {
-        this(option, messageKey, null);
-    }
-
-    /**
-     * Creates a new OptionException.
-     * @param option the Option the exception relates to
-     * @param messageKey the id of the message to display
-     * @param value a value to display with the message
-     */
-    public OptionException(final Option option,
-                           final String messageKey,
-                           final String value) {
-        this.option = option;
-
-        if (messageKey != null) {
-            final StringBuffer buffer = new StringBuffer();
-
-            if (value != null) {
-                buffer.append(helper.getMessage(messageKey, value));
-            } else {
-                buffer.append(helper.getMessage(messageKey));
-            }
-
-            buffer.append(" ");
-
-            option.appendUsage(buffer, HELP_SETTINGS, null);
-            message = buffer.toString();
-        } else {
-            message = "";
-        }
-    }
-
-    /**
-     * Gets the Option the exception relates to
-     *
-     * @return The related Option
-     */
-    public Option getOption() {
-        return option;
-    }
-
-    public String getMessage() {
-        return message;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/Parent.java b/src/java/org/apache/commons/cli2/Parent.java
deleted file mode 100644
index bf9d5a57..00000000
--- a/src/java/org/apache/commons/cli2/Parent.java
+++ /dev/null
@@ -1,40 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.ListIterator;
-
-/**
- * An Option that can have an argument and/or group of child Options in the form 
- * "-f &lt;arg&gt; [-a|-b|-c]".
- */
-public interface Parent extends Option {
-
-    /**
-     * Processes the parent part of the Option.  The combination of parent,
-     * argument and children is handled by the process method.
-     * @see Option#process(WriteableCommandLine, ListIterator)
-     * 
-     * @param commandLine the CommandLine to write results to
-     * @param args a ListIterator over argument strings positioned at the next
-     *             argument to process
-     * @throws OptionException if an error occurs while processing
-     */
-    void processParent(
-        final WriteableCommandLine commandLine,
-        final ListIterator args)
-        throws OptionException;
-}
diff --git a/src/java/org/apache/commons/cli2/WriteableCommandLine.java b/src/java/org/apache/commons/cli2/WriteableCommandLine.java
deleted file mode 100644
index 64be37fd..00000000
--- a/src/java/org/apache/commons/cli2/WriteableCommandLine.java
+++ /dev/null
@@ -1,75 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.List;
-
-/**
- * A CommandLine that detected values and options can be written to.
- */
-public interface WriteableCommandLine extends CommandLine {
-    
-    /**
-     * Adds an Option to the CommandLine
-     * @param option the Option to add
-     */
-    void addOption(final Option option);
-    
-    /**
-     * Adds a value to an Option in the CommandLine.
-     * @param option the Option to add to
-     * @param value the value to add
-     */
-    void addValue(final Option option, final Object value);
-
-    /**
-     * Sets the default values for an Option in the CommandLine
-     * @param option the Option to add to
-     * @param defaultValues the defaults for the option
-     */
-    void setDefaultValues(final Option option, final List defaultValues);
-    
-    /**
-     * Adds a switch value to an Option in the CommandLine.
-     * @param option the Option to add to
-     * @param value the switch value to add
-     * @throws IllegalStateException if the switch has already been added
-     */
-    void addSwitch(final Option option, final boolean value) throws IllegalStateException;
-    
-    /**
-     * Sets the default state for a Switch in the CommandLine.
-     * @param option the Option to add to
-     * @param defaultSwitch the defaults state for ths switch
-     */
-    void setDefaultSwitch(final Option option, final Boolean defaultSwitch);
-    
-    /**
-     * Adds a property value to a name in the CommandLine.
-     * Replaces any existing value for the property.
-     * 
-     * @param property the name of the property
-     * @param value the value of the property
-     */
-    void addProperty(final String property, final String value);
-    
-    /**
-     * Detects whether the argument looks like an Option trigger 
-     * @param argument the argument to test
-     * @return true if the argument looks like an Option trigger
-     */
-    boolean looksLikeOption(final String argument);
-}
diff --git a/src/java/org/apache/commons/cli2/builder/ArgumentBuilder.java b/src/java/org/apache/commons/cli2/builder/ArgumentBuilder.java
deleted file mode 100644
index f0399937..00000000
--- a/src/java/org/apache/commons/cli2/builder/ArgumentBuilder.java
+++ /dev/null
@@ -1,285 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.option.ArgumentImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-import org.apache.commons.cli2.validation.Validator;
-
-/**
- * Builds Argument instances.
- */
-public class ArgumentBuilder {
-
-	/** i18n */
-	private final static ResourceHelper resources = ResourceHelper.getResourceHelper();
-	
-    /** name of the argument. Used for display and lookups in CommandLine */
-    private String name;
-
-    /** description of the argument. Used in the automated online help */
-    private String description;
-
-    /** minimum number of values required */
-    private int minimum;
-
-    /** maximum number of values permitted */
-    private int maximum;
-
-    /** character used to separate the values from the option */
-    private char initialSeparator;
-
-    /** character used to separate the values from each other */
-    private char subsequentSeparator;
-
-    /** object that should be used to ensure the values are valid */
-    private Validator validator;
-
-    /** used to identify the consume remaining option, typically "--" */
-    private String consumeRemaining;
-
-    /** default values for argument */
-    private List defaultValues;
-
-    /** id of the argument */
-    private int id;
-
-    /**
-     * Creates a new ArgumentBuilder instance
-     */
-    public ArgumentBuilder() {
-        reset();
-    }
-
-    /**
-     * Creates a new Argument instance using the options specified in this
-     * ArgumentBuilder.
-     * 
-     * @return A new Argument instance using the options specified in this
-     * ArgumentBuilder.
-     */
-    public final Argument create() {
-        final Argument argument =
-            new ArgumentImpl(
-                name,
-                description,
-                minimum,
-                maximum,
-                initialSeparator,
-                subsequentSeparator,
-                validator,
-                consumeRemaining,
-                defaultValues,
-                id);
-
-        reset();
-
-        return argument;
-    }
-
-    /**
-     * Resets the ArgumentBuilder to the defaults for a new Argument. The
-     * method is called automatically at the end of a create() call.
-     */
-    public final ArgumentBuilder reset() {
-        name = "arg";
-        description = null;
-        minimum = 0;
-        maximum = Integer.MAX_VALUE;
-        initialSeparator = ArgumentImpl.DEFAULT_INITIAL_SEPARATOR;
-        subsequentSeparator = ArgumentImpl.DEFAULT_SUBSEQUENT_SEPARATOR;
-        validator = null;
-        consumeRemaining = "--";
-        defaultValues = null;
-        id = 0;
-        return this;
-    }
-
-    /**
-     * Sets the name of the argument. The name is used when displaying usage
-     * information and to allow lookups in the CommandLine object.
-     * 
-     * @see org.apache.commons.cli2.CommandLine#getValue(String)
-     * 
-     * @param newName the name of the argument
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withName(final String newName) {
-    	if (newName == null) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_NAME));
-    	}
-    	if ("".equals(newName)) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_EMPTY_NAME));
-    	}
-        this.name = newName;
-        return this;
-    }
-
-    /**
-     * Sets the description of the argument.
-     * 
-     * The description is used when displaying online help.
-     * 
-     * @param newDescription a description of the argument
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withDescription(final String newDescription) {
-        this.description = newDescription;
-        return this;
-    }
-
-    /**
-     * Sets the minimum number of values needed for the argument to be valid.
-     * 
-     * @param newMinimum the number of values needed
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withMinimum(final int newMinimum) {
-    	if (newMinimum < 0) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NEGATIVE_MINIMUM));
-    	}
-        this.minimum = newMinimum;
-        return this;
-    }
-
-    /**
-     * Sets the maximum number of values allowed for the argument to be valid.
-     * 
-     * @param newMaximum the number of values allowed
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withMaximum(final int newMaximum) {
-    	if (newMaximum < 0) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NEGATIVE_MAXIMUM));
-    	}
-        this.maximum = newMaximum;
-        return this;
-    }
-
-    /**
-     * Sets the character used to separate the values from the option. When an
-     * argument is of the form -libs:dir1,dir2,dir3 the initialSeparator would
-     * be ':'.
-     * 
-     * @param newInitialSeparator the character used to separate the values 
-     * from the option
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withInitialSeparator(
-        final char newInitialSeparator) {
-
-        this.initialSeparator = newInitialSeparator;
-        return this;
-    }
-
-    /**
-     * Sets the character used to separate the values from each other. When an
-     * argument is of the form -libs:dir1,dir2,dir3 the subsequentSeparator
-     * would be ','.
-     * 
-     * @param newSubsequentSeparator the character used to separate the values 
-     * from each other
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withSubsequentSeparator(
-        final char newSubsequentSeparator) {
-
-        this.subsequentSeparator = newSubsequentSeparator;
-        return this;
-    }
-
-    /**
-     * Sets the validator instance used to perform validation on the Argument
-     * values.
-     * 
-     * @param newValidator a Validator instance
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withValidator(final Validator newValidator) {
-    	if (newValidator == null) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_VALIDATOR));
-    	}
-        this.validator = newValidator;
-        return this;
-    }
-
-    /**
-     * Sets the "consume remaining" option, defaults to "--". Use this if you
-     * want to allow values that might be confused with option strings.
-     * 
-     * @param newConsumeRemaining the string to use for the consume 
-     * remaining option
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withConsumeRemaining(final String newConsumeRemaining) {
-    	if (newConsumeRemaining == null) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_CONSUME_REMAINING));
-    	} 
-    	if ( "".equals(newConsumeRemaining)) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_EMPTY_CONSUME_REMAINING));
-    	}
-        this.consumeRemaining = newConsumeRemaining;
-        return this;
-    }
-
-    /**
-     * Sets the default value.
-     * 
-     * @param defaultValue the default value for the Argument
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withDefault(final Object defaultValue) {
-    	if (defaultValue == null) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_DEFAULT));
-    	}
-    	
-        if (this.defaultValues == null) {
-            this.defaultValues = new ArrayList(1);
-        }
-        this.defaultValues.add(defaultValue);
-        return this;
-    }
-
-    /**
-     * Sets the default values.
-     * 
-     * @param newDefaultValues the default values for the Argument
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withDefaults(final List newDefaultValues) {
-    	if (newDefaultValues == null) {
-    		throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_DEFAULTS));
-    	}
-        this.defaultValues = newDefaultValues;
-        return this;
-    }
-
-    /**
-     * Sets the id
-     * 
-     * @param newId the id of the Argument
-     * @return this ArgumentBuilder
-     */
-    public final ArgumentBuilder withId(final int newId) {
-        this.id = newId;
-        return this;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/builder/CommandBuilder.java b/src/java/org/apache/commons/cli2/builder/CommandBuilder.java
deleted file mode 100644
index 5a8a8a22..00000000
--- a/src/java/org/apache/commons/cli2/builder/CommandBuilder.java
+++ /dev/null
@@ -1,186 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.HashSet;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.option.Command;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Builds Command instances
- */
-public class CommandBuilder {
-    /** the preferred name of the command */
-    private String preferredName;
-
-    /** the description of the command */
-    private String description;
-
-    /** the aliases of the command */
-    private Set aliases;
-
-    /** whether the command is required or not */
-    private boolean required;
-
-    /** the argument of the command */
-    private Argument argument;
-
-    /** the children of the command */
-    private Group children;
-
-    /** the id of the command */
-    private int id;
-
-    /**
-     * Creates a new <code>CommandBuilder</code> instance.
-     */
-    public CommandBuilder() {
-        reset();
-    }
-
-    /**
-     * Creates a new <code>Command</code> instance using the properties of the
-     * <code>CommandBuilder</code>.
-     *
-     * @return the new Command instance
-     */
-    public Command create() {
-        // check we have a valid name
-        if (preferredName == null) {
-            throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.OPTION_NO_NAME));
-        }
-
-        // build the command
-        final Command option =
-            new Command(preferredName, description, aliases, required, argument, children, id);
-
-        // reset the builder
-        reset();
-
-        return option;
-    }
-
-    /**
-     * Resets the CommandBuilder to the defaults for a new Command.
-     *
-     * This method is called automatically at the end of the
-     * {@link #create() create} method.
-     */
-    public CommandBuilder reset() {
-        preferredName = null;
-        description = null;
-        aliases = new HashSet();
-        required = false;
-        argument = null;
-        children = null;
-        id = 0;
-
-        return this;
-    }
-
-    /**
-     * Specifies the name for the next <code>Command</code>
-     * that is created.  The first name is used as the preferred
-     * display name for the <code>Command</code> and then
-     * later names are used as aliases.
-     *
-     * @param name the name for the next <code>Command</code>
-     * that is created.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public CommandBuilder withName(final String name) {
-        if (preferredName == null) {
-            preferredName = name;
-        } else {
-            aliases.add(name);
-        }
-
-        return this;
-    }
-
-    /**
-     * Specifies the description for the next <code>Command</code>
-     * that is created.  This description is used to produce
-     * help documentation for the <code>Command</code>.
-     *
-     * @param newDescription the description for the next
-     * <code>Command</code> that is created.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public CommandBuilder withDescription(final String newDescription) {
-        this.description = newDescription;
-
-        return this;
-    }
-
-    /**
-     * Specifies whether the next <code>Command</code> created is
-     * required or not.
-     * @param newRequired whether the next <code>Command</code> created is
-     * required or not.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public CommandBuilder withRequired(final boolean newRequired) {
-        this.required = newRequired;
-
-        return this;
-    }
-
-    /**
-     * Specifies the children for the next <code>Command</code>
-     * that is created.
-     *
-     * @param newChildren the child options for the next <code>Command</code>
-     * that is created.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public CommandBuilder withChildren(final Group newChildren) {
-        this.children = newChildren;
-
-        return this;
-    }
-
-    /**
-     * Specifies the argument for the next <code>Command</code>
-     * that is created.
-     *
-     * @param newArgument the argument for the next <code>Command</code>
-     * that is created.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public CommandBuilder withArgument(final Argument newArgument) {
-        this.argument = newArgument;
-
-        return this;
-    }
-
-    /**
-     * Specifies the id for the next <code>Command</code> that is created.
-     *
-     * @param newId the id for the next <code>Command</code> that is created.
-     * @return this <code>CommandBuilder</code>.
-     */
-    public final CommandBuilder withId(final int newId) {
-        this.id = newId;
-
-        return this;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/builder/DefaultOptionBuilder.java b/src/java/org/apache/commons/cli2/builder/DefaultOptionBuilder.java
deleted file mode 100644
index bc172d81..00000000
--- a/src/java/org/apache/commons/cli2/builder/DefaultOptionBuilder.java
+++ /dev/null
@@ -1,214 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.HashSet;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.option.DefaultOption;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Builds DefaultOption instances.
- */
-public class DefaultOptionBuilder {
-    private final String shortPrefix;
-    private final String longPrefix;
-    private final boolean burstEnabled;
-    private String preferredName;
-    private Set aliases;
-    private Set burstAliases;
-    private boolean required;
-    private String description;
-    private Argument argument;
-    private Group children;
-    private int id;
-
-    /**
-     * Creates a new DefaultOptionBuilder using defaults
-     * @see DefaultOption#DEFAULT_SHORT_PREFIX
-     * @see DefaultOption#DEFAULT_LONG_PREFIX
-     * @see DefaultOption#DEFAULT_BURST_ENABLED
-     */
-    public DefaultOptionBuilder() {
-        this(DefaultOption.DEFAULT_SHORT_PREFIX, DefaultOption.DEFAULT_LONG_PREFIX,
-             DefaultOption.DEFAULT_BURST_ENABLED);
-    }
-
-    /**
-     * Creates a new DefaultOptionBuilder
-     * @param shortPrefix the prefix to use for short options
-     * @param longPrefix the prefix to use for long options
-     * @param burstEnabled whether to allow gnu style bursting
-     * @throws IllegalArgumentException if either prefix is less than on
-     *                                  character long
-     */
-    public DefaultOptionBuilder(final String shortPrefix,
-                                final String longPrefix,
-                                final boolean burstEnabled)
-        throws IllegalArgumentException {
-        if ((shortPrefix == null) || (shortPrefix.length() == 0)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.OPTION_ILLEGAL_SHORT_PREFIX));
-        }
-
-        if ((longPrefix == null) || (longPrefix.length() == 0)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.OPTION_ILLEGAL_LONG_PREFIX));
-        }
-
-        this.shortPrefix = shortPrefix;
-        this.longPrefix = longPrefix;
-        this.burstEnabled = burstEnabled;
-        reset();
-    }
-
-    /**
-     * Creates a DefaultOption instance
-     * @return the new instance
-     * @throws IllegalStateException if no names have been supplied
-     */
-    public DefaultOption create()
-        throws IllegalStateException {
-        if (preferredName == null) {
-            throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.OPTION_NO_NAME));
-        }
-
-        final DefaultOption option =
-            new DefaultOption(shortPrefix, longPrefix, burstEnabled, preferredName, description,
-                              aliases, burstAliases, required, argument, children, id);
-
-        reset();
-
-        return option;
-    }
-
-    /**
-     * Resets the builder
-     */
-    public DefaultOptionBuilder reset() {
-        preferredName = null;
-        description = null;
-        aliases = new HashSet();
-        burstAliases = new HashSet();
-        required = false;
-        argument = null;
-        children = null;
-        id = 0;
-
-        return this;
-    }
-
-    /**
-     * Use this short option name. The first name is used as the preferred
-     * display name for the Command and then later names are used as aliases.
-     *
-     * @param shortName the name to use
-     * @return this builder
-     */
-    public DefaultOptionBuilder withShortName(final String shortName) {
-        final String name = shortPrefix + shortName;
-
-        if (preferredName == null) {
-            preferredName = name;
-        } else {
-            aliases.add(name);
-        }
-
-        if (burstEnabled && (name.length() == (shortPrefix.length() + 1))) {
-            burstAliases.add(name);
-        }
-
-        return this;
-    }
-
-    /**
-     * Use this long option name.  The first name is used as the preferred
-     * display name for the Command and then later names are used as aliases.
-     *
-     * @param longName the name to use
-     * @return this builder
-     */
-    public DefaultOptionBuilder withLongName(final String longName) {
-        final String name = longPrefix + longName;
-
-        if (preferredName == null) {
-            preferredName = name;
-        } else {
-            aliases.add(name);
-        }
-
-        return this;
-    }
-
-    /**
-     * Use this option description
-     * @param newDescription the description to use
-     * @return this builder
-     */
-    public DefaultOptionBuilder withDescription(final String newDescription) {
-        this.description = newDescription;
-
-        return this;
-    }
-
-    /**
-     * Use this optionality
-     * @param newRequired true iff the Option is required
-     * @return this builder
-     */
-    public DefaultOptionBuilder withRequired(final boolean newRequired) {
-        this.required = newRequired;
-
-        return this;
-    }
-
-    /**
-     * Use this child Group
-     * @param newChildren the child Group to use
-     * @return this builder
-     */
-    public DefaultOptionBuilder withChildren(final Group newChildren) {
-        this.children = newChildren;
-
-        return this;
-    }
-
-    /**
-     * Use this Argument
-     * @param newArgument the argument to use
-     * @return this builder
-     */
-    public DefaultOptionBuilder withArgument(final Argument newArgument) {
-        this.argument = newArgument;
-
-        return this;
-    }
-
-    /**
-     * Sets the id
-     *
-     * @param newId
-     *            the id of the DefaultOption
-     * @return this DefaultOptionBuilder
-     */
-    public final DefaultOptionBuilder withId(final int newId) {
-        this.id = newId;
-
-        return this;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/builder/GroupBuilder.java b/src/java/org/apache/commons/cli2/builder/GroupBuilder.java
deleted file mode 100644
index a3755391..00000000
--- a/src/java/org/apache/commons/cli2/builder/GroupBuilder.java
+++ /dev/null
@@ -1,117 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.option.GroupImpl;
-
-/**
- * Builds Group instances
- */
-public class GroupBuilder {
-
-    private String name;
-    private String description;
-    private List options;
-    private int minimum;
-    private int maximum;
-
-    /**
-     * Creates a new GroupBuilder
-     */
-    public GroupBuilder() {
-        reset();
-    }
-
-    /**
-     * Creates a new Group instance
-     * @return the new Group instance
-     */
-    public Group create() {
-        final GroupImpl group =
-            new GroupImpl(options, name, description, minimum, maximum);
-
-        reset();
-
-        return group;
-    }
-
-    /**
-     * Resets the builder
-     */
-    public GroupBuilder reset() {
-        name = null;
-        description = null;
-        options = new ArrayList();
-        minimum = 0;
-        maximum = Integer.MAX_VALUE;
-        return this;
-    }
-
-    /**
-     * Use this option description
-     * @param newDescription the description to use
-     * @return this builder
-     */
-    public GroupBuilder withDescription(final String newDescription) {
-        this.description = newDescription;
-        return this;
-    }
-
-    /**
-     * Use this option name
-     * @param newName the name to use
-     * @return this builder
-     */
-    public GroupBuilder withName(final String newName) {
-        this.name = newName;
-        return this;
-    }
-
-    /**
-     * A valid group requires at least this many options present
-     * @param newMinimum the minimum Options required
-     * @return this builder
-     */
-    public GroupBuilder withMinimum(final int newMinimum) {
-        this.minimum = newMinimum;
-        return this;
-    }
-
-    /**
-     * A valid group requires at most this many options present
-     * @param newMaximum the maximum Options allowed
-     * @return this builder
-     */
-    public GroupBuilder withMaximum(final int newMaximum) {
-        this.maximum = newMaximum;
-        return this;
-    }
-
-    /**
-     * Add this option to the group
-     * @param option the Option to add
-     * @return this builder
-     */
-    public GroupBuilder withOption(final Option option) {
-        this.options.add(option);
-        return this;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/builder/PatternBuilder.java b/src/java/org/apache/commons/cli2/builder/PatternBuilder.java
deleted file mode 100644
index 1bb9bc8b..00000000
--- a/src/java/org/apache/commons/cli2/builder/PatternBuilder.java
+++ /dev/null
@@ -1,201 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.validation.ClassValidator;
-import org.apache.commons.cli2.validation.DateValidator;
-import org.apache.commons.cli2.validation.FileValidator;
-import org.apache.commons.cli2.validation.NumberValidator;
-import org.apache.commons.cli2.validation.UrlValidator;
-import org.apache.commons.cli2.validation.Validator;
-
-/**
- * Builds Options using a String pattern
- */
-//TODO Document and link to the acceptable patterns
-public class PatternBuilder {
-
-    private final GroupBuilder gbuilder;
-    private final DefaultOptionBuilder obuilder;
-    private final ArgumentBuilder abuilder;
-
-    /**
-     * Creates a new PatternBuilder
-     */
-    public PatternBuilder() {
-        this(
-            new GroupBuilder(),
-            new DefaultOptionBuilder(),
-            new ArgumentBuilder());
-    }
-
-    /**
-     * Creates a new PatternBuilder
-     * @param gbuilder the GroupBuilder to use
-     * @param obuilder the DefaultOptionBuilder to use
-     * @param abuilder the ArgumentBuilder to use
-     */
-    public PatternBuilder(
-        final GroupBuilder gbuilder,
-        final DefaultOptionBuilder obuilder,
-        final ArgumentBuilder abuilder) {
-        this.gbuilder = gbuilder;
-        this.obuilder = obuilder;
-        this.abuilder = abuilder;
-    }
-
-    private final Set options = new HashSet();
-
-    /**
-     * Creates a new Option instance.
-     * @return a new Option instance
-     */
-    public Option create() {
-        final Option option;
-
-        if (options.size() == 1) {
-            option = (Option)options.iterator().next();
-        }
-        else {
-            gbuilder.reset();
-            for (final Iterator i = options.iterator(); i.hasNext();) {
-                gbuilder.withOption((Option)i.next());
-            }
-            option = gbuilder.create();
-        }
-
-        reset();
-
-        return option;
-    }
-
-    /**
-     * Resets this builder
-     */
-    public PatternBuilder reset() {
-        options.clear();
-        return this;
-    }
-
-    private void createOption(
-        final char type,
-        final boolean required,
-        final char opt) {
-        final Argument argument;
-        if (type != ' ') {
-            abuilder.reset();
-            abuilder.withValidator(validator(type));
-            if (required) {
-                abuilder.withMinimum(1);
-            }
-            if (type != '*') {
-                abuilder.withMaximum(1);
-            }
-            argument = abuilder.create();
-        }
-        else {
-            argument = null;
-        }
-
-        obuilder.reset();
-        obuilder.withArgument(argument);
-        obuilder.withShortName(String.valueOf(opt));
-        obuilder.withRequired(required);
-
-        options.add(obuilder.create());
-    }
-
-    /**
-     * Builds an Option using a pattern string.
-     * @param pattern the pattern to build from
-     */
-    public void withPattern(final String pattern) {
-        int sz = pattern.length();
-
-        char opt = ' ';
-        char ch = ' ';
-        char type = ' ';
-        boolean required = false;
-
-        for (int i = 0; i < sz; i++) {
-            ch = pattern.charAt(i);
-
-            switch (ch) {
-                case '!' :
-                    required = true;
-                    break;
-                case '@' :
-                case ':' :
-                case '%' :
-                case '+' :
-                case '#' :
-                case '<' :
-                case '>' :
-                case '*' :
-                case '/' :
-                    type = ch;
-                    break;
-                default :
-                    if (opt != ' ') {
-                        createOption(type, required, opt);
-                        required = false;
-                        type = ' ';
-                    }
-
-                    opt = ch;
-            }
-        }
-
-        if (opt != ' ') {
-            createOption(type, required, opt);
-        }
-    }
-
-    private static Validator validator(final char c) {
-        switch (c) {
-            case '@' :
-                final ClassValidator classv = new ClassValidator();
-                classv.setInstance(true);
-                return classv;
-            case '+' :
-                final ClassValidator instancev = new ClassValidator();
-                return instancev;
-                //case ':':// no validator needed for a string
-            case '%' :
-                return NumberValidator.getNumberInstance();
-            case '#' :
-                return DateValidator.getDateInstance();
-            case '<' :
-                final FileValidator existingv = new FileValidator();
-                existingv.setExisting(true);
-                existingv.setFile(true);
-                return existingv;
-            case '>' :
-            case '*' :
-                return new FileValidator();
-            case '/' :
-                return new UrlValidator();
-            default :
-                return null;
-        }
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/builder/SwitchBuilder.java b/src/java/org/apache/commons/cli2/builder/SwitchBuilder.java
deleted file mode 100644
index 0baab08f..00000000
--- a/src/java/org/apache/commons/cli2/builder/SwitchBuilder.java
+++ /dev/null
@@ -1,193 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.HashSet;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.option.Switch;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Builds Switch instance.
- */
-public class SwitchBuilder {
-    private final String enabledPrefix;
-    private final String disabledPrefix;
-    private String description;
-    private String preferredName;
-    private Set aliases;
-    private boolean required;
-    private Argument argument;
-    private Group children;
-    private int id;
-    private Boolean switchDefault;
-
-    /**
-     * Creates a new SwitchBuilder using defaults.
-     * @see Switch#DEFAULT_ENABLED_PREFIX
-     * @see Switch#DEFAULT_DISABLED_PREFIX
-     */
-    public SwitchBuilder() {
-        this(Switch.DEFAULT_ENABLED_PREFIX, Switch.DEFAULT_DISABLED_PREFIX);
-    }
-
-    /**
-     * Creates a new SwitchBuilder
-     * @param enabledPrefix the prefix to use for enabling the option
-     * @param disabledPrefix the prefix to use for disabling the option
-     * @throws IllegalArgumentException if either prefix is less than 1
-     *                                  character long or the prefixes match
-     */
-    public SwitchBuilder(final String enabledPrefix,
-                         final String disabledPrefix)
-        throws IllegalArgumentException {
-        if ((enabledPrefix == null) || (enabledPrefix.length() < 1)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ILLEGAL_ENABLED_PREFIX));
-        }
-
-        if ((disabledPrefix == null) || (disabledPrefix.length() < 1)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ILLEGAL_DISABLED_PREFIX));
-        }
-
-        if (enabledPrefix.equals(disabledPrefix)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_IDENTICAL_PREFIXES));
-        }
-
-        this.enabledPrefix = enabledPrefix;
-        this.disabledPrefix = disabledPrefix;
-        reset();
-    }
-
-    /**
-     * Creates a new Switch instance
-     * @return a new Switch instance
-     */
-    public Switch create() {
-        final Switch option =
-            new Switch(enabledPrefix, disabledPrefix, preferredName, aliases, description,
-                       required, argument, children, id, switchDefault);
-
-        reset();
-
-        return option;
-    }
-
-    /**
-     * Resets the builder
-     */
-    public SwitchBuilder reset() {
-        description = null;
-        preferredName = null;
-        required = false;
-        aliases = new HashSet();
-        argument = null;
-        children = null;
-        id = 0;
-        switchDefault = null;
-
-        return this;
-    }
-
-    /**
-     * Use this option description
-     * @param newDescription the description to use
-     * @return this builder
-     */
-    public SwitchBuilder withDescription(final String newDescription) {
-        this.description = newDescription;
-
-        return this;
-    }
-
-    /**
-     * Use this option name. The first name is used as the preferred
-     * display name for the Command and then later names are used as aliases.
-     *
-     * @param name the name to use
-     * @return this builder
-     */
-    public SwitchBuilder withName(final String name) {
-        if (preferredName == null) {
-            preferredName = name;
-        } else {
-            aliases.add(name);
-        }
-
-        return this;
-    }
-
-    /**
-     * Use this optionality
-     * @param newRequired true iff the Option is required
-     * @return this builder
-     */
-    public SwitchBuilder withRequired(final boolean newRequired) {
-        this.required = newRequired;
-
-        return this;
-    }
-
-    /**
-     * Use this Argument
-     * @param newArgument the argument to use
-     * @return this builder
-     */
-    public SwitchBuilder withArgument(final Argument newArgument) {
-        this.argument = newArgument;
-
-        return this;
-    }
-
-    /**
-     * Use this child Group
-     * @param newChildren the child Group to use
-     * @return this builder
-     */
-    public SwitchBuilder withChildren(final Group newChildren) {
-        this.children = newChildren;
-
-        return this;
-    }
-
-    /**
-     * Sets the id
-     *
-     * @param newId
-     *            the id of the Switch
-     * @return this SwitchBuilder
-     */
-    public final SwitchBuilder withId(final int newId) {
-        this.id = newId;
-
-        return this;
-    }
-
-    /**
-     * Sets the default state for this switch
-     *
-     * @param newSwitchDefault the default state
-     * @return this SwitchBuilder
-     */
-    public final SwitchBuilder withSwitchDefault(final Boolean newSwitchDefault) {
-        this.switchDefault = newSwitchDefault;
-
-        return this;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/CommandLineImpl.java b/src/java/org/apache/commons/cli2/commandline/CommandLineImpl.java
deleted file mode 100644
index dd9abefe..00000000
--- a/src/java/org/apache/commons/cli2/commandline/CommandLineImpl.java
+++ /dev/null
@@ -1,119 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.Collections;
-import java.util.Iterator;
-import java.util.List;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Instances of CommandLine represent a command line that has been processed
- * according to the definition supplied to the parser.
- */
-public abstract class CommandLineImpl implements CommandLine {
-    public final boolean hasOption(final String trigger) {
-        return hasOption(getOption(trigger));
-    }
-
-    public final List getValues(final String trigger) {
-        return getValues(getOption(trigger), Collections.EMPTY_LIST);
-    }
-
-    public final List getValues(final String trigger,
-                                final List defaultValues) {
-        return getValues(getOption(trigger), defaultValues);
-    }
-
-    public final List getValues(final Option option) {
-        return getValues(option, Collections.EMPTY_LIST);
-    }
-
-    public final Object getValue(final String trigger) {
-        return getValue(getOption(trigger), null);
-    }
-
-    public final Object getValue(final String trigger,
-                                 final Object defaultValue) {
-        return getValue(getOption(trigger), defaultValue);
-    }
-
-    public final Object getValue(final Option option) {
-        return getValue(option, null);
-    }
-
-    public final Object getValue(final Option option,
-                                 final Object defaultValue) {
-        final List values;
-
-        if (defaultValue == null) {
-            values = getValues(option);
-        } else {
-            values = getValues(option, Collections.singletonList(defaultValue));
-        }
-
-        if (values.size() > 1) {
-            throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES));
-        }
-
-        if (values.isEmpty()) {
-            return defaultValue;
-        }
-
-        return values.get(0);
-    }
-
-    public final Boolean getSwitch(final String trigger) {
-        return getSwitch(getOption(trigger), null);
-    }
-
-    public final Boolean getSwitch(final String trigger,
-                                   final Boolean defaultValue) {
-        return getSwitch(getOption(trigger), defaultValue);
-    }
-
-    public final Boolean getSwitch(final Option option) {
-        return getSwitch(option, null);
-    }
-
-    public final String getProperty(final String property) {
-        return getProperty(property, null);
-    }
-
-    public final int getOptionCount(final String trigger) {
-        return getOptionCount(getOption(trigger));
-    }
-
-    public final int getOptionCount(final Option option) {
-        if (option == null) {
-            return 0;
-        }
-
-        int count = 0;
-
-        for (Iterator i = getOptions().iterator(); i.hasNext();) {
-            if (option.equals(i.next())) {
-                ++count;
-            }
-        }
-
-        return count;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/DefaultingCommandLine.java b/src/java/org/apache/commons/cli2/commandline/DefaultingCommandLine.java
deleted file mode 100644
index 153f32d3..00000000
--- a/src/java/org/apache/commons/cli2/commandline/DefaultingCommandLine.java
+++ /dev/null
@@ -1,171 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Option;
-
-/**
- * Manages a queue of default CommandLines. This CommandLine implementation is
- * backed by a queue of CommandLine instances which are queried in turn until a
- * suitable result is found.
- * 
- * CommandLine instances can either be added to the back of the queue or can be
- * pushed in at a specific position.
- * 
- * @see #appendCommandLine(CommandLine)
- * @see #insertCommandLine(int, CommandLine)
- */
-public class DefaultingCommandLine extends CommandLineImpl {
-
-    /**
-     * The list of default CommandLine instances
-     */
-    private final List commandLines = new ArrayList();
-
-    /**
-     * Adds a CommandLine instance to the back of the queue. The supplied
-     * CommandLine will be used as defaults when all other CommandLines produce
-     * no result
-     * 
-     * @param commandLine
-     *            the default values to use if all CommandLines
-     */
-    public void appendCommandLine(final CommandLine commandLine) {
-        commandLines.add(commandLine);
-    }
-    
-    /**
-     * Adds a CommandLine instance to a specified position in the queue.
-     * 
-     * @param index ths position at which to insert
-     * @param commandLine the CommandLine to insert
-     */
-    public void insertCommandLine(
-        final int index,
-        final CommandLine commandLine) {
-        commandLines.add(index, commandLine);
-    }
-    
-    /**
-     * Builds an iterator over the build in CommandLines.
-     * 
-     * @return an unmodifiable iterator
-     */
-    public Iterator commandLines(){
-    	return Collections.unmodifiableList(commandLines).iterator();
-    }
-
-    public Option getOption(String trigger) {
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            final Option actual = commandLine.getOption(trigger);
-            if (actual != null) {
-                return actual;
-            }
-        }
-        return null;
-    }
-
-    public List getOptions() {
-        final List options = new ArrayList();
-
-        final List temp = new ArrayList();
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            temp.clear();
-            temp.addAll(commandLine.getOptions());
-            temp.removeAll(options);
-            options.addAll(temp);
-        }
-
-        return Collections.unmodifiableList(options);
-    }
-
-    public Set getOptionTriggers() {
-        final Set all = new HashSet();
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            all.addAll(commandLine.getOptionTriggers());
-        }
-
-        return Collections.unmodifiableSet(all);
-    }
-
-    public boolean hasOption(Option option) {
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            if (commandLine.hasOption(option)) {
-                return true;
-            }
-        }
-        return false;
-    }
-
-    public List getValues(Option option, List defaultValues) {
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            final List actual = commandLine.getValues(option);
-            if (actual != null && !actual.isEmpty()) {
-                return actual;
-            }
-        }
-        if(defaultValues==null){
-        	return Collections.EMPTY_LIST;
-        }
-        else{
-        	return defaultValues;
-        }
-    }
-
-    public Boolean getSwitch(Option option, Boolean defaultValue) {
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            final Boolean actual = commandLine.getSwitch(option);
-            if (actual != null) {
-                return actual;
-            }
-        }
-        return defaultValue;
-    }
-
-    public String getProperty(String property, String defaultValue) {
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            final String actual = commandLine.getProperty(property);
-            if (actual != null) {
-                return actual;
-            }
-        }
-        return defaultValue;
-    }
-
-    public Set getProperties() {
-        final Set all = new HashSet();
-        for (final Iterator i = commandLines.iterator(); i.hasNext();) {
-            final CommandLine commandLine = (CommandLine)i.next();
-            all.addAll(commandLine.getProperties());
-        }
-        return Collections.unmodifiableSet(all);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/Parser.java b/src/java/org/apache/commons/cli2/commandline/Parser.java
deleted file mode 100644
index 3adbc47c..00000000
--- a/src/java/org/apache/commons/cli2/commandline/Parser.java
+++ /dev/null
@@ -1,177 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.io.IOException;
-
-import java.util.LinkedList;
-import java.util.List;
-import java.util.ListIterator;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-/**
- * A class that implements the <code>Parser</code> interface can parse a
- * String array according to the {@link Group}specified and return a
- * {@link CommandLine}.
- *
- * @author John Keyes (john at integralsource.com)
- */
-public class Parser {
-    private HelpFormatter helpFormatter = new HelpFormatter();
-    private Option helpOption = null;
-    private String helpTrigger = null;
-    private Group group = null;
-
-    /**
-     * Parse the arguments according to the specified options and properties.
-     *
-     * @param arguments
-     *            the command line arguments
-     *
-     * @return the list of atomic option and value tokens
-     * @throws OptionException
-     *             if there are any problems encountered while parsing the
-     *             command line tokens.
-     */
-    public CommandLine parse(final String[] arguments)
-        throws OptionException {
-        // build a mutable list for the arguments
-        final List argumentList = new LinkedList();
-
-        // copy the arguments into the new list
-        for (int i = 0; i < arguments.length; i++) {
-            final String argument = arguments[i];
-
-            // ensure non intern'd strings are used 
-            // so that == comparisons work as expected
-            argumentList.add(new String(argument));
-        }
-
-        // wet up a command line for this group
-        final WriteableCommandLine commandLine = new WriteableCommandLineImpl(group, argumentList);
-
-        // pick up any defaults from the model
-        group.defaults(commandLine);
-
-        // process the options as far as possible
-        final ListIterator iterator = argumentList.listIterator();
-        Object previous = null;
-
-        while (group.canProcess(commandLine, iterator)) {
-            // peek at the next item and backtrack
-            final Object next = iterator.next();
-            iterator.previous();
-
-            // if we have just tried to process this instance
-            if (next == previous) {
-                // abort
-                break;
-            }
-
-            // remember previous
-            previous = next;
-
-            group.process(commandLine, iterator);
-        }
-
-        // if there are more arguments we have a problem
-        if (iterator.hasNext()) {
-            final String arg = (String) iterator.next();
-            throw new OptionException(group, ResourceConstants.UNEXPECTED_TOKEN, arg);
-        }
-
-        // no need to validate if the help option is present
-        if (!commandLine.hasOption(helpOption) && !commandLine.hasOption(helpTrigger)) {
-            group.validate(commandLine);
-        }
-
-        return commandLine;
-    }
-
-    /**
-     * Parse the arguments according to the specified options and properties and
-     * displays the usage screen if the CommandLine is not valid or the help
-     * option was specified.
-     *
-     * @param arguments the command line arguments
-     * @return a valid CommandLine or null if the parse was unsuccessful
-     * @throws IOException if an error occurs while formatting help
-     */
-    public CommandLine parseAndHelp(final String[] arguments) {
-        helpFormatter.setGroup(group);
-
-        try {
-            // attempt to parse the command line
-            final CommandLine commandLine = parse(arguments);
-
-            if (!commandLine.hasOption(helpOption) && !commandLine.hasOption(helpTrigger)) {
-                return commandLine;
-            }
-        } catch (final OptionException oe) {
-            // display help regarding the exception
-            helpFormatter.setException(oe);
-        }
-
-        // print help
-        helpFormatter.print();
-
-        return null;
-    }
-
-    /**
-     * Sets the Group of options to parse against
-     * @param group the group of options to parse against
-     */
-    public void setGroup(final Group group) {
-        this.group = group;
-    }
-
-    /**
-     * Sets the HelpFormatter to use with the simplified parsing.
-     * @see #parseAndHelp(String[])
-     * @param helpFormatter the HelpFormatter to use with the simplified parsing
-     */
-    public void setHelpFormatter(final HelpFormatter helpFormatter) {
-        this.helpFormatter = helpFormatter;
-    }
-
-    /**
-     * Sets the help option to use with the simplified parsing.  For example
-     * <code>--help</code>, <code>-h</code> and <code>-?</code> are often used.
-     * @see #parseAndHelp(String[])
-     * @param helpOption the help Option
-     */
-    public void setHelpOption(final Option helpOption) {
-        this.helpOption = helpOption;
-    }
-
-    /**
-     * Sets the help option to use with the simplified parsing.  For example
-     * <code>--help</code>, <code>-h</code> and <code>-?</code> are often used.
-     * @see #parseAndHelp(String[])
-     * @param helpTrigger the trigger of the help Option
-     */
-    public void setHelpTrigger(final String helpTrigger) {
-        this.helpTrigger = helpTrigger;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/PreferencesCommandLine.java b/src/java/org/apache/commons/cli2/commandline/PreferencesCommandLine.java
deleted file mode 100644
index ddfa8285..00000000
--- a/src/java/org/apache/commons/cli2/commandline/PreferencesCommandLine.java
+++ /dev/null
@@ -1,169 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-import java.util.StringTokenizer;
-import java.util.prefs.BackingStoreException;
-import java.util.prefs.Preferences;
-
-import org.apache.commons.cli2.Option;
-
-/**
- * A CommandLine implementation using the Preferences API, useful when
- * constructing a complex DefaultingCommandLine
- *
- * This implementation uses the children of a single preference node to populate
- * the CommandLine.  Options are keyed from their preferred name and presence in
- * the Preferences object is taken as presence in the CommandLine.  Argument
- * values are taken from the Preference value and are optionally separated using
- * the separator char defined, at construction time.  Switch values can be
- * specified using a simple value of <code>true</code> or <code>false</code>;
- * obviously this means that Switches with Arguments are not supported by this
- * implementation.
- *
- * @see java.util.prefs.Preferences
- * @see org.apache.commons.cli2.commandline.DefaultingCommandLine
- * @see org.apache.commons.cli2.Option#getPreferredName() 
- */
-public class PreferencesCommandLine extends CommandLineImpl {
-	
-	private static final char NUL = '\0';
-	private final Preferences preferences;
-	private final Option root;
-	private final char separator;
-	
-	/**
-     * Creates a new PreferencesCommandLine using the specified root Option and
-     * Preferences node.  Argument values will be separated using the char 0.
-     * 
-	 * @param root the CommandLine's root Option
-	 * @param preferences the Preferences node to get values from
-	 */
-	public PreferencesCommandLine(final Option root, final Preferences preferences){
-		this(root,preferences,NUL);
-	}
-	
-    /**
-     * Creates a new PreferencesCommandLine using the specified root Option,
-     * Preferences node and value separator.
-     * 
-     * @param root the CommandLine's root Option
-     * @param preferences the Preferences node to get values from
-     * @param separator the character to split argument values
-     */
-	public PreferencesCommandLine(final Option root, final Preferences preferences, final char separator){
-		this.root = root;
-		this.preferences = preferences;
-		this.separator = separator;
-	}
-	
-	public boolean hasOption(Option option) {
-		if(option==null){
-			return false;
-		}
-		else{
-			try {
-				return Arrays.asList(preferences.keys()).contains(option.getPreferredName());
-			} catch (BackingStoreException e) {
-				return false;
-			}
-		}
-	}
-
-	public Option getOption(String trigger) {
-		return root.findOption(trigger);
-	}
-
-	public List getValues(final Option option, final List defaultValues) {
-		final String value = preferences.get(option.getPreferredName(),null);
-		
-		if(value==null){
-			return defaultValues;
-		}
-		else if(separator>NUL){
-			final List values = new ArrayList();
-			final StringTokenizer tokens = new StringTokenizer(value,String.valueOf(separator));
-			
-			while(tokens.hasMoreTokens()){
-				values.add(tokens.nextToken());
-			}
-			
-			return values;
-		}
-		else{
-			return Collections.singletonList(value);
-		}
-	}
-
-	public Boolean getSwitch(final Option option, final Boolean defaultValue) {
-		final String value = preferences.get(option.getPreferredName(),null);
-		if("true".equals(value)){
-			return Boolean.TRUE;
-		}
-		else if("false".equals(value)){
-			return Boolean.FALSE;
-		}
-		else{
-			return defaultValue;
-		}
-	}
-	
-	public String getProperty(final String property, final String defaultValue) {
-		return preferences.get(property, defaultValue);
-	}
-
-	public Set getProperties() {
-		try {
-			return new HashSet(Arrays.asList(preferences.keys()));
-		} catch (BackingStoreException e) {
-			return Collections.EMPTY_SET;
-		}
-	}
-
-	public List getOptions() {
-		try {
-			final List options = new ArrayList();
-			final Iterator keys = Arrays.asList(preferences.keys()).iterator();
-			while (keys.hasNext()) {
-				final String trigger = (String) keys.next();
-				final Option option = root.findOption(trigger);
-				if (option != null) {
-					options.add(option);
-				}
-			}
-			return Collections.unmodifiableList(options);
-		} catch (BackingStoreException e) {
-			return Collections.EMPTY_LIST;
-		}
-	}
-
-	public Set getOptionTriggers() {
-		final Set triggers = new HashSet();
-		final Iterator options = getOptions().iterator();
-		while(options.hasNext()){
-			final Option option = (Option)options.next();
-			triggers.addAll(option.getTriggers());
-		}
-		return Collections.unmodifiableSet(triggers);
-	}
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/PropertiesCommandLine.java b/src/java/org/apache/commons/cli2/commandline/PropertiesCommandLine.java
deleted file mode 100644
index 1ae4f948..00000000
--- a/src/java/org/apache/commons/cli2/commandline/PropertiesCommandLine.java
+++ /dev/null
@@ -1,154 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Properties;
-import java.util.Set;
-import java.util.StringTokenizer;
-
-import org.apache.commons.cli2.Option;
-
-/**
- * A CommandLine implementation using a java Properties instance, useful for
- * constructing a complex DefaultingCommandLine
- *
- * Options are keyed from their property name and presence in the Properties
- * instance is taken as presence in the CommandLine.  Argument values are taken
- * from the property value and are optionally separated using the separator
- * char, defined at construction time.  Switch values can be specified using a
- * simple value of <code>true</code> or <code>false</code>; obviously this means
- * that Switches with Arguments are not supported by this implementation.
- *
- * @see java.util.Properties
- * @see org.apache.commons.cli2.commandline.DefaultingCommandLine
- * @see org.apache.commons.cli2.Option#getPreferredName() 
- */
-public class PropertiesCommandLine extends CommandLineImpl {
-	
-	private static final char NUL = '\0';
-	private final Properties properties;
-	private final Option root;
-	private final char separator;
-	
-    /**
-     * Creates a new PropertiesCommandLine using the specified root Option,
-     * Properties instance.  The character 0 is used as the value separator.
-     *
-     * @param root the CommandLine's root Option
-     * @param properties the Properties instance to get values from
-     */
-	public PropertiesCommandLine(final Option root, final Properties properties){
-		this(root,properties,NUL);
-	}
-	
-    /**
-     * Creates a new PropertiesCommandLine using the specified root Option,
-     * Properties instance and value separator.
-     *
-     * @param root the CommandLine's root Option
-     * @param properties the Properties instance to get values from
-     * @param separator the character to split argument values
-     */
-	public PropertiesCommandLine(final Option root, final Properties properties, final char separator){
-		this.root = root;
-		this.properties = properties;
-		this.separator = separator;
-	}
-	
-
-	public boolean hasOption(Option option) {
-		if(option==null){
-			return false;
-		}
-		else{
-			return properties.containsKey(option.getPreferredName());
-		}
-	}
-
-	public Option getOption(String trigger) {
-		return root.findOption(trigger);
-	}
-
-	public List getValues(final Option option, final List defaultValues) {
-		final String value = properties.getProperty(option.getPreferredName());
-		
-		if(value==null){
-			return defaultValues;
-		}
-		else if(separator>NUL){
-			final List values = new ArrayList();
-			final StringTokenizer tokens = new StringTokenizer(value,String.valueOf(separator));
-			
-			while(tokens.hasMoreTokens()){
-				values.add(tokens.nextToken());
-			}
-			
-			return values;
-		}
-		else{
-			return Collections.singletonList(value);
-		}
-	}
-
-	public Boolean getSwitch(final Option option, final Boolean defaultValue) {
-		final String value = properties.getProperty(option.getPreferredName());
-		if("true".equals(value)){
-			return Boolean.TRUE;
-		}
-		else if("false".equals(value)){
-			return Boolean.FALSE;
-		}
-		else{
-			return defaultValue;
-		}
-	}
-	
-	public String getProperty(final String property, final String defaultValue) {
-		return properties.getProperty(property,defaultValue);
-	}
-
-	public Set getProperties() {
-		return properties.keySet();
-	}
-
-	public List getOptions() {
-		final List options = new ArrayList();
-		final Iterator keys = properties.keySet().iterator();
-		while(keys.hasNext()){
-			final String trigger = (String)keys.next();
-			final Option option = root.findOption(trigger);
-			if(option!=null){
-				options.add(option);
-			}
-		}
-		return Collections.unmodifiableList(options);
-	}
-
-	public Set getOptionTriggers() {
-		final Set triggers = new HashSet();
-		final Iterator options = getOptions().iterator();
-		while(options.hasNext()){
-			final Option option = (Option)options.next();
-			triggers.addAll(option.getTriggers());
-		}
-		return Collections.unmodifiableSet(triggers);
-	}
-}
diff --git a/src/java/org/apache/commons/cli2/commandline/WriteableCommandLineImpl.java b/src/java/org/apache/commons/cli2/commandline/WriteableCommandLineImpl.java
deleted file mode 100644
index c8299075..00000000
--- a/src/java/org/apache/commons/cli2/commandline/WriteableCommandLineImpl.java
+++ /dev/null
@@ -1,225 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.HashMap;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Map;
-import java.util.Properties;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * A WriteableCommandLine implementation allowing Options to write their
- * processed information to a CommandLine.
- */
-public class WriteableCommandLineImpl
-    extends CommandLineImpl implements WriteableCommandLine {
-    private final Properties properties = new Properties();
-    private final List options = new ArrayList();
-    private final Map nameToOption = new HashMap();
-    private final Map values = new HashMap();
-    private final Map switches = new HashMap();
-    private final Map defaultValues = new HashMap();
-    private final Map defaultSwitches = new HashMap();
-    private final List normalised;
-    private final Set prefixes;
-
-    /**
-     * Creates a new WriteableCommandLineImpl rooted on the specified Option, to
-     * hold the parsed arguments.
-     *
-     * @param rootOption the CommandLine's root Option
-     * @param arguments the arguments this CommandLine represents
-     */
-    public WriteableCommandLineImpl(final Option rootOption,
-                                    final List arguments) {
-        this.prefixes = rootOption.getPrefixes();
-        this.normalised = arguments;
-    }
-
-    public void addOption(Option option) {
-        options.add(option);
-        nameToOption.put(option.getPreferredName(), option);
-
-        for (Iterator i = option.getTriggers().iterator(); i.hasNext();) {
-            nameToOption.put(i.next(), option);
-        }
-    }
-
-    public void addValue(final Option option,
-                         final Object value) {
-        if (option instanceof Argument) {
-            addOption(option);
-        }
-
-        List valueList = (List) values.get(option);
-
-        if (valueList == null) {
-            valueList = new ArrayList();
-            values.put(option, valueList);
-        }
-
-        valueList.add(value);
-    }
-
-    public void addSwitch(final Option option,
-                          final boolean value) {
-        addOption(option);
-
-        if (switches.containsKey(option)) {
-            throw new IllegalStateException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ALREADY_SET));
-        } else {
-            switches.put(option, value ? Boolean.TRUE : Boolean.FALSE);
-        }
-    }
-
-    public boolean hasOption(final Option option) {
-        final boolean present = options.contains(option);
-
-        return present;
-    }
-
-    public Option getOption(final String trigger) {
-        return (Option) nameToOption.get(trigger);
-    }
-
-    public List getValues(final Option option,
-                          final List defaultValues) {
-        // First grab the command line values
-        List valueList = (List) values.get(option);
-
-        // Secondly try the defaults supplied to the method
-        if ((valueList == null) || valueList.isEmpty()) {
-            valueList = defaultValues;
-        }
-
-        // Thirdly try the option's default values
-        if ((valueList == null) || valueList.isEmpty()) {
-            valueList = (List) this.defaultValues.get(option);
-        }
-
-        // Finally use an empty list
-        if (valueList == null) {
-            valueList = Collections.EMPTY_LIST;
-        }
-
-        return valueList;
-    }
-
-    public Boolean getSwitch(final Option option,
-                             final Boolean defaultValue) {
-        // First grab the command line values
-        Boolean bool = (Boolean) switches.get(option);
-
-        // Secondly try the defaults supplied to the method
-        if (bool == null) {
-            bool = defaultValue;
-        }
-
-        // Thirdly try the option's default values
-        if (bool == null) {
-            bool = (Boolean) this.defaultSwitches.get(option);
-        }
-
-        return bool;
-    }
-
-    public void addProperty(final String property,
-                            final String value) {
-        properties.setProperty(property, value);
-    }
-
-    public String getProperty(final String property,
-                              final String defaultValue) {
-        return properties.getProperty(property, defaultValue);
-    }
-
-    public Set getProperties() {
-        return Collections.unmodifiableSet(properties.keySet());
-    }
-
-    public boolean looksLikeOption(final String trigger) {
-        for (final Iterator i = prefixes.iterator(); i.hasNext();) {
-            final String prefix = (String) i.next();
-
-            if (trigger.startsWith(prefix)) {
-                return true;
-            }
-        }
-
-        return false;
-    }
-
-    public String toString() {
-        final StringBuffer buffer = new StringBuffer();
-
-        // need to add group header
-        for (final Iterator i = normalised.iterator(); i.hasNext();) {
-            final String arg = (String) i.next();
-
-            if (arg.indexOf(' ') >= 0) {
-                buffer.append("\"").append(arg).append("\"");
-            } else {
-                buffer.append(arg);
-            }
-
-            if (i.hasNext()) {
-                buffer.append(' ');
-            }
-        }
-
-        return buffer.toString();
-    }
-
-    public List getOptions() {
-        return Collections.unmodifiableList(options);
-    }
-
-    public Set getOptionTriggers() {
-        return Collections.unmodifiableSet(nameToOption.keySet());
-    }
-
-    public void setDefaultValues(final Option option,
-                                 final List defaults) {
-        if (defaults == null) {
-            defaultValues.remove(option);
-        } else {
-            defaultValues.put(option, defaults);
-        }
-    }
-
-    public void setDefaultSwitch(final Option option,
-                                 final Boolean defaultSwitch) {
-        if (defaultSwitch == null) {
-            defaultSwitches.remove(defaultSwitch);
-        } else {
-            defaultSwitches.put(option, defaultSwitch);
-        }
-    }
-
-    public List getNormalised() {
-        return Collections.unmodifiableList(normalised);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/ArgumentImpl.java b/src/java/org/apache/commons/cli2/option/ArgumentImpl.java
deleted file mode 100644
index d64f2fc9..00000000
--- a/src/java/org/apache/commons/cli2/option/ArgumentImpl.java
+++ /dev/null
@@ -1,374 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-import java.util.StringTokenizer;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-import org.apache.commons.cli2.validation.InvalidArgumentException;
-import org.apache.commons.cli2.validation.Validator;
-
-/**
- * An implementation of an Argument.
- */
-public class ArgumentImpl
-    extends OptionImpl implements Argument {
-    private static final char NUL = '\0';
-
-    /**
-     * The default value for the initial separator char.
-     */
-    public static final char DEFAULT_INITIAL_SEPARATOR = NUL;
-
-    /**
-     * The default value for the subsequent separator char.
-     */
-    public static final char DEFAULT_SUBSEQUENT_SEPARATOR = NUL;
-
-    /**
-     * The default token to indicate that remaining arguments should be consumed
-     * as values.
-     */
-    public static final String DEFAULT_CONSUME_REMAINING = "--";
-    private final String name;
-    private final String description;
-    private final int minimum;
-    private final int maximum;
-    private final char initialSeparator;
-    private final char subsequentSeparator;
-    private final boolean subsequentSplit;
-    private final Validator validator;
-    private final String consumeRemaining;
-    private final List defaultValues;
-    private final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    /**
-     * Creates a new Argument instance.
-     *
-     * @param name
-     *            The name of the argument
-     * @param description
-     *            A description of the argument
-     * @param minimum
-     *            The minimum number of values needed to be valid
-     * @param maximum
-     *            The maximum number of values allowed to be valid
-     * @param initialSeparator
-     *            The char separating option from value
-     * @param subsequentSeparator
-     *            The char separating values from each other
-     * @param validator
-     *            The object responsible for validating the values
-     * @param consumeRemaining
-     *            The String used for the "consuming option" group
-     * @param valueDefaults
-     *            The values to be used if none are specified.
-     * @param id
-     *            The id of the option, 0 implies automatic assignment.
-     *
-     * @see OptionImpl#OptionImpl(int,boolean)
-     */
-    public ArgumentImpl(final String name,
-                        final String description,
-                        final int minimum,
-                        final int maximum,
-                        final char initialSeparator,
-                        final char subsequentSeparator,
-                        final Validator validator,
-                        final String consumeRemaining,
-                        final List valueDefaults,
-                        final int id) {
-        super(id, false);
-
-        this.name = (name == null) ? "arg" : name;
-        this.description = description;
-        this.minimum = minimum;
-        this.maximum = maximum;
-        this.initialSeparator = initialSeparator;
-        this.subsequentSeparator = subsequentSeparator;
-        this.subsequentSplit = subsequentSeparator != NUL;
-        this.validator = validator;
-        this.consumeRemaining = consumeRemaining;
-        this.defaultValues = valueDefaults;
-
-        if (minimum > maximum) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_MIN_EXCEEDS_MAX));
-        }
-
-        if ((valueDefaults != null) && (valueDefaults.size() > 0)) {
-            if (valueDefaults.size() < minimum) {
-                throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_TOO_FEW_DEFAULTS));
-            }
-
-            if (valueDefaults.size() > maximum) {
-                throw new IllegalArgumentException(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_DEFAULTS));
-            }
-        }
-    }
-
-    public String getPreferredName() {
-        return name;
-    }
-
-    public void processValues(final WriteableCommandLine commandLine,
-                              final ListIterator arguments,
-                              final Option option)
-        throws OptionException {
-        int argumentCount = commandLine.getValues(option, Collections.EMPTY_LIST).size();
-
-        while (arguments.hasNext() && (argumentCount < maximum)) {
-            final String allValues = stripBoundaryQuotes((String) arguments.next());
-
-            // should we ignore things that look like options?
-            if (allValues.equals(consumeRemaining)) {
-                while (arguments.hasNext() && (argumentCount < maximum)) {
-                    ++argumentCount;
-                    commandLine.addValue(option, arguments.next());
-                }
-            }
-            // does it look like an option?
-            else if (commandLine.looksLikeOption(allValues)) {
-                arguments.previous();
-
-                break;
-            }
-            // should we split the string up?
-            else if (subsequentSplit) {
-                final StringTokenizer values =
-                    new StringTokenizer(allValues, String.valueOf(subsequentSeparator));
-
-                arguments.remove();
-
-                while (values.hasMoreTokens() && (argumentCount < maximum)) {
-                    ++argumentCount;
-
-                    final String token = values.nextToken();
-                    commandLine.addValue(option, token);
-                    arguments.add(token);
-                }
-
-                if (values.hasMoreTokens()) {
-                    throw new OptionException(option, ResourceConstants.ARGUMENT_UNEXPECTED_VALUE,
-                                              values.nextToken());
-                }
-            }
-            // it must be a value as it is
-            else {
-                ++argumentCount;
-                commandLine.addValue(option, allValues);
-            }
-        }
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String arg) {
-        return true;
-    }
-
-    public Set getPrefixes() {
-        return Collections.EMPTY_SET;
-    }
-
-    public void process(WriteableCommandLine commandLine,
-                        ListIterator args)
-        throws OptionException {
-        processValues(commandLine, args, this);
-    }
-
-    public char getInitialSeparator() {
-        return this.initialSeparator;
-    }
-
-    public char getSubsequentSeparator() {
-        return this.subsequentSeparator;
-    }
-
-    public Set getTriggers() {
-        return Collections.EMPTY_SET;
-    }
-
-    public String getConsumeRemaining() {
-    	return this.consumeRemaining;
-    }
-    
-    public List getDefaultValues() {
-    	return this.defaultValues;
-    }
-    
-    public Validator getValidator() {
-    	return this.validator;
-    }
-    
-    public void validate(final WriteableCommandLine commandLine)
-        throws OptionException {
-        validate(commandLine, this);
-    }
-
-    public void validate(final WriteableCommandLine commandLine,
-                         final Option option)
-        throws OptionException {
-        final List values = commandLine.getValues(option);
-
-        if (values.size() < minimum) {
-            throw new OptionException(option, ResourceConstants.ARGUMENT_MISSING_VALUES);
-        }
-
-        if (values.size() > maximum) {
-            throw new OptionException(option, ResourceConstants.ARGUMENT_UNEXPECTED_VALUE,
-                                      (String) values.get(maximum));
-        }
-
-        if (validator != null) {
-            try {
-                validator.validate(values);
-            } catch (InvalidArgumentException ive) {
-                throw new OptionException(option, ResourceConstants.ARGUMENT_UNEXPECTED_VALUE,
-                                          ive.getMessage());
-            }
-        }
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        // do we display the outer optionality
-        final boolean optional = helpSettings.contains(DisplaySetting.DISPLAY_OPTIONAL);
-
-        // allow numbering if multiple args
-        final boolean numbered =
-            (maximum > 1) && helpSettings.contains(DisplaySetting.DISPLAY_ARGUMENT_NUMBERED);
-
-        final boolean bracketed = helpSettings.contains(DisplaySetting.DISPLAY_ARGUMENT_BRACKETED);
-
-        // if infinite args are allowed then crop the list
-        final int max = (maximum == Integer.MAX_VALUE) ? 2 : maximum;
-
-        int i = 0;
-
-        // for each argument
-        while (i < max) {
-            // if we're past the first add a space
-            if (i > 0) {
-                buffer.append(' ');
-            }
-
-            // if the next arg is optional
-            if ((i >= minimum) && (optional || (i > 0))) {
-                buffer.append('[');
-            }
-
-            if (bracketed) {
-                buffer.append('<');
-            }
-
-            // add name
-            buffer.append(name);
-            ++i;
-
-            // if numbering
-            if (numbered) {
-                buffer.append(i);
-            }
-
-            if (bracketed) {
-                buffer.append('>');
-            }
-        }
-
-        // if infinite args are allowed
-        if (maximum == Integer.MAX_VALUE) {
-            // append elipsis
-            buffer.append(" ...");
-        }
-
-        // for each argument
-        while (i > 0) {
-            --i;
-
-            // if the next arg is optional
-            if ((i >= minimum) && (optional || (i > 0))) {
-                buffer.append(']');
-            }
-        }
-    }
-
-    public String getDescription() {
-        return description;
-    }
-
-    public List helpLines(final int depth,
-                          final Set helpSettings,
-                          final Comparator comp) {
-        final HelpLine helpLine = new HelpLineImpl(this, depth);
-
-        return Collections.singletonList(helpLine);
-    }
-
-    public int getMaximum() {
-        return maximum;
-    }
-
-    public int getMinimum() {
-        return minimum;
-    }
-
-    /**
-     * If there are any leading or trailing quotes remove them from the
-     * specified token.
-     *
-     * @param token
-     *            the token to strip leading and trailing quotes
-     *
-     * @return String the possibly modified token
-     */
-    public String stripBoundaryQuotes(String token) {
-        if (!token.startsWith("\"") || !token.endsWith("\"")) {
-            return token;
-        }
-
-        token = token.substring(1, token.length() - 1);
-
-        return token;
-    }
-
-    public boolean isRequired() {
-        return getMinimum() > 0;
-    }
-
-    public void defaults(final WriteableCommandLine commandLine) {
-        super.defaults(commandLine);
-        defaultValues(commandLine, this);
-    }
-
-    public void defaultValues(final WriteableCommandLine commandLine,
-                              final Option option) {
-        commandLine.setDefaultValues(option, defaultValues);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/Command.java b/src/java/org/apache/commons/cli2/option/Command.java
deleted file mode 100644
index c6390949..00000000
--- a/src/java/org/apache/commons/cli2/option/Command.java
+++ /dev/null
@@ -1,174 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Represents a cvs "update" style command line option.
- *
- * Like all Parents, Commands can have child options and can be part of
- * Arguments
- */
-public class Command
-    extends ParentImpl {
-    /** The display name for the command */
-    private final String preferredName;
-
-    /** The aliases for this command */
-    private final Set aliases;
-
-    /** All the names for this command */
-    private final Set triggers;
-
-    /**
-     * Creates a new Command instance.
-     *
-     * @param preferredName
-     *            The name normally used to refer to the Command
-     * @param description
-     *            A description of the Command
-     * @param aliases
-     *            Alternative names for the Command
-     * @param required
-     *            Whether the Command is required
-     * @param argument
-     *            An Argument that the command takes
-     * @param children
-     *            The Group of child options for this Command
-     * @param id
-     *            A unique id for the Command
-     *
-     * @see ParentImpl#ParentImpl(Argument, Group, String, int, boolean)
-     */
-    public Command(final String preferredName,
-                   final String description,
-                   final Set aliases,
-                   final boolean required,
-                   final Argument argument,
-                   final Group children,
-                   final int id) {
-        super(argument, children, description, id, required);
-
-        // check the preferred name is valid
-        if ((preferredName == null) || (preferredName.length() < 1)) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.COMMAND_PREFERRED_NAME_TOO_SHORT));
-        }
-
-        this.preferredName = preferredName;
-
-        // gracefully and defensively handle aliases
-        this.aliases =
-            (aliases == null) ? Collections.EMPTY_SET
-                              : Collections.unmodifiableSet(new HashSet(aliases));
-
-        // populate the triggers Set
-        final Set newTriggers = new HashSet();
-        newTriggers.add(preferredName);
-        newTriggers.addAll(this.aliases);
-        this.triggers = Collections.unmodifiableSet(newTriggers);
-    }
-
-    public void processParent(final WriteableCommandLine commandLine,
-                              final ListIterator arguments)
-        throws OptionException {
-        // grab the argument to process
-        final String arg = (String) arguments.next();
-
-        // if we can process it
-        if (canProcess(commandLine, arg)) {
-            // then note the option
-            commandLine.addOption(this);
-
-            // normalise the argument list
-            arguments.set(preferredName);
-        } else {
-            throw new OptionException(this, ResourceConstants.UNEXPECTED_TOKEN, arg);
-        }
-    }
-
-    public Set getTriggers() {
-        return triggers;
-    }
-
-    public void validate(WriteableCommandLine commandLine)
-        throws OptionException {
-        if (isRequired() && !commandLine.hasOption(this)) {
-            throw new OptionException(this, ResourceConstants.OPTION_MISSING_REQUIRED,
-                                      getPreferredName());
-        }
-
-        super.validate(commandLine);
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        // do we display optionality
-        final boolean optional =
-            !isRequired() && helpSettings.contains(DisplaySetting.DISPLAY_OPTIONAL);
-        final boolean displayAliases = helpSettings.contains(DisplaySetting.DISPLAY_ALIASES);
-
-        if (optional) {
-            buffer.append('[');
-        }
-
-        buffer.append(preferredName);
-
-        if (displayAliases && !aliases.isEmpty()) {
-            buffer.append(" (");
-
-            final List list = new ArrayList(aliases);
-            Collections.sort(list);
-
-            for (final Iterator i = list.iterator(); i.hasNext();) {
-                final String alias = (String) i.next();
-                buffer.append(alias);
-
-                if (i.hasNext()) {
-                    buffer.append(',');
-                }
-            }
-
-            buffer.append(')');
-        }
-
-        super.appendUsage(buffer, helpSettings, comp);
-
-        if (optional) {
-            buffer.append(']');
-        }
-    }
-
-    public String getPreferredName() {
-        return preferredName;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/DefaultOption.java b/src/java/org/apache/commons/cli2/option/DefaultOption.java
deleted file mode 100644
index b169b64e..00000000
--- a/src/java/org/apache/commons/cli2/option/DefaultOption.java
+++ /dev/null
@@ -1,220 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-
-/**
- * A Parent implementation representing normal options.
- */
-public class DefaultOption
-    extends ParentImpl {
-    /**
-     * The default token used to prefix a short option
-     */
-    public static final String DEFAULT_SHORT_PREFIX = "-";
-
-    /**
-     * The default token used to prefix a long option
-     */
-    public static final String DEFAULT_LONG_PREFIX = "--";
-
-    /**
-     * The default value for the burstEnabled constructor parameter
-     */
-    public static final boolean DEFAULT_BURST_ENABLED = true;
-    private final String preferredName;
-    private final Set aliases;
-    private final Set burstAliases;
-    private final Set triggers;
-    private final Set prefixes;
-    private final String shortPrefix;
-    private final boolean burstEnabled;
-    private final int burstLength;
-
-    /**
-     * Creates a new DefaultOption
-     *
-     * @param shortPrefix the prefix used for short options
-     * @param longPrefix the prefix used for long options
-     * @param burstEnabled should option bursting be enabled
-     * @param preferredName the preferred name for this Option, this should begin with either shortPrefix or longPrefix
-     * @param description a description of this Option
-     * @param aliases the alternative names for this Option
-     * @param burstAliases the aliases that can be burst
-     * @param required whether the Option is strictly required
-     * @param argument the Argument belonging to this Parent, or null
-     * @param children the Group children belonging to this Parent, ot null
-     * @param id the unique identifier for this Option
-     * @throws IllegalArgumentException if the preferredName or an alias isn't
-     *     prefixed with shortPrefix or longPrefix
-     */
-    public DefaultOption(final String shortPrefix,
-                         final String longPrefix,
-                         final boolean burstEnabled,
-                         final String preferredName,
-                         final String description,
-                         final Set aliases,
-                         final Set burstAliases,
-                         final boolean required,
-                         final Argument argument,
-                         final Group children,
-                         final int id) {
-        super(argument, children, description, id, required);
-
-        this.shortPrefix = shortPrefix;
-        this.burstEnabled = burstEnabled;
-
-        this.burstLength = shortPrefix.length() + 1;
-
-        this.preferredName = preferredName;
-        this.aliases =
-            (aliases == null) ? Collections.EMPTY_SET
-                              : Collections.unmodifiableSet(new HashSet(aliases));
-
-        this.burstAliases =
-            (burstAliases == null) ? Collections.EMPTY_SET
-                                   : Collections.unmodifiableSet(new HashSet(burstAliases));
-
-        final Set newTriggers = new HashSet();
-        newTriggers.add(preferredName);
-        newTriggers.addAll(this.aliases);
-        newTriggers.addAll(this.burstAliases);
-        this.triggers = Collections.unmodifiableSet(newTriggers);
-
-        final Set newPrefixes = new HashSet(super.getPrefixes());
-        newPrefixes.add(shortPrefix);
-        newPrefixes.add(longPrefix);
-        this.prefixes = Collections.unmodifiableSet(newPrefixes);
-
-        checkPrefixes(newPrefixes);
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String argument) {
-        return (argument != null) &&
-               (super.canProcess(commandLine, argument) ||
-               ((argument.length() >= burstLength) &&
-               burstAliases.contains(argument.substring(0, burstLength))));
-    }
-
-    public void processParent(WriteableCommandLine commandLine,
-                              ListIterator arguments)
-        throws OptionException {
-        final String argument = (String) arguments.next();
-
-        if (triggers.contains(argument)) {
-            commandLine.addOption(this);
-            arguments.set(preferredName);
-        } else if (burstEnabled && (argument.length() >= burstLength)) {
-            final String burst = argument.substring(0, burstLength);
-
-            if (burstAliases.contains(burst)) {
-                commandLine.addOption(this);
-
-                //HMM test bursting all vs bursting one by one.
-                arguments.set(preferredName);
-
-                if (getArgument() == null) {
-                    arguments.add(shortPrefix + argument.substring(burstLength));
-                } else {
-                    arguments.add(argument.substring(burstLength));
-                }
-
-                arguments.previous();
-            } else {
-                throw new OptionException(this, ResourceConstants.CANNOT_BURST, argument);
-            }
-        } else {
-            throw new OptionException(this, ResourceConstants.UNEXPECTED_TOKEN, argument);
-        }
-    }
-
-    public Set getTriggers() {
-        return triggers;
-    }
-
-    public Set getPrefixes() {
-        return prefixes;
-    }
-
-    public void validate(WriteableCommandLine commandLine)
-        throws OptionException {
-        if (isRequired() && !commandLine.hasOption(this)) {
-            throw new OptionException(this, ResourceConstants.OPTION_MISSING_REQUIRED,
-                                      getPreferredName());
-        }
-
-        super.validate(commandLine);
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        // do we display optionality
-        final boolean optional =
-            !isRequired() && helpSettings.contains(DisplaySetting.DISPLAY_OPTIONAL);
-        final boolean displayAliases = helpSettings.contains(DisplaySetting.DISPLAY_ALIASES);
-
-        if (optional) {
-            buffer.append('[');
-        }
-
-        buffer.append(preferredName);
-
-        if (displayAliases && !aliases.isEmpty()) {
-            buffer.append(" (");
-
-            final List list = new ArrayList(aliases);
-            Collections.sort(list);
-
-            for (final Iterator i = list.iterator(); i.hasNext();) {
-                final String alias = (String) i.next();
-                buffer.append(alias);
-
-                if (i.hasNext()) {
-                    buffer.append(',');
-                }
-            }
-
-            buffer.append(')');
-        }
-
-        super.appendUsage(buffer, helpSettings, comp);
-
-        if (optional) {
-            buffer.append(']');
-        }
-    }
-
-    public String getPreferredName() {
-        return preferredName;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/GroupImpl.java b/src/java/org/apache/commons/cli2/option/GroupImpl.java
deleted file mode 100644
index eac83adc..00000000
--- a/src/java/org/apache/commons/cli2/option/GroupImpl.java
+++ /dev/null
@@ -1,516 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Map;
-import java.util.Set;
-import java.util.SortedMap;
-import java.util.TreeMap;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-
-/**
- * An implementation of Group
- */
-public class GroupImpl
-    extends OptionImpl implements Group {
-    private final String name;
-    private final String description;
-    private final List options;
-    private final int minimum;
-    private final int maximum;
-    private final List anonymous;
-    private final SortedMap optionMap;
-    private final Set prefixes;
-
-    /**
-     * Creates a new GroupImpl using the specified parameters.
-     *
-     * @param options the Options and Arguments that make up the Group
-     * @param name the name of this Group, or null
-     * @param description a description of this Group
-     * @param minimum the minimum number of Options for a valid CommandLine
-     * @param maximum the maximum number of Options for a valid CommandLine
-     */
-    public GroupImpl(final List options,
-                     final String name,
-                     final String description,
-                     final int minimum,
-                     final int maximum) {
-        super(0, false);
-
-        this.name = name;
-        this.description = description;
-        this.minimum = minimum;
-        this.maximum = maximum;
-
-        // store a copy of the options to be used by the 
-        // help methods
-        this.options = Collections.unmodifiableList(options);
-
-        // anonymous Argument temporary storage
-        final List newAnonymous = new ArrayList();
-
-        // map (key=trigger & value=Option) temporary storage
-        final SortedMap newOptionMap = new TreeMap(ReverseStringComparator.getInstance());
-
-        // prefixes temporary storage
-        final Set newPrefixes = new HashSet();
-
-        // process the options
-        for (final Iterator i = options.iterator(); i.hasNext();) {
-            final Option option = (Option) i.next();
-
-            if (option instanceof Argument) {
-                i.remove();
-                newAnonymous.add(option);
-            } else {
-                final Set triggers = option.getTriggers();
-
-                for (Iterator j = triggers.iterator(); j.hasNext();) {
-                    newOptionMap.put(j.next(), option);
-                }
-
-                // store the prefixes
-                newPrefixes.addAll(option.getPrefixes());
-            }
-        }
-
-        this.anonymous = Collections.unmodifiableList(newAnonymous);
-        this.optionMap = Collections.unmodifiableSortedMap(newOptionMap);
-        this.prefixes = Collections.unmodifiableSet(newPrefixes);
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String arg) {
-        if (arg == null) {
-            return false;
-        }
-
-        // if arg does not require bursting
-        if (optionMap.containsKey(arg)) {
-            return true;
-        }
-
-        // filter
-        final Map tailMap = optionMap.tailMap(arg);
-
-        // check if bursting is required
-        for (final Iterator iter = tailMap.values().iterator(); iter.hasNext();) {
-            final Option option = (Option) iter.next();
-
-            if (option.canProcess(commandLine, arg)) {
-                return true;
-            }
-        }
-
-        if (commandLine.looksLikeOption(arg)) {
-            return false;
-        }
-
-        // anonymous argument(s) means we can process it
-        if (anonymous.size() > 0) {
-            return true;
-        }
-
-        return false;
-    }
-
-    public Set getPrefixes() {
-        return prefixes;
-    }
-
-    public Set getTriggers() {
-        return optionMap.keySet();
-    }
-
-    public void process(final WriteableCommandLine commandLine,
-                        final ListIterator arguments)
-        throws OptionException {
-        String previous = null;
-
-        // [START process each command line token
-        while (arguments.hasNext()) {
-            // grab the next argument
-            final String arg = (String) arguments.next();
-
-            // if we have just tried to process this instance
-            if (arg == previous) {
-                // rollback and abort
-                arguments.previous();
-
-                break;
-            }
-
-            // remember last processed instance
-            previous = arg;
-
-            final Option opt = (Option) optionMap.get(arg);
-
-            // option found
-            if (opt != null) {
-                arguments.previous();
-                opt.process(commandLine, arguments);
-            }
-            // [START option NOT found
-            else {
-                // it might be an anonymous argument continue search
-                // [START argument may be anonymous
-                if (commandLine.looksLikeOption(arg)) {
-                    // narrow the search
-                    final Collection values = optionMap.tailMap(arg).values();
-
-                    boolean foundMemberOption = false;
-
-                    for (Iterator i = values.iterator(); i.hasNext() && !foundMemberOption;) {
-                        final Option option = (Option) i.next();
-
-                        if (option.canProcess(commandLine, arg)) {
-                            foundMemberOption = true;
-                            arguments.previous();
-                            option.process(commandLine, arguments);
-                        }
-                    }
-
-                    // back track and abort this group if necessary
-                    if (!foundMemberOption) {
-                        arguments.previous();
-
-                        return;
-                    }
-                } // [END argument may be anonymous
-
-                // [START argument is NOT anonymous
-                else {
-                    // move iterator back, current value not used
-                    arguments.previous();
-
-                    // if there are no anonymous arguments then this group can't
-                    // process the argument
-                    if (anonymous.isEmpty()) {
-                        break;
-                    }
-
-                    // TODO: why do we iterate over all anonymous arguments?
-                    // canProcess will always return true?
-                    for (final Iterator i = anonymous.iterator(); i.hasNext();) {
-                        final Argument argument = (Argument) i.next();
-
-                        if (argument.canProcess(commandLine, arguments)) {
-                            argument.process(commandLine, arguments);
-                        }
-                    }
-                } // [END argument is NOT anonymous
-            } // [END option NOT found
-        } // [END process each command line token
-    }
-
-    public void validate(final WriteableCommandLine commandLine)
-        throws OptionException {
-        // number of options found
-        int present = 0;
-
-        // reference to first unexpected option
-        Option unexpected = null;
-
-        for (final Iterator i = options.iterator(); i.hasNext();) {
-            final Option option = (Option) i.next();
-
-            // if the child option is required then validate it
-            if (option.isRequired()) {
-                option.validate(commandLine);
-            }
-
-            if (option instanceof Group) {
-                option.validate(commandLine);
-            }
-
-            // if the child option is present then validate it
-            if (commandLine.hasOption(option)) {
-                if (++present > maximum) {
-                    unexpected = option;
-
-                    break;
-                }
-
-                option.validate(commandLine);
-            }
-        }
-
-        // too many options
-        if (unexpected != null) {
-            throw new OptionException(this, ResourceConstants.UNEXPECTED_TOKEN,
-                                      unexpected.getPreferredName());
-        }
-
-        // too few option
-        if (present < minimum) {
-            throw new OptionException(this, ResourceConstants.MISSING_OPTION);
-        }
-
-        // validate each anonymous argument
-        for (final Iterator i = anonymous.iterator(); i.hasNext();) {
-            final Option option = (Option) i.next();
-            option.validate(commandLine);
-        }
-    }
-
-    public String getPreferredName() {
-        return name;
-    }
-
-    public String getDescription() {
-        return description;
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        appendUsage(buffer, helpSettings, comp, "|");
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp,
-                            final String separator) {
-        final Set helpSettingsCopy = new HashSet(helpSettings);
-
-        final boolean optional =
-            (minimum == 0) && helpSettingsCopy.contains(DisplaySetting.DISPLAY_OPTIONAL);
-
-        final boolean expanded =
-            (name == null) || helpSettingsCopy.contains(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-
-        final boolean named =
-            !expanded ||
-            ((name != null) && helpSettingsCopy.contains(DisplaySetting.DISPLAY_GROUP_NAME));
-
-        final boolean arguments = helpSettingsCopy.contains(DisplaySetting.DISPLAY_GROUP_ARGUMENT);
-
-        final boolean outer = helpSettingsCopy.contains(DisplaySetting.DISPLAY_GROUP_OUTER);
-
-        helpSettingsCopy.remove(DisplaySetting.DISPLAY_GROUP_OUTER);
-
-        final boolean both = named && expanded;
-
-        if (optional) {
-            buffer.append('[');
-        }
-
-        if (named) {
-            buffer.append(name);
-        }
-
-        if (both) {
-            buffer.append(" (");
-        }
-
-        if (expanded) {
-            final Set childSettings;
-
-            if (!helpSettingsCopy.contains(DisplaySetting.DISPLAY_GROUP_EXPANDED)) {
-                childSettings = DisplaySetting.NONE;
-            } else {
-                childSettings = new HashSet(helpSettingsCopy);
-                childSettings.remove(DisplaySetting.DISPLAY_OPTIONAL);
-            }
-
-            // grab a list of the group's options.
-            final List list;
-
-            if (comp == null) {
-                // default to using the initial order
-                list = options;
-            } else {
-                // sort options if comparator is supplied
-                list = new ArrayList(options);
-                Collections.sort(list, comp);
-            }
-
-            // for each option.
-            for (final Iterator i = list.iterator(); i.hasNext();) {
-                final Option option = (Option) i.next();
-
-                // append usage information
-                option.appendUsage(buffer, childSettings, comp);
-
-                // add separators as needed
-                if (i.hasNext()) {
-                    buffer.append(separator);
-                }
-            }
-        }
-
-        if (both) {
-            buffer.append(')');
-        }
-
-        if (optional && outer) {
-            buffer.append(']');
-        }
-
-        if (arguments) {
-            for (final Iterator i = anonymous.iterator(); i.hasNext();) {
-                buffer.append(' ');
-
-                final Option option = (Option) i.next();
-                option.appendUsage(buffer, helpSettingsCopy, comp);
-            }
-        }
-
-        if (optional && !outer) {
-            buffer.append(']');
-        }
-    }
-
-    public List helpLines(final int depth,
-                          final Set helpSettings,
-                          final Comparator comp) {
-        final List helpLines = new ArrayList();
-
-        if (helpSettings.contains(DisplaySetting.DISPLAY_GROUP_NAME)) {
-            final HelpLine helpLine = new HelpLineImpl(this, depth);
-            helpLines.add(helpLine);
-        }
-
-        if (helpSettings.contains(DisplaySetting.DISPLAY_GROUP_EXPANDED)) {
-            // grab a list of the group's options.
-            final List list;
-
-            if (comp == null) {
-                // default to using the initial order
-                list = options;
-            } else {
-                // sort options if comparator is supplied
-                list = new ArrayList(options);
-                Collections.sort(list, comp);
-            }
-
-            // for each option
-            for (final Iterator i = list.iterator(); i.hasNext();) {
-                final Option option = (Option) i.next();
-                helpLines.addAll(option.helpLines(depth + 1, helpSettings, comp));
-            }
-        }
-
-        if (helpSettings.contains(DisplaySetting.DISPLAY_GROUP_ARGUMENT)) {
-            for (final Iterator i = anonymous.iterator(); i.hasNext();) {
-                final Option option = (Option) i.next();
-                helpLines.addAll(option.helpLines(depth + 1, helpSettings, comp));
-            }
-        }
-
-        return helpLines;
-    }
-
-    /**
-     * Gets the member Options of thie Group.
-     * Note this does not include any Arguments
-     * @return only the non Argument Options of the Group
-     */
-    public List getOptions() {
-        return options;
-    }
-
-    /**
-     * Gets the anonymous Arguments of this Group.
-     * @return the Argument options of this Group
-     */
-    public List getAnonymous() {
-        return anonymous;
-    }
-
-    public Option findOption(final String trigger) {
-        final Iterator i = getOptions().iterator();
-
-        while (i.hasNext()) {
-            final Option option = (Option) i.next();
-            final Option found = option.findOption(trigger);
-
-            if (found != null) {
-                return found;
-            }
-        }
-
-        return null;
-    }
-
-    public int getMinimum() {
-        return minimum;
-    }
-
-    public int getMaximum() {
-        return maximum;
-    }
-
-    public boolean isRequired() {
-        return getMinimum() > 0;
-    }
-
-    public void defaults(final WriteableCommandLine commandLine) {
-        super.defaults(commandLine);
-
-        for (final Iterator i = options.iterator(); i.hasNext();) {
-            final Option option = (Option) i.next();
-            option.defaults(commandLine);
-        }
-
-        for (final Iterator i = anonymous.iterator(); i.hasNext();) {
-            final Option option = (Option) i.next();
-            option.defaults(commandLine);
-        }
-    }
-}
-
-
-class ReverseStringComparator implements Comparator {
-    private static final Comparator instance = new ReverseStringComparator();
-
-    private ReverseStringComparator() {
-        // just making sure nobody else creates one
-    }
-
-    /**
-     * Gets a singleton instance of a ReverseStringComparator
-     * @return the singleton instance
-     */
-    public static final Comparator getInstance() {
-        return instance;
-    }
-
-    public int compare(final Object o1,
-                       final Object o2) {
-        final String s1 = (String) o1;
-        final String s2 = (String) o2;
-
-        return -s1.compareTo(s2);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/HelpLineImpl.java b/src/java/org/apache/commons/cli2/option/HelpLineImpl.java
deleted file mode 100644
index 70a1dd5a..00000000
--- a/src/java/org/apache/commons/cli2/option/HelpLineImpl.java
+++ /dev/null
@@ -1,109 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.Comparator;
-import java.util.Set;
-
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-
-/**
- * Represents a line in the help screen.
- */
-public class HelpLineImpl implements HelpLine {
-
-    /** The option that this HelpLineImpl describes */
-    private final Option option;
-
-    /** The level of indenting for this item */
-    private final int indent;
-
-    /** The help settings used to obtain the previous usage */
-    private transient Set cachedHelpSettings;
-    
-    /** The comparator used to obtain the previous usage */
-    private transient Comparator cachedComparator;
-    
-    /** The previously obtained usage */
-    private transient String cachedUsage;
-    
-    /**
-     * Creates a new HelpLineImpl to represent a particular Option in the online
-     * help.
-     * 
-     * @param option
-     *            Option that the HelpLineImpl describes
-     * @param indent
-     *            Level of indentation for this line
-     */
-    public HelpLineImpl(final Option option, final int indent) {
-        this.option = option;
-        this.indent = indent;
-    }
-
-    /**
-     * @return The description of the option
-     */
-    public String getDescription() {
-        return option.getDescription();
-    }
-
-    /**
-     * @return The level of indentation for this line
-     */
-    public int getIndent() {
-        return indent;
-    }
-
-    /**
-     * @return The Option that the help line relates to
-     */
-    public Option getOption() {
-        return option;
-    }
-    
-    /**
-     * Builds a usage string for the option using the specified settings and 
-     * comparator.
-     * 
-     *  
-     * @param helpSettings the settings to apply
-     * @param comparator a comparator to sort options when applicable
-     * @return the usage string
-     */
-    public String usage(final Set helpSettings, final Comparator comparator) {
-        if (cachedUsage == null
-            || cachedHelpSettings != helpSettings
-            || cachedComparator != comparator) {
-            
-            // cache the arguments to avoid redoing work
-            cachedHelpSettings = helpSettings;
-            cachedComparator = comparator;
-            
-            // build the new buffer
-            final StringBuffer buffer = new StringBuffer();
-            for (int i = 0; i < indent; ++i) {
-                buffer.append("  ");
-            }
-            option.appendUsage(buffer, helpSettings, comparator);
-            
-            // cache the usage string
-            cachedUsage = buffer.toString();
-        }
-        return cachedUsage;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/OptionImpl.java b/src/java/org/apache/commons/cli2/option/OptionImpl.java
deleted file mode 100644
index 3b6c6be0..00000000
--- a/src/java/org/apache/commons/cli2/option/OptionImpl.java
+++ /dev/null
@@ -1,158 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.Iterator;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * A base implementation of Option providing limited ground work for further
- * Option implementations.
- */
-public abstract class OptionImpl implements Option {
-    private final int id;
-    private final boolean required;
-
-    /**
-     * Creates an OptionImpl with the specified id
-     * @param id the unique id of this Option
-     * @param required true iff this Option must be present
-     */
-    public OptionImpl(final int id,
-                      final boolean required) {
-        this.id = id;
-        this.required = required;
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final ListIterator arguments) {
-        if (arguments.hasNext()) {
-            final String argument = (String) arguments.next();
-            arguments.previous();
-
-            return canProcess(commandLine, argument);
-        } else {
-            return false;
-        }
-    }
-
-    public String toString() {
-        final StringBuffer buffer = new StringBuffer();
-        appendUsage(buffer, DisplaySetting.ALL, null);
-
-        return buffer.toString();
-    }
-
-    public int getId() {
-        return id;
-    }
-
-    public boolean equals(final Object thatObj) {
-        if (thatObj instanceof OptionImpl) {
-            final OptionImpl that = (OptionImpl) thatObj;
-
-            return (getId() == that.getId()) &&
-                   equals(getPreferredName(), that.getPreferredName()) &&
-                   equals(getDescription(), that.getDescription()) &&
-                   equals(getPrefixes(), that.getPrefixes()) &&
-                   equals(getTriggers(), that.getTriggers());
-        } else {
-            return false;
-        }
-    }
-
-    private boolean equals(Object left,
-                           Object right) {
-        if ((left == null) && (right == null)) {
-            return true;
-        } else if ((left == null) || (right == null)) {
-            return false;
-        } else {
-            return left.equals(right);
-        }
-    }
-
-    public int hashCode() {
-        int hashCode = getId();
-        hashCode = (hashCode * 37) + getPreferredName().hashCode();
-
-        if (getDescription() != null) {
-            hashCode = (hashCode * 37) + getDescription().hashCode();
-        }
-
-        hashCode = (hashCode * 37) + getPrefixes().hashCode();
-        hashCode = (hashCode * 37) + getTriggers().hashCode();
-
-        return hashCode;
-    }
-
-    public Option findOption(String trigger) {
-        if (getTriggers().contains(trigger)) {
-            return this;
-        } else {
-            return null;
-        }
-    }
-
-    public boolean isRequired() {
-        return required;
-    }
-
-    public void defaults(final WriteableCommandLine commandLine) {
-        // nothing to do normally
-    }
-
-    protected void checkPrefixes(final Set prefixes) {
-        // nothing to do if empty prefix list
-        if (prefixes.isEmpty()) {
-            return;
-        }
-
-        // check preferred name
-        checkPrefix(prefixes, getPreferredName());
-
-        // check triggers
-        this.getTriggers();
-
-        for (final Iterator i = getTriggers().iterator(); i.hasNext();) {
-            checkPrefix(prefixes, (String) i.next());
-        }
-    }
-
-    private void checkPrefix(final Set prefixes,
-                             final String trigger) {
-        for (final Iterator i = prefixes.iterator(); i.hasNext();) {
-            String prefix = (String) i.next();
-
-            if (trigger.startsWith(prefix)) {
-                return;
-            }
-        }
-
-        final ResourceHelper helper = ResourceHelper.getResourceHelper();
-        final String message =
-            helper.getMessage(ResourceConstants.OPTION_TRIGGER_NEEDS_PREFIX, trigger,
-                              prefixes.toString());
-        throw new IllegalArgumentException(message);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/ParentImpl.java b/src/java/org/apache/commons/cli2/option/ParentImpl.java
deleted file mode 100644
index 7b58a7d5..00000000
--- a/src/java/org/apache/commons/cli2/option/ParentImpl.java
+++ /dev/null
@@ -1,250 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.Parent;
-import org.apache.commons.cli2.WriteableCommandLine;
-
-/**
- * A base implementation of Parent providing limited ground work for further
- * Parent implementations.
- */
-public abstract class ParentImpl
-    extends OptionImpl implements Parent {
-    private static final char NUL = '\0';
-    private final Group children;
-    private final Argument argument;
-    private final String description;
-
-    protected ParentImpl(final Argument argument,
-                         final Group children,
-                         final String description,
-                         final int id,
-                         final boolean required) {
-        super(id, required);
-        this.children = children;
-        this.argument = argument;
-        this.description = description;
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#process(org.apache.commons.cli2.CommandLine,
-     *      java.util.ListIterator)
-     */
-    public void process(final WriteableCommandLine commandLine,
-                        final ListIterator arguments)
-        throws OptionException {
-        if (argument != null) {
-            handleInitialSeparator(arguments, argument.getInitialSeparator());
-        }
-
-        processParent(commandLine, arguments);
-
-        if (argument != null) {
-            argument.processValues(commandLine, arguments, this);
-        }
-
-        if ((children != null) && children.canProcess(commandLine, arguments)) {
-            children.process(commandLine, arguments);
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#canProcess(java.lang.String)
-     */
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String arg) {
-        final Set triggers = getTriggers();
-
-        if (argument != null) {
-            final char separator = argument.getInitialSeparator();
-
-            // if there is a valid separator character
-            if (separator != NUL) {
-                final int initialIndex = arg.indexOf(separator);
-
-                // if there is a separator present
-                if (initialIndex > 0) {
-                    return triggers.contains(arg.substring(0, initialIndex));
-                }
-            }
-        }
-
-        return triggers.contains(arg);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#prefixes()
-     */
-    public Set getPrefixes() {
-        return (children == null) ? Collections.EMPTY_SET : children.getPrefixes();
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#validate(org.apache.commons.cli2.CommandLine)
-     */
-    public void validate(WriteableCommandLine commandLine)
-        throws OptionException {
-        if (commandLine.hasOption(this)) {
-            if (argument != null) {
-                argument.validate(commandLine, this);
-            }
-
-            if (children != null) {
-                children.validate(commandLine);
-            }
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#appendUsage(java.lang.StringBuffer,
-     *      java.util.Set, java.util.Comparator)
-     */
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        final boolean displayArgument =
-            (this.argument != null) &&
-            helpSettings.contains(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        final boolean displayChildren =
-            (this.children != null) &&
-            helpSettings.contains(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-
-        if (displayArgument) {
-            buffer.append(' ');
-            argument.appendUsage(buffer, helpSettings, comp);
-        }
-
-        if (displayChildren) {
-            buffer.append(' ');
-            children.appendUsage(buffer, helpSettings, comp);
-        }
-    }
-
-    /**
-     * @return a description of this parent option
-     */
-    public String getDescription() {
-        return description;
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.Option#helpLines(int, java.util.Set,
-     *      java.util.Comparator)
-     */
-    public List helpLines(final int depth,
-                          final Set helpSettings,
-                          final Comparator comp) {
-        final List helpLines = new ArrayList();
-        helpLines.add(new HelpLineImpl(this, depth));
-
-        if (helpSettings.contains(DisplaySetting.DISPLAY_PARENT_ARGUMENT) && (argument != null)) {
-            helpLines.addAll(argument.helpLines(depth + 1, helpSettings, comp));
-        }
-
-        if (helpSettings.contains(DisplaySetting.DISPLAY_PARENT_CHILDREN) && (children != null)) {
-            helpLines.addAll(children.helpLines(depth + 1, helpSettings, comp));
-        }
-
-        return helpLines;
-    }
-
-    /**
-     * @return Returns the argument.
-     */
-    public Argument getArgument() {
-        return argument;
-    }
-
-    /**
-     * @return Returns the children.
-     */
-    public Group getChildren() {
-        return children;
-    }
-
-    /**
-     * Split the token using the specified separator character.
-     * @param arguments the current position in the arguments iterator
-     * @param separator the separator char to split on
-     */
-    private void handleInitialSeparator(final ListIterator arguments,
-                                        final char separator) {
-        // next token
-        final String newArgument = (String) arguments.next();
-
-        // split the token
-        final int initialIndex = newArgument.indexOf(separator);
-
-        if (initialIndex > 0) {
-            arguments.remove();
-            arguments.add(newArgument.substring(0, initialIndex));
-            arguments.add(newArgument.substring(initialIndex + 1));
-            arguments.previous();
-        }
-
-        arguments.previous();
-    }
-
-    /*
-     * @see org.apache.commons.cli2.Option#findOption(java.lang.String)
-     */
-    public Option findOption(final String trigger) {
-        final Option found = super.findOption(trigger);
-
-        if ((found == null) && (children != null)) {
-            return children.findOption(trigger);
-        } else {
-            return found;
-        }
-    }
-
-    public void defaults(final WriteableCommandLine commandLine) {
-        super.defaults(commandLine);
-
-        if (argument != null) {
-            argument.defaultValues(commandLine, this);
-        }
-
-        if (children != null) {
-            children.defaults(commandLine);
-        }
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/PropertyOption.java b/src/java/org/apache/commons/cli2/option/PropertyOption.java
deleted file mode 100644
index 7575d842..00000000
--- a/src/java/org/apache/commons/cli2/option/PropertyOption.java
+++ /dev/null
@@ -1,166 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-
-/**
- * Handles the java style "-Dprop=value" opions
- */
-public class PropertyOption
-    extends OptionImpl {
-    public static final String DEFAULT_OPTION_STRING = "-D";
-    public static final String DEFAULT_DESCRIPTION =
-        "Passes properties and values to the application";
-
-    /**
-     * A default PropertyOption instance
-     */
-    public static final PropertyOption INSTANCE = new PropertyOption();
-    private final String optionString;
-    private final String description;
-    private final Set prefixes;
-
-    /**
-     * Creates a new PropertyOption using the default settings of a "-D" trigger
-     * and an id of 'D'
-     */
-    public PropertyOption() {
-        this(DEFAULT_OPTION_STRING, DEFAULT_DESCRIPTION, 'D');
-    }
-
-    /**
-     * Creates a new PropertyOption using the specified parameters
-     * @param optionString the trigger for the Option
-     * @param description the description of the Option
-     * @param id the id of the Option
-     */
-    public PropertyOption(final String optionString,
-                          final String description,
-                          final int id) {
-        super(id, false);
-        this.optionString = optionString;
-        this.description = description;
-        this.prefixes = Collections.singleton(optionString);
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String argument) {
-        return (argument != null) && argument.startsWith(optionString) &&
-               (argument.length() > optionString.length());
-    }
-
-    public Set getPrefixes() {
-        return prefixes;
-    }
-
-    public void process(final WriteableCommandLine commandLine,
-                        final ListIterator arguments)
-        throws OptionException {
-        final String arg = (String) arguments.next();
-
-        if (!canProcess(commandLine, arg)) {
-            throw new OptionException(this, ResourceConstants.UNEXPECTED_TOKEN, arg);
-        }
-
-        final int propertyStart = optionString.length();
-        final int equalsIndex = arg.indexOf('=', propertyStart);
-        final String property;
-        final String value;
-
-        if (equalsIndex < 0) {
-            property = arg.substring(propertyStart);
-            value = "true";
-        } else {
-            property = arg.substring(propertyStart, equalsIndex);
-            value = arg.substring(equalsIndex + 1);
-        }
-
-        commandLine.addProperty(property, value);
-    }
-
-    public Set getTriggers() {
-        return Collections.singleton(optionString);
-    }
-
-    public void validate(WriteableCommandLine commandLine) {
-        // PropertyOption needs no validation
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        final boolean display = helpSettings.contains(DisplaySetting.DISPLAY_PROPERTY_OPTION);
-
-        final boolean bracketed = helpSettings.contains(DisplaySetting.DISPLAY_ARGUMENT_BRACKETED);
-
-        if (display) {
-            buffer.append(optionString);
-
-            if (bracketed) {
-                buffer.append('<');
-            }
-
-            buffer.append("property");
-
-            if (bracketed) {
-                buffer.append('>');
-            }
-
-            buffer.append("=");
-
-            if (bracketed) {
-                buffer.append('<');
-            }
-
-            buffer.append("value");
-
-            if (bracketed) {
-                buffer.append('>');
-            }
-        }
-    }
-
-    public String getPreferredName() {
-        return optionString;
-    }
-
-    public String getDescription() {
-        return description;
-    }
-
-    public List helpLines(final int depth,
-                          final Set helpSettings,
-                          final Comparator comp) {
-        if (helpSettings.contains(DisplaySetting.DISPLAY_PROPERTY_OPTION)) {
-            final HelpLine helpLine = new HelpLineImpl(this, depth);
-
-            return Collections.singletonList(helpLine);
-        } else {
-            return Collections.EMPTY_LIST;
-        }
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/SourceDestArgument.java b/src/java/org/apache/commons/cli2/option/SourceDestArgument.java
deleted file mode 100644
index d6d440da..00000000
--- a/src/java/org/apache/commons/cli2/option/SourceDestArgument.java
+++ /dev/null
@@ -1,137 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Comparator;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * An Argument implementation that allows a variable size Argument to precede a
- * fixed size argument.  The canonical example of it's use is in the unix
- * <code>cp</code> command where a number of source can be specified with
- * exactly one destination specfied at the end.
- */
-public class SourceDestArgument
-    extends ArgumentImpl {
-    private final Argument source;
-    private final Argument dest;
-
-    /**
-     * Creates a SourceDestArgument using defaults where possible.
-     *
-     * @param source the variable size Argument
-     * @param dest the fixed size Argument
-     */
-    public SourceDestArgument(final Argument source,
-                              final Argument dest) {
-        this(source, dest, DEFAULT_INITIAL_SEPARATOR, DEFAULT_SUBSEQUENT_SEPARATOR,
-             DEFAULT_CONSUME_REMAINING, null);
-    }
-
-    /**
-     * Creates a SourceDestArgument using the specified parameters.
-     *
-     * @param source the variable size Argument
-     * @param dest the fixed size Argument
-     * @param initialSeparator the inistial separator to use
-     * @param subsequentSeparator the subsequent separator to use
-     * @param consumeRemaining the token triggering consume remaining behaviour
-     * @param defaultValues the default values for the SourceDestArgument
-     */
-    public SourceDestArgument(final Argument source,
-                              final Argument dest,
-                              final char initialSeparator,
-                              final char subsequentSeparator,
-                              final String consumeRemaining,
-                              final List defaultValues) {
-        super("SourceDestArgument", null, sum(source.getMinimum(), dest.getMinimum()),
-              sum(source.getMaximum(), dest.getMaximum()), initialSeparator, subsequentSeparator,
-              null, consumeRemaining, defaultValues, 0);
-
-        this.source = source;
-        this.dest = dest;
-
-        if (dest.getMinimum() != dest.getMaximum()) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SOURCE_DEST_MUST_ENFORCE_VALUES));
-        }
-    }
-
-    private static int sum(final int a,
-                           final int b) {
-        return Math.max(a, Math.max(b, a + b));
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        final int length = buffer.length();
-
-        source.appendUsage(buffer, helpSettings, comp);
-
-        if (buffer.length() != length) {
-            buffer.append(' ');
-        }
-
-        dest.appendUsage(buffer, helpSettings, comp);
-    }
-
-    public List helpLines(int depth,
-                          Set helpSettings,
-                          Comparator comp) {
-        final List helpLines = new ArrayList();
-        helpLines.addAll(source.helpLines(depth, helpSettings, comp));
-        helpLines.addAll(dest.helpLines(depth, helpSettings, comp));
-
-        return helpLines;
-    }
-
-    public void validate(WriteableCommandLine commandLine,
-                         Option option)
-        throws OptionException {
-        final List values = commandLine.getValues(option);
-
-        final int limit = values.size() - dest.getMinimum();
-        int count = 0;
-
-        final Iterator i = values.iterator();
-
-        while (count++ < limit) {
-            commandLine.addValue(source, i.next());
-        }
-
-        while (i.hasNext()) {
-            commandLine.addValue(dest, i.next());
-        }
-
-        source.validate(commandLine, source);
-        dest.validate(commandLine, dest);
-    }
-
-    public boolean canProcess(final WriteableCommandLine commandLine,
-                              final String arg) {
-        return source.canProcess(commandLine, arg) || dest.canProcess(commandLine, arg);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/option/Switch.java b/src/java/org/apache/commons/cli2/option/Switch.java
deleted file mode 100644
index 3c30e265..00000000
--- a/src/java/org/apache/commons/cli2/option/Switch.java
+++ /dev/null
@@ -1,247 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * A Parent implementation representing normal switch options.
- * For example: <code>+d|-d</code> or <code>--enable-x|--disable-x</code>.
- */
-public class Switch
-    extends ParentImpl {
-    /** i18n */
-    public static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    /**
-     * The default prefix for enabled switches
-     */
-    public static final String DEFAULT_ENABLED_PREFIX = "+";
-
-    /**
-     * The default prefix for disabled switches
-     */
-    public static final String DEFAULT_DISABLED_PREFIX = "-";
-    private final String enabledPrefix;
-    private final String disabledPrefix;
-    private final Set triggers;
-    private final String preferredName;
-    private final Set aliases;
-    private final Set prefixes;
-    private final Boolean defaultSwitch;
-
-    /**
-     * Creates a new Switch with the specified parameters
-     * @param enabledPrefix the prefix used for enabled switches
-     * @param disabledPrefix the prefix used for disabled switches
-     * @param preferredName the preferred name of the switch
-     * @param aliases the aliases by which the Switch is known
-     * @param description a description of the Switch
-     * @param required whether the Option is strictly required
-     * @param argument the Argument belonging to this Parent, or null
-     * @param children the Group children belonging to this Parent, ot null
-     * @param id the unique identifier for this Option
-     * @throws IllegalArgumentException if the preferredName or an alias isn't
-     *     prefixed with enabledPrefix or disabledPrefix
-     */
-    public Switch(final String enabledPrefix,
-                  final String disabledPrefix,
-                  final String preferredName,
-                  final Set aliases,
-                  final String description,
-                  final boolean required,
-                  final Argument argument,
-                  final Group children,
-                  final int id,
-                  final Boolean switchDefault) {
-        super(argument, children, description, id, required);
-
-        if (enabledPrefix == null) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.SWITCH_NO_ENABLED_PREFIX));
-        }
-
-        if (disabledPrefix == null) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.SWITCH_NO_DISABLED_PREFIX));
-        }
-
-        if (enabledPrefix.startsWith(disabledPrefix)) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.SWITCH_ENABLED_STARTS_WITH_DISABLED));
-        }
-
-        if (disabledPrefix.startsWith(enabledPrefix)) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.SWITCH_DISABLED_STARTWS_WITH_ENABLED));
-        }
-
-        this.enabledPrefix = enabledPrefix;
-        this.disabledPrefix = disabledPrefix;
-        this.preferredName = preferredName;
-
-        if ((preferredName == null) || (preferredName.length() < 1)) {
-            throw new IllegalArgumentException(resources.getMessage(ResourceConstants.SWITCH_PREFERRED_NAME_TOO_SHORT));
-        }
-
-        final Set newTriggers = new HashSet();
-        newTriggers.add(enabledPrefix + preferredName);
-        newTriggers.add(disabledPrefix + preferredName);
-        this.triggers = Collections.unmodifiableSet(newTriggers);
-
-        if (aliases == null) {
-            this.aliases = Collections.EMPTY_SET;
-        } else {
-            this.aliases = Collections.unmodifiableSet(new HashSet(aliases));
-
-            for (final Iterator i = aliases.iterator(); i.hasNext();) {
-                final String alias = (String) i.next();
-                newTriggers.add(enabledPrefix + alias);
-                newTriggers.add(disabledPrefix + alias);
-            }
-        }
-
-        final Set newPrefixes = new HashSet(super.getPrefixes());
-        newPrefixes.add(enabledPrefix);
-        newPrefixes.add(disabledPrefix);
-        this.prefixes = Collections.unmodifiableSet(newPrefixes);
-
-        this.defaultSwitch = switchDefault;
-
-        checkPrefixes(newPrefixes);
-    }
-
-    public void processParent(final WriteableCommandLine commandLine,
-                              final ListIterator arguments)
-        throws OptionException {
-        final String arg = (String) arguments.next();
-
-        if (canProcess(commandLine, arg)) {
-            if (arg.startsWith(enabledPrefix)) {
-                commandLine.addSwitch(this, true);
-                arguments.set(enabledPrefix + preferredName);
-            }
-
-            if (arg.startsWith(disabledPrefix)) {
-                commandLine.addSwitch(this, false);
-                arguments.set(disabledPrefix + preferredName);
-            }
-        } else {
-            throw new OptionException(this, ResourceConstants.UNEXPECTED_TOKEN, arg);
-        }
-    }
-
-    public Set getTriggers() {
-        return triggers;
-    }
-
-    public Set getPrefixes() {
-        return prefixes;
-    }
-
-    public void validate(WriteableCommandLine commandLine)
-        throws OptionException {
-        if (isRequired() && !commandLine.hasOption(this)) {
-            throw new OptionException(this, ResourceConstants.OPTION_MISSING_REQUIRED,
-                                      getPreferredName());
-        }
-
-        super.validate(commandLine);
-    }
-
-    public void appendUsage(final StringBuffer buffer,
-                            final Set helpSettings,
-                            final Comparator comp) {
-        // do we display optionality
-        final boolean optional =
-            !isRequired() && helpSettings.contains(DisplaySetting.DISPLAY_OPTIONAL);
-        final boolean displayAliases = helpSettings.contains(DisplaySetting.DISPLAY_ALIASES);
-        final boolean disabled = helpSettings.contains(DisplaySetting.DISPLAY_SWITCH_DISABLED);
-        final boolean enabled =
-            !disabled || helpSettings.contains(DisplaySetting.DISPLAY_SWITCH_ENABLED);
-        final boolean both = disabled && enabled;
-
-        if (optional) {
-            buffer.append('[');
-        }
-
-        if (enabled) {
-            buffer.append(enabledPrefix).append(preferredName);
-        }
-
-        if (both) {
-            buffer.append('|');
-        }
-
-        if (disabled) {
-            buffer.append(disabledPrefix).append(preferredName);
-        }
-
-        if (displayAliases && !aliases.isEmpty()) {
-            buffer.append(" (");
-
-            final List list = new ArrayList(aliases);
-            Collections.sort(list);
-
-            for (final Iterator i = list.iterator(); i.hasNext();) {
-                final String alias = (String) i.next();
-
-                if (enabled) {
-                    buffer.append(enabledPrefix).append(alias);
-                }
-
-                if (both) {
-                    buffer.append('|');
-                }
-
-                if (disabled) {
-                    buffer.append(disabledPrefix).append(alias);
-                }
-
-                if (i.hasNext()) {
-                    buffer.append(',');
-                }
-            }
-
-            buffer.append(')');
-        }
-
-        super.appendUsage(buffer, helpSettings, comp);
-
-        if (optional) {
-            buffer.append(']');
-        }
-    }
-
-    public String getPreferredName() {
-        return enabledPrefix + preferredName;
-    }
-
-    public void defaults(final WriteableCommandLine commandLine) {
-        commandLine.setDefaultSwitch(this, defaultSwitch);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/resource/CLIMessageBundle_en_US.properties b/src/java/org/apache/commons/cli2/resource/CLIMessageBundle_en_US.properties
deleted file mode 100644
index 81121984..00000000
--- a/src/java/org/apache/commons/cli2/resource/CLIMessageBundle_en_US.properties
+++ /dev/null
@@ -1,57 +0,0 @@
-ClassValidator.bad.classname = The class name "{0}" is invalid.
-ClassValidator.class.notfound = The class "{0}" could not be found.
-ClassValidator.class.access = The class "{0}" could not be accessed.  Reason: {1}.
-ClassValidator.class.create = The class "{0}" could not be created.
-
-DateValidator.date.OutOfRange = Date ''{0}'' is out of range.
-
-NumberValidator.number.OutOfRange = Number ''{0}'' is out of range.
-
-URLValidator.malformed.URL = Cannot understand URL: ''{0}''.
-
-Argument.unexpected.value = Unexpected value "{0}" found while processing 
-Argument.minimum.exceeds.maximum = Minimum number of values must not exceed maximum number
-Argument.too.few.defaults = Not enough default values.
-Argument.too.many.defaults = Too many default values.
-Argument.missing.values = Missing value(s)
-Argument.too.many.values = More than one value was supplied.
-
-Option.trigger.needs.prefix = Trigger {0} must be prefixed with a value from {1}
-Option.missing.required = Missing required option
-Option.no.name = An option must have at least one name.
-Option.illegal.short.prefix = The shortPrefix MUST be at least 1 character long.
-Option.illegal.long.prefix = The longPrefix MUST be at least 1 character long.
-
-Command.preferredName.too.short = The preferredName MUST be at least 1 character long.
-
-SourceDest.must.enforce.values = The dest argument must enforce a fixed number of values.
-
-Switch.illegal.enabled.prefix = The enabledPrefix MUST be at least 1 character long.
-Switch.illegal.disabled.prefix = The disabledPrefix MUST be at least 1 character long.
-Switch.identical.prefixes = The disabledPrefix and enabledPrefix MUST be different.
-Switch.already.set = Switch already set.
-Switch.no.enabledPrefix = An enabledPrefix must be supplied.
-Switch.no.disabledPrefix = A disabledPrefix must be supplied.
-Switch.enabled.startsWith.disabled = The enabledPrefix cannot start the same as disabledPrefix.
-Switch.disabled.startsWith.enabled = The disabledPrefix cannot start the same as enabledPrefix.
-Switch.preferredName.too.short = The preferredName MUST be at least 1 character long.
-
-HelpFormatter.gutter.too.long = The gutter strings leave no space for output! \
-    Supply shorter gutters or more width.
-HelpFormatter.width.too.narrow = The HelpFormatter width is too narrow: "{0}".                
-          
-Enum.illegal.value =  ''{0}'' is not allowed.  Permitted values are: {1}
-                    
-Unexpected.token = Unexpected {0} while processing
-Missing.option = Missing option
-Cannot.burst = Could not burst "{0}" while processing 
-
-ArgumentBuilder.null.consume.remaining = Cannot use 'null' as the consume remaining token.
-ArgumentBuilder.empty.consume.remaining = Cannot use an empty string as the consume remaining token.
-ArgumentBuilder.null.defaults = Cannot use 'null' defaults.
-ArgumentBuilder.null.default = Cannot use 'null' default.
-ArgumentBuilder.negative.maximum = Cannot use a negative maximum value.
-ArgumentBuilder.negative.minimum = Cannot use a negative minimum value.
-ArgumentBuilder.null.name = Cannot use 'null' as a name.
-ArgumentBuilder.empty.name = Cannot use an empty string as a name.
-ArgumentBuilder.null.validator = Cannot use 'null' as a validator.
diff --git a/src/java/org/apache/commons/cli2/resource/ResourceConstants.java b/src/java/org/apache/commons/cli2/resource/ResourceConstants.java
deleted file mode 100644
index 2db366a9..00000000
--- a/src/java/org/apache/commons/cli2/resource/ResourceConstants.java
+++ /dev/null
@@ -1,67 +0,0 @@
-/*
- * Copyright 2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.resource;
-
-public abstract class ResourceConstants {
-    public static final String CLASSVALIDATOR_BAD_CLASSNAME = "ClassValidator.bad.classname";
-    public static final String CLASSVALIDATOR_CLASS_NOTFOUND = "ClassValidator.class.notfound";
-    public static final String CLASSVALIDATOR_CLASS_ACCESS = "ClassValidator.class.access";
-    public static final String CLASSVALIDATOR_CLASS_CREATE = "ClassValidator.class.create";
-    public static final String DATEVALIDATOR_DATE_OUTOFRANGE = "DateValidator.date.OutOfRange";
-    public static final String URLVALIDATOR_MALFORMED_URL = "URLValidator.malformed.URL";
-    public static final String NUMBERVALIDATOR_NUMBER_OUTOFRANGE =
-        "NumberValidator.number.OutOfRange";
-    public static final String ARGUMENT_UNEXPECTED_VALUE = "Argument.unexpected.value";
-    public static final String ARGUMENT_MIN_EXCEEDS_MAX = "Argument.minimum.exceeds.maximum";
-    public static final String ARGUMENT_TOO_FEW_DEFAULTS = "Argument.too.few.defaults";
-    public static final String ARGUMENT_TOO_MANY_DEFAULTS = "Argument.too.many.defaults";
-    public static final String ARGUMENT_MISSING_VALUES = "Argument.missing.values";
-    public static final String ARGUMENT_TOO_MANY_VALUES = "Argument.too.many.values";
-    public static final String OPTION_TRIGGER_NEEDS_PREFIX = "Option.trigger.needs.prefix";
-    public static final String OPTION_MISSING_REQUIRED = "Option.missing.required";
-    public static final String OPTION_NO_NAME = "Option.no.name";
-    public static final String OPTION_ILLEGAL_LONG_PREFIX = "Option.illegal.long.prefix";
-    public static final String OPTION_ILLEGAL_SHORT_PREFIX = "Option.illegal.short.prefix";
-    public static final String UNEXPECTED_TOKEN = "Unexpected.token";
-    public static final String MISSING_OPTION = "Missing.option";
-    public static final String CANNOT_BURST = "Cannot.burst";
-    public static final String COMMAND_PREFERRED_NAME_TOO_SHORT = "Command.preferredName.too.short";
-    public static final String SWITCH_ILLEGAL_ENABLED_PREFIX = "Option.illegal.enabled.prefix";
-    public static final String SWITCH_ILLEGAL_DISABLED_PREFIX = "Option.illegal.disabled.prefix";
-    public static final String SWITCH_IDENTICAL_PREFIXES = "Option.identical.prefixes";
-    public static final String SWITCH_ALREADY_SET = "Switch.already.set";
-    public static final String SWITCH_NO_ENABLED_PREFIX = "Switch.no.enabledPrefix";
-    public static final String SWITCH_NO_DISABLED_PREFIX = "Switch.no.disabledPrefix";
-    public static final String SWITCH_ENABLED_STARTS_WITH_DISABLED =
-        "Switch.enabled.startsWith.disabled";
-    public static final String SWITCH_DISABLED_STARTWS_WITH_ENABLED =
-        "Switch.disabled.startsWith.enabled";
-    public static final String SWITCH_PREFERRED_NAME_TOO_SHORT = "Switch.preferredName.too.short";
-    public static final String SOURCE_DEST_MUST_ENFORCE_VALUES = "SourceDest.must.enforce.values";
-    public static final String HELPFORMATTER_GUTTER_TOO_LONG = "HelpFormatter.gutter.too.long";
-    public static final String HELPFORMATTER_WIDTH_TOO_NARROW = "HelpFormatter.width.too.narrow";
-    public static final String ENUM_ILLEGAL_VALUE = "Enum.illegal.value";
-    public static final String ARGUMENT_BUILDER_NULL_CONSUME_REMAINING = "ArgumentBuilder.null.consume.remaining";
-    public static final String ARGUMENT_BUILDER_EMPTY_CONSUME_REMAINING = "ArgumentBuilder.empty.consume.remaining";
-    public static final String ARGUMENT_BUILDER_NULL_DEFAULT = "ArgumentBuilder.null.default";
-    public static final String ARGUMENT_BUILDER_NULL_DEFAULTS = "ArgumentBuilder.null.defaults";
-    public static final String ARGUMENT_BUILDER_NEGATIVE_MAXIMUM = "ArgumentBuilder.negative.maximum";
-    public static final String ARGUMENT_BUILDER_NEGATIVE_MINIMUM = "ArgumentBuilder.negative.minimum";
-    public static final String ARGUMENT_BUILDER_NULL_NAME = "ArgumentBuilder.null.name";
-    public static final String ARGUMENT_BUILDER_EMPTY_NAME = "ArgumentBuilder.empty.name";
-    public static final String ARGUMENT_BUILDER_NULL_VALIDATOR = "ArgumentBuilder.null.validator";
-
-}
diff --git a/src/java/org/apache/commons/cli2/resource/ResourceHelper.java b/src/java/org/apache/commons/cli2/resource/ResourceHelper.java
deleted file mode 100644
index a65adb8e..00000000
--- a/src/java/org/apache/commons/cli2/resource/ResourceHelper.java
+++ /dev/null
@@ -1,159 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.resource;
-
-import java.text.MessageFormat;
-
-import java.util.Locale;
-import java.util.MissingResourceException;
-import java.util.ResourceBundle;
-
-/**
- * A utility class used to provide internationalisation support.
- *
- * @author John Keyes
- */
-public class ResourceHelper {
-    /** system property */
-    private static final String PROP_LOCALE = "org.apache.commons.cli2.resource.bundle";
-
-    /** default package name */
-    private static final String DEFAULT_BUNDLE =
-        "org.apache.commons.cli2.resource.CLIMessageBundle_en_US";
-    private static ResourceHelper helper;
-
-    /** resource bundle */
-    private ResourceBundle bundle;
-
-    private String prop;
-    
-    /**
-     * Create a new ResourceHelper for the current locale.
-     */
-    private ResourceHelper() {
-        String bundleName = System.getProperty(PROP_LOCALE);
-
-        if (bundleName == null) {
-            bundleName = DEFAULT_BUNDLE;
-        }
-
-        this.prop = bundleName;
-        
-        int firstUnderscore = bundleName.indexOf('_');
-        int secondUnderscore = bundleName.indexOf('_', firstUnderscore + 1);
-
-        Locale locale;
-        if (firstUnderscore != -1) { 
-        String language = bundleName.substring(firstUnderscore + 1, secondUnderscore);
-        String country = bundleName.substring(secondUnderscore + 1);
-        	locale = new Locale(language, country);
-        }
-        else {
-        	locale = Locale.getDefault();
-        }
-        // initialize the bundle
-        try {
-            bundle = ResourceBundle.getBundle(bundleName, locale);
-        } catch (MissingResourceException exp) {
-            bundle = ResourceBundle.getBundle(DEFAULT_BUNDLE, locale);
-        }
-    }
-
-    public String getBundleName() {
-    	return this.prop;
-    }
-    
-    /**
-     * Gets the ResourceHelper appropriate to the current locale.
-     * @return a ResourceHelper
-     */
-    public static ResourceHelper getResourceHelper() {
-        String bundleName = System.getProperty(PROP_LOCALE);
-        if (helper == null || !helper.getBundleName().equals(bundleName)) {
-            helper = new ResourceHelper();
-        }
-
-        return helper;
-    }
-
-    /**
-     * Returns the message for the specified key.
-     *
-     * @param key the unique identifier of the message
-     * @return String the formatted String
-     */
-    public String getMessage(final String key) {
-        return getMessage(key, new Object[] {  });
-    }
-
-    /**
-     * Returns the message for the specified key and argument.
-     *
-     * @param key the unique identifier of the message
-     * @param value the argument value
-     * @return String the formatted String
-     */
-    public String getMessage(final String key,
-                             final Object value) {
-        return getMessage(key, new Object[] { value });
-    }
-
-    /**
-     * Returns the message for the specified key and arguments.
-     *
-     * @param key the unique identifier of the message
-     * @param value1 an argument value
-     * @param value2 an argument value
-     * @return String the formatted String
-     */
-    public String getMessage(final String key,
-                             final Object value1,
-                             final Object value2) {
-        return getMessage(key, new Object[] { value1, value2 });
-    }
-
-    /**
-     * Returns the message for the specified key and arguments.
-     *
-     * @param key the unique identifier of the message
-     * @param value1 an argument value
-     * @param value2 an argument value
-     * @param value3 an argument value
-     *
-     * @return String the formatted String
-     */
-    public String getMessage(final String key,
-                             final Object value1,
-                             final Object value2,
-                             final Object value3) {
-        return getMessage(key, new Object[] { value1, value2, value3 });
-    }
-
-    /**
-     * Returns the message for the specified key and arguments.
-     *
-     * @param key the unique identifier of the message
-     * @param values argument values
-     * @return String the formatted String
-     */
-    public String getMessage(final String key,
-                             final Object[] values) {
-        final String msgFormatStr = bundle.getString(key);
-        final MessageFormat msgFormat = new MessageFormat(msgFormatStr);
-
-        return msgFormat.format(values);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/util/Comparators.java b/src/java/org/apache/commons/cli2/util/Comparators.java
deleted file mode 100644
index 9f806232..00000000
--- a/src/java/org/apache/commons/cli2/util/Comparators.java
+++ /dev/null
@@ -1,455 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.util;
-
-import java.util.Comparator;
-import java.util.List;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.option.Command;
-import org.apache.commons.cli2.option.DefaultOption;
-import org.apache.commons.cli2.option.Switch;
-
-/**
- * A collection of Comparators suitable for use with Option instances.
- */
-public class Comparators {
-	
-	private Comparators(){
-		// constructor hiden from potential users
-	}
-	
-
-    /**
-     * Chains comparators together.
-     * 
-     * @see #chain(Comparator[])
-     * @param c0
-     *            a comparator
-     * @param c1
-     *            a comparator
-     * @return a chained comparator
-     */
-    public static Comparator chain(final Comparator c0, final Comparator c1) {
-        return chain(new Comparator[] { c0, c1 });
-    }
-
-    /**
-     * Chains comparators together.
-     * 
-     * @see #chain(Comparator[])
-     * @param c0
-     *            a comparator
-     * @param c1
-     *            a comparator
-     * @param c2
-     *            a comparator
-     * @return a chained comparator
-     */
-    public static Comparator chain(
-        final Comparator c0,
-        final Comparator c1,
-        final Comparator c2) {
-        return chain(new Comparator[] { c0, c1, c2 });
-    }
-
-    /**
-     * Chains comparators together.
-     * 
-     * @see #chain(Comparator[])
-     * @param c0
-     *            a comparator
-     * @param c1
-     *            a comparator
-     * @param c2
-     *            a comparator
-     * @param c3
-     *            a comparator
-     * @return a chained comparator
-     */
-    public static Comparator chain(
-        final Comparator c0,
-        final Comparator c1,
-        final Comparator c2,
-        final Comparator c3) {
-        return chain(new Comparator[] { c0, c1, c2, c3 });
-    }
-
-    /**
-     * Chains comparators together.
-     * 
-     * @see #chain(Comparator[])
-     * @param c0
-     *            a comparator
-     * @param c1
-     *            a comparator
-     * @param c2
-     *            a comparator
-     * @param c3
-     *            a comparator
-     * @param c4
-     *            a comparator
-     * @return a chained comparator
-     */
-    public static Comparator chain(
-        final Comparator c0,
-        final Comparator c1,
-        final Comparator c2,
-        final Comparator c3,
-        final Comparator c4) {
-        return chain(new Comparator[] { c0, c1, c2, c3, c4 });
-    }
-
-    /**
-     * Chains comparators together.
-     * 
-     * @see #chain(Comparator[])
-     * @param comparators
-     *            a List of comparators to chain together
-     * @return a chained comparator
-     */
-    public static Comparator chain(final List comparators) {
-        return new Chain(
-            (Comparator[])comparators.toArray(
-                new Comparator[comparators.size()]));
-    }
-
-    /**
-     * Chains an array of comparators together. Each Comparator will be called
-     * in turn until one of them return a non-zero value, this value will be
-     * returned.
-     * 
-     * @param comparators
-     *            the array of comparators
-     * @return a chained comparator
-     */
-    public static Comparator chain(final Comparator[] comparators) {
-        return new Chain(comparators);
-    }
-
-    /**
-     * Chains a series of Comparators together.
-     */
-    private static class Chain implements Comparator {
-
-        final Comparator[] chain;
-
-        /**
-         * Creates a Comparator chain using the specified array of Comparators
-         * @param chain the Comparators in the chain
-         */
-        public Chain(final Comparator[] chain) {
-            this.chain = new Comparator[chain.length];
-            System.arraycopy(chain, 0, this.chain, 0, chain.length);
-        }
-
-        public int compare(final Object left, final Object right) {
-            int result = 0;
-            for (int i = 0; result == 0 && i < chain.length; ++i) {
-                result = chain[i].compare(left, right);
-            }
-            return result;
-        }
-    }
-
-    /**
-     * Reverses a comparator's logic.
-     * 
-     * @param wrapped
-     *            the Comparator to reverse the logic of
-     * @return a comparator with reverse logic
-     */
-    private static Comparator reverse(final Comparator wrapped) {
-        return new Reverse(wrapped);
-    }
-
-    private static class Reverse implements Comparator {
-        private final Comparator wrapped;
-
-        /**
-         * Creates a Comparator with reverse logic
-         * @param wrapped the original logic
-         */
-        public Reverse(final Comparator wrapped) {
-            this.wrapped = wrapped;
-        }
-
-        public int compare(final Object left, final Object right) {
-            return -wrapped.compare(left, right);
-        }
-    }
-
-    /**
-     * Forces Group instances to appear at the beginning of lists
-     * 
-     * @see Group
-     * @return a new comparator
-     */
-    public static Comparator groupFirst() {
-        return new GroupFirst();
-    }
-
-    /**
-     * Forces Group instances to appear at the end of lists
-     * 
-     * @see Group
-     * @return a new comparator
-     */
-    public static Comparator groupLast() {
-        return reverse(groupFirst());
-    }
-
-    private static class GroupFirst implements Comparator {
-        public int compare(final Object left, final Object right) {
-            final boolean l = left instanceof Group;
-            final boolean r = right instanceof Group;
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-
-    /**
-     * Forces Switch instances to appear at the beginning of lists
-     * 
-     * @see Switch
-     * @return a new comparator
-     */
-    public static Comparator switchFirst() {
-        return new SwitchFirst();
-    }
-
-    /**
-     * Forces Switch instances to appear at the end of lists
-     * 
-     * @see Switch
-     * @return a new comparator
-     */
-    public static Comparator switchLast() {
-        return reverse(switchFirst());
-    }
-
-    private static class SwitchFirst implements Comparator {
-        public int compare(final Object left, final Object right) {
-            final boolean l = left instanceof Switch;
-            final boolean r = right instanceof Switch;
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-
-    /**
-     * Forces Command instances to appear at the beginning of lists
-     * 
-     * @see Command
-     * @return a new comparator
-     */
-    public static Comparator commandFirst() {
-        return new CommandFirst();
-    }
-
-    /**
-     * Forces Command instances to appear at the end of lists
-     * 
-     * @see Command
-     * @return a new comparator
-     */
-    public static Comparator commandLast() {
-        return reverse(commandFirst());
-    }
-
-    private static class CommandFirst implements Comparator {
-        public int compare(final Object left, final Object right) {
-            final boolean l = left instanceof Command;
-            final boolean r = right instanceof Command;
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-
-    /**
-     * Forces DefaultOption instances to appear at the beginning of lists
-     * 
-     * @see DefaultOption
-     * @return a new comparator
-     */
-    public static Comparator defaultOptionFirst() {
-        return new DefaultOptionFirst();
-    }
-
-    /**
-     * Forces DefaultOption instances to appear at the end of lists
-     * 
-     * @see DefaultOption
-     * @return a new comparator
-     */
-    public static Comparator defaultOptionLast() {
-        return reverse(defaultOptionFirst());
-    }
-
-    private static class DefaultOptionFirst implements Comparator {
-        public int compare(final Object left, final Object right) {
-            final boolean l = left instanceof DefaultOption;
-            final boolean r = right instanceof DefaultOption;
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-
-    /**
-     * Forces Comparators with a particular trigger to appear at the beginning
-     * of lists
-     * 
-     * @param name
-     *            the trigger name to select
-     * @see Option#getTriggers()
-     * @return a new comparator
-     */
-    public static Comparator namedFirst(final String name) {
-        return new Named(name);
-    }
-
-    /**
-     * Forces Comparators with a particular trigger to appear at the end of
-     * lists
-     * 
-     * @param name
-     *            the trigger name to select
-     * @see Option#getTriggers()
-     * @return a new comparator
-     */
-    public static Comparator namedLast(final String name) {
-        return reverse(new Named(name));
-    }
-
-    private static class Named implements Comparator {
-        private final String name;
-        
-        /**
-         * Creates a Comparator that sorts a particular name high in order
-         * @param name the trigger name to select
-         */
-        public Named(final String name) {
-            this.name = name;
-        }
-        public int compare(final Object oleft, final Object oright) {
-            final Option left = (Option)oleft;
-            final Option right = (Option)oright;
-
-            final boolean l = left.getTriggers().contains(name);
-            final boolean r = right.getTriggers().contains(name);
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-
-    /**
-     * Orders Options by preferredName
-     * 
-     * @see Option#getPreferredName()
-     * @return a new comparator
-     */
-    public static Comparator preferredNameFirst() {
-        return new PreferredName();
-    }
-
-    /**
-     * Orders Options by preferredName, reversed
-     * 
-     * @see Option#getPreferredName()
-     * @return a new comparator
-     */
-    public static Comparator preferredNameLast() {
-        return reverse(preferredNameFirst());
-    }
-
-    private static class PreferredName implements Comparator {
-        public int compare(final Object oleft, final Object oright) {
-            final Option left = (Option)oleft;
-            final Option right = (Option)oright;
-
-            return left.getPreferredName().compareTo(right.getPreferredName());
-        }
-    }
-
-    /**
-     * Orders Options grouping required Options first
-     * 
-     * @see Option#isRequired()
-     * @return a new comparator
-     */
-    public static Comparator requiredFirst() {
-        return new Required();
-    }
-    
-    /**
-     * Orders Options grouping required Options last
-     * 
-     * @see Option#isRequired()
-     * @return a new comparator
-     */
-    public static Comparator requiredLast() {
-        return reverse(requiredFirst());
-    }
-    
-    private static class Required implements Comparator {
-        public int compare(final Object oleft, final Object oright) {
-            final Option left = (Option)oleft;
-            final Option right = (Option)oright;
-            
-            final boolean l = left.isRequired();
-            final boolean r = right.isRequired();
-
-            if (l ^ r) {
-                if (l) {
-                    return -1;
-                }
-                return 1;
-            }
-            return 0;
-        }
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/util/HelpFormatter.java b/src/java/org/apache/commons/cli2/util/HelpFormatter.java
deleted file mode 100644
index a3a5fb37..00000000
--- a/src/java/org/apache/commons/cli2/util/HelpFormatter.java
+++ /dev/null
@@ -1,637 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.util;
-
-import java.io.PrintWriter;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * Presents on screen help based on the application's Options
- */
-public class HelpFormatter {
-    /**
-     * The default screen width
-     */
-    public static final int DEFAULT_FULL_WIDTH = 80;
-
-    /**
-     * The default screen furniture left of screen
-     */
-    public static final String DEFAULT_GUTTER_LEFT = "";
-
-    /**
-     * The default screen furniture right of screen
-     */
-    public static final String DEFAULT_GUTTER_CENTER = "    ";
-
-    /**
-     * The default screen furniture between columns
-     */
-    public static final String DEFAULT_GUTTER_RIGHT = "";
-
-    /**
-     * The default DisplaySettings used to select the elements to display in the
-     * displayed line of full usage information.
-     *
-     * @see DisplaySetting
-     */
-    public static final Set DEFAULT_FULL_USAGE_SETTINGS;
-
-    /**
-     * The default DisplaySettings used to select the elements of usage per help
-     * line in the main body of help
-     *
-     * @see DisplaySetting
-     */
-    public static final Set DEFAULT_LINE_USAGE_SETTINGS;
-
-    /**
-     * The default DisplaySettings used to select the help lines in the main
-     * body of help
-     */
-    public static final Set DEFAULT_DISPLAY_USAGE_SETTINGS;
-
-    static {
-        final Set fullUsage = new HashSet(DisplaySetting.ALL);
-        fullUsage.remove(DisplaySetting.DISPLAY_ALIASES);
-        fullUsage.remove(DisplaySetting.DISPLAY_GROUP_NAME);
-        DEFAULT_FULL_USAGE_SETTINGS = Collections.unmodifiableSet(fullUsage);
-
-        final Set lineUsage = new HashSet();
-        lineUsage.add(DisplaySetting.DISPLAY_ALIASES);
-        lineUsage.add(DisplaySetting.DISPLAY_GROUP_NAME);
-        lineUsage.add(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        DEFAULT_LINE_USAGE_SETTINGS = Collections.unmodifiableSet(lineUsage);
-
-        final Set displayUsage = new HashSet(DisplaySetting.ALL);
-        displayUsage.remove(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        DEFAULT_DISPLAY_USAGE_SETTINGS = Collections.unmodifiableSet(displayUsage);
-    }
-
-    private Set fullUsageSettings = new HashSet(DEFAULT_FULL_USAGE_SETTINGS);
-    private Set lineUsageSettings = new HashSet(DEFAULT_LINE_USAGE_SETTINGS);
-    private Set displaySettings = new HashSet(DEFAULT_DISPLAY_USAGE_SETTINGS);
-    private OptionException exception = null;
-    private Group group;
-    private Comparator comparator = null;
-    private String divider = null;
-    private String header = null;
-    private String footer = null;
-    private String shellCommand = "";
-    private PrintWriter out = new PrintWriter(System.out);
-
-    //or should this default to .err?
-    private final String gutterLeft;
-    private final String gutterCenter;
-    private final String gutterRight;
-    private final int pageWidth;
-
-    /**
-     * Creates a new HelpFormatter using the defaults
-     */
-    public HelpFormatter() {
-        this(DEFAULT_GUTTER_LEFT, DEFAULT_GUTTER_CENTER, DEFAULT_GUTTER_RIGHT, DEFAULT_FULL_WIDTH);
-    }
-
-    /**
-     * Creates a new HelpFormatter using the specified parameters
-     * @param gutterLeft the string marking left of screen
-     * @param gutterCenter the string marking center of screen
-     * @param gutterRight the string marking right of screen
-     * @param fullWidth the width of the screen
-     */
-    public HelpFormatter(final String gutterLeft,
-                         final String gutterCenter,
-                         final String gutterRight,
-                         final int fullWidth) {
-        // default the left gutter to empty string
-        this.gutterLeft = (gutterLeft == null) ? DEFAULT_GUTTER_LEFT : gutterLeft;
-
-        // default the center gutter to a single space
-        this.gutterCenter = (gutterCenter == null) ? DEFAULT_GUTTER_CENTER : gutterCenter;
-
-        // default the right gutter to empty string
-        this.gutterRight = (gutterRight == null) ? DEFAULT_GUTTER_RIGHT : gutterRight;
-
-        // calculate the available page width
-        this.pageWidth = fullWidth - this.gutterLeft.length() - this.gutterRight.length();
-
-        // check available page width is valid
-        int availableWidth = fullWidth - pageWidth + this.gutterCenter.length();
-
-        if (availableWidth < 2) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.HELPFORMATTER_GUTTER_TOO_LONG));
-        }
-    }
-
-    /**
-     * Prints the Option help.
-     */
-    public void print() {
-        printHeader();
-        printException();
-        printUsage();
-        printHelp();
-        printFooter();
-        out.flush();
-    }
-
-    /**
-     * Prints any error message.
-     */
-    public void printException() {
-        if (exception != null) {
-            printDivider();
-            printWrapped(exception.getMessage());
-        }
-    }
-
-    /**
-     * Prints detailed help per option.
-     */
-    public void printHelp() {
-        printDivider();
-
-        final Option option;
-
-        if ((exception != null) && (exception.getOption() != null)) {
-            option = exception.getOption();
-        } else {
-            option = group;
-        }
-
-        // grab the HelpLines to display
-        final List helpLines = option.helpLines(0, displaySettings, comparator);
-
-        // calculate the maximum width of the usage strings
-        int usageWidth = 0;
-
-        for (final Iterator i = helpLines.iterator(); i.hasNext();) {
-            final HelpLine helpLine = (HelpLine) i.next();
-            final String usage = helpLine.usage(lineUsageSettings, comparator);
-            usageWidth = Math.max(usageWidth, usage.length());
-        }
-
-        // build a blank string to pad wrapped descriptions
-        final StringBuffer blankBuffer = new StringBuffer();
-
-        for (int i = 0; i < usageWidth; i++) {
-            blankBuffer.append(' ');
-        }
-
-        // determine the width available for descriptions
-        final int descriptionWidth = Math.max(1, pageWidth - gutterCenter.length() - usageWidth);
-
-        // display each HelpLine
-        for (final Iterator i = helpLines.iterator(); i.hasNext();) {
-            // grab the HelpLine
-            final HelpLine helpLine = (HelpLine) i.next();
-
-            // wrap the description
-            final List descList = wrap(helpLine.getDescription(), descriptionWidth);
-            final Iterator descriptionIterator = descList.iterator();
-
-            // display usage + first line of description
-            printGutterLeft();
-            pad(helpLine.usage(lineUsageSettings, comparator), usageWidth, out);
-            out.print(gutterCenter);
-            pad((String) descriptionIterator.next(), descriptionWidth, out);
-            printGutterRight();
-            out.println();
-
-            // display padding + remaining lines of description
-            while (descriptionIterator.hasNext()) {
-                printGutterLeft();
-
-                //pad(helpLine.getUsage(),usageWidth,out);
-                out.print(blankBuffer);
-                out.print(gutterCenter);
-                pad((String) descriptionIterator.next(), descriptionWidth, out);
-                printGutterRight();
-                out.println();
-            }
-        }
-
-        printDivider();
-    }
-
-    /**
-     * Prints a single line of usage information (wrapping if necessary)
-     */
-    public void printUsage() {
-        printDivider();
-
-        final StringBuffer buffer = new StringBuffer("Usage:\n");
-        buffer.append(shellCommand).append(' ');
-        group.appendUsage(buffer, fullUsageSettings, comparator, " ");
-        printWrapped(buffer.toString());
-    }
-
-    /**
-     * Prints a header string if necessary
-     */
-    public void printHeader() {
-        if (header != null) {
-            printDivider();
-            printWrapped(header);
-        }
-    }
-
-    /**
-     * Prints a footer string if necessary
-     */
-    public void printFooter() {
-        if (footer != null) {
-            printWrapped(footer);
-            printDivider();
-        }
-    }
-
-    /**
-     * Prints a string wrapped if necessary
-     * @param text the string to wrap
-     */
-    public void printWrapped(final String text) {
-        for (final Iterator i = wrap(text, pageWidth).iterator(); i.hasNext();) {
-            printGutterLeft();
-            pad((String) i.next(), pageWidth, out);
-            printGutterRight();
-            out.println();
-        }
-
-        out.flush();
-    }
-
-    /**
-     * Prints the left gutter string
-     */
-    public void printGutterLeft() {
-        if (gutterLeft != null) {
-            out.print(gutterLeft);
-        }
-    }
-
-    /**
-     * Prints the right gutter string
-     */
-    public void printGutterRight() {
-        if (gutterRight != null) {
-            out.print(gutterRight);
-        }
-    }
-
-    /**
-     * Prints the divider text
-     */
-    public void printDivider() {
-        if (divider != null) {
-            out.println(divider);
-        }
-    }
-
-    protected static void pad(final String text,
-                              final int width,
-                              final PrintWriter writer) {
-        final int left;
-
-        // write the text and record how many characters written
-        if (text == null) {
-            left = 0;
-        } else {
-            writer.write(text);
-            left = text.length();
-        }
-
-        // pad remainder with spaces
-        for (int i = left; i < width; ++i) {
-            writer.write(' ');
-        }
-    }
-
-    protected static List wrap(final String text,
-                               final int width) {
-        // check for valid width
-        if (width < 1) {
-            throw new IllegalArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.HELPFORMATTER_WIDTH_TOO_NARROW,
-                                                                                             new Object[] {
-                                                                                                 new Integer(width)
-                                                                                             }));
-        }
-
-        // handle degenerate case
-        if (text == null) {
-            return Collections.singletonList("");
-        }
-
-        final List lines = new ArrayList();
-        final char[] chars = text.toCharArray();
-        int left = 0;
-
-        // for each character in the string
-        while (left < chars.length) {
-            // sync left and right indeces
-            int right = left;
-
-            // move right until we run out of characters, width or find a newline
-            while ((right < chars.length) && (chars[right] != '\n') &&
-                       (right < (left + width + 1))) {
-                right++;
-            }
-
-            // if a newline was found
-            if ((right < chars.length) && (chars[right] == '\n')) {
-                // record the substring
-                final String line = new String(chars, left, right - left);
-                lines.add(line);
-
-                // move to the end of the substring
-                left = right + 1;
-
-                if (left == chars.length) {
-                    lines.add("");
-                }
-
-                // restart the loop
-                continue;
-            }
-
-            // move to the next ideal wrap point 
-            right = (left + width) - 1;
-
-            // if we have run out of characters
-            if (chars.length <= right) {
-                // record the substring
-                final String line = new String(chars, left, chars.length - left);
-                lines.add(line);
-
-                // abort the loop
-                break;
-            }
-
-            // back track the substring end until a space is found
-            while ((right >= left) && (chars[right] != ' ')) {
-                right--;
-            }
-
-            // if a space was found
-            if (right >= left) {
-                // record the substring to space
-                final String line = new String(chars, left, right - left);
-                lines.add(line);
-
-                // absorb all the spaces before next substring
-                while ((right < chars.length) && (chars[right] == ' ')) {
-                    right++;
-                }
-
-                left = right;
-
-                // restart the loop
-                continue;
-            }
-
-            // move to the wrap position irrespective of spaces
-            right = Math.min(left + width, chars.length);
-
-            // record the substring
-            final String line = new String(chars, left, right - left);
-            lines.add(line);
-
-            // absorb any the spaces before next substring
-            while ((right < chars.length) && (chars[right] == ' ')) {
-                right++;
-            }
-
-            left = right;
-        }
-
-        return lines;
-    }
-
-    /**
-     * The Comparator to use when sorting Options
-     * @param comparator Comparator to use when sorting Options
-     */
-    public void setComparator(Comparator comparator) {
-        this.comparator = comparator;
-    }
-
-    /**
-     * The DisplaySettings used to select the help lines in the main body of
-     * help
-     *
-     * @param displaySettings the settings to use
-     * @see DisplaySetting
-     */
-    public void setDisplaySettings(Set displaySettings) {
-        this.displaySettings = displaySettings;
-    }
-
-    /**
-     * Sets the string to use as a divider between sections of help
-     * @param divider the dividing string
-     */
-    public void setDivider(String divider) {
-        this.divider = divider;
-    }
-
-    /**
-     * Sets the exception to document
-     * @param exception the exception that occured
-     */
-    public void setException(OptionException exception) {
-        this.exception = exception;
-    }
-
-    /**
-     * Sets the footer text of the help screen
-     * @param footer the footer text
-     */
-    public void setFooter(String footer) {
-        this.footer = footer;
-    }
-
-    /**
-     * The DisplaySettings used to select the elements to display in the
-     * displayed line of full usage information.
-     * @see DisplaySetting
-     * @param fullUsageSettings
-     */
-    public void setFullUsageSettings(Set fullUsageSettings) {
-        this.fullUsageSettings = fullUsageSettings;
-    }
-
-    /**
-     * Sets the Group of Options to document
-     * @param group the options to document
-     */
-    public void setGroup(Group group) {
-        this.group = group;
-    }
-
-    /**
-     * Sets the footer text of the help screen
-     * @param header the footer text
-     */
-    public void setHeader(String header) {
-        this.header = header;
-    }
-
-    /**
-     * Sets the DisplaySettings used to select elements in the per helpline
-     * usage strings.
-     * @see DisplaySetting
-     * @param lineUsageSettings the DisplaySettings to use
-     */
-    public void setLineUsageSettings(Set lineUsageSettings) {
-        this.lineUsageSettings = lineUsageSettings;
-    }
-
-    /**
-     * Sets the command string used to invoke the application
-     * @param shellCommand the invokation command
-     */
-    public void setShellCommand(String shellCommand) {
-        this.shellCommand = shellCommand;
-    }
-
-    /**
-     * @return the Comparator used to sort the Group
-     */
-    public Comparator getComparator() {
-        return comparator;
-    }
-
-    /**
-     * @return the DisplaySettings used to select HelpLines
-     */
-    public Set getDisplaySettings() {
-        return displaySettings;
-    }
-
-    /**
-     * @return the String used as a horizontal section divider
-     */
-    public String getDivider() {
-        return divider;
-    }
-
-    /**
-     * @return the Exception being documented by this HelpFormatter
-     */
-    public OptionException getException() {
-        return exception;
-    }
-
-    /**
-     * @return the help screen footer text
-     */
-    public String getFooter() {
-        return footer;
-    }
-
-    /**
-     * @return the DisplaySettings used in the full usage string
-     */
-    public Set getFullUsageSettings() {
-        return fullUsageSettings;
-    }
-
-    /**
-     * @return the group documented by this HelpFormatter
-     */
-    public Group getGroup() {
-        return group;
-    }
-
-    /**
-     * @return the String used as the central gutter
-     */
-    public String getGutterCenter() {
-        return gutterCenter;
-    }
-
-    /**
-     * @return the String used as the left gutter
-     */
-    public String getGutterLeft() {
-        return gutterLeft;
-    }
-
-    /**
-     * @return the String used as the right gutter
-     */
-    public String getGutterRight() {
-        return gutterRight;
-    }
-
-    /**
-     * @return the help screen header text
-     */
-    public String getHeader() {
-        return header;
-    }
-
-    /**
-     * @return the DisplaySettings used in the per help line usage strings
-     */
-    public Set getLineUsageSettings() {
-        return lineUsageSettings;
-    }
-
-    /**
-     * @return the width of the screen in characters
-     */
-    public int getPageWidth() {
-        return pageWidth;
-    }
-
-    /**
-     * @return the command used to execute the application
-     */
-    public String getShellCommand() {
-        return shellCommand;
-    }
-
-    /**
-     * @param out the PrintWriter to write to
-     */
-    public void setPrintWriter(PrintWriter out) {
-        this.out = out;
-    }
-
-    /**
-     * @return the PrintWriter that will be written to
-     */
-    public PrintWriter getPrintWriter() {
-        return out;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/ClassValidator.java b/src/java/org/apache/commons/cli2/validation/ClassValidator.java
deleted file mode 100644
index b989845b..00000000
--- a/src/java/org/apache/commons/cli2/validation/ClassValidator.java
+++ /dev/null
@@ -1,200 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.util.List;
-import java.util.ListIterator;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * The <code>ClassValidator</code> validates the string argument
- * values are class names.
- *
- * The following example shows how to validate the 'logger'
- * argument value is a class name, that can be instantiated.
- *
- * <pre>
- * ...
- * ClassValidator validator = new ClassValidator();
- * validator.setInstance(true);
- *
- * ArgumentBuilder builder = new ArgumentBuilder();
- * Argument logger =
- *     builder.withName("logger");
- *            .withValidator(validator);
- * </pre>
- *
- * @author John Keyes
- */
-public class ClassValidator implements Validator {
-    /** i18n */
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    /** whether the class argument is loadable */
-    private boolean loadable;
-
-    /** whether to create an instance of the class */
-    private boolean instance;
-
-    /** the classloader to load classes from */
-    private ClassLoader loader;
-
-    /**
-     * Validate each argument value in the specified List against this instances
-     * permitted attributes.
-     *
-     * If a value is valid then it's <code>String</code> value in the list is
-     * replaced with it's <code>Class</code> value or instance.
-     *
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values)
-        throws InvalidArgumentException {
-        for (final ListIterator i = values.listIterator(); i.hasNext();) {
-            final String name = (String) i.next();
-
-            if (!isPotentialClassName(name)) {
-                throw new InvalidArgumentException(resources.getMessage(ResourceConstants.CLASSVALIDATOR_BAD_CLASSNAME,
-                                                                        name));
-            }
-
-            if (loadable || instance) {
-                final ClassLoader theLoader = getClassLoader();
-
-                try {
-                    final Class clazz = theLoader.loadClass(name);
-
-                    if (instance) {
-                        i.set(clazz.newInstance());
-                    } else {
-                        i.set(clazz);
-                    }
-                } catch (final ClassNotFoundException exp) {
-                    throw new InvalidArgumentException(resources.getMessage(ResourceConstants.CLASSVALIDATOR_CLASS_NOTFOUND,
-                                                                            name));
-                } catch (final IllegalAccessException exp) {
-                    throw new InvalidArgumentException(resources.getMessage(ResourceConstants.CLASSVALIDATOR_CLASS_ACCESS,
-                                                                            name, exp.getMessage()));
-                } catch (final InstantiationException exp) {
-                    throw new InvalidArgumentException(resources.getMessage(ResourceConstants.CLASSVALIDATOR_CLASS_CREATE,
-                                                                            name));
-                }
-            }
-        }
-    }
-
-    /**
-     * Returns whether the argument value must represent a
-     * class that is loadable.
-     *
-     * @return whether the argument value must represent a
-     * class that is loadable.
-     */
-    public boolean isLoadable() {
-        return loadable;
-    }
-
-    /**
-     * Specifies whether the argument value must represent a
-     * class that is loadable.
-     *
-     * @param loadable whether the argument value must
-     * represent a class that is loadable.
-     */
-    public void setLoadable(boolean loadable) {
-        this.loadable = loadable;
-    }
-
-    /**
-     * Returns the {@link ClassLoader} used to resolve and load
-     * the classes specified by the argument values.
-     *
-     * @return the {@link ClassLoader} used to resolve and load
-     * the classes specified by the argument values.
-     */
-    public ClassLoader getClassLoader() {
-        if (loader == null) {
-            loader = getClass().getClassLoader();
-        }
-
-        return loader;
-    }
-
-    /**
-     * Specifies the {@link ClassLoader} used to resolve and load
-     * the classes specified by the argument values.
-     *
-     * @param loader the {@link ClassLoader} used to resolve and load
-     * the classes specified by the argument values.
-     */
-    public void setClassLoader(ClassLoader loader) {
-        this.loader = loader;
-    }
-
-    /**
-     * Returns whether the argument value must represent a
-     * class that can be instantiated.
-     *
-     * @return whether the argument value must represent a
-     * class that can be instantiated.
-     */
-    public boolean isInstance() {
-        return instance;
-    }
-
-    /**
-     * Specifies whether the argument value must represent a
-     * class that can be instantiated.
-     *
-     * @param instance whether the argument value must
-     * represent a class that can be instantiated.
-     */
-    public void setInstance(boolean instance) {
-        this.instance = instance;
-    }
-
-    /**
-     * Returns whether the specified name is allowed as
-     * a Java class name.
-     */
-    protected boolean isPotentialClassName(final String name) {
-        final char[] chars = name.toCharArray();
-
-        boolean expectingStart = true;
-
-        for (int i = 0; i < chars.length; ++i) {
-            final char c = chars[i];
-
-            if (expectingStart) {
-                if (!Character.isJavaIdentifierStart(c)) {
-                    return false;
-                }
-
-                expectingStart = false;
-            } else {
-                if (c == '.') {
-                    expectingStart = true;
-                } else if (!Character.isJavaIdentifierPart(c)) {
-                    return false;
-                }
-            }
-        }
-
-        return !expectingStart;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/DateValidator.java b/src/java/org/apache/commons/cli2/validation/DateValidator.java
deleted file mode 100644
index 0820155d..00000000
--- a/src/java/org/apache/commons/cli2/validation/DateValidator.java
+++ /dev/null
@@ -1,312 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.text.DateFormat;
-import java.text.ParsePosition;
-
-import java.util.Date;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * The <code>DateValidator</code> validates the argument values
- * are date or time value(s).
- *
- * The following example shows how to validate that
- * an argument value(s) is a Date of the following
- * type: d/M/yy (see {@link java.text.DateFormat}).
- *
- * <pre>
- * DateFormat date = new SimpleDateFormat("d/M/yy");
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * Argument dateFormat =
- *     builder.withName("date");
- *            .withValidator(new DateValidator(dateFormat));
- * </pre>
- *
- * The following example shows how to validate that
- * an argument value(s) is a time of the following
- * type: HH:mm:ss (see {@link java.text.DateFormat}).
- *
- * <pre>
- * DateFormat timeFormat = new SimpleDateFormat("HH:mm:ss");
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * Argument time =
- *     builder.withName("time");
- *            .withValidator(new DateValidator(timeFormat));
- * </pre>
- *
- * @author John Keyes
- *
- * @see java.text.DateFormat
- */
-public class DateValidator implements Validator {
-    /** i18n */
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    /** an array of permitted DateFormats */
-    private DateFormat[] formats;
-
-    /** minimum Date allowed i.e: a valid date occurs later than this date */
-    private Date minimum;
-
-    /** maximum Date allowed i.e: a valid date occurs earlier than this date */
-    private Date maximum;
-
-    /** leniant parsing */
-    private boolean isLenient;
-
-    /**
-     * Creates a Validator for the default date/time format
-     */
-    public DateValidator() {
-        this(DateFormat.getInstance());
-    }
-
-    /**
-     * Creates a Validator for the specified DateFormat.
-     *
-     * @param format
-     *            a DateFormat which dates must conform to
-     */
-    public DateValidator(final DateFormat format) {
-        setFormat(format);
-    }
-
-    /**
-     * Creates a Validator for the List of specified DateFormats.
-     *
-     * @param formats
-     *            a List of DateFormats which dates must conform to
-     */
-    public DateValidator(final List formats) {
-        for (Iterator iter = formats.iterator(); iter.hasNext();) {
-            DateFormat format = (DateFormat) iter.next();
-        }
-
-        setFormats(formats);
-    }
-
-    /**
-     * Creates a Validator for dates.
-     *
-     * @return DateValidator a Validator for dates
-     */
-    public static DateValidator getDateInstance() {
-        return new DateValidator(DateFormat.getDateInstance());
-    }
-
-    /**
-     * Creates a Validator for times.
-     *
-     * @return DateValidator a Validator for times
-     */
-    public static DateValidator getTimeInstance() {
-        return new DateValidator(DateFormat.getTimeInstance());
-    }
-
-    /**
-     * Creates a Validator for date/times
-     *
-     * @return DateValidator a Validator for date/times
-     */
-    public static DateValidator getDateTimeInstance() {
-        return new DateValidator(DateFormat.getDateTimeInstance());
-    }
-
-    /**
-     * Validate each String value in the specified List against this instances
-     * permitted DateFormats.
-     *
-     * If a value is valid then it's <code>String</code> value in the list is
-     * replaced with it's <code>Date</code> value.
-     *
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values)
-        throws InvalidArgumentException {
-        // for each value
-        for (final ListIterator i = values.listIterator(); i.hasNext();) {
-            final String value = (String) i.next();
-
-            Date date = null;
-
-            // create a resuable ParsePosition instance
-            final ParsePosition pp = new ParsePosition(0);
-
-            // for each permitted DateFormat
-            for (int f = 0; (f < this.formats.length) && (date == null); ++f) {
-                // reset the parse position
-                pp.setIndex(0);
-                date = this.formats[f].parse(value, pp);
-
-                // if the wrong number of characters have been parsed
-                if (pp.getIndex() < value.length()) {
-                    date = null;
-                }
-            }
-
-            // if date has not been set throw an InvalidArgumentException
-            if (date == null) {
-                throw new InvalidArgumentException(value);
-            }
-
-            // if the date is outside the bounds
-            if (isDateEarlier(date) || isDateLater(date)) {
-                throw new InvalidArgumentException(resources.getMessage(ResourceConstants.DATEVALIDATOR_DATE_OUTOFRANGE,
-                                                                        value));
-            }
-
-            // replace the value in the list with the actual Date
-            i.set(date);
-        }
-    }
-
-    /**
-     * Sets whether this validator uses lenient parsing.
-     *
-     * @param lenient whether this validator uses lenient parsing
-     */
-    public void setLenient(final boolean lenient) {
-        for (int i = 0; i < this.formats.length; i++) {
-            this.formats[i].setLenient(lenient);
-        }
-
-        this.isLenient = lenient;
-    }
-
-    /**
-     * Returns whether this validator uses lenient parsing.
-     *
-     * @return whether this validator uses lenient parsing
-     */
-    public boolean isLenient() {
-        return this.isLenient;
-    }
-
-    /**
-     * Returns the maximum date permitted.
-     *
-     * @return Date the maximum date permitted. If no maximum date has been
-     *         specified then return <code>null</code>.
-     */
-    public Date getMaximum() {
-        return maximum;
-    }
-
-    /**
-     * Sets the maximum Date to the specified value.
-     *
-     * @param maximum
-     *            the maximum Date permitted
-     */
-    public void setMaximum(final Date maximum) {
-        this.maximum = maximum;
-    }
-
-    /**
-     * Returns the minimum date permitted.
-     *
-     * @return Date the minimum date permitted. If no minimum date has been
-     *         specified then return <code>null</code>.
-     */
-    public Date getMinimum() {
-        return minimum;
-    }
-
-    /**
-     * Sets the minimum Date to the specified value.
-     *
-     * @param minimum
-     *            the minimum Date permitted
-     */
-    public void setMinimum(Date minimum) {
-        this.minimum = minimum;
-    }
-
-    /**
-     * Returns whether the specified Date is later than the maximum date.
-     *
-     * @param date
-     *            the Date to evaluate
-     *
-     * @return boolean whether <code>date</code> is earlier than the maximum
-     *         date
-     */
-    private boolean isDateLater(Date date) {
-        return (maximum != null) && (date.getTime() > maximum.getTime());
-    }
-
-    /**
-     * Returns whether the specified Date is earlier than the minimum date.
-     *
-     * @param date
-     *            the Date to evaluate
-     *
-     * @return boolean whether <code>date</code> is earlier than the minimum
-     *         date
-     */
-    private boolean isDateEarlier(Date date) {
-        return (minimum != null) && (date.getTime() < minimum.getTime());
-    }
-
-    /**
-     * Sets the date format permitted.
-     *
-     * @param format
-     *              the format to use
-     */
-    public void setFormat(final DateFormat format) {
-        setFormats(new DateFormat[] { format });
-    }
-
-    /**
-     * Sets the date formats permitted.
-     *
-     * @param formats
-     *               the List of DateFormats to use
-     */
-    public void setFormats(final List formats) {
-        setFormats((DateFormat[]) formats.toArray(new DateFormat[formats.size()]));
-    }
-
-    /**
-     * Sets the date formats permitted.
-     *
-     * @param formats
-     *               the array of DateFormats to use
-     */
-    public void setFormats(final DateFormat[] formats) {
-        this.formats = formats;
-        setLenient(this.isLenient);
-    }
-
-    /**
-     * Gets the date formats permitted.
-     *
-     * @return the permitted formats
-     */
-    public DateFormat[] getFormats() {
-        return this.formats;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/EnumValidator.java b/src/java/org/apache/commons/cli2/validation/EnumValidator.java
deleted file mode 100644
index f685213c..00000000
--- a/src/java/org/apache/commons/cli2/validation/EnumValidator.java
+++ /dev/null
@@ -1,119 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * The <code>EnumValidator</code> validates the string argument
- * values are valid.
- *
- * The following example shows how to limit the valid values
- * for the color argument to 'red', 'green', or 'blue'.
- *
- * <pre>
- * Set values = new HashSet();
- * values.add("red");
- * values.add("green");
- * values.add("blue");
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * Argument color =
- *     builder.withName("color");
- *            .withValidator(new EnumValidator(values));
- * </pre>
- *
- * @author John Keyes
- */
-public class EnumValidator implements Validator {
-    /** List of permitted values */
-    private Set validValues;
-
-    /**
-     * Creates a new EnumValidator for the specified values.
-     *
-     * @param values The list of permitted values
-     */
-    public EnumValidator(final Set values) {
-        setValidValues(values);
-    }
-
-    /**
-     * Validate the list of values against the list of permitted values.
-     *
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values)
-        throws InvalidArgumentException {
-        for (final Iterator iter = values.iterator(); iter.hasNext();) {
-            final String value = (String) iter.next();
-
-            if (!this.validValues.contains(value)) {
-                throw new InvalidArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.ENUM_ILLEGAL_VALUE,
-                                                                                                 new Object[] {
-                                                                                                     value,
-                                                                                                     getValuesAsString()
-                                                                                                 }));
-            }
-        }
-    }
-
-    /**
-     * Returns the permitted values in a comma separated String
-     *
-     * @return String formatted list of values
-     */
-    String getValuesAsString() {
-        final StringBuffer buff = new StringBuffer();
-
-        buff.append("[");
-
-        for (final Iterator iter = this.validValues.iterator(); iter.hasNext();) {
-            buff.append("'").append(iter.next()).append("'");
-
-            if (iter.hasNext()) {
-                buff.append(", ");
-            }
-        }
-
-        buff.append("]");
-
-        return buff.toString();
-    }
-
-    /**
-     * Returns the Set of valid argument values.
-     *
-     * @return Returns the Set of valid argument values.
-     */
-    public Set getValidValues() {
-        return validValues;
-    }
-
-    /**
-     * Specifies the Set of valid argument values.
-     *
-     * @param validValues The Set of valid argument values.
-     */
-    protected void setValidValues(Set validValues) {
-        this.validValues = validValues;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/FileValidator.java b/src/java/org/apache/commons/cli2/validation/FileValidator.java
deleted file mode 100644
index 22b2e1d5..00000000
--- a/src/java/org/apache/commons/cli2/validation/FileValidator.java
+++ /dev/null
@@ -1,264 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.io.File;
-import java.util.List;
-import java.util.ListIterator;
-
-/**
- * The <code>FileValidator</code> validates the string argument
- * values are files.  If the value is a file, the string value in
- * the {@link java.util.List} of values is replaced with the
- * {@link java.io.File} instance.
- *
- * The following attributes can also be specified using the 
- * appropriate settors:
- * <ul>
- *  <li>writable</li>
- *  <li>readable</li>
- *  <li>hidden</li>
- *  <li>existing</li>
- *  <li>is a file</li>
- *  <li>is a directory</li>
- * </ul>
- *
- * The following example shows how to limit the valid values
- * for the config attribute to files that are readable, writeable,
- * and that already existing.
- *
- * <pre>
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * FileValidator validator = FileValidator.getExistingFileInstance();
- * validator.setReadable(true);
- * validator.setWritable(true);
- * 
- * Argument age = 
- *     builder.withName("config");
- *            .withValidator(validator);
- * </pre>
- * 
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class FileValidator implements Validator {
-
-    /**
-     * Returns a <code>FileValidator</code> for existing files/directories.
-     *
-     * @return a <code>FileValidator</code> for existing files/directories.
-     */
-    public static FileValidator getExistingInstance() {
-        final FileValidator validator = new FileValidator();
-        validator.setExisting(true);
-        return validator;
-    }
-
-    /**
-     * Returns a <code>FileValidator</code> for existing files.
-     *
-     * @return a <code>FileValidator</code> for existing files.
-     */
-    public static FileValidator getExistingFileInstance() {
-        final FileValidator validator = new FileValidator();
-        validator.setExisting(true);
-        validator.setFile(true);
-        return validator;
-    }
-
-    /**
-     * Returns a <code>FileValidator</code> for existing directories.
-     *
-     * @return a <code>FileValidator</code> for existing directories.
-     */
-    public static FileValidator getExistingDirectoryInstance() {
-        final FileValidator validator = new FileValidator();
-        validator.setExisting(true);
-        validator.setDirectory(true);
-        return validator;
-    }
-
-    /** whether the argument value is readable */
-    private boolean readable = false;
-    
-    /** whether the argument value is writable */
-    private boolean writable = false;
-    
-    /** whether the argument value exists */
-    private boolean existing = false;
-    
-    /** whether the argument value is a directory */
-    private boolean directory = false;
-    
-    /** whether the argument value is a file */
-    private boolean file = false;
-
-    /** whether the argument value is a hidden file or directory */
-    private boolean hidden = false;
-
-    /**
-     * Validate the list of values against the list of permitted values.
-     * If a value is valid, replace the string in the <code>values</code>
-     * {@link java.util.List} with the {@link java.io.File} instance.
-     * 
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values) throws InvalidArgumentException {
-        for (final ListIterator i = values.listIterator(); i.hasNext();) {
-            final String name = (String)i.next();
-            final File f = new File(name);
-
-            if ((existing && !f.exists())
-                || (file && !f.isFile())
-                || (directory && !f.isDirectory())
-                || (hidden && !f.isHidden())
-                || (readable && !f.canRead())
-                || (writable && !f.canWrite())) {
-
-                throw new InvalidArgumentException(name);
-            }
-            
-            i.set(f);
-        }
-    }
-
-    /**
-     * Returns whether the argument values must represent directories.
-     *
-     * @return whether the argument values must represent directories.
-     */
-    public boolean isDirectory() {
-        return directory;
-    }
-
-    /**
-     * Specifies whether the argument values must represent directories.
-     *
-     * @param directory specifies whether the argument values must 
-     * represent directories.
-     */
-    public void setDirectory(boolean directory) {
-        this.directory = directory;
-    }
-
-    /**
-     * Returns whether the argument values must represent existing 
-     * files/directories.
-     *
-     * @return whether the argument values must represent existing 
-     * files/directories.
-     */
-    public boolean isExisting() {
-        return existing;
-    }
-
-    /**
-     * Specifies whether the argument values must represent existing 
-     * files/directories.
-     *
-     * @param existing specifies whether the argument values must 
-     * represent existing files/directories.
-     */
-    public void setExisting(boolean existing) {
-        this.existing = existing;
-    }
-
-    /**
-     * Returns whether the argument values must represent directories.
-     *
-     * @return whether the argument values must represent directories.
-     */
-    public boolean isFile() {
-        return file;
-    }
-
-    /**
-     * Specifies whether the argument values must represent files.
-     *
-     * @param file specifies whether the argument values must 
-     * represent files.
-     */
-    public void setFile(boolean file) {
-        this.file = file;
-    }
-
-    /**
-     * Returns whether the argument values must represent hidden 
-     * files/directories.
-     *
-     * @return whether the argument values must represent hidden 
-     * files/directories.
-     */
-    public boolean isHidden() {
-        return hidden;
-    }
-
-    /**
-     * Specifies whether the argument values must represent hidden 
-     * files/directories.
-     *
-     * @param hidden specifies whether the argument values must 
-     * represent hidden files/directories.
-     */
-    public void setHidden(boolean hidden) {
-        this.hidden = hidden;
-    }
-
-    /**
-     * Returns whether the argument values must represent readable 
-     * files/directories.
-     *
-     * @return whether the argument values must represent readable 
-     * files/directories.
-     */
-    public boolean isReadable() {
-        return readable;
-    }
-
-    /**
-     * Specifies whether the argument values must represent readable 
-     * files/directories.
-     *
-     * @param readable specifies whether the argument values must 
-     * represent readable files/directories.
-     */
-    public void setReadable(boolean readable) {
-        this.readable = readable;
-    }
-
-    /**
-     * Returns whether the argument values must represent writable 
-     * files/directories.
-     *
-     * @return whether the argument values must represent writable 
-     * files/directories.
-     */
-    public boolean isWritable() {
-        return writable;
-    }
-
-    /**
-     * Specifies whether the argument values must represent writable 
-     * files/directories.
-     *
-     * @param writable specifies whether the argument values must 
-     * represent writable files/directories.
-     */
-    public void setWritable(boolean writable) {
-        this.writable = writable;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/InvalidArgumentException.java b/src/java/org/apache/commons/cli2/validation/InvalidArgumentException.java
deleted file mode 100644
index ea103084..00000000
--- a/src/java/org/apache/commons/cli2/validation/InvalidArgumentException.java
+++ /dev/null
@@ -1,33 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-/**
- * An exception indicating validation failure.
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class InvalidArgumentException extends Exception {
-
-    /**
-     * Creates a new exception
-     * @param message the reason for failure
-     */
-    public InvalidArgumentException(final String message) {
-        super(message);
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/NumberValidator.java b/src/java/org/apache/commons/cli2/validation/NumberValidator.java
deleted file mode 100644
index 2b3f9409..00000000
--- a/src/java/org/apache/commons/cli2/validation/NumberValidator.java
+++ /dev/null
@@ -1,199 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.text.NumberFormat;
-import java.text.ParsePosition;
-
-import java.util.List;
-import java.util.ListIterator;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * The <code>NumberValidator</code> validates the string argument
- * values are numbers.  If the value is a number, the string value in
- * the {@link java.util.List} of values is replaced with the
- * {@link java.lang.Number} instance.
- *
- * A maximum and minimum value can also be specified using
- * the {@link #setMaximum setMaximum}, and the
- * {@link #setMinimum setMinimum} methods.
- *
- * The following example shows how to limit the valid values
- * for the age attribute to integers less than 100.
- *
- * <pre>
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * NumberValidator validator = NumberValidator.getIntegerInstance();
- * validator.setMaximum(new Integer(100));
- *
- * Argument age =
- *     builder.withName("age");
- *            .withValidator(validator);
- * </pre>
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class NumberValidator implements Validator {
-    /** the <code>NumberFormat</code> being used. */
-    private NumberFormat format;
-
-    /** the lower bound for argument values. */
-    private Number minimum = null;
-
-    /** the upper bound for argument values */
-    private Number maximum = null;
-
-    /**
-     * Creates a new NumberValidator based on the specified NumberFormat
-     * @param format the format of numbers to accept
-     */
-    public NumberValidator(final NumberFormat format) {
-        setFormat(format);
-    }
-
-    /**
-     * Returns a <code>NumberValidator</code> for a currency format
-     * for the current default locale.
-     * @return a <code>NumberValidator</code> for a currency format
-     * for the current default locale.
-     */
-    public static NumberValidator getCurrencyInstance() {
-        return new NumberValidator(NumberFormat.getCurrencyInstance());
-    }
-
-    /**
-     * Returns a <code>NumberValidator</code> for an integer number format
-     * for the current default locale.
-     * @return a <code>NumberValidator</code> for an integer number format
-     * for the current default locale.
-     */
-    public static NumberValidator getIntegerInstance() {
-        final NumberFormat format = NumberFormat.getNumberInstance();
-        format.setParseIntegerOnly(true);
-
-        return new NumberValidator(format);
-    }
-
-    /**
-     * Returns a <code>NumberValidator</code> for a percentage format
-     * for the current default locale.
-     * @return a <code>NumberValidator</code> for a percentage format
-     * for the current default locale.
-     */
-    public static NumberValidator getPercentInstance() {
-        return new NumberValidator(NumberFormat.getPercentInstance());
-    }
-
-    /**
-     * Returns a <code>NumberValidator</code> for a general-purpose
-     * number format for the current default locale.
-     * @return a <code>NumberValidator</code> for a general-purpose
-     * number format for the current default locale.
-     */
-    public static NumberValidator getNumberInstance() {
-        return new NumberValidator(NumberFormat.getNumberInstance());
-    }
-
-    /**
-     * Validate the list of values against the list of permitted values.
-     * If a value is valid, replace the string in the <code>values</code>
-     * {@link java.util.List} with the {@link java.lang.Number} instance.
-     *
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values)
-        throws InvalidArgumentException {
-        for (final ListIterator i = values.listIterator(); i.hasNext();) {
-            final String value = (String) i.next();
-
-            final ParsePosition pp = new ParsePosition(0);
-            final Number number = format.parse(value, pp);
-
-            if (pp.getIndex() < value.length()) {
-                throw new InvalidArgumentException(value);
-            }
-
-            if (((minimum != null) && (number.doubleValue() < minimum.doubleValue())) ||
-                    ((maximum != null) && (number.doubleValue() > maximum.doubleValue()))) {
-                throw new InvalidArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.NUMBERVALIDATOR_NUMBER_OUTOFRANGE,
-                                                                                                 new Object[] {
-                                                                                                     value
-                                                                                                 }));
-            }
-
-            i.set(number);
-        }
-    }
-
-    /**
-     * Return the format being used to validate argument values against.
-     *
-     * @return the format being used to validate argument values against.
-     */
-    public NumberFormat getFormat() {
-        return format;
-    }
-
-    /**
-     * Specify the format being used to validate argument values against.
-     *
-     * @param format the format being used to validate argument values against.
-     */
-    protected void setFormat(NumberFormat format) {
-        this.format = format;
-    }
-
-    /**
-     * Return the maximum value allowed for an argument value.
-     *
-     * @return the maximum value allowed for an argument value.
-     */
-    public Number getMaximum() {
-        return maximum;
-    }
-
-    /**
-     * Specify the maximum value allowed for an argument value.
-     *
-     * @param maximum the maximum value allowed for an argument value.
-     */
-    public void setMaximum(Number maximum) {
-        this.maximum = maximum;
-    }
-
-    /**
-     * Return the minimum value allowed for an argument value.
-     *
-     * @return the minimum value allowed for an argument value.
-     */
-    public Number getMinimum() {
-        return minimum;
-    }
-
-    /**
-     * Specify the minimum value allowed for an argument value.
-     *
-     * @param minimum the minimum value allowed for an argument value.
-     */
-    public void setMinimum(Number minimum) {
-        this.minimum = minimum;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/UrlValidator.java b/src/java/org/apache/commons/cli2/validation/UrlValidator.java
deleted file mode 100644
index e73855b6..00000000
--- a/src/java/org/apache/commons/cli2/validation/UrlValidator.java
+++ /dev/null
@@ -1,114 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.net.MalformedURLException;
-import java.net.URL;
-
-import java.util.List;
-import java.util.ListIterator;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * The <code>UrlValidator</code> validates the string argument
- * values are URLs.  If the value is a URL, the string value in
- * the {@link java.util.List} of values is replaced with the
- * {@link java.net.URL} instance.
- *
- * URLs can also be validated based on their scheme by using
- * the {@link #setProtocol setProtocol} method, or by using the specified
- * {@link #UrlValidator(java.lang.String) constructor}.
- *
- * The following example shows how to limit the valid values
- * for the site argument to 'https' URLs.
- *
- * <pre>
- * ...
- * ArgumentBuilder builder = new ArgumentBuilder();
- * Argument site =
- *     builder.withName("site");
- *            .withValidator(new URLValidator("https"));
- * </pre>
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class UrlValidator implements Validator {
-    /** allowed protocol */
-    private String protocol = null;
-
-    /**
-     * Creates a UrlValidator.
-     */
-    public UrlValidator() {
-    }
-
-    /**
-     * Creates a UrlValidator for the specified protocol.
-     */
-    public UrlValidator(final String protocol) {
-        setProtocol(protocol);
-    }
-
-    /**
-     * Validate the list of values against the list of permitted values.
-     * If a value is valid, replace the string in the <code>values</code>
-     * {@link java.util.List} with the { java.net.URL} instance.
-     *
-     * @see org.apache.commons.cli2.validation.Validator#validate(java.util.List)
-     */
-    public void validate(final List values)
-        throws InvalidArgumentException {
-        for (final ListIterator i = values.listIterator(); i.hasNext();) {
-            final String name = (String) i.next();
-
-            try {
-                final URL url = new URL(name);
-
-                if ((protocol != null) && !protocol.equals(url.getProtocol())) {
-                    throw new InvalidArgumentException(name);
-                }
-
-                i.set(url);
-            } catch (final MalformedURLException mue) {
-                throw new InvalidArgumentException(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.URLVALIDATOR_MALFORMED_URL,
-                                                                                                 new Object[] {
-                                                                                                     name
-                                                                                                 }));
-            }
-        }
-    }
-
-    /**
-     * Returns the protocol that must be used by a valid URL.
-     *
-     * @return the protocol that must be used by a valid URL.
-     */
-    public String getProtocol() {
-        return protocol;
-    }
-
-    /**
-     * Specifies the protocol that a URL must have to be valid.
-     *
-     * @param protocol the protocol that a URL must have to be valid.
-     */
-    public void setProtocol(String protocol) {
-        this.protocol = protocol;
-    }
-}
diff --git a/src/java/org/apache/commons/cli2/validation/Validator.java b/src/java/org/apache/commons/cli2/validation/Validator.java
deleted file mode 100644
index 9d5778ad..00000000
--- a/src/java/org/apache/commons/cli2/validation/Validator.java
+++ /dev/null
@@ -1,42 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.util.List;
-
-/**
- * The validation interface for validating argument values(s).
- *
- * A validator can replace the argument string value with a
- * specific class instance e.g. the {@link UrlValidator} replaces
- * the string value with a {@link java.net.URL} instance.
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public interface Validator {
-
-    /**
-     * Validate the specified values (List of Strings).
-     * 
-     * @param values The values to validate.
-     * 
-     * @throws InvalidArgumentException If any of the 
-     * specified values are not valid.
-     */
-    void validate(final List values) throws InvalidArgumentException;
-
-}
diff --git a/src/java/org/apache/commons/cli2/validation/package.html b/src/java/org/apache/commons/cli2/validation/package.html
deleted file mode 100644
index 63bc28b1..00000000
--- a/src/java/org/apache/commons/cli2/validation/package.html
+++ /dev/null
@@ -1,16 +0,0 @@
-<html>
-<body>
-Provides classes and interfaces for validating argument values.
-
-These classes are capable of validating argument values of the following type:
-
-<ul>
-    <li>file/directory</li>
-    <li>number</li>
-    <li>date/time</li>
-    <li>URL</li>
-    <li>enumeration</li>
-    <li>class</li>
-</ul>
-</body>
-</html>
\ No newline at end of file
diff --git a/src/test/org/apache/commons/cli2/CLITestCase.java b/src/test/org/apache/commons/cli2/CLITestCase.java
deleted file mode 100644
index a16d15ab..00000000
--- a/src/test/org/apache/commons/cli2/CLITestCase.java
+++ /dev/null
@@ -1,84 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.Iterator;
-import java.util.LinkedList;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-public abstract class CLITestCase extends TestCase {
-
-	public static List list() {
-	    return Collections.EMPTY_LIST;
-	}
-
-	public static List list(final Object args[]) {
-	    return new LinkedList(Arrays.asList(args));
-	}
-
-	public static List list(final Object arg0) {
-	    return list(new Object[] { arg0 });
-	}
-
-	public static List list(final Object arg0, final Object arg1) {
-	    return list(new Object[] { arg0, arg1 });
-	}
-
-	public static List list(final Object arg0, final Object arg1, final Object arg2) {
-	    return list(new Object[] { arg0, arg1, arg2 });
-	}
-
-	public static List list(final Object arg0, final Object arg1, final Object arg2, final Object arg3) {
-	    return list(new Object[] { arg0, arg1, arg2, arg3 });
-	}
-
-	public static List list(final Object arg0, final Object arg1, final Object arg2, final Object arg3, final Object arg4) {
-	    return list(new Object[] { arg0, arg1, arg2, arg3, arg4 });
-	}
-
-	public static List list(final Object arg0, final Object arg1, final Object arg2, final Object arg3, final Object arg4, final Object arg5) {
-	    return list(new Object[] { arg0, arg1, arg2, arg3, arg4, arg5 });
-	}
-
-	public static void assertListContentsEqual(final List expected, final List found) {
-	
-	    final Iterator e = expected.iterator();
-	    final Iterator f = found.iterator();
-	
-	    while (e.hasNext() && f.hasNext()) {
-	        assertEquals(e.next(), f.next());
-	    }
-	
-	    if (e.hasNext()) {
-	        fail("Expected more elements");
-	    }
-	
-	    if (f.hasNext()) {
-	        fail("Found more elements");
-	    }
-	}
-
-	public static void assertContentsEqual(final Collection expected, final Collection found) {
-	    assertTrue(expected.containsAll(found));
-	    assertTrue(found.containsAll(expected));
-	    assertEquals(expected.size(), found.size());
-	}
-}
diff --git a/src/test/org/apache/commons/cli2/CommandLineDefaultsTest.java b/src/test/org/apache/commons/cli2/CommandLineDefaultsTest.java
deleted file mode 100644
index a05e8d31..00000000
--- a/src/test/org/apache/commons/cli2/CommandLineDefaultsTest.java
+++ /dev/null
@@ -1,250 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Arrays;
-import java.util.Collections;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.SwitchBuilder;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-
-/**
- * Tests the interaction of command line values and defaults supplied in different ways.
- * 
- * Tests marked _Parsed involve values parsed from a command line.
- * 
- * Tests marked _Method involve defaults supplied in the query method.
- * 
- * Tests marked _Option involce defaults specified in the model.
- * 
- * @author Rob Oxspring
- */
-public class CommandLineDefaultsTest extends TestCase {
-    
-    /*
-     * utils to grab the default from the method 
-     */
-    
-    private Object methodSwitch(WriteableCommandLine cl, Option o, Boolean bool) {
-        return cl.getSwitch(o, bool);
-    }
-
-    private Object methodSwitchNull(WriteableCommandLine cl, Option o) {
-        return methodSwitch(cl, o, null);
-    }
-
-    private Object methodSwitchOff(WriteableCommandLine cl, Option o) {
-        return methodSwitch(cl, o, Boolean.FALSE);
-    }
-
-    private Object methodSwitchOn(WriteableCommandLine cl, Option o) {
-        return methodSwitch(cl, o, Boolean.TRUE);
-    }
-
-    private Object methodValueMissing(WriteableCommandLine cl, Option o) {
-        return cl.getValue(o);
-    }
-
-    private Object methodValuePresent(WriteableCommandLine cl, Option o) {
-        return cl.getValue(o, "method");
-    }
-
-    /*
-     * utils to grab the default from the option model 
-     */
-    
-    private Option optionSwitch(Boolean bool) {
-        return new SwitchBuilder().withName("switch").withSwitchDefault(bool)
-                .create();
-    }
-
-    private Option optionSwitchNull() {
-        return optionSwitch(null);
-    }
-
-    private Option optionSwitchOff() {
-        return optionSwitch(Boolean.FALSE);
-    }
-
-    private Option optionSwitchOn() {
-        return optionSwitch(Boolean.TRUE);
-    }
-
-    private Option optionValueMissing() {
-        return new ArgumentBuilder().create();
-    }
-
-    private Option optionValuePresent() {
-        return new ArgumentBuilder().withDefaults(
-                Arrays.asList(new String[] { "option" })).create();
-    }
-
-    /*
-     * utils to grab the input from the command line 
-     */
-    
-    private WriteableCommandLine parsedSwitch(Option o, Boolean bool) {
-        final List args;
-        if (bool == null) {
-            args = Collections.EMPTY_LIST;
-        } else {
-            args = Collections
-                    .singletonList(String.valueOf(bool).toLowerCase());
-        }
-        WriteableCommandLine cl = new WriteableCommandLineImpl(o, args);
-        o.defaults(cl);
-        if (bool != null) {
-            cl.addSwitch(o, bool.booleanValue());
-        }
-        return cl;
-    }
-
-    private WriteableCommandLine parsedSwitchNull(Option o) {
-        return parsedSwitch(o, null);
-    }
-
-    private WriteableCommandLine parsedSwitchOn(Option o) {
-        return parsedSwitch(o, Boolean.TRUE);
-    }
-
-    private WriteableCommandLine parsedValueMissing(Option o) {
-        WriteableCommandLine cl = new WriteableCommandLineImpl(o,
-                Collections.EMPTY_LIST);
-        o.defaults(cl);
-        return cl;
-    }
-
-    private WriteableCommandLine parsedValuePresent(Option o) {
-        WriteableCommandLine cl = new WriteableCommandLineImpl(o, Arrays
-                .asList(new String[] { "parsed" }));
-        o.defaults(cl);
-        cl.addValue(o, "parsed");
-        return cl;
-    }
-    
-    /*
-     * tests
-     */
-
-    public void testSwitch_Method() {
-        final Option o = optionSwitchNull();
-        final WriteableCommandLine cl = parsedSwitchNull(o);
-        final Object v = methodSwitchOn(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Method_Option() {
-        final Option o = optionSwitchOff();
-        final WriteableCommandLine cl = parsedSwitchNull(o);
-        final Object v = methodSwitchOn(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Option() {
-        final Option o = optionSwitchOn();
-        final WriteableCommandLine cl = parsedSwitchNull(o);
-        final Object v = methodSwitchNull(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Parsed() {
-        final Option o = optionSwitchNull();
-        final WriteableCommandLine cl = parsedSwitchOn(o);
-        final Object v = methodSwitchNull(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Parsed_Method() {
-        final Option o = optionSwitchOff();
-        final WriteableCommandLine cl = parsedSwitchOn(o);
-        final Object v = methodSwitchNull(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Parsed_Method_Option() {
-        final Option o = optionSwitchOff();
-        final WriteableCommandLine cl = parsedSwitchOn(o);
-        final Object v = methodSwitchOff(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testSwitch_Parsed_Option() {
-        final Option o = optionSwitchOff();
-        final WriteableCommandLine cl = parsedSwitchOn(o);
-        final Object v = methodSwitchNull(cl, o);
-        assertEquals(Boolean.TRUE, v);
-    }
-
-    public void testValues() {
-        final Option o = optionValueMissing();
-        final WriteableCommandLine cl = parsedValueMissing(o);
-        final Object v = methodValueMissing(cl, o);
-        assertNull(v);
-    }
-
-    public void testValues_Method() {
-        final Option o = optionValueMissing();
-        final WriteableCommandLine cl = parsedValueMissing(o);
-        final Object v = methodValuePresent(cl, o);
-        assertEquals("method", v);
-    }
-
-    public void testValues_Method_Option() {
-        final Option o = optionValuePresent();
-        final WriteableCommandLine cl = parsedValueMissing(o);
-        final Object v = methodValuePresent(cl, o);
-        assertEquals("method", v);
-    }
-
-    public void testValues_Option() {
-        final Option o = optionValuePresent();
-        final WriteableCommandLine cl = parsedValueMissing(o);
-        final Object v = methodValueMissing(cl, o);
-        assertEquals("option", v);
-    }
-
-    public void testValues_Parsed() {
-        final Option o = optionValueMissing();
-        final WriteableCommandLine cl = parsedValuePresent(o);
-        final Object v = methodValueMissing(cl, o);
-        assertEquals("parsed", v);
-    }
-
-    public void testValues_Parsed_Method() {
-        final Option o = optionValueMissing();
-        final WriteableCommandLine cl = parsedValuePresent(o);
-        final Object v = methodValuePresent(cl, o);
-        assertEquals("parsed", v);
-    }
-
-    public void testValues_Parsed_Method_Option() {
-        final Option o = optionValuePresent();
-        final WriteableCommandLine cl = parsedValuePresent(o);
-        final Object v = methodValuePresent(cl, o);
-        assertEquals("parsed", v);
-    }
-
-    public void testValues_Parsed_Option() {
-        final Option o = optionValuePresent();
-        final WriteableCommandLine cl = parsedValuePresent(o);
-        final Object v = methodValueMissing(cl, o);
-        assertEquals("parsed", v);
-    }
-}
\ No newline at end of file
diff --git a/src/test/org/apache/commons/cli2/CommandLineTestCase.java b/src/test/org/apache/commons/cli2/CommandLineTestCase.java
deleted file mode 100644
index 38349dcd..00000000
--- a/src/test/org/apache/commons/cli2/CommandLineTestCase.java
+++ /dev/null
@@ -1,511 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Collections;
-import java.util.Iterator;
-import java.util.List;
-
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.option.ArgumentTest;
-import org.apache.commons.cli2.option.CommandTest;
-import org.apache.commons.cli2.option.DefaultOptionTest;
-import org.apache.commons.cli2.option.OptionTestCase;
-import org.apache.commons.cli2.option.PropertyOption;
-import org.apache.commons.cli2.option.SwitchTest;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public abstract class CommandLineTestCase
-    extends CLITestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-    public final Option present =
-        new DefaultOptionBuilder().withLongName("present").withLongName("alsopresent").create();
-    public final Option missing = new DefaultOptionBuilder().withLongName("missing").create();
-    public final Option multiple = new DefaultOptionBuilder().withLongName("multiple").create();
-    public final Option bool = new DefaultOptionBuilder().withLongName("bool").create();
-    public final Option root =
-        new GroupBuilder().withOption(present).withOption(missing).withOption(multiple)
-                          .withOption(bool).create();
-    private CommandLine commandLine;
-
-    protected abstract CommandLine createCommandLine();
-
-    /*
-     * @see TestCase#setUp()
-     */
-    public void setUp()
-        throws Exception {
-        super.setUp();
-        commandLine = createCommandLine();
-    }
-
-    /*
-     * Class to test for boolean hasOption(String)
-     */
-    public final void testHasOptionString() {
-        assertTrue(commandLine.hasOption("--present"));
-        assertTrue(commandLine.hasOption("--alsopresent"));
-        assertFalse(commandLine.hasOption("--missing"));
-    }
-
-    /*
-     * Class to test for boolean hasOption(Option)
-     */
-    public final void testHasOptionOption() {
-        assertTrue(commandLine.hasOption(present));
-        assertFalse(commandLine.hasOption(missing));
-    }
-
-    public final void testGetOption() {
-        assertSame(present, commandLine.getOption("--present"));
-        assertSame(present, commandLine.getOption("--alsopresent"));
-
-        //TODO decide whether the following assertion is valid
-        //assertSame(missing,commandLine.getOption("--missing"));
-    }
-
-    /*
-     * Class to test for List getValues(String)
-     */
-    public final void testGetValuesString() {
-        assertListContentsEqual(list("present value"), commandLine.getValues("--present"));
-        assertListContentsEqual(list("value 1", "value 2", "value 3"),
-                                commandLine.getValues("--multiple"));
-        assertTrue(commandLine.getValues("--missing").isEmpty());
-    }
-
-    /*
-     * Class to test for List getValues(String, List)
-     */
-    public final void testGetValuesStringList() {
-        assertListContentsEqual(list("present value"), commandLine.getValues("--present", null));
-        assertListContentsEqual(list("present value"), commandLine.getValues("--alsopresent", null));
-        assertSame(commandLine.getValues("--missing", Collections.EMPTY_LIST),
-                   Collections.EMPTY_LIST);
-
-        final List def = Collections.singletonList("default value");
-        assertSame(def, commandLine.getValues("--missing", def));
-    }
-
-    /*
-     * Class to test for List getValues(Option)
-     */
-    public final void testGetValuesOption() {
-        assertListContentsEqual(list("present value"), commandLine.getValues(present));
-        assertTrue(commandLine.getValues(missing).isEmpty());
-    }
-
-    /*
-     * Class to test for List getValues(Option, List)
-     */
-    public final void testGetValuesOptionList() {
-        assertListContentsEqual(list("present value"), commandLine.getValues(present));
-        assertSame(commandLine.getValues(missing, Collections.EMPTY_LIST), Collections.EMPTY_LIST);
-
-        final List defs = Collections.singletonList("custom default");
-        assertSame(defs, commandLine.getValues(missing, defs));
-    }
-
-    /*
-     * Class to test for Object getValue(String)
-     */
-    public final void testGetValueString() {
-        assertEquals("present value", commandLine.getValue("--present"));
-        assertEquals("present value", commandLine.getValue("--alsopresent"));
-        assertNull(commandLine.getValue("--missing"));
-
-        try {
-            commandLine.getValue("--multiple");
-            fail("expected IllegalStateException");
-        } catch (IllegalStateException e) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for Object getValue(String, Object)
-     */
-    public final void testGetValueStringObject() {
-        assertEquals("present value", commandLine.getValue("--present", "default value"));
-        assertEquals("present value", commandLine.getValue("--alsopresent", "default value"));
-        assertEquals("default value", commandLine.getValue("--missing", "default value"));
-
-        try {
-            commandLine.getValue("--multiple");
-            fail("expected IllegalStateException");
-        } catch (IllegalStateException e) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for Object getValue(Option)
-     */
-    public final void testGetValueOption() {
-        assertEquals("present value", commandLine.getValue(present));
-        assertNull(commandLine.getValue(missing));
-
-        try {
-            commandLine.getValue(multiple);
-            fail("expected IllegalStateException");
-        } catch (IllegalStateException e) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for Object getValue(Option, Object)
-     */
-    public final void testGetValueOptionObject() {
-        assertEquals("present value", commandLine.getValue(present, "default value"));
-        assertEquals("default value", commandLine.getValue(missing, "default value"));
-
-        try {
-            commandLine.getValue(multiple);
-            fail("expected IllegalStateException");
-        } catch (IllegalStateException e) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for Boolean getSwitch(String)
-     */
-    public final void testGetSwitchString() {
-        assertEquals(Boolean.TRUE, commandLine.getSwitch("--bool"));
-        assertNull(commandLine.getSwitch("--missing"));
-    }
-
-    /*
-     * Class to test for Boolean getSwitch(String, Boolean)
-     */
-    public final void testGetSwitchStringBoolean() {
-        assertEquals(Boolean.TRUE, commandLine.getSwitch("--bool", Boolean.FALSE));
-        assertEquals(Boolean.FALSE, commandLine.getSwitch("--missing", Boolean.FALSE));
-    }
-
-    /*
-     * Class to test for Boolean getSwitch(Option)
-     */
-    public final void testGetSwitchOption() {
-        assertEquals(Boolean.TRUE, commandLine.getSwitch(bool));
-        assertNull(commandLine.getSwitch(missing));
-    }
-
-    /*
-     * Class to test for Boolean getSwitch(Option, Boolean)
-     */
-    public final void testGetSwitchOptionBoolean() {
-        assertEquals(Boolean.TRUE, commandLine.getSwitch(bool, Boolean.FALSE));
-        assertEquals(Boolean.FALSE, commandLine.getSwitch(missing, Boolean.FALSE));
-    }
-
-    /*
-     * Class to test for String getProperty(String)
-     */
-    public final void testGetPropertyString() {
-        assertEquals("present property", commandLine.getProperty("present"));
-        assertNull(commandLine.getProperty("missing"));
-    }
-
-    /*
-     * Class to test for String getProperty(String, String)
-     */
-    public final void testGetPropertyStringString() {
-        assertEquals("present property", commandLine.getProperty("present", "default property"));
-        assertEquals("default property", commandLine.getProperty("missing", "default property"));
-    }
-
-    public final void testGetProperties() {
-        assertTrue(commandLine.getProperties().containsAll(list("present")));
-    }
-
-    /*
-     * Class to test for int getOptionCount(String)
-     */
-    public final void testGetOptionCountString() {
-        // one option, one switch
-        assertTrue(1 <= commandLine.getOptionCount("--present"));
-        assertTrue(1 <= commandLine.getOptionCount("--bool"));
-        assertEquals(0, commandLine.getOptionCount("--missing"));
-    }
-
-    /*
-     * Class to test for int getOptionCount(Option)
-     */
-    public final void testGetOptionCountOption() {
-        // one option, one switch
-        assertTrue(1 <= commandLine.getOptionCount(present));
-        assertTrue(1 <= commandLine.getOptionCount(bool));
-        assertEquals(0, commandLine.getOptionCount(missing));
-    }
-
-    public final void testGetOptions() {
-        //TODO Implement getOptions().
-    }
-
-    public final void testGetOptionTriggers() {
-        //TODO Implement getOptionTriggers().
-    }
-
-    // OLD TESTS FOLLOW
-    public final void testProperties() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        assertTrue(writeable.getProperties().isEmpty());
-
-        writeable.addProperty("myprop", "myval");
-        assertEquals(1, writeable.getProperties().size());
-        assertEquals("myval", writeable.getProperty("myprop"));
-
-        writeable.addProperty("myprop", "myval2");
-        assertEquals(1, writeable.getProperties().size());
-        assertEquals("myval2", writeable.getProperty("myprop"));
-
-        writeable.addProperty("myprop2", "myval3");
-        assertEquals(2, writeable.getProperties().size());
-        assertEquals("myval3", writeable.getProperty("myprop2"));
-    }
-
-    public final void testOptions() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        final Option start = CommandTest.buildStartCommand();
-
-        assertFalse(writeable.hasOption(start));
-        assertFalse(writeable.hasOption("start"));
-        assertFalse(writeable.hasOption("go"));
-
-        writeable.addOption(start);
-
-        assertTrue(writeable.hasOption(start));
-        assertTrue(writeable.hasOption("start"));
-        assertTrue(writeable.hasOption("go"));
-    }
-
-    public final void testValues() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        final Option start = CommandTest.buildStartCommand();
-
-        assertNull(writeable.getValue(start));
-        assertTrue(writeable.getValues(start).isEmpty());
-
-        writeable.addOption(start);
-
-        assertTrue(writeable.getValues(start).isEmpty());
-
-        writeable.addValue(start, "file1");
-
-        assertEquals("file1", writeable.getValue(start));
-        assertEquals("file1", writeable.getValue("start"));
-        assertEquals("file1", writeable.getValue("go"));
-        assertEquals(1, writeable.getValues(start).size());
-        assertEquals(1, writeable.getValues("start").size());
-        assertEquals(1, writeable.getValues("go").size());
-        assertTrue(writeable.getValues(start).contains("file1"));
-        assertTrue(writeable.getValues("start").contains("file1"));
-        assertTrue(writeable.getValues("go").contains("file1"));
-
-        writeable.addValue(start, "file2");
-
-        try {
-            writeable.getValue(start);
-            fail("Cannot get single value if multiple are present");
-        } catch (IllegalStateException ise) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         ise.getMessage());
-        }
-
-        try {
-            writeable.getValue("start");
-            fail("Cannot get single value if multiple are present");
-        } catch (IllegalStateException ise) {
-            assertEquals(resources.getMessage(ResourceConstants.ARGUMENT_TOO_MANY_VALUES),
-                         ise.getMessage());
-        }
-
-        writeable.getValues(start).add("file3");
-    }
-
-    public final void testSwitches() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        final Option start = CommandTest.buildStartCommand();
-
-        assertNull(writeable.getSwitch(start));
-        assertNull(writeable.getSwitch("start"));
-        assertNull(writeable.getSwitch("go"));
-
-        writeable.addSwitch(start, true);
-
-        try {
-            writeable.addSwitch(start, false);
-            fail("Switch cannot be changed");
-        } catch (IllegalStateException ise) {
-            assertEquals(resources.getMessage(ResourceConstants.SWITCH_ALREADY_SET),
-                         ise.getMessage());
-        }
-    }
-
-    public final void testSwitches_True() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        final Option start = CommandTest.buildStartCommand();
-
-        writeable.addSwitch(start, true);
-        assertSame(Boolean.TRUE, writeable.getSwitch(start));
-    }
-
-    public final void testSwitches_False() {
-        final Option option = new PropertyOption();
-        final List args = CLITestCase.list();
-        final WriteableCommandLine writeable = OptionTestCase.commandLine(option, args);
-
-        final Option start = CommandTest.buildStartCommand();
-
-        writeable.addSwitch(start, false);
-        assertSame(Boolean.FALSE, writeable.getSwitch(start));
-    }
-
-    //    public final void testLooksLikeOption() {
-    //        final Option option = new PropertyOption();
-    //        final List args = OptionTestCase.list();
-    //        final WriteableCommandLine commandLine =
-    //            OptionTestCase.commandLine(option, args);
-    //
-    //        assertTrue(commandLine.looksLikeOption("-D"));
-    //        assertFalse(commandLine.looksLikeOption("--help"));
-    //        assertFalse(commandLine.looksLikeOption("+display"));
-    //        assertFalse(commandLine.looksLikeOption("myprefix"));
-    //        assertFalse(commandLine.looksLikeOption("myprefix2"));
-    //        assertFalse(commandLine.looksLikeOption("myprefference"));
-    //        assertFalse(commandLine.looksLikeOption("/SCANDISK"));
-    //        assertFalse(commandLine.looksLikeOption("update"));
-    //    }
-    public final void testGetOptions_Order()
-        throws OptionException {
-        final Option help = DefaultOptionTest.buildHelpOption();
-        final Option login = CommandTest.buildLoginCommand();
-        final Option targets = ArgumentTest.buildTargetsArgument();
-
-        final Group group =
-            new GroupBuilder().withOption(help).withOption(login).withOption(targets).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(group);
-
-        final CommandLine cl =
-            parser.parse(new String[] { "login", "rob", "--help", "target1", "target2" });
-
-        final Iterator i = cl.getOptions().iterator();
-
-        assertSame(login, i.next());
-        assertSame(help, i.next());
-        assertSame(targets, i.next());
-        assertSame(targets, i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public final void testGetOptionCount()
-        throws OptionException {
-        final Option help = DefaultOptionTest.buildHelpOption();
-        final Option login = CommandTest.buildLoginCommand();
-        final Option targets = ArgumentTest.buildTargetsArgument();
-        final Option display = SwitchTest.buildDisplaySwitch();
-
-        final Group group =
-            new GroupBuilder().withOption(help).withOption(login).withOption(targets)
-                              .withOption(display).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(group);
-
-        final CommandLine cl =
-            parser.parse(new String[] {
-                             "--help", "login", "rob", "+display", "--help", "--help", "target1",
-                             "target2"
-                         });
-
-        assertEquals(1, cl.getOptionCount(login));
-        assertEquals(3, cl.getOptionCount(help));
-        assertEquals(2, cl.getOptionCount(targets));
-        assertEquals(1, cl.getOptionCount(display));
-    }
-
-    public final void testGetOptionCount_Strings()
-        throws OptionException {
-        final Option help = DefaultOptionTest.buildHelpOption();
-        final Option login = CommandTest.buildLoginCommand();
-        final Option targets = ArgumentTest.buildTargetsArgument();
-        final Option display = SwitchTest.buildDisplaySwitch();
-
-        final Group group =
-            new GroupBuilder().withOption(help).withOption(login).withOption(targets)
-                              .withOption(display).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(group);
-
-        final CommandLine cl =
-            parser.parse(new String[] {
-                             "--help", "login", "rob", "+display", "--help", "--help", "target1",
-                             "target2"
-                         });
-
-        assertEquals(1, cl.getOptionCount("login"));
-        assertEquals(3, cl.getOptionCount("-?"));
-        assertEquals(1, cl.getOptionCount("+display"));
-    }
-
-    public final void testOptionAsArgument()
-        throws OptionException {
-        final Option p = new DefaultOptionBuilder().withShortName("p").create();
-        final Argument argument = new ArgumentBuilder().create();
-        final Option withArgument =
-            new DefaultOptionBuilder().withShortName("attr").withArgument(argument).create();
-
-        final Group group = new GroupBuilder().withOption(p).withOption(withArgument).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(group);
-
-        final CommandLine cl = parser.parse(new String[] { "-p", "-attr", "p" });
-
-        assertEquals(1, cl.getOptionCount("-p"));
-        assertTrue(cl.hasOption("-p"));
-        assertTrue(cl.hasOption("-attr"));
-        assertTrue(cl.getValue("-attr").equals("p"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/DocumentationTest.java b/src/test/org/apache/commons/cli2/DocumentationTest.java
deleted file mode 100644
index 634f0361..00000000
--- a/src/test/org/apache/commons/cli2/DocumentationTest.java
+++ /dev/null
@@ -1,444 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.StringWriter;
-import java.util.ArrayList;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-import org.apache.commons.cli2.option.DefaultOption;
-import org.apache.commons.cli2.option.PropertyOption;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-/**
- * @author Rob
- */
-public class DocumentationTest extends TestCase {
-
-    public void testBasicUsage() throws IOException, OptionException {
-        HelpFormatter helpFormatter = new HelpFormatter();
-        //ignore all printed
-        helpFormatter.setPrintWriter(new PrintWriter(new StringWriter()));
-
-        /*
-         * --version -? -h --help -log file -s|-q|-v|-d Bursting File/Num/Date
-         * validation Switches Commands Auto help Auto exception help
-         *  
-         */
-        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        Option version =
-            obuilder
-                .withLongName("version")
-                .withDescription("Displays version information and then exits")
-                .create();
-
-        Option help =
-            obuilder
-                .withShortName("h")
-                .withShortName("?")
-                .withLongName("help")
-                .withDescription("Displays help on usage and then exits")
-                .create();
-
-        ArgumentBuilder abuilder = new ArgumentBuilder();
-        Argument logFile =
-            abuilder
-                .withDescription("The log file to write to")
-                .withName("file")
-                .withMinimum(1)
-                .withMaximum(1)
-                .create();
-        Option log =
-            obuilder
-                .withArgument(logFile)
-                .withShortName("log")
-                .withDescription("Log progress information to a file")
-                .create();
-
-        GroupBuilder gbuilder = new GroupBuilder();
-        Group outputQuality =
-            gbuilder
-                .withName("quality")
-                .withDescription("Controls the quality of console output")
-                .withMaximum(1)
-                .withOption(
-                    obuilder
-                        .withShortName("s")
-                        .withDescription("Silent")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("q")
-                        .withDescription("Quiet")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("n")
-                        .withDescription("Normal")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("v")
-                        .withDescription("Verbose")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("d")
-                        .withDescription("Debug")
-                        .create())
-                .create();
-
-        Group options =
-            new GroupBuilder()
-                .withName("options")
-                .withOption(version)
-                .withOption(help)
-                .withOption(log)
-                .withOption(outputQuality)
-                .create();
-
-        final String[] args = new String[] { "--bad-option" };
-
-        Parser parser = new Parser();
-        parser.setHelpFormatter(helpFormatter);
-        parser.setGroup(options);
-        parser.setHelpOption(help);
-        CommandLine commandLine = parser.parseAndHelp(args);
-        if (commandLine != null) {
-            if (commandLine.hasOption(version)) {
-                System.out.println("MyApp ver 1.0");
-                return;
-            }
-            if (commandLine.hasOption("-log")) {
-                String filename = (String)commandLine.getValue("-log");
-                //...
-            }
-        }
-
-        try {
-            commandLine = parser.parse(args);
-            fail("Unexpected Option!");
-        }
-        catch (OptionException uoe) {
-            assertEquals(
-                "Unexpected --bad-option while processing options",
-                uoe.getMessage());
-        }
-    }
-    
-    public void testManualIntroduction() {
-        
-        DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        ArgumentBuilder aBuilder = new ArgumentBuilder();
-        GroupBuilder gBuilder = new GroupBuilder();
-        
-        DefaultOption xmlOption = 
-            oBuilder
-                .withLongName("xml")
-                .withDescription("Output using xml format")
-                .create();
-        
-        Argument pathArgument = 
-            aBuilder
-                .withName("path")
-                .withMinimum(1)
-                .withMaximum(1)
-                .create();
-        
-        Group outputChildren = 
-            gBuilder
-                .withOption(xmlOption)
-                .create();
-        
-        Option outputOption = 
-            oBuilder
-                .withLongName("output")
-                .withDescription("Outputs to a file")
-                .withArgument(pathArgument)
-                .withChildren(outputChildren)
-                .create();
-        
-        ///////////////////////////////////////////////////
-        
-        Group options = outputChildren;
-        HelpFormatter hf = new HelpFormatter();
-
-        Parser p = new Parser();
-        p.setGroup(options);
-        p.setHelpFormatter(hf);
-        p.setHelpTrigger("--help");
-        CommandLine cl = p.parseAndHelp(new String[]{});
-        if(cl==null) {
-            System.exit(-1);
-        }
-        
-        //////////////////////////////////////////////////
-        
-        cl = new WriteableCommandLineImpl(outputChildren,new ArrayList());
-        
-        // if we have --output option
-        if(cl.hasOption("--output")) {
-            // grab the path
-            String path = (String)cl.getValue("--output");
-            // grab the format
-            boolean xml = cl.hasOption("--xml");
-            // configure the application's output
-            configureOutput(path,xml);
-        }
-        
-        
-                
-        
-    }
-
-    private void configureOutput(String path, boolean xml) {
-        // TODO Auto-generated method stub
-        
-    }
-
-    public void testExampleAnt() throws IOException, OptionException {
-        // Apache Ant version 1.6.1 compiled on February 12 2004
-
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        Option help =
-            obuilder
-                .withShortName("help")
-                .withShortName("h")
-                .withDescription("print this message")
-                .create();
-        Option projecthelp =
-            obuilder
-                .withShortName("projecthelp")
-                .withShortName("p")
-                .withDescription("print project help information")
-                .create();
-        Option version =
-            obuilder
-                .withShortName("version")
-                .withDescription("print the version information and exit")
-                .create();
-        Option diagnostics =
-            obuilder
-                .withShortName("diagnostics")
-                .withDescription("print information that might be helpful to diagnose or report problems.")
-                .create();
-        Option quiet =
-            obuilder
-                .withShortName("quiet")
-                .withShortName("q")
-                .withDescription("be extra quiet")
-                .create();
-        Option verbose =
-            obuilder
-                .withShortName("verbose")
-                .withShortName("v")
-                .withDescription("be extra verbose")
-                .create();
-        Option debug =
-            obuilder
-                .withShortName("debug")
-                .withShortName("d")
-                .withDescription("print debugging information")
-                .create();
-        Option emacs =
-            obuilder
-                .withShortName("emacs")
-                .withShortName("e")
-                .withDescription("produce logging information without adornments")
-                .create();
-        Option lib =
-            obuilder
-                .withShortName("lib")
-                .withDescription("specifies a path to search for jars and classes")
-                .withArgument(
-                    abuilder
-                        .withName("path")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option logfile =
-            obuilder
-                .withShortName("logfile")
-                .withShortName("l")
-                .withDescription("use given file for log")
-                .withArgument(
-                    abuilder
-                        .withName("file")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option logger =
-            obuilder
-                .withShortName("logger")
-                .withDescription("the class which is to perform logging")
-                .withArgument(
-                    abuilder
-                        .withName("classname")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option listener =
-            obuilder
-                .withShortName("listener")
-                .withDescription("add an instance of class as a project listener")
-                .withArgument(
-                    abuilder
-                        .withName("classname")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option noinput =
-            obuilder
-                .withShortName("noinput")
-                .withDescription("do not allow interactive input")
-                .create();
-        Option buildfile =
-            obuilder
-                .withShortName("buildfile")
-                .withShortName("file")
-                .withShortName("f")
-                .withDescription("use given buildfile")
-                .withArgument(
-                    abuilder
-                        .withName("file")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option property = new PropertyOption();
-        Option propertyfile =
-            obuilder
-                .withShortName("propertyfile")
-                .withDescription("load all properties from file with -D properties taking precedence")
-                .withArgument(
-                    abuilder
-                        .withName("name")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option inputhandler =
-            obuilder
-                .withShortName("inputhandler")
-                .withDescription("the class which will handle input requests")
-                .withArgument(
-                    abuilder
-                        .withName("class")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option find =
-            obuilder
-                .withShortName("find")
-                .withShortName("s")
-                .withDescription("search for buildfile towards the root of the filesystem and use it")
-                .withArgument(
-                    abuilder
-                        .withName("file")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-        Option targets = abuilder.withName("target").create();
-
-        Group options =
-            gbuilder
-                .withName("options")
-                .withOption(help)
-                .withOption(projecthelp)
-                .withOption(version)
-                .withOption(diagnostics)
-                .withOption(quiet)
-                .withOption(verbose)
-                .withOption(debug)
-                .withOption(emacs)
-                .withOption(lib)
-                .withOption(logfile)
-                .withOption(logger)
-                .withOption(listener)
-                .withOption(noinput)
-                .withOption(buildfile)
-                .withOption(property)
-                .withOption(propertyfile)
-                .withOption(inputhandler)
-                .withOption(find)
-                .withOption(targets)
-                .create();
-        
-        /////////////////////////////////////
-        String[] args = new String[]{};
-        
-        Parser parser = new Parser();
-        parser.setGroup(options);
-        CommandLine cl = parser.parse(args);
-        
-        if(cl.hasOption(help)) {
-            //displayHelp();
-            return;
-        }
-        if(cl.hasOption("-version")) {
-            //displayVersion();
-            return;
-        }
-        if(cl.hasOption(logfile)) {
-            String file = (String)cl.getValue(logfile);
-            //setLogFile();
-        }
-        List targetList = cl.getValues(targets);
-        for (Iterator i = targetList.iterator(); i.hasNext();) {
-            String target = (String) i.next();
-            //doTarget(target);
-        }
-        
-        /////////////////////////////////////
-
-        HelpFormatter hf = new HelpFormatter();
-        hf.setShellCommand("ant");
-        hf.getFullUsageSettings().add(DisplaySetting.DISPLAY_GROUP_NAME);
-        hf.getFullUsageSettings().add(DisplaySetting.DISPLAY_GROUP_ARGUMENT);
-        hf.getFullUsageSettings().remove(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-
-        hf.getLineUsageSettings().add(DisplaySetting.DISPLAY_PROPERTY_OPTION);
-        hf.getLineUsageSettings().add(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        hf.getLineUsageSettings().add(DisplaySetting.DISPLAY_ARGUMENT_BRACKETED);
-
-        hf.getDisplaySettings().remove(DisplaySetting.DISPLAY_GROUP_ARGUMENT);
-
-        hf.setGroup(options);
-        // redirect printed stuff to a string
-        hf.setPrintWriter(new PrintWriter(new StringWriter()));
-        hf.print();
-
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/PrecedenceTest.java b/src/test/org/apache/commons/cli2/PrecedenceTest.java
deleted file mode 100644
index 6af71421..00000000
--- a/src/test/org/apache/commons/cli2/PrecedenceTest.java
+++ /dev/null
@@ -1,412 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import java.util.Arrays;
-import java.util.List;
-import java.util.Set;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-/**
- * @author Rob Oxspring
- */
-public class PrecedenceTest extends TestCase {
-    private final String[] args = new String[] { "-file" };
-
-    public void testSimple() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-
-        final Group options =
-            new GroupBuilder()
-                .withOption(oBuilder.withShortName("file").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-file" }, cl);
-    }
-
-    public void testArgument() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group options =
-            new GroupBuilder()
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withArgument(aBuilder.create())
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void testBurst() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("f").create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f", "-i", "-l", "-e" }, cl);
-    }
-
-    public void testChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-        final Group options =
-            gBuilder
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f", "-i", "-l", "-e" }, cl);
-    }
-
-    public void XtestSimpleVsArgument() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withArgument(aBuilder.create())
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void XtestSimpleVsBurst() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(oBuilder.withShortName("f").create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f", "-i", "-l", "-e" }, cl);
-    }
-
-    public void XtestSimpleVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(
-            new String[] { "-f", "-i", "--ci", "-l", "--cl", "-e", "--ce" },
-            cl);
-    }
-
-    public void testArgumentVsBurst() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group options =
-            gBuilder
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withArgument(aBuilder.create())
-                        .create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void testArgumentVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-        final Group options =
-            gBuilder
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .withArgument(aBuilder.create())
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void testBurstVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .create())
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("bi").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("bl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("be").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(
-            new String[] { "-f", "-i", "--ci", "-l", "--cl", "-e", "--ce" },
-            cl);
-    }
-
-    public void XtestSimpleVsArgumentVsBurst() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withArgument(aBuilder.create())
-                        .create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void XtestSimpleVsArgumentVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .withArgument(aBuilder.create())
-                        .create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void XtestSimpleVsBurstVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f", "-i", "-l", "-e" }, cl);
-    }
-
-    public void testArgumentVsBurstVsChildren() throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .withArgument(aBuilder.create())
-                        .create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public void XtestSimpleVsArgumentVsBurstVsChildren()
-        throws OptionException {
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-        final Group children =
-            gBuilder
-                .withOption(
-                    oBuilder.withShortName("i").withLongName("ci").create())
-                .withOption(
-                    oBuilder.withShortName("l").withLongName("cl").create())
-                .withOption(
-                    oBuilder.withShortName("e").withLongName("ce").create())
-                .create();
-
-        final Group options =
-            gBuilder
-                .withOption(oBuilder.withShortName("file").create())
-                .withOption(
-                    oBuilder
-                        .withShortName("f")
-                        .withChildren(children)
-                        .withArgument(aBuilder.create())
-                        .create())
-                .withOption(oBuilder.withShortName("i").create())
-                .withOption(oBuilder.withShortName("l").create())
-                .withOption(oBuilder.withShortName("e").create())
-                .create();
-
-        final CommandLine cl = buildCommandLine(options, args);
-        assertEquals(new String[] { "-f" }, cl);
-    }
-
-    public CommandLine buildCommandLine(final Group group, final String[] arguments)
-        throws OptionException {
-        Parser p = new Parser();
-        p.setGroup(group);
-        return p.parse(arguments);
-    }
-
-    public void assertEquals(final String options[], final CommandLine line) {
-        final List expected = Arrays.asList(options);
-        final Set actual = line.getOptionTriggers();
-
-        assertTrue(expected.containsAll(actual));
-        assertTrue(actual.containsAll(expected));
-    }
-
-}
diff --git a/src/test/org/apache/commons/cli2/WriteableCommandLineTestCase.java b/src/test/org/apache/commons/cli2/WriteableCommandLineTestCase.java
deleted file mode 100644
index 3fe3e5a2..00000000
--- a/src/test/org/apache/commons/cli2/WriteableCommandLineTestCase.java
+++ /dev/null
@@ -1,91 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2;
-
-import org.apache.commons.cli2.option.ArgumentTest;
-
-/**
- * @author Rob Oxspring
- */
-public abstract class WriteableCommandLineTestCase extends CommandLineTestCase {
-	
-	private WriteableCommandLine writeable;
-	
-	protected abstract WriteableCommandLine createWriteableCommandLine();
-	
-	/* (non-Javadoc)
-	 * @see org.apache.commons.cli2.CommandLineTest#createCommandLine()
-	 */
-	protected final CommandLine createCommandLine() {
-		final WriteableCommandLine cl = createWriteableCommandLine();
-		cl.addOption(present);
-		cl.addProperty("present","present property");
-		cl.addSwitch(bool,true);
-		cl.addValue(present,"present value");
-		cl.addOption(multiple);
-		cl.addValue(multiple,"value 1");
-		cl.addValue(multiple,"value 2");
-		cl.addValue(multiple,"value 3");
-		return cl;
-	}
-	
-	/*
-	 * @see CommandLineTest#setUp()
-	 */
-	public void setUp() throws Exception {
-		super.setUp();
-		writeable = createWriteableCommandLine();
-	}
-	public final void testAddOption() {
-		assertFalse(writeable.hasOption(present));
-		writeable.addOption(present);
-		assertTrue(writeable.hasOption(present));
-	}
-	public final void testAddValue() {
-		assertFalse(writeable.hasOption(present));
-		assertTrue(writeable.getValues(present).isEmpty());
-		writeable.addValue(present,"value");
-		assertContentsEqual(list("value"),writeable.getValues(present));
-		
-		// most options shouldn't appear due to adding values
-		assertFalse(writeable.hasOption(present));
-		
-		final Argument arg = ArgumentTest.buildHostArgument();
-		
-		assertFalse(writeable.hasOption(arg));
-		assertTrue(writeable.getValues(arg).isEmpty());
-		writeable.addValue(arg,"value");
-		assertContentsEqual(list("value"),writeable.getValues(arg));
-		
-		// Arguments should force the option present
-		assertTrue(writeable.hasOption(arg));
-	}
-	public final void testAddSwitch() {
-		assertFalse(writeable.hasOption(present));
-		assertNull(writeable.getSwitch(present));
-		writeable.addSwitch(present,true);
-		assertEquals(Boolean.TRUE,writeable.getSwitch(present));
-		assertTrue(writeable.hasOption(present));
-	}
-	public final void testAddProperty() {
-		assertNull(writeable.getProperty("present"));
-		writeable.addProperty("present","present value");
-		assertEquals("present value",writeable.getProperty("present"));
-	}
-	public final void testLooksLikeOption() {
-		//TODO Implement looksLikeOption().
-	}
-}
diff --git a/src/test/org/apache/commons/cli2/application/AntTest.java b/src/test/org/apache/commons/cli2/application/AntTest.java
deleted file mode 100644
index 0a0cbe05..00000000
--- a/src/test/org/apache/commons/cli2/application/AntTest.java
+++ /dev/null
@@ -1,197 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.application;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.option.PropertyOption;
-
-//TODO Build up AntTest like CpTest
-public class AntTest extends TestCase {
-    public void testAnt() throws OptionException {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        final Group options =
-            gbuilder
-                .withName("ant")
-                .withOption(
-                    obuilder
-                        .withShortName("help")
-                        .withDescription("print this message")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("projecthelp")
-                        .withDescription("print project help information")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("version")
-                        .withDescription("print the version information and exit")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("diagnostics")
-                        .withDescription("print information that might be helpful to diagnose or report problems.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("quiet")
-                        .withShortName("q")
-                        .withDescription("be extra quiet")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("verbose")
-                        .withShortName("v")
-                        .withDescription("be extra verbose")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("debug")
-                        .withDescription("print debugging information")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("emacs")
-                        .withDescription("produce logging information without adornments")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("logfile")
-                        .withShortName("l")
-                        .withDescription("use given file for log")
-                        .withArgument(
-                            abuilder
-                                .withName("file")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("logger")
-                        .withDescription("the class which is to perform logging")
-                        .withArgument(
-                            abuilder
-                                .withName("classname")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("listener")
-                        .withDescription("add an instance of class as a project listener")
-                        .withArgument(
-                            abuilder
-                                .withName("classname")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("buildfile")
-                        .withShortName("file")
-                        .withShortName("f")
-                        .withDescription("use given buildfile")
-                        .withArgument(
-                            abuilder
-                                .withName("file")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(PropertyOption.INSTANCE)
-                .withOption(
-                    obuilder
-                        .withShortName("propertyfile")
-                        .withDescription("load all properties from file with -D properties taking precedence")
-                        .withArgument(
-                            abuilder
-                                .withName("name")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("inputhandler")
-                        .withDescription("the class which will handle input requests")
-                        .withArgument(
-                            abuilder
-                                .withName("class")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("find")
-                        .withDescription("search for buildfile towards the root of the filesystem and use it")
-                        .withArgument(
-                            abuilder
-                                .withName("file")
-                                .withMinimum(1)
-                                .withMaximum(1)
-                                .create())
-                        .create())
-                .withOption(abuilder.withName("target").create())
-                .create();
-
-        Parser parser = new Parser();
-        parser.setGroup(options);
-        CommandLine line =
-            parser.parse(
-                new String[] {
-                    "-buildfile",
-                    "mybuild.xml",
-                    "-Dproperty=value",
-                    "-Dproperty1=value1",
-                    "-projecthelp",
-                    "compile",
-                    "docs" });
-
-        // check properties
-        assertEquals(2, line.getProperties().size());
-        assertEquals("value", line.getProperty("property"));
-        assertEquals("value1", line.getProperty("property1"));
-
-        // check single values
-        assertEquals("mybuild.xml", line.getValue("-buildfile"));
-        assertTrue(line.hasOption("-projecthelp"));
-        assertFalse(line.hasOption("-help"));
-
-        assertTrue(line.hasOption("target"));
-        final List targets = new ArrayList();
-        targets.add("compile");
-        targets.add("docs");
-        assertEquals(targets, line.getValues("target"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/application/CpTest.java b/src/test/org/apache/commons/cli2/application/CpTest.java
deleted file mode 100644
index 08e13c0a..00000000
--- a/src/test/org/apache/commons/cli2/application/CpTest.java
+++ /dev/null
@@ -1,470 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.application;
-
-import java.io.BufferedReader;
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.StringReader;
-import java.io.StringWriter;
-
-import junit.framework.Test;
-import junit.framework.TestCase;
-import junit.framework.TestSuite;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.option.ArgumentImpl;
-import org.apache.commons.cli2.option.SourceDestArgument;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-/**
- * <p>Test the <code>cp</code> command. Duplicated Option types are not
- * tested e.g. -a and -d are the same Option type.</p>
- * 
- * <p>The following is the man output for 'cp'. See
- * http://www.rt.com/man/cp.1.html.</p>
- * 
- * <pre>
- *  CP(1) FSF CP(1)
- * 
- *  NAME cp - copy files and directories
- * 
- *  SYNOPSIS cp [OPTION]... SOURCE DEST cp [OPTION]... SOURCE... DIRECTORY
- * 
- *  DESCRIPTION Copy SOURCE to DEST, or multiple SOURCE(s) to DIRECTORY.
- * 
- *  -a, --archive same as -dpR
- * 
- *  -b, --backup make backup before removal
- * 
- *  -d, --no-dereference preserve links
- * 
- *  -f, --force remove existing destinations, never prompt
- * 
- *  -i, --interactive prompt before overwrite
- * 
- *  -l, --link link files instead of copying
- * 
- *  -p, --preserve preserve file attributes if possible
- * 
- *  -P, --parents append source path to DIRECTORY
- * -r copy recursively, non-directories as files
- * 
- *  --sparse=WHEN control creation of sparse files
- * 
- *  -R, --recursive copy directories recursively
- * 
- *  -s, --symbolic-link make symbolic links instead of copying
- * 
- *  -S, --suffix=SUFFIX override the usual backup suffix
- * 
- *  -u, --update copy only when the SOURCE file is newer than the destination file or when the destination file is missing
- * 
- *  -v, --verbose explain what is being done
- * 
- *  -V, --version-control=WORD override the usual version control
- * 
- *  -x, --one-file-system stay on this file system
- * 
- *  --help display this help and exit
- * 
- *  --version output version information and exit
- * 
- *  By default, sparse SOURCE files are detected by a crude heuristic and the corresponding DEST file is made sparse as well. That is the behavior selected by --sparse=auto. Specify --sparse=always to create a sparse DEST file when- ever the SOURCE file contains a long enough sequence of zero bytes. Use --sparse=never to inhibit creation of sparse files.
- * 
- *  The backup suffix is ~, unless set with SIMPLE_BACKUP_SUF- FIX. The version control may be set with VERSION_CONTROL, values are:
- * t, numbered make numbered backups
- * 
- *  nil, existing numbered if numbered backups exist, simple other- wise
- * 
- *  never, simple always make simple backups
- * 
- *  As a special case, cp makes a backup of SOURCE when the force and backup options are given and SOURCE and DEST are the same name for an existing, regular file. * </pre>
- * </pre>
- * 
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class CpTest extends TestCase {
-
-    /** Option Builder */
-    private static final DefaultOptionBuilder oBuilder =
-        new DefaultOptionBuilder();
-
-    /** Argument Builder */
-    private static final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-    /** Group Builder */
-    private static final GroupBuilder gBuilder = new GroupBuilder();
-
-    private Group options;
-
-    public static Test suite() {
-        return new TestSuite(CpTest.class);
-    }
-
-    private ArgumentImpl source;
-    private ArgumentImpl dest;
-    private Argument targets;
-
-    private Option archive;
-    private Option backup;
-    private Option noDereference;
-    private Option force;
-    private Option interactive;
-    private Option link;
-    private Option preserve;
-    private Option parents;
-    private Option recursive1;
-    private Option sparse;
-    private Option recursive2;
-    private Option symbolicLink;
-    private Option suffix;
-    private Option update;
-    private Option verbose;
-    private Option versionControl;
-    private Option oneFileSystem;
-    private Option help;
-    private Option version;
-
-    public void setUp() {
-        source =
-            (ArgumentImpl)aBuilder.withName("SOURCE").withMinimum(1).create();
-        dest =
-            (ArgumentImpl)aBuilder
-                .withName("DEST")
-                .withMinimum(1)
-                .withMaximum(1)
-                .create();
-        targets = new SourceDestArgument(source, dest);
-
-        archive =
-            oBuilder
-                .withShortName("a")
-                .withLongName("archive")
-                .withDescription("same as -dpR")
-                .create();
-
-        backup =
-            oBuilder
-                .withShortName("b")
-                .withLongName("backup")
-                .withDescription("make backup before removal")
-                .create();
-
-        noDereference =
-            oBuilder
-                .withShortName("d")
-                .withLongName("no-dereference")
-                .withDescription("preserve links")
-                .create();
-
-        force =
-            oBuilder
-                .withShortName("f")
-                .withLongName("force")
-                .withDescription("remove existing destinations, never prompt")
-                .create();
-
-        interactive =
-            oBuilder
-                .withShortName("i")
-                .withLongName("interactive")
-                .withDescription("prompt before overwrite")
-                .create();
-
-        link =
-            oBuilder
-                .withShortName("l")
-                .withLongName("link")
-                .withDescription("link files instead of copying")
-                .create();
-
-        preserve =
-            oBuilder
-                .withShortName("p")
-                .withLongName("preserve")
-                .withDescription("preserve file attributes if possible")
-                .create();
-
-        parents =
-            oBuilder
-                .withShortName("P")
-                .withLongName("parents")
-                .withDescription("append source path to DIRECTORY")
-                .create();
-
-        recursive1 =
-            oBuilder
-                .withShortName("r")
-                .withDescription("copy recursively, non-directories as files")
-                .create();
-
-        sparse =
-            oBuilder
-                .withLongName("sparse")
-                .withDescription("control creation of sparse files")
-                .withArgument(
-                    aBuilder
-                        .withName("WHEN")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .withInitialSeparator('=')
-                        .create())
-                .create();
-
-        recursive2 =
-            oBuilder
-                .withShortName("R")
-                .withLongName("recursive")
-                .withDescription("copy directories recursively")
-                .create();
-
-        symbolicLink =
-            oBuilder
-                .withShortName("s")
-                .withLongName("symbolic-link")
-                .withDescription("make symbolic links instead of copying")
-                .create();
-
-        suffix =
-            oBuilder
-                .withShortName("S")
-                .withLongName("suffix")
-                .withDescription("override the usual backup suffix")
-                .withArgument(
-                    aBuilder
-                        .withName("SUFFIX")
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-
-        update =
-            oBuilder
-                .withShortName("u")
-                .withLongName("update")
-                .withDescription("copy only when the SOURCE file is newer than the destination file or when the destination file is missing")
-                .create();
-
-        verbose =
-            oBuilder
-                .withShortName("v")
-                .withLongName("verbose")
-                .withDescription("explain what is being done")
-                .create();
-
-        versionControl =
-            oBuilder
-                .withShortName("V")
-                .withLongName("version-contol")
-                .withDescription("explain what is being done")
-                .withArgument(
-                    aBuilder
-                        .withName("WORD")
-                        .withInitialSeparator('=')
-                        .withMinimum(1)
-                        .withMaximum(1)
-                        .create())
-                .create();
-
-        oneFileSystem =
-            oBuilder
-                .withShortName("x")
-                .withLongName("one-file-system")
-                .withDescription("stay on this file system")
-                .create();
-
-        help =
-            oBuilder
-                .withLongName("help")
-                .withDescription("display this help and exit")
-                .create();
-
-        version =
-            oBuilder
-                .withLongName("version")
-                .withDescription("output version information and exit")
-                .create();
-
-        options =
-            gBuilder
-                .withOption(archive)
-                .withOption(backup)
-                .withOption(noDereference)
-                .withOption(force)
-                .withOption(interactive)
-                .withOption(link)
-                .withOption(preserve)
-                .withOption(parents)
-                .withOption(recursive1)
-                .withOption(sparse)
-                .withOption(recursive2)
-                .withOption(symbolicLink)
-                .withOption(suffix)
-                .withOption(update)
-                .withOption(verbose)
-                .withOption(versionControl)
-                .withOption(oneFileSystem)
-                .withOption(help)
-                .withOption(version)
-                .withOption(targets)
-                .withName("OPTIONS")
-                .create();
-    }
-
-    public void testNoSource() {
-        Parser parser = new Parser();
-        parser.setGroup(options);
-        try {
-            parser.parse(new String[0]);
-        }
-        catch (OptionException mve) {
-            assertEquals(
-                "Missing value(s) SOURCE [SOURCE ...]",
-                mve.getMessage());
-        }
-    }
-
-    public void testOneSource() throws OptionException {
-        final String[] args = new String[] { "source1", "dest1" };
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-        final CommandLine commandLine = parser.parse(args);
-
-        assertTrue(commandLine.getValues(source).contains("source1"));
-        assertEquals(1, commandLine.getValues(source).size());
-        assertTrue(commandLine.getValues(dest).contains("dest1"));
-        assertEquals(1, commandLine.getValues(dest).size());
-    }
-
-    public void testMultiSource() throws OptionException {
-        final String[] args =
-            new String[] { "source1", "source2", "source3", "dest1" };
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-        final CommandLine commandLine = parser.parse(args);
-
-        assertTrue(commandLine.getValues(source).contains("source1"));
-        assertTrue(commandLine.getValues(source).contains("source2"));
-        assertTrue(commandLine.getValues(source).contains("source3"));
-        assertEquals(3, commandLine.getValues(source).size());
-
-        assertTrue(commandLine.getValues(dest).contains("dest1"));
-        assertEquals(1, commandLine.getValues(dest).size());
-    }
-
-    public void testHelp() throws IOException {
-        final StringWriter out = new StringWriter();
-        final HelpFormatter helpFormatter = new HelpFormatter();
-        helpFormatter.setGroup(options);
-        helpFormatter.setPrintWriter(new PrintWriter(out));
-        helpFormatter.print();
-
-        final BufferedReader in =
-            new BufferedReader(new StringReader(out.toString()));
-        assertEquals(
-            "Usage:                                                                          ",
-            in.readLine());
-        assertEquals(
-            " [-a -b -d -f -i -l -p -P -r --sparse <WHEN> -R -s -S <SUFFIX> -u -v -V <WORD>  ",
-            in.readLine());
-        assertEquals(
-            "-x --help --version] <SOURCE1> [<SOURCE2> ...] <DEST>                           ",
-            in.readLine());
-        assertEquals(
-            "OPTIONS                                                                         ",
-            in.readLine());
-        assertEquals(
-            "  -a (--archive)                same as -dpR                                    ",
-            in.readLine());
-        assertEquals(
-            "  -b (--backup)                 make backup before removal                      ",
-            in.readLine());
-        assertEquals(
-            "  -d (--no-dereference)         preserve links                                  ",
-            in.readLine());
-        assertEquals(
-            "  -f (--force)                  remove existing destinations, never prompt      ",
-            in.readLine());
-        assertEquals(
-            "  -i (--interactive)            prompt before overwrite                         ",
-            in.readLine());
-        assertEquals(
-            "  -l (--link)                   link files instead of copying                   ",
-            in.readLine());
-        assertEquals(
-            "  -p (--preserve)               preserve file attributes if possible            ",
-            in.readLine());
-        assertEquals(
-            "  -P (--parents)                append source path to DIRECTORY                 ",
-            in.readLine());
-        assertEquals(
-            "  -r                            copy recursively, non-directories as files      ",
-            in.readLine());
-        assertEquals(
-            "  --sparse WHEN                 control creation of sparse files                ",
-            in.readLine());
-        assertEquals(
-            "  -R (--recursive)              copy directories recursively                    ",
-            in.readLine());
-        assertEquals(
-            "  -s (--symbolic-link)          make symbolic links instead of copying          ",
-            in.readLine());
-        assertEquals(
-            "  -S (--suffix) SUFFIX          override the usual backup suffix                ",
-            in.readLine());
-        assertEquals(
-            "  -u (--update)                 copy only when the SOURCE file is newer than    ",
-            in.readLine());
-        assertEquals(
-            "                                the destination file or when the destination    ",
-            in.readLine());
-        assertEquals(
-            "                                file is missing                                 ",
-            in.readLine());
-        assertEquals(
-            "  -v (--verbose)                explain what is being done                      ",
-            in.readLine());
-        assertEquals(
-            "  -V (--version-contol) WORD    explain what is being done                      ",
-            in.readLine());
-        assertEquals(
-            "  -x (--one-file-system)        stay on this file system                        ",
-            in.readLine());
-        assertEquals(
-            "  --help                        display this help and exit                      ",
-            in.readLine());
-        assertEquals(
-            "  --version                     output version information and exit             ",
-            in.readLine());
-        assertEquals(
-            "  SOURCE [SOURCE ...]                                                           ",
-            in.readLine());
-        assertEquals(
-            "  DEST                                                                          ",
-            in.readLine());
-        assertNull(in.readLine());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/application/CvsTest.java b/src/test/org/apache/commons/cli2/application/CvsTest.java
deleted file mode 100644
index bee4a12c..00000000
--- a/src/test/org/apache/commons/cli2/application/CvsTest.java
+++ /dev/null
@@ -1,311 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.application;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.CommandBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.option.ArgumentTest;
-
-//TODO Build up CvsTest like CpTest
-public class CvsTest extends TestCase {
-    public void testCVS() {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final CommandBuilder cbuilder = new CommandBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        final Group commands =
-            gbuilder
-                .withName("commands")
-                .withOption(
-                    cbuilder
-                        .withName("add")
-                        .withName("ad")
-                        .withName("new")
-                        .withDescription("Add a new file/directory to the repository")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("admin")
-                        .withName("adm")
-                        .withName("rcs")
-                        .withDescription("Administration front end for rcs")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("annotate")
-                        .withName("ann")
-                        .withDescription("Show last revision where each line was modified")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("checkout")
-                        .withName("co")
-                        .withName("get")
-                        .withDescription("Checkout sources for editing")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("commit")
-                        .withName("ci")
-                        .withName("com")
-                        .withDescription("Check files into the repository")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("diff")
-                        .withName("di")
-                        .withName("dif")
-                        .withDescription("Show differences between revisions")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("edit")
-                        .withDescription("Get ready to edit a watched file")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("editors")
-                        .withDescription("See who is editing a watched file")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("export")
-                        .withName("exp")
-                        .withName("ex")
-                        .withDescription("Export sources from CVS, similar to checkout")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("history")
-                        .withName("hi")
-                        .withName("his")
-                        .withDescription("Show repository access history")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("import")
-                        .withName("im")
-                        .withName("imp")
-                        .withDescription("Import sources into CVS, using vendor branches")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("init")
-                        .withDescription("Create a CVS repository if it doesn't exist")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("log")
-                        .withName("lo")
-                        .withName("rlog")
-                        .withDescription("Print out history information for files")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("login")
-                        .withName("logon")
-                        .withName("lgn")
-                        .withDescription("Prompt for password for authenticating server")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("logout")
-                        .withDescription("Removes entry in .cvspass for remote repository")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("rdiff")
-                        .withName("patch")
-                        .withName("pa")
-                        .withDescription("Create 'patch' format diffs between releases")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("release")
-                        .withName("re")
-                        .withName("rel")
-                        .withDescription("Indicate that a Module is no longer in use")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("remove")
-                        .withName("rm")
-                        .withName("delete")
-                        .withDescription("Remove an entry from the repository")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("rtag")
-                        .withName("rt")
-                        .withName("rfreeze")
-                        .withDescription("Add a symbolic tag to a module")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("status")
-                        .withName("st")
-                        .withName("stat")
-                        .withDescription("Display status information on checked out files")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("tag")
-                        .withName("ta")
-                        .withName("freeze")
-                        .withDescription("Add a symbolic tag to checked out version of files")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("unedit")
-                        .withDescription("Undo an edit command")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("update")
-                        .withName("up")
-                        .withName("upd")
-                        .withDescription("Bring work tree in sync with repository")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("watch")
-                        .withDescription("Set watches")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("watchers")
-                        .withDescription("See who is watching a file")
-                        .create())
-                .withOption(
-                    cbuilder
-                        .withName("version")
-                        .withName("ve")
-                        .withName("ver")
-                        .withDescription("????")
-                        .create())
-                .withOption(ArgumentTest.buildTargetsArgument())
-                .create();
-
-        final Group cvsOptions =
-            new GroupBuilder()
-                .withName("cvs-options")
-                .withOption(
-                    obuilder
-                        .withShortName("H")
-                        .withDescription("Displays usage information for command.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("Q")
-                        .withDescription("Cause CVS to be really quiet.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("q")
-                        .withDescription("Cause CVS to be somewhat quiet.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("r")
-                        .withDescription("Make checked-out files read-only.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("w")
-                        .withDescription("Make checked-out files read-write (default).")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("l")
-                        .withDescription("Turn history logging off.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("n")
-                        .withDescription("Do not execute anything that will change the disk.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("t")
-                        .withDescription("Show trace of program execution -- try with -n.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("v")
-                        .withDescription("CVS version and copyright.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withLongName("crlf")
-                        .withDescription("Use the Dos line feed for text files (default).")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withLongName("lf")
-                        .withDescription("Use the Unix line feed for text files.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("T")
-                        .withDescription("Use 'tmpdir' for temporary files.")
-                        .withArgument(abuilder.withName("tmpdir").create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("e")
-                        .withDescription("Use 'editor' for editing log information.")
-                        .withArgument(abuilder.withName("editor").create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("d")
-                        .withDescription("Overrides $CVSROOT as the root of the CVS tree.")
-                        .withArgument(abuilder.withName("CVS_root").create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("f")
-                        .withDescription("Do not use the ~/.cvsrc file.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("z")
-                        .withDescription("Use compression level '#' for net traffic.")
-                        .withArgument(abuilder.withName("#").create())
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("a")
-                        .withDescription("Authenticate all net traffic.")
-                        .create())
-                .withOption(
-                    obuilder
-                        .withShortName("s")
-                        .withDescription("Set CVS user variable.")
-                        .withArgument(abuilder.withName("VAR=VAL").create())
-                        .create())
-                .withOption(commands)
-                .create();
-
-        assertNotNull(cvsOptions);
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/application/LsTest.java b/src/test/org/apache/commons/cli2/application/LsTest.java
deleted file mode 100644
index 6f597bfb..00000000
--- a/src/test/org/apache/commons/cli2/application/LsTest.java
+++ /dev/null
@@ -1,223 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.application;
-
-import java.util.HashSet;
-import java.util.Set;
-
-import junit.framework.Test;
-import junit.framework.TestCase;
-import junit.framework.TestSuite;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.validation.EnumValidator;
-
-/**
- * <p>Test the <code>ls</code> command. Duplicated Option types are not
- * tested e.g. -a and -d are the same Option type.</p>
- * 
- * <p>The following is the man output for 'ls'. See
- * http://www.rt.com/man/ls.1.html.</p>
- * 
- * <pre>
- *  LS(1) FSF LS(1)
- * 
- *  NAME ls - list directory contents
- * 
- *  SYNOPSIS ls [OPTION]... [FILE]...
- * 
- *  DESCRIPTION List information about the FILEs (the current directory by default). Sort entries alphabetically if none of -cftuSUX nor --sort.
- * 
- *  -a, --all do not hide entries starting with .
- * 
- *  -A, --almost-all do not list implied . and ..
- * 
- *  -b, --escape print octal escapes for nongraphic characters
- * 
- *  --block-size=SIZE use SIZE-byte blocks
- * 
- *  -B, --ignore-backups do not list implied entries ending with ~ -c sort by change time; with -l: show ctime -C list entries by columns
- * 
- *  --color[=WHEN] control whether color is used to distinguish file types. WHEN may be `never', `always', or `auto'
- * 
- *  -d, --directory list directory entries instead of contents
- * 
- *  -D, --dired generate output designed for Emacs' dired mode -f do not sort, enable -aU, disable -lst
- * 
- *  -F, --classify append indicator (one of /=@|*) to entries
- * 
- *  --format=WORD across -x, commas -m, horizontal -x, long -l, sin- gle-column -1, verbose -l, vertical -C
- * 
- *  --full-time list both full date and full time -g (ignored)
- * 
- *  -G, --no-group inhibit display of group information
- * 
- *  -h, --human-readable print sizes in human readable format (e.g., 1K 234M 2G)
- * 
- *  -H, --si likewise, but use powers of 1000 not 1024
- * 
- *  --indicator-style=WORD append indicator with style WORD to entry names: none (default), classify (-F), file-type (-p)
- * 
- *  -i, --inode print index number of each file
- * 
- *  -I, --ignore=PATTERN do not list implied entries matching shell PATTERN
- * 
- *  -k, --kilobytes like --block-size=1024 -l use a long listing format
- * 
- *  -L, --dereference list entries pointed to by symbolic links -m fill width with a comma separated list of entries
- * 
- *  -n, --numeric-uid-gid list numeric UIDs and GIDs instead of names
- * 
- *  -N, --literal print raw entry names (don't treat e.g. control characters specially) -o use long listing format without group info
- * 
- *  -p, --file-type append indicator (one of /=@|) to entries
- * 
- *  -q, --hide-control-chars print ? instead of non graphic characters
- * 
- *  --show-control-chars show non graphic characters as-is (default)
- * 
- *  -Q, --quote-name enclose entry names in double quotes
- * 
- *  --quoting-style=WORD use quoting style WORD for entry names: literal, shell, shell-always, c, escape
- * 
- *  -r, --reverse reverse order while sorting
- * 
- *  -R, --recursive list subdirectories recursively
- * 
- *  -s, --size print size of each file, in blocks -S sort by file size
- * 
- *  --sort=WORD extension -X, none -U, size -S, time -t, version -v status -c, time -t, atime -u, access -u, use -u
- * 
- *  --time=WORD show time as WORD instead of modification time: atime, access, use, ctime or status; use specified time as sort key if --sort=time -t sort by modification time
- * 
- *  -T, --tabsize=COLS assume tab stops at each COLS instead of 8 -u sort by last access time; with -l: show atime -U do not sort; list entries in directory order -v sort by version
- * 
- *  -w, --width=COLS assume screen width instead of current value -x list entries by lines instead of by columns -X sort alphabetically by entry extension -1 list one file per line
- * 
- *  --help display this help and exit
- * 
- *  --version output version information and exit
- * 
- *  By default, color is not used to distinguish types of files. That is equivalent to using --color=none. Using the --color option without the optional WHEN argument is equivalent to using --color=always. With --color=auto, color codes are output only if standard output is con- nected to a terminal (tty).
- * </pre>
- * 
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class LsTest extends TestCase {
-
-    /** Option Builder */
-    private static final DefaultOptionBuilder oBuilder =
-        new DefaultOptionBuilder();
-
-    /** Argument Builder */
-    private static final ArgumentBuilder aBuilder = new ArgumentBuilder();
-
-    /** Group Builder */
-    private static final GroupBuilder gBuilder = new GroupBuilder();
-
-    private static Group options;
-
-    public static Test suite() {
-        return new TestSuite(LsTest.class);
-    }
-
-    /**
-     * Required ctor.
-     * 
-     * @param name
-     *            the name of the TestCase
-     */
-    public LsTest(final String name) {
-        super(name);
-    }
-
-    public void setUp() {
-        if (LsTest.options == null) {
-            final Option a =
-                oBuilder
-                    .withShortName("a")
-                    .withLongName("all")
-                    .withDescription("do not hide entries starting with .")
-                    .create();
-
-            final Option blockSize =
-                oBuilder
-                    .withLongName("block-size")
-                    .withRequired(false)
-                    .withDescription("use SIZE-byte blocks")
-                    .withArgument(
-                        aBuilder
-                            .withMaximum(1)
-                            .withMinimum(1)
-                            .withInitialSeparator('=')
-                            .create())
-                    .create();
-
-            final Option c =
-                oBuilder
-                    .withShortName("c")
-                    .withRequired(false)
-                    .withDescription("with -lt: sort by, and show, ctime (time of last modification of file status information) with -l:show ctime and sort by name otherwise: sort by ctime")
-                    .create();
-
-            final Set colors = new HashSet();
-            colors.add("never");
-            colors.add("always");
-            colors.add("auto");
-            final Option color =
-                oBuilder
-                    .withLongName("color")
-                    .withRequired(false)
-                    .withDescription("control  whether  color is used to distinguish file types.  WHEN may be `never', `always', or `auto'")
-                    .withArgument(
-                        aBuilder
-                            .withMaximum(1)
-                            .withMinimum(1)
-                            .withInitialSeparator('=')
-                            .withValidator(new EnumValidator(colors))
-                            .create())
-                    .create();
-
-            LsTest.options =
-                gBuilder
-                    .withOption(a)
-                    .withOption(blockSize)
-                    .withOption(c)
-                    .withOption(color)
-                    .create();
-        }
-    }
-
-    public void testLs() throws OptionException {
-        // create the command line parser
-        Parser parser = new Parser();
-        parser.setGroup(options);
-        CommandLine line =
-            parser.parse(new String[] { "--block-size=10", "--color=never" });
-
-        assertTrue(line.hasOption("--block-size"));
-        assertEquals(line.getValue("--block-size"), "10");
-        assertFalse(line.hasOption("--ignore-backups"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/bug/Bug13886Test.java b/src/test/org/apache/commons/cli2/bug/Bug13886Test.java
deleted file mode 100644
index 8742cf05..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug13886Test.java
+++ /dev/null
@@ -1,88 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-/**
- * @author John Keyes
- */
-public class Bug13886Test extends TestCase {
-
-    public Bug13886Test(final String name) {
-        super(name);
-    }
-
-    public void testMandatoryGroup() throws Exception {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        final Option a = obuilder.withShortName("a").create();
-
-        final Option b = obuilder.withShortName("b").create();
-
-        final Group options =
-            gbuilder
-                .withOption(a)
-                .withOption(b)
-                .withMaximum(1)
-                .withMinimum(1)
-                .create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-
-        try {
-            parser.parse(new String[] {
-            });
-            fail("Expected MissingOptionException not caught");
-        }
-        catch (final OptionException exp) {
-            assertEquals("Missing option -a|-b", exp.getMessage());
-        }
-
-        try {
-            parser.parse(new String[] { "-a" });
-        }
-        catch (final OptionException exp) {
-            fail("Unexpected MissingOptionException caught");
-        }
-
-        try {
-            parser.parse(new String[] { "-b" });
-        }
-        catch (final OptionException exp) {
-            fail("Unexpected MissingOptionException caught");
-        }
-
-        try {
-            parser.parse(new String[] { "-a", "-b" });
-            fail("Expected UnexpectedOptionException not caught");
-        }
-        catch (final OptionException exp) {
-            assertEquals(
-                "Unexpected -b while processing -a|-b",
-                exp.getMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/bug/Bug13935Test.java b/src/test/org/apache/commons/cli2/bug/Bug13935Test.java
deleted file mode 100644
index 6600ad47..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug13935Test.java
+++ /dev/null
@@ -1,59 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-/**
- * @author John Keyes
- */
-public class Bug13935Test extends TestCase {
-
-    public Bug13935Test(final String name) {
-        super(name);
-    }
-
-    public void testRequiredGroup() throws Exception {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        final Option testOption =
-            obuilder
-                .withShortName("a")
-                .withArgument(abuilder.withName("quoted string").create())
-                .create();
-
-        final Group options = gbuilder.withOption(testOption).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-
-        final CommandLine cmdLine =
-            parser.parse(new String[] { "-a", "\"two tokens\"" });
-
-        assertTrue(cmdLine.hasOption("-a"));
-        assertEquals("two tokens", cmdLine.getValue("-a"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/bug/Bug15046Test.java b/src/test/org/apache/commons/cli2/bug/Bug15046Test.java
deleted file mode 100644
index 60a6dc37..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug15046Test.java
+++ /dev/null
@@ -1,81 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-/**
- * @author John Keyes
- */
-public class Bug15046Test extends TestCase {
-
-    public Bug15046Test(String name) {
-        super(name);
-    }
-
-    public void testParamNamedAsOption() throws Exception {
-        final String[] CLI_ARGS = new String[] { "-z", "c" };
-
-        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        ArgumentBuilder abuilder = new ArgumentBuilder();
-
-        Option option =
-            obuilder
-                .withShortName("z")
-                .withLongName("timezone")
-                .withDescription("affected option")
-                .withArgument(abuilder.withName("timezone").create())
-                .create();
-
-        GroupBuilder gbuilder = new GroupBuilder();
-        Group options =
-            gbuilder.withName("bug15046").withOption(option).create();
-
-        Parser parser = new Parser();
-        parser.setGroup(options);
-        CommandLine line = parser.parse(CLI_ARGS);
-
-        assertEquals("c", line.getValue("-z"));
-
-        Option c =
-            obuilder
-                .withShortName("c")
-                .withLongName("conflict")
-                .withDescription("conflicting option")
-                .withArgument(abuilder.withName("conflict").create())
-                .create();
-
-        options =
-            gbuilder
-                .withName("bug15046")
-                .withOption(option)
-                .withOption(c)
-                .create();
-
-        parser.setGroup(options);
-        line = parser.parse(CLI_ARGS);
-
-        assertEquals("c", line.getValue("-z"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/bug/Bug15648Test.java b/src/test/org/apache/commons/cli2/bug/Bug15648Test.java
deleted file mode 100644
index 44f91575..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug15648Test.java
+++ /dev/null
@@ -1,59 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-/**
- * @author John Keyes
- */
-public class Bug15648Test extends TestCase {
-
-    public Bug15648Test(final String name) {
-        super(name);
-    }
-
-    public void testQuotedArgumentValue() throws Exception {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-
-        final Option testOption =
-            obuilder
-                .withShortName("a")
-                .withArgument(abuilder.withName("quoted string").create())
-                .create();
-
-        final Group options = gbuilder.withOption(testOption).create();
-
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-
-        final CommandLine cmdLine =
-            parser.parse(new String[] { "-a", "\"two tokens\"" });
-
-        assertTrue(cmdLine.hasOption("-a"));
-        assertEquals("two tokens", cmdLine.getValue("-a"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/bug/Bug27575Test.java b/src/test/org/apache/commons/cli2/bug/Bug27575Test.java
deleted file mode 100644
index 4bc611bb..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug27575Test.java
+++ /dev/null
@@ -1,40 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import java.util.Iterator;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.builder.PatternBuilder;
-import org.apache.commons.cli2.option.GroupImpl;
-
-public class Bug27575Test extends TestCase {
-
-	public void testRequiredOptions(){
-		PatternBuilder builder = new PatternBuilder();
-		builder.withPattern("hc!<");
-		Option option = builder.create();
-		assertTrue(option instanceof GroupImpl);
-		
-		GroupImpl group = (GroupImpl)option;
-		Iterator i = group.getOptions().iterator();
-		assertEquals("[-h]",i.next().toString());
-		assertEquals("-c <arg>",i.next().toString());
-		assertFalse(i.hasNext());
-	}
-}
\ No newline at end of file
diff --git a/src/test/org/apache/commons/cli2/bug/Bug28005Test.java b/src/test/org/apache/commons/cli2/bug/Bug28005Test.java
deleted file mode 100644
index aecbf48e..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug28005Test.java
+++ /dev/null
@@ -1,78 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.CommandBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import junit.framework.TestCase;
-
-public class Bug28005Test extends TestCase {
-    public void testInfiniteLoop() {
-        final DefaultOptionBuilder optionBuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder argumentBuilder = new ArgumentBuilder();
-        final GroupBuilder groupBuilder = new GroupBuilder();
-        final CommandBuilder commandBuilder = new CommandBuilder();
-        
-        final Option inputFormatOption = 
-            optionBuilder
-                .withLongName("input-format")
-                //.withArgument(argumentBuilder.create())
-                .create();
-                
-        final Argument argument = 
-            argumentBuilder
-                .withName("file")
-                .create();
-                
-        final Group children = 
-            groupBuilder
-                .withName("options")
-                .withOption(inputFormatOption)
-                .create();
-                
-        final Option command = 
-            commandBuilder
-                .withName("convert")
-                .withChildren(children)
-                .withArgument(argument)
-                .create();
-                
-        final Group root = 
-            groupBuilder
-                .withName("commands")
-                .withOption(command)
-                .create();
-                
-        final Parser parser = new Parser();
-        parser.setGroup(root);
-        final String[] args = new String[]{"convert", "test.txt",
-                "--input-format", "a"};
-                
-        try {
-            parser.parse(args);
-            fail("a isn't valid!!");
-        } catch (OptionException e) {
-            assertEquals("Unexpected a while processing commands",e.getMessage());
-        }
-    }
-}
\ No newline at end of file
diff --git a/src/test/org/apache/commons/cli2/bug/Bug32533Test.java b/src/test/org/apache/commons/cli2/bug/Bug32533Test.java
deleted file mode 100644
index c9f94e5f..00000000
--- a/src/test/org/apache/commons/cli2/bug/Bug32533Test.java
+++ /dev/null
@@ -1,47 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-
-import junit.framework.TestCase;
-
-/**
- * @author roxspring
- */
-public class Bug32533Test extends TestCase {
-    
-    public void testBlah() throws OptionException {
-        
-        Option a1 = new DefaultOptionBuilder().withLongName("a1").create();
-        Option b1 = new DefaultOptionBuilder().withLongName("b1").create();
-        Option c1 = new DefaultOptionBuilder().withLongName("c1").create();
-        
-        Group b = new GroupBuilder().withOption(b1).create();
-        Group c = new GroupBuilder().withOption(c1).create();
-        Group a = new GroupBuilder().withOption(a1).withOption(b).withOption(c).create();
-        
-        Parser parser = new Parser();  
-        parser.setGroup(a);
-        parser.parse(new String[]{"--a1","--b1"});
-    }
-
-}
diff --git a/src/test/org/apache/commons/cli2/bug/BugCLI18Test.java b/src/test/org/apache/commons/cli2/bug/BugCLI18Test.java
deleted file mode 100644
index 224780d0..00000000
--- a/src/test/org/apache/commons/cli2/bug/BugCLI18Test.java
+++ /dev/null
@@ -1,59 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import java.io.PrintWriter;
-import java.io.StringWriter;
-
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-import junit.framework.TestCase;
-
-/**
- * http://issues.apache.org/jira/browse/CLI-18
- */
-public class BugCLI18Test extends TestCase {
-
-  public BugCLI18Test() {
-    super();
-  }
-
-
-  public void testBug() {
-    Option a = new DefaultOptionBuilder().withLongName("aaa").withShortName("a").withDescription("aaaaaaa").create();
-    Option b = new DefaultOptionBuilder().withLongName("bbb").withDescription("bbbbbbbb dksh fkshd fkhs dkfhsdk fhskd hksdks dhfowehfsdhfkjshf skfhkshf sf jkshfk sfh skfh skf f").create();
-    Option c = new DefaultOptionBuilder().withLongName("ccc").withShortName("c").withDescription("ccccccc").create();
-
-    Group g = new GroupBuilder().withOption(a).withOption(b).withOption(c).create();
-
-    HelpFormatter formatter = new HelpFormatter();
-    StringWriter out = new StringWriter();
-
-    formatter.setPrintWriter(new PrintWriter(out));
-    formatter.setHeader("dsfkfsh kdh hsd hsdh fkshdf ksdh fskdh fsdh fkshfk sfdkjhskjh fkjh fkjsh khsdkj hfskdhf skjdfh ksf khf s");
-    formatter.setFooter("blort j jgj j jg jhghjghjgjhgjhg jgjhgj jhg jhg hjg jgjhghjg jhg hjg jhgjg jgjhghjg jg jgjhgjgjg jhg jhgjh" + '\r' + '\n' + "rarrr");
-    formatter.setGroup(g);
-    formatter.setShellCommand("foobar");
-
-    formatter.print();
-
-  }
-}
-
diff --git a/src/test/org/apache/commons/cli2/bug/BugLoopingOptionLookAlikeTest.java b/src/test/org/apache/commons/cli2/bug/BugLoopingOptionLookAlikeTest.java
deleted file mode 100644
index e95ba3da..00000000
--- a/src/test/org/apache/commons/cli2/bug/BugLoopingOptionLookAlikeTest.java
+++ /dev/null
@@ -1,76 +0,0 @@
-/**
- * Copyright 2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.bug;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.option.SourceDestArgument;
-
-/**
- * The first is a loop in Parser.parse() if I set a non-declared option. This 
- * code goes into a loop in Parser.java method parse this while loop runs 
- * endless
- * 
- * @author Steve Alberty
- */
-public class BugLoopingOptionLookAlikeTest extends TestCase {
-
-    public void testLoopingOptionLookAlike() {
-        final DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-        final Group options = gbuilder
-            .withName("ant")
-            .withOption(obuilder.withShortName("help").withDescription("print this message").create())
-            .withOption(obuilder.withShortName("projecthelp").withDescription("print project help information").create())
-            .withOption(abuilder.withName("target").create())
-            .create();
-        
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-        try {
-            parser.parse(new String[] { "-abcdef",
-                    "testfile.txt ", });
-            fail("OptionException");
-        } catch (OptionException e) {
-            assertEquals("Unexpected -abcdef while processing ant",e.getMessage());
-        }
-    }
-    
-    public void testLoopingOptionLookAlike2() {
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-        final Argument inputfile_opt = abuilder.withName("input").withMinimum(1).withMaximum(1).create();
-        final Argument outputfile_opt = abuilder.withName("output").withMinimum(1).withMaximum(1).create();
-        final Argument targets = new SourceDestArgument(inputfile_opt, outputfile_opt);
-        final Group options = gbuilder.withOption(targets).create();
-        final Parser parser = new Parser();
-        parser.setGroup(options);
-        try {
-            parser.parse(new String[] { "testfile.txt", "testfile.txt", "testfile.txt", "testfile.txt" });
-            fail("OptionException");
-        } catch (OptionException e) {
-            assertEquals("Unexpected testfile.txt while processing ", e.getMessage());
-        }
-    }    
-}
diff --git a/src/test/org/apache/commons/cli2/builder/ArgumentBuilderTest.java b/src/test/org/apache/commons/cli2/builder/ArgumentBuilderTest.java
deleted file mode 100644
index 74eb46c1..00000000
--- a/src/test/org/apache/commons/cli2/builder/ArgumentBuilderTest.java
+++ /dev/null
@@ -1,251 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import java.util.ArrayList;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.option.ArgumentImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-import org.apache.commons.cli2.validation.DateValidator;
-import org.apache.commons.cli2.validation.Validator;
-
-public class ArgumentBuilderTest
-    extends TestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-    private ArgumentBuilder argumentBuilder;
-
-    /*
-     * @see TestCase#setUp()
-     */
-    protected void setUp()
-        throws Exception {
-        this.argumentBuilder = new ArgumentBuilder();
-    }
-
-    public void testConsumeRemaining() {
-        this.argumentBuilder.withConsumeRemaining("--");
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect consume remaining token", "--", arg.getConsumeRemaining());
-    }
-
-    public void testNullConsumeRemaining() {
-        try {
-            this.argumentBuilder.withConsumeRemaining(null);
-            fail("cannot use null consume remaining token");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_CONSUME_REMAINING),
-                         exp.getMessage());
-        }
-    }
-
-    public void testEmptyConsumeRemaining() {
-        try {
-            this.argumentBuilder.withConsumeRemaining("");
-            fail("cannot use empty string consume remaining token");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_EMPTY_CONSUME_REMAINING),
-                         exp.getMessage());
-        }
-    }
-
-    public void testDefault() {
-        this.argumentBuilder.withDefault("defaultString");
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect number of default values", 1, arg.getDefaultValues().size());
-        assertEquals("incorrect default value", "defaultString", arg.getDefaultValues().get(0));
-    }
-
-    public void testDefaultX2() {
-        this.argumentBuilder.withDefault("defaultString1");
-        this.argumentBuilder.withDefault("defaultString2");
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect number of default values", 2, arg.getDefaultValues().size());
-        assertEquals("incorrect default value-1", "defaultString1", arg.getDefaultValues().get(0));
-        assertEquals("incorrect default value-2", "defaultString2", arg.getDefaultValues().get(1));
-    }
-
-    public void testNullDefault() {
-        try {
-            this.argumentBuilder.withDefault(null);
-            fail("cannot use null default");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_DEFAULT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testDefaults() {
-        final List defaults = new ArrayList();
-        defaults.add("one");
-        defaults.add("two");
-
-        this.argumentBuilder.withDefaults(defaults);
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect number of default values", 2, arg.getDefaultValues().size());
-        assertEquals("incorrect default value-1", "one", arg.getDefaultValues().get(0));
-        assertEquals("incorrect default value-2", "two", arg.getDefaultValues().get(1));
-        assertEquals("incorrect default values list", defaults, arg.getDefaultValues());
-
-    }
-
-    public void testNullDefaults() {
-        try {
-            this.argumentBuilder.withDefaults(null);
-            fail("cannot use null defaults");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_DEFAULTS),
-                         exp.getMessage());
-        }
-    }
-
-    public void testId() {
-        this.argumentBuilder.withId(1);
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect id", 1, arg.getId());
-    }
-
-    public void testInitialSeparator() {
-        this.argumentBuilder.withInitialSeparator(',');
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect initial separator", ',', arg.getInitialSeparator());
-    }
-
-    public void testMaximum() {
-        this.argumentBuilder.withMaximum(1);
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect maximum", 1, arg.getMaximum());
-    }
-
-    public void testNegativeMaximum() {
-        try {
-            this.argumentBuilder.withMaximum(-1);
-            fail("cannot use negative maximum");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NEGATIVE_MAXIMUM),
-                         exp.getMessage());
-        }
-    }
-
-    public void testMinimum() {
-        this.argumentBuilder.withMinimum(1);
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect maximum", 1, arg.getMinimum());
-    }
-
-    public void testNegativeMinimum() {
-        try {
-            this.argumentBuilder.withMinimum(-1);
-            fail("cannot use negative minimum");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NEGATIVE_MINIMUM),
-                         exp.getMessage());
-        }
-    }
-
-    public void testName() {
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect preferred name", "arg", arg.getPreferredName());
-    }
-
-    public void testNullName() {
-        try {
-            this.argumentBuilder.withName(null);
-            fail("cannot use null name");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_NAME),
-                         exp.getMessage());
-        }
-    }
-
-    public void testEmptyName() {
-        try {
-            this.argumentBuilder.withName("");
-            fail("cannot use empty name");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_EMPTY_NAME),
-                         exp.getMessage());
-        }
-    }
-
-    public void testSubsequentSeparator() {
-        this.argumentBuilder.withSubsequentSeparator(':');
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect subsequent separator", ':', arg.getSubsequentSeparator());
-    }
-
-    public void testValidator() {
-        Validator validator = DateValidator.getDateInstance();
-        this.argumentBuilder.withValidator(validator);
-        this.argumentBuilder.withName("arg");
-
-        ArgumentImpl arg = (ArgumentImpl) this.argumentBuilder.create();
-
-        assertEquals("incorrect validator", validator, arg.getValidator());
-    }
-
-    public void testNullValidator() {
-        try {
-            this.argumentBuilder.withValidator(null);
-            fail("cannot use null validator");
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         resources.getMessage(ResourceConstants.ARGUMENT_BUILDER_NULL_VALIDATOR),
-                         exp.getMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/builder/DefaultOptionBuilderTest.java b/src/test/org/apache/commons/cli2/builder/DefaultOptionBuilderTest.java
deleted file mode 100644
index 0c7bd5e7..00000000
--- a/src/test/org/apache/commons/cli2/builder/DefaultOptionBuilderTest.java
+++ /dev/null
@@ -1,199 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.builder;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.option.DefaultOption;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public class DefaultOptionBuilderTest
-    extends TestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-    private DefaultOptionBuilder defaultOptionBuilder;
-
-    /*
-     * @see TestCase#setUp()
-     */
-    protected void setUp()
-        throws Exception {
-        this.defaultOptionBuilder = new DefaultOptionBuilder();
-    }
-
-    /*
-     * Class to test for void DefaultOptionBuilder(String, String, boolean)
-     */
-    public void testNew_NullShortPrefix() {
-        try {
-            new DefaultOptionBuilder(null, null, false);
-            fail("null short prefix is not permitted");
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.OPTION_ILLEGAL_SHORT_PREFIX),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for void DefaultOptionBuilder(String, String, boolean)
-     */
-    public void testNew_EmptyShortPrefix() {
-        try {
-            new DefaultOptionBuilder("", null, false);
-            fail("empty short prefix is not permitted");
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.OPTION_ILLEGAL_SHORT_PREFIX),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for void DefaultOptionBuilder(String, String, boolean)
-     */
-    public void testNew_NullLongPrefix() {
-        try {
-            new DefaultOptionBuilder("-", null, false);
-            fail("null long prefix is not permitted");
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.OPTION_ILLEGAL_LONG_PREFIX),
-                         e.getMessage());
-        }
-    }
-
-    /*
-     * Class to test for void DefaultOptionBuilder(String, String, boolean)
-     */
-    public void testNew_EmptyLongPrefix() {
-        try {
-            new DefaultOptionBuilder("-", "", false);
-            fail("empty long prefix is not permitted");
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.OPTION_ILLEGAL_LONG_PREFIX),
-                         e.getMessage());
-        }
-    }
-
-    public void testCreate() {
-        try {
-            this.defaultOptionBuilder.create();
-            fail("options must have a name");
-        } catch (IllegalStateException e) {
-            assertEquals(resources.getMessage(ResourceConstants.OPTION_NO_NAME), e.getMessage());
-        }
-
-        this.defaultOptionBuilder.withShortName("j");
-        this.defaultOptionBuilder.create();
-        this.defaultOptionBuilder.withLongName("jkeyes");
-        this.defaultOptionBuilder.create();
-
-        {
-            DefaultOptionBuilder builder = new DefaultOptionBuilder("-", "--", true);
-            builder.withShortName("mx");
-        }
-    }
-
-    public void testName() {
-        // withLongName && this.preferred != null
-        {
-            this.defaultOptionBuilder.withShortName("a");
-            this.defaultOptionBuilder.withLongName("apples");
-        }
-        // withShortName && this.preferred != null
-        {
-            this.defaultOptionBuilder.withLongName("apples");
-            this.defaultOptionBuilder.withShortName("a");
-        }
-        // withShortName && this.preferred != null
-        {
-            this.defaultOptionBuilder.withLongName("apples");
-            this.defaultOptionBuilder.withShortName("a");
-        }
-    }
-
-    public void testWithDescription() {
-        String description = "desc";
-        this.defaultOptionBuilder.withShortName("a");
-        this.defaultOptionBuilder.withDescription(description);
-
-        DefaultOption opt = this.defaultOptionBuilder.create();
-        assertEquals("wrong description found", description, opt.getDescription());
-    }
-
-    public void testWithRequired() {
-        {
-            boolean required = false;
-            this.defaultOptionBuilder.withShortName("a");
-            this.defaultOptionBuilder.withRequired(required);
-
-            DefaultOption opt = this.defaultOptionBuilder.create();
-            assertEquals("wrong required found", required, opt.isRequired());
-        }
-
-        {
-            boolean required = true;
-            this.defaultOptionBuilder.withShortName("a");
-            this.defaultOptionBuilder.withRequired(required);
-
-            DefaultOption opt = this.defaultOptionBuilder.create();
-            assertEquals("wrong required found", required, opt.isRequired());
-        }
-    }
-
-    public void testWithChildren() {
-        GroupBuilder gbuilder = new GroupBuilder();
-
-        this.defaultOptionBuilder.withShortName("a");
-        this.defaultOptionBuilder.withRequired(true);
-
-        DefaultOption opt = this.defaultOptionBuilder.create();
-
-        Group group = gbuilder.withName("withchildren").withOption(opt).create();
-
-        {
-            this.defaultOptionBuilder.withShortName("b");
-            this.defaultOptionBuilder.withChildren(group);
-
-            DefaultOption option = this.defaultOptionBuilder.create();
-            assertEquals("wrong children found", group, option.getChildren());
-        }
-    }
-
-    public void testWithArgument() {
-        ArgumentBuilder abuilder = new ArgumentBuilder();
-        abuilder.withName("myarg");
-
-        Argument arg = abuilder.create();
-
-        this.defaultOptionBuilder.withShortName("a");
-        this.defaultOptionBuilder.withRequired(true);
-        this.defaultOptionBuilder.withArgument(arg);
-
-        DefaultOption opt = this.defaultOptionBuilder.create();
-
-        assertEquals("wrong argument found", arg, opt.getArgument());
-    }
-
-    public void testWithId() {
-        this.defaultOptionBuilder.withShortName("a");
-        this.defaultOptionBuilder.withId(0);
-
-        DefaultOption opt = this.defaultOptionBuilder.create();
-
-        assertEquals("wrong id found", 0, opt.getId());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/commandline/DefaultingCommandLineTest.java b/src/test/org/apache/commons/cli2/commandline/DefaultingCommandLineTest.java
deleted file mode 100644
index 6125ee7e..00000000
--- a/src/test/org/apache/commons/cli2/commandline/DefaultingCommandLineTest.java
+++ /dev/null
@@ -1,150 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Iterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.CommandLineTestCase;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-
-/**
- * @author Rob Oxspring
- */
-public class DefaultingCommandLineTest
-    extends CommandLineTestCase {
-    private CommandLine first;
-    private CommandLine second;
-    private Option inFirst = new DefaultOptionBuilder().withLongName("infirst").create();
-    private Option inBoth = new DefaultOptionBuilder().withLongName("inboth").create();
-    private Option inSecond = new DefaultOptionBuilder().withLongName("insecond").create();
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.CommandLineTest#createCommandLine()
-     */
-    protected final CommandLine createCommandLine() {
-        final WriteableCommandLine writeable = new WriteableCommandLineImpl(root, new ArrayList());
-        writeable.addOption(present);
-        writeable.addProperty("present", "present property");
-        writeable.addSwitch(bool, true);
-        writeable.addValue(present, "present value");
-        writeable.addOption(multiple);
-        writeable.addValue(multiple, "value 1");
-        writeable.addValue(multiple, "value 2");
-        writeable.addValue(multiple, "value 3");
-
-        final DefaultingCommandLine defaults = new DefaultingCommandLine();
-        defaults.appendCommandLine(writeable);
-
-        return defaults;
-    }
-
-    public void setUp()
-        throws Exception {
-        super.setUp();
-
-        WriteableCommandLine writeable;
-
-        writeable = new WriteableCommandLineImpl(root, new ArrayList());
-        writeable.addOption(inFirst);
-        writeable.addOption(inBoth);
-        writeable.addProperty("infirst", "infirst first value");
-        writeable.addProperty("inboth", "inboth first value");
-        writeable.addSwitch(inFirst, true);
-        writeable.addSwitch(inBoth, true);
-        writeable.addValue(inFirst, "infirst first value 1");
-        writeable.addValue(inFirst, "infirst first value 2");
-        writeable.addValue(inBoth, "inboth first value 1");
-        writeable.addValue(inBoth, "inboth first value 2");
-        first = writeable;
-
-        writeable = new WriteableCommandLineImpl(root, new ArrayList());
-        writeable.addOption(inSecond);
-        writeable.addOption(inBoth);
-        writeable.addProperty("insecond", "insecond second value");
-        writeable.addProperty("inboth", "inboth second value");
-        writeable.addSwitch(inSecond, true);
-        writeable.addSwitch(inBoth, true);
-        writeable.addValue(inSecond, "insecond second value 1");
-        writeable.addValue(inSecond, "insecond second value 2");
-        writeable.addValue(inBoth, "inboth second value 1");
-        writeable.addValue(inBoth, "inboth second value 2");
-        second = writeable;
-    }
-
-    public final void testAppendCommandLine() {
-        final DefaultingCommandLine defaults = new DefaultingCommandLine();
-        Iterator i;
-
-        i = defaults.commandLines();
-        assertFalse(i.hasNext());
-
-        defaults.appendCommandLine(first);
-        i = defaults.commandLines();
-        assertSame(first, i.next());
-        assertFalse(i.hasNext());
-
-        defaults.appendCommandLine(second);
-        i = defaults.commandLines();
-        assertSame(first, i.next());
-        assertSame(second, i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public final void testInsertCommandLine() {
-        final DefaultingCommandLine defaults = new DefaultingCommandLine();
-        Iterator i;
-
-        i = defaults.commandLines();
-        assertFalse(i.hasNext());
-
-        defaults.insertCommandLine(0, first);
-        i = defaults.commandLines();
-        assertSame(first, i.next());
-        assertFalse(i.hasNext());
-
-        defaults.insertCommandLine(0, second);
-        i = defaults.commandLines();
-        assertSame(second, i.next());
-        assertSame(first, i.next());
-        assertFalse(i.hasNext());
-    }
-    
-    public void testTriggers() {
-        final DefaultingCommandLine defaults = new DefaultingCommandLine();
-        defaults.appendCommandLine(first);
-        defaults.appendCommandLine(second);
-
-        Set set = defaults.getOptionTriggers();
-        Iterator iter = set.iterator();
-        assertEquals("wrong # of triggers", 3, set.size());
-        assertTrue("cannot find trigger", set.contains("--insecond"));
-        assertTrue("cannot find trigger", set.contains("--inboth"));
-        assertTrue("cannot find trigger", set.contains("--infirst"));
-    }
-
-    public void testDefaults() {
-        final DefaultingCommandLine defaults = new DefaultingCommandLine();
-        
-        assertEquals("wrong # of defaults", 0, defaults.getValues("--insecond").size());
-        assertEquals("wrong Set of defaults", Collections.EMPTY_LIST, defaults.getValues("--insecond", null));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/commandline/ParserTest.java b/src/test/org/apache/commons/cli2/commandline/ParserTest.java
deleted file mode 100644
index 096a9192..00000000
--- a/src/test/org/apache/commons/cli2/commandline/ParserTest.java
+++ /dev/null
@@ -1,124 +0,0 @@
-package org.apache.commons.cli2.commandline;
-
-import java.io.BufferedReader;
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.StringReader;
-import java.io.StringWriter;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.option.DefaultOption;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-import junit.framework.TestCase;
-
-public class ParserTest extends TestCase {
-    
-    private Parser parser;
-    private DefaultOption verboseOption;
-    private DefaultOption helpOption;
-    private Group options;
-    private HelpFormatter helpFormatter;
-    private StringWriter out;
-    private BufferedReader in;
-
-    public void setUp() {
-        parser = new Parser();
-        
-        final GroupBuilder gBuilder = new GroupBuilder();
-        final DefaultOptionBuilder oBuilder = new DefaultOptionBuilder();
-        
-        helpOption = oBuilder.withLongName("help").withShortName("h").create();
-        verboseOption = oBuilder.withLongName("verbose").withShortName("v").create();
-        options = gBuilder.withOption(helpOption).withOption(verboseOption).create();
-        parser.setGroup(options);
-        
-        helpFormatter = new HelpFormatter();
-        out = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(out));
-        parser.setHelpFormatter(helpFormatter);
-    }
-
-    public void testParse_Successful() throws OptionException {
-        final CommandLine cl = parser.parse(new String[]{"-hv"});
-        
-        assertTrue(cl.hasOption(helpOption));
-        assertTrue(cl.hasOption(verboseOption));
-        
-        assertEquals("--help --verbose",cl.toString());
-        
-        final WriteableCommandLineImpl wcli = (WriteableCommandLineImpl)cl;
-        assertEquals("[--help, --verbose]",wcli.getNormalised().toString());
-    }
-
-    public void testParse_WithUnexpectedOption() {
-        try {
-            parser.parse(new String[]{"--unexpected"});
-            fail("OptionException");
-        }
-        catch(OptionException e) {
-            assertEquals(options,e.getOption());
-            assertEquals("Unexpected --unexpected while processing --help|--verbose",e.getMessage());
-        }
-    }
-
-    public void testParseAndHelp_Successful() throws IOException {
-        final CommandLine cl = parser.parseAndHelp(new String[]{"-v"});
-        
-        assertTrue(cl.hasOption(verboseOption));
-        assertEquals("",out.getBuffer().toString());
-    }
-
-    public void testParseAndHelp_ByHelpOption() throws IOException {
-        parser.setHelpOption(helpOption);
-        
-        assertNull(parser.parseAndHelp(new String[]{"-hv"}));
-        
-        inReader();
-        assertInReaderUsage();
-        assertInReaderEOF();
-    }
-
-    public void testParseAndHelp_ByHelpTrigger() throws IOException {
-        parser.setHelpTrigger("--help");
-        
-        assertNull(parser.parseAndHelp(new String[]{"-hv"}));
-        
-        inReader();
-        assertInReaderUsage();
-        assertInReaderEOF();
-    }
-
-    public void testParseAndHelp_WithUnexpectedOption() throws IOException {
-        assertNull(parser.parseAndHelp(new String[]{"--unexpected"}));
-        
-        inReader();
-        assertInReaderLine("Unexpected --unexpected while processing --help|--verbose");
-        assertInReaderUsage();
-        assertInReaderEOF();
-    }
-
-    private void assertInReaderUsage() throws IOException {
-        assertInReaderLine("Usage:");
-        assertInReaderLine("[--help --verbose]");
-        assertInReaderLine("--help|--verbose");
-        assertInReaderLine("--help (-h)");
-        assertInReaderLine("--verbose (-v)");
-    }
-
-    private void assertInReaderLine(final String string) throws IOException {
-        assertEquals(string,in.readLine().trim());
-    }
-
-    private void assertInReaderEOF() throws IOException {
-        assertNull(in.readLine());
-    }
-
-    private void inReader() {
-        in = new BufferedReader(new StringReader(out.getBuffer().toString()));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/commandline/PreferencesCommandLineTest.java b/src/test/org/apache/commons/cli2/commandline/PreferencesCommandLineTest.java
deleted file mode 100644
index d77c5982..00000000
--- a/src/test/org/apache/commons/cli2/commandline/PreferencesCommandLineTest.java
+++ /dev/null
@@ -1,105 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.Iterator;
-import java.util.Set;
-import java.util.prefs.Preferences;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.CommandLineTestCase;
-
-/**
- * @author Rob Oxspring
- */
-public class PreferencesCommandLineTest extends CommandLineTestCase {
-	
-	/* (non-Javadoc)
-	 * @see org.apache.commons.cli2.CommandLineTest#createCommandLine()
-	 */
-	protected CommandLine createCommandLine() {
-		// TODO Auto-generated method stub
-		final Preferences props = Preferences.userNodeForPackage(PreferencesCommandLineTest.class);
-		props.put("--present","present value");
-		props.put("--alsopresent","");
-		props.put("--multiple","value 1|value 2|value 3");
-		props.put("--bool","true");
-		
-		props.put("present","present property");
-		
-		return new PreferencesCommandLine(root,props,'|');
-	}
-
-	protected CommandLine createCommandLineNoSep() {
-		// TODO Auto-generated method stub
-		final Preferences props = Preferences.userNodeForPackage(PreferencesCommandLineTest.class);
-		props.put("--present","present value");
-		props.put("--alsopresent","");
-		props.put("--multiple","value 1|value 2|value 3");
-		props.put("--bool","false");
-		
-		props.put("present","present property");
-		
-		return new PreferencesCommandLine(root,props);
-	}
-	
-    public void testPropertyValues() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-    	
-    	assertEquals("wrong value", "present value", cmdline.getValue("--present"));
-    	assertEquals("wrong value", "present value", cmdline.getValue("--alsopresent"));
-    	assertEquals("wrong # of values", 3, cmdline.getValues("--multiple").size());
-    	assertEquals("wrong value 1", "value 1", cmdline.getValues("--multiple").get(0));
-    	assertEquals("wrong value 2", "value 2", cmdline.getValues("--multiple").get(1));
-    	assertEquals("wrong value 3", "value 3", cmdline.getValues("--multiple").get(2));
-    }
-    
-    public void testNoSeparator() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLineNoSep();
-    	
-    	assertEquals("wrong value", "present value", cmdline.getValue("--present"));
-    	assertEquals("wrong value", "present value", cmdline.getValue("--alsopresent"));
-    	assertEquals("wrong # of values", 1, cmdline.getValues("--multiple").size());
-    	assertEquals("wrong value", "value 1|value 2|value 3", cmdline.getValue("--multiple"));
-    	assertFalse("expected a false", cmdline.getSwitch("--bool").booleanValue());
-    }
-    
-    public void testNullOption() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-
-    	assertFalse("should not find null option", cmdline.hasOption((String) null));
-    	assertTrue("expected a true", cmdline.getSwitch("--bool").booleanValue());
-    }
-
-    public void testPreferenceTriggers() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-
-    	Set triggers = cmdline.getOptionTriggers();
-        Iterator iter = triggers.iterator();
-        assertEquals("wrong # of triggers", 4, triggers.size());
-        assertTrue("cannot find trigger", triggers.contains("--bool"));
-        assertTrue("cannot find trigger", triggers.contains("--present"));
-        assertTrue("cannot find trigger", triggers.contains("--multiple"));
-        assertTrue("cannot find trigger", triggers.contains("--alsopresent"));
-    	
-    	assertFalse("should not find null option", cmdline.hasOption((String) null));
-    	assertTrue("expected a true", cmdline.getSwitch("--bool").booleanValue());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/commandline/PropertiesCommandLineTest.java b/src/test/org/apache/commons/cli2/commandline/PropertiesCommandLineTest.java
deleted file mode 100644
index 4cec1c47..00000000
--- a/src/test/org/apache/commons/cli2/commandline/PropertiesCommandLineTest.java
+++ /dev/null
@@ -1,100 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.Iterator;
-import java.util.Properties;
-import java.util.Set;
-
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.CommandLineTestCase;
-
-/**
- * @author Rob Oxspring
- */
-public class PropertiesCommandLineTest
-    extends CommandLineTestCase {
-    private Properties props = null;
-
-    protected CommandLine createCommandLine() {
-        props = new Properties();
-        props.setProperty("--present", "present value");
-        props.setProperty("--alsopresent", "");
-        props.setProperty("--multiple", "value 1|value 2|value 3");
-        props.setProperty("--bool", "true");
-
-        props.setProperty("present", "present property");
-    	return new PropertiesCommandLine(root, props, '|');
-    }
-
-    protected CommandLine createCommandLineNoSep() {
-        props = new Properties();
-        props.setProperty("--present", "present value");
-        props.setProperty("--alsopresent", "");
-        props.setProperty("--multiple", "value 1|value 2|value 3");
-        props.setProperty("--bool", "false");
-
-        props.setProperty("present", "present property");
-    	return new PropertiesCommandLine(root, props);
-    }
-    
-    public void testPropertyValues() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-    	
-    	assertEquals("wrong value", "present value", cmdline.getValue("--present"));
-    	assertEquals("wrong value", "present value", cmdline.getValue("--alsopresent"));
-    	assertEquals("wrong # of values", 3, cmdline.getValues("--multiple").size());
-    	assertEquals("wrong value 1", "value 1", cmdline.getValues("--multiple").get(0));
-    	assertEquals("wrong value 2", "value 2", cmdline.getValues("--multiple").get(1));
-    	assertEquals("wrong value 3", "value 3", cmdline.getValues("--multiple").get(2));
-    }
-    
-    public void testNoSeparator() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLineNoSep();
-    	
-    	assertEquals("wrong value", "present value", cmdline.getValue("--present"));
-    	assertEquals("wrong value", "present value", cmdline.getValue("--alsopresent"));
-    	assertEquals("wrong # of values", 1, cmdline.getValues("--multiple").size());
-    	assertEquals("wrong value", "value 1|value 2|value 3", cmdline.getValue("--multiple"));
-    	assertFalse("expected a false", cmdline.getSwitch("--bool").booleanValue());
-    }
-    
-    public void testNullOption() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-
-    	assertFalse("should not find null option", cmdline.hasOption((String) null));
-    	assertTrue("expected a true", cmdline.getSwitch("--bool").booleanValue());
-    }
-
-    public void testPropertyTriggers() {
-        // nothing to test
-    	CommandLine cmdline = createCommandLine();
-
-    	Set triggers = cmdline.getOptionTriggers();
-        Iterator iter = triggers.iterator();
-        assertEquals("wrong # of triggers", 4, triggers.size());
-        assertTrue("cannot find trigger", triggers.contains("--bool"));
-        assertTrue("cannot find trigger", triggers.contains("--present"));
-        assertTrue("cannot find trigger", triggers.contains("--multiple"));
-        assertTrue("cannot find trigger", triggers.contains("--alsopresent"));
-    	
-    	assertFalse("should not find null option", cmdline.hasOption((String) null));
-    	assertTrue("expected a true", cmdline.getSwitch("--bool").booleanValue());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/commandline/WriteableCommandLineImplTest.java b/src/test/org/apache/commons/cli2/commandline/WriteableCommandLineImplTest.java
deleted file mode 100644
index 7fafe031..00000000
--- a/src/test/org/apache/commons/cli2/commandline/WriteableCommandLineImplTest.java
+++ /dev/null
@@ -1,35 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.commandline;
-
-import java.util.ArrayList;
-
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.WriteableCommandLineTestCase;
-
-public class WriteableCommandLineImplTest
-    extends WriteableCommandLineTestCase {
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.WriteableCommandLineTest#createWriteableCommandLine()
-     */
-    protected WriteableCommandLine createWriteableCommandLine() {
-        return new WriteableCommandLineImpl(root, new ArrayList());
-    }
-
-    public void testToMakeEclipseSpotTheTestCase() {
-        // nothing to test
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/jdepend/JDependTest.java b/src/test/org/apache/commons/cli2/jdepend/JDependTest.java
deleted file mode 100644
index 6550c690..00000000
--- a/src/test/org/apache/commons/cli2/jdepend/JDependTest.java
+++ /dev/null
@@ -1,108 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.jdepend;
-
-import java.io.IOException;
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.Iterator;
-
-import jdepend.framework.JDepend;
-import jdepend.framework.JavaPackage;
-import junit.framework.TestCase;
-
-/**
- * @author Rob Oxspring
- */
-public class JDependTest extends TestCase {
-
-    private JDepend dependancies = null;
-
-    public void setUp() throws IOException {
-        dependancies = new JDepend();
-        dependancies.addDirectory("target/classes");
-        dependancies.analyze();
-    }
-
-    public void testJUnitNotPresent() {
-        // if junit dependancy is found then jdepend has been poluted
-        // with test classes and all tests are meaningless
-        assertNull(
-            "JUnit dependancy found",
-            dependancies.getPackage("junit.framework"));
-
-        // the same applies to jdepend
-        assertNull(
-            "JDepend dependancy found",
-            dependancies.getPackage("jdepend.framework"));
-    }
-
-    public void testAcceptableDistance() {
-        Collection packages = dependancies.getPackages();
-        // only interested in cli2
-        packages = cli2Packages(packages);
-        // resources is well off the line
-        packages =
-            namedPackages(packages, "org.apache.commons.cli2.resource", false);
-
-        for (final Iterator i = packages.iterator(); i.hasNext();) {
-            final JavaPackage pkg = (JavaPackage)i.next();
-            final float distance = pkg.distance();
-            final String message = pkg.getName() + " too far from line: " + distance;
-            assertTrue(
-                message,
-                distance < 0.21d);
-        }
-    }
-
-    public void testNoCyclesPresent() {
-        assertEquals("Cycles exist", false, dependancies.containsCycles());
-    }
-
-    public void testApiIndependance() {
-        dependancies.analyze();
-
-        final JavaPackage apiPackage =
-            dependancies.getPackage("org.apache.commons.cli2");
-        final Collection dependsUpon = cli2Packages(apiPackage.getEfferents());
-
-        assertEquals("Api should depend on one package", 1, dependsUpon.size());
-        
-        JavaPackage pkg = (JavaPackage) dependsUpon.iterator().next();
-        assertEquals(
-                "Wrong package name", 
-                "org.apache.commons.cli2.resource",
-                pkg.getName());
-    }
-
-    private Collection cli2Packages(final Collection incoming) {
-        return namedPackages(incoming, "org.apache.commons.cli2", true);
-    }
-
-    private Collection namedPackages(
-        final Collection incoming,
-        final String name,
-        final boolean include) {
-        final Collection outgoing = new ArrayList();
-        for (final Iterator i = incoming.iterator(); i.hasNext();) {
-            final JavaPackage pkg = (JavaPackage)i.next();
-            if (include ^ !pkg.getName().startsWith(name)) {
-                outgoing.add(pkg);
-            }
-        }
-        return outgoing;
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/ArgumentTest.java b/src/test/org/apache/commons/cli2/option/ArgumentTest.java
deleted file mode 100644
index 215e1ae9..00000000
--- a/src/test/org/apache/commons/cli2/option/ArgumentTest.java
+++ /dev/null
@@ -1,645 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.text.ParseException;
-
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-import org.apache.commons.cli2.validation.DateValidator;
-import org.apache.commons.cli2.validation.DateValidatorTest;
-
-/**
- * @author Rob Oxspring
- */
-public class ArgumentTest
-    extends ArgumentTestCase {
-    private ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    public static Argument buildUsernameArgument() {
-        return new ArgumentImpl("username", "The user to connect as", 1, 1, '\0', '\0', null,
-                                ArgumentImpl.DEFAULT_CONSUME_REMAINING, null, 0);
-    }
-
-    public static Argument buildHostArgument() {
-        return new ArgumentImpl("host", "The host name", 2, 3, '\0', ',', null, null, null, 0);
-    }
-
-    public static Argument buildPathArgument() {
-        return new ArgumentImpl("path", "The place to look for files", 1, Integer.MAX_VALUE, '=',
-                                ';', null, ArgumentImpl.DEFAULT_CONSUME_REMAINING, null, 0);
-    }
-
-    public static Argument buildDateLimitArgument() {
-        return new ArgumentImpl("limit", "the last acceptable date", 0, 1, '=', '\0',
-                                new DateValidator(DateValidatorTest.YYYY_MM_DD), null, null, 0);
-    }
-
-    public static Argument buildTargetsArgument() {
-        return new ArgumentImpl("target", "The targets ant should build", 0, Integer.MAX_VALUE,
-                                '\0', ',', null, null, null, 0);
-    }
-
-    public static Argument buildSizeArgument() {
-        List defaults = new ArrayList();
-        defaults.add("10");
-
-        return new ArgumentImpl("size", "The number of units", 1, 1, '\0', '\0', null,
-                                ArgumentImpl.DEFAULT_CONSUME_REMAINING, defaults, 0);
-    }
-
-    public static Argument buildBoundsArgument() {
-        List defaults = new ArrayList();
-        defaults.add("5");
-        defaults.add("10");
-
-        return new ArgumentImpl("size", "The number of units", 2, 2, '\0', '\0', null,
-                                ArgumentImpl.DEFAULT_CONSUME_REMAINING, defaults, 0);
-    }
-
-    public void testNew() {
-        try {
-            new ArgumentImpl("limit", "the last acceptable date", 10, 5, '=', '\0',
-                             new DateValidator(DateValidatorTest.YYYY_MM_DD), null, null, 0);
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage("Argument.minimum.exceeds.maximum"), e.getMessage());
-        }
-
-        {
-            ArgumentImpl arg =
-                new ArgumentImpl(null, "the last acceptable date", 5, 5, '=', '\0',
-                                 new DateValidator(DateValidatorTest.YYYY_MM_DD), null, null, 0);
-            assertEquals("wrong arg name", "arg", arg.getPreferredName());
-        }
-
-        {
-            List defaults = new ArrayList();
-
-            try {
-                new ArgumentImpl(null, "the last acceptable date", 1, 1, '=', '\0',
-                                 new DateValidator(DateValidatorTest.YYYY_MM_DD), null, defaults, 0);
-            } catch (IllegalArgumentException exp) {
-                assertEquals(resources.getMessage("Argument.too.few.defaults"), exp.getMessage());
-            }
-        }
-
-        try {
-            List defaults = new ArrayList();
-            defaults.add("1");
-            defaults.add("2");
-
-            new ArgumentImpl(null, "the last acceptable date", 1, 1, '=', '\0',
-                             new DateValidator(DateValidatorTest.YYYY_MM_DD), null, defaults, 0);
-        } catch (IllegalArgumentException exp) {
-            assertEquals(resources.getMessage("Argument.too.many.defaults"), exp.getMessage());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.ArgumentTestCase#testProcessValues()
-     */
-    public void testProcessValues()
-        throws OptionException {
-        final Argument option = buildUsernameArgument();
-        final List args = list("rob");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processValues(commandLine, iterator, option);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("username"));
-        assertEquals("rob", commandLine.getValue(option));
-    }
-
-    public void testProcessValues_BoundaryQuotes()
-        throws OptionException {
-        final Argument option = buildUsernameArgument();
-        final List args = list("\"rob\"");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processValues(commandLine, iterator, option);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("username"));
-        assertEquals("rob", commandLine.getValue(option));
-    }
-
-    public void testProcessValues_SpareValues()
-        throws OptionException {
-        final Argument option = buildUsernameArgument();
-        final List args = list("rob", "secret");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processValues(commandLine, iterator, option);
-
-        assertTrue(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("username"));
-        assertEquals("rob", commandLine.getValue(option));
-    }
-
-    public void testProcessValues_Optional() {
-        final Argument option = buildTargetsArgument();
-        final List args = list();
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.processValues(commandLine, iterator, option);
-        } catch (final OptionException mve) {
-            assertEquals(option, mve.getOption());
-            assertEquals("Missing value(s) target [target ...]", mve.getMessage());
-        }
-
-        assertFalse(iterator.hasNext());
-        assertFalse(commandLine.hasOption(option));
-        assertFalse(commandLine.hasOption("username"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcessValues_Multiple()
-        throws OptionException {
-        final Argument option = buildTargetsArgument();
-        final List args = list("compile", "test", "docs");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processValues(commandLine, iterator, option);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("target"));
-        assertFalse(commandLine.getValues(option).isEmpty());
-        assertListContentsEqual(args, commandLine.getValues(option));
-    }
-
-    public void testProcessValues_Contracted()
-        throws OptionException {
-        final Argument option = buildTargetsArgument();
-        final List args = list("compile,test,javadoc", "checkstyle,jdepend");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processValues(commandLine, iterator, option);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("target"));
-        assertListContentsEqual(list("compile", "test", "javadoc", "checkstyle", "jdepend"),
-                                commandLine.getValues(option));
-    }
-
-    public void testProcessValues_ContractedTooFew() {
-        final Argument option = buildHostArgument();
-        final List args = list("box1");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.processValues(commandLine, iterator, option);
-            option.validate(commandLine);
-            fail("Expected MissingValueException");
-        } catch (OptionException mve) {
-            assertSame(option, mve.getOption());
-        }
-    }
-
-    public void testProcessValues_ContractedTooMany() {
-        final Argument option = buildHostArgument();
-        final List args = list("box1,box2,box3,box4");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.processValues(commandLine, iterator, option);
-            option.validate(commandLine);
-            fail("Expected MissingValueException");
-        } catch (OptionException mve) {
-            assertSame(option, mve.getOption());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Argument option = buildTargetsArgument();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "any value"));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Argument option = buildTargetsArgument();
-        assertTrue(option.getPrefixes().isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess()
-        throws OptionException {
-        final Argument option = buildPathArgument();
-        final List args = list("-path=/lib;/usr/lib;/usr/local/lib");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("path"));
-        assertListContentsEqual(list("-path=/lib", "/usr/lib", "/usr/local/lib"),
-                                commandLine.getValues(option));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Argument option = buildTargetsArgument();
-        assertTrue(option.getTriggers().isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate()
-        throws OptionException {
-        final Argument option = buildUsernameArgument();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addValue(option, "rob");
-
-        option.validate(commandLine);
-    }
-
-    public void testValidate_Minimum() {
-        final Argument option = buildUsernameArgument();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        try {
-            option.validate(commandLine);
-            fail("UnexpectedValue");
-        } catch (OptionException mve) {
-            assertEquals(option, mve.getOption());
-        }
-    }
-
-    public void testRequired() {
-        {
-            final Argument arg = buildBoundsArgument();
-
-            assertTrue("not required", arg.isRequired());
-        }
-
-        {
-            final Argument arg = buildTargetsArgument();
-
-            assertFalse("should not be required", arg.isRequired());
-        }
-    }
-
-    public void testValidate_Maximum() {
-        final Argument option = buildUsernameArgument();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addValue(option, "rob");
-        commandLine.addValue(option, "oxspring");
-
-        try {
-            option.validate(commandLine);
-            fail("UnexpectedValue");
-        } catch (OptionException uve) {
-            assertEquals(option, uve.getOption());
-        }
-    }
-
-    public void testValidate_Validator()
-        throws OptionException, ParseException {
-        final Argument option = buildDateLimitArgument();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addValue(option, "2004-01-01");
-
-        option.validate(commandLine, option);
-        assertContentsEqual(Arrays.asList(new Object[] {
-                                              DateValidatorTest.YYYY_MM_DD.parse("2004-01-01")
-                                          }), commandLine.getValues(option));
-    }
-
-    public void testValidate_ValidatorInvalidDate()
-        throws OptionException, ParseException {
-        final Argument option = buildDateLimitArgument();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addValue(option, "12-12-2004");
-
-        try {
-            option.validate(commandLine, option);
-        } catch (OptionException exp) {
-            OptionException e =
-                new OptionException(option, ResourceConstants.ARGUMENT_UNEXPECTED_VALUE,
-                                    "12-12-2004");
-            assertEquals("wrong exception message", e.getMessage(), exp.getMessage());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildUsernameArgument();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("<username>", buffer.toString());
-    }
-
-    public void testAppendUsage_Infinite() {
-        final Option option = buildTargetsArgument();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("[<target1> [<target2> ...]]", buffer.toString());
-    }
-
-    public void testAppendUsage_InfiniteNoOptional() {
-        final Option option = buildTargetsArgument();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_OPTIONAL);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("<target1> [<target2> ...]", buffer.toString());
-    }
-
-    public void testAppendUsage_InfiniteNoNumbering() {
-        final Option option = buildTargetsArgument();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_ARGUMENT_NUMBERED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[<target> [<target> ...]]", buffer.toString());
-    }
-
-    public void testAppendUsage_Minimum() {
-        final Option option = buildHostArgument();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("<host1> <host2> [<host3>]", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildPathArgument();
-        assertEquals("path", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildHostArgument();
-        assertEquals("The host name", option.getDescription());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        final Option option = buildHostArgument();
-        final List lines = option.helpLines(0, DisplaySetting.ALL, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    public void testCanProcess_ConsumeRemaining() {
-        final Option option = buildUsernameArgument();
-
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "--"));
-    }
-
-    public void testProcess_ConsumeRemaining()
-        throws OptionException {
-        final Option option = buildPathArgument();
-        final List args = list("options", "--", "--ignored", "-Dprop=val");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        option.process(commandLine, iterator);
-
-        final List values = commandLine.getValues(option);
-        assertTrue(values.contains("options"));
-        assertTrue(values.contains("--ignored"));
-        assertTrue(values.contains("-Dprop=val"));
-        assertEquals(3, values.size());
-        assertFalse(iterator.hasNext());
-    }
-
-    public void testProcess_ConsumeNothing() {
-        final Option option = buildPathArgument();
-        final List args = list("--");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.process(commandLine, iterator);
-            option.validate(commandLine);
-            fail("Missing Value!");
-        } catch (OptionException mve) {
-            assertEquals(option, mve.getOption());
-            assertEquals("Missing value(s) path [path ...]", mve.getMessage());
-        }
-
-        assertTrue(commandLine.getValues(option).isEmpty());
-        assertFalse(iterator.hasNext());
-    }
-
-    //    public void testProcess_DefinedDefaultValue() throws OptionException {
-    //        final Option size = buildSizeArgument();
-    //        final List args = list();
-    //        final WriteableCommandLine commandLine = commandLine(size, args);
-    //        final ListIterator iterator = args.listIterator();
-    //
-    //        size.process(commandLine, iterator);
-    //
-    //        assertEquals("10", commandLine.getValue(size));
-    //    }
-    //
-    //    public void testProcess_DefinedDefaultValues() throws OptionException {
-    //        final Option bounds = buildBoundsArgument();
-    //        final List args = list();
-    //        final WriteableCommandLine commandLine = commandLine(bounds, args);
-    //        final ListIterator iterator = args.listIterator();
-    //
-    //        bounds.process(commandLine, iterator);
-    //
-    //        List values = new ArrayList();
-    //        values.add("5");
-    //        values.add("10");
-    //        assertEquals(values, commandLine.getValues(bounds));
-    //    }
-    public void testProcess_InterrogatedDefaultValue()
-        throws OptionException {
-        final Option size = buildSizeArgument();
-        final List args = list();
-        final WriteableCommandLine commandLine = commandLine(size, args);
-        final ListIterator iterator = args.listIterator();
-
-        size.process(commandLine, iterator);
-
-        assertEquals(new Integer(20), commandLine.getValue(size, new Integer(20)));
-    }
-
-    public void testTooFewDefaults() {
-        List defaults = new ArrayList();
-        defaults.add("5");
-
-        try {
-            new ArgumentImpl("size", "The number of units", 2, 2, '\0', '\0', null,
-                             ArgumentImpl.DEFAULT_CONSUME_REMAINING, defaults, 0);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.ARGUMENT_TOO_FEW_DEFAULTS),
-                         exp.getMessage());
-        }
-    }
-
-    public void testTooManyDefaults() {
-        List defaults = new ArrayList();
-        defaults.add("5");
-        defaults.add("10");
-        defaults.add("15");
-
-        try {
-            new ArgumentImpl("size", "The number of units", 2, 2, '\0', '\0', null,
-                             ArgumentImpl.DEFAULT_CONSUME_REMAINING, defaults, 0);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.ARGUMENT_TOO_MANY_DEFAULTS),
-                         exp.getMessage());
-        }
-    }
-
-    public void testProcess_InterrogatedDefaultValues()
-        throws OptionException {
-        final Option bounds = buildBoundsArgument();
-        final List args = list();
-        final WriteableCommandLine commandLine = commandLine(bounds, args);
-        final ListIterator iterator = args.listIterator();
-
-        bounds.process(commandLine, iterator);
-
-        // test with values
-        List values = new ArrayList();
-        values.add("50");
-        values.add("100");
-        assertEquals(values, commandLine.getValues(bounds, values));
-
-        // test without values
-        assertEquals(Collections.EMPTY_LIST, commandLine.getValues(bounds, null));
-    }
-
-    public void testProcess_StripBoundaryQuotes()
-        throws OptionException {
-        final Option bounds = buildBoundsArgument();
-        final List args = list();
-        final WriteableCommandLine commandLine = commandLine(bounds, args);
-        final ListIterator iterator = args.listIterator();
-
-        bounds.process(commandLine, iterator);
-
-        List values = new ArrayList();
-        values.add("50\"");
-        values.add("\"100");
-        assertEquals(values, commandLine.getValues(bounds, values));
-    }
-
-    public void testSourceDestArgument() {
-        final ArgumentBuilder abuilder = new ArgumentBuilder();
-        final GroupBuilder gbuilder = new GroupBuilder();
-        final Argument inputfiles =
-            abuilder.withName("input").withMinimum(0).withMaximum(0).create();
-        final Argument bad_outputfile =
-            abuilder.withName("output").withMinimum(1).withMaximum(2).create();
-
-        try {
-            final Argument targets = new SourceDestArgument(inputfiles, bad_outputfile);
-        } catch (final IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SOURCE_DEST_MUST_ENFORCE_VALUES),
-                         exp.getMessage());
-        }
-
-        final Argument outputfile =
-            abuilder.withName("output").withMinimum(1).withMaximum(1).create();
-
-        final Argument targets = new SourceDestArgument(inputfiles, outputfile);
-        final StringBuffer buffer = new StringBuffer("test content");
-        targets.appendUsage(buffer, Collections.EMPTY_SET, null);
-
-        assertTrue("buffer not added", buffer.toString().startsWith("test content"));
-        assertFalse("space added", buffer.charAt(12) == ' ');
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/ArgumentTestCase.java b/src/test/org/apache/commons/cli2/option/ArgumentTestCase.java
deleted file mode 100644
index abd481fc..00000000
--- a/src/test/org/apache/commons/cli2/option/ArgumentTestCase.java
+++ /dev/null
@@ -1,27 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import org.apache.commons.cli2.OptionException;
-
-/**
- * @author Rob Oxspring
- */
-public abstract class ArgumentTestCase extends OptionTestCase {
-
-    public abstract void testProcessValues() throws OptionException;
-
-}
diff --git a/src/test/org/apache/commons/cli2/option/CommandTest.java b/src/test/org/apache/commons/cli2/option/CommandTest.java
deleted file mode 100644
index 6c769302..00000000
--- a/src/test/org/apache/commons/cli2/option/CommandTest.java
+++ /dev/null
@@ -1,248 +0,0 @@
-/**
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.Parent;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * @author Rob Oxspring
- *
- * To change the template for this generated type comment go to
- * Window>Preferences>Java>Code Generation>Code and Comments
- */
-public class CommandTest
-    extends ParentTestCase {
-    public static Command buildStartCommand() {
-        return new Command("start", "Begins the process", Collections.singleton("go"), false, null,
-                           null, 0);
-    }
-
-    public static Command buildCommitCommand() {
-        return new Command("commit", "Commit the changes to the database", null, true, null, null, 0);
-    }
-
-    public static Command buildLoginCommand() {
-        return new Command("login", "Initiates a session for the user", null, false,
-                           ArgumentTest.buildUsernameArgument(), null, 0);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.ParentTestCase#testProcessParent()
-     */
-    public void testProcessParent()
-        throws OptionException {
-        final Command option = buildStartCommand();
-        final List args = list("go");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("start"));
-        assertTrue(commandLine.hasOption("go"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcessParent_Spare()
-        throws OptionException {
-        final Command option = buildLoginCommand();
-        final List args = list("login", "rob");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertEquals("rob", iterator.next());
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("login"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Command option = buildStartCommand();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "start"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final Command option = buildStartCommand();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option, null), "stop"));
-    }
-
-    public void testCanProcess_Alias() {
-        final Command option = buildStartCommand();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "go"));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Command option = buildStartCommand();
-        assertTrue(option.getPrefixes().isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess()
-        throws OptionException {
-        final Command option = buildLoginCommand();
-        final List args = list("login", "rob");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("login"));
-        assertEquals("rob", commandLine.getValue(option));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Command option = buildStartCommand();
-        final Set triggers = option.getTriggers();
-        assertContentsEqual(list("start", "go"), triggers);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate() {
-        final Parent option = buildCommitCommand();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        try {
-            option.validate(commandLine);
-            fail("Missing an option");
-        } catch (OptionException moe) {
-            assertSame(option, moe.getOption());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildStartCommand();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("[start (go)]", buffer.toString());
-    }
-
-    public void testNullPreferredName() {
-        try {
-            new Command(null, "", Collections.singleton("go"), false, null, null, 0);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception name",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.COMMAND_PREFERRED_NAME_TOO_SHORT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testEmotyPreferredName() {
-        try {
-            new Command("", "", Collections.singleton("go"), false, null, null, 0);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception name",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.COMMAND_PREFERRED_NAME_TOO_SHORT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testAppendUsage_NoOptional() {
-        final Option option = buildStartCommand();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_OPTIONAL);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("start (go)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoAlias() {
-        final Option option = buildStartCommand();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_ALIASES);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[start]", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildStartCommand();
-        assertEquals("start", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildLoginCommand();
-        assertEquals("Initiates a session for the user", option.getDescription());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        // TODO Auto-generated method stub
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/DefaultOptionTest.java b/src/test/org/apache/commons/cli2/option/DefaultOptionTest.java
deleted file mode 100644
index d9dfa009..00000000
--- a/src/test/org/apache/commons/cli2/option/DefaultOptionTest.java
+++ /dev/null
@@ -1,226 +0,0 @@
-/**
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.HashSet;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.Parent;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-
-/**
- * @author roberto
- * 
- * To change the template for this generated type comment go to
- * Window>Preferences>Java>Code Generation>Code and Comments
- */
-public class DefaultOptionTest extends ParentTestCase {
-
-    public static DefaultOption buildHelpOption() {
-        final Set aliases = new HashSet(list("-h", "-?"));
-        return new DefaultOption(
-            "-",
-            "--",
-            true,
-            "--help",
-            "Displays the help",
-            aliases,
-            aliases,
-            false,
-            null,
-            null,
-            'h');
-    }
-
-    public static DefaultOption buildXOption() {
-        return new DefaultOption(
-            "-",
-            "--",
-            true,
-            "-X",
-            "This is needed",
-            null,
-            null,
-            true,
-            null,
-            null,
-            'X');
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.ParentTestCase#testProcessParent()
-     */
-    public void testProcessParent() throws OptionException {
-        final DefaultOption option = buildHelpOption();
-        final List args = list("--help");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("--help"));
-        assertTrue(commandLine.hasOption("-?"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcessParent_Burst() throws OptionException {
-        final DefaultOption option = buildHelpOption();
-        final List args = list("-help");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertEquals("-elp", iterator.next());
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("--help"));
-        assertTrue(commandLine.hasOption("-?"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final DefaultOption option = buildHelpOption();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option,null), "-?"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final DefaultOption option = buildHelpOption();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option,null), "-H"));
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final DefaultOption option = buildHelpOption();
-        assertContentsEqual(list("-", "--"), option.getPrefixes());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess() {
-        // TODO Auto-generated method stub
-
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final DefaultOption option = buildHelpOption();
-        assertContentsEqual(list("-?", "-h", "--help"), option.getTriggers());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate() {
-        final Parent option = buildXOption();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        try {
-            option.validate(commandLine);
-            fail("Missing an option");
-        }
-        catch (OptionException moe) {
-            assertSame(option, moe.getOption());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildHelpOption();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("[--help (-?,-h)]", buffer.toString());
-    }
-
-    public void testAppendUsage_NoOptional() {
-        final Option option = buildHelpOption();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_OPTIONAL);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("--help (-?,-h)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoAlias() {
-        final Option option = buildHelpOption();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_ALIASES);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[--help]", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildHelpOption();
-        assertEquals("--help", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildHelpOption();
-        assertEquals("Displays the help", option.getDescription());
-    }
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        // TODO Auto-generated method stub
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/GroupTest.java b/src/test/org/apache/commons/cli2/option/GroupTest.java
deleted file mode 100644
index f7686b8a..00000000
--- a/src/test/org/apache/commons/cli2/option/GroupTest.java
+++ /dev/null
@@ -1,439 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.ArrayList;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-
-/**
- * @author Rob Oxspring
- */
-public class GroupTest
-    extends GroupTestCase {
-    public static final Command COMMAND_START =
-        new Command("start", "Starts the server", null, false, null, null, 0);
-    public static final Command COMMAND_STOP =
-        new Command("stop", "Stops the server", null, false, null, null, 0);
-    public static final Command COMMAND_RESTART =
-        new Command("restart", "Stops and starts the server", null, false, null, null, 0);
-    public static final Command COMMAND_GRACEFUL =
-        new Command("graceful", "Restarts the server without interruption", null, false, null,
-                    null, 0);
-
-    public static Group buildApacheCommandGroup() {
-        final List options = new ArrayList();
-        options.add(COMMAND_GRACEFUL);
-        options.add(COMMAND_RESTART);
-        options.add(COMMAND_START);
-        options.add(COMMAND_STOP);
-
-        return new GroupImpl(options, "httpd-cmds", "The command to pass to the server", 1, 1);
-    }
-
-    public static Group buildApachectlGroup() {
-        final List options = new ArrayList();
-        options.add(DefaultOptionTest.buildHelpOption());
-        options.add(ParentTest.buildKParent());
-
-        return new GroupImpl(options, "apachectl", "Controls the apache http deamon", 0,
-                             Integer.MAX_VALUE);
-    }
-
-    public static Group buildAntGroup() {
-        final List options = new ArrayList();
-        options.add(DefaultOptionTest.buildHelpOption());
-        options.add(ArgumentTest.buildTargetsArgument());
-
-        return new GroupImpl(options, "ant", "The options for ant", 0, Integer.MAX_VALUE);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.GroupTestCase#testProcessAnonymousArguments()
-     */
-    public void testProcessAnonymousArguments()
-        throws OptionException {
-        final Group option = buildAntGroup();
-        final List args = list("compile,test", "dist");
-        final ListIterator iterator = args.listIterator();
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption("target"));
-        assertListContentsEqual(commandLine.getValues("target"), args);
-        assertListContentsEqual(list("compile", "test", "dist"), args);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.GroupTestCase#testProcessOptions()
-     */
-    public void testProcessOptions()
-        throws OptionException {
-        final Group option = buildApachectlGroup();
-        final List args = list("-?", "-k");
-        final ListIterator iterator = args.listIterator();
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption("--help"));
-        assertTrue(commandLine.hasOption("-k"));
-        assertFalse(commandLine.hasOption("start"));
-        assertListContentsEqual(list("--help", "-k"), args);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Group option = buildApacheCommandGroup();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "start"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final Group option = buildApacheCommandGroup();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option, null), "begin"));
-    }
-
-    public void testCanProcess_NullMatch() {
-        final Group option = buildApacheCommandGroup();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option, null), (String) null));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Group option = buildApachectlGroup();
-        assertContentsEqual(list("-", "--"), option.getPrefixes());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess()
-        throws OptionException {
-        final Group option = buildAntGroup();
-        final List args = list("--help", "compile,test", "dist");
-        final ListIterator iterator = args.listIterator();
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption("-?"));
-        assertListContentsEqual(list("compile", "test", "dist"), commandLine.getValues("target"));
-    }
-
-    public void testProcess_Nested()
-        throws OptionException {
-        final Group option = buildApachectlGroup();
-        final List args = list("-h", "-k", "graceful");
-        final ListIterator iterator = args.listIterator();
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption("-?"));
-        assertTrue(commandLine.hasOption("-k"));
-        assertTrue(commandLine.hasOption("graceful"));
-        assertFalse(commandLine.hasOption("stop"));
-        assertTrue(commandLine.getValues("start").isEmpty());
-        assertListContentsEqual(list("--help", "-k", "graceful"), args);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Group option = buildApachectlGroup();
-        assertContentsEqual(list("--help", "-?", "-h", "-k"), option.getTriggers());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate()
-        throws OptionException {
-        final Group option = buildApacheCommandGroup();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addOption(COMMAND_RESTART);
-
-        option.validate(commandLine);
-    }
-
-    public void testValidate_UnexpectedOption() {
-        final Group option = buildApacheCommandGroup();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        commandLine.addOption(COMMAND_RESTART);
-        commandLine.addOption(COMMAND_GRACEFUL);
-
-        try {
-            option.validate(commandLine);
-            fail("Too many options");
-        } catch (OptionException uoe) {
-            assertEquals(option, uoe.getOption());
-        }
-    }
-
-    public void testValidate_MissingOption() {
-        final Group option = buildApacheCommandGroup();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        try {
-            option.validate(commandLine);
-            fail("Missing an option");
-        } catch (OptionException moe) {
-            assertEquals(option, moe.getOption());
-        }
-    }
-
-    public void testValidate_RequiredChild()
-        throws OptionException {
-        final Option required =
-            new DefaultOptionBuilder().withLongName("required").withRequired(true).create();
-        final Option optional =
-            new DefaultOptionBuilder().withLongName("optional").withRequired(false).create();
-        final Group group =
-            new GroupBuilder().withOption(required).withOption(optional).withMinimum(1).create();
-
-        WriteableCommandLine commandLine;
-
-        commandLine = commandLine(group, list());
-
-        try {
-            group.validate(commandLine);
-            fail("Missing option 'required'");
-        } catch (OptionException moe) {
-            assertEquals(required, moe.getOption());
-        }
-
-        commandLine = commandLine(group, list());
-        commandLine.addOption(optional);
-
-        try {
-            group.validate(commandLine);
-            fail("Missing option 'required'");
-        } catch (OptionException moe) {
-            assertEquals(required, moe.getOption());
-        }
-
-        commandLine = commandLine(group, list());
-        commandLine.addOption(required);
-        group.validate(commandLine);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildApacheCommandGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-
-        //settings.remove(DisplaySetting.DISPLAY_ARGUMENT_NUMBERED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("httpd-cmds (graceful|restart|start|stop)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoOptional() {
-        final Option option = buildApacheCommandGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_OPTIONAL);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("httpd-cmds (graceful|restart|start|stop)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoExpand() {
-        final Option option = buildApacheCommandGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("httpd-cmds", buffer.toString());
-    }
-
-    public void testAppendUsage_NoExpandOrName() {
-        final Option option = buildApacheCommandGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_NAME);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("httpd-cmds", buffer.toString());
-    }
-
-    public void testAppendUsage_NoName() {
-        final Option option = buildApacheCommandGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_NAME);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("graceful|restart|start|stop", buffer.toString());
-    }
-
-    public void testAppendUsage_WithArgs() {
-        final Option option = buildAntGroup();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_OUTER);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[ant (--help (-?,-h)) [<target1> [<target2> ...]]]", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildAntGroup();
-        assertEquals("ant", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildApachectlGroup();
-        assertEquals("Controls the apache http deamon", option.getDescription());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        final Option option = buildApacheCommandGroup();
-        final List lines = option.helpLines(0, DisplaySetting.ALL, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        final HelpLine line2 = (HelpLine) i.next();
-        assertEquals(1, line2.getIndent());
-        assertEquals(COMMAND_GRACEFUL, line2.getOption());
-
-        final HelpLine line3 = (HelpLine) i.next();
-        assertEquals(1, line3.getIndent());
-        assertEquals(COMMAND_RESTART, line3.getOption());
-
-        final HelpLine line4 = (HelpLine) i.next();
-        assertEquals(1, line4.getIndent());
-        assertEquals(COMMAND_START, line4.getOption());
-
-        final HelpLine line5 = (HelpLine) i.next();
-        assertEquals(1, line5.getIndent());
-        assertEquals(COMMAND_STOP, line5.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines_NoExpanded() {
-        final Option option = buildApacheCommandGroup();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-
-        final List lines = option.helpLines(0, settings, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines_NoName() {
-        final Option option = buildApacheCommandGroup();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_NAME);
-
-        final List lines = option.helpLines(0, settings, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line2 = (HelpLine) i.next();
-        assertEquals(1, line2.getIndent());
-        assertEquals(COMMAND_GRACEFUL, line2.getOption());
-
-        final HelpLine line3 = (HelpLine) i.next();
-        assertEquals(1, line3.getIndent());
-        assertEquals(COMMAND_RESTART, line3.getOption());
-
-        final HelpLine line4 = (HelpLine) i.next();
-        assertEquals(1, line4.getIndent());
-        assertEquals(COMMAND_START, line4.getOption());
-
-        final HelpLine line5 = (HelpLine) i.next();
-        assertEquals(1, line5.getIndent());
-        assertEquals(COMMAND_STOP, line5.getOption());
-
-        assertFalse(i.hasNext());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/GroupTestCase.java b/src/test/org/apache/commons/cli2/option/GroupTestCase.java
deleted file mode 100644
index 5df178c4..00000000
--- a/src/test/org/apache/commons/cli2/option/GroupTestCase.java
+++ /dev/null
@@ -1,30 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import org.apache.commons.cli2.OptionException;
-
-/**
- * @author Rob Oxspring
- */
-public abstract class GroupTestCase
-    extends OptionTestCase {
-    public abstract void testProcessOptions()
-        throws OptionException;
-
-    public abstract void testProcessAnonymousArguments()
-        throws OptionException;
-}
diff --git a/src/test/org/apache/commons/cli2/option/NestedGroupTest.java b/src/test/org/apache/commons/cli2/option/NestedGroupTest.java
deleted file mode 100644
index ebebe2d7..00000000
--- a/src/test/org/apache/commons/cli2/option/NestedGroupTest.java
+++ /dev/null
@@ -1,191 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import org.apache.commons.cli2.CLITestCase;
-import org.apache.commons.cli2.CommandLine;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.Parser;
-import org.apache.commons.cli2.util.HelpFormatter;
-
-import java.io.BufferedReader;
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.StringReader;
-import java.io.StringWriter;
-
-import java.util.ArrayList;
-import java.util.List;
-
-
-/**
- * Test to exercise nested groups developed to demonstrate bug 32533
- */
-public class NestedGroupTest extends CLITestCase {
-    final static DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
-    final static ArgumentBuilder abuilder = new ArgumentBuilder();
-    final static GroupBuilder gbuilder = new GroupBuilder();
-
-    static Group buildActionGroup() {
-        return gbuilder.withName("Action").withDescription("Action")
-                       .withMinimum(1).withMaximum(1)
-                       .withOption(obuilder.withId(5).withShortName("e")
-                                           .withLongName("encrypt")
-                                           .withDescription("Encrypt input")
-                                           .create())
-                       .withOption(obuilder.withId(6).withShortName("d")
-                                           .withLongName("decrypt")
-                                           .withDescription("Decrypt input")
-                                           .create()).create();
-    }
-
-    static Group buildAlgorithmGroup() {
-        return gbuilder.withName("Algorithm")
-                       .withDescription("Encryption Algorithm").withMaximum(1)
-                       .withOption(obuilder.withId(0).withShortName("b")
-                                           .withLongName("blowfish")
-                                           .withDescription("Blowfish").create())
-                       .withOption(obuilder.withId(1).withShortName("3")
-                                           .withLongName("3DES")
-                                           .withDescription("Triple DES")
-                                           .create()).create();
-    }
-
-    static Group buildInputGroup() {
-        return gbuilder.withName("Input").withDescription("Input").withMinimum(1)
-                       .withMaximum(1)
-                       .withOption(obuilder.withId(2).withShortName("f")
-                                           .withLongName("file")
-                                           .withDescription("Input file")
-                                           .withArgument(abuilder.withName(
-                    "file").withMinimum(1).withMaximum(1).create()).create())
-                       .withOption(obuilder.withId(3).withShortName("s")
-                                           .withLongName("string")
-                                           .withDescription("Input string")
-                                           .withArgument(abuilder.withName(
-                    "string").withMinimum(1).withMaximum(1).create()).create())
-                       .create();
-    }
-
-    static Group buildEncryptionServiceGroup(Group[] nestedGroups) {
-        gbuilder.withName("encryptionService")
-                .withOption(obuilder.withId(4).withShortName("h")
-                                    .withLongName("help")
-                                    .withDescription("Print this message")
-                                    .create()).withOption(obuilder.withShortName(
-                "k").withLongName("key").withDescription("Encryption key")
-                                                                  .create());
-
-        for (int i = 0; i < nestedGroups.length; i++) {
-            gbuilder.withOption(nestedGroups[i]);
-        }
-
-        return gbuilder.create();
-    }
-
-    public void testNestedGroup()
-        throws OptionException {
-        final String[] args = {
-                "-eb",
-                "--file",
-                "/tmp/filename.txt"
-            };
-
-        Group[] nestedGroups = {
-                buildActionGroup(),
-                buildAlgorithmGroup(),
-                buildInputGroup()
-            };
-
-        Parser parser = new Parser();
-        parser.setGroup(buildEncryptionServiceGroup(nestedGroups));
-
-        CommandLine commandLine = parser.parse(args);
-
-        assertTrue("/tmp/filename.txt".equals(commandLine.getValue("-f")));
-        assertTrue(commandLine.hasOption("-e"));
-        assertTrue(commandLine.hasOption("-b"));
-        assertFalse(commandLine.hasOption("-d"));
-    }
-
-    public void testNestedGroupHelp() {
-        Group[] nestedGroups = {
-                buildActionGroup(),
-                buildAlgorithmGroup(),
-                buildInputGroup()
-            };
-
-        HelpFormatter helpFormatter = new HelpFormatter();
-        helpFormatter.setGroup(buildEncryptionServiceGroup(nestedGroups));
-
-        final StringWriter out = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(out));
-
-        try {
-            helpFormatter.print();
-
-            final BufferedReader bufferedReader = new BufferedReader(new StringReader(
-                        out.toString()));
-            final String[] expected = new String[] {
-                    "Usage:                                                                          ",
-                    " [-h -k -e|-d -b|-3 -f <file>|-s <string>]                                      ",
-                    "encryptionService                                                               ",
-                    "  -h (--help)               Print this message                                  ",
-                    "  -k (--key)                Encryption key                                      ",
-                    "  Action                    Action                                              ",
-                    "    -e (--encrypt)          Encrypt input                                       ",
-                    "    -d (--decrypt)          Decrypt input                                       ",
-                    "  Algorithm                 Encryption Algorithm                                ",
-                    "    -b (--blowfish)         Blowfish                                            ",
-                    "    -3 (--3DES)             Triple DES                                          ",
-                    "  Input                     Input                                               ",
-                    "    -f (--file) file        Input file                                          ",
-                    "    -s (--string) string    Input string                                        "
-                };
-
-            List actual = new ArrayList(expected.length);
-            String input;
-
-            while ((input = bufferedReader.readLine()) != null) {
-                actual.add(input);
-            }
-
-            // Show they are the same number of lines
-            assertEquals("Help text lines should be " + expected.length,
-                actual.size(), expected.length);
-
-            for (int i = 0; i < expected.length; i++) {
-                if (!expected[i].equals(actual.get(i))) {
-                    for (int x = 0; x < expected.length; i++) {
-                        System.out.println("   " + expected[i]);
-                        System.out.println((expected[i].equals(actual.get(i))
-                            ? "== "
-                            : "!= ") + actual.get(i));
-                    }
-                }
-
-                assertEquals(expected[i], actual.get(i));
-            }
-        }
-        catch (IOException e) {
-            fail(e.getLocalizedMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/OptionTestCase.java b/src/test/org/apache/commons/cli2/option/OptionTestCase.java
deleted file mode 100644
index 55724b53..00000000
--- a/src/test/org/apache/commons/cli2/option/OptionTestCase.java
+++ /dev/null
@@ -1,54 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.List;
-
-import org.apache.commons.cli2.CLITestCase;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-
-/**
- * @author Rob Oxspring
- */
-public abstract class OptionTestCase extends CLITestCase {
-
-    public static WriteableCommandLine commandLine(
-        final Option option,
-        final List args) {
-        return new WriteableCommandLineImpl(option, args);
-    }
-
-    public abstract void testTriggers();
-
-    public abstract void testPrefixes();
-
-    public abstract void testCanProcess();
-
-    public abstract void testProcess() throws OptionException;
-
-    public abstract void testValidate() throws OptionException;
-
-    public abstract void testAppendUsage() throws OptionException;
-
-    public abstract void testGetPreferredName();
-
-    public abstract void testGetDescription();
-
-    public abstract void testHelpLines();
-}
diff --git a/src/test/org/apache/commons/cli2/option/ParentTest.java b/src/test/org/apache/commons/cli2/option/ParentTest.java
deleted file mode 100644
index a25d9f14..00000000
--- a/src/test/org/apache/commons/cli2/option/ParentTest.java
+++ /dev/null
@@ -1,418 +0,0 @@
-/**
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.Argument;
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.Parent;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.builder.ArgumentBuilder;
-import org.apache.commons.cli2.builder.CommandBuilder;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * @author Rob Oxspring
- */
-public class ParentTest
-    extends ParentTestCase {
-    public static final Argument COMPLEX_ARGUMENT =
-        new ArgumentBuilder().withName("username").withMinimum(1).withMaximum(1).create();
-    public static final Option COMPLEX_CHILD_SSL =
-        new DefaultOptionBuilder().withLongName("ssl").withShortName("s").create();
-    public static final Option COMPLEX_CHILD_BASIC =
-        new DefaultOptionBuilder().withLongName("basic").withShortName("b").create();
-    public static final Option COMPLEX_CHILD_DIGEST =
-        new DefaultOptionBuilder().withLongName("digest").withShortName("d").create();
-    public static final Group COMPLEX_CHILDREN =
-        new GroupBuilder().withName("login-opts").withOption(COMPLEX_CHILD_BASIC)
-                          .withOption(COMPLEX_CHILD_DIGEST).withOption(COMPLEX_CHILD_SSL).create();
-
-    public static Parent buildLibParent() {
-        final Argument argument = ArgumentTest.buildPathArgument();
-
-        return new DefaultOption("-", "--", false, "--lib", "Specifies library search path", null,
-                                 null, false, argument, null, 'l');
-    }
-
-    public static Parent buildKParent() {
-        final Group children = GroupTest.buildApacheCommandGroup();
-
-        return new DefaultOption("-", "--", false, "-k", "desc", null, null, false, null, children,
-                                 'k');
-    }
-
-    public static Parent buildComplexParent() {
-        return new CommandBuilder().withName("login").withName("lo").withName("l")
-                                   .withArgument(COMPLEX_ARGUMENT).withChildren(COMPLEX_CHILDREN)
-                                   .create();
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.ParentTestCase#testProcessParent()
-     */
-    public void testProcessParent()
-        throws OptionException {
-        final Parent option = buildKParent();
-        final List args = list("-k", "start");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertEquals("start", iterator.next());
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("-k"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Parent option = buildKParent();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "-k"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final Parent option = buildKParent();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option, null), "-K"));
-    }
-
-    public void testCanProcess_ContractedArgument() {
-        final Parent option = buildLibParent();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "--lib=/usr/lib"));
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Parent option = buildKParent();
-        assertContentsEqual(list("-", "--"), option.getPrefixes());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess()
-        throws OptionException {
-        final Parent option = CommandTest.buildStartCommand();
-        final List args = list("start");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("start"));
-        assertFalse(commandLine.hasOption("stop"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcess_NoMatch()
-        throws OptionException {
-        final Parent option = CommandTest.buildStartCommand();
-        final List args = list("whatever");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.process(commandLine, iterator);
-            fail("unexpected token not thrown");
-        } catch (OptionException exp) {
-            OptionException e =
-                new OptionException(option, ResourceConstants.UNEXPECTED_TOKEN, "whatever");
-            assertEquals("wrong exception message", e.getMessage(), exp.getMessage());
-        }
-    }
-
-    public void testProcess_Children()
-        throws OptionException {
-        final Parent option = buildKParent();
-        final List args = list("-k", "start");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertNull(option.findOption("whatever"));
-        assertNotNull(option.findOption("start"));
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("-k"));
-        assertTrue(commandLine.hasOption("start"));
-        assertFalse(commandLine.hasOption("stop"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcess_Argument()
-        throws OptionException {
-        final Parent option = buildLibParent();
-        final List args = list("--lib=C:\\WINDOWS;C:\\WINNT;C:\\");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("--lib"));
-        assertContentsEqual(list("C:\\WINDOWS", "C:\\WINNT", "C:\\"), commandLine.getValues(option));
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Parent option = buildKParent();
-        assertContentsEqual(list("-k"), option.getTriggers());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate()
-        throws OptionException {
-        final Parent option = CommandTest.buildStartCommand();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        option.validate(commandLine);
-
-        commandLine.addOption(option);
-
-        option.validate(commandLine);
-    }
-
-    public void testValidate_Children()
-        throws OptionException {
-        final Parent option = buildKParent();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        option.validate(commandLine);
-        commandLine.addOption(option);
-
-        try {
-            option.validate(commandLine);
-            fail("Missing a command");
-        } catch (OptionException moe) {
-            assertNotNull(moe.getOption());
-            assertNotSame(option, moe.getOption());
-        }
-    }
-
-    public void testValidate_Argument()
-        throws OptionException {
-        final Command option = CommandTest.buildLoginCommand();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        option.validate(commandLine);
-
-        commandLine.addOption(option);
-
-        try {
-            option.validate(commandLine);
-            fail("Missing a value");
-        } catch (OptionException moe) {
-            assertSame(option, moe.getOption());
-        }
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildComplexParent();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_OUTER);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[login (l,lo) <username> [login-opts (--basic (-b)|--digest (-d)|--ssl (-s))]]",
-                     buffer.toString());
-    }
-
-    public void testAppendUsage_NoArguments() {
-        final Option option = buildComplexParent();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        settings.remove(DisplaySetting.DISPLAY_GROUP_OUTER);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[login (l,lo) [login-opts (--basic (-b)|--digest (-d)|--ssl (-s))]]",
-                     buffer.toString());
-    }
-
-    public void testAppendUsage_NoChildren() {
-        final Option option = buildComplexParent();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[login (l,lo) <username>]", buffer.toString());
-    }
-
-    public void testAppendUsage_NoArgumentsOrChildren() {
-        final Option option = buildComplexParent();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("[login (l,lo)]", buffer.toString());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildLibParent();
-        assertEquals("--lib", option.getPreferredName());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildLibParent();
-        assertEquals("Specifies library search path", option.getDescription());
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        final Option option = buildComplexParent();
-        final List lines = option.helpLines(0, DisplaySetting.ALL, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        final HelpLine line2 = (HelpLine) i.next();
-        assertEquals(1, line2.getIndent());
-        assertEquals(COMPLEX_ARGUMENT, line2.getOption());
-
-        final HelpLine line3 = (HelpLine) i.next();
-        assertEquals(1, line3.getIndent());
-        assertEquals(COMPLEX_CHILDREN, line3.getOption());
-
-        final HelpLine line4 = (HelpLine) i.next();
-        assertEquals(2, line4.getIndent());
-        assertEquals(COMPLEX_CHILD_BASIC, line4.getOption());
-
-        final HelpLine line5 = (HelpLine) i.next();
-        assertEquals(2, line5.getIndent());
-        assertEquals(COMPLEX_CHILD_DIGEST, line5.getOption());
-
-        final HelpLine line6 = (HelpLine) i.next();
-        assertEquals(2, line6.getIndent());
-        assertEquals(COMPLEX_CHILD_SSL, line6.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    public void testHelpLines_NoArgument() {
-        final Option option = buildComplexParent();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-
-        final List lines = option.helpLines(0, settings, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        final HelpLine line3 = (HelpLine) i.next();
-        assertEquals(1, line3.getIndent());
-        assertEquals(COMPLEX_CHILDREN, line3.getOption());
-
-        final HelpLine line4 = (HelpLine) i.next();
-        assertEquals(2, line4.getIndent());
-        assertEquals(COMPLEX_CHILD_BASIC, line4.getOption());
-
-        final HelpLine line5 = (HelpLine) i.next();
-        assertEquals(2, line5.getIndent());
-        assertEquals(COMPLEX_CHILD_DIGEST, line5.getOption());
-
-        final HelpLine line6 = (HelpLine) i.next();
-        assertEquals(2, line6.getIndent());
-        assertEquals(COMPLEX_CHILD_SSL, line6.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    public void testHelpLines_NoChildren() {
-        final Option option = buildComplexParent();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-
-        final List lines = option.helpLines(0, settings, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine) i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        final HelpLine line2 = (HelpLine) i.next();
-        assertEquals(1, line2.getIndent());
-        assertEquals(COMPLEX_ARGUMENT, line2.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    public void testNullPreferredName() {
-        try {
-        	new CommandBuilder().create();
-        } catch (IllegalStateException exp) {
-        	assertEquals(ResourceHelper.getResourceHelper().getMessage(ResourceConstants.OPTION_NO_NAME), exp.getMessage());
-        }
-    }
-
-    public void testRequired() {
-    	Command cmd = new CommandBuilder().withRequired(true).withName("blah").create();
-    	assertTrue("cmd is not required", cmd.isRequired());
-    	assertEquals("id is incorrect", 0, cmd.getId());
-    }
-
-    public void testID() {
-    	Command cmd = new CommandBuilder().withId('c').withName("blah").create();
-    	assertEquals("id is incorrect", 'c', cmd.getId());
-    }
-
-    public void testGetId() {
-        assertEquals('h', DefaultOptionTest.buildHelpOption().getId());
-        assertEquals('X', DefaultOptionTest.buildXOption().getId());
-        assertEquals(0, CommandTest.buildStartCommand().getId());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/ParentTestCase.java b/src/test/org/apache/commons/cli2/option/ParentTestCase.java
deleted file mode 100644
index 5851c25c..00000000
--- a/src/test/org/apache/commons/cli2/option/ParentTestCase.java
+++ /dev/null
@@ -1,25 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import org.apache.commons.cli2.OptionException;
-
-/**
- * @author Rob Oxspring
- */
-public abstract class ParentTestCase extends OptionTestCase {
-    public abstract void testProcessParent() throws OptionException;
-}
diff --git a/src/test/org/apache/commons/cli2/option/PropertyOptionTest.java b/src/test/org/apache/commons/cli2/option/PropertyOptionTest.java
deleted file mode 100644
index 1d020f58..00000000
--- a/src/test/org/apache/commons/cli2/option/PropertyOptionTest.java
+++ /dev/null
@@ -1,232 +0,0 @@
-/**
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.HelpLine;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-
-/**
- * @author Rob Oxspring
- */
-public class PropertyOptionTest extends OptionTestCase {
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Option option = new PropertyOption();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option,null), "-Dmyprop=myval"));
-    }
-
-    public void testCanProcess_Null() {
-        final Option option = new PropertyOption();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option,null), (String) null));
-    }
-
-    public void testCanProcess_TooShort() {
-        final Option option = new PropertyOption();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option,null), "-D"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final Option option = new PropertyOption();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option,null),"-dump"));
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Option option = new PropertyOption();
-        assertContentsEqual(list("-D"), option.getPrefixes());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess() throws OptionException {
-        final Option option = new PropertyOption();
-        final List args = list("-Dmyprop=myvalue");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        option.process(commandLine, iterator);
-        assertEquals("myvalue", commandLine.getProperty("myprop"));
-        assertFalse(iterator.hasNext());
-        assertEquals(1, commandLine.getProperties().size());
-    }
-
-    public void testProcess_UnexpectedOptionException() {
-        final Option option = new PropertyOption();
-        final List args = list("--help");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        try {
-            option.process(commandLine, iterator);
-            fail("UnexpectedOption");
-        }
-        catch (final OptionException uoe) {
-            assertEquals(option, uoe.getOption());
-            assertEquals(
-                "Unexpected --help while processing -Dproperty=value",
-                uoe.getMessage());
-        }
-    }
-
-    public void testProcess_BadPropertyException() throws OptionException {
-        final Option option = new PropertyOption();
-        final List args = list("-Dmyprop");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        option.process(commandLine, iterator);
-
-        assertEquals("true", commandLine.getProperty("myprop"));
-    }
-
-    public void testProcess_SetToEmpty() throws OptionException {
-        final Option option = new PropertyOption();
-        final List args = list("-Dmyprop=");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        option.process(commandLine, iterator);
-        assertEquals("", commandLine.getProperty("myprop"));
-        assertFalse(iterator.hasNext());
-        assertEquals(1, commandLine.getProperties().size());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Option option = new PropertyOption();
-
-        assertContentsEqual(list("-D"), option.getTriggers());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate() throws OptionException {
-        final Option option = new PropertyOption();
-        final List args = list("-Dproperty=value");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-
-        option.process(commandLine, iterator);
-
-        option.validate(commandLine);
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = new PropertyOption();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("-D<property>=<value>", buffer.toString());
-    }
-
-    public void testAppendUsage_Hidden() {
-        final Option option = new PropertyOption();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PROPERTY_OPTION);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = new PropertyOption();
-        assertEquals("-D", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = new PropertyOption();
-        assertEquals(
-            "Passes properties and values to the application",
-            option.getDescription());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        final Option option = new PropertyOption();
-        final List lines = option.helpLines(0, DisplaySetting.ALL, null);
-        final Iterator i = lines.iterator();
-
-        final HelpLine line1 = (HelpLine)i.next();
-        assertEquals(0, line1.getIndent());
-        assertEquals(option, line1.getOption());
-
-        assertFalse(i.hasNext());
-    }
-
-    /*
-     * (non-Javadoc)
-     * 
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines_NoDisplay() {
-        final Option option = new PropertyOption();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_PROPERTY_OPTION);
-        final List lines = option.helpLines(0, settings, null);
-        final Iterator i = lines.iterator();
-
-        assertFalse(i.hasNext());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/option/SwitchTest.java b/src/test/org/apache/commons/cli2/option/SwitchTest.java
deleted file mode 100644
index ea5e38e4..00000000
--- a/src/test/org/apache/commons/cli2/option/SwitchTest.java
+++ /dev/null
@@ -1,307 +0,0 @@
-/**
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.option;
-
-import java.util.HashSet;
-import java.util.List;
-import java.util.ListIterator;
-import java.util.Set;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.Parent;
-import org.apache.commons.cli2.WriteableCommandLine;
-import org.apache.commons.cli2.commandline.WriteableCommandLineImpl;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * @author Rob Oxspring
- *
- * To change the template for this generated type comment go to
- * Window>Preferences>Java>Code Generation>Code and Comments
- */
-public class SwitchTest
-    extends ParentTestCase {
-    public static Switch buildDisplaySwitch() {
-        final Set aliases = new HashSet();
-        aliases.add("d");
-        aliases.add("disp");
-
-        return new Switch("+", "-", "display", aliases, "Sets whether to display to screen", true,
-                          null, null, 'd', null);
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.ParentTestCase#testProcessParent()
-     */
-    public void testProcessParent()
-        throws OptionException {
-        final Switch option = buildDisplaySwitch();
-        final List args = list("+d");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.processParent(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("+d"));
-        assertTrue(commandLine.hasOption("-display"));
-        assertEquals(Boolean.TRUE, commandLine.getSwitch("-d"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    public void testProcessParent_Disabled()
-        throws OptionException {
-        final Switch option = buildDisplaySwitch();
-        final List args = list("-disp");
-        final WriteableCommandLine commandLine = commandLine(option, args);
-        final ListIterator iterator = args.listIterator();
-        option.process(commandLine, iterator);
-
-        assertFalse(iterator.hasNext());
-        assertTrue(commandLine.hasOption(option));
-        assertTrue(commandLine.hasOption("+d"));
-        assertTrue(commandLine.hasOption("-display"));
-        assertEquals(Boolean.FALSE, commandLine.getSwitch("-d"));
-        assertTrue(commandLine.getValues(option).isEmpty());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testCanProcess()
-     */
-    public void testCanProcess() {
-        final Switch option = buildDisplaySwitch();
-        assertTrue(option.canProcess(new WriteableCommandLineImpl(option, null), "+d"));
-    }
-
-    public void testCanProcess_BadMatch() {
-        final Switch option = buildDisplaySwitch();
-        assertFalse(option.canProcess(new WriteableCommandLineImpl(option, null), "-dont"));
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testPrefixes()
-     */
-    public void testPrefixes() {
-        final Switch option = buildDisplaySwitch();
-        assertContentsEqual(list("-", "+"), option.getPrefixes());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testProcess()
-     */
-    public void testProcess() {
-        // TODO Auto-generated method stub
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testTriggers()
-     */
-    public void testTriggers() {
-        final Switch option = buildDisplaySwitch();
-        assertContentsEqual(list("-d", "+d", "-disp", "+disp", "+display", "-display"),
-                            option.getTriggers());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testValidate()
-     */
-    public void testValidate() {
-        final Parent option = buildDisplaySwitch();
-        final WriteableCommandLine commandLine = commandLine(option, list());
-
-        try {
-            option.validate(commandLine);
-            fail("Missing an option");
-        } catch (OptionException moe) {
-            assertSame(option, moe.getOption());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testAppendUsage()
-     */
-    public void testAppendUsage() {
-        final Option option = buildDisplaySwitch();
-        final StringBuffer buffer = new StringBuffer();
-        option.appendUsage(buffer, DisplaySetting.ALL, null);
-
-        assertEquals("+display|-display (+d|-d,+disp|-disp)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoAlias() {
-        final Option option = buildDisplaySwitch();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_ALIASES);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("+display|-display", buffer.toString());
-    }
-
-    public void testAppendUsage_NoDisabled() {
-        final Option option = buildDisplaySwitch();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_SWITCH_DISABLED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("+display (+d,+disp)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoEnabled() {
-        final Option option = buildDisplaySwitch();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_SWITCH_ENABLED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("-display (-d,-disp)", buffer.toString());
-    }
-
-    public void testAppendUsage_NoDisabledOrEnabled() {
-        final Option option = buildDisplaySwitch();
-        final StringBuffer buffer = new StringBuffer();
-        final Set settings = new HashSet(DisplaySetting.ALL);
-        settings.remove(DisplaySetting.DISPLAY_SWITCH_DISABLED);
-        settings.remove(DisplaySetting.DISPLAY_SWITCH_ENABLED);
-        option.appendUsage(buffer, settings, null);
-
-        assertEquals("+display (+d,+disp)", buffer.toString());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetPreferredName()
-     */
-    public void testGetPreferredName() {
-        final Option option = buildDisplaySwitch();
-        assertEquals("+display", option.getPreferredName());
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testGetDescription()
-     */
-    public void testGetDescription() {
-        final Option option = buildDisplaySwitch();
-        assertEquals("Sets whether to display to screen", option.getDescription());
-    }
-
-    public void testNullPreferredName() {
-        try {
-            new Switch("+", "-", null, null, "Sets whether to display to screen", true, null, null,
-                       'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_PREFERRED_NAME_TOO_SHORT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testEmptyPreferredName() {
-        try {
-            new Switch("+", "-", "", null, "Sets whether to display to screen", true, null, null,
-                       'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_PREFERRED_NAME_TOO_SHORT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testNullAliases() {
-        try {
-            new Switch("+", "-", "display", null, "Sets whether to display to screen", true, null,
-                       null, 'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_PREFERRED_NAME_TOO_SHORT),
-                         exp.getMessage());
-        }
-    }
-
-    public void testNullEnablePrefix() {
-        try {
-            new Switch(null, "-", "display", null, "Sets whether to display to screen", true, null,
-                       null, 'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_NO_ENABLED_PREFIX),
-                         exp.getMessage());
-        }
-    }
-
-    public void testNullDisablePrefix() {
-        try {
-            new Switch("+", null, "display", null, "Sets whether to display to screen", true, null,
-                       null, 'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_NO_DISABLED_PREFIX),
-                         exp.getMessage());
-        }
-    }
-
-    public void testEnabledPrefixStartsWithDisabledPrefix() {
-        try {
-            new Switch("-", "-", "display", null, "Sets whether to display to screen", true, null,
-                       null, 'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_ENABLED_STARTS_WITH_DISABLED),
-                         exp.getMessage());
-        }
-    }
-
-    public void testDisabledPrefixStartsWithEnabledPrefix() {
-        try {
-            new Switch("o", "on", "display", null, "Sets whether to display to screen", true, null,
-                       null, 'd', null);
-        } catch (IllegalArgumentException exp) {
-            assertEquals("wrong exception message",
-                         ResourceHelper.getResourceHelper().getMessage(ResourceConstants.SWITCH_DISABLED_STARTWS_WITH_ENABLED),
-                         exp.getMessage());
-        }
-    }
-
-    /*
-     * (non-Javadoc)
-     *
-     * @see org.apache.commons.cli2.OptionTestCase#testHelpLines()
-     */
-    public void testHelpLines() {
-        // TODO Auto-generated method stub
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/resource/ResourceHelperTest.java b/src/test/org/apache/commons/cli2/resource/ResourceHelperTest.java
deleted file mode 100644
index 00d4fd57..00000000
--- a/src/test/org/apache/commons/cli2/resource/ResourceHelperTest.java
+++ /dev/null
@@ -1,81 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.resource;
-
-import java.util.Locale;
-import java.util.MissingResourceException;
-import java.util.ResourceBundle;
-
-import junit.framework.TestCase;
-
-/**
- * A utility class used to provide internationalisation support.
- *
- * @author John Keyes
- */
-public class ResourceHelperTest extends TestCase {
-    /** system property */
-    private static final String PROP_LOCALE = "org.apache.commons.cli2.resource.bundle";
-
-    private static ResourceHelper helper;
-
-    /** resource bundle */
-    private ResourceBundle bundle;
-
-    public void setUp() {
-    	System.setProperty(PROP_LOCALE, "org.apache.commons.cli2.resource.TestBundle");
-    	helper = ResourceHelper.getResourceHelper();
-    }
-    
-    public void tearDown() {
-    	System.setProperty(PROP_LOCALE, "org.apache.commons.cli2.resource.CLIMessageBundle_en_US.properties");
-    }
-    
-    /**
-     * Create a new ResourceHelper for the specified class.
-     *
-     * @param clazz the Class that requires some resources
-     */
-    public ResourceHelperTest() {
-    	super("ResourceHelperTest");
-    }
-    
-    public void testOverridden() {
-    	assertEquals("wrong message", "The class name \"ResourceHelper\" is invalid.", helper.getMessage("ClassValidator.bad.classname", "ResourceHelper"));
-    }
-    
-    public void testNewMessage1Param() {
-    	assertEquals("wrong message", "Some might say we will find a brighter day.", helper.getMessage("test.message"));
-    }
-
-    public void testNewMessage2Params() {
-    	assertEquals("wrong message", "Some might say we will find a brighter day.", helper.getMessage("test.message", "Some"));
-    }
-
-    public void testNewMessage3Params() {
-    	assertEquals("wrong message", "Some might say we will find a brighter day.", helper.getMessage("test.message", "Some", "might"));
-    }
-
-    public void testNewMessage4Params() {
-    	assertEquals("wrong message", "Some might say we will find a brighter day.", helper.getMessage("test.message", "Some", "might", "say"));
-    }
-
-    public void testDefaultBundle() {
-    	System.setProperty(PROP_LOCALE, "madeupname.properties");
-    	helper = ResourceHelper.getResourceHelper();
-    	assertEquals("wrong message", "The class name \"ResourceHelper\" is invalid.", helper.getMessage("ClassValidator.bad.classname", "ResourceHelper"));
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/resource/TestBundle.properties b/src/test/org/apache/commons/cli2/resource/TestBundle.properties
deleted file mode 100644
index 3ae6d180..00000000
--- a/src/test/org/apache/commons/cli2/resource/TestBundle.properties
+++ /dev/null
@@ -1,10 +0,0 @@
-ClassValidator.bad.classname = The class name "{0}" is invalid.
-
-test.message = Some might say we will find a brighter day.
-
-test.message1 = {0} might say we will find a brighter day.
-
-test.message2 = {0} {1} say we will find a brighter day.
-
-test.message3 = {0} {1} {2} we will find a brighter day.
-
diff --git a/src/test/org/apache/commons/cli2/util/ComparatorsTest.java b/src/test/org/apache/commons/cli2/util/ComparatorsTest.java
deleted file mode 100644
index c631da44..00000000
--- a/src/test/org/apache/commons/cli2/util/ComparatorsTest.java
+++ /dev/null
@@ -1,220 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.util;
-
-import java.util.Collections;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.CLITestCase;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.option.CommandTest;
-import org.apache.commons.cli2.option.DefaultOptionTest;
-import org.apache.commons.cli2.option.GroupTest;
-import org.apache.commons.cli2.option.ParentTest;
-import org.apache.commons.cli2.option.SwitchTest;
-
-/**
- * @author Rob Oxspring
- */
-public class ComparatorsTest extends TestCase {
-    public void testGroupFirst() {
-        final Option o1 = GroupTest.buildAntGroup();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.groupFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testGroupLast() {
-        final Option o1 = GroupTest.buildAntGroup();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.groupLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testSwitchFirst() {
-        final Option o1 = SwitchTest.buildDisplaySwitch();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.switchFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testSwitchLast() {
-        final Option o1 = SwitchTest.buildDisplaySwitch();
-        final Option o2 = ParentTest.buildLibParent();
-        //final Option o3 = new SwitchBuilder().withName("hidden").create();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.switchLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testCommandFirst() {
-        final Option o1 = CommandTest.buildCommitCommand();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.commandFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testCommandLast() {
-        final Option o1 = CommandTest.buildCommitCommand();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.commandLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testDefaultOptionFirst() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = CommandTest.buildCommitCommand();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.defaultOptionFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testDefaultOptionLast() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = CommandTest.buildCommitCommand();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.defaultOptionLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testNamedFirst() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.namedFirst("--help"));
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testNamedLast() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.namedLast("--help"));
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testPreferredNameFirst() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.preferredNameFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-
-    public void testPreferredNameLast() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = ParentTest.buildLibParent();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.preferredNameLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testRequiredFirst() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = DefaultOptionTest.buildXOption();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.requiredFirst());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o2, o1),
-            list);
-    }
-
-    public void testRequiredLast() {
-        final Option o1 = DefaultOptionTest.buildHelpOption();
-        final Option o2 = DefaultOptionTest.buildXOption();
-        final List list = CLITestCase.list(o1, o2);
-
-        Collections.sort(list, Comparators.requiredLast());
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o1, o2),
-            list);
-    }
-    
-    public void testChained() {
-        final Option o1 = CommandTest.buildCommitCommand();
-        final Option o2 = SwitchTest.buildDisplaySwitch();
-        final Option o3 = DefaultOptionTest.buildHelpOption();
-        final List list = CLITestCase.list(o1, o2, o3);
-        
-        Collections.sort(
-            list, 
-            Comparators.chain(
-                Comparators.namedFirst("--help"),
-                Comparators.commandFirst()));
-
-        CLITestCase.assertListContentsEqual(
-            CLITestCase.list(o3, o1, o2),
-            list);
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/util/HelpFormatterTest.java b/src/test/org/apache/commons/cli2/util/HelpFormatterTest.java
deleted file mode 100644
index 72ea1410..00000000
--- a/src/test/org/apache/commons/cli2/util/HelpFormatterTest.java
+++ /dev/null
@@ -1,542 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.util;
-
-import java.io.BufferedReader;
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.StringReader;
-import java.io.StringWriter;
-
-import java.util.Collections;
-import java.util.Comparator;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.DisplaySetting;
-import org.apache.commons.cli2.Group;
-import org.apache.commons.cli2.Option;
-import org.apache.commons.cli2.OptionException;
-import org.apache.commons.cli2.builder.DefaultOptionBuilder;
-import org.apache.commons.cli2.builder.GroupBuilder;
-import org.apache.commons.cli2.option.ArgumentTest;
-import org.apache.commons.cli2.option.DefaultOptionTest;
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public class HelpFormatterTest
-    extends TestCase {
-    private ResourceHelper resources = ResourceHelper.getResourceHelper();
-    private HelpFormatter helpFormatter;
-    private Option verbose;
-    private Group options;
-
-    public void setUp() {
-        helpFormatter = new HelpFormatter("|*", "*-*", "*|", 80);
-        helpFormatter.setDivider("+------------------------------------------------------------------------------+");
-        helpFormatter.setHeader("Jakarta Commons CLI");
-        helpFormatter.setFooter("Copyright 2003\nApache Software Foundation");
-        helpFormatter.setShellCommand("ant");
-
-        verbose =
-            new DefaultOptionBuilder().withLongName("verbose")
-                                      .withDescription("print the version information and exit")
-                                      .create();
-
-        options =
-            new GroupBuilder().withName("options").withOption(DefaultOptionTest.buildHelpOption())
-                              .withOption(ArgumentTest.buildTargetsArgument())
-                              .withOption(new DefaultOptionBuilder().withLongName("diagnostics")
-                                                                    .withDescription("print information that might be helpful to diagnose or report problems.")
-                                                                    .create())
-                              .withOption(new DefaultOptionBuilder().withLongName("projecthelp")
-                                                                    .withDescription("print project help information")
-                                                                    .create()).withOption(verbose)
-                              .create();
-
-        helpFormatter.setGroup(options);
-    }
-
-    public void testPrint()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        final PrintWriter pw = new PrintWriter(writer);
-        helpFormatter.setPrintWriter(pw);
-        helpFormatter.print();
-
-        // test shell
-        assertEquals("incorrect shell command", "ant", helpFormatter.getShellCommand());
-
-        // test group
-        assertEquals("incorrect group", this.options, helpFormatter.getGroup());
-
-        // test pagewidth
-        assertEquals("incorrect page width", 76, helpFormatter.getPageWidth());
-
-        // test pw
-        assertEquals("incorrect print writer", pw, helpFormatter.getPrintWriter());
-
-        // test divider
-        assertEquals("incorrect divider",
-                     "+------------------------------------------------------------------------------+",
-                     helpFormatter.getDivider());
-
-        // test header
-        assertEquals("incorrect header", "Jakarta Commons CLI", helpFormatter.getHeader());
-
-        // test footer
-        assertEquals("incorrect footer", "Copyright 2003\nApache Software Foundation",
-                     helpFormatter.getFooter());
-
-        // test gutters
-        assertEquals("incorrect left gutter", "|*", helpFormatter.getGutterLeft());
-        assertEquals("incorrect right gutter", "*|", helpFormatter.getGutterRight());
-        assertEquals("incorrect center gutter", "*-*", helpFormatter.getGutterCenter());
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Jakarta Commons CLI                                                         *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Usage:                                                                      *|",
-                     reader.readLine());
-        assertEquals("|*ant [--help --diagnostics --projecthelp --verbose] [<target1> [<target2>    *|",
-                     reader.readLine());
-        assertEquals("|*...]]                                                                       *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*options              *-*                                                    *|",
-                     reader.readLine());
-        assertEquals("|*  --help (-?,-h)     *-*Displays the help                                   *|",
-                     reader.readLine());
-        assertEquals("|*  --diagnostics      *-*print information that might be helpful to diagnose *|",
-                     reader.readLine());
-        assertEquals("|*                     *-*or report problems.                                 *|",
-                     reader.readLine());
-        assertEquals("|*  --projecthelp      *-*print project help information                      *|",
-                     reader.readLine());
-        assertEquals("|*  --verbose          *-*print the version information and exit              *|",
-                     reader.readLine());
-        assertEquals("|*  target [target ...]*-*The targets ant should build                        *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Copyright 2003                                                              *|",
-                     reader.readLine());
-        assertEquals("|*Apache Software Foundation                                                  *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testComparator()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        final PrintWriter pw = new PrintWriter(writer);
-        helpFormatter.setPrintWriter(pw);
-
-        final Comparator comparator = new OptionComparator();
-        helpFormatter.setComparator(comparator);
-        helpFormatter.print();
-
-        // test comparator
-        assertEquals("invalid comparator", comparator, helpFormatter.getComparator());
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Jakarta Commons CLI                                                         *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Usage:                                                                      *|",
-                     reader.readLine());
-        assertEquals("|*ant [--verbose --projecthelp --help --diagnostics] [<target1> [<target2>    *|",
-                     reader.readLine());
-        assertEquals("|*...]]                                                                       *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*options              *-*                                                    *|",
-                     reader.readLine());
-        assertEquals("|*  --verbose          *-*print the version information and exit              *|",
-                     reader.readLine());
-        assertEquals("|*  --projecthelp      *-*print project help information                      *|",
-                     reader.readLine());
-        assertEquals("|*  --help (-?,-h)     *-*Displays the help                                   *|",
-                     reader.readLine());
-        assertEquals("|*  --diagnostics      *-*print information that might be helpful to diagnose *|",
-                     reader.readLine());
-        assertEquals("|*                     *-*or report problems.                                 *|",
-                     reader.readLine());
-        assertEquals("|*  target [target ...]*-*The targets ant should build                        *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Copyright 2003                                                              *|",
-                     reader.readLine());
-        assertEquals("|*Apache Software Foundation                                                  *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintHelp()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printHelp();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*options              *-*                                                    *|",
-                     reader.readLine());
-        assertEquals("|*  --help (-?,-h)     *-*Displays the help                                   *|",
-                     reader.readLine());
-        assertEquals("|*  --diagnostics      *-*print information that might be helpful to diagnose *|",
-                     reader.readLine());
-        assertEquals("|*                     *-*or report problems.                                 *|",
-                     reader.readLine());
-        assertEquals("|*  --projecthelp      *-*print project help information                      *|",
-                     reader.readLine());
-        assertEquals("|*  --verbose          *-*print the version information and exit              *|",
-                     reader.readLine());
-        assertEquals("|*  target [target ...]*-*The targets ant should build                        *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintHelp_WithException()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.setException(new OptionException(verbose));
-        helpFormatter.printHelp();
-
-        //System.out.println(writer);
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*--verbose*-*print the version information and exit                          *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintHelp_TooNarrow()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter = new HelpFormatter("<", "=", ">", 4);
-        helpFormatter.setGroup(options);
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printHelp();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("<options              = >", reader.readLine());
-        assertEquals("<  --help (-?,-h)     =D>", reader.readLine());
-        assertEquals("<                     =i>", reader.readLine());
-
-        // lots more lines unchecked
-    }
-
-    public void testPrintException()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.setException(new OptionException(verbose, ResourceConstants.MISSING_OPTION));
-        helpFormatter.printException();
-
-        //System.out.println(writer);
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Missing option --verbose                                                    *|",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintUsage()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printUsage();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Usage:                                                                      *|",
-                     reader.readLine());
-        assertEquals("|*ant [--help --diagnostics --projecthelp --verbose] [<target1> [<target2>    *|",
-                     reader.readLine());
-        assertEquals("|*...]]                                                                       *|",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintHeader()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printHeader();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertEquals("|*Jakarta Commons CLI                                                         *|",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintFooter()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printFooter();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("|*Copyright 2003                                                              *|",
-                     reader.readLine());
-        assertEquals("|*Apache Software Foundation                                                  *|",
-                     reader.readLine());
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testPrintDivider()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.printDivider();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("+------------------------------------------------------------------------------+",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-
-    public void testWrap() {
-        final Iterator i = HelpFormatter.wrap("Apache Software Foundation", 30).iterator();
-        assertEquals("Apache Software Foundation", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_WrapNeeded() {
-        final Iterator i = HelpFormatter.wrap("Apache Software Foundation", 20).iterator();
-        assertEquals("Apache Software", i.next());
-        assertEquals("Foundation", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_BeforeSpace() {
-        final Iterator i = HelpFormatter.wrap("Apache Software Foundation", 16).iterator();
-        assertEquals("Apache Software", i.next());
-        assertEquals("Foundation", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_AfterSpace() {
-        final Iterator i = HelpFormatter.wrap("Apache Software Foundation", 17).iterator();
-        assertEquals("Apache Software", i.next());
-        assertEquals("Foundation", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_InWord() {
-        final Iterator i = HelpFormatter.wrap("Apache Software Foundation", 8).iterator();
-        assertEquals("Apache", i.next());
-        assertEquals("Software", i.next());
-        assertEquals("Foundati", i.next());
-        assertEquals("on", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_NewLine() {
-        final Iterator i = HelpFormatter.wrap("\nApache Software Foundation\n", 30).iterator();
-        assertEquals("", i.next());
-        assertEquals("Apache Software Foundation", i.next());
-        assertEquals("", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_NewLine2() {
-        List wrapped =
-            HelpFormatter.wrap("A really quite long general description of the option with specific alternatives documented:\n" +
-                               "  Indented special case\n" + "  Alternative scenario", 30);
-
-        final Iterator i = wrapped.iterator();
-
-        assertEquals("A really quite long general", i.next());
-        assertEquals("description of the option", i.next());
-        assertEquals("with specific alternatives", i.next());
-        assertEquals("documented:", i.next());
-        assertEquals("  Indented special case", i.next());
-        assertEquals("  Alternative scenario", i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testWrap_Below1Length() {
-        try {
-            HelpFormatter.wrap("Apache Software Foundation", -1);
-            fail("IllegalArgumentException");
-        } catch (IllegalArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.HELPFORMATTER_WIDTH_TOO_NARROW,
-                                              new Object[] { new Integer(-1) }), e.getMessage());
-        }
-    }
-
-    public void testPad()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        HelpFormatter.pad("hello", 10, new PrintWriter(writer));
-        assertEquals("hello     ", writer.toString());
-    }
-
-    public void testPad_Null()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        HelpFormatter.pad(null, 10, new PrintWriter(writer));
-        assertEquals("          ", writer.toString());
-    }
-
-    public void testPad_TooLong()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        HelpFormatter.pad("hello world", 10, new PrintWriter(writer));
-        assertEquals("hello world", writer.toString());
-    }
-
-    public void testPad_TooShort()
-        throws IOException {
-        final StringWriter writer = new StringWriter();
-        HelpFormatter.pad("hello world", -5, new PrintWriter(writer));
-        assertEquals("hello world", writer.toString());
-    }
-
-    public void testGutters()
-        throws IOException {
-        helpFormatter = new HelpFormatter(null, null, null, 80);
-        helpFormatter.setShellCommand("ant");
-
-        final Set lusage = new HashSet();
-        lusage.add(DisplaySetting.DISPLAY_ALIASES);
-        lusage.add(DisplaySetting.DISPLAY_GROUP_NAME);
-        helpFormatter.setLineUsageSettings(lusage);
-
-        // test line usage
-        assertEquals("incorrect line usage", lusage, helpFormatter.getLineUsageSettings());
-
-        final Set fusage = new HashSet();
-        fusage.add(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-        fusage.add(DisplaySetting.DISPLAY_GROUP_ARGUMENT);
-        fusage.add(DisplaySetting.DISPLAY_GROUP_OUTER);
-        fusage.add(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-        fusage.add(DisplaySetting.DISPLAY_ARGUMENT_BRACKETED);
-        fusage.add(DisplaySetting.DISPLAY_ARGUMENT_NUMBERED);
-        fusage.add(DisplaySetting.DISPLAY_SWITCH_ENABLED);
-        fusage.add(DisplaySetting.DISPLAY_SWITCH_DISABLED);
-        fusage.add(DisplaySetting.DISPLAY_PROPERTY_OPTION);
-        fusage.add(DisplaySetting.DISPLAY_PARENT_CHILDREN);
-        fusage.add(DisplaySetting.DISPLAY_PARENT_ARGUMENT);
-        fusage.add(DisplaySetting.DISPLAY_OPTIONAL);
-        helpFormatter.setFullUsageSettings(fusage);
-
-        // test line usage
-        assertEquals("incorrect full usage", fusage, helpFormatter.getFullUsageSettings());
-
-        final Set dsettings = new HashSet();
-        dsettings.add(DisplaySetting.DISPLAY_GROUP_NAME);
-        dsettings.add(DisplaySetting.DISPLAY_GROUP_EXPANDED);
-        dsettings.add(DisplaySetting.DISPLAY_GROUP_ARGUMENT);
-
-        helpFormatter.setDisplaySettings(dsettings);
-
-        verbose =
-            new DefaultOptionBuilder().withLongName("verbose")
-                                      .withDescription("print the version information and exit")
-                                      .create();
-
-        options =
-            new GroupBuilder().withName("options").withOption(DefaultOptionTest.buildHelpOption())
-                              .withOption(ArgumentTest.buildTargetsArgument())
-                              .withOption(new DefaultOptionBuilder().withLongName("diagnostics")
-                                                                    .withDescription("print information that might be helpful to diagnose or report problems.")
-                                                                    .create())
-                              .withOption(new DefaultOptionBuilder().withLongName("projecthelp")
-                                                                    .withDescription("print project help information")
-                                                                    .create()).withOption(verbose)
-                              .create();
-
-        helpFormatter.setGroup(options);
-
-        // test default gutters
-        assertEquals("incorrect left gutter", HelpFormatter.DEFAULT_GUTTER_LEFT,
-                     helpFormatter.getGutterLeft());
-        assertEquals("incorrect right gutter", HelpFormatter.DEFAULT_GUTTER_RIGHT,
-                     helpFormatter.getGutterRight());
-        assertEquals("incorrect center gutter", HelpFormatter.DEFAULT_GUTTER_CENTER,
-                     helpFormatter.getGutterCenter());
-
-        final StringWriter writer = new StringWriter();
-        helpFormatter.setPrintWriter(new PrintWriter(writer));
-        helpFormatter.print();
-
-        final BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
-        assertEquals("Usage:                                                                          ",
-                     reader.readLine());
-        assertEquals("ant [--help --diagnostics --projecthelp --verbose] [<target1> [<target2> ...]]  ",
-                     reader.readLine());
-        assertEquals("options                                                                         ",
-                     reader.readLine());
-        assertEquals("  --help (-?,-h)         Displays the help                                      ",
-                     reader.readLine());
-        assertEquals("  --diagnostics          print information that might be helpful to diagnose or ",
-                     reader.readLine());
-        assertEquals("                         report problems.                                       ",
-                     reader.readLine());
-        assertEquals("  --projecthelp          print project help information                         ",
-                     reader.readLine());
-        assertEquals("  --verbose              print the version information and exit                 ",
-                     reader.readLine());
-        assertEquals("  target [target ...]    The targets ant should build                           ",
-                     reader.readLine());
-        assertNull(reader.readLine());
-    }
-}
-
-
-class OptionComparator implements Comparator {
-    public int compare(Object o1,
-                       Object o2) {
-        Option opt1 = (Option) o1;
-        Option opt2 = (Option) o2;
-
-        return -opt1.getPreferredName().compareTo(opt2.getPreferredName());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/ClassValidatorTest.java b/src/test/org/apache/commons/cli2/validation/ClassValidatorTest.java
deleted file mode 100644
index 467b7b03..00000000
--- a/src/test/org/apache/commons/cli2/validation/ClassValidatorTest.java
+++ /dev/null
@@ -1,247 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.net.URL;
-import java.net.URLClassLoader;
-import java.util.Arrays;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public class ClassValidatorTest extends TestCase {
-
-    private final static ResourceHelper resources =
-        ResourceHelper.getResourceHelper();
-
-    private ClassValidator validator;
-
-    protected void setUp() {
-        validator = new ClassValidator();
-    }
-
-    public void testValidName() throws InvalidArgumentException {
-        final Object[] array = new Object[] { "MyApp", "org.apache.ant.Main" };
-        final List list = Arrays.asList(array);
-
-        validator.validate(list);
-
-        assertEquals("Name is incorrect", "MyApp", list.get(0));
-        assertEquals("Name is incorrect", "org.apache.ant.Main", list.get(1));
-    }
-
-    public void testNameBadStart() {
-        final String className = "1stClass";
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        try {
-            validator.validate(list);
-            fail("Class name cannot start with a number.");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(
-                resources.getMessage(
-                    "ClassValidator.bad.classname",
-                    className),
-                ive.getMessage());
-        }
-    }
-
-    public void testNameBadEnd() {
-        final String className = "My.Class.";
-
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        try {
-            validator.validate(list);
-            fail("Trailing period not permitted.");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(
-                resources.getMessage(
-                    "ClassValidator.bad.classname",
-                    className),
-                ive.getMessage());
-        }
-    }
-
-    public void testNameBadMiddle() {
-        final String className = "My..Class";
-
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        try {
-            validator.validate(list);
-            fail("Two consecutive periods is not permitted.");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(
-                resources.getMessage(
-                    "ClassValidator.bad.classname",
-                    className),
-                ive.getMessage());
-        }
-    }
-
-    public void testIllegalNameChar() {
-        final String className = "My?Class";
-
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        try {
-            validator.validate(list);
-            fail("Illegal character not allowed in Class name.");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(
-                resources.getMessage(
-                    "ClassValidator.bad.classname",
-                    className),
-                ive.getMessage());
-        }
-    }
-
-    public void testLoadable() {
-        assertFalse("Validator is loadable", validator.isLoadable());
-        validator.setLoadable(true);
-        assertTrue("Validator is NOT loadable", validator.isLoadable());
-        validator.setLoadable(false);
-        assertFalse("Validator is loadable", validator.isLoadable());
-    }
-
-    public void testLoadValid() throws InvalidArgumentException {
-        final Object[] array =
-            new Object[] {
-                "org.apache.commons.cli2.Option",
-                "java.util.Vector" };
-        final List list = Arrays.asList(array);
-
-        validator.setLoadable(true);
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(
-            "org.apache.commons.cli2.Option",
-            ((Class) i.next()).getName());
-        assertEquals("java.util.Vector", ((Class) i.next()).getName());
-        assertFalse(i.hasNext());
-    }
-
-    public void testLoadInvalid() {
-        final String className = "org.apache.commons.cli2.NonOption";
-
-        final Object[] array = new Object[] { className, "java.util.Vectors" };
-        final List list = Arrays.asList(array);
-
-        validator.setLoadable(true);
-
-        try {
-            validator.validate(list);
-            fail("Class Not Found");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(
-                resources.getMessage(
-                    "ClassValidator.class.notfound",
-                    className),
-                ive.getMessage());
-        }
-    }
-
-    public void testInstantiate() {
-        assertFalse("Validator creates instances", validator.isInstance());
-        validator.setInstance(true);
-        assertTrue(
-            "Validator does NOT create instances",
-            validator.isInstance());
-        validator.setInstance(false);
-        assertFalse("Validator creates instances", validator.isInstance());
-    }
-
-    public void testCreateClassInstance() throws InvalidArgumentException {
-        final Object[] array = new Object[] { "java.util.Vector" };
-        final List list = Arrays.asList(array);
-
-        validator.setInstance(true);
-
-        validator.validate(list);
-        assertTrue(
-            "Vector instance NOT found",
-            list.get(0) instanceof java.util.Vector);
-    }
-
-    public void testCreateInterfaceInstance() {
-        final String className = "java.util.Map";
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        validator.setInstance(true);
-        
-        try {
-            validator.validate(list);
-            fail("It's not possible to create a '" + className + "'");
-        }
-        catch (final InvalidArgumentException ive) {
-            assertEquals(
-                    resources.getMessage(
-                            "ClassValidator.class.create",
-                            className),
-                            ive.getMessage());
-        }
-    }
-
-    public void testCreateProtectedInstance() {
-        final String className = "org.apache.commons.cli2.validation.protect.ProtectedClass";
-        final Object[] array = new Object[] { className };
-        final List list = Arrays.asList(array);
-
-        validator.setInstance(true);
-        
-        try {
-            validator.validate(list);
-            fail("It's not possible to create a '" + className + "'");
-        }
-        catch (final InvalidArgumentException ive) {
-            assertEquals(
-                    resources.getMessage(
-                            "ClassValidator.class.access",
-                            className,
-                            "Class org.apache.commons.cli2.validation.ClassValidator " +
-                            "can not access a member of class " +
-                            "org.apache.commons.cli2.validation.protect.ProtectedClass " +
-                            "with modifiers \"protected\""),
-                            ive.getMessage());
-        }
-    }
-    
-    public void testClassloader() {
-        assertEquals(
-            "Wrong classloader found",
-            validator.getClass().getClassLoader(),
-            validator.getClassLoader());
-
-        URLClassLoader classloader = new URLClassLoader(new URL[] {
-        });
-        validator.setClassLoader(classloader);
-
-        assertEquals(
-            "Wrong classloader found",
-            classloader,
-            validator.getClassLoader());
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/DateValidatorTest.java b/src/test/org/apache/commons/cli2/validation/DateValidatorTest.java
deleted file mode 100644
index b83c1c49..00000000
--- a/src/test/org/apache/commons/cli2/validation/DateValidatorTest.java
+++ /dev/null
@@ -1,216 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.text.DateFormat;
-import java.text.SimpleDateFormat;
-import java.util.Arrays;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.Test;
-import junit.framework.TestCase;
-import junit.framework.TestSuite;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * JUnit test case for DateValidator.
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class DateValidatorTest
-    extends TestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-    public static final DateFormat D_M_YY = new SimpleDateFormat("d/M/yy");
-    public static final DateFormat YYYY_MM_DD = new SimpleDateFormat("yyyy-MM-dd");
-    private List formats = Arrays.asList(new Object[] { D_M_YY, YYYY_MM_DD });
-
-    public void testSingleFormatValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "23/12/03" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator(D_M_YY);
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals("2003-12-23", YYYY_MM_DD.format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testDefaultDateFormatValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "23-Dec-2003" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator( new SimpleDateFormat("dd-MMM-yyyy") );
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        // CLI-40: For some reason, the YYYY_MM_DD object gets quite 
-        // confused here and returns 2003-12-22. If we make a new one 
-        // there is no problem.
-        assertEquals("2003-12-23", new SimpleDateFormat("yyyy-MM-dd").format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testDefaultTimeFormatValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "18:00:00" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator( new SimpleDateFormat("HH:mm:ss") );
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        final DateFormat df = new SimpleDateFormat("HH:mm:ss");
-        assertEquals("18:00:00", df.format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testDefaultDateTimeFormatValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "23-Jan-2003 18:00:00" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator( new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss") );
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        final DateFormat df = new SimpleDateFormat("yyyy/M/dd HH:mm:ss");
-        assertEquals("2003/1/23 18:00:00", df.format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testDefaultValidator()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "23/01/03 18:00" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator(new SimpleDateFormat("dd/MM/yy HH:mm"));
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        final DateFormat df = new SimpleDateFormat("yyyy/M/dd HH:mm:ss");
-        assertEquals("2003/1/23 18:00:00", df.format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "23/12/03", "2002-10-12" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new DateValidator(formats);
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals("2003-12-23", YYYY_MM_DD.format((Date) i.next()));
-        assertEquals("2002-10-12", YYYY_MM_DD.format((Date) i.next()));
-        assertFalse(i.hasNext());
-    }
-
-    public void testMinimumBounds()
-        throws InvalidArgumentException {
-        final DateValidator validator = new DateValidator(formats);
-        final Calendar cal = Calendar.getInstance();
-
-        {
-            final Object[] array = new Object[] { "23/12/03", "2002-10-12" };
-            final List list = Arrays.asList(array);
-            cal.set(2002, 1, 12);
-
-            final Date min = cal.getTime();
-            validator.setMinimum(min);
-            assertTrue("maximum bound is set", validator.getMaximum() == null);
-            assertEquals("minimum bound is incorrect", min, validator.getMinimum());
-            validator.validate(list);
-        }
-
-        {
-            final Object[] array = new Object[] { "23/12/03", "2002-10-12" };
-            final List list = Arrays.asList(array);
-            cal.set(2003, 1, 12);
-
-            final Date min = cal.getTime();
-            validator.setMinimum(min);
-
-            try {
-                validator.validate(list);
-                fail("minimum out of bounds exception not caught");
-            } catch (final InvalidArgumentException exp) {
-                assertEquals(resources.getMessage(ResourceConstants.DATEVALIDATOR_DATE_OUTOFRANGE,
-                                                  new Object[] { "2002-10-12" }), exp.getMessage());
-            }
-        }
-    }
-
-    public void testFormats()
-        throws InvalidArgumentException {
-        final DateValidator validator = new DateValidator(formats);
-        assertEquals("date format is incorrect", ((SimpleDateFormat) formats.get(0)).toPattern(),
-                     ((SimpleDateFormat) validator.getFormats()[0]).toPattern());
-        assertEquals("date format is incorrect", ((SimpleDateFormat) formats.get(1)).toPattern(),
-                     ((SimpleDateFormat) validator.getFormats()[1]).toPattern());
-    }
-
-    public void testMaximumBounds()
-        throws InvalidArgumentException {
-        final DateValidator validator = new DateValidator(formats);
-        final Calendar cal = Calendar.getInstance();
-
-        {
-            final Object[] array = new Object[] { "23/12/03", "2002-10-12" };
-            final List list = Arrays.asList(array);
-            cal.set(2004, 1, 12);
-
-            final Date max = cal.getTime();
-            validator.setMaximum(max);
-            assertTrue("minimum bound is set", validator.getMinimum() == null);
-            assertEquals("maximum bound is incorrect", max, validator.getMaximum());
-            validator.validate(list);
-        }
-
-        {
-            final Object[] array = new Object[] { "23/12/03", "2004-10-12" };
-            final List list = Arrays.asList(array);
-            cal.set(2004, 1, 12);
-
-            final Date max = cal.getTime();
-            validator.setMaximum(max);
-
-            try {
-                validator.validate(list);
-                fail("maximum out of bounds exception not caught");
-            } catch (final InvalidArgumentException exp) {
-                assertEquals(resources.getMessage(ResourceConstants.DATEVALIDATOR_DATE_OUTOFRANGE,
-                                                  new Object[] { "2004-10-12" }), exp.getMessage());
-            }
-        }
-    }
-
-    public static Test suite() {
-        Test result = new TestSuite(DateValidatorTest.class); // default behavior
-        result = new TimeZoneTestSuite("EST", result); // ensure it runs in EST timezone
-
-        return result;
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/EnumValidatorTest.java b/src/test/org/apache/commons/cli2/validation/EnumValidatorTest.java
deleted file mode 100644
index eb65d3c6..00000000
--- a/src/test/org/apache/commons/cli2/validation/EnumValidatorTest.java
+++ /dev/null
@@ -1,65 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.util.Arrays;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Set;
-import java.util.TreeSet;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public class EnumValidatorTest
-    extends TestCase {
-    private final static ResourceHelper resources = ResourceHelper.getResourceHelper();
-    private final Set enumSet = new TreeSet(Arrays.asList(new Object[] { "red", "green", "blue" }));
-
-    public void testValidate()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "red", "green" };
-
-        {
-            final List list = Arrays.asList(array);
-            final EnumValidator validator = new EnumValidator(enumSet);
-            assertEquals("valid values are incorrect", enumSet, validator.getValidValues());
-            validator.validate(list);
-
-            final Iterator i = list.iterator();
-            assertEquals("red", i.next());
-            assertEquals("green", i.next());
-            assertFalse(i.hasNext());
-        }
-    }
-
-    public void testNonMember() {
-        final Object[] array = new Object[] { "red", "pink" };
-        final List list = Arrays.asList(array);
-        final EnumValidator validator = new EnumValidator(enumSet);
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.ENUM_ILLEGAL_VALUE,
-                                              new Object[] { "pink", validator.getValuesAsString() }),
-                         e.getMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/FileValidatorTest.java b/src/test/org/apache/commons/cli2/validation/FileValidatorTest.java
deleted file mode 100644
index 15060647..00000000
--- a/src/test/org/apache/commons/cli2/validation/FileValidatorTest.java
+++ /dev/null
@@ -1,195 +0,0 @@
-/*
- * Copyright 2004-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.io.File;
-import java.io.IOException;
-import java.util.Arrays;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-/**
- * JUnit test case for the FileValidator.
- * 
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class FileValidatorTest extends TestCase {
-
-    public void testValidate() throws InvalidArgumentException {
-        final Object[] array = new Object[] { "src", "project.xml",
-                "veryunlikelyfilename" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = new FileValidator();
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(new File("src"), i.next());
-        assertEquals(new File("project.xml"), i.next());
-        assertEquals(new File("veryunlikelyfilename"), i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testValidate_Directory() {
-        final Object[] array = new Object[] { "src", "project.xml" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = FileValidator
-                .getExistingDirectoryInstance();
-
-        assertTrue("is a directory validator", validator.isDirectory());
-        assertFalse("is not a file validator", validator.isFile());
-        assertTrue("is an existing file validator", validator.isExisting());
-        assertFalse("is not a hidden file validator", validator.isHidden());
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("project.xml", e.getMessage());
-        }
-    }
-
-    public void testValidate_ReadableFile() {
-        // make file readonly
-        File file = new File("src/test/data/readable.txt");
-        file.setReadOnly();
-
-        final Object[] array = new Object[] { "src/test/data/readable.txt",
-                "src/test/data/notreadable.txt" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = FileValidator.getExistingFileInstance();
-        validator.setReadable(true);
-
-        assertFalse("is not a directory validator", validator.isDirectory());
-        assertTrue("is a file validator", validator.isFile());
-        assertTrue("is an existing file validator", validator.isExisting());
-        assertFalse("is not a hidden file validator", validator.isHidden());
-        assertTrue("is a readable file validator", validator.isReadable());
-        assertFalse("is not a writable file validator", validator.isWritable());
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("src/test/data/notreadable.txt", e.getMessage());
-        }
-    }
-
-    public void testValidate_WritableFile() {
-        // make file readonly
-        File file = new File("src/test/data/readable.txt");
-        file.setReadOnly();
-
-        final Object[] array = new Object[] { "src/test/data/writable.txt",
-                "src/test/data/readable.txt" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = FileValidator.getExistingFileInstance();
-        validator.setWritable(true);
-
-        assertFalse("is not a directory validator", validator.isDirectory());
-        assertTrue("is a file validator", validator.isFile());
-        assertTrue("is an existing file validator", validator.isExisting());
-        assertFalse("is not a hidden file validator", validator.isHidden());
-        assertFalse("is not a readable file validator", validator.isReadable());
-        assertTrue("is a writable file validator", validator.isWritable());
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("src/test/data/readable.txt", e.getMessage());
-        }
-    }
-
-    public void testValidate_HiddenFile() throws InvalidArgumentException {
-        // make file hidden on Windows
-        attribute("H");
-
-        final Object[] array = new Object[] { "src/test/data/.hidden.txt", "src" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = FileValidator.getExistingFileInstance();
-        validator.setHidden(true);
-
-        assertFalse("is not a directory validator", validator.isDirectory());
-        assertTrue("is a file validator", validator.isFile());
-        assertTrue("is an existing file validator", validator.isExisting());
-        assertTrue("is a hidden file validator", validator.isHidden());
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("src", e.getMessage());
-        }
-    }
-
-    private void attribute(String attr) {
-        final String os = System.getProperty("os.name").toLowerCase();
-
-        // if the test is run on windows, run the attrib program
-        // to set the hidden attribute
-        if (os.indexOf("windows") != -1) {
-            // windows
-            try {
-                Process proc = Runtime.getRuntime().exec(
-                        "attrib.exe +" + attr + " src/test/data/.hidden.txt",
-                        null, new File("."));
-                proc.waitFor();
-            } catch (InterruptedException e) {
-                System.out.println(e.getMessage());
-                e.printStackTrace();
-            } catch (IOException e) {
-                System.out.println(e.getMessage());
-                e.printStackTrace();
-            }
-        }
-    }
-
-    public void testValidate_Existing() {
-        final Object[] array = new Object[] { "project.xml",
-                "veryunlikelyfilename" };
-        final List list = Arrays.asList(array);
-        final FileValidator validator = FileValidator.getExistingInstance();
-
-        assertFalse("is not a directory validator", validator.isDirectory());
-        assertFalse("is not a file validator", validator.isFile());
-        assertTrue("is an existing file validator", validator.isExisting());
-        assertFalse("is not a hidden file validator", validator.isHidden());
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("veryunlikelyfilename", e.getMessage());
-        }
-    }
-
-    public void testValidate_File() {
-        final Object[] array = new Object[] { "project.xml", "src" };
-        final List list = Arrays.asList(array);
-        final Validator validator = FileValidator.getExistingFileInstance();
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("src", e.getMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/NumberValidatorTest.java b/src/test/org/apache/commons/cli2/validation/NumberValidatorTest.java
deleted file mode 100644
index b698ba7a..00000000
--- a/src/test/org/apache/commons/cli2/validation/NumberValidatorTest.java
+++ /dev/null
@@ -1,167 +0,0 @@
-/*
- * Copyright 2003-2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.text.NumberFormat;
-
-import java.util.Arrays;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-/**
- * JUnit test case for NumberValidator.
- *
- * @author Rob Oxspring
- * @author John Keyes
- */
-public class NumberValidatorTest
-    extends TestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    public void testValidate_Number()
-        throws InvalidArgumentException {
-        final NumberFormat format = NumberFormat.getNumberInstance();
-
-        final Object[] array =
-            new Object[] { format.format(1d), format.format(1.07d), format.format(-.45d) };
-
-        {
-            final List list = Arrays.asList(array);
-            final Validator validator = NumberValidator.getNumberInstance();
-
-            validator.validate(list);
-
-            final Iterator i = list.iterator();
-            assertEquals(1d, ((Number) i.next()).doubleValue(), 0.0001);
-            assertEquals(1.07d, ((Number) i.next()).doubleValue(), 0.0001);
-            assertEquals(-.45d, ((Number) i.next()).doubleValue(), 0.0001);
-            assertFalse(i.hasNext());
-        }
-    }
-
-    public void testValidate_Currency()
-        throws InvalidArgumentException {
-        NumberFormat format = NumberFormat.getCurrencyInstance();
-        final Object[] array =
-            new Object[] { format.format(1d), format.format(1.07), format.format(-0.45) };
-        final List list = Arrays.asList(array);
-
-        final NumberValidator validator = NumberValidator.getCurrencyInstance();
-        assertEquals("incorrect currency format", format, validator.getFormat());
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(1d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(1.07d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(-.45d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertFalse(i.hasNext());
-    }
-
-    public void testValidate_Percent()
-        throws InvalidArgumentException {
-        final NumberFormat format = NumberFormat.getPercentInstance();
-
-        final Object[] array =
-            new Object[] {
-                             format.format(.01), format.format(1.07), format.format(-.45),
-                             format.format(0.001)
-            };
-        final List list = Arrays.asList(array);
-        final Validator validator = NumberValidator.getPercentInstance();
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(0.01d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(1.07d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(-.45d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(0.00001d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertFalse(i.hasNext());
-    }
-
-    public void testValidate_Integer()
-        throws InvalidArgumentException {
-        final Object[] array = new Object[] { "1", "107", "-45" };
-        final List list = Arrays.asList(array);
-        final Validator validator = NumberValidator.getIntegerInstance();
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(1d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(107d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertEquals(-45d, ((Number) i.next()).doubleValue(), 0.0001);
-        assertFalse(i.hasNext());
-    }
-
-    public void testValidate_ExcessChars() {
-        final Object[] array = new Object[] { "10DowningStreet" };
-        final List list = Arrays.asList(array);
-        final Validator validator = NumberValidator.getIntegerInstance();
-
-        try {
-            validator.validate(list);
-            fail("InvalidArgumentException");
-        } catch (InvalidArgumentException e) {
-            assertEquals("10DowningStreet", e.getMessage());
-        }
-    }
-
-    public void testValidate_Maximum() {
-        final Object[] array = new Object[] { "1", "107" };
-        final List list = Arrays.asList(array);
-        final NumberValidator validator = NumberValidator.getIntegerInstance();
-        Integer max = new Integer(100);
-
-        validator.setMaximum(max);
-
-        assertTrue("no minimum set", validator.getMinimum() == null);
-        assertEquals("incorrect maximum value", max, validator.getMaximum());
-
-        try {
-            validator.validate(list);
-            fail("107 too big");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(resources.getMessage(ResourceConstants.NUMBERVALIDATOR_NUMBER_OUTOFRANGE,
-                                              "107"), ive.getMessage());
-        }
-    }
-
-    public void testValidate_Minimum() {
-        final Object[] array = new Object[] { "107", "1" };
-        final List list = Arrays.asList(array);
-        final NumberValidator validator = NumberValidator.getIntegerInstance();
-        Integer min = new Integer(100);
-        validator.setMinimum(min);
-
-        assertTrue("no maximum set", validator.getMaximum() == null);
-        assertEquals("incorrect minimum value", min, validator.getMinimum());
-
-        try {
-            validator.validate(list);
-            fail("1 too small");
-        } catch (InvalidArgumentException ive) {
-            assertEquals(resources.getMessage(ResourceConstants.NUMBERVALIDATOR_NUMBER_OUTOFRANGE,
-                                              "1"), ive.getMessage());
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/TimeZoneTestSuite.java b/src/test/org/apache/commons/cli2/validation/TimeZoneTestSuite.java
deleted file mode 100644
index 238de620..00000000
--- a/src/test/org/apache/commons/cli2/validation/TimeZoneTestSuite.java
+++ /dev/null
@@ -1,45 +0,0 @@
-/**
- * Copyright 2005 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.util.TimeZone;
-
-import junit.extensions.TestDecorator;
-
-import junit.framework.Test;
-import junit.framework.TestResult;
-
-public class TimeZoneTestSuite
-    extends TestDecorator {
-    private final TimeZone timeZone;
-    private final TimeZone originalTimeZone;
-
-    public TimeZoneTestSuite(String timeZone,
-                             Test test) {
-        super(test);
-        this.timeZone = TimeZone.getTimeZone(timeZone);
-        this.originalTimeZone = TimeZone.getDefault();
-    }
-
-    public void run(TestResult testResult) {
-        try {
-            TimeZone.setDefault(timeZone);
-            super.run(testResult);
-        } finally {
-            TimeZone.setDefault(originalTimeZone); // cleanup
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/UrlValidatorTest.java b/src/test/org/apache/commons/cli2/validation/UrlValidatorTest.java
deleted file mode 100644
index 7725fc5a..00000000
--- a/src/test/org/apache/commons/cli2/validation/UrlValidatorTest.java
+++ /dev/null
@@ -1,92 +0,0 @@
-/**
- * Copyright 2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation;
-
-import java.net.MalformedURLException;
-import java.net.URL;
-
-import java.util.Arrays;
-import java.util.Iterator;
-import java.util.List;
-
-import junit.framework.TestCase;
-
-import org.apache.commons.cli2.resource.ResourceConstants;
-import org.apache.commons.cli2.resource.ResourceHelper;
-
-public class UrlValidatorTest
-    extends TestCase {
-    private static final ResourceHelper resources = ResourceHelper.getResourceHelper();
-
-    public void testValidate()
-        throws InvalidArgumentException, MalformedURLException {
-        final Object[] array = new Object[] { "http://www.apache.org/", "file:///etc" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new UrlValidator();
-
-        validator.validate(list);
-
-        final Iterator i = list.iterator();
-        assertEquals(new URL("http://www.apache.org/"), i.next());
-        assertEquals(new URL("file:///etc"), i.next());
-        assertFalse(i.hasNext());
-    }
-
-    public void testMalformedURL()
-        throws InvalidArgumentException, MalformedURLException {
-        final Object[] array = new Object[] { "www.apache.org" };
-        final List list = Arrays.asList(array);
-        final Validator validator = new UrlValidator();
-
-        try {
-            validator.validate(list);
-        } catch (InvalidArgumentException e) {
-            assertEquals(resources.getMessage(ResourceConstants.URLVALIDATOR_MALFORMED_URL,
-                                              new Object[] { "www.apache.org" }), e.getMessage());
-        }
-    }
-
-    public void testBadProtocol() {
-        {
-            final Object[] array = new Object[] { "http://www.apache.org/", "file:///etc" };
-            final List list = Arrays.asList(array);
-            final UrlValidator validator = new UrlValidator();
-            validator.setProtocol("http");
-
-            assertEquals("incorrect protocol", "http", validator.getProtocol());
-
-            try {
-                validator.validate(list);
-                fail("Expected InvalidArgumentException");
-            } catch (InvalidArgumentException e) {
-                assertEquals("file:///etc", e.getMessage());
-            }
-        }
-
-        {
-            final Object[] array = new Object[] { "http://www.apache.org/", "file:///etc" };
-            final List list = Arrays.asList(array);
-            final UrlValidator validator = new UrlValidator("http");
-
-            try {
-                validator.validate(list);
-                fail("Expected InvalidArgumentException");
-            } catch (InvalidArgumentException e) {
-                assertEquals("file:///etc", e.getMessage());
-            }
-        }
-    }
-}
diff --git a/src/test/org/apache/commons/cli2/validation/protect/ProtectedClass.java b/src/test/org/apache/commons/cli2/validation/protect/ProtectedClass.java
deleted file mode 100644
index fdac80fe..00000000
--- a/src/test/org/apache/commons/cli2/validation/protect/ProtectedClass.java
+++ /dev/null
@@ -1,22 +0,0 @@
-/**
- * Copyright 2003-2004 The Apache Software Foundation
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.commons.cli2.validation.protect;
-
-class ProtectedClass {
-    protected ProtectedClass() {
-        // used to test something???
-    }
-}
