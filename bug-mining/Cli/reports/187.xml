<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:51:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CLI-185] Commons CLI incorrectly stripping leading and trailing quotes</title>
                <link>https://issues.apache.org/jira/browse/CLI-185</link>
                <project id="12310463" key="CLI">Commons CLI</project>
                    <description>&lt;p&gt;org.apache.commons.cli.Parser.processArgs() calls Util.stripLeadingAndTrailingQuotes() for all argument values. IMHO this is incorrect and totally broken.&lt;/p&gt;

&lt;p&gt;It is trivial to create a simple test for this. Output:&lt;/p&gt;

&lt;p&gt;    $ java -cp target/clitest.jar Clitest --balloo &quot;this is a \&quot;test\&quot;&quot;&lt;br/&gt;
    Value of argument balloo is &apos;this is a &quot;test&apos;.&lt;/p&gt;

&lt;p&gt;The argument &apos;balloo&apos; should indeed keep its trailing double quote. It is what the shell gives it, so don&apos;t try to do something clever to it.&lt;/p&gt;

&lt;p&gt;The offending code was committed here:&lt;br/&gt;
    &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=129874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=129874&lt;/a&gt;&lt;br/&gt;
and has been there for more than 6 years &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Why was this committed in the first place?&lt;/p&gt;

&lt;p&gt;The fix is trivial, just get rid of Util.stripLeadingAndTrailingQuotes(), and consequently avoid calling it from Parser.processArgs().&lt;/p&gt;</description>
                <environment>&lt;p&gt;Darwin dator 9.7.0 Darwin Kernel Version 9.7.0: Tue Mar 31 22:52:17 PDT 2009; root:xnu-1228.12.14~1/RELEASE_I386 i386&lt;br/&gt;
GNU bash, version 3.2.17(1)-release (i386-apple-darwin9.0)&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;Linux build-einarmr 2.6.9-023stab048.4-smp #1 SMP Fri Jul 11 18:50:44 MSD 2008 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
GNU bash, version 3.00.15(1)-release (x86_64-redhat-linux-gnu)&lt;/p&gt;</environment>
        <key id="12427551">CLI-185</key>
            <summary>Commons CLI incorrectly stripping leading and trailing quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="einarmr">Einar M R Rosenvinge</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jun 2009 12:54:28 +0000</created>
                <updated>Mon, 22 Jun 2015 18:59:55 +0000</updated>
                            <resolved>Wed, 16 Jun 2010 08:38:45 +0000</resolved>
                                    <version>1.1</version>
                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>Parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12718062" author="ebourg" created="Wed, 10 Jun 2009 13:07:23 +0000"  >&lt;p&gt;This was committed to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-22&quot; title=&quot;Quoted strings as a single argument.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-22&quot;&gt;&lt;del&gt;CLI-22&lt;/del&gt;&lt;/a&gt;. I do agree that the quotes should not be removed.&lt;/p&gt;</comment>
                            <comment id="12718066" author="ebourg" created="Wed, 10 Jun 2009 13:11:46 +0000"  >&lt;p&gt;This is a regression introduced with CLI 1.1, CLI 1.0 didn&apos;t trim the quotes.&lt;/p&gt;</comment>
                            <comment id="12718070" author="einarmr" created="Wed, 10 Jun 2009 13:18:48 +0000"  >&lt;p&gt;Any info on when 1.3 will be out?&lt;/p&gt;</comment>
                            <comment id="12718193" author="ebourg" created="Wed, 10 Jun 2009 20:50:19 +0000"  >&lt;p&gt;We just started working on CLI 1.3, it&apos;s not ready to be released yet. You can use a snapshot once the issue is fixed, but if you absolutely need a released component we might roll out a 1.2.1 bug fix release.&lt;/p&gt;</comment>
                            <comment id="12718316" author="einarmr" created="Thu, 11 Jun 2009 06:34:59 +0000"  >&lt;p&gt;If you could release a 1.2.1 bugfix release with this fix, I&apos;d be forever grateful. I&apos;m depending on it for a big project. Thanks!&lt;/p&gt;</comment>
                            <comment id="12718490" author="aks" created="Thu, 11 Jun 2009 15:01:03 +0000"  >&lt;p&gt;This is probably a windows vs. linux issue (or more accurately command.com vs bash I guess)&lt;/p&gt;

&lt;p&gt;I can&apos;t see how the original issues &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-22&quot; title=&quot;Quoted strings as a single argument.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-22&quot;&gt;&lt;del&gt;CLI-22&lt;/del&gt;&lt;/a&gt; would have existed as bash shouldn&apos;t have passed the quote marks on to Java.&lt;/p&gt;

&lt;p&gt;A fix for this issue should probably continue to work both when quotes are passed in and when they aren&apos;t. How should CLI differentiate between &lt;/p&gt;

&lt;p&gt;./Clitest --balloo &quot;\&quot;this is a test\&quot;&quot;&lt;/p&gt;

&lt;p&gt;run on bash and &lt;/p&gt;

&lt;p&gt;./Clitest --balloo &quot;this is a test&quot;&lt;/p&gt;

&lt;p&gt;run on command.com?&lt;/p&gt;</comment>
                            <comment id="12718566" author="ebourg" created="Thu, 11 Jun 2009 17:30:25 +0000"  >&lt;p&gt;Even on Windows the quotes aren&apos;t passed to the application. I don&apos;t understand why John Keyes had to remove quotes in &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-22&quot; title=&quot;Quoted strings as a single argument.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-22&quot;&gt;&lt;del&gt;CLI-22&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12719431" author="einarmr" created="Mon, 15 Jun 2009 07:04:33 +0000"  >&lt;p&gt;At least on all *nix platforms (sh/bash/zsh/tcsh/whatever...), modifying the actual arguments in this way is totally broken.&lt;/p&gt;

&lt;p&gt;If you really &lt;b&gt;must&lt;/b&gt; do something clever on Windows, make &lt;b&gt;sure&lt;/b&gt; it&apos;s Windows-only by checking the host platform or something.&lt;/p&gt;</comment>
                            <comment id="12719559" author="aks" created="Mon, 15 Jun 2009 13:51:07 +0000"  >&lt;p&gt;fwiw, I have done a bit of experimenting and it seems I don&apos;t understand windows as well as I thought (which wasn&apos;t much to start with!).&lt;/p&gt;

&lt;p&gt;It seems double quote is not passed through by cmd.exe (although single quotes are passed through and cmd.exe doesn&apos;t require double quotes to be matched). If someone types:&lt;/p&gt;

&lt;p&gt;java tmp &apos;foo&apos;&lt;/p&gt;

&lt;p&gt;on windows, I think it is safe to assume they know they are on windows at that they intend the single quote to be part of the argument (as if they had typed the following on bash et al)&lt;/p&gt;

&lt;p&gt;java tmp &apos;\foo\&apos;&lt;/p&gt;


&lt;p&gt;In conclusion, quotes (single or double) shouldn&apos;t be stripped at all and people should be careful when using single quotes in a platform ignorant way.&lt;/p&gt;</comment>
                            <comment id="12719594" author="ebourg" created="Mon, 15 Jun 2009 15:23:36 +0000"  >&lt;p&gt;The single quotes are never stripped, it&apos;s only the double quotes.&lt;/p&gt;

&lt;p&gt;I tried to remove the stripping, it broke two tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;test15648 in BugsTest: that&apos;s the test of &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-22&quot; title=&quot;Quoted strings as a single argument.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-22&quot;&gt;&lt;del&gt;CLI-22&lt;/del&gt;&lt;/a&gt;, it checks if the quotes of an argument are removed after the parsing. This can be easily changed.&lt;/li&gt;
	&lt;li&gt;testWorkaround2 in BugCLI148Test: this is the test for &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt;, this one is more tricky to fix. Is the workaround introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt; worth keeping? Is it possible to keep the workaround without messing with other cases like the one exposed by Einar?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12719944" author="einarmr" created="Tue, 16 Jun 2009 06:36:08 +0000"  >&lt;p&gt;It seems that BugCLI148Test.test2() relies on double quotes to parse this as a value and not an argument. Fine, but then it should &lt;b&gt;not&lt;/b&gt; automagically remove the quotes; that should be left for the user and this should be documented as a known issue. The workaround is bad, bad, bad.&lt;/p&gt;

&lt;p&gt;The proper fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt; is of course to actually support command lines like program -arg -val, where &apos;arg&apos; is the name of the argument and &apos;-val&apos; is the actual value. I do understand, however, that this is a lot more work to implement.&lt;/p&gt;</comment>
                            <comment id="12754297" author="ajaykidave" created="Fri, 11 Sep 2009 19:38:40 +0000"  >&lt;p&gt;A 1.2.1 release with this fixed  would be great, it would make Commons CLI usable for my project.&lt;/p&gt;</comment>
                            <comment id="12757930" author="jimjag" created="Mon, 21 Sep 2009 15:44:02 +0000"  >&lt;p&gt;Unfortunately, it&apos;s not clear that there is consensus on whether the fix creates more problems than it addresses. In other words, how many people will be surprised by this change and how many environments will it turn a working instance into a broken one?&lt;/p&gt;</comment>
                            <comment id="12758149" author="einarmr" created="Tue, 22 Sep 2009 06:52:08 +0000"  >&lt;p&gt;True, this &lt;b&gt;could&lt;/b&gt; break working code in production. But such code &lt;b&gt;does&lt;/b&gt; rely on a &quot;feature&quot; in Commons-CLI that is just faulty, so sooner or later you will &lt;b&gt;have to&lt;/b&gt; flip the switch. &lt;/p&gt;

&lt;p&gt;I would say that you should do it sooner rather than later, and make sure to document the changed behavior carefully in the release notes.&lt;/p&gt;</comment>
                            <comment id="12758256" author="jimjag" created="Tue, 22 Sep 2009 14:22:43 +0000"  >&lt;p&gt;How about if for 1.2.1 we add a boolean that allows for people to decide whether or not they want quotes stripped or not.? This can ease the transition...&lt;/p&gt;

&lt;p&gt;comments?&lt;/p&gt;</comment>
                            <comment id="12758617" author="einarmr" created="Wed, 23 Sep 2009 06:58:36 +0000"  >&lt;p&gt;Which is worse?&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changing behavior of a method without changing the API at all (could make client code &quot;silently&quot; just break in prod.)&lt;/li&gt;
	&lt;li&gt;Changing the API in a minor release (requires recompile of client code)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For me any of these would work, since I don&apos;t rely on Commons-CLI for legacy code.&lt;/p&gt;</comment>
                            <comment id="12760358" author="ajaykidave" created="Mon, 28 Sep 2009 19:37:58 +0000"  >&lt;p&gt;In my case, removing the quotes for an argument is fine, I don&apos;t think this behavior should be changed. The issue is, for an argument like &quot;abc&quot;test&quot;&quot; (nested double quotes), the removal of quotes removes the last two quotes, the argument becomes abc&quot;test  instead of being abc&quot;test&quot; .&lt;/p&gt;

&lt;p&gt;Looking at the original patch, this could happen if stripLeadingAndTrailingQuotes function gets called two times, first one will do the proper stripping, second stripping will incorrectly  remove the last quote. A possible fix would be to check if first and last char are both quotes. If both are, then do the stripping. This change should not break the API compatibility, unless someone depends on the incorrect behavior.&lt;/p&gt;</comment>
                            <comment id="12760523" author="einarmr" created="Tue, 29 Sep 2009 07:52:43 +0000"  >&lt;p&gt;But Ajay, you are &lt;b&gt;wrong&lt;/b&gt;. If a program is given the argument &quot;abc&quot;test&quot;&quot; (which means it has been given the argument --something &quot;\&quot;abc\&quot;test\&quot;\&quot;&quot; if run through bash), then it &lt;b&gt;must&lt;/b&gt; be presented with &quot;abc&quot;test&quot;&quot; through Commons-CLI. &lt;/p&gt;

&lt;p&gt;There is no such thing as proper stripping of double quotes. Get rid of it.&lt;/p&gt;</comment>
                            <comment id="12761048" author="ajaykidave" created="Wed, 30 Sep 2009 23:40:34 +0000"  >&lt;p&gt;There are two issues here. First is the behavior of whether or not to strip quotes. The second is a bug where abc&quot;test&quot; becomes abc&quot;test . What I meant was that fixing the second issue should not depend on the first. The bug can be fixed even if the stripping behavior is retained as it is.&lt;/p&gt;</comment>
                            <comment id="12879276" author="ebourg" created="Wed, 16 Jun 2010 08:26:49 +0000"  >&lt;p&gt;The workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt; is the only justification for the removal of the quotes, I&apos;ll see if this can be addressed in the new DefaultParser.&lt;/p&gt;

&lt;p&gt;In the meantime I will follow Ajay suggestion to remove the quotes only if there is one at the beginning &lt;b&gt;and&lt;/b&gt; one at the end. And to take Einar&apos;s example into account this will only happen if the value contains exactly 2 quotes. If the value contains more than 2 quotes, no stripping is performed.&lt;/p&gt;

&lt;p&gt;This will preserve the workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt; and eliminate erroneous stripping.&lt;/p&gt;</comment>
                            <comment id="12879278" author="einarmr" created="Wed, 16 Jun 2010 08:38:34 +0000"  >&lt;p&gt;OK, if breaking &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-148&quot; title=&quot;arguments are interpreted as options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-148&quot;&gt;&lt;del&gt;CLI-148&lt;/del&gt;&lt;/a&gt; is not an option, then the proposed fix will at least make things much better.&lt;/p&gt;

&lt;p&gt;Do you have any news on when the next release (containing this fix) is due?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12495766">CLI-213</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12839562">CLI-254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0frj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>