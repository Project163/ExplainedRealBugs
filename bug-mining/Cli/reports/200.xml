<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:51:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CLI-230] Unable to properly require options</title>
                <link>https://issues.apache.org/jira/browse/CLI-230</link>
                <project id="12310463" key="CLI">Commons CLI</project>
                    <description>&lt;p&gt;Having some problems setting options as required. Have I misunderstood the documentation?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In test1() the option is required but also supplied, I expect to get no exceptions.&lt;/li&gt;
	&lt;li&gt;In test2() the option is required but &lt;b&gt;not&lt;/b&gt; supplied, I expect to get an exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Testing {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Begin test 1&quot;&lt;/span&gt;);
        test1();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;End test 1&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Begin test 2&quot;&lt;/span&gt;);
        test2();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;End test 2&quot;&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test1() {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&quot;--foo&quot;&lt;/span&gt; };

        Options options = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Options();
        options.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;f&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &quot;&quot;);
        options.getRequiredOptions().add(options.getOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;));

        GnuParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GnuParser();
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            parser.parse(options, args);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParseException e) {
            &lt;span class=&quot;code-comment&quot;&gt;// didn&apos;t expect to get MissingOptionException here
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR: &quot;&lt;/span&gt; + e.getMessage());
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test2() {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { };

        Options options = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Options();
        options.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;f&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &quot;&quot;);
        options.getOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;f&quot;&lt;/span&gt;).setRequired(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);

        GnuParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GnuParser();
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            parser.parse(options, args);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParseException e) {
            &lt;span class=&quot;code-comment&quot;&gt;// expected to get MissingOptionException here
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR: &quot;&lt;/span&gt; + e.getMessage());
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;windows jdk1.6.0_21&lt;/p&gt;</environment>
        <key id="12631738">CLI-230</key>
            <summary>Unable to properly require options</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mizipzor">Alexander Fast</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2013 15:28:18 +0000</created>
                <updated>Sat, 9 May 2015 18:43:31 +0000</updated>
                            <resolved>Mon, 11 Feb 2013 19:53:08 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>CLI-1.x</component>
                    <component>Options definition</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13575868" author="tn" created="Mon, 11 Feb 2013 16:15:37 +0000"  >&lt;p&gt;In the current CLI version, it is not advised to alter Option objects after they have been added to an Options instance, as the changes will not be reflected, thus you should do something like that:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Options options = new Options();

Option o = OptionBuilder.withLongOpt(&quot;foo&quot;).isRequired().create(&quot;f&quot;);
options.addOption(o);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are several flaws in the current API design of CLI, which will hopefully corrected with CLI2, but we can not do it right now as it would break binary/backwards compatibility.&lt;/p&gt;</comment>
                            <comment id="13575880" author="tn" created="Mon, 11 Feb 2013 16:34:37 +0000"  >&lt;p&gt;Actually, Options.getRequiredOptions() should return an unmodifiable list, adding there something really breaks some internal logic.&lt;/p&gt;</comment>
                            <comment id="13575881" author="mizipzor" created="Mon, 11 Feb 2013 16:37:17 +0000"  >&lt;p&gt;Thank you for a swift response. I had indeed missed the part about not being allowed to alter Options after they&apos;ve been added.&lt;/p&gt;

&lt;p&gt;The code now works. Although my IDE (IntelliJ Idea 12.0.3) gives me the following warning:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Static member &apos;org.apache.commons.cli.OptionBuilder.isRequired()&apos; accessed via instance reference.&lt;br/&gt;
Shows references to static methods and fields via class instance rather than a class itself.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                            <comment id="13575882" author="mizipzor" created="Mon, 11 Feb 2013 16:38:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Actually, Options.getRequiredOptions() should return an unmodifiable list, adding there something really breaks some internal logic.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed, I thought that was strange as well (got warnings about unchecked when adding typed stuff to the list).&lt;/p&gt;</comment>
                            <comment id="13576032" author="tn" created="Mon, 11 Feb 2013 19:35:42 +0000"  >&lt;p&gt;Ok good, it is advised to ask questions first on the user mailinglist (user@commons.apache.org) with the prefix &lt;span class=&quot;error&quot;&gt;&amp;#91;cli&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The warnings you get when using the OptionBuilder are due to the fact that all methods there are static. The 1.3 release will provide a different way to build options using a Builder class in the Option class itself.&lt;/p&gt;

&lt;p&gt;The problem with the required options list will need a fix though to prevent such mistakes.&lt;/p&gt;</comment>
                            <comment id="13576054" author="tn" created="Mon, 11 Feb 2013 19:53:08 +0000"  >&lt;p&gt;Applied changes in r1444940.&lt;/p&gt;

&lt;p&gt;Also added a clarifying statement in Option javadoc wrt changing the required flag after the option has been added to Options.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hvsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>