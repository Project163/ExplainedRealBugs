<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:51:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CLI-220] MissingOptionException.getMissingOptions() returns OptionGroup, not just String</title>
                <link>https://issues.apache.org/jira/browse/CLI-220</link>
                <project id="12310463" key="CLI">Commons CLI</project>
                    <description>&lt;p&gt;The following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.CommandLine;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.CommandLineParser;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.GnuParser;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.MissingOptionException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.Option;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.OptionBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.OptionGroup;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.Options;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] argv)
	{
		Option opt_foo =
			OptionBuilder.hasArg(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
				.isRequired(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
				.withDescription(&lt;span class=&quot;code-quote&quot;&gt;&quot;option foo&quot;&lt;/span&gt;)
		        .create(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;);

		Option opt_bar =
			OptionBuilder.hasArg(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
				.isRequired(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
				.withDescription(&lt;span class=&quot;code-quote&quot;&gt;&quot;option bar&quot;&lt;/span&gt;)
		        .create(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;);

		Option opt_baz =
			OptionBuilder.hasArg(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
				.isRequired(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
				.withDescription(&lt;span class=&quot;code-quote&quot;&gt;&quot;option baz&quot;&lt;/span&gt;)
		        .create(&lt;span class=&quot;code-quote&quot;&gt;&quot;baz&quot;&lt;/span&gt;);

		OptionGroup optgrp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OptionGroup();
		optgrp.setRequired(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		optgrp.addOption(opt_bar)
			.addOption(opt_baz);

		Options optsdef = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Options();
		optsdef.addOption(opt_foo)
			.addOptionGroup(optgrp);

		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			CommandLineParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GnuParser();
			CommandLine cmdline = parser.parse(optsdef, argv);
		}
		&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MissingOptionException ex) {
			List opts = ex.getMissingOptions();

			&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; option : opts) {
				&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;OPT: &quot;&lt;/span&gt; + option.getClass().getName());
			}
		}
		&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
			ex.printStackTrace();
			&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1);
		}
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;produces the following output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;/tmp/MissingOptionException&amp;gt; $ javac -cp commons-cli-1.2.jar Test.java

&amp;lt;/tmp/MissingOptionException&amp;gt; $ java -cp commons-cli-1.2.jar:. Test
OPT: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
OPT: org.apache.commons.cli.OptionGroup
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The JavaDoc for MissingOptionException.getMissingOptions() says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Return the list of options (as strings) missing in the command line parsed.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12509105">CLI-220</key>
            <summary>MissingOptionException.getMissingOptions() returns OptionGroup, not just String</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joe.casadonte">Joe Casadonte</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2011 16:28:05 +0000</created>
                <updated>Sat, 9 May 2015 18:43:35 +0000</updated>
                            <resolved>Thu, 2 Jun 2011 20:22:25 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>CLI-1.x</component>
                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13043023" author="ebourg" created="Thu, 2 Jun 2011 20:12:56 +0000"  >&lt;p&gt;Thank you for the detailed report Joe. The javadoc should be updated to reflect this.&lt;/p&gt;</comment>
                            <comment id="13044836" author="joe.casadonte" created="Mon, 6 Jun 2011 13:22:19 +0000"  >&lt;p&gt;Hi Emmanuel,&lt;/p&gt;

&lt;p&gt;I&apos;m curious why you&apos;re considering this a documentation bug and not a code bug?  The amount of code I have to write to deal with the possibility that I&apos;m not getting a String back is not a lot, but it &lt;b&gt;is&lt;/b&gt; a PITA.  I would think the method should return all Strings or all Objects, but not a mix of the two.  Just my thoughts &amp;#8211; thank you for all of the work you and others do maintaining this code!&lt;/p&gt;


&lt;p&gt;joe&lt;/p&gt;</comment>
                            <comment id="13044965" author="ebourg" created="Mon, 6 Jun 2011 17:18:28 +0000"  >&lt;p&gt;I agree it&apos;s not really nice to have a list of mixed types, but that&apos;s how it was done and it can&apos;t be changed without breaking the backward compatibility.&lt;/p&gt;

&lt;p&gt;What we can do is to add helper methods in the exception to simplify the processing, but what kind of string would you expect for a missing group of options?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0frdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90034</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>