<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:51:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CLI-162] infinite loop in the wrapping code of HelpFormatter</title>
                <link>https://issues.apache.org/jira/browse/CLI-162</link>
                <project id="12310463" key="CLI">Commons CLI</project>
                    <description>&lt;p&gt;If there is not enough space to display a word on a single line, HelpFormatter goes into a infinite loops until the JVM crashes with an OutOfMemoryError.&lt;/p&gt;

&lt;p&gt;Test case:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Options options = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Options();
options.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;h&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;help&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;This is a looooong description&quot;&lt;/span&gt;);

HelpFormatter formatter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HelpFormatter();
formatter.setWidth(20);
formatter.printHelp(&lt;span class=&quot;code-quote&quot;&gt;&quot;app&quot;&lt;/span&gt;, options); &lt;span class=&quot;code-comment&quot;&gt;// hang &amp;amp; crash&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;An helpful exception indicating the insufficient width would be more appropriate than an OutOfMemoryError.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401006">CLI-162</key>
            <summary>infinite loop in the wrapping code of HelpFormatter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ebourg">Emmanuel Bourg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jul 2008 12:21:23 +0000</created>
                <updated>Fri, 20 Feb 2009 05:01:36 +0000</updated>
                            <resolved>Fri, 20 Feb 2009 05:01:36 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Help formatter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12664812" author="bayard" created="Sat, 17 Jan 2009 09:31:08 +0000"  >&lt;p&gt;svn ci -m &quot;Changing the current OutOfMemoryError to a RuntimeException per &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-162&quot; title=&quot;infinite loop in the wrapping code of HelpFormatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-162&quot;&gt;&lt;del&gt;CLI-162&lt;/del&gt;&lt;/a&gt;. A new ticket for the RuntimeException is at &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-174&quot; title=&quot;RuntimeException in the wrapping code of HelpFormatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-174&quot;&gt;&lt;del&gt;CLI-174&lt;/del&gt;&lt;/a&gt;&quot; &lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/cli/HelpFormatter.java&lt;br/&gt;
Adding         src/test/org/apache/commons/cli/bug/BugCLI162Test.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 735257.&lt;/p&gt;</comment>
                            <comment id="12672151" author="ggregory@seagullsw.com" created="Tue, 10 Feb 2009 04:47:36 +0000"  >&lt;p&gt;Committed new test in BugCLI162Test. The class BugCLI162Test is not invoked during a Maven build BTW.&lt;/p&gt;</comment>
                            <comment id="12674469" author="bayard" created="Wed, 18 Feb 2009 05:37:24 +0000"  >
&lt;p&gt;Two of the options appear to be problematic in CLI162.&lt;/p&gt;

&lt;p&gt;The first is OPT_PASSWORD. In this the url is longer than the allowed width of the screen, so some kind of failure needs to happen - or the url needs to be mercilessly chopped. This is the one that goes into an infinite loop due to &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-151&quot; title=&quot;HelpFormatter wraps incorrectly on every line beyond the first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-151&quot;&gt;&lt;del&gt;CLI-151&lt;/del&gt;&lt;/a&gt;. My gut feeling from the code is that &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-151&quot; title=&quot;HelpFormatter wraps incorrectly on every line beyond the first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-151&quot;&gt;&lt;del&gt;CLI-151&lt;/del&gt;&lt;/a&gt; didn&apos;t introduce this bug, but you had to be significantly longer to hit the bug before (ie: printTabStop longer than the width).&lt;/p&gt;

&lt;p&gt;The second is OPT_PARAM_TYPES_INT + OPT_PARAM_TYPES_NAME, it shows the the patch for this ticket contained a bug when the lastPos happened to equal the firstPos for completely normal reasons. I&apos;d missed that pos was already set to a real value when the loop was begun and not to 0. I&apos;m not sure why both options have to be set for this to happen. &lt;/p&gt;</comment>
                            <comment id="12674471" author="bayard" created="Wed, 18 Feb 2009 05:41:56 +0000"  >&lt;p&gt;Attaching patch that rolls back the previous RuntimeException throwing. The if statement in that patch was testing the wrong condition. This patch adds the correct condition, and rather than throwing an exception the text is simply outputted irregardless of the fact it is over the width. What should happen is debatable here - due to a side-effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-151&quot; title=&quot;HelpFormatter wraps incorrectly on every line beyond the first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-151&quot;&gt;&lt;del&gt;CLI-151&lt;/del&gt;&lt;/a&gt;, we can&apos;t do anything aggressive here because things were printing out happily if they were under width + printTabStop. Our options are either to just print, or to forcibly break the text. &lt;/p&gt;

&lt;p&gt;The test code no longer expects to get a RuntimeException.&lt;/p&gt;</comment>
                            <comment id="12674473" author="bayard" created="Wed, 18 Feb 2009 05:43:16 +0000"  >&lt;p&gt;svn ci -m &quot;Applying my second attempt at a patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-162&quot; title=&quot;infinite loop in the wrapping code of HelpFormatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-162&quot;&gt;&lt;del&gt;CLI-162&lt;/del&gt;&lt;/a&gt;. This fixes Gary&apos;s reported bug (one of which was an example of &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-162&quot; title=&quot;infinite loop in the wrapping code of HelpFormatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-162&quot;&gt;&lt;del&gt;CLI-162&lt;/del&gt;&lt;/a&gt;, and one a bug in my first attempt to patch). Open question is whether to output text that is too long, or try and break it up to fit the screen width. &quot;&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/cli/HelpFormatter.java&lt;br/&gt;
Sending        src/test/org/apache/commons/cli/bug/BugCLI162Test.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 745388.&lt;/p&gt;</comment>
                            <comment id="12675241" author="bayard" created="Fri, 20 Feb 2009 04:57:11 +0000"  >&lt;p&gt;Ended up modifying this to break it up to fit screen width.&lt;/p&gt;

&lt;p&gt;Discovered another infinite loop issue if the entered width is smaller than the nextTabStop (ie: argument + indent). &lt;/p&gt;</comment>
                            <comment id="12675242" author="bayard" created="Fri, 20 Feb 2009 05:01:36 +0000"  >&lt;p&gt;Throw IllegalStateException on last infinite loop test case.&lt;/p&gt;


&lt;p&gt;svn ci -m &quot;Applying additional patch to throw IllegalStateException when the speci&lt;br/&gt;
fied width is not enough to fit the flags, indent and 1 character for the description. This closes out &lt;a href=&quot;https://issues.apache.org/jira/browse/CLI-162&quot; title=&quot;infinite loop in the wrapping code of HelpFormatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CLI-162&quot;&gt;&lt;del&gt;CLI-162&lt;/del&gt;&lt;/a&gt; (for now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ). &quot;&lt;br/&gt;
Sending        src/java/org/apache/commons/cli/HelpFormatter.java&lt;br/&gt;
Sending        src/test/org/apache/commons/cli/bug/BugCLI162Test.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 746137.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12412659">CLI-174</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12400574" name="CLI-162-additional.patch" size="1553" author="bayard" created="Fri, 20 Feb 2009 04:57:58 +0000"/>
                            <attachment id="12400385" name="CLI-162-take2.patch" size="1899" author="bayard" created="Wed, 18 Feb 2009 05:41:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0frmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>