diff --git a/build.gradle.kts b/build.gradle.kts
index e2ffbe496..983fba7ea 100644
--- a/build.gradle.kts
+++ b/build.gradle.kts
@@ -170,6 +170,7 @@ subprojects {
 			}
 
 			kotlin {
+				targetExclude("**/src/test/resources/**")
 				ktlint(libs.versions.ktlint.get())
 				licenseHeaderFile(headerFile)
 				trimTrailingWhitespace()
diff --git a/documentation/src/docs/asciidoc/link-attributes.adoc b/documentation/src/docs/asciidoc/link-attributes.adoc
index 297c2bab8..68d61bc1b 100644
--- a/documentation/src/docs/asciidoc/link-attributes.adoc
+++ b/documentation/src/docs/asciidoc/link-attributes.adoc
@@ -39,6 +39,7 @@ endif::[]
 :SummaryGeneratingListener:                  {javadoc-root}/org.junit.platform.launcher/org/junit/platform/launcher/listeners/SummaryGeneratingListener.html[SummaryGeneratingListener]
 :TestExecutionListener:                      {javadoc-root}/org.junit.platform.launcher/org/junit/platform/launcher/TestExecutionListener.html[TestExecutionListener]
 :TestPlan:                                   {javadoc-root}/org.junit.platform.launcher/org/junit/platform/launcher/TestPlan.html[TestPlan]
+:UniqueIdTrackingListener:                   {javadoc-root}/org.junit.platform.launcher/org/junit/platform/launcher/listeners/UniqueIdTrackingListener.html[UniqueIdTrackingListener]
 // Platform Reporting
 :LegacyXmlReportGeneratingListener:          {javadoc-root}/org.junit.platform.reporting/org/junit/platform/reporting/legacy/xml/LegacyXmlReportGeneratingListener.html[LegacyXmlReportGeneratingListener]
 // Platform Runner
diff --git a/documentation/src/docs/asciidoc/release-notes/release-notes-5.8.0-M2.adoc b/documentation/src/docs/asciidoc/release-notes/release-notes-5.8.0-M2.adoc
index 9f73ac01a..8ba703254 100644
--- a/documentation/src/docs/asciidoc/release-notes/release-notes-5.8.0-M2.adoc
+++ b/documentation/src/docs/asciidoc/release-notes/release-notes-5.8.0-M2.adoc
@@ -23,7 +23,11 @@ on GitHub.
 
 ==== New Features and Improvements
 
-* ‚ùì
+* New `UniqueIdTrackingListener` which is a `TestExecutionListener` that tracks the unique
+  IDs of all tests that were executed during the `TestPlan` and generates a file
+  containing the unique IDs. The generated file can be used to rerun those tests -- for
+  example, in order to run the same set of tests executed on the JVM subsequently within a
+  GraalVM native image. See the Javadoc for `{UniqueIdTrackingListener}` for details.
 
 
 [[release-notes-5.8.0-M2-junit-jupiter]]
diff --git a/junit-platform-launcher/src/main/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListener.java b/junit-platform-launcher/src/main/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListener.java
new file mode 100644
index 000000000..7e6a921b5
--- /dev/null
+++ b/junit-platform-launcher/src/main/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListener.java
@@ -0,0 +1,223 @@
+/*
+ * Copyright 2015-2021 the original author or authors.
+ *
+ * All rights reserved. This program and the accompanying materials are
+ * made available under the terms of the Eclipse Public License v2.0 which
+ * accompanies this distribution and is available at
+ *
+ * https://www.eclipse.org/legal/epl-v20.html
+ */
+
+package org.junit.platform.launcher.listeners;
+
+import static org.apiguardian.api.API.Status.EXPERIMENTAL;
+
+import java.io.IOException;
+import java.io.PrintWriter;
+import java.nio.charset.StandardCharsets;
+import java.nio.file.Files;
+import java.nio.file.Path;
+import java.nio.file.Paths;
+import java.util.ArrayList;
+import java.util.List;
+
+import org.apiguardian.api.API;
+import org.junit.platform.commons.logging.Logger;
+import org.junit.platform.commons.logging.LoggerFactory;
+import org.junit.platform.commons.util.StringUtils;
+import org.junit.platform.engine.TestExecutionResult;
+import org.junit.platform.launcher.TestExecutionListener;
+import org.junit.platform.launcher.TestIdentifier;
+import org.junit.platform.launcher.TestPlan;
+
+/**
+ * {@code UniqueIdTrackingListener} is a {@link TestExecutionListener} that tracks
+ * the {@linkplain TestIdentifier#getUniqueId() unique IDs} of all
+ * {@linkplain TestIdentifier#isTest() tests} that were
+ * {@linkplain #executionFinished executed} during the execution of the
+ * {@link TestPlan} and generates a file containing the unique IDs once execution
+ * of the {@code TestPlan} has {@linkplain #testPlanExecutionFinished(TestPlan)
+ * finished}.
+ *
+ * <p>Tests are tracked regardless of their {@link TestExecutionResult}, and the
+ * unique IDs are written to the output file, one ID per line, encoding using UTF-8.
+ *
+ * <p>The output file can be used to execute the same set of tests again without
+ * having to query the user configuration for the test plan and without having to
+ * perform test discovery again. This can be useful for test environments such as
+ * within a native image &mdash; for example, a GraalVM native image &mdash; in
+ * order to rerun the exact same tests from a standard JVM test run within a
+ * native image.
+ *
+ * <h3>Configuration and Defaults</h3>
+ *
+ * <p>The {@code OUTPUT_DIR} is the directory in which this listener generates
+ * the output file (the {@code OUTPUT_FILE}). The exact path of the generated file
+ * is {@code OUTPUT_DIR}/{@code OUTPUT_FILE}.
+ *
+ * <p>The name of the {@code OUTPUT_FILE} defaults to {@link #DEFAULT_FILE_NAME},
+ * but a custom file name can be configured via the {@link #OUTPUT_FILE_PROPERTY_NAME}
+ * JVM system property.
+ *
+ * <p>The {@code OUTPUT_DIR} can be set to a custom directory via the
+ * {@link #OUTPUT_DIR_PROPERTY_NAME} JVM system property. Otherwise the following
+ * algorithm is used to select a default output directory.
+ *
+ * <ul>
+ * <li>If the current working directory of the Java process contains a file named
+ * {@code pom.xml}, the output directory will be {@code ./target}, following the
+ * conventions of Maven.</li>
+ * <li>If the current working directory of the Java process contains a file with
+ * the extension {@code .gradle} or {@code .gradle.kts}, the output directory
+ * will be {@code ./build}, following the conventions of Gradle.</li>
+ * <li>Otherwise, the current working directory of the Java process will be used
+ * as the output directory.</li>
+ * </ul>
+ *
+ * <p>For example, in a project using Gradle as the build tool, the file generated
+ * by this listener would be {@code ./build/junit-platform-unique-test-ids.txt}
+ * by default.
+ *
+ * @since 1.8
+ */
+@API(status = EXPERIMENTAL, since = "1.8")
+public class UniqueIdTrackingListener implements TestExecutionListener {
+
+	/**
+	 * Property name used to enable the {@code UniqueIdTrackingListener}: {@value}
+	 *
+	 * <p>The {@code UniqueIdTrackingListener} is registered automatically via
+	 * Java's {@link java.util.ServiceLoader} mechanism but disabled by default.
+	 *
+	 * <p>Set the value of this property to {@code true} to enable this listener.
+	 */
+	public static final String LISTENER_ENABLED_PROPERTY_NAME = "junit.platform.listeners.uid.tracking.enabled";
+
+	/**
+	 * Property name used to set the path to the output directory for the file
+	 * generated by the {@code UniqueIdTrackingListener}: {@value}
+	 *
+	 * <p>For details on the default output directory, see the
+	 * {@linkplain UniqueIdTrackingListener class-level Javadoc}.
+	 */
+	public static final String OUTPUT_DIR_PROPERTY_NAME = "junit.platform.listeners.uid.tracking.output.dir";
+
+	/**
+	 * Property name used to set the name of the file generated by the
+	 * {@code UniqueIdTrackingListener}: {@value}
+	 *
+	 * <p>Defaults to {@link #DEFAULT_FILE_NAME}.
+	 */
+	public static final String OUTPUT_FILE_PROPERTY_NAME = "junit.platform.listeners.uid.tracking.output.file";
+
+	/**
+	 * The default name of the file generated by the {@code UniqueIdTrackingListener}: {@value}
+	 *
+	 * @see #OUTPUT_FILE_PROPERTY_NAME
+	 */
+	public static final String DEFAULT_FILE_NAME = "junit-platform-unique-test-ids.txt";
+
+	private final Logger logger = LoggerFactory.getLogger(UniqueIdTrackingListener.class);
+
+	private final List<String> uniqueIds = new ArrayList<>();
+
+	private final boolean enabled;
+
+	public UniqueIdTrackingListener() {
+		this.enabled = Boolean.getBoolean(LISTENER_ENABLED_PROPERTY_NAME);
+	}
+
+	@Override
+	public void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {
+		if (this.enabled && testIdentifier.isTest()) {
+			this.uniqueIds.add(testIdentifier.getUniqueId());
+		}
+	}
+
+	@Override
+	public void testPlanExecutionFinished(TestPlan testPlan) {
+		if (this.enabled) {
+			Path outputFile;
+			try {
+				outputFile = getOutputFile();
+			}
+			catch (IOException ex) {
+				logger.error(ex, () -> "Failed to create output file");
+				// Abort since we cannot generate the file.
+				return;
+			}
+
+			logger.debug(() -> "Writing unique IDs to output file " + outputFile.toAbsolutePath());
+			try (PrintWriter writer = new PrintWriter(Files.newBufferedWriter(outputFile, StandardCharsets.UTF_8))) {
+				this.uniqueIds.forEach(writer::println);
+				writer.flush();
+			}
+			catch (IOException ex) {
+				logger.error(ex, () -> "Failed to write unique IDs to output file " + outputFile.toAbsolutePath());
+			}
+		}
+	}
+
+	private Path getOutputFile() throws IOException {
+		String filename = System.getProperty(OUTPUT_FILE_PROPERTY_NAME, DEFAULT_FILE_NAME);
+		Path outputFile = getOutputDir().resolve(filename);
+
+		if (Files.exists(outputFile)) {
+			Files.delete(outputFile);
+		}
+
+		Files.createFile(outputFile);
+
+		return outputFile;
+	}
+
+	Path getOutputDir() throws IOException {
+		Path cwd = currentWorkingDir();
+		Path outputDir;
+
+		String customDir = System.getProperty(OUTPUT_DIR_PROPERTY_NAME);
+		if (StringUtils.isNotBlank(customDir)) {
+			outputDir = cwd.resolve(customDir);
+		}
+		else if (Files.exists(cwd.resolve("pom.xml"))) {
+			outputDir = cwd.resolve("target");
+		}
+		else if (containsFilesWithExtensions(cwd, ".gradle", ".gradle.kts")) {
+			outputDir = cwd.resolve("build");
+		}
+		else {
+			outputDir = cwd;
+		}
+
+		if (!Files.exists(outputDir)) {
+			Files.createDirectories(outputDir);
+		}
+
+		return outputDir;
+	}
+
+	/**
+	 * Get the current working directory.
+	 * <p>Package private for testing purposes.
+	 */
+	Path currentWorkingDir() {
+		return Paths.get(".");
+	}
+
+	/**
+	 * Determine if the supplied directory contains files with any of the
+	 * supplied extensions.
+	 */
+	private boolean containsFilesWithExtensions(Path dir, String... extensions) throws IOException {
+		return Files.find(dir, 1, //
+			(path, basicFileAttributes) -> {
+				for (String extension : extensions) {
+					if (path.getFileName().toString().endsWith(extension)) {
+						return true;
+					}
+				}
+				return false;
+			}).findFirst().isPresent();
+	}
+
+}
diff --git a/junit-platform-launcher/src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener b/junit-platform-launcher/src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener
new file mode 100644
index 000000000..85f17ac24
--- /dev/null
+++ b/junit-platform-launcher/src/main/resources/META-INF/services/org.junit.platform.launcher.TestExecutionListener
@@ -0,0 +1 @@
+org.junit.platform.launcher.listeners.UniqueIdTrackingListener
diff --git a/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerIntegrationTests.java b/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerIntegrationTests.java
new file mode 100644
index 000000000..485369736
--- /dev/null
+++ b/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerIntegrationTests.java
@@ -0,0 +1,254 @@
+/*
+ * Copyright 2015-2021 the original author or authors.
+ *
+ * All rights reserved. This program and the accompanying materials are
+ * made available under the terms of the Eclipse Public License v2.0 which
+ * accompanies this distribution and is available at
+ *
+ * https://www.eclipse.org/legal/epl-v20.html
+ */
+
+package org.junit.platform.launcher.listeners;
+
+import static org.assertj.core.api.Assertions.assertThat;
+import static org.junit.jupiter.api.Assertions.assertEquals;
+import static org.junit.jupiter.api.Assertions.fail;
+import static org.junit.jupiter.api.Assumptions.assumeTrue;
+import static org.junit.jupiter.api.DynamicTest.dynamicTest;
+import static org.junit.platform.commons.util.FunctionUtils.where;
+import static org.junit.platform.engine.discovery.DiscoverySelectors.selectClass;
+import static org.junit.platform.launcher.EngineFilter.includeEngines;
+import static org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.request;
+import static org.junit.platform.launcher.listeners.UniqueIdTrackingListener.DEFAULT_FILE_NAME;
+import static org.junit.platform.launcher.listeners.UniqueIdTrackingListener.LISTENER_ENABLED_PROPERTY_NAME;
+import static org.junit.platform.launcher.listeners.UniqueIdTrackingListener.OUTPUT_DIR_PROPERTY_NAME;
+import static org.junit.platform.launcher.listeners.UniqueIdTrackingListener.OUTPUT_FILE_PROPERTY_NAME;
+import static org.junit.platform.testkit.engine.Event.byTestDescriptor;
+import static org.junit.platform.testkit.engine.EventConditions.abortedWithReason;
+import static org.junit.platform.testkit.engine.EventConditions.event;
+import static org.junit.platform.testkit.engine.EventConditions.finishedSuccessfully;
+import static org.junit.platform.testkit.engine.EventConditions.finishedWithFailure;
+import static org.junit.platform.testkit.engine.EventConditions.test;
+import static org.junit.platform.testkit.engine.TestExecutionResultConditions.instanceOf;
+
+import java.io.IOException;
+import java.nio.file.Files;
+import java.nio.file.Path;
+import java.nio.file.Paths;
+import java.util.ArrayList;
+import java.util.List;
+import java.util.ServiceLoader;
+import java.util.stream.Stream;
+
+import org.assertj.core.api.Condition;
+import org.junit.jupiter.api.AfterEach;
+import org.junit.jupiter.api.BeforeEach;
+import org.junit.jupiter.api.Disabled;
+import org.junit.jupiter.api.DynamicTest;
+import org.junit.jupiter.api.Test;
+import org.junit.jupiter.api.TestFactory;
+import org.junit.platform.engine.TestDescriptor;
+import org.junit.platform.engine.TestExecutionResult;
+import org.junit.platform.engine.discovery.ClassSelector;
+import org.junit.platform.launcher.LauncherDiscoveryRequest;
+import org.junit.platform.launcher.TestExecutionListener;
+import org.junit.platform.launcher.TestIdentifier;
+import org.junit.platform.launcher.core.LauncherFactory;
+import org.junit.platform.testkit.engine.EngineTestKit;
+import org.junit.platform.testkit.engine.Event;
+import org.opentest4j.AssertionFailedError;
+import org.opentest4j.TestAbortedException;
+
+/**
+ * Integration tests for the {@link UniqueIdTrackingListener}.
+ *
+ * @since 1.8
+ */
+class UniqueIdTrackingListenerIntegrationTests {
+
+	private static final String passingTest = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase1]/[method:passingTest()]";
+	private static final String abortedTest = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase1]/[method:abortedTest()]";
+	private static final String failingTest = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase1]/[method:failingTest()]";
+	private static final String dynamicTest1 = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase1]/[test-factory:dynamicTests()]/[dynamic-test:#1]";
+	private static final String dynamicTest2 = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase1]/[test-factory:dynamicTests()]/[dynamic-test:#2]";
+	private static final String test1 = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase2]/[method:test1()]";
+	private static final String test2 = "[engine:junit-jupiter]/[class:org.junit.platform.launcher.listeners.UniqueIdTrackingListenerIntegrationTests$TestCase2]/[method:test2()]";
+
+	private static final String[] expectedUniqueIds = { passingTest, abortedTest, failingTest, dynamicTest1,
+			dynamicTest2, test1, test2 };
+
+	@BeforeEach
+	@AfterEach
+	void clearSystemProperties() {
+		System.clearProperty(LISTENER_ENABLED_PROPERTY_NAME);
+		System.clearProperty(OUTPUT_DIR_PROPERTY_NAME);
+		System.clearProperty(OUTPUT_FILE_PROPERTY_NAME);
+	}
+
+	@Test
+	void confirmExpectedUniqueIdsViaEngineTestKit() {
+		// @formatter:off
+		EngineTestKit.engine("junit-jupiter")
+			.selectors(selectClasses())
+			.execute()
+			.testEvents()
+			.assertStatistics(stats -> stats.started(7).skipped(1).aborted(1).succeeded(5).failed(1))
+			.assertEventsMatchLoosely(
+				event(test(uniqueId(passingTest)), finishedSuccessfully()),
+				event(test(uniqueId(abortedTest)), abortedWithReason(instanceOf(TestAbortedException.class))),
+				event(test(uniqueId(failingTest)), finishedWithFailure(instanceOf(AssertionFailedError.class))),
+				event(test(uniqueId(dynamicTest1)), finishedSuccessfully()),
+				event(test(uniqueId(dynamicTest2)), finishedSuccessfully()),
+				event(test(uniqueId(test1)), finishedSuccessfully()),
+				event(test(uniqueId(test2)), finishedSuccessfully())
+			);
+		// @formatter:on
+	}
+
+	@Test
+	void listenerIsRegisteredButDisabledByDefault() throws Exception {
+		long numListenersRegistered = ServiceLoader.load(TestExecutionListener.class).stream()//
+				.filter(provider -> UniqueIdTrackingListener.class.equals(provider.type()))//
+				.count();
+		assertThat(numListenersRegistered).isEqualTo(1);
+
+		Path path = Paths.get("build", DEFAULT_FILE_NAME);
+		Files.deleteIfExists(path);
+
+		try {
+			List<String> actualUniqueIds = executeTests();
+
+			// Sanity check using the results of our local TestExecutionListener
+			assertThat(actualUniqueIds).containsExactlyInAnyOrder(expectedUniqueIds);
+
+			// Check that file was not generated by the UniqueIdTrackingListener
+			assertThat(path).doesNotExist();
+		}
+		finally {
+			Files.deleteIfExists(path);
+		}
+	}
+
+	@Test
+	void verifyUniqueIdsAreTrackedWithDefaults() throws Exception {
+		Path path = Paths.get("build", DEFAULT_FILE_NAME);
+		verifyUniqueIdsAreTracked(path);
+	}
+
+	@Test
+	void verifyUniqueIdsAreTrackedWithCustomOutputFile() throws Exception {
+		String customFilename = "test_ids.txt";
+		System.setProperty(OUTPUT_FILE_PROPERTY_NAME, customFilename);
+
+		Path path = Paths.get("build", customFilename);
+		verifyUniqueIdsAreTracked(path);
+	}
+
+	@Test
+	void verifyUniqueIdsAreTrackedWithCustomOutputDir() throws Exception {
+		String customDir = "build/UniqueIdTrackingListenerIntegrationTests";
+		System.setProperty(OUTPUT_DIR_PROPERTY_NAME, customDir);
+
+		Path path = Paths.get(customDir, DEFAULT_FILE_NAME);
+		verifyUniqueIdsAreTracked(path);
+	}
+
+	@Test
+	void verifyUniqueIdsAreTrackedWithCustomOutputFileAndCustomOutputDir() throws Exception {
+		String customFilename = "test_ids.txt";
+		String customDir = "build/UniqueIdTrackingListenerIntegrationTests";
+		System.setProperty(OUTPUT_DIR_PROPERTY_NAME, customDir);
+		System.setProperty(OUTPUT_FILE_PROPERTY_NAME, customFilename);
+
+		Path path = Paths.get(customDir, customFilename);
+		verifyUniqueIdsAreTracked(path);
+	}
+
+	private void verifyUniqueIdsAreTracked(Path path) throws IOException {
+		enableListener();
+		Files.deleteIfExists(path);
+		try {
+			List<String> actualUniqueIds = executeTests();
+
+			// Sanity check using the results of our local TestExecutionListener
+			assertThat(actualUniqueIds).containsExactlyInAnyOrder(expectedUniqueIds);
+
+			// Check contents of the file generated by the UniqueIdTrackingListener
+			assertThat(Files.readAllLines(path)).containsExactlyInAnyOrder(expectedUniqueIds);
+		}
+		finally {
+			Files.deleteIfExists(path);
+		}
+	}
+
+	private static void enableListener() {
+		System.setProperty(LISTENER_ENABLED_PROPERTY_NAME, "true");
+	}
+
+	private static Condition<Event> uniqueId(String uniqueId) {
+		return new Condition<>(
+			byTestDescriptor(where(TestDescriptor::getUniqueId, uid -> uid.toString().equals(uniqueId))),
+			"descriptor with uniqueId '%s'", uniqueId);
+	}
+
+	private static List<String> executeTests() {
+		List<String> uniqueIds = new ArrayList<>();
+		LauncherDiscoveryRequest request = request()//
+				.selectors(selectClasses())//
+				.filters(includeEngines("junit-jupiter")).build();
+		LauncherFactory.create().execute(request, new TestExecutionListener() {
+			@Override
+			public void executionFinished(TestIdentifier testIdentifier, TestExecutionResult testExecutionResult) {
+				if (testIdentifier.isTest()) {
+					uniqueIds.add(testIdentifier.getUniqueId());
+				}
+			}
+		});
+		return uniqueIds;
+	}
+
+	private static ClassSelector[] selectClasses() {
+		return new ClassSelector[] { selectClass(TestCase1.class), selectClass(TestCase2.class) };
+	}
+
+	// -------------------------------------------------------------------------
+
+	static class TestCase1 {
+
+		@Test
+		void passingTest() {
+		}
+
+		@Test
+		@Disabled("testing")
+		void disabledTest() {
+		}
+
+		@Test
+		void abortedTest() {
+			assumeTrue(false);
+		}
+
+		@Test
+		void failingTest() {
+			fail();
+		}
+
+		@TestFactory
+		Stream<DynamicTest> dynamicTests() {
+			return Stream.of("cat", "dog").map(text -> dynamicTest(text, () -> assertEquals(3, text.length())));
+		}
+	}
+
+	static class TestCase2 {
+
+		@Test
+		void test1() {
+		}
+
+		@Test
+		void test2() {
+		}
+	}
+
+}
diff --git a/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerUnitTests.java b/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerUnitTests.java
new file mode 100644
index 000000000..a04ba7251
--- /dev/null
+++ b/platform-tests/src/test/java/org/junit/platform/launcher/listeners/UniqueIdTrackingListenerUnitTests.java
@@ -0,0 +1,113 @@
+/*
+ * Copyright 2015-2021 the original author or authors.
+ *
+ * All rights reserved. This program and the accompanying materials are
+ * made available under the terms of the Eclipse Public License v2.0 which
+ * accompanies this distribution and is available at
+ *
+ * https://www.eclipse.org/legal/epl-v20.html
+ */
+
+package org.junit.platform.launcher.listeners;
+
+import static org.assertj.core.api.Assertions.assertThat;
+import static org.junit.platform.launcher.listeners.UniqueIdTrackingListener.OUTPUT_DIR_PROPERTY_NAME;
+
+import java.io.IOException;
+import java.nio.file.Files;
+import java.nio.file.Path;
+import java.nio.file.Paths;
+
+import org.junit.jupiter.api.Test;
+
+/**
+ * Unit tests for the {@link UniqueIdTrackingListener}.
+ *
+ * @since 1.8
+ */
+class UniqueIdTrackingListenerUnitTests {
+
+	@Test
+	void getOutputDirUsesCustomOutputDir() throws Exception {
+		try {
+			String customDir = "build/UniqueIdTrackingListenerIntegrationTests";
+			System.setProperty(OUTPUT_DIR_PROPERTY_NAME, customDir);
+
+			UniqueIdTrackingListener listener = new UniqueIdTrackingListener();
+			Path outputDir = listener.getOutputDir();
+			assertThat(Files.isSameFile(Paths.get(customDir), outputDir)).isTrue();
+			assertThat(outputDir).exists();
+		}
+		finally {
+			System.clearProperty(OUTPUT_DIR_PROPERTY_NAME);
+		}
+	}
+
+	@Test
+	void getOutputDirFallsBackToCurrentWorkingDir() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking";
+
+		UniqueIdTrackingListener listener = new UniqueIdTrackingListener() {
+			@Override
+			Path currentWorkingDir() {
+				return Paths.get(cwd);
+			}
+		};
+		Path outputDir = listener.getOutputDir();
+		assertThat(Files.isSameFile(Paths.get(cwd), outputDir)).isTrue();
+		assertThat(outputDir).exists();
+	}
+
+	@Test
+	void getOutputDirDetectsMavenPom() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking/maven";
+		String expected = "target";
+
+		assertOutputDirIsDetected(cwd, expected);
+	}
+
+	@Test
+	void getOutputDirDetectsGradleGroovyDefaultBuildScript() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking/gradle/groovy";
+		String expected = "build";
+
+		assertOutputDirIsDetected(cwd, expected);
+	}
+
+	@Test
+	void getOutputDirDetectsGradleGroovyCustomBuildScript() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking/gradle/groovy/sub-project";
+		String expected = "build";
+
+		assertOutputDirIsDetected(cwd, expected);
+	}
+
+	@Test
+	void getOutputDirDetectsGradleKotlinDefaultBuildScript() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking/gradle/kotlin";
+		String expected = "build";
+
+		assertOutputDirIsDetected(cwd, expected);
+	}
+
+	@Test
+	void getOutputDirDetectsGradleKotlinCustomBuildScript() throws Exception {
+		String cwd = "src/test/resources/listeners/uidtracking/gradle/kotlin/sub-project";
+		String expected = "build";
+
+		assertOutputDirIsDetected(cwd, expected);
+	}
+
+	private void assertOutputDirIsDetected(String cwd, String expected) throws IOException {
+		UniqueIdTrackingListener listener = new UniqueIdTrackingListener() {
+			@Override
+			Path currentWorkingDir() {
+				return Paths.get(cwd);
+			}
+		};
+		Path outputDir = listener.getOutputDir();
+		assertThat(Files.isSameFile(Paths.get(cwd, expected), outputDir)).isTrue();
+		assertThat(outputDir).exists();
+	}
+
+}
diff --git a/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/build.gradle b/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/build.gradle
new file mode 100644
index 000000000..a4185e839
--- /dev/null
+++ b/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/build.gradle
@@ -0,0 +1 @@
+// This file is used in tests for the UniqueIdTrackingListener
diff --git a/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/sub-project/sub-project.gradle b/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/sub-project/sub-project.gradle
new file mode 100644
index 000000000..a4185e839
--- /dev/null
+++ b/platform-tests/src/test/resources/listeners/uidtracking/gradle/groovy/sub-project/sub-project.gradle
@@ -0,0 +1 @@
+// This file is used in tests for the UniqueIdTrackingListener
diff --git a/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/build.gradle.kts b/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/build.gradle.kts
new file mode 100644
index 000000000..a4185e839
--- /dev/null
+++ b/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/build.gradle.kts
@@ -0,0 +1 @@
+// This file is used in tests for the UniqueIdTrackingListener
diff --git a/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/sub-project/sub-project.gradle.kts b/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/sub-project/sub-project.gradle.kts
new file mode 100644
index 000000000..a4185e839
--- /dev/null
+++ b/platform-tests/src/test/resources/listeners/uidtracking/gradle/kotlin/sub-project/sub-project.gradle.kts
@@ -0,0 +1 @@
+// This file is used in tests for the UniqueIdTrackingListener
diff --git a/platform-tests/src/test/resources/listeners/uidtracking/maven/pom.xml b/platform-tests/src/test/resources/listeners/uidtracking/maven/pom.xml
new file mode 100644
index 000000000..1a462ec95
--- /dev/null
+++ b/platform-tests/src/test/resources/listeners/uidtracking/maven/pom.xml
@@ -0,0 +1 @@
+<!-- This file is used in tests for the UniqueIdTrackingListener -->
diff --git a/platform-tooling-support-tests/projects/standalone/expected-err.txt b/platform-tooling-support-tests/projects/standalone/expected-err.txt
index d49887b2d..ae1258c81 100644
--- a/platform-tooling-support-tests/projects/standalone/expected-err.txt
+++ b/platform-tooling-support-tests/projects/standalone/expected-err.txt
@@ -5,6 +5,6 @@
 .+ org.junit.platform.launcher.core.ServiceLoaderRegistry load
 .+ Loaded LauncherDiscoveryListener instances: ..
 .+ org.junit.platform.launcher.core.ServiceLoaderRegistry load
-.+ Loaded TestExecutionListener instances: ..
+.+ Loaded TestExecutionListener instances: .+
 .+ org.junit.platform.launcher.core.ServiceLoaderRegistry load
 .+ Loaded LauncherSessionListener instances: ..
