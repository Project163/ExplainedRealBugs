diff --git a/.travis.yml b/.travis.yml
index 1c0030ce7..daa12bba1 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -33,4 +33,4 @@ install: ./gradlew -version
 script:
   - java -version
   - ./gradlew -version
-  - ./gradlew --refresh-dependencies clean check -Dscan
+  - ./gradlew --refresh-dependencies clean check --scan
diff --git a/build.gradle b/build.gradle
index b0361172b..4ab3af3a0 100644
--- a/build.gradle
+++ b/build.gradle
@@ -15,7 +15,7 @@ buildscript {
 }
 
 plugins {
-	id 'com.gradle.build-scan' version '1.3'
+	id 'com.gradle.build-scan' version '1.6'
 	id 'net.nemerosa.versioning' version '2.6.0'
 }
 
@@ -157,7 +157,7 @@ allprojects { subproj ->
 	}
 
 	checkstyle {
-		toolVersion = 6.11
+		toolVersion = '7.6'
 	}
 	checkstyleMain {
 		configFile = rootProject.file('src/checkstyle/checkstyleMain.xml')
diff --git a/junit-platform-gradle-plugin/junit-platform-gradle-plugin.gradle b/junit-platform-gradle-plugin/junit-platform-gradle-plugin.gradle
index a02281243..57f9a65f3 100644
--- a/junit-platform-gradle-plugin/junit-platform-gradle-plugin.gradle
+++ b/junit-platform-gradle-plugin/junit-platform-gradle-plugin.gradle
@@ -1,14 +1,47 @@
 apply plugin: 'groovy'
 
+configurations {
+	functionalTestRuntimeTestCompile {
+		description = 'Local dependencies used for compiling tests source code inside of Gradle functional tests'
+	}
+	functionalTestRuntimeTestRuntime {
+		description = 'Local dependencies used for tests runtime inside of Gradle functional tests'
+	}
+}
+
+// Write the plugin's classpath to a file to share with the tests.
+// See https://docs.gradle.org/current/userguide/test_kit.html
+Task createClasspathManifests = tasks.create('createClasspathManifests') {
+	description = 'Generate classpath manifests for functional tests so that they can reference locally built libraries for use with Gradle Test Kit'
+	File functionalTestClasspathsDir = file("$buildDir/functionalTestClasspathManifests")
+
+	inputs.files sourceSets.main.runtimeClasspath
+	inputs.files configurations.functionalTestRuntimeTestCompile
+	inputs.files configurations.functionalTestRuntimeTestRuntime
+	outputs.dir functionalTestClasspathsDir
+
+	doLast {
+		functionalTestClasspathsDir.mkdirs()
+		file("$functionalTestClasspathsDir/plugin-classpath.txt").text = sourceSets.main.runtimeClasspath.join(System.lineSeparator())
+		file("$functionalTestClasspathsDir/test-compile-classpath.txt").text = configurations.functionalTestRuntimeTestCompile.join(System.lineSeparator())
+		file("$functionalTestClasspathsDir/test-runtime-classpath.txt").text = configurations.functionalTestRuntimeTestRuntime.join(System.lineSeparator())
+	}
+}
+
 dependencies {
 	implementation localGroovy()
 	implementation gradleApi()
 	api(project(path: ':junit-platform-console', configuration: 'shadow'))
 	api(project(':junit-platform-launcher'))
+	testRuntimeOnly("junit:junit:${junit4Version}")
 	testImplementation('org.spockframework:spock-core:1.0-groovy-2.4') {
-		transitive = false
+		exclude module: 'groovy-all'
 	}
-	testRuntimeOnly("junit:junit:${junit4Version}")
+	testImplementation(gradleTestKit())
+	functionalTestRuntimeTestCompile(project(':junit-jupiter-api'))
+	functionalTestRuntimeTestRuntime(project(':junit-platform-console'))
+	functionalTestRuntimeTestRuntime(project(':junit-jupiter-engine'))
+	testRuntimeOnly(files(createClasspathManifests))
 }
 
 processResources {
diff --git a/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy b/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
index 67c9b45ad..6283f64d8 100644
--- a/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
+++ b/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
@@ -12,6 +12,7 @@ package org.junit.platform.gradle.plugin
 import org.gradle.api.GradleException
 import org.gradle.api.Plugin
 import org.gradle.api.Project
+import org.gradle.api.plugins.JavaBasePlugin
 import org.gradle.api.tasks.JavaExec
 import org.gradle.util.GradleVersion
 import org.junit.platform.console.ConsoleLauncher
@@ -51,8 +52,15 @@ class JUnitPlatformPlugin implements Plugin<Project> {
 			deps.add(project.dependencies.create("org.junit.platform:junit-platform-console:${version}"))
 		}
 
+		JavaExec junitTask = project.tasks.create(TASK_NAME, JavaExec) {
+			it.with {
+				group = JavaBasePlugin.VERIFICATION_GROUP
+				description = 'Runs tests on the JUnit Platform.'
+			}
+		}
+
 		project.afterEvaluate {
-			configure(project, junitExtension)
+			configure(project, junitTask, junitExtension)
 		}
 	}
 
@@ -64,37 +72,34 @@ class JUnitPlatformPlugin implements Plugin<Project> {
 		return properties.getProperty("version")
 	}
 
-	private void configure(Project project, JUnitPlatformExtension junitExtension) {
-		project.task(
-				TASK_NAME,
-				type: JavaExec,
-				group: 'verification',
-				description: 'Runs tests on the JUnit Platform.') { junitTask ->
-
-			junitTask.inputs.property('enableStandardTestTask', junitExtension.enableStandardTestTask)
-			junitTask.inputs.property('selectors.uris', junitExtension.selectors.uris)
-			junitTask.inputs.property('selectors.files', junitExtension.selectors.files)
-			junitTask.inputs.property('selectors.directories', junitExtension.selectors.directories)
-			junitTask.inputs.property('selectors.packages', junitExtension.selectors.packages)
-			junitTask.inputs.property('selectors.classes', junitExtension.selectors.classes)
-			junitTask.inputs.property('selectors.methods', junitExtension.selectors.methods)
-			junitTask.inputs.property('selectors.resources', junitExtension.selectors.resources)
-			junitTask.inputs.property('filters.engines.include', junitExtension.filters.engines.include)
-			junitTask.inputs.property('filters.engines.exclude', junitExtension.filters.engines.exclude)
-			junitTask.inputs.property('filters.tags.include', junitExtension.filters.tags.include)
-			junitTask.inputs.property('filters.tags.exclude', junitExtension.filters.tags.exclude)
-			junitTask.inputs.property('filters.includeClassNamePatterns', junitExtension.filters.includeClassNamePatterns)
-			junitTask.inputs.property('filters.packages.include', junitExtension.filters.packages.include)
-			junitTask.inputs.property('filters.packages.exclude', junitExtension.filters.packages.exclude)
+	private void configure(Project project, JavaExec junitTask, JUnitPlatformExtension junitExtension) {
+		junitTask.with {
+			group = JavaBasePlugin.VERIFICATION_GROUP
+			description = 'Runs tests on the JUnit Platform.'
+			inputs.property('enableStandardTestTask', junitExtension.enableStandardTestTask)
+			inputs.property('selectors.uris', junitExtension.selectors.uris)
+			inputs.property('selectors.files', junitExtension.selectors.files)
+			inputs.property('selectors.directories', junitExtension.selectors.directories)
+			inputs.property('selectors.packages', junitExtension.selectors.packages)
+			inputs.property('selectors.classes', junitExtension.selectors.classes)
+			inputs.property('selectors.methods', junitExtension.selectors.methods)
+			inputs.property('selectors.resources', junitExtension.selectors.resources)
+			inputs.property('filters.engines.include', junitExtension.filters.engines.include)
+			inputs.property('filters.engines.exclude', junitExtension.filters.engines.exclude)
+			inputs.property('filters.tags.include', junitExtension.filters.tags.include)
+			inputs.property('filters.tags.exclude', junitExtension.filters.tags.exclude)
+			inputs.property('filters.includeClassNamePatterns', junitExtension.filters.includeClassNamePatterns)
+			inputs.property('filters.packages.include', junitExtension.filters.packages.include)
+			inputs.property('filters.packages.exclude', junitExtension.filters.packages.exclude)
 
 			def reportsDir = junitExtension.reportsDir ?: project.file("$project.buildDir/test-results/junit-platform")
-			junitTask.outputs.dir reportsDir
+			outputs.dir reportsDir
 
 			if (junitExtension.logManager) {
 				systemProperty 'java.util.logging.manager', junitExtension.logManager
 			}
 
-			configureTaskDependencies(project, junitTask, junitExtension)
+			configureTaskDependencies(project, it, junitExtension)
 
 			// Build the classpath from the user's test runtime classpath and the JUnit
 			// Platform modules.
@@ -103,10 +108,10 @@ class JUnitPlatformPlugin implements Plugin<Project> {
 			// instrumented by Clover in JUnit's build will be shadowed by JARs pulled in
 			// via the junitPlatform configuration... leading to zero code coverage for
 			// the respective modules.
-			junitTask.classpath = project.sourceSets.test.runtimeClasspath + project.configurations.junitPlatform
+			classpath = project.sourceSets.test.runtimeClasspath + project.configurations.junitPlatform
 
-			junitTask.main = ConsoleLauncher.class.getName()
-			junitTask.args buildArgs(project, junitExtension, reportsDir)
+			main = ConsoleLauncher.class.getName()
+			args buildArgs(project, junitExtension, reportsDir)
 		}
 	}
 
@@ -197,5 +202,4 @@ class JUnitPlatformPlugin implements Plugin<Project> {
 			}
 		}
 	}
-
 }
diff --git a/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginFunctionalSpec.groovy b/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginFunctionalSpec.groovy
new file mode 100644
index 000000000..9220f6c00
--- /dev/null
+++ b/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginFunctionalSpec.groovy
@@ -0,0 +1,271 @@
+/*
+ * Copyright 2015-2017 the original author or authors.
+ *
+ * All rights reserved. This program and the accompanying materials are
+ * made available under the terms of the Eclipse Public License v1.0 which
+ * accompanies this distribution and is available at
+ *
+ * http://www.eclipse.org/legal/epl-v10.html
+ */
+package org.junit.platform.gradle.plugin
+
+import java.nio.file.Files
+import java.nio.file.Path
+import java.nio.file.Paths
+import org.gradle.testkit.runner.BuildResult
+import org.gradle.testkit.runner.GradleRunner
+import org.gradle.testkit.runner.TaskOutcome
+import org.junit.Rule
+import org.junit.rules.TemporaryFolder
+import spock.lang.Specification
+
+class JUnitPlatformPluginFunctionalSpec extends Specification {
+
+	@Rule
+	final TemporaryFolder testProjectDir = new TemporaryFolder()
+	private File buildFile
+	private List<File> pluginClasspath
+	private List<File> testCompileClasspath
+	private List<File> testRuntimeClasspath
+
+	def setup() {
+		pluginClasspath = loadClassPathManifestResource('plugin-classpath.txt')
+		testCompileClasspath = loadClassPathManifestResource('test-compile-classpath.txt')
+		testRuntimeClasspath = loadClassPathManifestResource('test-runtime-classpath.txt')
+		buildFile = testProjectDir.newFile('build.gradle')
+		buildFile << """
+buildscript {
+	dependencies {
+		classpath files(${splitClasspath(pluginClasspath)})
+	}
+}
+apply plugin: 'org.junit.platform.gradle.plugin'
+"""
+	}
+
+	def "can be used with 'java' plugin"() {
+		given:
+		javaPlugin()
+		javaFile()
+		succeedingTestFile()
+
+		when:
+		BuildResult result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('build')
+			.build()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.SUCCESS
+		result.task(':build').outcome == TaskOutcome.SUCCESS
+		result.output.contains('1 tests successful')
+	}
+
+	def "can be used with 'java-library' plugin"() {
+		given:
+		javaFile()
+		succeedingTestFile()
+		javaLibraryPlugin()
+
+		when:
+		BuildResult result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('build')
+			.build()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.SUCCESS
+		result.task(':build').outcome == TaskOutcome.SUCCESS
+		result.output.contains('1 tests successful')
+	}
+
+	def "failing test fails build with 'java' plugin"() {
+		given:
+		javaFile()
+		failingTestFile()
+		javaPlugin()
+
+		when:
+		BuildResult result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('build')
+			.buildAndFail()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.FAILED
+		result.output.contains('1 tests failed')
+	}
+
+	def "failing test fails build with 'java-library' plugin"() {
+		given:
+		javaFile()
+		failingTestFile()
+		javaLibraryPlugin()
+
+		when:
+		BuildResult result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('build')
+			.buildAndFail()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.FAILED
+		result.output.contains('1 tests failed')
+	}
+
+	private static String splitClasspath(List<File> dependencies) {
+		return dependencies
+			.collect { it.absolutePath.replace('\\', '\\\\') } // escape backslashes in Windows paths
+			.collect { "'$it'" }
+			.join(', ')
+	}
+
+	private void javaPlugin() {
+		buildFile << """
+apply plugin: 'java'
+
+sourceCompatibility = JavaVersion.VERSION_1_8
+targetCompatibility = JavaVersion.VERSION_1_8
+
+dependencies {
+	testCompile files(${splitClasspath(testCompileClasspath)})
+	testRuntime files(${splitClasspath(testRuntimeClasspath)})
+	// Use local dependencies so that defaultDependencies are not used
+	junitPlatform files(${splitClasspath(testRuntimeClasspath)})
+}
+
+junitPlatform {
+	filters {
+		engines {
+			include 'junit-jupiter'
+		}
+	}
+}
+"""
+	}
+
+	private void javaLibraryPlugin() {
+		buildFile << """
+apply plugin: 'java-library'
+
+sourceCompatibility = JavaVersion.VERSION_1_8
+targetCompatibility = JavaVersion.VERSION_1_8
+
+dependencies {
+	testImplementation files(${splitClasspath(testCompileClasspath)})
+	testRuntimeOnly files(${splitClasspath(testRuntimeClasspath)})
+	// Use local dependencies so that defaultDependencies are not used
+	junitPlatform files(${splitClasspath(testRuntimeClasspath)})
+}
+
+junitPlatform {
+	filters {
+		engines {
+			include 'junit-jupiter'
+		}
+	}
+}
+"""
+	}
+
+	private void javaFile() {
+		Path javaFile = Paths.get(testProjectDir.root.toString(), 'src', 'main', 'java', 'org', 'junit', 'gradletest', 'Adder.java')
+		Files.createDirectories(javaFile.parent)
+		javaFile.withWriter {
+			it.write(
+				'''
+package org.junit.gradletest;
+
+public class Adder {
+		public int add(int a, int b) {
+				return a + b;
+		}
+}
+''')
+		}
+	}
+
+	private void failingTestFile() {
+		Path testPath = Paths.get(testProjectDir.root.toString(), 'src', 'test', 'java', 'org', 'junit', 'gradletest', 'AdderTest.java')
+		Files.createDirectories(testPath.parent)
+		testPath.withWriter {
+			it.write('''
+package org.junit.gradletest;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
+import org.junit.jupiter.api.Test;
+
+class AdderTest {
+		@Test
+		void failingTest() {
+				Adder adder = new Adder();
+				assertEquals(5, adder.add(3, 3), "This should fail!");
+		}
+}
+'''
+			)
+		}
+	}
+
+	def "when tests are executed again after no changes then the junitPlatformTest task is UP-TO-DATE"() {
+		given:
+		javaPlugin()
+		javaFile()
+		succeedingTestFile()
+
+		when:
+		BuildResult result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('test')
+			.build()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.SUCCESS
+
+		when:
+		result = GradleRunner.create()
+			.withProjectDir(testProjectDir.root)
+			.withPluginClasspath(pluginClasspath)
+			.withArguments('test')
+			.build()
+
+		then:
+		result.task(':junitPlatformTest').outcome == TaskOutcome.UP_TO_DATE
+	}
+
+	private void succeedingTestFile() {
+		Path testPath = Paths.get(testProjectDir.root.toString(), 'src', 'test', 'java', 'org', 'junit', 'gradletest', 'AdderTest.java')
+		Files.createDirectories(testPath.parent)
+		testPath.withWriter {
+			it.write('''
+package org.junit.gradletest;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
+import org.junit.jupiter.api.Test;
+
+class AdderTest {
+		@Test
+		void succeedingTest() {
+				Adder adder = new Adder();
+				assertEquals(10, adder.add(5, 5), "This should succeed!");
+		}
+}
+''')
+		}
+	}
+
+	private List<File> loadClassPathManifestResource(String name) {
+		InputStream classpathResource = getClass().classLoader.getResourceAsStream(name)
+		if (classpathResource == null) {
+			throw new IllegalStateException("Did not find required resource with name ${name}")
+		}
+		return classpathResource.readLines().collect { new File(it) }
+	}
+}
diff --git a/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginSpec.groovy b/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginSpec.groovy
index 9013364cf..d1afa35da 100644
--- a/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginSpec.groovy
+++ b/junit-platform-gradle-plugin/src/test/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPluginSpec.groovy
@@ -12,14 +12,13 @@ package org.junit.platform.gradle.plugin
 import org.gradle.api.Project
 import org.gradle.api.Task
 import org.gradle.api.artifacts.Configuration
-import org.gradle.api.artifacts.Dependency
-import org.gradle.api.internal.artifacts.configurations.ConfigurationInternal
 import org.gradle.api.plugins.JavaPlugin
 import org.gradle.api.tasks.JavaExec
 import org.gradle.api.tasks.testing.Test
 import org.gradle.testfixtures.ProjectBuilder
 import org.junit.platform.console.ConsoleLauncher
 import org.junit.platform.engine.discovery.ClassNameFilter
+import spock.lang.Issue
 import spock.lang.Specification
 
 /**
@@ -27,7 +26,7 @@ import spock.lang.Specification
  */
 class JUnitPlatformPluginSpec extends Specification {
 
-	Project project
+	private Project project
 
 	def setup() {
 		project = ProjectBuilder.builder().build()
@@ -53,7 +52,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "setting junitPlatform properties"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -84,7 +83,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "creating junitPlatformTest task"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -143,7 +142,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "uses standard class name pattern"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -155,7 +154,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "enableStandardTestTask set to true"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -169,6 +168,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "when buildDir is set to non-standard location, it will be honored"() {
+		given:
 		project.apply plugin: 'java'
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
@@ -182,6 +182,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "users can set buildDir to be a GString, and it will be converted to file"() {
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -196,7 +197,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "selectors can be specified"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -236,7 +237,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "adds dependencies to configuration"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -259,7 +260,7 @@ class JUnitPlatformPluginSpec extends Specification {
 	}
 
 	def "adds dependencies with fixed version when not explicitly configured"() {
-
+		given:
 		project.apply plugin: 'org.junit.platform.gradle.plugin'
 
 		when:
@@ -276,4 +277,17 @@ class JUnitPlatformPluginSpec extends Specification {
 			.size() == 2
 	}
 
+	@Issue('https://github.com/junit-team/junit5/issues/708')
+	def "can configure the junitPlatformTest task during the configuration phase"() {
+		given:
+		String customDescription = 'My custom description'
+		project.apply plugin: 'org.junit.platform.gradle.plugin'
+
+		when:
+		final junitPlatformTest = project.tasks.getByName('junitPlatformTest')
+		junitPlatformTest.description = customDescription
+
+		then:
+		junitPlatformTest.description == customDescription
+	}
 }
