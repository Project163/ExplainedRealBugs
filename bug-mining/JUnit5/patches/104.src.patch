diff --git a/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy b/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
index 610ca127e..fad9dfce5 100644
--- a/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
+++ b/junit-platform-gradle-plugin/src/main/groovy/org/junit/platform/gradle/plugin/JUnitPlatformPlugin.groovy
@@ -173,7 +173,11 @@ class JUnitPlatformPlugin implements Plugin<Project> {
 		if (selectors.empty) {
 			def rootDirs = []
 			project.sourceSets.each { sourceSet ->
-				rootDirs.addAll(sourceSet.output.classesDirs)
+				if (sourceSet.output.hasProperty('classesDirs')) {
+					rootDirs.addAll(sourceSet.output.classesDirs)
+				} else {
+					rootDirs.add(sourceSet.output.classesDir)
+				}
 				rootDirs.add(sourceSet.output.resourcesDir)
 				rootDirs.addAll(sourceSet.output.dirs.files)
 			}
