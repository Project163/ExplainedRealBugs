{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115/events","html_url":"https://github.com/junit-team/junit-framework/issues/3115","id":1512318274,"node_id":"I_kwDOAbwRH85aJCVC","number":3115,"title":"Stop further suite discovery when encountering a cycle","user":{"login":"killlowkey","id":41176828,"node_id":"MDQ6VXNlcjQxMTc2ODI4","avatar_url":"https://avatars.githubusercontent.com/u/41176828?v=4","gravatar_id":"","url":"https://api.github.com/users/killlowkey","html_url":"https://github.com/killlowkey","followers_url":"https://api.github.com/users/killlowkey/followers","following_url":"https://api.github.com/users/killlowkey/following{/other_user}","gists_url":"https://api.github.com/users/killlowkey/gists{/gist_id}","starred_url":"https://api.github.com/users/killlowkey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killlowkey/subscriptions","organizations_url":"https://api.github.com/users/killlowkey/orgs","repos_url":"https://api.github.com/users/killlowkey/repos","events_url":"https://api.github.com/users/killlowkey/events{/privacy}","received_events_url":"https://api.github.com/users/killlowkey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null},{"id":425245644,"node_id":"MDU6TGFiZWw0MjUyNDU2NDQ=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20discovery","name":"theme: discovery","color":"ffdd22","default":false,"description":null},{"id":650479477,"node_id":"MDU6TGFiZWw2NTA0Nzk0Nzc=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20suites","name":"theme: suites","color":"bfdadc","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"mpkorstanje","id":6946919,"node_id":"MDQ6VXNlcjY5NDY5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/6946919?v=4","gravatar_id":"","url":"https://api.github.com/users/mpkorstanje","html_url":"https://github.com/mpkorstanje","followers_url":"https://api.github.com/users/mpkorstanje/followers","following_url":"https://api.github.com/users/mpkorstanje/following{/other_user}","gists_url":"https://api.github.com/users/mpkorstanje/gists{/gist_id}","starred_url":"https://api.github.com/users/mpkorstanje/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpkorstanje/subscriptions","organizations_url":"https://api.github.com/users/mpkorstanje/orgs","repos_url":"https://api.github.com/users/mpkorstanje/repos","events_url":"https://api.github.com/users/mpkorstanje/events{/privacy}","received_events_url":"https://api.github.com/users/mpkorstanje/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mpkorstanje","id":6946919,"node_id":"MDQ6VXNlcjY5NDY5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/6946919?v=4","gravatar_id":"","url":"https://api.github.com/users/mpkorstanje","html_url":"https://github.com/mpkorstanje","followers_url":"https://api.github.com/users/mpkorstanje/followers","following_url":"https://api.github.com/users/mpkorstanje/following{/other_user}","gists_url":"https://api.github.com/users/mpkorstanje/gists{/gist_id}","starred_url":"https://api.github.com/users/mpkorstanje/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpkorstanje/subscriptions","organizations_url":"https://api.github.com/users/mpkorstanje/orgs","repos_url":"https://api.github.com/users/mpkorstanje/repos","events_url":"https://api.github.com/users/mpkorstanje/events{/privacy}","received_events_url":"https://api.github.com/users/mpkorstanje/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/66","html_url":"https://github.com/junit-team/junit-framework/milestone/66","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/66/labels","id":8591660,"node_id":"MI_kwDOAbwRH84Agxks","number":66,"title":"5.9.2","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":12,"state":"closed","created_at":"2022-10-28T10:22:13Z","updated_at":"2023-01-10T11:13:11Z","due_on":"2023-01-10T08:00:00Z","closed_at":"2023-01-10T11:13:11Z"},"comments":3,"created_at":"2022-12-28T01:51:41Z","updated_at":"2023-01-06T17:14:20Z","closed_at":"2023-01-06T15:17:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Problem\r\nTwo test classes have the annotation @Tag. To run those hoped-for tests, I wish to employ a suite approach. It worked well, if using @SelectClasses in the TestSuite class to choose the included test classes performed nicely. The following issue occurred when test classes were scanned under a specified package using @SelectPackages.\r\n```\r\norg.junit.platform.commons.JUnitException: TestEngine with ID 'junit-platform-suite' failed to discover tests\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:160)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverSafely(EngineDiscoveryOrchestrator.java:132)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:78)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:110)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.junit.platform.commons.JUnitException: TestEngine with ID 'junit-platform-suite' failed to discover tests\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:160)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverSafely(EngineDiscoveryOrchestrator.java:132)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:97)\r\n\tat org.junit.platform.suite.engine.SuiteLauncher.discover(SuiteLauncher.java:57)\r\n\tat org.junit.platform.suite.engine.SuiteTestDescriptor.discover(SuiteTestDescriptor.java:120)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n\tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\r\n\tat org.junit.platform.suite.engine.DiscoverySelectorResolver.discoverSuites(DiscoverySelectorResolver.java:36)\r\n\tat org.junit.platform.suite.engine.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:42)\r\n\tat org.junit.platform.suite.engine.SuiteTestEngine.discover(SuiteTestEngine.java:58)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:152)\r\n\t... 13 more\r\nCaused by: org.junit.platform.commons.JUnitException: ClassSelector [className = 'org.example.tag.TestSuite'] resolution failed\r\n\tat org.junit.platform.launcher.listeners.discovery.AbortOnFailureLauncherDiscoveryListener.selectorProcessed(AbortOnFailureLauncherDiscoveryListener.java:39)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:103)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:83)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\r\n\tat org.junit.platform.suite.engine.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:41)\r\n\tat org.junit.platform.suite.engine.SuiteTestEngine.discover(SuiteTestEngine.java:58)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:152)\r\n\t... 32 more\r\nCaused by: org.junit.platform.commons.PreconditionViolationException: Configuration error: The suite configuration may not contain a cycle [[engine:junit-platform-suite]/[suite:org.example.tag.TestSuite]/[engine:junit-platform-suite]/[suite:org.example.tag.TestSuite]]\r\n\tat org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:314)\r\n\tat org.junit.platform.suite.engine.SuiteTestDescriptor.requireNoCycles(SuiteTestDescriptor.java:81)\r\n\tat org.junit.platform.suite.engine.SuiteTestDescriptor.<init>(SuiteTestDescriptor.java:63)\r\n\tat org.junit.platform.suite.engine.ClassSelectorResolver.newSuiteDescriptor(ClassSelectorResolver.java:97)\r\n\tat org.junit.platform.suite.engine.ClassSelectorResolver.lambda$resolve$0(ClassSelectorResolver.java:53)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.createAndAdd(EngineDiscoveryRequestResolution.java:250)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.addToParent(EngineDiscoveryRequestResolution.java:213)\r\n\tat org.junit.platform.suite.engine.ClassSelectorResolver.resolve(ClassSelectorResolver.java:53)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:135)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1631)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:189)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:126)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:92)\r\n\t... 37 more\r\n\r\n```\r\n\r\nWhy did  that exception happen?\r\n\r\n# Java code\r\n\r\n```java\r\n\r\npackage org.example.tag;\r\n\r\nimport org.junit.jupiter.api.Tag;\r\nimport org.junit.jupiter.api.Test;\r\n\r\n@Tag(\"fast\")\r\npublic class FastTest {\r\n    @Test\r\n    public void test() {\r\n        System.out.println(\"I am fast test\");\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.tag;\r\n\r\nimport org.junit.jupiter.api.Tag;\r\nimport org.junit.jupiter.api.Test;\r\n\r\n@Tag(\"slow\")\r\npublic class SlowTest {\r\n    @Test\r\n    public void test() {\r\n        System.out.println(\"I am slow test\");\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.tag;\r\n\r\nimport org.junit.platform.suite.api.IncludeTags;\r\nimport org.junit.platform.suite.api.SelectPackages;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\n@SelectPackages(\"org.example.tag\")\r\n//@SelectClasses({\r\n//        FastTest.class,\r\n//        SlowTest.class,\r\n//})\r\n@IncludeTags(\"fast\")\r\n@Suite\r\npublic class TestSuite {\r\n}\r\n```\r\n\r\n# Maven dependencies\r\n```xml\r\n<dependency>\r\n    <groupId>org.junit.jupiter</groupId>\r\n    <artifactId>junit-jupiter-engine</artifactId>\r\n    <version>5.9.0</version>\r\n    <scope>test</scope>\r\n</dependency>\r\n\r\n<dependency>\r\n    <groupId>org.junit.platform</groupId>\r\n    <artifactId>junit-platform-suite-engine</artifactId>\r\n    <version>1.9.0</version>\r\n    <scope>test</scope>\r\n</dependency>\r\n```\r\n\r\n# JDK version\r\n```\r\njava version \"11.0.4\" 2019-07-16 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.4+10-LTS)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.4+10-LTS, mixed mode)\r\n```","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3115/timeline","performed_via_github_app":null,"state_reason":"completed"}