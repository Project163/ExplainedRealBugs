{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233/events","html_url":"https://github.com/junit-team/junit-framework/issues/1233","id":286598465,"node_id":"MDU6SXNzdWUyODY1OTg0NjU=","number":1233,"title":"\"junitPlatformTest\" Gradle task does not handle dependencies defined by the Java Library plugin","user":{"login":"cmakshin","id":26673754,"node_id":"MDQ6VXNlcjI2NjczNzU0","avatar_url":"https://avatars.githubusercontent.com/u/26673754?v=4","gravatar_id":"","url":"https://api.github.com/users/cmakshin","html_url":"https://github.com/cmakshin","followers_url":"https://api.github.com/users/cmakshin/followers","following_url":"https://api.github.com/users/cmakshin/following{/other_user}","gists_url":"https://api.github.com/users/cmakshin/gists{/gist_id}","starred_url":"https://api.github.com/users/cmakshin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmakshin/subscriptions","organizations_url":"https://api.github.com/users/cmakshin/orgs","repos_url":"https://api.github.com/users/cmakshin/repos","events_url":"https://api.github.com/users/cmakshin/events{/privacy}","received_events_url":"https://api.github.com/users/cmakshin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null},{"id":579366233,"node_id":"MDU6TGFiZWw1NzkzNjYyMzM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20modules","name":"theme: modules","color":"C3A77B","default":false,"description":""},{"id":629660080,"node_id":"MDU6TGFiZWw2Mjk2NjAwODA=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/3rd-party:%20Gradle","name":"3rd-party: Gradle","color":"23427f","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/18","html_url":"https://github.com/junit-team/junit-framework/milestone/18","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/18/labels","id":2919347,"node_id":"MDk6TWlsZXN0b25lMjkxOTM0Nw==","number":18,"title":"5.1 M2","description":"Programmatic extension registration via `@RegisterExtension`, `@EnabledIf` annotation for conditional test execution controlled by dynamic scripting languages, improved implicit conversion support for `@ParameterizedTest` arguments, refinements to the `ExtensionContext` API, support for re-running individual dynamic test and test template invocations within an IDE, new tag expression language, minor bug fixes, and various additional enhancements.\r\n","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":41,"state":"closed","created_at":"2017-11-17T09:42:01Z","updated_at":"2018-01-28T20:31:33Z","due_on":"2018-01-28T08:00:00Z","closed_at":"2018-01-28T19:55:17Z"},"comments":14,"created_at":"2018-01-07T20:56:52Z","updated_at":"2018-01-17T11:59:04Z","closed_at":"2018-01-17T11:58:51Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Using `JavaExec` as the base for \"junitPlatformTest\" task breaks Gradle builds which:\r\n* use Java Library plugin for better/proper separation of interface and implementation dependencies;\r\n* have a dependency with direction opposite to the lexicographical order of projects' names.\r\n\r\nAn example can be found at https://github.com/cmakshin/junit5-bugs:\r\nJava 9\r\nGradle 4.4.1\r\nJUnit Platform 1.1.+ (tested with 1.1.0-M1)\r\nJUnit Jupiter 5.1.+ (tested with 5.1.0-M1)\r\n\r\nProject \"atestproject\" depends on \"projectB\" which depends on \"projectA\" (all dependencies are specified as \"implementation\").\r\n\r\nRunning `gradlew -m -PnoDummyTest=y build` will produce this output (I removed some irrelevant lines):\r\n```\r\n:projectA:compileJava SKIPPED\r\n:projectB:compileJava SKIPPED\r\n:atestproject:compileJava SKIPPED\r\n...\r\n:atestproject:junitPlatformTest SKIPPED\r\n...\r\n:projectB:jar SKIPPED\r\n:atestproject:test SKIPPED\r\n```\r\nAn actual build would fail at \":atestproject:junitPlatformTest\" because its runtime classpath includes the output of \":projectB:jar\".\r\n\r\nAdding a dummy Test task and making it a dependency of \"junitPlatformTest\"\r\n```\r\ntask dummyTest(type: Test) {\r\n   enabled = false\r\n}\r\n\r\njunitPlatformTest {\r\n    dependsOn.add(dummyTest)\r\n}\r\n```\r\nfixes the problem (`gradlew -m build`):\r\n```\r\n:projectA:compileJava SKIPPED\r\n:projectB:compileJava SKIPPED\r\n:atestproject:compileJava SKIPPED\r\n...\r\n:projectB:jar SKIPPED\r\n:atestproject:dummyTest SKIPPED\r\n:atestproject:junitPlatformTest SKIPPED\r\n:atestproject:test SKIPPED\r\n```\r\n\r\nThis workaround implies that task ordering has nothing to do with the implementation of the standard \"test\" task.","closed_by":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1233/timeline","performed_via_github_app":null,"state_reason":"completed"}