{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774/events","html_url":"https://github.com/junit-team/junit-framework/issues/3774","id":2241510647,"node_id":"I_kwDOAbwRH86Fmrz3","number":3774,"title":"Create 5.11 upgrade guide wiki page","user":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":372539997,"node_id":"MDU6TGFiZWwzNzI1Mzk5OTc=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20documentation","name":"theme: documentation","color":"bfdadc","default":false,"description":null},{"id":420911923,"node_id":"MDU6TGFiZWw0MjA5MTE5MjM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Jupiter","name":"component: Jupiter","color":"11ee99","default":false,"description":null},{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/68","html_url":"https://github.com/junit-team/junit-framework/milestone/68","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/68/labels","id":9312281,"node_id":"MI_kwDOAbwRH84AjhgZ","number":68,"title":"5.11 M1","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":29,"state":"closed","created_at":"2023-04-21T10:09:52Z","updated_at":"2024-06-17T12:23:02Z","due_on":"2024-04-23T07:00:00Z","closed_at":"2024-04-23T12:29:30Z"},"comments":2,"created_at":"2024-04-13T11:07:16Z","updated_at":"2024-04-21T15:40:29Z","closed_at":"2024-04-21T15:37:00Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Overview\r\n\r\nIn light of the impact of the changes resulting from #3553, I think it might be a good idea to create a \"5.11 Migration Guide\" wiki page where we can highlight some of the known issues, migration advice, and workarounds (where applicable).\r\n\r\nAs can be seen below, these changes will impact not only developers writing tests but also potentially the behavior of third party extensions.\r\n\r\nI'd rather document the \"migration help\" in the wiki than in the User Guide or Release Notes, since we will be able to update the wiki with additional tips after the release.\r\n\r\n## Topics to Cover\r\n\r\nWe should probably cover topics similar to the following.\r\n\r\n- fields no longer hide fields from super types -- applies to non-static and static fields (`@TempDir`, `@RegisterExtension`, etc.)\r\n- methods no longer hide methods from super types unless a given method literally _overrides_ the other method -- applies to non-static and static methods (`@BeforeAll`, `@BeforeEach`, `@Test`, etc.)\r\n- extensions may have to revise their search algorithms for fields and methods (see case study below)\r\n\r\n\r\n## Case Study\r\n\r\nI originally implemented the `@FieldSource` feature before #3553 had been implemented. When I rebased that work on `main` after #3553 had been merged, the `@FieldSource` feature failed to find the first field in the type hierarchy with a given name if a field with the same name also existed higher in the type hierarchy (i.e., in a superclass). With #3553 in place, the `@FieldSource` feature started finding all such fields instead of the first one, which resulted in a `PreconditionViolationException` stating that the field could not be found.\r\n\r\nThe \"Before\" section below shows the na√Øve approach I had originally taken.\r\n\r\nThe \"After\" section shows the current approach.\r\n\r\nIn retrospect, I probably should have written it like in the \"After\" section originally, since that code literally implements the correct logic: find the first field with a given name in the type hierarchy, searching up the type hierarchy beginning with the test class.\r\n\r\nHowever, the \"Before\" section effectively achieved the same goal previously, since it depended on the existing \"legacy search semantics\" for fields, whereby the field in the subclass \"hid\" the field in the superclass.\r\n\r\n### Before\r\n\r\n```java\r\nPredicate<Field> nameMatches = field -> field.getName().equals(fieldName);\r\nList<Field> fields = ReflectionUtils.findFields(testClass, nameMatches, HierarchyTraversalMode.TOP_DOWN);\r\n\r\nPreconditions.condition(fields.size() == 1,\r\n\t() -> format(\"Could not find field named [%s] in class [%s]\", fieldName, testClass.getName()));\r\nreturn fields.get(0);\r\n```\r\n\r\n### After\r\n\r\n```java\r\nPredicate<Field> nameMatches = field -> field.getName().equals(resolvedFieldName);\r\nField field = ReflectionUtils.streamFields(resolvedClass, nameMatches, HierarchyTraversalMode.BOTTOM_UP)//\r\n\t\t.findFirst()//\r\n\t\t.orElse(null);\r\n\r\nPreconditions.notNull(field,\r\n\t() -> format(\"Could not find field named [%s] in class [%s]\", resolvedFieldName, resolvedClass.getName()));\r\nreturn field;\r\n```\r\n\r\n## Related Issues\r\n\r\n- #3553\r\n- #2390\r\n- #3498\r\n- #3532 \r\n- #2014\r\n\r\n## Deliverables\r\n\r\n- [x] Create a migration guide wiki page for 5.11\r\n","closed_by":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3774/timeline","performed_via_github_app":null,"state_reason":"completed"}