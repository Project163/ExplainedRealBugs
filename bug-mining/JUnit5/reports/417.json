{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500/events","html_url":"https://github.com/junit-team/junit-framework/issues/2500","id":771567725,"node_id":"MDU6SXNzdWU3NzE1Njc3MjU=","number":2500,"title":"ClasspathScanner.getRootUrisForPackage returns empty list when package name conflicts with module name","user":{"login":"oobles","id":6970311,"node_id":"MDQ6VXNlcjY5NzAzMTE=","avatar_url":"https://avatars.githubusercontent.com/u/6970311?v=4","gravatar_id":"","url":"https://api.github.com/users/oobles","html_url":"https://github.com/oobles","followers_url":"https://api.github.com/users/oobles/followers","following_url":"https://api.github.com/users/oobles/following{/other_user}","gists_url":"https://api.github.com/users/oobles/gists{/gist_id}","starred_url":"https://api.github.com/users/oobles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oobles/subscriptions","organizations_url":"https://api.github.com/users/oobles/orgs","repos_url":"https://api.github.com/users/oobles/repos","events_url":"https://api.github.com/users/oobles/events{/privacy}","received_events_url":"https://api.github.com/users/oobles/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165178,"node_id":"MDU6TGFiZWwxNjUxNjUxNzg=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null},{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null},{"id":425245644,"node_id":"MDU6TGFiZWw0MjUyNDU2NDQ=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20discovery","name":"theme: discovery","color":"ffdd22","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/56","html_url":"https://github.com/junit-team/junit-framework/milestone/56","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/56/labels","id":6691245,"node_id":"MDk6TWlsZXN0b25lNjY5MTI0NQ==","number":56,"title":"5.7.2","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2021-04-23T10:15:31Z","updated_at":"2021-05-15T12:25:04Z","due_on":"2021-05-15T07:00:00Z","closed_at":"2021-05-15T12:25:04Z"},"comments":14,"created_at":"2020-12-20T11:26:21Z","updated_at":"2021-05-12T05:59:25Z","closed_at":"2021-05-12T05:59:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When developing a multi-module project that has similar package names it is possible that `getRootUrisForPackage` will fail to return a valid list. \r\n\r\n## Steps to reproduce\r\n\r\nProject1.\r\n\r\n```java\r\nmodule io.litterat.pep {\r\n\texports io.litterat.pep;\r\n\texports io.litterat.pep.mapper;\r\n}\r\n```\r\n\r\nProject2.\r\n\r\n```java\r\nopen module io.litterat.pep.test {\r\n        exports io.litterat.pep.test;\r\n\trequires io.litterat.pep;\r\n\trequires org.junit.jupiter.api;\r\n}\r\n```\r\n\r\nIn eclipse (2020-09,2020-12 and other versions) when selecting the package `io.litterat.pep.test` no JUnit 5 tests are found or executed. In 2020-12 no errors or console output is shown. \r\n\r\nThe root cause is that `getRootUrisForPackage( \"io.litterat.pep.test\" )` results in calling `getClassLoader().getResources( \"io/litterat/pep/test\" )`. This results in calling `ClassLoaders$BootClassLoader findResources` which calls `Resources.toPackageName(\"io/litterat/pep/test\" )` which results in package name `\"io.litterat.pep\"` (the name of the first module). The loader then resolves the name to the wrong `LoadedModule` which does not have the selected package. This results in no resources being returned.\r\n\r\nUsing Eclipse and attempting to execute all tests on either source directory or project results in all tests in the `io.litterat.pep.test` package being skipped. However, tests in sub-packages (e.g. `io.litterat.pep.test.extra`) are executed correctly.\r\n\r\nChanging the name of the package so that the second project does not use the other module package as a base corrects the problem (e.g. `io.litterat.peptest`).\r\n\r\n## Context\r\n\r\n - Used versions (Jupiter/Vintage/Platform): junit-platform-commons-1.7.0.jar\r\n - Build Tool/IDE: Eclipse\r\n\r\n## Deliverables\r\n\r\nIt's not clear if this is a JDK bug or an issue with the way `getResources` is being called. Given that no output or feedback is provided this has taken quite a long time to figure out. Either issue should be documented or fixed.\r\n","closed_by":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2500/timeline","performed_via_github_app":null,"state_reason":"completed"}