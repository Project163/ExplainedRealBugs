{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/744","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/744/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/744/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/744/events","html_url":"https://github.com/junit-team/junit-framework/issues/744","id":216217535,"node_id":"MDU6SXNzdWUyMTYyMTc1MzU=","number":744,"title":"Introduce support for declarative test suites","user":{"login":"smoyer64","id":328333,"node_id":"MDQ6VXNlcjMyODMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/328333?v=4","gravatar_id":"","url":"https://api.github.com/users/smoyer64","html_url":"https://github.com/smoyer64","followers_url":"https://api.github.com/users/smoyer64/followers","following_url":"https://api.github.com/users/smoyer64/following{/other_user}","gists_url":"https://api.github.com/users/smoyer64/gists{/gist_id}","starred_url":"https://api.github.com/users/smoyer64/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smoyer64/subscriptions","organizations_url":"https://api.github.com/users/smoyer64/orgs","repos_url":"https://api.github.com/users/smoyer64/repos","events_url":"https://api.github.com/users/smoyer64/events{/privacy}","received_events_url":"https://api.github.com/users/smoyer64/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null},{"id":650479477,"node_id":"MDU6TGFiZWw2NTA0Nzk0Nzc=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20suites","name":"theme: suites","color":"bfdadc","default":false,"description":null},{"id":1041356926,"node_id":"MDU6TGFiZWwxMDQxMzU2OTI2","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20new%20feature","name":"type: new feature","color":"85d31f","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mpkorstanje","id":6946919,"node_id":"MDQ6VXNlcjY5NDY5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/6946919?v=4","gravatar_id":"","url":"https://api.github.com/users/mpkorstanje","html_url":"https://github.com/mpkorstanje","followers_url":"https://api.github.com/users/mpkorstanje/followers","following_url":"https://api.github.com/users/mpkorstanje/following{/other_user}","gists_url":"https://api.github.com/users/mpkorstanje/gists{/gist_id}","starred_url":"https://api.github.com/users/mpkorstanje/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpkorstanje/subscriptions","organizations_url":"https://api.github.com/users/mpkorstanje/orgs","repos_url":"https://api.github.com/users/mpkorstanje/repos","events_url":"https://api.github.com/users/mpkorstanje/events{/privacy}","received_events_url":"https://api.github.com/users/mpkorstanje/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mpkorstanje","id":6946919,"node_id":"MDQ6VXNlcjY5NDY5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/6946919?v=4","gravatar_id":"","url":"https://api.github.com/users/mpkorstanje","html_url":"https://github.com/mpkorstanje","followers_url":"https://api.github.com/users/mpkorstanje/followers","following_url":"https://api.github.com/users/mpkorstanje/following{/other_user}","gists_url":"https://api.github.com/users/mpkorstanje/gists{/gist_id}","starred_url":"https://api.github.com/users/mpkorstanje/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpkorstanje/subscriptions","organizations_url":"https://api.github.com/users/mpkorstanje/orgs","repos_url":"https://api.github.com/users/mpkorstanje/repos","events_url":"https://api.github.com/users/mpkorstanje/events{/privacy}","received_events_url":"https://api.github.com/users/mpkorstanje/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/51","html_url":"https://github.com/junit-team/junit-framework/milestone/51","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/51/labels","id":5779459,"node_id":"MDk6TWlsZXN0b25lNTc3OTQ1OQ==","number":51,"title":"5.8 M1","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":28,"state":"closed","created_at":"2020-08-17T12:06:59Z","updated_at":"2021-05-15T08:35:39Z","due_on":"2021-02-11T08:00:00Z","closed_at":"2021-02-11T19:09:35Z"},"comments":62,"created_at":"2017-03-22T21:43:34Z","updated_at":"2021-05-13T12:33:36Z","closed_at":"2021-02-09T13:14:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Overview\r\n\r\nAs requested in issue #681 (```Introduce junit-platform-suite-api module```), the annotations used for test discovery and selection in the ```JUnitPlatform``` runner have been refactored into the ```junit-platform-suite-api```.  This allows a purely JUnit 5 test suite to be defined declaratively, though it currently requires an alternate engine (as opposed to an extension).\r\n\r\nThis issue describes a generalized JUnit platform suite that's suitable for the Jupiter test engine as well as any others that might be chosen.  It's my opinion that unit tests rarely require test suites, but it becomes far more common when integration, system and acceptance tests are being executed due to the very common integration with external systems that should only be initialized before the entire test run.  Examples of resources that can be safely shared among tests are database connection pools (or really any connection pool), test frameworks that require significant set-up time (e.g. GWT test suites eliminate 20s of HtmlUnit set-up time for each test - it's only incurred once at the beginning of each suite).\r\n\r\nThe examples shown below indicate how the ```@Suite``` annotation can be used in conjunction with those already in the ```junit-platform-suite-api``` module.  Originally I'd also defined the ```@BeforeSuite``` and ```@AfterSuite``` annotations but after further consideration decided that since suites are really just an arbitrary collection of indeterminately nested test containers, it would be better if the ```@BeforeAll``` and ```@AfterAll``` annotations were contextual (nested in the same way the hierarchy would be presented in the test tree).  I've also assumed that these annotations no longer require the static modifier as discussed elsewhere.\r\n\r\nImagine if you will a set of acceptance tests that have a custom reporting mechanism that should be configured for the entire test run.  Included within this outer suite is a set of tests that require a database connection pool and a different set of tests that require an LDAP connection pool.  The top-level suite definition for the acceptance tests might look something like:\r\n\r\n```java\r\n@Suite\r\n@IncludeEngines(\"jupiter-engine\") // not required if there's only one engine on the classpath\r\n@IncludeClassNamePatterns(\".*AcceptanceTestSuite$\")\r\npublic class AcceptanceTestSuite {\r\n\r\n    @BeforeAll\r\n    void setUp() {\r\n        ... // code to set-up custom test reporting\r\n    }\r\n\r\n    @AfterAll() {\r\n    void tearDown() {\r\n        ... // code to tear-down custom test reporting\r\n    }\r\n\r\n}\r\n```\r\n\r\nThere are two notable characteristics of this test suite:\r\n\r\n1. It specifies which engine will be used for the entire container/test hierarchy (assuming there is more than one).\r\n2. It includes potentially numerous other test suites as sub-containers which can each have their own contextual set-up and tear-down.\r\n\r\nA child suite for tests that require a database connection pool might look something like this:\r\n\r\n```java\r\n@Suite\r\n@IncludeTags({\"integration\", \"database\"})\r\n@IncludeClassNamePatterns(\".*IT$\")\r\npublic class DatabaseAcceptanceTestSuite {\r\n\r\n    @BeforeAll\r\n    void setUp() {\r\n        ... // code to set-up the database connection pool\r\n    }\r\n\r\n    @AfterAll() {\r\n    void tearDown() {\r\n        ... // code to tear-down the database connection pool\r\n    }\r\n\r\n}\r\n```\r\n\r\nIf run under Maven, test classes that end in \"IT\" would be run using the ```maven-failsafe-plugin```.  If there are other classes of integration tests not run during acceptance testing it would also be necessary to make sure the acceptance test classes were not run (as they'd fail without the suite's set-up methods).\r\n\r\n## Feature Request\r\n\r\nProvide the means for arbitrarily nested, declarative tests suites in JUnit 5 including the execution of set-up and tear-down methods\r\n\r\n## Related Issues\r\n\r\n- #330 \r\n- #456\r\n- #746\r\n- #687 (perhaps superseded by this issue)\r\n- #964 \r\n- [Eclipse IDE issue](https://bugs.eclipse.org/bugs/show_bug.cgi?id=511183)\r\n- #1243\r\n\r\n## Deliverables\r\n\r\n- [ ] TBD\r\n","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/744/reactions","total_count":26,"+1":26,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/744/timeline","performed_via_github_app":null,"state_reason":"completed"}