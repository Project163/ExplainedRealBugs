{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601/events","html_url":"https://github.com/junit-team/junit-framework/issues/2601","id":866402631,"node_id":"MDU6SXNzdWU4NjY0MDI2MzE=","number":2601,"title":"NPE from RunnerTestDescriptor.lambda$logIncompleteFiltering$2","user":{"login":"jglick","id":154109,"node_id":"MDQ6VXNlcjE1NDEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/154109?v=4","gravatar_id":"","url":"https://api.github.com/users/jglick","html_url":"https://github.com/jglick","followers_url":"https://api.github.com/users/jglick/followers","following_url":"https://api.github.com/users/jglick/following{/other_user}","gists_url":"https://api.github.com/users/jglick/gists{/gist_id}","starred_url":"https://api.github.com/users/jglick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jglick/subscriptions","organizations_url":"https://api.github.com/users/jglick/orgs","repos_url":"https://api.github.com/users/jglick/repos","events_url":"https://api.github.com/users/jglick/events{/privacy}","received_events_url":"https://api.github.com/users/jglick/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165178,"node_id":"MDU6TGFiZWwxNjUxNjUxNzg=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null},{"id":420912143,"node_id":"MDU6TGFiZWw0MjA5MTIxNDM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Vintage","name":"component: Vintage","color":"11cc99","default":false,"description":null},{"id":425245644,"node_id":"MDU6TGFiZWw0MjUyNDU2NDQ=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20discovery","name":"theme: discovery","color":"ffdd22","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/56","html_url":"https://github.com/junit-team/junit-framework/milestone/56","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/56/labels","id":6691245,"node_id":"MDk6TWlsZXN0b25lNjY5MTI0NQ==","number":56,"title":"5.7.2","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2021-04-23T10:15:31Z","updated_at":"2021-05-15T12:25:04Z","due_on":"2021-05-15T07:00:00Z","closed_at":"2021-05-15T12:25:04Z"},"comments":1,"created_at":"2021-04-23T20:15:42Z","updated_at":"2021-04-24T14:28:05Z","closed_at":"2021-04-24T14:27:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Given `pom.xml`\r\n\r\n```xml\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <parent>\r\n        <groupId>org.jenkins-ci.plugins</groupId>\r\n        <artifactId>plugin</artifactId>\r\n        <version>4.18</version>\r\n        <relativePath />\r\n    </parent>\r\n    <artifactId>demo</artifactId>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <packaging>hpi</packaging>\r\n    <properties>\r\n        <jenkins.version>2.277.3</jenkins.version>\r\n        <java.level>8</java.level>\r\n        <junit5.version>5.7.1</junit5.version>\r\n    </properties>\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.junit.jupiter</groupId>\r\n                <artifactId>junit-jupiter-api</artifactId>\r\n                <version>${junit5.version}</version>\r\n                <scope>test</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n    <dependencies>\r\n    </dependencies>\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.apache.maven.plugins</groupId>\r\n                <artifactId>maven-surefire-plugin</artifactId>\r\n                <dependencies>\r\n                    <dependency>\r\n                        <groupId>org.junit.vintage</groupId>\r\n                        <artifactId>junit-vintage-engine</artifactId>\r\n                        <version>${junit5.version}</version>\r\n                    </dependency>\r\n                </dependencies>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n    <repositories>\r\n        <repository>\r\n            <id>repo.jenkins-ci.org</id>\r\n            <url>https://repo.jenkins-ci.org/public/</url>\r\n        </repository>\r\n    </repositories>\r\n    <pluginRepositories>\r\n        <pluginRepository>\r\n            <id>repo.jenkins-ci.org</id>\r\n            <url>https://repo.jenkins-ci.org/public/</url>\r\n        </pluginRepository>\r\n    </pluginRepositories>\r\n</project>\r\n```\r\n\r\nand `src/main/resources/index.jelly`\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<?jelly escape-by-default='true'?>\r\n<j:jelly xmlns:j=\"jelly:core\">\r\n    XXX\r\n</j:jelly>\r\n```\r\n\r\nthen\r\n\r\n```bash\r\nmvn -f /tmp/junit-npe clean verify -e\r\n```\r\n\r\npasses\r\n\r\n```\r\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.021 s - in InjectedTest\r\n```\r\n\r\nyet\r\n\r\n```bash\r\nmvn -f /tmp/junit-npe clean verify -e -Dtest=InjectedTest\r\n```\r\n\r\nfails with\r\n\r\n```\r\nExecution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test failed: java.lang.NullPointerException\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)\r\n    at …\r\nCaused by: org.apache.maven.surefire.util.SurefireReflectionException: java.lang.NullPointerException\r\n    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray (ReflectionUtils.java:177)\r\n    at …\r\nCaused by: java.lang.NullPointerException\r\n    at org.junit.vintage.engine.descriptor.RunnerTestDescriptor.lambda$logIncompleteFiltering$2 (RunnerTestDescriptor.java:118)\r\n    at org.junit.platform.commons.logging.LoggerFactory$DelegatingLogger.nullSafeGet (LoggerFactory.java:182)\r\n    at org.junit.platform.commons.logging.LoggerFactory$DelegatingLogger.log (LoggerFactory.java:146)\r\n    at org.junit.platform.commons.logging.LoggerFactory$DelegatingLogger.warn (LoggerFactory.java:95)\r\n    at org.junit.vintage.engine.descriptor.RunnerTestDescriptor.logIncompleteFiltering (RunnerTestDescriptor.java:117)\r\n    at org.junit.vintage.engine.descriptor.RunnerTestDescriptor.prune (RunnerTestDescriptor.java:111)\r\n    at org.junit.platform.engine.TestDescriptor.accept (TestDescriptor.java:249)\r\n    at org.junit.platform.engine.TestDescriptor.lambda$accept$0 (TestDescriptor.java:251)\r\n    at java.lang.Iterable.forEach (Iterable.java:75)\r\n    at org.junit.platform.engine.TestDescriptor.accept (TestDescriptor.java:251)\r\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.lambda$acceptInAllTestEngines$8 (EngineDiscoveryOrchestrator.java:167)\r\n    at java.util.LinkedHashMap$LinkedValues.forEach (LinkedHashMap.java:608)\r\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.acceptInAllTestEngines (EngineDiscoveryOrchestrator.java:167)\r\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.prune (EngineDiscoveryOrchestrator.java:158)\r\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover (EngineDiscoveryOrchestrator.java:93)\r\n    at org.junit.platform.launcher.core.DefaultLauncher.discover (DefaultLauncher.java:92)\r\n    at org.junit.platform.launcher.core.DefaultLauncher.discover (DefaultLauncher.java:67)\r\n    at org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept (TestPlanScannerFilter.java:56)\r\n    at org.apache.maven.surefire.util.DefaultScanResult.applyFilter (DefaultScanResult.java:102)\r\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath (JUnitPlatformProvider.java:146)\r\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.getSuites (JUnitPlatformProvider.java:104)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray (ReflectionUtils.java:169)\r\n    at …\r\n```\r\n\r\nSeems to be some sort of missing null check in https://github.com/junit-team/junit5/blob/ddaec1bb07b6a3ed3afd318bc9412d9e848b499f/junit-vintage-engine/src/main/java/org/junit/vintage/engine/descriptor/RunnerTestDescriptor.java#L117-L119\r\n\r\nThe situation here is admittedly unusual: a JUnit 3 `target/generated-test-sources/injected/InjectedTest.java` created by a custom Maven plugin. Normally works fine in Surefire with JUnit 4 in the classpath, but seems to confuse the JUnit 5 vintage engine.","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2601/timeline","performed_via_github_app":null,"state_reason":"completed"}