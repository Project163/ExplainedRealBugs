{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800/events","html_url":"https://github.com/junit-team/junit-framework/issues/1800","id":417297541,"node_id":"MDU6SXNzdWU0MTcyOTc1NDE=","number":1800,"title":"JUnit5 5.4.0 broke Android support","user":{"login":"matejdro","id":507922,"node_id":"MDQ6VXNlcjUwNzkyMg==","avatar_url":"https://avatars.githubusercontent.com/u/507922?v=4","gravatar_id":"","url":"https://api.github.com/users/matejdro","html_url":"https://github.com/matejdro","followers_url":"https://api.github.com/users/matejdro/followers","following_url":"https://api.github.com/users/matejdro/following{/other_user}","gists_url":"https://api.github.com/users/matejdro/gists{/gist_id}","starred_url":"https://api.github.com/users/matejdro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matejdro/subscriptions","organizations_url":"https://api.github.com/users/matejdro/orgs","repos_url":"https://api.github.com/users/matejdro/repos","events_url":"https://api.github.com/users/matejdro/events{/privacy}","received_events_url":"https://api.github.com/users/matejdro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165178,"node_id":"MDU6TGFiZWwxNjUxNjUxNzg=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null},{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/36","html_url":"https://github.com/junit-team/junit-framework/milestone/36","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/36/labels","id":4122117,"node_id":"MDk6TWlsZXN0b25lNDEyMjExNw==","number":36,"title":"5.4.1","description":"Bug fixes since 5.4.0","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2019-03-08T11:15:01Z","updated_at":"2019-03-17T19:28:33Z","due_on":"2019-03-17T07:00:00Z","closed_at":"2019-03-17T19:28:33Z"},"comments":14,"created_at":"2019-03-05T13:26:06Z","updated_at":"2019-03-17T16:55:38Z","closed_at":"2019-03-08T10:55:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"JUnit 5.4.0 started crashing on Android due to unsupported UNICODE_CHARACTER_CLASS flag in Pattern.\r\n\r\n## Steps to reproduce\r\n\r\n1. Create brand new emulator from Android Studio with `Android 9.0 (Google Play) x86_64` image\r\n2. checkout https://github.com/mannodermaus/android-junit5/tree/7b9f490d9ba6e7eb6b91b99e6d2755c546354e4f\r\n3. Start emulator\r\n4. Run `./gradlew :sample:connectedExperimentalDebugAndroidTest` from the root of checked out repo\r\n5. Tests will crash with following exception:\r\n\r\n```\r\njava.lang.ExceptionInInitializerError\r\nat org.junit.platform.commons.util.StringUtils.isNotBlank(StringUtils.java:64)\r\nat org.junit.platform.commons.util.Preconditions.notBlank(Preconditions.java:248)\r\nat org.junit.platform.launcher.core.LauncherConfigurationParameters.<init>(LauncherConfigurationParameters.java:44)\r\nat org.junit.platform.launcher.core.LauncherConfigurationParameters.<init>(LauncherConfigurationParameters.java:39)\r\nat org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.build(LauncherDiscoveryRequestBuilder.java:194)\r\nat org.junit.platform.runner.JUnitPlatform.createDiscoveryRequest(JUnitPlatform.java:153)\r\nat org.junit.platform.runner.JUnitPlatform.<init>(JUnitPlatform.java:124)\r\nat org.junit.platform.runner.JUnitPlatform.<init>(JUnitPlatform.java:117)\r\nat de.mannodermaus.junit5.AndroidJUnit5.<init>(Runner.kt:17)\r\nat de.mannodermaus.junit5.RunnerKt.createJUnit5Runner(Runner.kt:22)\r\nat de.mannodermaus.junit5.AndroidJUnit5Builder.runnerForClass(RunnerBuilder.kt:69)\r\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\nat androidx.test.internal.runner.AndroidRunnerBuilder.runnerForClass(AndroidRunnerBuilder.java:147)\r\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\nat androidx.test.internal.runner.TestLoader.doCreateRunner(TestLoader.java:73)\r\nat androidx.test.internal.runner.TestLoader.getRunnersFor(TestLoader.java:104)\r\nat androidx.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:789)\r\nat androidx.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:543)\r\nat androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:386)\r\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2145)\r\nCaused by: java.lang.IllegalArgumentException: Unsupported flags: 256\r\nat java.util.regex.Pattern.<init>(Pattern.java:1324)\r\nat java.util.regex.Pattern.compile(Pattern.java:975)\r\nat org.junit.platform.commons.util.StringUtils.<clinit>(StringUtils.java:36)\r\n... 20 more\r\n```\r\n\r\nIt looks like [UNICODE_CHARACTER_CLASS was added to StringUtils](https://github.com/junit-team/junit5/commit/db8b3d4cdd588fad4660fbedaf1c6b2f68daed77#diff-6620c2fff8288084514a095acc4cb5a8R36) in JUnit 5.4.0. This flag is not supported on Android (not even on the latest devices) and causes crash whenever  `StringUtils` class is initialized.","closed_by":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1800/timeline","performed_via_github_app":null,"state_reason":"completed"}