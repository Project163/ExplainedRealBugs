{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883/events","html_url":"https://github.com/junit-team/junit-framework/issues/2883","id":1198914432,"node_id":"I_kwDOAbwRH85HdfuA","number":2883,"title":"TempDir deletion throws StackOverflowError","user":{"login":"andrewparmet","id":7232566,"node_id":"MDQ6VXNlcjcyMzI1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/7232566?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewparmet","html_url":"https://github.com/andrewparmet","followers_url":"https://api.github.com/users/andrewparmet/followers","following_url":"https://api.github.com/users/andrewparmet/following{/other_user}","gists_url":"https://api.github.com/users/andrewparmet/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewparmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewparmet/subscriptions","organizations_url":"https://api.github.com/users/andrewparmet/orgs","repos_url":"https://api.github.com/users/andrewparmet/repos","events_url":"https://api.github.com/users/andrewparmet/events{/privacy}","received_events_url":"https://api.github.com/users/andrewparmet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165178,"node_id":"MDU6TGFiZWwxNjUxNjUxNzg=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null},{"id":420911923,"node_id":"MDU6TGFiZWw0MjA5MTE5MjM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Jupiter","name":"component: Jupiter","color":"11ee99","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/58","html_url":"https://github.com/junit-team/junit-framework/milestone/58","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/58/labels","id":7144672,"node_id":"MI_kwDOAbwRH84AbQTg","number":58,"title":"5.9 M1","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":36,"state":"closed","created_at":"2021-09-12T18:56:06Z","updated_at":"2022-05-15T19:00:06Z","due_on":"2022-05-15T07:00:00Z","closed_at":"2022-05-15T19:00:06Z"},"comments":7,"created_at":"2022-04-10T07:09:41Z","updated_at":"2022-04-10T20:52:52Z","closed_at":"2022-04-10T17:18:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have a unit test that creates some files in a temporary directory. Notably it's a Docker container that is creating the files. The test passes locally on my machine (running on a Mac) but fails in GitHub actions: https://github.com/andrewparmet/buf-gradle-plugin/runs/5959677186?check_suite_focus=true with a StackOverflowError as it's trying to clean up:\r\n\r\n```\r\njava.lang.StackOverflowError\r\n\tat java.base/sun.nio.fs.UnixNativeDispatcher.unlink0(Native Method)\r\n\tat java.base/sun.nio.fs.UnixNativeDispatcher.unlink(UnixNativeDispatcher.java:156)\r\n\tat java.base/sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:236)\r\n\tat java.base/sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:105)\r\n\tat java.base/java.nio.file.Files.delete(Files.java:1142)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.resetPermissionsAndTryToDeleteAgain(TempDirectory.java:250)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.deleteAndContinue(TempDirectory.java:238)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.visitFile(TempDirectory.java:218)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.visitFile(TempDirectory.java:199)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2725)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2797)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.resetPermissionsAndTryToDeleteAgain(TempDirectory.java:247)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.deleteAndContinue(TempDirectory.java:238)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.postVisitDirectory(TempDirectory.java:223)\r\n\tat org.junit.jupiter.engine.extension.TempDirectory$CloseablePath$1.postVisitDirectory(TempDirectory.java:199)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2743)\r\n\tat java.base/java.nio.file.Files.walkFileTree(Files.java:2797)\r\n\r\n// etc.\r\n```\r\n\r\nI'm also wondering what kind of IOException is triggering the recursive code, as it's [completely swallowed](https://github.com/junit-team/junit5/blob/main/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/extension/TempDirectory.java#L291).\r\n\r\nWhat's also interesting is that I have other tests in this project that have files generated by a Docker container and none of them fail.\r\n\r\n## Steps to reproduce\r\n\r\nThis is pretty esoteric and I don't have a smaller example, but running the CI on the PR always reproduces the error.\r\n\r\n## Context\r\n\r\n - Used versions (Jupiter/Vintage/Platform): 5.8.2\r\n - Build Tool/IDE: Gradle 7.4.1\r\n\r\n## Deliverables\r\n\r\n- [ ] The PR should succeed!\r\n\r\nThanks!\r\n","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2883/timeline","performed_via_github_app":null,"state_reason":"completed"}