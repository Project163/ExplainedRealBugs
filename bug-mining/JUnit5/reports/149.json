{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163/events","html_url":"https://github.com/junit-team/junit-framework/issues/1163","id":274346275,"node_id":"MDU6SXNzdWUyNzQzNDYyNzU=","number":1163,"title":"Support collections of executables in assertAll()","user":{"login":"JLLeitschuh","id":1323708,"node_id":"MDQ6VXNlcjEzMjM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1323708?v=4","gravatar_id":"","url":"https://api.github.com/users/JLLeitschuh","html_url":"https://github.com/JLLeitschuh","followers_url":"https://api.github.com/users/JLLeitschuh/followers","following_url":"https://api.github.com/users/JLLeitschuh/following{/other_user}","gists_url":"https://api.github.com/users/JLLeitschuh/gists{/gist_id}","starred_url":"https://api.github.com/users/JLLeitschuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLLeitschuh/subscriptions","organizations_url":"https://api.github.com/users/JLLeitschuh/orgs","repos_url":"https://api.github.com/users/JLLeitschuh/repos","events_url":"https://api.github.com/users/JLLeitschuh/events{/privacy}","received_events_url":"https://api.github.com/users/JLLeitschuh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":293473932,"node_id":"MDU6TGFiZWwyOTM0NzM5MzI=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20programming%20model","name":"theme: programming model","color":"c7def8","default":false,"description":null},{"id":420911923,"node_id":"MDU6TGFiZWw0MjA5MTE5MjM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Jupiter","name":"component: Jupiter","color":"11ee99","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},{"login":"JLLeitschuh","id":1323708,"node_id":"MDQ6VXNlcjEzMjM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1323708?v=4","gravatar_id":"","url":"https://api.github.com/users/JLLeitschuh","html_url":"https://github.com/JLLeitschuh","followers_url":"https://api.github.com/users/JLLeitschuh/followers","following_url":"https://api.github.com/users/JLLeitschuh/following{/other_user}","gists_url":"https://api.github.com/users/JLLeitschuh/gists{/gist_id}","starred_url":"https://api.github.com/users/JLLeitschuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLLeitschuh/subscriptions","organizations_url":"https://api.github.com/users/JLLeitschuh/orgs","repos_url":"https://api.github.com/users/JLLeitschuh/repos","events_url":"https://api.github.com/users/JLLeitschuh/events{/privacy}","received_events_url":"https://api.github.com/users/JLLeitschuh/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/14","html_url":"https://github.com/junit-team/junit-framework/milestone/14","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/14/labels","id":2768175,"node_id":"MDk6TWlsZXN0b25lMjc2ODE3NQ==","number":14,"title":"5.1 M1","description":"First milestone release of 5.1","creator":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":32,"state":"closed","created_at":"2017-09-15T12:42:05Z","updated_at":"2018-01-14T11:35:04Z","due_on":"2017-11-19T08:00:00Z","closed_at":"2017-11-19T17:08:56Z"},"comments":19,"created_at":"2017-11-15T23:50:05Z","updated_at":"2017-11-16T20:34:13Z","closed_at":"2017-11-16T19:54:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Overview\r\n\r\nContinuing the discussion that was spawned from this Twitter chat:\r\nhttps://twitter.com/relizarov/status/930828269611401216\r\n\r\nTo start this discussion, these are the methods exposed by [AssertAll](https://github.com/junit-team/junit5/blob/master/junit-jupiter-api/src/main/java/org/junit/jupiter/api/AssertAll.java).\r\n\r\nThe `assertAll` method does not have an overload that takes a `Collection<Executable>`.\r\n\r\nCurrently to use `assertAll` from Kotlin you must first turn it into a Java8 `Stream<() -> Unit>`\r\n\r\nThis is the current example API:\r\n```kotlin\r\n@Test\r\nfun `assertions from a stream`() {\r\n    assertAll(\r\n        \"people with name starting with J\",\r\n        people\r\n            .stream()\r\n            .map {\r\n                // This mapping returns Stream<() -> Unit>\r\n                { assertTrue(it.firstName.startsWith(\"J\")) }\r\n            }\r\n    )\r\n}\r\n```\r\n\r\nI think what @elizarov was proposing in his tweet was to change the API so you could do something like this:\r\n\r\n```kotlin\r\n@Test\r\nfun `assertions from a stream`() {\r\n    assertAll(\r\n        \"people with name starting with J\",\r\n        people\r\n            .map {\r\n                // This mapping returns Stream<() -> Unit>\r\n                { assertTrue(it.firstName.startsWith(\"J\")) }\r\n            }\r\n    )\r\n}\r\n```\r\n\r\nCurrently the API exposes this method in kotlin:\r\n```kotlin\r\n/**\r\n * [Stream] of functions to be executed.\r\n */\r\nprivate typealias ExecutableStream = Stream<() -> Unit>\r\nprivate fun ExecutableStream.convert() = map { Executable(it) }\r\n\r\n/**\r\n * @see Assertions.assertAll\r\n */\r\nfun assertAll(executables: ExecutableStream) =\r\n    Assertions.assertAll(executables.convert())\r\n\r\n/**\r\n * @see Assertions.assertAll\r\n */\r\nfun assertAll(heading: String?, executables: ExecutableStream) =\r\n    Assertions.assertAll(heading, executables.convert())\r\n```\r\n\r\nThe proposed suggestion would add additional assertion methods:\r\n```kotlin\r\n/**\r\n * [Collection] of functions to be executed.\r\n */\r\nprivate typealias ExecutableCollection = Collection<() -> Unit>\r\n/**\r\n * @see Assertions.assertAll\r\n */\r\nfun assertAll(executables: ExecutableCollection) =\r\n    assertAll(executables.stream())\r\n/**\r\n * @see Assertions.assertAll\r\n */\r\nfun assertAll(heading: String?, executables: ExecutableCollection) =\r\n    assertAll(heading, executables.stream())\r\n```\r\n\r\nIf the team decides that these methods make sense to be added, should be reflected in the Java API?\r\nThe additions would be something like this:\r\n\r\n```java\r\nstatic void assertAll(Collection<Executable> executables) {\r\n    assertAll(null, executables);\r\n}\r\n\r\nstatic void assertAll(String heading, Collection<Executable> executables) {\r\n    assertAll(heading, executables.stream());\r\n}\r\n```\r\n\r\n## Question for the team\r\n\r\nWhy was `void assertAll(Collection<Executable> executables)` not added to the API to begin with?\r\nDo those same reasons apply here? Do they only apply to Java but not Kotlin?\r\n\r\n## Deliverables\r\n\r\n- [x] Support `Collection<Executable>` in Java for `assertAll()`.\r\n- [x] Document `Collection<Executable>` support in Java in Release Notes.\r\n- [x] Support `Collection<() -> Unit>` in Kotlin for `assertAll()`.\r\n- [x] Document `Collection<() -> Unit>` support in Kotlin in Release Notes (if necessary).\r\n- [x] Update Kotlin examples in User Guide.\r\n","closed_by":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/1163/timeline","performed_via_github_app":null,"state_reason":"completed"}