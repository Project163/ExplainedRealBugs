{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177/events","html_url":"https://github.com/junit-team/junit-framework/issues/3177","id":1600941199,"node_id":"I_kwDOAbwRH85fbGyP","number":3177,"title":"Implicit boolean conversion in parameterized tests should be strict and accept only `true` or `false`","user":{"login":"s-rwe","id":123059570,"node_id":"U_kgDOB1W9cg","avatar_url":"https://avatars.githubusercontent.com/u/123059570?v=4","gravatar_id":"","url":"https://api.github.com/users/s-rwe","html_url":"https://github.com/s-rwe","followers_url":"https://api.github.com/users/s-rwe/followers","following_url":"https://api.github.com/users/s-rwe/following{/other_user}","gists_url":"https://api.github.com/users/s-rwe/gists{/gist_id}","starred_url":"https://api.github.com/users/s-rwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-rwe/subscriptions","organizations_url":"https://api.github.com/users/s-rwe/orgs","repos_url":"https://api.github.com/users/s-rwe/repos","events_url":"https://api.github.com/users/s-rwe/events{/privacy}","received_events_url":"https://api.github.com/users/s-rwe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165180,"node_id":"MDU6TGFiZWwxNjUxNjUxODA=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null},{"id":293473932,"node_id":"MDU6TGFiZWwyOTM0NzM5MzI=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20programming%20model","name":"theme: programming model","color":"c7def8","default":false,"description":null},{"id":420911923,"node_id":"MDU6TGFiZWw0MjA5MTE5MjM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Jupiter","name":"component: Jupiter","color":"11ee99","default":false,"description":null},{"id":747276013,"node_id":"MDU6TGFiZWw3NDcyNzYwMTM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20parameterized%20tests","name":"theme: parameterized tests","color":"9e9dea","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"s-rwe","id":123059570,"node_id":"U_kgDOB1W9cg","avatar_url":"https://avatars.githubusercontent.com/u/123059570?v=4","gravatar_id":"","url":"https://api.github.com/users/s-rwe","html_url":"https://github.com/s-rwe","followers_url":"https://api.github.com/users/s-rwe/followers","following_url":"https://api.github.com/users/s-rwe/following{/other_user}","gists_url":"https://api.github.com/users/s-rwe/gists{/gist_id}","starred_url":"https://api.github.com/users/s-rwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-rwe/subscriptions","organizations_url":"https://api.github.com/users/s-rwe/orgs","repos_url":"https://api.github.com/users/s-rwe/repos","events_url":"https://api.github.com/users/s-rwe/events{/privacy}","received_events_url":"https://api.github.com/users/s-rwe/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"s-rwe","id":123059570,"node_id":"U_kgDOB1W9cg","avatar_url":"https://avatars.githubusercontent.com/u/123059570?v=4","gravatar_id":"","url":"https://api.github.com/users/s-rwe","html_url":"https://github.com/s-rwe","followers_url":"https://api.github.com/users/s-rwe/followers","following_url":"https://api.github.com/users/s-rwe/following{/other_user}","gists_url":"https://api.github.com/users/s-rwe/gists{/gist_id}","starred_url":"https://api.github.com/users/s-rwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-rwe/subscriptions","organizations_url":"https://api.github.com/users/s-rwe/orgs","repos_url":"https://api.github.com/users/s-rwe/repos","events_url":"https://api.github.com/users/s-rwe/events{/privacy}","received_events_url":"https://api.github.com/users/s-rwe/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/65","html_url":"https://github.com/junit-team/junit-framework/milestone/65","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/65/labels","id":8454988,"node_id":"MI_kwDOAbwRH84AgQNM","number":65,"title":"5.10 M1","description":"","creator":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":43,"state":"closed","created_at":"2022-09-24T13:32:16Z","updated_at":"2023-05-13T13:20:43Z","due_on":null,"closed_at":"2023-05-13T13:20:43Z"},"comments":3,"created_at":"2023-02-27T10:56:31Z","updated_at":"2023-10-06T13:15:18Z","closed_at":"2023-04-28T12:39:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We encountered a glitch in parameterized tests, where tests can be unintentionally running with `false` values for an argument, for example if there is a typo in the arguments of a `@CsvSource`. If such tests still happen to be successful, it's likely that no one will notice the mistake.\r\n\r\nThe implicit conversion is just using `Boolean::valueOf` under the hood AFAICS (`StringToBooleanAndCharPrimitiveConverter`), which is very lenient in terms of \"bad\" input, which all just gets mapped to false.\r\n\r\nSample snippet to show problematic cases (which would have clearly been intended to be \"true\" values):\r\n\r\n```java\r\n  @ParameterizedTest\r\n  @CsvSource(value = {\r\n      \"áº—rue\",\r\n      \"tru\"\r\n  })\r\n  public void testAllArgsTrue(Boolean value) {\r\n    Assertions.assertEquals(value, true);\r\n  }\r\n```\r\n\r\nSince this can hide problems and prevent tests from running through as intended, it should be reasonable to make the implicit conversion just fail on \"invalid\" input, to show mistakes and force developers to correct them accordingly (i.e. ensure that only values `true` + `false` are acceptable, with case-insensitive matching).\r\n\r\nThis is also an example for which customizing the implicit argument converters could be helpful (#853 which was closed, I think that possibility doesn't exist). But IMO it should be fine to just adjust the default conversion in general, to avoid such accidental mistakes in general.\r\n","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/3177/timeline","performed_via_github_app":null,"state_reason":"completed"}