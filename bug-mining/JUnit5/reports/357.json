{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207/events","html_url":"https://github.com/junit-team/junit-framework/issues/2207","id":576763797,"node_id":"MDU6SXNzdWU1NzY3NjM3OTc=","number":2207,"title":"Improve check for multiple junit-platform.properties files","user":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165180,"node_id":"MDU6TGFiZWwxNjUxNjUxODA=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null},{"id":420912036,"node_id":"MDU6TGFiZWw0MjA5MTIwMzY=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Platform","name":"component: Platform","color":"11dd99","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sormuras","id":2319838,"node_id":"MDQ6VXNlcjIzMTk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2319838?v=4","gravatar_id":"","url":"https://api.github.com/users/sormuras","html_url":"https://github.com/sormuras","followers_url":"https://api.github.com/users/sormuras/followers","following_url":"https://api.github.com/users/sormuras/following{/other_user}","gists_url":"https://api.github.com/users/sormuras/gists{/gist_id}","starred_url":"https://api.github.com/users/sormuras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sormuras/subscriptions","organizations_url":"https://api.github.com/users/sormuras/orgs","repos_url":"https://api.github.com/users/sormuras/repos","events_url":"https://api.github.com/users/sormuras/events{/privacy}","received_events_url":"https://api.github.com/users/sormuras/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/47","html_url":"https://github.com/junit-team/junit-framework/milestone/47","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/47/labels","id":5194753,"node_id":"MDk6TWlsZXN0b25lNTE5NDc1Mw==","number":47,"title":"5.6.1","description":"","creator":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":3,"state":"closed","created_at":"2020-03-12T11:11:57Z","updated_at":"2020-03-22T19:08:54Z","due_on":"2020-03-22T07:00:00Z","closed_at":"2020-03-22T19:08:54Z"},"comments":3,"created_at":"2020-03-06T08:03:30Z","updated_at":"2020-03-22T09:29:39Z","closed_at":"2020-03-22T09:29:38Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Overview\r\n\r\nToday, the following warning is generated...\r\n\r\nhttps://github.com/junit-team/junit5/blob/e79dde3a30b146000743e754fc4c3355cfe70736/junit-platform-launcher/src/main/java/org/junit/platform/launcher/core/LauncherConfigurationParameters.java#L60\r\n\r\n...and emitted even if the `junit-platform.properties` resource is only once physically present.\r\n\r\nThis false positive is due to using...\r\n\r\nhttps://github.com/junit-team/junit5/blob/e79dde3a30b146000743e754fc4c3355cfe70736/junit-platform-launcher/src/main/java/org/junit/platform/launcher/core/LauncherConfigurationParameters.java#L55\r\n\r\n...which may include duplicated elements when a custom class loader hierarchy is used. For details see the **\"Implementation Requirements\"** at: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html#getResources(java.lang.String)\r\n\r\n## Example\r\n\r\nJDK 11, IntelliJ IDEA, in-module (white box) testing with...\r\n\r\n```java\r\n  @Test\r\n  void getJUnitPlatformProperties() throws Exception {\r\n    var loader = getClass().getClassLoader();\r\n    System.out.println(\"loader = \" + loader);\r\n    System.out.println(\"loader.parent = \" + loader.getParent());\r\n    System.out.println(\"loader.parent.parent = \" + loader.getParent().getParent());\r\n    System.out.println();\r\n    System.out.println(\"single: \" + loader.getResource(\"junit-platform.properties\"));\r\n    System.out.println();\r\n    var urls = Collections.list(loader.getResources(\"junit-platform.properties\"));\r\n    urls.forEach(url -> System.out.println(\"multi: \" + url));\r\n    System.out.println();\r\n    var distinct = new HashSet<>(urls);\r\n    distinct.forEach(url -> System.out.println(\"distinct: \" + url));\r\n  }\r\n```\r\n...emits:\r\n```\r\nloader = jdk.internal.loader.ClassLoaders$AppClassLoader@28864e92\r\nloader.parent = jdk.internal.loader.ClassLoaders$PlatformClassLoader@e24ddd0\r\nloader.parent.parent = null\r\n\r\nsingle: file:/.../.idea/out/test/de.sormuras.bach/junit-platform.properties\r\n\r\nmulti: file:/.../.idea/out/test/de.sormuras.bach/junit-platform.properties\r\nmulti: file:/.../.idea/out/test/de.sormuras.bach/junit-platform.properties\r\n\r\ndistinct: file:/.../.idea/out/test/de.sormuras.bach/junit-platform.properties\r\n```\r\n\r\n## Deliverables\r\n\r\n- [x] Prune duplicate elements before checking the amount of found resources\r\n","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/2207/timeline","performed_via_github_app":null,"state_reason":"completed"}