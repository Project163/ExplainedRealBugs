{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/924","repository_url":"https://api.github.com/repos/junit-team/junit-framework","labels_url":"https://api.github.com/repos/junit-team/junit-framework/issues/924/labels{/name}","comments_url":"https://api.github.com/repos/junit-team/junit-framework/issues/924/comments","events_url":"https://api.github.com/repos/junit-team/junit-framework/issues/924/events","html_url":"https://github.com/junit-team/junit-framework/issues/924","id":241314362,"node_id":"MDU6SXNzdWUyNDEzMTQzNjI=","number":924,"title":"Introduce Kotlin Assertion Helper Library","user":{"login":"JLLeitschuh","id":1323708,"node_id":"MDQ6VXNlcjEzMjM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1323708?v=4","gravatar_id":"","url":"https://api.github.com/users/JLLeitschuh","html_url":"https://github.com/JLLeitschuh","followers_url":"https://api.github.com/users/JLLeitschuh/followers","following_url":"https://api.github.com/users/JLLeitschuh/following{/other_user}","gists_url":"https://api.github.com/users/JLLeitschuh/gists{/gist_id}","starred_url":"https://api.github.com/users/JLLeitschuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLLeitschuh/subscriptions","organizations_url":"https://api.github.com/users/JLLeitschuh/orgs","repos_url":"https://api.github.com/users/JLLeitschuh/repos","events_url":"https://api.github.com/users/JLLeitschuh/events{/privacy}","received_events_url":"https://api.github.com/users/JLLeitschuh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":165165180,"node_id":"MDU6TGFiZWwxNjUxNjUxODA=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null},{"id":293473932,"node_id":"MDU6TGFiZWwyOTM0NzM5MzI=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/theme:%20programming%20model","name":"theme: programming model","color":"c7def8","default":false,"description":null},{"id":420911923,"node_id":"MDU6TGFiZWw0MjA5MTE5MjM=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Jupiter","name":"component: Jupiter","color":"11ee99","default":false,"description":null},{"id":672094785,"node_id":"MDU6TGFiZWw2NzIwOTQ3ODU=","url":"https://api.github.com/repos/junit-team/junit-framework/labels/component:%20Kotlin","name":"component: Kotlin","color":"c2e0c6","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"JLLeitschuh","id":1323708,"node_id":"MDQ6VXNlcjEzMjM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1323708?v=4","gravatar_id":"","url":"https://api.github.com/users/JLLeitschuh","html_url":"https://github.com/JLLeitschuh","followers_url":"https://api.github.com/users/JLLeitschuh/followers","following_url":"https://api.github.com/users/JLLeitschuh/following{/other_user}","gists_url":"https://api.github.com/users/JLLeitschuh/gists{/gist_id}","starred_url":"https://api.github.com/users/JLLeitschuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLLeitschuh/subscriptions","organizations_url":"https://api.github.com/users/JLLeitschuh/orgs","repos_url":"https://api.github.com/users/JLLeitschuh/repos","events_url":"https://api.github.com/users/JLLeitschuh/events{/privacy}","received_events_url":"https://api.github.com/users/JLLeitschuh/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"JLLeitschuh","id":1323708,"node_id":"MDQ6VXNlcjEzMjM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/1323708?v=4","gravatar_id":"","url":"https://api.github.com/users/JLLeitschuh","html_url":"https://github.com/JLLeitschuh","followers_url":"https://api.github.com/users/JLLeitschuh/followers","following_url":"https://api.github.com/users/JLLeitschuh/following{/other_user}","gists_url":"https://api.github.com/users/JLLeitschuh/gists{/gist_id}","starred_url":"https://api.github.com/users/JLLeitschuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JLLeitschuh/subscriptions","organizations_url":"https://api.github.com/users/JLLeitschuh/orgs","repos_url":"https://api.github.com/users/JLLeitschuh/repos","events_url":"https://api.github.com/users/JLLeitschuh/events{/privacy}","received_events_url":"https://api.github.com/users/JLLeitschuh/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/junit-team/junit-framework/milestones/14","html_url":"https://github.com/junit-team/junit-framework/milestone/14","labels_url":"https://api.github.com/repos/junit-team/junit-framework/milestones/14/labels","id":2768175,"node_id":"MDk6TWlsZXN0b25lMjc2ODE3NQ==","number":14,"title":"5.1 M1","description":"First milestone release of 5.1","creator":{"login":"sbrannen","id":104798,"node_id":"MDQ6VXNlcjEwNDc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104798?v=4","gravatar_id":"","url":"https://api.github.com/users/sbrannen","html_url":"https://github.com/sbrannen","followers_url":"https://api.github.com/users/sbrannen/followers","following_url":"https://api.github.com/users/sbrannen/following{/other_user}","gists_url":"https://api.github.com/users/sbrannen/gists{/gist_id}","starred_url":"https://api.github.com/users/sbrannen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbrannen/subscriptions","organizations_url":"https://api.github.com/users/sbrannen/orgs","repos_url":"https://api.github.com/users/sbrannen/repos","events_url":"https://api.github.com/users/sbrannen/events{/privacy}","received_events_url":"https://api.github.com/users/sbrannen/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":32,"state":"closed","created_at":"2017-09-15T12:42:05Z","updated_at":"2018-01-14T11:35:04Z","due_on":"2017-11-19T08:00:00Z","closed_at":"2017-11-19T17:08:56Z"},"comments":42,"created_at":"2017-07-07T16:25:26Z","updated_at":"2017-12-12T21:14:18Z","closed_at":"2017-11-13T19:06:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Feature Request\r\n\r\nThis is mostly a \"nice to have\" syntactically but the current a select few methods that all take `[SomeWrapperType]<Executable>` don't play as nicely as they could in kotlin.\r\n\r\nSomeone could easily create a kotlin DSL library wrapper over junit 5.\r\nI did this with the [Google Guice DI library](https://github.com/google/guice) creating [Kotlin Guiced](https://github.com/JLLeitschuh/kotlin-guiced). I could just as easily do the same thing for Junit5 but if there is an interest it would be nice if the small DSL library was vendored by the Junit team.\r\n\r\nThe methods that I've currently found that don't play the nicest are the following:\r\n\r\n### `assertAll(Stream<Executable> executables)`:\r\nIn kotlin calling this method becomes:\r\n```kotlin\r\nassertAll(someCollection.stream().map {\r\n    Executable {\r\n         assertEquals(6,6)\r\n    }\r\n})\r\n```\r\nThis could be simplified by providing a method:\r\n```kotlin\r\nfun assertAll(executables: Stream<() -> Unit>) = assertAll(executables.map { Executable(it) })\r\n```\r\n\r\nThis would allow for the much nicer syntax:\r\n```kotlin\r\nassertAll(someCollection.stream().map {\r\n    { assertEquals(6,6) }\r\n})\r\n\r\n// Or even this:\r\nassertAll(someCollection.stream().map {\r\n    listOf(\r\n        { assertEquals(6,6) }\r\n        { assertEquals(3,3) }\r\n    )\r\n}.flatMap { it.stream() })\r\n```\r\n\r\n### `assertAll(Executable... executables)`:\r\nIn kotlin calling this method becomes:\r\n```kotlin\r\nassertAll(\r\n    Executable { assertEquals(6, 6) },\r\n    Executable { assertEquals(3, 3) },\r\n    Executable { assertEquals(10_000, 10_000) }\r\n)\r\n```\r\nThis could be simplified by providing a method:\r\n```kotlin\r\n// This calls the above suggested method.\r\nfun assertAll(vararg executables: () -> Unit) = assertAll(executables.toList().stream())\r\n```\r\n\r\nThis would allow for the much nicer syntax:\r\n```kotlin\r\nassertAll(\r\n   { assertEquals(6, 6) },\r\n   { assertEquals(3, 3) },\r\n   { assertEquals(10_000, 10_000) }\r\n)\r\n```\r\n\r\nSimilar methods would need to be provided for the methods that take `String header` as well.\r\n\r\n### `assertThrows(Class<T> expectedType, Executable executable)`\r\n\r\nCalling in Kotlin it becomes:\r\n```kotlin\r\nassertThrows(IllegalArgumentException::class.java) { throw IllegalArgumentException() }\r\n```\r\nYeay! We get auto conversion because this method takes `Executable executable` not a collection. However the `IllegalArgumentException::class.java` is kind of clunky.\r\n\r\nThis one could use reified types to make this nicer!\r\n\r\nIf we provide a method:\r\n```kotlin\r\ninline fun <reified T> assertThrows(executable : () -> Unit) = assertThrows(T::class.java, Executable(executable))\r\n```\r\nThen the syntax to call it in kotlin becomes:\r\n```kotlin\r\nassertThrows<IllegalArgumentException> { throw IllegalArgumentException() }\r\n```\r\n\r\n**Note**\r\nThese problems don't exist with all methods that take `Executable`. \r\nFor example, this is completely valid given the current Junit5 API:\r\n```kotlin\r\nassertTimeout(Duration.ZERO) { }\r\n```\r\n\r\n\r\n## Deliverables\r\n\r\n- [ ] Create a `junit-jupiter-kotlin-api`.\r\n- [ ] Provide Kotlin friendly DSL in the `junit-jupiter-kotlin-api` library.\r\n","closed_by":{"login":"marcphilipp","id":214207,"node_id":"MDQ6VXNlcjIxNDIwNw==","avatar_url":"https://avatars.githubusercontent.com/u/214207?v=4","gravatar_id":"","url":"https://api.github.com/users/marcphilipp","html_url":"https://github.com/marcphilipp","followers_url":"https://api.github.com/users/marcphilipp/followers","following_url":"https://api.github.com/users/marcphilipp/following{/other_user}","gists_url":"https://api.github.com/users/marcphilipp/gists{/gist_id}","starred_url":"https://api.github.com/users/marcphilipp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcphilipp/subscriptions","organizations_url":"https://api.github.com/users/marcphilipp/orgs","repos_url":"https://api.github.com/users/marcphilipp/repos","events_url":"https://api.github.com/users/marcphilipp/events{/privacy}","received_events_url":"https://api.github.com/users/marcphilipp/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junit-team/junit-framework/issues/924/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junit-team/junit-framework/issues/924/timeline","performed_via_github_app":null,"state_reason":"completed"}