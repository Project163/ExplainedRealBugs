diff --git a/activemq-broker/src/test/java/org/apache/activemq/util/LockFileTest.java b/activemq-broker/src/test/java/org/apache/activemq/util/LockFileTest.java
index 30d9172ad..0e4c23db0 100644
--- a/activemq-broker/src/test/java/org/apache/activemq/util/LockFileTest.java
+++ b/activemq-broker/src/test/java/org/apache/activemq/util/LockFileTest.java
@@ -35,16 +35,18 @@ public class LockFileTest {
 
         underTest.lock();
 
-        lockFile.delete();
+        // will fail on windows b/c the file is open
+        if ( lockFile.delete() ) {
 
-        assertFalse("no longer valid", underTest.keepAlive());
+            assertFalse("no longer valid", underTest.keepAlive());
 
-        // a slave gets in
-        lockFile.createNewFile();
+            // a slave gets in
+            lockFile.createNewFile();
 
-        underTest.unlock();
+            underTest.unlock();
 
-        assertTrue("file still exists after unlock when not locked", lockFile.exists());
+            assertTrue("file still exists after unlock when not locked", lockFile.exists());
+        }
 
     }
 
