diff --git a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportHelper.java b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportHelper.java
index 09cab5db0..076fff464 100644
--- a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportHelper.java
+++ b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpNioTransportHelper.java
@@ -158,6 +158,7 @@ public class AmqpNioTransportHelper {
         } else {
             transportSupport.doConsume(AmqpSupport.toBuffer(currentBuffer));
         }
+        currentBuffer = null;
 
         if (plain.hasRemaining()) {
             if (plain.remaining() < 4) {
@@ -167,8 +168,8 @@ public class AmqpNioTransportHelper {
             }
         } else {
             nextFrameSize = -1;
-            currentBuffer = null;
         }
+
         return nextFrameSize;
     }
 
diff --git a/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/joram/JoramJmsNioTest.java b/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/joram/JoramJmsNioTest.java
index 7c78d0fe9..b50bbff5b 100644
--- a/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/joram/JoramJmsNioTest.java
+++ b/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/joram/JoramJmsNioTest.java
@@ -42,7 +42,6 @@ import org.objectweb.jtests.jms.conform.topic.TemporaryTopicTest;
 /**
  * Run the JoramJmsTests using amqp+nio
  */
-@Ignore("AMQ-5094")
 @RunWith(Suite.class)
 @Suite.SuiteClasses({
     // TopicSessionTest.class,    // Hangs, see https://issues.apache.org/jira/browse/PROTON-154
