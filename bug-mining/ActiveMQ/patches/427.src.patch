diff --git a/activemq-core/src/main/java/org/apache/activemq/util/DataByteArrayInputStream.java b/activemq-core/src/main/java/org/apache/activemq/util/DataByteArrayInputStream.java
index 32a58594c..d4b7f660f 100755
--- a/activemq-core/src/main/java/org/apache/activemq/util/DataByteArrayInputStream.java
+++ b/activemq-core/src/main/java/org/apache/activemq/util/DataByteArrayInputStream.java
@@ -282,7 +282,7 @@ public final class DataByteArrayInputStream extends InputStream implements DataI
             case 12:
             case 13:
                 pos += 2;
-                if (pos > length) {
+                if (pos > total) {
                     throw new UTFDataFormatException("bad string");
                 }
                 c2 = (int)buf[pos - 1];
@@ -293,7 +293,7 @@ public final class DataByteArrayInputStream extends InputStream implements DataI
                 break;
             case 14:
                 pos += 3;
-                if (pos > length) {
+                if (pos > total) {
                     throw new UTFDataFormatException("bad string");
                 }
                 c2 = (int)buf[pos - 2];
diff --git a/activemq-core/src/test/java/org/apache/activemq/util/DataByteArrayInputStreamTest.java b/activemq-core/src/test/java/org/apache/activemq/util/DataByteArrayInputStreamTest.java
new file mode 100644
index 000000000..5e54d62cb
--- /dev/null
+++ b/activemq-core/src/test/java/org/apache/activemq/util/DataByteArrayInputStreamTest.java
@@ -0,0 +1,50 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.activemq.util;
+
+import junit.framework.TestCase;
+
+public class DataByteArrayInputStreamTest extends TestCase {
+
+    /**
+     * https://issues.apache.org/activemq/browse/AMQ-1911
+     */
+    public void testNonAscii() throws Exception {
+        doMarshallUnMarshallValidation("mei√üen");
+        
+        int test = 0; // int to get Supplementary chars
+        while(Character.isDefined(test)) {
+            doMarshallUnMarshallValidation(String.valueOf((char)test));
+            test++;
+        }
+        
+        int massiveThreeByteCharValue = 0x0FFF;
+        doMarshallUnMarshallValidation(String.valueOf((char)massiveThreeByteCharValue));
+    }
+    
+    void doMarshallUnMarshallValidation(String value) throws Exception {        
+        DataByteArrayOutputStream out = new DataByteArrayOutputStream();
+        out.writeBoolean(true);
+        out.writeUTF(value);
+        out.close();
+        
+        DataByteArrayInputStream in = new DataByteArrayInputStream(out.getData());
+        in.readBoolean();
+        String readBack = in.readUTF();
+        assertEquals(value, readBack);
+    }
+}
