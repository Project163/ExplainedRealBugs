diff --git a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
index 80f7a40e5..35cc491b5 100644
--- a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
+++ b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
@@ -351,7 +351,10 @@ class AmqpProtocolConverter implements IAmqpProtocolConverter {
         if (remoteState == EndpointState.ACTIVE) {
             onLinkOpen(link);
         } else if (remoteState == EndpointState.CLOSED) {
-            ((AmqpDeliveryListener) link.getContext()).onClose();
+            AmqpDeliveryListener context = (AmqpDeliveryListener) link.getContext();
+            if (context != null) {
+                context.onClose();
+            }
             link.close();
             link.free();
         }
