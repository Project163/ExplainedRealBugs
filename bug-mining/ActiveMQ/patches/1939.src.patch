diff --git a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
index a718a97a4..78310ba7e 100644
--- a/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
+++ b/activemq-amqp/src/main/java/org/apache/activemq/transport/amqp/AmqpProtocolConverter.java
@@ -514,6 +514,10 @@ class AmqpProtocolConverter {
             message.setProducerId(producerId);
 
             MessageId messageId = message.getMessageId();
+            if (messageId == null) {
+                messageId = new MessageId();
+            }
+
             messageId.setProducerId(producerId);
             messageId.setProducerSequenceId(messageIdGenerator.getNextSequenceId());
 
