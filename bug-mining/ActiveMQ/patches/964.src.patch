diff --git a/activemq-core/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java b/activemq-core/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java
index e639f39d9..c6384dd9f 100644
--- a/activemq-core/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java
+++ b/activemq-core/src/main/java/org/apache/activemq/transport/nio/NIOTransport.java
@@ -150,7 +150,9 @@ public class NIOTransport extends TcpTransport {
     }
 
     protected void doStop(ServiceStopper stopper) throws Exception {
-        selection.close();
+        if (selection != null) {
+            selection.close();
+        }
         super.doStop(stopper);
     }
 }
