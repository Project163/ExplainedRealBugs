diff --git a/activemq-core/pom.xml b/activemq-core/pom.xml
index 8afc3fbd4..f8b3d847a 100755
--- a/activemq-core/pom.xml
+++ b/activemq-core/pom.xml
@@ -445,12 +445,6 @@
             <exclude>**/RendezvousDiscoverTransportTest.*</exclude>
             <exclude>**/MissingDataFileTest.*</exclude>
 
-            <!-- UDP related tests someimes fail on some platforms -->
-            <exclude>**/UdpTransportTest.*</exclude>
-            <exclude>**/UdpTransportUsingServerTest.*</exclude>
-            <exclude>**/UdpSendReceiveWithTwoConnectionsTest.*</exclude>
-            <exclude>**/UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest.*</exclude>
-
             <!-- m2 tests failing since move from assembly  -->
             <exclude>**/TwoBrokerMessageNotSentToRemoteWhenNoConsumerTest.*</exclude>
             <exclude>**/TwoBrokerQueueClientsReconnectTest.*</exclude>
diff --git a/activemq-core/src/main/java/org/apache/activemq/transport/udp/UdpTransportFactory.java b/activemq-core/src/main/java/org/apache/activemq/transport/udp/UdpTransportFactory.java
index fd294bf87..115b3a549 100755
--- a/activemq-core/src/main/java/org/apache/activemq/transport/udp/UdpTransportFactory.java
+++ b/activemq-core/src/main/java/org/apache/activemq/transport/udp/UdpTransportFactory.java
@@ -37,6 +37,7 @@ import org.apache.activemq.transport.reliable.ReplayStrategy;
 import org.apache.activemq.transport.reliable.Replayer;
 import org.apache.activemq.transport.tcp.TcpTransportFactory;
 import org.apache.activemq.util.IOExceptionSupport;
+import org.apache.activemq.util.IntSequenceGenerator;
 import org.apache.activemq.util.IntrospectionSupport;
 import org.apache.activemq.util.URISupport;
 import org.apache.activemq.wireformat.WireFormat;
@@ -60,7 +61,7 @@ public class UdpTransportFactory extends TransportFactory {
             WireFormat wf = createWireFormat(options);
             int port = location.getPort();
             OpenWireFormat openWireFormat = asOpenWireFormat(wf);
-            UdpTransport transport = (UdpTransport) createTransport(location, wf);
+            UdpTransport transport = (UdpTransport) createTransport(location.getPort(), wf);
 
             Transport configuredTransport = configure(transport, wf, options, true);
             UdpTransportServer server = new UdpTransportServer(location, transport, configuredTransport, createReplayStrategy());
@@ -105,6 +106,11 @@ public class UdpTransportFactory extends TransportFactory {
         return new UdpTransport(wireFormat, location);
     }
 
+    protected Transport createTransport(int port, WireFormat wf) throws UnknownHostException, IOException {
+        OpenWireFormat wireFormat = asOpenWireFormat(wf);
+        return new UdpTransport(wireFormat, port);
+    }
+
     /**
      * Configures the transport
      * 
diff --git a/activemq-core/src/test/java/org/apache/activemq/transport/udp/UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest.java b/activemq-core/src/test/java/org/apache/activemq/transport/udp/UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest.java
index 59ba9de38..01d69b479 100644
--- a/activemq-core/src/test/java/org/apache/activemq/transport/udp/UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/transport/udp/UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest.java
@@ -24,7 +24,7 @@ public class UdpSendReceiveWithTwoConnectionsAndLargeMessagesTest extends UdpSen
 
     protected void setUp() throws Exception {
         largeMessages = true;
-        //messageCount = 2;
+        messageCount = 2;
         super.setUp();
     }
 
