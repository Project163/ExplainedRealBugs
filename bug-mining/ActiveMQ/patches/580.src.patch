diff --git a/activemq-core/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java b/activemq-core/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java
index 09f61bf77..f2a2d0bf4 100644
--- a/activemq-core/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java
+++ b/activemq-core/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java
@@ -324,9 +324,9 @@ public class MessageDatabase {
                         tx.store(metadata.page, metadataMarshaller, true);
                     }
                 });
-                close();
             }
         }
+        close();
     }
 
     /**
