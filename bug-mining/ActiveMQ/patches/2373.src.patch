diff --git a/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ4157Test.java b/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ4157Test.java
index 3a47f1d28..d98652f27 100644
--- a/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ4157Test.java
+++ b/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ4157Test.java
@@ -36,6 +36,7 @@ import javax.jms.Session;
 
 import org.apache.activemq.ActiveMQConnection;
 import org.apache.activemq.ActiveMQConnectionFactory;
+import org.apache.activemq.TestSupport;
 import org.apache.activemq.broker.BrokerService;
 import org.apache.activemq.command.ActiveMQQueue;
 import org.apache.activemq.command.ConnectionControl;
@@ -166,7 +167,7 @@ public class AMQ4157Test {
         broker.addConnector("tcp://0.0.0.0:0");
         broker.start();
 
-        String options = "?jms.prefetchPolicy.all=1000&jms.watchTopicAdvisories=false&jms.useAsyncSend=true&jms.alwaysSessionAsync=false&jms.dispatchAsync=false&socketBufferSize=131072&ioBufferSize=16384&wireFormat.tightEncodingEnabled=false&wireFormat.cacheSize=8192";
+        String options = "?jms.redeliveryPolicy.maximumRedeliveries=-1&jms.prefetchPolicy.all=1000&jms.watchTopicAdvisories=false&jms.useAsyncSend=true&jms.alwaysSessionAsync=false&jms.dispatchAsync=false&socketBufferSize=131072&ioBufferSize=16384&wireFormat.tightEncodingEnabled=false&wireFormat.cacheSize=8192";
         connectionFactory = new ActiveMQConnectionFactory(broker.getTransportConnectors().get(0).getConnectUri() + options);
     }
 }
\ No newline at end of file
