diff --git a/activemq-core/src/test/java/org/apache/activemq/transport/discovery/DiscoveryTransportBrokerTest.java b/activemq-core/src/test/java/org/apache/activemq/transport/discovery/DiscoveryTransportBrokerTest.java
index 667b4dcc0..a1eb906b0 100755
--- a/activemq-core/src/test/java/org/apache/activemq/transport/discovery/DiscoveryTransportBrokerTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/transport/discovery/DiscoveryTransportBrokerTest.java
@@ -91,7 +91,7 @@ public class DiscoveryTransportBrokerTest extends NetworkTestSupport {
         StubConnection connectionA;
         StubConnection connectionB;
         TransportConnector serverA;
-        if (connector.getServer().getConnectURI().equals(ft.getConnectedTransportURI())) {
+        if (connector.getServer().getConnectURI().getPort() == ft.getConnectedTransportURI().getPort()) {
             connectionA = connection1;
             connectionB = connection2;
             serverA = connector;
