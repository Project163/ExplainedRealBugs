diff --git a/activemq-core/src/main/java/org/apache/activemq/util/FactoryFinder.java b/activemq-core/src/main/java/org/apache/activemq/util/FactoryFinder.java
index d1730607d..584604ea3 100644
--- a/activemq-core/src/main/java/org/apache/activemq/util/FactoryFinder.java
+++ b/activemq-core/src/main/java/org/apache/activemq/util/FactoryFinder.java
@@ -67,10 +67,17 @@ public class FactoryFinder {
         if (className == null) {
             throw new IOException("Expected property is missing: " + propertyPrefix + "class");
         }
-        Class clazz;
-        try {
-            clazz = Thread.currentThread().getContextClassLoader().loadClass(className);
-        } catch (ClassNotFoundException e) {
+        Class clazz = null;
+        ClassLoader loader = Thread.currentThread().getContextClassLoader();
+        if (loader != null) {
+            try {
+                clazz = loader.loadClass(className);
+            }
+            catch (ClassNotFoundException e) {
+                // ignore
+            }
+        }
+        if (clazz == null) {
             clazz = FactoryFinder.class.getClassLoader().loadClass(className);
         }
 
