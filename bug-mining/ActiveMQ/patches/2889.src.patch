diff --git a/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java b/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java
index f126b6573..51b217d85 100644
--- a/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java
+++ b/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/page/PageFile.java
@@ -1048,45 +1048,46 @@ public class PageFile {
             this.checkpointLatch = null;
         }
 
-        // First land the writes in the recovery file
-        if (enableRecoveryFile) {
-            Checksum checksum = new Adler32();
+        try {
 
-            recoveryFile.seek(RECOVERY_FILE_HEADER_SIZE);
+            // First land the writes in the recovery file
+            if (enableRecoveryFile) {
+                Checksum checksum = new Adler32();
 
-            for (PageWrite w : batch) {
-                try {
-                    checksum.update(w.getDiskBound(), 0, pageSize);
-                } catch (Throwable t) {
-                    throw IOExceptionSupport.create("Cannot create recovery file. Reason: " + t, t);
-                }
-                recoveryFile.writeLong(w.page.getPageId());
-                recoveryFile.write(w.getDiskBound(), 0, pageSize);
-            }
+                recoveryFile.seek(RECOVERY_FILE_HEADER_SIZE);
 
-            // Can we shrink the recovery buffer??
-            if (recoveryPageCount > recoveryFileMaxPageCount) {
-                int t = Math.max(recoveryFileMinPageCount, batch.size());
-                recoveryFile.setLength(recoveryFileSizeForPages(t));
-            }
+                for (PageWrite w : batch) {
+                    try {
+                        checksum.update(w.getDiskBound(), 0, pageSize);
+                    } catch (Throwable t) {
+                        throw IOExceptionSupport.create("Cannot create recovery file. Reason: " + t, t);
+                    }
+                    recoveryFile.writeLong(w.page.getPageId());
+                    recoveryFile.write(w.getDiskBound(), 0, pageSize);
+                }
 
-            // Record the page writes in the recovery buffer.
-            recoveryFile.seek(0);
-            // Store the next tx id...
-            recoveryFile.writeLong(nextTxid.get());
-            // Store the checksum for thw write batch so that on recovery we
-            // know if we have a consistent
-            // write batch on disk.
-            recoveryFile.writeLong(checksum.getValue());
-            // Write the # of pages that will follow
-            recoveryFile.writeInt(batch.size());
+                // Can we shrink the recovery buffer??
+                if (recoveryPageCount > recoveryFileMaxPageCount) {
+                    int t = Math.max(recoveryFileMinPageCount, batch.size());
+                    recoveryFile.setLength(recoveryFileSizeForPages(t));
+                }
 
-            if (enableDiskSyncs) {
-                recoveryFile.sync();
+                // Record the page writes in the recovery buffer.
+                recoveryFile.seek(0);
+                // Store the next tx id...
+                recoveryFile.writeLong(nextTxid.get());
+                // Store the checksum for thw write batch so that on recovery we
+                // know if we have a consistent
+                // write batch on disk.
+                recoveryFile.writeLong(checksum.getValue());
+                // Write the # of pages that will follow
+                recoveryFile.writeInt(batch.size());
+
+                if (enableDiskSyncs) {
+                    recoveryFile.sync();
+                }
             }
-        }
 
-        try {
             for (PageWrite w : batch) {
                 writeFile.seek(toOffset(w.page.getPageId()));
                 writeFile.write(w.getDiskBound(), 0, pageSize);
