diff --git a/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java b/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
index b55f41160..9f1234454 100644
--- a/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
+++ b/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
@@ -1555,6 +1555,10 @@ public class ActiveMQConnection implements Connection, TopicConnection, QueueCon
         doCleanup(false);
     }
 
+    public boolean isUserSpecifiedClientID() {
+        return userSpecifiedClientID;
+    }
+
     public void doCleanup(boolean removeConnection) throws JMSException {
         if (advisoryConsumer != null && !isTransportFailed()) {
             advisoryConsumer.dispose();
diff --git a/activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java b/activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java
index 85c947ce7..277cc45fa 100644
--- a/activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java
+++ b/activemq-ra/src/main/java/org/apache/activemq/ra/ActiveMQManagedConnection.java
@@ -232,7 +232,7 @@ public class ActiveMQManagedConnection implements ManagedConnection, ExceptionLi
         proxyConnections.clear();
 
         try {
-            physicalConnection.doCleanup(true);
+            physicalConnection.doCleanup(physicalConnection.isUserSpecifiedClientID());
         } catch (JMSException e) {
             throw new ResourceException("Could not cleanup the ActiveMQ connection: " + e, e);
         } finally {
