diff --git a/activemq-http/src/main/java/org/apache/activemq/transport/ws/WSTransportProxy.java b/activemq-http/src/main/java/org/apache/activemq/transport/ws/WSTransportProxy.java
index d5a5207f3..e1a2f90e1 100644
--- a/activemq-http/src/main/java/org/apache/activemq/transport/ws/WSTransportProxy.java
+++ b/activemq-http/src/main/java/org/apache/activemq/transport/ws/WSTransportProxy.java
@@ -149,9 +149,9 @@ public final class WSTransportProxy extends TransportSupport implements Transpor
 
     @Override
     protected void doStart() throws Exception {
+        transport.setTransportListener(getTransportListener());
         socketTransportStarted.countDown();
 
-        transport.setTransportListener(getTransportListener());
         transport.start();
     }
 
