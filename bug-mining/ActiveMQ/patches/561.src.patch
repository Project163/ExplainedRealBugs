diff --git a/activemq-core/src/test/java/org/apache/activemq/broker/BrokerTest.java b/activemq-core/src/test/java/org/apache/activemq/broker/BrokerTest.java
index 332b5526c..1742e2144 100755
--- a/activemq-core/src/test/java/org/apache/activemq/broker/BrokerTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/broker/BrokerTest.java
@@ -1128,6 +1128,9 @@ public class BrokerTest extends BrokerTestSupport {
             connection1.send(createAck(consumerInfo1, m1, 1, MessageAck.STANDARD_ACK_TYPE));
         }
 
+        // give the async ack a chance to perculate and validate all are currently consumed
+        assertNull(connection1.getDispatchQueue().poll(MAX_NULL_WAIT, TimeUnit.MILLISECONDS));
+
         // Close the connection, this should in turn close the consumer.
         connection1.request(closeConnectionInfo(connectionInfo1));
 
