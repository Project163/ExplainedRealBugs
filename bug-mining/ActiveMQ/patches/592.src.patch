diff --git a/activemq-protocol-buffer/pom.xml b/activemq-protocol-buffer/pom.xml
index 7af374aed..5ce4d7e31 100644
--- a/activemq-protocol-buffer/pom.xml
+++ b/activemq-protocol-buffer/pom.xml
@@ -22,7 +22,7 @@
   <parent>
     <groupId>org.apache.activemq</groupId>
     <artifactId>activemq-parent</artifactId>
-    <version>5.2-SNAPSHOT</version>
+    <version>5.3-SNAPSHOT</version>
   </parent>
 
   <artifactId>activemq-protocol-buffer</artifactId>
@@ -48,7 +48,7 @@
     <dependency>
       <groupId>com.google.protobuf</groupId>
       <artifactId>protobuf-java</artifactId>
-      <version>2.0.0-SNAPSHOT</version>
+      <version>2.0.1</version>
     </dependency>
 
 
diff --git a/activemq-protocol-buffer/src/test/java/org/apache/activemq/protocolbuffer/PerformanceTest.java b/activemq-protocol-buffer/src/test/java/org/apache/activemq/protocolbuffer/PerformanceTest.java
index 1868d3f14..0e04d5879 100644
--- a/activemq-protocol-buffer/src/test/java/org/apache/activemq/protocolbuffer/PerformanceTest.java
+++ b/activemq-protocol-buffer/src/test/java/org/apache/activemq/protocolbuffer/PerformanceTest.java
@@ -67,15 +67,15 @@ public class PerformanceTest extends TestSupport {
         StopWatch watch2 = createStopWatch("reader");
         InputStream in = new BufferedInputStream(new FileInputStream(fileName));
         CodedInputStream cin = CodedInputStream.newInstance(in);
-
+        cin.setSizeLimit(0x7FFFFFFF);
+        
         for (long i = 0; i < messageCount; i++) {
             watch2.start();
 
             int size = cin.readRawVarint32();
             int previous = cin.pushLimit(size);
-            //cin.setSizeLimit(size + 4);
+            
             OpenWire.Message message = OpenWire.Message.parseFrom(cin);
-            cin.resetBytesReadCounter();
             cin.popLimit(previous);
 
             if (verbose) {
