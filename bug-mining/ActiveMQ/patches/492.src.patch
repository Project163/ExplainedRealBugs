diff --git a/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java b/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
index fda09f542..785ccd63e 100755
--- a/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
+++ b/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
@@ -617,7 +617,7 @@ public class ActiveMQMessageConsumer implements MessageAvailableConsumer, StatsC
             			ackCounter = 0;
             		}
             	}
-            } else {
+            } else if (pendingAck != null && pendingAck.isStandardAck()) {
                 ack = pendingAck;
             }
             if (ack != null) {
diff --git a/activemq-core/src/main/java/org/apache/activemq/broker/TransportConnection.java b/activemq-core/src/main/java/org/apache/activemq/broker/TransportConnection.java
index 8bdc666af..f0d6f63c4 100755
--- a/activemq-core/src/main/java/org/apache/activemq/broker/TransportConnection.java
+++ b/activemq-core/src/main/java/org/apache/activemq/broker/TransportConnection.java
@@ -304,10 +304,12 @@ public class TransportConnection implements Connection, Task, CommandVisitor {
         try {
             response = command.visit(this);
         } catch (Throwable e) {
+            if (SERVICELOG.isDebugEnabled() && e.getClass() != BrokerStoppedException.class) {
+                SERVICELOG.debug("Error occured while processing "
+                        + (responseRequired ? "sync": "async")
+                        + " command: " + command + ", exception: " + e, e);
+            }
             if (responseRequired) {
-                if (SERVICELOG.isDebugEnabled() && e.getClass() != BrokerStoppedException.class) {
-                    SERVICELOG.debug("Error occured while processing sync command: " + e, e);
-                }
                 response = new ExceptionResponse(e);
             } else {
                 serviceException(e);
diff --git a/activemq-core/src/test/java/org/apache/activemq/transport/failover/AMQ1925Test.java b/activemq-core/src/test/java/org/apache/activemq/transport/failover/AMQ1925Test.java
index 5cc39773b..e9845f8e0 100644
--- a/activemq-core/src/test/java/org/apache/activemq/transport/failover/AMQ1925Test.java
+++ b/activemq-core/src/test/java/org/apache/activemq/transport/failover/AMQ1925Test.java
@@ -24,6 +24,7 @@ import java.util.Set;
 
 import javax.jms.Connection;
 import javax.jms.DeliveryMode;
+import javax.jms.ExceptionListener;
 import javax.jms.JMSException;
 import javax.jms.Message;
 import javax.jms.MessageConsumer;
@@ -49,7 +50,7 @@ import edu.emory.mathcs.backport.java.util.concurrent.atomic.AtomicBoolean;
  * 
  * @version $Revision: 1.1 $
  */
-public class AMQ1925Test extends TestCase {
+public class AMQ1925Test extends TestCase implements ExceptionListener {
 	private static final Logger log = Logger.getLogger(AMQ1925Test.class);
 
 	private static final String QUEUE_NAME = "test.amq1925";
@@ -60,6 +61,8 @@ public class AMQ1925Test extends TestCase {
 	private URI tcpUri;
 	private ActiveMQConnectionFactory cf;
 
+    private JMSException exception;
+
 	public void XtestAMQ1925_TXInProgress() throws Exception {
 		Connection connection = cf.createConnection();
 		connection.start();
@@ -255,6 +258,7 @@ public class AMQ1925Test extends TestCase {
 	public void testAMQ1925_TXBegin() throws Exception {
 		Connection connection = cf.createConnection();
 		connection.start();
+		connection.setExceptionListener(this);
 		Session session = connection.createSession(true,
 				Session.SESSION_TRANSACTED);
 		MessageConsumer consumer = session.createConsumer(session
@@ -284,6 +288,7 @@ public class AMQ1925Test extends TestCase {
 		connection.close();
 
 		assertQueueEmpty();
+		assertNull("no exception on connection listener: " + exception, exception);
 	}
 
 	public void testAMQ1925_TXCommited() throws Exception {
@@ -371,6 +376,7 @@ public class AMQ1925Test extends TestCase {
 	}
 
 	protected void setUp() throws Exception {
+	    exception = null;
 		bs = new BrokerService();
 		bs.setDeleteAllMessagesOnStartup(true);
 		bs.setPersistent(true);
@@ -388,4 +394,8 @@ public class AMQ1925Test extends TestCase {
 		new ServiceStopper().stop(bs);
 	}
 
+    public void onException(JMSException exception) {
+        this.exception = exception;    
+    }
+
 }
