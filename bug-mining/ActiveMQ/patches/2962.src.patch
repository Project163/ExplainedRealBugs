diff --git a/activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java b/activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java
index 77710f3ec..13ec3538d 100644
--- a/activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java
+++ b/activemq-broker/src/main/java/org/apache/activemq/transaction/Transaction.java
@@ -44,7 +44,7 @@ public abstract class Transaction {
     public static final byte PREPARED_STATE = 2; // can go to: 3
     public static final byte FINISHED_STATE = 3;
     boolean committed = false;
-    boolean rollbackOnly = false;
+    Throwable rollackOnlyCause = null;
 
     private final ArrayList<Synchronization> synchronizations = new ArrayList<Synchronization>();
     private byte state = START_STATE;
@@ -111,9 +111,10 @@ public abstract class Transaction {
             throw xae;
         }
 
-        if (rollbackOnly) {
+        if (isRollbackOnly()) {
             XAException xae = newXAException("COMMIT FAILED: Transaction marked rollback only", XAException.XA_RBROLLBACK);
             TransactionRolledBackException transactionRolledBackException = new TransactionRolledBackException(xae.getLocalizedMessage());
+            transactionRolledBackException.initCause(rollackOnlyCause);
             xae.initCause(transactionRolledBackException);
             throw xae;
         }
@@ -215,14 +216,14 @@ public abstract class Transaction {
     }
 
     public void setRollbackOnly(Throwable cause) {
-        if (!rollbackOnly) {
+        if (!isRollbackOnly()) {
             getLog().trace("setting rollback only, cause:", cause);
-            rollbackOnly = true;
+            rollackOnlyCause = cause;
         }
     }
 
     public boolean isRollbackOnly() {
-        return rollbackOnly;
+        return rollackOnlyCause != null;
     }
 
 }
diff --git a/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ3166Test.java b/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ3166Test.java
index 74e2d489b..f72e0349d 100644
--- a/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ3166Test.java
+++ b/activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ3166Test.java
@@ -51,7 +51,7 @@ import static org.junit.Assert.assertNotNull;
 import static org.junit.Assert.assertTrue;
 import static org.junit.Assert.fail;
 
-public class AMQ3166Test {
+public class   {
 
     private static final Logger LOG = LoggerFactory.getLogger(AMQ3166Test.class);
 
@@ -133,6 +133,8 @@ public class AMQ3166Test {
             fail("Expect TransactionRolledBackException");
         } catch (JMSException expected) {
             assertTrue(expected.getCause() instanceof XAException);
+            assertTrue(expected.getCause().getCause() instanceof TransactionRolledBackException);
+            assertTrue(expected.getCause().getCause().getCause() instanceof RuntimeException);
         }
 
         assertTrue("one message still there!", Wait.waitFor(new Wait.Condition() {
