diff --git a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/KahaStore.java b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/KahaStore.java
index 243cd8934..ed2049b75 100644
--- a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/KahaStore.java
+++ b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/KahaStore.java
@@ -499,7 +499,7 @@ public class KahaStore implements Store {
                 String property = System.getProperty(key);
                 if (null == property) {
                     if (!BROKEN_FILE_LOCK) {
-                        lock = lockFile.getChannel().tryLock(0, lockFile.getChannel().size(), false);
+                        lock = lockFile.getChannel().tryLock(0, Math.max(1, lockFile.getChannel().size()), false);
                         if (lock == null) {
                             throw new StoreLockedExcpetion("Kaha Store " + directory.getName() + "  is already opened by another application");
                         } else
diff --git a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/async/ControlFile.java b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/async/ControlFile.java
index f86b0cc07..232c82b46 100644
--- a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/async/ControlFile.java
+++ b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/async/ControlFile.java
@@ -75,7 +75,7 @@ public final class ControlFile {
 
         if (lock == null) {
             try {
-                lock = randomAccessFile.getChannel().tryLock(0, randomAccessFile.getChannel().size(), false);
+                lock = randomAccessFile.getChannel().tryLock(0, Math.max(1, randomAccessFile.getChannel().size()), false);
             } catch (OverlappingFileLockException e) {
                 throw IOExceptionSupport.create("Control file '" + file + "' could not be locked.",e);
             }
diff --git a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/index/IndexManager.java b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/index/IndexManager.java
index da500142b..eb110f2f2 100644
--- a/activemq-core/src/main/java/org/apache/activemq/kaha/impl/index/IndexManager.java
+++ b/activemq-core/src/main/java/org/apache/activemq/kaha/impl/index/IndexManager.java
@@ -188,7 +188,7 @@ public final class IndexManager {
     }
     
     public synchronized FileLock getLock() throws IOException {
-        return indexFile.getChannel().tryLock(0, indexFile.getChannel().size(), false);
+        return indexFile.getChannel().tryLock(0, Math.max(1, indexFile.getChannel().size()), false);
     }
 
 
diff --git a/activemq-core/src/main/java/org/apache/activemq/store/amq/AMQPersistenceAdapter.java b/activemq-core/src/main/java/org/apache/activemq/store/amq/AMQPersistenceAdapter.java
index fbecdb8fb..6858d0e21 100644
--- a/activemq-core/src/main/java/org/apache/activemq/store/amq/AMQPersistenceAdapter.java
+++ b/activemq-core/src/main/java/org/apache/activemq/store/amq/AMQPersistenceAdapter.java
@@ -1094,7 +1094,7 @@ public class AMQPersistenceAdapter implements PersistenceAdapter, UsageListener,
             String property = System.getProperty(key);
             if (null == property) {
                 if (!BROKEN_FILE_LOCK) {
-                    lock = lockFile.getChannel().tryLock(0, lockFile.getChannel().size(), false);
+                    lock = lockFile.getChannel().tryLock(0, Math.max(1, lockFile.getChannel().size()), false);
                     if (lock == null) {
                         result = false;
                     } else {
diff --git a/kahadb/src/main/java/org/apache/kahadb/util/LockFile.java b/kahadb/src/main/java/org/apache/kahadb/util/LockFile.java
index 6e419d5a2..d18ea18fa 100644
--- a/kahadb/src/main/java/org/apache/kahadb/util/LockFile.java
+++ b/kahadb/src/main/java/org/apache/kahadb/util/LockFile.java
@@ -63,7 +63,7 @@ public class LockFile {
             readFile = new RandomAccessFile(file, "rw");
             IOException reason = null;
             try {
-                lock = readFile.getChannel().tryLock(0, readFile.getChannel().size(), false);
+                lock = readFile.getChannel().tryLock(0, Math.max(1, readFile.getChannel().size()), false);
             } catch (OverlappingFileLockException e) {
                 reason = IOExceptionSupport.create("File '" + file + "' could not be locked.",e);
             } catch (IOException ioe) {
