diff --git a/activemq-core/src/main/java/org/apache/activemq/util/URISupport.java b/activemq-core/src/main/java/org/apache/activemq/util/URISupport.java
index c3de45f14..233f1f8f9 100755
--- a/activemq-core/src/main/java/org/apache/activemq/util/URISupport.java
+++ b/activemq-core/src/main/java/org/apache/activemq/util/URISupport.java
@@ -103,6 +103,7 @@ public class URISupport {
 
     public static Map<String, String> parseQuery(String uri) throws URISyntaxException {
         try {
+            uri = uri.substring(uri.lastIndexOf("?") + 1); // get only the relevant part of the query
             Map<String, String> rc = new HashMap<String, String>();
             if (uri != null) {
                 String[] parameters = uri.split("&");
diff --git a/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java b/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java
index 09aeb9940..ebdaf85ba 100644
--- a/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java
@@ -23,7 +23,7 @@ import org.apache.activemq.transport.tcp.TransportUriTest;
 public class FailoverUriTest extends TransportUriTest {
 	
     public void initCombosForTestUriOptionsWork() {
-		addCombinationValues("prefix", new Object[] {"failover:("});
+		addCombinationValues("prefix", new Object[] {"failover:(", "failover://("});
 		addCombinationValues("postfix", new Object[] {")?initialReconnectDelay=1000&maxReconnectDelay=1000"
 				, "?wireFormat.tightEncodingEnabled=false)?jms.useAsyncSend=true&jms.copyMessageOnSend=false"
 				, "?wireFormat.maxInactivityDuration=0&keepAlive=true)?jms.prefetchPolicy.all=500&initialReconnectDelay=10000&useExponentialBackOff=false&maxReconnectAttempts=0&randomize=false"});
