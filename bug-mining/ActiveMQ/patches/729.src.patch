diff --git a/activemq-core/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java b/activemq-core/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java
index c7f11dc8b..4ff89d69d 100755
--- a/activemq-core/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java
+++ b/activemq-core/src/main/java/org/apache/activemq/store/jdbc/TransactionContext.java
@@ -167,8 +167,8 @@ public class TransactionContext {
             
             throw IOExceptionSupport.create(e);
         } finally {
-            close();
             inTx = false;
+            close();
         }
     }
 
@@ -195,8 +195,8 @@ public class TransactionContext {
             JDBCPersistenceAdapter.log("Rollback failed: ", e);
             throw IOExceptionSupport.create(e);
         } finally {
-            close();
             inTx = false;
+            close();
         }
     }
 
