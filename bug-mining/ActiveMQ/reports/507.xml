<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:39:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2038] Broker parameter systemExitOnShutdown=&quot;true&quot; not being honored when persistence adapter file system is unavailable</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2038</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The broker parameter systemExitOnShutdown=&quot;true&quot; is not being honored when persistence adapter file system is unavailable. &lt;/p&gt;

&lt;p&gt;To reproduce the problem:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Use journaling persistence pointing to an USB drive diretory.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make sure the broker is configured with systemExitOnShutdown=&quot;true&quot;:&lt;br/&gt;
  &amp;lt;amq:broker id=&quot;broker&quot; depends-on=&quot;jmxServer&quot; useShutdownHook=&quot;false&quot; systemExitOnShutdown=&quot;true&quot;&amp;gt; ...&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;After the broker is running send some messages to a queue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Unplug the USB drive.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Try to send more messages. The broker will reject the messages and report the following exception:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;javax.jms.JMSException: The volume for a file has been externally altered so that the opened file is no longer valid&lt;br/&gt;
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1203)&lt;br/&gt;
        at org.apache.activemq.ActiveMQSession.send(ActiveMQSession.java:1648)&lt;br/&gt;
        at org.apache.activemq.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:227)&lt;br/&gt;
        at org.apache.activemq.ActiveMQMessageProducerSupport.send(ActiveMQMessageProducerSupport.java:241)&lt;br/&gt;
        at org.apache.servicemix.jms.multiplexing.MultiplexingProviderProcessor.process(MultiplexingProviderProcessor.java:114)&lt;br/&gt;
        at org.apache.servicemix.common.AsyncBaseLifeCycle.doProcess(AsyncBaseLifeCycle.java:540)&lt;br/&gt;
        at org.apache.servicemix.common.AsyncBaseLifeCycle.processExchange(AsyncBaseLifeCycle.java:492)&lt;br/&gt;
        at org.apache.servicemix.common.BaseLifeCycle.onMessageExchange(BaseLifeCycle.java:46)&lt;br/&gt;
        at org.apache.servicemix.jbi.messaging.DeliveryChannelImpl.processInBound(DeliveryChannelImpl.java:621)&lt;br/&gt;
        at org.apache.servicemix.jbi.nmr.flow.AbstractFlow.doRouting(AbstractFlow.java:172)&lt;br/&gt;
        at org.apache.servicemix.jbi.nmr.flow.seda.SedaFlow.doRouting(SedaFlow.java:167)&lt;br/&gt;
        at org.apache.servicemix.jbi.nmr.flow.seda.SedaQueue$1.run(SedaQueue.java:134)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:650)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:675)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
Caused by: java.io.IOException: The volume for a file has been externally altered so that the opened file is no longer valid&lt;br/&gt;
        at sun.nio.ch.FileChannelImpl.force0(Native Method)&lt;br/&gt;
        at sun.nio.ch.FileChannelImpl.force(FileChannelImpl.java:359)&lt;br/&gt;
        at org.apache.activeio.journal.active.LogFile.force(LogFile.java:102)&lt;br/&gt;
        at org.apache.activeio.journal.active.LogFileManager.append(LogFileManager.java:308)&lt;br/&gt;
        at org.apache.activeio.journal.active.JournalImpl.queuedWrite(JournalImpl.java:256)&lt;br/&gt;
        at org.apache.activeio.journal.active.JournalImpl.access$000(JournalImpl.java:62)&lt;br/&gt;
        at org.apache.activeio.journal.active.JournalImpl$2.run(JournalImpl.java:229)&lt;br/&gt;
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)&lt;br/&gt;
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)&lt;br/&gt;
        ... 1 more&lt;/p&gt;

&lt;p&gt;This error is not being detected by the broker as a fatal error and the broker is not going down automatically. The issue was reported by a Servicemix user and it is expected that after the AMQ broker goes down SMX must goes down too.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP x86&lt;/p&gt;</environment>
        <key id="12482731">AMQ-2038</key>
            <summary>Broker parameter systemExitOnShutdown=&quot;true&quot; not being honored when persistence adapter file system is unavailable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="wilson@vettatech.com">Wilson Freitas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Dec 2008 15:14:18 +0000</created>
                <updated>Tue, 23 Dec 2008 14:36:31 +0000</updated>
                            <resolved>Tue, 23 Dec 2008 14:26:10 +0000</resolved>
                                    <version>5.0.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12940596" author="tmielke" created="Thu, 18 Dec 2008 16:03:18 +0000"  >&lt;p&gt;With debug logging turned on the broker raises&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DEBUG - Service                        - Error occured &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing sync command: java.io.IOException: The volume &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a file has been externally a
ltered so that the opened file is no longer valid
java.io.IOException: The volume &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a file has been externally altered so that the opened file is no longer valid
        at sun.nio.ch.FileChannelImpl.force0(Native Method)
        at sun.nio.ch.FileChannelImpl.force(FileChannelImpl.java:359)
        at org.apache.activeio.journal.active.LogFile.force(LogFile.java:102)
        at org.apache.activeio.journal.active.LogFileManager.append(LogFileManager.java:308)
        at org.apache.activeio.journal.active.JournalImpl.queuedWrite(JournalImpl.java:256)
        at org.apache.activeio.journal.active.JournalImpl.access$000(JournalImpl.java:62)
        at org.apache.activeio.journal.active.JournalImpl$2.run(JournalImpl.java:229)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:595)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Perhaps this should be raised as an error instead of a debug msg? With the default logging turned on, this won&apos;t be noticed.&lt;/p&gt;</comment>
                            <comment id="12940598" author="dejanb" created="Tue, 23 Dec 2008 14:26:10 +0000"  >&lt;p&gt;Fixed in SVN revision 728964.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12482718">AMQ-2042</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14cgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>