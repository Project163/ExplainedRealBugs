<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:45:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7218] STOMP: V1.2 client that acks inside a TX can lose ability to ack after TX abort</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7218</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When acknowledgement occurs inside a transaction it is valid for the TX to be aborted and the messages to be acknowledged a second time in a new TX or on their own.&#160; The broker currently loses track of the acks that are removed from the pending Acks index as it doesn&apos;t recover them on abort and repopulate the pending index.&#160;&lt;/p&gt;

&lt;p&gt;There is also a race that occurs on dispatch and ack that allows for loss of ack Ids as the current code clears the full pending index on either boundary when it should only be removing the involved transactionally enlisted messages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13236338">AMQ-7218</key>
            <summary>STOMP: V1.2 client that acks inside a TX can lose ability to ack after TX abort</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="tabish">Timothy A. Bish</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 May 2019 21:13:58 +0000</created>
                <updated>Thu, 30 May 2019 14:47:12 +0000</updated>
                            <resolved>Thu, 30 May 2019 14:47:12 +0000</resolved>
                                    <version>5.15.9</version>
                                    <fixVersion>5.15.10</fixVersion>
                    <fixVersion>5.16.0</fixVersion>
                                    <component>STOMP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16851313" author="jira-bot" created="Wed, 29 May 2019 21:25:51 +0000"  >&lt;p&gt;Commit 063d24e6d653bed3dd3c56302758de29143e5e82 in activemq&apos;s branch refs/heads/master from Timothy Bish&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=063d24e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=063d24e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7218&quot; title=&quot;STOMP: V1.2 client that acks inside a TX can lose ability to ack after TX abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7218&quot;&gt;&lt;del&gt;AMQ-7218&lt;/del&gt;&lt;/a&gt; Fix loss of Ack id from tracking after TX commit / abort&lt;/p&gt;

&lt;p&gt;Ensure that we properly track Ack IDs across TX commit and abort&lt;br/&gt;
operations and only clear out values enlisted in the TX on commit and&lt;br/&gt;
re-acquire the Ack Ids on TX abort.&lt;/p&gt;</comment>
                            <comment id="16851947" author="jira-bot" created="Thu, 30 May 2019 14:46:10 +0000"  >&lt;p&gt;Commit a6c0e3f99f22a4be8d6d8586185820b3a8b990e6 in activemq&apos;s branch refs/heads/activemq-5.15.x from Timothy Bish&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a6c0e3f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a6c0e3f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7218&quot; title=&quot;STOMP: V1.2 client that acks inside a TX can lose ability to ack after TX abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7218&quot;&gt;&lt;del&gt;AMQ-7218&lt;/del&gt;&lt;/a&gt; Fix loss of Ack id from tracking after TX commit / abort&lt;/p&gt;

&lt;p&gt;Ensure that we properly track Ack IDs across TX commit and abort&lt;br/&gt;
operations and only clear out values enlisted in the TX on commit and&lt;br/&gt;
re-acquire the Ack Ids on TX abort.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 063d24e6d653bed3dd3c56302758de29143e5e82)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13234063">AMQ-7211</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z037e8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>