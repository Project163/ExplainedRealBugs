<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:13:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5903] Message headers are lost when using the Broker Component for Camel</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5903</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When using the broker camel component as defined here:  &lt;a href=&quot;http://activemq.apache.org/broker-camel-component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/broker-camel-component.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There appears to be an undocumented limitation of the broker component&apos;s current implementation. I need to know whether said limitation is by design or an oversight. If it&apos;s an oversight then I can submit a patch for it.&lt;/p&gt;

&lt;p&gt;This example route does not work as expected - the JMSXGroupID header is lost when received by the broker component.&lt;/p&gt;

&lt;p&gt;&amp;lt;route&amp;gt; &lt;br/&gt;
&amp;lt;from uri=&quot;broker:queue:test&quot;/&amp;gt; &lt;br/&gt;
&amp;lt;setHeader headerName=&quot;JMSXGroupID&quot;&amp;gt; &lt;br/&gt;
&amp;lt;constant&amp;gt;123&amp;lt;/constant&amp;gt; &lt;br/&gt;
&amp;lt;/setHeader&amp;gt; &lt;br/&gt;
&amp;lt;to uri=&quot;broker:queue:test&quot;/&amp;gt; &lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;

&lt;p&gt;After single stepping with a debugger the component executes this code: &lt;a href=&quot;https://github.com/apache/activemq/blob/master/activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java#L102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/master/activemq-camel/src/main/java/org/apache/activemq/camel/component/broker/BrokerProducer.java#L102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As you can see from the method&apos;s implementation it only copies over a fixed set of six well-known headers. All other headers on the inbound message are discarded. Why not copy over every header? Consequently the JMSXGroupID header is not copied, despite being present on the inbound message.&lt;/p&gt;

&lt;p&gt;This would appear to be a bug in my opinion as I do not believe we should be loosing any headers on a message in this case.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12849466">AMQ-5903</key>
            <summary>Message headers are lost when using the Broker Component for Camel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="charly">Heath Kesler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2015 23:06:23 +0000</created>
                <updated>Thu, 30 Jul 2015 14:57:30 +0000</updated>
                            <resolved>Thu, 30 Jul 2015 14:57:30 +0000</resolved>
                                    <version>5.11.1</version>
                                    <fixVersion>5.11.2</fixVersion>
                    <fixVersion>5.12.0</fixVersion>
                                    <component>Camel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14646823" author="charly" created="Wed, 29 Jul 2015 22:07:51 +0000"  >&lt;p&gt;A special thanks to Paul Gale for supplying the patch.  &lt;/p&gt;</comment>
                            <comment id="14646936" author="githubbot" created="Wed, 29 Jul 2015 23:56:32 +0000"  >&lt;p&gt;GitHub user heathkesler opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - add patch that fixes the broker camel component &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - add patch that fixes the broker camel component to take all header values&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/savoirtech/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/savoirtech/activemq&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/137.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/137.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #137&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8f407a78dc5ed868c1b59ccb68f489c8ceae875f&lt;br/&gt;
Author: Heath Kesler &amp;lt;heathkesler@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-29T23:48:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - add patch that fixes the broker camel component to take all header values&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14646971" author="jira-bot" created="Thu, 30 Jul 2015 00:28:52 +0000"  >&lt;p&gt;Commit 8f407a78dc5ed868c1b59ccb68f489c8ceae875f in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=charly&quot; class=&quot;user-hover&quot; rel=&quot;charly&quot;&gt;charly&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=8f407a7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=8f407a7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - add patch that fixes the broker camel component to take all header values&lt;/p&gt;</comment>
                            <comment id="14646972" author="jira-bot" created="Thu, 30 Jul 2015 00:28:54 +0000"  >&lt;p&gt;Commit de86f473f776fe3a8ca32d7f929ecec7993c458b in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=de86f47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=de86f47&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt; This closes #137&lt;/p&gt;

&lt;p&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - thanks Heath and Paul&lt;/p&gt;</comment>
                            <comment id="14646974" author="githubbot" created="Thu, 30 Jul 2015 00:29:02 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/137&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14646981" author="artnaseef" created="Thu, 30 Jul 2015 00:34:35 +0000"  >&lt;p&gt;Closing with thanks to Heath Kesler&lt;/p&gt;</comment>
                            <comment id="14646982" author="jgenender" created="Thu, 30 Jul 2015 00:35:29 +0000"  >&lt;p&gt;and Paul Gale &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14647740" author="jira-bot" created="Thu, 30 Jul 2015 14:55:46 +0000"  >&lt;p&gt;Commit 256bcf3342ea8c31f4f06cfcab3330d396a845d6 in activemq&apos;s branch refs/heads/activemq-5.11.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=charly&quot; class=&quot;user-hover&quot; rel=&quot;charly&quot;&gt;charly&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=256bcf3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=256bcf3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5903&quot; title=&quot;Message headers are lost when using the Broker Component for Camel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5903&quot;&gt;&lt;del&gt;AMQ-5903&lt;/del&gt;&lt;/a&gt; - add patch that fixes the broker camel component to take all header values&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12747865" name="amq-5903.patch" size="13291" author="charly" created="Wed, 29 Jul 2015 22:07:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hzqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>