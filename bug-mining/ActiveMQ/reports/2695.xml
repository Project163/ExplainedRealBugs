<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:28:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6065] Allow selective use of broker systemExitOnShutdown from DefaultIOExceptionHandler</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6065</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;the broker attribute systemExitOnShutdown is useful in a karaf container or shared vm where the broker is the primary occupant. If the broker dies, then the container should die.&lt;br/&gt;
For the broker, if the store dies, then the broker should die, but for other scenarios, like the broker is shutdown via jmx or for maintenance, exiting the container is not required.&lt;br/&gt;
Allowing the DefaultIOExceptionHandler, which gets to handle store exceptions, flip the systemExit bit allows a container to exit on this fatal condition. Ensuring that failover of the store can occur due the the exit of the jvm that has the store lock.&lt;br/&gt;
With karaf on windows, the file locker is not reliable on failback when the jvm remains active.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916645">AMQ-6065</key>
            <summary>Allow selective use of broker systemExitOnShutdown from DefaultIOExceptionHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Nov 2015 14:18:37 +0000</created>
                <updated>Mon, 30 Nov 2015 13:25:49 +0000</updated>
                            <resolved>Fri, 27 Nov 2015 14:22:35 +0000</resolved>
                                    <version>5.12.0</version>
                                    <fixVersion>5.13.0</fixVersion>
                                    <component>Broker</component>
                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15029917" author="jira-bot" created="Fri, 27 Nov 2015 14:22:00 +0000"  >&lt;p&gt;Commit 2aa172f905d3c783c722f6aedd0fe2c1af7b988d in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2aa172f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2aa172f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6065&lt;/a&gt; - allow ioexception handler to flip the systemExitOnShutdown broker attribute before calling stop, i.e: exit on store io errors&lt;/p&gt;</comment>
                            <comment id="15030995" author="jira-bot" created="Sun, 29 Nov 2015 15:06:37 +0000"  >&lt;p&gt;Commit 39a20bd788c664105c18886abf77c372cf9229aa in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=39a20bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=39a20bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6065&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixed test case so that a System.exit call will not take down the&lt;br/&gt;
JVM and cause the test suite to abort in Jenkins early&lt;/p&gt;</comment>
                            <comment id="15031003" author="christopher.l.shannon" created="Sun, 29 Nov 2015 15:19:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,  The test case here kept causing Jenkins to break because of the System.exit() call so I updated your test to use the System Rules library for JUnit which has an option to handle System.exit with a Security Manager to prevent an actual JVM exit.&lt;/p&gt;</comment>
                            <comment id="15031678" author="gtully" created="Mon, 30 Nov 2015 11:32:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;  thanks for that. i overrode the broker service so i could check the flag and reset but missed the reset! pulling in that lib will also do it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15031704" author="christopher.l.shannon" created="Mon, 30 Nov 2015 12:20:52 +0000"  >&lt;p&gt;Yeah, I thought about fixing it without using that library but I know in the past there have been other cases of System.exit being called in JUnit tests so I wanted to see how this solution would work because I figure it will happen again in the future &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="15031723" author="gtully" created="Mon, 30 Nov 2015 12:45:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; I just peeked at that dependency - the license is not 100% compatible with ASF without some additional documentation&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; etc, I don&apos;t think we need to go there. I will revert the change and fix the test. &lt;br/&gt;
btw: that security manager hack is in use at &lt;a href=&quot;https://github.com/apache/activemq/blob/d6682e5476cd8cbefca04227ffa26a5d508d2494/activemq-unit-tests/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java#L405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/d6682e5476cd8cbefca04227ffa26a5d508d2494/activemq-unit-tests/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java#L405&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.apache.org/legal/resolved.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/legal/resolved.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15031729" author="christopher.l.shannon" created="Mon, 30 Nov 2015 12:53:29 +0000"  >&lt;p&gt;Ok, no problem.  I was thinking it would be ok because it&apos;s just a test dependency and wasn&apos;t being included with the release, plus it is the same license as older versions of JUnit.&lt;/p&gt;

&lt;p&gt;As soon as you are done I will start the release process for 5.13.0.  &lt;/p&gt;</comment>
                            <comment id="15031758" author="jira-bot" created="Mon, 30 Nov 2015 13:25:48 +0000"  >&lt;p&gt;Commit 1bef4de4dc6744c23c22d2dac0faf0c9a6ab68d9 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=1bef4de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=1bef4de&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;https://issues.apache.org/jira/browse/AMQ-6065&quot;&lt;br/&gt;
CPL dependency is not fully compatable with ASF and is not really necessary&lt;/p&gt;

&lt;p&gt;This reverts commit 39a20bd788c664105c18886abf77c372cf9229aa.&lt;/p&gt;</comment>
                            <comment id="15031759" author="jira-bot" created="Mon, 30 Nov 2015 13:25:49 +0000"  >&lt;p&gt;Commit f09000d1e61a0131ee20df22b7b2ac6d297ebd07 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f09000d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f09000d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6065&lt;/a&gt; - ensure no call to exit. fix mock test to account for extra call&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p0gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>