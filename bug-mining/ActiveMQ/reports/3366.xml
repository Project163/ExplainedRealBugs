<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:50:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-8169] StompNIOSSLTest test fails with more recent JDK 8 versions</title>
                <link>https://issues.apache.org/jira/browse/AMQ-8169</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The StompNIOSSL test fails during CI/CD tests with certain JDK versions. This blocks PR&apos;s from getting a green status&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Fails with jdk1.8.0_281&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Passes with jdk1.8.0_211&lt;/p&gt;

&lt;p&gt;Suspects:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The test SSL cert needs to be generated with a newer cipher and/or length&lt;/li&gt;
	&lt;li&gt;The NIOSSLTransport has a bad byte[] read bug&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13362339">AMQ-8169</key>
            <summary>StompNIOSSLTest test fails with more recent JDK 8 versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="mattrpav">Matt Pavlovich</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Mar 2021 16:28:14 +0000</created>
                <updated>Wed, 2 Jun 2021 13:46:45 +0000</updated>
                            <resolved>Tue, 9 Mar 2021 20:22:12 +0000</resolved>
                                    <version>5.17.0</version>
                                    <fixVersion>5.15.15</fixVersion>
                    <fixVersion>5.16.2</fixVersion>
                    <fixVersion>5.17.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9000">2.5h</timespent>
                                <comments>
                            <comment id="17295416" author="mattrpav" created="Thu, 4 Mar 2021 17:03:38 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.net.ssl|ERROR|1B|ActiveMQ BrokerService[localhost] Task-3|2021-03-04 01:59:07.137 PST|TransportContext.java:361|Fatal (BAD_RECORD_MAC): Input too short - need tag (
&quot;throwable&quot; : {
  javax.crypto.AEADBadTagException: Input too short - need tag
  	at java.base/com.sun.crypto.provider.GaloisCounterMode.decryptFinal(GaloisCounterMode.java:564)
  	at java.base/com.sun.crypto.provider.CipherCore.finalNoPadding(CipherCore.java:1118)
  	at java.base/com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1055)
  	at java.base/com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:943)
  	at java.base/com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:491)
  	at java.base/javax.crypto.CipherSpi.bufferCrypt(CipherSpi.java:794)
  	at java.base/javax.crypto.CipherSpi.engineDoFinal(CipherSpi.java:730)
  	at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2500)
  	at java.base/sun.security.ssl.SSLCipher$T13GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1930)
  	at java.base/sun.security.ssl.SSLEngineInputRecord.decodeInputRecord(SSLEngineInputRecord.java:240)
  	at java.base/sun.security.ssl.SSLEngineInputRecord.decode(SSLEngineInputRecord.java:197)
  	at java.base/sun.security.ssl.SSLEngineInputRecord.decode(SSLEngineInputRecord.java:160)
  	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)
  	at java.base/sun.security.ssl.SSLEngineImpl.decode(SSLEngineImpl.java:736)
  	at java.base/sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:691)
  	at java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:506)
  	at java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:482)
  	at java.base/javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:637)
  	at org.apache.activemq.transport.nio.NIOSSLTransport.secureRead(NIOSSLTransport.java:393)
  	at org.apache.activemq.transport.nio.NIOSSLTransport.serviceRead(NIOSSLTransport.java:261)
  	at org.apache.activemq.transport.stomp.StompNIOSSLTransport.initializeStreams(StompNIOSSLTransport.java:71)
  	at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:543)
  	at org.apache.activemq.transport.nio.NIOTransport.doStart(NIOTransport.java:174)
  	at org.apache.activemq.transport.nio.NIOSSLTransport.doStart(NIOSSLTransport.java:470)
  	at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)
  	at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
  	at org.apache.activemq.transport.stomp.StompTransportFilter.start(StompTransportFilter.java:65)
  	at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:172)
  	at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
  	at org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:1067)
  	at org.apache.activemq.broker.TransportConnector$1$1.run(TransportConnector.java:223)
  	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
  	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
  	at java.base/java.lang.Thread.run(Thread.java:832)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17296094" author="tetlucas" created="Fri, 5 Mar 2021 15:30:58 +0000"  >&lt;p&gt;It doesn&apos;t seem like a problem with the ssl cert. The old cert is a 2048-bit RSA key and looking at the tls handshake the client and server negotiate on TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 as the cipher suite which appears to be a good, strong cipher according to this: &lt;a href=&quot;https://cheatsheetseries.owasp.org/cheatsheets/TLS_Cipher_String_Cheat_Sheet.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cheatsheetseries.owasp.org/cheatsheets/TLS_Cipher_String_Cheat_Sheet.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried generating a new key pair anyway and the test still fails and the cipher suite used is the same: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;ServerHello&quot;&lt;/span&gt;: {
  &lt;span class=&quot;code-quote&quot;&gt;&quot;server version&quot;&lt;/span&gt;      : &lt;span class=&quot;code-quote&quot;&gt;&quot;TLSv1.2&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;random&quot;&lt;/span&gt;              : &lt;span class=&quot;code-quote&quot;&gt;&quot;73 63 64 39 98 C8 82 32 8C 68 AC B2 57 F0 C6 E5 E4 39 5F 92 48 91 63 59 44 4F 57 4E 47 52 44 01&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;session id&quot;&lt;/span&gt;          : &lt;span class=&quot;code-quote&quot;&gt;&quot;44 BE B7 9B A7 A2 ED 93 D6 7F 1C 53 D3 00 D1 FC 31 48 71 FA 51 43 5B 5E D0 BE 47 D0 91 0C D8 0F&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cipher suite&quot;&lt;/span&gt;        : &lt;span class=&quot;code-quote&quot;&gt;&quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030)&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;compression methods&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;00&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;extensions&quot;&lt;/span&gt;          : [
    &lt;span class=&quot;code-quote&quot;&gt;&quot;extended_master_secret (23)&quot;&lt;/span&gt;: {
      &amp;lt;empty&amp;gt;
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;renegotiation_info (65,281)&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;renegotiated connection&quot;&lt;/span&gt;: [&amp;lt;no renegotiated connection&amp;gt;]
    }
  ]
}
)
javax.net.ssl|FINE|12|ActiveMQ BrokerService[localhost] Task-1|2021-03-04 23:25:35.164 PST|Logger.java:765|Produced server Certificate handshake message (
&lt;span class=&quot;code-quote&quot;&gt;&quot;Certificates&quot;&lt;/span&gt;: [
  &lt;span class=&quot;code-quote&quot;&gt;&quot;certificate&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt;            : &lt;span class=&quot;code-quote&quot;&gt;&quot;v3&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;serial number&quot;&lt;/span&gt;      : &lt;span class=&quot;code-quote&quot;&gt;&quot;32 F8 37 03&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;signature algorithm&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;SHA256withRSA&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;issuer&quot;&lt;/span&gt;             : &lt;span class=&quot;code-quote&quot;&gt;&quot;CN=localhost, OU=activemq.org, O=activemq.org, L=LA, ST=CA, C=US&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;not before&quot;&lt;/span&gt;         : &lt;span class=&quot;code-quote&quot;&gt;&quot;2021-03-04 23:16:43.000 PST&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;not  after&quot;&lt;/span&gt;         : &lt;span class=&quot;code-quote&quot;&gt;&quot;2121-02-08 23:16:43.000 PST&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;subject&quot;&lt;/span&gt;            : &lt;span class=&quot;code-quote&quot;&gt;&quot;CN=localhost, OU=activemq.org, O=activemq.org, L=LA, ST=CA, C=US&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;subject &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; key&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;RSA&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;extensions&quot;&lt;/span&gt;         : [
      {
        ObjectId: 2.5.29.14 Criticality=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        SubjectKeyIdentifier [
        KeyIdentifier [
        0000: F9 A4 A3 77 25 A6 D8 FE   30 8F CA 53 69 33 AD 76  ...w%...0..Si3.v
        0010: 34 42 E9 C7                                        4B..
        ]
        ]
      }
    ]}
]
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17296134" author="jbonofre" created="Fri, 5 Mar 2021 16:02:59 +0000"  >&lt;p&gt;It&apos;s not related to cert: this test is flaky and failing for a while (randomly).&lt;/p&gt;

&lt;p&gt;I will check and at least exclude it.&lt;/p&gt;</comment>
                            <comment id="17296357" author="tetlucas" created="Fri, 5 Mar 2021 22:00:44 +0000"  >&lt;p&gt;I&apos;ve been doing some more digging and it appears the intermittent issues we are seeing were introduced in Oracle jdk1.8.0_261. I do not believe this to be a flaky test, but rather a problem with AES GCM. I don&apos;t know if it&apos;s a JDK bug or if it&apos;s an implementation problem.&lt;/p&gt;

&lt;p&gt;With Oracle jdk1.8.0_251 the negotiated cipher suite is TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 and I am not able to recreate the test failing.&lt;/p&gt;

&lt;p&gt;With Oracle jdk1.8.0_261 the negotiated cipher suite is TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 and I can easily recreate the test failing. The difference in negotiated cipher suite appears to be due to &lt;a href=&quot;https://www.oracle.com/java/technologies/javase/8u261-relnotes.html#JDK-8028518&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this change&lt;/a&gt; to &lt;b&gt;Increase the priorities of GCM cipher suites&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="17296360" author="mattrpav" created="Fri, 5 Mar 2021 22:08:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tetlucas&quot; class=&quot;user-hover&quot; rel=&quot;tetlucas&quot;&gt;tetlucas&lt;/a&gt; interesting the stack and the NIOSSLTransport indicate SSLEngine in use.. I wonder if we need to fix this item (from your JDK changelog notes):&lt;/p&gt;

&lt;p&gt;Given all the protocols could share NIOSSLTransport, we should dig in further. Might not be only a STOMP issue.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;4. TLS connection issues with applications using javax.net.ssl.SSLEngine

Cause: The internal implementation of the SSLEngine and associated classes has been reworked with the introduction of TLS v1.3 support. Buffer usage has been improved in the SSLEngine area.

Solution: If an SSLEngine application encounters issues after upgrading to JDK 8u261 or later, refer to the Java 8 API to ensure application code is correct. In particular, applications using SSLEngine should not just depend on SSLEngineResult.Status.BUFFER_UNDERFLOW or SSLEngineResult.Status.BUFFER_OVERFLOW results in order to flush pending data. Buffers should always be flushed after an SSLEngine wrap operation if such a call produces data (where SSLEngineResult.Status.OK may be returned).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17296396" author="tetlucas" created="Sat, 6 Mar 2021 00:12:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mattrpav&quot; class=&quot;user-hover&quot; rel=&quot;mattrpav&quot;&gt;mattrpav&lt;/a&gt;, I saw that note in there as well and was going to dig in to it some more! **&lt;/p&gt;

&lt;p&gt;It seems likely that&apos;s the issue. I added &lt;b&gt;jdk.tls.disabledAlgorithms=GCM&lt;/b&gt; to &lt;b&gt;$JAVA_HOME/jre/lib/security/java.security&lt;/b&gt; and confirmed that even with TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 jdk1.8.0_261 will fail intermittently so it&apos;s not specifically a problem with GCM.&lt;/p&gt;</comment>
                            <comment id="17296402" author="mattrpav" created="Sat, 6 Mar 2021 00:51:26 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   protected int secureRead(ByteBuffer plain) throws Exception {

        if (!(inputBuffer.position() != 0 &amp;amp;&amp;amp; inputBuffer.hasRemaining()) || status == SSLEngineResult.Status.BUFFER_UNDERFLOW) {
            int bytesRead = channel.read(inputBuffer);

            if (bytesRead == 0 &amp;amp;&amp;amp; !(sslEngine.getHandshakeStatus().equals(SSLEngineResult.HandshakeStatus.NEED_UNWRAP))) {
                return 0;
            }

            if (bytesRead == -1) {
                sslEngine.closeInbound();
                if (inputBuffer.position() == 0 || status == SSLEngineResult.Status.BUFFER_UNDERFLOW) {
                    return -1;
                }
            }
        }

        plain.clear();

        inputBuffer.flip();
        SSLEngineResult res;
        do {
            res = sslEngine.unwrap(inputBuffer, plain); // &amp;lt;-- exception thrown from this line
        } while (res.getStatus() == SSLEngineResult.Status.OK &amp;amp;&amp;amp; res.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.NEED_UNWRAP
                &amp;amp;&amp;amp; res.bytesProduced() == 0);

        if (res.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.FINISHED) {
            finishHandshake();
        }
      ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17296432" author="jbonofre" created="Sat, 6 Mar 2021 05:20:55 +0000"  >&lt;p&gt;Weird, AFAIR, I reproduced the issue with previous JDK 1.8 versions.&lt;/p&gt;

&lt;p&gt;Worth to take a look. Anyway, I&apos;m checking with JDK 11 (as I will push the PR about that).&lt;/p&gt;</comment>
                            <comment id="17297456" author="mattrpav" created="Mon, 8 Mar 2021 15:30:35 +0000"  >&lt;p&gt;Notes:&lt;/p&gt;

&lt;p&gt;1. The secureRead() in the doInit() is needed to maintain connection cycling and connectivity when doing network bridges w/ auto+nio+ssl and other scenarios (see commit history on NIOSSLTransport, confirmed in chat (and his comment to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tetlucas&quot; class=&quot;user-hover&quot; rel=&quot;tetlucas&quot;&gt;tetlucas&lt;/a&gt;&apos;s original PR) w/ @cshannon and unit tests run by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tetlucas&quot; class=&quot;user-hover&quot; rel=&quot;tetlucas&quot;&gt;tetlucas&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2. The secureRead() fail is probably due to multi-threaded access in the not-thread-safe SSLEngine &lt;/p&gt;

&lt;p&gt;&lt;del&gt;or&lt;/del&gt; &lt;/p&gt;

&lt;p&gt;3. The secureRead() needs improved return code checking out of SSLEngine per the JDK 1.8 updates in item (4) (see comments above)&lt;/p&gt;</comment>
                            <comment id="17297467" author="christopher.l.shannon" created="Mon, 8 Mar 2021 15:40:56 +0000"  >&lt;p&gt;I think this might be fixed by simply adding synchronized to serviceRead() or maybe just secureRead()&lt;/p&gt;</comment>
                            <comment id="17297471" author="christopher.l.shannon" created="Mon, 8 Mar 2021 15:41:50 +0000"  >&lt;p&gt;I am testing out a fix now but adding synchronized seems to fix it&lt;/p&gt;</comment>
                            <comment id="17297478" author="jbonofre" created="Mon, 8 Mar 2021 15:48:15 +0000"  >&lt;p&gt;AFAIR, I already tried this, but the test sometime failed (less often), but it was maybe a coincidence.&lt;/p&gt;

&lt;p&gt;I guess it&apos;s valid even using JDK11. I&apos;m asking because I&apos;m ready to update/open the PR about cleanup, JDK11 build and related updates.&lt;/p&gt;</comment>
                            <comment id="17297484" author="christopher.l.shannon" created="Mon, 8 Mar 2021 15:55:05 +0000"  >&lt;p&gt;Well either way I think it makes sense to synchronize and not use a countdown latch to prevent concurrent access. I&apos;m working on a PR now to make a small change. It seems to fix the issue for me locally so it should at least make it better.&lt;/p&gt;</comment>
                            <comment id="17297486" author="jbonofre" created="Mon, 8 Mar 2021 15:58:25 +0000"  >&lt;p&gt;Yes, I agree, it makes sense. I gonna test/check on my machines as well.&lt;/p&gt;</comment>
                            <comment id="17297517" author="christopher.l.shannon" created="Mon, 8 Mar 2021 16:40:58 +0000"  >&lt;p&gt;Actually I think the countdown latch still makes sense here so I just added the sync and pushed a PR.&#160;&lt;/p&gt;</comment>
                            <comment id="17298317" author="jira-bot" created="Tue, 9 Mar 2021 20:19:36 +0000"  >&lt;p&gt;Commit 1654e6c79cfbc1ced5a8fa3f726a9f651560be9d in activemq&apos;s branch refs/heads/master from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=1654e6c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=1654e6c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;: Synchronize on serviceRead inside NIOSSLTransport&lt;/p&gt;

&lt;p&gt;This is needed to prevent concurrent access to the SSLEngine during&lt;br/&gt;
initialization. This is a regression from when auto+nio+ssl was added.&lt;/p&gt;</comment>
                            <comment id="17298318" author="jira-bot" created="Tue, 9 Mar 2021 20:19:38 +0000"  >&lt;p&gt;Commit f2a3fbda2b1e00d1adbff7bb3b2d0bb9d9c0b719 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f2a3fbd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f2a3fbd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #620 from cshannon/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;: Synchronize on serviceRead inside NIOSSLTransport&lt;/p&gt;</comment>
                            <comment id="17298319" author="jira-bot" created="Tue, 9 Mar 2021 20:19:40 +0000"  >&lt;p&gt;Commit f2a3fbda2b1e00d1adbff7bb3b2d0bb9d9c0b719 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f2a3fbd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f2a3fbd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #620 from cshannon/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;: Synchronize on serviceRead inside NIOSSLTransport&lt;/p&gt;</comment>
                            <comment id="17298320" author="jira-bot" created="Tue, 9 Mar 2021 20:20:49 +0000"  >&lt;p&gt;Commit 8d34120d9310d93c83e9dfcd644331dc42dddd0c in activemq&apos;s branch refs/heads/activemq-5.16.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8d34120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8d34120&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;: Synchronize on serviceRead inside NIOSSLTransport&lt;/p&gt;

&lt;p&gt;This is needed to prevent concurrent access to the SSLEngine during&lt;br/&gt;
initialization. This is a regression from when auto+nio+ssl was added.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 1654e6c79cfbc1ced5a8fa3f726a9f651560be9d)&lt;/p&gt;</comment>
                            <comment id="17298323" author="jira-bot" created="Tue, 9 Mar 2021 20:21:39 +0000"  >&lt;p&gt;Commit 54bdb7a1e46c280a2d001dee3a0b80c78bf17116 in activemq&apos;s branch refs/heads/activemq-5.15.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=54bdb7a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=54bdb7a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8169&quot; title=&quot;StompNIOSSLTest test fails with more recent JDK 8 versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8169&quot;&gt;&lt;del&gt;AMQ-8169&lt;/del&gt;&lt;/a&gt;: Synchronize on serviceRead inside NIOSSLTransport&lt;/p&gt;

&lt;p&gt;This is needed to prevent concurrent access to the SSLEngine during&lt;br/&gt;
initialization. This is a regression from when auto+nio+ssl was added.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 1654e6c79cfbc1ced5a8fa3f726a9f651560be9d)&lt;/p&gt;</comment>
                            <comment id="17355696" author="christopher.l.shannon" created="Wed, 2 Jun 2021 13:03:33 +0000"  >&lt;p&gt;FYI - I ran into a deadlock after this fix, I created a new Jira to track the issue to fix it: &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8287&quot; title=&quot;Deadlock caused by synchronized on serviceRead() in NIOSSLTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8287&quot;&gt;&lt;del&gt;AMQ-8287&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17355738" author="mattrpav" created="Wed, 2 Jun 2021 13:46:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; great! this was a troubling issue to have hang out there.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13381704">AMQ-8287</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oaoo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>