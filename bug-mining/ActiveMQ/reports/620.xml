<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:41:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2134] Multicast transport does not work when for a consumer or producer</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2134</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I am creating a broker with just a multicast transport connector. Code snippet below.&lt;/p&gt;

&lt;p&gt;            try&lt;/p&gt;
{
			broker = new BrokerService();
		// configure the broker
			broker.setBrokerName(&quot;ism&quot;);		
			broker.addConnector(&quot;multicast://224.1.2.3:6255?loopBackMode=true&quot;);			
			broker.start();
		}
&lt;p&gt;catch(Exception ex)&lt;/p&gt;
{
			ex.printStackTrace();
		}

&lt;p&gt;Now I try creating a subscriber on the broker  using the following broker url &quot;multicast://224.1.2.3:6255?loopBackMode=true&amp;amp;trace=true&quot;&lt;br/&gt;
The connection never succeeds and the following message is repeatedly thrown.&lt;/p&gt;

&lt;p&gt;DEBUG o.a.a.t.reliable.ReliableTransport - Still waiting for response on: multicast://224.1.2.3:6255?loopBackMode=true&amp;amp;trace=true@0 to command: ConnectionInfo &lt;/p&gt;
{commandId = 1, responseRequired = true, connectionId = ID:JMATHAIY-WXP01-3697-1235159811727-2:0, clientId = ID:JMATHAIY-WXP01-3697-1235159811727-3:0, userName = null, password = null, brokerPath = null, brokerMasterConnector = false, manageable = true, clientMaster = true}
&lt;p&gt; sending replay message&lt;br/&gt;
11:58:44.270 &lt;span class=&quot;error&quot;&gt;&amp;#91;http-8080-1&amp;#93;&lt;/span&gt; DEBUG o.a.a.t.TransportLogger.Connection:1 - SENDING: ReplayCommand &lt;/p&gt;
{commandId = 25, firstNakNumber = 1, lastNakNumber = 1}


&lt;p&gt;The reason to believe why this is a bug: &lt;br/&gt;
I did some sniffing on the network and found that the igmp multicast join request for the broker never came through. Some digging into the code revealed that the MulticastTransport was never created in the first place. UdpTransport was being created even though the transport was multicast. The following change in the doBind method on the UdpTransportFactory.java fixed this problem.&lt;/p&gt;

&lt;p&gt;            //int port = location.getPort();&lt;br/&gt;
            //OpenWireFormat openWireFormat = asOpenWireFormat(wf);&lt;br/&gt;
            //UdpTransport transport = new UdpTransport(openWireFormat, port);&lt;br/&gt;
            log.debug(&quot;Putting a custom fix for Multicast problem&quot;);&lt;br/&gt;
            UdpTransport transport = (UdpTransport)createTransport(location, wf);&lt;/p&gt;

&lt;p&gt;Now I was able to see the broker joining the multicast group, but the multicast socket gets timed out after every 5000 ms . I figured out that this is a default setting in the MulticastTransport.java (DEFAULT_IDLE_TIME) and tried changing it to 0 (open socket forever). Note : There is no way to specify this value from the uri. (or I was not able to figure that out).&lt;/p&gt;

&lt;p&gt;After the above two changes, I could get publisher and consumer connect to the broker and pass on the messages.&lt;/p&gt;

&lt;p&gt;Please review the above changes and let me know if this has any other side effects or if any better fix is possible.&lt;/p&gt;

&lt;p&gt;Background : We are actively testing out the various transports to use ActiveMQ in our application and multicast is very essential. Infact we want to integrate jgroups and I am not having any success there. Is jgroups really integrated in 5.2 ?&lt;/p&gt;



</description>
                <environment>&lt;p&gt;Using JMS in a spring framework&lt;/p&gt;</environment>
        <key id="12482693">AMQ-2134</key>
            <summary>Multicast transport does not work when for a consumer or producer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="jmathaiy">Jaiganesh Mathaiyan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Feb 2009 22:25:04 +0000</created>
                <updated>Sat, 23 May 2009 06:33:45 +0000</updated>
                            <resolved>Sat, 23 May 2009 06:33:45 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12941358" author="rajdavies" created="Sat, 23 May 2009 06:33:45 +0000"  >&lt;p&gt;Fixed in SVN revision 777806&lt;br/&gt;
You can specify the IDLE_TIMEOUT by the keepAliveInterval property in the URI&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75061</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rzxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>