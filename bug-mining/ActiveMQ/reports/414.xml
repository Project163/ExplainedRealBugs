<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:37:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1866] Muliple consumers on a queue and only run as fast as the slowest consumer</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1866</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Muliple consumers on a queue and only run as fast as the slowest consumer&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482113">AMQ-1866</key>
            <summary>Muliple consumers on a queue and only run as fast as the slowest consumer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="chirino">Hiram R. Chirino</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jul 2008 17:33:31 +0000</created>
                <updated>Thu, 21 Aug 2008 10:17:15 +0000</updated>
                            <resolved>Thu, 14 Aug 2008 08:25:29 +0000</resolved>
                                    <version>5.1.0</version>
                                    <fixVersion>5.2.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                                                            <comments>
                            <comment id="12939974" author="chirino" created="Tue, 22 Jul 2008 17:45:00 +0000"  >&lt;p&gt;test case AMQ1866.java has been added to trunk.  Currently failing it show a test case the works for the default prefetch but which fails for small prefetches. &lt;/p&gt;</comment>
                            <comment id="12939989" author="chirino" created="Tue, 22 Jul 2008 19:19:55 +0000"  >&lt;p&gt;Seems it&apos;s not limited to small prefetch sizes.  Test case has been updated and shows that the slow down will happen even with the default prefetch size.&lt;/p&gt;</comment>
                            <comment id="12940003" author="chirino" created="Fri, 25 Jul 2008 15:20:01 +0000"  >&lt;p&gt;The issue revolves around how ActiveMQ 5.x pages and dispatches messages to consumers. Every queue keeps list of paged in messages which defaults to 100 max entires. It round robins dispatching messages between consumers, even the slow consumers. Once the slow consumer gets 100 dispatched messages which it has not yet acked due to it being slow, then no further messages are paged in since the page in list is full.&lt;/p&gt;

&lt;p&gt;I am evaluating different ways to implement this but, any change to this code could have repercussions which need to get evaluated.&lt;/p&gt;</comment>
                            <comment id="12939997" author="chirino" created="Fri, 25 Jul 2008 16:16:13 +0000"  >&lt;p&gt;Attaching patch which fixes the test case.  Submitting for review to make sure there are no other performance/memory implications.&lt;/p&gt;</comment>
                            <comment id="12940005" author="rajdavies" created="Sun, 27 Jul 2008 18:23:34 +0000"  >&lt;p&gt;Using pendingQueueSize to determine least loaded subscription seems the best way to go&lt;br/&gt;
Fixed by SVN revision 680161&lt;/p&gt;</comment>
                            <comment id="12940013" author="rajdavies" created="Mon, 28 Jul 2008 15:02:23 +0000"  >&lt;p&gt;The fix doesn&apos;t work if the consumer is slightly slow ...&lt;/p&gt;</comment>
                            <comment id="12940012" author="sits" created="Mon, 4 Aug 2008 05:15:39 +0000"  >&lt;p&gt;Just curious does this bug occur if lazy dispatch is enabled?  Really the best way of solving this is to not deliver messages to consumers that aren&apos;t waiting for a message.  I would hope if lazy-dispatch is enabled, this doesn&apos;t happen..&lt;/p&gt;</comment>
                            <comment id="12940045" author="rajdavies" created="Thu, 14 Aug 2008 08:23:09 +0000"  >&lt;p&gt;Hi David - we intend  change the dispatch model so that it works this way - if you get a chance - would be very happy if you could give it a run ?&lt;/p&gt;</comment>
                            <comment id="12940048" author="rajdavies" created="Thu, 14 Aug 2008 08:25:29 +0000"  >&lt;p&gt;Fixed by SVN revision 685806&lt;/p&gt;</comment>
                            <comment id="12940068" author="sits" created="Fri, 15 Aug 2008 05:35:49 +0000"  >&lt;p&gt;No worries - I&apos;ll try and set aside some time next week to check it out.&lt;/p&gt;</comment>
                            <comment id="12940064" author="gtully" created="Thu, 21 Aug 2008 10:12:42 +0000"  >&lt;p&gt;additional mods to fix remaining test case,&lt;/p&gt;</comment>
                            <comment id="12940052" author="gtully" created="Thu, 21 Aug 2008 10:17:15 +0000"  >&lt;p&gt;if ye get a moment please cast your eyes over revision 687677 - fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-1902&quot; title=&quot;org.apache.activemq.broker.region.cursors.CursorQueueStoreTest often fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-1902&quot;&gt;&lt;del&gt;AMQ-1902&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461167" name="AMQ1866.patch" size="1726" author="chirino" created="Fri, 25 Jul 2008 16:16:13 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12482559">AMQ-1902</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s2vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>