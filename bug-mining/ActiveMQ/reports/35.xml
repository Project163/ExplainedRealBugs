<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:30:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-632] TaskRunnerFactory from broker is not carried along to Broker-to-Broker connections</title>
                <link>https://issues.apache.org/jira/browse/AMQ-632</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When trying to enable dispatchAsync for broker-to-broker connections (which, since I&apos;ve not found a way to configure demandForwardingBridge in the broker XML, I had to hard code by setting the default value of dispatchAsync in DemandForwardingBridge.java), I found that the TaskRunnerFactory from the broker was not being carried through to the Network connections.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if the way I fixed it is fully acceptable or not, however the attached VMTransportFactory.java seems to fix the issue.  I changed doCompositeConnect to call setTaskRunnerFactory on the newly created TransportConnector.&lt;/p&gt;

&lt;p&gt;The change is against SNAPSHOT 03/14/2006.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12481671">AMQ-632</key>
            <summary>TaskRunnerFactory from broker is not carried along to Broker-to-Broker connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chirino">Hiram R. Chirino</assignee>
                                    <reporter username="yaussy">Kevin Yaussy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Mar 2006 18:41:48 +0000</created>
                <updated>Tue, 21 Mar 2006 18:16:14 +0000</updated>
                            <resolved>Tue, 21 Mar 2006 18:12:43 +0000</resolved>
                                    <version>4.0 RC2</version>
                                    <fixVersion>4.0 RC2</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12937699" author="jstrachan" created="Thu, 16 Mar 2006 20:03:42 +0000"  >&lt;p&gt;BTW there is a local and remote broker config in XML here which creates a demand forwarding bridge...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;e.g. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/localBroker.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/incubator/activemq/trunk/activemq-core/src/test/resources/org/apache/activemq/network/localBroker.xml&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12937556" author="jstrachan" created="Thu, 16 Mar 2006 20:04:51 +0000"  >&lt;p&gt;BTW DemandForwardingBridge has a bean property &quot;dispatchAsync&quot; if you need to change that?&lt;/p&gt;</comment>
                            <comment id="12937391" author="yaussy" created="Thu, 16 Mar 2006 20:11:51 +0000"  >&lt;p&gt;Yes, I need to be able to set some properties, including dispatchAsync, for DemandForwardingBridge.  However, the link you give above configures a NetworkConnection, not a DemandForwardingBridge.  Am I missing something??&lt;/p&gt;</comment>
                            <comment id="12937542" author="jstrachan" created="Fri, 17 Mar 2006 12:01:15 +0000"  >&lt;p&gt;Its a bit confusing isn&apos;t it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So the NetworkConnector creates the DemandForwardingBridge; so you should be able to configure the it with the things you need like&lt;/p&gt;

&lt;p&gt; &amp;lt;networkConnector dispatchAsync=&quot;true&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;etc&lt;/p&gt;

&lt;p&gt;(BTW true is the default in NetworkConnector.java)&lt;/p&gt;

&lt;p&gt;There are a few different kinds of bridges available depending on the configurations of the &amp;lt;networkConnector&amp;gt;. For added fun, the NetworkConnector class just got refactored; so the concrete class that actually creates the bridge is DiscoveryNetworkConnector - see the createBridge() method for details of how it figures out which bridge to use.&lt;/p&gt;

&lt;p&gt;For demand forwarding I think you need to set &amp;lt;networkConnector conduitSubscriptions=&quot;false&quot; ...&lt;/p&gt;</comment>
                            <comment id="12937775" author="jstrachan" created="Fri, 17 Mar 2006 12:06:33 +0000"  >&lt;p&gt;BTW I tried applying your patch and got a number of failures&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; TEST org.apache.activemq.broker.policy.RoundRobinDispatchPolicyTest FAILED                                                                                                                                               &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; TEST org.apache.activemq.broker.policy.SimpleDispatchPolicyTest FAILED                                                                                                                                                   &lt;/p&gt;

&lt;p&gt;so we need to think a bit more before applyting this one; maybe the change has to be localised to only VMTransports created via the network connectors&lt;/p&gt;</comment>
                            <comment id="12936400" author="yaussy" created="Fri, 17 Mar 2006 15:55:50 +0000"  >&lt;p&gt;Thanks, James.  My test system is experiencing problems at the moment, so I hope I can soon try out the settings as you describe.&lt;/p&gt;

&lt;p&gt;Thanks for trying out the change.  I only tried within my own usage patterns, and all seemed fine.  I will eagerly await the official change &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12937567" author="yaussy" created="Fri, 17 Mar 2006 22:09:56 +0000"  >&lt;p&gt;James,&lt;/p&gt;

&lt;p&gt;The config settings on networkConnector works famously, as of the 3/17/2006 SNAPSHOT (it did not work against 3/15/2006 SNAPSHOT).&lt;/p&gt;

&lt;p&gt;So, just need the official change for the TaskRunnerFactory so that dispatchAsync between brokers actually takes place.&lt;/p&gt;</comment>
                            <comment id="12937670" author="jstrachan" created="Sat, 18 Mar 2006 16:38:35 +0000"  >&lt;p&gt;Fancy taking a stab at this one? Was wondering if we should pass along the task factory always, but then allow each transport to decide if its gonna use async dispatch using a flag?&lt;/p&gt;</comment>
                            <comment id="12937689" author="chirino" created="Tue, 21 Mar 2006 18:12:43 +0000"  >&lt;p&gt;patch committed.&lt;/p&gt;</comment>
                            <comment id="12937723" author="yaussy" created="Tue, 21 Mar 2006 18:16:14 +0000"  >&lt;p&gt;I&apos;ll try this on my end tomorrow after the SNAPSHOT build.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460857" name="ASF.LICENSE.NOT.GRANTED--VMTransportFactory.java" size="8619" author="yaussy" created="Tue, 14 Mar 2006 18:41:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s2nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161905</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>