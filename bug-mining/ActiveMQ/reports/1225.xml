<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:50:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2774] Network of brokers : Multicast discovery stopped to work</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2774</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Hi everybody&lt;/p&gt;

&lt;p&gt;I experiment a big problem with the multicast discovery algorithm, in a network of brokers topology.&lt;br/&gt;
In some conditions, a broker can&apos;t reestablish a distant connection even if the distant broker is restarted.&lt;/p&gt;

&lt;p&gt;I have the log traces that would help to identify the origin of the problem.&lt;/p&gt;

&lt;p&gt;When there is no discovery/connection error, I can see these 2 lines in the activemq log file&lt;/p&gt;

&lt;p&gt;#08 Jun 2010 14:31:30,639  INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Multicast Discovery Agent Notifier&amp;#93;&lt;/span&gt; org.apache.activemq.network.DiscoveryNetworkConnector&lt;br/&gt;
Establishing network connection between from vm://ACCLU-tpnocp04v to tcp://tpnocp09v-bus:13100?useLocalHost=false&lt;/p&gt;

&lt;p&gt;#08 Jun 2010 14:31:30,692  INFO  &lt;a href=&quot;#26&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;StartLocalBridge: localBroker=vm://ACCLU-tpnocp04v#26&lt;/a&gt; org.apache.activemq.network.DemandForwardingBridge&lt;br/&gt;
Network connection between vm://ACCLU-tpnocp04v#26 and tcp://tpnocp09v-bus/10.18.126.28:13100(MOM-tpnocp09v) has been established.&lt;/p&gt;


&lt;p&gt;When the connection is broken, I can see this line in the log.&lt;/p&gt;

&lt;p&gt;#11 Jun 2010 12:37:32,585  INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Multicast Discovery Agent Notifier&amp;#93;&lt;/span&gt; org.apache.activemq.network.DemandForwardingBridge&lt;br/&gt;
ACCLU-tpnocp04v bridge to MOM-tpnocp09v stopped&lt;/p&gt;


&lt;p&gt;Then the current ACCLU-tpnocp04v broker tries to reestablish the connection :&lt;/p&gt;

&lt;p&gt;#11 Jun 2010 12:37:34,475  INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Multicast Discovery Agent Notifier&amp;#93;&lt;/span&gt; org.apache.activemq.network.DiscoveryNetworkConnector&lt;br/&gt;
Establishing network connection between from vm://ACCLU-tpnocp04v to tcp://tpnocp09v-bus:13100?useLocalHost=false&lt;/p&gt;

&lt;p&gt;But, here, the second line of the log (&quot;has been established&quot;) doesn&apos;t appear in the log file !! I don&apos;t know exactly if the connection is up or not.&lt;/p&gt;

&lt;p&gt;Then the connection is broken again (look at &quot;Unknown&quot; instead of &quot;MOM-tpnocp09v&quot;.&lt;/p&gt;

&lt;p&gt;#11 Jun 2010 13:33:58,655  WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Transport: tcp://tpnocp09v-bus/10.18.126.28:13100&amp;#93;&lt;/span&gt; org.apache.activemq.network.DemandForwardingBridge&lt;br/&gt;
Network connection between vm://ACCLU-tpnocp04v#58 and tcp://tpnocp09v-bus/10.18.126.28:13100 shutdown due to a remote error: java.net.SocketException: Connection reset&lt;br/&gt;
#11 Jun 2010 13:33:58,657  INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;NetworkBridge&amp;#93;&lt;/span&gt; org.apache.activemq.network.DemandForwardingBridge^M&lt;br/&gt;
ACCLU-tpnocp04v bridge to Unknown stopped&lt;/p&gt;

&lt;p&gt;And, now, even if I restart the distant broker ( MOM-tpnocp09v ), no line (Establishing/Has been established) appears, and no network connection is reestablished between ACCLU-tpnocp04v and MOM-tpnocp09v. it seems that this ACCLU-tpnocp04v broker can no longer establish a connection with the MOM-tpnocp09v broker !!!&lt;/p&gt;

&lt;p&gt;The production teams tell me that this problem seems not to be resolved in fuse-5.3.0.6 version.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12482573">AMQ-2774</key>
            <summary>Network of brokers : Multicast discovery stopped to work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="eric-awl">Eric</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jun 2010 15:30:04 +0000</created>
                <updated>Thu, 10 Feb 2011 10:59:43 +0000</updated>
                            <resolved>Wed, 28 Jul 2010 10:47:34 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.4.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12942681" author="gtully" created="Fri, 11 Jun 2010 15:54:57 +0000"  >&lt;p&gt;There is a bunch more trace level logging in 5.3, if you can reproduce with TRACE level logging with 5.3.x and attach the log that may help. Ideally of course, if you can reproduce with a test case that would be great!&lt;/p&gt;</comment>
                            <comment id="12942689" author="eric-awl" created="Sat, 12 Jun 2010 05:57:01 +0000"  >&lt;p&gt;Hi Gary&lt;/p&gt;

&lt;p&gt;I understand that more traces are needed. Unfortunately, this happens sometimes on our production system (30 servers on 2 sites). And you can see there is 3 days between the launch of the MOM-tpnocp09v and its first stop. &lt;br/&gt;
Putting &quot;Trace&quot; level traces in these conditions will be very difficult. Because the volume of traces will be very heavy. &lt;/p&gt;

&lt;p&gt;But I will contact the production managers to see what can be done.&lt;/p&gt;

&lt;p&gt;I suspect the ConcurrentHashMap&amp;lt;String,RemoteBrokerData&amp;gt; in the class MulticastDiscoveryAgent, is not correctly updated when the bridge is stopped in an &quot;Unknown&quot; state.&lt;/p&gt;

&lt;p&gt; Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12942629" author="eric-awl" created="Sun, 13 Jun 2010 07:30:47 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;I looked at MulticastDiscoveryAgent.java source. The &quot;doRecovery&quot; method is the only one that tells the connection must be reestablished. The indicator &quot;failed&quot; is put to false as soon as the recovery conditions are filled and even if the connection is not really reestablished (that seems to be my case) . As soon as &quot;failed&quot; indicator is false, the recovery and the reconnection (fireServiceAddEvent) can&apos;t be retried. Only &quot;serviceFailed&quot; method can put &quot;failed&quot; to true again.&lt;/p&gt;

&lt;p&gt;Just by looking to this java source, it seems that a situation where the connection is not re-established, the indicator &quot;failed&quot; is false, the multicast heartbeat frames are received, is possible .... Only the call to &quot;serviceFailed&quot; can put the failed indicator to true (or delete the object entry in the hashmap). Is it possible that serviceFailed is not called although the connection is down ?&lt;/p&gt;

&lt;p&gt;(I think that it should be safer that &quot;failed&quot; be an atomic boolean since I believe serviceFailed method could be called by another thread)&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12942621" author="eric-awl" created="Tue, 15 Jun 2010 07:38:57 +0000"  >&lt;p&gt;It seems that the &quot;... has been established&quot; trace can only be written if the remoteBrokerNameKnownLatch.await() condition is filled.&lt;/p&gt;

&lt;p&gt;contdown is called into DemandForwardingBridge.serviceRemoteBrokerInfo&lt;br/&gt;
serviceRemoteBrokerInfo is called into DemandForwardingBridgeSupport.serviceRemoteCommand (only if disposed.get() is false).&lt;/p&gt;</comment>
                            <comment id="12942599" author="eric-awl" created="Thu, 17 Jun 2010 07:18:07 +0000"  >&lt;p&gt;A part of a stack trace which shows that &quot;Multicast Discovery Agent Notifier&quot; thread is blocked on the remoteBrokerNameKnownLatch.&lt;/p&gt;</comment>
                            <comment id="12942597" author="eric-awl" created="Thu, 17 Jun 2010 07:33:54 +0000"  >&lt;p&gt;We are in a full embedded broker configuration.&lt;/p&gt;

&lt;p&gt;I attach a part of an old stack trace (I delete all our own threads and the queueThreads). I think this trace was done (in march) just when one of our embedded broker doesn&apos;t succeed to reconnect to another one.&lt;/p&gt;

&lt;p&gt;This trace is not exactly the same as the explanation since processes are not exactly the one. But this stack trace shows that &quot;Multicast Discovery Agent Notifier&quot; is blocked on the remoteBrokerNameKnownLatch.await() into the &quot;bridge.start()&quot; call (DiscoveryNetworkConnector.onServiceAdd)&lt;/p&gt;

&lt;p&gt;            localBroker.start();&lt;br/&gt;
            remoteBroker.start();&lt;br/&gt;
            if (configuration.isDuplex() &amp;amp;&amp;amp; duplexInitiatingConnection == null) &lt;/p&gt;
{
                // initiator side of duplex network
                remoteBrokerNameKnownLatch.await();
            }

&lt;p&gt;Corresponding &quot;serviceFailed&quot; call, can not be called (no exception) until this latch is released, which can only be done if serviceRemoteBrokerInfo call is done, what can be impossible if distant embedded broker is failed.&lt;/p&gt;

&lt;p&gt;            try &lt;/p&gt;
{
                bridge.start();
            }
&lt;p&gt; catch (Exception e) {&lt;br/&gt;
                ServiceSupport.dispose(localTransport);&lt;br/&gt;
                ServiceSupport.dispose(remoteTransport);&lt;br/&gt;
                LOG.warn(&quot;Could not start network bridge between: &quot; + localURIName + &quot; and: &quot; + uri + &quot; due to: &quot; + e);&lt;br/&gt;
                LOG.debug(&quot;Start failure exception: &quot; + e, e);&lt;br/&gt;
                try &lt;/p&gt;
{
                    discoveryAgent.serviceFailed(event);
                }
&lt;p&gt; catch (IOException e1) &lt;/p&gt;
{
                    LOG.debug(&quot;Discovery agent failure while handling failure event: &quot; + e1.getMessage(), e1);
                }
&lt;p&gt;                return;&lt;br/&gt;
            }&lt;/p&gt;

&lt;p&gt;While &quot;serviceFailed&quot; is not called and multicast frames are received, it seems impossible to try to reconnect to this distant broker even if it is shortly restarted ?&lt;/p&gt;
</comment>
                            <comment id="12942499" author="eric-awl" created="Tue, 6 Jul 2010 09:33:59 +0000"  >&lt;p&gt;I&apos;m sure that I identified a Latch problem in Multicast Network Discovery mechanism on Duplex connection &lt;/p&gt;

&lt;p&gt;The multicast notifier thread is blocked. here the trace (on Fuse-5.3.0.5)&lt;/p&gt;

&lt;p&gt;&quot;Notifier-MulticastDiscoveryAgent-listener:DiscoveryNetworkConnector:NOCSupervisorP5-ADMIN-OUT-IN:BrokerService&lt;span class=&quot;error&quot;&gt;&amp;#91;SIBBusModule-NOCP5-tpnocp08s-bus&amp;#93;&lt;/span&gt;&quot; daemon prio=10 tid=0x0000000044ff2400 nid=0x1389 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000044c26000..0x0000000044c26b90&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: WAITING (parking) &lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for  &amp;lt;0x00002aaab3dd66f0&amp;gt; (a java.util.concurrent.CountDownLatch$Sync)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:747) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:905) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1217) &lt;br/&gt;
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207) &lt;br/&gt;
        at org.apache.activemq.network.DemandForwardingBridgeSupport.start(DemandForwardingBridgeSupport.java:231) &lt;br/&gt;
        at org.apache.activemq.network.DiscoveryNetworkConnector.onServiceAdd(DiscoveryNetworkConnector.java:114) &lt;br/&gt;
        at org.apache.activemq.transport.discovery.multicast.MulticastDiscoveryAgent$2.run(MulticastDiscoveryAgent.java:484) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The problem appears when the network is quickly and alternatively on/off between the two components. &lt;br/&gt;
The bridge is created in one direction, but the answer can not be received. &lt;/p&gt;

&lt;p&gt;The thread is blocked on the CountDownLatch. Even if multicast frames are received, the component can not establish a new network connection. &lt;/p&gt;

&lt;p&gt;Here are an corresponding activemq trace &lt;/p&gt;

&lt;p&gt;When it is OK : &lt;br/&gt;
2010-06-22 22:56:24,500 &lt;span class=&quot;error&quot;&gt;&amp;#91;-tpnocp08s-bus&amp;#93;&lt;/span&gt;] INFO  DiscoveryNetworkConnector      - Establishing network connection from vm://SIBBusModule-NOCP5-tpnocp08s-bus to tcp://tpnocp11v-bus.vdm.priv.amm.noc:14101?useLocalHost=false &lt;br/&gt;
2010-06-22 22:56:26,083 &lt;a href=&quot;#160&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;nocp08s-bus#160&lt;/a&gt; INFO  DemandForwardingBridge         - Network connection between vm://SIBBusModule-NOCP5-tpnocp08s-bus#160 and tcp://tpnocp11v-bus.vdm.priv.amm.noc/10.18.126.30:14101(SIBBusSupervisor-tpnocp11v-bus) has been established. &lt;/p&gt;

&lt;p&gt;2010-06-22 22:57:34,807 &lt;span class=&quot;error&quot;&gt;&amp;#91;-tpnocp08s-bus&amp;#93;&lt;/span&gt;] INFO  DemandForwardingBridge         - SIBBusModule-NOCP5-tpnocp08s-bus bridge to SIBBusSupervisor-tpnocp11v-bus stopped &lt;/p&gt;

&lt;p&gt;2010-06-22 22:57:34,811 &lt;span class=&quot;error&quot;&gt;&amp;#91;-tpnocp08s-bus&amp;#93;&lt;/span&gt;] INFO  DiscoveryNetworkConnector      - Establishing network connection from vm://SIBBusModule-NOCP5-tpnocp08s-bus to tcp://tpnocp11v-bus.vdm.priv.amm.noc:14101?useLocalHost=false &lt;br/&gt;
2010-06-22 22:57:39,064 &lt;a href=&quot;#162&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;nocp08s-bus#162&lt;/a&gt; INFO  DemandForwardingBridge         - Network connection between vm://SIBBusModule-NOCP5-tpnocp08s-bus#162 and tcp://tpnocp11v-bus.vdm.priv.amm.noc/10.18.126.30:14101(SIBBusSupervisor-tpnocp11v-bus) has been established. &lt;/p&gt;

&lt;p&gt;2010-06-22 22:58:42,578 &lt;span class=&quot;error&quot;&gt;&amp;#91;-tpnocp08s-bus&amp;#93;&lt;/span&gt;] INFO  DemandForwardingBridge         - SIBBusModule-NOCP5-tpnocp08s-bus bridge to SIBBusSupervisor-tpnocp11v-bus stopped &lt;/p&gt;

&lt;p&gt;When it is KO : &quot;Unknown&quot; &lt;/p&gt;

&lt;p&gt;2010-06-22 22:58:42,648 &lt;span class=&quot;error&quot;&gt;&amp;#91;-tpnocp08s-bus&amp;#93;&lt;/span&gt;] INFO  DiscoveryNetworkConnector      - Establishing network connection from vm://SIBBusModule-NOCP5-tpnocp08s-bus to tcp://tpnocp11v-bus.vdm.priv.amm.noc:14101?useLocalHost=false &lt;br/&gt;
2010-06-22 22:59:18,031 &lt;span class=&quot;error&quot;&gt;&amp;#91;18.126.30:14101&amp;#93;&lt;/span&gt; WARN  DemandForwardingBridge         - Network connection between vm://SIBBusModule-NOCP5-tpnocp08s-bus#164 and tcp://tpnocp11v-bus.vdm.priv.amm.noc/10.18.126.30:14101 shutdown due to a remote error: java.net.SocketException: Connection reset &lt;br/&gt;
2010-06-22 22:59:18,033 &lt;span class=&quot;error&quot;&gt;&amp;#91;NetworkBridge  &amp;#93;&lt;/span&gt; INFO  DemandForwardingBridge         - SIBBusModule-NOCP5-tpnocp08s-bus bridge to Unknown stopped &lt;/p&gt;


&lt;p&gt;Here is the other side corresponding activemq trace &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:55:44,295 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40517&amp;#93;&lt;/span&gt; INFO  TransportConnection            - Created Duplex Bridge back to SIBBusModule-NOCP5-tpnocp08s-bus &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:56:24,438 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40517&amp;#93;&lt;/span&gt; INFO  DemandForwardingBridge         - SIBBusSupervisor-tpnocp11v-bus bridge to SIBBusModule-NOCP5-tpnocp08s-bus stopped &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:56:26,135 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40518&amp;#93;&lt;/span&gt; INFO  TransportConnection            - Created Duplex Bridge back to SIBBusModule-NOCP5-tpnocp08s-bus &lt;br/&gt;
activemq-server.log:2010-06-22 22:56:26,135 &lt;a href=&quot;#1770&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ocp11v-bus#1770&lt;/a&gt; INFO  DemandForwardingBridge         - Network connection between vm://SIBBusSupervisor-tpnocp11v-bus#1770 and tcp:///10.26.190.27:40518(SIBBusModule-NOCP5-tpnocp08s-bus) has been established. &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:57:34,818 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40518&amp;#93;&lt;/span&gt; INFO  DemandForwardingBridge         - SIBBusSupervisor-tpnocp11v-bus bridge to SIBBusModule-NOCP5-tpnocp08s-bus stopped &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:57:39,153 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40519&amp;#93;&lt;/span&gt; INFO  TransportConnection            - Created Duplex Bridge back to SIBBusModule-NOCP5-tpnocp08s-bus &lt;br/&gt;
activemq-server.log:2010-06-22 22:57:39,153 &lt;a href=&quot;#1806&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ocp11v-bus#1806&lt;/a&gt; INFO  DemandForwardingBridge         - Network connection between vm://SIBBusSupervisor-tpnocp11v-bus#1806 and tcp:///10.26.190.27:40519(SIBBusModule-NOCP5-tpnocp08s-bus) has been established. &lt;/p&gt;

&lt;p&gt;activemq-server.log:2010-06-22 22:58:44,328 &lt;span class=&quot;error&quot;&gt;&amp;#91;26.190.27:40519&amp;#93;&lt;/span&gt; INFO  DemandForwardingBridge         - SIBBusSupervisor-tpnocp11v-bus bridge to SIBBusModule-NOCP5-tpnocp08s-bus stopped &lt;/p&gt;</comment>
                            <comment id="12941809" author="eric-awl" created="Tue, 6 Jul 2010 11:10:00 +0000"  >&lt;p&gt;What could happen if we add&lt;/p&gt;

&lt;p&gt;         if (configuration.isDuplex() &amp;amp;&amp;amp; duplexInitiatingConnection == null) &lt;/p&gt;
{
                // initiator side of duplex network
                remoteBrokerNameKnownLatch.countDown();
            }

&lt;p&gt;into the stop() method of DemandForwardingBridgeSupport class ?&lt;/p&gt;
</comment>
                            <comment id="12942495" author="eric-awl" created="Wed, 7 Jul 2010 16:04:56 +0000"  >&lt;p&gt;We put a no-Duplex Configuration instead of a Duplex Configuration and it seemed to work better.... But&lt;br/&gt;
today during a network problem (alternatively on/off) our process doesn&apos;t resist ....&lt;/p&gt;

&lt;p&gt;We have &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a thread dump which shows 85 StartLocalBridge Threads waiting for the same latch into the DemandForwardingBridgeSupport.StartLocalBridge method :&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; protected void startLocalBridge() throws Exception {&lt;br/&gt;
        if (localBridgeStarted.compareAndSet(false, true)) {&lt;br/&gt;
            synchronized (this) {&lt;br/&gt;
                if (LOG.isTraceEnabled()) &lt;/p&gt;
{
                    LOG.trace(configuration.getBrokerName() + &quot; starting local Bridge, localBroker=&quot; + localBroker);
                }
&lt;p&gt;                remoteBrokerNameKnownLatch.await();&lt;br/&gt;
                ...&lt;br/&gt;
}&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;960 CLOSE_WAIT&lt;/li&gt;
	&lt;li&gt;a file descriptor limit&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Will the transport.closeAsync=false flag be helpful here ?&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12942472" author="eric-awl" created="Sun, 11 Jul 2010 08:25:11 +0000"  >&lt;p&gt;If I resume my view of the problem&lt;/p&gt;

&lt;p&gt;When the problem occurs&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Network links between 2 brokers, are quickly and alternatively on/off. In french, we say that the network is &quot;bagotting&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;The DemandForwardingBridgeSupport.stop() method is called before the start() method  (including sons threads start methods) is fully exectuted&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Consequences&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;With NO DUPLEX connection, network of brokers are re-established, but some threads are created and blocked on the RemoteBrokerNameKnownLatch latch.&lt;br/&gt;
In this case, the latch is awaited in the startLocalBridge() method which is called by a dedicated thread. So, a major problem occured when ressources are consumed if this kind of network faults are frequent, and the number of network connections is important. &lt;/li&gt;
	&lt;li&gt;With DUPLEX connection,  the latch is awaited in the start() method itself.  The main network connector thread is concerned. So the network connector is completely blocked.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I currently try to&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add a RemoteBrokerNameLatch.countDown at the end of the stop() method&lt;/li&gt;
	&lt;li&gt;test the disposed AtomicBoolean value to correctly break the starting process in start() for DUPLEX, and in startLocalBridge() for NO-DUPLEX.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think it will be better for DUPLEX since network connector thread will be freed, but I don&apos;t know if the son thread will be correctly destroyed.&lt;/p&gt;

&lt;p&gt;Eric-AWL &lt;/p&gt;</comment>
                            <comment id="12941250" author="eric-awl" created="Wed, 21 Jul 2010 09:33:40 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;I think I now have programmed a clean correction for this specific latch problem. And I can give you the sources. With these sources, the network connector is not ever blocked even if a network fault comes during the start&apos;() process.&lt;/p&gt;

&lt;p&gt;But, before giving you these sources, I have relative questions, with duplex TCP connections :&lt;/p&gt;

&lt;p&gt;Imagine a brief network fault&lt;/p&gt;

&lt;p&gt;On the network connector side of the DUPLEX connection, the fault is detected, the TCP bridge is closed. Socket.close() is executed, but the socket is in a CLOSE_WAIT state.&lt;br/&gt;
The &quot;transport connector side&quot; of the DUPLEX connection is not aware that the first connection is down while its InactivityMonitor Thread doesn&apos;t signal it.&lt;/p&gt;

&lt;p&gt;Then, on the network connector side, the bridge wants to be built again, and the network is now ON. The &quot;transport connector side&quot; creates a second active bridge for the same DUPLEX connection.&lt;br/&gt;
So, the &quot;transport connector&quot; side temporarily sees 2 distant broker for the same one, while the InactivityMonitor thread doesn&apos;t signal the death of the first TCP connection.&lt;/p&gt;

&lt;p&gt;Is this true ?&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940579" author="gtully" created="Wed, 21 Jul 2010 11:20:57 +0000"  >&lt;p&gt;Great if you have a fix.&lt;/p&gt;

&lt;p&gt;to your question, that sounds true to me, but I would have thought that the second bridge creation attempt is considered distinct because it occurs on a new connection.&lt;/p&gt;</comment>
                            <comment id="12942408" author="eric-awl" created="Thu, 22 Jul 2010 13:36:45 +0000"  >&lt;p&gt;I propose you this patch in the tar file (for ActiveMQ 5.3.2 version)&lt;/p&gt;

&lt;p&gt;2 modifications are brought :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the RemoteBrokerNameKnownLatch is countdown at the end of the stop() to free the connector thread even if it doesn&apos;t receive the correct remote broker info. That can appear when network is successively and quickly on/off. In the case of a DUPLEX connection, the network connector was then totally blocked. In the case of a not duplex connection, some dead threads were up.&lt;/li&gt;
	&lt;li&gt;the second modification tries to stop an old invalid duplex Transport Connection when a new Duplex Transport Connection is required by the same broker for the same transport Connector&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I tried to realize a JUNIT test which simulates a lot of &quot;close socket&quot; even during bridge start process. It seems to work, but I didn&apos;t succeed in simulating the second modification. &lt;br/&gt;
the JUNIT test include a &quot;tcpfaulty&quot; transport with two socket factories. In the future I will try to put SocketProxy code into the ServerSocketTstFactory.&lt;/p&gt;

&lt;p&gt;This situation where a second duplex connection tried to be established before the first one was clearly dead, appeared in my own (not JUNIT) tests , when a brief networkl fault occured and when only the first modification was implemented.&lt;/p&gt;

&lt;p&gt;All modifications are clearly indicated by &lt;br/&gt;
// Eric-AWL AMW-2774 Beginning&lt;br/&gt;
// Eric-AWL AMW-2774 End&lt;/p&gt;

&lt;p&gt;Sorry for the poor english. (I&apos;m french)&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940517" author="gtully" created="Mon, 26 Jul 2010 12:31:48 +0000"  >&lt;p&gt;I applied just the test component of your patch to trunk, 5.4-SNAPSHOT and ran the test and it worked just fine without any mods to the src in main/java. Is this expected? Or do you only get intermittent failures with the test. I wonder if the issue is resolved already on trunk? Can you validate trunk?&lt;/p&gt;</comment>
                            <comment id="12942395" author="eric-awl" created="Mon, 26 Jul 2010 12:52:16 +0000"  >&lt;p&gt;Hi Gary&lt;/p&gt;

&lt;p&gt;It&apos;s very difficult to simulate quick network faults. With my JUNIT test, I simulate close() immediately or some seconds later (with a random value). When the close() is done immediatly, I succeeded  in  validating DUPLEX network of brokers and that nothing was blocked in this situation with my patch :&lt;/p&gt;

&lt;p&gt;2010-07-26 14:09:20,001 [ce&lt;span class=&quot;error&quot;&gt;&amp;#91;SpokeBroker&amp;#93;&lt;/span&gt;] INFO  DiscoveryNetworkConnector      - Establishing network connection from vm://SpokeBroker to tcpfaulty://localhost.localdomain:61617&lt;br/&gt;
2010-07-26 14:09:20,035 &lt;span class=&quot;error&quot;&gt;&amp;#91;ocalport=32972&amp;#93;&lt;/span&gt;] INFO  SocketTstFactory               - Trying to close client socket Socket&lt;span class=&quot;error&quot;&gt;&amp;#91;addr=localhost.localdomain/127.0.0.1,port=61617,localport=32972&amp;#93;&lt;/span&gt; immediatly&lt;br/&gt;
2010-07-26 14:09:20,036 &lt;span class=&quot;error&quot;&gt;&amp;#91;ocalport=32972&amp;#93;&lt;/span&gt;] INFO  SocketTstFactory               - Client socket Socket&lt;span class=&quot;error&quot;&gt;&amp;#91;addr=localhost.localdomain/127.0.0.1,port=61617,localport=32972&amp;#93;&lt;/span&gt; is closed.&lt;br/&gt;
2010-07-26 14:09:20,037 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61617&amp;#93;&lt;/span&gt; WARN  DemandForwardingBridge         - Network connection between vm://SpokeBroker#8 and tcpfaulty://localhost.localdomain/127.0.0.1:61617 shutdown due to a remote error: java.net.SocketException: Socket closed&lt;br/&gt;
2010-07-26 14:09:20,038 &lt;span class=&quot;error&quot;&gt;&amp;#91;NetworkBridge  &amp;#93;&lt;/span&gt; INFO  DemandForwardingBridge         - SpokeBroker bridge to Unknown stopped&lt;/p&gt;

&lt;p&gt;In this kind of situation (bridge to Unknown stopped), I experimented on 5.3.0-05 fuse production environment, that the network of connector thread was completely blocked on the latch, with Duplex connections.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure that my JUNIT test demonstrates the problem on 5.3.0-05. It helped me to debug my own patch.&lt;/p&gt;

&lt;p&gt;I don&apos;t try my JUNIT test on 5.3.0-5 fuse version. I&apos;m going to verify that my JUNIT test sometimes shows the problem with the 5.3.0-5 core jar.&lt;/p&gt;

&lt;p&gt;I can look at 5.4-snapshot source code to see if something is already changed about this latch on the trunk.&lt;/p&gt;

&lt;p&gt;I will tell you my results.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940605" author="gtully" created="Mon, 26 Jul 2010 13:05:49 +0000"  >&lt;p&gt;yea, I understand this is difficult to test but the effort is worth it to protect the changes. One thought that may help is the use of SockeProxy to simulate a network failure or slow network. There is an example usage in &lt;a href=&quot;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/usecases/BrokerQueueNetworkWithDisconnectTest.java?view=log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/usecases/BrokerQueueNetworkWithDisconnectTest.java?view=log&lt;/a&gt; - see the org.apache.activemq.usecases.BrokerQueueNetworkWithDisconnectTest#onSend use of socketProxy. This gave me a test case for a similar issue some time back so it may be worth a look, it is not unlike what you do in TcpFaulty but is very deterministic which may help.&lt;/p&gt;</comment>
                            <comment id="12940518" author="eric-awl" created="Mon, 26 Jul 2010 13:42:18 +0000"  >&lt;p&gt;Yes, I saw this JUNIT test, and I will try to adapt SocketProxy into the TCPFaultyServerSocketFactory, to simulate pause in the accept().&lt;/p&gt;

&lt;p&gt;I can&apos;t imagine that this JUnit test doesn&apos;t work with 5.3.0-05-fuse, but we expiremented this latch situation with network faults regularly (stack traces was taken some hours after the frozen state was discovered of the network connector, and these traces always show the &quot;await&quot; on this latch with duplex connection).&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940206" author="eric-awl" created="Tue, 27 Jul 2010 09:15:52 +0000"  >&lt;p&gt;At first view, on the 5.4-SNAPSHOT, with the last modification, the remoteBrokerNameKnownLatch is not countdown in the stop() method of the DemandForwardingBridge. I don&apos;t think that the network connector freeze in DUPLEX connection, is resolved.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940614" author="eric-awl" created="Tue, 27 Jul 2010 14:48:13 +0000"  >&lt;p&gt;Hi Gary&lt;/p&gt;

&lt;p&gt;You will find here a new version of the my own org.apache.activemq.transport.tcp.SocketTstFactory.java far more deterministic (no random)&lt;/p&gt;

&lt;p&gt;In fact, in this one, the duplex network connection is forcely closed in my &quot;bagot thread&quot;, after 0 ms, then 1 ms, then 2 ms, then ...., then 11 ms, then 31 ms, then 51 ms, then 71 ms, .....&lt;/p&gt;

&lt;p&gt;With my patch on the 5.3.2, and my test server, the JUNIT test succeeds (I think always), With the 5.3.2 version, the JUNIT test doesn&apos;t succeed (I think never).&lt;/p&gt;

&lt;p&gt;On my test server (a good one with 2 CPUs), it&apos;s when the connection is closed between 1 and 3 ms, after the connect() call that the network connector is frozen. If the close connection is done immediately, or after 3 ms, the network connector continues to live.&lt;/p&gt;

&lt;p&gt;I can&apos;t test on 5.4-trunk since I don&apos;t have a SVN with HTTPS support on my test server.&lt;/p&gt;

&lt;p&gt;I hope this will help you to test on 5.4 and to validate my patch.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940041" author="eric-awl" created="Tue, 27 Jul 2010 14:57:32 +0000"  >&lt;p&gt;I didn&apos;t receive any mail to signal that I just added a new attachment with a comment on this thread. This comment is just to signal this if necessary !!!&lt;/p&gt;

&lt;p&gt;Sorry if you receive 2 mails. &lt;br/&gt;
Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940537" author="s1ngle" created="Tue, 27 Jul 2010 15:26:08 +0000"  >&lt;p&gt;I&apos;ve encountered similar problem though in a different case.&lt;br/&gt;
Imho it is far more easily reproducible.&lt;br/&gt;
The case is when you try to add a DiscoveryNetworkConnector between the brokers with a TCP connection set to the broker that has SSL enabled &lt;span class=&quot;error&quot;&gt;&amp;#91;not TCP&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The operation is blocking &lt;span class=&quot;error&quot;&gt;&amp;#91;on a DemandForwardingBridgeSupport.start() -&amp;gt; remoteBrokerNameKnownLatch.await(); operation&amp;#93;&lt;/span&gt; and new threads are being created, all blocked on the same operation :&lt;br/&gt;
DiscoveryNetworkConnector.onServiceAdd()&lt;br/&gt;
DemandForwardingBridgeSupport.start()&lt;br/&gt;
CountDownLatch.await().&lt;/p&gt;

&lt;p&gt;Here are the logs that appears during the situation described above:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/activemq/secure/attachment/19504/activemq-bug-2774-tcpToSsl.log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/secure/attachment/19504/activemq-bug-2774-tcpToSsl.log&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12940495" author="eric-awl" created="Tue, 27 Jul 2010 15:37:13 +0000"  >&lt;p&gt;Yes, with DUPLEX connection, the network connector thread is completely frozen into the start() call. With not Duplex connection, son threads are created and are blocked on the same latch, but the connector is not frozen.&lt;/p&gt;

&lt;p&gt;The problem is the same. As we are far more worried by the DUPLEX problem, I choose to demonstrate the bug with DUPLEX connection.&lt;/p&gt;

&lt;p&gt;If you have an environment test with source codes, perhaps you can use my patch (only 3 class to change) and tell us what happens on your configuration ???&lt;/p&gt;

&lt;p&gt;I can provide you the activemq-all-5.3.2.jar with my patch.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12939549" author="eric-awl" created="Wed, 28 Jul 2010 08:42:40 +0000"  >&lt;p&gt;The jar with the patch&lt;/p&gt;</comment>
                            <comment id="12941663" author="eric-awl" created="Wed, 28 Jul 2010 08:49:02 +0000"  >&lt;p&gt;in the tar file, there are 3 changes for ActiveMQ classes, 6 new test classes and one ressource file (that declares a new transport that simulate network faults)&lt;/p&gt;


&lt;p&gt;Changes&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;activemq-core/src/main/java/org/apache/activemq/broker/TransportConnection.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/main/java/org/apache/activemq/network/DiscoveryNetworkConnector.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;test classes&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/transport/tcp/TcpFaultyTransportFactory.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/transport/tcp/TcpFaultyTransport.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/transport/tcp/TcpFaultyTransportServer.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/transport/tcp/ServerSocketTstFactory.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/transport/tcp/SocketTstFactory.java&lt;/li&gt;
	&lt;li&gt;activemq-core/src/test/java/org/apache/activemq/usecases/MulticastDiscoveryOnFaultyNetworkTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Test ressource&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;activemq-core/src/test/resources/META-INF/services/org/apache/activemq/transport/tcpfaulty&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Then, I send SocketTstFactory.java again to change the network faults generation algorithm.&lt;/p&gt;

&lt;p&gt;Eric-AWL&lt;/p&gt;</comment>
                            <comment id="12940032" author="s1ngle" created="Wed, 28 Jul 2010 10:19:25 +0000"  >&lt;p&gt;Your solution passed all our JUNIT tests so it seems to get rid of the problem while not interfering current features.&lt;/p&gt;</comment>
                            <comment id="12940386" author="gtully" created="Wed, 28 Jul 2010 10:47:34 +0000"  >&lt;p&gt;patch applied with thanks to r980014&lt;br/&gt;
Great to have the test case and additional validation, that is a some what messy area of the code base.&lt;/p&gt;

&lt;p&gt;Just for future reference, svn diff is a great way to produce a patch as it just captures the differences. Makes it alot eastier to apply a patch to trunk when it was created from a branch.&lt;br/&gt;
Can you cast an eye over the diffs in the commit log just to be sure to be sure it is all there. thanks again. &lt;/p&gt;</comment>
                            <comment id="12940292" author="eric-awl" created="Wed, 28 Jul 2010 11:32:17 +0000"  >&lt;p&gt;All seems OK. And I think that &quot;tcpfaulty&quot; transport can be reused to verify a lot of things...&lt;/p&gt;

&lt;p&gt;Be careful, I don&apos;t exactly know all consequences of my patch on cluster failover mechanisms (transportInterupted and transportResumed).&lt;/p&gt;

&lt;p&gt;Atos Wordline works with ActiveMQ on a VERY VERY HUGE project in France (an &quot;electricity smart metering&quot; project). And this patch was very important for us.&lt;/p&gt;

&lt;p&gt;I&apos;m not in general development teams but in production teams. That&apos;s why I don&apos;t have a good SVN development environment.&lt;/p&gt;

&lt;p&gt;Thank you&lt;br/&gt;
Eric-AWL (Atos Worldline).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12495294">AMQ-3129</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12498131">AMQ-3176</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460748" name="AMQ2774.tar" size="163840" author="eric-awl" created="Thu, 22 Jul 2010 13:36:45 +0000"/>
                            <attachment id="12461743" name="JMAC-BEA-lastlog.log-20100315" size="42875" author="eric-awl" created="Thu, 17 Jun 2010 07:18:07 +0000"/>
                            <attachment id="12461787" name="SocketTstFactory.java" size="5535" author="eric-awl" created="Tue, 27 Jul 2010 14:48:13 +0000"/>
                            <attachment id="12461790" name="activemq-all-5.3.2-eric.jar" size="3469676" author="eric-awl" created="Wed, 28 Jul 2010 08:42:38 +0000"/>
                            <attachment id="12461788" name="activemq-bug-2774-tcpToSsl.log" size="13971" author="s1ngle" created="Tue, 27 Jul 2010 15:25:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b9ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>