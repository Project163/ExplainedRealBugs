<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:39:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2016] Message grouping not honored when consumers started with existing messages</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2016</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Messages are processed FIFO when messages with different groups are sent to a queue and then the consumers are started. &lt;br/&gt;
If the messages are sent after the consumers are started, then message grouping works as expected.&lt;br/&gt;
Two JUnit tests are attached. &lt;br/&gt;
1. MessageGroupTest.java starts up 3 consumers and then sends 30 messages evenly distributed across 3 groups A, B, and C. &lt;br/&gt;
Each consumer then gets assigned a group and the ordering is as expected based on the different sleep intervals defined as seen in the log below&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2008-11-26 15:06:09,841 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; 30 messages sent to group A/B/C&lt;br/&gt;
2008-11-26 15:06:09,841 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 9&lt;br/&gt;
2008-11-26 15:06:09,841 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 9&lt;br/&gt;
2008-11-26 15:06:09,841 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 9&lt;br/&gt;
2008-11-26 15:06:09,934 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 8&lt;br/&gt;
2008-11-26 15:06:10,044 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 7&lt;br/&gt;
2008-11-26 15:06:10,137 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 6&lt;br/&gt;
2008-11-26 15:06:10,247 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 5&lt;br/&gt;
2008-11-26 15:06:10,340 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 4&lt;br/&gt;
2008-11-26 15:06:10,450 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 3&lt;br/&gt;
2008-11-26 15:06:10,544 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 2&lt;br/&gt;
2008-11-26 15:06:10,653 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 1&lt;br/&gt;
2008-11-26 15:06:10,747 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 0&lt;br/&gt;
2008-11-26 15:06:10,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 8&lt;br/&gt;
2008-11-26 15:06:11,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 7&lt;br/&gt;
2008-11-26 15:06:12,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 6&lt;br/&gt;
2008-11-26 15:06:13,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 5&lt;br/&gt;
2008-11-26 15:06:14,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 8&lt;br/&gt;
2008-11-26 15:06:14,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 4&lt;br/&gt;
2008-11-26 15:06:15,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 3&lt;br/&gt;
2008-11-26 15:06:16,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 2&lt;br/&gt;
2008-11-26 15:06:17,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 1&lt;br/&gt;
2008-11-26 15:06:18,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker1 received msg B remaining 0&lt;br/&gt;
2008-11-26 15:06:19,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 7&lt;br/&gt;
2008-11-26 15:06:24,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 6&lt;br/&gt;
2008-11-26 15:06:29,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 5&lt;br/&gt;
2008-11-26 15:06:34,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 4&lt;br/&gt;
2008-11-26 15:06:39,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 3&lt;br/&gt;
2008-11-26 15:06:44,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 2&lt;br/&gt;
2008-11-26 15:06:49,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 1&lt;br/&gt;
2008-11-26 15:06:54,840 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupTest&amp;#93;&lt;/span&gt; worker2 received msg A remaining 0&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;2. MessageGroupDelayedTest.java sends 30 messages evenly distributed across 3 groups A, B, and C and then starts up 3 consumers.&lt;br/&gt;
All 30 messages are delivered in FIFO order to a single consumer as seen in the log below&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2008-11-26 15:25:50,021 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 9&lt;br/&gt;
2008-11-26 15:25:55,021 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 9&lt;br/&gt;
2008-11-26 15:25:56,021 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 9&lt;br/&gt;
2008-11-26 15:25:56,130 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 8&lt;br/&gt;
2008-11-26 15:26:01,130 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 8&lt;br/&gt;
2008-11-26 15:26:02,130 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 8&lt;br/&gt;
2008-11-26 15:26:02,224 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 7&lt;br/&gt;
2008-11-26 15:26:07,224 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 7&lt;br/&gt;
2008-11-26 15:26:08,224 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 7&lt;br/&gt;
2008-11-26 15:26:08,333 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 6&lt;br/&gt;
2008-11-26 15:26:13,333 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 6&lt;br/&gt;
2008-11-26 15:26:14,333 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 6&lt;br/&gt;
2008-11-26 15:26:14,427 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 5&lt;br/&gt;
2008-11-26 15:26:19,427 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 5&lt;br/&gt;
2008-11-26 15:26:20,427 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 5&lt;br/&gt;
2008-11-26 15:26:20,536 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 4&lt;br/&gt;
2008-11-26 15:26:25,536 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 4&lt;br/&gt;
2008-11-26 15:26:26,536 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 4&lt;br/&gt;
2008-11-26 15:26:26,630 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 3&lt;br/&gt;
2008-11-26 15:26:31,630 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 3&lt;br/&gt;
2008-11-26 15:26:32,630 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 3&lt;br/&gt;
2008-11-26 15:26:32,739 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 2&lt;br/&gt;
2008-11-26 15:26:37,739 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 2&lt;br/&gt;
2008-11-26 15:26:38,739 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 2&lt;br/&gt;
2008-11-26 15:26:38,833 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 1&lt;br/&gt;
2008-11-26 15:26:43,832 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 1&lt;br/&gt;
2008-11-26 15:26:44,832 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 1&lt;br/&gt;
2008-11-26 15:26:44,926 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg A remaining 0&lt;br/&gt;
2008-11-26 15:26:49,926 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg B remaining 0&lt;br/&gt;
2008-11-26 15:26:50,926 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.MessageGroupDelayedTest&amp;#93;&lt;/span&gt; worker3 received msg C remaining 0&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment>&lt;p&gt;JBOSS 4.2.2, AMQ 5.2.0 RA, JDK 1.5, Windows&lt;/p&gt;</environment>
        <key id="12483060">AMQ-2016</key>
            <summary>Message grouping not honored when consumers started with existing messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12482417">AMQ-2082</parent>
                                    <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="hiyer">Hari Iyer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Nov 2008 20:27:58 +0000</created>
                <updated>Mon, 3 Aug 2009 13:30:34 +0000</updated>
                            <resolved>Fri, 23 Jan 2009 13:29:06 +0000</resolved>
                                    <version>5.1.0</version>
                    <version>5.2.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12940650" author="ghopper" created="Wed, 7 Jan 2009 22:44:56 +0000"  >
&lt;p&gt;bug summary: Message grouping fails when consumers are added.&lt;br/&gt;
keywords: JMSXGroupID JMSXGroupSeq&lt;/p&gt;

&lt;p&gt;Uploading a new unit test.  An excerpt of the test results is below, which shows that the message groups GrA and GrB are being handled by both consumers simultaneously.&lt;/p&gt;

&lt;p&gt;15:11:58,498 INFO  GroupNewConsumerTest - Con2 got message       GrA-5&lt;br/&gt;
15:11:58,560 INFO  GroupNewConsumerTest - Con2 got message       GrB-5&lt;br/&gt;
15:11:58,560 INFO  GroupNewConsumerTest - Con1 got message GrB-3&lt;br/&gt;
15:11:58,623 INFO  GroupNewConsumerTest - Con1 got message GrA-4&lt;br/&gt;
15:11:58,623 INFO  GroupNewConsumerTest - Con2 got message       GrA-6&lt;br/&gt;
15:11:58,685 INFO  GroupNewConsumerTest - Con1 got message GrB-4&lt;br/&gt;
15:11:58,685 INFO  GroupNewConsumerTest - Con2 got message       GrB-6&lt;br/&gt;
15:11:58,748 INFO  GroupNewConsumerTest - Con1 got message GrB-7&lt;br/&gt;
15:11:58,748 INFO  GroupNewConsumerTest - Con2 got message       GrA-7&lt;br/&gt;
15:11:58,810 INFO  GroupNewConsumerTest - Con1 got message GrB-8&lt;br/&gt;
15:11:58,810 INFO  GroupNewConsumerTest - Con2 got message       GrA-8&lt;br/&gt;
15:11:58,873 INFO  GroupNewConsumerTest - Con2 got message       GrA-9&lt;br/&gt;
15:11:58,935 INFO  GroupNewConsumerTest - Con2 got message       GrB-9&lt;/p&gt;

&lt;p&gt;This is probably the same issue described in:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/Message-groups-not-working-when-consuming-existing-messages-td18445237.html#a18445237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Message-groups-not-working-when-consuming-existing-messages-td18445237.html#a18445237&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that setting the prefetch to 1 made reproducing the issue much easier.  (See the unit test)&lt;/p&gt;</comment>
                            <comment id="12940689" author="gtully" created="Mon, 19 Jan 2009 14:17:52 +0000"  >&lt;p&gt;prefetch=1 should help here. Part of the problem is that the dispatch logic can only deal with the consumers that it has and on the first dispatch iteration it finds only one consumer and figures that that consumer has to deal with all of the groups. With prefetch of one, after the first dispatch iteration there may be another consumer (at least it allow the internal dispatch lock to be released so that another consumer can be added between dispatch attempts)&lt;/p&gt;

&lt;p&gt;Currently there is an issue that evaluates message group selection before determining if a consumer is full, but if this is resolved, prefetch=1 should make group selection evenly distributed among subscriptions that arrive at the same time and before the group assignment has been determined. &lt;/p&gt;</comment>
                            <comment id="12940692" author="ghopper" created="Wed, 21 Jan 2009 16:19:26 +0000"  >&lt;p&gt;After reviewing Hari&apos;s original files and the response from Gary, I think my issue is different than the original issue.  Hari is concerned with balancing between multiple consumers, while I am concerned with the exclusive property.  Sorry for the confusion.&lt;/p&gt;

&lt;p&gt;Moved my test case to the ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-2082&quot; title=&quot;Message Groups fail to preserve exclusivity when a new consumer is added.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-2082&quot;&gt;&lt;del&gt;AMQ-2082&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12940681" author="dejanb" created="Thu, 22 Jan 2009 17:27:46 +0000"  >&lt;p&gt;Recovery dispatch refactoring, which was the root of the problem, has been committed in SVN revision 736720. All that is left to be done is to add a configurable logic that would make broker to wait for a certain number of consumers (and/or a bit of time) before it starts dispatching. This will allow an even distribution of groups among consumers. Coming soon.&lt;/p&gt;</comment>
                            <comment id="12940705" author="dejanb" created="Fri, 23 Jan 2009 13:29:06 +0000"  >&lt;p&gt;The configurable queue policies has been added, which allows us to wait for specified number of consumers (and/or time) before we start dispatching messages. This ensures an even distribution of groups among consumers.&lt;/p&gt;

&lt;p&gt;More documentation can be found at:&lt;br/&gt;
&lt;a href=&quot;http://cwiki.apache.org/confluence/display/ACTIVEMQ/Message+Groups#MessageGroups-Gettingnotifiedofownershipchangesofmessagegroups&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/ACTIVEMQ/Message+Groups#MessageGroups-Gettingnotifiedofownershipchangesofmessagegroups&lt;/a&gt;&lt;br/&gt;
Modified test case (tests for different policies condemnations and fails if there is no even distribution of messages and groups) can be found here&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/usecases/MessageGroupDelayedTest.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/usecases/MessageGroupDelayedTest.java?view=markup&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12937574" author="rchristy" created="Tue, 28 Jul 2009 22:00:46 +0000"  >&lt;p&gt;Any luck getting a fix for version 5.2?&lt;/p&gt;</comment>
                            <comment id="12940916" author="dejanb" created="Mon, 3 Aug 2009 13:30:34 +0000"  >&lt;p&gt;Hi Rich,&lt;/p&gt;

&lt;p&gt;we don&apos;t maintain 5.2 branch anymore. Any specific reason you don&apos;t want to upgrade to 5.3 (it should be much more stable than 5.2)?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461308" name="MessageGroupDelayedTest.java" size="4764" author="hiyer" created="Wed, 26 Nov 2008 20:29:22 +0000"/>
                            <attachment id="12461222" name="MessageGroupTest.java" size="4809" author="hiyer" created="Wed, 26 Nov 2008 20:29:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rzlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>