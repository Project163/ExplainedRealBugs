<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:31:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-711] commit() should not be called while in auto-commit mode</title>
                <link>https://issues.apache.org/jira/browse/AMQ-711</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Unable to startup Broker Service.&lt;/p&gt;

&lt;p&gt;ERROR BrokerService                  - Failed to start ActiveMQ JMS Message Broker. Reason: java.io.IOException: commit() should not be called while in auto-commit mode.&lt;/p&gt;


&lt;p&gt;Stacktrace:&lt;/p&gt;

&lt;p&gt;java.io.IOException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:42)&lt;br/&gt;
        at org.apache.activemq.store.jdbc.TransactionContext.close(TransactionContext.java:125)&lt;br/&gt;
        at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.createAdapter(JDBCPersistenceAdapter.java:253)&lt;br/&gt;
        at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.getAdapter(JDBCPersistenceAdapter.java:213)&lt;br/&gt;
        at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.start(JDBCPersistenceAdapter.java:139)&lt;br/&gt;
        at org.apache.activemq.store.journal.JournalPersistenceAdapter.start(JournalPersistenceAdapter.java:215)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:907)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.createBroker(BrokerService.java:867)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.getBroker(BrokerService.java:453)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:362)&lt;br/&gt;
        at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:43)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1058&lt;br/&gt;
)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:363)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:226)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:147)&lt;br/&gt;
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:275)&lt;br/&gt;
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:318)&lt;br/&gt;
        at org.apache.xbean.spring.context.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:158)&lt;br/&gt;
        at org.apache.xbean.spring.context.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:48)&lt;br/&gt;
        at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:40)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:56)&lt;br/&gt;
        at org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:81)&lt;br/&gt;
        at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:46)&lt;br/&gt;
        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:49)&lt;br/&gt;
        at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:64)&lt;br/&gt;
        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:49)&lt;br/&gt;
        at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:45)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.activemq.console.Main.runTaskClass(Main.java:135)&lt;br/&gt;
        at org.apache.activemq.console.Main.main(Main.java:67)&lt;br/&gt;
Caused by: java.sql.SQLException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
        at net.sourceforge.jtds.jdbc.ConnectionJDBC2.commit(ConnectionJDBC2.java:1878)&lt;br/&gt;
        at org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:203)&lt;br/&gt;
        at org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:203)&lt;br/&gt;
        at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.commit(PoolingDataSource.java:199)&lt;br/&gt;
        at org.apache.activemq.store.jdbc.TransactionContext.close(TransactionContext.java:119)&lt;/p&gt;


&lt;p&gt;Error message:&lt;/p&gt;

&lt;p&gt;ERROR: java.lang.RuntimeException: Failed to execute start task. Reason: org.springframework.beans.factory.BeanCreationException: Error creating bean&lt;br/&gt;
with name &apos;org.apache.activemq.xbean.XBeanBrokerService&apos; defined in class path resource &lt;span class=&quot;error&quot;&gt;&amp;#91;activemq.xml&amp;#93;&lt;/span&gt;: Initialization of bean failed; nested exceptio&lt;br/&gt;
n is java.io.IOException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
ERROR: java.lang.Exception: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;org.apache.activemq.xbean.XBeanBro&lt;br/&gt;
kerService&apos; defined in class path resource &lt;span class=&quot;error&quot;&gt;&amp;#91;activemq.xml&amp;#93;&lt;/span&gt;: Initialization of bean failed; nested exception is java.io.IOException: commit() should not&lt;br/&gt;
 be called while in auto-commit mode.&lt;/p&gt;



&lt;p&gt;Configuration:&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;sqlserver-ds&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;property name=&quot;driverClassName&quot; value=&quot;net.sourceforge.jtds.jdbc.Driver&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;property name=&quot;url&quot; value=&quot;jdbc:jtds:sqlserver://host/ActiveMQ;instance=D1;tds=8.0;lastupdatecount=true&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;property name=&quot;username&quot; value=&quot;ActiveMQ&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;property name=&quot;password&quot; value=&quot;ActiveMQPwd&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;property name=&quot;poolPreparedStatements&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/bean&amp;gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows NT&lt;br/&gt;
SQLServer with jtds driver. &lt;/p&gt;</environment>
        <key id="12483303">AMQ-711</key>
            <summary>commit() should not be called while in auto-commit mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="niklas@kack.se">Niklas K&#228;ck</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 May 2006 21:34:10 +0000</created>
                <updated>Tue, 27 Sep 2011 21:30:58 +0000</updated>
                            <resolved>Tue, 27 Sep 2011 21:30:58 +0000</resolved>
                                    <version>4.0 RC2</version>
                    <version>4.0 RC3</version>
                                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="12937836" author="chirino" created="Mon, 5 Jun 2006 23:17:48 +0000"  >&lt;p&gt;Applied patch.. Thanks Niklas!&lt;/p&gt;</comment>
                            <comment id="12939657" author="stephanbrunner" created="Wed, 7 May 2008 08:57:08 +0000"  >&lt;p&gt;Hi folks!&lt;/p&gt;

&lt;p&gt;I&apos;m getting the same or similar exception with activemq 5.0.0 distribution. I&apos;m using mssqlserver 2000 with jtds 1.2 lib. Btw I&apos;ve tried same application context with activemq  4.1.1 distribution and it works perfectly&lt;/p&gt;

&lt;p&gt;I&apos;m getting the following exception:&lt;/p&gt;

&lt;p&gt;2008-05-05 16:03:38,812 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; ERROR BrokerService                  - Failed to start ActiveMQ JMS Message Broker. Reason: java.io.IOException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
java.io.IOException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
	at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:45)&lt;br/&gt;
	at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.deleteAllMessages(JDBCPersistenceAdapter.java:389)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerService.deleteAllMessages(BrokerService.java:1004)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerService.start(BrokerService.java:415)&lt;br/&gt;
	at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:46)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1201)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1171)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:425)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:251)&lt;br/&gt;
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:156)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:248)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:160)&lt;br/&gt;
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:287)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)&lt;br/&gt;
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.&amp;lt;init&amp;gt;(ResourceXmlApplicationContext.java:64)&lt;br/&gt;
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.&amp;lt;init&amp;gt;(ResourceXmlApplicationContext.java:52)&lt;br/&gt;
	at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:91)&lt;br/&gt;
	at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:51)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)&lt;br/&gt;
	at org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:112)&lt;br/&gt;
	at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:74)&lt;br/&gt;
	at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:51)&lt;br/&gt;
	at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:104)&lt;br/&gt;
	at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:51)&lt;br/&gt;
	at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:76)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.activemq.console.Main.runTaskClass(Main.java:222)&lt;br/&gt;
	at org.apache.activemq.console.Main.main(Main.java:106)&lt;br/&gt;
Caused by: java.sql.SQLException: commit() should not be called while in auto-commit mode.&lt;br/&gt;
	at net.sourceforge.jtds.jdbc.ConnectionJDBC2.commit(ConnectionJDBC2.java:1878)&lt;br/&gt;
	at org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:203)&lt;br/&gt;
	at org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:203)&lt;br/&gt;
	at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.commit(PoolingDataSource.java:199)&lt;br/&gt;
	at org.apache.activemq.store.jdbc.adapter.DefaultJDBCAdapter.doDropTables(DefaultJDBCAdapter.java:133)&lt;br/&gt;
	at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.deleteAllMessages(JDBCPersistenceAdapter.java:384)&lt;/p&gt;

&lt;p&gt;My Application Context for the persistency adapter is:&lt;/p&gt;

&lt;p&gt;&amp;lt;persistenceAdapter adapterClass=&quot;org.apache.activemq.store.jdbc.adapter.ImageBasedJDBCAdaptor&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;journaledJDBC journalLogFiles=&quot;5&quot; dataDirectory=&quot;../activemq-data&quot; dataSource=&quot;#jtds-ds&quot; useDatabaseLock=&quot;false&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/persistenceAdapter&amp;gt;&lt;/p&gt;

&lt;p&gt;and my datasource is:&lt;/p&gt;

&lt;p&gt;  &amp;lt;bean id=&quot;jtds-ds&quot; class=&quot;net.sourceforge.jtds.jdbcx.JtdsDataSource&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;serverName&quot; value=&quot;****&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;portNumber&quot; value=&quot;****&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;databaseName&quot; value=&quot;*****&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;user&quot; value=&quot;****&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;password&quot; value=&quot;***&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;thanks, &lt;/p&gt;

&lt;p&gt;stephan&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460752" name="ASF.LICENSE.NOT.GRANTED--activemq.xml" size="2495" author="niklas@kack.se" created="Wed, 17 May 2006 21:34:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tutj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>