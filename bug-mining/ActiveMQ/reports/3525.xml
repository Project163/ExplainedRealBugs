<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:00:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9746] Request for Securing ACTIVEMQ_ENCRYPTION_PASSWORD in ActiveMQ 6.1.7 WebConsole Configuration</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9746</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;We are currently configuring the &lt;b&gt;webconsole login&lt;/b&gt; in ActiveMQ 6.1.7 using &lt;tt&gt;EncryptedPropertiesLogin&lt;/tt&gt; via JAAS, with &lt;tt&gt;users-enc.properties&lt;/tt&gt; containing encrypted passwords.&lt;/p&gt;

&lt;p&gt;This configuration requires the use of the environment variable &lt;tt&gt;ACTIVEMQ_ENCRYPTION_PASSWORD&lt;/tt&gt;, which must currently be stored in &lt;b&gt;plaintext&lt;/b&gt; as either:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A system environment variable&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;A system property (e.g., via &lt;tt&gt;System.setProperty()&lt;/tt&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This approach raises &lt;b&gt;security concerns&lt;/b&gt;, as the encryption key is exposed in plaintext, especially when starting the broker via scripts or containerized environments.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;login.config&lt;/b&gt;&lt;br/&gt;
EncryptedPropertiesLogin &lt;/p&gt;
{ &#160; &#160; 
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;org.apache.activemq.jaas.PropertiesLoginModule required &#160; &#160; &#160; &#160; 
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;org.apache.activemq.jaas.properties.user=&quot;users-enc.properties&quot; &#160; &#160; &#160; &#160; 
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;org.apache.activemq.jaas.properties.group=&quot;groups.properties&quot; &#160; &#160; &#160; &#160; 
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;decrypt=true; 
}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;Is there a supported or recommended mechanism in ActiveMQ 6.1.7 to &lt;b&gt;avoid using a plain-text encryption password&lt;/b&gt; (&lt;tt&gt;ACTIVEMQ_ENCRYPTION_PASSWORD&lt;/tt&gt;)?&lt;/p&gt;

&lt;p&gt;Specifically:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Can we &lt;b&gt;store the encryption password securely in a file&lt;/b&gt; (e.g., &lt;tt&gt;activemq_enc_pwd.properties&lt;/tt&gt;) and have ActiveMQ or the JAAS module &lt;b&gt;read and decrypt it at runtime&lt;/b&gt;?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Is it possible to plug in a custom &lt;tt&gt;StringPBEConfig&lt;/tt&gt; implementation or extend &lt;tt&gt;PropertiesLoginModule&lt;/tt&gt; to load the encryption password programmatically?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We would like to keep &lt;tt&gt;users-enc.properties&lt;/tt&gt; encrypted for security, &lt;b&gt;without exposing &lt;tt&gt;ACTIVEMQ_ENCRYPTION_PASSWORD&lt;/tt&gt; in plain text&lt;/b&gt; on disk or environment variables.&lt;/p&gt;</description>
                <environment>&lt;h3&gt;&lt;a name=&quot;ActiveMQVersion%3A&quot;&gt;&lt;/a&gt;&lt;b&gt;ActiveMQ Version:&lt;/b&gt;&lt;/h3&gt;

&lt;p&gt;&lt;tt&gt;6.1.7&lt;/tt&gt;&lt;/p&gt;</environment>
        <key id="13623923">AMQ-9746</key>
            <summary>Request for Securing ACTIVEMQ_ENCRYPTION_PASSWORD in ActiveMQ 6.1.7 WebConsole Configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="n_nagraj321">Nagaraju</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Jul 2025 07:08:14 +0000</created>
                <updated>Mon, 6 Oct 2025 14:30:33 +0000</updated>
                                                                            <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="18009147" author="n_nagraj321" created="Wed, 23 Jul 2025 06:44:20 +0000"  >&lt;p&gt;We have identified a limitation in the &lt;a href=&quot;https://github.com/apache/activemq/blob/main/activemq-jaas/src/main/java/org/apache/activemq/jaas/EncryptionSupport.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;EncryptionSupport&lt;/tt&gt;&lt;/a&gt; class that affects the flexibility of providing encryption passwords for JAAS modules like &lt;tt&gt;PropertiesLoginModule&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Currently, in &lt;tt&gt;EncryptionSupport&lt;/tt&gt;, the encryption password is hardcoded to be read only from the environment variable &lt;tt&gt;ACTIVEMQ_ENCRYPTION_PASSWORD&lt;/tt&gt;:&lt;/p&gt;

&lt;p&gt;public static StandardPBEStringEncryptor createEncryptor(String algorithm) {&lt;br/&gt;
&#160; &#160; &#160; &#160; StandardPBEStringEncryptor encryptor = new StandardPBEStringEncryptor();&lt;br/&gt;
&#160; &#160; &#160; &#160; EnvironmentStringPBEConfig config = new EnvironmentStringPBEConfig();&lt;br/&gt;
&#160; &#160; &#160; &#160; if (algorithm != null) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; encryptor.setAlgorithm(algorithm);&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; // From Jasypt: for PBE-AES-based algorithms, the IV generator is MANDATORY&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; if (algorithm.startsWith(&quot;PBE&quot;) &amp;amp;&amp;amp; algorithm.contains(&quot;AES&quot;)) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; encryptor.setIvGenerator(new RandomIvGenerator());
&#160; &#160; &#160; &#160; &#160; &#160; }
&lt;p&gt;&#160; &#160; &#160; &#160; }&lt;br/&gt;
&#160; &#160; &#160; &#160; &lt;font color=&quot;#FF0000&quot;&gt;&lt;b&gt;config.setPasswordEnvName(&quot;ACTIVEMQ_ENCRYPTION_PASSWORD&quot;);&lt;/b&gt;&lt;/font&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; encryptor.setConfig(config);&lt;br/&gt;
&#160; &#160; &#160; &#160; return encryptor;&lt;br/&gt;
&#160; &#160; }&lt;/p&gt;

&lt;p&gt;This ignores the fact that &lt;tt&gt;EnvironmentStringPBEConfig&lt;/tt&gt; (used internally) &lt;b&gt;already supports fetching the password from a system property&lt;/b&gt; via:&lt;br/&gt;
config.setPasswordSysPropertyName(&quot;some.system.property.name&quot;);&lt;/p&gt;

&lt;p&gt;In fact, the implementation in &lt;tt&gt;EnvironmentStringPBEConfig&lt;/tt&gt; prioritizes &lt;tt&gt;System.getProperty(...)&lt;/tt&gt; if the &lt;tt&gt;passwordSysPropertyName&lt;/tt&gt; is set:&lt;br/&gt;
public void setPasswordSysPropertyName(String passwordSysPropertyName) {&lt;br/&gt;
&#160; &#160; this.passwordSysPropertyName = passwordSysPropertyName;&lt;br/&gt;
&#160; &#160; if (passwordSysPropertyName == null) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; super.setPassword((String) null);
&#160; &#160; }
&lt;p&gt; else &lt;/p&gt;
{
&#160; &#160; &#160; &#160; this.passwordEnvName = null;
&#160; &#160; &#160; &#160; super.setPassword(System.getProperty(passwordSysPropertyName));
&#160; &#160; }
&lt;p&gt;}&lt;br/&gt;
However, since &lt;tt&gt;EncryptionSupport&lt;/tt&gt; hardcodes the environment variable path and doesn&apos;t expose a way to configure either the system property or even override the env var name, this feature is effectively blocked.&lt;/p&gt;</comment>
                            <comment id="18010590" author="n_nagraj321" created="Tue, 29 Jul 2025 07:01:16 +0000"  >&lt;p&gt;Any update on this?&lt;/p&gt;</comment>
                            <comment id="18024690" author="jira-bot" created="Sat, 4 Oct 2025 17:01:37 +0000"  >&lt;p&gt;Commit 587bd4f165bbc178b82a9e0d07af6e649543f8a4 in activemq&apos;s branch refs/heads/main from JB Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=587bd4f165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=587bd4f165&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9746&quot; title=&quot;Request for Securing ACTIVEMQ_ENCRYPTION_PASSWORD in ActiveMQ 6.1.7 WebConsole Configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9746&quot;&gt;AMQ-9746&lt;/a&gt;: Upgrade to Jolokia 2.3.0 (#1502)&lt;/p&gt;
</comment>
                            <comment id="18024735" author="jira-bot" created="Sun, 5 Oct 2025 04:38:56 +0000"  >&lt;p&gt;Commit fbc3456a5764c0323c069ee41d2888e060de852e in activemq&apos;s branch refs/heads/activemq-6.1.x from JB Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=fbc3456a57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=fbc3456a57&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9746&quot; title=&quot;Request for Securing ACTIVEMQ_ENCRYPTION_PASSWORD in ActiveMQ 6.1.7 WebConsole Configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9746&quot;&gt;AMQ-9746&lt;/a&gt;: Upgrade to Jolokia 2.3.0 (#1502)&lt;/p&gt;</comment>
                            <comment id="18027571" author="n_nagraj321" created="Mon, 6 Oct 2025 14:30:33 +0000"  >&lt;p&gt;Any update on this issue?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Nagaraju&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wuig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>