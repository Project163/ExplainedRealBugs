<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:41:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2094] Can&apos;t bind the connector to localhost or actuall IP correctly.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2094</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;ActiveMQ server socket created with TcpTransportServer  can&apos;t bind to localhost or actuall IP correctly.  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;expected result:
	&lt;ul&gt;
		&lt;li&gt;localhost  ---&amp;gt; bind to 127.0.0.1&lt;/li&gt;
		&lt;li&gt;actual IP  ----&amp;gt; bind to  actual IP&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;actual result:
	&lt;ul&gt;
		&lt;li&gt;localhost  ---&amp;gt; bind to 0.0.0.0&lt;/li&gt;
		&lt;li&gt;actual IP  ----&amp;gt; bind to 0.0.0.0&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;&quot;org.apache.activemq.transport.tcp.TcpTransportServer&quot;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  
      InetAddress addr = InetAddress.getByName(host);

       &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (host.trim().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;) || \
addr.equals(InetAddress.getLocalHost())) {  &lt;span class=&quot;code-comment&quot;&gt;//#1 start the socket with 0.0.0.0
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverSocket = \
serverSocketFactory.createServerSocket(bind.getPort(), backlog);  }
           &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;//#2  start the socket with the ip spcified in addr.
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverSocket = \
serverSocketFactory.createServerSocket(bind.getPort(), backlog, addr);  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since if you config the real IP as a host setting, \&lt;br/&gt;
addr.equals(InetAddress.getLocalHost()) will allways be true so that the #1 will be used to start the socket with 0.0.0.0 by default.  Which causes a defect of geronimo: &lt;a href=&quot;https://issues.apache.org/jira/browse/GERONIMO-4404&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GERONIMO-4404&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP + SUN JDK 1.5&lt;/p&gt;</environment>
        <key id="12482893">AMQ-2094</key>
            <summary>Can&apos;t bind the connector to localhost or actuall IP correctly.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12482510">AMQ-2771</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="genspring">Lin Quan Jiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Feb 2009 05:46:57 +0000</created>
                <updated>Thu, 18 Aug 2011 15:37:18 +0000</updated>
                            <resolved>Thu, 18 Aug 2011 15:37:18 +0000</resolved>
                                    <version>4.1.2</version>
                    <version>5.2.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Geronimo Integration</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12940727" author="genspring" created="Tue, 3 Feb 2009 08:59:06 +0000"  >&lt;p&gt;Please help review the patch, thanks.&lt;/p&gt;</comment>
                            <comment id="12940853" author="jpeterson" created="Sun, 1 Mar 2009 04:14:58 +0000"  >&lt;p&gt;Im noticing this behavior as well.  This is an important security problem for us. Please resolve ASAP.&lt;/p&gt;</comment>
                            <comment id="12940863" author="djencks" created="Mon, 2 Mar 2009 23:08:50 +0000"  >&lt;p&gt;I applied the patch in rev 749464.  I think Hiram is a bit unconvinced about this patch but the removed code is clearly wrong and I can&apos;t see anythign wrong with the patch.&lt;/p&gt;</comment>
                            <comment id="12940859" author="jpeterson" created="Tue, 3 Mar 2009 05:51:08 +0000"  >&lt;p&gt;One other thing to think about: I&apos;m pretty sure that tcp://localhost... is all over the documentation. You may want to consider whether the documentation will need to be updated after this fix.&lt;/p&gt;</comment>
                            <comment id="12940895" author="gtully" created="Thu, 5 Mar 2009 18:19:56 +0000"  >&lt;p&gt;the patch killed a unit test: org.apache.activemq.transport.tcp.SslContextNBrokerServiceTest&lt;br/&gt;
The connector URI did not match the address bound. Just committed a fix.&lt;/p&gt;

&lt;p&gt;To listen on all interfaces on a host, use the wildcard address: tcp://0.0.0.0:61616&lt;/p&gt;</comment>
                            <comment id="12941640" author="cmacnaug" created="Fri, 26 Jun 2009 18:08:09 +0000"  >&lt;p&gt;I was running some testing with 5.3 today and noticed that specifying localhost no longer binds to 0.0.0.0 (meaning that folks who have configured their brokers to be accessible from other hosts via localhost will no longer be able to connect). From looking at the issue, it seems like the more appropriate fix would be:&lt;/p&gt;

&lt;p&gt;localhost --&amp;gt; bind to 0.0.0.0 (e.g. still bind to wildcard)&lt;br/&gt;
127.0.0.1 --&amp;gt; bind to 127.0.0.0 (only loopback)&lt;br/&gt;
actual host name --&amp;gt; bind to actual ip&lt;/p&gt;

&lt;p&gt;        host = (host == null || host.length() == 0) ? &quot;localhost&quot; : host;&lt;br/&gt;
        InetAddress addr = InetAddress.getByName(host);&lt;/p&gt;

&lt;p&gt;        try {&lt;br/&gt;
            if (host.trim().equals(&quot;localhost&quot;)) &lt;/p&gt;
{
                this.serverSocket = serverSocketFactory.createServerSocket(bind.getPort(), backlog);
                addr = InetAddress.getLocalHost();
            }
&lt;p&gt; else &lt;/p&gt;
{
                this.serverSocket = serverSocketFactory.createServerSocket(bind.getPort(), backlog, addr);
            }
&lt;p&gt;            configureServerSocket(this.serverSocket);&lt;/p&gt;

&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;The question is would the ability of specifying 127.0.0.1 explicitly without it resolving to 0.0.0.0 be enough to resolve this?&lt;/p&gt;</comment>
                            <comment id="12941647" author="jpeterson" created="Sat, 27 Jun 2009 05:23:45 +0000"  >&lt;p&gt;Or how about:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;0.0.0.0 --&amp;gt; bind to 0.0.0.0 (e.g. still bind to wildcard)
localhost or 127.0.0.1 --&amp;gt; bind to 127.0.0.1 (only loopback)
actual host name or actual ip --&amp;gt; bind to actual ip
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I vote that correct behavior is more important than backwards compatibility.  Adjusting configs/etc is a normal part of the upgrade process.&lt;/p&gt;</comment>
                            <comment id="12941649" author="slewis" created="Tue, 30 Jun 2009 18:13:09 +0000"  >&lt;p&gt;Just to add to this, with this change clustering in servicemix requires another step, namely that you&apos;ve got to change the config to point to 0.0.0.0 instead of localhost, otherwise you see connection refused exceptions as the brokers fail to connect to each other.  The configuration file out of the box should probably specify 0.0.0.0 instead of localhost, that way the previous behavior is preserved (you can connect to the broker remotely) but it&apos;s also the correct behavior with regards to the configuration.&lt;/p&gt;</comment>
                            <comment id="12941667" author="gtully" created="Wed, 1 Jul 2009 10:30:11 +0000"  >&lt;p&gt;I updated the default xml configuration to use the wildcard 0.0.0.0 address. r790100&lt;/p&gt;</comment>
                            <comment id="12941774" author="gtully" created="Wed, 22 Jul 2009 10:56:02 +0000"  >&lt;p&gt;+1 to Jeff and leaving the change in place. Localhost != 0.0.0.0  - &lt;a href=&quot;http://en.wikipedia.org/wiki/Localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Localhost&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12941622" author="gtully" created="Fri, 28 Aug 2009 09:36:36 +0000"  >&lt;p&gt;I think this one is done for 5.3 - am closing off.&lt;/p&gt;</comment>
                            <comment id="12942134" author="cobrien" created="Tue, 29 Jun 2010 01:41:02 +0000"  >&lt;p&gt;method resolveHostName assumes lookup performed by   InetAddress.getLocalHost() is unambiguous .  &lt;br/&gt;
There is some workaround code at the link below that might be of use. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JCS-40&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JCS-40&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12483024">AMQ-2319</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12461274" name="AMQ-2094.patch" size="984" author="genspring" created="Tue, 3 Feb 2009 08:59:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tvkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>