<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:44:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2616] filling a temporary queue and disconnecting does not free the queues Usage Manager memory limit</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2616</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Starting a broker running the latest 5.3.1 snapshot with the simple attached configuration, then connecting a producer that sends messages to a temporary queue (without any consumer on it) until it hits the Usage Manager memory limit and gives this message:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;INFO  Topic - Usage Manager memory limit reached for temp-topic://ID:sts-chc-matsh-33157-1266457317460-0:0:1. Producers will be throttled to the rate at which messages are removed from this destination to prevent flooding it. See &lt;a href=&quot;http://activemq.apache.org/producer-flow-control.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/producer-flow-control.html&lt;/a&gt; for more info&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you then disconnect the producer you get a log message that the temporary queue is being removed, but if you connect another producer and try to produce to a new temporary queue no messages are accepted, and the broker just prints the &quot;Usage Manager memory limit reached&quot; message again. &lt;/p&gt;

&lt;p&gt;This is a denial of service since if you now connect a consumer on a new temporary queue no messages will be accepted for that temporary queue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12481239">AMQ-2616</key>
            <summary>filling a temporary queue and disconnecting does not free the queues Usage Manager memory limit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="zakalwe">Mats Henrikson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2010 01:56:30 +0000</created>
                <updated>Mon, 22 Feb 2010 17:04:30 +0000</updated>
                            <resolved>Mon, 22 Feb 2010 17:04:30 +0000</resolved>
                                    <version>5.3.1</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12942222" author="zakalwe" created="Thu, 18 Feb 2010 02:13:42 +0000"  >&lt;p&gt;A more realistic sequence of events is this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;ConsumerA sends RequestB to QueueC, with a reply-to of TempQueueD.&lt;/li&gt;
	&lt;li&gt;ProducerE receives RequestB and starts sending messages back to TempQueueD.&lt;/li&gt;
	&lt;li&gt;ConsumerA runs out of memory and dies, the broker closes the connection.&lt;/li&gt;
	&lt;li&gt;ProducerE continues sending messages to TempQueueD until the broker Usage Manager Memory Limit is reached. From this point no producer can send any messages to any temporary queues.&lt;/li&gt;
	&lt;li&gt;The sysadmins discover something is wrong and kill ProducerE, the broker claims to free up the resources, however the problem remains.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12942266" author="rajdavies" created="Mon, 22 Feb 2010 17:04:30 +0000"  >&lt;p&gt;Fixed in 5.3.1 by SVN  revision 912656 &lt;br/&gt;
and trunk by SVN revision 912652&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461622" name="activemq.xml" size="2279" author="zakalwe" created="Thu, 18 Feb 2010 01:57:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rq7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>