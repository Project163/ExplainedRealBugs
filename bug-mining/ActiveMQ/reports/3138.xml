<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:43:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6940] Significant memory footprint increase from 5.8.0 to 5.15.3</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6940</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Recently we upgraded from&#160;5.8.0 to 5.15.3 on one of our environments and found the broker running out of memory with the old broker configurations.&lt;/p&gt;

&lt;p&gt;I suspect this may be related to the new inflight message size calculation but haven&apos;t been able to create a reproducer just yet.&lt;/p&gt;

&lt;p&gt;Broker JVM running with opts&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-Xss256k -Xms600m -Xmx600m -Xmn128m -Dfile.encoding=ISO-8859-1 -Dlog4j.watchDelay=60000 -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintPromotionFailure -XX:PrintFLSStatistics=1 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+PrintClassHistogram -verbose:gc -Dsun.rmi.dgc.client.gcInterval=7200000 -Dsun.rmi.dgc.server.gcInterval=7200000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Java jdk1.8.0_144&lt;/p&gt;

&lt;p&gt;OS Linux 4.4.19-29.55.amzn1.x86_64&lt;/p&gt;</environment>
        <key id="13148529">AMQ-6940</key>
            <summary>Significant memory footprint increase from 5.8.0 to 5.15.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="johno">Johno Crawford</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2018 10:21:07 +0000</created>
                <updated>Fri, 30 Mar 2018 16:02:00 +0000</updated>
                            <resolved>Thu, 29 Mar 2018 13:02:45 +0000</resolved>
                                    <version>5.15.3</version>
                                    <fixVersion>5.15.4</fixVersion>
                    <fixVersion>5.16.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16417301" author="johno" created="Wed, 28 Mar 2018 13:05:01 +0000"  >&lt;p&gt;Still leaking after removing the vmcursors as suggested by dejanb.&lt;/p&gt;</comment>
                            <comment id="16417567" author="johno" created="Wed, 28 Mar 2018 15:37:09 +0000"  >&lt;p&gt;I created a canary build of the broker and removed the dispatched array from org.apache.activemq.broker.region.TopicSubscription , the heap has more or less dropped to the old baseline but I will follow up later as it still may be too early to tell. The dispatched array is cleaned via org.apache.activemq.broker.region.TopicSubscription#updateStatsOnAck(org.apache.activemq.command.MessageAck) which is invoked every x thousand messages, the problem here is that in our cluster we have roughly 7300 consumers and 900 producers which is clearly not going to scale as well as it did in 5.8.0..&lt;/p&gt;</comment>
                            <comment id="16418160" author="johno" created="Wed, 28 Mar 2018 21:36:47 +0000"  >&lt;p&gt;Confirmed the regression is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5837&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5837&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16418213" author="christopher.l.shannon" created="Wed, 28 Mar 2018 22:39:14 +0000"  >&lt;p&gt;The reason why this has never come up is because you are running on a very small JVM for the number of consumers and producers you have.&#160; 600 megabytes of memory is pretty small given the number of producers and consumers is over 8000.&#160; So yes the feature is not going to scale without proper memory allocation. The short term solution is to simply increase your heap size.&lt;/p&gt;

&lt;p&gt;A more permanent fix is to add a flag to the policy configuration to disable the inflight statistics on TopicSubscription so that the dispatched array doesn&apos;t collect objects anymore (basically what you already did).&#160; This is something that can be added for the next patch release so you can disable the statistics.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16418237" author="johno" created="Wed, 28 Mar 2018 23:24:29 +0000"  >&lt;p&gt;I strongly disagree that 600 megabytes of memory is too little for over 8k producers and consumers, prior to 5.15.3 the JVM took an average of 100mb of heap (150mb max).&lt;/p&gt;

&lt;p&gt;To be brutally honest I believe the implementation is broken, apart from it taking so much memory, it should not be storing the actual messages and their payloads for so long (or even at all for that matter) even if it is a non persistent topic, the consumer is not slow and the messages have been delivered the messages remain in the dispatched array until updateStatsOnAck is invoked which is seldom..&lt;/p&gt;</comment>
                            <comment id="16418693" author="johno" created="Thu, 29 Mar 2018 10:10:22 +0000"  >&lt;p&gt;In addition, how are the inflight stats even remotely accurate if the broker keeps processed messages in memory..? They should be removed immediately to be usable.&lt;/p&gt;</comment>
                            <comment id="16418745" author="christopher.l.shannon" created="Thu, 29 Mar 2018 10:46:09 +0000"  >&lt;p&gt;In flight messages by definition are messages that have not been processed but have simply been dispatched to a consumer.&#160; Messages are not &quot;processed&quot; until a consumer acknowledges the message so the broker does not drop a message until then.&#160;&#160;&lt;/p&gt;

&lt;p&gt;This dispatched list is not new.&#160; It is only new for a TopicSubscription.&#160; It has been used for 10 years for Queue subscriptions and Durable subscriptions to track in flight messages.&#160; See&#160;&lt;a href=&quot;https://github.com/apache/activemq/blame/master/activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java#L217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blame/master/activemq-broker/src/main/java/org/apache/activemq/broker/region/PrefetchSubscription.java#L217&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16418748" author="christopher.l.shannon" created="Thu, 29 Mar 2018 10:47:59 +0000"  >&lt;p&gt;The other option that should reduce the amount of messages in that list would be to lower your prefetch configuration for your consumers.&lt;/p&gt;</comment>
                            <comment id="16418775" author="johno" created="Thu, 29 Mar 2018 11:11:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;In flight messages by definition are messages that have not been processed but have simply been dispatched to a consumer. Messages are not &quot;processed&quot; until a consumer acknowledges the message so the broker does not drop a message until then.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So based on your definition shouldn&apos;t updateStatsOnAck be invoked in here? (just a shot in the dark haven&apos;t had time to test it)&lt;/p&gt;

&lt;p&gt;org.apache.activemq.broker.region.TopicSubscription#acknowledge&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ack.isDeliveredAck()) {
    &lt;span class=&quot;code-comment&quot;&gt;// Message was delivered but not acknowledged: update pre-fetch counters.
&lt;/span&gt;    expandPrefetchExtension(ack.getMessageCount());
    &lt;span class=&quot;code-comment&quot;&gt;// missing call to updateStatsOnAck?
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ack.isRedeliveredAck()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16418815" author="christopher.l.shannon" created="Thu, 29 Mar 2018 11:39:23 +0000"  >&lt;p&gt;No because that method is only updating stats when the ack signals the message is being dropped because it was handled properly which means either a standard/individual ack (consumer processed it) or expired ack (broker is dropping it because it expired).&#160; For delivered acks it&apos;s just saying that a client received it but&#160;is acking later&#160;so the inflight stats are not processed (as the message is still in flight and not actually acked) and only the prefetch is adjusted.&#160; I think that happens when using acknowledge batch mode.&lt;/p&gt;

&lt;p&gt;I&apos;m working on a patch now to disable tracking of those messages in the pendingList because it&apos;s not necessary for TopicSubscriptions except for the metrics case so it can be optionally disabled.&lt;/p&gt;</comment>
                            <comment id="16418864" author="johno" created="Thu, 29 Mar 2018 12:04:57 +0000"  >&lt;p&gt;Given the only thing the dispatched list is used for is metrics why not just store the message id and payload size?  &lt;/p&gt;</comment>
                            <comment id="16418927" author="christopher.l.shannon" created="Thu, 29 Mar 2018 12:47:16 +0000"  >&lt;p&gt;I think that should be doable.&#160; I think we would need to include the Destination as well but basically could store a list of a new type of object for dispatched messages and that new object would just contain the message id, size, and destination&#160;reference&#160;(which is already tracked in memory in another map).&#160; I&apos;ll work on a patch.&lt;/p&gt;</comment>
                            <comment id="16418936" author="christopher.l.shannon" created="Thu, 29 Mar 2018 12:52:29 +0000"  >&lt;p&gt;Also it&apos;s only going to be possible for now TopicSubscriptions.&#160; For Queue and Durable subscriptions the message reference is used in a lot more cases from that dispatched list and is not going to be simple to remove it.&#160; But since this is only a problem for you in the TopicSubscription case that should be ok.&lt;/p&gt;</comment>
                            <comment id="16418955" author="jira-bot" created="Thu, 29 Mar 2018 13:02:04 +0000"  >&lt;p&gt;Commit f69fd6f0020290752a7424479821c22d94f9b8b7 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f69fd6f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f69fd6f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - Reduce memory footprint for inflight statistics&lt;/p&gt;

&lt;p&gt;For the TopicSubscription case we can reduce the inflight statistics&lt;br/&gt;
memory footprint by not storing the entire message reference for in&lt;br/&gt;
flight messages and instead just a subset of the information needed.&lt;/p&gt;</comment>
                            <comment id="16418956" author="jira-bot" created="Thu, 29 Mar 2018 13:02:31 +0000"  >&lt;p&gt;Commit cae382063eb296eb6aef6e0952f691aa80c33031 in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=cae3820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=cae3820&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - Reduce memory footprint for inflight statistics&lt;/p&gt;

&lt;p&gt;For the TopicSubscription case we can reduce the inflight statistics&lt;br/&gt;
memory footprint by not storing the entire message reference for in&lt;br/&gt;
flight messages and instead just a subset of the information needed.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f69fd6f0020290752a7424479821c22d94f9b8b7)&lt;/p&gt;</comment>
                            <comment id="16418993" author="johno" created="Thu, 29 Mar 2018 13:36:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; I think that makes sense, we heavily use TopicSubscription for highspeed pubsub and this performance regression is blocking us from upgrading.&lt;/p&gt;</comment>
                            <comment id="16418995" author="johno" created="Thu, 29 Mar 2018 13:37:21 +0000"  >&lt;p&gt;Now that we&apos;ve determined the actual cause I will try and create a standalone reproducer to verify the patch works as expected or if we also require the config to disable inflight stats.&lt;/p&gt;</comment>
                            <comment id="16418999" author="christopher.l.shannon" created="Thu, 29 Mar 2018 13:39:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johno&quot; class=&quot;user-hover&quot; rel=&quot;johno&quot;&gt;johno&lt;/a&gt; - Sounds good, hopefully this patch reduces the memory usage enough for your use case.&#160; Otherwise I have a patch I created to disable the stats tracking that I can also commit.&lt;/p&gt;</comment>
                            <comment id="16419387" author="johno" created="Thu, 29 Mar 2018 16:59:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; could I trouble you for the patch so I can test that too? Unfortunately even with the latest changes to reduce the inflight statistics memory footprint the memory is not ideal.&lt;/p&gt;</comment>
                            <comment id="16419391" author="johno" created="Thu, 29 Mar 2018 17:03:05 +0000"  >&lt;p&gt;I attached the reproducer and yourkit profiler screenshots showing the heap usage.&lt;/p&gt;</comment>
                            <comment id="16419438" author="jira-bot" created="Thu, 29 Mar 2018 17:25:49 +0000"  >&lt;p&gt;Commit 65b0f2ad0d48845ad54681ac0eff832de122e2a9 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=65b0f2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=65b0f2a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - Add flag to disable TopicSubscription in flight stats&lt;/p&gt;

&lt;p&gt;To save memory usage in some use cases add a new flag to PolicyEntry&lt;br/&gt;
called useTopicSubscriptionInflightStats to allow disabling the&lt;br/&gt;
inflight stats&lt;/p&gt;</comment>
                            <comment id="16419440" author="jira-bot" created="Thu, 29 Mar 2018 17:26:29 +0000"  >&lt;p&gt;Commit 21a594c8e817ebb2090c1de016c5bb1f4f905e08 in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=21a594c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=21a594c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - Add flag to disable TopicSubscription in flight stats&lt;/p&gt;

&lt;p&gt;To save memory usage in some use cases add a new flag to PolicyEntry&lt;br/&gt;
called useTopicSubscriptionInflightStats to allow disabling the&lt;br/&gt;
inflight stats&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 65b0f2ad0d48845ad54681ac0eff832de122e2a9)&lt;/p&gt;</comment>
                            <comment id="16419444" author="christopher.l.shannon" created="Thu, 29 Mar 2018 17:27:35 +0000"  >&lt;p&gt;There&apos;s a new flag on a policy that you can set called&#160;useTopicSubscriptionInflightStats.&#160; It defaults to true but if you set it to false then it will not store those objects in the dispatched list and skip that metric.&lt;/p&gt;</comment>
                            <comment id="16419450" author="johno" created="Thu, 29 Mar 2018 17:30:59 +0000"  >&lt;p&gt;&lt;del&gt;Does the xsd need to be updated too or is that generated automatically?&lt;/del&gt; I&apos;ll create another snapshot and check it out.&lt;/p&gt;</comment>
                            <comment id="16419455" author="christopher.l.shannon" created="Thu, 29 Mar 2018 17:35:02 +0000"  >&lt;p&gt;It gets generated automatically during the maven build.&lt;/p&gt;</comment>
                            <comment id="16419459" author="johno" created="Thu, 29 Mar 2018 17:39:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; confirmed disabling inflight stats does the trick, thanks for the quick fix!&lt;/p&gt;</comment>
                            <comment id="16419463" author="johno" created="Thu, 29 Mar 2018 17:42:23 +0000"  >&lt;p&gt;Do you have a rough idea of when 5.15.4 will be cut?&lt;/p&gt;</comment>
                            <comment id="16419486" author="christopher.l.shannon" created="Thu, 29 Mar 2018 17:52:48 +0000"  >&lt;p&gt;There&apos;s not really a definitive date but there&apos;s enough fixes that we could probably do one in the next week or two.&lt;/p&gt;</comment>
                            <comment id="16420314" author="johno" created="Fri, 30 Mar 2018 09:16:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; looks like an extra bracket snuck into PolicyEntry (line 1104) and missing closing bracket for setUseTopicSubscriptionInflightStats on the activemq-5.15.x branch which causes a compile error.&lt;/p&gt;</comment>
                            <comment id="16420358" author="jira-bot" created="Fri, 30 Mar 2018 10:30:28 +0000"  >&lt;p&gt;Commit 9346fb3638f293b585560051cd57ef7e513c0d4a in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9346fb3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9346fb3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - Fix compilation&lt;/p&gt;</comment>
                            <comment id="16420361" author="jira-bot" created="Fri, 30 Mar 2018 10:31:30 +0000"  >&lt;p&gt;Commit a0a240372fda05675055cc29f35cb60a4a0311af in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a0a2403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a0a2403&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - fix compilation attempt 2&lt;/p&gt;</comment>
                            <comment id="16420362" author="jira-bot" created="Fri, 30 Mar 2018 10:35:37 +0000"  >&lt;p&gt;Commit 84126d8a7a7eb9faf44bef687dcf647e84173f22 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=84126d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=84126d8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - test fix for AMQ6477 test&lt;/p&gt;

&lt;p&gt;Need to remove the portion of the test that looks at the dispatched list&lt;br/&gt;
for TopicSubscription as that class no longer tracks message references&lt;/p&gt;</comment>
                            <comment id="16420363" author="jira-bot" created="Fri, 30 Mar 2018 10:36:07 +0000"  >&lt;p&gt;Commit 9683ae3f5dacdbcde470e9bc8cbb5263e465560c in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9683ae3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9683ae3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6940&quot; title=&quot;Significant memory footprint increase from 5.8.0 to 5.15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6940&quot;&gt;&lt;del&gt;AMQ-6940&lt;/del&gt;&lt;/a&gt; - test fix for AMQ6477 test&lt;/p&gt;

&lt;p&gt;Need to remove the portion of the test that looks at the dispatched list&lt;br/&gt;
for TopicSubscription as that class no longer tracks message references&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 84126d8a7a7eb9faf44bef687dcf647e84173f22)&lt;/p&gt;</comment>
                            <comment id="16420364" author="christopher.l.shannon" created="Fri, 30 Mar 2018 10:36:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johno&quot; class=&quot;user-hover&quot; rel=&quot;johno&quot;&gt;johno&lt;/a&gt; - Should be fixed now, Jenkins also caught a test failure that I fixed that was a side effect from the path&lt;/p&gt;</comment>
                            <comment id="16420644" author="johno" created="Fri, 30 Mar 2018 16:02:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; thanks again!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12916586" name="activemq.xml" size="3781" author="johno" created="Wed, 28 Mar 2018 10:20:06 +0000"/>
                            <attachment id="12916860" name="amq-testing.tar.xz" size="18020" author="johno" created="Thu, 29 Mar 2018 17:18:14 +0000"/>
                            <attachment id="12916857" name="amq_5.16.0-SNAPSHOT.png" size="51643" author="johno" created="Thu, 29 Mar 2018 17:02:09 +0000"/>
                            <attachment id="12916856" name="amq_5.8.0.png" size="54865" author="johno" created="Thu, 29 Mar 2018 17:02:09 +0000"/>
                            <attachment id="12916635" name="amq_heap2.png" size="63637" author="johno" created="Wed, 28 Mar 2018 15:32:42 +0000"/>
                            <attachment id="12916585" name="messageid_analysis.png" size="259929" author="johno" created="Wed, 28 Mar 2018 10:20:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rvtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>