<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:52:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3694] Blocked/Slow advisory consumers in duplex network connector, eventually breaks request/reply with temps</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3694</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;In duplex network connectors, the destinations and temp advisories are not acked. This leads to a buildup of advisory messages on the bridging broker and missing advisories on the target.&lt;br/&gt;
In the main, when the numbers of destinations is static and there are no temp queues per roundtrip this goes unnoticed.&lt;br/&gt;
If request/reply is used over a network with a temp queue per request (a bit of an anti pattern, they are typically per connection), the problem is quickly visible with the default prefetch. Very quickly advisories for temp queue creation and producer consumers get blocked and communication comes to a halt. &lt;br/&gt;
The root cause is that advisories are not acked in the duplex case so we can only get 750 (.75*prefetch) of them before we block.&lt;/p&gt;

&lt;p&gt;symptom&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.jms.JMSException: The destination temp-queue:&lt;span class=&quot;code-comment&quot;&gt;//ID:xxx-xxx-0:7:17 does not exist.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; or replies do not get propagated back because the consumer advisory is blocked.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540729">AMQ-3694</key>
            <summary>Blocked/Slow advisory consumers in duplex network connector, eventually breaks request/reply with temps</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>activemq</label>
                            <label>blocking</label>
                            <label>networkconnector</label>
                            <label>requestreply</label>
                            <label>temp</label>
                    </labels>
                <created>Wed, 1 Feb 2012 15:18:51 +0000</created>
                <updated>Thu, 20 Jun 2013 13:37:07 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 16:18:00 +0000</resolved>
                                    <version>5.5.0</version>
                                    <fixVersion>5.6.0</fixVersion>
                                    <component>Broker</component>
                    <component>Connector</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13197931" author="gtully" created="Wed, 1 Feb 2012 16:18:00 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1239188&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1239188&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;advisories are now acked in the duplex case, on a .75*prefetch basis like in the non duplex case.&lt;/p&gt;</comment>
                            <comment id="13688902" author="j@chicago" created="Thu, 20 Jun 2013 06:06:11 +0000"  >&lt;p&gt;Does this problem affect 5.3.1 as well?  We are thinking about upgrading....&lt;br/&gt;
08:55:25,314 - &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Transport: tcp:///10.2.50.44:61616&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;WARN&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;TransportConnection.java:290&amp;#93;&lt;/span&gt; : Async error occurred: javax.jms.JMSException: The destination temp-queue://ID:xxxxx-37275-1371171214828-0:2171:1 does not exist.&lt;/p&gt;</comment>
                            <comment id="13689240" author="ceposta" created="Thu, 20 Jun 2013 13:37:07 +0000"  >&lt;p&gt;Yes, the 5.3.1 is affected. In general, there has been a lot of hardening around network of brokers and temporary destinations since 5.3.1. Try out your use cases on the latest 5.8.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0agq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>