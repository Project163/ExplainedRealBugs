<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:51:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3536] Virtual Topic Subscriber and Individual Dead Letter Queue Handling</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3536</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Summary: &lt;br/&gt;
Transactional Acknowledgement with Virtual Topic / Subscriber Queues does not indicate which subscriber had a problem consuming the messages. Messages are simply delivered to Topic specific DLQ rather than to the Subscriber/Consumer specific DLQ.&lt;/p&gt;

&lt;p&gt;Steps to create issue:&lt;/p&gt;

&lt;p&gt;Configure the Individual Dead Letter Queue policy in Fuse Message Broker. &lt;br/&gt;
Next create an ActiveMQ Virtual Topic with Subscriber Queue(s).&lt;br/&gt;
Send messages to Virtual Topic&lt;br/&gt;
Rollback/abort ack for one message (consistently) until this message gets delivered to the dead letter queue.&lt;/p&gt;

&lt;p&gt;Result:&lt;br/&gt;
Message is sent to the Topic Specific Dead Letter Queue rather than to the DLQ specific to the Subscriber Queue.&lt;/p&gt;


&lt;p&gt;Resolution:&lt;br/&gt;
Patch and unit test are are attached.&lt;br/&gt;
This test verifies that all undelivered messages sent to a consumers listening on a queue associated with a virtual topic with be forwarded to separate DLQ&apos;s.&lt;/p&gt;

&lt;p&gt;Note that the broker config, Individual Dead Letter Strategy, needs to have the enable audit set to false to allows duplicate messages sent from a topic to individual consumers to be forwarded to the DLQ&apos;s.&lt;/p&gt;

&lt;p&gt;&amp;lt;deadLetterStrategy&amp;gt;&lt;br/&gt;
	&amp;lt;bean xmlns=&quot;http://www.springframework.org/schema/beans&quot; class=&quot;org.apache.activemq.broker.region.policy.IndividualDeadLetterStrategy&quot;&amp;gt;&lt;br/&gt;
        	&amp;lt;property name=&quot;useQueueForQueueMessages&quot; value=&quot;true&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
                &amp;lt;property name=&quot;processNonPersistent&quot; value=&quot;true&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
                &amp;lt;property name=&quot;processExpired&quot; value=&quot;false&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
                &amp;lt;property name=&quot;enableAudit&quot; value=&quot;false&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
        &amp;lt;/bean&amp;gt;&lt;br/&gt;
&amp;lt;/deadLetterStrategy&amp;gt;&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Windows XP&lt;br/&gt;
Fuse Message Broker version ActiveMQ trunk &lt;/p&gt;</environment>
        <key id="12526689">AMQ-3536</key>
            <summary>Virtual Topic Subscriber and Individual Dead Letter Queue Handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="smacey">Susan Macey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2011 16:37:26 +0000</created>
                <updated>Fri, 14 Oct 2011 13:08:32 +0000</updated>
                            <resolved>Fri, 14 Oct 2011 13:08:32 +0000</resolved>
                                    <version>5.5.0</version>
                                    <fixVersion>5.6.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13125183" author="smacey" created="Tue, 11 Oct 2011 16:48:18 +0000"  >&lt;p&gt;Patch + Unit test&lt;/p&gt;</comment>
                            <comment id="13127146" author="tabish121" created="Thu, 13 Oct 2011 23:39:31 +0000"  >&lt;p&gt;The patch seems to reference a file &quot;activemq_dlq.xml&quot; that doesn&apos;t exist on trunk.  Think you can update the patch to add a complete file, or attach the necessary file here?&lt;/p&gt;</comment>
                            <comment id="13127182" author="smacey" created="Fri, 14 Oct 2011 00:37:08 +0000"  >&lt;p&gt;Hi Timothy, I&apos;ve attached the file activemq_dlq.xml.&lt;/p&gt;</comment>
                            <comment id="13127507" author="tabish121" created="Fri, 14 Oct 2011 13:08:32 +0000"  >&lt;p&gt;Patch applied, thanks for the great test case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498625" name="VirtualDLQPatch.patch" size="23327" author="smacey" created="Tue, 11 Oct 2011 16:48:17 +0000"/>
                            <attachment id="12498963" name="activemq_dlq.xml" size="3535" author="smacey" created="Fri, 14 Oct 2011 00:37:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aiqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>