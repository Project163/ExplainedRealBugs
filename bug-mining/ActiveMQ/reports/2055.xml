<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:01:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4791] [org.apache.activemq.ActiveMQConnection] dispatch paused, waiting for outstanding dispatch interruption processing (1) to complete..</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4791</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Race condition between consumer close and transport calculation of outstanding interruption processing. Transport thinks there are more responses required before allowing dispatch due to a mis count of active consumers.&lt;/p&gt;

&lt;p&gt;NOTE: This is issue was initially reported using the Spring DMLC with the AMQ rar deployed in a J2EE container. However it can be replicated the issue with a simple JMS client creating a new consumer and closing the consumer for every call to consumer.receive(1000).&lt;/p&gt;

&lt;p&gt;The client AMQ connection appears to stop dispatching messages to the consumer and continuously logs the following message&lt;/p&gt;

&lt;p&gt;WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.activemq.ActiveMQConnection&amp;#93;&lt;/span&gt; (ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@51487) dispatch paused, waiting for outstanding dispatch interruption processing (1) to complete..&lt;br/&gt;
Thread appears to remain in following state &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
- sun.misc.Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=20, line=226 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=122, line=1033 (Interpreted frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=25, line=1326 (Compiled frame)
 - java.util.concurrent.CountDownLatch.await(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, java.util.concurrent.TimeUnit) @bci=10, line=282 (Compiled frame)
 - org.apache.activemq.ActiveMQConnection.waitForTransportInterruptionProcessingToComplete() @bci=82, line=2455 (Compiled frame)
 - org.apache.activemq.ActiveMQConnection$3.processMessageDispatch(org.apache.activemq.command.MessageDispatch) @bci=4, line=1841 (Compiled frame)
 - org.apache.activemq.command.MessageDispatch.visit(org.apache.activemq.state.CommandVisitor) @bci=2, line=113 (Compiled frame)
 - org.apache.activemq.ActiveMQConnection.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=29, line=1838 (Compiled frame)
 - org.apache.activemq.transport.ResponseCorrelator.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=172, line=116 (Compiled frame)
 - org.apache.activemq.transport.MutexTransport.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=52, line=50 (Compiled frame)
 - org.apache.activemq.transport.failover.FailoverTransport$3.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=148, line=203 (Compiled frame)
 - org.apache.activemq.transport.WireFormatNegotiator.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=29, line=113 (Compiled frame)
 - org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=156, line=288 (Compiled frame)
 - org.apache.activemq.transport.TransportSupport.doConsume(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) @bci=16, line=83 (Compiled frame)
 - org.apache.activemq.transport.tcp.TcpTransport.doRun() @bci=7, line=214 (Compiled frame)
 - org.apache.activemq.transport.tcp.TcpTransport.run() @bci=47, line=196 (Compiled frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=722 (Interpreted frame) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12672893">AMQ-4791</key>
            <summary>[org.apache.activemq.ActiveMQConnection] dispatch paused, waiting for outstanding dispatch interruption processing (1) to complete..</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>DMLC</label>
                            <label>RAR</label>
                            <label>failover</label>
                    </labels>
                <created>Tue, 8 Oct 2013 20:25:01 +0000</created>
                <updated>Tue, 8 Oct 2013 20:30:23 +0000</updated>
                            <resolved>Tue, 8 Oct 2013 20:30:23 +0000</resolved>
                                    <version>5.8.0</version>
                                    <fixVersion>5.9.0</fixVersion>
                                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13789657" author="gtully" created="Tue, 8 Oct 2013 20:30:23 +0000"  >&lt;p&gt;fix in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/dc0291b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/dc0291b2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1os07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>