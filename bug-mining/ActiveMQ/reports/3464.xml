<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:59:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9418] Support mapping jakarta -&gt; javax exceptions in openwire</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9418</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;For javax clients to connect to jakarta-based broker, we need to map exceptions to the javax namespace from jakarta-based broker-side exceptions and vice versa for jakarta clients talking to a javax broker.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13564540">AMQ-9418</key>
            <summary>Support mapping jakarta -&gt; javax exceptions in openwire</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="mattrpav">Matt Pavlovich</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2024 19:10:20 +0000</created>
                <updated>Tue, 16 Jan 2024 20:58:06 +0000</updated>
                            <resolved>Tue, 16 Jan 2024 20:40:49 +0000</resolved>
                                                    <fixVersion>6.1.0</fixVersion>
                    <fixVersion>5.18.4</fixVersion>
                    <fixVersion>5.17.7</fixVersion>
                    <fixVersion>5.16.8</fixVersion>
                    <fixVersion>6.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17806228" author="christopher.l.shannon" created="Fri, 12 Jan 2024 22:43:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6379&lt;/a&gt; added support for Java clients starting with 5.14.0 to send their client version which could likely be used to detect the version and to do a mapping. We could also obviously assume for any future OpenWire versions that it would be Jakarta or maybe change the exception handling entirely (use something like error codes and decouple it).  For future clients we could even add an extra piece of metadata to the negotiation to signal they want Jakarta exceptions but getting a way from exception types altogether might be nice. There are definitely a few options to fix it for new clients but for legacy we have to handle it either way.&lt;/p&gt;

&lt;p&gt;A new OpenWire version will be needed for shared subscription support so we can make this better going forward for sure in some way. But to handle the legacy stuff maybe we could do something like that following:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;If the OpenWire version is &amp;gt;12 (new) then assume Jakarta&lt;/li&gt;
	&lt;li&gt;If OpenWire version is &amp;lt;= 12 then check if the client reported that it is 5.x or 6.x. This also goes for the jakarta client that we added for 5.18.x (guess we need to check that too). If it&apos;s a legacy client then we can do the mapping to javax exception types.&lt;/li&gt;
	&lt;li&gt;If OpenWire version &amp;lt;=12 and no client version is sent then we just assume legacy and send back javax exception types as that means they are a very old client or a non-java client so would be expecting javax. Any non java clients would need to send metadata to signal they want jakarta (or use a new upgraded Openwire version).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17807410" author="christopher.l.shannon" created="Tue, 16 Jan 2024 19:02:04 +0000"  >&lt;p&gt;I decided to go with a client side approach as described here &lt;a href=&quot;https://lists.apache.org/thread/pr2ty60xx54tm3tfnfb1k2hbrmvm59no&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/pr2ty60xx54tm3tfnfb1k2hbrmvm59no&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We can provide updated clients (5.18.x, 6.0.x, etc) that can do the conversion to the correct JMS package if the wrong type is received which is much simpler than the broker having to try and figure out what to send back and doesn&apos;t require the broker to keep both versions on the classpath. The downside is any client that wants to handle the conversion needs an upgrade but I think that is ok as long as we document it. Any other clients will just get back a generic JMSException type so would still work just with a less specific exception. The main use case would be for users that have a client or a broker that is mismatched for whatever reason (maybe stuck on an old JDK version, etc) so one is using jakarta and one is using javax. In this case they can still upgrade to the latest versions of that client library line if they want the conversion to work (5.17.x or 5.18.x or whatever)  and we can document this on the website for people looking at compatibility between brokers. This obviously means NMS clients or other non-java clients would need an update as well.&lt;/p&gt;

&lt;p&gt;Going forward with a new version of OpenWire (maybe v13 or v14 etc) ideally we would replace the ExceptionResponse command with a new version (ExceptionResponseV2 or whatever we want to call it) and it can use error codes and allow the client to decide how to convert to exceptions so we are not having to send them back. This also prevents future security issues like the one we recently patched.&lt;/p&gt;</comment>
                            <comment id="17807423" author="jira-bot" created="Tue, 16 Jan 2024 20:22:08 +0000"  >&lt;p&gt;Commit b92479cd2ec0913b6dae03a4789bdceae58b57b5 in activemq&apos;s branch refs/heads/activemq-5.18.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b92479cd2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b92479cd2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting jakarta jms exceptions to javax&lt;/p&gt;

&lt;p&gt;This fixes the OpenWire v12 marshaller so that if an exception is&lt;br/&gt;
received by a jakarta based broker the client will convert back to a&lt;br/&gt;
javax jms exception type.&lt;/p&gt;

&lt;p&gt;This commit also updates activemq-client-jakarta to do the proper&lt;br/&gt;
mapping in the reverse.&lt;/p&gt;</comment>
                            <comment id="17807424" author="jira-bot" created="Tue, 16 Jan 2024 20:22:09 +0000"  >&lt;p&gt;Commit ef9c0bd5971e0da615e86ad7fdbb80dd99a5b6f7 in activemq&apos;s branch refs/heads/activemq-5.18.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ef9c0bd59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ef9c0bd59&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #1140 from cshannon/jakarta-javax-exception-conversion&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting jakarta jms exceptions to javax&lt;/p&gt;</comment>
                            <comment id="17807426" author="jira-bot" created="Tue, 16 Jan 2024 20:30:36 +0000"  >&lt;p&gt;Commit be64fdba511803e93312e57040e5776a66cf7be2 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=be64fdba5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=be64fdba5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting javax jms exceptions to jakarta&lt;/p&gt;

&lt;p&gt;This fixes the OpenWire v12 marshaller so that if an exception is&lt;br/&gt;
received by a javax based broker the client will convert back to a&lt;br/&gt;
jakarta jms exception type.&lt;/p&gt;</comment>
                            <comment id="17807427" author="jira-bot" created="Tue, 16 Jan 2024 20:30:37 +0000"  >&lt;p&gt;Commit a2bf5b8adb8669a1fa020519cfd9a0fdae2f8787 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a2bf5b8ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a2bf5b8ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #1141 from cshannon/javax-jakarta-exception-conversion&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting javax jms exceptions to jakarta&lt;/p&gt;</comment>
                            <comment id="17807428" author="jira-bot" created="Tue, 16 Jan 2024 20:31:56 +0000"  >&lt;p&gt;Commit 7a3db6f1dc569888a4f8204fda1a713df0eb1e38 in activemq&apos;s branch refs/heads/activemq-6.0.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=7a3db6f1d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=7a3db6f1d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting javax jms exceptions to jakarta&lt;/p&gt;

&lt;p&gt;This fixes the OpenWire v12 marshaller so that if an exception is&lt;br/&gt;
received by a javax based broker the client will convert back to a&lt;br/&gt;
jakarta jms exception type.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit be64fdba511803e93312e57040e5776a66cf7be2)&lt;/p&gt;</comment>
                            <comment id="17807430" author="jira-bot" created="Tue, 16 Jan 2024 20:34:26 +0000"  >&lt;p&gt;Commit da27536132fb99427019b7c43bbb11458c339bc6 in activemq&apos;s branch refs/heads/activemq-5.17.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=da2753613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=da2753613&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting jakarta jms exceptions to javax&lt;/p&gt;

&lt;p&gt;This fixes the OpenWire v12 marshaller so that if an exception is&lt;br/&gt;
received by a jakarta based broker the client will convert back to a&lt;br/&gt;
javax jms exception type.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b92479cd2ec0913b6dae03a4789bdceae58b57b5)&lt;/p&gt;</comment>
                            <comment id="17807431" author="jira-bot" created="Tue, 16 Jan 2024 20:36:13 +0000"  >&lt;p&gt;Commit cd201c0f7522b2054dfe7babcac0787af99b22ee in activemq&apos;s branch refs/heads/activemq-5.16.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=cd201c0f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=cd201c0f7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9418&quot; title=&quot;Support mapping jakarta -&amp;gt; javax exceptions in openwire&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9418&quot;&gt;&lt;del&gt;AMQ-9418&lt;/del&gt;&lt;/a&gt; - Support converting jakarta jms exceptions to javax&lt;/p&gt;

&lt;p&gt;This fixes the OpenWire v12 marshaller so that if an exception is&lt;br/&gt;
received by a jakarta based broker the client will convert back to a&lt;br/&gt;
javax jms exception type.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b92479cd2ec0913b6dae03a4789bdceae58b57b5)&lt;/p&gt;</comment>
                            <comment id="17807433" author="christopher.l.shannon" created="Tue, 16 Jan 2024 20:40:37 +0000"  >&lt;p&gt;Another option for Openwire v13 for conversion is to just update the ExceptionResponse to no longer have exception type (just code and message) and push the conversion logic into the marshallers for old version so the broker doesn&apos;t need to worry about the conversion&lt;/p&gt;</comment>
                            <comment id="17807441" author="christopher.l.shannon" created="Tue, 16 Jan 2024 20:58:06 +0000"  >&lt;p&gt;One more thing to do is to migrate these changes to the &lt;a href=&quot;https://issues.apache.org/jira/projects/OPENWIRE/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;OPENWIRE&lt;/a&gt; project since that will be used for new versions going forward&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mq3c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>