<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:44:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7013] XATransactionID hash function may generate duplicates.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7013</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;XATransactionID hash function may generate duplicates.&lt;/p&gt;

&lt;p&gt;Scenario:&lt;/p&gt;

&lt;p&gt;XID formatId, GlobalTransaction, and BranchQualifier values are identical for many entries. We need to use a better hash function to avoid populating a map with many entries in the same bucket (results in bucket having O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; performance on recovery).&lt;/p&gt;

&lt;p&gt;Example using existing Hash Function:&lt;br/&gt;
2018-07-18 06:13:29,866 | INFO&#160; | Recovering from the journal @1:28 | org.apache.activemq.store.kahadb.MessageDatabase | main&lt;br/&gt;
2018-07-18 06:23:04,070 | INFO&#160; | @2:484592, 100000 entries recovered .. | org.apache.activemq.store.kahadb.MessageDatabase | main&lt;br/&gt;
2018-07-18 06:23:04,099 | INFO&#160; | Recovery replayed 100453 operations from the journal in 574.233 seconds. | org.apache.activemq.store.kahadb.MessageDatabase | main&#8232;&lt;/p&gt;

&lt;p&gt;Using JenkinsHash:&lt;br/&gt;
2018-07-18 10:58:43,713 | INFO&#160; | Recovering from the journal @1:28 | org.apache.activemq.store.kahadb.MessageDatabase | main&lt;br/&gt;
2018-07-18 10:58:51,302 | INFO&#160; | @2:484592, 100000 entries recovered .. | org.apache.activemq.store.kahadb.MessageDatabase | main&lt;br/&gt;
2018-07-18 10:58:51,329 | INFO&#160; | Recovery replayed 100453 operations from the journal in 7.618 seconds. | org.apache.activemq.store.kahadb.MessageDatabase | main&lt;/p&gt;</description>
                <environment></environment>
        <key id="13172927">AMQ-7013</key>
            <summary>XATransactionID hash function may generate duplicates.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgoodyear">Jamie Mark Goodyear</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jul 2018 13:58:43 +0000</created>
                <updated>Wed, 18 Jul 2018 21:16:33 +0000</updated>
                            <resolved>Wed, 18 Jul 2018 16:43:53 +0000</resolved>
                                                    <fixVersion>5.15.5</fixVersion>
                    <fixVersion>5.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16547978" author="jgoodyear" created="Wed, 18 Jul 2018 15:43:50 +0000"  >&lt;p&gt;Please see PR&apos;d unit test:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/activemq/pull/288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/288&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The hash function was bad, returning 131077.&lt;/p&gt;

&lt;p&gt;After discussing with Chrino on apache-activemq IRC room, decided to try JenkinsHash to perform hash generation.&lt;br/&gt;
Now we get unique hashes in this scenario.&lt;/p&gt;</comment>
                            <comment id="16548048" author="jira-bot" created="Wed, 18 Jul 2018 16:37:19 +0000"  >&lt;p&gt;Commit 3f83bfcae25dc807a929a5135a5631729493aeb8 in activemq&apos;s branch refs/heads/activemq-5.15.x from jgoodyear&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=3f83bfc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=3f83bfc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Introduce JenkinsHash to XATransactionID&lt;/p&gt;</comment>
                            <comment id="16548049" author="jira-bot" created="Wed, 18 Jul 2018 16:37:20 +0000"  >&lt;p&gt;Commit 7ba7bfd9cd9d070840a35ed71422eb4d6e60ab1e in activemq&apos;s branch refs/heads/activemq-5.15.x from jgoodyear&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7ba7bfd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7ba7bfd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Adding unit test&lt;/p&gt;</comment>
                            <comment id="16548050" author="jira-bot" created="Wed, 18 Jul 2018 16:37:22 +0000"  >&lt;p&gt;Commit 87065f5019b5b363aa3e60b2d76f0127c8e89dc8 in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=87065f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=87065f5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; This closes #288&lt;/p&gt;</comment>
                            <comment id="16548066" author="jira-bot" created="Wed, 18 Jul 2018 16:43:14 +0000"  >&lt;p&gt;Commit e9a64b1c72cf77b09f57f89f120b8995d3ed525b in activemq&apos;s branch refs/heads/master from jgoodyear&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e9a64b1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e9a64b1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Introduce JenkinsHash to XATransactionID&lt;/p&gt;</comment>
                            <comment id="16548067" author="jira-bot" created="Wed, 18 Jul 2018 16:43:15 +0000"  >&lt;p&gt;Commit 063d21f88062a09b7efc1669608cbbacdeb11aac in activemq&apos;s branch refs/heads/master from jgoodyear&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=063d21f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=063d21f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Adding unit test&lt;/p&gt;</comment>
                            <comment id="16548068" author="jgenender" created="Wed, 18 Jul 2018 16:43:53 +0000"  >&lt;p&gt;Great patch, thanks Jamie!&lt;/p&gt;</comment>
                            <comment id="16548407" author="jira-bot" created="Wed, 18 Jul 2018 21:13:11 +0000"  >&lt;p&gt;Commit 7313d72c6b67968d84959f6aac186bfead17d6a2 in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7313d72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7313d72&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Added final for thread safety&lt;/p&gt;</comment>
                            <comment id="16548411" author="jira-bot" created="Wed, 18 Jul 2018 21:16:33 +0000"  >&lt;p&gt;Commit 7f4851f31c718ec076a51e296766c796d4809df6 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7f4851f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7f4851f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7013&quot; title=&quot;XATransactionID hash function may generate duplicates.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7013&quot;&gt;&lt;del&gt;AMQ-7013&lt;/del&gt;&lt;/a&gt; Added final for thread safety&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w0vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>