<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:34:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6214] JAAS bug that causes user group membership not reloaded dynamically when reload is true</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6214</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;There is a bug in JAAS that caused users group membership not dynamically loading at runtime. Specifically, when I used the org.apache.activemq.jaas.PropertiesLoginModule with reload=true, changes in user name and password were reflected in connections after the changes, but changes in group membership was not reloaded/picked up by new connections.&lt;/p&gt;

&lt;p&gt;The configuration of my broker xml and users.properties, groups.properties, as well as the login.config files are attached.  &lt;/p&gt;

&lt;p&gt;The problem was repeatable always.&lt;/p&gt;

&lt;p&gt;The cause of the problem was identified as the groups membership was cached and the cache was not cleared (reloaded) after the groups.properties file change.&lt;/p&gt;

&lt;p&gt;The fix is to add one line of code in the org.apache.activemq.jaas.ReloadableProperties.java class.&lt;/p&gt;

&lt;p&gt;The src code with the fix for org.apache.activemq.jaas.ReloadableProperties.java is attached in the ticket as well.&lt;/p&gt;

&lt;p&gt;Please verify the fix and merge this one line of code change in org.apache.activemq.jaas.ReloadableProperties.java class in src branches for 5.13.0 as I tested the problem with 5.13.0 only.  The fix should be carried forward and retroactively merged into previous versions as well.&lt;/p&gt;

&lt;p&gt;There is no negative impact on software or any noticeable impact on server performance.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux, Mac&lt;/p&gt;</environment>
        <key id="12950705">AMQ-6214</key>
            <summary>JAAS bug that causes user group membership not reloaded dynamically when reload is true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="nyang63@gmail.com">Nanchang Yang</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 16 Mar 2016 00:18:26 +0000</created>
                <updated>Sat, 2 Nov 2019 05:36:15 +0000</updated>
                            <resolved>Wed, 16 Mar 2016 14:52:55 +0000</resolved>
                                    <version>5.13.0</version>
                    <version>5.13.2</version>
                                    <fixVersion>5.13.3</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Security/JAAS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15196539" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:26:57 +0000"  >&lt;p&gt;The fix is to clear the cache of groups reverted map, so that the mapping of group membership will be reloaded.&lt;/p&gt;

&lt;p&gt;One line of new code in ReloadableProperties class fixed the problem:&lt;/p&gt;

&lt;p&gt;Line 53:    &lt;/p&gt;

&lt;p&gt;invertedValueProps = null;&lt;/p&gt;</comment>
                            <comment id="15196552" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:35:51 +0000"  >&lt;p&gt;Attached configuration files for using JAAS with reloadable properties for users and groups.&lt;/p&gt;

&lt;p&gt;Activemq is configured to use properties for users, groups with reload flag set to true, and authorization policy is such that changes in authorization policy is reloaded at runtime by the runtimeConfigurationPlugin.&lt;/p&gt;

&lt;p&gt;Tests showed that the group membership is not dynamically reloaded at runtime without the fix.  The fix works well for the problem.&lt;/p&gt;</comment>
                            <comment id="15197432" author="jira-bot" created="Wed, 16 Mar 2016 14:50:36 +0000"  >&lt;p&gt;Commit 2788bd55845d35ffb753f20ea1fee9711e85fe43 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2788bd5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2788bd5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6214&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing ReloadableProperties so that the groups file will be properly&lt;br/&gt;
reloaded on file modification. Added a test to verify.&lt;/p&gt;

&lt;p&gt;Thanks to Nanchang Yang for providing the fix.&lt;/p&gt;</comment>
                            <comment id="15197436" author="jira-bot" created="Wed, 16 Mar 2016 14:52:06 +0000"  >&lt;p&gt;Commit 531634fca1e99b06c34fbd2ab4f14b661443847b in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=531634f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=531634f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6214&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing ReloadableProperties so that the groups file will be properly&lt;br/&gt;
reloaded on file modification. Added a test to verify.&lt;/p&gt;

&lt;p&gt;Thanks to Nanchang Yang for providing the fix.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 2788bd55845d35ffb753f20ea1fee9711e85fe43)&lt;/p&gt;</comment>
                            <comment id="15197437" author="christopher.l.shannon" created="Wed, 16 Mar 2016 14:52:55 +0000"  >&lt;p&gt;Patch applied along with a test to prevent this from happening again.  Thanks for the fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12952483">ARTEMIS-451</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12793667" name="ReloadableProperties.java" size="4338" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:26:57 +0000"/>
                            <attachment id="12793668" name="activemq.xml" size="6904" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:35:51 +0000"/>
                            <attachment id="12793669" name="groups.properties" size="1015" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:35:51 +0000"/>
                            <attachment id="12793670" name="login.config" size="1164" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:35:51 +0000"/>
                            <attachment id="12793671" name="users.properties" size="1108" author="nyang63@gmail.com" created="Wed, 16 Mar 2016 00:35:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uqpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>