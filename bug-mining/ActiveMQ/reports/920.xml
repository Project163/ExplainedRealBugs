<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:46:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2752] Message is delivered to DLQ in store and forward mode if two brokers clock is not in sync</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2752</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I have two ActiveMQ running on two separated machines.  They use duplex network connector between them.    I am using camel InOut Pattern to send message cross these two brokers.    The InOut request timeout is 20 seconds.    If these two broker machines&apos; clock is NOT in sync, at least the destination broker clock is more than 20 seconds ahead of the sender broker&apos;s clock,   when the message gets on destination broker side,  it is being delivered to DLQ right away.    I am not sure if there is a way to avoid this problem.  Or it just works as designed.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2003 Server,  ActiveMQ 5.3.1,  Camel 2.2.0 and Jboss 4.2.2&lt;/p&gt;</environment>
        <key id="12483256">AMQ-2752</key>
            <summary>Message is delivered to DLQ in store and forward mode if two brokers clock is not in sync</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="qingyi">Qingyi Gu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 May 2010 20:23:14 +0000</created>
                <updated>Thu, 27 May 2010 19:55:48 +0000</updated>
                            <resolved>Thu, 27 May 2010 15:24:12 +0000</resolved>
                                    <version>5.3.1</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12942731" author="gtully" created="Thu, 27 May 2010 08:30:44 +0000"  >&lt;p&gt;it is working as designed. &lt;br/&gt;
The feature that helps work around this issue is &lt;a href=&quot;http://activemq.apache.org/timestampplugin.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/timestampplugin.html&lt;/a&gt; but if possible, use some OS level protocol to keep the system clocks in sync on each of the machines.&lt;/p&gt;</comment>
                            <comment id="12942739" author="qingyi" created="Thu, 27 May 2010 14:27:37 +0000"  >&lt;p&gt;I did tried &quot;timestampplugin&quot;,  but it didn&apos;t solve the problem in this case.   I think it is because the plugin is mainly for the leg between jms client and broker.    My case is the leg between two brokers.     Yeah, we are seeking OS level protocol to keep clocks in sync to resolve this issue.&lt;/p&gt;</comment>
                            <comment id="12942740" author="gtully" created="Thu, 27 May 2010 15:06:31 +0000"  >&lt;p&gt;ah, you may need to provide your own variant of the timestamp broker plugin, it is quite simple. Currently, it does not work if a message has come from a network which is your use case. not sure why that is, I think that should be made optional. In the code it has&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (message.getTimestamp() &amp;gt; 0
            &amp;amp;&amp;amp; (message.getBrokerPath() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || message.getBrokerPath().length == 0)) {
            &lt;span class=&quot;code-comment&quot;&gt;// timestamp not been disabled and has not passed through a network&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. which ensures it does not work for your use case atm.&lt;/p&gt;</comment>
                            <comment id="12942748" author="gtully" created="Thu, 27 May 2010 15:24:11 +0000"  >&lt;p&gt;in r948858, added processNetworkMessages attribute (default false) to TimeStampBrokerPlugin to allow it to modify network messages. &lt;/p&gt;</comment>
                            <comment id="12942738" author="qingyi" created="Thu, 27 May 2010 19:55:48 +0000"  >&lt;p&gt;Tested with r948858,  it works now.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rqh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159933</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>