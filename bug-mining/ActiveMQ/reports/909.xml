<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:45:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2729] Dot-separated prefetch configuration variable rejected by failover transport URI</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2729</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;If you set the queue prefetch policy on a failover connection string, you get an exception saying that the policy is not a valid configuration option.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;failover:&lt;span class=&quot;code-comment&quot;&gt;//(tcp://localhost:61616?jms.prefetchPolicy.queuePrefetch=1)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To test, simply modify the URL in the example/build.xml file from an installation of ActiveMQ, and then run the producer using &apos;ant producer&apos;. I think that this may be related to the fact that the variable in question - &apos;jms.prefetchPolicy.queuePrefetch&apos; - has dots (periods) in the name. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="12483939">AMQ-2729</key>
            <summary>Dot-separated prefetch configuration variable rejected by failover transport URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="adrian.trenaman">Adrian Trenaman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 May 2010 12:26:36 +0000</created>
                <updated>Thu, 13 May 2010 10:12:15 +0000</updated>
                            <resolved>Thu, 13 May 2010 10:12:15 +0000</resolved>
                                    <version>5.3.2</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Connector</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12942619" author="dejanb" created="Wed, 12 May 2010 12:39:33 +0000"  >&lt;p&gt;Hi Adrian,&lt;/p&gt;

&lt;p&gt;jms.* properties must be specified on the outer url&apos;s. In this case&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;failover:&lt;span class=&quot;code-comment&quot;&gt;//(tcp://localhost:61616)?jms.prefetchPolicy.queuePrefetch=1&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should work.&lt;/p&gt;</comment>
                            <comment id="12943316" author="adrian.trenaman" created="Wed, 12 May 2010 12:43:01 +0000"  >&lt;p&gt;Thanks Dejan for the super-quick response on this! I&apos;m afraid I&apos;d already tried moving the param to the outside of the failover brackets, and unfortunately this doesn&apos;t work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Error is: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     [java] Caught: javax.jms.JMSException: 
      Could not create Transport. Reason: java.lang.IllegalArgumentException: 
       Invalid connect parameters: {jms.prefetchPolicy.queuePrefetch=1}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12942620" author="dejanb" created="Wed, 12 May 2010 12:54:45 +0000"  >&lt;p&gt;I just tested it more ... my original test was on the trunk and it seems that it works there. Just tried it on 5.3.0 and it gives me the exception you experienced. I&apos;m trying to locate the issue that fixed it.&lt;/p&gt;</comment>
                            <comment id="12942626" author="gtully" created="Wed, 12 May 2010 15:44:56 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;failover:(...) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; i.e: without the two forward slashes (//) will have the url treated as a composite which may help, but there is obviously an issue between trunk and 5.3.2&lt;/p&gt;</comment>
                            <comment id="12942630" author="gtully" created="Wed, 12 May 2010 15:59:02 +0000"  >&lt;p&gt;relevant test where the composite url is used : &lt;a href=&quot;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/transport/failover/FailoverUriTest.java?view=markup&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12942632" author="dejanb" created="Wed, 12 May 2010 19:17:44 +0000"  >&lt;p&gt;Gary, you&apos;re right &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;failover:(tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:61616)?jms.prefetchPolicy.queuePrefetch=1&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;works just fine on 5.3.x as well. Will check FailoverUriTest with // and try to figure out why it doesn&apos;t work on 5.3.x.&lt;/p&gt;</comment>
                            <comment id="12942631" author="dejanb" created="Thu, 13 May 2010 10:12:15 +0000"  >&lt;p&gt;Fixed with svn revision 943860.&lt;/p&gt;

&lt;p&gt;It turned out that URISupport.parseQuery() didn&apos;t handle this case well. Added appropriate tests to FailoverUriTest as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74825</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rqjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>