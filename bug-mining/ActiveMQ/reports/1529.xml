<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:54:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3879] Temporary queues may be deleted by the wrong connection</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3879</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>
&lt;p&gt;While trying to upgrade CXF from 5.4.2 to 5.6, I ran into a slight problem.  The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-3038&quot; title=&quot;Possible Memory-Leak as ActiveMQTempDestinations don&amp;#39;t get deleted when ActiveMQConnection.close() is called&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-3038&quot;&gt;&lt;del&gt;AMQ-3038&lt;/del&gt;&lt;/a&gt; seems to have caused an issue where closing a connection that has been given an advisory of a temporary queue (AdvisoryConsumer) will result in the temporary queue being delete even if the connection that NEEDS the queue is still using it.&lt;/p&gt;

&lt;p&gt;Chatted with gtully a bit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://irclogs.dankulp.com/logs/irclogger_log/activemq?date=2012-06-12,Tue&amp;amp;sel=112#l108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://irclogs.dankulp.com/logs/irclogger_log/activemq?date=2012-06-12,Tue&amp;amp;sel=112#l108&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This can be reproduced with a CXF checkout (2.6.x-fixes branch) by updating parent/pom.xml to use activemq 5.6 and running the test in rt/transport/jms.   The MessageIdAsCorrelationIdJMSConduitTest  test fails.&lt;/p&gt;


&lt;p&gt;A workaround is to use a PooledConnectionFactory instead of the ActiveMQConnectionFactory.   I&apos;ll be committing that workaround to trunk so the problem will not be re-producible there.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12560394">AMQ-3879</key>
            <summary>Temporary queues may be deleted by the wrong connection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="dkulp">Daniel Kulp</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2012 20:14:08 +0000</created>
                <updated>Thu, 2 May 2013 02:30:56 +0000</updated>
                            <resolved>Tue, 12 Jun 2012 23:06:14 +0000</resolved>
                                    <version>5.6.0</version>
                                    <fixVersion>5.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13293901" author="gtully" created="Tue, 12 Jun 2012 20:33:32 +0000"  >&lt;p&gt;note to self: A test case that uses two connections, creates a temp on one and a consumer. verify the advisory propagation via waiting for a failure to delete. then close the second, should get a failed send to the temp.&lt;/p&gt;</comment>
                            <comment id="13293987" author="tabish121" created="Tue, 12 Jun 2012 23:06:14 +0000"  >&lt;p&gt;Fix and test for this issue.&lt;/p&gt;</comment>
                            <comment id="13295814" author="dkulp" created="Fri, 15 Jun 2012 18:08:01 +0000"  >
&lt;p&gt;Another note for reference:&lt;br/&gt;
The ActiveMQInitialContextFactory only create ActiveMQConnectionFactories (not pooled) and thus is affected by this.   This basically means that using JNDI to configure/setup ActiveMQ results in factories/connections that have problems working with the temporary queues.    No possible workaround without writing their own InitialContextFactory to handle pooled.   Not ideal.&lt;/p&gt;</comment>
                            <comment id="13295838" author="gtully" created="Fri, 15 Jun 2012 18:45:28 +0000"  >&lt;p&gt;A workaround is to use watchTopicAdvisories=false on the connection factory.&lt;br/&gt;
?jms.watchTopicAdvisories=false on the brokerUrl will do that for you.&lt;br/&gt;
In this way, the temp will only be known to the connection that creates it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12618151">AMQ-4196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ahon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>