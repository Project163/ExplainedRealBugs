<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:09:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5763] Consume messages in transactions with AMQP stop after 500 messages</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5763</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I try to consume messages via AMQP in transactions (1 message per transaction),  The consumption is stopped exactly after 500 messages. I am using qpid-jms AMQP client, but i have also reproduced this issue using SwiftMQ AMQP client. This issue happen only with ActiveMQ (my version is 5.11.1). For example on Qpid Java Broker(version 0.32) it is working correctly.&lt;/p&gt;

&lt;p&gt;I have created sample test which may be used for issue reproduction. For reproduction please use following instructions: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Download amqptxerror.zip&lt;/li&gt;
	&lt;li&gt;Unzip.&lt;/li&gt;
	&lt;li&gt;Import pom.xml to your favorite IDE.&lt;/li&gt;
	&lt;li&gt;Start your ActiveMQ broker or run maven with &quot;-p broker&quot;.&lt;/li&gt;
	&lt;li&gt;Run src/test/java/AMQPTxTest.java.&lt;/li&gt;
&lt;/ol&gt;

</description>
                <environment></environment>
        <key id="12827194">AMQ-5763</key>
            <summary>Consume messages in transactions with AMQP stop after 500 messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="jdk">Ji&#345;&#237; Dudek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 May 2015 08:56:04 +0000</created>
                <updated>Tue, 5 May 2015 18:41:20 +0000</updated>
                            <resolved>Tue, 5 May 2015 18:41:20 +0000</resolved>
                                    <version>5.11.1</version>
                                    <fixVersion>5.12.0</fixVersion>
                                    <component>AMQP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14528630" author="tabish121" created="Tue, 5 May 2015 15:19:08 +0000"  >&lt;p&gt;I&apos;ve added a test based on your work to capture this in the unit test suite.  &lt;/p&gt;</comment>
                            <comment id="14528825" author="gemmellr" created="Tue, 5 May 2015 17:17:28 +0000"  >&lt;p&gt;I took an initial look at this and the logs thus far don&apos;t really point at the broker, it could very well be an issue on the client side. Will need to investigate more.&lt;/p&gt;</comment>
                            <comment id="14529025" author="gemmellr" created="Tue, 5 May 2015 18:41:20 +0000"  >&lt;p&gt;Ok, I need to take that back, I figured out the reason and whilst the client isn&apos;t handling it particularly well the core problem is on the broker, which isn&apos;t replenishing the transaction controllers link credit. As a result it is unable to begin the 501st transaction due to using the given initial 1000 credits to declare and discharge the previous 500 transactions.&lt;/p&gt;

&lt;p&gt;Fixed in commit &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=fa81c1ff732fd50312ba349c8226c2d84345ad1d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=fa81c1ff732fd50312ba349c8226c2d84345ad1d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12730399" name="amqptxerror.zip" size="4528" author="jdk" created="Tue, 5 May 2015 08:56:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eahr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>