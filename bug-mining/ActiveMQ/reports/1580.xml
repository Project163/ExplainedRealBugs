<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:55:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2453] start/control-script is not suitable for professional environments</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2453</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The start-scripts &quot;activemq&quot; and &quot;activemq-admin&quot; do not seem to be ready for production use.&lt;/p&gt;

&lt;p&gt;Reasons:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Server does not run in background&lt;br/&gt;
  =&amp;gt; this can be done by redirecting output to a file and run in background&lt;br/&gt;
  =&amp;gt; in my opinion this should be implemented directly in java&lt;br/&gt;
  =&amp;gt; the console log should be written by log4j to &amp;lt;install-root&amp;gt;/data/console.log&lt;/li&gt;
	&lt;li&gt;The process should be started on a non-root user&lt;br/&gt;
  =&amp;gt; use &apos;su -c &quot;$COMMAND&quot; - $RUN_AS_USER&apos; &lt;br/&gt;
  =&amp;gt; this should be defined in /etc/activemq.conf&lt;/li&gt;
	&lt;li&gt;The script should support a &quot;reload&quot; feature to reload the configurartion&lt;br/&gt;
  (if activemq supports reloading)&lt;/li&gt;
	&lt;li&gt;The script should support a &quot;status&quot; option&lt;br/&gt;
  =&amp;gt; this should show a quick overview about the state of activemq&lt;br/&gt;
  =&amp;gt; this should return a value != 0 if the service is not working&lt;br/&gt;
     (this is important for cluster integration)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Does anybody already working on these items?&lt;br/&gt;
Do you have suggestions for a implementation?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12483876">AMQ-2453</key>
            <summary>start/control-script is not suitable for professional environments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="scoopex">Marc Sch&#246;chlin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Oct 2009 16:43:19 +0000</created>
                <updated>Wed, 1 Oct 2014 21:26:56 +0000</updated>
                            <resolved>Mon, 30 Sep 2013 19:27:36 +0000</resolved>
                                    <version>5.3.0</version>
                                    <fixVersion>NEEDS_REVIEW</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="12941505" author="scoopex" created="Wed, 11 Nov 2009 17:53:39 +0000"  >&lt;p&gt;I wrote a new initscript for running standalone activemq installations&lt;br/&gt;
(see attached script).&lt;/p&gt;

&lt;p&gt;This script is originally based on the scripts  &quot;activemq&quot; and&lt;br/&gt;
&quot;activemq-admin&quot; located in&lt;br/&gt;
&quot;assembly/src/release/bin/&quot; and replaces both scripts.&lt;/p&gt;

&lt;p&gt;Read &quot;usage-examples.txt&quot; for  getting a first impression of the initscript.&lt;/p&gt;

&lt;p&gt;Features of the new script:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the script should be compatible with cygwin, macosx and most linux and&lt;br/&gt;
unix systems&lt;br/&gt;
  To ensure compatibility to macosx and cygwin it does not utilize lsb&lt;br/&gt;
standard infrastructure for controlling daemons like&lt;br/&gt;
  &quot;start-stop-daemon&quot;.&lt;br/&gt;
   (i tried to keep the shell-syntax compatible to most unix systems,&lt;br/&gt;
but only tested on SLES11 and Ubuntu 9.10)&lt;/li&gt;
	&lt;li&gt;the complete functionality if &quot;activemq-admin&quot; is now included in&lt;br/&gt;
&quot;activemq&quot;&lt;br/&gt;
  (list, query, browse, ...)&lt;/li&gt;
	&lt;li&gt;all option not implemented by the initscript, are directly passed to&lt;br/&gt;
the java-call&lt;/li&gt;
	&lt;li&gt;the configuration parameters can be located in&lt;br/&gt;
/etc/default/activemq.conf or  $HOME/.activemqrc&lt;/li&gt;
	&lt;li&gt;the script supports operation of multiple instances on the same system&lt;br/&gt;
  (if the script is symlinked/renamed to&lt;br/&gt;
&quot;activemq-instance-&amp;lt;INSTANCENAME&amp;gt;&quot;, the configuration&lt;br/&gt;
  is searched on /etc/default/activemq-instance-&amp;lt;INSTANCENAME&amp;gt;.conf and&lt;br/&gt;
$HOME/.activemqrc-instance-&amp;lt;INSTANCENAME&amp;gt;)&lt;/li&gt;
	&lt;li&gt;in case of syntax-errors in the configuration, the execution is stopped&lt;/li&gt;
	&lt;li&gt;a template configuration for the script can be created by using the&lt;br/&gt;
&quot;setup&quot; option&lt;/li&gt;
	&lt;li&gt;activemq configuration- and data-dir (e.g. kahadb, tmpstorage) are&lt;br/&gt;
configurable&lt;/li&gt;
	&lt;li&gt;configuration hints for jmx (because of non-available&lt;br/&gt;
&quot;VirtualMachine.attach(PID)&quot;, especially needed when using a ibm jvms)&lt;/li&gt;
	&lt;li&gt;improved shutdown procedure: script invokes shutdown by a jmx-request,&lt;br/&gt;
if process does not disappear&lt;br/&gt;
  after a configurable timeout, the process is killed by SIGKILL (-9)&lt;/li&gt;
	&lt;li&gt;start activemq daemon as an background process : option &quot;start&quot;&lt;/li&gt;
	&lt;li&gt;start activemq daemon without daemonizing the daemon: option &quot;fgstart&quot;&lt;/li&gt;
	&lt;li&gt;usage of PID files to determine running activemq instances&lt;/li&gt;
	&lt;li&gt;the &quot;status&quot; option, checks if there is a running activemq instance&lt;br/&gt;
  (this is useful for using activemq with high-availability tools)&lt;/li&gt;
	&lt;li&gt;the script outputs usage-information if it is invoked without any option&lt;br/&gt;
  (usage of the java binary combined with the script-usage)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In my opinion it would be good/nice:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if this script is will be tested on several unix-systems and on cygwin&lt;/li&gt;
	&lt;li&gt;to provide the possibility to configure the entire jmx-setup in&lt;br/&gt;
activemq.xml or jetty.xml&lt;br/&gt;
  (if jetty provides this)&lt;/li&gt;
	&lt;li&gt;it would be nice if the java code supports daemonizing&lt;/li&gt;
	&lt;li&gt;if this script will be part of activemq, we should adapt the wiki pages&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Feedback and improvement ideas are very welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12941605" author="scoopex" created="Fri, 13 Nov 2009 10:02:44 +0000"  >&lt;p&gt;Removed a typo&lt;/p&gt;</comment>
                            <comment id="12941824" author="scoopex" created="Wed, 18 Nov 2009 08:10:48 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Enhanced function documentation&lt;/li&gt;
	&lt;li&gt;removed some typos&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12941907" author="scoopex" created="Wed, 2 Dec 2009 17:48:52 +0000"  >&lt;p&gt;Relocated /etc/default/activemq.conf to /etc/default/activemq&lt;/p&gt;</comment>
                            <comment id="12942016" author="rajdavies" created="Fri, 15 Jan 2010 14:04:50 +0000"  >&lt;p&gt;Marc,&lt;br/&gt;
this is really great!&lt;br/&gt;
Question - what do you mean by nice if java code supported daemonizing ?&lt;/p&gt;</comment>
                            <comment id="12942013" author="dirkdk" created="Fri, 15 Jan 2010 16:17:03 +0000"  >&lt;p&gt;hi there,&lt;/p&gt;

&lt;p&gt;I had a short look a the script here and the activemq site (&lt;a href=&quot;http://activemq.apache.org/unix-service.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/unix-service.html&lt;/a&gt;). For me as a software engineer and not system engineer it is a bit difficult to say what the best way is, but this is my input:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;process should run like a daemon in the background&lt;/li&gt;
	&lt;li&gt;process should do proper logging&lt;/li&gt;
	&lt;li&gt;process should be available for status checks (e.g. via jmx)&lt;/li&gt;
	&lt;li&gt;process should run like a specified user (e.g. activemq) and not root&lt;/li&gt;
	&lt;li&gt;should use PID file&lt;/li&gt;
	&lt;li&gt;should be possible to configure for automatic startup and shutdown&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What I miss right now (but might have overlooked):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;example directory layout (where binaries, config files, startup script)&lt;/li&gt;
	&lt;li&gt;clear definition of responsibilities of files (controlling process, configuration, etc). Right now too much is in some files&lt;/li&gt;
	&lt;li&gt;how to install for automatic startup/shutdown with the system (on linux for me in particular&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;just my 2 cents &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;dirk&lt;/p&gt;</comment>
                            <comment id="12942014" author="scoopex" created="Fri, 15 Jan 2010 19:27:07 +0000"  >
&lt;p&gt;Response to:&lt;br/&gt;
&amp;#8212; &lt;br/&gt;
Rob Davies added a comment - 15/Jan/10 02:04 PM&lt;br/&gt;
Question - what do you mean by nice if java code supported daemonizing ? &lt;br/&gt;
&amp;#8212;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The jetty process should detach STDOUT/STDERR on starting&lt;/li&gt;
	&lt;li&gt;The jetty process should start as background process&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12942012" author="scoopex" created="Fri, 15 Jan 2010 19:42:04 +0000"  >&lt;p&gt;Response to: Dirk de Kok :&lt;br/&gt;
&amp;#8212;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;process should run like a daemon in the background&lt;/li&gt;
	&lt;li&gt;process should do proper logging&lt;/li&gt;
	&lt;li&gt;process should be available for status checks (e.g. via jmx)&lt;/li&gt;
	&lt;li&gt;process should run like a specified user (e.g. activemq) and not root&lt;/li&gt;
	&lt;li&gt;should use PID file&lt;/li&gt;
	&lt;li&gt;should be possible to configure for automatic startup and shutdown&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
=&amp;gt; This is already supported by the attached init-script, but it would be better to implement this directly in java&lt;br/&gt;
     (and not by using system-properties and shell-tricks)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Additional comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;example directory layout (where binaries, config files, startup script)&lt;br/&gt;
      =&amp;gt; just invoke the script without any parameters, you will see some documentation&lt;br/&gt;
      =&amp;gt; invoke the script with the setup option (./activemq status /path/to/file) and you get a example configuration file  &lt;/li&gt;
	&lt;li&gt;clear definition of responsibilities of files (controlling process, configuration, etc). Right now too much is in some files&lt;br/&gt;
      =&amp;gt; i agree, this can be improved by implementing more functionality of the script directly in activemq&lt;/li&gt;
	&lt;li&gt;how to install for automatic startup/shutdown with the system (on linux for me in particular)&lt;br/&gt;
       =&amp;gt; this is already documented in the init-documentation of your linux-os&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12942018" author="david@davidkarlsen.com" created="Fri, 15 Jan 2010 21:21:31 +0000"  >&lt;p&gt;There&apos;s also a plugin to create jsw wrapper scripts: &lt;a href=&quot;http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/example-jsw-linux.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/example-jsw-linux.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12942655" author="scoopex" created="Sun, 16 May 2010 16:46:41 +0000"  >&lt;p&gt;We should remove jsw wrapper scripts  - this is a ugly solution from a linux/unix  sysadmin&apos;s view....popular projects like tomcat and jboss&lt;br/&gt;
also do not need hacks like this....&lt;/p&gt;

&lt;p&gt;See also:   &lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-2105?focusedCommentId=59373&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_59373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-2105?focusedCommentId=59373&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_59373&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12942567" author="dejanb" created="Fri, 18 Jun 2010 14:08:29 +0000"  >&lt;p&gt;A modified script has been committed with svn revision 956005&lt;/p&gt;

&lt;p&gt;I made a few changes:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;copied the part from the old script that sets ACTIVEMQ_HOME to the current dir if it isn&apos;t already set and /opt/activemq does not exists&lt;/li&gt;
	&lt;li&gt;refactored around seq as it does not exists on OS X&lt;/li&gt;
	&lt;li&gt;added logic to create data folder if it doesn&apos;t exist (maybe this can be made even more bulletproof)&lt;/li&gt;
	&lt;li&gt;used bash as echo -n is bash specific&lt;/li&gt;
	&lt;li&gt;fixed some typos&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is only the starting point, so we should test this thoroughly in various environments and make it rock solid for the next release (I tested it so far on OS X)&lt;/p&gt;

&lt;p&gt;The one thing I observed is that we need to improve the stop logic as &quot;regular stop method&quot; isn&apos;t called asynchronously, so the waiting loop doesn&apos;t do much.&lt;/p&gt;

&lt;p&gt;Thanks for the contribution Marc.&lt;/p&gt;</comment>
                            <comment id="12942173" author="dejanb" created="Wed, 30 Jun 2010 11:01:39 +0000"  >&lt;p&gt;Fixed with svn revision 959227.&lt;/p&gt;

&lt;p&gt;I incorporated couple of improvements and tested on OS X, Ubuntu and Cygwin.&lt;/p&gt;

&lt;p&gt;Important thing to note is that when used on Cygwin, you should explicitly turn on JMX, like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &amp;lt;managementContext&amp;gt;
            &amp;lt;managementContext createConnector=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/managementContext&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;as connecting to pid works only on linux. This should be documented in the upcoming docs.&lt;/p&gt;</comment>
                            <comment id="12942201" author="scoopex" created="Wed, 30 Jun 2010 11:23:21 +0000"  >&lt;p&gt;Thats right, &quot;VirtualMachine.attach(PID)&quot; also does not work with a IBM JVM (we are using activemq with a IBM JVM on a IBM Mainframe/System z Linux).&lt;/p&gt;

&lt;p&gt;Maybe there is a jmx connector for a unix domain socket file available?&lt;/p&gt;

&lt;p&gt;This might be very cool from a system administrator&#180;s view - because :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you don&#180;t need to open and secure (ssl, accounts, passwords, ...) a tcp port&lt;/li&gt;
	&lt;li&gt;it is possible to control permissions by simple file permissions&lt;/li&gt;
	&lt;li&gt;simple configuration of the initscript&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Best regards&lt;br/&gt;
Marc&lt;/p&gt;</comment>
                            <comment id="12941925" author="dejanb" created="Wed, 30 Jun 2010 12:23:40 +0000"  >&lt;p&gt;Yeah, it&apos;d be very useful, but I&apos;m not aware of such a thing&lt;/p&gt;</comment>
                            <comment id="12942940" author="scoopex" created="Wed, 6 Oct 2010 13:34:17 +0000"  >&lt;p&gt;With activemq 5.4.1 the new initscript is part of the activemq distribution.&lt;/p&gt;

&lt;p&gt;There are still parts of the old start/control-script infrastructure for unix/linuxmacos systems &lt;br/&gt;
included in the activemq delivery.&lt;/p&gt;

&lt;p&gt;This should be removed, because this confuses activemq-users.&lt;/p&gt;

&lt;p&gt;Distribution should not contain the follwing folders/files:&lt;/p&gt;

&lt;p&gt;apache-activemq-5.4.1/bin/activemq-admin : All functionality of bin/activemq-admin is implemented in bin/activemq&lt;br/&gt;
apache-activemq-5.4.1/bin/linux-x86-32 : This is only needed for jsw&lt;br/&gt;
apache-activemq-5.4.1/bin/linux-x86-64 : This is only needed for jsw&lt;br/&gt;
apache-activemq-5.4.1/bin/macosx       : This is only needed for jsw&lt;br/&gt;
apache-activemq-5.4.1/bin/wrapper.jar  : This is only needed for jsw&lt;/p&gt;

&lt;p&gt;In my current work-environment admins and developers were confused of having two different start environments  - i think&lt;br/&gt;
it&#180;s a good idea to cleanup the distribution.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Marc&lt;/p&gt;</comment>
                            <comment id="12942785" author="gtully" created="Mon, 11 Oct 2010 19:32:57 +0000"  >&lt;p&gt;The script needs to confine its self to /bin/sh features. It needs to work out of the box on aix.&lt;/p&gt;</comment>
                            <comment id="12943008" author="scoopex" created="Tue, 12 Oct 2010 04:31:28 +0000"  >&lt;p&gt;Sorry, i don&apos;t own a aix system &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Probably its enough to modify the sheebang like this: &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;$ svn diff&lt;br/&gt;
Index: activemq&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; activemq    (Revision 1021620)&lt;br/&gt;
+++ activemq    (Arbeitskopie)&lt;br/&gt;
@@ -1,4 +1,4 @@&lt;br/&gt;
-#!/bin/bash &lt;br/&gt;
+#!/usr/bin/env bash &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;------------------------------------------------------------------------&lt;/li&gt;
	&lt;li&gt;Licensed to the Apache Software Foundation (ASF) under one or more&lt;/li&gt;
	&lt;li&gt;contributor license agreements.  See the NOTICE file distributed with
&lt;hr /&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Bash emulation of /bin/sh is often not completely compatible to the &quot;sh&quot; of legacy unix systems - but most&lt;br/&gt;
of these systems provide the bash shell. Can you sent me the following information:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stdout/stderr output of a script feature which is not working using &quot;/bin/sh activemq&quot;&lt;/li&gt;
	&lt;li&gt;stdout/stderr output of a script feature which is not working with &quot;/bin/sh -x activemq&quot;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12943090" author="norman" created="Tue, 19 Oct 2010 19:16:59 +0000"  >&lt;p&gt;The script should only use basic shell stuff which is usable with a ksh. Bash is not installed on some unix like operation systems out of the box (for example freebsd). So you should use #!/bin/sh and make it work with it.&lt;/p&gt;

&lt;p&gt;Just my 2 cents&lt;/p&gt;</comment>
                            <comment id="12943084" author="scoopex" created="Wed, 20 Oct 2010 16:24:48 +0000"  >&lt;p&gt;Rewriting shellscript to run with ksh might be real pain - because the implementation of ksh/sh  varies between systems.&lt;br/&gt;
(i.e. between K&amp;amp;R and Sun ksh)&lt;/p&gt;

&lt;p&gt;/bin/sh does also not provide real portability for complexer functions - the behavior of /bin/sh varies between systems.&lt;/p&gt;

&lt;p&gt;I really think it is no real pain to run this script in bash because bash is available on all commodity unix-systems.&lt;/p&gt;

&lt;p&gt;At least Linux, AIX and Solaris provide a preinstalled bash for years now. &lt;/p&gt;

&lt;p&gt;BTW: If there are problems on other platforms i can rewrite the code if you can send me the debugging output of the shell (bash -x).&lt;/p&gt;

&lt;p&gt;The new script is an advantage over the old mechanism because the old mechanism only supported linux and macos...&lt;/p&gt;
</comment>
                            <comment id="12943210" author="dejanb" created="Fri, 12 Nov 2010 16:36:43 +0000"  >&lt;p&gt;Portability issue fixed with svn revision 1034453&lt;/p&gt;

&lt;p&gt;I tested it on osx, various dists of linux, aix and solari. It looks ok now. More testing is definitely welcomed. &lt;/p&gt;</comment>
                            <comment id="13193140" author="scoopex" created="Wed, 25 Jan 2012 17:26:45 +0000"  >&lt;p&gt;The script is included in the distribution.&lt;/p&gt;

&lt;p&gt;Why not removing apache-activemq-5.5.1/bin/&lt;/p&gt;
{activemq-admin,linux-x86-32,linux-x86-64,macosx,wrapper.jar}
&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;The unix script does not utilize these files - and  apache-activemq-5.5.1/bin/activemq contains all&lt;br/&gt;
features of apache-activemq-5.5.1/bin/activemq-admin&lt;/p&gt;</comment>
                            <comment id="13410336" author="scoopex" created="Tue, 10 Jul 2012 13:40:14 +0000"  >&lt;p&gt;Please remove the no longer needed files apache-activemq-5.x.x/bin/&lt;/p&gt;
{activemq-admin,linux-x86-32,linux-x86-64,macosx,wrapper.jar}

&lt;p&gt;Please add the script header to the script apache-activemq-5.x.x/bin/activemq to prevent SLES systems to complain about&lt;br/&gt;
broken lsb-headers&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;insserv: missing `Required-Stop:&apos;  entry: please add even &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; empty.
insserv: warning: script &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq&apos;&lt;/span&gt; missing LSB tags and overrides
insserv: warning: script &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq&apos;&lt;/span&gt; missing LSB tags and overrides
insserv: Default-Start undefined, assuming &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; start runlevel(s) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; script `activemq&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Script header:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#!/bin/sh

### BEGIN INIT INFO
# Provides:          activemq
# Required-Start:    $remote_fs $network $syslog
# Required-Stop:     $remote_fs $network $syslog
# Default-Start:     3 5
# Default-Stop:      0 1 6
# &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;-Description: Starts ActiveMQ
# Description:       Starts ActiveMQ Message Broker Server
### END INIT INFO
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13410337" author="scoopex" created="Tue, 10 Jul 2012 13:41:24 +0000"  >&lt;p&gt;See last comment - remove the artifacts of the old start mechanism.&lt;br/&gt;
Add the script header.&lt;/p&gt;</comment>
                            <comment id="13427299" author="tabish121" created="Thu, 2 Aug 2012 13:17:22 +0000"  >&lt;p&gt;Added LSB compliant header to the scripts for systems that use it. &lt;/p&gt;</comment>
                            <comment id="13763094" author="scoopex" created="Tue, 10 Sep 2013 14:59:54 +0000"  >&lt;p&gt;There are various references to the old activemq-admin script:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://activemq.apache.org/activemq-command-line-tools-reference.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/activemq-command-line-tools-reference.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It would be a good idea to add a disclaimer that this tool was replaced by &quot;bin/activemq&quot;.&lt;/p&gt;

&lt;p&gt;The new command is not documented in a good way (&lt;a href=&quot;http://activemq.apache.org/unix-shell-script.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/unix-shell-script.html&lt;/a&gt;)&lt;br/&gt;
See comment of &quot;11/Nov/09 18:53&quot; for improvement. &lt;/p&gt;

&lt;p&gt;Another problem: &lt;br/&gt;
I  discovered that the &quot;setup&quot; option seems to create a strange init-script-configuration file. It differs very much from the initial behavior.&lt;/p&gt;

&lt;p&gt;I you provide access to the wiki, i will improve the documentation.&lt;/p&gt;</comment>
                            <comment id="13763149" author="tabish121" created="Tue, 10 Sep 2013 16:02:56 +0000"  >&lt;p&gt;You need to follow the process to submit you ICLA to Apache and appear on the unlisted CLA list then submit a request on the mailing list to be granted karma for your user account on the wiki.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.apache.org/licenses/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13771685" author="scoopex" created="Thu, 19 Sep 2013 08:11:37 +0000"  >&lt;p&gt;I submitted the ICLA and get the confirmation the the ICLA is filed.&lt;/p&gt;

&lt;p&gt;If necessary and useful, i can provide documentation for wiki regarding the init-script and fixes for the init script &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13771938" author="tabish121" created="Thu, 19 Sep 2013 14:38:30 +0000"  >&lt;p&gt;In order to gain edit access you should create an account on the confluence Wiki and then send an email to the dev forum requesting karma to edit.  Your account should be linked to the same email that&apos;s associated with your ICLA so we can match them up.  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12745356">AMQ-5378</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12495166">HADOOP-7092</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12461536" name="activemq" size="18384" author="scoopex" created="Wed, 2 Dec 2009 17:48:52 +0000"/>
                            <attachment id="12461569" name="usage-example.txt" size="26181" author="scoopex" created="Wed, 11 Nov 2009 17:53:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ako7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>