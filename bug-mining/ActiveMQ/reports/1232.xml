<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:50:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3272] Handle RejectedExecutionException </title>
                <link>https://issues.apache.org/jira/browse/AMQ-3272</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Under heavy load, the async task executor in kahadb can throw RejectedExecutionException meaning it can&apos;t accept more tasks.&lt;/p&gt;

&lt;p&gt;Thread pool executor has RejectedExecutionHandler that deals with these situations and by default it aborts the task and throws the exception. I think it&apos;s much better to use ThreadPoolExecutor.CallerRunsPolicy which will try to execute the task in the current thread and thus sync the execution.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503500">AMQ-3272</key>
            <summary>Handle RejectedExecutionException </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="dejanb">Dejan Bosanac</reporter>
                        <labels>
                            <label>kahaDB</label>
                            <label>queue</label>
                    </labels>
                <created>Wed, 6 Apr 2011 10:25:02 +0000</created>
                <updated>Tue, 20 Sep 2011 10:42:05 +0000</updated>
                            <resolved>Wed, 11 May 2011 18:45:51 +0000</resolved>
                                    <version>5.5.0</version>
                                    <fixVersion>5.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13016780" author="gtully" created="Thu, 7 Apr 2011 09:24:40 +0000"  >&lt;p&gt;just at thought, this might effect the send order, in that the last task gets executed ahead of pending tasks.&lt;br/&gt;
Would it be better if that send blocked pending the execution of the tasks ahead of it.&lt;br/&gt;
so use a fixed size blocking task pool and have the number of workers configurable.&lt;/p&gt;</comment>
                            <comment id="13017390" author="dejanb" created="Fri, 8 Apr 2011 10:50:35 +0000"  >&lt;p&gt;Should be fixed with svn revision 1090186.&lt;/p&gt;

&lt;p&gt;The problem that exception occurred in the first place was the semaphore lock releasing at the end of the task, leaving the small window when executor could accept new tasks while there&apos;s no space available. With this fixed, the exception shouldn&apos;t happen even under high load.&lt;/p&gt;</comment>
                            <comment id="13031932" author="gtully" created="Wed, 11 May 2011 18:36:34 +0000"  >&lt;p&gt;The rejected execution exception still occurs, problem seems to be early release of locks in the cancel case.&lt;/p&gt;</comment>
                            <comment id="13031942" author="gtully" created="Wed, 11 May 2011 18:45:51 +0000"  >&lt;p&gt;fix is in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1102014&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1102014&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;when an async task was canceled the semaphore bounding the task queue was signaled in error. That should only be signaled when the task has completed, due to the preceding cancel it will have nothing to do, but it consumes space in the task queue.&lt;/p&gt;</comment>
                            <comment id="13032348" author="gtully" created="Thu, 12 May 2011 10:36:46 +0000"  >&lt;p&gt;aborting the task is really a bug as a semaphore is engaged to gate the task queue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0agvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>