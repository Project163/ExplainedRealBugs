<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:45:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2384] The activeMQ port supports low and medium strength ciphers </title>
                <link>https://issues.apache.org/jira/browse/AMQ-2384</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;On running a Tenable nessus scan against the machine where ActiveMQ is running, we see that the port 61616 , the TCP connector port accepts Low and Medium strength ciphers by default. This may be a security risk and therefore we need a way to specify which ciphers to support.&lt;/p&gt;</description>
                <environment>&lt;p&gt;We are running the ActiveMQ 5.2.0  over a SLES 11 64 bit  machine. In the configuration file activemq.xml there is no way to specify the supported ciphers. &lt;/p&gt;</environment>
        <key id="12482807">AMQ-2384</key>
            <summary>The activeMQ port supports low and medium strength ciphers </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="schandrashekar">Shrisha Chandrashekar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2009 05:42:57 +0000</created>
                <updated>Mon, 12 Jul 2010 09:33:22 +0000</updated>
                            <resolved>Thu, 1 Apr 2010 16:57:10 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Connector</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12941621" author="gtully" created="Mon, 14 Sep 2009 14:43:23 +0000"  >&lt;p&gt;if introspection support can deal with a string[], uri parameters of the form &quot;socket.xxx&quot; could do it on the server url to set the enabled cipher suites on an ssl socket. Configuration of the tls layer could also achieve this.&lt;/p&gt;</comment>
                            <comment id="12941020" author="schandrashekar" created="Wed, 16 Sep 2009 11:26:22 +0000"  >&lt;p&gt;Ya.. i tried specifying the ciphers as a uri parameter &quot;socket.enabledCipherSuites&quot; , by using comma separated strings , seems like this does not work. I dont think the introspection support can deal with String[].  We want to do this at the application level rather than at the system level so configuring the tls layer is not a good alternative. I feel we need to provide a tag for specifying the ciphers under the &amp;lt;TransportConnector&amp;gt; , but not sure if its the right way to do this. &lt;/p&gt;</comment>
                            <comment id="12941264" author="gtully" created="Thu, 17 Sep 2009 15:14:31 +0000"  >&lt;p&gt;this is a patch that makes an effort to get setting ssl options via ?transport.XX options but there is a problem with permissions on it atm&lt;/p&gt;</comment>
                            <comment id="12942121" author="phil.pickett@springsource.com" created="Tue, 23 Mar 2010 12:03:11 +0000"  >&lt;p&gt;Is this the correct way to set the SSL enabledCipherSuites with this patch applied?&lt;/p&gt;

&lt;p&gt;        &amp;lt;transportConnectors&amp;gt;&lt;br/&gt;
            &amp;lt;transportConnector name=&quot;openwire&quot; uri=&quot;ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/transportConnectors&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12942126" author="gtully" created="Tue, 23 Mar 2010 14:02:02 +0000"  >&lt;p&gt;The patch just allows list values to be passed as arguments, from the test in the patch, it looks like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;ssl:&lt;span class=&quot;code-comment&quot;&gt;//localhost:0?transport.enabledCipherSuites=das,ras&quot;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is what is expected.&lt;/p&gt;

&lt;p&gt;The values are passed to &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#setEnabledCipherSuites(java.lang.String[&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#setEnabledCipherSuites(java.lang.String[&lt;/a&gt;]) so they need to match whatever is returned from &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#getEnabledCipherSuites(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#getEnabledCipherSuites(&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;What are you seeing?&lt;/p&gt;</comment>
                            <comment id="12942117" author="phil.pickett@springsource.com" created="Tue, 23 Mar 2010 15:42:41 +0000"  >&lt;p&gt;Gary - That was operator error on my part.  I assumed this was setup with a default of &quot;das,ras&quot; but was also configurable in the activemq.xml.  I should have known better since I didn&apos;t see anything in the patch to allow that.  I think I picked up exactly what was expected in my scan.  I&apos;ll rebuild after setting my preferred cipher suites and check again.&lt;/p&gt;</comment>
                            <comment id="12942138" author="phil.pickett@springsource.com" created="Tue, 23 Mar 2010 17:47:17 +0000"  >&lt;p&gt;Actually, I looked at the test case and modified my transport connector config in what I thought was the way to enable the ciphers I wanted with:&lt;/p&gt;

&lt;p&gt;&amp;lt;transportConnector name=&quot;openwire&quot; uri=&quot;ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;It looks to me when running an SSL scan that this is not being set.  When I run a PCI scan against a similarly configured Tomcat instance I see the weak ciphers are disabled.&lt;/p&gt;</comment>
                            <comment id="12942258" author="phil.pickett@springsource.com" created="Thu, 25 Mar 2010 15:57:16 +0000"  >&lt;p&gt;Gary - Have I enabled the CipherSuites correctly with the URI shown above?  It seems to match the test case.  Thanks, Phil&lt;/p&gt;</comment>
                            <comment id="12942272" author="gtully" created="Thu, 25 Mar 2010 16:47:56 +0000"  >&lt;p&gt;Phil, recall that I never got this patch to work completely, I got some weird permissions errors. The main bit of the patch was to allow lists to be set as properties. It may need some more work and some more tests. It was only intended as  place holder for a &apos;good start&apos; to a solution.&lt;br/&gt;
Gary.&lt;/p&gt;</comment>
                            <comment id="12942366" author="phil.pickett@springsource.com" created="Tue, 30 Mar 2010 17:25:09 +0000"  >&lt;p&gt;Gary, I&apos;ve added a couple mods to the SslTransportServer.java class and created a new 5.3-based patch (SSLEnableCiphers.patch) containing these along your changes.  With the resulting activemq-core-5.3.0.jar and transportConnect:&lt;/p&gt;

&lt;p&gt;            &amp;lt;transportConnector name=&quot;openwire&quot; uri=&quot;ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;I am able to disable low ciphers.&lt;/p&gt;</comment>
                            <comment id="12942380" author="phil.pickett@springsource.com" created="Tue, 30 Mar 2010 17:27:00 +0000"  >&lt;p&gt;ActiveMQ 5.3 based patch to implement transport&apos;s enabledCipherSuites option.&lt;/p&gt;

&lt;p&gt;My activemq.xml is standard for 5.3 with the following additions:&lt;/p&gt;

&lt;p&gt;        &amp;lt;amq:sslContext&amp;gt;&lt;br/&gt;
            &amp;lt;amq:sslContext&lt;br/&gt;
                protocol=&quot;SSLv3&quot;&lt;br/&gt;
                keyStore=&quot;file:${activemq.base}/SSL/broker.ks&quot; keyStorePassword=&quot;changeit&quot;&lt;br/&gt;
                trustStore=&quot;file:${activemq.base}/SSL/client.ts&quot; trustStorePassword=&quot;changeit&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/amq:sslContext&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;#8211; and &amp;#8211;&lt;/p&gt;

&lt;p&gt;        &amp;lt;transportConnectors&amp;gt;&lt;br/&gt;
            &amp;lt;transportConnector name=&quot;openwire&quot; uri=&quot;ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/transportConnectors&amp;gt;&lt;/p&gt;

&lt;p&gt;My goal was to disable low ciphers as documented here for Tomcat:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.cpug.org/forums/check-point-utm-1-appliances/11716-pci-vulnerability-assessment-report-utm-1-total-security-570-a.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.cpug.org/forums/check-point-utm-1-appliances/11716-pci-vulnerability-assessment-report-utm-1-total-security-570-a.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To test this, I used the ssl-cipher-check.pl script from &lt;a href=&quot;http://www.unspecific.com/ssl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.unspecific.com/ssl/&lt;/a&gt;.  With the above transport URI (and without the enabledCipherSuites option and the patch) the script returns 22 total ciphers and 10 WEAK ciphers.  With the patch and the option, the script returns 6 ciphers found.  See output below.&lt;/p&gt;

&lt;p&gt;Phil&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;phil@fedora12 perl&amp;#93;&lt;/span&gt;$ ./ssl-cipher-check.pl localhost 61616&lt;br/&gt;
Testing localhost:61616&lt;br/&gt;
   SSLv3:RC4-MD5 - ENABLED - STRONG 128 bits &lt;br/&gt;
   SSLv3:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;SSLv3:EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 56 bits **&lt;br/&gt;
   SSLv3:DHE-RSA-AES128-SHA - ENABLED - STRONG 128 bits &lt;br/&gt;
   SSLv3:DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;br/&gt;
   SSLv3:RC4-SHA - ENABLED - STRONG 128 bits &lt;/li&gt;
		&lt;li&gt;SSLv3:EXP-EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 40 bits **&lt;/li&gt;
		&lt;li&gt;SSLv3:DES-CBC-SHA - ENABLED - WEAK 56 bits **&lt;/li&gt;
		&lt;li&gt;SSLv3:EXP-RC4-MD5 - ENABLED - WEAK 40 bits **&lt;/li&gt;
		&lt;li&gt;SSLv3:EXP-DES-CBC-SHA - ENABLED - WEAK 40 bits **&lt;br/&gt;
   SSLv3:AES128-SHA - ENABLED - STRONG 128 bits &lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   TLSv1:RC4-MD5 - ENABLED - STRONG 128 bits &lt;br/&gt;
   TLSv1:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;TLSv1:EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 56 bits **&lt;br/&gt;
   TLSv1:DHE-RSA-AES128-SHA - ENABLED - STRONG 128 bits &lt;br/&gt;
   TLSv1:DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;br/&gt;
   TLSv1:RC4-SHA - ENABLED - STRONG 128 bits &lt;/li&gt;
		&lt;li&gt;TLSv1:EXP-EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 40 bits **&lt;/li&gt;
		&lt;li&gt;TLSv1:DES-CBC-SHA - ENABLED - WEAK 56 bits **&lt;/li&gt;
		&lt;li&gt;TLSv1:EXP-RC4-MD5 - ENABLED - WEAK 40 bits **&lt;/li&gt;
		&lt;li&gt;TLSv1:EXP-DES-CBC-SHA - ENABLED - WEAK 40 bits **&lt;br/&gt;
   TLSv1:AES128-SHA - ENABLED - STRONG 128 bits &lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;WARNING: Self Signed Certificate&lt;br/&gt;
&lt;b&gt;WARNING&lt;/b&gt; 10 WEAK Ciphers Enabled.&lt;br/&gt;
Total Ciphers Enabled: 22&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;phil@fedora12 perl&amp;#93;&lt;/span&gt;$ ./ssl-cipher-check.pl localhost 61616&lt;br/&gt;
Testing localhost:61616&lt;br/&gt;
   SSLv3:RC4-MD5 - ENABLED - STRONG 128 bits &lt;br/&gt;
   SSLv3:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;br/&gt;
   SSLv3:RC4-SHA - ENABLED - STRONG 128 bits &lt;/p&gt;

&lt;p&gt;   TLSv1:RC4-MD5 - ENABLED - STRONG 128 bits &lt;br/&gt;
   TLSv1:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits &lt;br/&gt;
   TLSv1:RC4-SHA - ENABLED - STRONG 128 bits &lt;/p&gt;


&lt;p&gt;WARNING: Self Signed Certificate&lt;br/&gt;
Total Ciphers Enabled: 6&lt;/p&gt;</comment>
                            <comment id="12942368" author="schandrashekar" created="Wed, 31 Mar 2010 03:36:24 +0000"  >&lt;p&gt;Phil,&lt;/p&gt;

&lt;p&gt;So will this fix be available with 5.4.0 ?&lt;/p&gt;</comment>
                            <comment id="12942082" author="gtully" created="Wed, 31 Mar 2010 16:59:52 +0000"  >&lt;p&gt;applied some changes in r929618 to support this so that it will make 5.4&lt;/p&gt;

&lt;p&gt;Phil, I did not apply your patch directly but went back to why the introspector was not working and there was a simple fix to ensure we did not reference the internal tls impl class for reflection. With that change, it is possible to set arbitrary options on SSLServerSocket via transportOptions and with the properties editor to pass a string array argument.&lt;/p&gt;

&lt;p&gt;I added some test that demonstrate. Thanks for your work on this and the patch, it helped &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12942090" author="djencks" created="Thu, 1 Apr 2010 16:34:15 +0000"  >&lt;p&gt;The change introduces a pretty hard dependency on spring classes, otherwise unnecessary to run amq (geronimo is running amq under aries bluerpint).  Geronimo has some code that produces a StringArrayEditor, I&apos;ll look into porting it.&lt;/p&gt;</comment>
                            <comment id="12942096" author="djencks" created="Thu, 1 Apr 2010 16:57:10 +0000"  >&lt;p&gt;Adapted geronimo code for StringArrayEditor in rev 930041.&lt;/p&gt;</comment>
                            <comment id="12941332" author="mwc_tonesoft" created="Fri, 9 Jul 2010 23:29:12 +0000"  >&lt;p&gt;David and Gary,&lt;/p&gt;

&lt;p&gt;I need to backport this fix to 5.3.2, but I can only see IntrospectionSupport.java and StringArrayEditor.java changes in the trunk. The SslTransportServer.java change attached by Phil (SSLEnableCiphers.patch) is not in the trunk.&lt;/p&gt;

&lt;p&gt;What are the changes beside those former two?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;--Michael&lt;/p&gt;</comment>
                            <comment id="12942469" author="gtully" created="Mon, 12 Jul 2010 09:33:03 +0000"  >&lt;p&gt;There are no more changes required. That is it, &lt;a href=&quot;http://fisheye6.atlassian.com/changelog/activemq?cs=929618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fisheye6.atlassian.com/changelog/activemq?cs=929618&lt;/a&gt; and 930041&lt;br/&gt;
Note the test  /activemq/trunk/activemq-core/src/test/java/org/apache/activemq/transport/tcp/SslBrokerServiceTest.java  that will show that it works.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461641" name="SSLEnableCiphers.patch" size="5432" author="phil.pickett@springsource.com" created="Tue, 30 Mar 2010 17:26:57 +0000"/>
                            <attachment id="12461530" name="setSslSocketOptions.patch" size="3284" author="gtully" created="Thu, 17 Sep 2009 15:14:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rq4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>