<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:58:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4364] Cannot delete queue via JMX or JConsole</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4364</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When using the latest 5.9 snapshot, we noticed that queues cannot be deleted via JMX or JConsole. When invoking the removeQueue() method, we get a success status but the queue is not removed.&lt;/p&gt;

&lt;p&gt;This may have been present in older versions and not only this particular snapshot.&lt;/p&gt;</description>
                <environment>&lt;p&gt;activemq-5.9-20130308.055714-20&lt;/p&gt;</environment>
        <key id="12636007">AMQ-4364</key>
            <summary>Cannot delete queue via JMX or JConsole</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="lionel.cons">Lionel Cons</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Mar 2013 11:40:07 +0000</created>
                <updated>Thu, 28 Mar 2013 16:37:30 +0000</updated>
                            <resolved>Thu, 28 Mar 2013 16:37:30 +0000</resolved>
                                                    <fixVersion>5.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13597086" author="gtully" created="Fri, 8 Mar 2013 12:52:30 +0000"  >&lt;p&gt;I just did a sanity on a new build of trunk and it works ok. Also I increased the logging in a relevant test&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to validate it it works ok.&lt;br/&gt;
Is there any chance there is concurrent access to that destination.&lt;/p&gt;

&lt;p&gt;Test case: &lt;a href=&quot;https://fisheye6.atlassian.com/changelog/activemq?cs=1454333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/changelog/activemq?cs=1454333&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13597113" author="lionel.cons" created="Fri, 8 Mar 2013 13:21:26 +0000"  >&lt;p&gt;Gary, the broker has no clients using the queues we tried to delete. Could it be some kind of corruption of the store (KahaDB for us)?&lt;/p&gt;</comment>
                            <comment id="13606222" author="lionel.cons" created="Tue, 19 Mar 2013 10:52:22 +0000"  >&lt;p&gt;FWIW, I&apos;ve tried again with a more recent snapshot (activemq-5.9-20130315.115006-23) and the problem is still present.&lt;/p&gt;

&lt;p&gt;To reproduce it:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;wipe out the message store&lt;/li&gt;
	&lt;li&gt;start the broker&lt;/li&gt;
	&lt;li&gt;start test clients to use some queues, wait until they finish&lt;/li&gt;
	&lt;li&gt;delete the queues via JMX or JConsole -&amp;gt; they do not get removed&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13606408" author="tabish121" created="Tue, 19 Mar 2013 15:32:03 +0000"  >&lt;p&gt;Just tried it here on a fresh build and its working fine, followed the steps given and Queues are deleted without issue. &lt;/p&gt;</comment>
                            <comment id="13607367" author="lionel.cons" created="Wed, 20 Mar 2013 07:32:55 +0000"  >&lt;p&gt;Could this be linked to the message store? We use kahaDB with the following parameters:&lt;/p&gt;

&lt;p&gt;    &amp;lt;persistenceAdapter&amp;gt;&lt;br/&gt;
      &amp;lt;kahaDB directory=&quot;/some/where/kahadb&quot; enableJournalDiskSyncs=&quot;false&quot; indexCacheSize=&quot;1000&quot; indexWriteBatchSize=&quot;10000&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/persistenceAdapter&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13608957" author="tabish121" created="Thu, 21 Mar 2013 14:10:28 +0000"  >&lt;p&gt;Seems doubtful given that you started with a clean KahaDB, you can always go back to default settings and test.  &lt;/p&gt;</comment>
                            <comment id="13608990" author="lionel.cons" created="Thu, 21 Mar 2013 14:36:23 +0000"  >&lt;p&gt;Via trial and error, it seems that the following line is causing us problems:&lt;/p&gt;

&lt;p&gt;      &amp;lt;jaasDualAuthenticationPlugin configuration=&quot;activemq-domain&quot; sslConfiguration=&quot;activemq-ssl-domain&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Without it, queue deletion works. With it, it does not.&lt;/p&gt;

&lt;p&gt;Do you see the same behavior?&lt;/p&gt;</comment>
                            <comment id="13609001" author="tabish121" created="Thu, 21 Mar 2013 14:52:41 +0000"  >&lt;p&gt;Can you throw together a unit test that reproduces it?  &lt;/p&gt;</comment>
                            <comment id="13615404" author="lionel.cons" created="Wed, 27 Mar 2013 15:39:00 +0000"  >&lt;p&gt;jaasDualAuthenticationPlugin is quite complex to setup.&lt;/p&gt;

&lt;p&gt;I&apos;ve tried to patch activemq-unit-tests/src/test/java/org/apache/activemq/bugs/AMQ4126Test.java for it (see attached).&lt;br/&gt;
The new test fails on the last assert, indicating that the queue still exists.&lt;/p&gt;

&lt;p&gt;BTW, I also had to modify activemq-unit-tests/src/test/resources/org/apache/activemq/bugs/amq4126/JaasStompSSLBroker.xml to set useJmx=true...&lt;/p&gt;</comment>
                            <comment id="13616403" author="tabish121" created="Thu, 28 Mar 2013 16:37:30 +0000"  >&lt;p&gt;Fixed, will show up in next SNAPSHOT&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12575720" name="AMQ4126Test.patch" size="1908" author="lionel.cons" created="Wed, 27 Mar 2013 15:39:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1im3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>