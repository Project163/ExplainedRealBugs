<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:45:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7091] O(n) Memory consumption when broker has inactive durable subscribes causing OOM</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7091</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Hi &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;One of&#160;our brokers was bouncing indefinitely due OOM even though the load (TPS) was pretty low.&lt;/p&gt;

&lt;p&gt;Getting the memory dump I could see that almost 90% of the memory was being used by &lt;a href=&quot;https://github.com/apache/activemq/blob/master/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java#L2368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;messageReferences&lt;/a&gt; TreeMap to keep track of what messages were already acked by all Subscribes in order to delete them.&lt;/p&gt;

&lt;p&gt;This seems to be a problem as if the broker has an inactive durable subscribe, the memory footprint increase proportionally (O) with the number of messages sent to&#160;the topic in question, causing the broker to die due OOM sooner or later (the high memory footprint continue even after a restart).&lt;/p&gt;

&lt;p&gt;You can find attached (memoryAllocation.jpg) a screen shot showing&#160;my broker using 90% of the memory to keep track of those messages, making&#160;it barely&#160;usable.&lt;/p&gt;

&lt;p&gt;Looking at the code, I could do a change to change the messageReferences to use a BTreeIndex:&lt;/p&gt;

&lt;p&gt;final TreeMap&amp;lt;Long, Long&amp;gt; messageReferences = new TreeMap&amp;lt;&amp;gt;();&lt;br/&gt;
 + BTreeIndex&amp;lt;Long, Long&amp;gt; messageReferences;&lt;/p&gt;

&lt;p&gt;Making this change, the memory allocation of the broker stabilized and the broker didn&apos;t run OOM anymore.&lt;/p&gt;

&lt;p&gt;Attached you can see the code that I used to reproduce this scenario, also the memory utilization (HEAP and GC graphs) before and after this change.&lt;/p&gt;

&lt;p&gt;Before the change the broker died in 5 minutes and I could send 480000. After then change the broker was still pretty healthy after 5 minutes and i could send 2265000 to the topic (almost 5x more due high GC pauses).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;All test are passing: mvn clean install -Dactivemq.tests=all&lt;/p&gt;</description>
                <environment></environment>
        <key id="13196142">AMQ-7091</key>
            <summary>O(n) Memory consumption when broker has inactive durable subscribes causing OOM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alanprot">Alan Protasio</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Nov 2018 22:39:27 +0000</created>
                <updated>Thu, 16 May 2019 11:57:40 +0000</updated>
                            <resolved>Mon, 12 Nov 2018 21:57:29 +0000</resolved>
                                    <version>5.15.7</version>
                                    <fixVersion>5.15.8</fixVersion>
                    <fixVersion>5.16.0</fixVersion>
                                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16674544" author="githubbot" created="Sun, 4 Nov 2018 22:49:51 +0000"  >&lt;p&gt;GitHub user alanprot opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7091&quot; title=&quot;O(n) Memory consumption when broker has inactive durable subscribes causing OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7091&quot;&gt;&lt;del&gt;AMQ-7091&lt;/del&gt;&lt;/a&gt; - O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Memory consumption when broker has inactive durable s&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ubscribes causing OOM&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/alanprot/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/alanprot/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7091&quot; title=&quot;O(n) Memory consumption when broker has inactive durable subscribes causing OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7091&quot;&gt;&lt;del&gt;AMQ-7091&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/315.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #315&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 29dde9fa81be3bd20fd840daa178259e74cc032e&lt;br/&gt;
Author: Alan Protasio &amp;lt;alanprot@...&amp;gt;&lt;br/&gt;
Date:   2018-11-04T06:22:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7091&quot; title=&quot;O(n) Memory consumption when broker has inactive durable subscribes causing OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7091&quot;&gt;&lt;del&gt;AMQ-7091&lt;/del&gt;&lt;/a&gt; - O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Memory consumption when broker has inactive durable subscribes causing OOM&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16676851" author="jgoodyear" created="Tue, 6 Nov 2018 14:50:34 +0000"  >&lt;p&gt;The patch looks good to me - thank you Alan.&lt;/p&gt;</comment>
                            <comment id="16676855" author="gtully" created="Tue, 6 Nov 2018 14:53:53 +0000"  >&lt;p&gt;that info does not need to be persisted, it is duplicate info. I would like to understand the tradeoff - that in mem reference map was introduced as on optimisation via: &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-3467&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-3467&lt;/a&gt;&#160;in 2011 but is in memory only to be fast. It may be possible to squash that map to a sequenceSet of offsets that share a reference count which would address the mem usage without the need to persist to disk.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The implications of additional page writes on every add/ack may be significant for the simple fanout (when users keep up) case. Typically the broker has plenty of memory for this sort of thing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16676857" author="jgoodyear" created="Tue, 6 Nov 2018 14:56:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve reviewed Alan&apos;s patch and it looks good.&lt;/p&gt;

&lt;p&gt;The bump in KahaDB version to 7 on Master would open the door to us doing some more changes to KahaDB/MessageDatabase (perhaps some gentle refactoring). &lt;/p&gt;

&lt;p&gt;I&apos;d like to know what you think.&lt;/p&gt;</comment>
                            <comment id="16676861" author="jgoodyear" created="Tue, 6 Nov 2018 14:59:23 +0000"  >&lt;p&gt;Thanks Gary.&lt;/p&gt;</comment>
                            <comment id="16677021" author="jgoodyear" created="Tue, 6 Nov 2018 17:09:31 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanprot&quot; class=&quot;user-hover&quot; rel=&quot;alanprot&quot;&gt;alanprot&lt;/a&gt;, &lt;/p&gt;

&lt;p&gt;After some conversation with the community, the SeuqnceSet in AMQ is good to use for this scenario, because then we can control the sizes and toss them when memory is short: &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/activemq/blob/master/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/SequenceSet.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/master/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/disk/util/SequenceSet.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please have a look at the above, and lets update your PR.&lt;/p&gt;</comment>
                            <comment id="16677145" author="alanprot" created="Tue, 6 Nov 2018 18:37:28 +0000"  >&lt;p&gt;Cool! Thanks guys to looking into that...&lt;/p&gt;

&lt;p&gt;I will change my PR! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks again!!! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16677471" author="alanprot" created="Wed, 7 Nov 2018 00:54:31 +0000"  >&lt;p&gt;Hi Guys....&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I changed my PR to use the SequenceSets that already exists in the index...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq/pull/315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m running all the tests now...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="16678599" author="alanprot" created="Wed, 7 Nov 2018 18:21:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgoodyear&quot; class=&quot;user-hover&quot; rel=&quot;jgoodyear&quot;&gt;jgoodyear&lt;/a&gt; Seems that all tests succeed! &lt;/p&gt;

&lt;p&gt;If you guys think that getting this from the ListIndex&amp;lt;String, SequenceSet&amp;gt; ackPositions is expensive I can create a TreeMap&amp;lt;String, SequenceSet&amp;gt; to keep it in memory.. but I think having this duplicate information can be error prone. And also we are already accessing this index in the code... the only overhead is when you ack a message instead o getting the sequenceSet only for the subscriber that is acking we have to get the sequenceSet for all subscribers..&lt;/p&gt;

&lt;p&gt;See &quot;isSequenceReferenced&quot; method.&lt;/p&gt;</comment>
                            <comment id="16678790" author="gtully" created="Wed, 7 Nov 2018 21:23:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanprot&quot; class=&quot;user-hover&quot; rel=&quot;alanprot&quot;&gt;alanprot&lt;/a&gt; you have to ask the computer to see if there is any negative performance impact. This reference count in memory is an optimisation introduced for a performance issue, probably a&#160;typical fanout case with lots of subs. See the linked issue. This issue is about that cache being unbounded in terms of memory usage, the solution is to have the data in the pageFile and pageCache&#160;such that it can get flushed from memory at the cost of accessing from pages in normal operation.&lt;/p&gt;

&lt;p&gt;I&#160;would like to see the actual trade off in publish/ack latency quantified. It may well be negligible; but we need to respect the original use case to verify.&lt;/p&gt;

&lt;p&gt;In addition, if this warrants a version update, the auto migration path needs to be validated.&lt;/p&gt;</comment>
                            <comment id="16678860" author="alanprot" created="Wed, 7 Nov 2018 22:11:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks again! haha &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;the solution is to have the data in the pageFile and pageCache such that it can get flushed from memory at the cost of accessing from pages in normal operation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Did you see my last proposed change? This change does not requite new index version (kahadb) and will not write anything new to the index.&lt;/p&gt;

&lt;p&gt;I dont know why the bot didn&apos;t add the comment (updated the PR) here but i&apos;m not&#160;adding a new Btree Index&#160;anymore... I&apos;m reusing the data that is already there:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq/pull/315/commits/98d1be6acaee79f9acd72d2c7c2bdb2358638e18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315/commits/98d1be6acaee79f9acd72d2c7c2bdb2358638e18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We already have this information in other format in the&#160;ListIndex&amp;lt;String, SequenceSet&amp;gt; ackPositions; So i&apos;m using it.&lt;/p&gt;

&lt;p&gt;My comment before was.... nowadays to discover if one message is referenced by one subscribe we only do a&#160;sd.messageReferences.get(sequenceId) and check if the reference count is 0.&lt;/p&gt;

&lt;p&gt;With my change,&#160;&#160;we will do when acking a message something similar with that we already do when sending a message.&lt;/p&gt;

&lt;p&gt;See:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq/blob/master/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java#L2924&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/master/activemq-kahadb-store/src/main/java/org/apache/activemq/store/kahadb/MessageDatabase.java#L2924&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq/pull/315/commits/98d1be6acaee79f9acd72d2c7c2bdb2358638e18#diff-e3b8fff8c2133dfd70999705bbb558b3R2935&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315/commits/98d1be6acaee79f9acd72d2c7c2bdb2358638e18#diff-e3b8fff8c2133dfd70999705bbb558b3R2935&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16679987" author="jgenender" created="Thu, 8 Nov 2018 16:32:42 +0000"  >&lt;p&gt;This looks good to me...the additional writes are gone.&#160; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;, since you are the resident expert in this area, please let us know what you think?&lt;/p&gt;</comment>
                            <comment id="16680307" author="alanprot" created="Thu, 8 Nov 2018 19:53:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I did some performance tests before and after the change:&lt;/p&gt;

&lt;p&gt;The test scenarios were:&lt;/p&gt;

&lt;p&gt;1, 10, 100 Consumers&lt;/p&gt;

&lt;p&gt;Producing and consuming messages in parallel&lt;/p&gt;

&lt;p&gt;Producing all message before starting the consumers&#160;&lt;/p&gt;

&lt;p&gt;The results are here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/alanprot/activemq/blob/master/AMQ-7091.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/alanprot/activemq/blob/master/AMQ-7091.md&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I used&#160;KahaDBDurableTopicTest as base for this test.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Seems that this change does not have impact performance wise.&lt;/p&gt;</comment>
                            <comment id="16683923" author="gtully" created="Mon, 12 Nov 2018 15:18:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tabish121&quot; class=&quot;user-hover&quot; rel=&quot;tabish121&quot;&gt;tabish121&lt;/a&gt; Hi tim, you added the messageReferences cache way back in &lt;a href=&quot;https://github.com/apache/activemq/commit/943db3c3cb12b4c4504b4966135cf9a0cc69f0ba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/commit/943db3c3cb12b4c4504b4966135cf9a0cc69f0ba&lt;/a&gt; - this PR proposed to remove that cache b/c it can grow unlimited with the number of pending messages, even it is a just two Longs per message it can be significant.&lt;br/&gt;
Can you recall the use case that caused that cache to be introduced? I ask b/c it is under threat with this change.&lt;br/&gt;
It may be that the need for the cache is offset by the changes to what is in the index , or it may be that with the change to what is stored, the cache is more important. &lt;br/&gt;
My guess is that if it is important you may recall, hense the redirect.&lt;/p&gt;</comment>
                            <comment id="16683962" author="jgenender" created="Mon, 12 Nov 2018 15:44:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;, what if the change was a configuration property? i.e. you can have the cache or you can set the property to do what is being proposed here?&#160; So for those strapped for memory, they can just disable the cache?&lt;/p&gt;</comment>
                            <comment id="16684019" author="tabish121" created="Mon, 12 Nov 2018 16:15:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt; I&apos;m afraid I don&apos;t recall any longer what the context was for that work.&#160;&lt;/p&gt;</comment>
                            <comment id="16684081" author="gtully" created="Mon, 12 Nov 2018 16:57:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tabish121&quot; class=&quot;user-hover&quot; rel=&quot;tabish121&quot;&gt;tabish121&lt;/a&gt; thanks. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgenender&quot; class=&quot;user-hover&quot; rel=&quot;jgenender&quot;&gt;jgenender&lt;/a&gt; Probably no need for any config option then. let it run as is.&lt;/p&gt;</comment>
                            <comment id="16684375" author="jira-bot" created="Mon, 12 Nov 2018 21:21:13 +0000"  >&lt;p&gt;Commit 9012a7871b77da6ecdc403f6b44ef0221345bfb7 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanprot&quot; class=&quot;user-hover&quot; rel=&quot;alanprot&quot;&gt;alanprot&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9012a78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9012a78&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7091&quot; title=&quot;O(n) Memory consumption when broker has inactive durable subscribes causing OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7091&quot;&gt;&lt;del&gt;AMQ-7091&lt;/del&gt;&lt;/a&gt; - O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Memory consumption when broker has inactive durable subscribes causing OOM&lt;/p&gt;</comment>
                            <comment id="16684377" author="githubbot" created="Mon, 12 Nov 2018 21:23:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/315&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16684381" author="jira-bot" created="Mon, 12 Nov 2018 21:32:33 +0000"  >&lt;p&gt;Commit 71ce081157a0c4bd007cdf58d68e2e0784f87956 in activemq&apos;s branch refs/heads/activemq-5.15.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanprot&quot; class=&quot;user-hover&quot; rel=&quot;alanprot&quot;&gt;alanprot&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=71ce081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=71ce081&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7091&quot; title=&quot;O(n) Memory consumption when broker has inactive durable subscribes causing OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7091&quot;&gt;&lt;del&gt;AMQ-7091&lt;/del&gt;&lt;/a&gt; - O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Memory consumption when broker has inactive durable subscribes causing OOM&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 9012a7871b77da6ecdc403f6b44ef0221345bfb7)&lt;/p&gt;</comment>
                            <comment id="16684398" author="jgoodyear" created="Mon, 12 Nov 2018 21:56:08 +0000"  >&lt;p&gt;Thank you Alan Protasio for the PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12862989">AMQ-5960</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12946841" name="After.png" size="367510" author="alanprot" created="Sun, 4 Nov 2018 22:40:01 +0000"/>
                            <attachment id="12946842" name="Before.png" size="328129" author="alanprot" created="Sun, 4 Nov 2018 22:40:01 +0000"/>
                            <attachment id="12946843" name="InactiveDurableSubscriberTest.java" size="3229" author="alanprot" created="Sun, 4 Nov 2018 22:41:40 +0000"/>
                            <attachment id="12946840" name="memoryAllocation.jpg" size="44339" author="alanprot" created="Sun, 4 Nov 2018 22:39:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s003w8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>