<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:39:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1098] Use of https transport throws ClassCastException</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1098</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Trying to run the sample producer out of the main trunk using an https url throws a ClassCastException.  I&apos;ve tracked this down in the code to the fact that HttpTransportFactory.java expects to find an HttpClientTransport but HttpsTransportFactory does not override createTransport() to create an HttpsClientTransport instead (HttpsClientTransport does not exist as a class).&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Hernan&lt;/p&gt;

&lt;p&gt;$ ant producer&lt;br/&gt;
Buildfile: build.xml&lt;/p&gt;

&lt;p&gt;init:&lt;/p&gt;

&lt;p&gt;compile:&lt;/p&gt;

&lt;p&gt;producer:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Running producer against server at $url = &lt;a href=&quot;https://my.example.com:2222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://my.example.com:2222&lt;/a&gt; for subject $subject = TEST.FOO&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Connecting to URL: &lt;a href=&quot;https://my.example.com:7043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://my.example.com:7043&lt;/a&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Publishing a Message with size 1000 to topic: TEST.FOO&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Using non-persistent messages&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Sleeping between publish 0 ms&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; javax.jms.JMSException: Could not create Transport. Reason: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Caught: javax.jms.JMSException: Could not create Transport. Reason: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:33)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:229)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:242)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:211)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:158)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at ProducerTool.run(Unknown Source)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at ProducerTool.main(Unknown Source)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Caused by: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.http.HttpTransportFactory.compositeConfigure(HttpTransportFactory.java:62)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFactory.configure(TransportFactory.java:213)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFactory.doConnect(TransportFactory.java:117)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFactory.doConnect(TransportFactory.java:43)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFactory.connect(TransportFactory.java:77)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:227)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     ... 5 more&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 2 seconds&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu Linux &amp;amp; Mac OS X&lt;/p&gt;</environment>
        <key id="12482773">AMQ-1098</key>
            <summary>Use of https transport throws ClassCastException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="hernan.otero">Hernan Otero</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Dec 2006 17:30:26 +0000</created>
                <updated>Mon, 22 Dec 2008 13:34:23 +0000</updated>
                            <resolved>Mon, 22 Dec 2008 13:34:23 +0000</resolved>
                                    <version>incubation</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Transport</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12939551" author="jsilva" created="Thu, 10 Apr 2008 19:52:25 +0000"  >&lt;p&gt;Attached in amq-1098potentialpatch.zip are a few fixed files that appear to address the classcastexception...basically made an httpsclienttransport which just extends the existing HttpClientTransport.  Because the underlying HttpClient works with http and https, there are no further changes needed.  Then in the HttpsTransportFactory I return the newly created httpsclienttransport...since it extends the httpclienttransport there is no longer the classcastexception.  Tested and seems to work for my purposes, patch against v4.1.1.&lt;/p&gt;</comment>
                            <comment id="12939606" author="chirino" created="Thu, 24 Apr 2008 17:40:07 +0000"  >&lt;p&gt;patch applied in rev 651320.. Thanks!&lt;/p&gt;</comment>
                            <comment id="12939701" author="joef" created="Mon, 26 May 2008 15:41:21 +0000"  >&lt;p&gt;HttpsTransportFactory does not override doBind(URI location); therefore, HttpTransportFactory&apos;s doBind(URI location) is referenced instead. So a &apos;https://&apos; transportConnector ends up using a HttpTransportServer instead of HttpsTransportServer object. &lt;/p&gt;</comment>
                            <comment id="12939980" author="jsilva" created="Mon, 21 Jul 2008 18:08:08 +0000"  >&lt;p&gt;Original patch resolves issue for 4.1.1, additionally applying Joe&apos;s patch seems to resolve issues in 5.1.0&lt;/p&gt;</comment>
                            <comment id="12940591" author="gtully" created="Mon, 22 Dec 2008 13:34:23 +0000"  >&lt;p&gt;patch applied to trunk, r728687 thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460984" name="HttpsTransportFactory.txt" size="703" author="joef" created="Mon, 26 May 2008 15:45:13 +0000"/>
                            <attachment id="12460978" name="amq-1098potentialpatch.zip" size="2298" author="jsilva" created="Thu, 10 Apr 2008 19:52:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84249</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14bkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233339</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>