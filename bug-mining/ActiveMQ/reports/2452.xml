<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:07:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4727] Unable to add camel routes to activemq running in a karaf container</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4727</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;gtully: noconnor: there is a pax exam test on apache trunk that validates the karaf features - see the xml &lt;a href=&quot;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/resources/org/apache/activemq/karaf/itest/activemq-nd-camel.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/resources/org/apache/activemq/karaf/itest/activemq-nd-camel.xml&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:35am&amp;#93;&lt;/span&gt; gtully: in 6.0 u can try the same - just embed a context&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:36am&amp;#93;&lt;/span&gt; gtully: so modify etc/activemq.xml&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:36am&amp;#93;&lt;/span&gt; noconnor: gtully: thanks, trying it now&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:44am&amp;#93;&lt;/span&gt; noconnor: gtully: same issue again, &quot;bundle context must be specified&quot;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:49am&amp;#93;&lt;/span&gt; gtully: noconnor: i see the same thing with the test on trunk&#8230; need to investigate that a bit&#8230;can u raise an amq issue&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;07:51am&amp;#93;&lt;/span&gt; gtully: noconnor: on trunk that can be reproduced with mvn test -Dtest=ActiveMQBrokerNdCamelFeatureTest in the activemq-karaf-itest module&lt;/p&gt;


&lt;p&gt;Exception on start: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;activemq&apos; defined in file [/opt/jboss-amq/jboss-a-mq-6.0.0.redhat-024&lt;br/&gt;
/etc/activemq.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;camel&apos;: Invocation&lt;br/&gt;
of init method failed; nested exception is java.lang.IllegalArgumentException: BundleContext must be specified&lt;br/&gt;
org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;activemq&apos; defined in file &lt;span class=&quot;error&quot;&gt;&amp;#91;/opt/jboss-amq/jboss-a-mq-6.0.0.redhat-024/etc/activemq.xml&amp;#93;&lt;/span&gt;: I&lt;br/&gt;
nitialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;camel&apos;: Invocation of init method failed&lt;br/&gt;
; nested exception is java.lang.IllegalArgumentException: BundleContext must be specified&lt;/p&gt;


&lt;p&gt;Also I had to add the activemq-camel feature to org.apache.karaf.features.cfg to get the namespaces resolved&lt;/p&gt;


</description>
                <environment>&lt;p&gt;jboss-amq-6.0 on Red Hat Enterprise Linux Server release 6.4 (Santiago)&lt;/p&gt;</environment>
        <key id="12669344">AMQ-4727</key>
            <summary>Unable to add camel routes to activemq running in a karaf container</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="noelo">Noel O&apos;Connor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Sep 2013 22:09:06 +0000</created>
                <updated>Wed, 31 May 2017 11:52:41 +0000</updated>
                            <resolved>Wed, 31 May 2017 11:52:41 +0000</resolved>
                                    <version>5.8.0</version>
                                    <fixVersion>5.9.0</fixVersion>
                                    <component>Camel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13783767" author="davsclaus" created="Wed, 2 Oct 2013 09:28:40 +0000"  >&lt;p&gt;The karaf tests passes on trunk now&lt;/p&gt;</comment>
                            <comment id="14081252" author="gtully" created="Thu, 31 Jul 2014 18:40:02 +0000"  >&lt;p&gt;This test fails on trunk. I wonder what resolved it last time?&lt;/p&gt;</comment>
                            <comment id="14082111" author="gtully" created="Fri, 1 Aug 2014 10:04:32 +0000"  >&lt;p&gt;seems it fails with jdk7 and works with jdk6&lt;/p&gt;</comment>
                            <comment id="14082184" author="gtully" created="Fri, 1 Aug 2014 12:20:15 +0000"  >&lt;p&gt;not sure what was wrong  - but all is good now.&lt;br/&gt;
pulling in pax exam 3.4 to remove some deprecated usage.&lt;/p&gt;</comment>
                            <comment id="14285864" author="gtully" created="Wed, 21 Jan 2015 16:52:14 +0000"  >&lt;p&gt;This camel (both embedded and external) itests fail on trunk with &quot;BundleContext null&quot; problem.&lt;/p&gt;

&lt;p&gt;If camel-osgi does not get to install its bean processor, the use of the bundle context is avoided and it works.&lt;br/&gt;
There is some ordering or extra dependency related problem but I have not been able to track it down.&lt;br/&gt;
It fails all the time with  karaf 4.2.1 so the test has an @Ignore&lt;/p&gt;</comment>
                            <comment id="14285871" author="jbonofre" created="Wed, 21 Jan 2015 16:54:33 +0000"  >&lt;p&gt;I gonna take a look (sorry I forgot).&lt;/p&gt;</comment>
                            <comment id="14287369" author="gtully" created="Thu, 22 Jan 2015 12:54:50 +0000"  >&lt;p&gt;JB thanks - there are two strange things with the itests at the moment. that point to something being wrong in the way pax exam is setting up the container (i think). I guess it is being misconfigured - but I can&apos;t see the problem after comparing to karaf/camel/fabric8 etc &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
 a) feature add war fails (needed by the broker web dependency) - but works on a vanilla karaf distro&lt;br/&gt;
    the workaround is to manually install the bundles that it requires. That does not seem right to me.&lt;br/&gt;
   see: &lt;a href=&quot;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ObrFeatureTest.java#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ObrFeatureTest.java#L42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;b) for the camel route dropped into the deploy folder - it does not get deployed for some reason&lt;br/&gt;
 see: &lt;a href=&quot;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ActiveMQBrokerNdExternalCamelFeatureTest.java#L47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/trunk/activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ActiveMQBrokerNdExternalCamelFeatureTest.java#L47&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For the embedded camel case, this bundlecontext issue. My hope is that there is some correlation between these, but that may not be the case. hope this helps &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14291963" author="gtully" created="Mon, 26 Jan 2015 15:41:10 +0000"  >&lt;p&gt;the embedded case now works ok with the use of OsgiBundleXmlApplicationContext from the karaf service factory.&lt;br/&gt;
Why the external test case fails is still in the wind&lt;/p&gt;</comment>
                            <comment id="16031039" author="davsclaus" created="Wed, 31 May 2017 11:52:41 +0000"  >&lt;p&gt;Old ticket, create new ticket with newer versions of ActiveMQ if you can reproduce any kind of this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o847:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>