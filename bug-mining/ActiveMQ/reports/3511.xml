<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:59:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9726] Fix FilePendingMessageCursor clear() method</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9726</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The clear() method inside of &lt;tt&gt;FilePendingMessageCursor&lt;/tt&gt; is supposed to clear any messages in memory, as well as clear any messages in the disk pending list by destroying it so it can be reset. There are two bugs in this method:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Clearing the memory list does not iterate and decrement each reference so the memory usage tracker is not decremented on clear.&lt;/li&gt;
	&lt;li&gt;When clearing the disk list, the wrong destroy method is used so while the list is correctly destroyed and marked as unloaded, the reference is not nulled out. This means that any future writes to the cursor will throw an exception because the cursor is not loaded. The correct helper method will reset this so that future writes will create a list that is correctly initialized.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The bugs here are not showing up with normal usage because the clear() method is generally only called when destroying a durable (and there is already code to remove the references before calling clear so memory is decremented) however because this method is public and could be easily called in the future it should be fixed so it works correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13620091">AMQ-9726</key>
            <summary>Fix FilePendingMessageCursor clear() method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jun 2025 21:38:33 +0000</created>
                <updated>Thu, 5 Jun 2025 11:24:06 +0000</updated>
                            <resolved>Thu, 5 Jun 2025 11:24:06 +0000</resolved>
                                    <version>5.19.0</version>
                    <version>6.1.6</version>
                                    <fixVersion>6.2.0</fixVersion>
                    <fixVersion>5.19.1</fixVersion>
                    <fixVersion>6.1.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17956318" author="jira-bot" created="Thu, 5 Jun 2025 11:18:59 +0000"  >&lt;p&gt;Commit b1e8441ca93f0aefa8817c6923cc4741b757da3a in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b1e8441ca9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b1e8441ca9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9726&quot; title=&quot;Fix FilePendingMessageCursor clear() method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9726&quot;&gt;&lt;del&gt;AMQ-9726&lt;/del&gt;&lt;/a&gt; - Fix FilePendingMessageCursor clear() method (#1452)&lt;/p&gt;

&lt;p&gt;This fixes the clear() method so that when clearing the memory map it&lt;br/&gt;
will decrement memory usage, and when clearing the disk list it&lt;br/&gt;
will destroy and reset the list for future writes.&lt;/p&gt;</comment>
                            <comment id="17956319" author="jira-bot" created="Thu, 5 Jun 2025 11:22:39 +0000"  >&lt;p&gt;Commit 990a8d6bf642331f239dbfc704588cc847f90b3e in activemq&apos;s branch refs/heads/activemq-6.1.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=990a8d6bf6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=990a8d6bf6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9726&quot; title=&quot;Fix FilePendingMessageCursor clear() method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9726&quot;&gt;&lt;del&gt;AMQ-9726&lt;/del&gt;&lt;/a&gt; - Fix FilePendingMessageCursor clear() method (#1452)&lt;/p&gt;

&lt;p&gt;This fixes the clear() method so that when clearing the memory map it&lt;br/&gt;
will decrement memory usage, and when clearing the disk list it&lt;br/&gt;
will destroy and reset the list for future writes.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b1e8441ca93f0aefa8817c6923cc4741b757da3a)&lt;/p&gt;</comment>
                            <comment id="17956320" author="jira-bot" created="Thu, 5 Jun 2025 11:23:57 +0000"  >&lt;p&gt;Commit d1b7e8ae5f434da480ab66f65e6e0b3a8ff048fc in activemq&apos;s branch refs/heads/activemq-5.19.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d1b7e8ae5f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d1b7e8ae5f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9726&quot; title=&quot;Fix FilePendingMessageCursor clear() method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9726&quot;&gt;&lt;del&gt;AMQ-9726&lt;/del&gt;&lt;/a&gt; - Fix FilePendingMessageCursor clear() method (#1452)&lt;/p&gt;

&lt;p&gt;This fixes the clear() method so that when clearing the memory map it&lt;br/&gt;
will decrement memory usage, and when clearing the disk list it&lt;br/&gt;
will destroy and reset the list for future writes.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b1e8441ca93f0aefa8817c6923cc4741b757da3a)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1w6vk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>