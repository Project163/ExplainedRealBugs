<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:31:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-734] Network connections do not reconnect when using static: with failover=true</title>
                <link>https://issues.apache.org/jira/browse/AMQ-734</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;If I pull out RJ45 port from net card ,waiting a time ,then put  RJ45 port net card .Network is resume.Other computer always throw errors and net channel can&apos;t work.&lt;/p&gt;</description>
                <environment>&lt;p&gt;winxp java1.5.6&lt;/p&gt;</environment>
        <key id="12481897">AMQ-734</key>
            <summary>Network connections do not reconnect when using static: with failover=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chirino">Hiram R. Chirino</assignee>
                                    <reporter username="taoyonggang">tao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 May 2006 15:30:38 +0000</created>
                <updated>Wed, 7 Mar 2007 15:25:14 +0000</updated>
                            <resolved>Wed, 7 Mar 2007 15:25:14 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1.1</fixVersion>
                    <fixVersion>5.0.0</fixVersion>
                                    <component>Connector</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12938060" author="j_cooper" created="Sun, 4 Jun 2006 21:47:37 +0000"  >&lt;p&gt;(using active-mq-snapshot-30-may / linux)&lt;/p&gt;

&lt;p&gt;Some comments:&lt;/p&gt;

&lt;p&gt;Given a network of brokers in a demand forwarding environment: Broker A + Broker B in a &lt;em&gt;real&lt;/em&gt; network on different hosts (a lot of bugs are not reproducable in a localhost-environment)&lt;/p&gt;

&lt;p&gt;UseCase 1:&lt;br/&gt;
Start Broker A&lt;br/&gt;
Start Broker B&lt;br/&gt;
Do a network-split (aka &quot;unplugging the cable&quot;) &lt;span class=&quot;error&quot;&gt;&amp;#91;There is an exception attached that will be generated in such a case&amp;#93;&lt;/span&gt;&lt;br/&gt;
Create new message m1 on Broker A (that is stored for later delivery)&lt;br/&gt;
Reconnect network&lt;br/&gt;
Brokers will reconnect with exception (see below)&lt;/p&gt;

&lt;p&gt;It is actually possible to LOSE MESSAGES that way. I found out that under certain circumstances message m1 will not be delivered. Even restarting every broker does not help in such a case. &lt;/p&gt;


&lt;p&gt;EXCEPTION ON UPLUGGING:&lt;br/&gt;
INFO Service:185 - Async error occurred: java.lang.IllegalStateException: Cannot lookup a connection that had not been registered: ID:develop-43781-1149388950450-3:0&lt;br/&gt;
java.lang.IllegalStateException: Cannot lookup a connection that had not been registered: ID:develop-43781-1149388950450-3:0&lt;br/&gt;
	at org.apache.activemq.broker.AbstractConnection.lookupConnectionState(AbstractConnection.java:241)&lt;br/&gt;
	at org.apache.activemq.broker.AbstractConnection.processRemoveConnection(AbstractConnection.java:519)&lt;br/&gt;
	at org.apache.activemq.command.RemoveInfo.visit(RemoveInfo.java:59)&lt;br/&gt;
	at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:201)&lt;br/&gt;
	at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:97)&lt;br/&gt;
	at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
	at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:76)&lt;br/&gt;
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)&lt;br/&gt;
	at org.apache.activemq.network.DemandForwardingBridgeSupport$2.transportInterupted(DemandForwardingBridgeSupport.java:138)&lt;br/&gt;
	at org.apache.activemq.transport.TransportFilter.transportInterupted(TransportFilter.java:98)&lt;br/&gt;
	at org.apache.activemq.transport.TransportFilter.transportInterupted(TransportFilter.java:98)&lt;br/&gt;
	at org.apache.activemq.transport.failover.FailoverTransport.handleTransportFailure(FailoverTransport.java:223)&lt;br/&gt;
	at org.apache.activemq.transport.failover.FailoverTransport.access$300(FailoverTransport.java:53)&lt;br/&gt;
	at org.apache.activemq.transport.failover.FailoverTransport$1.onException(FailoverTransport.java:111)&lt;br/&gt;
	at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:94)&lt;br/&gt;
	at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:120)&lt;br/&gt;
	at org.apache.activemq.transport.InactivityMonitor.onException(InactivityMonitor.java:149)&lt;br/&gt;
	at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:100)&lt;br/&gt;
	at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:156)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;/p&gt;

&lt;p&gt;EXCEPTION ON RECONNECTING:&lt;br/&gt;
INFO Service:185 - Async error occurred: javax.jms.InvalidClientIDException: Broker: develop - Client: NC_testbroker_inbounddevelop already connected&lt;br/&gt;
javax.jms.InvalidClientIDException: Broker: develop - Client: NC_testbroker_inbounddevelop already connected&lt;br/&gt;
	at org.apache.activemq.broker.region.RegionBroker.addConnection(RegionBroker.java:176)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:69)&lt;br/&gt;
	at org.apache.activemq.advisory.AdvisoryBroker.addConnection(AdvisoryBroker.java:69)&lt;br/&gt;
	at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:69)&lt;br/&gt;
	at org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:82)&lt;br/&gt;
	at org.apache.activemq.broker.AbstractConnection.processAddConnection(AbstractConnection.java:507)&lt;br/&gt;
	at org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:118)&lt;br/&gt;
	at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:201)&lt;br/&gt;
	at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:97)&lt;br/&gt;
	at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
	at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:76)&lt;br/&gt;
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)&lt;br/&gt;
	at org.apache.activemq.network.DemandForwardingBridgeSupport.startLocalBridge(DemandForwardingBridgeSupport.java:215)&lt;br/&gt;
	at org.apache.activemq.network.DemandForwardingBridgeSupport$3.run(DemandForwardingBridgeSupport.java:184)&lt;/p&gt;


&lt;p&gt;Question: Why is necessary that the localClientId is created in a fixed way?&lt;/p&gt;

&lt;p&gt;  From DemandForwardingBridgeSupport.java:&lt;br/&gt;
    localClientId=&quot;NC_&quot;&lt;ins&gt;remoteBrokerName&lt;/ins&gt;&quot;_inbound&quot;+name;&lt;/p&gt;

&lt;p&gt;How about changing that to e.g.&lt;br/&gt;
    localClientId=&quot;NC_&quot;&lt;ins&gt;remoteBrokerName&lt;/ins&gt;&quot;&lt;em&gt;inbound&quot;+name + &quot;&lt;/em&gt;&quot; + System.currentTimemillis();&lt;/p&gt;

&lt;p&gt;If a broker crashes and is restarted it would have a new ClientId -&amp;gt; no exceptions on reconnect.&lt;/p&gt;</comment>
                            <comment id="12937841" author="rajdavies" created="Fri, 9 Jun 2006 15:31:00 +0000"  >&lt;p&gt;the reason for the fixed client_id is durable topic consumers. The network bridge amalgamates multiple durable subscribers on the same topic in to one durable subscriber - to avoid duplicates and improve performance. &lt;/p&gt;

&lt;p&gt;There is a keep alive protocol used with the tcp connector that should detect the network outage - needs some more investigation to see why this doesn&apos;t appear to be working&lt;/p&gt;</comment>
                            <comment id="12938003" author="chirino" created="Mon, 12 Jun 2006 22:21:02 +0000"  >&lt;p&gt;The subsequent error seems related to the first &quot;Cannot lookup a connection that had not been registered&quot; error.  When a remote connection is &apos;interruted&apos;, the connection fails, the bridge destroys it&apos;s local connection to the local broker to avoid producing a slow consumer situation.&lt;/p&gt;

&lt;p&gt;It seems that the wrong connection id was referred to when the remove command was sent localy.  This is now fix in both trunk and the 4.0 branch.&lt;/p&gt;</comment>
                            <comment id="12937773" author="jgearhart" created="Thu, 20 Jul 2006 17:18:04 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I can reproduce this issue in the 4.0.1 release.  The test is performed as in the original post.  I am producing messages to a queue, from a demandForwarding environment.  One possible difference is the producer is in a stateless session bean under JBoss (ActiveMQ RA version is 4.0.2).&lt;/p&gt;

&lt;p&gt;Here&apos;s the output from the broker..&lt;br/&gt;
---------------------------------------------------------------------------------------------&lt;br/&gt;
D:\ActiveMQ\bin&amp;gt;activemq&lt;br/&gt;
ACTIVEMQ_HOME: d:\ActiveMq&lt;br/&gt;
Loading message broker from: xbean:activemq.xml&lt;br/&gt;
Created MBeanServer with ID: 3dc0bb:10c8cef3623:-8000:fist:1&lt;br/&gt;
INFO  JournalPersistenceAdapter      - Journal deleted:&lt;br/&gt;
INFO  JDBCPersistenceAdapter         - Database driver recognized: &lt;span class=&quot;error&quot;&gt;&amp;#91;apache_derby_embedded_jdbc_driver&amp;#93;&lt;/span&gt;&lt;br/&gt;
INFO  BrokerService                  - ActiveMQ 4.0.1 JMS Message Broker (fist) is starting&lt;br/&gt;
INFO  BrokerService                  - For help or more information please see: &lt;a href=&quot;http://incubator.apache.org/activemq/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://incubator.apache.org/activemq/&lt;/a&gt;&lt;br/&gt;
RMIConnectorServer started at: service:jmx:rmi://fist/jndi/rmi://localhost:16617/jmxrmi&lt;br/&gt;
INFO  ManagementContext              - JMX consoles can connect to service:jmx:rmi://fist/jndi/rmi://localhost:16617/jmxrmi&lt;br/&gt;
INFO  JournalPersistenceAdapter      - Journal Recovery Started from: Active Journal: using 5 x 20.0 Megs at: D:\ActiveMQ\activemq-data\journal&lt;br/&gt;
INFO  JournalPersistenceAdapter      - Journal Recovered: 0 message(s) in transactions recovered.&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: tcp://fist:61616&lt;br/&gt;
INFO  TransportConnector             - Connector default Started&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: tcp://fist:61613?wireFormat=stomp&lt;br/&gt;
INFO  TransportConnector             - Connector stomp Started&lt;br/&gt;
INFO  NetworkConnector               - Establishing network connection between from vm://fist?network=true to failover:tcp://204.62.234.33:61616&lt;br/&gt;
INFO  VMTransportFactory             - binding to broker: fist&lt;br/&gt;
INFO  TransportConnector             - Connector vm://fist Started&lt;br/&gt;
INFO  DemandForwardingBridge         - Starting a network connection between vm://fist#0 and unconnected has been established.&lt;br/&gt;
INFO  NetworkConnector               - Network Connector Burnt Started&lt;br/&gt;
INFO  BrokerService                  - ActiveMQ JMS Message Broker (fist, ID:fist-2678-1153415721687-1:0) started&lt;br/&gt;
INFO  DemandForwardingBridge         - Network connection between vm://fist#0 and tcp://204.62.234.33:61616(burnt) has been established.&lt;br/&gt;
WARN  DemandForwardingBridge         - Outbound transport to burnt interrupted ...&lt;br/&gt;
INFO  DemandForwardingBridge         - Outbound transport to burnt resumed&lt;br/&gt;
INFO  DemandForwardingBridge         - Network connection between vm://fist#0 and tcp://204.62.234.33:61616(burnt) has been established.&lt;br/&gt;
INFO  Service                        - Async error occurred: java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been regis&lt;br/&gt;
tered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.lookupConnectionState(AbstractConnection.java:223)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.processMessageAck(AbstractConnection.java:356)&lt;br/&gt;
        at org.apache.activemq.command.MessageAck.visit(MessageAck.java:178)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:201)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:97)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:76)&lt;br/&gt;
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)&lt;br/&gt;
        at org.apache.activemq.network.DemandForwardingBridgeSupport$5.onCompletion(DemandForwardingBridgeSupport.java:490)&lt;br/&gt;
        at org.apache.activemq.transport.FutureResponse.set(FutureResponse.java:59)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:89)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.failover.FailoverTransport$1.onCommand(FailoverTransport.java:105)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:114)&lt;br/&gt;
        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:122)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:87)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:143)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:534)&lt;br/&gt;
WARN  DemandForwardingBridge         - Unexpected local command: ConnectionError &lt;/p&gt;
{commandId = 7, responseRequired = false, connectionId = null, exception = java
.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1}
&lt;p&gt;INFO  Service                        - Async error occurred: java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been regis&lt;br/&gt;
tered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.lookupConnectionState(AbstractConnection.java:223)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.processMessageAck(AbstractConnection.java:356)&lt;br/&gt;
        at org.apache.activemq.command.MessageAck.visit(MessageAck.java:178)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:201)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:97)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:76)&lt;br/&gt;
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)&lt;br/&gt;
        at org.apache.activemq.network.DemandForwardingBridgeSupport$5.onCompletion(DemandForwardingBridgeSupport.java:490)&lt;br/&gt;
        at org.apache.activemq.transport.FutureResponse.set(FutureResponse.java:59)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:89)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.failover.FailoverTransport$1.onCommand(FailoverTransport.java:105)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:114)&lt;br/&gt;
        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:122)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:87)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:143)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:534)&lt;br/&gt;
WARN  DemandForwardingBridge         - Unexpected local command: ConnectionError &lt;/p&gt;
{commandId = 8, responseRequired = false, connectionId = null, exception = java
.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1}
&lt;p&gt;INFO  Service                        - Async error occurred: java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been regis&lt;br/&gt;
tered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
java.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.lookupConnectionState(AbstractConnection.java:223)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.processMessageAck(AbstractConnection.java:356)&lt;br/&gt;
        at org.apache.activemq.command.MessageAck.visit(MessageAck.java:178)&lt;br/&gt;
        at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:201)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:62)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:97)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:76)&lt;br/&gt;
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)&lt;br/&gt;
        at org.apache.activemq.network.DemandForwardingBridgeSupport$5.onCompletion(DemandForwardingBridgeSupport.java:490)&lt;br/&gt;
        at org.apache.activemq.transport.FutureResponse.set(FutureResponse.java:59)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:89)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:63)&lt;br/&gt;
        at org.apache.activemq.transport.failover.FailoverTransport$1.onCommand(FailoverTransport.java:105)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:114)&lt;br/&gt;
        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:122)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:87)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:143)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:534)&lt;br/&gt;
WARN  DemandForwardingBridge         - Unexpected local command: ConnectionError &lt;/p&gt;
{commandId = 9, responseRequired = false, connectionId = null, exception = java
.lang.IllegalStateException: Cannot lookup a consumer from a connection that had not been registered: ID:fist-2678-1153415721687-3:1}</comment>
                            <comment id="12938620" author="woode" created="Thu, 26 Oct 2006 17:20:17 +0000"  >&lt;p&gt;We can reproduce this issue using the current build of 4.0.2.  We are running a distributed queue between two embedded brokers over an unreliable network (wireless).  We had been using 4.0.1, but the brokers did not reestablish the bridge when it was stopped due to inactivity timeout.  We tried 4.0.2 and it worked great for a while, but eventually one of the reconnect attempts failed.  On the receiver side broker (called CTSServer) we see in the logs wire format negotiation taking place, but on the send side broker (called CTSClient) we get the following in the log:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,236 DEBUG DurableConduitBridge:69 - Forwarding messages for durable destination: queue://TEST.FOO&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,237 DEBUG DemandForwardingBridge:289 -  stopping CTSClient bridge to CTSServer is disposed already ? false&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,240 DEBUG DemandForwardingBridge:308 - CTSClient bridge to CTSServer stopped&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,241 DEBUG DemandForwardingBridge:289 -  stopping CTSClient bridge to CTSServer is disposed already ? true&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,242 DEBUG DemandForwardingBridge:308 - CTSClient bridge to CTSServer stopped&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:12,244  INFO NetworkConnector:96 - Establishing network connection between from vm://CTSClient?network=true to tcp://10.134.0.1:61616&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:15,986 DEBUG WireFormatNegotiator:65 - Sending: WireFormatInfo { version=1, properties=&lt;/p&gt;
{TightEncodingEnabled=true, TcpNoDelayEnabled=true, SizePrefixDisabled=false, StackTraceEnabled=true, MaxInactivityDuration=30000, CacheEnabled=true}
&lt;p&gt;, magic=&lt;span class=&quot;error&quot;&gt;&amp;#91;A,c,t,i,v,e,M,Q&amp;#93;&lt;/span&gt;}&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:15,987 DEBUG TcpTransport:133 - TCP consumer thread starting&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:18,957 DEBUG WireFormatNegotiator:95 - Received WireFormat: WireFormatInfo { version=1, properties=&lt;/p&gt;
{StackTraceEnabled=true, TightEncodingEnabled=true, TcpNoDelayEnabled=true, SizePrefixDisabled=false, MaxInactivityDuration=30000, CacheEnabled=true}
&lt;p&gt;, magic=&lt;span class=&quot;error&quot;&gt;&amp;#91;A,c,t,i,v,e,M,Q&amp;#93;&lt;/span&gt;}&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:18,957 DEBUG WireFormatNegotiator:102 - tcp:///10.134.0.1:61616 before negotiation: OpenWireFormat&lt;/p&gt;
{version=1, cacheEnabled=false, stackTraceEnabled=false, tightEncodingEnabled=false, sizePrefixDisabled=false}
&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:18,958 DEBUG WireFormatNegotiator:113 - tcp:///10.134.0.1:61616 after negotiation: OpenWireFormat&lt;/p&gt;
{version=1, cacheEnabled=true, stackTraceEnabled=true, tightEncodingEnabled=true, sizePrefixDisabled=false}
&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:21,838 DEBUG Service:221 - Async error occurred: javax.jms.InvalidClientIDException: Broker: CTSClient - Client: NC_CTSServer_inboundCTSClient already connected&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; javax.jms.InvalidClientIDException: Broker: CTSClient - Client: NC_CTSServer_inboundCTSClient already connected&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.region.RegionBroker.addConnection(RegionBroker.java:180)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.advisory.AdvisoryBroker.addConnection(AdvisoryBroker.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:83)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.AbstractConnection.processAddConnection(AbstractConnection.java:633)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:120)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:237)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:61)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:92)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:77)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:45)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.network.DemandForwardingBridgeSupport.startLocalBridge(DemandForwardingBridgeSupport.java:225)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.network.DemandForwardingBridgeSupport$3.run(DemandForwardingBridgeSupport.java:191)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:21,840  INFO DemandForwardingBridge:230 - Network connection between vm://CTSClient#728 and tcp:///10.134.0.1:61616(CTSServer) has been established.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:21,851  INFO DemandForwardingBridge:432 - Network connection between vm://CTSClient#728 and tcp:///10.134.0.1:61616 shutdown due to a local error: javax.jms.InvalidClientIDException: Broker: CTSClient - Client: NC_CTSServer_inboundCTSClient already connected&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 12:42:21,854 DEBUG DemandForwardingBridge:433 - The local Exception was:javax.jms.InvalidClientIDException: Broker: CTSClient - Client: NC_CTSServer_inboundCTSClient already connected&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; javax.jms.InvalidClientIDException: Broker: CTSClient - Client: NC_CTSServer_inboundCTSClient already connected&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.region.RegionBroker.addConnection(RegionBroker.java:180)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.advisory.AdvisoryBroker.addConnection(AdvisoryBroker.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:70)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:83)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.AbstractConnection.processAddConnection(AbstractConnection.java:633)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:120)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.AbstractConnection.service(AbstractConnection.java:237)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:61)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:92)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:77)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:45)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.network.DemandForwardingBridgeSupport.startLocalBridge(DemandForwardingBridgeSupport.java:225)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.activemq.network.DemandForwardingBridgeSupport$3.run(DemandForwardingBridgeSupport.java:191)&lt;/p&gt;

&lt;p&gt;This sequence just repeats continuously until the broker is stopped.&lt;/p&gt;</comment>
                            <comment id="12938493" author="woode" created="Fri, 27 Oct 2006 20:56:59 +0000"  >&lt;p&gt;To add some further clarification.  We verified (via logs) that the receive side broker had timed out the send side broker.  Then, when the send side broker tries to reconnect, the receive side broker says &quot;invalid client id&quot; apparently because it did not unregister the client when it timed out?  During this test, we had numerous timeouts and successful recoveries, and then suddenly it broke down.  Looking at the previous posts a little more closely, I am now wondering if this is a different issue?  Should I create a new issue?&lt;/p&gt;</comment>
                            <comment id="12938563" author="jef@tpssys.com" created="Wed, 8 Nov 2006 23:58:03 +0000"  >
&lt;p&gt;   [[ Old comment, sent by email on Fri, 27 Oct 2006 16:09:56 -0500 ]]&lt;/p&gt;

&lt;p&gt;Hi Eric,&lt;/p&gt;

&lt;p&gt;I guess that&apos;s up to you.  I believe the problem you and I both posted, &lt;br/&gt;
however, are side effects of the overall problem.  The failover &lt;br/&gt;
transport &apos;reconnection&apos; works, but restoration of the state of the &lt;br/&gt;
previous connection is broken in multiple places (e.g. subscriptions, &lt;br/&gt;
clientIds).&lt;/p&gt;

&lt;p&gt;I&apos;ve peeked into the code a little bit, and I think both side effects &lt;br/&gt;
could be addressed simultaneously, so my opinion is to just leave both &lt;br/&gt;
descriptions here. &lt;/p&gt;


</comment>
                            <comment id="12938655" author="chirino" created="Tue, 14 Nov 2006 17:21:57 +0000"  >&lt;p&gt;I&apos;ve got a feeling that this was related to the timing issues addressed in issue:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-1044&lt;/a&gt;&lt;br/&gt;
which is now fixed.&lt;/p&gt;

&lt;p&gt;Could one you guys retest against a source build from the 4.1 branch and let me know if it resolves this issue?&lt;/p&gt;</comment>
                            <comment id="12938632" author="woode" created="Mon, 20 Nov 2006 18:21:12 +0000"  >&lt;p&gt;Hiram,&lt;/p&gt;

&lt;p&gt;The issue was intermittent, so the best we can do is run it for long&lt;br/&gt;
periods of time.  So far we have run with 4.1 for over ten hours total,&lt;br/&gt;
failed the network connection about 20 times, including both active and&lt;br/&gt;
natural failures, and it has recovered every time and we had 0 message&lt;br/&gt;
loss.  With 4.0.2 we were successful in reproducing the error nearly&lt;br/&gt;
every time we caused a failure.  So it seems that the problem is&lt;br/&gt;
resolved, but we still want to do more testing.  We are noticing a large&lt;br/&gt;
number of inactivity timeouts.  Our network is fairly low bandwidth/high&lt;br/&gt;
latency, so we were wondering if there is a way, or one could be added,&lt;br/&gt;
to adjust the inactivity timeout value.  We think we could improve our&lt;br/&gt;
throughput if we didn&apos;t timeout so often.  If you&apos;d like, I&apos;ll open a&lt;br/&gt;
separate JIRA case for this.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Eric&lt;/p&gt;
</comment>
                            <comment id="12938516" author="chirino" created="Mon, 20 Nov 2006 18:42:58 +0000"  >&lt;p&gt;No separate jira need.  See: &lt;a href=&quot;http://activemq.com/site/configuring-wire-formats.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.com/site/configuring-wire-formats.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12938529" author="chrish" created="Wed, 22 Nov 2006 15:38:39 +0000"  >&lt;p&gt;I&apos;ve got what I think is a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-734&quot; title=&quot;Network connections do not reconnect when using static: with failover=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-734&quot;&gt;&lt;del&gt;AMQ-734&lt;/del&gt;&lt;/a&gt;.  However, the fix is possibly heavy-handed in its implementation, so I&apos;d like for someone to review it and provide comments regarding any potential unintended side effects.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached to the issue in JIRA a junit case that is able to reproduce the issue 100% of the time as well as the necessary updates to DiscoveryNetworkConnector and DemandForwardingBridgeSupport.&lt;/p&gt;

&lt;p&gt;Basically, the classes were stopping the local broker and bridge whenever any exception was encountered on the transport.  However, some of the exceptions are &quot;ok&quot; and should not result in a stop.  These include InvalidClientIDException, BrokerStoppedException, InvalidStateException, and SocketException.  With the fix, for these specific exceptions, the broker/bridge are not stopped and fireServiceFailed is never called.  For all other exceptions, they still are called.&lt;/p&gt;

&lt;p&gt;In addition, the TransportListener.transportResumed implementation in DemandForwardingBridgeSupport never started the local/remote broker and never called triggerRemoteStartBridge.  With this fix, they now do.&lt;/p&gt;

&lt;p&gt;I&apos;ve run the whole suite of tests and all of the tests that passed prior to my modifications continue to pass.  In addition, the test case attached to the JIRA fails without the fixes and passes with the fixes 100% of the time.&lt;/p&gt;

&lt;p&gt;Comments?  &lt;/p&gt;</comment>
                            <comment id="12938696" author="woode" created="Wed, 22 Nov 2006 15:51:16 +0000"  >&lt;p&gt;We ran extensively this week with our encryption hardware because we wanted to confirm that didn&apos;t cause an issue.  So far I would say we have run for about 25 hours total, had well over 30 network failures and it has recovered every time.  At this point we believe that our issue is fixed by 4.1.  Thanks for the quick turnaround.&lt;/p&gt;</comment>
                            <comment id="12938708" author="chrish" created="Wed, 22 Nov 2006 16:38:10 +0000"  >&lt;p&gt;Sorry - I forgot to mention that my previous comment applied strictly to 4.0.2 - I did not test against 4.1&lt;/p&gt;

&lt;p&gt;Nonetheless, if anyone has any comments regarding the proposed fix, I&apos;d be very interested as I&apos;d prefer to use 4.0.2 for a production deployment until 4.1 is released.&lt;/p&gt;</comment>
                            <comment id="12938811" author="chirino" created="Wed, 7 Mar 2007 15:18:05 +0000"  >&lt;p&gt;the functionality of the failover option is now built into the &quot;static:&quot; discovery agent.  The failover option will no longer be supported.&lt;br/&gt;
In the next version of ActiveMQ, the failover property will be removed.  Change commited in version 515602.&lt;/p&gt;

&lt;p&gt;I ran your test case without the failover=true option and it passed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12481725">AMQ-738</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460845" name="ASF.LICENSE.NOT.GRANTED--Amq734Test.java" size="5929" author="" created="Wed, 22 Nov 2006 15:37:01 +0000"/>
                            <attachment id="12460627" name="Amq734Test.java" size="5929" author="" created="Wed, 22 Nov 2006 15:36:17 +0000"/>
                            <attachment id="12460654" name="DemandForwardingBridgeSupport.java" size="36294" author="" created="Wed, 22 Nov 2006 15:37:01 +0000"/>
                            <attachment id="12460585" name="DiscoveryNetworkConnector.java" size="10678" author="" created="Wed, 22 Nov 2006 15:37:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s01z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>