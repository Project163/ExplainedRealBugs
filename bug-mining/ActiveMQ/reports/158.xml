<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:32:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1029] TransportConnector get duplicated when used with JMX</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1029</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The BrokerService keeps the configured TransportConnectors in a list called transportConnectors. In startAllConnectors, the list is traversed and each connector is started through startTransportConnector(). This method checks if JMX is configured, and if so, it called connector.asManagedConnector() which returns a new instance of a TransportConnector. This instance is started.&lt;/p&gt;

&lt;p&gt;But in the  transportConnectors list of BrokerService, the old, unstarted object is still existent. Since a TransportConnector starts a TransportServiceDetector thread, the old, unstarted instance contains a TSD that is not active. But the started TSD isn&apos;t referenced anymore.&lt;/p&gt;

&lt;p&gt;On shutdown, the old, unstarted TC and subsequently TSD are stopped. The &quot;lost&quot; instance can&apos;t be touched anymore.&lt;/p&gt;

&lt;p&gt;My patch does this: During spin-up, startTransportConnector() returns the instance that is started. The started instances are collected in an arraylist, this list replaces transportConnectors after startup.&lt;/p&gt;

&lt;p&gt;Thanks to jstrachan for being patient on irc.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, ActiveMQ broker in a custom servlet, running on Tomcat 5.5.&lt;/p&gt;</environment>
        <key id="12481908">AMQ-1029</key>
            <summary>TransportConnector get duplicated when used with JMX</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vasquez">Andreas Mack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Nov 2006 14:17:26 +0000</created>
                <updated>Mon, 26 Feb 2007 18:23:33 +0000</updated>
                            <resolved>Tue, 21 Nov 2006 08:19:57 +0000</resolved>
                                    <version>4.0.2</version>
                                    <fixVersion>4.1.1</fixVersion>
                    <fixVersion>5.0.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12938537" author="jlim" created="Tue, 21 Nov 2006 08:19:57 +0000"  >&lt;p&gt;Thanks! &lt;/p&gt;

&lt;p&gt;patch  applied to :&lt;br/&gt;
trunk : 477570&lt;br/&gt;
4.1 branch: 477571&lt;/p&gt;

&lt;p&gt;Btw,  I just added a bit of code to clear the transportConnectors list before replacing it with the started instances  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;br/&gt;
 ie.           .....&lt;br/&gt;
                this.transportConnectors.clear();&lt;br/&gt;
            	setTransportConnectors(al);&lt;br/&gt;
               ....&lt;/p&gt;</comment>
                            <comment id="12938466" author="vasquez" created="Wed, 22 Nov 2006 07:32:53 +0000"  >&lt;p&gt;thanks. Will it also be applied to 4.0.2 (which I&apos;m still using currently)?&lt;/p&gt;</comment>
                            <comment id="12938502" author="jlim" created="Wed, 22 Nov 2006 07:44:59 +0000"  >&lt;p&gt;sorry about that, forgot to apply it on the 4.0 branch: &lt;/p&gt;

&lt;p&gt;it&apos;s applied at 4.0 branch : r478063&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460612" name="ASF.LICENSE.NOT.GRANTED--tc-jmx-patch" size="606" author="vasquez" created="Tue, 7 Nov 2006 14:17:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i180qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254921</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>