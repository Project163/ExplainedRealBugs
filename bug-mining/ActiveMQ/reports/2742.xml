<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:33:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6150] Found (and fixed) 3 instances of impossible casts in the activemq code</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6150</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Running static analysis on activemq I was able to identify 3 instances of impossible casts in the code. Attaching patch files to fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935165">AMQ-6150</key>
            <summary>Found (and fixed) 3 instances of impossible casts in the activemq code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="mbreslow">Marc Breslow</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2016 16:07:12 +0000</created>
                <updated>Mon, 1 Feb 2016 13:10:12 +0000</updated>
                            <resolved>Mon, 1 Feb 2016 13:10:12 +0000</resolved>
                                    <version>5.13.0</version>
                                    <fixVersion>5.13.1</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15123663" author="githubbot" created="Fri, 29 Jan 2016 16:13:42 +0000"  >&lt;p&gt;GitHub user mbreslow opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; title=&quot;Found (and fixed) 3 instances of impossible casts in the activemq code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6150&quot;&gt;&lt;del&gt;AMQ-6150&lt;/del&gt;&lt;/a&gt; (Found 3 instances of impossible casts in the activemq code)&lt;/p&gt;

&lt;p&gt;    Running static analysis on activemq I was able to identify 3 instances of impossible casts in the code. This pull request resolves them.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/DevFactory/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/DevFactory/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; title=&quot;Found (and fixed) 3 instances of impossible casts in the activemq code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6150&quot;&gt;&lt;del&gt;AMQ-6150&lt;/del&gt;&lt;/a&gt;-fix-impossible-cast-issues&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/166.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/166.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #166&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 364e10d40569042595ec27ae710c2fd687fa2746&lt;br/&gt;
Author: Marc Breslow &amp;lt;marc.breslow@devfactory.com&amp;gt;&lt;br/&gt;
Date:   2016-01-28T21:39:29Z&lt;/p&gt;

&lt;p&gt;    Fix Impossible Cast issues in MemoryTopicSub:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;recoverSubscription()
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;map is defined as LinkedHashMap&amp;lt;MessageId, Message&amp;gt;&lt;/li&gt;
		&lt;li&gt;msg is defined as &amp;lt;map&amp;gt; entry.getValue() so must be a Message&lt;/li&gt;
		&lt;li&gt;condition if (msg.getClass() == MessageId.class) could never be true&lt;/li&gt;
		&lt;li&gt;no need to cast at all when using generics&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;recoverNextMessages()
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;basically same code copy/pasted so same fix&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;commit 61f951d0c811b8c9dcde306fa7843aadce70d199&lt;br/&gt;
Author: Marc Breslow &amp;lt;marc.breslow@devfactory.com&amp;gt;&lt;br/&gt;
Date:   2016-01-29T15:51:18Z&lt;/p&gt;

&lt;p&gt;    Removed 2 conditions from ServerSessionPoolImpl that would result in impossible casts. Conditions removed were trying to cast ActiveMQQueueSession and ActiveMQTopicSession to ActiveMQSession which is illegal.&lt;/p&gt;

&lt;p&gt;    Since it isn&apos;t obvious what to do if you get an ActiveMQQueueSession or ActiveMQTopicSession from getServerSession() I make it fall back to the else condition which raises an async exception. This is better than getting a ClassCastException at runtime.&lt;/p&gt;

&lt;p&gt;commit f177a52c62336115dc3df7af0694851046ae670c&lt;br/&gt;
Author: Marc Breslow &amp;lt;marc.breslow@devfactory.com&amp;gt;&lt;br/&gt;
Date:   2016-01-29T16:00:31Z&lt;/p&gt;

&lt;p&gt;    Remove impossible cast in MemoryMessageStore&lt;/p&gt;

&lt;p&gt;commit 509fe1ce8f3e1a6b5b64be4a027487e9c11737a6&lt;br/&gt;
Author: Marc Breslow &amp;lt;marc.breslow@devfactory.com&amp;gt;&lt;br/&gt;
Date:   2016-01-29T16:11:30Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;master&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; title=&quot;Found (and fixed) 3 instances of impossible casts in the activemq code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6150&quot;&gt;&lt;del&gt;AMQ-6150&lt;/del&gt;&lt;/a&gt;-fix-impossible-cast-issues&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15126213" author="jira-bot" created="Mon, 1 Feb 2016 13:05:36 +0000"  >&lt;p&gt;Commit 9361bc6a0f7219bfb8ba963bac8ec413fd1ebb58 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9361bc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9361bc6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;merging patch to fix casting issues&lt;/p&gt;

&lt;p&gt;Thanks for Marc Breslow for the patch&lt;/p&gt;

&lt;p&gt;This closes #166&lt;/p&gt;</comment>
                            <comment id="15126214" author="jira-bot" created="Mon, 1 Feb 2016 13:05:37 +0000"  >&lt;p&gt;Commit 161730fda2a15c41a3f620a476ba49f841b87545 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=161730f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=161730f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;code cleanup&lt;/p&gt;</comment>
                            <comment id="15126215" author="githubbot" created="Mon, 1 Feb 2016 13:05:48 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15126218" author="jira-bot" created="Mon, 1 Feb 2016 13:08:19 +0000"  >&lt;p&gt;Commit f514b157138886419712f04726f96e5bb523c5cb in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f514b15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f514b15&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6150&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6150&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;code cleanup&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 161730fda2a15c41a3f620a476ba49f841b87545)&lt;/p&gt;</comment>
                            <comment id="15126220" author="christopher.l.shannon" created="Mon, 1 Feb 2016 13:10:12 +0000"  >&lt;p&gt;Patch applied with thanks. For the ServerSessionPoolImpl class, it can only contain an ActiveMQSession, so deleting the else if checks for ActiveMQQueueSession and ActiveMQTopicSession is the right fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12785176" name="0001-Fix-Impossible-Cast-issues-in-MemoryTopicSub.patch" size="2504" author="mbreslow" created="Fri, 29 Jan 2016 16:07:48 +0000"/>
                            <attachment id="12785177" name="0002-Removed-2-conditions-from-ServerSessionPoolImpl-that.patch" size="1683" author="mbreslow" created="Fri, 29 Jan 2016 16:07:48 +0000"/>
                            <attachment id="12785178" name="0003-Remove-impossible-cast-in-MemoryMessageStore.patch" size="1412" author="mbreslow" created="Fri, 29 Jan 2016 16:07:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s5mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>