<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:49:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3176] Potential deadlock in duplex network connector recreation, resulting in dangling connections</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3176</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;End result is lots of connections that are taking too long to shutdown and in particular: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-07 08:56:49,422 | INFO  | sport: tcp:&lt;span class=&quot;code-comment&quot;&gt;///xxx:56982 | TransportConnection | The connection to &lt;span class=&quot;code-quote&quot;&gt;&apos;/xxx:56981&apos;&lt;/span&gt; is taking a &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; time to shutdown.
&lt;/span&gt;....
2011-02-07 08:56:49,458 | INFO  | sport: tcp:&lt;span class=&quot;code-comment&quot;&gt;///xxx:56981 | TransportConnection | The connection to &lt;span class=&quot;code-quote&quot;&gt;&apos;/xxx:56982&apos;&lt;/span&gt; is taking a &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; time to shutdown.&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; where there is an overlap, with two connections trying to stop each other.&lt;br/&gt;
Problem appears when the initiator of a duplex network connector sees a failure and trys to reconnect and the responder sees the old transport connector in place. It tries to stop the existing connection but does it in a sync call so the potential to block and lock is present.&lt;/p&gt;







&lt;p&gt;2011-01-26 16:35:54,618 &lt;span class=&quot;error&quot;&gt;&amp;#91;..&amp;#93;&lt;/span&gt; INFO TransportConnection - The connection to &apos;/xx:51585&apos; is taking a long time to shutdown.&lt;br/&gt;
2011-01-26 16:35:56,500 &lt;span class=&quot;error&quot;&gt;&amp;#91;..&amp;#93;&lt;/span&gt; INFO TransportConnection - The connection to &apos;/xx:51585&apos; is taking a long time to shutdown.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In particular,&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498131">AMQ-3176</key>
            <summary>Potential deadlock in duplex network connector recreation, resulting in dangling connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>duplex</label>
                            <label>networkconnector</label>
                            <label>shutdown</label>
                    </labels>
                <created>Wed, 9 Feb 2011 15:18:40 +0000</created>
                <updated>Thu, 10 Feb 2011 11:11:10 +0000</updated>
                            <resolved>Thu, 10 Feb 2011 11:11:10 +0000</resolved>
                                    <version>5.4.2</version>
                                    <fixVersion>5.5.0</fixVersion>
                                    <component>Connector</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12992527" author="gtully" created="Wed, 9 Feb 2011 15:23:11 +0000"  >&lt;p&gt;linking to the changes that introduced the removal of the existing duplex connection&lt;/p&gt;</comment>
                            <comment id="12993002" author="gtully" created="Thu, 10 Feb 2011 11:11:10 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1069339&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1069339&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12495294">AMQ-3129</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12482573">AMQ-2774</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0agwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59011</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>