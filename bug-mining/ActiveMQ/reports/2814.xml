<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:34:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5954] Fix for failing activeMq bridge </title>
                <link>https://issues.apache.org/jira/browse/AMQ-5954</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;We have a system using activeMQ and weblogic, where we found that after upgrading weblogic server from 12.1.1 to 12.1.3 the bridge stopped working. We&apos;ve found the cause and fixed it (oracle refused to fix their code), and would like you to add the fix to activemq so we can remove the local hack we&apos;ve made. Look for the &quot;//new code&quot; in the code sample furthest down in this description&lt;/p&gt;

&lt;p&gt;Cause: Oracle changed the method getQueueName() in weblogic.jms.common.DestinationImpl.java so that it returns null if the object received is not the correct type (a Topic instead of a Queue for instance). In previous version the method returned the name regardless of type. The missing name casues the bridge to fail. &lt;/p&gt;

&lt;p&gt;The object received in our case is an implementation of the Destination interface, DistributedDestinationImpl, which implements both these interfaces in its parent class DestinationImpl. In org.apache.activemq.ActiveMQMessageTransformation.transformDestination(...) where the instanceof TemporaryQueue/TemporaryTopic++ tests will always return true for both TemporaryQueue and TemporaryTopic. The code will enter the first if() in the code below because of this and call the getQueueName() method even if it is a Topic, and will return null.  &lt;/p&gt;

&lt;p&gt;ActiveMQMessageTransformation.java (old version): &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ActiveMQDestination transformDestination(Destination destination) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JMSException {
        ActiveMQDestination activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ActiveMQDestination) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (ActiveMQDestination)destination;

            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryQueue) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTempQueue(((Queue)destination).getQueueName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryTopic) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTempTopic(((Topic)destination).getTopicName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Queue) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQQueue(((Queue)destination).getQueueName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Topic) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTopic(((Topic)destination).getTopicName());
                }
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; activeMQDestination;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The fixed version test for this case and calls the UnresolvableDestinationTransformer which was added to activemq as a response to issue &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-3401&quot; title=&quot;ActiveMQ cannot determine between Queue and Topic for Weblogic destination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-3401&quot;&gt;&lt;del&gt;AMQ-3401&lt;/del&gt;&lt;/a&gt;: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ActiveMQDestination transformDestination(Destination destination) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JMSException {
        ActiveMQDestination activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ActiveMQDestination) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (ActiveMQDestination)destination;

            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-comment&quot;&gt;//start &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; code
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryQueue &amp;amp;&amp;amp; destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryTopic) {
                    activeMQDestination = ActiveMQDestination.getUnresolvableDestinationTransformer().transform(destination);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                &lt;span class=&quot;code-comment&quot;&gt;//end &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; code
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryQueue) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTempQueue(((Queue)destination).getQueueName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; TemporaryTopic) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTempTopic(((Topic)destination).getTopicName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Queue) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQQueue(((Queue)destination).getQueueName());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destination &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Topic) {
                    activeMQDestination = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ActiveMQTopic(((Topic)destination).getTopicName());
                }
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; activeMQDestination;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12861802">AMQ-5954</key>
            <summary>Fix for failing activeMq bridge </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="darkvalley">Knut Skomedal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Sep 2015 10:13:08 +0000</created>
                <updated>Mon, 25 Apr 2016 16:25:10 +0000</updated>
                            <resolved>Mon, 25 Apr 2016 16:25:10 +0000</resolved>
                                    <version>5.11.1</version>
                                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14730968" author="tabish121" created="Fri, 4 Sep 2015 15:38:23 +0000"  >&lt;p&gt;I would suggest that it makes more sense to update the ActiveMQMessageTransformation#transformDestination to delegate to ActiveMQDestiantion#transform by default instead of having two destination transformation code paths.&lt;/p&gt;</comment>
                            <comment id="15256544" author="jira-bot" created="Mon, 25 Apr 2016 16:24:58 +0000"  >&lt;p&gt;Commit e996dbe7c28d928c701daef6b3afd5770ae4c2ed in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tabish121&quot; class=&quot;user-hover&quot; rel=&quot;tabish121&quot;&gt;tabish121&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e996dbe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e996dbe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5954&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5954&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Use a single destination transformation method instead of having to&lt;br/&gt;
different implementations.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jsan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>