<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:49:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7301] Expired certificates trigger a full stack trace</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7301</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When using an expired certificate to authenticate via STOMP, ActiveMQ logs a complete stack trace:&lt;br/&gt;
 &#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-09-10 10:36:07,784 [ActiveMQ BrokerService[broker.acme.com] Task-12] ERROR TransportConnector - Could not accept connection from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : {}
 java.io.IOException: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
 at org.apache.activemq.transport.nio.NIOSSLTransport.initializeStreams(NIOSSLTransport.java:196)
 at org.apache.activemq.transport.stomp.StompNIOSSLTransport.initializeStreams(StompNIOSSLTransport.java:57)
 at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:543)
 at org.apache.activemq.transport.nio.NIOTransport.doStart(NIOTransport.java:174)
 at org.apache.activemq.transport.nio.NIOSSLTransport.doStart(NIOSSLTransport.java:470)
 at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)
 at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
 at org.apache.activemq.transport.stomp.StompTransportFilter.start(StompTransportFilter.java:65)
 at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)
 at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
 at org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:1072)
 at org.apache.activemq.broker.TransportConnector$1$1.run(TransportConnector.java:218)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
 Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
 at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1521)
 at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:528)
 at sun.security.ssl.SSLEngineImpl.writeAppRecord(SSLEngineImpl.java:1197)
 at sun.security.ssl.SSLEngineImpl.wrap(SSLEngineImpl.java:1165)
 at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:469)
 at org.apache.activemq.transport.nio.NIOOutputStream.write(NIOOutputStream.java:174)
 at org.apache.activemq.transport.nio.NIOSSLTransport.doHandshake(NIOSSLTransport.java:452)
 at org.apache.activemq.transport.nio.NIOSSLTransport.initializeStreams(NIOSSLTransport.java:164)
 ... 14 more
 Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
 at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
 at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1709)
 at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:318)
 at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:310)
 at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1983)
 at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:232)
 at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1037)
 at sun.security.ssl.Handshaker$1.run(Handshaker.java:970)
 at sun.security.ssl.Handshaker$1.run(Handshaker.java:967)
 at java.security.AccessController.doPrivileged(Native Method)
 at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1459)
 at org.apache.activemq.transport.nio.NIOSSLTransport.doHandshake(NIOSSLTransport.java:448)
 ... 15 more
 Caused by: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed
 at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:362)
 at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:270)
 at sun.security.validator.Validator.validate(Validator.java:262)
 at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)
 at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:279)
 at sun.security.ssl.X509TrustManagerImpl.checkClientTrusted(X509TrustManagerImpl.java:130)
 at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1970)
 ... 22 more
 Caused by: java.security.cert.CertPathValidatorException: validity check failed
 at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)
 at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:233)
 at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:141)
 at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:80)
 at java.security.cert.CertPathValidator.validate(CertPathValidator.java:292)
 at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:357)
 ... 28 more
 Caused by: java.security.cert.CertificateExpiredException: NotAfter: Thu May 23 12:21:49 CEST 2019
 at sun.security.x509.CertificateValidity.valid(CertificateValidity.java:274)
 at sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:629)
 at sun.security.provider.certpath.BasicChecker.verifyValidity(BasicChecker.java:190)
 at sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:144)
 at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)
 ... 33 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There are several problems here:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;this should be a &lt;tt&gt;WARN&lt;/tt&gt; and not an &lt;tt&gt;ERROR&lt;/tt&gt; (like an invalid password)&lt;/li&gt;
	&lt;li&gt;the IP address and/or certificate DN should be logged&lt;/li&gt;
	&lt;li&gt;a single line should be reported, not the full stack trace&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;ActiveMQ 5.15.10 as standalone broker&lt;/p&gt;</environment>
        <key id="13255827">AMQ-7301</key>
            <summary>Expired certificates trigger a full stack trace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="lionel.cons">Lionel Cons</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Sep 2019 09:02:09 +0000</created>
                <updated>Wed, 18 Mar 2020 08:47:29 +0000</updated>
                            <resolved>Wed, 11 Mar 2020 16:59:53 +0000</resolved>
                                    <version>5.15.10</version>
                                    <fixVersion>5.16.0</fixVersion>
                    <fixVersion>5.15.12</fixVersion>
                                    <component>Security/JAAS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="16940918" author="lionel.cons" created="Mon, 30 Sep 2019 12:14:15 +0000"  >&lt;p&gt;FWIW, null certificates trigger a similar stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-09-30 14:08:05,810 [ActiveMQ BrokerService[broker.acme.com] Task-685] ERROR TransportConnector - Could not accept connection from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : {}
java.io.IOException: javax.net.ssl.SSLHandshakeException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; cert chain
	at org.apache.activemq.transport.nio.NIOSSLTransport.initializeStreams(NIOSSLTransport.java:196)
	at org.apache.activemq.transport.stomp.StompNIOSSLTransport.initializeStreams(StompNIOSSLTransport.java:57)
	at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:543)
	at org.apache.activemq.transport.nio.NIOTransport.doStart(NIOTransport.java:174)
	at org.apache.activemq.transport.nio.NIOSSLTransport.doStart(NIOSSLTransport.java:470)
	at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)
	at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
	at org.apache.activemq.transport.stomp.StompTransportFilter.start(StompTransportFilter.java:65)
	at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169)
	at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64)
	at org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:1072)
	at org.apache.activemq.broker.TransportConnector$1$1.run(TransportConnector.java:218)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: javax.net.ssl.SSLHandshakeException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; cert chain
	at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1521)
	at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:528)
	at sun.security.ssl.SSLEngineImpl.writeAppRecord(SSLEngineImpl.java:1197)
	at sun.security.ssl.SSLEngineImpl.wrap(SSLEngineImpl.java:1165)
	at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:469)
	at org.apache.activemq.transport.nio.NIOOutputStream.write(NIOOutputStream.java:174)
	at org.apache.activemq.transport.nio.NIOSSLTransport.doHandshake(NIOSSLTransport.java:452)
	at org.apache.activemq.transport.nio.NIOSSLTransport.initializeStreams(NIOSSLTransport.java:164)
	... 14 more
Caused by: javax.net.ssl.SSLHandshakeException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; cert chain
	at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
	at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1647)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:318)
	at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:306)
	at sun.security.ssl.ServerHandshaker.clientCertificate(ServerHandshaker.java:1939)
	at sun.security.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:232)
	at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1037)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:970)
	at sun.security.ssl.Handshaker$1.run(Handshaker.java:967)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1459)
	at org.apache.activemq.transport.nio.NIOSSLTransport.doHandshake(NIOSSLTransport.java:448)
	... 15 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16972435" author="jira-bot" created="Tue, 12 Nov 2019 14:18:48 +0000"  >&lt;p&gt;Commit 8212b69fa9e379393421eeb51f8d92a420ff5524 in activemq&apos;s branch refs/heads/activemq-5.15.x from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8212b69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8212b69&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Don&apos;t display stack trace on connection error, just the cause&lt;/p&gt;</comment>
                            <comment id="16972436" author="jira-bot" created="Tue, 12 Nov 2019 14:19:42 +0000"  >&lt;p&gt;Commit f3f827150368fa8c6d3a39a47f3602a80518630a in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f3f8271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=f3f8271&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Use warn for connection failure instead of error.&lt;/p&gt;</comment>
                            <comment id="16978260" author="lionel.cons" created="Wed, 20 Nov 2019 09:39:06 +0000"  >&lt;p&gt;I have tested the latest snapshot (20191119.121036-35) and the stack trace is now gone but there is still no information about the culprit (DN or IP):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-11-20 10:36:16,984 [ActiveMQ BrokerService[brk@acme.com] Task-204] WARN TransportConnector - Could not accept connection from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : javax.net.ssl.SSLHandshakeException: General SSLEngine problem
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16978261" author="jbonofre" created="Wed, 20 Nov 2019 09:41:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lionel.cons&quot; class=&quot;user-hover&quot; rel=&quot;lionel.cons&quot;&gt;lionel.cons&lt;/a&gt; I guess instead of &lt;tt&gt;null&lt;/tt&gt; right ?&lt;/p&gt;</comment>
                            <comment id="16978274" author="lionel.cons" created="Wed, 20 Nov 2019 09:52:54 +0000"  >&lt;p&gt;Indeed.&lt;/p&gt;</comment>
                            <comment id="16985931" author="lionel.cons" created="Mon, 2 Dec 2019 09:38:26 +0000"  >&lt;p&gt;One more thing (tested on 5.15.11), the new warning reports only &quot;General SSLEngine problem&quot;. It would be much better to report the underneath cause, in this case &quot;PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed&quot;.&lt;/p&gt;

&lt;p&gt;In other words, ActiveMQ should log &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-11-20 10:36:16,984 [ActiveMQ BrokerService[brk@acme.com] Task-204] WARN TransportConnector - Could not accept connection from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;instead of &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-11-20 10:36:16,984 [ActiveMQ BrokerService[brk@acme.com] Task-204] WARN TransportConnector - Could not accept connection from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : javax.net.ssl.SSLHandshakeException: General SSLEngine problem
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(and of course &quot;null&quot; should be replaced by the culprit IP address)&lt;/p&gt;</comment>
                            <comment id="17048862" author="jira-bot" created="Mon, 2 Mar 2020 08:23:56 +0000"  >&lt;p&gt;Commit d11fd05af4db5f3af46e09c9d9c62821c5b66967 in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d11fd05&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d11fd05&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Display warn in case of STOMP stream initialize error&lt;/p&gt;</comment>
                            <comment id="17048863" author="jira-bot" created="Mon, 2 Mar 2020 08:23:58 +0000"  >&lt;p&gt;Commit 0d0131496a805c278373b16771c65caa30419adc in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0d01314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0d01314&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #488 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Display warn in case of STOMP stream initialize error&lt;/p&gt;</comment>
                            <comment id="17048864" author="jira-bot" created="Mon, 2 Mar 2020 08:24:00 +0000"  >&lt;p&gt;Commit 0d0131496a805c278373b16771c65caa30419adc in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0d01314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0d01314&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #488 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Display warn in case of STOMP stream initialize error&lt;/p&gt;</comment>
                            <comment id="17048866" author="jira-bot" created="Mon, 2 Mar 2020 08:24:30 +0000"  >&lt;p&gt;Commit 3dd9121a3911a7ae5464e7b9827799d67b18593a in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=3dd9121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=3dd9121&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Display warn in case of STOMP stream initialize error&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d11fd05af4db5f3af46e09c9d9c62821c5b66967)&lt;/p&gt;</comment>
                            <comment id="17050450" author="jbonofre" created="Tue, 3 Mar 2020 18:11:55 +0000"  >&lt;p&gt;According to&#160;&lt;a href=&quot;https://github.com/apache/activemq/blob/activemq-5.15.x/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java#L245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/activemq-5.15.x/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java#L245&lt;/a&gt;&#160;it should already be good.&lt;/p&gt;

&lt;p&gt;Here we can see a single line in warn.&lt;/p&gt;

&lt;p&gt;Let me setup a STOMP client and use case to try to reproduce.&lt;/p&gt;</comment>
                            <comment id="17052300" author="jira-bot" created="Thu, 5 Mar 2020 16:22:26 +0000"  >&lt;p&gt;Commit b60efeaad82c63d4b00eb83285b6701ae3e7a73e in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b60efea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=b60efea&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Improve logging when initialize Stomp NIO SSL connection&lt;/p&gt;</comment>
                            <comment id="17052301" author="jira-bot" created="Thu, 5 Mar 2020 16:22:28 +0000"  >&lt;p&gt;Commit 4a2881f8ed04111149b33bdf606b168376439e4a in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4a2881f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4a2881f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #501 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Improve logging when initialize Stomp NIO SSL connection&lt;/p&gt;</comment>
                            <comment id="17052302" author="jira-bot" created="Thu, 5 Mar 2020 16:22:30 +0000"  >&lt;p&gt;Commit 4a2881f8ed04111149b33bdf606b168376439e4a in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4a2881f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4a2881f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #501 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Improve logging when initialize Stomp NIO SSL connection&lt;/p&gt;</comment>
                            <comment id="17052303" author="jira-bot" created="Thu, 5 Mar 2020 16:23:03 +0000"  >&lt;p&gt;Commit 71e6ea21caf2c5c9c0791ff2d6920eafc3adbfd8 in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=71e6ea2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=71e6ea2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Improve logging when initialize Stomp NIO SSL connection&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b60efeaad82c63d4b00eb83285b6701ae3e7a73e)&lt;/p&gt;</comment>
                            <comment id="17055065" author="jbonofre" created="Mon, 9 Mar 2020 15:13:39 +0000"  >&lt;p&gt;As discussed on the vote thread, I reopen this Jira with a better solution.&lt;/p&gt;</comment>
                            <comment id="17055091" author="christopher.l.shannon" created="Mon, 9 Mar 2020 15:34:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt;&#160;- The error needs to propagate up because it gets caught inside TransportConnection (the stacktrace shows i at line 1072).&#160; The exception gets caught and sets the status to pending stop which triggers a proper stop in the finally block. &lt;a href=&quot;https://github.com/apache/activemq/blob/activemq-5.15.11/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java#L1086&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/activemq-5.15.11/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnection.java#L1086&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;The connection won&apos;t get closed properly without this&lt;/p&gt;</comment>
                            <comment id="17055093" author="jbonofre" created="Mon, 9 Mar 2020 15:36:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&#160;yeah, I&apos;m working on a better fix. Thanks for the catch !&lt;/p&gt;</comment>
                            <comment id="17055647" author="jira-bot" created="Tue, 10 Mar 2020 06:58:31 +0000"  >&lt;p&gt;Commit 08b389c2206f9b3f1a9afc86d6b6a3eab0535e08 in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=08b389c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=08b389c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Propagate the exception in order to close the connection cleanly&lt;/p&gt;</comment>
                            <comment id="17055648" author="jira-bot" created="Tue, 10 Mar 2020 06:58:33 +0000"  >&lt;p&gt;Commit bbb73ec3fc18890b47bfc0561814367eb6a35902 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=bbb73ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=bbb73ec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #507 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Propagate the exception in order to close the connection cleanly&lt;/p&gt;</comment>
                            <comment id="17055649" author="jira-bot" created="Tue, 10 Mar 2020 06:58:35 +0000"  >&lt;p&gt;Commit bbb73ec3fc18890b47bfc0561814367eb6a35902 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=bbb73ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=bbb73ec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #507 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Propagate the exception in order to close the connection cleanly&lt;/p&gt;</comment>
                            <comment id="17055650" author="jira-bot" created="Tue, 10 Mar 2020 06:59:02 +0000"  >&lt;p&gt;Commit c1e2b3019c3e06cd537258851681ce183dba0147 in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c1e2b30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c1e2b30&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Propagate the exception in order to close the connection cleanly&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 08b389c2206f9b3f1a9afc86d6b6a3eab0535e08)&lt;/p&gt;</comment>
                            <comment id="17056785" author="lionel.cons" created="Wed, 11 Mar 2020 09:29:48 +0000"  >&lt;p&gt;FWIW, I have tried with the latest snapshot (#111) and I now get:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-11 10:19:53,221 [ActiveMQ BrokerService[foo] Task-41] WARN StompNIOSSLTransport - Could not initialize connection from a.b.c.d: javax.net.ssl.SSLHandshakeException: General SSLEngine problem (General SSLEngine problem)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I guess one of the two &quot;General SSLEngine problem&quot; should rather be the root cause: &quot;validity check failed&quot;.&lt;/p&gt;</comment>
                            <comment id="17056835" author="christopher.l.shannon" created="Wed, 11 Mar 2020 10:31:38 +0000"  >&lt;p&gt;I&apos;m looking at onAcceptError now inside of TransportConnector and I don&apos;t think it is right.&#160; It needs to log the root cause which should fix this so I will create a quick update.&lt;/p&gt;</comment>
                            <comment id="17056843" author="jbonofre" created="Wed, 11 Mar 2020 10:32:56 +0000"  >&lt;p&gt;Let me check.&lt;/p&gt;</comment>
                            <comment id="17056857" author="jira-bot" created="Wed, 11 Mar 2020 10:49:11 +0000"  >&lt;p&gt;Commit 57a1a77abb54e6862d61626d9a2985b84b9975a9 in activemq&apos;s branch refs/heads/activemq-5.15.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=57a1a77&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=57a1a77&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; - TransportConnector errors should log the root cause&lt;/p&gt;</comment>
                            <comment id="17056858" author="jira-bot" created="Wed, 11 Mar 2020 10:49:26 +0000"  >&lt;p&gt;Commit ee61ed69f8ca7ea116014a981225f446d0a05d8a in activemq&apos;s branch refs/heads/master from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ee61ed6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ee61ed6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; - TransportConnector errors should log the root cause&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 57a1a77abb54e6862d61626d9a2985b84b9975a9)&lt;/p&gt;</comment>
                            <comment id="17056859" author="christopher.l.shannon" created="Wed, 11 Mar 2020 10:49:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt;&#160;- i pushed a fix, it should log properly now&lt;/p&gt;</comment>
                            <comment id="17057011" author="jbonofre" created="Wed, 11 Mar 2020 13:43:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&#160;thanks ! Do you mind if I log on a single message (instead of two) as requested by the user ?&lt;/p&gt;</comment>
                            <comment id="17057038" author="christopher.l.shannon" created="Wed, 11 Mar 2020 14:13:37 +0000"  >&lt;p&gt;I don&apos;t care either way... I figured the main point was to not show a stack trace, so either is fine with me.&lt;/p&gt;</comment>
                            <comment id="17057041" author="jbonofre" created="Wed, 11 Mar 2020 14:18:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&#160;ok thanks, I&apos;m gathering the two log warn message into a single one.&lt;/p&gt;</comment>
                            <comment id="17057158" author="jbonofre" created="Wed, 11 Mar 2020 16:09:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&#160;by the way, your change doesn&apos;t compile:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /Users/jbonofre/Workspace/activemq/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java:[29,30] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.google.common.base does not exist
[ERROR] /Users/jbonofre/Workspace/activemq/activemq-broker/src/main/java/org/apache/activemq/broker/TransportConnector.java:[246,68] cannot find symbol &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m fixing with my change.&lt;/p&gt;</comment>
                            <comment id="17057162" author="christopher.l.shannon" created="Wed, 11 Mar 2020 16:14:54 +0000"  >&lt;p&gt;Hmm weird, I guess it&apos;s only broken on master then because I compiled it on the 5.15.x branch and then cherry picked it to master.&lt;/p&gt;</comment>
                            <comment id="17057167" author="jbonofre" created="Wed, 11 Mar 2020 16:18:21 +0000"  >&lt;p&gt;Guava dependency is missing on broker &lt;tt&gt;pom.xml&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17057170" author="christopher.l.shannon" created="Wed, 11 Mar 2020 16:20:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt;&#160; - Yeah I just noticed that, looks like it was never added but obviously needs to be.&lt;/p&gt;</comment>
                            <comment id="17057172" author="jbonofre" created="Wed, 11 Mar 2020 16:22:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&#160;no problem, I fixed it on&#160;&lt;a href=&quot;https://github.com/apache/activemq/pull/510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/510&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17057175" author="christopher.l.shannon" created="Wed, 11 Mar 2020 16:25:42 +0000"  >&lt;p&gt;Looks good to me&lt;/p&gt;</comment>
                            <comment id="17057208" author="jira-bot" created="Wed, 11 Mar 2020 16:58:30 +0000"  >&lt;p&gt;Commit 960bc24d17e955cea854124a3bbaeb5d912746ea in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=960bc24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=960bc24&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Fix build and using a single log message&lt;/p&gt;</comment>
                            <comment id="17057209" author="jira-bot" created="Wed, 11 Mar 2020 16:58:33 +0000"  >&lt;p&gt;Commit 8f5d583ad4f0f03b32a527bf46f182499cc0552a in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8f5d583&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8f5d583&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #510 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Fix build and using a single log message&lt;/p&gt;</comment>
                            <comment id="17057210" author="jira-bot" created="Wed, 11 Mar 2020 16:58:36 +0000"  >&lt;p&gt;Commit 8f5d583ad4f0f03b32a527bf46f182499cc0552a in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8f5d583&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8f5d583&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #510 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Fix build and using a single log message&lt;/p&gt;</comment>
                            <comment id="17057211" author="jira-bot" created="Wed, 11 Mar 2020 16:59:43 +0000"  >&lt;p&gt;Commit 9c733328dc4a5f0b191efd9edb23eb5c451dcb3e in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=9c73332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=9c73332&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Fix build and using a single log message&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 960bc24d17e955cea854124a3bbaeb5d912746ea)&lt;/p&gt;</comment>
                            <comment id="17057266" author="jira-bot" created="Wed, 11 Mar 2020 17:47:47 +0000"  >&lt;p&gt;Commit d800f1bdb488deba1080c7689c2004f27da49734 in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d800f1b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=d800f1b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Remove guava dependency to implement own getRootCause() method&lt;/p&gt;</comment>
                            <comment id="17057267" author="jira-bot" created="Wed, 11 Mar 2020 17:48:04 +0000"  >&lt;p&gt;Commit 56e61ca2debb69d7f6c0dde625bac06a2a047f02 in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=56e61ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=56e61ca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7301&quot; title=&quot;Expired certificates trigger a full stack trace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7301&quot;&gt;&lt;del&gt;AMQ-7301&lt;/del&gt;&lt;/a&gt; Remove guava dependency to implement own getRootCause() method&lt;/p&gt;</comment>
                            <comment id="17057685" author="lionel.cons" created="Thu, 12 Mar 2020 08:05:26 +0000"  >&lt;p&gt;FYI, using the latest snapshot (#113), here is what I get:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2020-03-12 08:56:42,178 [ActiveMQ BrokerService[foo] Task-41] WARN TransportConnector - Could not accept connection from from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
2020-03-12 08:56:42,228 [ActiveMQ BrokerService[foo] Task-41] WARN TransportConnector - Root cause of connection error: unable to find valid certification path to requested target
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So unfortunately, the source is &quot;null&quot;. Note also the double &quot;from from&quot;.&lt;/p&gt;</comment>
                            <comment id="17057739" author="jbonofre" created="Thu, 12 Mar 2020 09:20:24 +0000"  >&lt;p&gt;I gonna fix the double from. About null, as already explained, that&apos;s not easy as it&apos;s during handshake.&#160; So keeping like this for now.&lt;/p&gt;</comment>
                            <comment id="17057744" author="jbonofre" created="Thu, 12 Mar 2020 09:23:57 +0000"  >&lt;p&gt;Done for &quot;double from&quot;.&lt;/p&gt;</comment>
                            <comment id="17057749" author="lionel.cons" created="Thu, 12 Mar 2020 09:31:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt; I&apos;ve mentioned the null problem because it was working in snapshot #111.&lt;/p&gt;

&lt;p&gt;OTOH, I don&apos;t want to delay 5.15.12 further. This issue (stack trace) is fixed so you can go ahead with the release.&lt;/p&gt;

&lt;p&gt;I will log a separate issue for the missing IP information, to be addressed in 5.15.13...&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17057754" author="jbonofre" created="Thu, 12 Mar 2020 09:36:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lionel.cons&quot; class=&quot;user-hover&quot; rel=&quot;lionel.cons&quot;&gt;lionel.cons&lt;/a&gt;&#160;thanks, I&apos;m fixing the &lt;tt&gt;remoteHost&lt;/tt&gt; issue as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17057768" author="jbonofre" created="Thu, 12 Mar 2020 09:54:11 +0000"  >&lt;p&gt;I would need to change the &lt;tt&gt;TransportConnector&lt;/tt&gt;. The &quot;path&quot; is that it goes via &lt;tt&gt;onAcceptError(Exception error)&lt;/tt&gt; that call &lt;tt&gt;onAcceptError(Exception error, String remoteHost)&lt;/tt&gt; with &lt;tt&gt;remoteHost&lt;/tt&gt; &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Let&apos;s keep as it is and I will do the change for 5.15.13.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13288556">AMQ-7433</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13292400">AMQ-7444</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06hw0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>