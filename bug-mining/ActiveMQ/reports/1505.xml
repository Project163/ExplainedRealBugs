<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:54:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3853] Missing import in activemq-web-console</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3853</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Running activemq-web-console in Karaf generates these errors:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletContextListener not found by org.apache.activemq.activemq-web-console &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassNotFoundException: javax.servlet.Filter not found by org.apache.activemq.activemq-web-console &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServlet not found by org.apache.activemq.activemq-web-console &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;It looks like activemq-web-console imports the following servlet packages:&lt;/p&gt;

&lt;p&gt;        javax.servlet.jsp;version=&quot;[2.1,3)&quot;,&lt;br/&gt;
	javax.servlet.jsp.el;version=&quot;[2.1,3)&quot;,&lt;br/&gt;
	javax.servlet.jsp.tagext;version=&quot;[2.1,3)&quot;,&lt;/p&gt;

&lt;p&gt;So it seems to be missing imports for:&lt;/p&gt;

&lt;p&gt;javax.servlet&lt;br/&gt;
javax.servlet.http&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556621">AMQ-3853</key>
            <summary>Missing import in activemq-web-console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="geerzo">Chris Geer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 May 2012 23:35:28 +0000</created>
                <updated>Mon, 10 Sep 2012 09:01:17 +0000</updated>
                            <resolved>Mon, 10 Sep 2012 09:01:17 +0000</resolved>
                                    <version>5.6.0</version>
                                    <fixVersion>5.7.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13280071" author="dejanb" created="Mon, 21 May 2012 10:32:59 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;do you have war feature installed, like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;features:install war&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That should do the trick. See more info at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://activemq.apache.org/osgi-integration.html#OSGiIntegration-WebConsole&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/osgi-integration.html#OSGiIntegration-WebConsole&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13280239" author="geerzo" created="Mon, 21 May 2012 15:51:42 +0000"  >&lt;p&gt;Dejan,&lt;/p&gt;

&lt;p&gt;I do have war installed. The packages in question are being exported just fine from the org.ops4j.pax.web.pax-web-runtime bundle, the problem is they aren&apos;t being imported into the activemq-web-console bundle as far as I can see. Maybe I&apos;m missing something but that looks like the problem.&lt;/p&gt;

&lt;p&gt;Chris&lt;/p&gt;</comment>
                            <comment id="13281040" author="dejanb" created="Tue, 22 May 2012 15:41:58 +0000"  >&lt;p&gt;Thanks Chris, just confirmed it. I&apos;ll try to fix it soon. In the meantime you can trying using 5.5.0 console, they should be the same in functionality.&lt;/p&gt;</comment>
                            <comment id="13281086" author="ceposta" created="Tue, 22 May 2012 16:34:08 +0000"  >&lt;p&gt;Dejan,&lt;br/&gt;
Seems to be an issue with changes in the maven-bundle-plugin. activemq-5.6.0 is using v2.3.5 of the plugin which seems to not include the javax.servlet and javax.servlet.http packages, while the older version of the plugin, v2.1.0 which is used by the 5.5.x builds correctly populates the manifest with aforementioned packages. v2.2.0 of the plugin also works.&lt;/p&gt;</comment>
                            <comment id="13281334" author="ceposta" created="Wed, 23 May 2012 00:38:28 +0000"  >&lt;p&gt;Here&apos;s my research:&lt;/p&gt;

&lt;p&gt;Indeed there were multiple changes in the maven-bundle-plugin to take advantage of the newer versions of the bnd tool that underlies the maven-bundle-plugin, but none of those changes were what cause this error. &lt;/p&gt;

&lt;p&gt;The bnd tool will not add imports for packages it sees within the bundle. To make it a short story, some transitive dependencies of the 5.6.0 activemq-core were including the servlet-api (and thus were part of the bundle) which explains why the bundle plugin wasn&apos;t adding the javax.servlet and javax.servlet.http packages.&lt;/p&gt;

&lt;p&gt;In the activemq-web-console&apos;s pom.xml file, you see the following:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;            &amp;lt;Embed-Dependency&amp;gt;*;scope=compile|runtime&amp;lt;/Embed-Dependency&amp;gt;&lt;br/&gt;
            &amp;lt;Embed-Transitive&amp;gt;true&amp;lt;/Embed-Transitive&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And if you follow the dependency tree for &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;    &amp;lt;dependency&amp;gt;&lt;br/&gt;
      &amp;lt;groupId&amp;gt;${project.groupId}&amp;lt;/groupId&amp;gt;&lt;br/&gt;
      &amp;lt;artifactId&amp;gt;activemq-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    &amp;lt;/dependency&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;you&apos;ll see the two instances of the servlet spec within the transitive deps:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;mvn dependency:tree | grep servlet&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;ll see that although the geronimo servlet spec has &quot;provided&quot; scope, the other two (transitives from fusemq-leveldb-&amp;gt;hadoop-core) have &quot;compile&quot; scope and will be included in the WEB-INF/lib directory of the bundle. Thus when bnd tries to determine whether to add the appropriate packages, it decides not to since they&apos;re already on the class path.&lt;/p&gt;

&lt;p&gt;There are two options to fix:&lt;br/&gt;
1) add the javax.servlet and javax.servlet.http to the &amp;lt;Import-Package&amp;gt; instructions to the bundle plugin. This just kinda glosses over the fact that the servlet api is being included&lt;br/&gt;
or&lt;br/&gt;
2) exclude the servlet api from the activemq-core transitive dependencies.&lt;/p&gt;

&lt;p&gt;I would suggest the second approach. I&apos;ve added this patch.&lt;br/&gt;
Let me know if I didn&apos;t explain something clear.&lt;br/&gt;
Christian&lt;/p&gt;


&lt;p&gt;Patch is attached.&lt;/p&gt;</comment>
                            <comment id="13281488" author="dejanb" created="Wed, 23 May 2012 09:56:12 +0000"  >&lt;p&gt;Thanks Christian, great work. Patch applied with svn revision 1341810. I&apos;m not resolving this issue yet as I want to take this opportunity and create a pax-exam test for amq features (something we want to do for a long time). I&apos;ll try to get to it soon, but if any of you have time and want to do it, please do.&lt;/p&gt;</comment>
                            <comment id="13281948" author="ceposta" created="Wed, 23 May 2012 21:47:01 +0000"  >&lt;p&gt;I&apos;ll find some time. Would be an interesting exercise.&lt;/p&gt;</comment>
                            <comment id="13451291" author="davsclaus" created="Sat, 8 Sep 2012 09:39:19 +0000"  >&lt;p&gt;Dejan, could you create a new ticket about the test, and mark this as resolved for 5.7. Its good to have this in the release notes for 5.7 as being fixed.&lt;/p&gt;</comment>
                            <comment id="13451828" author="dejanb" created="Mon, 10 Sep 2012 09:01:17 +0000"  >&lt;p&gt;Done. New Jira for integration testing is &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-4034&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-4034&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528680" name="exclude-servlet-api.patch" size="780" author="ceposta" created="Wed, 23 May 2012 00:39:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ahrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59153</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>