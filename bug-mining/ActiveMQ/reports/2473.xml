<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:08:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5629] MapMessage.getChar does not handle if the backing map contains String or UTF8</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5629</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Compare to &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5628&quot; title=&quot;MapMessage.getDouble uses Float when converting from String/UTF8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5628&quot;&gt;&lt;del&gt;AMQ-5628&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Read up on &lt;a href=&quot;http://docs.oracle.com/javaee/1.4/api/javax/jms/MapMessage.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javaee/1.4/api/javax/jms/MapMessage.html&lt;/a&gt; to see that getChar(key) shall be able to compute for something that was stored as a String.&lt;/p&gt;

&lt;p&gt;ActiveMQMapMessage, line ~312:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; getChar(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JMSException {
        initializeReading();
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = map.get(name);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NullPointerException();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;)value).charValue();
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MessageFormatException(&lt;span class=&quot;code-quote&quot;&gt;&quot; cannot read a &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; from &quot;&lt;/span&gt; + value.getClass().getName());
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice the absent handling of String or UTF8Buffer.&lt;/p&gt;

&lt;p&gt;Notice ALSO the wrong wording in the Exception &quot;cannot read SHORT from..&quot; when we&apos;re in the CHAR getter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12779042">AMQ-5629</key>
            <summary>MapMessage.getChar does not handle if the backing map contains String or UTF8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="stolsvik">Endre St&#248;lsvik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2015 12:30:46 +0000</created>
                <updated>Wed, 4 Mar 2015 00:23:16 +0000</updated>
                            <resolved>Tue, 3 Mar 2015 21:52:14 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14345082" author="tabish121" created="Tue, 3 Mar 2015 13:49:29 +0000"  >&lt;p&gt;Recommend you create a unit test or enhance one of the existing one to show your issue.&lt;/p&gt;</comment>
                            <comment id="14345804" author="tabish121" created="Tue, 3 Mar 2015 21:52:14 +0000"  >&lt;p&gt;A String value can in fact not be read as a char as per the MapMessage conversion table.  If did however fix the error message to state the correct type.  &lt;/p&gt;</comment>
                            <comment id="14346032" author="stolsvik" created="Tue, 3 Mar 2015 23:58:46 +0000"  >&lt;p&gt;I stand corrected - I just looked sideways, but that is the other way: A Char can be read as String, but a String cannot be read as a char. Pretty annoying, as it certainly makes it slightly more problematic to make a manual copy of a MapMessage, since you cannot check for the type of a key before reading it.&lt;/p&gt;</comment>
                            <comment id="14346057" author="tabish121" created="Wed, 4 Mar 2015 00:09:05 +0000"  >&lt;p&gt;You have to use getObject / setObject to manually copy a MapMessage&apos;s contents. &lt;/p&gt;</comment>
                            <comment id="14346087" author="stolsvik" created="Wed, 4 Mar 2015 00:23:16 +0000"  >&lt;p&gt;Thanks a bunch, I &lt;b&gt;just&lt;/b&gt; realized and was about to amend my comment!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12779041">AMQ-5628</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12779083">AMQ-5632</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26aef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>