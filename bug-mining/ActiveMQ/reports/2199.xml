<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:03:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5042] Session.commit() hangs when amqp+nio is used</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5042</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The follow test will cause a hang when run against amqp+nio transport.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test(timeout=30000)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSessionTransactedCommit() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JMSException, InterruptedException {
        ActiveMQAdmin.enableJMSFrameTracing();

        Connection connection = createConnection();
        Session session = connection.createSession(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, Session.AUTO_ACKNOWLEDGE);
        Queue queue = session.createQueue(name.toString());

        connection.start();

        &lt;span class=&quot;code-comment&quot;&gt;// transacted producer
&lt;/span&gt;        MessageProducer pr = session.createProducer(queue);
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 10; i++) {
            Message m = session.createTextMessage(&lt;span class=&quot;code-quote&quot;&gt;&quot;TestMessage&quot;&lt;/span&gt; + i);
            pr.send(m);
        }

        &lt;span class=&quot;code-comment&quot;&gt;// No commit in place, so no message should be dispatched.
&lt;/span&gt;        MessageConsumer consumer = session.createConsumer(queue);
        TextMessage m = (TextMessage) consumer.receive(5000);

        assertNull(m);

        session.commit();

        &lt;span class=&quot;code-comment&quot;&gt;// Messages should be available now.
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 10; i++) {
            Message msg = consumer.receive(5000);
            assertNotNull(msg);
        }

        session.close();
        connection.close();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12694574">AMQ-5042</key>
            <summary>Session.commit() hangs when amqp+nio is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="tabish">Timothy A. Bish</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Feb 2014 19:25:56 +0000</created>
                <updated>Wed, 2 Apr 2014 21:46:21 +0000</updated>
                            <resolved>Tue, 18 Feb 2014 10:10:11 +0000</resolved>
                                    <version>5.9.0</version>
                                    <fixVersion>5.9.1</fixVersion>
                    <fixVersion>5.10.0</fixVersion>
                                    <component>AMQP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13898193" author="tabish121" created="Tue, 11 Feb 2014 19:28:23 +0000"  >&lt;p&gt;These logs are for testRollbackRececeivedMessage run with tcp and nio based versions.&lt;/p&gt;

&lt;p&gt;Frame tracing shows a missing send from the broker:&lt;br/&gt;
Disposition&lt;/p&gt;
{role=receiver,first=3,last=3,settled=true}

&lt;p&gt;Which leaves things in a stuck state between client and broker.&lt;/p&gt;</comment>
                            <comment id="13898291" author="tabish121" created="Tue, 11 Feb 2014 20:51:42 +0000"  >&lt;p&gt;Frame tracing for the testSessionTransactedCommit over TCP and NIO&lt;/p&gt;</comment>
                            <comment id="13903910" author="kearls" created="Tue, 18 Feb 2014 09:54:19 +0000"  >&lt;p&gt;Fixed by da63f3f20a348b29b43ef84bb7a4f6b02d2cd35c.  Updated AmqpNioTransport to properly handle receiving multiple frames at once on an NIO Channel.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12628328" name="testRollbackRececeivedMessage-NIO.txt" size="7899" author="tabish" created="Tue, 11 Feb 2014 20:42:16 +0000"/>
                            <attachment id="12628329" name="testRollbackRececeivedMessage-non-NIO.txt" size="7506" author="tabish" created="Tue, 11 Feb 2014 20:42:16 +0000"/>
                            <attachment id="12628331" name="testSessionTransactedCommit-NIO.txt" size="12759" author="tabish" created="Tue, 11 Feb 2014 20:51:41 +0000"/>
                            <attachment id="12628332" name="testSessionTransactedCommit-non-NIO.txt" size="13479" author="tabish" created="Tue, 11 Feb 2014 20:51:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1salr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>