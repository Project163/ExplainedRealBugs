<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:00:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4296] Unit tests fail intermittently when using LevelDB adapter</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4296</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;A couple of the unit tests that have be modified to run with LevelDB as the persistence adapter fail intermittently.&lt;/p&gt;

&lt;p&gt;AMQ2870Test&lt;br/&gt;
AMQ2584Test#testSize&lt;br/&gt;
DuranleSubscriptionOfflineTest#testConsumeOnlyMatchedMessages&lt;br/&gt;
LevelDBXARecoveryBrokerTest#testTopicPersistentPreparedAcksAvailableAfterRestartAndRollback&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630676">AMQ-4296</key>
            <summary>Unit tests fail intermittently when using LevelDB adapter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="tabish">Timothy A. Bish</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Feb 2013 17:25:23 +0000</created>
                <updated>Mon, 22 Jul 2013 20:55:15 +0000</updated>
                            <resolved>Mon, 22 Jul 2013 20:55:15 +0000</resolved>
                                    <version>5.8.0</version>
                                    <fixVersion>5.9.0</fixVersion>
                                    <component>Test Cases</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13570413" author="tabish121" created="Mon, 4 Feb 2013 17:28:43 +0000"  >&lt;p&gt;We can disable the LevelDB variations for now and address these in v5.9 as KahaDB is still the default persistence adapter. &lt;/p&gt;</comment>
                            <comment id="13581241" author="gtully" created="Tue, 19 Feb 2013 12:22:34 +0000"  >&lt;p&gt;adding failing org.apache.activemq.broker.region.cursors.StoreQueueCursorJournalNoDuplicateTest, but scenario where journal is used over a journaled pa is dubious.&lt;/p&gt;</comment>
                            <comment id="13581249" author="gtully" created="Tue, 19 Feb 2013 12:50:12 +0000"  >&lt;p&gt;org.apache.activemq.bugs.AMQ2149Test needs a leveldb variant, and will fail atm&lt;/p&gt;</comment>
                            <comment id="13581279" author="gtully" created="Tue, 19 Feb 2013 13:49:47 +0000"  >&lt;p&gt;also - org.apache.activemq.usecases.ThreeBrokerVirtualTopicNetworkAMQPATest&lt;/p&gt;</comment>
                            <comment id="13616715" author="kearls" created="Thu, 28 Mar 2013 22:08:18 +0000"  >&lt;p&gt;Also, these cause issues at least on AIX and Solaris.&lt;/p&gt;

&lt;p&gt;AMQ2584Test &lt;br/&gt;
AMQ2870Test &lt;br/&gt;
QueueMbeanRestartTest &lt;br/&gt;
FailoverTransactionTest&lt;br/&gt;
ConcurrentProducerDurableConsumerTest&lt;br/&gt;
DurableSubscriptionOfflineTest&lt;/p&gt;</comment>
                            <comment id="13616720" author="kearls" created="Thu, 28 Mar 2013 22:10:12 +0000"  >&lt;p&gt;Could you apply this patch to FailoverTransactionTest?  On AIX and Solaris when testFailoverCommitReplyLost is run with LevelDB it will hang.&lt;/p&gt;</comment>
                            <comment id="13616784" author="tabish121" created="Thu, 28 Mar 2013 23:13:00 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                            <comment id="13620264" author="kearls" created="Tue, 2 Apr 2013 20:56:07 +0000"  >&lt;p&gt;Also: QueueMasterSlaveSingleUrlTest&lt;/p&gt;</comment>
                            <comment id="13623984" author="kearls" created="Fri, 5 Apr 2013 19:35:21 +0000"  >&lt;p&gt;And AMQ2580Test&lt;/p&gt;</comment>
                            <comment id="13659655" author="chirino" created="Thu, 16 May 2013 15:50:25 +0000"  >&lt;p&gt;Found a thread safety issue in the leveldb imp.  Should now be fixed as of r1483369&lt;/p&gt;</comment>
                            <comment id="13659878" author="chirino" created="Thu, 16 May 2013 19:35:46 +0000"  >&lt;p&gt;Have just committed a fix for LevelDBXARecoveryBrokerTest.  The topic GC was being to agressive and was GC messages which had acks that were prepared but not committed.&lt;/p&gt;</comment>
                            <comment id="13659896" author="chirino" created="Thu, 16 May 2013 19:58:55 +0000"  >&lt;p&gt;Added a LevelDB version of AMQ2149Test.java.  It&apos;s working now.&lt;/p&gt;</comment>
                            <comment id="13660053" author="chirino" created="Thu, 16 May 2013 21:58:37 +0000"  >&lt;p&gt;Implemented a pure LevelDB test for the StoreQueueCursorNoDuplicateTest and fix the bug that was causing it to fail.&lt;/p&gt;</comment>
                            <comment id="13660815" author="chirino" created="Fri, 17 May 2013 15:58:58 +0000"  >&lt;p&gt;The bug causing ThreeBrokerVirtualTopicNetwork to fail is now fixed.&lt;/p&gt;</comment>
                            <comment id="13664599" author="tabish121" created="Wed, 22 May 2013 22:06:24 +0000"  >&lt;p&gt;Most look pretty good now, QueueMasterSlaveSingleUrlTest is still hanging though. &lt;/p&gt;</comment>
                            <comment id="13682768" author="tabish121" created="Thu, 13 Jun 2013 21:27:15 +0000"  >&lt;p&gt;found out what was breaking the run of QueueMasterSlaveSingleUrlTest, fixed the clean settings to remove old test stores.  Works now for me on Mac and Linux.&lt;/p&gt;</comment>
                            <comment id="13714161" author="tabish121" created="Fri, 19 Jul 2013 22:22:22 +0000"  >&lt;p&gt;QueueBrowsingLevelDBTest is failing because the LevelDB store isn&apos;t using the Message incrementReferenceCount and decrementReferenceCount methods as KahaDB does so first three messages get added to the cursors batch list befire the memory usage exceeds the set value.  In the KahaDB versions of the test the usage exceeds the set value on send of the third message so it&apos;s not added to the Cursor&apos;s batch list and its usage drops after the store finishes its write so we can then page in one page worth of messages after the first two messages are sent to the browser.  &lt;/p&gt;</comment>
                            <comment id="13715645" author="tabish121" created="Mon, 22 Jul 2013 20:55:15 +0000"  >&lt;p&gt;current set of test are passing for me now. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12628941">AMQ-4268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12632893">AMQ-4329</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12575957" name="AMQ-4415B.patch" size="46887" author="kearls" created="Thu, 28 Mar 2013 22:10:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hp9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>