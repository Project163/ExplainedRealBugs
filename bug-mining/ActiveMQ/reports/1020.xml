<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:47:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2827] Intermittent 204 response using REST</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2827</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Was able to successfully send 20 messages to AMQ via REST.  I can see that the messages were consumed and there are 20 messages in the response queue.  However, when reading the response queue using selector via REST, it intermittently returns HTTP code 204.  By looking at the &quot;Active Consumers&quot; for the response queue, I can see that the specific message has been dispatched to the consumer as the &quot;Enqueues&quot;, &quot;Dequeues&quot; and &quot;Dispatched&quot; values are set to 1.&lt;/p&gt;

&lt;p&gt;The server has been configured with consumer.prefetchSize=1.&lt;/p&gt;

&lt;p&gt;I&apos;ve further tried reproducing the problem by setting consumer.prefetchSize=0.  When I get a 204 response, I can see that the message is in the outgoing queue.  But executing another GET with the same Correlation ID will hang the client even though readTimeout is set.&lt;/p&gt;

&lt;p&gt;This has been tested with 5.4-SNAPSHOT 15-July.&lt;/p&gt;

&lt;p&gt;Update 23 July:&lt;/p&gt;

&lt;p&gt;Tried using the following settings:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;removed consumer.prefetchSize in web.xml&lt;/li&gt;
	&lt;li&gt;saved session cookie for requests&lt;/li&gt;
	&lt;li&gt;used the &quot;selector&quot; HTTP header&lt;/li&gt;
	&lt;li&gt;used a random value for clientId in each request&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It seems to be returning all messages in properly.  However, each request generates a new client session based on the selector header.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux&lt;br/&gt;
JDK5&lt;/p&gt;</environment>
        <key id="12483505">AMQ-2827</key>
            <summary>Intermittent 204 response using REST</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="lokem">Michael Lok</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jul 2010 08:21:37 +0000</created>
                <updated>Wed, 8 Sep 2010 10:45:15 +0000</updated>
                            <resolved>Wed, 8 Sep 2010 10:45:15 +0000</resolved>
                                    <version>5.4.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12940431" author="dejanb" created="Fri, 23 Jul 2010 12:44:02 +0000"  >&lt;p&gt;The attached client does not reproduces the issue as it missed the part that is putting messages in the response queue. Can you create a test that can be used to reproduce the issue you&apos;re seeing?&lt;/p&gt;</comment>
                            <comment id="12940513" author="lokem" created="Sat, 24 Jul 2010 03:05:40 +0000"  >&lt;p&gt;New class file with proper send and get methods.  Change the URLs to the proper ones.  This version saves server session cookies.  But in actual implementation, I&apos;m not able to save server session cookies.&lt;/p&gt;</comment>
                            <comment id="12942858" author="dejanb" created="Wed, 8 Sep 2010 10:45:15 +0000"  >&lt;p&gt;I added a test case that confirms that this scenario works fine. take a look at testCorrelation() in RestTest&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/activemq/trunk/activemq-web-demo/src/test/java/org/apache/activemq/web/RestTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/activemq/trunk/activemq-web-demo/src/test/java/org/apache/activemq/web/RestTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also note, that you need to set clientId on your GET url in order to use the same consumer every time and get all messages.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461416" name="MQRESTClient.java" size="3207" author="lokem" created="Sat, 24 Jul 2010 03:05:39 +0000"/>
                            <attachment id="12461764" name="restclient.java" size="2854" author="lokem" created="Thu, 15 Jul 2010 08:43:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ba4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63754</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>