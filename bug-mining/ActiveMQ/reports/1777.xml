<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:58:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4286] NioQueueSubscriptionTest.testLotsOfConcurrentConnections fails</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4286</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;This test fails consistently with multiple instances of the two first two exceptions shown below.  Out of 400 connections created, typically 40-140 fail.&lt;/p&gt;

&lt;p&gt;The last two exceptions occur randomly in the logs if I run with TRACE logging on.&lt;/p&gt;


&lt;p&gt;-------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;javax.jms.JMSException: Cannot send, channel has already failed: tcp://127.0.0.1:62621&lt;br/&gt;
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1478)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnection.start(ActiveMQConnection.java:516)&lt;br/&gt;
        at org.apache.activemq.broker.NioQueueSubscriptionTest$1.run(NioQueueSubscriptionTest.java:90)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
Caused by: org.apache.activemq.transport.InactivityIOException: Cannot send, channel has already failed: tcp://127.0.0.1:62621&lt;br/&gt;
        at org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:315)&lt;br/&gt;
        at org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:304)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:85)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:104)&lt;br/&gt;
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)&lt;br/&gt;
        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1363)&lt;br/&gt;
        ... 6 more&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------------&lt;br/&gt;
OR &lt;/p&gt;


&lt;p&gt;javax.jms.JMSException: Could not connect to broker URL: tcp://localhost:62621?trace=false. Reason: java.net.SocketException: Connection reset by peer&lt;br/&gt;
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:35)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:293)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:238)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:184)&lt;br/&gt;
        at org.apache.activemq.broker.NioQueueSubscriptionTest$1.run(NioQueueSubscriptionTest.java:88)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
Caused by: java.net.SocketException: Connection reset by peer&lt;br/&gt;
        at java.net.PlainSocketImpl.socketConnect(Native Method)&lt;br/&gt;
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)&lt;br/&gt;
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)&lt;br/&gt;
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)&lt;br/&gt;
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)&lt;br/&gt;
        at java.net.Socket.connect(Socket.java:579)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:496)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:459)&lt;br/&gt;
        at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)&lt;br/&gt;
        at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:140)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:273)&lt;br/&gt;
        ... 6 more&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;java.net.SocketException: Invalid argument&lt;br/&gt;
        at java.net.PlainSocketImpl.socketSetOption(Native Method)&lt;br/&gt;
        at java.net.AbstractPlainSocketImpl.setOption(AbstractPlainSocketImpl.java:269)&lt;br/&gt;
        at java.net.Socket.setReceiveBufferSize(Socket.java:1218)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.initialiseSocket(TcpTransport.java:432)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:513)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:459)&lt;br/&gt;
        at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)&lt;br/&gt;
        at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:140)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:58)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:273)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:238)&lt;br/&gt;
        at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:184)&lt;br/&gt;
        at org.apache.activemq.broker.NioQueueSubscriptionTest$1.run(NioQueueSubscriptionTest.java:88)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;2013-01-30 15:54:01,178 &lt;span class=&quot;error&quot;&gt;&amp;#91;0.1:62621@62451&amp;#93;&lt;/span&gt; - DEBUG ActiveMQConnection             - Async exception with no exception listener: java.net.SocketException: Connection reset&lt;br/&gt;
java.net.SocketException: Connection reset&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:189)&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:121)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport$2.fill(TcpTransport.java:604)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:58)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport$2.read(TcpTransport.java:589)&lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:387)&lt;br/&gt;
        at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:275)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:221)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:213)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:196)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12629997">AMQ-4286</key>
            <summary>NioQueueSubscriptionTest.testLotsOfConcurrentConnections fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10101">Abandoned</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kearls">Kevin Anthony Earls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jan 2013 20:59:58 +0000</created>
                <updated>Sun, 13 Mar 2022 14:08:02 +0000</updated>
                            <resolved>Sun, 13 Mar 2022 14:08:02 +0000</resolved>
                                                                    <component>Test Cases</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13566893" author="kearls" created="Wed, 30 Jan 2013 21:00:59 +0000"  >&lt;p&gt;This is an updated version of the test.  It doesn&apos;t fix anything, but adds some additional logging which might be helpful in resolving this.&lt;/p&gt;</comment>
                            <comment id="13566906" author="tabish121" created="Wed, 30 Jan 2013 21:13:12 +0000"  >&lt;p&gt;Applied the initial patch&lt;/p&gt;</comment>
                            <comment id="13570747" author="tabish121" created="Mon, 4 Feb 2013 23:44:15 +0000"  >&lt;p&gt;Is this one still failing for you? I wasn&apos;t able to reproduce it today.&lt;/p&gt;</comment>
                            <comment id="13570897" author="kearls" created="Tue, 5 Feb 2013 02:55:26 +0000"  >&lt;p&gt;Yea, it still fails regularly for me.  &lt;/p&gt;</comment>
                            <comment id="17505576" author="christopher.l.shannon" created="Sun, 13 Mar 2022 14:08:02 +0000"  >&lt;p&gt;Closing very old/abandoned jiras not updated in more than 7 years&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12567205" name="NioQueueSubscriptionTest.patch" size="3633" author="kearls" created="Wed, 30 Jan 2013 21:00:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hl2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>