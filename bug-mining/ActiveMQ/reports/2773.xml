<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:33:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6204] Advisory broker does not properly remove virtual consumer demand</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6204</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When virtual destination network demand is enabled based on the existence of a destination ( the useVirtualDestSubsOnCreation flag as described in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6027&quot; title=&quot;Dynamic network demand should support Virtual Destination consumers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6027&quot;&gt;&lt;del&gt;AMQ-6027&lt;/del&gt;&lt;/a&gt;) , there is a map called brokerConsumerDests that tracks the unique demand for the existence virtual destinations.&lt;/p&gt;

&lt;p&gt;Elements are not being properly removed from this map when a virtual destination is removed.  All elements are being removed from this map instead of just the ones that match the removed virtual destination.  This can cause entries in a different map (the virtualDestinationConsumers map) to not be cleaned up and for duplicates to be added if the virtual destination is re-added later.  This can lead to a memory leak as this map can continue to grow and not be cleaned up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12948511">AMQ-6204</key>
            <summary>Advisory broker does not properly remove virtual consumer demand</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2016 19:50:55 +0000</created>
                <updated>Sat, 21 Oct 2017 11:36:02 +0000</updated>
                            <resolved>Wed, 9 Mar 2016 19:58:58 +0000</resolved>
                                    <version>5.13.2</version>
                                    <fixVersion>5.13.3</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15187797" author="jira-bot" created="Wed, 9 Mar 2016 19:55:19 +0000"  >&lt;p&gt;Commit a2781e3966ded41a241d24ffb8d85d410c39eb21 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a2781e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a2781e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6204&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6204&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing the removal logic on virtual destination remove inside of&lt;br/&gt;
Advisory Broker to clean up virtual destination maps properly.  Added a&lt;br/&gt;
test to verify.  Also added new debug logging to help track down any&lt;br/&gt;
future issues.&lt;/p&gt;</comment>
                            <comment id="15187806" author="jira-bot" created="Wed, 9 Mar 2016 19:58:14 +0000"  >&lt;p&gt;Commit 442fadac87a248cfe1efefd678b9fff6bd9f8733 in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=442fada&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=442fada&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6204&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6204&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing the removal logic on virtual destination remove inside of&lt;br/&gt;
Advisory Broker to clean up virtual destination maps properly.  Added a&lt;br/&gt;
test to verify.  Also added new debug logging to help track down any&lt;br/&gt;
future issues.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit a2781e3966ded41a241d24ffb8d85d410c39eb21)&lt;/p&gt;</comment>
                            <comment id="15187810" author="christopher.l.shannon" created="Wed, 9 Mar 2016 19:58:58 +0000"  >&lt;p&gt;Fix applied and cherry-picked to 5.13.x in case a 5.13.3 release is done in the future.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12908580">AMQ-6027</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uf4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>