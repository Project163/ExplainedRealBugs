<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:08:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5684] AMQP: messages get stuck</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5684</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;While investigating &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5646&quot; title=&quot;AMQP: Second receiver attaching to queue hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5646&quot;&gt;&lt;del&gt;AMQ-5646&lt;/del&gt;&lt;/a&gt; the same test failed in a different way.&lt;br/&gt;
It did not progress as far. The test:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Client opens a connection and a session.&lt;/li&gt;
	&lt;li&gt;Client opens a sender and sends 20 messages&lt;/li&gt;
	&lt;li&gt;Client opens a receiver with a credit of two&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The receiver receives one message and that&apos;s all. The expectation is to receive two messages.&lt;/p&gt;

&lt;p&gt;A trace to be attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;5.12-SNAPSHOT 20150322 running on Fedora linux&lt;/p&gt;</environment>
        <key id="12784967">AMQ-5684</key>
            <summary>AMQP: messages get stuck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="chug">Charles E. Rolke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Mar 2015 19:53:55 +0000</created>
                <updated>Mon, 14 Mar 2016 12:59:22 +0000</updated>
                            <resolved>Wed, 1 Apr 2015 21:54:42 +0000</resolved>
                                    <version>5.12.0</version>
                                    <fixVersion>5.12.0</fixVersion>
                                    <component>AMQP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14376502" author="chug" created="Mon, 23 Mar 2015 19:55:44 +0000"  >&lt;p&gt;The receiver issues a credit of 2 but receives only 1 message.&lt;/p&gt;</comment>
                            <comment id="14382097" author="chug" created="Thu, 26 Mar 2015 15:59:24 +0000"  >&lt;p&gt;AMQ5684-reproducer.cs is a Visual Studio 2012 C# program to reproduce the issue. Instructions on how to install AmqpNetLite are included within.&lt;/p&gt;
</comment>
                            <comment id="14382129" author="tabish121" created="Thu, 26 Mar 2015 16:13:14 +0000"  >&lt;p&gt;Thanks chuck, that&apos;s very helpful.  I had started down the same road of extracting the test from the AmqpNetLite stuff as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I think I understand why this happens and am working on a fix, problem being that I&apos;ve broken other clients test suites in the process &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="14384424" author="tabish121" created="Fri, 27 Mar 2015 19:16:08 +0000"  >&lt;p&gt;Chuck, I have pushed some fixes to ActiveMQ master which should show up in the next SNAPSHOT build of 5.12 that attempt to address this.  I&apos;ve implemented support for AMQP drain and in doing so found some places where we were not handling incoming flow events correctly that could cause what you have been seeing.  I couldn&apos;t reproduce this using the AmqpNetLite tests after applying all these fixes, can you validate this on your end.  I am still seeing some odd behaviour with the .NET tests when I use the &apos;jms&apos; transformer but they seem pretty happy when run against a broker that is using the &apos;raw&apos; or &apos;native&apos; transformer, I&apos;ll try and track down what&apos;s going on there as well.&lt;/p&gt;</comment>
                            <comment id="14384855" author="tabish121" created="Fri, 27 Mar 2015 23:01:40 +0000"  >&lt;p&gt;Added additional fix to attempt to preserve the original MessageID value when the &apos;JMS&apos; transformer is in play, requires that the store version be set to 10 in the Broker configuration to fully work.  This allows the AmqpNetLite tests to work fairly well now even when &apos;JMS&apos; transformer is used.&lt;/p&gt;</comment>
                            <comment id="14391551" author="chug" created="Wed, 1 Apr 2015 21:53:04 +0000"  >&lt;p&gt;Snapshot 5.12-20150331 looks good. The test case passes.&lt;/p&gt;</comment>
                            <comment id="14391553" author="tabish121" created="Wed, 1 Apr 2015 21:54:42 +0000"  >&lt;p&gt;Fix confirmed by Chuck, thanks!&lt;/p&gt;</comment>
                            <comment id="15192872" author="zman" created="Mon, 14 Mar 2016 08:05:26 +0000"  >&lt;p&gt;Timothy Bish, our production environment seems meeting this problem with activemq-5.11.2. I was trying to reproduce this issue with the jms referring to &apos;AMQ5684-reproducer.cs&apos;, but failed. Here is my code. &lt;a href=&quot;https://github.com/zman2013/activemq-test-2/blob/master/src/main/java/zman/test/CloseBusyConsumer.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zman2013/activemq-test-2/blob/master/src/main/java/zman/test/CloseBusyConsumer.java&lt;/a&gt; Can you give me some advice to replay the issue? Appreciate your help &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; -zman&lt;/p&gt;</comment>
                            <comment id="15193233" author="tabish121" created="Mon, 14 Mar 2016 12:59:22 +0000"  >&lt;p&gt;You will most likely find it quite tricky to reproduce an AMQP bug using the OpenWire JMS client.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12707517" name="AMQ5684-reproducer.cs" size="4030" author="chug" created="Thu, 26 Mar 2015 15:59:24 +0000"/>
                            <attachment id="12706703" name="second-receiver-hang-20150323.html" size="112250" author="chug" created="Mon, 23 Mar 2015 19:55:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i278tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>