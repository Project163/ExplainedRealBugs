<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:38:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1993] Systems hang due to inability to timeout socket write operation</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1993</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;the blocking Java Socket API doesn&apos;t have a timeout on socketWrite invocations.&lt;br/&gt;
This means, if a TCP session is dropped or terminated without RST or FIN packets, the operating system it left to eventually time out the session. On the linux kernel this timeout usually takes 15 to 30minutes. &lt;/p&gt;

&lt;p&gt;For this entire period, the AMQ server hangs, and producers and consumers are unable to use a topic.&lt;/p&gt;

&lt;p&gt;I have created two patches for this at the page:&lt;br/&gt;
&lt;a href=&quot;http://www.hanik.com/covalent/amq/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.hanik.com/covalent/amq/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me show a bit more&lt;br/&gt;
---------------------------------&lt;br/&gt;
&quot;ActiveMQ Transport: tcp:///X.YYY.XXX.ZZZZ:2011&quot; daemon prio=10 tid=0x0000000055d39000 nid=0xc78 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00000000447c9000..0x00000000447cac10&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
	at java.net.SocketOutputStream.socketWrite0(Native Method)&lt;br/&gt;
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)&lt;/p&gt;

&lt;p&gt;This is a thread stuck in blocking IO, and can be stuck for 30 minutes during the kernel TCP retransmission attempts.&lt;br/&gt;
Unfortunately the thread dump is very misleading since the name of the thread, is not the destination or even remotely related to the socket it is operating on.&lt;br/&gt;
To mend this, a very simple (and configurable) ThreadNameFilter has been suggested to the patch, that appends the destination and helps the system administrator correctly identify the client that is about to receive data. &lt;/p&gt;

&lt;p&gt;-----------------------------------&lt;br/&gt;
	at org.apache.activemq.broker.region.Topic.dispatch(Topic.java:581)&lt;br/&gt;
	at org.apache.activemq.broker.region.Topic.doMessageSend(Topic.java:421)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaaec155818&amp;gt; (a org.apache.activemq.broker.region.Topic)&lt;br/&gt;
	at org.apache.activemq.broker.region.Topic.send(Topic.java:363)&lt;br/&gt;
The lock being held at this issue unfortunately makes the entire Topic single threaded. &lt;br/&gt;
When this lock is being held, no other clients (producers and consumers) can publish to/receive from this topic.&lt;br/&gt;
And this lock can hold up to 30 minutes.&lt;br/&gt;
I consider solving this single threaded behavior a &apos;feature enhancement&apos; that should be handled separately from this bug. Because even if it is solved, threads still risk being stuck in socketWrite0 for dropped connections that still appear to be established.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For this, I have implemented a socket timeout filter, based on a TransportFilter, this filter only times out connections that are actually writing data.&lt;/p&gt;

&lt;p&gt;The two patches are at:&lt;br/&gt;
&lt;a href=&quot;http://www.hanik.com/covalent/amq/patch-1-threadname-filter.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.hanik.com/covalent/amq/patch-1-threadname-filter.patch&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.hanik.com/covalent/amq/patch-3-tcp-writetimeout.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.hanik.com/covalent/amq/patch-3-tcp-writetimeout.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the binary 0000.jar applies to both 5.1 and trunk and can be used today in existing environments. &lt;/p&gt;

</description>
                <environment>&lt;p&gt;Unix (Solaris and Linux tested)&lt;/p&gt;</environment>
        <key id="12483053">AMQ-1993</key>
            <summary>Systems hang due to inability to timeout socket write operation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12482857">AMQ-2308</parent>
                                    <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="fhanik">Filip Hanik</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Nov 2008 00:32:57 +0000</created>
                <updated>Fri, 26 Jun 2009 16:25:24 +0000</updated>
                            <resolved>Fri, 19 Jun 2009 20:53:04 +0000</resolved>
                                    <version>5.1.0</version>
                    <version>5.2.0</version>
                                    <fixVersion>5.2.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12940440" author="gtully" created="Mon, 3 Nov 2008 13:21:25 +0000"  >&lt;p&gt;these fixes look great. Can you attach your patch files to this jira and select the appropriate license grant option.&lt;/p&gt;</comment>
                            <comment id="12940408" author="gtully" created="Mon, 3 Nov 2008 13:31:45 +0000"  >&lt;p&gt;on the tcp-writetimeout patch&lt;/p&gt;

&lt;p&gt;In the catch clause below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void oneway(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; command) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            registerWrite(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
+            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.oneway(command);
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException x) {
+            deRegisterWrite(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,x);
+            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; x;
+        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fail is passed to deRegisterWrite which will cause a throw of the Forced exception rather than x. It seems that deRegisterWrite ignores the IOException argument which I guess is not intended, or is it?&lt;/p&gt;

&lt;p&gt;Would it be possible to include some junit tests for this functionality?&lt;/p&gt;</comment>
                            <comment id="12940424" author="fhanik" created="Mon, 3 Nov 2008 13:37:38 +0000"  >&lt;p&gt;maybe you misread the code&lt;/p&gt;

&lt;p&gt;if (fail) {&lt;br/&gt;
                IOException ex = (iox!=null)?iox:new IOException(&quot;Forced write timeout for:&quot;+filter.getNext().getRemoteAddress());&lt;br/&gt;
                filter.getTransportListener().onException(ex);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Filip&lt;/p&gt;</comment>
                            <comment id="12940391" author="fhanik" created="Mon, 3 Nov 2008 13:38:15 +0000"  >&lt;p&gt;thread name filter - patch 1&lt;/p&gt;</comment>
                            <comment id="12940413" author="fhanik" created="Mon, 3 Nov 2008 13:44:24 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fail) { 
  IOException ex = (iox!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)?iox:&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Forced write timeout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;:&quot;&lt;/span&gt;+filter.getNext().getRemoteAddress()); 
  filter.getTransportListener().onException(ex); 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12940417" author="gtully" created="Mon, 3 Nov 2008 13:53:01 +0000"  >&lt;p&gt;one more thought:&lt;br/&gt;
would it be sufficient to do deRegister in the finally and only have the timeout thread force an exception. I guess the question is, why is deRegister interested in the exception at all?&lt;/p&gt;</comment>
                            <comment id="12940437" author="fhanik" created="Mon, 3 Nov 2008 14:01:13 +0000"  >&lt;p&gt;I am currently working on a test case so that you can see this in action.&lt;br/&gt;
In the real life the following way is the easiest to reproduce&lt;/p&gt;

&lt;p&gt;Have a few machines, consumers and producers working with the same topic&lt;/p&gt;

&lt;p&gt;On one consumer machine - pull out the network cord&lt;/p&gt;

&lt;p&gt;This action causes the connection to be in &quot;ESTABLISHED&quot; state, since no RST or FIN packets have been sent.&lt;br/&gt;
the Linux TCP implementation will then try to resend the packet 15 times (default config) with 2min in between each retransmission.&lt;/p&gt;

&lt;p&gt;During this time, the server will keep filling up the TCP send buffer in the kernel, and when it is full, the thread will get stuck in java.net.Socket.socketWrite0&lt;br/&gt;
because this thread also holds the lock on the topic, no other thread can operate on the topic anymore&lt;/p&gt;

&lt;p&gt;best&lt;br/&gt;
Filip&lt;/p&gt;</comment>
                            <comment id="12940411" author="fhanik" created="Mon, 3 Nov 2008 14:09:40 +0000"  >&lt;p&gt;Here is another example of a thread locking up the entire system, based on the same scenario.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;BrokerService&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000060103800 nid=0x74e7 runnable [0x00000000467c7000..0x00000000467c7c10]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:106)
	at java.io.DataOutputStream.flush(DataOutputStream.java:106)
	at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:165)
	at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:233)
	- locked &amp;lt;0x00002aaabe89c2b0&amp;gt; (a java.util.concurrent.atomic.AtomicBoolean)
	at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:83)
	at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:100)
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)
	- locked &amp;lt;0x00002aaabe89cc10&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1188)
	at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:776)
	at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:813)
	at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)
	at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and as a result other threads are blocked&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ Transport Stopper: /xx.xx.xxx.xxx:61489&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000607ad400 nid=0x7687 waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; monitor entry [0x00000000450b0000..0x00000000450b0c90]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED (on object monitor)
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)
	- waiting to lock &amp;lt;0x00002aaabe89cc10&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1188)
	at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:776)
	at org.apache.activemq.broker.TransportConnection.dispatchSync(TransportConnection.java:735)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12940426" author="gtully" created="Mon, 3 Nov 2008 14:13:42 +0000"  >&lt;p&gt;ah, apologies, I did mis read. I understand the problem, thanks.&lt;/p&gt;

&lt;p&gt;Still wondering bout my last comment though, why is deRegisterWriter interested in exceptions?&lt;/p&gt;</comment>
                            <comment id="12940444" author="fhanik" created="Mon, 3 Nov 2008 14:14:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt;one more thought:&lt;br/&gt;
would it be sufficient to do deRegister in the finally and only have the timeout thread force an exception. I guess the question is, why is deRegister interested in the exception at all?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The reason is because deregister is atomic, that way we close the socket for the correct reason, and not make up a reason if a real socket exception and a timeout happen at the same time.&lt;/p&gt;

&lt;p&gt;I thought about it for a while, to just ignore the socket exception that came from the underlying layer, and pass it on, but then I thought it would be safer to invoke the onException to guarantee a socket closure regardless of the IO exception that came back.&lt;/p&gt;</comment>
                            <comment id="12940399" author="gtully" created="Mon, 3 Nov 2008 15:13:58 +0000"  >&lt;p&gt;Am not sure it is safer because the filter introduces a change of behaviour to the normal exception case. Ie: onException is now always called.&lt;br/&gt;
In addition, in the event that a close is done async from an onException, there is still an opportunity to have a normal IOException interleaved with a Forced exception.&lt;br/&gt;
I think this is the same as with a pass through on exception, a close can get called twice, but this is handled ok by close.&lt;br/&gt;
Mostly though, I am wary of the change in behaviour introduced by the exception handler.&lt;br/&gt;
As this is a filter that is added by choice it is not such a big deal but we may as well iron out the detail. This is a handy feature. &lt;/p&gt;</comment>
                            <comment id="12940415" author="fhanik" created="Mon, 3 Nov 2008 15:49:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt;there is still an opportunity to have a normal IOException interleaved with a Forced exception.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is not the case. the deregister operation is atomic. deregister will never call throw twice. However, the oneway method will not stop the normal exception from propagating the underlying exception to the top. so only one exception will raise on the invoking thread. &lt;br/&gt;
In case of a &apos;forced timeout exception&apos; there will be two exceptions. On that is invoked in the onException, there will be a 2nd exception when the async handler calls socket.close, and terminates the write state.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;As this is a filter that is added by choice it is not such a big deal but we may as well iron out the detail. This is a handy feature.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;not only handy, but essential. It prevents the entire server from a complete dead lock due to synchronization in the higher layers.&lt;br/&gt;
Once that synchronization has been mended, it is still a handy feature, since it prevents single threads from becoming locked for a very long time.&lt;/p&gt;


</comment>
                            <comment id="12940419" author="fhanik" created="Mon, 3 Nov 2008 15:57:23 +0000"  >&lt;p&gt;That being said, the upper layer can react to the propagating IO exception if needed. But that shouldn&apos;t be an issue, this filter does what it is supposed to do. We could add more parameters to make the behavior configurable.&lt;/p&gt;
</comment>
                            <comment id="12940436" author="gtully" created="Mon, 3 Nov 2008 16:18:52 +0000"  >&lt;p&gt;agreed, will commit in an hour or so, once a sanity run of the tests completes.&lt;/p&gt;</comment>
                            <comment id="12940432" author="gtully" created="Mon, 3 Nov 2008 17:31:48 +0000"  >&lt;p&gt;patch applied in r710109&lt;br/&gt;
thanks.&lt;/p&gt;</comment>
                            <comment id="12940425" author="fhanik" created="Tue, 4 Nov 2008 16:01:49 +0000"  >&lt;p&gt;Index: activemq-core/src/main/java/org/apache/activemq/transport/tcp/TcpBufferedOutputStream.java&lt;/p&gt;

&lt;p&gt;looks like I have a copy paste error&lt;/p&gt;

&lt;p&gt;+                try &lt;/p&gt;
{
+                    writeTimestamp = System.currentTimeMillis();
+                    out.write(b, off, len);
+                } finally {
+                    writeTimestamp = System.currentTimeMillis();
+                }&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
should be &lt;br/&gt;
&lt;br/&gt;
+                try {+                    writeTimestamp = System.currentTimeMillis();+                    out.write(b, off, len);+                }
&lt;p&gt; finally &lt;/p&gt;
{
+                    writeTimestamp = -1;
+                }
</comment>
                            <comment id="12940443" author="gtully" created="Tue, 4 Nov 2008 16:10:53 +0000"  >&lt;p&gt;just to be sure, the change is one line, right?:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/activemq/transport/tcp/TcpBufferedOutputStream.java
===================================================================
--- src/main/java/org/apache/activemq/transport/tcp/TcpBufferedOutputStream.java	(revision 711284)
+++ src/main/java/org/apache/activemq/transport/tcp/TcpBufferedOutputStream.java	(working copy)
@@ -95,7 +95,7 @@
                     writeTimestamp = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
                     out.write(b, off, len);
                 } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
-                    writeTimestamp = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
+                    writeTimestamp = -1;
                 }
             }
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12940457" author="gtully" created="Tue, 4 Nov 2008 16:22:35 +0000"  >&lt;p&gt;update applied in r711292&lt;/p&gt;</comment>
                            <comment id="12940459" author="fhanik" created="Tue, 4 Nov 2008 17:39:50 +0000"  >&lt;p&gt;That&apos;s correct Gary, thank you!&lt;/p&gt;</comment>
                            <comment id="12939449" author="gtully" created="Thu, 6 Nov 2008 10:47:07 +0000"  >&lt;p&gt;These fixes will now make 5.2.0 rc3&lt;/p&gt;</comment>
                            <comment id="12941501" author="felixehm" created="Tue, 16 Jun 2009 09:05:05 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am using ActiveMQ 5.3.0  and apparently run into this reported problem again. &lt;br/&gt;
Our clients weren&apos;t able to get any sessions and I first thought that it is a problem with the CopyOnWriteArray Object where consumers are kept. But then I saw one thread in RUNNABLE locking 3 mutexes and writing using java.net.SocketOutputStream.socketWrite0.&lt;/p&gt;

&lt;p&gt;I attached the thread dump file for investigations.&lt;/p&gt;

&lt;p&gt;Unfortunately I can&apos;t reproduce this situation with a unit test. The only additional information I got from our client was that he tried to restarted the connection within very short period (1-2 sec).&lt;/p&gt;
</comment>
                            <comment id="12941508" author="felixehm" created="Tue, 16 Jun 2009 09:12:17 +0000"  >&lt;p&gt;jstack thread dump&lt;/p&gt;</comment>
                            <comment id="12941509" author="felixehm" created="Tue, 16 Jun 2009 09:12:54 +0000"  >&lt;p&gt;jstack thread dump&lt;/p&gt;</comment>
                            <comment id="12941489" author="fhanik" created="Tue, 16 Jun 2009 17:59:01 +0000"  >&lt;p&gt;Felix, did you configure a timeout? transport.soWriteTimeout?&lt;/p&gt;


&lt;p&gt;Example for configuring socket timeouts - transport.soTimeout applies to read, transport.soWriteTimeout applies to write.&lt;/p&gt;


&lt;p&gt;	   &amp;lt;transportConnector&lt;br/&gt;
	       name=&quot;tcp1&quot;&lt;br/&gt;
	       uri=&quot;tcp://127.0.0.1:61616?transport.soTimeout=10000&amp;amp;transport.soWriteTimeout=15000&quot;&lt;br/&gt;
	   /&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="12941559" author="fhanik" created="Fri, 19 Jun 2009 20:53:04 +0000"  >&lt;p&gt;closing the WriteTimeoutFilter thread is not configured in the example stack trace.&lt;/p&gt;</comment>
                            <comment id="12941569" author="felixehm" created="Mon, 22 Jun 2009 08:22:37 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;thanks for the hint. Haven&apos;t tested it, but it appears to be reasonable.&lt;/p&gt;

&lt;p&gt;Is there a reason for not having a timeout configured by default ?&lt;/p&gt;


&lt;p&gt;Cheers,&lt;br/&gt;
Felix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461538" name="jstack.blockedSession" size="166715" author="felixehm" created="Tue, 16 Jun 2009 09:12:54 +0000"/>
                            <attachment id="12461191" name="patch-1-threadname-filter.patch" size="4112" author="fhanik" created="Mon, 3 Nov 2008 13:38:15 +0000"/>
                            <attachment id="12461268" name="patch-3-tcp-writetimeout.patch" size="11081" author="fhanik" created="Mon, 3 Nov 2008 13:38:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ts8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>171885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>