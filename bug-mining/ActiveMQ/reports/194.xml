<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:33:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1147] Spring AspectJ autoproxying breaks ActiveMQManagedConnectionFactory injection</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1147</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The cast to the concrete class at ActiveMQManagedConnectionFactory:50 fails:&lt;/p&gt;

&lt;p&gt;    public void setResourceAdapter(ResourceAdapter adapter) throws ResourceException {&lt;br/&gt;
        this.adapter = (ActiveMQResourceAdapter) adapter;&lt;/p&gt;

&lt;p&gt;org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;$Proxy63&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;javax.resource.spi.ResourceAdapter&amp;#93;&lt;/span&gt; for property &apos;resourceAdapter&apos;; nested exception is java.lang.ClassCastException: $Proxy63 cannot be cast to org.apache.activemq.ra.ActiveMQResourceAdapter&lt;br/&gt;
Caused by: java.lang.ClassCastException: $Proxy63 cannot be cast to org.apache.activemq.ra.ActiveMQResourceAdapter&lt;br/&gt;
    at org.apache.activemq.ra.ActiveMQManagedConnectionFactory.setResourceAdapter(ActiveMQManagedConnectionFactory.java:50)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:786)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Spring (2.0.3 build 66) config:&lt;/p&gt;

&lt;p&gt;	&amp;lt;aop:aspectj-autoproxy /&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;aop:spring-configured /&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;jms.managedConnectionFactory&quot; class=&quot;org.apache.activemq.ra.ActiveMQManagedConnectionFactory&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;resourceAdapter&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;ref local=&quot;jms.resourceAdapter&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;jms.resourceAdapter&quot; class=&quot;org.apache.activemq.ra.ActiveMQResourceAdapter&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;serverUrl&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;value&amp;gt;${amq.serverUrl}&amp;lt;/value&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;There&apos;s probably a workaround for this, but it&apos;s still annoying.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12481886">AMQ-1147</key>
            <summary>Spring AspectJ autoproxying breaks ActiveMQManagedConnectionFactory injection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cgs">Christopher G. Stach II</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2007 05:32:27 +0000</created>
                <updated>Wed, 7 Mar 2007 14:11:33 +0000</updated>
                            <resolved>Wed, 7 Mar 2007 14:11:33 +0000</resolved>
                                    <version>4.1.0</version>
                                    <fixVersion>5.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12938722" author="cgs" created="Fri, 2 Feb 2007 14:22:38 +0000"  >&lt;p&gt;This patch takes care of the issue.  It&apos;s really messy because I had to add Javadocs all over to get Eclipse to compile the files.  ( My project settings require Javadocs, comments in empty blocks, no unnecessary else blocks, etc., but I was too tired to change them.)  Here&apos;s basically what I had to do:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Extract interfaces for ActiveMQActivationSpec and ActiveMQResourceAdapter&lt;/li&gt;
	&lt;li&gt;AMQRAImpl: Fix a couple AMQActivationSpec  equality checks&lt;/li&gt;
	&lt;li&gt;AMQRAImpl: Use method calls on the AMQRA interface instead of field access in equals&lt;/li&gt;
	&lt;li&gt;AMQMCF: Added instanceof check in setResourceAdapter&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12938812" author="jstrachan" created="Wed, 7 Mar 2007 14:11:33 +0000"  >&lt;p&gt;Patch applied with thanks! I made a minor change to keep the implementation class names of the activation spec &amp;amp; resource adapter the same - to avoid breaking anyones RA/RAR configurations - so called the 2 interfaces MessageActivationSpec and MessageResourceAdapter (not the worlds best names, but I&apos;d rather avoid breaking things)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460822" name="AMQ-1147.patch" size="95234" author="cgs" created="Fri, 2 Feb 2007 14:22:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rzpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>