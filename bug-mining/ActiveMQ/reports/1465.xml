<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:53:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3802] Successful unsubscribing should not report inactive durable topic subscribers</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3802</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;An unsubscribe call should remove the client from inactive durable topic subscribers list. In the current broker behavior, even if a durable consumer unsubscribes &amp;amp; shuts down gracefully, the broker marks the durable subscriber as inactive. If this durable subscriber was never meant to come up again(as in my case where i am testing rigorously using unique client-ids each time based on pid) then broker will unnecessarily mark a lot of consumers as inactive durable.&lt;/p&gt;

&lt;p&gt;For inactive durable subscribers, there is no distinction between a subscriber going down abruptly or unsubscribing &amp;amp; going down gracefully.&lt;/p&gt;

&lt;p&gt;This should be improved I think. Moreover, any tips on how to remove those 1000s of inactive subscriptions dangling in my Jconsole ?? Destroying each manually isn&apos;t an option !&lt;/p&gt;</description>
                <environment>&lt;p&gt;Solaris,Linux&lt;/p&gt;</environment>
        <key id="12549697">AMQ-3802</key>
            <summary>Successful unsubscribing should not report inactive durable topic subscribers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xbhanu">Bhanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Apr 2012 12:50:50 +0000</created>
                <updated>Tue, 15 May 2012 09:10:44 +0000</updated>
                            <resolved>Sat, 14 Apr 2012 20:27:12 +0000</resolved>
                                    <version>5.5.1</version>
                                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13247198" author="xbhanu" created="Thu, 5 Apr 2012 12:53:03 +0000"  >&lt;p&gt;&lt;a href=&quot;http://activemq.apache.org/manage-durable-subscribers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/manage-durable-subscribers.html&lt;/a&gt; can be used but I am quite skeptic to use it.&lt;/p&gt;</comment>
                            <comment id="13249829" author="tabish121" created="Mon, 9 Apr 2012 14:12:40 +0000"  >&lt;p&gt;I added a specific unit test for this and cannot reproduce this, perhaps you can provide a unit test to demonstrate your issue.&lt;/p&gt;</comment>
                            <comment id="13253532" author="buchi" created="Fri, 13 Apr 2012 16:49:32 +0000"  >&lt;p&gt;This is easily reproducible with STOMP durable subscribers.&lt;/p&gt;

&lt;p&gt;Please see the below code for example.&lt;/p&gt;

&lt;p&gt;use Net::Stomp;&lt;/p&gt;

&lt;p&gt;my $stomp = Net::Stomp-&amp;gt;new( &lt;/p&gt;
{ hostname =&amp;gt; &apos;mybroker&apos;, port =&amp;gt; &apos;61613&apos; }
&lt;p&gt; );&lt;br/&gt;
$stomp-&amp;gt;connect( &lt;/p&gt;
{ client-id =&amp;gt; &apos;test_client&apos;, login =&amp;gt; &apos;&apos;, passcode =&amp;gt; &apos;&apos;}
&lt;p&gt; );&lt;br/&gt;
print &quot;connected \n&quot;;&lt;/p&gt;

&lt;p&gt;$stomp-&amp;gt;subscribe(&lt;/p&gt;
{ destination =&amp;gt; &apos;/topic/test_topic&apos;, &apos;activemq.subscriptionName&apos; =&amp;gt; &quot;test_subscription&quot; }
&lt;p&gt;);&lt;br/&gt;
print &quot;subscribed \n&quot;;&lt;br/&gt;
sleep(3);&lt;br/&gt;
$stomp-&amp;gt;unsubscribe(&lt;/p&gt;
{destination =&amp;gt; &apos;/topic/test_topic&apos;}
&lt;p&gt;);&lt;br/&gt;
sleep(2);&lt;br/&gt;
$stomp-&amp;gt;disconnect;&lt;/p&gt;

&lt;p&gt;When I run this client, I clearly see that the broker shows the client in inactive durable subscriptions list.&lt;/p&gt;</comment>
                            <comment id="13253565" author="tabish121" created="Fri, 13 Apr 2012 17:34:12 +0000"  >&lt;p&gt;Try requesting a receipt for the unsubscribe action so that you are sure that the broker actually processes the request before breaking the socket connection.&lt;/p&gt;</comment>
                            <comment id="13253969" author="xbhanu" created="Sat, 14 Apr 2012 03:48:43 +0000"  >&lt;p&gt;Thanks Tim !&lt;br/&gt;
Session unsubscribing did the trick for the case where I am using ActiveMQ API. But, using Spring JMSTemplate still leaves behind inactive durable subscribers. Any idea how to unsubscribe in the spring case?&lt;/p&gt;</comment>
                            <comment id="13254059" author="buchi" created="Sat, 14 Apr 2012 09:18:39 +0000"  >&lt;p&gt;@Timothy&lt;/p&gt;

&lt;p&gt;I have tried with receipt feature as well but that does not help. I think there is a real issue for STOMP clients here. I have tried this even from Python clients but same issue is there in Python as well.&lt;/p&gt;</comment>
                            <comment id="13254192" author="tabish121" created="Sat, 14 Apr 2012 20:26:48 +0000"  >&lt;p&gt;I added an addition to testDurableUnsub in StompTest.java to show that when the unsubscribe is sent with the correct headers it works as expected.  The above stomp code doesn&apos;t set the &apos;activemq.subscriptionName&apos; on the unsubscribe so it won&apos;t actually unsub anything.  &lt;/p&gt;</comment>
                            <comment id="13254193" author="tabish121" created="Sat, 14 Apr 2012 20:27:12 +0000"  >&lt;p&gt;Code is working as designed, issue is on the client end.&lt;/p&gt;</comment>
                            <comment id="13254588" author="buchi" created="Mon, 16 Apr 2012 08:44:19 +0000"  >&lt;p&gt;@Timothy I have actually tried to unsubscribe with &apos;activemq.subscriptionName&apos; also but that doesn&apos;t work. Did you try to test with the above Perl code instead of using Java Stomp Client?&lt;/p&gt;</comment>
                            <comment id="13265807" author="buchi" created="Tue, 1 May 2012 13:53:58 +0000"  >&lt;p&gt;I think the Java STOMP client and Perl STOMP client are behaving differently here and that is the reason we are seeing this issue still with Perl clients.&lt;/p&gt;

&lt;p&gt;Did you guys try with simple Perl client I have mentioned above?&lt;/p&gt;</comment>
                            <comment id="13265825" author="tabish121" created="Tue, 1 May 2012 14:09:38 +0000"  >&lt;p&gt;The perl sample doesn&apos;t send a proper unsubscribe with the subscription name so it will definitely not work.  &lt;/p&gt;</comment>
                            <comment id="13266361" author="buchi" created="Wed, 2 May 2012 05:47:13 +0000"  >&lt;p&gt;@Timothy&lt;/p&gt;

&lt;p&gt;As I have mentioned already, I have tried to give the &apos;activemq.subscriptionName&apos; in the unsubscribe call as well but still seeing this issue.&lt;/p&gt;

&lt;p&gt;Can you please try this problem with this code?&lt;/p&gt;

&lt;p&gt;    use Net::Stomp;&lt;/p&gt;

&lt;p&gt;    my $stomp = Net::Stomp-&amp;gt;new( &lt;/p&gt;
{ hostname =&amp;gt; &apos;mybroker&apos;, port =&amp;gt; &apos;61613&apos; }
&lt;p&gt; );&lt;/p&gt;

&lt;p&gt;    $stomp-&amp;gt;connect( &lt;/p&gt;
{ client-id =&amp;gt; &apos;test_client&apos;, login =&amp;gt; &apos;&apos;, passcode =&amp;gt; &apos;&apos;}
&lt;p&gt; );&lt;br/&gt;
    print &quot;connected \n&quot;;&lt;/p&gt;

&lt;p&gt;    $stomp-&amp;gt;subscribe(&lt;/p&gt;
{ destination =&amp;gt; &apos;/topic/test_topic&apos;, &apos;activemq.subscriptionName&apos; =&amp;gt; &quot;test_subscription&quot; }
&lt;p&gt;);&lt;br/&gt;
    print &quot;subscribed \n&quot;;&lt;/p&gt;

&lt;p&gt;    sleep(3);&lt;br/&gt;
    $stomp-&amp;gt;unsubscribe(&lt;/p&gt;
{destination =&amp;gt; &apos;/topic/test_topic&apos;, &apos;activemq.subscriptionName&apos; =&amp;gt; &quot;test_subscription&quot;}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;    sleep(2);&lt;br/&gt;
    $stomp-&amp;gt;disconnect;&lt;/p&gt;

&lt;p&gt;And, to give more details to you, in Jconsole of the broker, I clearly see that the subscription is shown as test_subscription under the Durable topics before the client sends unsubscribe and is being shown under &quot;false&quot; topics with the following name after the client unsubscribes.&lt;br/&gt;
ID_infraprod1.hyd.deshaw.com-34343-1335687381802-2_13_test_subscription&lt;/p&gt;

&lt;p&gt;Does this give any clue?&lt;/p&gt;</comment>
                            <comment id="13266488" author="tabish121" created="Wed, 2 May 2012 10:59:48 +0000"  >&lt;p&gt;Your Stomp client must supply the same value for clientId and subscriptionName, refer to:&lt;br/&gt;
&lt;a href=&quot;http://activemq.apache.org/stomp.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/stomp.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Try changing your code to use the same subscription Id as the client Id and it should start working as expected.&lt;/p&gt;</comment>
                            <comment id="13266501" author="buchi" created="Wed, 2 May 2012 12:03:58 +0000"  >&lt;p&gt;@Timothy,&lt;/p&gt;

&lt;p&gt;I have changed the code to give same id on client-id and &apos;activemq.subscriptionName&apos; but still helpless.&lt;/p&gt;

&lt;p&gt;I tried running broker in DEBUG logging mode and I see the below log messages in broker when I run this client. I am putting them if they can help you to debug this issue further.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2012-05-02 17:28:14,299 | INFO  | Removing subscription : RemoveSubscriptionInfo &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {commandId = 4, responseRequired = false, connectionId = ID}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; |&lt;br/&gt;
 org.apache.activemq.broker.util.LoggingBrokerPlugin | ActiveMQ Transport: tcp:///149.77.160.37:63026&lt;br/&gt;
2012-05-02 17:28:14,304 | DEBUG | Error occured while processing async command: RemoveSubscriptionInfo &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {commandId = 4, responseRequired = false, connectionId = ID}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;, exception: javax.jms.InvalidDestinationException: No durable subscription exists for: test_subscription | org.apache.activemq.broker.TransportConnection.Service | ActiveMQ Transport: tcp:///149.77.160.37:63026&lt;br/&gt;
javax.jms.InvalidDestinationException: No durable subscription exists for: test_subscription&lt;br/&gt;
        at org.apache.activemq.broker.region.TopicRegion.removeSubscription(TopicRegion.java:135)&lt;br/&gt;
        at org.apache.activemq.broker.region.RegionBroker.removeSubscription(RegionBroker.java:491)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)&lt;br/&gt;
        at org.apache.activemq.broker.util.LoggingBrokerPlugin.removeSubscription(LoggingBrokerPlugin.java:211)&lt;br/&gt;
        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.processRemoveSubscription(TransportConnection.java:342)&lt;br/&gt;
        at org.apache.activemq.command.RemoveSubscriptionInfo.visit(RemoveSubscriptionInfo.java:81)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:81)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:140)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompUnsubscribe(ProtocolConverter.java:456)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:190)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:70)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;
&lt;/blockquote&gt;</comment>
                            <comment id="13267206" author="xbhanu" created="Thu, 3 May 2012 05:33:43 +0000"  >&lt;p&gt;Tim,&lt;/p&gt;

&lt;p&gt;I was playing around with Buchi&apos;s test, made some pretty minor changes and I am getting the below exception that durable consumer is in use ! &lt;/p&gt;


&lt;p&gt;2012-05-03 10:59:21,204 | INFO  | Removing subscription : RemoveSubscriptionInfo &lt;/p&gt;
{commandId = 4, responseRequired = false, connectionId = ID:desh0007.hyd.desh
aw.com-59732-1336021109112-3:8, clientId = test, subscriptionName = test}
&lt;p&gt; | org.apache.activemq.broker.util.LoggingBrokerPlugin | ActiveMQ Transport: tcp:///1&lt;br/&gt;
0.240.170.27:42262&lt;br/&gt;
2012-05-03 10:59:21,205 | WARN  | Async error occurred: javax.jms.JMSException: Durable consumer is in use | org.apache.activemq.broker.TransportConnection.S&lt;br/&gt;
ervice | ActiveMQ Transport: tcp:///10.240.170.27:42262&lt;br/&gt;
javax.jms.JMSException: Durable consumer is in use&lt;br/&gt;
        at org.apache.activemq.broker.region.TopicRegion.removeSubscription(TopicRegion.java:138)&lt;br/&gt;
        at org.apache.activemq.broker.region.RegionBroker.removeSubscription(RegionBroker.java:491)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)&lt;br/&gt;
        at org.apache.activemq.broker.util.LoggingBrokerPlugin.removeSubscription(LoggingBrokerPlugin.java:211)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)&lt;br/&gt;
        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.processRemoveSubscription(TransportConnection.java:342)&lt;br/&gt;
        at org.apache.activemq.command.RemoveSubscriptionInfo.visit(RemoveSubscriptionInfo.java:81)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:81)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:140)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompUnsubscribe(ProtocolConverter.java:456)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:190)&lt;br/&gt;
        at org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:70)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
2012-05-03 10:59:21,205 | WARN  | Exception occurred processing:&lt;br/&gt;
null: javax.jms.JMSException: Durable consumer is in use | org.apache.activemq.transport.stomp.ProtocolConverter | ActiveMQ Connection Dispatcher: /10.240.170.27:42262&lt;/p&gt;

&lt;p&gt;Any clues !?&lt;/p&gt;</comment>
                            <comment id="13267423" author="tabish121" created="Thu, 3 May 2012 13:28:14 +0000"  >&lt;p&gt;The error you are seeing is telling you that your Stomp client is still actively subscribed to the destination, so you are almost there.  To fully unsubscribe a durable consumer you need to first do a normal unsubscribe as you were previously doing such that there are no active durable subscribers, then you can issue the unsubscribe using the client id to completely eliminate that subscription.  &lt;/p&gt;</comment>
                            <comment id="13267430" author="xbhanu" created="Thu, 3 May 2012 13:41:16 +0000"  >&lt;p&gt;Presto !!! Works like a charm for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks Tim. We should let Buchi also confirm this.&lt;/p&gt;</comment>
                            <comment id="13269434" author="buchi" created="Mon, 7 May 2012 07:48:05 +0000"  >&lt;p&gt;Okay. It works finally with the following code though without using client-id while unsubscribing.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$stomp-&amp;gt;unsubscribe(&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {destination =&amp;gt; &amp;#39;/topic/test_topic&amp;#39;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;);&lt;br/&gt;
$stomp-&amp;gt;unsubscribe(&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {destination =&amp;gt; &amp;#39;/topic/test_topic&amp;#39;, &amp;#39;activemq.subscriptionName&amp;#39; =&amp;gt; &amp;#39;test_subscription&amp;#39;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;@Timothy I find this design a little weird. Do we have any reasons on why the design is like this?&lt;br/&gt;
Also, I see that this works only if client-id given while subscribing is same as the subscription name. I do not see any legitimate reason for doing that also. Can you please give us some background details for this? Or share some wiki page which throws more light on this please.&lt;/p&gt;

&lt;p&gt;FWIW, I feel that we should merge those two unsubscribe calls into one, to make best client side design for this case. Can you give your opinion on that?&lt;/p&gt;</comment>
                            <comment id="13273206" author="buchi" created="Fri, 11 May 2012 12:40:39 +0000"  >&lt;p&gt;There seems to be another issue if a single client has multiple durable subscriptions. If the client-id and subscriptionName should be same for a durable subscription, how can the same client subscribe to a second durable namespace? I have tried this and saw that broker sends error message indicating there is a durable subscriber already with the same client-id and subscriptionName.&lt;/p&gt;

&lt;p&gt;Can you please suggest us how to fix this?&lt;/p&gt;</comment>
                            <comment id="13273212" author="tabish121" created="Fri, 11 May 2012 12:45:41 +0000"  >&lt;p&gt;Can you post a sample of you stomp client subscribing to two durables?&lt;/p&gt;</comment>
                            <comment id="13273265" author="buchi" created="Fri, 11 May 2012 13:56:54 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
use Net::Stomp;
my $stomp = Net::Stomp-&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;( { hostname =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;brokerhost&apos;&lt;/span&gt;, port =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;61613&apos;&lt;/span&gt; } );

$stomp-&amp;gt;connect( { &lt;span class=&quot;code-quote&quot;&gt;&apos;client-id&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;test_subscription&apos;&lt;/span&gt;, login =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;&apos;, passcode =&amp;gt; &apos;&lt;/span&gt;&apos;} );
print &lt;span class=&quot;code-quote&quot;&gt;&quot;connected \n&quot;&lt;/span&gt;;

$stomp-&amp;gt;subscribe({ destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq.subscriptionName&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;test_subscription&quot;&lt;/span&gt;});
$stomp-&amp;gt;subscribe({ destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq.subscriptionName&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;test_subscription&quot;&lt;/span&gt;});

print &lt;span class=&quot;code-quote&quot;&gt;&quot;subscribed \n&quot;&lt;/span&gt;;

sleep(5);

$stomp-&amp;gt;unsubscribe({destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic&apos;&lt;/span&gt; });
$stomp-&amp;gt;unsubscribe({destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq.subscriptionName&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;test_subscription&apos;&lt;/span&gt; });
$stomp-&amp;gt;unsubscribe({destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic1&apos;&lt;/span&gt; });
$stomp-&amp;gt;unsubscribe({destination =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/topic/test_topic1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;activemq.subscriptionName&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;test_subscription&apos;&lt;/span&gt; });
print &lt;span class=&quot;code-quote&quot;&gt;&quot;unsubscribed \n&quot;&lt;/span&gt;;

$stomp-&amp;gt;disconnect();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13274466" author="buchi" created="Mon, 14 May 2012 06:06:44 +0000"  >&lt;p&gt;@Timothy any updates here? Did you get a chance to look at this?&lt;/p&gt;</comment>
                            <comment id="13274686" author="tabish121" created="Mon, 14 May 2012 15:35:58 +0000"  >&lt;p&gt;This is another limitation of the Stomp support which allows for only one durable subscription since clientId and subscription name are linked.  This is because the Stomp v1.0 spec didn&apos;t require that you assign unique Ids to subscriptions, so the correlation is made per connection using the matching  clientId and subscription name.  You can work around this by creating a connection for each durable subscriber.&lt;/p&gt;</comment>
                            <comment id="13275278" author="buchi" created="Tue, 15 May 2012 09:10:43 +0000"  >&lt;p&gt;Okay. Are we going to fix this in future versions of ActiveMQ? Should I log a separate request for the enhancement?&lt;/p&gt;

&lt;p&gt;I think STOMP v1.1 mandates a separate id for each subscription so even if you talk in terms of STOMP v1.1 spec, ActiveMQ should support this feature.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0suhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>