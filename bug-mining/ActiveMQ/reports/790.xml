<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:44:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2540] Duplicate suppression lack of recovery with JDBCStore can result in &quot;hung&quot; queue afer failover of outstanding send or transaction.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2540</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;during failover, when a commit or send reply is lost, such that the broker has completed the operation but the client does not see the reply, the operation and context will be replayed. This results in duplicate messages that should be suppressed. The AMQ reference store does this correctly but the audit check in the JDBCMessageStore does not do recovery so it is unaware of past events. &lt;br/&gt;
Adding some replay capability to the audit resolves this as it can then suppress duplicated.&lt;br/&gt;
The audit depth should limit the replay depth.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;jdbcPersistenceAdapter dataSource=&lt;span class=&quot;code-quote&quot;&gt;&quot;#....&quot;&lt;/span&gt; maxProducersToAudit=&lt;span class=&quot;code-quote&quot;&gt;&quot;10000&quot;&lt;/span&gt;/&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12482380">AMQ-2540</key>
            <summary>Duplicate suppression lack of recovery with JDBCStore can result in &quot;hung&quot; queue afer failover of outstanding send or transaction.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Dec 2009 13:00:02 +0000</created>
                <updated>Mon, 21 Dec 2009 12:50:26 +0000</updated>
                            <resolved>Mon, 21 Dec 2009 12:50:26 +0000</resolved>
                                    <version>5.3.0</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4.0</fixVersion>
                                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12941952" author="gtully" created="Fri, 18 Dec 2009 13:05:23 +0000"  >&lt;p&gt;requires the resolution to &lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-2473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-2473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12941951" author="gtully" created="Fri, 18 Dec 2009 13:08:36 +0000"  >&lt;p&gt;An aditional bit of sql dialect wizardy is required to make the query good for a really large table.&lt;/p&gt;</comment>
                            <comment id="12941958" author="gtully" created="Fri, 18 Dec 2009 13:35:57 +0000"  >&lt;p&gt;on the audit recovery query limit:&lt;br/&gt;
It needs to be maxConcurrentProducers * maxBatchSize * maxDestinations&lt;/p&gt;

&lt;p&gt;but with jmstemplate, producers can change with every send, so the maxConcurrentProducers can be large and also the maxProducersToAudit value needs to be large. &lt;br/&gt;
With interleaving there can be quite a collection of outstanding producers and transactions.&lt;/p&gt;</comment>
                            <comment id="12941879" author="gtully" created="Mon, 21 Dec 2009 12:50:25 +0000"  >&lt;p&gt;resolved through 891582,891622,892194,892242,892291,892729,892759&lt;/p&gt;

&lt;p&gt;all on 5.3.1, thanks dejan&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12483152">AMQ-2473</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74900</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rqov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159968</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>