<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:34:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1449] Producer hangs on durable subscribe as Usage memory runs over</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1449</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Broker hangs on a durable subscribe when producer is disconnected violently (System.exit()). I have included the test files to reproduce the problem&lt;/p&gt;

&lt;p&gt;WARNING: The test cases included can be patched against activemq-core but are not unit tests. Do the following sequence&lt;/p&gt;

&lt;p&gt;1.) Run the junit test DurableProducerConsumerBrokerTest. This starts a broker &lt;br/&gt;
2.) Run the junit test DurableProducerConsumerTest. It will exit with System.exit midway thru running the test&lt;br/&gt;
3.) Rerun the junit test DurableProducerConsumerTest...It should hang the second time around&lt;/p&gt;

&lt;p&gt;Note: If you use the log4j.properties included in the patch you would see the Usage memory as it rises above 70 to 99+ in the second run.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482164">AMQ-1449</key>
            <summary>Producer hangs on durable subscribe as Usage memory runs over</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="nickysandhu">Nicky Sandhu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Oct 2007 18:30:28 +0000</created>
                <updated>Mon, 22 Oct 2007 16:58:39 +0000</updated>
                            <resolved>Mon, 22 Oct 2007 08:39:00 +0000</resolved>
                                                    <fixVersion>5.0.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12938949" author="nickysandhu" created="Mon, 8 Oct 2007 18:32:28 +0000"  >&lt;p&gt;Started in forum thread &lt;a href=&quot;http://www.nabble.com/Usage-Manager-for-durable-offline-subscriber-t4572289s2354.html#a13051280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Usage-Manager-for-durable-offline-subscriber-t4572289s2354.html#a13051280&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12939196" author="nickysandhu" created="Fri, 19 Oct 2007 20:33:28 +0000"  >&lt;p&gt;TopicStorePrefetch has a system usage manager that is not used by Message (broker.region package). It instead uses the increment/decrement to inform the regionBroker&apos;s system usage manager which happens to be a different one. &lt;/p&gt;

&lt;p&gt;So the listener implemented by DurableTopicSubscription never results in an actual call back and hence the leak ?? &lt;/p&gt;

&lt;p&gt;I don&apos;t understand this one completely but i hope it helps whoever looks at this issue&lt;/p&gt;</comment>
                            <comment id="12939147" author="rajdavies" created="Mon, 22 Oct 2007 08:39:00 +0000"  >&lt;p&gt;Fixed by svn revision 587033&lt;/p&gt;</comment>
                            <comment id="12939171" author="nickysandhu" created="Mon, 22 Oct 2007 16:58:39 +0000"  >&lt;p&gt;Thanks Rob! It does great under the performance tests as well. Any thoughts on how to include/modify these tests for the build ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460703" name="ASF.LICENSE.NOT.GRANTED--tests.patch.txt" size="7167" author="nickysandhu" created="Mon, 8 Oct 2007 18:30:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i181qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>