<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:45:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7225] [mKahadb] over eager cleanup processing during recovery</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7225</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;it is possible to generated a failed recovery (and failed broker start) with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Could not locate data file &amp;lt;..&amp;gt;
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; potentially leading to heuristic rollbacks or partially completed transactions.&lt;br/&gt;
the cleanup task is kicked off in parallel with recovery which is the root cause of the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13238521">AMQ-7225</key>
            <summary>[mKahadb] over eager cleanup processing during recovery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jun 2019 12:48:07 +0000</created>
                <updated>Fri, 14 Jun 2019 14:34:46 +0000</updated>
                            <resolved>Mon, 10 Jun 2019 14:36:14 +0000</resolved>
                                    <version>5.15.0</version>
                                    <fixVersion>5.15.10</fixVersion>
                    <fixVersion>5.16.0</fixVersion>
                                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16860041" author="jira-bot" created="Mon, 10 Jun 2019 14:33:40 +0000"  >&lt;p&gt;Commit 93e726d6a7ba9ed44f5440369f8f9f1b41f49373 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=93e726d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=93e726d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7225&quot; title=&quot;[mKahadb] over eager cleanup processing during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7225&quot;&gt;&lt;del&gt;AMQ-7225&lt;/del&gt;&lt;/a&gt; - defer cleanup task operation till recovery processing complete, track prepared location in recovered ops to ensure they are retained on recovery failure. Fix and test&lt;/p&gt;</comment>
                            <comment id="16860948" author="christopher.l.shannon" created="Tue, 11 Jun 2019 11:26:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt; - As a heads up it looks like your new test is failing in CI:&#160;&lt;a href=&quot;https://builds.apache.org/view/A/view/ActiveMQ/job/ActiveMQ-Java8/lastCompletedBuild/org.apache.activemq$activemq-unit-tests/testReport/org.apache.activemq.bugs/MKahaDBTxRecoveryTest/testCommitOutcomeDeliveryOnRecovery/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A/view/ActiveMQ/job/ActiveMQ-Java8/lastCompletedBuild/org.apache.activemq$activemq-unit-tests/testReport/org.apache.activemq.bugs/MKahaDBTxRecoveryTest/testCommitOutcomeDeliveryOnRecovery/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16860952" author="jira-bot" created="Tue, 11 Jun 2019 11:36:22 +0000"  >&lt;p&gt;Commit 28a0cc6e5a78adb4b0b0134c860911c921f6a074 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=28a0cc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=28a0cc6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7225&quot; title=&quot;[mKahadb] over eager cleanup processing during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7225&quot;&gt;&lt;del&gt;AMQ-7225&lt;/del&gt;&lt;/a&gt; - fix intermittent failure, avoid gc of partial tx pending commit&lt;/p&gt;</comment>
                            <comment id="16860955" author="gtully" created="Tue, 11 Jun 2019 11:41:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt; thanks. I noticed the same thing. there was another window where cleanup could get in the way, a 100ms interval showed it up reliably. is sorted now.&lt;/p&gt;</comment>
                            <comment id="16864139" author="jira-bot" created="Fri, 14 Jun 2019 14:34:43 +0000"  >&lt;p&gt;Commit ef0ec42885dc82bb31f266cc6cfe3c4065438453 in activemq&apos;s branch refs/heads/activemq-5.15.x from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ef0ec42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=ef0ec42&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7225&quot; title=&quot;[mKahadb] over eager cleanup processing during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7225&quot;&gt;&lt;del&gt;AMQ-7225&lt;/del&gt;&lt;/a&gt; - defer cleanup task operation till recovery processing complete, track prepared location in recovered ops to ensure they are retained on recovery failure. Fix and test&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 93e726d6a7ba9ed44f5440369f8f9f1b41f49373)&lt;/p&gt;</comment>
                            <comment id="16864140" author="jira-bot" created="Fri, 14 Jun 2019 14:34:44 +0000"  >&lt;p&gt;Commit 6ff79d85aae0068ede78927b7ea13d2783d9c767 in activemq&apos;s branch refs/heads/activemq-5.15.x from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6ff79d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6ff79d8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7225&quot; title=&quot;[mKahadb] over eager cleanup processing during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7225&quot;&gt;&lt;del&gt;AMQ-7225&lt;/del&gt;&lt;/a&gt; - fix intermittent failure, avoid gc of partial tx pending commit&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 28a0cc6e5a78adb4b0b0134c860911c921f6a074)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03ksg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>