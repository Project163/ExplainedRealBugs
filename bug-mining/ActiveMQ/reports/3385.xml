<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:51:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-8349] Virtual destination consumer advisory messages are inadvertently replayed to all existing advisory consumers</title>
                <link>https://issues.apache.org/jira/browse/AMQ-8349</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;In order to support &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6027&quot; title=&quot;Dynamic network demand should support Virtual Destination consumers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6027&quot;&gt;&lt;del&gt;AMQ-6027&lt;/del&gt;&lt;/a&gt; new Virtual destination consumer advisories were created so that demand could be dynamically created due to composite destination creation across a bridge.&lt;/p&gt;

&lt;p&gt;When setting up a broker with several bridges I noticed that the virtual destination consumer advisory messages sent were quite high. I dug into it and it turns out that the issue was that on replay of the advisories when a bridge connected the messages are being inadvertently sent to all the existing advisory consumers again and not just the new consumer.&lt;/p&gt;

&lt;p&gt;What should happen is when a new bridge connects it will create a consumer on the virtual destination consumer topic and any advisories that were previously sent should be sent to ONLY that consumer. Existing consumers (usually bridge consumers) already received them so there&apos;s no reason to send them again as it causes a ton of extra traffic.&lt;/p&gt;

&lt;p&gt;This is how things work already for existing replay of other advisories but was simply missed when adding this feature and is a 1 line fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13393721">AMQ-8349</key>
            <summary>Virtual destination consumer advisory messages are inadvertently replayed to all existing advisory consumers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Aug 2021 13:49:00 +0000</created>
                <updated>Thu, 5 Aug 2021 14:00:00 +0000</updated>
                            <resolved>Thu, 5 Aug 2021 14:00:00 +0000</resolved>
                                    <version>5.16.2</version>
                                    <fixVersion>5.16.3</fixVersion>
                    <fixVersion>5.17.0</fixVersion>
                                    <component>Broker</component>
                    <component>Network of Brokers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17394032" author="jira-bot" created="Thu, 5 Aug 2021 13:59:17 +0000"  >&lt;p&gt;Commit 8b99596eeb721666fe0e2bece121aed2dea81075 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8b99596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=8b99596&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8349&quot; title=&quot;Virtual destination consumer advisory messages are inadvertently replayed to all existing advisory consumers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8349&quot;&gt;&lt;del&gt;AMQ-8349&lt;/del&gt;&lt;/a&gt; - Ensure virtual destination consumer advisories are only&lt;br/&gt;
replayed to new advisory consumers and not existing&lt;/p&gt;</comment>
                            <comment id="17394035" author="jira-bot" created="Thu, 5 Aug 2021 13:59:55 +0000"  >&lt;p&gt;Commit 2ec4673a59630e29a85718da18b306b1eb8f64ef in activemq&apos;s branch refs/heads/activemq-5.16.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=2ec4673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=2ec4673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8349&quot; title=&quot;Virtual destination consumer advisory messages are inadvertently replayed to all existing advisory consumers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8349&quot;&gt;&lt;del&gt;AMQ-8349&lt;/del&gt;&lt;/a&gt; - Ensure virtual destination consumer advisories are only&lt;br/&gt;
replayed to new advisory consumers and not existing&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 8b99596eeb721666fe0e2bece121aed2dea81075)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12908580">AMQ-6027</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tn94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>