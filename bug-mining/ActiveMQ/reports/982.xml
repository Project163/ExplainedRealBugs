<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:47:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2864] AMQ2149KahaDBTest - intermittent missing/out of order message with restart/failover and durable subs</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2864</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;intermittent failure, activate of a durable sub and additions to the topic store may need a sync or async store and dispatch topics may need to be disabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12481790">AMQ-2864</key>
            <summary>AMQ2149KahaDBTest - intermittent missing/out of order message with restart/failover and durable subs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Aug 2010 12:42:09 +0000</created>
                <updated>Wed, 29 Oct 2014 16:54:00 +0000</updated>
                            <resolved>Tue, 17 Aug 2010 11:14:18 +0000</resolved>
                                    <version>5.4.0</version>
                                    <fixVersion>5.4.1</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12938267" author="gtully" created="Tue, 17 Aug 2010 11:14:18 +0000"  >&lt;p&gt;r986264 - disable concurrentStoreAndDispatchTopics by default as it can lead to cursor being out of order w.r.t to the store such that it is possible in the event that the cache becomes exhausted that some messages are skipped for dispatch till a restart.&lt;br/&gt;
With a sufficiently large usage limit the cache will always be valid and concurrentStoreAndDispatchTopics can be used to optimise out persistence for fast durable consumers.&lt;/p&gt;</comment>
                            <comment id="14185154" author="hekonsek" created="Mon, 27 Oct 2014 14:08:09 +0000"  >&lt;p&gt;What is &quot;sufficiently large usage limit&quot;? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14187952" author="asubbiah" created="Wed, 29 Oct 2014 03:44:05 +0000"  >&lt;p&gt;Does this affect virtual topics?&lt;/p&gt;</comment>
                            <comment id="14188295" author="gtully" created="Wed, 29 Oct 2014 12:18:52 +0000"  >&lt;p&gt;sufficiently large means that the cursor cache does not get exhausted. In other words, large enough that any backlog can remain in memory. With durable subs that are offline most of the time this will not be practical, so concurrent... is disabled.&lt;/p&gt;

&lt;p&gt;This does not affect virtual topics b/c virtual topics are implemented as queues.&lt;/p&gt;</comment>
                            <comment id="14188368" author="asubbiah" created="Wed, 29 Oct 2014 14:14:16 +0000"  >&lt;p&gt;Thank you Gary. That&apos;s what I would expect. So with concurrent store and dispatch on a virtual topic with persistent messages(multiple subscriber queues) , &lt;br/&gt;
1. Does the producer gets released as soon as the message is published and broker gets a single copy of the message?&lt;br/&gt;
OR&lt;br/&gt;
2. Does the producer gets released, when the messages gets copied from VT to multiple subscriber queues and the consumers on the subscriber queues acks them.&lt;br/&gt;
3. Whats the risk of loosing messages on a VT with concurrent store and dispatch enabled.&lt;/p&gt;</comment>
                            <comment id="14188564" author="gtully" created="Wed, 29 Oct 2014 16:54:00 +0000"  >&lt;p&gt;with vt: the producer gets released when a send is enqueued on each of the subscriber queues. there is no risk of message loss. The enqueue is sync, there is no message loss risk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ba8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>