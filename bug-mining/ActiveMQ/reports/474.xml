<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:38:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1971] ConcurrentModificationException in high volume broker </title>
                <link>https://issues.apache.org/jira/browse/AMQ-1971</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;This is occurring in the thousands as messages come through.    We have a network of 5 brokers although they do most of their work internally (publisher/consumer for queue are only on same broker) and do less work crossing to a central broker.&lt;/p&gt;

&lt;p&gt;java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1178)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1290)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1004)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12482475">AMQ-1971</key>
            <summary>ConcurrentModificationException in high volume broker </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="jayson.minard">Jayson Minard</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Oct 2008 18:42:10 +0000</created>
                <updated>Thu, 6 Nov 2008 10:47:07 +0000</updated>
                            <resolved>Mon, 13 Oct 2008 08:57:38 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.2.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12940328" author="jayson.minard" created="Sat, 11 Oct 2008 22:36:59 +0000"  >&lt;p&gt;More recent flavor of the same, but with a hash bin resize message nearby in case that is relevant.&lt;/p&gt;

&lt;p&gt;ERROR Queue                          - Failed to page in more queue messages&lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1178)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1290)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1004)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
INFO  HashIndex                      - Resize hash bins data_queue#3a#2f#2fmag.query1.queue.record.physical.augment from 1024 to 2048&lt;/p&gt;</comment>
                            <comment id="12940343" author="jayson.minard" created="Sat, 11 Oct 2008 22:57:22 +0000"  >&lt;p&gt;This is on 5.2.0 built from SVN tag of the same name.  Client producer/consumers use POM 5.2.0 from staging server.  JDK 1.6 on Linux.&lt;/p&gt;

&lt;p&gt;Bug also exists when running on 1 broker without a network of brokers.  &lt;/p&gt;

&lt;p&gt;The series of queues basically are via Camel:&lt;/p&gt;

&lt;p&gt;File -&amp;gt; parsing -&amp;gt; queue&lt;br/&gt;
queue -&amp;gt; normalization -&amp;gt; queue&lt;br/&gt;
queue -&amp;gt; database transactions -&amp;gt; queue&lt;br/&gt;
queue -&amp;gt; external systems &lt;/p&gt;</comment>
                            <comment id="12940312" author="hansb" created="Sun, 12 Oct 2008 08:58:36 +0000"  >&lt;p&gt;Have you tried RC2?&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://www.nabble.com/-VOTE--ActiveMQ-5.2.0---RC2-td19874910.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/-VOTE--ActiveMQ-5.2.0---RC2-td19874910.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If it fails, vote -1 and add the link to this issue.&lt;/p&gt;</comment>
                            <comment id="12940338" author="jayson.minard" created="Sun, 12 Oct 2008 19:16:44 +0000"  >&lt;p&gt;Trying it now.  I&apos;ll pull his binaries and make sure the client updates (should already via the POM)&lt;/p&gt;</comment>
                            <comment id="12940329" author="jayson.minard" created="Sun, 12 Oct 2008 19:42:43 +0000"  >&lt;p&gt;Still have error on single broker run...  JDK 1.6, ACTIVEMQ_OPTS=-Xmx1g, pretty vanilla activemq.xml configuration other than changing broker name and adding a few settings here to the broker element for testing:&lt;/p&gt;

&lt;p&gt;&amp;lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;${HOSTNAME}&quot; dataDirectory=&quot;${activemq.base}/data&quot;&lt;br/&gt;
        keepDurableSubsActive=&quot;true&quot; useJmx=&quot;true&quot; useVirtualTopics=&quot;false&quot; deleteAllMessagesOnStartup=&quot;true&quot; &amp;gt;&lt;/p&gt;


&lt;p&gt;INFO  log                            - jetty-6.1.9&lt;br/&gt;
INFO  WebConsoleStarter              - ActiveMQ WebConsole initialized.&lt;br/&gt;
INFO  /admin                         - Initializing Spring FrameworkServlet &apos;dispatcher&apos;&lt;br/&gt;
INFO  log                            - ActiveMQ Console at &lt;a href=&quot;http://0.0.0.0:8161/admin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/admin&lt;/a&gt;&lt;br/&gt;
INFO  log                            - ActiveMQ Web Demos at &lt;a href=&quot;http://0.0.0.0:8161/demo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/demo&lt;/a&gt;&lt;br/&gt;
INFO  log                            - RESTful file access application at &lt;a href=&quot;http://0.0.0.0:8161/fileserver&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/fileserver&lt;/a&gt;&lt;br/&gt;
INFO  log                            - Started SelectChannelConnector@0.0.0.0:8161&lt;br/&gt;
WARN  BrokerRegistry                 - Broker localhost not started so using query1.removed.removed.com instead&lt;br/&gt;
INFO  TransportConnector             - Connector vm://localhost Started&lt;br/&gt;
ERROR Queue                          - Failed to page in more queue messages &lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1181)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1308)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1011)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
ERROR Queue                          - Failed to page in more queue messages &lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1181)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1308)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1011)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
ERROR Queue                          - Failed to page in more queue messages &lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1181)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1308)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1011)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
ERROR Queue                          - Failed to page in more queue messages &lt;br/&gt;
java.util.ConcurrentModificationException&lt;br/&gt;
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:392)&lt;br/&gt;
	at java.util.LinkedHashMap$EntryIterator.next(LinkedHashMap.java:391)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.next(AbstractStoreCursor.java:136)&lt;br/&gt;
	at org.apache.activemq.broker.region.cursors.StoreQueueCursor.next(StoreQueueCursor.java:140)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1181)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1308)&lt;br/&gt;
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1011)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner.runTask(DeterministicTaskRunner.java:84)&lt;br/&gt;
	at org.apache.activemq.thread.DeterministicTaskRunner$1.run(DeterministicTaskRunner.java:41)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;</comment>
                            <comment id="12940334" author="jayson.minard" created="Sun, 12 Oct 2008 19:50:00 +0000"  >&lt;p&gt;Queues form admin console look like this at time of failure (note that the admin UI now truncates queue names for display making most unreadable and unusable in the display).  Note that some queue sizes are negative numbers which we&apos;ve seen before but not tracked down to anything specific.&lt;/p&gt;

&lt;p&gt;&amp;lt;queues&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.query1.queue.record.physical&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;-2&quot; consumerCount=&quot;10&quot; enqueueCount=&quot;29610&quot; dequeueCount=&quot;29612&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.query1.queue.record.physical?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.query1.queue.record.physical?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.query1.queue.record.physical.pdf&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;6&quot; consumerCount=&quot;0&quot; enqueueCount=&quot;6&quot; dequeueCount=&quot;0&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.query1.queue.record.physical.pdf?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.query1.queue.record.physical.pdf?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.queue.record.search.zh&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;10&quot; enqueueCount=&quot;10&quot; dequeueCount=&quot;10&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.queue.record.search.zh?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.queue.record.search.zh?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.queue.record.search.en&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;-7&quot; consumerCount=&quot;10&quot; enqueueCount=&quot;29602&quot; dequeueCount=&quot;29609&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.queue.record.search.en?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.queue.record.search.en?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.Events.Errors&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;1&quot; enqueueCount=&quot;8&quot; dequeueCount=&quot;8&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.Events.Errors?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.Events.Errors?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.queue.record.logical&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;1&quot; enqueueCount=&quot;29612&quot; dequeueCount=&quot;29612&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.queue.record.logical?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.queue.record.logical?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;test.existingRecordQueue&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;1&quot; enqueueCount=&quot;0&quot; dequeueCount=&quot;0&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/test.existingRecordQueue?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/test.existingRecordQueue?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.query1.queue.record.raw&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;138407&quot; consumerCount=&quot;50&quot; enqueueCount=&quot;168029&quot; dequeueCount=&quot;29622&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.query1.queue.record.raw?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.query1.queue.record.raw?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;example.A&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;1&quot; enqueueCount=&quot;0&quot; dequeueCount=&quot;0&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/example.A?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/example.A?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.query1.queue.record.physical.augment&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;1&quot; enqueueCount=&quot;27311&quot; dequeueCount=&quot;27311&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.query1.queue.record.physical.augment?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.query1.queue.record.physical.augment?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;queue name=&quot;mag.queue.record.search.other&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;stats size=&quot;0&quot; consumerCount=&quot;10&quot; enqueueCount=&quot;0&quot; dequeueCount=&quot;0&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;  &amp;lt;feed&amp;gt;&lt;br/&gt;
    &amp;lt;atom&amp;gt;queueBrowse/mag.queue.record.search.other?view=rss&amp;amp;feedType=atom_1.0&amp;lt;/atom&amp;gt;&lt;br/&gt;
    &amp;lt;rss&amp;gt;queueBrowse/mag.queue.record.search.other?view=rss&amp;amp;feedType=rss_2.0&amp;lt;/rss&amp;gt;&lt;br/&gt;
  &amp;lt;/feed&amp;gt;&lt;br/&gt;
&amp;lt;/queue&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/queues&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12940324" author="jayson.minard" created="Mon, 13 Oct 2008 06:56:13 +0000"  >&lt;p&gt;I have a tested patch for the ConcurrentModificationException in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-1971&quot; title=&quot;ConcurrentModificationException in high volume broker &quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-1971&quot;&gt;&lt;del&gt;AMQ-1971&lt;/del&gt;&lt;/a&gt;, this also uncovered a bug with a related class.  See below:&lt;/p&gt;

&lt;p&gt;Patch to fix ConcurrentModificationException which is caused by not having a perfectly synchronized this.iterator and this.batchList in AbstractStoreCursor.  Also removed any access to these member variables from subclasses to ensure they are synchronized and make sure they are not manipulated seperately.  This caused a small change in TopicStorePrefetch which had a reference to batchList although it actually overrode the ancestor class which meant that its remove() method never actually worked.  So that was replaced with a call to AbstractSoreCursor to do the actual remove work.  A few TODO comments are left in the patch for review by someone that knows more.&lt;/p&gt;

&lt;p&gt;Basically, the fix is to ensure that all changes to batchList cause a release of the cached iterator.&lt;/p&gt;

&lt;p&gt;I apologize in advance for reformatting the code before generating the patch.  I did that midway through the edit and it is a constant habit so it caused some noise in the patch.  If you apply it, then diff while ignoring white-space most of the noise is removed.&lt;/p&gt;</comment>
                            <comment id="12940346" author="rajdavies" created="Mon, 13 Oct 2008 08:57:38 +0000"  >&lt;p&gt;Fixed by SVN revision 703975&lt;/p&gt;</comment>
                            <comment id="12940320" author="jayson.minard" created="Mon, 13 Oct 2008 09:05:01 +0000"  >&lt;p&gt;Hey Rob, thanks for making a fix.  A quick question about the TopicStorePrefetch descendant class.  It instantiates its own batchList which then hides the ancestor one.  IT looks like you removed the dispatched() method which eliminates the previous issue I fixed and makes that part irrelevant.  But should the private batchList still be there in TopicStorePrefetch since it now appears to be unused?&lt;/p&gt;</comment>
                            <comment id="12939439" author="gtully" created="Thu, 6 Nov 2008 10:47:07 +0000"  >&lt;p&gt;These fixes will now make 5.2.0 rc3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461249" name="amq1971.patch" size="11246" author="jayson.minard" created="Mon, 13 Oct 2008 06:56:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14bd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>