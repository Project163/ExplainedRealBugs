<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:31:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-714] Wildcard support for policy entries produces unexpected results</title>
                <link>https://issues.apache.org/jira/browse/AMQ-714</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When you define a policy Entry using a wildcard (eg. FOO.&amp;gt;) in the xml configuration it is not applied as expected.&lt;/p&gt;

&lt;p&gt;Specifically I was attempting to use a lastImageSubscriptionRecoveryPolicy on all subtopics of FOO.&amp;gt;&lt;/p&gt;

&lt;p&gt;If I publish three messages to each of FOO.a, FOO.b and FOO.c and then setup a consumer (retroactive = true) to each of the topics FOO.a, FOO.b and FOO.c I receive three copies of the last message sent to any of the topics  In this case the third message sent to FOO.c.&lt;/p&gt;

&lt;p&gt;Expected behaviour would be to receive the last message from each topic that is message three from FOO.a, FOO.b and FOO.c&lt;/p&gt;

&lt;p&gt;More troubling is if I setup a new session with a consumer only to FOO.a and FOO.b I receive two copied of the third message sent to FOO.c.  Even though this session is not subscribed to FOO.c, presumably this is because the policy is only keeping the last message that matches the destination and returning it as the last image, regardless of if the topic matches the subscription.&lt;/p&gt;

&lt;p&gt;With explicit policy entries for each topic (FOO.a, FOO.b) the broker returns the correct messages, so I believe the problem is with wildcard handling.  I need wildcard support here because I do not know my topic names upfront.  I would think that this would be a common scenario (like setting a last image recovery policy on all stock quotes Stock.&amp;gt; )&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux&lt;br/&gt;
ibm jdk 1.4.2&lt;br/&gt;
sun jdk 1.5&lt;/p&gt;</environment>
        <key id="12481737">AMQ-714</key>
            <summary>Wildcard support for policy entries produces unexpected results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="himmeric">Kyle Himmerick</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 May 2006 22:31:50 +0000</created>
                <updated>Fri, 16 Jun 2006 00:58:09 +0000</updated>
                            <resolved>Mon, 12 Jun 2006 22:10:29 +0000</resolved>
                                    <version>4.0 RC3</version>
                    <version>4.0</version>
                                    <fixVersion>4.0.1</fixVersion>
                    <fixVersion>4.1.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="12937919" author="kmh27" created="Wed, 24 May 2006 00:12:34 +0000"  >&lt;p&gt;The attached zip contains two xbean configurations&lt;br/&gt;
wildcard.xml defines a last image recovery policy  on FOO.*&lt;br/&gt;
explicit.xml defines a last image recovery policy on FOO.X, FOO.Y, and FOO.Z&lt;/p&gt;

&lt;p&gt;There are two java files each with a main method taking one argument as the brokerURL&lt;br/&gt;
Publisher.java publishes three messages to each of the FOO topics, run this first to put messages in each topic&lt;br/&gt;
Subscriber.java establishes a retroactive consumer on each of the FOO topics, it prints to System.out as messages arrive&lt;/p&gt;

&lt;p&gt;Notice that with the wildcard.xml you&apos;ll receive three copies of the last message sent to any FOO.* topic (in this case message 2 FOO.Z).&lt;/p&gt;

&lt;p&gt;Also if you set Subscriber to not consumer messages on FOO.Z you will still receive two copies of the message 2 on FOO.Z&lt;/p&gt;</comment>
                            <comment id="12937777" author="chirino" created="Mon, 12 Jun 2006 22:10:29 +0000"  >&lt;p&gt;Just commited a fix that copies the policy object for each configured destination, it was previously being shared by multiple destinations which is what caused the problems.  Fix is in the 4.1 and 4.0 branches.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12481687">AMQ-713</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460580" name="issue.zip" size="4799" author="kmh27" created="Wed, 24 May 2006 00:12:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17zpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>