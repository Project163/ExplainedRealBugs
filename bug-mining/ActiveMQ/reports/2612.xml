<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:13:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5875] Removing a destination when using mKahaDB can cause an IllegalStateException</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5875</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;This issue occurs when using multiKahaDB and a wild card destination.  The problem is that with a wild card topic, multiple destinations can be attached to the same store.  If one of the destinations is deleted and the other destinations are empty, the entire store is deleted.  This causes an exception later on if trying to do something like subscribe to a destination that wasn&apos;t deleted.  I&apos;ve attached a test case to show this issue.  &lt;/p&gt;

&lt;p&gt;The problem seems to be that the removeMessageStore method in MultiKahaDBPersistenceAdapter relies on adapter.getDestinations.isEmpty() to determine whether the store is eligible for deleting.  Unfortunately, the getDestinations method in KahaDBStore excludes destinations that are empty therefore the method doesn&apos;t return any destinations even though there is one still attached to the store so the logic goes ahead and deletes the store.&lt;/p&gt;

&lt;p&gt;The stack trace from running against 5.12.0-SNAPSHOT is below:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalStateException: PageFile is not loaded
        at org.apache.activemq.store.kahadb.disk.page.PageFile.assertLoaded(PageFile.java:811)
        at org.apache.activemq.store.kahadb.disk.page.PageFile.tx(PageFile.java:304)
        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBTopicMessageStore.getMessageCount(KahaDBStore.java:866)
        at org.apache.activemq.store.ProxyTopicMessageStore.getMessageCount(ProxyTopicMessageStore.java:140)
        at org.apache.activemq.store.ProxyTopicMessageStore.getMessageCount(ProxyTopicMessageStore.java:140)
        at org.apache.activemq.broker.region.cursors.TopicStorePrefetch.getStoreSize(TopicStorePrefetch.java:97)
        at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.resetSize(AbstractStoreCursor.java:73)
        at org.apache.activemq.broker.region.cursors.TopicStorePrefetch.&amp;lt;init&amp;gt;(TopicStorePrefetch.java:58)
        at org.apache.activemq.broker.region.cursors.StoreDurableSubscriberCursor.add(StoreDurableSubscriberCursor.java:119)
        at org.apache.activemq.broker.region.PrefetchSubscription.add(PrefetchSubscription.java:584)
        at org.apache.activemq.broker.region.DurableTopicSubscription.add(DurableTopicSubscription.java:113)
        at org.apache.activemq.broker.region.Topic.addSubscription(Topic.java:161)
        at org.apache.activemq.broker.region.AbstractRegion.addConsumer(AbstractRegion.java:400)
        at org.apache.activemq.broker.region.TopicRegion.addConsumer(TopicRegion.java:168)
        at org.apache.activemq.broker.region.RegionBroker.addConsumer(RegionBroker.java:427)
        at org.apache.activemq.broker.jmx.ManagedRegionBroker.addConsumer(ManagedRegionBroker.java:244)
        at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:102)
        at org.apache.activemq.advisory.AdvisoryBroker.addConsumer(AdvisoryBroker.java:107)
        at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:102)
        at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:102)
        at org.apache.activemq.broker.MutableBrokerFilter.addConsumer(MutableBrokerFilter.java:107)
        at org.apache.activemq.broker.TransportConnection.processAddConsumer(TransportConnection.java:667)
        at org.apache.activemq.command.ConsumerInfo.visit(ConsumerInfo.java:348)
        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:334)
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:188)
        at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
        at org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(AbstractInactivityMonitor.java:300)
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:214)
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:196)
        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12843216">AMQ-5875</key>
            <summary>Removing a destination when using mKahaDB can cause an IllegalStateException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jul 2015 15:42:27 +0000</created>
                <updated>Wed, 19 Sep 2018 09:26:46 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 11:30:37 +0000</resolved>
                                    <version>5.11.1</version>
                                    <fixVersion>5.12.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14616883" author="christopher.l.shannon" created="Tue, 7 Jul 2015 15:47:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tabish121&quot; class=&quot;user-hover&quot; rel=&quot;tabish121&quot;&gt;tabish121&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;My first thought here is to simply update the getDestinations() method in KahaDBStore to include empty topics in the returned set.  The other PersistenceAdapter implementations don&apos;t seem to filter out empty topics so that would keep things consistent.  Do you think there would be any unintended side effects of doing that?&lt;/p&gt;</comment>
                            <comment id="14618450" author="gtully" created="Wed, 8 Jul 2015 11:31:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christopher.l.shannon&quot; class=&quot;user-hover&quot; rel=&quot;christopher.l.shannon&quot;&gt;christopher.l.shannon&lt;/a&gt; - I don&apos;t think so. that seems like a sensible fix. your additional test and the existing tests will confirm.&lt;/p&gt;</comment>
                            <comment id="14618475" author="christopher.l.shannon" created="Wed, 8 Jul 2015 11:52:01 +0000"  >&lt;p&gt;Ok, thanks Gary.  I will create a patch and test and upload the PR later today if the tests all seem to pass.&lt;/p&gt;</comment>
                            <comment id="14619119" author="githubbot" created="Wed, 8 Jul 2015 18:34:19 +0000"  >&lt;p&gt;GitHub user cshannon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/130&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Resolves an issue when using mKahaDB that caused a MessageStore&lt;br/&gt;
    being used by more than one destination to be deleted even though&lt;br/&gt;
    there was still at least 1 other destination using the store.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cshannon/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cshannon/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/130.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/130.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #130&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 73d1bcd7ac4fe7bd94da9fe178f6f17d30bc41f2&lt;br/&gt;
Author: Christopher L. Shannon (cshannon) &amp;lt;christopher.l.shannon@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-08T13:02:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Resolves an issue when using mKahaDB that caused a MessageStore&lt;br/&gt;
    being used by more than one destination to be deleted even though&lt;br/&gt;
    there was still at least 1 other destination using the store.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14619382" author="githubbot" created="Wed, 8 Jul 2015 21:18:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/130&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14619393" author="tabish121" created="Wed, 8 Jul 2015 21:21:10 +0000"  >&lt;p&gt;Patch applied, thanks!&lt;/p&gt;</comment>
                            <comment id="14622174" author="gtully" created="Fri, 10 Jul 2015 11:49:20 +0000"  >&lt;p&gt;there is logic in a network bridge to recreate durable demand eagerly. It uses the getDestinations list to figure of there was demand in the past. So a topic with some durable subscribers.&lt;br/&gt;
It appears that it is now re-creating demand for topics that have no durables. Something needs to gate that, or the other use case needs a different fix.&lt;/p&gt;

&lt;p&gt;Test that shows the problem in a not so obvious way:&lt;br/&gt;
org.apache.activemq.usecases.ThreeBrokerVirtualTopicNetworkTest#testNetworkVirtualTopic&lt;/p&gt;


&lt;p&gt;This needs a little revisit - but it turns out there were some negative consequences &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14622185" author="christopher.l.shannon" created="Fri, 10 Jul 2015 12:00:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;How do you feel about returning the getDestinations() method behavior to how it was previously but adding another method to the PersistenceAdapter called something like getAllDestinations() that would return empty destinations as well?  Or do the opposite and add a method called getDestinations(Filter) and then a filter could be used for the case of a network bridge to filter out empty topics.&lt;/p&gt;</comment>
                            <comment id="14622220" author="christopher.l.shannon" created="Fri, 10 Jul 2015 12:16:02 +0000"  >&lt;p&gt;I did a more thorough search and in AbstractRegion, getInactiveDestinations relies on destinationFactory.getDestinations().  So I guess that could be affected by this too.&lt;/p&gt;</comment>
                            <comment id="14622231" author="christopher.l.shannon" created="Fri, 10 Jul 2015 12:35:26 +0000"  >&lt;p&gt;I think I have a good way to fix this, I&apos;m working on a PR now and I will push it up shortly.&lt;/p&gt;</comment>
                            <comment id="14622346" author="githubbot" created="Fri, 10 Jul 2015 14:09:42 +0000"  >&lt;p&gt;GitHub user cshannon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fixing a regression that caused a network bridge to recreate durable&lt;br/&gt;
    demand improperly.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cshannon/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cshannon/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt;-regression&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/131.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/131.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #131&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3b704209ee391d0505889d35831108650035d660&lt;br/&gt;
Author: Christopher L. Shannon (cshannon) &amp;lt;christopher.l.shannon@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-10T13:55:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fixing a regression that caused a network bridge to recreate durable&lt;br/&gt;
    demand improperly.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14622413" author="gtully" created="Fri, 10 Jul 2015 15:01:20 +0000"  >&lt;p&gt;thanks for the fast patch.&lt;br/&gt;
I am not sure we need another method because I think there should be enough there with org.apache.activemq.broker.Broker#getDurableDestinations&lt;br/&gt;
org.apache.activemq.broker.Broker#getDestinations&lt;br/&gt;
and:&lt;br/&gt;
org.apache.activemq.broker.region.DestinationFactory#getAllDurableSubscriptions&lt;/p&gt;

&lt;p&gt;The difficult bit is tying down the usage to the correct method and ensuring consistency with the impls across the stores.&lt;/p&gt;

&lt;p&gt;the network bridge only wants to create demand when org.apache.activemq.broker.region.DestinationFactory#getAllDurableSubscriptions is non empty, I think maybe it needs to use that method and maybe then the isEmpty check is negated and that method in kahadb can be more in line with others.&lt;br/&gt;
I need to research where that isEmpty check came from.&lt;/p&gt;</comment>
                            <comment id="14622424" author="gtully" created="Fri, 10 Jul 2015 15:10:29 +0000"  >&lt;p&gt;I think the root cause maybe is &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-2720&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-2720&lt;/a&gt; changing the impl of getDestinations&lt;/p&gt;</comment>
                            <comment id="14622532" author="gtully" created="Fri, 10 Jul 2015 16:12:38 +0000"  >&lt;p&gt;I think org.apache.activemq.network.DurableConduitBridge#setupStaticDestinations needs to be reworked to query the topic region, I think it should be using its clientid and subname also in the match. &lt;/p&gt;</comment>
                            <comment id="14622533" author="christopher.l.shannon" created="Fri, 10 Jul 2015 16:12:58 +0000"  >&lt;p&gt;So how do you feel about this fix:&lt;/p&gt;

&lt;p&gt;We could pass the destinationFactory to the NetworkConnector object and then change the configureBridge method to check durableSubscriptions.&lt;/p&gt;

&lt;p&gt;Then the loop iterating over the durableDestinations in configureBridge around line 140 or so could be changed from:&lt;br/&gt;
 &lt;tt&gt;if(d.isTopic())&lt;/tt&gt; to &lt;tt&gt;if(d.isTopic() &amp;amp;&amp;amp; destinationFactory.getAllDurableSubscriptions((ActiveMQTopic)d).length &amp;gt; 0)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14622560" author="christopher.l.shannon" created="Fri, 10 Jul 2015 16:35:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I think your proposed fix of changing DurableConduitBridge makes more sense than mine.  I will create a new PR with the fix and submit it shortly.  I will include the expanded unit tests that I had in my other PR.&lt;/p&gt;</comment>
                            <comment id="14622568" author="githubbot" created="Fri, 10 Jul 2015 16:43:20 +0000"  >&lt;p&gt;Github user cshannon closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/131&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14622591" author="githubbot" created="Fri, 10 Jul 2015 17:02:52 +0000"  >&lt;p&gt;GitHub user cshannon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/132&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fixing a regression that caused a network bridge to recreate durable&lt;br/&gt;
    demand improperly.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cshannon/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cshannon/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt;-regression-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/132.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/132.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #132&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6635f32f095cd5b367a5e1176b0cc8b2c8b3b346&lt;br/&gt;
Author: Christopher L. Shannon (cshannon) &amp;lt;christopher.l.shannon@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-10T16:43:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fixing a regression that caused a network bridge to recreate durable&lt;br/&gt;
    demand improperly.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14622593" author="christopher.l.shannon" created="Fri, 10 Jul 2015 17:05:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;See what you think of my PR.  org.apache.activemq.usecases.ThreeBrokerVirtualTopicNetworkTest#testNetworkVirtualTopic is now fixed and the PR smoke tests all pass.  A full run through CI would confirm that nothing else broke.&lt;/p&gt;</comment>
                            <comment id="14622599" author="christopher.l.shannon" created="Fri, 10 Jul 2015 17:10:16 +0000"  >&lt;p&gt;Hmm, locally the smoke test profile ran and passed but on CI it failed.  I just ran it again and it is passing for me.&lt;/p&gt;

&lt;p&gt;Failed tests: &lt;br/&gt;
  MDBTest.testMessageExceptionReDelivery:631 Delivery policy delay not working&lt;/p&gt;

&lt;p&gt;Is that test unreliable?&lt;/p&gt;</comment>
                            <comment id="14622606" author="tabish121" created="Fri, 10 Jul 2015 17:15:40 +0000"  >&lt;p&gt;That one seems to pass in CI but I noticed locally that it tends to fail about 50% of the time.&lt;/p&gt;</comment>
                            <comment id="14631503" author="jira-bot" created="Fri, 17 Jul 2015 15:57:32 +0000"  >&lt;p&gt;Commit 2117768e0a6c7bab0225f5ba4e960bfb443188c7 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christopher.l.shannon&quot; class=&quot;user-hover&quot; rel=&quot;christopher.l.shannon&quot;&gt;christopher.l.shannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2117768&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2117768&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing a regression that caused a network bridge to recreate durable&lt;br/&gt;
demand improperly.&lt;/p&gt;</comment>
                            <comment id="14631504" author="jira-bot" created="Fri, 17 Jul 2015 15:57:33 +0000"  >&lt;p&gt;Commit a439a0c6bf693e3fd68dcb190d22187c53ec8e9f in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a439a0c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a439a0c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt; - rework the patch a bit to only call createDemandSubscription when we have a match to avoid trcking state in error via the bridge subscriptionMap* from configureDemandSubscription&lt;/p&gt;</comment>
                            <comment id="14631505" author="gtully" created="Fri, 17 Jul 2015 15:58:37 +0000"  >&lt;p&gt;merged the patch with a little tweak.&lt;br/&gt;
thankyou &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14631819" author="christopher.l.shannon" created="Fri, 17 Jul 2015 20:03:56 +0000"  >&lt;p&gt;Thanks for applying that Gary.&lt;/p&gt;</comment>
                            <comment id="14643035" author="tabish121" created="Mon, 27 Jul 2015 17:06:39 +0000"  >&lt;p&gt;Noticed that after these changes the following test fails across all the Jenkins test runs:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;org.apache.activemq.usecases.DurableSubscriberWithNetworkRestartTest.testSendOnAReceiveOnBWithTransportDisconnect&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14643196" author="githubbot" created="Mon, 27 Jul 2015 18:41:40 +0000"  >&lt;p&gt;GitHub user cshannon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/136&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Reworking DurableConduitBridge to look up subscriptions from the&lt;br/&gt;
    msesage store instead of the RegionBroker since inactive subscriptions&lt;br/&gt;
    need to be looked at as well when dynamicOnly is false for a&lt;br/&gt;
    network bridge.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cshannon/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cshannon/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt;-regression3&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/136.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/136.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #136&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 15f390130bfc8645b067544572d80a75a242a9f9&lt;br/&gt;
Author: Christopher L. Shannon (cshannon) &amp;lt;christopher.l.shannon@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-27T18:38:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Reworking DurableConduitBridge to look up subscriptions from the&lt;br/&gt;
    msesage store instead of the RegionBroker since inactive subscriptions&lt;br/&gt;
    need to be looked at as well when dynamicOnly is false for a&lt;br/&gt;
    network bridge.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14643203" author="christopher.l.shannon" created="Mon, 27 Jul 2015 18:44:14 +0000"  >&lt;p&gt;So the issue with org.apache.activemq.usecases.DurableSubscriberWithNetworkRestartTest.testSendOnAReceiveOnBWithTransportDisconnect seems to be that the message store needs to be queried instead of the region broker for destinations since inactive destinations need to be checked as well.  I created a pull request with a fix for this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;, can you take a look at my fix and see if it makes sense?  I verified that it fixes org.apache.activemq.usecases.DurableSubscriberWithNetworkRestartTest.testSendOnAReceiveOnBWithTransportDisconnect and org.apache.activemq.usecases.ThreeBrokerVirtualTopicNetworkTest#testNetworkVirtualTopic is still fixed as well.  However, I could have broke something else &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14644650" author="tabish121" created="Tue, 28 Jul 2015 17:02:49 +0000"  >&lt;p&gt;Test failing in CI&lt;/p&gt;</comment>
                            <comment id="14644677" author="tabish121" created="Tue, 28 Jul 2015 17:16:42 +0000"  >&lt;p&gt;TopicRegion keeps around a mapping of all durable subscriptions including inactive one&apos;s I think which might allow you to get at the info you need without dipping into the store. &lt;/p&gt;</comment>
                            <comment id="14644746" author="christopher.l.shannon" created="Tue, 28 Jul 2015 17:48:50 +0000"  >&lt;p&gt;I just updated the PR to use that durable subscriptions mapping instead of the store.  I re-ran both tests and they pass.&lt;/p&gt;</comment>
                            <comment id="14645891" author="jira-bot" created="Wed, 29 Jul 2015 11:23:38 +0000"  >&lt;p&gt;Commit 5684d093c0fe643c9967b03dbf4d0661f2e0227a in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christopher.l.shannon&quot; class=&quot;user-hover&quot; rel=&quot;christopher.l.shannon&quot;&gt;christopher.l.shannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=5684d09&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=5684d09&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reworking DurableConduitBridge to look up subscriptions from the&lt;br/&gt;
TopicRegion  instead of the RegionBroker since inactive subscriptions&lt;br/&gt;
need to be looked at as well when dynamicOnly is false for a&lt;br/&gt;
network bridge.&lt;/p&gt;</comment>
                            <comment id="14645900" author="githubbot" created="Wed, 29 Jul 2015 11:29:13 +0000"  >&lt;p&gt;Github user cshannon closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/132&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14645903" author="gtully" created="Wed, 29 Jul 2015 11:30:37 +0000"  >&lt;p&gt;Thanks for the update. I applied your fix. Having peeked at that test for a bit yesterday I am not convinced it is verifying what it should with the asserts, the mbeans are for the bridge rather than for durable sub that are active etc.&lt;br/&gt;
However, I think the dynamicOnly=false use case is of dubious value so keeping the status quo for now is sufficient.&lt;/p&gt;</comment>
                            <comment id="14645905" author="githubbot" created="Wed, 29 Jul 2015 11:30:45 +0000"  >&lt;p&gt;Github user cshannon closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/136&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14645906" author="christopher.l.shannon" created="Wed, 29 Jul 2015 11:33:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for looking at that.  Hopefully there are no more failures after this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15150542" author="jira-bot" created="Wed, 17 Feb 2016 14:09:40 +0000"  >&lt;p&gt;Commit fd760888147b1db69a330c32a3630ddd87c2a53c in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=fd76088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=fd76088&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5875&lt;/a&gt; - additional test that shows durable sub registration does not error out with this fix&lt;/p&gt;</comment>
                            <comment id="15725724" author="jira-bot" created="Tue, 6 Dec 2016 14:54:46 +0000"  >&lt;p&gt;Commit dc68ad89678eba9d18184f1a5342eb7ecf774596 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=dc68ad8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=dc68ad8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt; add queue test variant to validate shared mkahaDb remains when one dest is deleted&lt;/p&gt;</comment>
                            <comment id="16496298" author="jira-bot" created="Thu, 31 May 2018 09:21:08 +0000"  >&lt;p&gt;Commit 4c972d97b95ea521493db5def6869eab663e5f64 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4c972d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4c972d9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt; - fix test regression in MultiKahaDBQueueDeletionTest&lt;/p&gt;</comment>
                            <comment id="16496314" author="gtully" created="Thu, 31 May 2018 09:38:49 +0000"  >&lt;p&gt;w.r.t the test regression - it is most likely the fix from&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6901&quot; title=&quot;Destination with wildcard may not have correct policy applied if multiple wildcard policies exist&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6901&quot;&gt;&lt;del&gt;AMQ-6901&lt;/del&gt;&lt;/a&gt; that precipitated the test failure.&#160;&lt;/p&gt;</comment>
                            <comment id="16620363" author="jira-bot" created="Wed, 19 Sep 2018 09:26:46 +0000"  >&lt;p&gt;Commit 77784061c590dafd81a458ca20ec8efd1484a10f in activemq&apos;s branch refs/heads/activemq-5.15.x from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7778406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7778406&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5875&quot; title=&quot;Removing a destination when using mKahaDB can cause an IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5875&quot;&gt;&lt;del&gt;AMQ-5875&lt;/del&gt;&lt;/a&gt; - fix test regression in MultiKahaDBQueueDeletionTest&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 4c972d97b95ea521493db5def6869eab663e5f64)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13139063">AMQ-6901</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12743974" name="MultiKahaDBDeletionTest.java" size="4690" author="cshannon" created="Tue, 7 Jul 2015 15:42:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gxyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>