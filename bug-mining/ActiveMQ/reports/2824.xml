<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:34:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6285] MessageDatabase doesn&apos;t properly cleanup the checkpoint scheduler on shutdown</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6285</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;On KahaDB store close the checkpoint scheduler service is shutdown but it is not set to null.  This is an issue because on startup of the store, the scheduler is checked for null and only started if it is null.  Therefore, if a store was previously started and shutdown, when started again the thread would not re-start.&lt;/p&gt;

&lt;p&gt;This would not normally cause a problem for the usual use case as a store is typically only closed when the broker is shut down, however it is a good idea to fix it as this behavior could change in the future plus the start/stop methods are public on the store so it is possible to start/stop the store even though it isn&apos;t normally done.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12966271">AMQ-6285</key>
            <summary>MessageDatabase doesn&apos;t properly cleanup the checkpoint scheduler on shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2016 19:02:17 +0000</created>
                <updated>Mon, 9 May 2016 19:45:53 +0000</updated>
                            <resolved>Mon, 9 May 2016 19:11:46 +0000</resolved>
                                    <version>5.13.3</version>
                                    <fixVersion>5.13.4</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15276829" author="jira-bot" created="Mon, 9 May 2016 19:04:41 +0000"  >&lt;p&gt;Commit 60b0c4f85ada06875e09b1bc3fbefac0f9fb6156 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=60b0c4f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=60b0c4f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6285&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Properly nulling out the scheduler service in MessageDatabase after it&lt;br/&gt;
is shutdown on a store close so that if the store is restarted the thread will&lt;br/&gt;
properly restart.&lt;/p&gt;</comment>
                            <comment id="15276836" author="jira-bot" created="Mon, 9 May 2016 19:08:06 +0000"  >&lt;p&gt;Commit db3f8b3554a1ecf5c9fcf917948d10e5fa8de28e in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=db3f8b3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=db3f8b3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;https://issues.apache.org/jira/browse/AMQ-6285&quot;&lt;/p&gt;

&lt;p&gt;This reverts commit 60b0c4f85ada06875e09b1bc3fbefac0f9fb6156.&lt;/p&gt;

&lt;p&gt;Inadvertantly commited a bunch of changes by mistake&lt;/p&gt;</comment>
                            <comment id="15276837" author="jira-bot" created="Mon, 9 May 2016 19:08:07 +0000"  >&lt;p&gt;Commit 7bdcca1bdacec4955c55e8717ac8d61cc51b0c69 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7bdcca1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7bdcca1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6285&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Properly nulling out the scheduler service in MessageDatabase after it&lt;br/&gt;
is shutdown on a store close so that if the store is restarted the&lt;br/&gt;
thread will properly restart.&lt;/p&gt;</comment>
                            <comment id="15276845" author="jira-bot" created="Mon, 9 May 2016 19:10:55 +0000"  >&lt;p&gt;Commit cd68c42b90892a62d050fad7e46dddd469051b38 in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=cd68c42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=cd68c42&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6285&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Properly nulling out the scheduler service in MessageDatabase after it&lt;br/&gt;
is shutdown on a store close so that if the store is restarted the&lt;br/&gt;
thread will properly restart.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 7bdcca1bdacec4955c55e8717ac8d61cc51b0c69)&lt;/p&gt;</comment>
                            <comment id="15276847" author="christopher.l.shannon" created="Mon, 9 May 2016 19:11:46 +0000"  >&lt;p&gt;The scheduler is properly nulled out on store close now.&lt;/p&gt;</comment>
                            <comment id="15276877" author="jira-bot" created="Mon, 9 May 2016 19:36:01 +0000"  >&lt;p&gt;Commit 91213010b30d426095c16d3fa8d5fa2cafaf05e5 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9121301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9121301&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6285&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Added an extra isShutdown() failsafe check when detecting if the&lt;br/&gt;
checkpoint thread should start&lt;/p&gt;</comment>
                            <comment id="15276879" author="jira-bot" created="Mon, 9 May 2016 19:36:26 +0000"  >&lt;p&gt;Commit 0ba9f9340f3d568db54923e03b9abfb5a5352a38 in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=0ba9f93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=0ba9f93&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6285&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Added an extra isShutdown() failsafe check when detecting if the&lt;br/&gt;
checkpoint thread should start&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 91213010b30d426095c16d3fa8d5fa2cafaf05e5)&lt;/p&gt;</comment>
                            <comment id="15276883" author="christopher.l.shannon" created="Mon, 9 May 2016 19:38:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6203&quot; title=&quot;KahaDB: Allow rewrite of message acks in older logs which prevent cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6203&quot;&gt;&lt;del&gt;AMQ-6203&lt;/del&gt;&lt;/a&gt; actually first introduced this so it only effects version 5.13.3.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12948419">AMQ-6203</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xdmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>