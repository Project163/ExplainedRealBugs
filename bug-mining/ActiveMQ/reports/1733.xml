<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:57:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3791] Flexibility, concurrency, security, and compatibility issues in CachedLDAPAuthorizationMap</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3791</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;CachedLDAPAuthorizationMap provides support for dynamic AuthZ policy updates without restarting the broker; however, I think there are several issues with the implementation.&lt;/p&gt;

&lt;p&gt;1) The underlying structures for storing and managing AuthZ policy are not concurrent or synchronized.&lt;br/&gt;
2) DN manipulation using Strings is error prone and the current implementation is case sensitive.  This case sensitivity leads to issues with AD.&lt;br/&gt;
3) For synchronous updates to the AuthZ policy, the temp destination policy is not reset and may retain out-of-date policy entries.&lt;/p&gt;

&lt;p&gt;1) Requires examining the usage of these structures and applying the necessary protections.&lt;br/&gt;
2) Can be resolved with better String parsing or through applying the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-3770&quot; title=&quot;Generalize LDAP group processing / LDAP group expansion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-3770&quot;&gt;&lt;del&gt;AMQ-3770&lt;/del&gt;&lt;/a&gt; to CachedLDAPAuthorizationMap as well.&lt;br/&gt;
3) Can be resolved by clearing the policy entry before repopulating the policy from LDAP.&lt;/p&gt;


&lt;p&gt;There are also several enhancements to the configurability of the implementation that I see:&lt;/p&gt;

&lt;p&gt;1) Support user or group membership in the LDAP entry representing a permission on a destination.  Allowing user DNs or group DNs here makes it easier to deal with one-off policies for individual users.&lt;br/&gt;
2) Group membership in the LDAP entry representing a permission on a destination should support use of the full DN, not just the value of the member CN.&lt;br/&gt;
3) The based DN should be fully customizable and the LDAP entry representing a permission on a destination should support use of an optional prefix for uniqueness.  &quot;cn=&amp;lt;PREFIX&amp;gt;read,ou=$,...&quot;&lt;br/&gt;
4) The name of the GroupPrincipal or UserPrincipal that is created from the policy in LDAP should be flexible.  For instance, allow the group name or user name attribute to be configured.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12548676">AMQ-3791</key>
            <summary>Flexibility, concurrency, security, and compatibility issues in CachedLDAPAuthorizationMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="davaleri">David Valeri</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2012 14:15:45 +0000</created>
                <updated>Mon, 30 Jul 2012 09:22:44 +0000</updated>
                            <resolved>Thu, 7 Jun 2012 12:01:23 +0000</resolved>
                                                    <fixVersion>5.7.0</fixVersion>
                                    <component>Broker</component>
                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13241257" author="davaleri" created="Thu, 29 Mar 2012 14:18:32 +0000"  >&lt;p&gt;I am working on a patch to this issue that would be backwards compatible with the existing CachedLDAPAuthorizationMap in the trunk; however, I am wondering if the two LDAP based AuthZ implementations should be merged into one more flexible implementation that uses the best of both.&lt;/p&gt;</comment>
                            <comment id="13241261" author="gtully" created="Thu, 29 Mar 2012 14:24:47 +0000"  >&lt;p&gt;reducing code duplication is always a goal, so if the same plugin can meet all requirements with a bit more flexibility, go for it. &lt;/p&gt;</comment>
                            <comment id="13241321" author="dejanb" created="Thu, 29 Mar 2012 15:42:41 +0000"  >&lt;p&gt;We just need to make sure that&apos;s documented well for people using current plugins and want to upgrade.&lt;/p&gt;</comment>
                            <comment id="13255088" author="davaleri" created="Mon, 16 Apr 2012 21:39:24 +0000"  >&lt;p&gt;I attached the first iteration of a patch for the identified issues.&lt;/p&gt;

&lt;p&gt;What you get:&lt;br/&gt;
1) Added additional defensive measures for synchronous read/write to the underlying data structures backing the authorization map without altering the behavior of the underlying data structures (for example, don&apos;t alter an existing structure that returns a live copy of a list)&lt;br/&gt;
2) Custom base DNs and search filters for the different permission and destination types (the limited flexibility in the original implementation made integrating with AD or other LDAP servers without similar schemas difficult)&lt;br/&gt;
3) Compatibility with AD (no string parsing of DNs)&lt;br/&gt;
4) Support for directly including a user in a permission instead of requiring a group (reduces number of groups that need to be created to support fine grained policies)&lt;br/&gt;
5) Ability to choose the attribute that identifies a group or individual member of a permission so the map is flexible enough to work with non-default configurations of the LDAP LoginModule.&lt;br/&gt;
6) Policy for temp destinations works correctly when using synchronous update mode&lt;br/&gt;
7) Added some tests for working with OpenLDAP and also updated the OpenLDAP example LDIFs to work with an out-of-the-box OpenLDAP instance.  These tests are @Ignore at the moment since they require an external LDAP server; however they make gooe examples and are useful for ensuring compatibility in the future.&lt;br/&gt;
8) Compatibility with what I am calling &quot;legacy group mapping&quot; where the permission group members are simply a CN and not a full DN.&lt;br/&gt;
9) Supports sub-tree renames at the destination pattern level if the LDAP server supports them.&lt;/p&gt;

&lt;p&gt;What you lose:&lt;/p&gt;

&lt;p&gt;1) Push updates against ApacheDS 1.x.  At the moment Apache DS 1.x push updates don&apos;t support filters or scope properly.  As such, the push update solution that avoids parsing DNs doesn&apos;t work against Apache DS 1.x.  I can revert to using DN parsing for supporting ApacheDS 1.x; however, I will parse them using LdapName and not raw String manipulation.&lt;/p&gt;



&lt;p&gt;Feedback welcome.&lt;/p&gt;</comment>
                            <comment id="13283790" author="tabish121" created="Fri, 25 May 2012 22:33:48 +0000"  >&lt;p&gt;This new patch should look to ensure it resolves this issue as well.&lt;/p&gt;</comment>
                            <comment id="13290953" author="dejanb" created="Thu, 7 Jun 2012 12:01:23 +0000"  >&lt;p&gt;Patch applied with svn revision 1347580. Thanks a lot.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12556038">AMQ-3845</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12514192">AMQ-3400</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12546491">AMQ-3770</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12600633">AMQ-3951</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522864" name="AMQ-3791.patch" size="165650" author="davaleri" created="Mon, 16 Apr 2012 21:28:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233773</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ahyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>