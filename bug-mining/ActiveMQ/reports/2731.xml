<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:33:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6117] QueueView method output is not in sync with actual queue</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6117</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;After upgrading from 5.10.2 to 5.13.0, it seems that the data provided by the QueueView methods is not in sync with the actual queue.&lt;/p&gt;

&lt;p&gt;When removing messages from the DLQ via QueueView.removeMessage(String), the message is actually removed from the queue but QueueView.browse() still lists the message.&lt;/p&gt;

&lt;p&gt;When new messages arrive on the DLQ via JMS, the output of QueueView.browse() still lists the stale message.&lt;/p&gt;

&lt;p&gt;Only when an action is performed via the ActiveMQ admin console (e.g. refresh browse.jsp for that queue) the JMX output is refreshed. &lt;br/&gt;
The QueueSize attribute of the queue however, is always accurate when accessed via JMX.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12928671">AMQ-6117</key>
            <summary>QueueView method output is not in sync with actual queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jov">Jo Vandermeeren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jan 2016 15:37:51 +0000</created>
                <updated>Wed, 10 Feb 2016 09:25:17 +0000</updated>
                            <resolved>Thu, 14 Jan 2016 23:29:44 +0000</resolved>
                                    <version>5.13.0</version>
                                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15092218" author="tabish121" created="Mon, 11 Jan 2016 16:25:24 +0000"  >&lt;p&gt;Try creating a unit test to reproduce the issue to allow for someone to investigate.  &lt;/p&gt;</comment>
                            <comment id="15099117" author="jira-bot" created="Thu, 14 Jan 2016 23:28:34 +0000"  >&lt;p&gt;Commit 5b73ffad6bd000fdad93bc473900b2374d36181a in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tabish121&quot; class=&quot;user-hover&quot; rel=&quot;tabish121&quot;&gt;tabish121&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=5b73ffa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=5b73ffa&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6117&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6117&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test to try and reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="15099121" author="tabish121" created="Thu, 14 Jan 2016 23:29:44 +0000"  >&lt;p&gt;Created a unit test for this and I can&apos;t reproduce it, reopen if you can reproduce in a JUnit test case.  I added AMQ6117Test.java to activemq-unit-tests if you want to try and work with that test&lt;/p&gt;</comment>
                            <comment id="15101891" author="jov" created="Fri, 15 Jan 2016 15:12:23 +0000"  >&lt;p&gt;Hi Timothy, thanks for looking into this. The unit test indeed seems to pass. I am using transacted sessions, maybe this has something to do with it.&lt;/p&gt;

&lt;p&gt;Remove a message via JMX:&lt;br/&gt;
ObjectName queueObjectName = new ObjectName(&quot;org.apache.activemq:type=Broker,brokerName=localhost,destinationType=Queue,destinationName=DLQ.workQueue&quot;);&lt;br/&gt;
connection.invoke(queueObjectName, &quot;removeMessage&quot;, new String[]&lt;/p&gt;
{messageID}
&lt;p&gt;, new String[]&lt;/p&gt;
{String.class.getName()}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;Browse a queue via JMX:&lt;br/&gt;
CompositeData[] data = (CompositeData[]) connection.invoke(queueObjectName, &quot;browse&quot;, null, null);&lt;/p&gt;

&lt;p&gt;I have worked around this by using JMS in favor of JMX for now, but I will try to reproduce in a test when time permits.&lt;/p&gt;</comment>
                            <comment id="15101896" author="tabish121" created="Fri, 15 Jan 2016 15:15:20 +0000"  >&lt;p&gt;I wouldn&apos;t expect the transacted bits to be an issue.  If you manage to reproduce please reopen and attach a test and I&apos;ll look into it.  &lt;/p&gt;</comment>
                            <comment id="15140552" author="jo.vandermeeren" created="Wed, 10 Feb 2016 09:25:17 +0000"  >&lt;p&gt;Hi Timothy, I have rewritten that test several times using transacted sessions, multiple threads and remote JMX but I cannot seem to get it reproduced in an ActiveMQ unit test.&lt;br/&gt;
In a JBoss/AMQ environment however, I can reproduce it consistently using either plain Java or by connecting jconsole. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r1mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>