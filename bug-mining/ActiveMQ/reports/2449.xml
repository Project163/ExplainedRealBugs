<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:07:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5535] deadlock on close and failover reconnect around org.apache.activemq.ActiveMQConnection.getScheduler</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5535</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Hung test - org.apache.activemq.transport.failover.FailoverUpdateURIsTest&lt;/p&gt;

&lt;p&gt;deadlock:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Name: ActiveMQ Transport: tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost/127.0.0.1:61616@51978
&lt;/span&gt;State: BLOCKED on org.apache.activemq.ActiveMQConnection@2ccf4c0e owned by: main
Total blocked: 3  Total waited: 1

Stack trace: 
org.apache.activemq.ActiveMQConnection.getScheduler(ActiveMQConnection.java:2554)
org.apache.activemq.ActiveMQSession.clearMessagesInProgress(ActiveMQSession.java:687)
org.apache.activemq.ActiveMQConnection.transportInterupted(ActiveMQConnection.java:2043)
org.apache.activemq.transport.TransportFilter.transportInterupted(TransportFilter.java:105)
org.apache.activemq.transport.TransportFilter.transportInterupted(TransportFilter.java:105)
org.apache.activemq.transport.failover.FailoverTransport.handleTransportFailure(FailoverTransport.java:279)
   - locked java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;@6242de17
org.apache.activemq.transport.failover.FailoverTransport$3.onException(FailoverTransport.java:216)
org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:160)
org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:314)
org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96)
org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:200)
java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;#8211;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Name: main
State: BLOCKED on java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;@6242de17 owned by: ActiveMQ Transport: tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost/127.0.0.1:61616@51978
&lt;/span&gt;Total blocked: 18  Total waited: 1,043

Stack trace: 
org.apache.activemq.transport.failover.FailoverTransport.oneway(FailoverTransport.java:572)
org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)
org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1331)
org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1325)
org.apache.activemq.AdvisoryConsumer.dispose(AdvisoryConsumer.java:57)
   - locked org.apache.activemq.AdvisoryConsumer@3a6d125b
org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660)
   - locked org.apache.activemq.ActiveMQConnection@2ccf4c0e
org.apache.activemq.transport.failover.FailoverUpdateURIsTest.tearDown(FailoverUpdateURIsTest.java:52)
junit.framework.TestCase.runBare(TestCase.java:146)
junit.framework.TestResult$1.protect(TestResult.java:122)
junit.framework.TestResult.runProtected(TestResult.java:142)
junit.framework.TestResult.run(TestResult.java:125)
junit.framework.TestCase.run(TestCase.java:129)
junit.framework.TestSuite.runTest(TestSuite.java:255)
junit.framework.TestSuite.run(TestSuite.java:250)
org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:84)
org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)
org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;failover&lt;/p&gt;</environment>
        <key id="12769626">AMQ-5535</key>
            <summary>deadlock on close and failover reconnect around org.apache.activemq.ActiveMQConnection.getScheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>failover</label>
                    </labels>
                <created>Fri, 23 Jan 2015 12:12:18 +0000</created>
                <updated>Fri, 23 Jan 2015 13:11:03 +0000</updated>
                            <resolved>Fri, 23 Jan 2015 13:11:03 +0000</resolved>
                                    <version>5.10.0</version>
                                    <fixVersion>5.11.0</fixVersion>
                                    <component>JMS client</component>
                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14289217" author="gtully" created="Fri, 23 Jan 2015 13:11:03 +0000"  >&lt;p&gt;ensure close exception returned without contention during close for calls to getScheduler&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12542385">AMQ-3714</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24q07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>