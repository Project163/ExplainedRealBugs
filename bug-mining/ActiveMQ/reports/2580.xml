<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:10:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5821] Activator can trigger unwanted behaviour when loading classes from other bundles</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5821</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Currently org.apache.activemq.util.osgi.Activator watches all other bundles and tries to load some classes using their classloader to check if they might implement extensions. &lt;/p&gt;

&lt;p&gt;This can go wrong if the bundle uses dynamic imports like e.g. jline does. In this case the jline bundle is triggered to load classes from ActiveMQ. This establishes a wiring from jline to ActiveMQ. If the ActiveMQ bundle are now refreshed or uninstalled jline also has to be refreshed which triggers refreshs of a lot more bundles.&lt;/p&gt;

&lt;p&gt;I propose to replace the class probing with checking of the bundle requirements. We simply check if the bundle has an import for the packages of the interface classes of ActiveMQ. So we avoid triggering classloading and the creation of unwanted wirings. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12835046">AMQ-5821</key>
            <summary>Activator can trigger unwanted behaviour when loading classes from other bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="cschneider">Christian Schneider</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2015 13:37:55 +0000</created>
                <updated>Tue, 30 Jun 2015 12:23:05 +0000</updated>
                            <resolved>Tue, 30 Jun 2015 12:23:05 +0000</resolved>
                                    <version>5.11.1</version>
                                    <fixVersion>5.11.2</fixVersion>
                    <fixVersion>5.12.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14570831" author="githubbot" created="Wed, 3 Jun 2015 13:41:29 +0000"  >&lt;p&gt;GitHub user cschneider opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/107&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt; Avoid probing of classes in Activator&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cschneider/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cschneider/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/107.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/107.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #107&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 63cd4eef067c5e3294ade40c0ed3f1c60b8e6c9e&lt;br/&gt;
Author: Christian Schneider &amp;lt;chris@die-schneider.net&amp;gt;&lt;br/&gt;
Date:   2015-06-03T13:40:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt; Avoid probing of classes in Activator&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14580210" author="gnt" created="Wed, 10 Jun 2015 08:21:35 +0000"  >&lt;p&gt;The patch is wrong.&lt;br/&gt;
The goal is not to verify that the bundle actually imports &lt;b&gt;some&lt;/b&gt; known packages, but the fact that the bundle imports &lt;b&gt;our&lt;/b&gt; package.&lt;br/&gt;
So the use of the wiring API is good, but we need to ensure that the provider is &lt;b&gt;our&lt;/b&gt; bundle, or at least the same bundle which is used to load the classes.&lt;/p&gt;</comment>
                            <comment id="14582046" author="chris@die-schneider.net" created="Thu, 11 Jun 2015 15:12:46 +0000"  >&lt;p&gt;I updated the pull request to use wiring to check for the same imports we use.&lt;/p&gt;</comment>
                            <comment id="14597489" author="githubbot" created="Tue, 23 Jun 2015 11:16:41 +0000"  >&lt;p&gt;GitHub user cschneider opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/119&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Improved fix based on current master&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cschneider/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cschneider/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt;-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/119.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/119.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #119&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8301dfa2bb69a69d5f843bdaf3861cfa3918bb18&lt;br/&gt;
Author: Christian Schneider &amp;lt;chris@die-schneider.net&amp;gt;&lt;br/&gt;
Date:   2015-06-03T13:40:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt; Avoid probing of classes in Activator&lt;/p&gt;

&lt;p&gt;commit e7500d643a59dd8a9545c2331ee80063a86f8039&lt;br/&gt;
Author: Christian Schneider &amp;lt;chris@die-schneider.net&amp;gt;&lt;br/&gt;
Date:   2015-06-11T15:11:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5821&quot; title=&quot;Activator can trigger unwanted behaviour when loading classes from other bundles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5821&quot;&gt;&lt;del&gt;AMQ-5821&lt;/del&gt;&lt;/a&gt; Check if imports come from our bundle&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14599361" author="githubbot" created="Wed, 24 Jun 2015 13:06:11 +0000"  >&lt;p&gt;Github user cschneider closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14599690" author="githubbot" created="Wed, 24 Jun 2015 16:31:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14608206" author="chris@die-schneider.net" created="Tue, 30 Jun 2015 12:22:53 +0000"  >&lt;p&gt;I think this issue is done now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12834978">KARAF-3758</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fkr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>