<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:00:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4645] The lease-database-locker does not work properly if slave broker system clock is behind Database server</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4645</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The lease locker can adjust the lease duration based on the DB current time but this only works if the broker is ahead of the Db.&lt;br/&gt;
If the broker is behind, it will always obtain a lease due to incorrect adjustment.&lt;br/&gt;
If the clocks are in sync there is no issue.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;persistenceAdapter&amp;gt;
        &amp;lt;jdbcPersistenceAdapter dataSource=&lt;span class=&quot;code-quote&quot;&gt;&quot;#oracle-ds&quot;&lt;/span&gt; lockKeepAlivePeriod=&lt;span class=&quot;code-quote&quot;&gt;&quot;5000&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;locker&amp;gt;
                &amp;lt;lease-database-locker lockAcquireSleepInterval=&lt;span class=&quot;code-quote&quot;&gt;&quot;10000&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;/locker&amp;gt;
        &amp;lt;/jdbcPersistenceAdapter&amp;gt;
    &amp;lt;/persistenceAdapter&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that the negative diff is being treated as a positive diff.&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdbc master slave&lt;/p&gt;</environment>
        <key id="12658817">AMQ-4645</key>
            <summary>The lease-database-locker does not work properly if slave broker system clock is behind Database server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>clock</label>
                            <label>jdbc</label>
                            <label>lease</label>
                            <label>masterSlave</label>
                    </labels>
                <created>Fri, 19 Jul 2013 19:46:43 +0000</created>
                <updated>Thu, 12 Nov 2015 10:51:28 +0000</updated>
                            <resolved>Mon, 22 Jul 2013 12:12:52 +0000</resolved>
                                    <version>5.8.0</version>
                                    <fixVersion>5.9.0</fixVersion>
                                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13715147" author="gtully" created="Mon, 22 Jul 2013 12:12:52 +0000"  >&lt;p&gt;diff now applied correctly. Additional tests to validate&lt;/p&gt;</comment>
                            <comment id="13783838" author="joeluo" created="Wed, 2 Oct 2013 11:16:13 +0000"  >&lt;p&gt;The subject title of this JIRA is a bit misleading and it should be &quot;The lease-database-locker does not work properly slave broker system clock is ahead of Database server&quot;. So it was a problem only when the slave broker system clock is ahead of the Database server but not behind.&lt;/p&gt;</comment>
                            <comment id="15001792" author="volkerk" created="Thu, 12 Nov 2015 07:26:50 +0000"  >&lt;p&gt;Minor nitpick: Title is missing &quot;if&quot;, and system is misspelled.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339010</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mh0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>