<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:02:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4917] LevelDB store can fail when using durable subs</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4917</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Tenzin giatso  original reported this issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-4837&quot; title=&quot;LevelDB corrupted when in a replication cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-4837&quot;&gt;&lt;del&gt;AMQ-4837&lt;/del&gt;&lt;/a&gt; :&lt;/p&gt;

&lt;p&gt;The broker stopped 3 times this night after about 6h50min, then 6h50 min then 50min.&lt;br/&gt;
The error sounds to be the sa&#249;me (except the line number in class) but the broker restart automaticly with the snapshot.&lt;br/&gt;
2013-11-19 05:27:43,671 | INFO | Stopping BrokerService&lt;span class=&quot;error&quot;&gt;&amp;#91;localhost&amp;#93;&lt;/span&gt; due to exception, java.io.IOException | org.apache.activemq.util.DefaultIOExceptionHandler | LevelDB IOException handler.&lt;br/&gt;
java.io.IOException&lt;br/&gt;
at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:39)&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:554)&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBClient.might_fail_using_index(LevelDBClient.scala:1021)&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBClient.collectionCursor(LevelDBClient.scala:1320)&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBClient.queueCursor(LevelDBClient.scala:1244)&lt;br/&gt;
at org.apache.activemq.leveldb.DBManager.cursorMessages(DBManager.scala:708)&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBStore$LevelDBMessageStore.recover(LevelDBStore.scala:747)&lt;br/&gt;
at org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:588)&lt;br/&gt;
at org.apache.activemq.broker.region.Topic.access$100(Topic.java:65)&lt;br/&gt;
at org.apache.activemq.broker.region.Topic$6.run(Topic.java:721)&lt;br/&gt;
at org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)&lt;br/&gt;
at java.util.TimerThread.mainLoop(Unknown Source)&lt;br/&gt;
at java.util.TimerThread.run(Unknown Source)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
at org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1248)&lt;br/&gt;
It&apos;s not easy to reproduce. It&apos;s better with the snapshot but i can&apos;t say that no messages are lost with leveldb.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682713">AMQ-4917</key>
            <summary>LevelDB store can fail when using durable subs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chirino">Hiram R. Chirino</assignee>
                                    <reporter username="chirino">Hiram R. Chirino</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Dec 2013 16:02:29 +0000</created>
                <updated>Sat, 7 Jun 2014 20:30:51 +0000</updated>
                            <resolved>Fri, 6 Dec 2013 14:43:49 +0000</resolved>
                                    <version>5.9.0</version>
                                    <fixVersion>5.9.1</fixVersion>
                    <fixVersion>5.10.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13839089" author="chirino" created="Wed, 4 Dec 2013 17:24:57 +0000"  >&lt;p&gt;Ok. I think this one should be fixed now.  Fix is included in the following builds for anyone who wants to double check.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131204.171817-28-bin.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131204.171817-28-bin.tar.gz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131204.171817-28-bin.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131204.171817-28-bin.zip&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13839951" author="meurwinn" created="Thu, 5 Dec 2013 08:52:20 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
thank you for your help.&lt;br/&gt;
i&apos;ll try the snapshot right now.&lt;br/&gt;
I&apos;ll keep you in touch.&lt;/p&gt;</comment>
                            <comment id="13841117" author="meurwinn" created="Fri, 6 Dec 2013 09:12:20 +0000"  >&lt;p&gt;Hi, good news !&lt;/p&gt;

&lt;p&gt;AMQ is processing since yesterday afternoon, with about 150 messages/second.&lt;br/&gt;
It has delivered about 8 000 000 messages without any lots messages.&lt;br/&gt;
And the good news is that the errors has NOT occured since the beginning of the test. So no error, no reboot, no slow processing !&lt;/p&gt;

&lt;p&gt;I let the test running until monday morning and i&apos;ll post some news but i think the fix is ok.&lt;/p&gt;

&lt;p&gt;Thank you guys !&lt;/p&gt;</comment>
                            <comment id="13841315" author="chirino" created="Fri, 6 Dec 2013 14:43:49 +0000"  >&lt;p&gt;Thanks for checking the fix.  Resolving as fixed.&lt;/p&gt;</comment>
                            <comment id="13841319" author="meurwinn" created="Fri, 6 Dec 2013 14:48:17 +0000"  >&lt;p&gt;Ok, about 10 800 000 messages processed without any error.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14020959" author="artnaseef" created="Sat, 7 Jun 2014 20:30:51 +0000"  >&lt;p&gt;Git commit: &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=8378cb1ffc77715d3c9c8a173805f037afa2935a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=8378cb1ffc77715d3c9c8a173805f037afa2935a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12676619">AMQ-4837</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qe8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>