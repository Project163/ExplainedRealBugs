<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:52:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3625] NullPointer Exceptions when networked broker sends certificate with an invalid user name</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3625</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Couple NPEs pop out when a connecting one broker to another using authentication if the authentication fails:&lt;/p&gt;

&lt;p&gt;WARN | Failed to add Connection ID:Susan-Javureks-MacBook-Pro-3.local-53150-1322608354523-5:1, reason: java.lang.SecurityException: User name &lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; or password is invalid. No user for client certificate: CN=Dave Stanley, OU=FuseSource, O=Progress, L=Unknown, ST=MA, C=US&lt;br/&gt;
WARN | Async error occurred: java.lang.SecurityException: User name &lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; or password is invalid. No user for client certificate: CN=Dave Stanley, OU=FuseSource, O=Progress, L=Unknown, ST=MA, C=US&lt;br/&gt;
java.lang.SecurityException: User name &lt;span class=&quot;error&quot;&gt;&amp;#91;null&amp;#93;&lt;/span&gt; or password is invalid. No user for client certificate: CN=Dave Stanley, OU=FuseSource, O=Progress, L=Unknown, ST=MA, C=US&lt;br/&gt;
at org.apache.activemq.security.JaasCertificateAuthenticationBroker.addConnection(JaasCertificateAuthenticationBroker.java:102)&lt;br/&gt;
at org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:85)&lt;br/&gt;
at org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:91)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.processAddConnection(TransportConnection.java:707)&lt;br/&gt;
at org.apache.activemq.broker.jmx.ManagedTransportConnection.processAddConnection(ManagedTransportConnection.java:77)&lt;br/&gt;
at org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:139)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:318)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:181)&lt;br/&gt;
at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)&lt;br/&gt;
at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)&lt;br/&gt;
at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:227)&lt;br/&gt;
at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
at org.apache.activemq.transport.tcp.SslTransport.doConsume(SslTransport.java:91)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:223)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:205)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: javax.security.auth.login.FailedLoginException: No user for client certificate: CN=Dave Stanley, OU=FuseSource, O=Progress, L=Unknown, ST=MA, C=US&lt;br/&gt;
at org.apache.activemq.jaas.CertificateLoginModule.login(CertificateLoginModule.java:93)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769)&lt;br/&gt;
at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)&lt;br/&gt;
at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)&lt;br/&gt;
at javax.security.auth.login.LoginContext.login(LoginContext.java:579)&lt;br/&gt;
at org.apache.activemq.security.JaasCertificateAuthenticationBroker.addConnection(JaasCertificateAuthenticationBroker.java:87)&lt;br/&gt;
... 15 more&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;WARN | Async error occurred: java.lang.NullPointerException&lt;br/&gt;
java.lang.NullPointerException&lt;/font&gt;&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.processAddProducer(TransportConnection.java:512)&lt;br/&gt;
at org.apache.activemq.command.ProducerInfo.visit(ProducerInfo.java:105)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:318)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:181)&lt;br/&gt;
at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)&lt;br/&gt;
at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)&lt;br/&gt;
at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:227)&lt;br/&gt;
at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
at org.apache.activemq.transport.tcp.SslTransport.doConsume(SslTransport.java:91)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:223)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:205)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
WARN | &lt;font color=&quot;red&quot;&gt;Async error occurred: java.lang.NullPointerException&lt;br/&gt;
java.lang.NullPointerException&lt;/font&gt;&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.processAddConsumer(TransportConnection.java:551)&lt;br/&gt;
at org.apache.activemq.command.ConsumerInfo.visit(ConsumerInfo.java:349)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:318)&lt;br/&gt;
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:181)&lt;br/&gt;
at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)&lt;br/&gt;
at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)&lt;br/&gt;
at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:227)&lt;br/&gt;
at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
at org.apache.activemq.transport.tcp.SslTransport.doConsume(SslTransport.java:91)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:223)&lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:205)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:680)&lt;/p&gt;

&lt;p&gt;In this case the actual problem is the certificate doesn&apos;t match the configured password, but the two NPEs after this exception don&apos;t look good.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12534229">AMQ-3625</key>
            <summary>NullPointer Exceptions when networked broker sends certificate with an invalid user name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="slewis">Stanley J. Lewis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2011 18:47:36 +0000</created>
                <updated>Wed, 28 Dec 2011 19:17:58 +0000</updated>
                            <resolved>Wed, 28 Dec 2011 19:17:58 +0000</resolved>
                                    <version>5.5.1</version>
                                    <fixVersion>5.6.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13173204" author="tabish121" created="Tue, 20 Dec 2011 14:02:52 +0000"  >&lt;p&gt;The patch doesn&apos;t address the real issue here which is that the TransportConnection is continuing to process incoming commands from the its Transport after the detection of a Security violation from the Connection request.  It seems that the safer thing to do here would be to block processing of any additional incoming commands and terminate the connection after sending back a ConnectionError command to the connecting client.&lt;/p&gt;</comment>
                            <comment id="13176773" author="tabish121" created="Wed, 28 Dec 2011 19:17:58 +0000"  >&lt;p&gt;Tests all still passing on the CI box, marking as resolved now.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506497" name="0001-Avoid-NPE.patch" size="18969" author="slewis" created="Wed, 7 Dec 2011 18:59:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0agrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>