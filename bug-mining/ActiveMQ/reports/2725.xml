<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:33:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6052] Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6052</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When using a network of brokers apparently on duplex with destinations which were already created on each MBeanBridgeDestination.onOutboundMessage() and MBeanBridgeDestination.onInboundMessage() the bridge tries to register the MBean of a destination which has already been created.&lt;/p&gt;

&lt;p&gt;Here is a discussion that started but a ticket was not created.&lt;br/&gt;
&lt;a href=&quot;http://activemq.2283324.n4.nabble.com/Broker-log-full-of-Failed-to-register-queue-messages-td4685241.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.2283324.n4.nabble.com/Broker-log-full-of-Failed-to-register-queue-messages-td4685241.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Although this does not seem to impact the functionality of the application it creates a massive amount of logs as this message repeats for every received message. &lt;/p&gt;

&lt;p&gt;This are the important bits of my activeMQ configuration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;networkConnectors&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;networkConnector name=&lt;span class=&quot;code-quote&quot;&gt;&quot;mailSystemConnector&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;multicast://default&quot;&lt;/span&gt; conduitSubscriptions=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; duplex=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dynamicallyIncludedDestinations&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;queue physicalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;mailsystem.templateprocessor&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;queue physicalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;DLQ.mailsystem.templateprocessor&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dynamicallyIncludedDestinations&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/networkConnector&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/networkConnectors&amp;gt;&lt;/span&gt;

        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;destinations&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;queue physicalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;SCE&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;queue physicalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;mailsystem.templateprocessor&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;queue physicalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ.DLQ&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/destinations&amp;gt;&lt;/span&gt;

        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;managementContext&amp;gt;&lt;/span&gt;
            &amp;lt;managementContext createConnector=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;
                               connectorPort=&lt;span class=&quot;code-quote&quot;&gt;&quot;1091&quot;&lt;/span&gt;
                               jmxDomainName=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.activemq&quot;&lt;/span&gt;/&amp;gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/managementContext&amp;gt;&lt;/span&gt;


        &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- The transport connectors ActiveMQ will listen to --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transportConnectors&amp;gt;&lt;/span&gt;
            &amp;lt;transportConnector name=&lt;span class=&quot;code-quote&quot;&gt;&quot;openwire nio&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;nio://0.0.0.0:61616&quot;&lt;/span&gt; updateClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;
                                rebalanceClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; updateClusterClientsOnRemove=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;transportConnector name=&lt;span class=&quot;code-quote&quot;&gt;&quot;openwireDiscovery&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;tcp://0.0.0.0:0&quot;&lt;/span&gt;
                                discoveryUri=&lt;span class=&quot;code-quote&quot;&gt;&quot;multicast://default&quot;&lt;/span&gt; updateClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;
                                rebalanceClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; updateClusterClientsOnRemove=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;transportConnector name=&lt;span class=&quot;code-quote&quot;&gt;&quot;stomp&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;stomp://0.0.0.0:61613&quot;&lt;/span&gt; updateClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;
                                rebalanceClusterClients=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; updateClusterClientsOnRemove=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;

        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/transportConnectors&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this is the output log generated:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-11-18 15:43:10,497 [.69:41090@36731] WARN  MBeanBridgeDestination         - Failed to register queue://mailsystem.templateprocessor
javax.management.InstanceAlreadyExistsException: org.apache.activemq:brokerName=mailsystemBroker,connector=duplexNetworkConnectors,networkConnectorName=#0,networkBridge=tcp_//10.211.2.69_41090,type=Broker,direction=inbound,destinationType=Queue,destinationName=mailsystem.templateprocessor
        at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
        at org.apache.activemq.broker.jmx.ManagementContext.registerMBean(ManagementContext.java:380)
        at org.apache.activemq.broker.jmx.AnnotatedMBean.registerMBean(AnnotatedMBean.java:72)
        at org.apache.activemq.network.MBeanBridgeDestination.onInboundMessage(MBeanBridgeDestination.java:97)
        at org.apache.activemq.network.MBeanNetworkListener.onInboundMessage(MBeanNetworkListener.java:115)
        at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceInboundMessage(DemandForwardingBridgeSupport.java:1680)
        at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceRemoteCommand(DemandForwardingBridgeSupport.java:649)
        at org.apache.activemq.network.DemandForwardingBridgeSupport$3.onCommand(DemandForwardingBridgeSupport.java:224)
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:116)
        at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
        at org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(AbstractInactivityMonitor.java:270)
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:214)
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:196)
        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;		2015-11-18 15:43:09,634 [Broker] Task-16] WARN  MBeanBridgeDestination         - Failed to register queue://mailsystem.templateprocessor
javax.management.InstanceAlreadyExistsException: org.apache.activemq:brokerName=mailsystemBroker,connector=networkConnectors,networkConnectorName=mailSystemConnector,networkBridge=tcp_//10.211.2.70_36731,type=Broker,direction=outbound,destinationType=Queue,destinationName=mailsystem.templateprocessor
        at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
        at org.apache.activemq.broker.jmx.ManagementContext.registerMBean(ManagementContext.java:380)
        at org.apache.activemq.broker.jmx.AnnotatedMBean.registerMBean(AnnotatedMBean.java:72)
        at org.apache.activemq.network.MBeanBridgeDestination.onOutboundMessage(MBeanBridgeDestination.java:72)
        at org.apache.activemq.network.MBeanNetworkListener.onOutboundMessage(MBeanNetworkListener.java:107)
        at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceOutbound(DemandForwardingBridgeSupport.java:1673)
        at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceLocalCommand(DemandForwardingBridgeSupport.java:1035)
        at org.apache.activemq.network.DemandForwardingBridgeSupport$2.onCommand(DemandForwardingBridgeSupport.java:206)
        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:116)
        at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
        at org.apache.activemq.transport.vm.VMTransport.doDispatch(VMTransport.java:138)
        at org.apache.activemq.transport.vm.VMTransport.dispatch(VMTransport.java:130)
        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:107)
        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)
        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1419)
        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:938)
        at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:984)
        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)
        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12914299">AMQ-6052</key>
            <summary>Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="Altaflux">Pablo Lozano</reporter>
                        <labels>
                            <label>jmx</label>
                            <label>networkBridge</label>
                            <label>networkConnector</label>
                    </labels>
                <created>Thu, 19 Nov 2015 00:03:24 +0000</created>
                <updated>Tue, 2 Feb 2016 16:19:43 +0000</updated>
                            <resolved>Tue, 2 Feb 2016 16:19:43 +0000</resolved>
                                    <version>5.10.1</version>
                    <version>5.12.1</version>
                    <version>5.11.3</version>
                                    <fixVersion>5.13.1</fixVersion>
                    <fixVersion>5.12.3</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Network of Brokers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15015059" author="altaflux" created="Fri, 20 Nov 2015 02:29:58 +0000"  >&lt;p&gt;I have found the issue that activates this problem.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MBeanBridgeDestination.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;ActiveMQDestination, ObjectName&amp;gt; destinationObjectNameMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;ActiveMQDestination, ObjectName&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;ActiveMQDestination, NetworkDestinationView&amp;gt; outboundDestinationViewMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;ActiveMQDestination, NetworkDestinationView&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;ActiveMQDestination, NetworkDestinationView&amp;gt; inboundDestinationViewMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;ActiveMQDestination, NetworkDestinationView&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both onOutboundMessage() and onInboundMessage() use the  destinationObjectNameMap to register the ObjectName of the NetworkDestinationView. But each other overwrite their value when using a duplex connection.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MBeanBridgeDestination.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void onInboundMessage(Message message) {
....
 destinationObjectNameMap.put(destination, objectName);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When running with the option to purge unactiveDestinationViews which by default is active it will un-register from the MBeanServer the objectName that is found on  destinationObjectNameMap.remove(entry.getKey()); //ActiveMqDestination. This happens on the method purgeInactiveDestinationView(Map&amp;lt;ActiveMQDestination, NetworkDestinationView&amp;gt; map) which receives both outboundDestinationViewMap and inboundDestinationViewMap.&lt;/p&gt;

&lt;p&gt;Thus when running for outboundDestinationViewMap if the last registration of a destination was actually of a inBound it will incorrectly delete  the object name of and  inboundDestination insead of the one from outboundDestination.&lt;/p&gt;

&lt;p&gt;I am working on a fix and submitting a patch for this issue.&lt;/p&gt;

&lt;p&gt;This seems to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5265&quot; title=&quot;JMX destination entires fail due to race condition in MBeanBridgeDestination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5265&quot;&gt;&lt;del&gt;AMQ-5265&lt;/del&gt;&lt;/a&gt; which looks like it tried to fix the same issue although apparently it was still present.&lt;/p&gt;</comment>
                            <comment id="15018499" author="altaflux" created="Fri, 20 Nov 2015 18:44:43 +0000"  >&lt;p&gt;I have included a patch for this issue. From the way that it is done it removes the need to synchronize operations which is a good thing.&lt;/p&gt;</comment>
                            <comment id="15018589" author="tabish121" created="Fri, 20 Nov 2015 19:21:21 +0000"  >&lt;p&gt;Patch lacks any tests to validate the problem or the fix.  &lt;/p&gt;</comment>
                            <comment id="15018701" author="altaflux" created="Fri, 20 Nov 2015 20:16:02 +0000"  >&lt;p&gt;No problem, &lt;br/&gt;
Let me work out a test and attach it.&lt;/p&gt;</comment>
                            <comment id="15020187" author="altaflux" created="Sat, 21 Nov 2015 02:39:30 +0000"  >&lt;p&gt;Patch with test case included&lt;/p&gt;</comment>
                            <comment id="15034322" author="altaflux" created="Tue, 1 Dec 2015 18:39:37 +0000"  >&lt;p&gt;Is there anything missing to check this issue?&lt;/p&gt;</comment>
                            <comment id="15081805" author="githubbot" created="Mon, 4 Jan 2016 21:07:38 +0000"  >&lt;p&gt;GitHub user Altaflux opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/164&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6052&quot; title=&quot;Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6052&quot;&gt;&lt;del&gt;AMQ-6052&lt;/del&gt;&lt;/a&gt; Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&lt;/p&gt;

&lt;p&gt;    This PR is related to Issue &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6052&quot; title=&quot;Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6052&quot;&gt;&lt;del&gt;AMQ-6052&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6052&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Altaflux/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Altaflux/activemq&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/164.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/164.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #164&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a262140a616e238984b25e326143fb8e00291ed1&lt;br/&gt;
Author: Altaflux &amp;lt;pabloloz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-01-04T21:00:00Z&lt;/p&gt;

&lt;p&gt;    Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&lt;/p&gt;

&lt;p&gt;commit 15dc63cb96a02d64cda9b5bd0f77492f36938f47&lt;br/&gt;
Author: Altaflux &amp;lt;pabloloz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-01-04T21:03:26Z&lt;/p&gt;

&lt;p&gt;    Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15091865" author="jira-bot" created="Mon, 11 Jan 2016 13:00:23 +0000"  >&lt;p&gt;Commit 3bb7e4a5c8497c8259a267e2eb11dddb8615a1ea in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Altaflux&quot; class=&quot;user-hover&quot; rel=&quot;Altaflux&quot;&gt;Altaflux&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=3bb7e4a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=3bb7e4a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Network of brokers on duplex mode reports InstanceAlreadyExistsException on already existing destinations&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6052&lt;/a&gt;&lt;br/&gt;
closes #164&lt;/p&gt;</comment>
                            <comment id="15091866" author="githubbot" created="Mon, 11 Jan 2016 13:00:34 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/164&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15091869" author="gtully" created="Mon, 11 Jan 2016 13:02:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Altaflux&quot; class=&quot;user-hover&quot; rel=&quot;Altaflux&quot;&gt;Altaflux&lt;/a&gt; thanks for the fix and test. I pushed your changes, they look good. Lets track the nightly tests to pick up any possible regressions&lt;/p&gt;</comment>
                            <comment id="15092338" author="altaflux" created="Mon, 11 Jan 2016 17:33:34 +0000"  >&lt;p&gt;Great thanks Gary,&lt;br/&gt;
I expect it to work correctly, we have run this patch in production for a while and haven&apos;t seen the issue occur again so fingers crossed.&lt;/p&gt;</comment>
                            <comment id="15101802" author="tbain98" created="Fri, 15 Jan 2016 14:04:32 +0000"  >&lt;p&gt;Can we back-port this issue to any future patch releases we do (5.13.1 at a minimum, plus 5.12.3, 5.11.4, etc. if we do them)?  I don&apos;t think it&apos;s important enough to make a patch version just for this issue, but I do think it&apos;s enough of a frustration for anyone with a NoB configuration that it should be in a patch release if we&apos;re already doing one for any of the earlier versions.&lt;/p&gt;</comment>
                            <comment id="15101813" author="tbain98" created="Fri, 15 Jan 2016 14:14:23 +0000"  >&lt;p&gt;Also note that a workaround is to set the logging level to ERROR for org.apache.activemq.network.MBeanBridgeDestination.  You run the risk of not seeing errors in MBean creation due to other reasons, but in practice the odds of that are unlikely so there&apos;s really not much of a cost, and I think that&apos;s better than disabling JMX entirely.&lt;/p&gt;</comment>
                            <comment id="15101903" author="christopher.l.shannon" created="Fri, 15 Jan 2016 15:20:41 +0000"  >&lt;p&gt;I actually already backported this to 5.13.x but forgot to update the fixed versions.  I can also move it to 5.12.3 in case it is released but any others can be backported later if there is a desire for them.&lt;/p&gt;</comment>
                            <comment id="15101971" author="tbain98" created="Fri, 15 Jan 2016 16:00:47 +0000"  >&lt;p&gt;Great, thanks.&lt;/p&gt;</comment>
                            <comment id="15107363" author="altaflux" created="Tue, 19 Jan 2016 20:21:39 +0000"  >&lt;p&gt;This issue can also be worked around be setting on the networkConnector gcDestinationViews=&quot;false&quot;.&lt;/p&gt;

&lt;p&gt;Although disabling the log level on that class avoids the huge log output it still creates a performance impact during the time where the issue occurs until the next removal of destinations as for every message that is received being on that faulty state will enter the synchronization block and throw and exception which will cause performance to degrade.&lt;/p&gt;</comment>
                            <comment id="15128486" author="christopher.l.shannon" created="Tue, 2 Feb 2016 16:19:43 +0000"  >&lt;p&gt;Closing this as the fixes have been applied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773634" name="AMQ_6052-2.patch" size="16968" author="Altaflux" created="Sat, 21 Nov 2015 02:39:30 +0000"/>
                            <attachment id="12773542" name="AMQ_6052.patch" size="12526" author="Altaflux" created="Fri, 20 Nov 2015 17:02:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2om07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>