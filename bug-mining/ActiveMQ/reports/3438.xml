<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:54:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9193] Improve broker shutdown logic in unit tests to improve test reliability</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9193</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;A lot of the test failures that happen in CI are due to brokers that were not shut down properly in previous test runs (so ports are not open or JMX interferes, etc). I have noticed a lot of the reason is simply not wrapping code that is called before stopping the broker in a try/catch (such as connection.close()) so that if the previous code fails the broker doesn&apos;t get stopped.&lt;/p&gt;

&lt;p&gt;The goal here is to just try and go through and find places in the unit tests where broker stop can be better handled to try and limit some of the issues when running in CI.&lt;/p&gt;

&lt;p&gt;Another issue altogether is that the tests would be much more reliable if random ports were used and not hard coded ports but that is a much bigger task to change for all tests so would be another issue if needed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13517597">AMQ-9193</key>
            <summary>Improve broker shutdown logic in unit tests to improve test reliability</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jan 2023 11:19:10 +0000</created>
                <updated>Wed, 11 Jan 2023 18:15:36 +0000</updated>
                            <resolved>Wed, 11 Jan 2023 18:15:36 +0000</resolved>
                                    <version>5.17.3</version>
                                    <fixVersion>5.18.0</fixVersion>
                    <fixVersion>5.17.4</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17672321" author="jira-bot" created="Wed, 11 Jan 2023 11:22:52 +0000"  >&lt;p&gt;Commit a083ff4d23e9ea0997efa5aa596ed5f1c3c6ee24 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a083ff4d2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a083ff4d2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9193&quot; title=&quot;Improve broker shutdown logic in unit tests to improve test reliability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9193&quot;&gt;&lt;del&gt;AMQ-9193&lt;/del&gt;&lt;/a&gt; - Improve broker shutdown in unit tests&lt;/p&gt;

&lt;p&gt;This should improve test reliability for the unit tests so brokers don&apos;t&lt;br/&gt;
hang around after the end of a test on error. Also increase the surefire&lt;br/&gt;
re-run count to 3 times before failing.&lt;/p&gt;</comment>
                            <comment id="17672322" author="jira-bot" created="Wed, 11 Jan 2023 11:23:18 +0000"  >&lt;p&gt;Commit 5e12551a4abbb02ac9c07deab258042ef1202042 in activemq&apos;s branch refs/heads/activemq-5.17.x from Christopher L. Shannon (cshannon)&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5e12551a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5e12551a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9193&quot; title=&quot;Improve broker shutdown logic in unit tests to improve test reliability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9193&quot;&gt;&lt;del&gt;AMQ-9193&lt;/del&gt;&lt;/a&gt; - Improve broker shutdown in unit tests&lt;/p&gt;

&lt;p&gt;This should improve test reliability for the unit tests so brokers don&apos;t&lt;br/&gt;
hang around after the end of a test on error. Also increase the surefire&lt;br/&gt;
re-run count to 3 times before failing.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit a083ff4d23e9ea0997efa5aa596ed5f1c3c6ee24)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1epww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>