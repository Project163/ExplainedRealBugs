<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:42:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2400] Default settings lead to paging and high latency for non persistent pub/sub</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2400</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The current default config doesn&apos;t enable a memoryLimit or flow control for topics which consequently leads to high latency and lower throughput. &lt;/p&gt;

&lt;p&gt;I ended up tweaking the default config to limit destination sizes and enable flow control as follows:&lt;/p&gt;

&lt;p&gt;&amp;lt;destinationPolicy&amp;gt;&lt;br/&gt;
 &amp;lt;policyMap&amp;gt;&lt;br/&gt;
   &amp;lt;policyEntries&amp;gt;&lt;br/&gt;
     &amp;lt;policyEntry topic=&quot;&amp;gt;&quot; producerFlowControl=&quot;true&quot; memoryLimit=&quot;1mb&quot;&amp;gt;                      &lt;br/&gt;
       &amp;lt;pendingSubscriberPolicy&amp;gt;&lt;br/&gt;
         &amp;lt;vmCursor/&amp;gt;&lt;br/&gt;
       &amp;lt;/pendingSubscriberPolicy&amp;gt;&lt;br/&gt;
     &amp;lt;/policyEntry&amp;gt;&lt;br/&gt;
     &amp;lt;policyEntry queue=&quot;&amp;gt;&quot; producerFlowControl=&quot;true&quot; memoryLimit=&quot;1mb&quot;/&amp;gt;&lt;br/&gt;
   &amp;lt;/policyEntries&amp;gt;&lt;br/&gt;
 &amp;lt;/policyMap&amp;gt;&lt;br/&gt;
&amp;lt;/destinationPolicy&amp;gt;&lt;/p&gt;

&lt;p&gt;The current default config was resulting in really high latencies in non persistent pub sub tests (&amp;gt; 2 minutes!). With the new settings throughput doubled and average latency dropped to 3 seconds. &lt;/p&gt;

&lt;p&gt;However, it seems like there is some resistance to enabling flow control by default: &lt;a href=&quot;http://issues.apache.org/activemq/browse/AMQ-2318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://issues.apache.org/activemq/browse/AMQ-2318&lt;/a&gt;, as na&#239;ve users might erroneously interpret this as a hang. &lt;/p&gt;

&lt;p&gt;A possible compromise appropriate for the 5.3.0 release time frame would be to log a warning the first time flow control is triggered for a destination, to assist naive users in troubleshooting producer pauses. &lt;/p&gt;

&lt;p&gt;More long term, it might be worth introucing a more sophisticated mechanism for when we page to disk like only do so when there are no consumers connected. A policy similar to this is already being pursued in the amq 6.0 prototype.  &lt;/p&gt;</description>
                <environment>&lt;p&gt;N/A&lt;/p&gt;</environment>
        <key id="12483076">AMQ-2400</key>
            <summary>Default settings lead to paging and high latency for non persistent pub/sub</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="cmacnaug">Colin MacNaughton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Sep 2009 19:53:33 +0000</created>
                <updated>Mon, 28 Sep 2009 13:14:47 +0000</updated>
                            <resolved>Mon, 28 Sep 2009 13:14:47 +0000</resolved>
                                    <version>5.3.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12941709" author="dejanb" created="Mon, 28 Sep 2009 13:14:47 +0000"  >&lt;p&gt;Now that we have producer flow control works nicely and log messages when the &quot;hang&quot; occurs, I included this change in the default config.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14ci7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233489</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>