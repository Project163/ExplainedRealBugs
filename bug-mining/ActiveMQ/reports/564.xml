<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:39:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2085] AMQ should not install a JMXConnectorServer for an MBeanServer it does not create</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2085</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;ManagementContext tends to create a JMXConnectorServer whenever findMBeanServer is called.  This seems like really wrong behavior &amp;#8211; amq should not be setting up jmx remoting on mbean servers it hasn&apos;t created, certainly not as a side effect of something like creating a vm transport connection:&lt;/p&gt;

&lt;p&gt;	  createConnector():365, ManagementContext.java&lt;br/&gt;
	  findMBeanServer():293, ManagementContext.java&lt;br/&gt;
	  getMBeanServer():148, ManagementContext.java&lt;br/&gt;
	  start():77, ManagementContext.java&lt;br/&gt;
	  start():458, BrokerService.java&lt;br/&gt;
	  doCompositeConnect():123, VMTransportFactory.java&lt;br/&gt;
	  doConnect():53, VMTransportFactory.java&lt;br/&gt;
	  doConnect():51, TransportFactory.java&lt;br/&gt;
	  connect():80, TransportFactory.java&lt;br/&gt;
	  createTransport():239, ActiveMQConnectionFactory.java&lt;br/&gt;
	  createActiveMQConnection():254, ActiveMQConnectionFactory.java&lt;br/&gt;
	  createConnection():181, ActiveMQConnectionFactory.java&lt;br/&gt;
	  makeConnection():79, ActiveMQConnectionSupport.java&lt;br/&gt;
	  makeConnection():61, ActiveMQConnectionSupport.java&lt;br/&gt;
	  createManagedConnection():169, ActiveMQManagedConnectionFactory.java&lt;/p&gt;</description>
                <environment></environment>
        <key id="12483302">AMQ-2085</key>
            <summary>AMQ should not install a JMXConnectorServer for an MBeanServer it does not create</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="djencks">David Jencks</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Jan 2009 00:54:48 +0000</created>
                <updated>Mon, 27 Feb 2012 21:08:28 +0000</updated>
                            <resolved>Mon, 27 Feb 2012 21:08:28 +0000</resolved>
                                    <version>5.3.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12940703" author="djencks" created="Tue, 27 Jan 2009 01:08:43 +0000"  >&lt;p&gt;Fixed rev 737951.... please note any problems this might cause.&lt;/p&gt;</comment>
                            <comment id="12940807" author="dejanb" created="Thu, 19 Feb 2009 12:15:26 +0000"  >&lt;p&gt;Enabled finding Tiger MBean server by default (and creating a connector for it), since it was breaking the standalone broker functionality. I think it should be fine now, since it will not create a connector for any other server. The change is committed in revision 745833. Please let me know if this still works for you.&lt;/p&gt;</comment>
                            <comment id="12942548" author="phil.pickett@springsource.com" created="Tue, 27 Apr 2010 23:18:06 +0000"  >&lt;p&gt;I&apos;m seeing some different behavior between a webapp with an embedded broker deployed to JBoss and am suspicious that what I see may be related to these changes.  With ActiveMQ 5.3 and the web demo chat application, I don&apos;t see the org.apache.activemq MBeans in the JBoss jmx-console but with the ActiveMQ 5.2 version I do.&lt;/p&gt;

&lt;p&gt;I&apos;m bundling up the ActiveMQ demo webapps as two war files, demo52.war and demo53.war.  At first I used the 5.2 jars for the 5.2 webapp and the 5.3 jars for the 5.3 webapp.  To only vary one thing, I changed this so that each bundles the ActiveMQ 5.3 activemq-web-5.3.0.jar, camel-core-2.0.0.jar, and jetty-util-6.1.9.jar.  The difference is that demo5.2 bundles activemq-core-5.2.0.jar and demo53.war bundles activemq-core-5.3.0.jar.&lt;/p&gt;

&lt;p&gt;When I deploy demo52.war to JBoss, open a browser to the app at URI &lt;a href=&quot;http://localhost:8280/demo52/chat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/demo52/chat.html&lt;/a&gt;, and enter a username, I see the messages in the JBoss log:&lt;/p&gt;

&lt;p&gt;11:07:34,485 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;TomcatDeployer&amp;#93;&lt;/span&gt; deploy, ctxPath=/demo52, warUrl=.../tmp/deploy/tmp8966298452211694373demo52-exp.war/&lt;br/&gt;
11:07:56,779 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; Using Persistence Adapter: AMQPersistenceAdapter(activemq-data\localhost)&lt;br/&gt;
11:07:56,781 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AMQPersistenceAdapter&amp;#93;&lt;/span&gt; AMQStore starting using directory: activemq-data\localhost&lt;br/&gt;
11:07:56,820 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;KahaStore&amp;#93;&lt;/span&gt; Kaha Store using data directory activemq-data\localhost\kr-store\state&lt;br/&gt;
11:07:56,891 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AMQPersistenceAdapter&amp;#93;&lt;/span&gt; Active data files: []&lt;br/&gt;
11:07:56,980 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; ActiveMQ 5.2.0 JMS Message Broker (localhost) is starting&lt;br/&gt;
11:07:56,981 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; For help or more information please see: &lt;a href=&quot;http://activemq.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/&lt;/a&gt;&lt;br/&gt;
11:07:56,988 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;ManagementContext&amp;#93;&lt;/span&gt; JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi&lt;br/&gt;
11:07:57,185 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;KahaStore&amp;#93;&lt;/span&gt; Kaha Store using data directory activemq-data\localhost\kr-store\data&lt;br/&gt;
11:07:57,293 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; ActiveMQ JMS Message Broker (localhost, ID:ppickett-PC-64367-1272388077023-0:0) started&lt;br/&gt;
11:07:57,304 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;TransportConnector&amp;#93;&lt;/span&gt; Connector vm://localhost Started&lt;/p&gt;

&lt;p&gt;and also see the org.apache.activemq MBeans on the JBoss jmx-console at &lt;a href=&quot;http://localhost:8280/jmx-console/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/jmx-console/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When I undeploy the demo52.war and deploy demo53.war, open a browser to &lt;a href=&quot;http://localhost:8280/demo53/chat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8280/demo53/chat.html&lt;/a&gt;, and enter a username, I see similar messages in the JBoss log:&lt;/p&gt;

&lt;p&gt;11:11:18,962 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;TomcatDeployer&amp;#93;&lt;/span&gt; deploy, ctxPath=/demo53, warUrl=.../tmp/deploy/tmp8938444770518177909demo53-exp.war/&lt;br/&gt;
11:11:35,950 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; Using Persistence Adapter: AMQPersistenceAdapter(activemq-data\localhost)&lt;br/&gt;
11:11:35,952 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AMQPersistenceAdapter&amp;#93;&lt;/span&gt; AMQStore starting using directory: activemq-data\localhost&lt;br/&gt;
11:11:35,989 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;KahaStore&amp;#93;&lt;/span&gt; Kaha Store using data directory activemq-data\localhost\kr-store\state&lt;br/&gt;
11:11:36,060 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AMQPersistenceAdapter&amp;#93;&lt;/span&gt; Active data files: []&lt;br/&gt;
11:11:36,125 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; ActiveMQ 5.3.0 JMS Message Broker (localhost) is starting&lt;br/&gt;
11:11:36,125 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; For help or more information please see: &lt;a href=&quot;http://activemq.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/&lt;/a&gt;&lt;br/&gt;
11:11:36,333 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;KahaStore&amp;#93;&lt;/span&gt; Kaha Store using data directory activemq-data\localhost\kr-store\data&lt;br/&gt;
11:11:36,485 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;ManagementContext&amp;#93;&lt;/span&gt; JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi&lt;br/&gt;
11:11:36,490 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService&amp;#93;&lt;/span&gt; ActiveMQ JMS Message Broker (localhost, ID:ppickett-PC-64379-1272388296166-0:0) started&lt;br/&gt;
11:11:36,501 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;TransportConnector&amp;#93;&lt;/span&gt; Connector vm://localhost Started&lt;/p&gt;

&lt;p&gt;but with the demo53.war, no org.apache.activemq MBeans are shown on the JBoss jmx-console.&lt;/p&gt;

&lt;p&gt;Any ideas on this?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Phil&lt;/p&gt;</comment>
                            <comment id="12942553" author="phil.pickett@springsource.com" created="Wed, 28 Apr 2010 23:56:00 +0000"  >&lt;p&gt;I&apos;m not sure if there is a workaround, but this change appears to have caused the issue with org.apache.activemq MBeans no longer appearing in the JBoss jmx-console for an app with an embedded broker.  I created a simple jar containing the ManagementContext.class with the changes associated with this Jira.  With the AMQ 5.2 core jar in the webapp, the MBeans appear in the jmx-console.  When the modified version of this class is included in the app, the MBeans no longer appear.&lt;/p&gt;</comment>
                            <comment id="13217561" author="tabish121" created="Mon, 27 Feb 2012 21:08:28 +0000"  >&lt;p&gt;The workaround for the JBoss issue is to set findTigerMBeanServer to false.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14cbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>