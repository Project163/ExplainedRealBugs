<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:47:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2904] failover: protocol doesn&apos;t work within a static:() URI in a networkConnector</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2904</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Am configuring a networkConnector, and want it to do failover against two brokers. Xml config snippit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;networkConnectors&amp;gt;
            &amp;lt;networkConnector  uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;:(failover:(tcp:&lt;span class=&quot;code-comment&quot;&gt;//${activemq01.master.networkconnector.ip}:${activemq01.master.openwire.port},tcp://${activemq01.slave.networkconnector.ip}:${activemq01.slave.openwire.port})?randomize=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)&quot;&lt;/span&gt;
&lt;/span&gt;                duplex=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
                networkTTL=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/networkConnectors&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Problem is, the failoer doesn&apos;t work &lt;/p&gt;

&lt;p&gt;When activemq02 connects to activemq01, we see the following on activemq01:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INFO | Connector openwire Started
 INFO | ActiveMQ JMS Message Broker (activemq01, ID:Ade&apos;s-52856-1283520722984-0:0) started
 INFO | Connector vm:&lt;span class=&quot;code-comment&quot;&gt;//activemq01 Started
&lt;/span&gt; INFO | Created Duplex Bridge back to activemq02
 INFO | Network connection between vm:&lt;span class=&quot;code-comment&quot;&gt;//activemq01#0 and tcp:///127.0.0.1:52864(activemq02) has been established.&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;All good! If I take activemq01 down, then on reconnect, we don&apos;t see the duplex bridge get created. This is the output from activemq01.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO | Recovery replayed 1 operations from the journal in 0.036 seconds.
 INFO | ActiveMQ 5.4.0-fuse-00-00 JMS Message Broker (activemq01) is starting
 INFO | For help or more information please see: http:&lt;span class=&quot;code-comment&quot;&gt;//activemq.apache.org/
&lt;/span&gt; INFO | Scheduler using directory: activemq-data/scheduler
 INFO | Listening &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; connections at: tcp:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:61626
&lt;/span&gt; INFO | Connector openwire Started
 INFO | ActiveMQ JMS Message Broker (activemq01, ID:Ade&apos;s-52922-1283520881264-0:0) started&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note that there&apos;s no mention of a Duplex bridge. The output from the activemq02 broker says:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Transport (/127.0.0.1:61616) failed to tcp:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:61616 , attempting to automatically reconnect due to: java.io.EOFException
&lt;/span&gt; INFO | Outbound transport to activemq01 interrupted.
 INFO | Network connection between vm:&lt;span class=&quot;code-comment&quot;&gt;//activemq02#0 and tcp://127.0.0.1:61626(activemq01) has been established.
&lt;/span&gt; INFO | Outbound transport to activemq01 resumed
 INFO | Successfully reconnected to tcp:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:61626
&lt;/span&gt; WARN | Unexpected extra broker info command received: BrokerInfo {commandId = 19, responseRequired = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, brokerId = ID:Ade&apos;s-52922-1283520881264-0:0, brokerURL = tcp:&lt;span class=&quot;code-comment&quot;&gt;//0.0.0.0:61626, slaveBroker = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, masterBroker = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, faultTolerantConfiguration = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, networkConnection = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, duplexConnection = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, peerBrokerInfos = [], brokerName = activemq01, connectionId = 0, brokerUploadUrl = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, networkProperties = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12483501">AMQ-2904</key>
            <summary>failover: protocol doesn&apos;t work within a static:() URI in a networkConnector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2010 14:12:33 +0000</created>
                <updated>Tue, 7 Sep 2010 14:43:19 +0000</updated>
                            <resolved>Tue, 7 Sep 2010 14:43:19 +0000</resolved>
                                    <version>5.4.0</version>
                                    <fixVersion>5.4.1</fixVersion>
                                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                                                            <comments>
                            <comment id="12942878" author="gtully" created="Tue, 7 Sep 2010 14:21:28 +0000"  >&lt;p&gt;Issue is related to interruption processing in the failover transport for an activemq client connection with active consumers. A network connector, just listening for consumer advisories does not need this feature. The interruption processing and replay of consumers in pull mode pending interruption processing completion should be limited to JMS consumer connections.&lt;/p&gt;</comment>
                            <comment id="12942829" author="gtully" created="Tue, 7 Sep 2010 14:42:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-2579&quot; title=&quot;Failover connection recovery needs a new command to indicate recovery completion that can gate dispatch on a recovered consumer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-2579&quot;&gt;&lt;del&gt;AMQ-2579&lt;/del&gt;&lt;/a&gt; introduced the new failover transport behavior that causes this issue. It should have been confined to activemq jms client consumer connections&lt;/p&gt;</comment>
                            <comment id="12942877" author="gtully" created="Tue, 7 Sep 2010 14:43:19 +0000"  >&lt;p&gt;resolve in r993382&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12483497">AMQ-2579</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ba87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63769</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>