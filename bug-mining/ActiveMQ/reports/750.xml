<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:43:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2314] tmp_storage is not clean up once a slow subscriber is disconnected.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2314</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;With a producer sending messages to a topic with a slow subscriber, and messages accumulating under the tmp_storage, if the consumer is disconnected messages pushed to tmp_storage are not cleaned up by the broker.&lt;/p&gt;

&lt;p&gt;I have a test case for this issue which I&apos;ll clean up and attach here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482905">AMQ-2314</key>
            <summary>tmp_storage is not clean up once a slow subscriber is disconnected.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gseben">Giovani Seben</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2009 20:29:22 +0000</created>
                <updated>Thu, 12 Nov 2009 11:31:09 +0000</updated>
                            <resolved>Fri, 23 Oct 2009 09:40:44 +0000</resolved>
                                    <version>5.2.0</version>
                    <version>5.3.0</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12941533" author="gtully" created="Fri, 16 Oct 2009 16:14:25 +0000"  >&lt;p&gt;just a hunch, but it looks like the order of super.clear() in org.apache.activemq.kaha.impl.container.ListContainerImpl.clear() could be the problem here. A test case would help of course. Think the super.clear whacks the index and the local doClear has nothing to do.&lt;/p&gt;</comment>
                            <comment id="12941760" author="gtully" created="Mon, 19 Oct 2009 15:48:00 +0000"  >&lt;p&gt;Giovani, do you have a test case or xml configuration that you use to reproduce this?&lt;/p&gt;</comment>
                            <comment id="12941756" author="gtully" created="Fri, 23 Oct 2009 09:40:44 +0000"  >&lt;p&gt;pending messages are now removed when a sub is removed allowing the temp store to be reclaimed. Issue with memory usage management for pending messages spooled to disk list and retrieved is also resolved. &lt;/p&gt;</comment>
                            <comment id="12941749" author="gtully" created="Fri, 23 Oct 2009 09:44:21 +0000"  >&lt;p&gt;last thought, validate that the test case I used meets your requirements, see activemq-core/src/test/java/org/apache/activemq/bugs/AMQ2314Test.java &lt;br/&gt;
The test verify the temp store usage increased and decreased as expected. Note, some temp store usage increase is expected, till an in use file is no longer referenced (the current write file cannot be removed), but long term use will be steady.&lt;/p&gt;</comment>
                            <comment id="12941768" author="jamesc" created="Fri, 23 Oct 2009 11:12:30 +0000"  >&lt;p&gt;Gary,&lt;/p&gt;

&lt;p&gt;I looked at the logic in the test case and it makes sense for the problem we saw.&lt;/p&gt;

&lt;p&gt;I&apos;ll try a snapshot build on monday and check the fix is ok.&lt;/p&gt;

&lt;p&gt;cheers,&lt;/p&gt;

&lt;p&gt;James&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rqrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>