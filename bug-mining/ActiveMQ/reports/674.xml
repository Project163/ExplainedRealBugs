<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:42:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1473] javax.jms.JMSException: Wire format negociation timeout: peer did not send his wire format.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1473</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Periodically my JMS Client crashes and then can&apos;t start back up. I get the following exception:&lt;/p&gt;

&lt;p&gt;javax.jms.JMSException: Wire format negociation timeout: peer did not send his wire format.&lt;br/&gt;
	at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:58)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1185)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1263)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.start(ActiveMQConnection.java:449)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482555">AMQ-1473</key>
            <summary>javax.jms.JMSException: Wire format negociation timeout: peer did not send his wire format.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="sparky2708">Denis Abramov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Oct 2007 19:47:53 +0000</created>
                <updated>Tue, 11 Aug 2009 14:54:47 +0000</updated>
                            <resolved>Tue, 11 Aug 2009 14:54:47 +0000</resolved>
                                                    <fixVersion>5.3.0</fixVersion>
                                    <component>JMS client</component>
                        <due></due>
                            <votes>12</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="12939253" author="leonardo.pinho" created="Thu, 22 Nov 2007 18:59:31 +0000"  >&lt;p&gt;I&apos;m getting the same error using Hermes JMS 1.10/1.12/1.13...  that uses activemq jms client:&lt;/p&gt;

&lt;p&gt;This is the stackTrace:&lt;/p&gt;

&lt;p&gt;javax.jms.JMSException: Wire format negociation timeout: peer did not send his wire format.&lt;br/&gt;
	at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:57)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1140)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1218)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.setClientID(ActiveMQConnection.java:359)&lt;br/&gt;
	at hermes.impl.jms.ConnectionManagerSupport.createConnection(ConnectionManagerSupport.java:169)&lt;br/&gt;
	at hermes.impl.jms.ConnectionSharedManager.connect(ConnectionSharedManager.java:79)&lt;br/&gt;
	at hermes.impl.jms.ConnectionSharedManager.getConnection(ConnectionSharedManager.java:92)&lt;br/&gt;
	at hermes.impl.jms.ConnectionSharedManager.getObject(ConnectionSharedManager.java:130)&lt;br/&gt;
	at hermes.impl.jms.ThreadLocalSessionManager.connect(ThreadLocalSessionManager.java:176)&lt;br/&gt;
	at hermes.impl.jms.ThreadLocalSessionManager.getSession(ThreadLocalSessionManager.java:556)&lt;br/&gt;
	at hermes.impl.jms.AbstractSessionManager.getDestination(AbstractSessionManager.java:465)&lt;br/&gt;
	at hermes.impl.DefaultHermesImpl.getDestination(DefaultHermesImpl.java:354)&lt;br/&gt;
	at hermes.browser.tasks.BrowseDestinationTask.invoke(BrowseDestinationTask.java:140)&lt;br/&gt;
	at hermes.browser.tasks.TaskSupport.run(TaskSupport.java:175)&lt;br/&gt;
	at hermes.browser.tasks.ThreadPool.run(ThreadPool.java:170)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
Caused by: java.io.IOException: Wire format negociation timeout: peer did not send his wire format.&lt;br/&gt;
	at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:76)&lt;br/&gt;
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:44)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:66)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:71)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1130)&lt;br/&gt;
	... 14 more&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Leonardo&lt;/p&gt;</comment>
                            <comment id="12940524" author="richa.khurana" created="Wed, 3 Dec 2008 09:38:16 +0000"  >&lt;p&gt;I receive the same exception on my JMS client.&lt;/p&gt;</comment>
                            <comment id="12940652" author="gnuphie" created="Wed, 14 Jan 2009 16:33:15 +0000"  >&lt;p&gt;I have also been running into this same issue. My setup using JMSAppender for Log4j, ActiveMQ 5.1, 5.2, and a beta 5.3 version all work fine from most of my webapps, but my Appfuse 2.0.2 spring based application seems to have this problem using exactly the same activemq and log4j versions and jar files.&lt;/p&gt;</comment>
                            <comment id="12941278" author="gabrielkalil" created="Wed, 13 May 2009 14:50:16 +0000"  >&lt;p&gt;Restarting the server seems to &quot;fix&quot; the problem. It just happened with me today, my client application suddenly stopped working reporting this exception when creating a session.&lt;/p&gt;

&lt;p&gt;This seems to be a server related problem, maybe both client and server.&lt;/p&gt;

&lt;p&gt;Gabriel&lt;/p&gt;</comment>
                            <comment id="12941305" author="gtully" created="Thu, 14 May 2009 08:57:27 +0000"  >&lt;p&gt;It would be help full to see a thread dump from the server when this occurs.&lt;br/&gt;
A typical instance where this occurs is when the client connects to a port that is not an activemq tcp transport endpoint. The client can connect, but it cannot complete its handshake and times out. &lt;br/&gt;
An alternative is where the server is overloaded and the accept thread cannot start due to lack of resources or is really slow to start. In this case, extending the handshake/wireformat timeout [option|http://activemq.apache.org/tcp-transport-reference.html| should help but it may be best to use a network of brokers to partition the load.&lt;br/&gt;
In any event, a server side thread dump should help diagnose.&lt;/p&gt;</comment>
                            <comment id="12941410" author="callain_conceptum" created="Fri, 29 May 2009 14:39:47 +0000"  >&lt;p&gt;I had a similar error on the client side:&lt;/p&gt;

&lt;p&gt;I am using AMQ v5.2.0:&lt;/p&gt;

&lt;p&gt;INFO  DefaultCamelContext            - JMX enabled. Using InstrumentationLifecycleStrategy.&lt;br/&gt;
INFO  BrokerService                  - Using Persistence Adapter: AMQPersistenceAdapter(C:\opt\apache-activemq-5.2.0\bin\..\data)&lt;br/&gt;
INFO  AMQPersistenceAdapter          - AMQStore starting using directory: C:\opt\apache-activemq-5.2.0\bin\..\data&lt;br/&gt;
INFO  KahaStore                      - Kaha Store using data directory C:\opt\apache-activemq-5.2.0\bin\..\data\kr-store\state&lt;br/&gt;
INFO  AMQPersistenceAdapter          - Active data files: []&lt;br/&gt;
INFO  BrokerService                  - ActiveMQ 5.2.0 JMS Message Broker (localhost) is starting&lt;br/&gt;
INFO  BrokerService                  - For help or more information please see: &lt;a href=&quot;http://activemq.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/&lt;/a&gt;&lt;br/&gt;
INFO  KahaStore                      - Kaha Store using data directory C:\opt\apache-activemq-5.2.0\bin\..\data\kr-store\data&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: tcp://GFI1LF069:61616&lt;br/&gt;
INFO  TransportConnector             - Connector openwire Started&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: ssl://GFI1LF069:61617&lt;br/&gt;
INFO  TransportConnector             - Connector ssl Started&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: stomp://GFI1LF069:61613&lt;br/&gt;
INFO  TransportConnector             - Connector stomp Started&lt;br/&gt;
INFO  TransportServerThreadSupport   - Listening for connections at: xmpp://GFI1LF069:61222&lt;br/&gt;
INFO  TransportConnector             - Connector xmpp Started&lt;br/&gt;
INFO  DiscoveryNetworkConnector      - Establishing network connection between from vm://localhost to tcp://localhost:61616&lt;br/&gt;
INFO  TransportConnector             - Connector vm://localhost Started&lt;br/&gt;
INFO  NetworkConnector               - Network Connector localhost Started&lt;br/&gt;
INFO  BrokerService                  - ActiveMQ JMS Message Broker (localhost, ID:GFI1LF069-4390-1243607315175-0:0) started&lt;br/&gt;
INFO  DemandForwardingBridge         - Disconnecting loop back connection.&lt;br/&gt;
INFO  TransportConnector             - Connector vm://localhost Stopped&lt;br/&gt;
INFO  DemandForwardingBridge         - localhost bridge to localhost stopped&lt;br/&gt;
INFO  log                            - Logging to org.slf4j.impl.JCLLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog&lt;br/&gt;
INFO  log                            - jetty-6.1.9&lt;br/&gt;
INFO  WebConsoleStarter              - ActiveMQ WebConsole initialized.&lt;br/&gt;
INFO  /admin                         - Initializing Spring FrameworkServlet &apos;dispatcher&apos;&lt;br/&gt;
INFO  log                            - ActiveMQ Console at &lt;a href=&quot;http://0.0.0.0:8161/admin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/admin&lt;/a&gt;&lt;br/&gt;
INFO  log                            - ActiveMQ Web Demos at &lt;a href=&quot;http://0.0.0.0:8161/demo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/demo&lt;/a&gt;&lt;br/&gt;
INFO  log                            - RESTful file access application at &lt;a href=&quot;http://0.0.0.0:8161/fileserver&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8161/fileserver&lt;/a&gt;&lt;br/&gt;
INFO  log                            - Started SelectChannelConnector@0.0.0.0:8161&lt;br/&gt;
INFO  TransportConnector             - Connector vm://localhost Started&lt;/p&gt;

&lt;p&gt;All I have is the stack trace on the client:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
Caused by: java.io.IOException: Wire format negotiation timeout: peer did not send his wire format.&lt;br/&gt;
	at org&lt;br/&gt;
2009-05-29 10:03:00,281 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STDERR&amp;#93;&lt;/span&gt; .apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:94)&lt;br/&gt;
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:74)&lt;br/&gt;
	at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:79)&lt;br/&gt;
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1233)&lt;br/&gt;
	... 69 more&lt;/p&gt;

&lt;p&gt;I confirm that restarting the server fixes it (for some time I guess).&lt;/p&gt;
</comment>
                            <comment id="12941038" author="gabrielkalil" created="Fri, 7 Aug 2009 13:19:54 +0000"  >&lt;p&gt;Hi guys.&lt;/p&gt;

&lt;p&gt;We found out that the problem occurred when the server was using a &quot;remote syslog&quot; adapter (log4j). When (for some reason) the adapter fails the server presents this behavior. &lt;/p&gt;

&lt;p&gt;It looks like some kind of exception not correctly handled or something.&lt;/p&gt;

&lt;p&gt;Gabriel&lt;/p&gt;</comment>
                            <comment id="12941178" author="dejanb" created="Tue, 11 Aug 2009 14:54:47 +0000"  >&lt;p&gt;I put up a FAQ entry that covers this topic, causes and workarounds &lt;a href=&quot;http://activemq.apache.org/javaxjmsjmsexception-wire-format-negociation-timeout-peer-did-not-send-his-wire-format.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/javaxjmsjmsexception-wire-format-negociation-timeout-peer-did-not-send-his-wire-format.html&lt;/a&gt; so I&apos;ll resolve this issue for now. Also take a look at this entry &lt;a href=&quot;http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html&lt;/a&gt; is you&apos;re using log4j jms appender&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17lbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>