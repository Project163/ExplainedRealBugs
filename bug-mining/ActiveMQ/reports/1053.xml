<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:48:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2837] Slow KahaDB</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2837</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I&apos;m using KahaDB for persistence with the following configuration:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;beans&amp;gt;&lt;br/&gt;
  &amp;lt;broker brokerName=&quot;test-broker&quot;&lt;br/&gt;
	  persistent=&quot;true&quot;&lt;br/&gt;
	  useJmx=&quot;true&quot; &lt;br/&gt;
	  useShutdownHook=&quot;false&quot;&lt;br/&gt;
	  deleteAllMessagesOnStartup=&quot;false&quot;&lt;br/&gt;
	  xmlns=&quot;http://activemq.apache.org/schema/core&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;persistenceAdapter&amp;gt;&lt;br/&gt;
      &amp;lt;kahaDB directory=&quot;activemq-data&quot; journalMaxFileLength=&quot;32mb&quot; indexCacheSize=&quot;10000000&lt;br/&gt;
&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/persistenceAdapter&amp;gt;&lt;br/&gt;
    &amp;lt;transportConnectors&amp;gt;&lt;br/&gt;
      &amp;lt;transportConnector uri=&quot;tcp://localhost:61616&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/transportConnectors&amp;gt;&lt;br/&gt;
    &amp;lt;destinationPolicy&amp;gt;&lt;br/&gt;
      &amp;lt;policyMap&amp;gt;&lt;br/&gt;
	&amp;lt;policyEntries&amp;gt;&lt;br/&gt;
	  &amp;lt;policyEntry topic=&quot;&amp;gt;&quot;&amp;gt;&lt;br/&gt;
	    &amp;lt;subscriptionRecoveryPolicy&amp;gt;&lt;br/&gt;
	      &amp;lt;timedSubscriptionRecoveryPolicy recoverDuration=&quot;3600000&quot;/&amp;gt;&lt;br/&gt;
	    &amp;lt;/subscriptionRecoveryPolicy&amp;gt;&lt;br/&gt;
	  &amp;lt;/policyEntry&amp;gt;&lt;br/&gt;
	&amp;lt;/policyEntries&amp;gt;&lt;br/&gt;
      &amp;lt;/policyMap&amp;gt;&lt;br/&gt;
    &amp;lt;/destinationPolicy&amp;gt;&lt;br/&gt;
&amp;lt;/broker&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve some durable consumers. The broker is showing many &quot;Slow KahaDB access&quot; log entries. &lt;br/&gt;
Any suggestions?&lt;/p&gt;


&lt;p&gt; INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1248 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1560 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 1 ms, Index update took 1227 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1227 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 1480 ms, Index update took 0 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 5 ms, Index update took 1302 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1302 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 13 ms, Index update took 1348 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1590 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 1327 ms, Index update took 0 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1263 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 1 ms, Index update took 1276 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1277 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1318 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1312 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1593 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 3 ms, Index update took 1608 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1302 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 3 ms, Index update took 1317 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1318 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 2 ms, Index update took 1316 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 1318 ms, Index update took 1 ms&lt;br/&gt;
 INFO | Slow KahaDB access: Journal append took: 0 ms, Index update took 1296 ms&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12483470">AMQ-2837</key>
            <summary>Slow KahaDB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="afeng">Andy Feng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jul 2010 19:51:26 +0000</created>
                <updated>Mon, 11 Oct 2010 19:28:01 +0000</updated>
                            <resolved>Tue, 20 Jul 2010 00:14:42 +0000</resolved>
                                    <version>5.3.2</version>
                                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12942419" author="srodrigu85@gmail.com" created="Mon, 19 Jul 2010 20:13:24 +0000"  >&lt;p&gt;This is actually not an issue.&lt;br/&gt;
Check &lt;br/&gt;
&lt;a href=&quot;http://activemq.apache.org/kahadb.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/kahadb.html&lt;/a&gt; (see the bottom: Slow KahaDB access log messages)&lt;br/&gt;
You can tune the value with your hard drive speed.&lt;/p&gt;</comment>
                            <comment id="12943041" author="gtully" created="Wed, 21 Jul 2010 08:48:18 +0000"  >&lt;p&gt;There is a utility in the distribution that can help you determine relative disk speed as experienced by the journal writer thread:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -classpath lib/kahadb-&amp;lt;version&amp;gt;.jar org.apache.kahadb.util.DiskBenchmark&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As to the value of the log threshold, the calculation is a simple time difference before and after the journal and index update, there is no complicated formula and it really is there as a development aid. So pick a large value if you have a slow disk and don&apos;t want to see the log entry. Otherwise you will be regularly reminded of the fact.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b9y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>