<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:46:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2765] After failover, messages will not be delivered to MessageEndpoint</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2765</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;After a failover from one broker to another, message delivery to MessageEndpoints stops. &lt;/p&gt;

&lt;p&gt;Standalone messaging clients seem to work fine, but RA delivery does. I see this behavior in Geronimo and have built a JUnit test which seems to show the problem, also.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482973">AMQ-2765</key>
            <summary>After failover, messages will not be delivered to MessageEndpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="kevan">Kevan Lee Miller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jun 2010 22:22:44 +0000</created>
                <updated>Wed, 16 Jun 2010 14:54:07 +0000</updated>
                            <resolved>Tue, 15 Jun 2010 17:21:15 +0000</resolved>
                                    <version>5.3.2</version>
                    <version>5.4.0</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                                                            <comments>
                            <comment id="12942710" author="kevan" created="Fri, 4 Jun 2010 22:29:23 +0000"  >&lt;p&gt;This test will create two brokers in a shared filesystem/Master-Slave configuration. A connection is established to the master broker. The master broker is then stopped. The client reconnects to the slave. However, no messages will be delivered to the MessageEndpoint.&lt;/p&gt;</comment>
                            <comment id="12942707" author="bsnyder" created="Fri, 4 Jun 2010 22:35:22 +0000"  >&lt;p&gt;This issue looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-2743&quot; title=&quot;Pure master/slave configuration will not failover to slave when master fails &quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-2743&quot;&gt;&lt;del&gt;AMQ-2743&lt;/del&gt;&lt;/a&gt; that is filed against 5.3.1 that did not exist in 5.3.0. &lt;/p&gt;</comment>
                            <comment id="12942701" author="kevan" created="Sun, 6 Jun 2010 16:50:58 +0000"  >&lt;p&gt;Interesting. Thanks Bruce.&lt;/p&gt;

&lt;p&gt;By the way, you need to clear out the message log (e.g. &apos;rm -rf activemq-data/&apos;), if you&apos;re running this test multiple times. Otherwise, an undelivered message in the message log is delivered to the client (prior to the failover). Is there a programatic way to clear the log during Junit setup?&lt;/p&gt;</comment>
                            <comment id="12942706" author="kevan" created="Mon, 7 Jun 2010 13:42:10 +0000"  >&lt;p&gt;I ran my test on 5.3.0 and 5.3.1. I see the same behavior that Bruce describes. Works on 5.3.0. Does not work on 5.3.1.&lt;/p&gt;</comment>
                            <comment id="12942625" author="gtully" created="Tue, 15 Jun 2010 17:21:15 +0000"  >&lt;p&gt;resolved in r954972&lt;br/&gt;
same issue as &lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-2772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-2772&lt;/a&gt; just that the fix needed a rework such that connectionConsumers can have their prefetch reinstated.&lt;/p&gt;

&lt;p&gt;There may be a need to do some interruption processing on the RA connection consumers, in the same way that a regular consumer needs to deal with the duplicate checker. We can cross that bridge when we come to it. For the moment, the connectionConsumers just allow immediate redelivery without doing any additional work&lt;/p&gt;</comment>
                            <comment id="12942624" author="gtully" created="Tue, 15 Jun 2010 17:24:00 +0000"  >&lt;p&gt;btw, thanks for the good test.&lt;/p&gt;</comment>
                            <comment id="12942232" author="kevan" created="Wed, 16 Jun 2010 14:54:07 +0000"  >&lt;p&gt;Works great. Thanks Gary!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461729" name="AMQ-2765.patch" size="10449" author="kevan" created="Fri, 4 Jun 2010 22:29:22 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12483744">AMQ-2743</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rr6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>