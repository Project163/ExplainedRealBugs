<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:39:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6521] compatibility issue with jetty 9.3.11 in org.apache.activemq.transport.http.HttpTransportServer</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6521</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;There is a instantiation of a class that does not exists, see org.apache.activemq.transport.http.HttpTransportServer.java:&lt;/p&gt;

&lt;p&gt; private void addGzipHandler(ServletContextHandler contextHandler) throws Exception &lt;/p&gt;
{
        Handler handler = new GzipHandler();
        contextHandler.setHandler(handler);
    }

&lt;p&gt;org.eclipse.jetty.servlets.gzip.GzipHandler does not exist. Instead there is a class org.eclipse.jetty.server.handler.gzip.GzipHandler.java&lt;br/&gt;
in &lt;a href=&quot;https://mvnrepository.com/artifact/org.eclipse.jetty/jetty-server/9.3.13.v20161014&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mvnrepository.com/artifact/org.eclipse.jetty/jetty-server/9.3.13.v20161014&lt;/a&gt;&lt;br/&gt;
Because of this activemq is not compatible with jetty versions since 9.0&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023686">AMQ-6521</key>
            <summary>compatibility issue with jetty 9.3.11 in org.apache.activemq.transport.http.HttpTransportServer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="chammer2">Carsten Hammer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Nov 2016 10:09:08 +0000</created>
                <updated>Fri, 9 Dec 2016 15:27:32 +0000</updated>
                            <resolved>Fri, 9 Dec 2016 14:51:25 +0000</resolved>
                                    <version>5.14.1</version>
                                    <fixVersion>5.15.0</fixVersion>
                    <fixVersion>5.14.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15703210" author="tabish121" created="Mon, 28 Nov 2016 21:38:45 +0000"  >&lt;p&gt;ActiveMQ 5.14.1 is built and tested against Jetty v9.2.13.v20150730 so we know it works there, newer versions of jetty may break.&lt;/p&gt;</comment>
                            <comment id="15704510" author="chammer2" created="Tue, 29 Nov 2016 07:30:49 +0000"  >&lt;p&gt;Hi Timothy, thanks for the clarification! I think you are right regarding jetty9.2 and indeed jetty 9.3 does not work as explained. Does this mean that jetty 9.3.x support is currently not on the roadmap? I am on Java 8 and would like to use http2. jetty 9.2 is for java 7 and does not support http2. &lt;br/&gt;
regards,&lt;br/&gt;
Carsten&lt;/p&gt;</comment>
                            <comment id="15705440" author="christopher.l.shannon" created="Tue, 29 Nov 2016 14:33:24 +0000"  >&lt;p&gt;We can target support for Jetty 9.3.x (and maybe Jetty 9.2.x backwards compatibility) with the 5.15.0 release as that is the first release that will require Java 8.  The 5.14.x release branch still supports Java 7 so we can&apos;t upgrade to Jetty 9.3.x in a 5.14.x release.&lt;/p&gt;</comment>
                            <comment id="15705448" author="chammer2" created="Tue, 29 Nov 2016 14:36:04 +0000"  >&lt;p&gt;Thanks, that would be great!&lt;/p&gt;</comment>
                            <comment id="15705588" author="tabish121" created="Tue, 29 Nov 2016 15:23:50 +0000"  >&lt;p&gt;It might still be possible to let this work with jetty 9.3 on 5.14.x but we&apos;ll need test out a few changes to see for sure.&lt;/p&gt;</comment>
                            <comment id="15705787" author="jira-bot" created="Tue, 29 Nov 2016 16:39:00 +0000"  >&lt;p&gt;Commit 80f46a80560b2b2ed9fb418c33df75136bc3dc52 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=80f46a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=80f46a8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Adding support for Jetty 9.3 by re-adding in the logic to dynamically&lt;br/&gt;
load the correct GzipHandler depending on the version&lt;/p&gt;</comment>
                            <comment id="15705789" author="jira-bot" created="Tue, 29 Nov 2016 16:39:31 +0000"  >&lt;p&gt;Commit 4cdd188ef22524391d8801e865a4c9eed8c8eb06 in activemq&apos;s branch refs/heads/activemq-5.14.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4cdd188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4cdd188&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Adding support for Jetty 9.3 by re-adding in the logic to dynamically&lt;br/&gt;
load the correct GzipHandler depending on the version&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 80f46a80560b2b2ed9fb418c33df75136bc3dc52)&lt;/p&gt;</comment>
                            <comment id="15705794" author="christopher.l.shannon" created="Tue, 29 Nov 2016 16:40:49 +0000"  >&lt;p&gt;I was able to make this work for 9.3 by using reflection to search for the correct GzipHandler.  It will go into the 5.14.2 release.&lt;/p&gt;</comment>
                            <comment id="15706229" author="chammer2" created="Tue, 29 Nov 2016 19:07:40 +0000"  >&lt;p&gt;Great, I would like to try it out with the next release but I did not find a planned release date for the 5.14.2 release in jira. Seems the Roadmap Gadget in the Jira Dashboard is not used in ActiveMQ. Do you know when the next release is available?&lt;/p&gt;</comment>
                            <comment id="15706288" author="christopher.l.shannon" created="Tue, 29 Nov 2016 19:28:02 +0000"  >&lt;p&gt;Soon, I plan on doing a release either this week or next week if no blocking issues come up.&lt;/p&gt;</comment>
                            <comment id="15735325" author="chammer2" created="Fri, 9 Dec 2016 13:33:43 +0000"  >&lt;p&gt;Unfortunately the fix is wrong. This issue should be reopened. The code now looks like that:&lt;/p&gt;

&lt;p&gt;private void addGzipHandler(ServletContextHandler contextHandler) throws Exception {&lt;br/&gt;
        Handler handler = null;&lt;br/&gt;
        try &lt;/p&gt;
{
            handler = (Handler) forName(&quot;org.eclipse.jetty.server.handler.GzipHandler&quot;).newInstance();
        }
&lt;p&gt; catch (Throwable t) &lt;/p&gt;
{
            handler = (Handler) forName(&quot;org.eclipse.jetty.servlets.gzip.GzipHandler&quot;).newInstance();
        }
&lt;p&gt;        contextHandler.setHandler(handler);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;But the real class name seems to be (as is written in this issues description)&lt;/p&gt;

&lt;p&gt;org.eclipse.jetty.server.handler.gzip.GzipHandler&lt;/p&gt;

&lt;p&gt;and not one of these&lt;/p&gt;

&lt;p&gt;org.eclipse.jetty.server.handler.GzipHandler&lt;br/&gt;
org.eclipse.jetty.servlets.gzip.GzipHandler&lt;/p&gt;

&lt;p&gt;I guess it is difficult to provide a test for this, right?&lt;/p&gt;</comment>
                            <comment id="15735391" author="chammer2" created="Fri, 9 Dec 2016 13:58:22 +0000"  >&lt;p&gt;I am sorry that I did not find this earlier, but it is very difficult for me to push snapshot versions into my test environment&lt;/p&gt;</comment>
                            <comment id="15735487" author="christopher.l.shannon" created="Fri, 9 Dec 2016 14:45:34 +0000"  >&lt;p&gt;Oops, I thought I had tested this properly but apparently not. Looks like when I reverted the previous commit it had restored the check for Jetty 8.x and Jetty 9.2 but not Jetty 9.3.  I retested this again and there is actually one more change that is needed for this to work with Jetty 9.3.  I will push a new commit with the changes.&lt;/p&gt;

&lt;p&gt;Yes it is difficult to test right now because our broker pulls in only Jetty 9.2.x.  So our tests just run against 9.2.x as that is the main version supported in 5.14.x.  In 5.15.x I am planning to upgrade to 9.3 so that will get all the tests run against it then.  &lt;/p&gt;

&lt;p&gt;To run tests against both 9.2 and 9.3 we&apos;d probably need to create another subproject and override the Jetty dependency to be 9.3 and re-run the Http tests. That is something that could be looked at in 5.15.0 if we decide to provide support for more than one version of Jetty besides just 9.3.0&lt;/p&gt;</comment>
                            <comment id="15735490" author="jira-bot" created="Fri, 9 Dec 2016 14:47:25 +0000"  >&lt;p&gt;Commit 29b4db5c34fbb7087bc6a08f3e393da32b39ce66 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=29b4db5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=29b4db5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing support for Jetty 9.3 and Jetty 9.2.  The previous attempt at a&lt;br/&gt;
fix had the wrong class instance.&lt;/p&gt;</comment>
                            <comment id="15735494" author="jira-bot" created="Fri, 9 Dec 2016 14:48:10 +0000"  >&lt;p&gt;Commit 80b5fdcf2ff48f4ac55cabd86addc0267478573e in activemq&apos;s branch refs/heads/activemq-5.14.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=80b5fdc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=80b5fdc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing support for Jetty 9.3 and Jetty 9.2.  The previous attempt at a&lt;br/&gt;
fix had the wrong class instance.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 29b4db5c34fbb7087bc6a08f3e393da32b39ce66)&lt;/p&gt;</comment>
                            <comment id="15735500" author="christopher.l.shannon" created="Fri, 9 Dec 2016 14:51:26 +0000"  >&lt;p&gt;Ok I think this is fixed for real this time.  I know you said that it is difficult to test against snapshots so if you can&apos;t do that it would be helpful if you could at least verify that the commit looks ok with the correct class this time.&lt;/p&gt;</comment>
                            <comment id="15735595" author="chammer2" created="Fri, 9 Dec 2016 15:27:32 +0000"  >&lt;p&gt;I would say it matches &lt;a href=&quot;http://download.eclipse.org/jetty/9.3.12.v20160915/apidocs/org/eclipse/jetty/server/handler/gzip/GzipHandler.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.eclipse.org/jetty/9.3.12.v20160915/apidocs/org/eclipse/jetty/server/handler/gzip/GzipHandler.html&lt;/a&gt;. I hope I will be able to work on my ci build soon so that it will be easier to test with snapshot version. But I cannot promise that currently..&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36u3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>