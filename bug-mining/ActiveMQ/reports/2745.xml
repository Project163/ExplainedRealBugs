<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:33:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6158] Computing pending message size for a durable subscription is very slow</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6158</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5923&quot; title=&quot;Add Pending Message Size Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5923&quot;&gt;&lt;del&gt;AMQ-5923&lt;/del&gt;&lt;/a&gt; added a new feature to compute the pending message size for a durable subscription.  The problem is that the current algorithm used in KahaDB to iterate over the pending messages for a subscription runs in O(n^2) because it uses the wrong index (location index) to compute the size.&lt;/p&gt;

&lt;p&gt;Now that &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6097&quot; title=&quot;KahaDB message size metrics can be inaccurate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6097&quot;&gt;&lt;del&gt;AMQ-6097&lt;/del&gt;&lt;/a&gt; has been resolved so that the order index contains size information for messages as well, we can rewrite the algorithm to be O&amp;#40;n) which will make this run significantly faster for large pending message sizes (such as 100k messages, etc)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936744">AMQ-6158</key>
            <summary>Computing pending message size for a durable subscription is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 14:35:59 +0000</created>
                <updated>Thu, 4 Feb 2016 15:28:48 +0000</updated>
                            <resolved>Thu, 4 Feb 2016 15:25:37 +0000</resolved>
                                    <version>5.13.0</version>
                                    <fixVersion>5.13.2</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15132431" author="jira-bot" created="Thu, 4 Feb 2016 15:18:04 +0000"  >&lt;p&gt;Commit 25ff5699f1fb7c73668d5da2eacb53ad2ef14289 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=25ff569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=25ff569&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6158&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Computing messageSize for a durable subscription in KahaDB now runs much&lt;br/&gt;
faster (n vs n^2) which is noticable when there are a large number of&lt;br/&gt;
pending messages for a durable subscription.&lt;/p&gt;</comment>
                            <comment id="15132436" author="jira-bot" created="Thu, 4 Feb 2016 15:23:51 +0000"  >&lt;p&gt;Commit 23e9ecaec1ddd6fe8948aed47aca4767fccc1b6e in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=23e9eca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=23e9eca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6158&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Computing messageSize for a durable subscription in KahaDB now runs much&lt;br/&gt;
faster (n vs n^2) which is noticable when there are a large number of&lt;br/&gt;
pending messages for a durable subscription.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 25ff5699f1fb7c73668d5da2eacb53ad2ef14289)&lt;/p&gt;</comment>
                            <comment id="15132438" author="christopher.l.shannon" created="Thu, 4 Feb 2016 15:25:37 +0000"  >&lt;p&gt;Patch applied and the tests were tweaked a bit to make sure everything looks good.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12923093">AMQ-6097</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12854157">AMQ-5923</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sfcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>