<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:36:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1488] Bug in FailoverTransport results in messages that have been queued during a network interruption being sent out of order upon call to restoreTransport()</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1488</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;FailoverTransport stores all queued messages during network interruptions in a HashMap.  When restoreTransport() is called, the map is traversed sending each queued message.&lt;/p&gt;

&lt;p&gt;However, because the messages are stored in a HashMap, the map is traversed in hash-order - not message id order.&lt;/p&gt;

&lt;p&gt;Problematic code in FailoverTransport::restoreTransport():&lt;br/&gt;
        for (Iterator iter2 = requestMap.values().iterator(); iter2.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;
{
            Command command = (Command) iter2.next();
            t.oneway(command);
        }&lt;br/&gt;
&lt;br/&gt;
The following local patch resolves the issue:&lt;br/&gt;
        // Convert the request map to a treemap.  It&apos;s keyed off of the commandid and by putting it into a treemap, we&apos;ll pull them off in commandid order.        &lt;br/&gt;
        TreeMap treeMap = new TreeMap();&lt;br/&gt;
        treeMap.putAll(requestMap);&lt;br/&gt;
        for (Iterator iter2 = treeMap.values().iterator(); iter2.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; {&lt;br/&gt;
//        for (Iterator iter2 = requestMap.values().iterator(); iter2.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; {            Command command = (Command) iter2.next();            t.oneway(command);        }</description>
                <environment>&lt;p&gt;Windows XP, AMQ 4.0.2, Client side message producer to an embedded broker with a failover demand forwarding bridge to a persisting broker&lt;/p&gt;</environment>
        <key id="12482313">AMQ-1488</key>
            <summary>Bug in FailoverTransport results in messages that have been queued during a network interruption being sent out of order upon call to restoreTransport()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="chrish">Christian Holzer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2007 14:27:30 +0000</created>
                <updated>Wed, 9 Apr 2008 15:25:45 +0000</updated>
                            <resolved>Wed, 9 Apr 2008 15:25:45 +0000</resolved>
                                    <version>4.0.2</version>
                                    <fixVersion>5.1.0</fixVersion>
                                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12939218" author="rajdavies" created="Wed, 28 Nov 2007 20:24:28 +0000"  >&lt;p&gt;This is fixed in 5.0 ???&lt;/p&gt;</comment>
                            <comment id="12939470" author="rajdavies" created="Wed, 9 Apr 2008 15:25:45 +0000"  >&lt;p&gt;Fixed by svn revision 646401 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s1qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>