<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:58:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9327] ActiveMQ Web Console doesn&apos;t work with Jetty 11.0.16+</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9327</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The Web Console doesn&apos;t work since Tomcat/Jetty upgrade. The authentication doesn&apos;t work and the JSPs are not compiled.&lt;/p&gt;

&lt;p&gt;In the log, we can see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jakarta.servlet.ServletException: jakarta.servlet.ServletException: org.apache.jasper.JasperException: /index.jsp (line: [18], column: [0]) Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.jasper.compiler.TldCache.getTldResourcePath(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&quot;&lt;/span&gt; because the &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value of &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.jasper.Options.getTldCache()&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13553711">AMQ-9327</key>
            <summary>ActiveMQ Web Console doesn&apos;t work with Jetty 11.0.16+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="jbonofre">Jean-Baptiste Onofr&#233;</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Oct 2023 14:22:35 +0000</created>
                <updated>Mon, 23 Oct 2023 05:21:37 +0000</updated>
                            <resolved>Mon, 23 Oct 2023 05:21:37 +0000</resolved>
                                    <version>6.0.0</version>
                                    <fixVersion>6.0.0</fixVersion>
                                    <component>Web Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17774294" author="mattrpav" created="Thu, 12 Oct 2023 02:14:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt; is this running in Apache ActiveMQ distribution or deploying the activemq-web-console in another web servlet runtime?&lt;/p&gt;

&lt;p&gt;Tomcat JSP stuff was removed: &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/activemq/pull/996&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/996&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17778015" author="jbonofre" created="Sat, 21 Oct 2023 05:24:39 +0000"  >&lt;p&gt;It&apos;s even simply starting ActiveMQ distribution standalone.&lt;/p&gt;

&lt;p&gt;The problem has been introduced by Jetty 11.0.16+ update (it works fine with Jetty 11.0.15).&lt;/p&gt;</comment>
                            <comment id="17778017" author="jbonofre" created="Sat, 21 Oct 2023 05:26:33 +0000"  >&lt;p&gt;Commit which introduced this issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
commit 0f2f096c36d05cec17d05b183819506d0ee546ee (github/pr/1060)
Author: JB Onofr&#233; &amp;lt;jb@nanthrax.net&amp;gt;
Date: &#160; Fri Sep 29 14:54:34 2023 +0200


&#160; &#160; AMQ-9314: Upgrade to Jetty 11.0.16 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17778043" author="jbonofre" created="Sat, 21 Oct 2023 09:19:30 +0000"  >&lt;p&gt;I think I found the problem: Jetty 11.0.15 is more &quot;restrictive&quot; about the jsp tag loading. We did a workaround in the past about include taglibs. I suspect it&apos;s related:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jakarta.servlet.ServletException: jakarta.servlet.ServletException: org.apache.jasper.JasperException: /index.jsp (line: [18], column: [0]) Cannot invoke &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.jasper.compiler.TldCache.getTldResourcePath(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&quot;&lt;/span&gt; because the &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value of &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.jasper.Options.getTldCache()&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m testing a fix.&lt;/p&gt;</comment>
                            <comment id="17778133" author="jbonofre" created="Sat, 21 Oct 2023 15:19:39 +0000"  >&lt;p&gt;I identified the change in Jetty that introduced the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
939f1362f6d6142c0fca196f6472c10e639c6361 is the first bad commit
commit 939f1362f6d6142c0fca196f6472c10e639c6361
Merge: 7f0b7d5e11 e33d026259
Author: Simone Bordet &amp;lt;simone.bordet@gmail.com&amp;gt;
Date: &#160; Thu Aug 17 17:02:13 2023 +0200


&#160; &#160; Merged branch &lt;span class=&quot;code-quote&quot;&gt;&apos;jetty-10.0.x&apos;&lt;/span&gt; into &lt;span class=&quot;code-quote&quot;&gt;&apos;jetty-11.0.x&apos;&lt;/span&gt;.


&#160; &#160; Signed-off-by: Simone Bordet &amp;lt;simone.bordet@gmail.com&amp;gt;


 jetty-http/src/main/java/org/eclipse/jetty/http/UriCompliance.java | 3 ++-
 jetty-websocket/websocket-jetty-server/pom.xml &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; | 2 +-
 jetty-websocket/websocket-jetty-tests/pom.xml&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; | 5 +++++
 pom.xml&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; | 2 +-
 4 files changed, 9 insertions(+), 3 deletions(-) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17778322" author="jbonofre" created="Sun, 22 Oct 2023 09:24:11 +0000"  >&lt;p&gt;More specifically, I think the root cause is the websocket-jetty-server package change with jetty-webapp instead of jetty-annotations. I&apos;m checking our classloader with jetty-websocket packages.&lt;/p&gt;</comment>
                            <comment id="17778384" author="jira-bot" created="Sun, 22 Oct 2023 13:45:29 +0000"  >&lt;p&gt;Commit c46e910fc42161aedb7a142ec86814ef68e76042 in activemq&apos;s branch refs/heads/main from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c46e910fc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c46e910fc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9327&quot; title=&quot;ActiveMQ Web Console doesn&amp;#39;t work with Jetty 11.0.16+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9327&quot;&gt;&lt;del&gt;AMQ-9327&lt;/del&gt;&lt;/a&gt;: Downgrade to Jetty 11.0.15&lt;/p&gt;</comment>
                            <comment id="17778415" author="jbonofre" created="Sun, 22 Oct 2023 15:35:45 +0000"  >&lt;p&gt;I now understand: before, we &quot;got&quot; &lt;tt&gt;jetty-annotations&lt;/tt&gt; thanks to the &lt;tt&gt;jetty-websocket-server&lt;/tt&gt;. Jetty did an improvement to &quot;decouple&quot; websocket-server from webapp (it makes sense to use websocket-server without jsp/webapp).&lt;/p&gt;

&lt;p&gt;But, for us, it means we have to add &lt;tt&gt;jetty-annotations&lt;/tt&gt; (and its dependencies &lt;tt&gt;jetty-plus&lt;/tt&gt; and &lt;tt&gt;jetty-jndi&lt;/tt&gt;) in our distribution.&lt;/p&gt;

&lt;p&gt;I&apos;m doing the update with the fix &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13553707">AMQ-9326</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kvmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>