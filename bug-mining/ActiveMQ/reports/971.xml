<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:46:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1847] Redelivery on a failure doesn&apos;t respect the initialRedeliveryDelay on the first attempt.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1847</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Hi.&lt;/p&gt;

&lt;p&gt;I&apos;m using ActiveMQ 5.1 together with Spring&apos;s DefaultMessageListenerContainer to enable MDPs. I&apos;m using the redeliveryPolicy to enable redelivery on failures during consumption of a message. ActiveMQ configuration looks like this:&lt;/p&gt;

&lt;p&gt;    &amp;lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://activemq.apache.org/camel/schema/spring&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;route errorHandlerRef=&quot;deadLetterErrorHandler&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;from uri=&quot;activemq:NEW&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/route&amp;gt;&lt;br/&gt;
    &amp;lt;/camelContext&amp;gt;&lt;/p&gt;


&lt;p&gt;&amp;lt;bean id=&quot;deadLetterErrorHandler&quot; class=&quot;org.apache.camel.builder.DeadLetterChannelBuilder&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;redeliveryPolicy&quot; ref=&quot;redeliveryPolicyConfig&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;redeliveryPolicyConfig&quot; class=&quot;org.apache.camel.processor.RedeliveryPolicy&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;maximumRedeliveries&quot; value=&quot;4&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;initialRedeliveryDelay&quot; value=&quot;30000&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;useExponentialBackOff&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;property name=&quot;backOffMultiplier&quot; value=&quot;2&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;


&lt;p&gt;Now if a failure occurs, the configured delay isn&apos;t used on the first redelivery attempt. Instead redelivery takes place immediately after the failure occured. This sounds odd to me, since the property is even called initialRedeliveryDelay &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I know that maybe this was caused due to the following issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-1032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-1032&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In my opinion immediately redelivery isn&apos;t very useful in most cases. If a failure occurs, it won&apos;t be fixed some ms later &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. So my suggestion is (in respect to &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-1032&quot; title=&quot;Avoid a delivery delay on the first redelivery.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-1032&quot;&gt;&lt;del&gt;AMQ-1032&lt;/del&gt;&lt;/a&gt;) to have two options:&lt;/p&gt;

&lt;p&gt;initialRedeliveryDelay&lt;br/&gt;
redeliveryDelay&lt;/p&gt;

&lt;p&gt;So both configurations would be possible. For &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-1032&quot; title=&quot;Avoid a delivery delay on the first redelivery.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-1032&quot;&gt;&lt;del&gt;AMQ-1032&lt;/del&gt;&lt;/a&gt; just configure initialRedeliveryDelay to 0. Otherwise just take the redeliveryDelay as initialRedeliveryDelay to get what I want &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Does this make sense?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, ActiveMQ 5.1, Spring 2.5.x with transacted DefaultMessageListenerContainer&lt;/p&gt;</environment>
        <key id="12482521">AMQ-1847</key>
            <summary>Redelivery on a failure doesn&apos;t respect the initialRedeliveryDelay on the first attempt.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="vguna">Veit Guna</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jul 2008 09:58:33 +0000</created>
                <updated>Fri, 6 Aug 2010 08:16:22 +0000</updated>
                            <resolved>Fri, 6 Aug 2010 08:16:22 +0000</resolved>
                                    <version>5.1.0</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12939967" author="davsclaus" created="Tue, 8 Jul 2008 15:37:03 +0000"  >&lt;p&gt;I have just tried an unit test and it sleeps for 30 seconds.&lt;br/&gt;
[                          main] RedeliveryPolicy               DEBUG Sleeping for: 30000 millis until attempting redelivery&lt;/p&gt;

&lt;p&gt;And then on the 2nd&lt;br/&gt;
[                          main] RedeliveryPolicy               DEBUG Sleeping for: 60000 millis until attempting redelivery&lt;/p&gt;

&lt;p&gt;Your route doesn&apos;t do anything with the received message from activemq:NEW. How do you actually trigger the failure and the redelivery?&lt;/p&gt;</comment>
                            <comment id="12939912" author="davsclaus" created="Tue, 8 Jul 2008 15:50:03 +0000"  >&lt;p&gt;I have tried with a jms example and it works in the unit tests in the source code.&lt;/p&gt;

&lt;p&gt;Are you sure you have Camel 1.4-SNAPSHOT in ActiveMQ where you run your project?&lt;/p&gt;</comment>
                            <comment id="12939936" author="davsclaus" created="Tue, 8 Jul 2008 16:19:53 +0000"  >&lt;p&gt;Hi Claus.&lt;/p&gt;

&lt;p&gt;Meanwhile I&apos;ve realized that the problem is a misunderstanding on my side what camel is supposed to do.&lt;br/&gt;
I thought I can configure the redelivery behavior of ActiveMQ within the camelContext as part of the acivemq.xml configuration on a per destination basis. What I haven&apos;t mentioned is, that my listener/consumer for the queue isn&apos;t configured within camel or activemq but in a separate spring baked application. What I now have realized is, that I have to consume a message via camel to get it&apos;s routing/mediation support (including redelivery&lt;br/&gt;
features) - now it&apos;s crystal clear to me (or not?). So I configured redeliveryPolicy on a ActiveMQConnectionFactory on my spring baked application and the settings are working fine now.&lt;/p&gt;

&lt;p&gt;Sorry for mixing things up.&lt;/p&gt;

&lt;p&gt;Thanks for you help.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Veit&lt;/p&gt;</comment>
                            <comment id="12939938" author="vguna" created="Tue, 8 Jul 2008 17:55:23 +0000"  >&lt;p&gt;Hi.&lt;/p&gt;

&lt;p&gt;Sorry for reopening but the redeliveryDelay problem still exists. But it seems no camel problem then because I&apos;m not using camel anymore, instead the redeliveryPolicy on the AQConnectionFactory.&lt;/p&gt;

&lt;p&gt;So, should that be moved to the AQM project then? There I&apos;m using AMQ 5.1.0 (Camel 1.3).&lt;/p&gt;</comment>
                            <comment id="12939950" author="davsclaus" created="Wed, 9 Jul 2008 03:58:05 +0000"  >&lt;p&gt;Hi Veit&lt;/p&gt;

&lt;p&gt;Yes please open a ticket on the ActiveMQ project if its solely an ActiveMQ problem.&lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/activemq/browse/AMQ&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://issues.apache.org/activemq/browse/AMQ&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12939954" author="davsclaus" created="Wed, 9 Jul 2008 04:00:00 +0000"  >&lt;p&gt;Veit. I managed to move the issue from Camel to ActiveMQ project.&lt;/p&gt;</comment>
                            <comment id="12939945" author="davsclaus" created="Wed, 9 Jul 2008 04:00:59 +0000"  >&lt;p&gt;Veit. Can you add your new configuration etc. for the ActiveMQ that demonstrates the problem? I am sure the ActiveMQ comitters want to see your configuration file and what the problem is you have.&lt;/p&gt;</comment>
                            <comment id="12939929" author="vguna" created="Wed, 9 Jul 2008 06:44:25 +0000"  >&lt;p&gt;Thanks Claus.&lt;/p&gt;

&lt;p&gt;Sure, here&apos;s my applicationContext.xml:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;beans &lt;br/&gt;
	xmlns=&quot;http://www.springframework.org/schema/beans&quot; &lt;br/&gt;
	xmlns:amq=&quot;http://activemq.apache.org/schema/core&quot;&lt;br/&gt;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans &lt;a href=&quot;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&lt;/a&gt;&lt;br/&gt;
	&lt;a href=&quot;http://activemq.apache.org/schema/core&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/schema/core&lt;/a&gt; &lt;a href=&quot;http://activemq.apache.org/schema/core/activemq-core-5.1.0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/schema/core/activemq-core-5.1.0.xsd&lt;/a&gt;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;!--  ActiveMQ destinations to use  --&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;destination&quot; class=&quot;org.apache.activemq.command.ActiveMQQueue&quot; autowire=&quot;constructor&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg value=&quot;NEW&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;jmsFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;brokerURL&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;value&amp;gt;discovery:multicast://test&amp;lt;/value&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;redeliveryPolicy&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;ref local=&quot;redeliveryPolicy&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;redeliveryPolicy&quot; class=&quot;org.apache.activemq.RedeliveryPolicy&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;initialRedeliveryDelay&quot; value=&quot;10000&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;maximumRedeliveries&quot; value=&quot;4&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;useExponentialBackOff&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;backOffMultiplier&quot; value=&quot;2&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;!-- Spring JMS Template --&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;myJmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;connectionFactory&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;!-- lets wrap in a pool to avoid creating a connection per send --&amp;gt;&lt;br/&gt;
			&amp;lt;bean class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;property name=&quot;targetConnectionFactory&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;ref local=&quot;jmsFactory&quot; /&amp;gt;&lt;br/&gt;
				&amp;lt;/property&amp;gt;&lt;br/&gt;
			&amp;lt;/bean&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;consumerJmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;jmsFactory&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;


&lt;p&gt;	&amp;lt;!-- and this is the message listener container --&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;jmsContainer&quot; class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;jmsFactory&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;destination&quot; ref=&quot;destination&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;messageListener&quot; ref=&quot;messageListener&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;concurrentConsumers&quot; value=&quot;100&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;maxMessagesPerTask&quot; value=&quot;1&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;sessionTransacted&quot; value=&quot;true&quot; /&amp;gt;		&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;br/&gt;
	&amp;lt;!-- this is the Message Driven POJO (MDP) --&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;messageListener&quot; class=&quot;com.foo.bar.jms.Consumer&quot; /&amp;gt;	&lt;/p&gt;

&lt;p&gt;&amp;lt;/beans&amp;gt;&lt;/p&gt;


&lt;p&gt;The messageListener will create a RuntimeException on the onMessage method to produce an error. The first redelivery attempt occurs immediately, without respect to the initialRedeliveryDelay.&lt;/p&gt;</comment>
                            <comment id="12939940" author="tsigelnik" created="Wed, 9 Jul 2008 08:26:58 +0000"  >&lt;p&gt;Redelivery policy doesn&apos;t work with Spring&apos;s org.springframework.jms.listener.DefaultMessageListenerContainer at all&lt;/p&gt;

&lt;p&gt;That happens, because DefaultMessageListenerContainer closes the consumer, session and connection, and do the reconnect if message listener throws exception, and of course previous delivery timepoint is empty in the new consumer.&lt;/p&gt;

&lt;p&gt;It happens, because DefaultMessageListenerContainer doesn&apos;t know what a cause of JMSException. Maybe it was disconnection... and ConnectionFactory haven&apos;t reconnection logic...&lt;/p&gt;

&lt;p&gt;I wrote my own simple MessageListenerContainer, that doesn&apos;t do reconnection if JMSException is thrown, because ActiveMQConnectionFactory has reconnection logic&lt;/p&gt;</comment>
                            <comment id="12939890" author="vguna" created="Wed, 9 Jul 2008 08:37:21 +0000"  >&lt;p&gt;I&apos;m sorry to correct you, but it IS working with the above configuration. All parameters I change within the redeliveryPolicy bean definition affecting the redelivery within the sping bean! The only thing that doesn&apos;t work correctly (or needs enhancement) is the initial redelivery.&lt;/p&gt;</comment>
                            <comment id="12939966" author="tsigelnik" created="Wed, 9 Jul 2008 09:42:35 +0000"  >&lt;p&gt;I don&apos;t know how do you reach that, but if I use DefaultMessageListenerContainer  all redeliveries happens immediately, not first only.&lt;/p&gt;

&lt;p&gt;If any Execption in MessageListener happens it always closes the connnection&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;DefaultMessageListenerContainer.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AsyncMessageListenerInvoker &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; SchedulingAwareRunnable {

....

    &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable ex) {
    clearResources();

...


    }

...
}


&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void clearResources() {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sharedConnectionEnabled()) {
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (sharedConnectionMonitor) {
	JmsUtils.closeMessageConsumer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.consumer);
	JmsUtils.closeSession(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.session);
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
	JmsUtils.closeMessageConsumer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.consumer);
	JmsUtils.closeSession(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.session);
    }
	&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.consumer = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
	&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12939917" author="vguna" created="Wed, 9 Jul 2008 10:01:55 +0000"  >&lt;p&gt;I don&apos;t know. Perhaps configuration, ActiveMQ 5.1.0 or Spring 2.5.5. Perhaps someone fixed/enhanced something &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="12939999" author="vguna" created="Thu, 17 Jul 2008 07:14:25 +0000"  >&lt;p&gt;@Dima:&lt;/p&gt;

&lt;p&gt;Now, I can confirm your findings! After I set the jmsTransactionManager in my config (not just sessionTransacted=true like before) I encounter immediate redelivery without delay/backoffs, too:&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;jmsContainer&quot; class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;jmsFactory&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;destination&quot; ref=&quot;destination&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;messageListener&quot; ref=&quot;messageListener&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;concurrentConsumers&quot; value=&quot;2&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;maxMessagesPerTask&quot; value=&quot;1&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;sessionTransacted&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;transactionManager&quot; ref=&quot;jmsTransActionManager&quot; /&amp;gt;			&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;After I set this, the MesageListener also checks connections actively - which is very noisy. So in the end: is this all expected behavior? I&apos;m a bit confused...&lt;/p&gt;
</comment>
                            <comment id="12941612" author="gtully" created="Thu, 25 Jun 2009 09:34:49 +0000"  >&lt;p&gt;transactions change redelivery semantics for a consumer. I think you are seeing expected behavior if the session is transacted considering &lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-1032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-1032&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If this is not the case, a complete Junit tests case with a listener that throws an exception would help. There are a bunch of spring test cases in the activemq-core module that you could use as a template&lt;/p&gt;</comment>
                            <comment id="12941767" author="gtully" created="Mon, 20 Jul 2009 13:28:22 +0000"  >&lt;p&gt;resolving pending junit test case that can show otherwise.&lt;/p&gt;</comment>
                            <comment id="12939919" author="gtully" created="Thu, 5 Aug 2010 15:42:52 +0000"  >&lt;p&gt;additional clarification. There is indeed an immediate retry with the redelivery flag set, this allows an app to immediately deal with a redelivered message (one having the redelivered flag set) if it needs to. For subsequent redeliveries the delay semantics kick in. This was implemented in &lt;a href=&quot;https://issues.apache.org/activemq/browse/AMQ-1032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/activemq/browse/AMQ-1032&lt;/a&gt;&lt;br/&gt;
hence this is working as designed&lt;/p&gt;</comment>
                            <comment id="12939442" author="gtully" created="Fri, 6 Aug 2010 08:14:59 +0000"  >&lt;p&gt;Fix implemented in r982903&lt;/p&gt;

&lt;p&gt;initialRedeliveryDelay is not respected, set it to 0 to have immediate redelivery. Additional deliveryDelay (default  = 1000) which controls subsequent redelivery delay if initialRedeliveryDelay==0&lt;/p&gt;</comment>
                            <comment id="12939017" author="gtully" created="Fri, 6 Aug 2010 08:15:59 +0000"  >&lt;p&gt;going to fix this, make it configurable&lt;/p&gt;</comment>
                            <comment id="12936344" author="gtully" created="Fri, 6 Aug 2010 08:16:22 +0000"  >&lt;p&gt;done&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12482642">AMQ-1032</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rq33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>