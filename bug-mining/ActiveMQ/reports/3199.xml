<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:44:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-7077] Queue subscriber view slowConsumer flag set in error</title>
                <link>https://issues.apache.org/jira/browse/AMQ-7077</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;For queue subscribers, the broker dispatches prefetch num messages and stops. The subscription is considered full.&lt;/p&gt;

&lt;p&gt;There is currently logic in&#160;PrefetchSubscription that flags the consumer as slow on the success full dispatch of the last&#160;message&#160;in a prefetch batch. this flag remains set till there are more messages to dispatch, which happens on the first ack.&lt;/p&gt;

&lt;p&gt;The consumer is considered slow, till it acks (which seems wrong) and in the case that there are no more message to dispatch, it remains slow.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Interestingly, there are some tests for this functionality that only validate topics in error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;From my investigation, it seems that for queue consumers, it is really only possible to gauge slowness due to the frequency of acks, which is what the AbortAckSlowConsumerPolicy does.&lt;/p&gt;

&lt;p&gt;It makes sense that that code flags a consumer as slow once it is detected as such.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13191938">AMQ-7077</key>
            <summary>Queue subscriber view slowConsumer flag set in error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Oct 2018 14:15:42 +0000</created>
                <updated>Thu, 18 Oct 2018 15:57:12 +0000</updated>
                            <resolved>Wed, 17 Oct 2018 10:09:08 +0000</resolved>
                                    <version>5.15.0</version>
                                    <fixVersion>5.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16651788" author="gtully" created="Tue, 16 Oct 2018 14:17:18 +0000"  >&lt;p&gt;If the abortSlowAck policy is responsible for setting the flag, it can also fire the advisory.&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6421&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16653248" author="simmel" created="Wed, 17 Oct 2018 09:31:52 +0000"  >&lt;p&gt;As I said on IRC, to be able to configure the criteria that ActiveMQ uses to mark a consumer as slow would be awesome. maxTimeSinceLastAck is probably what we would use.&lt;/p&gt;</comment>
                            <comment id="16653298" author="jira-bot" created="Wed, 17 Oct 2018 10:05:15 +0000"  >&lt;p&gt;Commit 4dee173962a08dbcb88e33f61ec281209c0b9156 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4dee173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4dee173&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7077&quot; title=&quot;Queue subscriber view slowConsumer flag set in error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7077&quot;&gt;&lt;del&gt;AMQ-7077&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6421&quot; title=&quot;AbortSlowAckConsumerStrategy does not produce SlowConsumer advisory message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6421&quot;&gt;&lt;del&gt;AMQ-6421&lt;/del&gt;&lt;/a&gt; - tie queue consumer slow flag detection to abort slow consumer policy, fire advisory when set.&lt;/p&gt;</comment>
                            <comment id="16653310" author="gtully" created="Wed, 17 Oct 2018 10:09:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simmel&quot; class=&quot;user-hover&quot; rel=&quot;simmel&quot;&gt;simmel&lt;/a&gt; with the abort slow ack policy and&#160;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;maxTimeSinceLastAck&lt;/em&gt; you can now control when the advisory and slow flag is set.&lt;/p&gt;</comment>
                            <comment id="16655461" author="jira-bot" created="Thu, 18 Oct 2018 15:50:05 +0000"  >&lt;p&gt;Commit 9dd751149f7489f99d430d3f1240f2bfa2e70c69 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9dd7511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=9dd7511&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7079&quot; title=&quot;Using abortSlowAckConsumerStrategy aborts slow consumer even though it has disconnected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7079&quot;&gt;&lt;del&gt;AMQ-7079&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-7077&quot; title=&quot;Queue subscriber view slowConsumer flag set in error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-7077&quot;&gt;&lt;del&gt;AMQ-7077&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6421&quot; title=&quot;AbortSlowAckConsumerStrategy does not produce SlowConsumer advisory message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6421&quot;&gt;&lt;del&gt;AMQ-6421&lt;/del&gt;&lt;/a&gt; - check for consumers that have been destroyed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13003245">AMQ-6421</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z9af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>