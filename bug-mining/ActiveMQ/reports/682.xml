<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:42:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1998] Cannot delete Queue via JMX or admin console</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1998</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When I delete a queue via JMX and the admin console and restart the broker, the queue is still present. &lt;/p&gt;

&lt;p&gt;Here are the precise steps to reproduce the problem : &lt;/p&gt;

&lt;p&gt;1. Start the broker&lt;br/&gt;
2. Started jconsole &lt;br/&gt;
3. With the Broker MBean, create a queue named &quot;JMX.queue&quot; (addQueue operation)&lt;br/&gt;
4. With this queue&apos;s MBean, send a text message (sendTextMessage operation)&lt;br/&gt;
5. With the Broker MBean, remove the queue (removeQueue operation). The queue&apos;s MBean is also deleted. &lt;br/&gt;
6. Restart the broker. &lt;br/&gt;
7. When reconnecting with JConsole, the queue&apos;s MBean is still present. &lt;/p&gt;

&lt;p&gt;This is also the case with the Web admin console. &lt;/p&gt;

&lt;p&gt;I&apos;m using the default config of the 5.1.0 distribution. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP SP2&lt;br/&gt;
JDK 1.5.0_11&lt;/p&gt;</environment>
        <key id="12483435">AMQ-1998</key>
            <summary>Cannot delete Queue via JMX or admin console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="shbehna@gmail.com">Sherif Behna</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Nov 2008 02:39:20 +0000</created>
                <updated>Fri, 16 Apr 2010 19:46:52 +0000</updated>
                            <resolved>Wed, 19 Aug 2009 16:39:09 +0000</resolved>
                                    <version>5.1.0</version>
                    <version>5.2.0</version>
                                    <fixVersion>5.3.1</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12940455" author="shbehna@gmail.com" created="Sat, 8 Nov 2008 02:44:25 +0000"  >&lt;p&gt;I also reproduced this problem with ActiveMQ 5.2.0 RC3 (with the default config). &lt;/p&gt;</comment>
                            <comment id="12940465" author="gtully" created="Mon, 10 Nov 2008 11:16:47 +0000"  >&lt;p&gt;this may be as designed as there are still some persistent messages in the Queue.&lt;/p&gt;

&lt;p&gt;There is a purge operation on the QueueMBean, if you purge the Queue before deleting it, the Queue should disappear. &lt;/p&gt;</comment>
                            <comment id="12940472" author="shbehna@gmail.com" created="Mon, 10 Nov 2008 14:03:57 +0000"  >&lt;p&gt;I&apos;ve tried to purge the queue with the purge operation in JConsole before deleting the queue. The queue still shows up after a broker restart. &lt;/p&gt;

&lt;p&gt;I&apos;ve also tried to do the same procedure without step 4 (sending a message to the queue). In that case, the queue does not show up after the broker restart. &lt;/p&gt;

&lt;p&gt;BTW : Is there a way to delete queues other than JMX ?&lt;/p&gt;</comment>
                            <comment id="12941246" author="yinghe0101" created="Fri, 1 May 2009 13:29:49 +0000"  >&lt;p&gt;this is a serious issue because if you have multiple consumer of a virtual topic and you try to remove the queue Consumer.*.VirtualTopic.topic and the broker did not really remove it and after restart, they are coming back. all those assumed removed queues will pile up message from the virtual topic. eventually the broker will stop function.&lt;/p&gt;</comment>
                            <comment id="12941255" author="yinghe0101" created="Tue, 5 May 2009 14:02:20 +0000"  >&lt;p&gt;if you are using the default persistenceAdapter, the &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-1998&quot; title=&quot;Cannot delete Queue via JMX or admin console&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-1998&quot;&gt;&lt;del&gt;AMQ-1998&lt;/del&gt;&lt;/a&gt;.patch will fix the removeQueue command issued from jconsole.&lt;/p&gt;

&lt;p&gt;Beware that this command is per broker, which means that it will not propagate to other broker in a network of brokers or to the slave if there is one for this broker.&lt;/p&gt;</comment>
                            <comment id="12941293" author="rajdavies" created="Wed, 19 Aug 2009 16:39:09 +0000"  >&lt;p&gt;Fixed by SVN revision 805873&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461509" name="AMQ-1998.patch" size="1461" author="yinghe0101" created="Tue, 5 May 2009 14:02:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tslr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>171943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>