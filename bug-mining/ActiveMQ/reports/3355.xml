<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:50:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6899] Runtime Configuration Plugin throwing NPE at startup</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6899</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;NOTE: running in Karaf&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is the plugin declaration from activemq.xml - note: have tried by with and without the checkPeriod - both throw the same NPE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;plugins&amp;gt;
 &#160; &#160; &amp;lt;runtimeConfigurationPlugin /&amp;gt;
 &amp;lt;/plugins&amp;gt;
&amp;lt;plugins&amp;gt;
&#160; &#160; &amp;lt;runtimeConfigurationPlugin checkPeriod=&lt;span class=&quot;code-quote&quot;&gt;&quot;2000&quot;&lt;/span&gt; /&amp;gt;
&amp;lt;/plugins&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The configuration seems to load fine, but this exception is thrown on every startup.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
20180213 16:34:25.556 [INFO ] Broker Starting &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; | 150:org.apache.activemq.activemq-osgi | org.apache.activemq.plugin.AbstractRuntimeConfigurationBroker | Unexpected exception during load of: URL [file:/D:/Nextgate/products/ngs/etc/activemq.xml]
java.lang.NullPointerException
 at org.apache.activemq.plugin.RuntimeConfigurationBroker.getSchema(RuntimeConfigurationBroker.java:232)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.plugin.RuntimeConfigurationBroker.loadConfiguration(RuntimeConfigurationBroker.java:178)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.plugin.RuntimeConfigurationBroker.start(RuntimeConfigurationBroker.java:82)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.broker.BrokerService$6.start(BrokerService.java:2324)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.broker.BrokerService.doStartBroker(BrokerService.java:732)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.broker.BrokerService.access$300(BrokerService.java:139)[150:org.apache.activemq.activemq-osgi:5.13.3]
 at org.apache.activemq.broker.BrokerService$3.run(BrokerService.java:711)[150:org.apache.activemq.activemq-osgi:5.13.3]
20180213 16:34:25.568 [INFO ] Broker Starting &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; | 150:org.apache.activemq.activemq-osgi | org.apache.activemq.transport.TransportServerThreadSupport | Listening &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; connections at: tcp:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8206?transport.threadName&amp;amp;transport.maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600
&lt;/span&gt;&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Karaf&lt;/p&gt;

&lt;p&gt;both Windows and Linux (CentOS 7)&lt;/p&gt;</environment>
        <key id="13138383">AMQ-6899</key>
            <summary>Runtime Configuration Plugin throwing NPE at startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="pberkman">Peter Berkman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Feb 2018 00:40:20 +0000</created>
                <updated>Fri, 4 Dec 2020 18:38:17 +0000</updated>
                            <resolved>Wed, 2 Dec 2020 16:28:34 +0000</resolved>
                                    <version>5.13.3</version>
                                    <fixVersion>5.15.14</fixVersion>
                    <fixVersion>5.16.1</fixVersion>
                    <fixVersion>5.17.0</fixVersion>
                                    <component>Plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16363813" author="gtully" created="Wed, 14 Feb 2018 11:12:47 +0000"  >&lt;p&gt;there is a test for this feature in karaf that may help reproduce or diagnose (by comparison):&lt;br/&gt;
see: &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob;f=activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ActiveMQBrokerRuntimeConfigTest.java;h=d34bf4ea3fdee7cfd33a1a9eba6c2f560ec45a69;hb=HEAD&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob;f=activemq-karaf-itest/src/test/java/org/apache/activemq/karaf/itest/ActiveMQBrokerRuntimeConfigTest.java;h=d34bf4ea3fdee7cfd33a1a9eba6c2f560ec45a69;hb=HEAD&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17223672" author="mattrpav" created="Fri, 30 Oct 2020 14:15:34 +0000"  >&lt;p&gt;This is caused by the spring-beans.xsd not being present in the activemq-osgi jar here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq/blob/master/activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java#L236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/blob/master/activemq-runtime-config/src/main/java/org/apache/activemq/plugin/RuntimeConfigurationBroker.java#L236&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;schemas.add(new StreamSource(getClass().getResource(&quot;/org/springframework/beans/factory/xml/spring-beans-3.0.xsd&quot;).toExternalForm()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17240811" author="jbonofre" created="Mon, 30 Nov 2020 15:01:57 +0000"  >&lt;p&gt;That&apos;s not a problem anymore with the new features XML. The problem was for people using Spring 5 (instead of Spring 4) in Karaf. I&apos;ve updated the features XML to &quot;force&quot; use of Spring 4 (via spring legacy).&lt;/p&gt;</comment>
                            <comment id="17240812" author="jbonofre" created="Mon, 30 Nov 2020 15:02:20 +0000"  >&lt;p&gt;However, about the runtime plugin, we have an issue on JDK 11 that I fixed.&lt;/p&gt;</comment>
                            <comment id="17242199" author="jbonofre" created="Wed, 2 Dec 2020 09:30:23 +0000"  >&lt;p&gt;By the way, runtimePlugin is useless in the context of Karaf (it&apos;s possible to automatically reload the configuration when you have changes with fileinstall in Karaf).&lt;/p&gt;</comment>
                            <comment id="17242484" author="jira-bot" created="Wed, 2 Dec 2020 16:27:37 +0000"  >&lt;p&gt;Commit c83f7e9aa8fa23b6ce86b5ee48969836d8b3e5d0 in activemq&apos;s branch refs/heads/master from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c83f7e9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c83f7e9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt; Use generic spring schema name (working with any Spring version) in RuntimeConfigurationPlugin&lt;/p&gt;</comment>
                            <comment id="17242485" author="jira-bot" created="Wed, 2 Dec 2020 16:27:39 +0000"  >&lt;p&gt;Commit 6e2854789b2387ae3305e5f6986713b34a0d96c1 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6e28547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6e28547&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #590 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt; Use generic spring schema name (working with any Spring version) in RuntimeConfigurationPlugin&lt;/p&gt;</comment>
                            <comment id="17242486" author="jira-bot" created="Wed, 2 Dec 2020 16:27:41 +0000"  >&lt;p&gt;Commit 6e2854789b2387ae3305e5f6986713b34a0d96c1 in activemq&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6e28547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6e28547&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #590 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt; Use generic spring schema name (working with any Spring version) in RuntimeConfigurationPlugin&lt;/p&gt;</comment>
                            <comment id="17242487" author="jira-bot" created="Wed, 2 Dec 2020 16:28:11 +0000"  >&lt;p&gt;Commit 1bc1b6d5028114c8fc97e138d4d588b87293b403 in activemq&apos;s branch refs/heads/activemq-5.16.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=1bc1b6d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=1bc1b6d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt; Use generic spring schema name (working with any Spring version) in RuntimeConfigurationPlugin&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c83f7e9aa8fa23b6ce86b5ee48969836d8b3e5d0)&lt;/p&gt;</comment>
                            <comment id="17242489" author="jira-bot" created="Wed, 2 Dec 2020 16:28:36 +0000"  >&lt;p&gt;Commit 247836a4f70af5d4b8f770cf81a77647775000b3 in activemq&apos;s branch refs/heads/activemq-5.15.x from jbonofre&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=247836a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=247836a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6899&quot; title=&quot;Runtime Configuration Plugin throwing NPE at startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6899&quot;&gt;&lt;del&gt;AMQ-6899&lt;/del&gt;&lt;/a&gt; Use generic spring schema name (working with any Spring version) in RuntimeConfigurationPlugin&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c83f7e9aa8fa23b6ce86b5ee48969836d8b3e5d0)&lt;/p&gt;</comment>
                            <comment id="17244072" author="mattrpav" created="Fri, 4 Dec 2020 15:54:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt; what do you mean by &quot;runtimePlugin is useless in the context of Karaf&quot;? We have the runtimeConfigPlugin running in Karaf and we see ActiveMQ update settings accordingly.&lt;/p&gt;</comment>
                            <comment id="17244078" author="jbonofre" created="Fri, 4 Dec 2020 15:59:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mattrpav&quot; class=&quot;user-hover&quot; rel=&quot;mattrpav&quot;&gt;mattrpav&lt;/a&gt;&#160;I mean that it&apos;s useful when using spring schema, but if you use blueprint, runtimeConfigPlugin is useless as blueprint detects and updates the running broker.&lt;/p&gt;</comment>
                            <comment id="17244219" author="mattrpav" created="Fri, 4 Dec 2020 18:38:17 +0000"  >&lt;p&gt;Got it-- good clarification, thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q5sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>