<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:59:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9595] Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9595</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Let&apos;s say we have a topic with 2 durable subscribers:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&#160;we send 10000 messages to the topic.&lt;/li&gt;
	&lt;li&gt;First subscriber receives all messages, and acknowledges every second of them(0th,&#160; 2nd, 4th and so on)&lt;/li&gt;
	&lt;li&gt;Second subscriber doesn&apos;t acknowledge anything&lt;/li&gt;
	&lt;li&gt;we restart the broker&lt;/li&gt;
	&lt;li&gt;first subscriber connects to the broker and starts receiving messages&lt;/li&gt;
	&lt;li&gt;at first it receives correct messages(1st, 3rd, 5th and so on), but at some point it starts receiving all messages(400th, 401st, 402nd and so on).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See a test in the attachment&lt;/p&gt;</description>
                <environment></environment>
        <key id="13596044">AMQ-9595</key>
            <summary>Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="nikita-shupletsov">Nikita Shupletsov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Oct 2024 22:16:21 +0000</created>
                <updated>Thu, 13 Mar 2025 17:02:17 +0000</updated>
                            <resolved>Wed, 23 Oct 2024 13:49:32 +0000</resolved>
                                    <version>6.1.3</version>
                    <version>5.18.6</version>
                                    <fixVersion>6.2.0</fixVersion>
                    <fixVersion>6.1.4</fixVersion>
                    <fixVersion>5.19.0</fixVersion>
                    <fixVersion>5.18.7</fixVersion>
                                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17891396" author="jbonofre" created="Mon, 21 Oct 2024 05:36:21 +0000"  >&lt;p&gt;All are persistent messages right ?&lt;/p&gt;</comment>
                            <comment id="17891678" author="JIRAUSER306158" created="Mon, 21 Oct 2024 22:12:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt; yes&lt;/p&gt;</comment>
                            <comment id="17892163" author="jira-bot" created="Wed, 23 Oct 2024 13:48:32 +0000"  >&lt;p&gt;Commit 6b08e104208c1a344a1ab8a312450f855415ceb1 in activemq&apos;s branch refs/heads/main from Nikita Shupletsov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6b08e10420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=6b08e10420&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9595&quot; title=&quot;Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9595&quot;&gt;&lt;del&gt;AMQ-9595&lt;/del&gt;&lt;/a&gt; Fix recoverNextMessages when there are messages consumed farther than maxBatchSize.&lt;/p&gt;</comment>
                            <comment id="17892164" author="jira-bot" created="Wed, 23 Oct 2024 13:48:32 +0000"  >&lt;p&gt;Commit fd7f4839972f093d8861787ea47ac32f20fb4eaa in activemq&apos;s branch refs/heads/main from JB Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=fd7f483997&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=fd7f483997&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #1324 from Nikita-Shupletsov/kahadb_topic_fix&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9595&quot; title=&quot;Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9595&quot;&gt;&lt;del&gt;AMQ-9595&lt;/del&gt;&lt;/a&gt; Fix recoverNextMessages when there are messages consumed farther than maxBatchSize.&lt;/p&gt;</comment>
                            <comment id="17892165" author="jira-bot" created="Wed, 23 Oct 2024 13:49:09 +0000"  >&lt;p&gt;Commit 655ee900ba925ed6faec28e5fd4255ff9906bd37 in activemq&apos;s branch refs/heads/activemq-6.1.x from Nikita Shupletsov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=655ee900ba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=655ee900ba&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9595&quot; title=&quot;Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9595&quot;&gt;&lt;del&gt;AMQ-9595&lt;/del&gt;&lt;/a&gt; Fix recoverNextMessages when there are messages consumed farther than maxBatchSize.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 6b08e104208c1a344a1ab8a312450f855415ceb1)&lt;/p&gt;</comment>
                            <comment id="17892166" author="jira-bot" created="Wed, 23 Oct 2024 13:49:30 +0000"  >&lt;p&gt;Commit 9106a9838f8412f8b1ae87d1391bf5b15879cce1 in activemq&apos;s branch refs/heads/activemq-5.18.x from Nikita Shupletsov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=9106a9838f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=9106a9838f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9595&quot; title=&quot;Durable subscriber receives acknowledge messages if they are farther than the maxBatchSize&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9595&quot;&gt;&lt;del&gt;AMQ-9595&lt;/del&gt;&lt;/a&gt; Fix recoverNextMessages when there are messages consumed farther than maxBatchSize.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 6b08e104208c1a344a1ab8a312450f855415ceb1)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13072301" name="DurableSubscriptionPartialAckTest_test.patch" size="4611" author="nikita-shupletsov" created="Fri, 18 Oct 2024 22:06:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1s3cg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>