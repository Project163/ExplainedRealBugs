<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:54:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3817] Marshalled properties don&apos;t get updated if modified during preProcessDispatch (TraceBrokerPathPlugin looks broken)</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3817</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Enabling the TraceBrokerPathPlugin with a custom property name = &apos;JMSXTrace&apos; sends outdated information to the consumer. When inspecting the property at the consumer code, it has not been updated with the complete broker path. Only the first broker, where the message was produced into, appears. No matter how many brokers are in the route (tested with 4).&lt;/p&gt;

&lt;p&gt;Having dug into the code, it looks like marshalledProperties in Message were already set but not dirtied when setProperty was called again from the TraceBrokerPathPlugin. Also, Message.beforeMarshall() assumes that since marshalledProperties is already set, it doesn&apos;t need updating. Therefore, the message is dispatched to the consumer with an old version of the properties.&lt;/p&gt;

&lt;p&gt;I think Message.setProperty() should check whether marshalledProperties already has a value. If it does, it should re-marshall (i.e. dirty the cache).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12552203">AMQ-3817</key>
            <summary>Marshalled properties don&apos;t get updated if modified during preProcessDispatch (TraceBrokerPathPlugin looks broken)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="raulvk">Ra&#250;l Kripalani</reporter>
                        <labels>
                            <label>marshaling</label>
                            <label>openwire</label>
                            <label>plugin</label>
                    </labels>
                <created>Mon, 23 Apr 2012 21:31:19 +0000</created>
                <updated>Fri, 18 May 2012 19:30:51 +0000</updated>
                            <resolved>Fri, 18 May 2012 19:30:50 +0000</resolved>
                                    <version>5.5.1</version>
                                    <fixVersion>5.5.1</fixVersion>
                    <fixVersion>5.6.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13260549" author="tabish121" created="Tue, 24 Apr 2012 13:40:37 +0000"  >&lt;p&gt;I recommend you try and create a JUnit test that demonstrates the issue, that way you can ensure that when it gets fixed that it will stay fixed into the future. &lt;/p&gt;</comment>
                            <comment id="13278719" author="raulvk" created="Fri, 18 May 2012 11:00:14 +0000"  >&lt;p&gt;Attached test case and fix.&lt;/p&gt;</comment>
                            <comment id="13278726" author="raulvk" created="Fri, 18 May 2012 11:15:13 +0000"  >&lt;p&gt;Please apply fix on 5.5 branch also.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13278781" author="tabish121" created="Fri, 18 May 2012 12:54:08 +0000"  >&lt;p&gt;You probably don&apos;t want to mark this as resolved until someone reviews it and actually commits the patch&lt;/p&gt;</comment>
                            <comment id="13279109" author="tabish121" created="Fri, 18 May 2012 19:30:50 +0000"  >&lt;p&gt;Patch applied with thanks.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528038" name="amq-tracebrokerpath-fix.diff" size="852" author="raulvk" created="Fri, 18 May 2012 11:00:13 +0000"/>
                            <attachment id="12528039" name="amq-tracebrokerpath-testcase.diff" size="5152" author="raulvk" created="Fri, 18 May 2012 11:00:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237918</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ahwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>