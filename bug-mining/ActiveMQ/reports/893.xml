<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:45:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2693] potential hang with failover, transactions and slow thread creation with outstanding commit - close blocks pending dispatch  FailoverConsumerOutstandingCommitTest intermittent failure</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2693</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;potential dead lock pending dispatch that is blocked by an outstanding commit after failover.&lt;/p&gt;

&lt;p&gt;Log indicates:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;WARN  ActiveMQConnection             - dispatch paused, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; outstanding dispatch interruption processing (x) to complete..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Thread Dump:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Full thread dump Java HotSpot(TM) Server VM (14.0-b16 mixed mode):
...
&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ Transport: tcp:&lt;span class=&quot;code-comment&quot;&gt;///127.0.0.1:49284&quot;&lt;/span&gt; daemon prio=3 tid=0x0068f800 nid=0x32 runnable [0x56ffe000]
&lt;/span&gt;   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:115)
	at java.io.DataOutputStream.flush(DataOutputStream.java:106)
	at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:168)
	at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:243)
	- locked &amp;lt;0x5c2daab0&amp;gt; (a java.util.concurrent.atomic.AtomicBoolean)
	at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:83)
	at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:104)
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)
	- locked &amp;lt;0x5c2da520&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1205)
	at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:790)
	at org.apache.activemq.broker.TransportConnection.dispatchSync(TransportConnection.java:750)
	at org.apache.activemq.broker.region.PrefetchSubscription.dispatch(PrefetchSubscription.java:647)
	at org.apache.activemq.broker.region.PrefetchSubscription.dispatchPending(PrefetchSubscription.java:592)
	- locked &amp;lt;0x5c2db3a0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	- locked &amp;lt;0x5c2db3a8&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.region.PrefetchSubscription.add(PrefetchSubscription.java:158)
	at org.apache.activemq.broker.region.Queue.doActualDispatch(Queue.java:1548)
	at org.apache.activemq.broker.region.Queue.doDispatch(Queue.java:1500)
	- locked &amp;lt;0x5c2db500&amp;gt; (a java.util.ArrayList)
	- locked &amp;lt;0x5c2db518&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1585)
	at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1219)
	- locked &amp;lt;0x5c2db520&amp;gt; (a org.apache.activemq.broker.region.Queue$3)
	at org.apache.activemq.broker.region.Queue.wakeup(Queue.java:1406)
	at org.apache.activemq.broker.region.Queue.addSubscription(Queue.java:377)
	at org.apache.activemq.broker.region.AbstractRegion.addConsumer(AbstractRegion.java:279)
	- locked &amp;lt;0x5c2db590&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.broker.region.RegionBroker.addConsumer(RegionBroker.java:380)
	at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:86)
	at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:86)
	at org.apache.activemq.advisory.AdvisoryBroker.addConsumer(AdvisoryBroker.java:89)
	at org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:86)
	at org.apache.activemq.broker.MutableBrokerFilter.addConsumer(MutableBrokerFilter.java:93)
	at org.apache.activemq.broker.TransportConnection.processAddConsumer(TransportConnection.java:533)
	at org.apache.activemq.command.ConsumerInfo.visit(ConsumerInfo.java:349)
	at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:300)
	at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)
	at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)
	at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
	at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:216)
	- locked &amp;lt;0x5c2dab30&amp;gt; (a org.apache.activemq.transport.InactivityMonitor$1)
	at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)
	at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:204)
	at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)

&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ Transport: tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost/127.0.0.1:61616&quot;&lt;/span&gt; prio=3 tid=0x007c9000 nid=0x2e waiting on condition [0x569fe000]
&lt;/span&gt;   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x5c2b1950&amp;gt; (a java.util.concurrent.CountDownLatch$Sync)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:947)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1239)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:253)
	at org.apache.activemq.ActiveMQConnection.waitForTransportInterruptionProcessing(ActiveMQConnection.java:2248)
	at org.apache.activemq.ActiveMQConnection$2.processMessageDispatch(ActiveMQConnection.java:1679)
	at org.apache.activemq.command.MessageDispatch.visit(MessageDispatch.java:108)
	at org.apache.activemq.ActiveMQConnection.onCommand(ActiveMQConnection.java:1676)
	at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:116)
	at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)
	at org.apache.activemq.transport.failover.FailoverTransport$3.onCommand(FailoverTransport.java:168)
	at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
	at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:216)
	- locked &amp;lt;0x5c2db138&amp;gt; (a org.apache.activemq.transport.InactivityMonitor$1)
	at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)
	at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:204)
	at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)


&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ Session Task&quot;&lt;/span&gt; prio=3 tid=0x0076f000 nid=0x25 waiting on condition [0x55ffe000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x5c2e3cd0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)
	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:317)
	at org.apache.activemq.transport.FutureResponse.getResult(FutureResponse.java:40)
	at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:87)
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1262)
	at org.apache.activemq.TransactionContext.syncSendPacketWithInterruptionHandling(TransactionContext.java:666)
	at org.apache.activemq.TransactionContext.commit(TransactionContext.java:299)
	at org.apache.activemq.ActiveMQSession.commit(ActiveMQSession.java:558)
	at org.apache.activemq.transport.failover.FailoverConsumerOutstandingCommitTest$2.onMessage(FailoverConsumerOutstandingCommitTest.java:155)
	at org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1204)
	- locked &amp;lt;0x5c2c6088&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)
	at org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)
	at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)
	at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)


&lt;span class=&quot;code-quote&quot;&gt;&quot;ActiveMQ Scheduler&quot;&lt;/span&gt; daemon prio=3 tid=0x006e4c00 nid=0xf waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; monitor entry [0x573ff000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED (on object monitor)
	at org.apache.activemq.ActiveMQMessageConsumer.clearMessagesInProgress(ActiveMQMessageConsumer.java:661)
	- waiting to lock &amp;lt;0x5c2c6088&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.ActiveMQSession$2.run(ActiveMQSession.java:654)
	at org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)
	at java.util.TimerThread.mainLoop(Timer.java:512)
	at java.util.TimerThread.run(Timer.java:462)

&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=3 tid=0x00030800 nid=0x2 waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; monitor entry [0x7eb7d000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED (on object monitor)
	at org.apache.activemq.MessageDispatchChannel.stop(MessageDispatchChannel.java:115)
	- waiting to lock &amp;lt;0x5c2c6088&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at org.apache.activemq.ActiveMQMessageConsumer.stop(ActiveMQMessageConsumer.java:1312)
	at org.apache.activemq.ActiveMQSession.stop(ActiveMQSession.java:1643)
	at org.apache.activemq.ActiveMQConnection.stop(ActiveMQConnection.java:544)
	- locked &amp;lt;0x5c2ae5d8&amp;gt; (a java.util.concurrent.CopyOnWriteArrayList)
	at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:597)
	at org.apache.activemq.transport.failover.FailoverConsumerOutstandingCommitTest.doTestFailoverConsumerDups(FailoverConsumerOutstandingCommitTest.java:185)
	at org.apache.activemq.transport.failover.FailoverConsumerOutstandingCommitTest.testFailoverConsumerDups(FailoverConsumerOutstandingCommitTest.java:104)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
	at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
	at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
	at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
	at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:165)
	at org.apache.maven.surefire.Surefire.run(Surefire.java:107)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:289)
	at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1005)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;loaded machine where thread creation is slow&lt;/p&gt;</environment>
        <key id="12482799">AMQ-2693</key>
            <summary>potential hang with failover, transactions and slow thread creation with outstanding commit - close blocks pending dispatch  FailoverConsumerOutstandingCommitTest intermittent failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2010 13:58:58 +0000</created>
                <updated>Tue, 13 Jul 2010 09:32:03 +0000</updated>
                            <resolved>Mon, 12 Apr 2010 14:04:06 +0000</resolved>
                                    <version>5.3.0</version>
                    <version>5.3.1</version>
                                    <fixVersion>5.4.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12942394" author="gtully" created="Mon, 12 Apr 2010 14:04:06 +0000"  >&lt;p&gt;resolved r933240  &lt;br/&gt;
prefetch=0|1 is a workaround for this issue as is this fix.&lt;/p&gt;</comment>
                            <comment id="12942451" author="eric-awl" created="Tue, 13 Jul 2010 08:34:13 +0000"  >&lt;p&gt;Problem seems to be localized here &lt;/p&gt;

&lt;p&gt;When it works Ok : &lt;/p&gt;

&lt;p&gt; 09:11:02,704 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG AbstractRegion                 - localhost removing consumer: ID:td0sib01s.priv.atos.fr-53632-1279005032084-2:3:2:1 for destination: queue://FailoverWithOutstandingCommit &lt;/p&gt;

&lt;p&gt;2010-07-13 09:11:02,705 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; WARN  FailoverTransport              - Transport failed to tcp://localhost:61616 , attempting to automatically reconnect due to: java.io.EOFException &lt;br/&gt;
2010-07-13 09:11:02,705 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG Queue                          - remove sub: QueueSubscription: consumer=ID:td0sib01s.priv.atos.fr-53632-1279005032084-2:3:2:1, destinations=1, dispatched=1, delivered=0, pending=0, lastDeliveredSeqId: 0, dequeues: 0, dispatched: 1, inflight: 1 &lt;br/&gt;
2010-07-13 09:11:02,705 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; DEBUG FailoverTransport              - Transport failed with the following exception: &lt;br/&gt;
java.io.EOFException &lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:375) &lt;br/&gt;
        at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:269) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:211) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:203) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619) &lt;br/&gt;
2010-07-13 09:11:02,705 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; DEBUG ActiveMQConnection             - transport interrupted, dispatchers: 1 &lt;/p&gt;


&lt;p&gt;2010-07-13 09:11:02,706 &lt;span class=&quot;error&quot;&gt;&amp;#91;iveMQ Scheduler&amp;#93;&lt;/span&gt; DEBUG ActiveMQMessageConsumer        - ID:td0sib01s.priv.atos.fr-53632-1279005032084-2:3:2:1 clearing dispatched list (0) on transport interrupt &lt;/p&gt;


&lt;p&gt;2010-07-13 09:11:02,706 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG FailoverTransport              - urlList connectionList:&lt;span class=&quot;error&quot;&gt;&amp;#91;tcp://localhost:61616&amp;#93;&lt;/span&gt; &lt;br/&gt;
2010-07-13 09:11:02,706 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG Queue                          - FailoverWithOutstandingCommit toPageIn: 0, Inflight: 0, pagedInMessages.size 1, enqueueSize: 1 &lt;br/&gt;
2010-07-13 09:11:02,706 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG FailoverTransport              - Attempting connect to: tcp://localhost:61616 &lt;/p&gt;

&lt;p&gt;2010-07-13 09:11:02,707 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG AbstractRegion                 - localhost removing consumer: ID:td0sib01s.priv.atos.fr-53632-1279005032084-2:3:-1:1 for destination: topic://ActiveMQ.Advisory.TempQueue,topic://ActiveMQ.Advisory.TempTopic &lt;br/&gt;
..... &lt;/p&gt;


&lt;p&gt;When it blocks &lt;/p&gt;

&lt;p&gt;2010-07-13 09:00:35,721 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG AbstractRegion                 - localhost removing consumer: ID:td0sib02s.priv.atos.fr-59537-1279004433513-2:0:-1:1 for destination: topic://ActiveMQ.Advisory.TempQueue,topic://ActiveMQ.Advisory.TempTopic &lt;br/&gt;
... &lt;br/&gt;
2010-07-13 09:00:35,722 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG AbstractRegion                 - localhost removing consumer: ID:td0sib02s.priv.atos.fr-59537-1279004433513-2:0:2:1 for destination: queue://FailoverWithOutstandingCommit &lt;/p&gt;


&lt;p&gt;2010-07-13 09:00:35,722 &lt;span class=&quot;error&quot;&gt;&amp;#91;ActiveMQ Task  &amp;#93;&lt;/span&gt; DEBUG Queue                          - remove sub: QueueSubscription: consumer=ID:td0sib02s.priv.atos.fr-59537-1279004433513-2:0:2:1, destinations=1, dispatched=11, delivered=1, pending=0, lastDeliveredSeqId: 0, dequeues: 0, dispatched: 11, inflight: 11 &lt;br/&gt;
2010-07-13 09:00:35,723 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; WARN  FailoverTransport              - Transport failed to tcp://localhost:61616 , attempting to automatically reconnect due to: java.io.EOFException &lt;br/&gt;
2010-07-13 09:00:35,724 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; DEBUG FailoverTransport              - Transport failed with the following exception: &lt;/p&gt;

&lt;p&gt;2010-07-13 09:00:35,724 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; DEBUG FailoverTransport              - Transport failed with the following exception: &lt;br/&gt;
java.io.EOFException &lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:375) &lt;br/&gt;
        at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:269) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:211) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:203) &lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619) &lt;br/&gt;
2010-07-13 09:00:35,724 &lt;span class=&quot;error&quot;&gt;&amp;#91;BrokerService  &amp;#93;&lt;/span&gt; DEBUG Queue                          - FailoverWithOutstandingCommit toPageIn: 0, Inflight: 0, pagedInMessages.size 20, enqueueSize: 20 &lt;br/&gt;
2010-07-13 09:00:35,725 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; DEBUG ActiveMQConnection             - transport interrupted, dispatchers: 1 &lt;br/&gt;
... &lt;br/&gt;
2010-07-13 09:01:05,907 &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:61616&amp;#93;&lt;/span&gt; WARN  ActiveMQConnection             - dispatch paused, waiting for outstanding dispatch interruption processing (1) to complete.. &lt;br/&gt;
.... &lt;/p&gt;


&lt;p&gt;It&apos;s the way messageConsumers (and corresponding sessions) are cleared that impacts the &quot;transportInterruptionProcessingComplete&quot;  countdown latch value &lt;/p&gt;

&lt;p&gt;Eric-AWL &lt;/p&gt;
</comment>
                            <comment id="12942467" author="gtully" created="Tue, 13 Jul 2010 09:32:03 +0000"  >&lt;p&gt;Are you seeing this failure on trunk or on the 5.3.2 branch? do you need to reopen this issue?&lt;/p&gt;

&lt;p&gt;TRACE level debug will also help a little here. Any outstanding connection/consumer/producer is replayed by the ConnectionStateTracker and this is visible with TRACE.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rq47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>