<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:41:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2212] RAR on Weblogic: embedded broker fails to start with : org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [broker-config.xml]; nested exception is java.io.FileNotFoundException: class </title>
                <link>https://issues.apache.org/jira/browse/AMQ-2212</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;Apr 16, 2009 10:21:12 PM IST&amp;gt; &amp;lt;Warning&amp;gt; &amp;lt;Socket&amp;gt; &amp;lt;BEA-000402&amp;gt; &amp;lt;There are: 5 active sockets, but the maximum number of socket reader threads allowed by the configuration is: 4. You may want to alter your configuration.&amp;gt; 
&amp;lt;Apr 16, 2009 10:21:53 PM IST&amp;gt; &amp;lt;Warning&amp;gt; &amp;lt;netuix&amp;gt; &amp;lt;BEA-423420&amp;gt; &amp;lt;Redirect is executed in begin or refresh action. Redirect url is /console/console.portal?_nfpb=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;_pageLabel=HomePage1.&amp;gt; 
&amp;lt;Apr 16, 2009 10:23:25 PM IST&amp;gt; &amp;lt;Warning&amp;gt; &amp;lt;Connector&amp;gt; &amp;lt;BEA-190155&amp;gt; &amp;lt;Compliance checking/validation of the resource adapter /Users/gtully/j2ee/bea/user_projects/domains/base_domain/servers/AdminServer/upload/activemq-rar-5.3-SNAPSHOT.rar resulted in the following warnings:
The ra.xml &amp;lt;resourceadapter-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt; class &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.activemq.ra.ActiveMQResourceAdapter&apos;&lt;/span&gt; should implement java.io.Serializable but does not.&amp;gt; 
2009-04-16 22:23:26,074 [ (self-tuning)&apos;] DEBUG ActiveMQResourceAdapter        - setting [password] property
2009-04-16 22:23:26,074 [ (self-tuning)&apos;] DEBUG ActiveMQResourceAdapter        - setting [useInboundSession] to: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2009-04-16 22:23:26,075 [ (self-tuning)&apos;] DEBUG ActiveMQResourceAdapter        - setting [serverUrl] to: tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:61616
&lt;/span&gt;2009-04-16 22:23:26,075 [ (self-tuning)&apos;] DEBUG ActiveMQResourceAdapter        - setting [userName] to: defaultUser
&amp;lt;Apr 16, 2009 10:23:26 PM IST&amp;gt; &amp;lt;Warning&amp;gt; &amp;lt;WorkManager&amp;gt; &amp;lt;BEA-002919&amp;gt; &amp;lt;Unable to find a WorkManager with name activemq-rar-5.3-SNAPSHOT.rar. Dispatch policy activemq-rar-5.3-SNAPSHOT.rar will map to the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; WorkManager &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the application activemq-rar-5&amp;gt; 
2009-04-16 22:23:26,432 [ActiveMQ Broker] DEBUG XBeanBrokerFactory             - Now attempting to figure out the type of resource: broker-config.xml
2009-04-16 22:23:26,679 [ActiveMQ Broker] INFO  ResourceXmlApplicationContext  - Refreshing org.apache.xbean.spring.context.ResourceXmlApplicationContext@22886042: display name [org.apache.xbean.spring.context.ResourceXmlApplicationContext@22886042]; startup date [Thu Apr 16 22:23:26 IST 2009]; root of context hierarchy
2009-04-16 22:23:27,409 [ActiveMQ Broker] INFO  XBeanXmlBeanDefinitionReader   - Loading XML bean definitions from &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml]
2009-04-16 22:23:27,416 [ActiveMQ Broker] WARN  ActiveMQResourceAdapter        - Could not start up embeded ActiveMQ Broker &lt;span class=&quot;code-quote&quot;&gt;&apos;xbean:broker-config.xml&apos;&lt;/span&gt;: IOException parsing XML document from &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml]; nested exception is java.io.FileNotFoundException: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml] cannot be opened because it does not exist
2009-04-16 22:23:27,450 [ActiveMQ Broker] DEBUG ActiveMQResourceAdapter        - Reason &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: IOException parsing XML document from &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml]; nested exception is java.io.FileNotFoundException: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml] cannot be opened because it does not exist
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml]; nested exception is java.io.FileNotFoundException: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml] cannot be opened because it does not exist
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:349)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:111)
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:104)
	at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
	at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:423)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:353)
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.&amp;lt;init&amp;gt;(ResourceXmlApplicationContext.java:64)
	at org.apache.xbean.spring.context.ResourceXmlApplicationContext.&amp;lt;init&amp;gt;(ResourceXmlApplicationContext.java:52)
	at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:96)
	at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:52)
	at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)
	at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)
	at org.apache.activemq.ra.ActiveMQResourceAdapter$1.run(ActiveMQResourceAdapter.java:78)
Caused by: java.io.FileNotFoundException: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path resource [broker-config.xml] cannot be opened because it does not exist
	at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:142)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	... 13 more
2009-04-16 22:23:27,468 [ (self-tuning)&apos;] DEBUG tiveMQManagedConnectionFactory - copying standard ResourceAdapter configuration properties
2009-04-16 22:23:27,468 [ (self-tuning)&apos;] DEBUG tiveMQManagedConnectionFactory - setting [clientid] to: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2009-04-16 22:23:27,468 [ (self-tuning)&apos;] DEBUG tiveMQManagedConnectionFactory - setting [password] property
2009-04-16 22:23:27,468 [ (self-tuning)&apos;] DEBUG tiveMQManagedConnectionFactory - setting [serverUrl] to: tcp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:61616&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12482135">AMQ-2212</key>
            <summary>RAR on Weblogic: embedded broker fails to start with : org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [broker-config.xml]; nested exception is java.io.FileNotFoundException: class </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Apr 2009 15:09:22 +0000</created>
                <updated>Mon, 26 Oct 2009 14:34:41 +0000</updated>
                            <resolved>Mon, 26 Oct 2009 14:34:41 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>JCA Container</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12941195" author="gtully" created="Fri, 17 Apr 2009 15:18:32 +0000"  >&lt;p&gt;To use xbean to load an xml configuration, the spring dependencies need to be included in the RAR. spring-core and spring-context&lt;/p&gt;

&lt;p&gt;The classloader used by the BrokerXBeanContext needs to provide access to the contents of the RAR. &lt;br/&gt;
Setting the thread context class loader for the thread that starts the broker to the classoader that loads the ResourceAdapter makes this happen for weblogic 10 and works also on Jboss 5.&lt;/p&gt;

&lt;p&gt;The default xml configuration file from the root of the RAR may not be sufficient. It is reasonable to update this config and leave it in the RAR or change the value of the BrokerXmlConfig property in the META-INF/ra.xml to point to an external location.&lt;/p&gt;

&lt;p&gt;It is possible to use the weblogic console to deploy a plan.xml and contained/generated weblogic-ra.xml that will overide the BrokerXmlConfig to allow an external config file to be generated, without modifying the RAR at all.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.0&apos;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&apos;UTF-8&apos;&lt;/span&gt;?&amp;gt;
&amp;lt;weblogic-connector xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.bea.com/ns/weblogic/weblogic-connector&quot;&lt;/span&gt; 
&lt;/span&gt;    xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt; xsi:schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.bea.com/ns/weblogic/weblogic-connector http://www.bea.com/ns/weblogic/weblogic-connector/1.0/weblogic-connector.xsd&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;  &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-libdir&amp;gt;&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-libdir&amp;gt;
  &amp;lt;jndi-name&amp;gt;ActiveMQ&amp;lt;/jndi-name&amp;gt;
  &amp;lt;enable-access-outside-app&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/enable-access-outside-app&amp;gt;
  &amp;lt;enable-global-access-to-classes&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/enable-global-access-to-classes&amp;gt;
  &amp;lt;security&amp;gt;&amp;lt;/security&amp;gt;
  &amp;lt;properties&amp;gt;
    &amp;lt;property&amp;gt;
      &amp;lt;name&amp;gt;BrokerXmlConfig&amp;lt;/name&amp;gt;
      &amp;lt;value&amp;gt;xbean:file:&lt;span class=&quot;code-comment&quot;&gt;///tmp/broker-config.xml&amp;lt;/value&amp;gt;
&lt;/span&gt;    &amp;lt;/property&amp;gt;
  &amp;lt;/properties&amp;gt;
  &amp;lt;admin-objects&amp;gt;
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12941194" author="gtully" created="Fri, 17 Apr 2009 15:37:04 +0000"  >&lt;p&gt;r766053&lt;br/&gt;
verified on jboss5 and weblogic10&lt;br/&gt;
Added log4j.properties to the rar so that info/errors appear on weblogic console now that log4j is configured for the RAR.&lt;br/&gt;
Reduced the complexity of the embedded broker-config and suppressed the use of shutdownHook as the RAR classes are not available to the shutdown handler. ActiveMQ is terminated by the RAR lifecycle just fine.&lt;/p&gt;</comment>
                            <comment id="12941632" author="bsnyder" created="Fri, 26 Jun 2009 17:46:59 +0000"  >&lt;p&gt;It would be great if you could update the &lt;a href=&quot;http://activemq.apache.org/integrating-apache-activemq-with-jboss.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JBoss integration page&lt;/a&gt; and the &lt;a href=&quot;http://activemq.apache.org/weblogic-integration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Weblogic integration page&lt;/a&gt; with these details. &lt;/p&gt;</comment>
                            <comment id="12941584" author="hkusuma" created="Sat, 26 Sep 2009 17:29:11 +0000"  >&lt;p&gt;don&apos;t forget to include spring-beans-x.x.x.jar (jboss integration)&lt;/p&gt;</comment>
                            <comment id="12941092" author="matvey" created="Mon, 26 Oct 2009 07:59:48 +0000"  >&lt;p&gt;Sorry, the documentation is still out of date,with JBOSS 5.1.0 and ActiveMQ 5.3 it does not work in any combination:&lt;/p&gt;

&lt;p&gt;I&apos;ve tried different path combinations in ra.xml descriptor:&lt;br/&gt;
&amp;lt;config-property-value&amp;gt;xbean:&lt;a href=&quot;file:///broker-config.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///broker-config.xml&lt;/a&gt;&amp;lt;/config-property-value&amp;gt;&lt;/p&gt;

&lt;p&gt;creating symlinks, copies of this file etc etc... spring libraries are in server/default/deploy/activemq-ra.rar directory&lt;br/&gt;
broker-config.xml is also located there... no chance, it can not start ActiveMQ Broker in any combination. But what&apos;s really interesting: If I put any Camel config in broker-config.xml - it starts Camel ant makes several attempts to reach ActiveMQ Server... unsucessfully.&lt;/p&gt;</comment>
                            <comment id="12941321" author="matvey" created="Mon, 26 Oct 2009 14:34:41 +0000"  >&lt;p&gt;actually wit the following config you do not need to use xbean:file if your config is directly under RA directory:&lt;br/&gt;
Jboss 5.1.0 + ActiveMQ 5.3 + Camel 2.0 + Spring 2.5&lt;/p&gt;

&lt;p&gt;params from  /META-INF/ra.xml (ActiveMQ Resource Adapter)&lt;br/&gt;
&amp;lt;config-property&amp;gt;&lt;br/&gt;
            &amp;lt;config-property-name&amp;gt;BrokerXmlConfig&amp;lt;/config-property-name&amp;gt;&lt;br/&gt;
            &amp;lt;config-property-type&amp;gt;java.lang.String&amp;lt;/config-property-type&amp;gt;&lt;br/&gt;
            &amp;lt;config-property-value&amp;gt;xbean:broker-config.xml&amp;lt;/config-property-value&amp;gt;&lt;br/&gt;
&amp;lt;/config-property&amp;gt; &lt;/p&gt;


&lt;p&gt;you just need to add xmlns to your broker definition (broker-config.xml file), in another case it will not start:&lt;/p&gt;

&lt;p&gt;&amp;lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; useJmx=&quot;true&quot; useShutdownHook=&quot;false&quot; id=&quot;broker&quot; name=&quot;bruce.broker&quot;&amp;gt; &lt;/p&gt;

&lt;p&gt;that&apos;s it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s0sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>