<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:42:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1936] Duplicate message received when producing and consuming concurrently</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1936</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;We are receiving duplicate messages when processing a moderate numbers of messages ( ~60,000 ), I have attached a JUNIT test which re-produces the issue on my machine with the broker configuration file used. Please note that It does take a few minutes to generate the test failure.&lt;/p&gt;

&lt;p&gt;The test needs to be run with increased heap memory using the JMV option -Xmx512m&lt;/p&gt;

&lt;p&gt;We initially found the issue using the IONA Fuse version 5.1.0.0 which would produce the same issue at 30,000 messages and without persistence storage. I later downloaded the ActiveMQ 5.1.0 version which would pass at 30,000 but fail at 60,000.&lt;/p&gt;

&lt;p&gt;It is causing major issues for our project and hindering our application from going to production.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Dell Precision with 2.13GHz dual core, 3.25 GB RAM running on Windows XP SP2. Test is running on JDK1.5.0_12.&lt;/p&gt;</environment>
        <key id="12482682">AMQ-1936</key>
            <summary>Duplicate message received when producing and consuming concurrently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="johnnyboy">Johnny</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Sep 2008 22:28:29 +0000</created>
                <updated>Thu, 10 Sep 2009 23:05:44 +0000</updated>
                            <resolved>Fri, 7 Aug 2009 10:33:07 +0000</resolved>
                                    <version>5.1.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12940238" author="rajdavies" created="Tue, 23 Sep 2008 05:38:06 +0000"  >&lt;p&gt;Can you re-attach ActiveMQDuplicateMessageTest.java and click the grant asf option ?&lt;/p&gt;</comment>
                            <comment id="12940249" author="johnnyboy" created="Tue, 23 Sep 2008 06:27:20 +0000"  >&lt;p&gt;Hi Rob, Unit test re-attached with ASF grant. Thanks, Johnny&lt;/p&gt;</comment>
                            <comment id="12940257" author="rajdavies" created="Tue, 23 Sep 2008 06:41:50 +0000"  >&lt;p&gt;This looks resolved on trunk&lt;/p&gt;</comment>
                            <comment id="12940283" author="johnnyboy" created="Mon, 29 Sep 2008 21:30:42 +0000"  >&lt;p&gt;Hi Rob,&lt;/p&gt;

&lt;p&gt;I&apos;ve downloaded the 5.3 snapshot and re-run the test against it and it still has a duplicate message failure.&lt;/p&gt;

&lt;p&gt;Snapshot was : apache-activemq-5.3-20080922.231550-14-bin.zip&lt;/p&gt;

&lt;p&gt;Would you expect the fix to be included in this snapshot?&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Johnny&lt;/p&gt;</comment>
                            <comment id="12940940" author="dunc" created="Mon, 9 Mar 2009 22:13:08 +0000"  >&lt;p&gt;Did either of you manage to work around this problem?&lt;/p&gt;

&lt;p&gt;We are experiencing exactly the same thing. We first started noticing exceptions due to duplicate messages being processed (100% sure duplicates weren&apos;t being written to the queue) - we then tried what was mentioned above about JConsole and saw the queue with a negative count.&lt;/p&gt;

&lt;p&gt;Were either of you able to confirm whether the issue was particularly to do with having multiple concurrent consumers on the queue?&lt;/p&gt;

&lt;p&gt;Rob, did the unit test work on your environment (was wondering if I should try it)?&lt;/p&gt;

&lt;p&gt;Duncan&lt;/p&gt;</comment>
                            <comment id="12941352" author="rajdavies" created="Sat, 23 May 2009 06:13:19 +0000"  >&lt;p&gt;Added test case - see activemq-core/src/test/java/org/apache/activemq/bugs/AMQ1936Test.java - as SVN revision 777803.&lt;br/&gt;
Cannot reproduce this issue on the current trunk&lt;/p&gt;</comment>
                            <comment id="12941393" author="dejanb" created="Thu, 28 May 2009 10:46:36 +0000"  >&lt;p&gt;This test hangs on some Linux machines (during CI). Needs some more investigation.&lt;/p&gt;</comment>
                            <comment id="12941772" author="gtully" created="Wed, 22 Jul 2009 15:18:24 +0000"  >&lt;p&gt;renabled this test on trunk to see what hudson throws up&lt;/p&gt;</comment>
                            <comment id="12940952" author="gtully" created="Fri, 7 Aug 2009 10:33:07 +0000"  >&lt;p&gt;this does look resolved. The test case has been running happily for a few days now and on a bunch of hardware via fuse tc.&lt;/p&gt;</comment>
                            <comment id="12941384" author="dunc" created="Thu, 10 Sep 2009 23:05:44 +0000"  >&lt;p&gt;Issue is definitely resolved.&lt;/p&gt;

&lt;p&gt;I downloaded and ran the test on 5.2 and was able to replicate the problem. I then updated my jars from the latest 5.3 snapshot (20090908200340) and the test now runs successfully without error. Tested running it many times.&lt;/p&gt;

&lt;p&gt;Thanks to all for your help on getting this resolved.&lt;/p&gt;

&lt;p&gt;One question, does anyone know when 5.3 become an official release?&lt;/p&gt;

&lt;p&gt;Thanks Duncan&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12482854">AMQ-1693</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12461188" name="ASF.LICENSE.NOT.GRANTED--activemq-duplicate-msg-check.xml" size="1458" author="johnnyboy" created="Mon, 15 Sep 2008 22:28:29 +0000"/>
                            <attachment id="12461200" name="ASF.LICENSE.NOT.GRANTED--log4j.xml" size="1664" author="johnnyboy" created="Mon, 15 Sep 2008 22:28:29 +0000"/>
                            <attachment id="12461133" name="ActiveMQDuplicateMessageTest.java" size="11249" author="johnnyboy" created="Tue, 23 Sep 2008 06:27:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s23r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>