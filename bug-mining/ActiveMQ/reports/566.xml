<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:39:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2074] Intermittent test failure - QuickJPAStoreRecoveryBrokerTest</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2074</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;running through maven &amp;#8211; failed two times, then succeeded.&lt;br/&gt;
Running in IDEA &amp;#8211; hung once, then all tests passed.&lt;/p&gt;

&lt;p&gt;surefire report:&lt;/p&gt;

&lt;p&gt;  &amp;lt;testcase time=&quot;0.349&quot; name=&quot;testQueueNonPersistentMessagesLostOnRestart&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;error type=&quot;&amp;amp;openjpa-1.0.0-r420667&quot; message=&quot;The context has been closed.  The stack trace at which the context was closed is available if Runtime=TRACE logging is enabled.&quot;&amp;gt;&amp;amp;openjpa-1.0.0-r420667:568756 fatal user error&amp;amp; org.apache.openjpa.persistence.InvalidStateException: The context has been closed.  The stack trace at which the context was closed is available if Runtime=TRACE logging is enabled.&lt;br/&gt;
        at org.apache.openjpa.kernel.BrokerImpl.assertOpen(BrokerImpl.java:4291)&lt;br/&gt;
        at org.apache.openjpa.kernel.BrokerImpl.beginOperation(BrokerImpl.java:1702)&lt;br/&gt;
        at org.apache.openjpa.kernel.BrokerImpl.getUserObject(BrokerImpl.java:563)&lt;br/&gt;
        at org.apache.openjpa.persistence.JPAFacadeHelper.toEntityManager(JPAFacadeHelper.java:113)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.getFailedObject(PersistenceExceptions.java:246)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.translateUserException(PersistenceExceptions.java:190)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.translateException(PersistenceExceptions.java:131)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.getNestedThrowables(PersistenceExceptions.java:233)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.translateUserException(PersistenceExceptions.java:190)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.translateException(PersistenceExceptions.java:131)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions.toPersistenceException(PersistenceExceptions.java:83)&lt;br/&gt;
        at org.apache.openjpa.persistence.PersistenceExceptions$1.translate(PersistenceExceptions.java:43)&lt;br/&gt;
        at org.apache.openjpa.kernel.DelegatingBrokerFactory.translate(DelegatingBrokerFactory.java:96)&lt;br/&gt;
        at org.apache.openjpa.kernel.DelegatingBrokerFactory.close(DelegatingBrokerFactory.java:185)&lt;br/&gt;
        at org.apache.openjpa.persistence.EntityManagerFactoryImpl.close(EntityManagerFactoryImpl.java:286)&lt;br/&gt;
        at org.apache.activemq.store.jpa.JPAPersistenceAdapter.stop(JPAPersistenceAdapter.java:214)&lt;br/&gt;
        at org.apache.activemq.store.amq.AMQPersistenceAdapter.stop(AMQPersistenceAdapter.java:327)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stop(BrokerService.java:512)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerTestSupport.tearDown(BrokerTestSupport.java:101)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
        at org.apache.activemq.CombinationTestSupport.runBare(CombinationTestSupport.java:90)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:210)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:135)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:122)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.run(Surefire.java:129)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:225)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:747)&lt;br/&gt;
&amp;lt;/error&amp;gt;&lt;br/&gt;
    &amp;lt;system-err&amp;gt;1  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
1  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &amp;quot;org.apache.openjpa.jdbc.sql.DerbyDictionary&amp;quot;.&lt;br/&gt;
52  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - Creating subclass and redefining methods for &amp;quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;class org.apache.activemq.store.jpa.model.StoredMessage, class org.apache.activemq.store.jpa.model.StoredMessageReference&amp;#93;&lt;/span&gt;&amp;quot;. This means that your application will be less efficient than it would if you ran the OpenJPA enhancer.&lt;br/&gt;
0  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
0  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &amp;quot;org.apache.openjpa.jdbc.sql.DerbyDictionary&amp;quot;.&lt;br/&gt;
55  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - Creating subclass and redefining methods for &amp;quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;class org.apache.activemq.store.jpa.model.StoredMessage, class org.apache.activemq.store.jpa.model.StoredMessageReference&amp;#93;&lt;/span&gt;&amp;quot;. This means that your application will be less efficient than it would if you ran the OpenJPA enhancer.&lt;br/&gt;
&amp;lt;/system-err&amp;gt;&lt;br/&gt;
  &amp;lt;/testcase&amp;gt;&lt;/p&gt;

&lt;p&gt;2nd report:&lt;/p&gt;

&lt;p&gt;  &amp;lt;testcase time=&quot;0.398&quot; name=&quot;testQueueNonPersistentMessagesLostOnRestart&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;error type=&quot;&amp;amp;openjpa-1.0.0-r420667&quot; message=&quot;This operation failed for some instances.  See the nested exceptions array for details.&quot;&amp;gt;&amp;amp;openjpa-1.0.0-r420667:568756 nonfatal user error&amp;amp; org.apache.openjpa.persistence.InvalidStateException: This operation failed for some instances.  See the nested exceptions array for details.&lt;br/&gt;
        at org.apache.openjpa.kernel.AbstractBrokerFactory.assertNoActiveTransaction(AbstractBrokerFactory.java:696)&lt;br/&gt;
        at org.apache.openjpa.kernel.AbstractBrokerFactory.close(AbstractBrokerFactory.java:373)&lt;br/&gt;
        at org.apache.openjpa.kernel.DelegatingBrokerFactory.close(DelegatingBrokerFactory.java:183)&lt;br/&gt;
        at org.apache.openjpa.persistence.EntityManagerFactoryImpl.close(EntityManagerFactoryImpl.java:286)&lt;br/&gt;
        at org.apache.activemq.store.jpa.JPAPersistenceAdapter.stop(JPAPersistenceAdapter.java:214)&lt;br/&gt;
        at org.apache.activemq.store.amq.AMQPersistenceAdapter.stop(AMQPersistenceAdapter.java:327)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stop(BrokerService.java:512)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerTestSupport.tearDown(BrokerTestSupport.java:101)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
        at org.apache.activemq.CombinationTestSupport.runBare(CombinationTestSupport.java:90)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:210)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:135)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:122)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.run(Surefire.java:129)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:225)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:747)&lt;br/&gt;
Caused by: &amp;amp;openjpa-1.0.0-r420667:568756 nonfatal user error&amp;amp; org.apache.openjpa.persistence.InvalidStateException: This operation cannot be performed while a Transaction is active.&lt;br/&gt;
FailedObject: org.apache.openjpa.persistence.EntityManagerImpl@631cb0&lt;br/&gt;
        at org.apache.openjpa.kernel.AbstractBrokerFactory.assertNoActiveTransaction(AbstractBrokerFactory.java:690)&lt;br/&gt;
        ... 30 more&lt;br/&gt;
&amp;lt;/error&amp;gt;&lt;br/&gt;
    &amp;lt;system-err&amp;gt;1  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
4  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &amp;quot;org.apache.openjpa.jdbc.sql.DerbyDictionary&amp;quot;.&lt;br/&gt;
1  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
1  activemq  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &amp;quot;org.apache.openjpa.jdbc.sql.DerbyDictionary&amp;quot;.&lt;br/&gt;
&amp;lt;/system-err&amp;gt;&lt;br/&gt;
  &amp;lt;/testcase&amp;gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;os x 10.5.6&lt;/p&gt;</environment>
        <key id="12481957">AMQ-2074</key>
            <summary>Intermittent test failure - QuickJPAStoreRecoveryBrokerTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="djencks">David Jencks</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Jan 2009 17:09:58 +0000</created>
                <updated>Mon, 23 Feb 2009 14:39:57 +0000</updated>
                            <resolved>Mon, 23 Feb 2009 14:39:57 +0000</resolved>
                                    <version>5.3.0</version>
                                    <fixVersion>5.3.0</fixVersion>
                                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12940811" author="dejanb" created="Mon, 23 Feb 2009 14:39:57 +0000"  >&lt;p&gt;I&apos;ve committed some improvement for this module in SVN revision 747030 and didn&apos;t manage to reproduce the issues afterwards (I ran tests a couple dozen times). Please, reopen it if you see tests failing again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14c3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>