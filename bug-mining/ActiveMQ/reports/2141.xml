<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:02:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-4914] AMQP consumer hangs when receiving large messages</title>
                <link>https://issues.apache.org/jira/browse/AMQ-4914</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The AMQP client hangs when trying to receive messages &amp;gt; 32k.  I will add a test that reproduces this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682167">AMQ-4914</key>
            <summary>AMQP consumer hangs when receiving large messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kearls">Kevin Anthony Earls</assignee>
                                    <reporter username="kearls">Kevin Anthony Earls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Dec 2013 16:39:42 +0000</created>
                <updated>Wed, 2 Apr 2014 22:11:36 +0000</updated>
                            <resolved>Thu, 9 Jan 2014 09:31:02 +0000</resolved>
                                    <version>5.9.0</version>
                                    <fixVersion>5.9.1</fixVersion>
                    <fixVersion>5.10.0</fixVersion>
                                    <component>AMQP</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13843690" author="tabish121" created="Mon, 9 Dec 2013 23:31:32 +0000"  >&lt;p&gt;We seem to be sending the correct amount of data out for the target message, so we probably need to dig into the AMQP JMS client code to see what&apos;s going on during the message unmarshal in order to get a better idea of what&apos;s going on. &lt;/p&gt;</comment>
                            <comment id="13844739" author="tabish121" created="Tue, 10 Dec 2013 22:18:29 +0000"  >&lt;p&gt;The issue in the code seems to stem from a max header frame size value in the AMQP client code.  When the value is greater than the default 32768 than an error is triggered.  This doesn&apos;t unblock the receive call though just drops the incoming message so that&apos;s why this test case fails.  If you tweak the max frame size value in the code then things start working.&lt;/p&gt;</comment>
                            <comment id="13844807" author="tabish121" created="Tue, 10 Dec 2013 23:20:20 +0000"  >&lt;p&gt;Appears that we aren&apos;t setting the max frame size option on the proton transport which causes the QPid JMS side to then default to its preset 32768 value.  We need to ensure that we set the max frame size before the transport is considered initialized otherwise it throws an IllegalStateException.&lt;/p&gt;</comment>
                            <comment id="13845474" author="tabish121" created="Wed, 11 Dec 2013 15:24:23 +0000"  >&lt;p&gt;Seems that setting the max frame size on the proton Transport to much more than 1mb causes issues either in proton or with the QPid JMS client code.  The default in the JMS client is set at 32768 by default, maybe there&apos;s a reason for that given the maturity of that code base. &lt;/p&gt;</comment>
                            <comment id="13846794" author="tom_m" created="Thu, 12 Dec 2013 21:58:14 +0000"  >&lt;p&gt;Can anyone please clarify this issue?  Is this a productive issue, in which version? Does the problem only occur in specific combinations with activemq as amqp broker and qpid client only? Why is the qpid jms client mentioned when amqp is the protocol used? &lt;br/&gt;
This would have an impact in evaluating activemq + amqp for my project. Thanks. &lt;/p&gt;</comment>
                            <comment id="13846801" author="tabish121" created="Thu, 12 Dec 2013 22:03:56 +0000"  >&lt;p&gt;This occurs in our test against the QPid JMS client: &lt;a href=&quot;http://qpid.apache.org/components/qpid-jms/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.apache.org/components/qpid-jms/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tests against the client 0.24 and above show this issue.  YMMV with other clients, we haven&apos;t tested.  &lt;/p&gt;</comment>
                            <comment id="13846924" author="tom_m" created="Thu, 12 Dec 2013 23:45:27 +0000"  >&lt;p&gt;Hi Timothy, &lt;br/&gt;
thanks for your explanation and updates for this issue. &lt;br/&gt;
Do you know about any plans and a concrete timeline for release 5.10 having this one fixed? &lt;/p&gt;</comment>
                            <comment id="13846930" author="tabish121" created="Thu, 12 Dec 2013 23:49:49 +0000"  >&lt;p&gt;First we&apos;d need to figure out if its a broker or client issue.  Releases are done when they&apos;re done, no definite time line for this.  &lt;/p&gt;</comment>
                            <comment id="13865975" author="gsim" created="Wed, 8 Jan 2014 22:15:09 +0000"  >&lt;p&gt;I think this may be addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-5456&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/QPID-5456&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13866470" author="kearls" created="Thu, 9 Jan 2014 09:31:02 +0000"  >&lt;p&gt;Fixed by Tim&apos;s latest change and &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-5456&quot; title=&quot;[AMQP 1.0] client refuses frames smaller than the frame size it indicated was acceptable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-5456&quot;&gt;&lt;del&gt;QPID-5456&lt;/del&gt;&lt;/a&gt;.  Thanks Gordon.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qawn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>