<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:02:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2505] Problem with servicing broker messages when client hostName contains &quot;language specific&quot; characters (org.apache.activemq.util.IdGenerator problem)</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2505</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When name of the activeMQ client machine contains &quot;language specific&quot; letters (e.g. &quot;G&#322;_Ksiegowa&quot;) communication fails:&lt;br/&gt;
&quot;Caused by: java.io.IOException: Failed to broker message: ID:G&#322;_Ksiegowa-1407-1256558735734-0:2:3:1:1 in container: java.io.UTFDataFormatException: bad string &quot;&lt;/p&gt;

&lt;p&gt;To resolve the problem in our system we&apos;ve changed org.apache.activemq.util.IdGenerator code - we replaced line:&lt;/p&gt;

&lt;p&gt;&quot;hostName = InetAddress.getLocalHost().getHostName();&quot;&lt;/p&gt;

&lt;p&gt;with:&lt;/p&gt;

&lt;p&gt;&quot;hostName = InetAddress.getLocalHost().getHostAddress();&quot;&lt;/p&gt;

&lt;p&gt;The whole exception below:&lt;/p&gt;

&lt;p&gt;ERROR 2009-10-26 13:07:30,781 &lt;span class=&quot;error&quot;&gt;&amp;#91;AWT-EventQueue-0&amp;#93;&lt;/span&gt; - Local JMS transaction failed to commit; nested exception is javax.jms.JMSException: POST COMMIT FAILED &lt;br/&gt;
org.springframework.jms.connection.SynchedLocalTransactionFailedException: Local JMS transaction failed to commit; nested exception is javax.jms.JMSException: POST COMMIT FAILED &lt;br/&gt;
at org.springframework.jms.connection.ConnectionFactoryUtils$JmsResourceSynchronization.processResourceAfterCommit(ConnectionFactoryUtils.java:408) &lt;br/&gt;
at org.springframework.transaction.support.ResourceHolderSynchronization.afterCommit(ResourceHolderSynchronization.java:74) &lt;br/&gt;
at org.springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCommit(TransactionSynchronizationUtils.java:114) &lt;br/&gt;
at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerAfterCommit(TransactionSynchronizationUtils.java:100) &lt;br/&gt;
at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerAfterCommit(AbstractPlatformTransactionManager.java:931) &lt;br/&gt;
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:774) &lt;br/&gt;
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:701) &lt;br/&gt;
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:321) &lt;br/&gt;
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116) &lt;br/&gt;
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171) &lt;br/&gt;
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:635) &lt;br/&gt;
at info.fingo.asist.gui.controls.periodslist.status.ReportStatusHelper$$EnhancerByCGLIB$$2dab363.changeReportsStatus(&amp;lt;generated&amp;gt;) &lt;br/&gt;
at info.fingo.asist.action.ChangeReportStatusAction.asistActionPerformed(ChangeReportStatusAction.java:30) &lt;br/&gt;
at info.fingo.asist.action.MultiReportAction.asistActionPerformed(MultiReportAction.java:80) &lt;br/&gt;
at info.fingo.asist.action.AsistAction.fireAsistActionPerformed(AsistAction.java:297) &lt;br/&gt;
at info.fingo.asist.action.AsistAction.actionPerformed(AsistAction.java:322) &lt;br/&gt;
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) &lt;br/&gt;
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) &lt;br/&gt;
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) &lt;br/&gt;
at javax.swing.DefaultButtonModel.setPressed(Unknown Source) &lt;br/&gt;
at javax.swing.AbstractButton.doClick(Unknown Source) &lt;br/&gt;
at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source) &lt;br/&gt;
at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown Source) &lt;br/&gt;
at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source) &lt;br/&gt;
at java.awt.Component.processMouseEvent(Unknown Source) &lt;br/&gt;
at javax.swing.JComponent.processMouseEvent(Unknown Source) &lt;br/&gt;
at java.awt.Component.processEvent(Unknown Source) &lt;br/&gt;
at java.awt.Container.processEvent(Unknown Source) &lt;br/&gt;
at java.awt.Component.dispatchEventImpl(Unknown Source) &lt;br/&gt;
at java.awt.Container.dispatchEventImpl(Unknown Source) &lt;br/&gt;
at java.awt.Component.dispatchEvent(Unknown Source) &lt;br/&gt;
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) &lt;br/&gt;
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) &lt;br/&gt;
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source) &lt;br/&gt;
at java.awt.Container.dispatchEventImpl(Unknown Source) &lt;br/&gt;
at java.awt.Window.dispatchEventImpl(Unknown Source) &lt;br/&gt;
at java.awt.Component.dispatchEvent(Unknown Source) &lt;br/&gt;
at java.awt.EventQueue.dispatchEvent(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.pumpEvents(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.pumpEvents(Unknown Source) &lt;br/&gt;
at java.awt.EventDispatchThread.run(Unknown Source) &lt;br/&gt;
Caused by: javax.jms.JMSException: POST COMMIT FAILED &lt;br/&gt;
at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49) &lt;br/&gt;
at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1244) &lt;br/&gt;
at org.apache.activemq.TransactionContext.commit(TransactionContext.java:263) &lt;br/&gt;
at org.apache.activemq.ActiveMQSession.commit(ActiveMQSession.java:502) &lt;br/&gt;
at org.springframework.jms.connection.JmsResourceHolder.commitAll(JmsResourceHolder.java:182) &lt;br/&gt;
at org.springframework.jms.connection.ConnectionFactoryUtils$JmsResourceSynchronization.processResourceAfterCommit(ConnectionFactoryUtils.java:405) &lt;br/&gt;
... 43 more &lt;br/&gt;
Caused by: javax.transaction.xa.XAException: POST COMMIT FAILED &lt;br/&gt;
at org.apache.activemq.transaction.LocalTransaction.commit(LocalTransaction.java:77) &lt;br/&gt;
at org.apache.activemq.broker.TransactionBroker.commitTransaction(TransactionBroker.java:154) &lt;br/&gt;
at org.apache.activemq.broker.BrokerFilter.commitTransaction(BrokerFilter.java:94) &lt;br/&gt;
at org.apache.activemq.broker.BrokerFilter.commitTransaction(BrokerFilter.java:94) &lt;br/&gt;
at org.apache.activemq.broker.MutableBrokerFilter.commitTransaction(MutableBrokerFilter.java:104) &lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.processCommitTransactionOnePhase(TransportConnection.java:424) &lt;br/&gt;
at org.apache.activemq.command.TransactionInfo.visit(TransactionInfo.java:99) &lt;br/&gt;
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294) &lt;br/&gt;
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:185) &lt;br/&gt;
at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:65) &lt;br/&gt;
at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:133) &lt;br/&gt;
at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:122) &lt;br/&gt;
at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84) &lt;br/&gt;
at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:137) &lt;br/&gt;
at java.lang.Thread.run(Unknown Source) &lt;br/&gt;
Caused by: java.lang.RuntimeException: java.io.IOException: Failed to broker message: ID:G&#322;_Ksiegowa-1407-1256558735734-0:2:3:1:1 in container: java.io.UTFDataFormatException: bad string &lt;br/&gt;
at org.apache.activemq.broker.region.IndirectMessageReference.incrementReferenceCount(IndirectMessageReference.java:103) &lt;br/&gt;
at org.apache.activemq.broker.region.QueueSubscription.dispatch(QueueSubscription.java:170) &lt;br/&gt;
at org.apache.activemq.broker.region.PrefetchSubscription.add(PrefetchSubscription.java:129) &lt;br/&gt;
at org.apache.activemq.broker.region.policy.RoundRobinDispatchPolicy.dispatch(RoundRobinDispatchPolicy.java:58) &lt;br/&gt;
at org.apache.activemq.broker.region.Queue.dispatch(Queue.java:520) &lt;br/&gt;
at org.apache.activemq.broker.region.Queue.access$600(Queue.java:75) &lt;br/&gt;
at org.apache.activemq.broker.region.Queue$3.afterCommit(Queue.java:341) &lt;br/&gt;
at org.apache.activemq.transaction.Transaction.fireAfterCommit(Transaction.java:83) &lt;br/&gt;
at org.apache.activemq.transaction.LocalTransaction.commit(LocalTransaction.java:71) &lt;br/&gt;
... 14 more &lt;br/&gt;
Caused by: java.io.IOException: Failed to broker message: ID:G&#322;_Ksiegowa-1407-1256558735734-0:2:3:1:1 in container: java.io.UTFDataFormatException: bad string &lt;br/&gt;
at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:31) &lt;br/&gt;
at org.apache.activemq.store.jdbc.JDBCMessageStore.getMessage(JDBCMessageStore.java:107) &lt;br/&gt;
at org.apache.activemq.store.ProxyMessageStore.getMessage(ProxyMessageStore.java:48) &lt;br/&gt;
at org.apache.activemq.broker.region.IndirectMessageReference.incrementReferenceCount(IndirectMessageReference.java:95) &lt;br/&gt;
... 22 more &lt;br/&gt;
Caused by: java.io.UTFDataFormatException: bad string &lt;br/&gt;
at org.apache.activemq.util.DataByteArrayInputStream.readUTF(DataByteArrayInputStream.java:277) &lt;br/&gt;
at org.apache.activemq.openwire.v2.BaseDataStreamMarshaller.looseUnmarshalString(BaseDataStreamMarshaller.java:536) &lt;br/&gt;
at org.apache.activemq.openwire.v2.ConnectionIdMarshaller.looseUnmarshal(ConnectionIdMarshaller.java:113) &lt;br/&gt;
at org.apache.activemq.openwire.OpenWireFormat.looseUnmarshalNestedObject(OpenWireFormat.java:445) &lt;br/&gt;
at org.apache.activemq.openwire.v2.BaseDataStreamMarshaller.looseUnmarsalCachedObject(BaseDataStreamMarshaller.java:454) &lt;br/&gt;
at org.apache.activemq.openwire.v2.LocalTransactionIdMarshaller.looseUnmarshal(LocalTransactionIdMarshaller.java:117) &lt;br/&gt;
at org.apache.activemq.openwire.OpenWireFormat.looseUnmarshalNestedObject(OpenWireFormat.java:445) &lt;br/&gt;
at org.apache.activemq.openwire.v2.BaseDataStreamMarshaller.looseUnmarsalCachedObject(BaseDataStreamMarshaller.java:454) &lt;br/&gt;
at org.apache.activemq.openwire.v2.MessageMarshaller.looseUnmarshal(MessageMarshaller.java:195) &lt;br/&gt;
at org.apache.activemq.openwire.v2.ActiveMQMessageMarshaller.looseUnmarshal(ActiveMQMessageMarshaller.java:101) &lt;br/&gt;
at org.apache.activemq.openwire.v2.ActiveMQObjectMessageMarshaller.looseUnmarshal(ActiveMQObjectMessageMarshaller.java:101) &lt;br/&gt;
at org.apache.activemq.openwire.OpenWireFormat.doUnmarshal(OpenWireFormat.java:349) &lt;br/&gt;
at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:204) &lt;br/&gt;
at org.apache.activemq.store.jdbc.JDBCMessageStore.getMessage(JDBCMessageStore.java:104) &lt;br/&gt;
... 24 more  &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP SP2&lt;/p&gt;</environment>
        <key id="12483571">AMQ-2505</key>
            <summary>Problem with servicing broker messages when client hostName contains &quot;language specific&quot; characters (org.apache.activemq.util.IdGenerator problem)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sniegu">Pawel Sniezek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2009 10:53:31 +0000</created>
                <updated>Wed, 2 Apr 2014 23:45:46 +0000</updated>
                            <resolved>Wed, 13 Nov 2013 15:36:48 +0000</resolved>
                                    <version>5.2.0</version>
                                    <fixVersion>5.9.1</fixVersion>
                    <fixVersion>5.10.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13821428" author="davsclaus" created="Wed, 13 Nov 2013 15:36:48 +0000"  >&lt;p&gt;We now sanitize the hostname when generating the id stub, to only only ascii chars.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>44172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0alkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59767</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>