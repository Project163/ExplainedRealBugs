<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:34:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1475] deadlock in Usage &amp; Topic</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1475</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Found one Java-level deadlock:&lt;br/&gt;
=============================&lt;br/&gt;
&quot;ActiveMQ Task&quot;:&lt;br/&gt;
  waiting to lock monitor 0x081615fc (object 0xa3ba9c38, a java.util.LinkedList),&lt;br/&gt;
  which is held by &quot;ActiveMQ Transport: tcp:///192.168.1.119:40586&quot;&lt;br/&gt;
&quot;ActiveMQ Transport: tcp:///192.168.1.119:40586&quot;:&lt;br/&gt;
  waiting to lock monitor 0x08161598 (object 0xa3badb80, a java.lang.Object),&lt;br/&gt;
  which is held by &quot;ActiveMQ Task&quot;&lt;/p&gt;

&lt;p&gt;Java stack information for the threads listed above:&lt;br/&gt;
===================================================&lt;br/&gt;
&quot;ActiveMQ Task&quot;:&lt;br/&gt;
        at org.apache.activemq.broker.region.Topic$1.run(Topic.java:94)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;0xa3ba9c38&amp;gt; (a java.util.LinkedList)&lt;br/&gt;
        at org.apache.activemq.usage.Usage.fireEvent(Usage.java:255)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa3badb80&amp;gt; (a java.lang.Object)&lt;br/&gt;
        at org.apache.activemq.usage.Usage.setPercentUsage(Usage.java:232)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa3badb80&amp;gt; (a java.lang.Object)&lt;br/&gt;
        at org.apache.activemq.usage.MemoryUsage.decreaseUsage(MemoryUsage.java:149)&lt;br/&gt;
        at org.apache.activemq.command.Message.decrementReferenceCount(Message.java:602)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa73f5628&amp;gt; (a org.apache.activemq.command.ActiveMQObjectMessage)&lt;br/&gt;
        at org.apache.activemq.broker.region.TopicSubscription$2.run(TopicSubscription.java:422)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:773)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:801)&lt;br/&gt;
        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:118)&lt;br/&gt;
        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:42)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
&quot;ActiveMQ Transport: tcp:///192.168.1.119:40586&quot;:&lt;br/&gt;
        at org.apache.activemq.usage.Usage.notifyCallbackWhenNotFull(Usage.java:354)&lt;/li&gt;
	&lt;li&gt;waiting to lock &amp;lt;0xa3badb80&amp;gt; (a java.lang.Object)&lt;br/&gt;
        at org.apache.activemq.broker.region.Topic.send(Topic.java:346)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa3ba9c38&amp;gt; (a java.util.LinkedList)&lt;br/&gt;
        at org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:328)&lt;br/&gt;
        at org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:402)&lt;br/&gt;
        at org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:224)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:125)&lt;br/&gt;
        at org.apache.activemq.broker.CompositeDestinationBroker.send(CompositeDestinationBroker.java:95)&lt;br/&gt;
        at org.apache.activemq.broker.MutableBrokerFilter.send(MutableBrokerFilter.java:135)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:434)&lt;br/&gt;
        at org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:623)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:281)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)&lt;br/&gt;
        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)&lt;br/&gt;
        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:134)&lt;br/&gt;
        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:126)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0xa5d116e8&amp;gt; (a org.apache.activemq.transport.InactivityMonitor$1)&lt;br/&gt;
        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:183)&lt;br/&gt;
        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:170)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;using snapshot apache-activemq-5.0-20071022.150246-30&lt;/p&gt;

&lt;p&gt;java 1.6.0_01 on linux&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482121">AMQ-1475</key>
            <summary>deadlock in Usage &amp; Topic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="aburgel">Alex Burgel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Oct 2007 15:12:14 +0000</created>
                <updated>Mon, 21 Jan 2008 14:23:23 +0000</updated>
                            <resolved>Mon, 21 Jan 2008 14:23:23 +0000</resolved>
                                    <version>5.0.0</version>
                                    <fixVersion>5.1.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12939133" author="nickysandhu" created="Tue, 23 Oct 2007 16:55:38 +0000"  >&lt;p&gt;Interesting. Similar to the fix for 1467&lt;br/&gt;
Usage line #255 should probably be getExecutor.execute(callback); instead of callback.run() ?&lt;/p&gt;</comment>
                            <comment id="12939274" author="rajdavies" created="Mon, 21 Jan 2008 14:23:23 +0000"  >&lt;p&gt;Fixed by svn revision 613899&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s0b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>