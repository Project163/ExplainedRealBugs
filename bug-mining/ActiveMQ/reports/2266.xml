<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:04:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5160] Wildcard subscriptions bypass Authentication / Authorization</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5160</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I am using MQTT on AMQ 5.9.1&lt;br/&gt;
After latest MQTT hardening from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; , there is an issue of MQTT retained messages.&lt;/p&gt;

&lt;p&gt;Simple case:&lt;br/&gt;
Set Authentication / Authorization for two different TOPICS.&lt;br/&gt;
Send retained message to one topic.&lt;/p&gt;

&lt;p&gt;Try to subscribe &quot;#&quot; with other second user.&lt;br/&gt;
It will show retained messages published by TOPIC 1. &lt;/p&gt;

&lt;p&gt;here i have attached test configurations.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12710147">AMQ-5160</key>
            <summary>Wildcard subscriptions bypass Authentication / Authorization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="surfnerd">Surf</reporter>
                        <labels>
                            <label>authentication</label>
                            <label>authorization</label>
                            <label>mqtt</label>
                            <label>security</label>
                    </labels>
                <created>Wed, 23 Apr 2014 21:03:06 +0000</created>
                <updated>Wed, 1 Jul 2015 22:13:17 +0000</updated>
                            <resolved>Mon, 26 May 2014 09:29:36 +0000</resolved>
                                    <version>5.9.1</version>
                                    <fixVersion>5.10.0</fixVersion>
                                    <component>MQTT</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13979557" author="dhirajsb" created="Thu, 24 Apr 2014 10:35:06 +0000"  >&lt;p&gt;Can you also check what happens with non-retained messages? Currently retained messages are not checked for authorization per matched destination with wildcard topics. I wonder whether the same holds true for non-retained messages??&lt;/p&gt;</comment>
                            <comment id="13979836" author="surfnerd" created="Thu, 24 Apr 2014 15:29:03 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Yes . I checked.&lt;br/&gt;
It is also true for non-retained messages.&lt;br/&gt;
So in-short MQTT doesn&apos;t follow authorization for any wild-card subscription. &lt;/p&gt;</comment>
                            <comment id="13980029" author="dhirajsb" created="Thu, 24 Apr 2014 18:07:59 +0000"  >&lt;p&gt;If I had to hazard a guess, I&apos;d say that if its happening with non-retained messages, then it would be true of any ActiveMQ protocol. In other words, this will have to fixed in the Broker where subscription matching happens for non-retained messages, and will need a fix in the MQTT transport for retained messages. &lt;/p&gt;</comment>
                            <comment id="13980297" author="surfnerd" created="Thu, 24 Apr 2014 21:11:47 +0000"  >&lt;p&gt;Okay. I understand. So we need to fix authorization for wildcard subscription.&lt;br/&gt;
Can you please guide me how to proceed for it ? I can help making patch.&lt;/p&gt;</comment>
                            <comment id="13982161" author="surfnerd" created="Sun, 27 Apr 2014 02:05:05 +0000"  >&lt;p&gt;Can someone help me in this ?&lt;br/&gt;
It&apos;s big security flaw.&lt;/p&gt;</comment>
                            <comment id="13983366" author="dhirajsb" created="Mon, 28 Apr 2014 18:29:22 +0000"  >&lt;p&gt;Hi Surf, I&apos;m looking into this issue, will enlist the help of ActiveMQ committers if needed. &lt;/p&gt;</comment>
                            <comment id="13987276" author="githubbot" created="Fri, 2 May 2014 02:17:28 +0000"  >&lt;p&gt;GitHub user dhirajsb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/21&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5160&quot; title=&quot;Wildcard subscriptions bypass Authentication / Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5160&quot;&gt;&lt;del&gt;AMQ-5160&lt;/del&gt;&lt;/a&gt;, add support for wildcard destination authorization&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dhirajsb/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dhirajsb/activemq&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/21.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/21.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #21&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 071c2d30ba5b497a66937c724605d18d04a7e516&lt;br/&gt;
Author: Dhiraj Bokde &amp;lt;dbokde@redhat.com&amp;gt;&lt;br/&gt;
Date:   2014-05-01T18:21:50Z&lt;/p&gt;

&lt;p&gt;    Initial fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5160&quot; title=&quot;Wildcard subscriptions bypass Authentication / Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5160&quot;&gt;&lt;del&gt;AMQ-5160&lt;/del&gt;&lt;/a&gt; to support subscription authorization for destination filters&lt;/p&gt;

&lt;p&gt;commit 2b6758c822a90ea6f78501c86b397e0d6550fb56&lt;br/&gt;
Author: Hadrian Zbarcea &amp;lt;hadrian@apache.org&amp;gt;&lt;br/&gt;
Date:   2014-05-01T19:25:31Z&lt;/p&gt;

&lt;p&gt;    Temporarily disable failing test&lt;/p&gt;

&lt;p&gt;commit 343c90415aca46f450ed493219facf6812a6dad9&lt;br/&gt;
Author: Dhiraj Bokde &amp;lt;dbokde@redhat.com&amp;gt;&lt;br/&gt;
Date:   2014-05-02T02:13:01Z&lt;/p&gt;

&lt;p&gt;    Fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5160&quot; title=&quot;Wildcard subscriptions bypass Authentication / Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5160&quot;&gt;&lt;del&gt;AMQ-5160&lt;/del&gt;&lt;/a&gt;, allowed wildcard subscriptions for future destinations, added tests for wildcard authorization, fixed consumer and producer AdvisoryTopic names for composite destinations by replacing &apos;,&apos; with &apos;&amp;sbquo;&apos;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="13987466" author="surfnerd" created="Fri, 2 May 2014 07:26:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; for the patch. I just tried it.&lt;/p&gt;

&lt;p&gt;I see some weird behaviour:&lt;br/&gt;
1. When admin publishes , all the clients receive the message. Disregarding Authorization. ( If they have subscribed to wildcard)&lt;br/&gt;
2. Sometimes it shows not allowed to subscribe &quot;+&quot; wildcard. Sometimes it works.&lt;/p&gt;</comment>
                            <comment id="13987804" author="dhirajsb" created="Fri, 2 May 2014 15:30:14 +0000"  >&lt;p&gt;Hi Surf, &lt;/p&gt;

&lt;p&gt;Sorry if you have already done it, but did you test with a fresh activemq data directory? Older un-authorized subscriptions in broker store could cause weird behavior like you describe. Also, can you share your test code as a JUnit test case? &lt;/p&gt;

&lt;p&gt;Retained message behavior is still not sorted out, the patch should only affect non-retained messages. &lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Dhiraj. &lt;/p&gt;</comment>
                            <comment id="13988923" author="surfnerd" created="Sun, 4 May 2014 05:55:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; ,&lt;/p&gt;

&lt;p&gt;Sorry I don&apos;t have JUnit test case. I normally try with Mosquito python client.&lt;br/&gt;
Yes. I cleaned data directory and weird behaviour is gone !&lt;/p&gt;

&lt;p&gt;As you indicated, retained messages still don&apos;t follow authorization. Do you need any help in that direction ?&lt;/p&gt;</comment>
                            <comment id="13989355" author="dejanb" created="Mon, 5 May 2014 08:23:52 +0000"  >&lt;p&gt;Patch applied. Thanks Dhiraj. I&apos;ll leave the issue open until retained messages are sorted.&lt;/p&gt;</comment>
                            <comment id="13990487" author="dejanb" created="Tue, 6 May 2014 09:47:15 +0000"  >&lt;p&gt;Added a test for the remaining retained messages issue&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://fisheye6.atlassian.com/changelog/activemq-git?cs=64baf092f073f8c2256a2f2ed704f708562d65a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/changelog/activemq-git?cs=64baf092f073f8c2256a2f2ed704f708562d65a5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13990531" author="dejanb" created="Tue, 6 May 2014 10:53:55 +0000"  >&lt;p&gt;I was looking a bit more into this. The problem is that we&apos;re managing these retained messages in the mqtt filter and sending it directly to the subscription. So it buy-passes all broker interceptors (including security ones). I think the better option would be to reuse subscription recovery policy mechanism&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://activemq.apache.org/subscription-recovery-policy.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/subscription-recovery-policy.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and adapt it for mqtt use-cases. I&apos;ll take a stub at refactoring this.&lt;/p&gt;</comment>
                            <comment id="13991105" author="dhirajsb" created="Tue, 6 May 2014 20:43:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dejanb&quot; class=&quot;user-hover&quot; rel=&quot;dejanb&quot;&gt;dejanb&lt;/a&gt; How are you planning on adding the MQTT retained message recovery policy? In theory it should be added on the fly from the MQTT protocol converter when an MQTT client sends a message to a Topic. Also, if another recovery policy exists on the Topic, then the MQTT policy should act in parallel with it. What do you think? &lt;br/&gt;
In general I like the idea of the recovery policy, since it would allow non-MQTT connections to receive retained messages too. &lt;/p&gt;

&lt;p&gt;Meanwhile, I opened a pull request &lt;a href=&quot;https://github.com/apache/activemq/pull/21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/21&lt;/a&gt; to add authorization for retained messages with the current approach. &lt;/p&gt;</comment>
                            <comment id="13991471" author="surfnerd" created="Wed, 7 May 2014 01:51:17 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; &lt;br/&gt;
I got this error in your last retained message fix.&lt;/p&gt;

&lt;p&gt;MQTTTransportFactory.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;57,20&amp;#93;&lt;/span&gt; error: unreported exception Exception; must be caught or declared to be thrown&lt;/p&gt;

&lt;p&gt;Can you please verify ?&lt;/p&gt;</comment>
                            <comment id="13991607" author="dhirajsb" created="Wed, 7 May 2014 06:55:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surfnerd&quot; class=&quot;user-hover&quot; rel=&quot;surfnerd&quot;&gt;surfnerd&lt;/a&gt;, I pushed a new commit in the PR to resolve that issue. Not sure why it didn&apos;t get caught the first time by IntelliJ Idea when I was testing it before sending the PR. &lt;/p&gt;</comment>
                            <comment id="13991771" author="dejanb" created="Wed, 7 May 2014 12:09:13 +0000"  >&lt;p&gt;Hi Dhiraj, here&apos;s the patch that implements retained messages using subscription recovery. Here, Topic is using LastImageSubscriptionRecoveryPolicy by default, with the filter to cache only message with specified header (which we set in mqtt filter).&lt;br/&gt;
The thing that still needs to be investigated is handling of duplicate subscriptions (as we can&apos;t do nothing anymore, but unsubscribe/subscribe to get retained messages). There&apos;s a test failing due to this and I need to see how we can fix that. Anyhow, I think this approach is more natural as the message will go through the whole stack of broker interceptors (and also allow retained message feature in jms land). But it still needs some work.&lt;/p&gt;</comment>
                            <comment id="13992339" author="surfnerd" created="Wed, 7 May 2014 23:09:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt;&lt;br/&gt;
I just tried your patch again. Now it is showing different error.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.&lt;br/&gt;
5.1:compile (default-compile) on project activemq-mqtt: Compilation failure: Com&lt;br/&gt;
pilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; bootstrap class path not set in conjunction with -source 1.6&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; MQTTProtocolConverter.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;399,55&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class TransportConnectionListener&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class TransportConnection&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; MQTTProtocolConverter.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;400,50&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13992426" author="githubbot" created="Thu, 8 May 2014 02:09:16 +0000"  >&lt;p&gt;GitHub user dhirajsb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/22&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Partial fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5160&quot; title=&quot;Wildcard subscriptions bypass Authentication / Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5160&quot;&gt;&lt;del&gt;AMQ-5160&lt;/del&gt;&lt;/a&gt;, attempts to resolve retained messages using su...&lt;/p&gt;

&lt;p&gt;    ...bscription recovery policy, but fails to resend retained messages for duplicate subscriptions&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dhirajsb/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dhirajsb/activemq&lt;/a&gt; AMQ5160.policy&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/22.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/22.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #22&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3d8b79c6e34020ba12ea4b222af99753790955cf&lt;br/&gt;
Author: Dhiraj Bokde &amp;lt;dhirajsb@yahoo.com&amp;gt;&lt;br/&gt;
Date:   2014-05-08T02:05:36Z&lt;/p&gt;

&lt;p&gt;    Partial fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5160&quot; title=&quot;Wildcard subscriptions bypass Authentication / Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5160&quot;&gt;&lt;del&gt;AMQ-5160&lt;/del&gt;&lt;/a&gt;, attempts to resolve retained messages using subscription recovery policy, but fails to resend retained messages for duplicate subscriptions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="13992431" author="dhirajsb" created="Thu, 8 May 2014 02:15:48 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dejanb&quot; class=&quot;user-hover&quot; rel=&quot;dejanb&quot;&gt;dejanb&lt;/a&gt;, I took a look at the patch and fixed a couple of issues with it and have submitted a new PR &lt;a href=&quot;https://github.com/apache/activemq/pull/22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/22&lt;/a&gt;. I created a new policy, which ensures that retained message policy won&apos;t get accidentally removed if user sets another policy. It also makes sure that existing subscriptions don&apos;t receive messages with the retained flag set, only new subscriptions do. However, its still not complete. &lt;/p&gt;

&lt;p&gt;It still has the problem of not being able to resend Retained messages for duplicate subscriptions. I don&apos;t see any way of being able to do that short of the approach you took in your patch to remove the existing subscription and create it again. But this goes against MQTT-3.8.4-3, which says the subscription must NOT be interrupted, i.e. pending messages should not be lost. So, recreating the sub breaks the test that looks for pending messages, and not recreating the sub breaks another test that looks for resent retained messages. &lt;/p&gt;

&lt;p&gt;From what I figure so far, a possible solution would be the hybrid of my earlier PR &lt;a href=&quot;https://github.com/apache/activemq/pull/21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/21&lt;/a&gt; (which walks &apos;up&apos; the filter chain and finds the required SecurityContext to perform authorization in the MQTTProtocolConverter), and a RetainedMessageSubscriptionRecoveryPolicy to let non-MQTT clients also receive Retained messages (which is filtered out in the MQTTProtocolConverter so MQTT clients don&apos;t receive duplicates). &lt;/p&gt;

&lt;p&gt;Unless you can think of some trick to resend retained messages for a duplicate sub without removing it, I don&apos;t see any other way of being able to make it work for both MQTT and non-MQTT clients. &lt;/p&gt;</comment>
                            <comment id="13992434" author="dhirajsb" created="Thu, 8 May 2014 02:18:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surfnerd&quot; class=&quot;user-hover&quot; rel=&quot;surfnerd&quot;&gt;surfnerd&lt;/a&gt;, you need to rebuild the module activemq-broker too. BTW, don&apos;t combine PR 21 and 22, since they are alternative solutions to this problem. PR 21 works for MQTT clients only, and 22 breaks some MQTT tests. &lt;/p&gt;</comment>
                            <comment id="13992602" author="surfnerd" created="Thu, 8 May 2014 09:00:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; Thanks..I rebuilt whole project and it worked !&lt;/p&gt;

&lt;p&gt;On the other side, MQTT WS is not receiving messages at all ! (publish works fine)&lt;/p&gt;

&lt;p&gt;jvm 1    |  WARN | Transport Connection to: MQTTSocket_1440179655 failed: java.io.IOException: org.apache.activemq.transport.ws.MQTTSocket cannot be cast to org.apache.activemq.transport.TransportFilter&lt;/p&gt;</comment>
                            <comment id="13992838" author="dhirajsb" created="Thu, 8 May 2014 15:19:45 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surfnerd&quot; class=&quot;user-hover&quot; rel=&quot;surfnerd&quot;&gt;surfnerd&lt;/a&gt;, sorry about that, I missed the fact that MQTTSocket implements TransportSupport and not TransportFilter. I added a couple of more commits to PR21, can you test them for MQTT WS? &lt;/p&gt;</comment>
                            <comment id="13994133" author="surfnerd" created="Sat, 10 May 2014 04:01:57 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; Thanks a lot. It is working on WS and MQTT both.&lt;/p&gt;

&lt;p&gt;One another weird behaviour( Can&apos;t find the reason and might not be related to this JIRA!)&lt;br/&gt;
Steps to recreate :&lt;br/&gt;
1. Download files that i uploaded&lt;br/&gt;
2. Connect to broker with two_user&lt;br/&gt;
3. Take another client and connect to broker with one_admin and subscribe to #&lt;br/&gt;
4. Publish in two_user&lt;/p&gt;

&lt;p&gt;You will see message leaked to admin. Now if you connect to one_admin first then it wont happen !!&lt;/p&gt;</comment>
                            <comment id="13996851" author="dhirajsb" created="Tue, 13 May 2014 20:20:10 +0000"  >&lt;p&gt;Hi Surf,&lt;/p&gt;

&lt;p&gt;I had a discussion with Dejan about the other option of using Retroactive consumers, and I believe I have come up with a solution in PR22 that works elegantly for both MQTT and JMS clients. &lt;/p&gt;

&lt;p&gt;Can you test PR-22 with your test client and verify that it works? Since it includes major changes to MQTT transport and minor changes to Broker core classes, it should be thoroughly tested and validated before being applied. &lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Dhiraj. &lt;/p&gt;</comment>
                            <comment id="14000356" author="dhirajsb" created="Fri, 16 May 2014 21:37:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surfnerd&quot; class=&quot;user-hover&quot; rel=&quot;surfnerd&quot;&gt;surfnerd&lt;/a&gt;, I&apos;ve added more commits to PR-22 to fix durable subscriptions. The retained message test is also more elaborate. Hopefully this will be last change. &lt;/p&gt;

&lt;p&gt;Please let us know whether PR-22 works in your tests so it can be merged into Apache trunk. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Dhiraj. &lt;/p&gt;</comment>
                            <comment id="14000820" author="surfnerd" created="Sat, 17 May 2014 16:55:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; Sorry for late reply.&lt;br/&gt;
I will definitely test and get back to you today. PR 22 looks more robust.&lt;/p&gt;</comment>
                            <comment id="14001135" author="githubbot" created="Sun, 18 May 2014 17:23:54 +0000"  >&lt;p&gt;Github user dhirajsb closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/21&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14001144" author="surfnerd" created="Sun, 18 May 2014 18:00:53 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is working good. I am checking 5187 from pull 24 though.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14001995" author="dhirajsb" created="Mon, 19 May 2014 17:08:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surfnerd&quot; class=&quot;user-hover&quot; rel=&quot;surfnerd&quot;&gt;surfnerd&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for validating PR22. If you tested with PR24 that should be good, since it includes commits from PR22. We could just as well apply PR24 directly to ActiveMQ trunk. Also, are you testing Virtual Topics too, it is a pretty cool feature I added. I&apos;ve written a post about it at &lt;a href=&quot;http://rockablogbaby.blogspot.com/2014/05/scalable-iot-integration-using-apache.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://rockablogbaby.blogspot.com/2014/05/scalable-iot-integration-using-apache.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Dhiraj. &lt;/p&gt;</comment>
                            <comment id="14008697" author="dejanb" created="Mon, 26 May 2014 09:29:36 +0000"  >&lt;p&gt;I applied PR22. Thanks Dhiraj for the contributions.&lt;/p&gt;

&lt;p&gt;All we need now is to document this new feature (&lt;a href=&quot;http://activemq.apache.org/subscription-recovery-policy.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/subscription-recovery-policy.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14025225" author="dhirajsb" created="Mon, 9 Jun 2014 14:40:08 +0000"  >&lt;p&gt;Hi Dejan, did you also apply the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5187&quot; title=&quot;Virtual destination consumers do not support retroactive message recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5187&quot;&gt;&lt;del&gt;AMQ-5187&lt;/del&gt;&lt;/a&gt;? That one is needed to support virtual topics for MQTT. &lt;/p&gt;</comment>
                            <comment id="14025303" author="dejanb" created="Mon, 9 Jun 2014 15:44:40 +0000"  >&lt;p&gt;Hi Dhiraj,&lt;/p&gt;

&lt;p&gt;I didn&apos;t, I thought there&apos;s some more work left to be done there. Will do it next.&lt;/p&gt;</comment>
                            <comment id="14038965" author="surfnerd" created="Fri, 20 Jun 2014 16:13:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dhirajsb&quot; class=&quot;user-hover&quot; rel=&quot;dhirajsb&quot;&gt;dhirajsb&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dejanb&quot; class=&quot;user-hover&quot; rel=&quot;dejanb&quot;&gt;dejanb&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Is 5187 patch applied ?&lt;/p&gt;</comment>
                            <comment id="14131718" author="dhirajsb" created="Fri, 12 Sep 2014 16:28:13 +0000"  >&lt;p&gt;Hi Surf, &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5187&quot; title=&quot;Virtual destination consumers do not support retroactive message recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5187&quot;&gt;&lt;del&gt;AMQ-5187&lt;/del&gt;&lt;/a&gt; has been applied. &lt;/p&gt;</comment>
                            <comment id="14315992" author="githubbot" created="Wed, 11 Feb 2015 10:43:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/22&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12833667">AMQ-5814</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12641570" name="activemq.xml" size="2857" author="surfnerd" created="Wed, 23 Apr 2014 21:04:24 +0000"/>
                            <attachment id="12641571" name="groups.properties" size="999" author="surfnerd" created="Wed, 23 Apr 2014 21:04:24 +0000"/>
                            <attachment id="12641572" name="login.config" size="1063" author="surfnerd" created="Wed, 23 Apr 2014 21:04:24 +0000"/>
                            <attachment id="12643744" name="patch.txt" size="11046" author="dejanb" created="Wed, 7 May 2014 12:09:13 +0000"/>
                            <attachment id="12641573" name="users.properties" size="1010" author="surfnerd" created="Wed, 23 Apr 2014 21:04:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ux1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>