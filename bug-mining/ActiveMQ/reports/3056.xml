<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:40:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6667] Many instances of &quot;duplicate message ... from cursor&quot; redirecting to dlq</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6667</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;In a high throughput scenario on a single destination there can be many warnings of this kind:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2017-03-21 09:51:37,548] WARN ActiveMQ BrokerService[localhost] Task-5 Queue - queue:&lt;span class=&quot;code-comment&quot;&gt;//TEST, subscriptions=10, memory=102%, size=399, 
&lt;/span&gt;pending=0, duplicate message ActiveMQTextMessage {commandId = 72, responseRequired = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, 
messageId = ID:Mac.fritz.box-64479-1490086286066-183:1:1:1:68, originalDestination = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, originalTransactionId = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
producerId = ID:Mac.fritz.box-64479-1490086286066-183:1:1:1, destination = queue:&lt;span class=&quot;code-comment&quot;&gt;//TEST, transactionId = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, expiration = 0, 
&lt;/span&gt;timestamp = 1490086297427, arrival = 0, brokerInTime = 1490086297427, brokerOutTime = 1490086297427, correlationId = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, replyTo = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, persistent = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, 
type = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, priority = 4, groupID = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, groupSequence = 0, targetConsumerId = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, compressed = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, userID = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
content = org.apache.activemq.util.ByteSequence@8672edc, marshalledProperties = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, dataStructure = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, redeliveryCounter = 0, size = 50216, properties = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
readOnlyProperties = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, readOnlyBody = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, droppable = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, jmsXGroupFirstForConsumer = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, text = ...XXXXXXXXXXXX} 
from cursor, is cursor audit disabled or too constrained? Redirecting to dlq
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The broker loads messages twice into the cursor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13068710">AMQ-6667</key>
            <summary>Many instances of &quot;duplicate message ... from cursor&quot; redirecting to dlq</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 May 2017 10:28:01 +0000</created>
                <updated>Wed, 3 May 2017 10:43:04 +0000</updated>
                            <resolved>Wed, 3 May 2017 10:43:04 +0000</resolved>
                                    <version>5.14.0</version>
                                    <fixVersion>5.15.0</fixVersion>
                                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15994642" author="gtully" created="Wed, 3 May 2017 10:32:17 +0000"  >&lt;p&gt;increasing the audit capacity; policyEntry maxProducersToAudit=200 ensures the cursor audit tracks up to 200 producers and traps the duplicate from the store. In addition, disabling concurrentStoreAndDispatch avoids the issue.&lt;/p&gt;

&lt;p&gt;The root cause is enabling the cursor cache when there are pending sends leaving a possible scenario where a sync send is lost behind sufficient async sends that fill the cache. Reverting to the store in this case results in duplicates.&lt;/p&gt;</comment>
                            <comment id="15994645" author="jira-bot" created="Wed, 3 May 2017 10:36:31 +0000"  >&lt;p&gt;Commit a0ba0bf4c6beaf50ce5e021ef5e4d493119bb1ef in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gtully&quot; class=&quot;user-hover&quot; rel=&quot;gtully&quot;&gt;gtully&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a0ba0bf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a0ba0bf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6667&quot; title=&quot;Many instances of &amp;quot;duplicate message ... from cursor&amp;quot; redirecting to dlq&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6667&quot;&gt;&lt;del&gt;AMQ-6667&lt;/del&gt;&lt;/a&gt; gate cursor cache enablement on a single pending send and tidy up setbatch to always check outstanding async future list. Fix and test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3eeyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>