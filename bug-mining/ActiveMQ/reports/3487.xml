<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:59:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9547] KahaDB PageFile can call setLength() on the recovery file which always throws an exception</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9547</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;There are 3 places in PageFile (part of KahaDB) that call setLength() in RecoverableRandomAccessFile. This method was changed in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5578&quot; title=&quot;preallocate journal files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5578&quot;&gt;&lt;del&gt;AMQ-5578&lt;/del&gt;&lt;/a&gt; so that it always throws an exception when called. This method should just be removed entirely since it always throws an error and in the places where it is used we need to either stop calling it if we can or throw an exception if the length is unexpected. &lt;/p&gt;

&lt;p&gt;Currently when KahaDB tries to redo recovery updates, if the file length is encountered as 0 it will call this method which leads to throwing an exception. This causes the store to detect the error and rebuild the index. We should be able to just continue without calling this method and recover.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13588316">AMQ-9547</key>
            <summary>KahaDB PageFile can call setLength() on the recovery file which always throws an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="cshannon">Christopher L. Shannon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Aug 2024 16:08:43 +0000</created>
                <updated>Wed, 18 Dec 2024 23:43:25 +0000</updated>
                            <resolved>Thu, 8 Aug 2024 20:16:08 +0000</resolved>
                                    <version>5.18.5</version>
                    <version>6.1.3</version>
                                    <fixVersion>6.2.0</fixVersion>
                    <fixVersion>5.18.6</fixVersion>
                    <fixVersion>6.1.4</fixVersion>
                                    <component>KahaDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17872123" author="jira-bot" created="Thu, 8 Aug 2024 20:13:32 +0000"  >&lt;p&gt;Commit 5f79b651c225babe62d8742d20e993073faaf1d0 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5f79b651c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5f79b651c2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9547&quot; title=&quot;KahaDB PageFile can call setLength() on the recovery file which always throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9547&quot;&gt;&lt;del&gt;AMQ-9547&lt;/del&gt;&lt;/a&gt; - Remove setLength() and usage from RecoverableRandomAccessFile&lt;/p&gt;

&lt;p&gt;This method always throws an exception so it should be removed and no&lt;br/&gt;
longer used. Places in PageFile that called the method have been updated&lt;br/&gt;
to either remove the usage or throw an error.&lt;/p&gt;</comment>
                            <comment id="17872124" author="jira-bot" created="Thu, 8 Aug 2024 20:13:32 +0000"  >&lt;p&gt;Commit 5b2cc03030e14382a91291b44b054e016df413d1 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5b2cc03030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=5b2cc03030&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #1278 from cshannon/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9547&quot; title=&quot;KahaDB PageFile can call setLength() on the recovery file which always throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9547&quot;&gt;&lt;del&gt;AMQ-9547&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9547&quot; title=&quot;KahaDB PageFile can call setLength() on the recovery file which always throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9547&quot;&gt;&lt;del&gt;AMQ-9547&lt;/del&gt;&lt;/a&gt; - Remove setLength() and usage from RecoverableRandomAccessFile&lt;/p&gt;</comment>
                            <comment id="17872125" author="jira-bot" created="Thu, 8 Aug 2024 20:15:13 +0000"  >&lt;p&gt;Commit a30cb8e263300855d4d38710f7d5d9b61223c98f in activemq&apos;s branch refs/heads/activemq-6.1.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a30cb8e263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a30cb8e263&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9547&quot; title=&quot;KahaDB PageFile can call setLength() on the recovery file which always throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9547&quot;&gt;&lt;del&gt;AMQ-9547&lt;/del&gt;&lt;/a&gt; - Remove setLength() and usage from RecoverableRandomAccessFile&lt;/p&gt;

&lt;p&gt;This method always throws an exception so it should be removed and no&lt;br/&gt;
longer used. Places in PageFile that called the method have been updated&lt;br/&gt;
to either remove the usage or throw an error.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5f79b651c225babe62d8742d20e993073faaf1d0)&lt;/p&gt;</comment>
                            <comment id="17877512" author="jira-bot" created="Wed, 28 Aug 2024 19:06:50 +0000"  >&lt;p&gt;Commit e4ec7c53602165cf49c7dcb7794e3a30b18dd09c in activemq&apos;s branch refs/heads/activemq-5.18.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=e4ec7c5360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=e4ec7c5360&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9547&quot; title=&quot;KahaDB PageFile can call setLength() on the recovery file which always throws an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9547&quot;&gt;&lt;del&gt;AMQ-9547&lt;/del&gt;&lt;/a&gt; - Remove setLength() and usage from RecoverableRandomAccessFile&lt;/p&gt;

&lt;p&gt;This method always throws an exception so it should be removed and no&lt;br/&gt;
longer used. Places in PageFile that called the method have been updated&lt;br/&gt;
to either remove the usage or throw an error.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5f79b651c225babe62d8742d20e993073faaf1d0)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12774200">AMQ-5578</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qrqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>