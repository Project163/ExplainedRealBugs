<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:33:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1142] TemporaryQueue communication not working</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1142</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Assume a (old legacy, yes this is out of date and better solutions are available) point to point architecture:&lt;/p&gt;

&lt;p&gt;Client creates temporary queues and send the queuename to the server by a fixed queue (&apos;command queue&apos;)&lt;br/&gt;
Server uses the received queue names to send messages to the client.&lt;/p&gt;

&lt;p&gt;See the attached Code snippets:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Start the Server&lt;/li&gt;
	&lt;li&gt;Start the Client&lt;/li&gt;
	&lt;li&gt;The Client creates a temporary queue and sends the name to the server&lt;/li&gt;
	&lt;li&gt;Server receives message and sends a test message back.&lt;/li&gt;
	&lt;li&gt;Client NEVER receives the test message&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This works 100% on IBM MQSeries (the only source diff is the line that has a MQSerie getQueue API call, instead a createQueue, because queus are defined, and not dynamical as in ActiveMQ)&lt;/p&gt;

&lt;p&gt;ActiveMQ LOG information:&lt;/p&gt;

&lt;p&gt;The temporary queue is logged, but later it says that there are no subscriptions&lt;/p&gt;

&lt;p&gt;(..)&lt;br/&gt;
DEBUG AbstractRegion                 - Adding destination: topic://ActiveMQ.Advisory.Consumer.Queue.ID:TIGER-2615-1170064714906-1:0:1&lt;br/&gt;
DEBUG JournalPersistenceAdapter      - Checkpoint done.&lt;br/&gt;
DEBUG TIGER-2615-1170064714906-1:0:1 - No subscriptions registered, will not dispatch message at this time.&lt;br/&gt;
(...)&lt;/p&gt;

&lt;p&gt;Can this bug be fixed?&lt;/p&gt;

&lt;p&gt;Thank you, Jos&lt;/p&gt;
</description>
                <environment>&lt;p&gt;WinXP, Java 1.4.2&lt;/p&gt;</environment>
        <key id="12481983">AMQ-1142</key>
            <summary>TemporaryQueue communication not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="josr">Jos</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jan 2007 10:11:33 +0000</created>
                <updated>Fri, 29 Jun 2007 21:41:47 +0000</updated>
                            <resolved>Tue, 12 Jun 2007 13:24:24 +0000</resolved>
                                    <version>4.1.0</version>
                                    <fixVersion>5.0.0</fixVersion>
                                    <component>Broker</component>
                    <component>JMS client</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12938700" author="josr" created="Mon, 29 Jan 2007 14:56:38 +0000"  >&lt;p&gt;EDIT: I use the default activemq.xml (straight of the ZIP-archive) and version 4.1.0 incubator.&lt;/p&gt;

&lt;p&gt;Anyone any thoughts about this issue? Thank you&lt;/p&gt;</comment>
                            <comment id="12938723" author="aco" created="Wed, 31 Jan 2007 03:43:56 +0000"  >&lt;p&gt;IMHO, I think the appropriate way to accomplish this is to set the JMSReplyTo property of the message with the temporary queue. And upon receipt of the message, get the reply to property and send to that.&lt;/p&gt;

&lt;p&gt;Let me know if that works for you.&lt;/p&gt;</comment>
                            <comment id="12938815" author="aco" created="Wed, 31 Jan 2007 03:44:41 +0000"  >&lt;p&gt;Also, I&apos;m not sure if this is a bug or not. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12938785" author="bthakkar" created="Thu, 22 Feb 2007 03:14:31 +0000"  >&lt;p&gt;I came across a similar issue with temporaray queues. The message doesn&apos;t get sent in even when I use the replyTo property. &lt;/p&gt;

&lt;p&gt;Here&apos;s the test case: &lt;/p&gt;

&lt;p&gt;	public void testQueues() {&lt;/p&gt;

&lt;p&gt;		final JmsTemplate jmsTemplate = getSpringBean(&quot;jms.template.quoteProcessor&quot;, JmsTemplate.class);&lt;/p&gt;

&lt;p&gt;		try {&lt;br/&gt;
			final Connection connection = jmsTemplate.getConnectionFactory().createConnection();&lt;br/&gt;
			Session session = connection.createSession(true, 1);&lt;br/&gt;
			final Destination destination = session.createTemporaryQueue();&lt;/p&gt;

&lt;p&gt;			Thread senderThread = new Thread(new Runnable() {&lt;/p&gt;

&lt;p&gt;				public void run() {&lt;br/&gt;
					try &lt;/p&gt;
{
						System.out.println(&quot;In Sender Thread&quot;);
						Session session = connection.createSession(true, 1);
						session.createProducer(destination).send(session.createTextMessage(&quot;my message&quot;));
						System.out.println(&quot;sent message to queue: &quot; + destination);

					}
&lt;p&gt; catch (JMSException e) &lt;/p&gt;
{
						// TODO Auto-generated catch block
						e.printStackTrace();
					}&lt;br/&gt;
&lt;br/&gt;
				}&lt;br/&gt;
			});&lt;br/&gt;
&lt;br/&gt;
			senderThread.start();&lt;br/&gt;
&lt;br/&gt;
			Thread.currentThread().sleep(6000);&lt;br/&gt;
&lt;br/&gt;
			Thread receiverThread = new Thread(new Runnable() {&lt;br/&gt;
&lt;br/&gt;
				public void run() {&lt;br/&gt;
					try {
						System.out.println(&quot;In Receiver Thread&quot;);
						Session session = connection.createSession(true, 1);
						System.out.println(&quot;my session: &quot; + session + &quot;, queue: &quot; + destination);
						MessageConsumer consumer = session.createConsumer(destination);
						System.out.println(&quot;my consumer: &quot; + consumer);
						Message message = consumer.receive();
						System.out.println(&quot;Got this message: &quot; + message.toString());

					} catch (JMSException e) {						// TODO Auto-generated catch block						e.printStackTrace();					}

&lt;p&gt;				}&lt;br/&gt;
			});&lt;/p&gt;

&lt;p&gt;			receiverThread.start();&lt;/p&gt;

&lt;p&gt;			Thread.currentThread().sleep(6000);&lt;/p&gt;

&lt;p&gt;			System.out.println(&quot;Done!&quot;);&lt;br/&gt;
		} catch (InterruptedException e) &lt;/p&gt;
{
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
&lt;p&gt; catch (JMSException e1) &lt;/p&gt;
{
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;output: &lt;/p&gt;

&lt;p&gt;In Sender Thread&lt;br/&gt;
sent message to queue: temp-queue://ID:shell.dev.norvax.net-53936-1172097041334-2:1:1&lt;br/&gt;
In Receiver Thread&lt;br/&gt;
my session: ManagedSessionProxy { ActiveMQSession &lt;/p&gt;
{id=ID:shell.dev.norvax.net-53936-1172097041334-2:1:3,started=false}
&lt;p&gt; }, queue: temp-queue://ID:shell.dev.norvax.net-53936-1172097041334-2:1:1&lt;br/&gt;
my consumer: ActiveMQMessageConsumer &lt;/p&gt;
{ value=ID:shell.dev.norvax.net-53936-1172097041334-2:1:3:1, started=false }
&lt;p&gt;Done!&lt;/p&gt;

&lt;p&gt;It did not receive the message.&lt;/p&gt;</comment>
                            <comment id="12936423" author="jstrachan" created="Tue, 12 Jun 2007 09:53:17 +0000"  >&lt;p&gt;You&apos;re using transacted mode sessions in that code; so you need to do a session.commit() before the messages are actually sent&lt;/p&gt;</comment>
                            <comment id="12936436" author="jstrachan" created="Tue, 12 Jun 2007 10:02:35 +0000"  >&lt;p&gt;Note that it is outside of the JMS specification and TCK to be able to call Queue.getQueueName() on a temporary queue, pass that String around and be able to call session.createQueue(temporaryQueueName) and be able to get the same temporary queue.&lt;/p&gt;

&lt;p&gt;The real solution to your problem is to use Message.setJMSReplyTo(Destination) which definitely works and is part of the JMS specification.&lt;/p&gt;
</comment>
                            <comment id="12936521" author="jstrachan" created="Tue, 12 Jun 2007 13:24:23 +0000"  >&lt;p&gt;I&apos;ve added a test case to demostrate the issue: TemporaryDestinationToFromNameTest&lt;/p&gt;

&lt;p&gt;and its now resolved in 5.0&lt;/p&gt;</comment>
                            <comment id="12936211" author="kookaburra" created="Fri, 29 Jun 2007 21:41:47 +0000"  >&lt;p&gt;A consequence of this seems to be that the nice feature of Composite Destinations will not allow a temporary queue in the list. &lt;/p&gt;

&lt;p&gt;Given that Composite Destinations aren&apos;t in the spec. anyway, it would be more consistent to allow a temporary queue here as well.&lt;/p&gt;

&lt;p&gt;Could this be done?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460843" name="ASF.LICENSE.NOT.GRANTED--Client.java" size="1289" author="josr" created="Mon, 29 Jan 2007 10:11:33 +0000"/>
                            <attachment id="12460666" name="ASF.LICENSE.NOT.GRANTED--Server.java" size="1383" author="josr" created="Mon, 29 Jan 2007 10:11:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s2vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>