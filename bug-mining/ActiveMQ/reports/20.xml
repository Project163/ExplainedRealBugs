<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:30:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-568] The BrokerService is not setting the taskRunnerFactory property of the TransportConnector.</title>
                <link>https://issues.apache.org/jira/browse/AMQ-568</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;This causes all messages to be dispatched to clients sync (dispatchAsync setting would not be honored.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12481511">AMQ-568</key>
            <summary>The BrokerService is not setting the taskRunnerFactory property of the TransportConnector.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chirino">Hiram R. Chirino</assignee>
                                    <reporter username="chirino">Hiram R. Chirino</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Feb 2006 18:58:05 +0000</created>
                <updated>Mon, 6 Mar 2006 19:57:04 +0000</updated>
                            <resolved>Mon, 6 Mar 2006 19:57:04 +0000</resolved>
                                                    <fixVersion>4.0 RC2</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12937525" author="chirino" created="Wed, 15 Feb 2006 19:12:10 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                            <comment id="12937454" author="yaussy" created="Fri, 17 Feb 2006 22:03:53 +0000"  >&lt;p&gt;Hiram,&lt;/p&gt;

&lt;p&gt;I&apos;ve taken the 2/17 SNAPSHOT, and retested the asyncDispatch.  It is still not working properly.  Without knowing the full pathway of the code, I&apos;m guessing at what the problem is.  Here&apos;s what I think:&lt;/p&gt;

&lt;p&gt;Your changed BrokerService.addConnector:&lt;br/&gt;
+++++++++++++++++++&lt;br/&gt;
        connector.setBroker(getBroker());&lt;br/&gt;
        connector.setBrokerName(getBrokerName());&lt;br/&gt;
        connector.setTaskRunnerFactory(getTaskRunnerFactory());&lt;br/&gt;
        transportConnectors.add(connector);&lt;/p&gt;

&lt;p&gt;        if (isUseJmx()) &lt;/p&gt;
{
            connector = connector.asManagedConnector(getManagementContext().getMBeanServer(), getBrokerObjectName());
            registerConnectorMBean(connector);
        }
&lt;p&gt;        return connector;&lt;br/&gt;
+++++++++++++++++++++&lt;/p&gt;

&lt;p&gt;This calls the setTaskRunnerFactory, which is what was missing.  However, if isUseJmx() is true, then connector is reset / recreated as a ManagedConnector.  This resets, at least, the taskRunnerFactory, so it is again null.&lt;/p&gt;

&lt;p&gt;I&apos;m also concerned, though I did not take the time to examine its usage further to know whether it would be a problem or not, that the line:&lt;br/&gt;
++++++++++++++&lt;br/&gt;
transportConnectors.add(connector)&lt;br/&gt;
++++++++++++++&lt;br/&gt;
is bad, right?  It is adding the original connector the this map / list, but not the ManagedConnector.  Again, I did not track this one down to see if it was a problem or not, but thought it worth mentioning.&lt;/p&gt;

&lt;p&gt;Kevin.&lt;/p&gt;</comment>
                            <comment id="12937648" author="chirino" created="Sat, 18 Feb 2006 00:33:46 +0000"  >&lt;p&gt;I just commited another patch which I hope fixes this.  Could you recheck it for me?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Hiram&lt;/p&gt;</comment>
                            <comment id="12937609" author="yaussy" created="Tue, 21 Feb 2006 16:24:57 +0000"  >&lt;p&gt;Hiram,&lt;/p&gt;

&lt;p&gt;I had left for the day by the time your message came through.  I wil test this morning and let you know.  Thanks.&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;</comment>
                            <comment id="12937449" author="yaussy" created="Tue, 21 Feb 2006 23:41:29 +0000"  >&lt;p&gt;Hiram,&lt;/p&gt;

&lt;p&gt;Looks like that did the trick - at least with broker-to-client asyncDispatch.&lt;/p&gt;

&lt;p&gt;I may have need to set up asyncDispatch between brokers.  This should work, right?&lt;/p&gt;</comment>
                            <comment id="12937480" author="chirino" created="Mon, 6 Mar 2006 19:57:04 +0000"  >&lt;p&gt;fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17z5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>