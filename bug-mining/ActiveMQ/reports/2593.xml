<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:11:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5853] JDBC store - pending high priority messages batch cannot be consumed after low priority message batch </title>
                <link>https://issues.apache.org/jira/browse/AMQ-5853</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;With priority message enabled a batch of low priority messages can leave the cursor unable to load subsequent high priority messages.&lt;br/&gt;
More visible when useCache=false.&lt;br/&gt;
A new consumer or browse will not be able to see pending messages.&lt;/p&gt;

&lt;p&gt;Issue occurs after dispatch of low priority messages, an empty store and the addition of high priority messages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839153">AMQ-5853</key>
            <summary>JDBC store - pending high priority messages batch cannot be consumed after low priority message batch </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2015 15:05:17 +0000</created>
                <updated>Fri, 22 Jan 2016 22:46:48 +0000</updated>
                            <resolved>Mon, 6 Jul 2015 14:40:54 +0000</resolved>
                                    <version>5.11.0</version>
                                    <fixVersion>5.12.0</fixVersion>
                                    <component>JDBC</component>
                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14593503" author="gtully" created="Fri, 19 Jun 2015 15:12:30 +0000"  >&lt;p&gt;fix in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/f2a335c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/f2a335c2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;a next message can have &amp;gt;= last recovered priority and be in sequence or not be in sequence if it has lower priority.&lt;/p&gt;

&lt;p&gt;setter for two statements was missing so not possible to configure via xml. Sorted now.&lt;/p&gt;</comment>
                            <comment id="14612523" author="gtully" created="Thu, 2 Jul 2015 21:07:24 +0000"  >&lt;p&gt;There is a problem with the fix, higher priority messages that are dispatched but where the ack has not yet committed are pulled from the store in error and are suppressed as duplicates, filling up the DLQ. This is not good.&lt;br/&gt;
Am working on a fix.&lt;/p&gt;</comment>
                            <comment id="14613089" author="gtully" created="Fri, 3 Jul 2015 10:07:02 +0000"  >&lt;p&gt;The underlying issue was the tracked last recovered priority. This needed to be reset in the presence of newly added higher priority messages.&lt;br/&gt;
Fix and updated tests in &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/eece28ac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/eece28ac&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14615028" author="gtully" created="Mon, 6 Jul 2015 13:43:07 +0000"  >&lt;p&gt;this needs yet another revisit. long lived transactions show that the limitations of the current approach. The message store needs to keep track of the last recovered sequence on a per priority basis, in a similar manner to the topic store. Having the db select from all available messages seems like the simplest solution b/c the priorities via jms are limited to 0-9 &lt;/p&gt;</comment>
                            <comment id="14615104" author="gtully" created="Mon, 6 Jul 2015 14:40:43 +0000"  >&lt;p&gt;fix and additional test in: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/a2697b84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/a2697b84&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;select clause is now explicit for each &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt; supported priority wit the store tracking the last recovered sequence.&lt;/p&gt;</comment>
                            <comment id="14620186" author="gtully" created="Thu, 9 Jul 2015 09:34:18 +0000"  >&lt;p&gt;additional fix and test - both kahadb and jdbc stores needed fixes for cacheEnabled case - &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/3985e722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/3985e722&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12644804">AMQ-4489</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g9pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>