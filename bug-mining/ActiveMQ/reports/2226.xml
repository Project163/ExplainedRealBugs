<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:04:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5108] MQTT subscriptions for cleansession=true MUST be non-durable</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5108</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;When MQTT cleansession flag is set to 1, the Broker MUST remove existing subscriptions for the provided client id as well as not leave any subscriptions created in that clean session around after the network connection is closed. ActiveMQ MUST therefore create non-durable subscriptions for cleansession=1 sessions. &lt;/p&gt;

&lt;p&gt;A patch is attached that adds this behavior, as well as fixes some small issues in MQTT tests. It also includes a fix to remove connection info when the connection is shutdown due to a transport error or exception. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12702337">AMQ-5108</key>
            <summary>MQTT subscriptions for cleansession=true MUST be non-durable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="dhirajsb">Dhiraj Sureshkumar Bokde</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Mar 2014 08:04:58 +0000</created>
                <updated>Mon, 21 Jul 2014 22:25:40 +0000</updated>
                            <resolved>Mon, 21 Jul 2014 22:25:40 +0000</resolved>
                                    <version>5.9.0</version>
                                    <fixVersion>5.11.0</fixVersion>
                                    <component>MQTT</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13940283" author="dhirajsb" created="Wed, 19 Mar 2014 08:09:27 +0000"  >&lt;p&gt;Patch to fix cleansession behavior and improvements to tests, also marked testResendMessageId() as ignored as it causes unexplained failures as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-4712&quot; title=&quot;MQTT unit tests fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-4712&quot;&gt;&lt;del&gt;AMQ-4712&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13940508" author="gtully" created="Wed, 19 Mar 2014 14:36:54 +0000"  >&lt;p&gt;with that patch applied i often see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests run: 29, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 41.505 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.activemq.transport.mqtt.MQTTTest
testReceiveMessageSentWhileOffline(org.apache.activemq.transport.mqtt.MQTTTest)  Time elapsed: 0.328 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.net.ProtocolException: Command from server contained an invalid message id: 1
	at org.fusesource.mqtt.client.CallbackConnection.completeRequest(CallbackConnection.java:723)
	at org.fusesource.mqtt.client.CallbackConnection.processFrame(CallbackConnection.java:762)
	at org.fusesource.mqtt.client.CallbackConnection.access$1500(CallbackConnection.java:51)
	at org.fusesource.mqtt.client.CallbackConnection$6.onTransportCommand(CallbackConnection.java:392)
	at org.fusesource.hawtdispatch.transport.TcpTransport.drainInbound(TcpTransport.java:709)
	at org.fusesource.hawtdispatch.transport.TcpTransport$6.run(TcpTransport.java:588)
	at org.fusesource.hawtdispatch.internal.NioDispatchSource$3.run(NioDispatchSource.java:209)
	at org.fusesource.hawtdispatch.internal.SerialDispatchQueue.run(SerialDispatchQueue.java:100)
	at org.fusesource.hawtdispatch.internal.pool.SimpleThread.run(SimpleThread.java:77)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; this needs some investigation. But it works standalone so may just be some inter test interactions.&lt;/p&gt;</comment>
                            <comment id="13940512" author="gtully" created="Wed, 19 Mar 2014 14:40:04 +0000"  >&lt;p&gt;patch applied with thanks - &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/activemq/commit/bf8eb0e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/activemq/commit/bf8eb0e6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13955825" author="tabish121" created="Mon, 31 Mar 2014 22:36:40 +0000"  >&lt;p&gt;Think this one might be sorted, all tests appear to be enabled and passing now. &lt;/p&gt;</comment>
                            <comment id="14069433" author="tabish121" created="Mon, 21 Jul 2014 22:25:40 +0000"  >&lt;p&gt;This appears to be fixed now tests run without any issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12635513" name="AMQ-5108.patch" size="16821" author="dhirajsb" created="Wed, 19 Mar 2014 08:09:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tl7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380956</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>