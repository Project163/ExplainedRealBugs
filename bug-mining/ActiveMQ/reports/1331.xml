<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:51:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3543] STOMP connector: unexpected reply-to value for remote temporary topic</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3543</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The reply-to header on a MESSAGE frame resulting from the sending of a message (SEND) with the reply-to header set to a temporary topic is in the form /temp-topic/&amp;lt;local-temp-topic-name&amp;gt; rather than the expected &lt;br/&gt;
/remote-temp-topic/&amp;lt;system_generated_name&amp;gt;&lt;/p&gt;

&lt;p&gt;This only happens when the same connection is used for sending and receiving messages. When a temporary queue is used, the reply-to appears as /remote-temp-queue/xxx as expected. So even if one takes the position that it is reasonable for the local name to be used given that everything is on the same connection, there is an inconsistency between the topic and queue cases. For our purposes we would prefer that the remote form be used always, because we are actually servicing two different users on the same connection (first user does the SEND, second user receives the MESSAGE).&lt;/p&gt;

&lt;p&gt;Test case for the underlying ActiveMQ bug is attached: StompRemoteTempTopic.java&lt;/p&gt;

&lt;p&gt;To reproduce, drop this file into $ACTIVEMQ_HOME/example/src, edit build.xml in the example&lt;br/&gt;
directory to add the following:&lt;/p&gt;

&lt;p&gt;&amp;lt;target name=&quot;bug&quot; depends=&quot;compile&quot; description=&quot;Runs test case for replyTo TempTopic bug&quot;&amp;gt;&lt;br/&gt;
&amp;lt;echo&amp;gt;Running a Stomp example&amp;lt;/echo&amp;gt;&lt;br/&gt;
&amp;lt;java classname=&quot;StompRemoteTempTopic&quot; fork=&quot;yes&quot; maxmemory=&quot;100M&quot;&amp;gt;&lt;br/&gt;
&amp;lt;classpath refid=&quot;javac.classpath&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;jvmarg value=&quot;-server&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/java&amp;gt;&lt;br/&gt;
&amp;lt;/target&amp;gt;&lt;/p&gt;

&lt;p&gt;and run by issuing the command &quot;ant bug&quot;. Output is as follows:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Running a Stomp example&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; =====================================================&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Test run using temporary topic&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; -----------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Sending request message: SEND with reply-to=/temp-topic/2C26441740C0ECC9tt1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Received request message: MESSAGE with reply-to=/temp-topic/2C26441740C0ECC9tt1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Response MESSAGE received&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; =====================================================&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Test run using temporary queue&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; -----------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Sending request message: SEND with reply-to=/temp-queue/2C26441740C0ECC9tt1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Received request message: MESSAGE with reply-to=/remote-temp-queue/ID:ChrisBarrow-lap-61815-1318539910206-4:6:1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Response MESSAGE received&lt;/p&gt;

&lt;p&gt;This makes it easy to see that for the queue case the reply-to is set to the remote temporary queue but for the topic case the local temporary topic is specified.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527106">AMQ-3543</key>
            <summary>STOMP connector: unexpected reply-to value for remote temporary topic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="chris.barrow">Christopher Barrow</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2011 21:42:24 +0000</created>
                <updated>Fri, 14 Oct 2011 21:46:50 +0000</updated>
                            <resolved>Fri, 14 Oct 2011 20:54:10 +0000</resolved>
                                    <version>5.x</version>
                                    <fixVersion>5.6.0</fixVersion>
                                    <component>STOMP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13127853" author="tabish121" created="Fri, 14 Oct 2011 20:54:10 +0000"  >&lt;p&gt;Fix applied in trunk, the reply-to destinations will be set to the same as what was given in the original message.  The remote names shouldn&apos;t leak from the Stomp transport.  Test case added.&lt;/p&gt;</comment>
                            <comment id="13127876" author="chris.barrow" created="Fri, 14 Oct 2011 21:34:43 +0000"  >&lt;p&gt;Wow, thanks for such a quick response! Just want to check my understanding of your fix. Does it mean the received MESSAGE with reply-to ( received as a result of the SEND) will now have reply-to = &apos;/temp-queue/...&apos; or &apos;/temp-topic/...&apos;? &lt;/p&gt;

&lt;p&gt;What about the case where two connections are used (one connection owns the temporary destination and emits the SEND with reply-to, a second connection receives the MESSAGE). Presumably in that case the reply-to would have to be &apos;/remote-temp-queue/...&apos; or &apos;/remote-temp-topic/...&apos; since the temporary destination actually belongs to the other connection?&lt;/p&gt;</comment>
                            <comment id="13127892" author="tabish121" created="Fri, 14 Oct 2011 21:46:50 +0000"  >&lt;p&gt;From the client side the replyTo destination&apos;s parent connection should be opaque, so all connections would receive the same /temp-topic/ or /temp-queue/ values.  Its up to your clients to ensure that the name&apos;s of the temp destinations that they create are unique, using a UUID for instance.  The remote prefix is used internally by amq to match up its own destination structures and shouldn&apos;t have been leaking out of the Stomp transport.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498936" name="StompRemoteTempTopic.java" size="4374" author="chris.barrow" created="Thu, 13 Oct 2011 21:46:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85477</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aipj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>