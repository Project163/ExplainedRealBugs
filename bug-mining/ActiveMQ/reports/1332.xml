<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:51:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3542] Using failover: with static discovery in a network connector to choose from a master/slave tuple leads to hangs and invalid states</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3542</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;static discovery will try to connect to all provided urls. When the list is a master/slave pair with shared storage, only one will active, leading log messages indicating repeated failure to connect.&lt;br/&gt;
A potential solution is to use failover: just to pick a url but let it delegate failover to the network connector such that the network bridge is correctly stopped/restarted.&lt;br/&gt;
  &lt;tt&gt;static:(failover:(tcp://a:61616,tcp://slave:61616)?maxReconnectAttempts=..)&lt;/tt&gt;&lt;br/&gt;
This does not work reliably atm, due to inconsistency in the failover reconnect logic, a network connectors interest in transport interruption/resumption and the lack of thread safety in tracking existing bridges.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12527083">AMQ-3542</key>
            <summary>Using failover: with static discovery in a network connector to choose from a master/slave tuple leads to hangs and invalid states</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                            <label>failover</label>
                            <label>master</label>
                            <label>network</label>
                            <label>slave</label>
                    </labels>
                <created>Thu, 13 Oct 2011 19:33:20 +0000</created>
                <updated>Mon, 30 Apr 2012 10:08:53 +0000</updated>
                            <resolved>Thu, 13 Oct 2011 20:23:01 +0000</resolved>
                                    <version>5.4.2</version>
                    <version>5.5.0</version>
                                    <fixVersion>5.6.0</fixVersion>
                                    <component>Connector</component>
                    <component>Transport</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13126882" author="gtully" created="Thu, 13 Oct 2011 20:23:01 +0000"  >&lt;p&gt;fix and test in: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1183062&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1183062&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;static:(failover:(a,b)?maxReconnectAttempts=0)&lt;/tt&gt; now works reliably to choose a working url from (a,b) and report failures without trying to reconnect/failover. The network connector then gets to recover using its stop/restart logic.&lt;br/&gt;
This is a usage pattern for &lt;tt&gt;failover:&lt;/tt&gt; where it is used solely to pick a valid broker url. It does &lt;b&gt;not&lt;/b&gt; try to recover a failed connection. Network connectors need to manage failed connections themselves b/c they are not simple jms client connections.&lt;/p&gt;

&lt;p&gt;Note: this commit changes the default value of maxReconnectAttempts for the failover: transport. A value of 0 now disables reconnections, the default for infinite retries is now -1.&lt;/p&gt;</comment>
                            <comment id="13264860" author="mserrano" created="Mon, 30 Apr 2012 10:08:53 +0000"  >&lt;p&gt;note: Make sure you do not have randomize=false on your failover uri as I did.  I copied it from a place where that makes sense.  In this situation, it means the &lt;tt&gt;a&lt;/tt&gt; part of the failover would always be chosen when recovery occurs and it will never fail over.  That was a wasted day.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12529894">AMQ-3575</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aipr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>