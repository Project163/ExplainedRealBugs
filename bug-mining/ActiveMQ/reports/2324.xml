<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:05:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5105] leveldb fails to startup because of NoSuchMethodError</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5105</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;leveldb persistence fails to start due to errors as given below &lt;/p&gt;

&lt;p&gt; Caused by: java.lang.NoSuchMethodError: com.google.common.base.Objects.firstNonNull(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;&lt;br/&gt;
        at com.google.common.cache.CacheBuilder.getKeyStrength(CacheBuilder.java:530)&lt;br/&gt;
        at com.google.common.cache.LocalCache.&amp;lt;init&amp;gt;(LocalCache.java:238)&lt;br/&gt;
        at com.google.common.cache.LocalCache$LocalLoadingCache.&amp;lt;init&amp;gt;(LocalCache.java:4861)&lt;br/&gt;
        at com.google.common.cache.CacheBuilder.build(CacheBuilder.java:803)&lt;br/&gt;
        at org.iq80.leveldb.impl.TableCache.&amp;lt;init&amp;gt;(TableCache.java:46)&lt;br/&gt;
        at org.iq80.leveldb.impl.DbImpl.&amp;lt;init&amp;gt;(DbImpl.java:155)&lt;br/&gt;
        at org.iq80.leveldb.impl.Iq80DBFactory.open(Iq80DBFactory.java:59)&lt;br/&gt;
        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$replay_init$2.apply$mcV$sp(LevelDBClient.scala:661)&lt;br/&gt;
        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$replay_init$2.apply(LevelDBClient.scala:657)&lt;br/&gt;
        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$replay_init$2.apply(LevelDBClient.scala:657)&lt;br/&gt;
        at org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:549)&lt;/p&gt;

&lt;p&gt;The problem seems to be because of multiple jars having the same classes&lt;/p&gt;

&lt;p&gt;guava-12.jar&lt;br/&gt;
pax-url-aether-1.5.2.jar&lt;/p&gt;

&lt;p&gt;The class present in pax-url-aether-1.5.2.jar gets loaded causing level db to fail.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any&lt;/p&gt;</environment>
        <key id="12701719">AMQ-5105</key>
            <summary>leveldb fails to startup because of NoSuchMethodError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="netlancermobi">Netlancer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Mar 2014 06:10:28 +0000</created>
                <updated>Mon, 19 Oct 2015 13:43:53 +0000</updated>
                            <resolved>Thu, 17 Jul 2014 15:16:29 +0000</resolved>
                                    <version>5.10.0</version>
                                    <fixVersion>5.11.0</fixVersion>
                                    <component>LevelDB</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="13936445" author="netlancermobi" created="Sun, 16 Mar 2014 06:15:10 +0000"  >&lt;p&gt;Current workaround is to &lt;br/&gt;
Removing pax-url-aether-1.5.2.jar and disabling logQuery in activemq.conf &lt;/p&gt;

&lt;p&gt;   &amp;lt;!-- Allows accessing the server log --&amp;gt;&lt;br/&gt;
    &amp;lt;!--bean id=&quot;logQuery&quot; class=&quot;org.fusesource.insight.log.log4j.Log4jLogQuery&quot;&lt;br/&gt;
          lazy-init=&quot;false&quot; scope=&quot;singleton&quot;&lt;br/&gt;
          init-method=&quot;start&quot; destroy-method=&quot;stop&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/bean--&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14041890" author="adewavrin" created="Tue, 24 Jun 2014 08:58:43 +0000"  >&lt;p&gt;It worked for us, thanks&lt;br/&gt;
Anselme&lt;/p&gt;</comment>
                            <comment id="14065013" author="dejanb" created="Thu, 17 Jul 2014 15:16:29 +0000"  >&lt;p&gt;This is now fixed on trunk by upgrading log-insight, which now don&apos;t use pax-url-aether jar, but shades what it needs so there&apos;s no clash in guava version. I incidentally upgraded Jackson to 2.4.1 version&lt;/p&gt;</comment>
                            <comment id="14082248" author="kevin2014" created="Fri, 1 Aug 2014 13:45:33 +0000"  >&lt;p&gt;For Dejan&apos;s solution,  could you give more details?   I am using  5.10.0.&lt;/p&gt;

&lt;p&gt;which file is  log-insight that I need to upgrade?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14086277" author="nicdoye" created="Tue, 5 Aug 2014 13:49:42 +0000"  >&lt;p&gt;Kevin: Download insight-log4j-7.2.0.redhat-060.jar and insight-log-core-7.2.0.redhat-060.jar from, for example, &lt;a href=&quot;http://search.maven.org/#search%7Cga%7C1%7Cinsight-log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/#search%7Cga%7C1%7Cinsight-log&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Remove the 7.2.0-redhat-024 versions from $ACTIVEMQ_HOME/lib and the place the newly downloaded jar files in there. Also remove pax-url-aether-1.5.2.jar from the same directory.&lt;/p&gt;

&lt;p&gt;I have LevelDB working with shared storage on 5.10.0 just by doing that. Thank you, Dejan.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12724891">AMQ-5257</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1thhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>