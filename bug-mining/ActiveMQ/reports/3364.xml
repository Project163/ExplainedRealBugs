<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:50:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-8131] JDBC Store - durable topic with non matching selector can hold message till unsubscribe requires enableMessageExpirationOnActiveDurableSubs</title>
                <link>https://issues.apache.org/jira/browse/AMQ-8131</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Unmatched messages get an unmatched ack, however this ack is ignored by the topic message store under the assumption that there will be some subsequent ack that will more the cursor forward and allow cleanup to happen. However this may never happen and messages can accumulate till that subscription is removed.&lt;br/&gt;
The jdbc topic message store needs to track the unmatched acks in the normal way, however the ack sequence id is linear and any gap in unmatched would potentially ack previous messages of the same priority.&lt;/p&gt;

&lt;p&gt;The best we can do without converting to an individual ack table is the have expiry kick in and remove/ack these messages in the normal way.&lt;br/&gt;
The caveat being that expiry processing needs to be relatively linear in time. The broker attribute enableMessageExpirationOnActiveDurableSubs enables this feature, off by default.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355211">AMQ-8131</key>
            <summary>JDBC Store - durable topic with non matching selector can hold message till unsubscribe requires enableMessageExpirationOnActiveDurableSubs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gtully">Gary Tully</assignee>
                                    <reporter username="gtully">Gary Tully</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2021 14:37:32 +0000</created>
                <updated>Mon, 1 Feb 2021 13:14:47 +0000</updated>
                            <resolved>Mon, 1 Feb 2021 13:12:18 +0000</resolved>
                                    <version>5.16.0</version>
                                    <fixVersion>5.17.0</fixVersion>
                                    <component>JDBC</component>
                    <component>Message Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17274275" author="jira-bot" created="Fri, 29 Jan 2021 09:56:41 +0000"  >&lt;p&gt;Commit e1b3204407e0b51f0811083e77336fd71ad4c500 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=e1b3204&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=e1b3204&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8131&quot; title=&quot;JDBC Store - durable topic with non matching selector can hold message till unsubscribe requires enableMessageExpirationOnActiveDurableSubs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8131&quot;&gt;&lt;del&gt;AMQ-8131&lt;/del&gt;&lt;/a&gt; - track unmatched acks in the acks table&lt;/p&gt;</comment>
                            <comment id="17276210" author="gtully" created="Mon, 1 Feb 2021 09:52:36 +0000"  >&lt;p&gt;need to rethink, I see a failure in org.apache.activemq.usecases.DurableSubscriptionOffline3Test#testOfflineSubscriptionWithSelectorAfterRestart when there is a gap in unacked, pointing to the need to track each ack individually.&lt;br/&gt;
It may be that it is best to treat the durable sub that never gets a message as the special case.&lt;/p&gt;</comment>
                            <comment id="17276285" author="jira-bot" created="Mon, 1 Feb 2021 12:12:10 +0000"  >&lt;p&gt;Commit 2f40261362bb830899f7f369a731b446f795a627 in activemq&apos;s branch refs/heads/master from gtully&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=2f40261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=2f40261&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-8131&quot; title=&quot;JDBC Store - durable topic with non matching selector can hold message till unsubscribe requires enableMessageExpirationOnActiveDurableSubs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-8131&quot;&gt;&lt;del&gt;AMQ-8131&lt;/del&gt;&lt;/a&gt; - revert treating unmatched as real acks b/c individual acks are not tracked. make use of enableMessageExpirationOnActiveDurableSubs to ensure unmatched can eventually expire&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n3dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>