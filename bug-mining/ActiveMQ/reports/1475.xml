<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:53:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3753] Exception on stopping the broker - Timer already cancelled</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3753</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;I get this exception when i try to kill the broker.&lt;/p&gt;

&lt;p&gt;Failed to shut down: java.lang.IllegalStateException: Timer already cancelled.&lt;/p&gt;

&lt;p&gt;And the broker is killed, but why the exception ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544915">AMQ-3753</key>
            <summary>Exception on stopping the broker - Timer already cancelled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="xbhanu">Bhanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2012 11:09:18 +0000</created>
                <updated>Tue, 17 Apr 2012 14:51:38 +0000</updated>
                            <resolved>Sat, 14 Apr 2012 06:06:52 +0000</resolved>
                                                    <fixVersion>5.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13220847" author="davsclaus" created="Fri, 2 Mar 2012 11:33:19 +0000"  >&lt;p&gt;Can you post the full stracktrace. And log which version of the broker you are using. eg when reporting issues be more detailed.&lt;/p&gt;</comment>
                            <comment id="13220928" author="tabish121" created="Fri, 2 Mar 2012 13:52:39 +0000"  >&lt;p&gt;This sounds like something we saw in a SNAPSHOT build some time ago that has since been resolved.  Really need more info to know for sure though. &lt;/p&gt;</comment>
                            <comment id="13223347" author="tabish121" created="Tue, 6 Mar 2012 15:52:36 +0000"  >&lt;p&gt;Not enough info provided here to go on.&lt;/p&gt;</comment>
                            <comment id="13229174" author="xbhanu" created="Wed, 14 Mar 2012 13:18:41 +0000"  >&lt;p&gt;Sorry for the delay here. I am using version 5.5.1.&lt;/p&gt;

&lt;p&gt;This error is not thrown every time but 3 out of 5 times I am seeing this in my setup. Here is the complete stacktrace:-&lt;/p&gt;

&lt;p&gt;2012-03-14 18:39:44,718 | ERROR | Could not stop service: TcpTransport. Reason: java.lang.IllegalStateException: Timer already cancelled. | org.apache.activemq.broker.jmx.ManagedTransportConnector | ActiveMQ ShutdownHook&lt;br/&gt;
java.lang.IllegalStateException: Timer already cancelled.&lt;br/&gt;
        at java.util.Timer.sched(Timer.java:397)&lt;br/&gt;
        at java.util.Timer.schedule(Timer.java:248)&lt;br/&gt;
        at org.apache.activemq.jmdns.JmDNS$Canceler.start(JmDNS.java:2202)&lt;br/&gt;
        at org.apache.activemq.jmdns.JmDNS.unregisterService(JmDNS.java:648)&lt;br/&gt;
        at org.apache.activemq.transport.discovery.rendezvous.RendezvousDiscoveryAgent.stop(RendezvousDiscoveryAgent.java:88)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnector.stop(TransportConnector.java:282)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stopAllConnectors(BrokerService.java:1658)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stop(BrokerService.java:580)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.containerShutdown(BrokerService.java:1995)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService$4.run(BrokerService.java:1962)&lt;br/&gt;
2012-03-14 18:39:44,994 | ERROR | Could not stop service: TcpTransport. Reason: java.lang.IllegalStateException: Timer already cancelled. | org.apache.activemq.broker.jmx.ManagedTransportConnector | Thread-5&lt;br/&gt;
java.lang.IllegalStateException: Timer already cancelled.&lt;br/&gt;
        at java.util.Timer.sched(Timer.java:397)&lt;br/&gt;
        at java.util.Timer.schedule(Timer.java:248)&lt;br/&gt;
        at org.apache.activemq.jmdns.JmDNS$Canceler.start(JmDNS.java:2202)&lt;br/&gt;
        at org.apache.activemq.jmdns.JmDNS.unregisterService(JmDNS.java:648)&lt;br/&gt;
        at org.apache.activemq.transport.discovery.rendezvous.RendezvousDiscoveryAgent.stop(RendezvousDiscoveryAgent.java:88)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.TransportConnector.stop(TransportConnector.java:282)&lt;br/&gt;
        at org.apache.activemq.util.ServiceStopper.stop(ServiceStopper.java:41)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stopAllConnectors(BrokerService.java:1658)&lt;br/&gt;
        at org.apache.activemq.broker.BrokerService.stop(BrokerService.java:580)&lt;br/&gt;
        at org.apache.activemq.console.command.StartCommand$1.run(StartCommand.java:135)&lt;/p&gt;</comment>
                            <comment id="13254003" author="rajdavies" created="Sat, 14 Apr 2012 06:06:54 +0000"  >&lt;p&gt;Fixed by SVN revision 1326056&lt;/p&gt;</comment>
                            <comment id="13255609" author="xbhanu" created="Tue, 17 Apr 2012 14:51:38 +0000"  >&lt;p&gt;Thanks a lot Rob !!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ai2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59201</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>