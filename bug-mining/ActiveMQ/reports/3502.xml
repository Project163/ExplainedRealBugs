<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:59:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-9685] Empty virtualName from broken queue name</title>
                <link>https://issues.apache.org/jira/browse/AMQ-9685</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Accidentally &quot;invalid&quot; queue name can lead to broken broker after throwing &quot;&lt;tt&gt;Invalid destination name: a non-empty name is required&lt;/tt&gt;&quot;&lt;/p&gt;

&lt;p&gt;If the destination name used is just the prefix of the virtual topic it will give an error but end up partially initializing the destination in the store and causing errors, including on restart.&lt;/p&gt;

&lt;p&gt;The best fix would be to prevent creation but this is tricky because the store and destination need to be initialized before processing the virtual topic interceptor and cleaning up later is risky and could lead to data loss if we try and generally roll back any interceptor being applied and assume any exception means we should delete the destination and store. The simplest fix here is to just only match the virtual topic if the topic name is actually provided and not just the prefix.&lt;/p&gt;

&lt;p&gt;The only downside to this change would be that is if someone now made a typo and forgot the topic name and just had a prefix we end up with a destination created that matches the VT prefix name which isn&apos;t great but is easily fixable by cleaning up the destination vs having a bunch of errors. If really necessary, creation could probably also be prevented for destinations that are missing the virtual name for the VT if it is really necessary with ACLs or some sort of custom ACL logic.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="13611769">AMQ-9685</key>
            <summary>Empty virtualName from broken queue name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="graben">Benjamin Graf</reporter>
                        <labels>
                            <label>error</label>
                            <label>virtualtopic</label>
                    </labels>
                <created>Thu, 13 Mar 2025 20:47:01 +0000</created>
                <updated>Tue, 18 Mar 2025 19:57:22 +0000</updated>
                            <resolved>Tue, 18 Mar 2025 19:57:22 +0000</resolved>
                                    <version>5.19.0</version>
                    <version>6.1.6</version>
                                    <fixVersion>6.2.0</fixVersion>
                    <fixVersion>5.19.1</fixVersion>
                    <fixVersion>6.1.7</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17936611" author="jira-bot" created="Tue, 18 Mar 2025 19:42:30 +0000"  >&lt;p&gt;Commit 0ffe52a28b85dfb4a31ec6d7d522cb578341c8a9 in activemq&apos;s branch refs/heads/main from Benjamin Graf&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0ffe52a28b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0ffe52a28b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Virtual topic name should have at least one character to avoid Exception&lt;/p&gt;</comment>
                            <comment id="17936612" author="jira-bot" created="Tue, 18 Mar 2025 19:42:30 +0000"  >&lt;p&gt;Commit 0f2afd0bec1c4c01c96e6a7349914c31587e2cc7 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0f2afd0bec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=0f2afd0bec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #1410 from graben/&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Virtual topic name should have at least one character to avoid Exception&lt;/p&gt;</comment>
                            <comment id="17936613" author="jira-bot" created="Tue, 18 Mar 2025 19:42:59 +0000"  >&lt;p&gt;Commit 4b22a4c5c5c584228a35490cf0c0b6ffad916978 in activemq&apos;s branch refs/heads/main from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4b22a4c5c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=4b22a4c5c5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Improve test&lt;/p&gt;</comment>
                            <comment id="17936615" author="jira-bot" created="Tue, 18 Mar 2025 19:46:39 +0000"  >&lt;p&gt;Commit c24a6253b8009cafdbf2945ec7fbcdcb2532f97a in activemq&apos;s branch refs/heads/activemq-6.1.x from Benjamin Graf&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c24a6253b8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=c24a6253b8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Virtual topic name should have at least one character to avoid Exception&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 0ffe52a28b85dfb4a31ec6d7d522cb578341c8a9)&lt;/p&gt;</comment>
                            <comment id="17936616" author="jira-bot" created="Tue, 18 Mar 2025 19:46:39 +0000"  >&lt;p&gt;Commit 11c5beb67f386e2c75572b3fced64287322ecb6d in activemq&apos;s branch refs/heads/activemq-6.1.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=11c5beb67f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=11c5beb67f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Improve test&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 4b22a4c5c5c584228a35490cf0c0b6ffad916978)&lt;/p&gt;</comment>
                            <comment id="17936618" author="jira-bot" created="Tue, 18 Mar 2025 19:50:43 +0000"  >&lt;p&gt;Commit af2a38c8971a923241d749c846c5921f70dfdaff in activemq&apos;s branch refs/heads/activemq-5.19.x from Benjamin Graf&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=af2a38c897&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=af2a38c897&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Virtual topic name should have at least one character to avoid Exception&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 0ffe52a28b85dfb4a31ec6d7d522cb578341c8a9)&lt;/p&gt;</comment>
                            <comment id="17936619" author="jira-bot" created="Tue, 18 Mar 2025 19:50:43 +0000"  >&lt;p&gt;Commit a7de0333daef4f5df582fb063010bd21530693b0 in activemq&apos;s branch refs/heads/activemq-5.19.x from Christopher L. Shannon&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a7de0333da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=activemq.git;h=a7de0333da&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-9685&quot; title=&quot;Empty virtualName from broken queue name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-9685&quot;&gt;&lt;del&gt;AMQ-9685&lt;/del&gt;&lt;/a&gt; - Improve test&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 4b22a4c5c5c584228a35490cf0c0b6ffad916978)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1urjk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>