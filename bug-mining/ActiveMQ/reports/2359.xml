<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:05:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5281] Incorrect handling of unknown values in selectors</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5281</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Due to JmsMessage specification :&lt;br/&gt;
&lt;a href=&quot;http://docs.oracle.com/javaee/1.4/api/javax/jms/Message.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javaee/1.4/api/javax/jms/Message.html&lt;/a&gt;&lt;br/&gt;
There are rules how unknown Values evaluates. &lt;/p&gt;

&lt;p&gt;I found 4 violations of specificatoion:&lt;br/&gt;
1) Equals expression &quot;=&quot;.&lt;br/&gt;
&quot;unknownProp = 0&quot; should evaluate to UNKNOWN.&lt;br/&gt;
In AMQ it evaluates to FALSE instead.&lt;br/&gt;
2) Not equals expression &quot;&amp;lt;&amp;gt;&quot;.&lt;br/&gt;
&quot;unknownProp &amp;lt;&amp;gt; 0&quot; should evaluate to UNKNOWN, it evaluates to FALSE instead.&lt;br/&gt;
3) Or expression &quot;or&quot;.&lt;br/&gt;
&quot;unknown or false&quot; should evaluate to UNKNOWN. It evaluates to FALSE instead.&lt;br/&gt;
4) And expression &quot;and&quot;.&lt;br/&gt;
&quot;unknown and false&quot; should evaluate to FALSE. It evaluates to UNKNOWN instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12728178">AMQ-5281</key>
            <summary>Incorrect handling of unknown values in selectors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="traylz">Grigroy Sobko</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jul 2014 10:02:07 +0000</created>
                <updated>Fri, 22 Aug 2014 19:01:12 +0000</updated>
                            <resolved>Mon, 18 Aug 2014 17:25:10 +0000</resolved>
                                    <version>5.8.0</version>
                    <version>5.x</version>
                                    <fixVersion>5.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14068295" author="traylz" created="Mon, 21 Jul 2014 07:45:58 +0000"  >&lt;p&gt;The is caused by org.apache.activemq.filter.LogicExpression, in this lines:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; BooleanExpression createAND(BooleanExpression lvalue, BooleanExpression rvalue) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LogicExpression(lvalue, rvalue) {

            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; evaluate(MessageEvaluationContext message) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; JMSException {

                &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; lv = (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;)left.evaluate(message);

               &lt;span class=&quot;code-comment&quot;&gt;// Can we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; an AND shortcut??
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lv == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!lv.booleanValue()) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE;
                }

                &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; rv = (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;)right.evaluate(message);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rv == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : rv;
            }

            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getExpressionSymbol() {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;AND&quot;&lt;/span&gt;;
            }
        };
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You see comment &quot;//Can we do an AND shortcut??&quot;?&lt;br/&gt;
That&apos;s the cause of that bug.&lt;/p&gt;

&lt;p&gt;When left value is unknown method returns null. That&apos;s incorrect. You should check if right value is false and return false in that case.&lt;/p&gt;</comment>
                            <comment id="14068300" author="traylz" created="Mon, 21 Jul 2014 07:57:43 +0000"  >&lt;p&gt;I can create a pull-request on github with fix and some more test, if that OK with you.&lt;/p&gt;</comment>
                            <comment id="14068676" author="tabish121" created="Mon, 21 Jul 2014 15:55:18 +0000"  >&lt;p&gt;It does seem like we don&apos;t fully follow the mandated behaviour.  The first thing to do is create or add a test to the existing unit tests that demonstrates the error.  There is a selector test class (SelectorTest.java) you could add to and then supply a patch that corrects the issue.  By adding a test you have confidence that the fix will remain into the future.&lt;/p&gt;</comment>
                            <comment id="14099992" author="githubbot" created="Sun, 17 Aug 2014 17:24:45 +0000"  >&lt;p&gt;GitHub user traylz opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/44&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5281&quot; title=&quot;Incorrect handling of unknown values in selectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5281&quot;&gt;&lt;del&gt;AMQ-5281&lt;/del&gt;&lt;/a&gt;: Incorrect handling of unknown values in selectors&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5281&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5281&lt;/a&gt; for details.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/traylz/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/traylz/activemq&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/44.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/44.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #44&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b018d89875a4cc8e92b355aeb087ba112872c1e2&lt;br/&gt;
Author: Grigory &amp;lt;gstraylz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-08-17T17:17:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5281&quot; title=&quot;Incorrect handling of unknown values in selectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5281&quot;&gt;&lt;del&gt;AMQ-5281&lt;/del&gt;&lt;/a&gt;: Incorrect handling of unknown values in selectors (=, &amp;lt;&amp;gt;, or, and)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14099993" author="traylz" created="Sun, 17 Aug 2014 17:25:42 +0000"  >&lt;p&gt;Ok, I created pull-request on git-hub, please, review&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/activemq/pull/44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/44&lt;/a&gt;.&lt;br/&gt;
I will update description of JIRA now&lt;/p&gt;</comment>
                            <comment id="14100884" author="tabish121" created="Mon, 18 Aug 2014 17:25:10 +0000"  >&lt;p&gt;Patch applied with thanks.&lt;/p&gt;</comment>
                            <comment id="14107293" author="githubbot" created="Fri, 22 Aug 2014 19:01:12 +0000"  >&lt;p&gt;Github user traylz closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/44&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12728177">AMQ-5280</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xwyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>