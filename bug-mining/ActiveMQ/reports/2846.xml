<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:35:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-6310] Certain VirtualTopic configurations no longer send messages to the correct queue</title>
                <link>https://issues.apache.org/jira/browse/AMQ-6310</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Several of our brokers have a VirtualTopic with the name &lt;tt&gt;VirtualTopic.&amp;gt;&lt;/tt&gt; and a prefix of &lt;tt&gt;&amp;#42;.&amp;#42;.&lt;/tt&gt;.  The expected behavior would be that a message sent to &lt;tt&gt;VirtualTopic.A&lt;/tt&gt; should be consumed on a queue with any pattern that matches &lt;tt&gt;&amp;#42;.&amp;#42;.VirtualTopic.A&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;For example, if a message is published to a topic called &lt;tt&gt;VirtualTopic.A&lt;/tt&gt;, that would be consumed on queues &lt;tt&gt;Consumer.A.VirtualTopic.A&lt;/tt&gt; and &lt;tt&gt;Subscriber.A.VirtualTopic.A&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;However, since the change made in &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6058&quot; title=&quot;Certain VirtualTopic configurations send messages to the wrong queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6058&quot;&gt;&lt;del&gt;AMQ-6058&lt;/del&gt;&lt;/a&gt;, it appears that, given the example above, &lt;em&gt;neither&lt;/em&gt; queue receives the message.  This is because the change performs a startsWith comparison of the destination against the prefix, rather than a regex comparison.&lt;/p&gt;

&lt;p&gt;If there is a reason to prevent leading wildcards in the prefix, it should be documented, otherwise the sanity check in shouldDispatch(...) needs to be updated to handle it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975771">AMQ-6310</key>
            <summary>Certain VirtualTopic configurations no longer send messages to the correct queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cshannon">Christopher L. Shannon</assignee>
                                    <reporter username="jonathanmalek">Jonathan Malek</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Jun 2016 23:30:20 +0000</created>
                <updated>Mon, 6 Jun 2016 13:18:45 +0000</updated>
                            <resolved>Mon, 6 Jun 2016 13:18:45 +0000</resolved>
                                    <version>5.13.0</version>
                                    <fixVersion>5.13.4</fixVersion>
                    <fixVersion>5.14.0</fixVersion>
                                    <component>Broker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15315688" author="githubbot" created="Sun, 5 Jun 2016 00:00:55 +0000"  >&lt;p&gt;GitHub user JonathanMalek opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/188&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt; added a check to ensure the leading wildcards in prefixes are handled correctly.&lt;/p&gt;

&lt;p&gt;    Checking for leading wildcard in the prefix for a virtualtopic, modifying the behavior of shouldDispatch in the VirtualTopicInterceptor.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/JonathanMalek/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/JonathanMalek/activemq&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/188.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/188.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #188&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6bf5987921f6fdb6844652bb77e2fc14b002ccf2&lt;br/&gt;
Author: Jonathan Malek &amp;lt;jonathan@jonathanmalek.me&amp;gt;&lt;br/&gt;
Date:   2016-06-04T23:51:27Z&lt;/p&gt;

&lt;p&gt;    A fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Checking for leading wildcard in the prefix for a virtualtopic,&lt;br/&gt;
    modifying the behavior of shouldDispatch in the VirtualTopicInterceptor.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15316471" author="jira-bot" created="Mon, 6 Jun 2016 13:16:28 +0000"  >&lt;p&gt;Commit 6bf5987921f6fdb6844652bb77e2fc14b002ccf2 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jonathanmalek&quot; class=&quot;user-hover&quot; rel=&quot;jonathanmalek&quot;&gt;jonathanmalek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=6bf5987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=6bf5987&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;A fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Checking for leading wildcard in the prefix for a virtualtopic,&lt;br/&gt;
modifying the behavior of shouldDispatch in the VirtualTopicInterceptor.&lt;/p&gt;</comment>
                            <comment id="15316472" author="jira-bot" created="Mon, 6 Jun 2016 13:16:29 +0000"  >&lt;p&gt;Commit 2b03e6a9422dc40729bd8cc5a4c235a1631a5d83 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2b03e6a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2b03e6a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6310&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merging fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This closes #188&lt;/p&gt;</comment>
                            <comment id="15316473" author="jira-bot" created="Mon, 6 Jun 2016 13:16:30 +0000"  >&lt;p&gt;Commit 2b03e6a9422dc40729bd8cc5a4c235a1631a5d83 in activemq&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cshannon&quot; class=&quot;user-hover&quot; rel=&quot;cshannon&quot;&gt;cshannon&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2b03e6a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=2b03e6a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-6310&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merging fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This closes #188&lt;/p&gt;</comment>
                            <comment id="15316474" author="githubbot" created="Mon, 6 Jun 2016 13:16:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/188&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15316479" author="jira-bot" created="Mon, 6 Jun 2016 13:17:56 +0000"  >&lt;p&gt;Commit 539d6b747a96e2fb848a7a9d3d5329893fe5d360 in activemq&apos;s branch refs/heads/activemq-5.13.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jonathanmalek&quot; class=&quot;user-hover&quot; rel=&quot;jonathanmalek&quot;&gt;jonathanmalek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=539d6b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=539d6b7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;A fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6310&quot; title=&quot;Certain VirtualTopic configurations no longer send messages to the correct queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6310&quot;&gt;&lt;del&gt;AMQ-6310&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Checking for leading wildcard in the prefix for a virtualtopic,&lt;br/&gt;
modifying the behavior of shouldDispatch in the VirtualTopicInterceptor.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 6bf5987921f6fdb6844652bb77e2fc14b002ccf2)&lt;/p&gt;</comment>
                            <comment id="15316482" author="christopher.l.shannon" created="Mon, 6 Jun 2016 13:18:45 +0000"  >&lt;p&gt;Patch applied with thanks. It will be included in 5.14.0 and 5.13.4 (if that version is released)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yzrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>