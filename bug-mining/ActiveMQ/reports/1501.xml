<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:54:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-3842] test units should run discovery mechanism via loopback device</title>
                <link>https://issues.apache.org/jira/browse/AMQ-3842</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;Many test units are failing on boxes with NAT firewalls enabled, although discovery via loopback device would (IMHO) be sufficient for test units.&lt;/p&gt;

&lt;p&gt;My NAT setup allows all traffic via lo, but only related traffic via eth0 etc., which should be the regular fw security setup on most or many end-user boxes.&lt;/p&gt;

&lt;p&gt;The test org.apache.activemq.transport.discovery.DiscoveryTransportNoBrokerTest (for example) makes activemq send out discovery messages via eth0, which is probably not a perfect solution if one wants to have portable test units (and also produces spam packets on the local network during testing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;NAT FW&lt;/p&gt;</environment>
        <key id="12555923">AMQ-3842</key>
            <summary>test units should run discovery mechanism via loopback device</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rnfm7avr">Mark</reporter>
                        <labels>
                            <label>discovery</label>
                    </labels>
                <created>Tue, 15 May 2012 22:57:43 +0000</created>
                <updated>Mon, 21 May 2012 12:55:04 +0000</updated>
                            <resolved>Mon, 21 May 2012 12:55:04 +0000</resolved>
                                    <version>5.6.0</version>
                                                    <component>Test Cases</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13277775" author="tabish121" created="Thu, 17 May 2012 12:58:45 +0000"  >&lt;p&gt;Which tests are actually hanging?&lt;/p&gt;</comment>
                            <comment id="13278015" author="rnfm7avr" created="Thu, 17 May 2012 17:49:19 +0000"  >&lt;p&gt;current trunk:&lt;/p&gt;

&lt;p&gt;mvn test -V -B -U -Dtest=DiscoveryTransportNoBrokerTest&lt;/p&gt;

&lt;p&gt;tail -F /home/mark/tmp/activemq/activemq-core/target/activemq-test.log :&lt;/p&gt;

&lt;p&gt;2012-05-17 19:46:20,350 &lt;span class=&quot;error&quot;&gt;&amp;#91;JMX connector  &amp;#93;&lt;/span&gt; - INFO  ManagementContext              - JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi&lt;br/&gt;
2012-05-17 19:46:20,380 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  PListStore                     - PListStore:&lt;span class=&quot;error&quot;&gt;&amp;#91;/home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/tmp_storage &amp;#93;&lt;/span&gt; started&lt;br/&gt;
2012-05-17 19:46:20,382 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  BrokerService                  - Using Persistence Adapter: KahaDBPersistenceAdapter&lt;span class=&quot;error&quot;&gt;&amp;#91;/home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/KahaDB&amp;#93;&lt;/span&gt;&lt;br/&gt;
2012-05-17 19:46:20,708 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  MessageDatabase                - KahaDB is version 4&lt;br/&gt;
2012-05-17 19:46:20,726 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  MessageDatabase                - Recovering from the journal ...&lt;br/&gt;
2012-05-17 19:46:20,726 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  MessageDatabase                - Recovery replayed 1 operations from the journal in 0.008 seconds.&lt;br/&gt;
2012-05-17 19:46:20,733 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  BrokerService                  - ActiveMQ null JMS Message Broker (localhost) is starting&lt;br/&gt;
2012-05-17 19:46:20,733 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  BrokerService                  - For help or more information please see: &lt;a href=&quot;http://activemq.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/&lt;/a&gt;&lt;br/&gt;
2012-05-17 19:46:20,878 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  TransportServerThreadSupport   - Listening for connections at: tcp://localhost:36299?transport.closeAsync=false&lt;br/&gt;
2012-05-17 19:46:20,881 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  TransportConnector             - Connector tcp://localhost:36299?transport.closeAsync=false Started&lt;br/&gt;
2012-05-17 19:46:20,882 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  BrokerService                  - ActiveMQ JMS Message Broker (localhost, ID:i5-34740-1337276780746-0:1) started&lt;br/&gt;
2012-05-17 19:46:20,883 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - WARN  BrokerService                  - Store limit is 100000 mb, whilst the data directory: /home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/KahaDB only has 39120 mb of usable space&lt;br/&gt;
2012-05-17 19:46:20,883 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - ERROR BrokerService                  - Temporary Store limit is 50000 mb, whilst the temporary data directory: /home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/tmp_storage only has 39120 mb of usable space&lt;br/&gt;
2012-05-17 19:46:20,883 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  DiscoveryTransportNoBrokerTest - Broker started - thread Count:8&lt;br/&gt;
2012-05-17 19:46:20,883 &lt;span class=&quot;error&quot;&gt;&amp;#91;main           &amp;#93;&lt;/span&gt; - INFO  DiscoveryTransportNoBrokerTest - Connecting.&lt;/p&gt;</comment>
                            <comment id="13279132" author="tabish121" created="Fri, 18 May 2012 20:00:47 +0000"  >&lt;p&gt;The error messages simply point out that the configuration could lead to issues.  The tests themselves don&apos;t really need 50gig.  Why its hanging probably doesn&apos;t have any relation to the error especially for the test case shown.  You could easily validate this by changing the test to reduce the configured min space requirement and see if it still hangs.  &lt;/p&gt;</comment>
                            <comment id="13279187" author="rnfm7avr" created="Fri, 18 May 2012 21:11:12 +0000"  >&lt;p&gt;You are correct. Changed topic and description.&lt;/p&gt;</comment>
                            <comment id="13279248" author="tabish121" created="Fri, 18 May 2012 22:06:37 +0000"  >&lt;p&gt;The tests aren&apos;t really designed to be portable, they are designed to test the various use cases of the Broker.  You may need to make accommodations on your specific machine to allow all tests to run.  I&apos;ve added autofail to the test case you mentioned which should prevent the hang, it will still fail of course. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0suhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>