<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:43:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-2513] JMX bug - javax.management.InstanceNotFoundException</title>
                <link>https://issues.apache.org/jira/browse/AMQ-2513</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;1) start broker&lt;br/&gt;
2) start sending/receiving messages to/from a queue&lt;br/&gt;
3) the queue will show up in MBeans tree&lt;br/&gt;
4) kill the broker (e.g. end process on windows)&lt;br/&gt;
5) stat broker again&lt;br/&gt;
6) you can find your queue in Broker-&amp;gt;Queues attribute, but not as a separate node on MBeans tree (see screenshot)&lt;br/&gt;
7) (optional) start sending/receiving messages to/from a queue&lt;br/&gt;
8) open web console. following exception will be thrown:&lt;/p&gt;

&lt;p&gt;2009-11-25 21:47:45,525 | ERROR | /admin/queues.jsp;jsessionid=yjy1i2uuahpk | org.mortbay.log | btpool0-1&lt;br/&gt;
javax.el.ELException: java.lang.reflect.UndeclaredThrowableException&lt;br/&gt;
	at javax.el.BeanELResolver.getValue(BeanELResolver.java:266)&lt;br/&gt;
	at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:143)&lt;br/&gt;
	at com.sun.el.parser.AstValue.getValue(AstValue.java:138)&lt;br/&gt;
	at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:206)&lt;br/&gt;
	at org.apache.jasper.runtime.PageContextImpl.evaluateExpression(PageContextImpl.java:984)&lt;br/&gt;
	at org.apache.jsp.queues_jsp._jspx_meth_c_forEach_0(org.apache.jsp.queues_jsp:141)&lt;br/&gt;
	at org.apache.jsp.queues_jsp._jspService(org.apache.jsp.queues_jsp:101)&lt;br/&gt;
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:93)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)&lt;br/&gt;
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)&lt;br/&gt;
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:470)&lt;br/&gt;
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:364)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093)&lt;br/&gt;
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)&lt;br/&gt;
	at org.apache.activemq.web.SessionFilter.doFilter(SessionFilter.java:43)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)&lt;br/&gt;
	at org.apache.activemq.web.filter.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:81)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)&lt;br/&gt;
	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)&lt;br/&gt;
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)&lt;br/&gt;
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)&lt;br/&gt;
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
	at org.mortbay.jetty.Server.handle(Server.java:324)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:828)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)&lt;br/&gt;
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)&lt;br/&gt;
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)&lt;br/&gt;
Caused by: java.lang.reflect.UndeclaredThrowableException&lt;br/&gt;
	at $Proxy4.getName(Unknown Source)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at javax.el.BeanELResolver.getValue(BeanELResolver.java:261)&lt;br/&gt;
	... 39 more&lt;br/&gt;
Caused by: javax.management.InstanceNotFoundException: org.apache.activemq:BrokerName=localhost,Type=Queue,Destination=dee.q&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094)&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)&lt;br/&gt;
	at javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:263)&lt;br/&gt;
	... 45 more&lt;/p&gt;


&lt;p&gt;I&apos;m using latest 5.3.1-SNAPSHOT&lt;/p&gt;</description>
                <environment></environment>
        <key id="12483801">AMQ-2513</key>
            <summary>JMX bug - javax.management.InstanceNotFoundException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dejanb">Dejan Bosanac</assignee>
                                    <reporter username="daroo">Dariusz Szablinski</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 20:59:12 +0000</created>
                <updated>Thu, 28 Oct 2010 11:20:23 +0000</updated>
                            <resolved>Tue, 8 Dec 2009 11:23:12 +0000</resolved>
                                    <version>5.3.1</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4.0</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12941899" author="daroo" created="Mon, 30 Nov 2009 21:32:05 +0000"  >&lt;p&gt;It seems that this happens only when &amp;lt;managementContext createConnector=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Simple unit test attached which shows the error when createConnector=&quot;false&quot;&lt;/p&gt;</comment>
                            <comment id="12941914" author="dejanb" created="Tue, 8 Dec 2009 11:23:12 +0000"  >&lt;p&gt;Fixed with svn revision 888333. Thanks for the test case.&lt;/p&gt;</comment>
                            <comment id="12943117" author="vadimos" created="Tue, 26 Oct 2010 17:40:17 +0000"  >&lt;p&gt;I am seeing this issue with &lt;/p&gt;

&lt;p&gt;    &amp;lt;managementContext&amp;gt;&lt;br/&gt;
       &amp;lt;managementContext connectorPort=&quot;1063&quot; jmxDomainName=&quot;org.apache.activemq&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/managementContext&amp;gt;&lt;/p&gt;

&lt;p&gt;specified on 5.3.2 broker/client&lt;br/&gt;
I noticed that the fix has not been applied to 5.3.2 (by looking at the code)&lt;/p&gt;

&lt;p&gt;Same bug?&lt;/p&gt;</comment>
                            <comment id="12943155" author="dejanb" created="Thu, 28 Oct 2010 11:20:22 +0000"  >&lt;p&gt;According to this&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://fisheye6.atlassian.com/browse/activemq/tags/activemq-parent-5.3.2/activemq-core/src/main/java/org/apache/activemq/broker/BrokerService.java?r=HEAD#l471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/browse/activemq/tags/activemq-parent-5.3.2/activemq-core/src/main/java/org/apache/activemq/broker/BrokerService.java?r=HEAD#l471&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the fix should be there.&lt;/p&gt;

&lt;p&gt;If it&apos;s a new bug, can you try reproduce it against trunk and create a test case (variant of &lt;a href=&quot;https://fisheye6.atlassian.com/browse/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/bugs/AMQ2513Test.java?r=HEAD)?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/browse/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/bugs/AMQ2513Test.java?r=HEAD)?&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461364" name="AMQ2513Test.java" size="3184" author="daroo" created="Mon, 30 Nov 2009 21:32:22 +0000"/>
                            <attachment id="12461381" name="activemq.log" size="14001" author="daroo" created="Wed, 25 Nov 2009 21:00:51 +0000"/>
                            <attachment id="12461427" name="activemq.xml" size="2125" author="daroo" created="Wed, 25 Nov 2009 21:02:20 +0000"/>
                            <attachment id="12461380" name="jconsole.jpg" size="158131" author="daroo" created="Wed, 25 Nov 2009 20:59:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rq1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>