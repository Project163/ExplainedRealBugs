<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 06:10:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-5865] Enable &quot;getRemoteAddress()&quot; method in WebSocket Requests</title>
                <link>https://issues.apache.org/jira/browse/AMQ-5865</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;The method (getRemoteAddress()) in class &quot;org.apache.activemq.transport.ws.AbstractStompSocket&quot; does not return the correct address; it returns always &quot;&quot;StompSocket_&quot; + hashCode();&quot; &lt;/p&gt;

&lt;p&gt;We need the correct address (e.g. &quot;wss://127.0.0.1:63114&quot;) for our use case. &lt;/p&gt;

&lt;p&gt;The implementation whould be very simple. &lt;br/&gt;
In class &quot;org.apache.activemq.transport.ws.jetty8.WSServlet&quot; (and also in jetty9 package) pass the address during creation of class StompSocket in the same package: &lt;/p&gt;

&lt;p&gt;String scheme = request.getScheme();&lt;br/&gt;
if (&quot;http&quot;.equalsIgnoreCase(scheme)) {&lt;br/&gt;
	scheme = &quot;ws&quot;;&lt;br/&gt;
} else if (&quot;https&quot;.equalsIgnoreCase(scheme)) &lt;/p&gt;
{
	scheme = &quot;wss&quot;;
		}
&lt;p&gt;WebSocket socket = new CustomStompSocket(scheme + &quot;://&quot; + request.getRemoteAddr() + &quot;:&quot; + request.getRemotePort());&lt;/p&gt;

&lt;p&gt;It meight be that MQTT is also affected; a fix should be done by the same way.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12840740">AMQ-5865</key>
            <summary>Enable &quot;getRemoteAddress()&quot; method in WebSocket Requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="xgadkem">Christian Kemper</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>easytest</label>
                            <label>features</label>
                            <label>javascript</label>
                            <label>patch</label>
                    </labels>
                <created>Fri, 26 Jun 2015 05:13:07 +0000</created>
                <updated>Tue, 30 Jun 2015 05:24:55 +0000</updated>
                            <resolved>Mon, 29 Jun 2015 19:41:06 +0000</resolved>
                                    <version>5.11.0</version>
                    <version>5.11.1</version>
                                    <fixVersion>5.12.0</fixVersion>
                                    <component>MQTT</component>
                    <component>STOMP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14602418" author="xgadkem" created="Fri, 26 Jun 2015 05:23:16 +0000"  >&lt;p&gt;Attached sample files for my fix (STOMP over wss).&lt;br/&gt;
Should be easy to change the real implementation with this samples &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14602420" author="xgadkem" created="Fri, 26 Jun 2015 05:25:09 +0000"  >&lt;p&gt;see also &lt;a href=&quot;http://activemq.2283324.n4.nabble.com/Enable-quot-getRemoteAddress-quot-method-in-WebSocket-Requests-tt4698179.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.2283324.n4.nabble.com/Enable-quot-getRemoteAddress-quot-method-in-WebSocket-Requests-tt4698179.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14605561" author="githubbot" created="Mon, 29 Jun 2015 12:50:08 +0000"  >&lt;p&gt;GitHub user cshannon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/124&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/124&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5865&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    StompSocket and MQTTSocket will now return the appropriate web socket&lt;br/&gt;
    remote address based on the HttpRequestServlet that initialized&lt;br/&gt;
    the web socket connection.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cshannon/activemq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cshannon/activemq&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5865&quot; title=&quot;Enable &amp;quot;getRemoteAddress()&amp;quot; method in WebSocket Requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-5865&quot;&gt;&lt;del&gt;AMQ-5865&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/124.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/124.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #124&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit be10b866a7c530ab7efefef1dda82270506f25f7&lt;br/&gt;
Author: Christopher L. Shannon (cshannon) &amp;lt;christopher.l.shannon@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-06-29T12:35:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-5865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/AMQ-5865&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    StompSocket and MQTTSocket will now return the appropriate web socket&lt;br/&gt;
    remote address based on the HttpRequestServlet that initialized&lt;br/&gt;
    the web socket connection.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14606233" author="githubbot" created="Mon, 29 Jun 2015 19:39:03 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/activemq/pull/124&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq/pull/124&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14606236" author="tabish121" created="Mon, 29 Jun 2015 19:41:06 +0000"  >&lt;p&gt;Fix applied on master  &lt;/p&gt;</comment>
                            <comment id="14607516" author="xgadkem" created="Tue, 30 Jun 2015 05:22:53 +0000"  >&lt;p&gt;Used current snapshot of 5.12 and it worked fine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks Christian&lt;/p&gt;</comment>
                            <comment id="14607521" author="xgadkem" created="Tue, 30 Jun 2015 05:24:55 +0000"  >&lt;p&gt;Used current snapshot (apache-activemq-5.12-20150630.034116-191-bin.zip) to verify the fix.&lt;br/&gt;
Works as expected in our environment.&lt;/p&gt;

&lt;p&gt;Thanks Christian&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12742058" name="CustomStompSocket.java" size="310" author="xgadkem" created="Fri, 26 Jun 2015 05:21:38 +0000"/>
                            <attachment id="12742059" name="CustomWebSocketServlet.java" size="1747" author="xgadkem" created="Fri, 26 Jun 2015 05:21:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gix3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>