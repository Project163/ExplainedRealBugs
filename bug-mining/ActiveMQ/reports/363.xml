<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:37:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[AMQ-1661] Duplicate messages and extra network traffic with duplex connections</title>
                <link>https://issues.apache.org/jira/browse/AMQ-1661</link>
                <project id="12311210" key="AMQ">ActiveMQ Classic</project>
                    <description>&lt;p&gt;(see attached diagram)&lt;/p&gt;

&lt;p&gt;I have two brokers A and B, where A establishes a connection to B with the options: &lt;br/&gt;
duplex=&quot;true&quot; networkTTL=&quot;3&quot; dynamicOnly=&quot;true&quot; &lt;/p&gt;

&lt;p&gt;I have two clients connecting to broker A, and one to B.  One of the clients on A is subscribing to a queue, the other is publishing to it.  The client on B is not using that queue at all.  When the publishing client sends a message, the subscriber receives it as expected.  But if I watch the network with a sniffer, I can see the message being sent to broker B and back again. &lt;/p&gt;

&lt;p&gt;I also set up a topic that all of the clients subscribe to.  If a client on A sends a message to the topic, the client on B receives it normally, but the two clients on A receive the message twice.  I can see with the sniffer that the message is being sent from A to B and back. &lt;/p&gt;

&lt;p&gt;If I change the connection so that it&apos;s not duplex (i.e. I set up matching simplex connections on both brokers) all of this unexpected behavior goes away.  In the first example, the messages are no longer forwarded to B since there are no subscribers on that broker.  In the second example, the message is received once by every subscriber. &lt;/p&gt;

&lt;p&gt;I have tested on various 5.1 snapshots up through 4/8/08.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12482347">AMQ-1661</key>
            <summary>Duplicate messages and extra network traffic with duplex connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajdavies">Robert Davies</assignee>
                                    <reporter username="mikef">Mike Forrest</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2008 20:20:46 +0000</created>
                <updated>Fri, 16 May 2008 17:44:53 +0000</updated>
                            <resolved>Fri, 16 May 2008 17:44:53 +0000</resolved>
                                    <version>5.1.0</version>
                                    <fixVersion>5.2.0</fixVersion>
                                    <component>Broker</component>
                    <component>Connector</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12939671" author="rajdavies" created="Thu, 15 May 2008 14:49:44 +0000"  >&lt;p&gt;Fix by SVN revision 656688&lt;/p&gt;</comment>
                            <comment id="12939684" author="joef" created="Thu, 15 May 2008 22:54:58 +0000"  >&lt;p&gt;Rob&apos;s fix does the trick. However, I think the messages may still be taking a round trip. The attached patch should prevent them from doing so.  &lt;/p&gt;</comment>
                            <comment id="12939674" author="rajdavies" created="Fri, 16 May 2008 17:44:53 +0000"  >&lt;p&gt;Patch applied in SVN revision 657147&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12461099" name="ASF.LICENSE.NOT.GRANTED--duplex.png" size="9649" author="mikef" created="Thu, 10 Apr 2008 20:20:46 +0000"/>
                            <attachment id="12460983" name="DemandForwardingBridgeSupport.txt" size="3457" author="joef" created="Thu, 15 May 2008 22:54:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s1r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>