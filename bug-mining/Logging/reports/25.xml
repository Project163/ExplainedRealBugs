<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:18:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOGGING-132] Jdk14Logger wrapper does not respect logger name</title>
                <link>https://issues.apache.org/jira/browse/LOGGING-132</link>
                <project id="12310484" key="LOGGING">Commons Logging</project>
                    <description>&lt;p&gt;The JDK14 wrapper implementation logs using the callers class name instead of the configured logger name. This prevents the ability to use named loggers for applications and subsystems. Also, the log message name does not match the JDK logger name so user don&apos;t know what name to use to configure the logger. It is also problematic for obfuscated code and private parts of an application or library.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
I have a class named com.myco.product.subsysa.ClassX.InnerClassY and I create logger LogFactory.getLog(&quot;SubSystemA&quot;).&lt;/p&gt;

&lt;p&gt;With the other log wrappers, if I log a message I always get something like:&lt;/p&gt;

&lt;p&gt;    Oct 21, 2009 5:03:26 PM&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; SubSystemA start - My log message&lt;/p&gt;

&lt;p&gt;With the JDK log wrapper, I get something like:&lt;/p&gt;

&lt;p&gt;    Oct 21, 2009 5:03:26 PM com.myco.product.subsysa.ClassX$InnerClassY start&lt;br/&gt;
    INFO: My log message&lt;/p&gt;

&lt;p&gt;Or worse yet with obfuscated code and the JDK log wrapper, I get something like:&lt;/p&gt;

&lt;p&gt;    Oct 21, 2009 5:03:26 PM com.myco.product.subsysa.ClassX$_oOOO.o00000000000000000000000000000&lt;br/&gt;
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000&lt;br/&gt;
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000&lt;br/&gt;
00000000000000000000000000000000000000000000000000000000&lt;br/&gt;
    INFO: My log message&lt;/p&gt;

&lt;p&gt;The fix:&lt;/p&gt;

&lt;p&gt;In the calls to logger.logp(...), replace cname with this.name. Loggers created with the class name will still get the class name.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void log( Level level, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg, Throwable ex ) {

        Logger logger = getLogger();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logger.isLoggable(level)) {
            &lt;span class=&quot;code-comment&quot;&gt;// Hack (?) to get the stack trace.
&lt;/span&gt;            Throwable dummyException=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Throwable();
            StackTraceElement locations[]=dummyException.getStackTrace();
            &lt;span class=&quot;code-comment&quot;&gt;// Caller will be the third element
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cname=&lt;span class=&quot;code-quote&quot;&gt;&quot;unknown&quot;&lt;/span&gt;;
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;unknown&quot;&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( locations!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; locations.length &amp;gt;2 ) {
                StackTraceElement caller=locations[2];
                cname=caller.getClassName();
                method=caller.getMethodName();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( ex==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
                logger.logp( level, cname, method, msg );
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                logger.logp( level, cname, method, msg, ex );
            }
        }

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12438830">LOGGING-132</key>
            <summary>Jdk14Logger wrapper does not respect logger name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nathann@objectfx.com">Nathan Niesen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2009 18:16:27 +0000</created>
                <updated>Wed, 20 Mar 2013 20:11:47 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 10:02:07 +0000</resolved>
                                    <version>Nightly Builds</version>
                    <version>1.0</version>
                    <version>1.0.1</version>
                    <version>1.0.2</version>
                    <version>1.0.3</version>
                    <version>1.0.4</version>
                    <version>1.1.0</version>
                    <version>1.1.1</version>
                    <version>1.1.2</version>
                                    <fixVersion>1.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12795189" author="dennisl@apache.org" created="Tue, 29 Dec 2009 23:16:33 +0000"  >&lt;p&gt;I tried your suggestion, but there were a lots of test failures.&lt;br/&gt;
So changing this will have a larger impact than you thought.&lt;/p&gt;</comment>
                            <comment id="12805540" author="nathann@objectfx.com" created="Wed, 27 Jan 2010 15:34:41 +0000"  >&lt;p&gt;If there is a major impact, it&apos;s because there are a lot of bad tests. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The real impact will be that the logger implementation adheres to the contract set forth in the JDK and Commons logging documentation. The logger is created with a specified string name (not a class name), configured using the specified name, and logs using the specified name. Nothing in the LogFactory uses an object instances class name to retrieve a logger or change its configuration.&lt;/p&gt;

&lt;p&gt;I should also note that the Jdk13LumberjackLogger appears to have a similar defect. The implementation of its log method is different but it creates a LogRecord and never calls setLoggerName(this.name).&lt;/p&gt;

&lt;p&gt;The Avalon and Log4J loggers use the Logger class and which correctly sets the logger name on the log record. SimpleLog also correctly uses the log name.&lt;/p&gt;</comment>
                            <comment id="12805662" author="dennisl@apache.org" created="Wed, 27 Jan 2010 21:38:59 +0000"  >&lt;p&gt;Removing 2.0 as &quot;Affects version/s&quot; again. That is only a placeholder for ideas at this time, so this issue can&apos;t have an effect that version.&lt;/p&gt;</comment>
                            <comment id="13582059" author="tn" created="Wed, 20 Feb 2013 10:02:07 +0000"  >&lt;p&gt;Applied change in r1448063 for the Jdk14Logger.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>148309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d7hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>