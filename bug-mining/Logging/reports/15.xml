<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:18:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOGGING-130] Potential missing privileged block for class loader</title>
                <link>https://issues.apache.org/jira/browse/LOGGING-130</link>
                <project id="12310484" key="LOGGING">Commons Logging</project>
                    <description>&lt;p&gt;When attempting to instantiate a HttpClient, a call to LogFactory.getLog() is made. Going deeper, Commons Logging later attempts to make an unprivileged call to java.lang.ClassLoader.getParent(). Under systems with an installed SecurityManager (like mine), this may be forbidden.&lt;/p&gt;

&lt;p&gt;In particular, this call will require the RuntimePermission getClassLoader. In my particular case, I am attempting to sandbox specific segments of code, and thus cannot grant this permission to the user of HttpClient (and, thus, Commons Logging). However, I feel that Commons Logging should be able to trust itself to make a self-checked call to ClassLoader.getParent().&lt;/p&gt;

&lt;p&gt;The stack trace for my situation (trimmed off to assist you) is as follows:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.logging.LogConfigurationException: java.lang.SecurityException: Cannot request this permission from a tainted execution path (Caused by java.lang.SecurityException: Cannot request this permission from a tainted execution path)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:637)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)&lt;br/&gt;
	at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpClient.&amp;lt;clinit&amp;gt;(HttpClient.java:66)&lt;br/&gt;
	... 11 more&lt;br/&gt;
Caused by: java.lang.SecurityException: Cannot request this permission from a tainted execution path&lt;br/&gt;
	at com.mmoui.manager.MinionSecurityManager.verifyUntainted(MinionSecurityManager.java:507)&lt;br/&gt;
	at com.mmoui.manager.MinionSecurityManager.checkPermission(MinionSecurityManager.java:263)&lt;br/&gt;
	at com.mmoui.manager.MinionSecurityManager.checkPermission(MinionSecurityManager.java:474)&lt;br/&gt;
	at java.lang.ClassLoader.getParent(ClassLoader.java:1233)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.getLowestClassLoader(LogFactoryImpl.java:1327)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.getBaseClassLoader(LogFactoryImpl.java:1247)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1048)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)&lt;br/&gt;
	at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)&lt;br/&gt;
	... 15 more&lt;/p&gt;


&lt;p&gt;I feel that LogFactoryImpl.getLowestClassLoader&apos;s call to java.lang.ClassLoader.getParent() should be wrapped by AccessController.doPrivileged(). I can&apos;t think of any reason not to do this currently. This would allow my application to trust Commons Logging and not have to grant the RuntimePermission getClassLoader to the users of HttpClient.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 under Sun JRE 6 Update 13, 64-bit&lt;br/&gt;
Running Commons HttpClient 3,1 w/ Commons Logging 1.1.1&lt;/p&gt;</environment>
        <key id="12424662">LOGGING-130</key>
            <summary>Potential missing privileged block for class loader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mpdelbuono">Matthew P. Del Buono</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 01:56:32 +0000</created>
                <updated>Wed, 20 Mar 2013 20:11:47 +0000</updated>
                            <resolved>Wed, 18 Jul 2012 15:21:05 +0000</resolved>
                                    <version>1.1.1</version>
                                    <fixVersion>1.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12706299" author="mpdelbuono" created="Wed, 6 May 2009 04:44:35 +0000"  >&lt;p&gt;I should clarify, the reason for the &quot;tainted execution path&quot; is due to the fact that the caller of HttpClient.&amp;lt;clinit&amp;gt; (hidden by &quot;... 11 more&quot;) is untrusted (non-apache) code which I am trying to sandbox. None of the code in org.apache.** nor com.mmoui.manager.** nor java.** can contribute to this concept of &quot;taint&quot; as it is all trusted. &lt;/p&gt;</comment>
                            <comment id="12795183" author="dennisl@apache.org" created="Tue, 29 Dec 2009 23:04:12 +0000"  >&lt;p&gt;Proposed patch that makes use of getParentClassLoader(ClassLoader) that already uses an AccessController.&lt;/p&gt;</comment>
                            <comment id="13417159" author="sebb@apache.org" created="Wed, 18 Jul 2012 15:21:05 +0000"  >&lt;p&gt;Applied patch; same code was already used elsewhere to handle the same situation.&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1362978&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1362978&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LOGGING-130&quot; title=&quot;Potential missing privileged block for class loader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOGGING-130&quot;&gt;&lt;del&gt;LOGGING-130&lt;/del&gt;&lt;/a&gt; - Potential missing privileged block for class loader&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/logging/trunk/RELEASE-NOTES.txt&lt;br/&gt;
    commons/proper/logging/trunk/src/java/org/apache/commons/logging/impl/LogFactoryImpl.java&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12444307">LOGGING-134</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12429101" name="LOGGING-130.patch" size="1146" author="dennisl@apache.org" created="Tue, 29 Dec 2009 23:04:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>148308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d7hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74990</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>