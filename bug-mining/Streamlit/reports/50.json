{"url":"https://api.github.com/repos/streamlit/streamlit/issues/6167","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/6167/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/6167/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/6167/events","html_url":"https://github.com/streamlit/streamlit/issues/6167","id":1595085569,"node_id":"I_kwDODCoeTs5fExMB","number":6167,"title":"Unecessary warning for date_input widget with default value rewritten by session state api","user":{"login":"eduardochaves1","id":95307858,"node_id":"U_kgDOBa5IUg","avatar_url":"https://avatars.githubusercontent.com/u/95307858?v=4","gravatar_id":"","url":"https://api.github.com/users/eduardochaves1","html_url":"https://github.com/eduardochaves1","followers_url":"https://api.github.com/users/eduardochaves1/followers","following_url":"https://api.github.com/users/eduardochaves1/following{/other_user}","gists_url":"https://api.github.com/users/eduardochaves1/gists{/gist_id}","starred_url":"https://api.github.com/users/eduardochaves1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eduardochaves1/subscriptions","organizations_url":"https://api.github.com/users/eduardochaves1/orgs","repos_url":"https://api.github.com/users/eduardochaves1/repos","events_url":"https://api.github.com/users/eduardochaves1/events{/privacy}","received_events_url":"https://api.github.com/users/eduardochaves1/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":1846373998,"node_id":"MDU6TGFiZWwxODQ2MzczOTk4","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:state","name":"feature:state","color":"C5DEF5","default":false,"description":""},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230105890,"node_id":"MDU6TGFiZWwzMjMwMTA1ODkw","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P2","name":"priority:P2","color":"ff4b4b","default":false,"description":""},{"id":3904164369,"node_id":"LA_kwDODCoeTs7otNIR","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.date_input","name":"feature:st.date_input","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-02-22T13:14:52Z","updated_at":"2024-04-18T22:45:11Z","closed_at":"2024-04-18T22:45:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n\r\n### Summary\r\n\r\nI have a date_input with min, max, default value and a key for a session_state variable as well. And because of that, the streamlit is showing an annoying warning message saying that the default value was rewritten by the session_state variable.\r\n\r\nBut when I remove the default value so only the key value from session_state is used, I got an error because by default streamlit sets the value as the current date, in which is greater than the max_value I setup in the input.\r\n\r\nSo I tried in many ways to suppress this warning but I could make it. The only way I've heard was by commenting some lines of code in the streamlit source code. But I don't want to in that way for obvious reasons.\r\n\r\nAnother person had the same problem as me [in this discussion on streamlit community](https://discuss.streamlit.io/t/why-do-default-values-cause-a-session-state-warning/15485/13). Then I came here to see if anyone had already made an issue for that.\r\n\r\n### Reproducible Code Example\r\n\r\n[![Open in Streamlit Cloud](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://issues.streamlitapp.com/?issue=gh-6167)\r\n\r\n```Python\r\nimport streamlit as st\r\nimport datetime\r\n\r\nmin_date = datetime.date(2020,1,1)\r\nmax_date = datetime.date(2020,12,31)\r\n\r\nif 'custom_date' not in st.session_state:\r\n  st.session_state['custom_date'] = min_date\r\n\r\nst.date_input('Date:', min_value=min_date, max_value=max_date, value=min_date, key='custom_date')\r\n\r\nst.write(st.session_state['custom_date'])\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\n1. Create a streamlit page with the code snippet above\r\n2. And only for the first time you open it, will show the annoying warning\r\n3. If you remove the default value in the date_input for the warning to not show again, it will give an error as the default date will be set the current date, in which is after the max_value.\r\n\r\n### Expected Behavior\r\n\r\nI expected that this warning didn't show off, or even have an option on streamlit to suppress it.\r\n\r\n### Current Behavior\r\n\r\nThe warning message:\r\n\r\n![Screenshot from 2023-02-22 09-59-19](https://user-images.githubusercontent.com/95307858/220627491-fec590b5-c8ff-4ebb-a1e9-355be3ff916e.png)\r\n\r\nThe error message when you remove the default value:\r\n\r\n![Screenshot from 2023-02-22 09-57-58](https://user-images.githubusercontent.com/95307858/220627599-7cfd891e-c87c-43db-b9f5-3d49bc9df164.png)\r\n\r\n\r\n### Is this a regression?\r\n\r\n- [ ] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: Streamlit, version 1.18.1\r\n- Python version: Python 3.10.6\r\n- Operating System: Linux Pop_OS\r\n- Browser: Firefox\r\n- Virtual environment: None\r\n\r\n\r\n### Additional Information\r\n\r\nI know that in this simple example I don't even need a session state variable. I could just set a variable for the date_input and then get the data from it. But I have a real example on my work in which I NEED to use a session state variable.\r\n\r\n### Are you willing to submit a PR?\r\n\r\n- [ ] Yes, I am willing to submit a PR!","closed_by":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/6167/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/6167/timeline","performed_via_github_app":null,"state_reason":"completed"}