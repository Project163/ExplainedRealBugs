{"url":"https://api.github.com/repos/streamlit/streamlit/issues/8975","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/8975/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/8975/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/8975/events","html_url":"https://github.com/streamlit/streamlit/issues/8975","id":2372204399,"node_id":"I_kwDODCoeTs6NZPdv","number":8975,"title":"Multipage app V2 - editing page with st.rerun switches page to default","user":{"login":"gaspardc-met","id":78359781,"node_id":"MDQ6VXNlcjc4MzU5Nzgx","avatar_url":"https://avatars.githubusercontent.com/u/78359781?v=4","gravatar_id":"","url":"https://api.github.com/users/gaspardc-met","html_url":"https://github.com/gaspardc-met","followers_url":"https://api.github.com/users/gaspardc-met/followers","following_url":"https://api.github.com/users/gaspardc-met/following{/other_user}","gists_url":"https://api.github.com/users/gaspardc-met/gists{/gist_id}","starred_url":"https://api.github.com/users/gaspardc-met/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaspardc-met/subscriptions","organizations_url":"https://api.github.com/users/gaspardc-met/orgs","repos_url":"https://api.github.com/users/gaspardc-met/repos","events_url":"https://api.github.com/users/gaspardc-met/events{/privacy}","received_events_url":"https://api.github.com/users/gaspardc-met/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230107623,"node_id":"MDU6TGFiZWwzMjMwMTA3NjIz","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P3","name":"priority:P3","color":"ff4b4b","default":false,"description":""},{"id":4288309131,"node_id":"LA_kwDODCoeTs7_mmeL","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:multipage-apps","name":"feature:multipage-apps","color":"C5DEF5","default":false,"description":""},{"id":7047460070,"node_id":"LA_kwDODCoeTs8AAAABpA-05g","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.navigation","name":"feature:st.navigation","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-06-25T09:43:12Z","updated_at":"2024-09-06T08:51:23Z","closed_at":"2024-09-05T19:43:58Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n\r\n### Summary\r\n\r\nHi there,\r\n\r\nSince the `1.36` release I have adopted the MPA v2 pattern with great joy for existing web apps and pages: thanks üéâ \r\nHowever, it has decrease the ease of local development: editing a page using `st.rerun` will reload to the default page.\r\nThe page uses `st.rerun` combined with `time.sleep(1)` to simulate a dashboard with live data for a demo.\r\n\r\n### Reproducible Code Example\r\n\r\n`streamlit run app.py`\r\n\r\n# app.py\r\n```Python\r\nimport streamlit as st\r\nfrom mts_study_stm.web_app_utils import initialize_webapp\r\nfrom streamlit_extras.metric_cards import style_metric_cards\r\nimport numpy as np\r\nimport time\r\n\r\n\r\ndef landing():\r\n    return st.write(\"Landing Page\")\r\n\r\n\r\ndef page1():\r\n    return st.write(\"Page 1\")\r\n\r\n\r\ndef page2():\r\n    return st.write(\"Editing Page 2\")\r\n\r\n\r\ndef page_rerun():\r\n    placeholder = st.empty()\r\n    with placeholder.container():\r\n        st.metric(\"Random\", np.random.randint(0, 100), np.random.randint(0, 100))\r\n        time.sleep(1)\r\n        st.rerun()\r\n\r\n\r\nnavigation_pages = {\r\n    \"Landing\": [\r\n        st.Page(page=landing, title=\"Landing\", icon=\"üè†\", url_path=\"landing\", default=True),\r\n    ],\r\n    \"Pages\": [\r\n        st.Page(page=page1, title=\"Page 1\", icon=\"üìÑ\", url_path=\"page1\"),\r\n        st.Page(page=page2, title=\"Page 2\", icon=\"üìÑ\", url_path=\"page2\"),\r\n        st.Page(page=page_rerun, title=\"Page Rerun\", icon=\"üëΩ\", url_path=\"rerun\"),\r\n    ],\r\n}\r\n\r\n\r\ndef main():\r\n    st.set_page_config(\r\n        page_title=\"Repro\",\r\n        layout=\"wide\",\r\n        initial_sidebar_state=\"collapsed\",\r\n        page_icon=\"üîç\",\r\n    )\r\n    pg = st.navigation(pages=navigation_pages)\r\n    pg.run()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\n_No response_\r\n\r\n### Current Behavior\r\n\r\nMy webapp has one entrypoint module `app.py` that defines several Section Headers, each with several pages. The pages are all python functions defined in other modules. \r\n\r\nThe first page of the first header is the Landing page: \r\n`st.Page(page=landing, title=\"Landing\", icon=\"üè†\", url_path=\"landing\", default=True)`\r\n\r\nWhen I develop on a page continuously re-running with `st.rerun`, and make any change like `st.write(\"\")`, it will autosave, breaks the page execution, reload on save, and switch to the landing page . \r\n\r\nI activated the debug logging in the `config.toml`, and this is what happens when I apply changes to another page: \r\n```\r\n2024-06-25 11:33:16.733 Removing orphaned files...\r\n2024-06-25 11:33:16.733 Ignoring event from non-current ScriptRunner: ScriptRunnerEvent.SCRIPT_STOPPED_WITH_SUCCESS\r\n2024-06-25 11:33:16.733 Deleting File: f3830c920e40781ab86f3a412d9ae2a7e6466da93734e3b80f371882\r\n2024-06-25 11:33:16.738 Deleting File: 56ae1bd82443d40e1d4e5c029a365ff9083df105f82140651a6a52cc\r\n2024-06-25 11:33:16.761 Deleting File: fcd7de4a76ddef79e1ff51910686edd6df78d693e6d6131605ce67f3\r\n2024-06-25 11:33:17.042 Ignoring event from non-current ScriptRunner: ScriptRunnerEvent.SHUTDOWN\r\n2024-06-25 11:33:17.351 Adding media file fcd7de4a76ddef79e1ff51910686edd6df78d693e6d6131605ce67f3\r\n2024-06-25 11:33:17.352 Adding media file f3830c920e40781ab86f3a412d9ae2a7e6466da93734e3b80f371882\r\n2024-06-25 11:33:17.393 Adding media file 56ae1bd82443d40e1d4e5c029a365ff9083df105f82140651a6a52cc\r\n2024-06-25 11:33:17.437 Removing orphaned files...\r\n2024-06-25 11:33:17.702 Script run finished successfully; removing expired entries from MessageCache (max_age=2)\r\n```\r\n\r\n### Is this a regression?\r\n\r\n- [ ] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: 1.36.0\r\n- Python version: 3.11\r\n- Operating System: Ubuntu WSL Windows 11\r\n- Browser: Firefox\r\n\r\n\r\n### Additional Information\r\n\r\n_No response_","closed_by":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/8975/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/8975/timeline","performed_via_github_app":null,"state_reason":"completed"}