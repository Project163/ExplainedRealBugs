[{"id":13557733611,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMoGpjr","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13557733611","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-18T14:51:25Z","label":{"name":"status:needs-triage","color":"FEF2C0"},"performed_via_github_app":null},{"id":13557733620,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMoGpj0","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13557733620","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-18T14:51:25Z","label":{"name":"type:bug","color":"D93F0B"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2236779458","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2236779458","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2236779458,"node_id":"IC_kwDODCoeTs6FUovC","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-07-18T14:51:35Z","updated_at":"2024-07-18T14:51:35Z","body":"**If this issue affects you, please react with a ðŸ‘ (thumbs up emoji) to the initial post.**\n\nYour feedback helps us prioritize which bugs to investigate and address first.\n\n![Visits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fstreamlit%2Fstreamlit%2Fissues%2F9100&title=visits&edge_flat=false)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2236779458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":15368,"client_id":"Iv1.05c79e9ad1f6bdfa","slug":"github-actions","node_id":"MDM6QXBwMTUzNjg=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"GitHub Actions","description":"Automate your workflow from idea to production","external_url":"https://help.github.com/en/actions","html_url":"https://github.com/apps/github-actions","created_at":"2018-07-30T09:30:17Z","updated_at":"2025-03-07T16:35:00Z","permissions":{"actions":"write","administration":"read","attestations":"write","checks":"write","contents":"write","deployments":"write","discussions":"write","issues":"write","merge_queues":"write","metadata":"read","models":"read","packages":"write","pages":"write","pull_requests":"write","repository_hooks":"write","repository_projects":"write","security_events":"write","statuses":"write","vulnerability_alerts":"read"},"events":["branch_protection_rule","check_run","check_suite","create","delete","deployment","deployment_status","discussion","discussion_comment","fork","gollum","issues","issue_comment","label","merge_group","milestone","page_build","project","project_card","project_column","public","pull_request","pull_request_review","pull_request_review_comment","push","registry_package","release","repository","repository_dispatch","status","watch","workflow_dispatch","workflow_run"]},"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2237460772","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2237460772","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2237460772,"node_id":"IC_kwDODCoeTs6FXPEk","user":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-18T19:58:56Z","updated_at":"2024-07-18T19:58:56Z","body":"Possibly related: #9036","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2237460772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-18T20:00:53Z","updated_at":"2024-07-18T20:00:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9036","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9036/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9036/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9036/events","html_url":"https://github.com/streamlit/streamlit/issues/9036","id":2390252186,"node_id":"I_kwDODCoeTs6OeFqa","number":9036,"title":"Full page rerendering - widgets losing state from time to time when user interacts with it while rerunning","user":{"login":"robingie","id":76411323,"node_id":"MDQ6VXNlcjc2NDExMzIz","avatar_url":"https://avatars.githubusercontent.com/u/76411323?v=4","gravatar_id":"","url":"https://api.github.com/users/robingie","html_url":"https://github.com/robingie","followers_url":"https://api.github.com/users/robingie/followers","following_url":"https://api.github.com/users/robingie/following{/other_user}","gists_url":"https://api.github.com/users/robingie/gists{/gist_id}","starred_url":"https://api.github.com/users/robingie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingie/subscriptions","organizations_url":"https://api.github.com/users/robingie/orgs","repos_url":"https://api.github.com/users/robingie/repos","events_url":"https://api.github.com/users/robingie/events{/privacy}","received_events_url":"https://api.github.com/users/robingie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3230105890,"node_id":"MDU6TGFiZWwzMjMwMTA1ODkw","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P2","name":"priority:P2","color":"ff4b4b","default":false,"description":""},{"id":4288309131,"node_id":"LA_kwDODCoeTs7_mmeL","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:multipage-apps","name":"feature:multipage-apps","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2024-07-04T08:20:43Z","updated_at":"2025-01-16T14:51:56Z","closed_at":"2024-08-15T12:15:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit â€” A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n- [X] I added a very descriptive title to this issue.\r\n\r\n### Summary\r\n\r\nIssue Description:\r\n\r\nSince version 1.36.0, users have reported a persistent issue where a full page rerender sometimes occurs, causing all widgets to lose their state. We are using the new MPAv2, and this issue affects elements of the main and subpages.\r\n\r\n````python\r\n# if 'multiselect_test_key' in st.session_state:\r\n#    st.session_state.multiselect_test_key = st.session_state.multiselect_test_key\r\n````\r\nHowever, even with this workaround, the sidebar still undergoes rerendering intermittently. Please refer to the attached GIF demonstrating the issue. While it generally works, the problem can suddenly manifest.\r\n\r\n![multiselect_error](https://github.com/streamlit/streamlit/assets/76411323/db24a538-11d8-4a76-b488-71a940a85281)\r\n\r\n\r\nMinimal Functional Example:\r\n\r\nBelow is a minimal example illustrating the issue. The problem becomes more significant when dealing with a page full of widgets...\r\n\r\n\r\n\r\n### Reproducible Code Example\r\n\r\n```Python\r\nfrom __future__ import annotations\r\n\r\nimport streamlit as st\r\n\r\n\r\ndef test():\r\n    # if 'multiselect_test_key' in st.session_state:\r\n    #    st.session_state.multiselect_test_key = st.session_state.multiselect_test_key\r\n\r\n    col1, col2 = st.columns([8, 2])\r\n\r\n    col1.subheader('disappearing selection')\r\n    col1, col2, col3 = st.columns(3)\r\n\r\n    placeholder_multiselect = col1.empty()\r\n\r\n    options = [f'TEST{n}' for n in range(0, 100)]\r\n\r\n    placeholder_multiselect.multiselect(\r\n        label=':red[STEP 2]: TEST',\r\n        options=options,\r\n        help='His item has errors',\r\n        key='multiselect_test_key',\r\n    )\r\n\r\n    return\r\n\r\n\r\ndef run() -> None:\r\n    test()  # type: ignore\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\n1. Add the `run` method as function call into a MPAv2 navigation.\r\n2. Run the example and issue some fast selections with the multiselect.\r\n\r\n### Expected Behavior\r\n\r\nThe widget state should be preserved and there should be no visual full rerendering of the page.\r\n\r\n### Current Behavior\r\n\r\n_No response_\r\n\r\n### Is this a regression?\r\n\r\n- [X] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: 1.36\r\n- Python version: 3.11.0\r\n- Operating System: CentOS Stream 9\r\n- Browser: Chrome 126.0.6478.127\r\n\r\n\r\n### Additional Information\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9036/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9036/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2241728693","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2241728693","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2241728693,"node_id":"IC_kwDODCoeTs6FnhC1","user":{"login":"dannyopts","id":143318219,"node_id":"U_kgDOCIrcyw","avatar_url":"https://avatars.githubusercontent.com/u/143318219?v=4","gravatar_id":"","url":"https://api.github.com/users/dannyopts","html_url":"https://github.com/dannyopts","followers_url":"https://api.github.com/users/dannyopts/followers","following_url":"https://api.github.com/users/dannyopts/following{/other_user}","gists_url":"https://api.github.com/users/dannyopts/gists{/gist_id}","starred_url":"https://api.github.com/users/dannyopts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dannyopts/subscriptions","organizations_url":"https://api.github.com/users/dannyopts/orgs","repos_url":"https://api.github.com/users/dannyopts/repos","events_url":"https://api.github.com/users/dannyopts/events{/privacy}","received_events_url":"https://api.github.com/users/dannyopts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-21T18:03:02Z","updated_at":"2024-07-21T18:03:02Z","body":"Hey I have done some investigation of this issue and wanted to share what I had found a potential fix.\r\n\r\nI found that when a rerun is requested and there is already a scriptrunner for that app session then we request the running code to stop.\r\n\r\nhttps://github.com/streamlit/streamlit/blob/898fd8094f4ceb004c3eb929bcc88a5b6b72593f/lib/streamlit/runtime/app_session.py#L370\r\n\r\nAt this point if the code is within the following block of code \r\n\r\n```\r\nwith ctx.pages_manager.run_with_active_hash(self._script_hash):\r\n            if callable(self._page):\r\n                self._page()\r\n                return\r\n            else:\r\n                code = ctx.pages_manager.get_page_script_byte_code(str(self._page))\r\n\r\n                # We create a module named __page__ for this specific\r\n                # script. This is differentiate it from the `__main__` module\r\n                module = types.ModuleType(\"__page__\")\r\n                # We want __file__ to be the path to the script\r\n                module.__dict__[\"__file__\"] = self._page\r\n                exec(code, module.__dict__)\r\n```\r\n\r\nthen when the Stop message is processed it will cause a StopException to be raised. At this point the __exit__ of the run_with_active_hash method will execute and set the active_hash back to the main_script hash. \r\n\r\nIn the meantime the new request has been running and has entered this same block of code. \r\n\r\nIt has set it's active_hash to the hash for the page corresponding to my_func. \r\n\r\nHowever, since the script_runner for these threads was created by the same AppSession using \r\n\r\n```\r\ndef _create_scriptrunner(self, initial_rerun_data: RerunData) -> None:\r\n        \"\"\"Create and run a new ScriptRunner with the given RerunData.\"\"\"\r\n        self._scriptrunner = ScriptRunner(\r\n            session_id=self.id,\r\n            main_script_path=self._script_data.main_script_path,\r\n            session_state=self._session_state,\r\n            uploaded_file_mgr=self._uploaded_file_mgr,\r\n            script_cache=self._script_cache,\r\n            initial_rerun_data=initial_rerun_data,\r\n            user_info=self._user_info,\r\n            fragment_storage=self._fragment_storage,\r\n            pages_manager=self._pages_manager,\r\n        )\r\n```\r\n\r\nThey share a pages_manager. So the active_hash on the latest request is set back by the first thread to the main_page_hash. \r\n\r\nWhen this rerun_request completes it sends a forward message to the browser to say there is a number_input element on the page, but it computes the id of this element using the page hash, so the app doesnt recognise it and so creates it as a completely new element. \r\n\r\nThe following messages are sent for a single click (no bug)\r\n\r\n```\r\nmetadata {\r\n  delta_path: 0\r\n  delta_path: 0\r\n  active_script_hash: \"5e81332cbe59a0fd1fb31baba7ac96a9\"\r\n}\r\ndelta {\r\n  new_element {\r\n    number_input {\r\n      id: \"$$WIDGET_ID-24a8701ac9b47d96cf30f2334c6e0d63-None\"\r\n      label: \"mynum\"\r\n      format: \"%0.2f\"\r\n      data_type: FLOAT\r\n      step: 0.01\r\n      label_visibility {\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nFor a double click (bug) this is sent\r\n\r\n```\r\nmetadata {\r\n  delta_path: 0\r\n  delta_path: 0\r\n  active_script_hash: \"69514d49f51fa2517237fd1c7c441413\"\r\n}\r\ndelta {\r\n  new_element {\r\n    number_input {\r\n      id: \"$$WIDGET_ID-9b298c33de96437ba278fa9961af76c7-None\"\r\n      label: \"mynum\"\r\n      format: \"%0.2f\"\r\n      data_type: FLOAT\r\n      step: 0.01\r\n      label_visibility {\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNote the active_script_hash and id.\r\n\r\nThis then causes the node to be rerendered from fresh rather than applying the (zero) delta to the current state.\r\n\r\nI think that a fix to this would be in AppSession to create a new PagesManager\r\nrather than share the same one across two running threads. \r\n\r\ne.g.\r\n\r\n```\r\ndef request_rerun(self, client_state: ClientState | None) -> None:\r\n        \"\"\"Signal that we're interested in running the script.\r\n\r\n        If the script is not already running, it will be started immediately.\r\n        Otherwise, a rerun will be requested.\r\n\r\n        Parameters\r\n        ----------\r\n        client_state : streamlit.proto.ClientState_pb2.ClientState | None\r\n            The ClientState protobuf to run the script with, or None\r\n            to use previous client state.\r\n\r\n        \"\"\"\r\n        if self._state == AppSessionState.SHUTDOWN_REQUESTED:\r\n            _LOGGER.warning(\"Discarding rerun request after shutdown\")\r\n            return\r\n\r\n        if client_state:\r\n            fragment_id = client_state.fragment_id\r\n\r\n            rerun_data = RerunData(\r\n                client_state.query_string,\r\n                client_state.widget_states,\r\n                client_state.page_script_hash,\r\n                client_state.page_name,\r\n                fragment_id=fragment_id if fragment_id else None,\r\n            )\r\n        else:\r\n            rerun_data = RerunData()\r\n\r\n        if self._scriptrunner is not None:\r\n            if (\r\n                bool(config.get_option(\"runner.fastReruns\"))\r\n                and not rerun_data.fragment_id\r\n            ):\r\n                # If fastReruns is enabled and this is *not* a rerun of a fragment,\r\n                # we don't send rerun requests to our existing ScriptRunner. Instead, we\r\n                # tell it to shut down. We'll then spin up a new ScriptRunner, below, to\r\n                # handle the rerun immediately.\r\n                self._scriptrunner.request_stop()\r\n                self._scriptrunner = None\r\n                ######### Proposed Fix\r\n                self._pages_manager = PagesManager( \r\n                    self._script_data.main_script_path, self._script_cache\r\n                )\r\n                #########\r\n            else:\r\n                # Either fastReruns is not enabled or this RERUN request is a request to\r\n                # run a fragment. We send our current ScriptRunner a rerun request, and\r\n                # if it's accepted, we're done.\r\n                success = self._scriptrunner.request_rerun(rerun_data)\r\n                if success:\r\n                    return\r\n\r\n        # If we are here, then either we have no ScriptRunner, or our\r\n        # current ScriptRunner is shutting down and cannot handle a rerun\r\n        # request - so we'll create and start a new ScriptRunner.\r\n        self._create_scriptrunner(rerun_data)\r\n```\r\n\r\nI have tested this manually and it seems to resolve the issue. \r\n\r\nI notice that there are some file watchers attached to the PagesManager, so we probably need to do something like\r\n\r\n```\r\nself._scriptrunner.request_stop()\r\nself.disconnect_file_watchers()\r\nself._scriptrunner = None\r\nself._pages_manager = PagesManager(self._script_data.main_script_path, self._script_cache)\r\nself.register_file_watchers()\r\n```\r\nwhich should probably be pulled out to a new method `request_stop_scriptrunner`?\r\n\r\nHappy to make a PR if the above is deemed appropriate, although it would be great to get some advice about how I should test the fix? \r\n\r\nMy thought would be that this bug arises since the same pages_strategy is shared between two threads, that a good test would be to create a AppSession, set the scriptrunner active_page_hash to something other than the main_script_hash, then call request_stop_scriptrunner, check the active_hash of the appsession is main_script_hash, then set the active_page_hash of both the script runners and verify they do not interact. \r\n\r\nNote: a workaround is to set the config option \"runner.fastReruns\" to false, although I dont know what other consequences this would have.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2241728693/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dannyopts","id":143318219,"node_id":"U_kgDOCIrcyw","avatar_url":"https://avatars.githubusercontent.com/u/143318219?v=4","gravatar_id":"","url":"https://api.github.com/users/dannyopts","html_url":"https://github.com/dannyopts","followers_url":"https://api.github.com/users/dannyopts/followers","following_url":"https://api.github.com/users/dannyopts/following{/other_user}","gists_url":"https://api.github.com/users/dannyopts/gists{/gist_id}","starred_url":"https://api.github.com/users/dannyopts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dannyopts/subscriptions","organizations_url":"https://api.github.com/users/dannyopts/orgs","repos_url":"https://api.github.com/users/dannyopts/repos","events_url":"https://api.github.com/users/dannyopts/events{/privacy}","received_events_url":"https://api.github.com/users/dannyopts/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13599772658,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMqnA_y","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599772658","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:25:31Z","label":{"name":"feature:st.navigation","color":"C5DEF5"},"performed_via_github_app":null},{"id":13599794134,"node_id":"UNLE_lADODCoeTs6QCw11zwAAAAMqnGPW","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599794134","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:27:24Z","label":{"name":"status:needs-triage","color":"FEF2C0"},"performed_via_github_app":null},{"id":13599794141,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMqnGPd","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599794141","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:27:24Z","label":{"name":"status:confirmed","color":"FEF2C0"},"performed_via_github_app":null},{"id":13599794150,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMqnGPm","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599794150","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:27:24Z","label":{"name":"priority:P3","color":"ff4b4b"},"performed_via_github_app":null},{"id":13599812052,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMqnKnU","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599812052","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:28:52Z","label":{"name":"feature:multipage-apps","color":"C5DEF5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2242731198","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2242731198","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2242731198,"node_id":"IC_kwDODCoeTs6FrVy-","user":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T11:29:22Z","updated_at":"2024-07-22T11:29:22Z","body":"@connortann Thanks for reporting this issue; I was able to reproduce it locally.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2242731198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13599818310,"node_id":"MEE_lADODCoeTs6QCw11zwAAAAMqnMJG","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599818310","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:29:23Z","performed_via_github_app":null},{"id":13599818322,"node_id":"SE_lADODCoeTs6QCw11zwAAAAMqnMJS","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599818322","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:29:23Z","performed_via_github_app":null},{"id":13599822674,"node_id":"UNLE_lADODCoeTs6QCw11zwAAAAMqnNNS","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13599822674","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T11:29:45Z","label":{"name":"priority:P3","color":"ff4b4b"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2243437654","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2243437654","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2243437654,"node_id":"IC_kwDODCoeTs6FuCRW","user":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T17:12:49Z","updated_at":"2024-07-22T17:12:49Z","body":"Hey @dannyopts ! Thank you for your thorough analysis here! It really helps.\r\n\r\nI think you have the right idea although I wonder whether it makes sense to keep the `PagesManager` in `AppSession` because we do want some benefits of caching the pages so that the app isn't recreating the pages from scratch. We can however, simplify the `active_script_hash` to be around the script runner (or ScriptRunContext) rather than the pages manager so it's not completely shared. I'll think more on this and work on a solution for the next release (after the one going out this week).","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2243437654/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13604417647,"node_id":"MEE_lADODCoeTs6QCw11zwAAAAMq4vBv","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13604417647","actor":{"login":"dannyopts","id":143318219,"node_id":"U_kgDOCIrcyw","avatar_url":"https://avatars.githubusercontent.com/u/143318219?v=4","gravatar_id":"","url":"https://api.github.com/users/dannyopts","html_url":"https://github.com/dannyopts","followers_url":"https://api.github.com/users/dannyopts/followers","following_url":"https://api.github.com/users/dannyopts/following{/other_user}","gists_url":"https://api.github.com/users/dannyopts/gists{/gist_id}","starred_url":"https://api.github.com/users/dannyopts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dannyopts/subscriptions","organizations_url":"https://api.github.com/users/dannyopts/orgs","repos_url":"https://api.github.com/users/dannyopts/repos","events_url":"https://api.github.com/users/dannyopts/events{/privacy}","received_events_url":"https://api.github.com/users/dannyopts/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-22T17:12:50Z","performed_via_github_app":null},{"id":13604417659,"node_id":"SE_lADODCoeTs6QCw11zwAAAAMq4vB7","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13604417659","actor":{"login":"dannyopts","id":143318219,"node_id":"U_kgDOCIrcyw","avatar_url":"https://avatars.githubusercontent.com/u/143318219?v=4","gravatar_id":"","url":"https://api.github.com/users/dannyopts","html_url":"https://github.com/dannyopts","followers_url":"https://api.github.com/users/dannyopts/followers","following_url":"https://api.github.com/users/dannyopts/following{/other_user}","gists_url":"https://api.github.com/users/dannyopts/gists{/gist_id}","starred_url":"https://api.github.com/users/dannyopts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dannyopts/subscriptions","organizations_url":"https://api.github.com/users/dannyopts/orgs","repos_url":"https://api.github.com/users/dannyopts/repos","events_url":"https://api.github.com/users/dannyopts/events{/privacy}","received_events_url":"https://api.github.com/users/dannyopts/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-22T17:12:50Z","performed_via_github_app":null},{"id":13606979087,"node_id":"LE_lADODCoeTs6QCw11zwAAAAMrCgYP","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13606979087","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-22T21:19:10Z","label":{"name":"priority:P3","color":"ff4b4b"},"performed_via_github_app":null},{"actor":{"login":"robingie","id":76411323,"node_id":"MDQ6VXNlcjc2NDExMzIz","avatar_url":"https://avatars.githubusercontent.com/u/76411323?v=4","gravatar_id":"","url":"https://api.github.com/users/robingie","html_url":"https://github.com/robingie","followers_url":"https://api.github.com/users/robingie/followers","following_url":"https://api.github.com/users/robingie/following{/other_user}","gists_url":"https://api.github.com/users/robingie/gists{/gist_id}","starred_url":"https://api.github.com/users/robingie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingie/subscriptions","organizations_url":"https://api.github.com/users/robingie/orgs","repos_url":"https://api.github.com/users/robingie/repos","events_url":"https://api.github.com/users/robingie/events{/privacy}","received_events_url":"https://api.github.com/users/robingie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:36:56Z","updated_at":"2024-07-26T18:36:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9138","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9138/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9138/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9138/events","html_url":"https://github.com/streamlit/streamlit/issues/9138","id":2428495826,"node_id":"I_kwDODCoeTs6Qv-fS","number":9138,"title":"Frequent/repeated `st.number` Step Button Interactions Trigger Unwanted Page Refresh & Widget Reset","user":{"login":"DECROMAX","id":45635865,"node_id":"MDQ6VXNlcjQ1NjM1ODY1","avatar_url":"https://avatars.githubusercontent.com/u/45635865?v=4","gravatar_id":"","url":"https://api.github.com/users/DECROMAX","html_url":"https://github.com/DECROMAX","followers_url":"https://api.github.com/users/DECROMAX/followers","following_url":"https://api.github.com/users/DECROMAX/following{/other_user}","gists_url":"https://api.github.com/users/DECROMAX/gists{/gist_id}","starred_url":"https://api.github.com/users/DECROMAX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DECROMAX/subscriptions","organizations_url":"https://api.github.com/users/DECROMAX/orgs","repos_url":"https://api.github.com/users/DECROMAX/repos","events_url":"https://api.github.com/users/DECROMAX/events{/privacy}","received_events_url":"https://api.github.com/users/DECROMAX/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-07-24T21:20:22Z","updated_at":"2024-08-15T20:49:36Z","closed_at":"2024-07-26T20:31:51Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit â€” A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\n\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\n- [X] I added a very descriptive title to this issue.\n- [X] I have provided sufficient information below to help reproduce this issue.\n\n### Summary\n\nFrequent and repeated pressing of the \"+/-\" step increment/decrement buttons on `st.number` widget results in an unexpected page refresh. The unintended page refresh leads to a reset of some input widget values, erasing any information previously entered\r\n\r\n[Screencast from 2024-07-24 21-54-22.webm](https://github.com/user-attachments/assets/3127bf53-7bea-435b-974f-2df07cafbb23)\r\n\n\n### Reproducible Code Example\n\n```Python\nimport streamlit as st\r\n\r\n\r\nwith st.sidebar:\r\n    sd_colour = st.selectbox(\"Colour\", [\"Red\", \"Blue\", \"Green\", \"Orange\"])\r\n    sd_thing = st.selectbox(\"Thing\", [\"Apple\", \"Banana\"])\r\n    sd_some_text = st.text_input(\"Some Text\")\r\n    sd_seperator = st.markdown(\"---\")\r\n    sd_activity = st.selectbox(\"Activity\", [\"Swimming\", \"Judo\", \"Running\", \"Walking\"])\r\n    sd_num1 = st.number_input(\"Num 1\", min_value=0.00, max_value=10000.25, step=0.25)\r\n    sd_num_2 = st.number_input(\"Num 2\", min_value=0.00, max_value=10000.25, step=0.25)\r\n    sd_num_3 = st.number_input(\"Num 3\", min_value=0.00, max_value=10000.25, step=0.25)\r\n    sd_qty = st.number_input(\"Qty\", min_value=1, max_value=100, step=1)\r\n    sd_film = st.selectbox(\"Film\", [\"Star Wars\", \"Pulp Fiction\", \"It\"])\r\n    sd_countries = st.multiselect(\r\n        \"Countries\", [\"UK\", \"USA\", \"Germany\", \"France\", \"Canada\"]\r\n    )\r\n    sd_num_4 = st.number_input(\"Num 4\", min_value=0, max_value=1000, step=5)\n```\n\n\n### Steps To Reproduce\n\n1. spam +/- step buttoms on st.number\n\n### Expected Behavior\n\nPage should not refresh / reset values\n\n### Current Behavior\n\nSee other \n\n### Is this a regression?\n\n- [ ] Yes, this used to work in a previous version.\n\n### Debug info\n\n- Streamlit version: 1.36.0\r\n- Python version: 3.12.3\r\n- Operating System: Ubuntu 24.04 LTS\r\n- Browser: Chrome 126.0.6478.182 (64-bit)\r\n\n\n### Additional Information\n\n_No response_","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9138/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9138/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-29T15:39:57Z","updated_at":"2024-07-29T15:39:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9163","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9163/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9163/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9163/events","html_url":"https://github.com/streamlit/streamlit/issues/9163","id":2435751559,"node_id":"I_kwDODCoeTs6RLp6H","number":9163,"title":"All widget state is lost in a st.Navigation app when a button is pressed soon after number_input","user":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230107623,"node_id":"MDU6TGFiZWwzMjMwMTA3NjIz","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P3","name":"priority:P3","color":"ff4b4b","default":false,"description":""},{"id":4288309131,"node_id":"LA_kwDODCoeTs7_mmeL","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:multipage-apps","name":"feature:multipage-apps","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2024-07-29T15:39:56Z","updated_at":"2024-08-15T12:14:23Z","closed_at":"2024-08-15T12:14:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit â€” A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n\r\n### Summary\r\n\r\nUnder certain conditions, the state of all widgets is lost when a `st.button` is pressed as a `st.number_input` widget is updated.\r\n\r\nThis issue is perhaps similar to #9100 , although occurs in different circumstances, and the workaround for that (disabling fast reruns) does not work for this bug.\r\n\r\n### Reproducible Code Example\r\n\r\n```Python\r\nimport streamlit as st\r\nimport pypsa  # import a reasonably large 3rd party module\r\n\r\ndef my_func():\r\n    num1 = st.number_input(\"Num 1\", key=\"num1\", value=None)\r\n    if st.button(\"Click me\", key=\"validate\"):\r\n        st.success(f\"You entered: {num1}\")\r\n\r\npages = [st.Page(my_func)]\r\npg = st.navigation(pages=pages)\r\npg.run()\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\n1. Type a value into the numeric widget (e.g. `7`). Do not press \"Enter\".\r\n2. Quickly click the button.\r\n3. Repeat steps 1&2, and at some point the number_input will \"reset\" and be blank.\r\n\r\nIt was a rather hard to pin down exactly what conditions are required for this bug occur. It occurs reliably in a large complex app, and occurs about 70% of the time with the minimal example above. It seems at two key ingredients are required:\r\n\r\n1. Only occurs when running as part of a sub-page in an `st.Navigation` app.\r\n2. Only occurs if a fairly large 3rd party library is imported as part of the app.\r\n \r\nIn the example below we import `pypsa` (can be installed with `pip install pypsa`), which takes ~1s to import for the first time, and leads to several thousand entries in `sys.modules`.\r\n\r\nIf I don't import `pypsa` the bug does not occur. However, if I navigate to a _differrent page_ of a larger multi-page app which includes a lot of imports, then back to this minimal example page, the bug _does_  occur. This leads me to think it might have something to do with the state of `sys.modules`.\r\n\r\nInterestingly, the bug _doesn't_ occur when the imports are replaced with a `time.sleep(1)` command.\r\n\r\n### Expected Behavior\r\n\r\nThe number_input widget's state should not be lost when a button is pressed.\r\n\r\n### Current Behavior\r\n\r\nThe success message `\"You entered: <number>\"` appears as expected, but the number_input widget state is lost and the widget resets to the default (empty)\r\n\r\n### Is this a regression?\r\n\r\n- [ ] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: 1.37.0\r\n- Python version: 3.11\r\n- Operating System: Linux\r\n- Browser: Chrome\r\n\r\n\r\n### Additional Information\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9163/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9163/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2266631250","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2266631250","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2266631250,"node_id":"IC_kwDODCoeTs6HGgxS","user":{"login":"robingie","id":76411323,"node_id":"MDQ6VXNlcjc2NDExMzIz","avatar_url":"https://avatars.githubusercontent.com/u/76411323?v=4","gravatar_id":"","url":"https://api.github.com/users/robingie","html_url":"https://github.com/robingie","followers_url":"https://api.github.com/users/robingie/followers","following_url":"https://api.github.com/users/robingie/following{/other_user}","gists_url":"https://api.github.com/users/robingie/gists{/gist_id}","starred_url":"https://api.github.com/users/robingie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingie/subscriptions","organizations_url":"https://api.github.com/users/robingie/orgs","repos_url":"https://api.github.com/users/robingie/repos","events_url":"https://api.github.com/users/robingie/events{/privacy}","received_events_url":"https://api.github.com/users/robingie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-03T08:05:05Z","updated_at":"2024-08-03T08:05:05Z","body":"Related #9036","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2266631250/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"robingie","id":76411323,"node_id":"MDQ6VXNlcjc2NDExMzIz","avatar_url":"https://avatars.githubusercontent.com/u/76411323?v=4","gravatar_id":"","url":"https://api.github.com/users/robingie","html_url":"https://github.com/robingie","followers_url":"https://api.github.com/users/robingie/followers","following_url":"https://api.github.com/users/robingie/following{/other_user}","gists_url":"https://api.github.com/users/robingie/gists{/gist_id}","starred_url":"https://api.github.com/users/robingie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingie/subscriptions","organizations_url":"https://api.github.com/users/robingie/orgs","repos_url":"https://api.github.com/users/robingie/repos","events_url":"https://api.github.com/users/robingie/events{/privacy}","received_events_url":"https://api.github.com/users/robingie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-15T11:44:40Z","updated_at":"2024-08-15T11:44:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9187","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9187/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9187/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9187/events","html_url":"https://github.com/streamlit/streamlit/pull/9187","id":2440130558,"node_id":"PR_kwDODCoeTs52_-l5","number":9187,"title":"When clearing forward queue add a stopped for rerun message","user":{"login":"dannyopts","id":143318219,"node_id":"U_kgDOCIrcyw","avatar_url":"https://avatars.githubusercontent.com/u/143318219?v=4","gravatar_id":"","url":"https://api.github.com/users/dannyopts","html_url":"https://github.com/dannyopts","followers_url":"https://api.github.com/users/dannyopts/followers","following_url":"https://api.github.com/users/dannyopts/following{/other_user}","gists_url":"https://api.github.com/users/dannyopts/gists{/gist_id}","starred_url":"https://api.github.com/users/dannyopts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dannyopts/subscriptions","organizations_url":"https://api.github.com/users/dannyopts/orgs","repos_url":"https://api.github.com/users/dannyopts/repos","events_url":"https://api.github.com/users/dannyopts/events{/privacy}","received_events_url":"https://api.github.com/users/dannyopts/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4804598999,"node_id":"LA_kwDODCoeTs8AAAABHmBc1w","url":"https://api.github.com/repos/streamlit/streamlit/labels/security-assessment-completed","name":"security-assessment-completed","color":"69056A","default":false,"description":""},{"id":5584917175,"node_id":"LA_kwDODCoeTs8AAAABTOMStw","url":"https://api.github.com/repos/streamlit/streamlit/labels/change:bugfix","name":"change:bugfix","color":"9861EA","default":false,"description":""},{"id":5584919480,"node_id":"LA_kwDODCoeTs8AAAABTOMbuA","url":"https://api.github.com/repos/streamlit/streamlit/labels/impact:users","name":"impact:users","color":"E96227","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-07-31T13:56:45Z","updated_at":"2024-08-15T12:14:21Z","closed_at":"2024-08-15T12:14:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit â€” A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/streamlit/streamlit/pulls/9187","html_url":"https://github.com/streamlit/streamlit/pull/9187","diff_url":"https://github.com/streamlit/streamlit/pull/9187.diff","patch_url":"https://github.com/streamlit/streamlit/pull/9187.patch","merged_at":"2024-08-15T12:14:21Z"},"body":"## Describe your changes\r\nAt the moment, some delta messages may not be sent to the frontend but the script_finished_successfully message may still be sent to the front end, at which point the front end will remove stale elements.\r\n\r\nFrom the perspective of the frontend there is no difference between a scriptRunner finishing execution but some of the later messages being dropped and the scriptRunner being stopped prematurely for a rerun.\r\n\r\nIn the case of the issue #9163, the number input element is considered stale, so removed. It is then added back by the rerun, but has lost its state, so the value is nulled out.\r\n\r\nThis PR instead modifies the preserved script_finished messages by setting FINISHED_EARLY_FOR_RERUN as the value when the browser queue was not flushed before a new script run started.\r\n\r\n## GitHub Issue Link (if applicable)\r\n\r\nCloses https://github.com/streamlit/streamlit/issues/9163\r\n\r\n## Testing Plan\r\n\r\nThe bug this aims to fix is related to concurrency and seems quite difficult to test in an automated fashion. The bug cannot be reliably reproduced so e2e testing doesnt seem too useful either. \r\n\r\nI have verified these changes resolve the issue shared above. \r\n\r\nUpdated the existing tests and added some new tests for the different return values of the _clear_queue function.\r\n\r\n---\r\n\r\n**Contribution License Agreement**\r\n\r\nBy submitting this pull request you agree that all contributions to this project are made under the Apache 2.0 license.\r\n","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9187/reactions","total_count":6,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":4,"rocket":1,"eyes":1},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9187/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2291161859","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2291161859","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2291161859,"node_id":"IC_kwDODCoeTs6IkFsD","user":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-15T12:15:08Z","updated_at":"2024-08-15T12:15:08Z","body":"Should be closed by https://github.com/streamlit/streamlit/pull/9187\r\nIf this issues persists in the next Streamlit version or nightly, please re-open!","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2291161859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13895102898,"node_id":"CE_lADODCoeTs6QCw11zwAAAAM8NnGy","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13895102898","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-08-15T12:15:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2293536636","html_url":"https://github.com/streamlit/streamlit/issues/9100#issuecomment-2293536636","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9100","id":2293536636,"node_id":"IC_kwDODCoeTs6ItJd8","user":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-16T13:42:23Z","updated_at":"2024-08-16T13:59:20Z","body":"Hi @raethlein ,\r\n\r\nI think I was mistaken in my comment on #9187 that this issue would be fixed by that PR. That PR relates to handling of the forward queue; whereas this issue relates to the sharing of mutable state between threads via the `pages_manager` as discussed above. Please would you re-open the issue?\r\n\r\n(EDIT: we have confirmed that this issue still occurs even with the fix from #9187)\r\n\r\n@dannyopts and I are happy to work on a PR for this if that would help; or happy to leave it if @kmcgrady is still intending to work on it?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2293536636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"connortann","id":71127464,"node_id":"MDQ6VXNlcjcxMTI3NDY0","avatar_url":"https://avatars.githubusercontent.com/u/71127464?v=4","gravatar_id":"","url":"https://api.github.com/users/connortann","html_url":"https://github.com/connortann","followers_url":"https://api.github.com/users/connortann/followers","following_url":"https://api.github.com/users/connortann/following{/other_user}","gists_url":"https://api.github.com/users/connortann/gists{/gist_id}","starred_url":"https://api.github.com/users/connortann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connortann/subscriptions","organizations_url":"https://api.github.com/users/connortann/orgs","repos_url":"https://api.github.com/users/connortann/repos","events_url":"https://api.github.com/users/connortann/events{/privacy}","received_events_url":"https://api.github.com/users/connortann/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13911112159,"node_id":"MEE_lADODCoeTs6QCw11zwAAAAM9Krnf","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13911112159","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-08-16T13:42:24Z","performed_via_github_app":null},{"id":13911112170,"node_id":"SE_lADODCoeTs6QCw11zwAAAAM9Krnq","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13911112170","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-08-16T13:42:24Z","performed_via_github_app":null},{"id":13911112184,"node_id":"MEE_lADODCoeTs6QCw11zwAAAAM9Krn4","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13911112184","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-08-16T13:42:25Z","performed_via_github_app":null},{"id":13911112194,"node_id":"SE_lADODCoeTs6QCw11zwAAAAM9KroC","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13911112194","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-08-16T13:42:25Z","performed_via_github_app":null}]