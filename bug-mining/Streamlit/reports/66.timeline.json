[{"id":13691576218,"node_id":"LE_lADODCoeTs6RQ_gMzwAAAAMwFN-a","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13691576218","actor":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-30T07:48:44Z","label":{"name":"status:needs-triage","color":"FEF2C0"},"performed_via_github_app":null},{"id":13691576227,"node_id":"LE_lADODCoeTs6RQ_gMzwAAAAMwFN-j","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13691576227","actor":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-30T07:48:44Z","label":{"name":"type:bug","color":"D93F0B"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2257697938","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2257697938","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2257697938,"node_id":"IC_kwDODCoeTs6GkbyS","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T07:48:54Z","updated_at":"2024-07-30T07:48:54Z","body":"**If this issue affects you, please react with a üëç (thumbs up emoji) to the initial post.**\n\nYour feedback helps us prioritize which bugs to investigate and address first.\n\n![Visits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fstreamlit%2Fstreamlit%2Fissues%2F9171&title=visits&edge_flat=false)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2257697938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":15368,"client_id":"Iv1.05c79e9ad1f6bdfa","slug":"github-actions","node_id":"MDM6QXBwMTUzNjg=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"GitHub Actions","description":"Automate your workflow from idea to production","external_url":"https://help.github.com/en/actions","html_url":"https://github.com/apps/github-actions","created_at":"2018-07-30T09:30:17Z","updated_at":"2025-03-07T16:35:00Z","permissions":{"actions":"write","administration":"read","attestations":"write","checks":"write","contents":"write","deployments":"write","discussions":"write","issues":"write","merge_queues":"write","metadata":"read","models":"read","packages":"write","pages":"write","pull_requests":"write","repository_hooks":"write","repository_projects":"write","security_events":"write","statuses":"write","vulnerability_alerts":"read"},"events":["branch_protection_rule","check_run","check_suite","create","delete","deployment","deployment_status","discussion","discussion_comment","fork","gollum","issues","issue_comment","label","merge_group","milestone","page_build","project","project_card","project_column","public","pull_request","pull_request_review","pull_request_review_comment","push","registry_package","release","repository","repository_dispatch","status","watch","workflow_dispatch","workflow_run"]},"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":13691582651,"node_id":"RTE_lADODCoeTs6RQ_gMzwAAAAMwFPi7","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13691582651","actor":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-07-30T07:49:13Z","rename":{"from":"st.rerun reruns the etire page instead of just escaping the fragment resulting in other widgets loosing their state (since v.1.37)","to":"st.rerun reruns the entire page instead of just escaping the fragment resulting in other widgets loosing their state (since v.1.37)"},"performed_via_github_app":null},{"id":13694012786,"node_id":"LE_lADODCoeTs6RQ_gMzwAAAAMwOg1y","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13694012786","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-30T10:49:54Z","label":{"name":"status:confirmed","color":"FEF2C0"},"performed_via_github_app":null},{"id":13694013559,"node_id":"UNLE_lADODCoeTs6RQ_gMzwAAAAMwOhB3","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13694013559","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-07-30T10:49:58Z","label":{"name":"status:needs-triage","color":"FEF2C0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2258058142","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2258058142","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2258058142,"node_id":"IC_kwDODCoeTs6Glzue","user":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T10:51:09Z","updated_at":"2024-07-30T12:11:49Z","body":"Thanks for reporting this and the example! \r\n@vdonato I have started to look into it and it seems that the change happened by commit: 00cd56017e806f8947afb5bf29845a4d7166e167\r\nIn the commit right before that the behavior still works as it used to in version `1.36`: 0e878b10cf8a98ad691d08ce2b7af45fa3f0cb8f\r\nInterestingly, the state is not lost. Upon the next app rerun, the widgets show the correct results again for me.\r\n\r\nUpdate:\r\nI dug deeper into this and I _believe_ I have found the change / cause for this:\r\nIn the session_state `_remove_stale_widgets` function, we use the `fragment_ids_this_run` [here](https://github.com/streamlit/streamlit/commit/00cd56017e806f8947afb5bf29845a4d7166e167#diff-67342c2e3508a20a82eee400bbd34f985506bbccde52b61f139f86dcb101d672R582-R584) to determine what widgets are stale. However, the new behavior in commit 00cd56017e806f8947afb5bf29845a4d7166e167 is that the _new_ `fragment_ids` are used, based on the current `script_requests` object that was updated with the latest `RerunData` in `app_session.request_rerun` (btw. this is empty for the example app because the `st.rerun()` triggers a full-app rerun).\r\nIn the code before this change, e.g. in 0e878b10cf8a98ad691d08ce2b7af45fa3f0cb8f, the `fragment_ids` from the run _before_ the latest `RerunRequest` are used to remove stale widgets. The `remove_stale_widgets` code is triggered via `self._on_script_finished` [here](https://github.com/streamlit/streamlit/blob/0e878b10cf8a98ad691d08ce2b7af45fa3f0cb8f/lib/streamlit/runtime/scriptrunner/script_runner.py#L608). But the `ctx.current_fragment_ids` is reset based on the latest `rerun_data` [here](https://github.com/streamlit/streamlit/blob/0e878b10cf8a98ad691d08ce2b7af45fa3f0cb8f/lib/streamlit/runtime/scriptrunner/script_runner.py#L458-L462) in the new loop-iteration _after_ the `remove_stale_widgets` call is made.\r\n\r\nSo TLDR:\r\n- new (false) behavior: `remove_stale_widget` with latest `RerunData.fragment_ids` is made\r\n- old (correct) behavior: `remove_stale_widget` with the previous `RerunData.fragment_ids` is made\r\n\r\nTo check this, I have added following line in [script_runner#471](https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/runtime/scriptrunner/script_runner.py#L471):\r\n```python\r\nctx.clean_up_fragment_ids = fragment_ids_this_run\r\n```\r\n\r\nand in [session_state#582-585](https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/runtime/state/session_state.py#L582-L585):\r\n```python\r\n        # fragment_ids_this_run = (\r\n        #     set(ctx.script_requests.fragment_id_queue)\r\n        #     if ctx.script_requests and len(ctx.script_requests.fragment_id_queue) > 0\r\n        #     else None\r\n        # )\r\n        fragment_ids_this_run = (\r\n            ctx.clean_up_fragment_ids if ctx.clean_up_fragment_ids else None\r\n        )\r\n```\r\n\r\nand with these changes, the example from the issue works again as expected.\r\nThe question now is whether there are any unintended side-effects.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2258058142/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13694027757,"node_id":"MEE_lADODCoeTs6RQ_gMzwAAAAMwOkft","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13694027757","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-30T10:51:11Z","performed_via_github_app":null},{"id":13694027771,"node_id":"SE_lADODCoeTs6RQ_gMzwAAAAMwOkf7","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13694027771","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-30T10:51:11Z","performed_via_github_app":null},{"id":13699640985,"node_id":"LE_lADODCoeTs6RQ_gMzwAAAAMwj-6Z","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13699640985","actor":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-30T18:08:12Z","label":{"name":"feature:st.rerun","color":"C5DEF5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259100072","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2259100072","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2259100072,"node_id":"IC_kwDODCoeTs6GpyGo","user":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T19:53:54Z","updated_at":"2024-07-30T19:53:54Z","body":"Thank you very much. This sadly prevents us currently to be able to update to 1.37 :(","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259100072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259317665","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2259317665","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2259317665,"node_id":"IC_kwDODCoeTs6GqnOh","user":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T22:34:22Z","updated_at":"2024-07-30T22:34:22Z","body":"Thanks for investigating @raethlein! I wonder if, rather than adding a new field to our script run context, we can just revert https://github.com/streamlit/streamlit/commit/00cd56017e806f8947afb5bf29845a4d7166e167 instead (I think they may essentially boil down to being the same aside from the name of the field in script run context).\r\n\r\nI thought that change was a strict simplification, but it seems like where I was mistaken is that `ctx.script_requests.fragment_id_queue` isn't quite the same as the copy we previously made in our script run context -- it's also used to set up the next script run when `st.rerun()` is used and we reuse the same script context / thread. Thus, mutations to the `fragment_id_queue` have weird/unexpected consequences.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259317665/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13702041409,"node_id":"MEE_lADODCoeTs6RQ_gMzwAAAAMwtI9B","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13702041409","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-30T22:34:23Z","performed_via_github_app":null},{"id":13702041418,"node_id":"SE_lADODCoeTs6RQ_gMzwAAAAMwtI9K","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13702041418","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-30T22:34:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259322883","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2259322883","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2259322883,"node_id":"IC_kwDODCoeTs6GqogD","user":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T22:40:20Z","updated_at":"2024-07-30T22:40:20Z","body":"@vdonato yeah I agree, if we can just revert the change and don't need anything else from that commit that would probably be the best üëçüòä","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259322883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raethlein","id":3775781,"node_id":"MDQ6VXNlcjM3NzU3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3775781?v=4","gravatar_id":"","url":"https://api.github.com/users/raethlein","html_url":"https://github.com/raethlein","followers_url":"https://api.github.com/users/raethlein/followers","following_url":"https://api.github.com/users/raethlein/following{/other_user}","gists_url":"https://api.github.com/users/raethlein/gists{/gist_id}","starred_url":"https://api.github.com/users/raethlein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raethlein/subscriptions","organizations_url":"https://api.github.com/users/raethlein/orgs","repos_url":"https://api.github.com/users/raethlein/repos","events_url":"https://api.github.com/users/raethlein/events{/privacy}","received_events_url":"https://api.github.com/users/raethlein/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13702074515,"node_id":"MEE_lADODCoeTs6RQ_gMzwAAAAMwtRCT","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13702074515","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-30T22:40:21Z","performed_via_github_app":null},{"id":13702074524,"node_id":"SE_lADODCoeTs6RQ_gMzwAAAAMwtRCc","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13702074524","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-30T22:40:21Z","performed_via_github_app":null},{"actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T22:44:49Z","updated_at":"2024-07-30T22:44:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9178","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9178/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9178/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9178/events","html_url":"https://github.com/streamlit/streamlit/pull/9178","id":2438793642,"node_id":"PR_kwDODCoeTs527Zhg","number":9178,"title":"Revert \"Remove fragment_ids_this_run from script run context (#8953)\" and tweaks some types","user":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4804598999,"node_id":"LA_kwDODCoeTs8AAAABHmBc1w","url":"https://api.github.com/repos/streamlit/streamlit/labels/security-assessment-completed","name":"security-assessment-completed","color":"69056A","default":false,"description":""},{"id":5584917175,"node_id":"LA_kwDODCoeTs8AAAABTOMStw","url":"https://api.github.com/repos/streamlit/streamlit/labels/change:bugfix","name":"change:bugfix","color":"9861EA","default":false,"description":""},{"id":5584919480,"node_id":"LA_kwDODCoeTs8AAAABTOMbuA","url":"https://api.github.com/repos/streamlit/streamlit/labels/impact:users","name":"impact:users","color":"E96227","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-07-30T22:44:49Z","updated_at":"2024-08-01T07:51:17Z","closed_at":"2024-08-01T07:38:20Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit ‚Äî A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/streamlit/streamlit/pulls/9178","html_url":"https://github.com/streamlit/streamlit/pull/9178","diff_url":"https://github.com/streamlit/streamlit/pull/9178.diff","patch_url":"https://github.com/streamlit/streamlit/pull/9178.patch","merged_at":"2024-08-01T07:38:20Z"},"body":"This reverts commit 00cd56017e806f8947afb5bf29845a4d7166e167.\r\n\r\nSee the discussion on #9171 for details on this bug.\r\n\r\nCloses #9171\r\n","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9178/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259329132","html_url":"https://github.com/streamlit/streamlit/issues/9171#issuecomment-2259329132","issue_url":"https://api.github.com/repos/streamlit/streamlit/issues/9171","id":2259329132,"node_id":"IC_kwDODCoeTs6GqqBs","user":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-30T22:47:45Z","updated_at":"2024-07-30T22:48:04Z","body":"Sounds good to me. I made a PR for the revert but will spend some time double-checking that no weirdness occurs due to it (the revert looks pretty clean, but the feature branch did live for a decent amount of time after the initial PR was merged, so would be good to be sure). We'll likely need a bit of time to get the rest of the changes in for the patch anyway, so taking a bit more time to validate this one should be ok.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/comments/2259329132/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13713547430,"node_id":"LE_lADODCoeTs6RQ_gMzwAAAAMxZCCm","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13713547430","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-31T17:54:03Z","label":{"name":"priority:P1","color":"ff4b4b"},"performed_via_github_app":null},{"id":13717831235,"node_id":"AE_lADODCoeTs6RQ_gMzwAAAAMxpX5D","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13717831235","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-08-01T00:21:03Z","assignee":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-01T01:15:35Z","updated_at":"2024-08-01T01:15:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9180","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9180/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9180/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9180/events","html_url":"https://github.com/streamlit/streamlit/issues/9180","id":2439129233,"node_id":"I_kwDODCoeTs6RYiiR","number":9180,"title":"st.rerun works strange when using with @st.fragment and st.option_menu","user":{"login":"N-aksif-N","id":162333410,"node_id":"U_kgDOCa0C4g","avatar_url":"https://avatars.githubusercontent.com/u/162333410?v=4","gravatar_id":"","url":"https://api.github.com/users/N-aksif-N","html_url":"https://github.com/N-aksif-N","followers_url":"https://api.github.com/users/N-aksif-N/followers","following_url":"https://api.github.com/users/N-aksif-N/following{/other_user}","gists_url":"https://api.github.com/users/N-aksif-N/gists{/gist_id}","starred_url":"https://api.github.com/users/N-aksif-N/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/N-aksif-N/subscriptions","organizations_url":"https://api.github.com/users/N-aksif-N/orgs","repos_url":"https://api.github.com/users/N-aksif-N/repos","events_url":"https://api.github.com/users/N-aksif-N/events{/privacy}","received_events_url":"https://api.github.com/users/N-aksif-N/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-07-31T05:01:24Z","updated_at":"2024-08-15T20:49:36Z","closed_at":"2024-08-01T01:15:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit ‚Äî A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\n\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\n- [X] I added a very descriptive title to this issue.\n- [X] I have provided sufficient information below to help reproduce this issue.\n\n### Summary\n\nHello. I'm N-aksif-N. I'm having a small project in my github using streamlit packages. So, my problem is that I used `st.rerun()` in a `@st.fragment`. And I used st.side_bar also with the help of `st.option_menu` to seperate the streamlit pages. When I hit the button `reload`, it callbacks the rerun function. The st.fragment rerun but it didn't show what inside the `st.fragment`, it show the MAIN pages.\n\n### Reproducible Code Example\n\n```Python\nimport streamlit as st\r\nfrom streamlit_option_menu import option_menu\r\n\r\n@st.fragment\r\ndef SERVER():\r\n  st.write('SERVER')\r\n  reload = st.button('Reload')\r\n  if reload:\r\n    st.rerun()\r\n\r\nwith st.sidebar:  choice = option_menu('Menu', ['Main_page', 'Somthings else', 'SERVER'])\r\nif choice == 'Main_page':  st.title('Hello')\r\nif choice == 'SERVER': SERVER()\r\nelse:  st.header('...')\n```\n\n\n### Steps To Reproduce\n\n1. Go to the server option\r\n2. Click the `reload` button\n\n### Expected Behavior\n\n@st.fragment rerun and show the things inside it.\n\n### Current Behavior\n\nRerun the pages and show the main pages.\n\n### Is this a regression?\n\n- [ ] Yes, this used to work in a previous version.\n\n### Debug info\n\n- Streamlit version: 1.37.0\r\n- Python version: 3.10.12\r\n- Operating System: Ubuntu 20.04 (cloud) - Garuda Linux (client)\r\n- Browser: FireDragon\r\n\n\n### Additional Information\n\nI use Google collab to deploy my app. You can see my code in my [github](https://github.com/N-aksif-N/MineColab_Improved/tree/app). This is just a small problem. Also, I have asked on the streamlit_option_menu for that (but didn't give me the correct answer). Although I have time to wait, I think it will be best if you answer me. Thank you.","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9180/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9180/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":13721220248,"node_id":"CE_lADODCoeTs6RQ_gMzwAAAAMx2TSY","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13721220248","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-08-01T07:38:21Z","state_reason":null,"performed_via_github_app":null},{"id":13721220330,"node_id":"CE_lADODCoeTs6RQ_gMzwAAAAMx2TTq","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13721220330","actor":{"login":"vdonato","id":3144420,"node_id":"MDQ6VXNlcjMxNDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/3144420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdonato","html_url":"https://github.com/vdonato","followers_url":"https://api.github.com/users/vdonato/followers","following_url":"https://api.github.com/users/vdonato/following{/other_user}","gists_url":"https://api.github.com/users/vdonato/gists{/gist_id}","starred_url":"https://api.github.com/users/vdonato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdonato/subscriptions","organizations_url":"https://api.github.com/users/vdonato/orgs","repos_url":"https://api.github.com/users/vdonato/repos","events_url":"https://api.github.com/users/vdonato/events{/privacy}","received_events_url":"https://api.github.com/users/vdonato/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"36cdba67dbcb6e15306d0b6436fb227547c1a6de","commit_url":"https://api.github.com/repos/streamlit/streamlit/commits/36cdba67dbcb6e15306d0b6436fb227547c1a6de","created_at":"2024-08-01T07:38:21Z","state_reason":null,"performed_via_github_app":null},{"id":13721739490,"node_id":"REFE_lADODCoeTs6RQ_gMzwAAAAMx4SDi","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13721739490","actor":{"login":"sthagen","id":450800,"node_id":"MDQ6VXNlcjQ1MDgwMA==","avatar_url":"https://avatars.githubusercontent.com/u/450800?v=4","gravatar_id":"","url":"https://api.github.com/users/sthagen","html_url":"https://github.com/sthagen","followers_url":"https://api.github.com/users/sthagen/followers","following_url":"https://api.github.com/users/sthagen/following{/other_user}","gists_url":"https://api.github.com/users/sthagen/gists{/gist_id}","starred_url":"https://api.github.com/users/sthagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sthagen/subscriptions","organizations_url":"https://api.github.com/users/sthagen/orgs","repos_url":"https://api.github.com/users/sthagen/repos","events_url":"https://api.github.com/users/sthagen/events{/privacy}","received_events_url":"https://api.github.com/users/sthagen/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"36cdba67dbcb6e15306d0b6436fb227547c1a6de","commit_url":"https://api.github.com/repos/sthagen/streamlit-streamlit/commits/36cdba67dbcb6e15306d0b6436fb227547c1a6de","created_at":"2024-08-01T08:19:39Z","performed_via_github_app":null},{"id":13731285048,"node_id":"REFE_lADODCoeTs6RQ_gMzwAAAAMycsg4","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/13731285048","actor":{"login":"kmcgrady","id":69432,"node_id":"MDQ6VXNlcjY5NDMy","avatar_url":"https://avatars.githubusercontent.com/u/69432?v=4","gravatar_id":"","url":"https://api.github.com/users/kmcgrady","html_url":"https://github.com/kmcgrady","followers_url":"https://api.github.com/users/kmcgrady/followers","following_url":"https://api.github.com/users/kmcgrady/following{/other_user}","gists_url":"https://api.github.com/users/kmcgrady/gists{/gist_id}","starred_url":"https://api.github.com/users/kmcgrady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmcgrady/subscriptions","organizations_url":"https://api.github.com/users/kmcgrady/orgs","repos_url":"https://api.github.com/users/kmcgrady/repos","events_url":"https://api.github.com/users/kmcgrady/events{/privacy}","received_events_url":"https://api.github.com/users/kmcgrady/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6686c3dff13f1b4f0b0cefa2e4c09f5590a06070","commit_url":"https://api.github.com/repos/streamlit/streamlit/commits/6686c3dff13f1b4f0b0cefa2e4c09f5590a06070","created_at":"2024-08-01T19:47:21Z","performed_via_github_app":null},{"actor":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T11:00:22Z","updated_at":"2024-08-22T11:00:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9313","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9313/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9313/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9313/events","html_url":"https://github.com/streamlit/streamlit/issues/9313","id":2476048721,"node_id":"I_kwDODCoeTs6TlYFR","number":9313,"title":"Interacting with widgets inside st.fragment functions can lead to the wrong fragment instance been shown. This used to work in v1.36","user":{"login":"flucas96","id":59033065,"node_id":"MDQ6VXNlcjU5MDMzMDY1","avatar_url":"https://avatars.githubusercontent.com/u/59033065?v=4","gravatar_id":"","url":"https://api.github.com/users/flucas96","html_url":"https://github.com/flucas96","followers_url":"https://api.github.com/users/flucas96/followers","following_url":"https://api.github.com/users/flucas96/following{/other_user}","gists_url":"https://api.github.com/users/flucas96/gists{/gist_id}","starred_url":"https://api.github.com/users/flucas96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flucas96/subscriptions","organizations_url":"https://api.github.com/users/flucas96/orgs","repos_url":"https://api.github.com/users/flucas96/repos","events_url":"https://api.github.com/users/flucas96/events{/privacy}","received_events_url":"https://api.github.com/users/flucas96/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230105890,"node_id":"MDU6TGFiZWwzMjMwMTA1ODkw","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P2","name":"priority:P2","color":"ff4b4b","default":false,"description":""},{"id":6789238910,"node_id":"LA_kwDODCoeTs8AAAABlKuQfg","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.fragment","name":"feature:st.fragment","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-08-20T16:18:27Z","updated_at":"2024-08-26T16:27:35Z","closed_at":"2024-08-26T16:27:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":204086862,"node_id":"MDEwOlJlcG9zaXRvcnkyMDQwODY4NjI=","name":"streamlit","full_name":"streamlit/streamlit","private":false,"owner":{"login":"streamlit","id":45109972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1MTA5OTcy","avatar_url":"https://avatars.githubusercontent.com/u/45109972?v=4","gravatar_id":"","url":"https://api.github.com/users/streamlit","html_url":"https://github.com/streamlit","followers_url":"https://api.github.com/users/streamlit/followers","following_url":"https://api.github.com/users/streamlit/following{/other_user}","gists_url":"https://api.github.com/users/streamlit/gists{/gist_id}","starred_url":"https://api.github.com/users/streamlit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/streamlit/subscriptions","organizations_url":"https://api.github.com/users/streamlit/orgs","repos_url":"https://api.github.com/users/streamlit/repos","events_url":"https://api.github.com/users/streamlit/events{/privacy}","received_events_url":"https://api.github.com/users/streamlit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/streamlit/streamlit","description":"Streamlit ‚Äî A faster way to build and share data apps.","fork":false,"url":"https://api.github.com/repos/streamlit/streamlit","forks_url":"https://api.github.com/repos/streamlit/streamlit/forks","keys_url":"https://api.github.com/repos/streamlit/streamlit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/streamlit/streamlit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/streamlit/streamlit/teams","hooks_url":"https://api.github.com/repos/streamlit/streamlit/hooks","issue_events_url":"https://api.github.com/repos/streamlit/streamlit/issues/events{/number}","events_url":"https://api.github.com/repos/streamlit/streamlit/events","assignees_url":"https://api.github.com/repos/streamlit/streamlit/assignees{/user}","branches_url":"https://api.github.com/repos/streamlit/streamlit/branches{/branch}","tags_url":"https://api.github.com/repos/streamlit/streamlit/tags","blobs_url":"https://api.github.com/repos/streamlit/streamlit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/streamlit/streamlit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/streamlit/streamlit/git/refs{/sha}","trees_url":"https://api.github.com/repos/streamlit/streamlit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/streamlit/streamlit/statuses/{sha}","languages_url":"https://api.github.com/repos/streamlit/streamlit/languages","stargazers_url":"https://api.github.com/repos/streamlit/streamlit/stargazers","contributors_url":"https://api.github.com/repos/streamlit/streamlit/contributors","subscribers_url":"https://api.github.com/repos/streamlit/streamlit/subscribers","subscription_url":"https://api.github.com/repos/streamlit/streamlit/subscription","commits_url":"https://api.github.com/repos/streamlit/streamlit/commits{/sha}","git_commits_url":"https://api.github.com/repos/streamlit/streamlit/git/commits{/sha}","comments_url":"https://api.github.com/repos/streamlit/streamlit/comments{/number}","issue_comment_url":"https://api.github.com/repos/streamlit/streamlit/issues/comments{/number}","contents_url":"https://api.github.com/repos/streamlit/streamlit/contents/{+path}","compare_url":"https://api.github.com/repos/streamlit/streamlit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/streamlit/streamlit/merges","archive_url":"https://api.github.com/repos/streamlit/streamlit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/streamlit/streamlit/downloads","issues_url":"https://api.github.com/repos/streamlit/streamlit/issues{/number}","pulls_url":"https://api.github.com/repos/streamlit/streamlit/pulls{/number}","milestones_url":"https://api.github.com/repos/streamlit/streamlit/milestones{/number}","notifications_url":"https://api.github.com/repos/streamlit/streamlit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/streamlit/streamlit/labels{/name}","releases_url":"https://api.github.com/repos/streamlit/streamlit/releases{/id}","deployments_url":"https://api.github.com/repos/streamlit/streamlit/deployments","created_at":"2019-08-24T00:14:52Z","updated_at":"2025-11-09T13:48:14Z","pushed_at":"2025-11-09T06:40:32Z","git_url":"git://github.com/streamlit/streamlit.git","ssh_url":"git@github.com:streamlit/streamlit.git","clone_url":"https://github.com/streamlit/streamlit.git","svn_url":"https://github.com/streamlit/streamlit","homepage":"https://streamlit.io","size":760107,"stargazers_count":42135,"watchers_count":42135,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1307,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-analysis","data-science","data-visualization","deep-learning","developer-tools","machine-learning","python","streamlit"],"visibility":"public","forks":3873,"open_issues":1307,"watchers":42135,"default_branch":"develop","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n\r\n### Summary\r\n\r\nHi, \r\n\r\nsorry for the somewhat unclear title. I hope my example makes the issues clearer.\r\n\r\nStarting in version 1.37.1 changing a value in a function decorated with @st.fragment might lead to displaying the wrong fragment. This happens if there once where multiple fragments instances of the same function created\r\n\r\n\r\n### Reproducible Code Example\r\n\r\n[![Open in Streamlit Cloud](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://issues.streamlitapp.com/?issue=gh-9313)\r\n\r\n```Python\r\nimport streamlit as st\r\nimport pandas as pd\r\n\r\n#Dummy data\r\n# from dummy_data import get_analysis, Analysis\r\nfrom packaging import version\r\nfrom typing import Literal\r\nclass Analysis():\r\n  \"\"\"\r\n  Dummy class to represent an analysis. In reality, this is a SQLAlchemy Model\r\n  \"\"\"\r\n  def __init__(self, id, name, type: Literal[\"line\", \"bar\"]):\r\n    \r\n    self.id = id\r\n    self.name = name\r\n    self.type = type\r\n    \r\n#Some dummies\r\ndummy_analysis1 = Analysis(1, \"dummy1\", \"line\")\r\ndummy_analysis2 = Analysis(2, \"dummy2\", \"bar\")\r\ndummy_analysis3 = Analysis(3, \"dummy3\", \"line\")\r\ndummy_analysis4 = Analysis(4, \"dummy4\", \"bar\")\r\n\r\n@st.cache_data()\r\ndef get_analysis() -> Analysis:\r\n    \"\"\"\r\n    Dummy function to get an analysis object.\r\n    \"\"\"\r\n    \r\n    return [dummy_analysis1, dummy_analysis2, dummy_analysis3, dummy_analysis4]\r\n\r\nif version.parse(st.__version__) >= version.parse(\"1.37.0\"):\r\n  fragment_handler = st.fragment\r\nelse:\r\n  fragment_handler = st.experimental_fragment\r\n  \r\ndef class_to_dataframe(objects):\r\n    \"\"\"\r\n    Converts a list of class instances to a pandas DataFrame.\r\n\r\n    Parameters:\r\n        objects (list): A list of class instances.\r\n\r\n    Returns:\r\n        pandas.DataFrame: A DataFrame where each row represents an instance\r\n                          and each column an attribute of the class.\r\n    \"\"\"\r\n\r\n    # Extract attribute dictionaries from objects using vars() or obj.__dict__\r\n    data = [vars(obj) for obj in objects]\r\n    # Create and return the DataFrame\r\n    return pd.DataFrame(data).drop(columns=[\"_sa_instance_state\"], errors=\"ignore\")\r\n  \r\ndef _get_selected_analysis(df: pd.DataFrame, analysis: list[Analysis]): \r\n    \"\"\"\r\n    Updates the session state with the selected analysis.\r\n\r\n    Parameters:\r\n        df (pd.DataFrame): DataFrame containing the analysis data.\r\n        analysis (list[Analysis]): List of analysis objects.\r\n    \"\"\"\r\n    selected_ausw = df.loc[df[\"selector\"] == True][\"id\"].to_list()\r\n    st.session_state[\"selected_analysis\"] = [\r\n            ausw for ausw in analysis if ausw.id in selected_ausw\r\n        ]\r\n   \r\n@fragment_handler\r\ndef list_analysis(analysis: list[Analysis]):\r\n  \"\"\"\r\n  Creates a list of all available analysis.#\r\n  \r\n  Parameters:\r\n      analysis (Analysis): The analysis object to be displayed.\r\n  \"\"\"\r\n  if \"selected_analysis\" not in st.session_state:\r\n      st.session_state[\"selected_analysis\"] = []\r\n\r\n  df_raw = class_to_dataframe(analysis)\r\n  if \"selected_analysis\" in st.session_state:\r\n    df_raw.loc[\r\n        df_raw[\"id\"].isin(\r\n            [ausw.id for ausw in st.session_state[\"selected_analysis\"]]\r\n        ),\r\n        \"selector\",\r\n    ] = True\r\n\r\n  column_config = {\r\n      \"selector\": st.column_config.CheckboxColumn(\r\n          \"Select\",  default=False\r\n      ),\r\n      \"name\": st.column_config.TextColumn(\"Name\", disabled=True),\r\n      \"type\": st.column_config.TextColumn(\"Type\", disabled=True),\r\n  }\r\n\r\n  column_order = (\"selector\", \"name\", \"type\")\r\n\r\n  st.subheader(\"Choose your Analysis\")\r\n  res = st.data_editor(\r\n      df_raw,\r\n      column_config=column_config,\r\n      column_order=column_order,\r\n      hide_index=True,\r\n      key=\"analysis_table\",\r\n      use_container_width=True,\r\n  )\r\n\r\n  selected_auswertungen = res.loc[res[\"selector\"] == True][\"id\"].to_list()\r\n  disabled = False if len(selected_auswertungen) > 0 else True\r\n    # disabled = False\r\n    # Buttons\r\n  col_btn_show, _, col_btn_del = st.columns([1, 0.1, 1])\r\n  with col_btn_show:\r\n    if st.button(\r\n        \"**Show**\",\r\n        use_container_width=True,\r\n        disabled=disabled,\r\n        key=\"show_analysis_button\",\r\n    ):\r\n\r\n      _get_selected_analysis(res, analysis)\r\n      st.rerun()\r\n      \r\n@fragment_handler\r\ndef show_selected_analysis(analysis: Analysis):\r\n  st.subheader(f\"Selected Analysis:  {analysis.name}\")\r\n  st.write(\"ID: \", analysis.id)\r\n  \r\n  st.write(\"**Some Random Input: Select a value to multiple the ID by**\")\r\n  multipe = st.slider(\"Multiply by\", 1, 10, 1,key=f\"slider_{analysis.id}\")\r\n  st.write(\"New ID: \", analysis.id * multipe)\r\n  \r\n  \r\n  \r\n    \r\n#Here we create the dashboard page:\r\n\r\nst.session_state[\"selected_analysis\"] = st.session_state.get(\"selected_analysis\", [])\r\n\r\n#display the list of analysis\r\nlist_analysis(analysis=get_analysis())\r\n\r\nif \"selected_analysis\" in st.session_state:\r\n    #display the selected analysis\r\n    if len(st.session_state[\"selected_analysis\"]) > 0:\r\n      for analysis in st.session_state[\"selected_analysis\"]:\r\n        show_selected_analysis(analysis)\r\n        st.divider()\r\n\r\n\r\nwith st.sidebar:\r\n  with st.container(border=True):\r\n    st.write(\"**What is the bug**\")\r\n    st.write(\"\"\"Starting in **version 1.37.1** changing a value in a function decorated with `@st.fragment`might lead to displaying the wrong fragment. This happens if there once where multiple fragments instances of the same function created\r\n             \"\"\")\r\n    \r\n    st.write(\"**How to reproduce**\")\r\n    st.write(\"\"\"1. Install Streamlit Version 1.37.1\\n\\n2. Select the first two analysis options and click on the **Show** button  \\n\\n3. Play around with the two sliders and see that everything works as expected.\\n\\n4. Now deselect the first analysis and keep the second analysis selected\\n\\n5. Click on the **Show** button.\\n\\n6. Only the second analysis is now being displayed. Until here everything was working as expected.\\n\\n7. If you know touch the slider again, suddently the first analysis is being displayed again instead of the second one.  \\n\\n \r\n             \"\"\")\r\n    st.write(\"**Excepted behavior**\")\r\n    st.write(\"\"\"The expected behavior can be observed by installing Streamlit Version 1.36\"\"\")\r\n    st.write(\"When this older version is installed, touching the slider will not change the displayed analysis.\")\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\n1. Install Streamlit Version 1.37.1\r\n\r\n2. Select the first two analysis options and click on the Show button\r\n\r\n3. Play around with the two sliders and see that everything works as expected.\r\n\r\n4. Now deselect the first analysis and keep the second analysis selected\r\n\r\n5. Click on the Show button.\r\n\r\n6. Only the second analysis is now being displayed. Until here everything was working as expected.\r\n\r\n7. If you know touch the slider again, suddently the first analysis is being displayed again instead of the second one.\r\n\r\n8. Now install Streamlit Version 1.36 and do the same again to see the expected behavior.\r\n\r\n### Expected Behavior\r\n\r\nI would expect the content shown the be the same. \r\n\r\n### Current Behavior\r\n\r\nThe shown content switches bag to the previously selected value that was rendered in the fragment. \r\n\r\n\r\n\r\n### Is this a regression?\r\n\r\n- [X] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: 1.37.1 / 1.36\r\n- Python version: 3.9\r\n- Operating System: Windows & Linux\r\n- Browser: Chrome & Edge\r\n\r\n\r\n### Additional Information\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9313/reactions","total_count":12,"+1":9,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9313/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":14444597970,"node_id":"REFE_lADODCoeTs6RQ_gMzwAAAANc9xLS","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/14444597970","actor":{"login":"benjamin-awd","id":62495124,"node_id":"MDQ6VXNlcjYyNDk1MTI0","avatar_url":"https://avatars.githubusercontent.com/u/62495124?v=4","gravatar_id":"","url":"https://api.github.com/users/benjamin-awd","html_url":"https://github.com/benjamin-awd","followers_url":"https://api.github.com/users/benjamin-awd/followers","following_url":"https://api.github.com/users/benjamin-awd/following{/other_user}","gists_url":"https://api.github.com/users/benjamin-awd/gists{/gist_id}","starred_url":"https://api.github.com/users/benjamin-awd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benjamin-awd/subscriptions","organizations_url":"https://api.github.com/users/benjamin-awd/orgs","repos_url":"https://api.github.com/users/benjamin-awd/repos","events_url":"https://api.github.com/users/benjamin-awd/events{/privacy}","received_events_url":"https://api.github.com/users/benjamin-awd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8415354c25fd46a01b0f1057313f4670e75745fe","commit_url":"https://api.github.com/repos/benjamin-awd/streamlit/commits/8415354c25fd46a01b0f1057313f4670e75745fe","created_at":"2024-09-29T08:26:44Z","performed_via_github_app":null},{"id":15987826927,"node_id":"REFE_lADODCoeTs6RQ_gMzwAAAAO48uDv","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/15987826927","actor":{"login":"edegp","id":86155082,"node_id":"MDQ6VXNlcjg2MTU1MDgy","avatar_url":"https://avatars.githubusercontent.com/u/86155082?v=4","gravatar_id":"","url":"https://api.github.com/users/edegp","html_url":"https://github.com/edegp","followers_url":"https://api.github.com/users/edegp/followers","following_url":"https://api.github.com/users/edegp/following{/other_user}","gists_url":"https://api.github.com/users/edegp/gists{/gist_id}","starred_url":"https://api.github.com/users/edegp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edegp/subscriptions","organizations_url":"https://api.github.com/users/edegp/orgs","repos_url":"https://api.github.com/users/edegp/repos","events_url":"https://api.github.com/users/edegp/events{/privacy}","received_events_url":"https://api.github.com/users/edegp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a1f965601f42375241e2482f9faaf4cca9911b6d","commit_url":"https://api.github.com/repos/edegp/streamlit/commits/a1f965601f42375241e2482f9faaf4cca9911b6d","created_at":"2025-01-19T04:36:13Z","performed_via_github_app":null},{"id":19986604041,"node_id":"REFE_lADODCoeTs6RQ_gMzwAAAASnS2AJ","url":"https://api.github.com/repos/streamlit/streamlit/issues/events/19986604041","actor":{"login":"asmeralt","id":544010,"node_id":"MDQ6VXNlcjU0NDAxMA==","avatar_url":"https://avatars.githubusercontent.com/u/544010?v=4","gravatar_id":"","url":"https://api.github.com/users/asmeralt","html_url":"https://github.com/asmeralt","followers_url":"https://api.github.com/users/asmeralt/followers","following_url":"https://api.github.com/users/asmeralt/following{/other_user}","gists_url":"https://api.github.com/users/asmeralt/gists{/gist_id}","starred_url":"https://api.github.com/users/asmeralt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asmeralt/subscriptions","organizations_url":"https://api.github.com/users/asmeralt/orgs","repos_url":"https://api.github.com/users/asmeralt/repos","events_url":"https://api.github.com/users/asmeralt/events{/privacy}","received_events_url":"https://api.github.com/users/asmeralt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d132977be1bd94aaf5d524f86e18113ae7fcb940","commit_url":"https://api.github.com/repos/asmeralt/streamlit/commits/d132977be1bd94aaf5d524f86e18113ae7fcb940","created_at":"2025-09-29T14:57:00Z","performed_via_github_app":null}]