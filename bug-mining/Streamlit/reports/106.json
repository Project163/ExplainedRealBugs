{"url":"https://api.github.com/repos/streamlit/streamlit/issues/10448","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/10448/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/10448/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/10448/events","html_url":"https://github.com/streamlit/streamlit/issues/10448","id":2863672248,"node_id":"I_kwDODCoeTs6qsCu4","number":10448,"title":"Vega-lite selection interval shows \"true\" tooltip","user":{"login":"foldager","id":5124332,"node_id":"MDQ6VXNlcjUxMjQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/5124332?v=4","gravatar_id":"","url":"https://api.github.com/users/foldager","html_url":"https://github.com/foldager","followers_url":"https://api.github.com/users/foldager/followers","following_url":"https://api.github.com/users/foldager/following{/other_user}","gists_url":"https://api.github.com/users/foldager/gists{/gist_id}","starred_url":"https://api.github.com/users/foldager/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foldager/subscriptions","organizations_url":"https://api.github.com/users/foldager/orgs","repos_url":"https://api.github.com/users/foldager/repos","events_url":"https://api.github.com/users/foldager/events{/privacy}","received_events_url":"https://api.github.com/users/foldager/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230107623,"node_id":"MDU6TGFiZWwzMjMwMTA3NjIz","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P3","name":"priority:P3","color":"ff4b4b","default":false,"description":""},{"id":3904034825,"node_id":"LA_kwDODCoeTs7ostgJ","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.altair_chart","name":"feature:st.altair_chart","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-02-19T15:21:41Z","updated_at":"2025-02-20T23:23:22Z","closed_at":"2025-02-20T23:23:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\n\n- [x] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\n- [x] I added a very descriptive title to this issue.\n- [x] I have provided sufficient information below to help reproduce this issue.\n\n### Summary\n\nWhen adding a selection interval to an altair plot, the selection rectangle has a tooltip \"true\". There should not be a tooltip for the selection mark.\n\n<img width=\"806\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/109a9cee-7431-4df1-9e1e-b28946279c01\" />\n\n### Reproducible Code Example\n\n```Python\nimport altair as alt\nimport streamlit as st\nfrom vega_datasets import data\n\n# Load data\ncars = data.cars()\n\n# Selection parameter\nselection = alt.selection_interval()\n\n# Create scatter plot\nscatter_plot = (\n    alt.Chart(cars)\n    .mark_circle()\n    .encode(\n        x='Horsepower',\n        y='Miles_per_Gallon',\n        color='Origin',\n        tooltip=['Name', 'Horsepower', 'Miles_per_Gallon']\n    )\n    .add_params(selection)\n    .properties(title='Horsepower vs. Miles per Gallon')\n)\n\nst.altair_chart(scatter_plot)\n```\n\n### Steps To Reproduce\n\n1. Click and drag to create selection rectangle\n2. Hover over the selection rectangle\n\n\n### Expected Behavior\n\nThe drag cursor shows (and there is no tooltip).\n\n### Current Behavior\n\nThe drag cursor shows along with the tooltip \"true\".\n\n### Is this a regression?\n\n- [ ] Yes, this used to work in a previous version.\n\n### Debug info\n\n- Streamlit version: 1.42.1\n- Python version: 3.12\n- Operating System: MacOS\n- Browser: Chrome\n\n\n### Additional Information\n\nI see that the streamlit vega-lite theme enables tooltips by default. I was looking at https://github.com/vega/vega-lite/issues/6522 which lead me to tinker with the vega-lite config. I think all is needed is to update\n\nhttps://github.com/streamlit/streamlit/blob/596657b3d2bd64d33bb8b3076b4cffc965ea4700/frontend/lib/src/components/elements/ArrowVegaLiteChart/CustomTheme.tsx#L124\n\nto\n\n```ts\n    tooltip: {content: \"encoding\"}\n```\n\nI can reproduce the behavior in the vega editor.\nSee [example I](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlAWwIYCcDWLQAuEEANgXAA77jQECmUBKIDkAJnFEgL68A0INhgIZqAVywlmQkQHow2AM4A6AFaLoIbgMy5qBAJ4U6zMHCxgSJ7SyjtOSVDRIQs1eHRJtmAeSyJOEAFDY2YoCDRODCkbIlJyKmQAbVAPL2YAOQw0E2CjE2QQcMioaK0+VLhPb0KACVdFOgoIAHc6NzzQwoBHMQxGOBFyADdrCpA0mpAAWTgrRQB9YywFgHFolyggkBCCkF7+8iG4Ua0AXQEAD3cq9LqGptb27d3mA4Hj05sDG+rmWfmS3aaw2mk6e3eR2EJ2ssUGVmY9SwjWabSwAAJhip0QC6Ip0ct0esSJtthRsNlFCgUkVsntyVhsgsAIwANm2jSsYCYTlehU49CwwzKvAuIAAJIowAALOiYZjSggECiKZCyWSjBAYZQIQbSsQAI2UcAgsilsswGroWoAtCRBnQNQBWZQAJgADMpmWoNFtuEA) with config `{\"mark\": {\"tooltip\": {\"content\": \"encoding\"}}}` vs. [example II](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlAWwIYCcDWLQAuEEANgXAA4oFYCuApgL6MA0IAJhgRviLViRQcuGAPRhsAZwB0AK0nQQrEJly8CATwr0hYOFjAkdy+lEjs4UJKnCkIWXvHol2QgPJZElkG03ahUBBolhiCykSk5FTIANqgTi5CAHIYaDq+WjrIIIHBUKFKLPFwzq7ZABL2kvQUEADu9A4Z-tkAjrQYUOTc5ABuxkUgCWUgALJwRpIA+tpYUwDioSSKzVkg7Z3dXHD9SgC6bAAejiWJFVU19Y0+IH5rG11wPTsDIBonpULjkzONC0srW6ZIQPLZ9YzhJ5GISVLDVWoNLAAAl6MiR33okiRsyRixIyygNwo2FSkhQcRyqTWxKwqSmAEYAGw3apGMAEdTA7KWAiNXoFZgHEAAEkkYAAFvRMEJxQQCBRJMhRKJ+ggMNIEE9xbQAEbSOAQURiyWYFX0NUAWhIT3oKoArNIAEwABmk9LkCkJjCAA) with config `{\"mark\": {\"tooltip\": true}}`.\n\nExample II has the \"true\" tooltip, while example I works as expected.\n\nExample II:\n<img width=\"436\" alt=\"Example II\" src=\"https://github.com/user-attachments/assets/25426386-0629-489d-90ce-d92928cd1fd2\" />\n\n\n","closed_by":{"login":"mayagbarnes","id":63436329,"node_id":"MDQ6VXNlcjYzNDM2MzI5","avatar_url":"https://avatars.githubusercontent.com/u/63436329?v=4","gravatar_id":"","url":"https://api.github.com/users/mayagbarnes","html_url":"https://github.com/mayagbarnes","followers_url":"https://api.github.com/users/mayagbarnes/followers","following_url":"https://api.github.com/users/mayagbarnes/following{/other_user}","gists_url":"https://api.github.com/users/mayagbarnes/gists{/gist_id}","starred_url":"https://api.github.com/users/mayagbarnes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayagbarnes/subscriptions","organizations_url":"https://api.github.com/users/mayagbarnes/orgs","repos_url":"https://api.github.com/users/mayagbarnes/repos","events_url":"https://api.github.com/users/mayagbarnes/events{/privacy}","received_events_url":"https://api.github.com/users/mayagbarnes/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/10448/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/10448/timeline","performed_via_github_app":null,"state_reason":"completed"}