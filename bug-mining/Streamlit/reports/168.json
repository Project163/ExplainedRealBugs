{"url":"https://api.github.com/repos/streamlit/streamlit/issues/12230","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/12230/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/12230/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/12230/events","html_url":"https://github.com/streamlit/streamlit/issues/12230","id":3325409091,"node_id":"I_kwDODCoeTs7GNbdD","number":12230,"title":"Clicking on column visibility menu in `st.dataframe` opens column menu behind it","user":{"login":"plumol","id":113059978,"node_id":"U_kgDOBr0oig","avatar_url":"https://avatars.githubusercontent.com/u/113059978?v=4","gravatar_id":"","url":"https://api.github.com/users/plumol","html_url":"https://github.com/plumol","followers_url":"https://api.github.com/users/plumol/followers","following_url":"https://api.github.com/users/plumol/following{/other_user}","gists_url":"https://api.github.com/users/plumol/gists{/gist_id}","starred_url":"https://api.github.com/users/plumol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plumol/subscriptions","organizations_url":"https://api.github.com/users/plumol/orgs","repos_url":"https://api.github.com/users/plumol/repos","events_url":"https://api.github.com/users/plumol/events{/privacy}","received_events_url":"https://api.github.com/users/plumol/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":1964011103,"node_id":"MDU6TGFiZWwxOTY0MDExMTAz","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.dataframe","name":"feature:st.dataframe","color":"C5DEF5","default":false,"description":""},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230107623,"node_id":"MDU6TGFiZWwzMjMwMTA3NjIz","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P3","name":"priority:P3","color":"ff4b4b","default":false,"description":""},{"id":4999625825,"node_id":"LA_kwDODCoeTs8AAAABKgA8YQ","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.data_editor","name":"feature:st.data_editor","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2025-08-15T14:17:40Z","updated_at":"2025-08-15T21:45:57Z","closed_at":"2025-08-15T21:45:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\n\n- [x] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\n- [x] I added a very descriptive title to this issue.\n- [x] I have provided sufficient information below to help reproduce this issue.\n\n### Summary\n\nClicking menu elements for the column visibility menu in `st.dataframe` sometimes opens the column menu of the column below it, blocking the visibility menu.\n\n<img width=\"747\" height=\"405\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6cb44117-d3a4-48ec-8eb3-07d0d9ed2ab5\" />\n\n### Reproducible Code Example\n\n```Python\nimport streamlit as st\nimport pandas as pd\n\ndf = pd.DataFrame({\n  'first column': [1, 2, 3, 4],\n  'second column': [10, 20, 30, 40],\n  'third column': [10, 20, 30, 40],\n  'fourth column': [10, 20, 30, 40],\n  'fifth column': [10, 20, 30, 40],\n  'sixth column': [10, 20, 30, 40],\n  'seventh column': [10, 20, 30, 40],\n  'eighth column': [10, 20, 30, 40],\n  'ninth column': [10, 20, 30, 40],\n  'tenth column': [10, 20, 30, 40],\n})\n\nst.write(df)\n```\n\n### Steps To Reproduce\n\n1. Click to hide the sixth column\n2. Open column visibility menu\n3. Click on the edge of the (index) where the column menu behind the visibility menu would be\n\n(video for reproduction below in current behavior)\n\n### Expected Behavior\n\nWe expect it to not open the column menu below it if clicked. \n\n### Current Behavior\n\nFrom what I tested, this behavior happens when the dataframe has not been scrolled yet, and applies to the last 'visible' column to the normal view. No stack trace or errors\n\nhttps://github.com/user-attachments/assets/3b3861e8-5868-466a-997c-29da4733516b\n\n### Is this a regression?\n\n- [ ] Yes, this used to work in a previous version.\n\n### Debug info\n\n- Streamlit version: 1.48.0\n- Python version: 3.11.6\n- Operating System: MacOs 14.4\n- Browser: Chrome\n\n\n### Additional Information\n\nI came across the bug when I was trying to implement another feature #12164. It causes a pretty nasty bug when dealing with the same behavior of clicking on the edge- that time it will throw a whole error about the column menu, and not just a menu overlap.\n\nI think I also found a small fix for it that I could quickly implement, but wanted to open a separate issue/ PR for it","closed_by":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/12230/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/12230/timeline","performed_via_github_app":null,"state_reason":"completed"}