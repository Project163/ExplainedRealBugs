{"url":"https://api.github.com/repos/streamlit/streamlit/issues/10647","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/10647/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/10647/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/10647/events","html_url":"https://github.com/streamlit/streamlit/issues/10647","id":2896800503,"node_id":"I_kwDODCoeTs6sqar3","number":10647,"title":"Add `show_time` parameter to `st.cache_data` and `st.cache_resource`","user":{"login":"VERBOSE-01","id":201906310,"node_id":"U_kgDODAjYhg","avatar_url":"https://avatars.githubusercontent.com/u/201906310?v=4","gravatar_id":"","url":"https://api.github.com/users/VERBOSE-01","html_url":"https://github.com/VERBOSE-01","followers_url":"https://api.github.com/users/VERBOSE-01/followers","following_url":"https://api.github.com/users/VERBOSE-01/following{/other_user}","gists_url":"https://api.github.com/users/VERBOSE-01/gists{/gist_id}","starred_url":"https://api.github.com/users/VERBOSE-01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VERBOSE-01/subscriptions","organizations_url":"https://api.github.com/users/VERBOSE-01/orgs","repos_url":"https://api.github.com/users/VERBOSE-01/repos","events_url":"https://api.github.com/users/VERBOSE-01/events{/privacy}","received_events_url":"https://api.github.com/users/VERBOSE-01/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285327,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI3","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:enhancement","name":"type:enhancement","color":"0E8A16","default":false,"description":"Requests for feature enhancements or new features"},{"id":1516285329,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI5","url":"https://api.github.com/repos/streamlit/streamlit/labels/good%20first%20issue","name":"good first issue","color":"D4C5F9","default":true,"description":"Good for newcomers"},{"id":1607719438,"node_id":"MDU6TGFiZWwxNjA3NzE5NDM4","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:cache","name":"feature:cache","color":"C5DEF5","default":false,"description":"Related to st.cache_data and st.cache_resource"},{"id":4650902841,"node_id":"LA_kwDODCoeTs8AAAABFTclOQ","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.spinner","name":"feature:st.spinner","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"Darkace01","id":33027659,"node_id":"MDQ6VXNlcjMzMDI3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/33027659?v=4","gravatar_id":"","url":"https://api.github.com/users/Darkace01","html_url":"https://github.com/Darkace01","followers_url":"https://api.github.com/users/Darkace01/followers","following_url":"https://api.github.com/users/Darkace01/following{/other_user}","gists_url":"https://api.github.com/users/Darkace01/gists{/gist_id}","starred_url":"https://api.github.com/users/Darkace01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Darkace01/subscriptions","organizations_url":"https://api.github.com/users/Darkace01/orgs","repos_url":"https://api.github.com/users/Darkace01/repos","events_url":"https://api.github.com/users/Darkace01/events{/privacy}","received_events_url":"https://api.github.com/users/Darkace01/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"Darkace01","id":33027659,"node_id":"MDQ6VXNlcjMzMDI3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/33027659?v=4","gravatar_id":"","url":"https://api.github.com/users/Darkace01","html_url":"https://github.com/Darkace01","followers_url":"https://api.github.com/users/Darkace01/followers","following_url":"https://api.github.com/users/Darkace01/following{/other_user}","gists_url":"https://api.github.com/users/Darkace01/gists{/gist_id}","starred_url":"https://api.github.com/users/Darkace01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Darkace01/subscriptions","organizations_url":"https://api.github.com/users/Darkace01/orgs","repos_url":"https://api.github.com/users/Darkace01/repos","events_url":"https://api.github.com/users/Darkace01/events{/privacy}","received_events_url":"https://api.github.com/users/Darkace01/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2025-03-05T09:44:15Z","updated_at":"2025-07-01T01:50:16Z","closed_at":"2025-07-01T01:50:16Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\n\n- [x] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar feature requests.\n- [x] I added a descriptive title and summary to this issue.\n\n### Summary\n\n[`st.spinner`](https://docs.streamlit.io/develop/api-reference/status/st.spinner) now supports the `show_time` parameter (introduced by #10072), but [`st.cache_data`](https://docs.streamlit.io/develop/api-reference/caching-and-state/st.cache_data) and [`st.cache_resource`](https://docs.streamlit.io/develop/api-reference/caching-and-state/st.cache_resource) don't, even though they propose a `show_spinner` parameter.\n\n### Why?\n\nI think having a timed cached spinner would be useful (at least for me) and makes more sense. Itâ€™s not mandatory, but it could be a cool addition.\n\nA (_workaround_?) would be to put the cached logic under an `st.spinner` context manager.\n\n![Image](https://github.com/user-attachments/assets/c14183b9-3155-4cbd-b4b5-10bf22c5f641)\n\n```\n# app.py\nimport time\n\nimport streamlit as st\n\nLOADING = \"Loading data...\"\n\n\n@st.cache_data(show_spinner=LOADING)\ndef get_data_l(n: int) -> list[int]:\n    \"\"\"Mock function that simulates a long computation.\"\"\"\n    time.sleep(3)\n    return list(range(1, n + 1))\n\n\n@st.cache_data(show_spinner=False)\ndef get_data_r(n: int) -> list[int]:\n    \"\"\"Mock function that simulates a long computation.\"\"\"\n    with st.spinner(LOADING, show_time=True):\n        time.sleep(3)\n        return list(range(1, n + 1))\n\n\ndef show_slider(col: str, *, timed: bool = False) -> None:\n    \"\"\"Display a slider and a button to clear the cache.\"\"\"\n    n = st.slider(\n        \"Number of items\", 1, 10, 5, key=f\"sl_{col}\", label_visibility=\"collapsed\",\n    )\n\n    get_data = get_data_r if timed else get_data_l\n\n    data = []\n\n    col_l, *_ = st.columns(3)\n\n    if col_l.button(\"GENERATE\", key=f\"btn_gen_{col}\"):\n        data = get_data(n)\n\n    st.write(f\"_Items :_ {data}\")\n\n\ncol_l, col_r = st.columns(2, gap=\"medium\")\n\nwith col_l:\n    st.markdown(\":red-background[__Current__]\")\n    show_slider(\"left\")\n\nwith col_r:\n    st.markdown(\":green-background[__Workaround__]\")\n    show_slider(\"right\", timed=True)\n```\n","closed_by":{"login":"lukasmasuch","id":2852129,"node_id":"MDQ6VXNlcjI4NTIxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2852129?v=4","gravatar_id":"","url":"https://api.github.com/users/lukasmasuch","html_url":"https://github.com/lukasmasuch","followers_url":"https://api.github.com/users/lukasmasuch/followers","following_url":"https://api.github.com/users/lukasmasuch/following{/other_user}","gists_url":"https://api.github.com/users/lukasmasuch/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasmasuch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasmasuch/subscriptions","organizations_url":"https://api.github.com/users/lukasmasuch/orgs","repos_url":"https://api.github.com/users/lukasmasuch/repos","events_url":"https://api.github.com/users/lukasmasuch/events{/privacy}","received_events_url":"https://api.github.com/users/lukasmasuch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/10647/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/10647/timeline","performed_via_github_app":null,"state_reason":"completed"}