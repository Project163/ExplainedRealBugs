{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9984","repository_url":"https://api.github.com/repos/streamlit/streamlit","labels_url":"https://api.github.com/repos/streamlit/streamlit/issues/9984/labels{/name}","comments_url":"https://api.github.com/repos/streamlit/streamlit/issues/9984/comments","events_url":"https://api.github.com/repos/streamlit/streamlit/issues/9984/events","html_url":"https://github.com/streamlit/streamlit/issues/9984","id":2727656766,"node_id":"I_kwDODCoeTs6ilL0-","number":9984,"title":"`st.altair_chart` does not show with a good size if the title is too long","user":{"login":"RubenCata","id":61882466,"node_id":"MDQ6VXNlcjYxODgyNDY2","avatar_url":"https://avatars.githubusercontent.com/u/61882466?v=4","gravatar_id":"","url":"https://api.github.com/users/RubenCata","html_url":"https://github.com/RubenCata","followers_url":"https://api.github.com/users/RubenCata/followers","following_url":"https://api.github.com/users/RubenCata/following{/other_user}","gists_url":"https://api.github.com/users/RubenCata/gists{/gist_id}","starred_url":"https://api.github.com/users/RubenCata/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RubenCata/subscriptions","organizations_url":"https://api.github.com/users/RubenCata/orgs","repos_url":"https://api.github.com/users/RubenCata/repos","events_url":"https://api.github.com/users/RubenCata/events{/privacy}","received_events_url":"https://api.github.com/users/RubenCata/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1516285324,"node_id":"MDU6TGFiZWwxNTE2Mjg1MzI0","url":"https://api.github.com/repos/streamlit/streamlit/labels/type:bug","name":"type:bug","color":"D93F0B","default":false,"description":"Something isn't working"},{"id":3022365121,"node_id":"MDU6TGFiZWwzMDIyMzY1MTIx","url":"https://api.github.com/repos/streamlit/streamlit/labels/status:confirmed","name":"status:confirmed","color":"FEF2C0","default":false,"description":"Bug has been confirmed by the Streamlit team"},{"id":3230107623,"node_id":"MDU6TGFiZWwzMjMwMTA3NjIz","url":"https://api.github.com/repos/streamlit/streamlit/labels/priority:P3","name":"priority:P3","color":"ff4b4b","default":false,"description":""},{"id":3904034825,"node_id":"LA_kwDODCoeTs7ostgJ","url":"https://api.github.com/repos/streamlit/streamlit/labels/feature:st.altair_chart","name":"feature:st.altair_chart","color":"C5DEF5","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"sfc-gh-bnisco","id":178842601,"node_id":"U_kgDOCqjr6Q","avatar_url":"https://avatars.githubusercontent.com/u/178842601?v=4","gravatar_id":"","url":"https://api.github.com/users/sfc-gh-bnisco","html_url":"https://github.com/sfc-gh-bnisco","followers_url":"https://api.github.com/users/sfc-gh-bnisco/followers","following_url":"https://api.github.com/users/sfc-gh-bnisco/following{/other_user}","gists_url":"https://api.github.com/users/sfc-gh-bnisco/gists{/gist_id}","starred_url":"https://api.github.com/users/sfc-gh-bnisco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfc-gh-bnisco/subscriptions","organizations_url":"https://api.github.com/users/sfc-gh-bnisco/orgs","repos_url":"https://api.github.com/users/sfc-gh-bnisco/repos","events_url":"https://api.github.com/users/sfc-gh-bnisco/events{/privacy}","received_events_url":"https://api.github.com/users/sfc-gh-bnisco/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sfc-gh-bnisco","id":178842601,"node_id":"U_kgDOCqjr6Q","avatar_url":"https://avatars.githubusercontent.com/u/178842601?v=4","gravatar_id":"","url":"https://api.github.com/users/sfc-gh-bnisco","html_url":"https://github.com/sfc-gh-bnisco","followers_url":"https://api.github.com/users/sfc-gh-bnisco/followers","following_url":"https://api.github.com/users/sfc-gh-bnisco/following{/other_user}","gists_url":"https://api.github.com/users/sfc-gh-bnisco/gists{/gist_id}","starred_url":"https://api.github.com/users/sfc-gh-bnisco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfc-gh-bnisco/subscriptions","organizations_url":"https://api.github.com/users/sfc-gh-bnisco/orgs","repos_url":"https://api.github.com/users/sfc-gh-bnisco/repos","events_url":"https://api.github.com/users/sfc-gh-bnisco/events{/privacy}","received_events_url":"https://api.github.com/users/sfc-gh-bnisco/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2024-12-09T16:37:58Z","updated_at":"2025-06-11T21:33:08Z","closed_at":"2025-06-11T21:33:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Checklist\r\n\r\n- [X] I have searched the [existing issues](https://github.com/streamlit/streamlit/issues) for similar issues.\r\n- [X] I added a very descriptive title to this issue.\r\n- [X] I have provided sufficient information below to help reproduce this issue.\r\n\r\n### Summary\r\n\r\n`st.altair_chart` fails to properly display `alt.Chart` with title that exceed the container width.\r\n\r\nWhen using st.altair_chart, charts with titles that do not fit within the container width are rendered poorly.\r\nIn the example below, two `st.altair_chart` instances use the same `alt.Chart` object. The first chart has sufficient space to display the entire title, resulting in a clear presentation. In contrast, the second chart has limited space, causing the title to be truncated and the chart to appear distorted.\r\n\r\n<img width=\"652\" alt=\"image\" src=\"https://github.com/user-attachments/assets/3f520e5e-7677-4d68-a6d0-c7c66ffb05cd\">\r\n\r\n\r\nIf the title length is increased to affect the first chart as well, it will also render poorly, indicating that the issue is not related to the `use_container_width` parameter in `st.altair_chart`.\r\n\r\n### Reproducible Code Example\r\n\r\n[![Open in Streamlit Cloud](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://issues.streamlitapp.com/?issue=gh-9984)\r\n\r\n```Python\r\n# create a very basic alt.chart\r\nimport streamlit as st\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\n# Create a simple dataframe\r\ndf = pd.DataFrame({\"x\": [1, 2, 3, 4, 5], \"y\": [10, 20, 30, 40, 50]})\r\n\r\n# Create a simple chart\r\nchart = (\r\n    alt.Chart(\r\n        data=df,\r\n        title=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nec purus euismod, ultricies nunc nec, ultricies nunc.\",\r\n    )\r\n    .mark_line()\r\n    .encode(x=\"x\", y=\"y\")\r\n)\r\n\r\n# Render the chart\r\nst.altair_chart(chart, use_container_width=True)\r\nst.altair_chart(chart, use_container_width=False)\r\n```\r\n\r\n\r\n### Steps To Reproduce\r\n\r\nRun the previous code\r\n\r\n### Expected Behavior\r\n\r\nThe chart should be always displayed with the appropriate width.\r\nIf the title exceeds the available space, it should be truncated at the point where it reaches the container's width limit without affecting the chart.\r\n\r\n### Current Behavior\r\n\r\nIf the `alt.Chart` title is too long, the title is truncated (which is good), but the chart is rendered with an incorrect width, leading to a poor visual presentation.\r\n\r\n### Is this a regression?\r\n\r\n- [ ] Yes, this used to work in a previous version.\r\n\r\n### Debug info\r\n\r\n- Streamlit version: 1.40.2\r\n- Python version: 3.10.11\r\n- Operating System: Windows 11\r\n- Browser: Chrome\r\n\r\n\r\n### Additional Information","closed_by":{"login":"sfc-gh-bnisco","id":178842601,"node_id":"U_kgDOCqjr6Q","avatar_url":"https://avatars.githubusercontent.com/u/178842601?v=4","gravatar_id":"","url":"https://api.github.com/users/sfc-gh-bnisco","html_url":"https://github.com/sfc-gh-bnisco","followers_url":"https://api.github.com/users/sfc-gh-bnisco/followers","following_url":"https://api.github.com/users/sfc-gh-bnisco/following{/other_user}","gists_url":"https://api.github.com/users/sfc-gh-bnisco/gists{/gist_id}","starred_url":"https://api.github.com/users/sfc-gh-bnisco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfc-gh-bnisco/subscriptions","organizations_url":"https://api.github.com/users/sfc-gh-bnisco/orgs","repos_url":"https://api.github.com/users/sfc-gh-bnisco/repos","events_url":"https://api.github.com/users/sfc-gh-bnisco/events{/privacy}","received_events_url":"https://api.github.com/users/sfc-gh-bnisco/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/streamlit/streamlit/issues/9984/reactions","total_count":6,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/streamlit/streamlit/issues/9984/timeline","performed_via_github_app":null,"state_reason":"completed"}