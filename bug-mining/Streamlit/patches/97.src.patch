diff --git a/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-theme_message_before[webkit].png b/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-theme_message_before[webkit].png
index 28a33102b..03a8ecb4e 100644
Binary files a/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-theme_message_before[webkit].png and b/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-theme_message_before[webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-toolbar_items[webkit].png b/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-toolbar_items[webkit].png
index 06c9cf819..40f88b4ca 100644
Binary files a/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-toolbar_items[webkit].png and b/e2e_playwright/__snapshots__/linux/hostframe_app_test/hostframe_app-toolbar_items[webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-chromium].png
new file mode 100644
index 000000000..9363a6151
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-firefox].png
new file mode 100644
index 000000000..2a73fcb65
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-webkit].png
new file mode 100644
index 000000000..653309e79
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[dark_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-chromium].png
new file mode 100644
index 000000000..14801c05c
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-firefox].png
new file mode 100644
index 000000000..b085ae9a8
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-webkit].png
new file mode 100644
index 000000000..5c7e4e550
Binary files /dev/null and b/e2e_playwright/__snapshots__/linux/st_color_picker_test/st_color_picker-popover[light_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-chromium].png
index 8072b91dc..49bcc1c28 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-chromium].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-firefox].png
index 451353e0e..c78b47af2 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-firefox].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-webkit].png
index 317cad939..70704a3c4 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-webkit].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[dark_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-chromium].png
index a26fca82a..6644bbcfd 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-chromium].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-firefox].png
index d6a2014f4..acf2744bb 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-firefox].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-webkit].png
index 6027ef979..51b03de2c 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-webkit].png and b/e2e_playwright/__snapshots__/linux/st_sidebar_test/st_sidebar-date_popover[light_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-chromium].png
index fd2cf1fa0..349a8ab22 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-chromium].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-firefox].png
index 4d2ce8507..f89b322ce 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-firefox].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-webkit].png
index c4056e5d4..0eeaadae6 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-webkit].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[dark_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-chromium].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-chromium].png
index aa582f9fb..e5f8f3574 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-chromium].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-firefox].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-firefox].png
index 1d6859476..230e9cbd4 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-firefox].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-webkit].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-webkit].png
index 0ddd589b2..5b21cf80d 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-webkit].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-menu_colors[light_theme-webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[chromium].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[chromium].png
index b112d374c..eb386da2e 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[chromium].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[firefox].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[firefox].png
index 0c3219f93..4dd0f5be3 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[firefox].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[webkit].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[webkit].png
index 0f0e3ee4f..76e9b0063 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[webkit].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-selection_dropdown[webkit].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[chromium].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[chromium].png
index 281f82881..7fb1a1cdb 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[chromium].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[chromium].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[firefox].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[firefox].png
index cf4d012f1..a20ab123f 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[firefox].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[firefox].png differ
diff --git a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[webkit].png b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[webkit].png
index 5055070a2..96e329d80 100644
Binary files a/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[webkit].png and b/e2e_playwright/__snapshots__/linux/st_time_input_test/st_time_input-step_60_dropdown[webkit].png differ
diff --git a/e2e_playwright/hostframe_app.py b/e2e_playwright/hostframe_app.py
index cb6ccc520..d2173c2ee 100644
--- a/e2e_playwright/hostframe_app.py
+++ b/e2e_playwright/hostframe_app.py
@@ -43,5 +43,7 @@ with st.sidebar:
 
 st.file_uploader("Upload a file")
 
+st.color_picker("Pick a color")
+
 # Allows for testing of script re-run / stop behavior
 time.sleep(3)
diff --git a/e2e_playwright/hostframe_app_test.py b/e2e_playwright/hostframe_app_test.py
index df55e3fb1..2e6066c04 100644
--- a/e2e_playwright/hostframe_app_test.py
+++ b/e2e_playwright/hostframe_app_test.py
@@ -251,3 +251,21 @@ def test_handles_host_terminate_and_restart_websocket_connection_messages(
     expect(frame_locator.get_by_test_id("stApp")).to_have_attribute(
         "data-test-script-state", "notRunning"
     )
+
+
+def test_color_picker_closes_without_security_error(iframed_app: IframedPage):
+    """
+    Our color picker component has a bug that causes a security error when
+    closing the color picker from an iframe with a different origin. See
+    `BaseColorPicker.tsx` for more details. This test verifies that the color
+    picker closes without causing a security error in an iframe.
+    """
+    frame_locator, _ = _load_html_and_get_locators(iframed_app)
+
+    # Open the color picker, then click somewhere else to close it.
+    frame_locator.get_by_test_id("stColorPickerBlock").click()
+    frame_locator.get_by_test_id("stMain").click()
+
+    # Wait a bit, then verify no error message is shown in the app.
+    iframed_app.page.wait_for_timeout(1000)
+    expect(frame_locator.get_by_test_id("stException")).not_to_be_attached()
diff --git a/e2e_playwright/st_color_picker_test.py b/e2e_playwright/st_color_picker_test.py
index fa59342b5..fc6e79b82 100644
--- a/e2e_playwright/st_color_picker_test.py
+++ b/e2e_playwright/st_color_picker_test.py
@@ -40,6 +40,18 @@ def test_color_picker_widget_display(
     assert_snapshot(color_pickers.nth(7), name="st_color_picker-markdown_label")
 
 
+def test_color_picker_popover_display(
+    themed_app: Page, assert_snapshot: ImageCompareFunction
+):
+    """Test that color picker popover renders correctly in both themes."""
+    color_pickers = themed_app.get_by_test_id("stColorPicker")
+    color_pickers.nth(0).get_by_test_id("stColorPickerBlock").click()
+
+    popover = themed_app.get_by_test_id("stColorPickerPopover")
+    expect(popover).to_be_visible()
+    assert_snapshot(popover, name="st_color_picker-popover")
+
+
 def test_help_tooltip_works(app: Page):
     element_with_help = app.get_by_test_id("stColorPicker").nth(1)
     expect_help_tooltip(app, element_with_help, "help string")
diff --git a/frontend/lib/src/components/shared/BaseColorPicker/BaseColorPicker.tsx b/frontend/lib/src/components/shared/BaseColorPicker/BaseColorPicker.tsx
index 0fc5d66f5..7290f7864 100644
--- a/frontend/lib/src/components/shared/BaseColorPicker/BaseColorPicker.tsx
+++ b/frontend/lib/src/components/shared/BaseColorPicker/BaseColorPicker.tsx
@@ -14,10 +14,12 @@
  * limitations under the License.
  */
 
-import React from "react"
+import React, { memo } from "react"
 
 import { StatefulPopover as UIPopover } from "baseui/popover"
 import { ChromePicker, ColorResult } from "react-color"
+import SaturationComponent from "react-color/es/components/common/Saturation"
+import { useTheme } from "@emotion/react"
 
 import {
   StyledWidgetLabelHelpInline,
@@ -26,7 +28,7 @@ import {
 import TooltipIcon from "@streamlit/lib/src/components/shared/TooltipIcon"
 import { Placement } from "@streamlit/lib/src/components/shared/Tooltip"
 import { LabelVisibilityOptions } from "@streamlit/lib/src/util/utils"
-import { logWarning } from "@streamlit/lib/src/util/log"
+import { EmotionTheme } from "@streamlit/lib/src/theme"
 
 import {
   StyledChromePicker,
@@ -36,6 +38,32 @@ import {
   StyledColorValue,
 } from "./styled-components"
 
+/* When closing the color picker popover, react-color triggers a security error
+ * if the app is in an iframe with a different origin. That security error shows up as
+ * an exception within the app and stops the app from working. This isn't a problem on
+ * Community Cloud anymore (because it uses same origin) but it can be in an
+ * embedded app or in Notebooks. We're applying this fix here to prevent that:
+ * https://github.com/uiwjs/react-color/issues/81#issuecomment-2208219820
+ */
+SaturationComponent.prototype.getContainerRenderWindow = function () {
+  const container = this.container
+  let renderWindow: Window & typeof globalThis = window
+  let lastRenderWindow: Window & typeof globalThis = window
+
+  try {
+    while (
+      !renderWindow.document.contains(container) &&
+      renderWindow.parent !== renderWindow
+    ) {
+      lastRenderWindow = renderWindow
+      renderWindow = renderWindow.parent as Window & typeof globalThis
+    }
+  } catch (e) {
+    renderWindow = lastRenderWindow
+  }
+  return renderWindow
+}
+
 export interface BaseColorPickerProps {
   disabled: boolean
   width?: number
@@ -47,113 +75,105 @@ export interface BaseColorPickerProps {
   help?: string
 }
 
-interface State {
-  /**
-   * The value specified by the user via the UI. If the user didn't touch this
-   * widget's UI, the default value is used.
-   */
-  value: string
-}
-
-class BaseColorPicker extends React.PureComponent<
-  BaseColorPickerProps,
-  State
-> {
-  public state: State = {
-    value: this.props.value,
-  }
+const BaseColorPicker = (props: BaseColorPickerProps): React.ReactElement => {
+  const {
+    disabled,
+    width,
+    value: propValue,
+    showValue,
+    label,
+    labelVisibility,
+    onChange,
+    help,
+  } = props
+  const [value, setValue] = React.useState(propValue)
+  const theme: EmotionTheme = useTheme()
 
-  public componentDidUpdate(prevProps: BaseColorPickerProps): void {
-    if (
-      prevProps.value !== this.props.value &&
-      this.props.value !== this.state.value
-    ) {
-      this.setState((_, prevProps) => {
-        return { value: prevProps.value }
-      })
-    }
-  }
+  // Reset the value when the prop value changes
+  React.useEffect(() => {
+    setValue(propValue)
+  }, [propValue])
 
   // Note: This is a "local" onChange handler used to update the color preview
   // (allowing the user to click and drag). this.props.onChange is only called
   // when the ColorPicker popover is closed.
-  private onColorChange = (color: ColorResult): void => {
-    this.setState({ value: color.hex })
-  }
+  const onColorChange = React.useCallback((color: ColorResult): void => {
+    setValue(color.hex)
+  }, [])
 
-  private onColorClose = (): void => {
-    this.props.onChange(this.state.value)
-  }
-
-  // eslint-disable-next-line class-methods-use-this
-  public componentDidCatch(error: Error): void {
-    if (error?.name === "SecurityError") {
-      // 2021.06.30 - on Streamlit Sharing, ColorPicker throws a cross-origin
-      // error when its popover window is closed. There's an issue open in the
-      // react-color repo https://github.com/casesandberg/react-color/issues/806 -
-      // but it's months old and hasn't had a developer response.
-      logWarning(
-        `Swallowing ColorPicker SecurityError '${error.name}: ${error.message}'`
-      )
+  const onColorClose = React.useCallback((): void => {
+    onChange(value)
+  }, [onChange, value])
 
-      // We force an update after this error, to re-mount the UIPopover -
-      // because the error sometimes cause it to be unmounted. This is an
-      // unfortunate hack.
-      this.forceUpdate()
-    } else {
-      throw error
-    }
+  const customChromePickerStyles = {
+    default: {
+      picker: {
+        borderRadius: theme.radii.default,
+        // Remove the box shadow from the color picker component since we're already
+        // applying a shadow to the popover that contains the color picker.
+        boxShadow: "none",
+        backgroundColor: theme.colors.bgColor,
+      },
+      saturation: {
+        borderRadius: `${theme.radii.default} ${theme.radii.default} 0 0`,
+        // Prevent text selection while the mouse is clicked to select a color. This
+        // can be annoying if you select a color and then move the mouse outside the
+        // color picker.
+        // We need the `as const` here to prevent a typing error (even though it
+        // also works correctly without it).
+        userSelect: "none" as const,
+      },
+      body: {
+        padding: theme.spacing.xl,
+      },
+    },
   }
 
-  public render(): React.ReactNode {
-    const { width, showValue, label, labelVisibility, help, disabled } =
-      this.props
-    const { value } = this.state
-
-    return (
-      <StyledColorPicker
-        className="stColorPicker"
-        data-testid="stColorPicker"
-        width={width}
+  return (
+    <StyledColorPicker
+      className="stColorPicker"
+      data-testid="stColorPicker"
+      width={width}
+      disabled={disabled}
+    >
+      <WidgetLabel
+        label={label}
         disabled={disabled}
+        labelVisibility={labelVisibility}
       >
-        <WidgetLabel
-          label={label}
-          disabled={disabled}
-          labelVisibility={labelVisibility}
-        >
-          {help && (
-            <StyledWidgetLabelHelpInline>
-              <TooltipIcon content={help} placement={Placement.TOP_RIGHT} />
-            </StyledWidgetLabelHelpInline>
-          )}
-        </WidgetLabel>
-        <UIPopover
-          onClose={this.onColorClose}
-          content={() => (
-            <StyledChromePicker data-testid="stColorPickerPopover">
-              <ChromePicker
-                color={value}
-                onChange={this.onColorChange}
-                disableAlpha={true}
-              />
-            </StyledChromePicker>
-          )}
-        >
-          <StyledColorPreview disabled={disabled}>
-            <StyledColorBlock
-              data-testid="stColorPickerBlock"
-              backgroundColor={value}
-              disabled={disabled}
+        {help && (
+          <StyledWidgetLabelHelpInline>
+            <TooltipIcon content={help} placement={Placement.TOP_RIGHT} />
+          </StyledWidgetLabelHelpInline>
+        )}
+      </WidgetLabel>
+      <UIPopover
+        onClose={onColorClose}
+        placement="bottomLeft"
+        content={() => (
+          <StyledChromePicker data-testid="stColorPickerPopover">
+            <ChromePicker
+              color={value}
+              onChange={onColorChange}
+              disableAlpha={true}
+              styles={customChromePickerStyles}
             />
-            {showValue && (
-              <StyledColorValue>{value.toUpperCase()}</StyledColorValue>
-            )}
-          </StyledColorPreview>
-        </UIPopover>
-      </StyledColorPicker>
-    )
-  }
+          </StyledChromePicker>
+        )}
+      >
+        <StyledColorPreview disabled={disabled}>
+          <StyledColorBlock
+            data-testid="stColorPickerBlock"
+            backgroundColor={value}
+            disabled={disabled}
+          />
+          {showValue && (
+            <StyledColorValue>{value.toUpperCase()}</StyledColorValue>
+          )}
+        </StyledColorPreview>
+      </UIPopover>
+    </StyledColorPicker>
+  )
 }
 
-export default BaseColorPicker
+export default memo(BaseColorPicker)
diff --git a/frontend/lib/src/components/shared/BaseColorPicker/styled-components.ts b/frontend/lib/src/components/shared/BaseColorPicker/styled-components.ts
index 00b70ec4d..ee85425fc 100644
--- a/frontend/lib/src/components/shared/BaseColorPicker/styled-components.ts
+++ b/frontend/lib/src/components/shared/BaseColorPicker/styled-components.ts
@@ -38,6 +38,29 @@ export const StyledChromePicker = styled.div(({ theme }) => ({
   div: {
     fontFamily: `${theme.genericFonts.bodyFont} !important`,
   },
+  // The overrides below are a bit hacky but unfortunately the ChromePicker component
+  // doesn't offer a way to override labels and inputs, see
+  // https://github.com/casesandberg/react-color/issues/643
+  label: {
+    fontSize: `${theme.fontSizes.sm} !important`,
+    color: `${theme.colors.bodyText} !important`,
+  },
+  input: {
+    fontSize: `${theme.fontSizes.md} !important`,
+    height: `${theme.sizes.minElementHeight} !important`,
+    backgroundColor: `${theme.colors.secondaryBg} !important`,
+    color: `${theme.colors.bodyText} !important`,
+    borderRadius: `${theme.radii.default} !important`,
+    boxShadow: `none !important`,
+    "&:focus-visible": {
+      outline: `${theme.sizes.borderWidth} solid ${theme.colors.primary} !important`,
+    },
+  },
+  svg: {
+    // This is the arrow button on the right. The hover color for the background is
+    // apparently set by JS and not CSS, so we can't override it.
+    fill: `${theme.colors.bodyText} !important`,
+  },
 }))
 
 export interface StyledColorPreviewProps {
diff --git a/frontend/lib/src/components/shared/Dropdown/VirtualDropdown.tsx b/frontend/lib/src/components/shared/Dropdown/VirtualDropdown.tsx
index ff37780ff..635af9ba9 100644
--- a/frontend/lib/src/components/shared/Dropdown/VirtualDropdown.tsx
+++ b/frontend/lib/src/components/shared/Dropdown/VirtualDropdown.tsx
@@ -73,6 +73,9 @@ const VirtualDropdown = React.forwardRef<any, any>((props, ref) => {
           display: "flex",
           alignItems: "center",
           justifyContent: "center",
+          // Somehow this adds an additional shadow, even though we already have
+          // one on the popover, so we need to remove it here.
+          boxShadow: "none",
         }}
         ref={ref}
         data-testid="stSelectboxVirtualDropdownEmpty"
@@ -99,7 +102,13 @@ const VirtualDropdown = React.forwardRef<any, any>((props, ref) => {
   return (
     <StyledList
       ref={ref}
-      $style={{ paddingTop: 0, paddingBottom: 0 }}
+      $style={{
+        paddingTop: 0,
+        paddingBottom: 0,
+        // Somehow this adds an additional shadow, even though we already have
+        // one on the popover, so we need to remove it here.
+        boxShadow: "none",
+      }}
       data-testid="stSelectboxVirtualDropdown"
     >
       <FixedSizeList
diff --git a/frontend/lib/src/components/widgets/DateInput/DateInput.tsx b/frontend/lib/src/components/widgets/DateInput/DateInput.tsx
index f7d0fdd87..be3cfc298 100644
--- a/frontend/lib/src/components/widgets/DateInput/DateInput.tsx
+++ b/frontend/lib/src/components/widgets/DateInput/DateInput.tsx
@@ -45,6 +45,7 @@ import {
 import TooltipIcon from "@streamlit/lib/src/components/shared/TooltipIcon"
 import { Placement } from "@streamlit/lib/src/components/shared/Tooltip"
 import { LibContext } from "@streamlit/lib/src/components/core/LibContext"
+import { EmotionTheme } from "@streamlit/lib/src/theme"
 
 import { useIntlLocale } from "./useIntlLocale"
 
@@ -79,6 +80,8 @@ function DateInput({
   width,
   fragmentId,
 }: Props): ReactElement {
+  const theme: EmotionTheme = useTheme()
+
   /**
    * An array with start and end date specified by the user via the UI. If the user
    * didn't touch this widget's UI, the default value is used. End date is optional.
@@ -204,7 +207,7 @@ function DateInput({
               overrides: {
                 Body: {
                   style: {
-                    border: `${sizes.borderWidth} solid ${colors.borderColor}`,
+                    marginTop: theme.spacing.px,
                   },
                 },
               },
diff --git a/frontend/lib/src/components/widgets/Multiselect/Multiselect.tsx b/frontend/lib/src/components/widgets/Multiselect/Multiselect.tsx
index 5a07cbb4c..68b041768 100644
--- a/frontend/lib/src/components/widgets/Multiselect/Multiselect.tsx
+++ b/frontend/lib/src/components/widgets/Multiselect/Multiselect.tsx
@@ -243,6 +243,17 @@ const Multiselect: FC<Props> = props => {
           filterOptions={filterOptions}
           closeOnSelect={false}
           overrides={{
+            Popover: {
+              props: {
+                overrides: {
+                  Body: {
+                    style: () => ({
+                      marginTop: theme.spacing.px,
+                    }),
+                  },
+                },
+              },
+            },
             SelectArrow: {
               component: ChevronDown,
               props: {
diff --git a/frontend/lib/src/components/widgets/TimeInput/TimeInput.tsx b/frontend/lib/src/components/widgets/TimeInput/TimeInput.tsx
index ab11650a2..345508ec7 100644
--- a/frontend/lib/src/components/widgets/TimeInput/TimeInput.tsx
+++ b/frontend/lib/src/components/widgets/TimeInput/TimeInput.tsx
@@ -116,6 +116,10 @@ function TimeInput({
             style: () => ({
               paddingTop: theme.spacing.none,
               paddingBottom: theme.spacing.none,
+              // Somehow this adds an additional shadow, even though we already have
+              // one on the popover, so we need to remove it here.
+              boxShadow: "none",
+              maxHeight: theme.sizes.maxDropdownHeight,
             }),
           },
 
diff --git a/frontend/lib/src/declarations.d.ts b/frontend/lib/src/declarations.d.ts
index bbd0b8baa..0d13d25f3 100644
--- a/frontend/lib/src/declarations.d.ts
+++ b/frontend/lib/src/declarations.d.ts
@@ -27,3 +27,14 @@ declare module "fzy.js" {
   export function positions(pattern: string, subject: string): Array<number>
   export function hasMatch(pattern: string, subject: string): boolean
 }
+
+// Type definition for an internal component in react-color. We need to override
+// some of it to fix a bug in the color picker that triggers a security error when
+// the color picker is closed in a cross-origin iframe, see `BaseColorPicker.tsx`.
+declare module "react-color/es/components/common/Saturation" {
+  import React from "react"
+  export default class Saturation extends React.Component<any, any> {
+    container: HTMLElement
+    getContainerRenderWindow(): Window & typeof globalThis
+  }
+}
