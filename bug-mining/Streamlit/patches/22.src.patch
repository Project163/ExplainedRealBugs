diff --git a/e2e/specs/st_multiselect.spec.js b/e2e/specs/st_multiselect.spec.js
index f11fc1b58..6b90337cc 100644
--- a/e2e/specs/st_multiselect.spec.js
+++ b/e2e/specs/st_multiselect.spec.js
@@ -172,7 +172,7 @@ describe("st.multiselect", () => {
           cy.get('.stMultiSelect span[data-baseweb="tag"] span:last-child')
             .eq(0)
             .click();
-          
+
           // this the 'close button' element for 'Shake.Vanilla'
           cy.get('.stMultiSelect span[data-baseweb="tag"] span:last-child')
             .eq(2)
diff --git a/lib/streamlit/scriptrunner/script_run_context.py b/lib/streamlit/scriptrunner/script_run_context.py
index d3e38914a..f70f8657a 100644
--- a/lib/streamlit/scriptrunner/script_run_context.py
+++ b/lib/streamlit/scriptrunner/script_run_context.py
@@ -53,6 +53,7 @@ class ScriptRunContext:
     _set_page_config_allowed: bool = True
     _has_script_started: bool = False
     widget_ids_this_run: Set[str] = field(default_factory=set)
+    widget_user_keys_this_run: Set[str] = field(default_factory=set)
     form_ids_this_run: Set[str] = field(default_factory=set)
     cursors: Dict[int, "streamlit.cursor.RunningCursor"] = field(default_factory=dict)
     dg_stack: List["streamlit.delta_generator.DeltaGenerator"] = field(
@@ -62,6 +63,7 @@ class ScriptRunContext:
     def reset(self, query_string: str = "", page_script_hash: str = "") -> None:
         self.cursors = {}
         self.widget_ids_this_run = set()
+        self.widget_user_keys_this_run = set()
         self.form_ids_this_run = set()
         self.query_string = query_string
         self.page_script_hash = page_script_hash
diff --git a/lib/streamlit/state/widgets.py b/lib/streamlit/state/widgets.py
index bb305f888..22088cc1b 100644
--- a/lib/streamlit/state/widgets.py
+++ b/lib/streamlit/state/widgets.py
@@ -191,6 +191,18 @@ def register_widget(
         # we're running as a "bare" Python script, and not via `streamlit run`).
         return RegisterWidgetResult.failure(deserializer=deserializer)
 
+    # Ensure another widget with the same user key hasn't already been registered.
+    if user_key is not None:
+        if user_key not in ctx.widget_user_keys_this_run:
+            ctx.widget_user_keys_this_run.add(user_key)
+        else:
+            raise DuplicateWidgetID(
+                _build_duplicate_widget_message(
+                    widget_func_name if widget_func_name is not None else element_type,
+                    user_key,
+                )
+            )
+
     # Ensure another widget with the same id hasn't already been registered.
     new_widget = widget_id not in ctx.widget_ids_this_run
     if new_widget:
diff --git a/lib/tests/streamlit/caching/common_cache_test.py b/lib/tests/streamlit/caching/common_cache_test.py
index 5ef99daa9..77b34522c 100644
--- a/lib/tests/streamlit/caching/common_cache_test.py
+++ b/lib/tests/streamlit/caching/common_cache_test.py
@@ -68,6 +68,8 @@ class CommonCacheTest(DeltaGeneratorTestCase):
         ctx = script_run_context.get_script_run_ctx()
         if ctx is not None:
             ctx.widget_ids_this_run.clear()
+            ctx.widget_user_keys_this_run.clear()
+
         super().tearDown()
 
     def get_text_delta_contents(self) -> List[str]:
diff --git a/lib/tests/streamlit/delta_generator_test.py b/lib/tests/streamlit/delta_generator_test.py
index 3f925b7e4..6c63d25dd 100644
--- a/lib/tests/streamlit/delta_generator_test.py
+++ b/lib/tests/streamlit/delta_generator_test.py
@@ -148,7 +148,7 @@ class DeltaGeneratorTest(testutil.DeltaGeneratorTestCase):
         self.assertEqual(c.type, "TypeError")
 
     def test_duplicate_widget_id_error(self):
-        """Multiple widgets with the same key should report an error."""
+        """Multiple widgets with the same generated key should report an error."""
         widgets = {
             "button": lambda key=None: st.button("", key=key),
             "checkbox": lambda key=None: st.checkbox("", key=key),
@@ -190,6 +190,55 @@ class DeltaGeneratorTest(testutil.DeltaGeneratorTestCase):
                 str(ctx.exception),
             )
 
+    def test_duplicate_widget_id_error_when_user_key_specified(self):
+        """Multiple widgets with the different generated key, but same user specified
+        key should report an error.
+        """
+
+        widgets = {
+            "button": lambda key=None, label="": st.button(label=label, key=key),
+            "checkbox": lambda key=None, label="": st.checkbox(label=label, key=key),
+            "multiselect": lambda key=None, label="": st.multiselect(
+                label=label, options=[1, 2], key=key
+            ),
+            "radio": lambda key=None, label="": st.radio(
+                label=label, options=[1, 2], key=key
+            ),
+            "selectbox": lambda key=None, label="": st.selectbox(
+                label=label, options=[1, 2], key=key
+            ),
+            "slider": lambda key=None, label="": st.slider(label=label, key=key),
+            "text_area": lambda key=None, label="": st.text_area(label=label, key=key),
+            "text_input": lambda key=None, label="": st.text_input(
+                label=label, key=key
+            ),
+            "time_input": lambda key=None, label="": st.time_input(
+                label=label, key=key
+            ),
+            "date_input": lambda key=None, label="": st.date_input(
+                label=label, key=key
+            ),
+            "number_input": lambda key=None, label="": st.number_input(
+                label=label, key=key
+            ),
+        }
+
+        for widget_type, create_widget in widgets.items():
+            user_key = widget_type
+            create_widget(label="LABEL_A", key=user_key)
+            with self.assertRaises(DuplicateWidgetID) as ctx:
+                # We specify different labels for widgets, so auto-generated keys
+                # (widget_ids) will be different.
+                # Test creating a widget with a different auto-generated key but same
+                # user specified key raises an exception.
+                create_widget(label="LABEL_B", key=user_key)
+            self.assertEqual(
+                _build_duplicate_widget_message(
+                    widget_func_name=widget_type, user_key=user_key
+                ),
+                str(ctx.exception),
+            )
+
 
 class DeltaGeneratorClassTest(testutil.DeltaGeneratorTestCase):
     """Test DeltaGenerator Class."""
