diff --git a/lib/streamlit/config.py b/lib/streamlit/config.py
index 3110b5ef7..5677a4f4d 100644
--- a/lib/streamlit/config.py
+++ b/lib/streamlit/config.py
@@ -745,6 +745,17 @@ def _server_headless() -> bool:
     )
 
 
+_create_option(
+    "server.showEmailPrompt",
+    description="""
+        Whether to show a terminal prompt for the user to enter their email
+        address when they run Streamlit for the first time. If you set
+        `server.headless=True`, Streamlit will not show this prompt.
+    """,
+    default_val=True,
+    type_=bool,
+)
+
 _create_option(
     "server.runOnSave",
     description="""
diff --git a/lib/streamlit/runtime/credentials.py b/lib/streamlit/runtime/credentials.py
index 6710ff63c..c835e85a1 100644
--- a/lib/streamlit/runtime/credentials.py
+++ b/lib/streamlit/runtime/credentials.py
@@ -23,7 +23,7 @@ import textwrap
 from typing import Final, NamedTuple, NoReturn, cast
 from uuid import uuid4
 
-from streamlit import cli_util, env_util, file_util, util
+from streamlit import cli_util, config, env_util, file_util, util
 from streamlit.logger import get_logger
 
 _LOGGER: Final = get_logger(__name__)
@@ -247,6 +247,8 @@ class Credentials:
                     "`streamlit activate reset` then `streamlit activate`"
                 )
         else:
+            if not config.get_option("server.showEmailPrompt"):
+                return
             activated = False
 
             while not activated:
diff --git a/lib/tests/streamlit/config_test.py b/lib/tests/streamlit/config_test.py
index 554363650..4f907ee61 100644
--- a/lib/tests/streamlit/config_test.py
+++ b/lib/tests/streamlit/config_test.py
@@ -544,6 +544,7 @@ class ConfigTest(unittest.TestCase):
                 "server.folderWatchList",
                 "server.folderWatchBlacklist",
                 "server.headless",
+                "server.showEmailPrompt",
                 "server.address",
                 "server.allowRunOnSave",
                 "server.port",
diff --git a/lib/tests/streamlit/web/cli_test.py b/lib/tests/streamlit/web/cli_test.py
index beb2af7ae..429889894 100644
--- a/lib/tests/streamlit/web/cli_test.py
+++ b/lib/tests/streamlit/web/cli_test.py
@@ -357,7 +357,89 @@ class CliTest(unittest.TestCase):
                 result = self.runner.invoke(cli, ["run", "file_name.py"])
 
             assert result.exit_code != 0
-            assert ("Collecting usage statistics" in result.output) == headless_mode
+            assert ("Collecting usage statistics" in result.output) == headless_mode, (
+                f"Telemetry message mode is {headless_mode} "
+                f"yet output is: {result.output}"
+            )
+
+    @parameterized.expand([(False, False), (False, True), (True, False), (True, True)])
+    def test_prompt_welcome_message(self, prompt_mode, headless_mode):
+        """If prompt is true, show a welcome prompt, unless headless."""
+
+        with testutil.patch_config_options(
+            {"server.showEmailPrompt": prompt_mode, "server.headless": headless_mode}
+        ):
+            with (
+                patch("streamlit.url_util.is_url", return_value=False),
+                patch("os.path.exists", return_value=True),
+                patch("streamlit.config.is_manually_set", return_value=False),
+                patch(
+                    "streamlit.runtime.credentials._check_credential_file_exists",
+                    return_value=False,
+                ),
+            ):
+                result = self.runner.invoke(cli, ["run", "file_name.py"])
+
+            assert result.exit_code != 0
+            assert (prompt_mode and not headless_mode) == (
+                "like to receive helpful onboarding emails, news, offers, promotions,"
+                in result.output
+            ), (
+                f"Welcome message mode is {prompt_mode} "
+                f"and headless mode is {headless_mode} "
+                f"yet output is: {result.output}"
+            )
+
+    def test_streamlit_folder_not_created_when_show_email_prompt_false(self):
+        """Test that ~/.streamlit directory is not created when server.showEmailPrompt=False."""
+        with testutil.patch_config_options(
+            {"server.showEmailPrompt": False, "server.headless": False}
+        ):
+            with (
+                patch("streamlit.url_util.is_url", return_value=False),
+                patch("os.path.exists", return_value=True),
+                patch("streamlit.config.is_manually_set", return_value=False),
+                patch(
+                    "streamlit.runtime.credentials._check_credential_file_exists",
+                    return_value=False,
+                ),
+                patch("streamlit.runtime.credentials.os.makedirs") as mock_makedirs,
+                patch("streamlit.web.bootstrap.run"),
+            ):
+                result = self.runner.invoke(cli, ["run", "file_name.py"])
+
+            # Assert that makedirs was never called to create ~/.streamlit directory
+            mock_makedirs.assert_not_called()
+            assert result.exit_code != 0
+
+    def test_streamlit_folder_created_when_show_email_prompt_true(self):
+        """Test that ~/.streamlit directory is created when server.showEmailPrompt=True."""
+        with testutil.patch_config_options(
+            {"server.showEmailPrompt": True, "server.headless": False}
+        ):
+            with (
+                patch("streamlit.url_util.is_url", return_value=False),
+                patch("os.path.exists", return_value=True),
+                patch("streamlit.config.is_manually_set", return_value=False),
+                patch(
+                    "streamlit.runtime.credentials._check_credential_file_exists",
+                    return_value=False,
+                ),
+                patch("streamlit.runtime.credentials.os.makedirs") as mock_makedirs,
+                patch("streamlit.web.bootstrap.run"),
+                patch("click.prompt", return_value="test@example.com") as mock_prompt,
+                patch(
+                    "streamlit.runtime.credentials.open", mock.mock_open(), create=True
+                ),
+                patch("streamlit.runtime.credentials._send_email"),
+            ):
+                result = self.runner.invoke(cli, ["run", "file_name.py"])
+
+            # Assert that makedirs was called to create ~/.streamlit directory
+            mock_makedirs.assert_called_once()
+            # Assert that the email prompt was shown
+            mock_prompt.assert_called_once()
+            assert result.exit_code == 0
 
     def test_help_command(self):
         """Tests the help command redirects to using the --help flag"""
