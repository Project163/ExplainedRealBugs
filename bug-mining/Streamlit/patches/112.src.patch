diff --git a/lib/streamlit/delta_generator.py b/lib/streamlit/delta_generator.py
index a3e562503..f6bbf2ecd 100644
--- a/lib/streamlit/delta_generator.py
+++ b/lib/streamlit/delta_generator.py
@@ -487,6 +487,10 @@ class DeltaGenerator(
                 cursor=new_cursor,
                 parent=dg,
             )
+
+            # Elements inherit their parent form ids.
+            # NOTE: Form ids aren't set in dg constructor.
+            output_dg._form_data = FormData(current_form_id(dg))
         else:
             # If the message was not enqueued, just return self since it's a
             # no-op from the point of view of the app.
diff --git a/lib/tests/streamlit/form_test.py b/lib/tests/streamlit/form_test.py
index 737f03567..73f9da820 100644
--- a/lib/tests/streamlit/form_test.py
+++ b/lib/tests/streamlit/form_test.py
@@ -167,6 +167,26 @@ class FormAssociationTest(DeltaGeneratorTestCase):
 
         self.assertEqual("form", self._get_last_checkbox_form_id())
 
+    def test_widget_inside_dg_outside_form_it_was_created_in(self):
+        """Test that a widget belongs to a form if its DG was created inside a DG that was created inside a form."""
+
+        with st.form("form"):
+            empty = st.empty()
+
+        with empty:
+            st.checkbox("widget")
+
+        self.assertEqual("form", self._get_last_checkbox_form_id())
+
+    def test_widget_parent_parent_created_on_form(self):
+        """Test that a widget belongs to a form if its parent's parent was created inside a form."""
+
+        with st.form("form"):
+            e = st.empty()
+        e.empty().checkbox("widget")
+
+        self.assertEqual("form", self._get_last_checkbox_form_id())
+
 
 @patch("streamlit.runtime.Runtime.exists", MagicMock(return_value=True))
 class FormMarshallingTest(DeltaGeneratorTestCase):
