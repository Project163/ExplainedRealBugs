diff --git a/e2e_playwright/conftest.py b/e2e_playwright/conftest.py
index 9144fdb00..d3e19cff2 100644
--- a/e2e_playwright/conftest.py
+++ b/e2e_playwright/conftest.py
@@ -71,6 +71,9 @@ def pytest_configure(config: pytest.Config) -> None:
     config.addinivalue_line(
         "markers", "no_perf: mark test to not use performance profiling"
     )
+    config.addinivalue_line(
+        "markers", "app_hash(hash): mark test to open the app with a URL hash"
+    )
 
 
 def reorder_early_fixtures(metafunc: pytest.Metafunc) -> None:
@@ -293,11 +296,16 @@ def app_server(
 
 
 @pytest.fixture
-def app(page: Page, app_port: int) -> Page:
+def app(page: Page, app_port: int, request: pytest.FixtureRequest) -> Page:
     """Fixture that opens the app."""
+    marker = request.node.get_closest_marker("app_hash")
+    hash_fragment = ""
+    if marker:
+        hash_fragment = f"#{marker.args[0]}"
+
     response: Response | None = None
     try:
-        response = page.goto(f"http://localhost:{app_port}/")
+        response = page.goto(f"http://localhost:{app_port}/{hash_fragment}")
     except Exception as e:
         print(e, flush=True)
 
diff --git a/e2e_playwright/multipage_apps_v2/mpa_v2_anchors.py b/e2e_playwright/multipage_apps_v2/mpa_v2_anchors.py
new file mode 100644
index 000000000..e5c106c0f
--- /dev/null
+++ b/e2e_playwright/multipage_apps_v2/mpa_v2_anchors.py
@@ -0,0 +1,50 @@
+# Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+import streamlit as st
+
+
+def page1():
+    st.title("Page1")
+
+    st.write("""
+      Instructions:
+
+      * Click the button below.
+      * A new tab will open (that's OK)
+      * The app in that tab should scroll down to 'My title 2'
+    """)
+    st.link_button("Open new tab", "/page2#my-title-2")
+
+
+def page2():
+    st.title("Page2")
+
+    st.header("My title 1")
+    for _ in range(30):
+        st.text("blah " * 100)
+
+    st.header("My title 2")
+    for _ in range(30):
+        st.text("blah " * 100)
+
+
+page = st.navigation(
+    [
+        st.Page(page1, title="Page1"),
+        st.Page(page2, title="Page2"),
+    ]
+)
+
+page.run()
diff --git a/e2e_playwright/multipage_apps_v2/mpa_v2_anchors_test.py b/e2e_playwright/multipage_apps_v2/mpa_v2_anchors_test.py
new file mode 100644
index 000000000..d12ee745f
--- /dev/null
+++ b/e2e_playwright/multipage_apps_v2/mpa_v2_anchors_test.py
@@ -0,0 +1,31 @@
+# Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+from playwright.sync_api import Page, expect
+
+
+def test_anchor_scrolling(app: Page):
+    """Test that anchor scrolling works correctly in multipage apps in a new
+    tab.
+    """
+    # The app opens in a new tab, so we need to wait for that new page
+    # to be created.
+    with app.context.expect_page() as new_page_info:
+        app.get_by_text("Open new tab").click()
+
+    new_page = new_page_info.value
+    new_page.wait_for_load_state()
+
+    # Assert that the app in the new tab scrolls to the header `My title 2`
+    expect(new_page.get_by_text("My title 2")).to_be_in_viewport()
diff --git a/e2e_playwright/st_markdown_test.py b/e2e_playwright/st_markdown_test.py
index 8f3135a40..ccf93aa17 100644
--- a/e2e_playwright/st_markdown_test.py
+++ b/e2e_playwright/st_markdown_test.py
@@ -12,6 +12,7 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
+import pytest
 from playwright.sync_api import Locator, Page, expect
 
 from e2e_playwright.conftest import ImageCompareFunction
@@ -281,3 +282,11 @@ def test_large_image_in_markdown(app: Page, assert_snapshot: ImageCompareFunctio
 def test_check_top_level_class(app: Page):
     """Check that the top level class is correctly set."""
     check_top_level_class(app, "stMarkdown")
+
+
+@pytest.mark.app_hash("bold-header1")
+def test_anchor_scrolling(app: Page):
+    """Test that anchor scrolling works correctly."""
+    # The app fixture navigates to http://localhost:{app_port}/#bold-header1
+    # which should scroll to the header.
+    expect(app.get_by_text("Bold header1")).to_be_in_viewport()
diff --git a/frontend/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown.tsx b/frontend/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown.tsx
index 8cb17e8c3..0f76f0c50 100644
--- a/frontend/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown.tsx
+++ b/frontend/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown.tsx
@@ -15,7 +15,6 @@
  */
 
 import React, {
-  createElement,
   CSSProperties,
   FC,
   FunctionComponent,
@@ -26,7 +25,6 @@ import React, {
   ReactNode,
   useCallback,
   useContext,
-  useEffect,
   useMemo,
   useState,
 } from "react"
@@ -64,7 +62,6 @@ import {
   getMarkdownBgColors,
   getMarkdownTextColors,
 } from "~lib/theme"
-import { LibContext } from "~lib/components/core/LibContext"
 import streamlitLogo from "~lib/assets/img/streamlit-logo/streamlit-mark-color.svg"
 
 import {
@@ -212,29 +209,9 @@ export const HeadingWithActionElements: FunctionComponent<
   const isInSidebar = useContext(IsSidebarContext)
   const isInDialog = useContext(IsDialogContext)
   const [elementId, setElementId] = useState(propsAnchor)
-  const [target, setTarget] = useState<HTMLElement | null>(null)
-
-  const { addScriptFinishedHandler, removeScriptFinishedHandler } =
-    useContext(LibContext)
-  const onScriptFinished = useCallback(() => {
-    if (target !== null) {
-      // wait a bit for everything on page to finish loading
-      window.setTimeout(() => {
-        scrollNodeIntoView(target)
-      }, 300)
-    }
-  }, [target])
-
-  useEffect(() => {
-    addScriptFinishedHandler(onScriptFinished)
-    return () => {
-      removeScriptFinishedHandler(onScriptFinished)
-    }
-  }, [addScriptFinishedHandler, removeScriptFinishedHandler, onScriptFinished])
 
   const ref = useCallback(
-    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.
-    (node: any) => {
+    (node: HTMLElement | null) => {
       if (node === null) {
         return
       }
@@ -243,7 +220,7 @@ export const HeadingWithActionElements: FunctionComponent<
       setElementId(anchor)
       const windowHash = window.location.hash.slice(1)
       if (windowHash && windowHash === anchor) {
-        setTarget(node)
+        scrollNodeIntoView(node)
       }
     },
     [propsAnchor]
@@ -259,19 +236,15 @@ export const HeadingWithActionElements: FunctionComponent<
   )
 
   const attributes = isInSidebarOrDialog ? {} : { ref, id: elementId }
+  const Tag = tag
   // We nest the action-elements (tooltip, link-icon) into the header element (e.g. h1),
   // so that it appears inline. For context: we also tried setting the h's display attribute to 'inline', but
   // then we would need to add padding to the outer container and fiddle with the vertical alignment.
-  const headerElementWithActions = createElement(
-    tag,
-    {
-      ...tagProps,
-      ...attributes,
-    },
-    <>
+  const headerElementWithActions = (
+    <Tag {...tagProps} {...attributes}>
       {children}
       {actionElements}
-    </>
+    </Tag>
   )
 
   // we don't want to apply styling, so return the "raw" header
