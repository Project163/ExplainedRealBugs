diff --git a/lib/streamlit/elements/arrow.py b/lib/streamlit/elements/arrow.py
index eec1d7f45..66738da7e 100644
--- a/lib/streamlit/elements/arrow.py
+++ b/lib/streamlit/elements/arrow.py
@@ -623,6 +623,7 @@ class ArrowMixin:
                 "dataframe",
                 user_key=key,
                 form_id=proto.form_id,
+                dg=self.dg,
                 data=proto.data,
                 width=width,
                 height=height,
diff --git a/lib/streamlit/elements/deck_gl_json_chart.py b/lib/streamlit/elements/deck_gl_json_chart.py
index 095ac8f21..1c49098b0 100644
--- a/lib/streamlit/elements/deck_gl_json_chart.py
+++ b/lib/streamlit/elements/deck_gl_json_chart.py
@@ -508,6 +508,7 @@ class PydeckMixin:
             pydeck_proto.id = compute_and_register_element_id(
                 "deck_gl_json_chart",
                 user_key=key,
+                dg=self.dg,
                 is_selection_activated=is_selection_activated,
                 selection_mode=selection_mode,
                 use_container_width=use_container_width,
diff --git a/lib/streamlit/elements/lib/utils.py b/lib/streamlit/elements/lib/utils.py
index 442ad7bc9..e718f5875 100644
--- a/lib/streamlit/elements/lib/utils.py
+++ b/lib/streamlit/elements/lib/utils.py
@@ -31,6 +31,7 @@ from streamlit import config
 from streamlit.errors import StreamlitDuplicateElementId, StreamlitDuplicateElementKey
 from streamlit.proto.ChatInput_pb2 import ChatInput
 from streamlit.proto.LabelVisibilityMessage_pb2 import LabelVisibilityMessage
+from streamlit.proto.RootContainer_pb2 import RootContainer
 from streamlit.runtime.scriptrunner_utils.script_run_context import (
     ScriptRunContext,
     get_script_run_ctx,
@@ -45,6 +46,8 @@ if TYPE_CHECKING:
     from builtins import ellipsis
     from collections.abc import Iterable
 
+    from streamlit.delta_generator import DeltaGenerator
+
 
 Key: TypeAlias = Union[str, int]
 
@@ -182,6 +185,7 @@ def compute_and_register_element_id(
     *,
     user_key: str | None,
     form_id: str | None,
+    dg: DeltaGenerator | None = None,
     **kwargs: SAFE_VALUES | Iterable[SAFE_VALUES],
 ) -> str:
     """Compute and register the ID for the given element.
@@ -212,6 +216,9 @@ def compute_and_register_element_id(
         The ID of the form that the element belongs to. `None` or empty string
         if the element doesn't belong to a form or doesn't support forms.
 
+    dg : DeltaGenerator | None
+        The DeltaGenerator of each element. `None` if the element is not a widget.
+
     kwargs : SAFE_VALUES | Iterable[SAFE_VALUES]
         The arguments to use to compute the element ID.
         The arguments must be stable, deterministic values.
@@ -229,6 +236,14 @@ def compute_and_register_element_id(
         # pages unique IDs.
         kwargs_to_use["active_script_hash"] = ctx.active_script_hash
 
+    if dg:
+        # If no key is provided and the widget element is inside the sidebar area
+        # add it to the kwargs
+        # allowing the same widget to be both in main area and sidebar.
+        active_dg_root_container = dg._active_dg._root_container
+        if active_dg_root_container == RootContainer.SIDEBAR and user_key is None:
+            kwargs_to_use["active_dg_root_container"] = str(active_dg_root_container)
+
     element_id = _compute_element_id(
         element_type,
         user_key,
diff --git a/lib/streamlit/elements/plotly_chart.py b/lib/streamlit/elements/plotly_chart.py
index c9176a356..2e028f98c 100644
--- a/lib/streamlit/elements/plotly_chart.py
+++ b/lib/streamlit/elements/plotly_chart.py
@@ -510,6 +510,7 @@ class PlotlyMixin:
             "plotly_chart",
             user_key=key,
             form_id=plotly_chart_proto.form_id,
+            dg=self.dg,
             plotly_spec=plotly_chart_proto.spec,
             plotly_config=plotly_chart_proto.config,
             selection_mode=selection_mode,
diff --git a/lib/streamlit/elements/vega_charts.py b/lib/streamlit/elements/vega_charts.py
index a130665ba..9091b2808 100644
--- a/lib/streamlit/elements/vega_charts.py
+++ b/lib/streamlit/elements/vega_charts.py
@@ -1947,6 +1947,7 @@ class VegaChartsMixin:
                 "arrow_vega_lite_chart",
                 user_key=key,
                 form_id=vega_lite_proto.form_id,
+                dg=self.dg,
                 vega_lite_spec=vega_lite_proto.spec,
                 # The data is either in vega_lite_proto.data.data
                 # or in a named dataset in vega_lite_proto.datasets
diff --git a/lib/streamlit/elements/widgets/audio_input.py b/lib/streamlit/elements/widgets/audio_input.py
index 5977747e9..c6cf0f9d9 100644
--- a/lib/streamlit/elements/widgets/audio_input.py
+++ b/lib/streamlit/elements/widgets/audio_input.py
@@ -236,6 +236,7 @@ class AudioInputMixin:
             "audio_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             help=help,
             width=width,
diff --git a/lib/streamlit/elements/widgets/button.py b/lib/streamlit/elements/widgets/button.py
index 335461836..2bae2074a 100644
--- a/lib/streamlit/elements/widgets/button.py
+++ b/lib/streamlit/elements/widgets/button.py
@@ -818,6 +818,7 @@ class ButtonMixin:
             user_key=key,
             # download_button is not allowed to be used in a form.
             form_id=None,
+            dg=self.dg,
             label=label,
             icon=icon,
             file_name=file_name,
@@ -1009,6 +1010,7 @@ class ButtonMixin:
             user_key=key,
             # Only the
             form_id=form_id,
+            dg=self.dg,
             label=label,
             icon=icon,
             help=help,
diff --git a/lib/streamlit/elements/widgets/button_group.py b/lib/streamlit/elements/widgets/button_group.py
index f6918893b..60059138c 100644
--- a/lib/streamlit/elements/widgets/button_group.py
+++ b/lib/streamlit/elements/widgets/button_group.py
@@ -984,6 +984,7 @@ class ButtonGroupMixin:
             widget_name,
             user_key=key,
             form_id=form_id,
+            dg=self.dg,
             options=formatted_options,
             default=default,
             click_mode=parsed_selection_mode,
diff --git a/lib/streamlit/elements/widgets/camera_input.py b/lib/streamlit/elements/widgets/camera_input.py
index f3756690f..94f5eaca5 100644
--- a/lib/streamlit/elements/widgets/camera_input.py
+++ b/lib/streamlit/elements/widgets/camera_input.py
@@ -230,6 +230,7 @@ class CameraInputMixin:
             "camera_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             help=help,
             width=width,
diff --git a/lib/streamlit/elements/widgets/chat.py b/lib/streamlit/elements/widgets/chat.py
index 775f51fd3..4fec05c4e 100644
--- a/lib/streamlit/elements/widgets/chat.py
+++ b/lib/streamlit/elements/widgets/chat.py
@@ -596,6 +596,7 @@ class ChatMixin:
             user_key=key,
             # chat_input is not allowed to be used in a form.
             form_id=None,
+            dg=self.dg,
             placeholder=placeholder,
             max_chars=max_chars,
             accept_file=accept_file,
diff --git a/lib/streamlit/elements/widgets/checkbox.py b/lib/streamlit/elements/widgets/checkbox.py
index 055710e29..78143a8f5 100644
--- a/lib/streamlit/elements/widgets/checkbox.py
+++ b/lib/streamlit/elements/widgets/checkbox.py
@@ -307,6 +307,7 @@ class CheckboxMixin:
             "toggle" if type == CheckboxProto.StyleType.TOGGLE else "checkbox",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=bool(value),
             help=help,
diff --git a/lib/streamlit/elements/widgets/color_picker.py b/lib/streamlit/elements/widgets/color_picker.py
index 3b9debb5d..2e63c7882 100644
--- a/lib/streamlit/elements/widgets/color_picker.py
+++ b/lib/streamlit/elements/widgets/color_picker.py
@@ -195,6 +195,7 @@ class ColorPickerMixin:
             "color_picker",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=str(value),
             help=help,
diff --git a/lib/streamlit/elements/widgets/data_editor.py b/lib/streamlit/elements/widgets/data_editor.py
index de1df170e..b6ad1b83a 100644
--- a/lib/streamlit/elements/widgets/data_editor.py
+++ b/lib/streamlit/elements/widgets/data_editor.py
@@ -933,6 +933,7 @@ class DataEditorMixin:
             "data_editor",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             data=arrow_bytes,
             width=width,
             height=height,
diff --git a/lib/streamlit/elements/widgets/file_uploader.py b/lib/streamlit/elements/widgets/file_uploader.py
index 97e333e14..a8c111227 100644
--- a/lib/streamlit/elements/widgets/file_uploader.py
+++ b/lib/streamlit/elements/widgets/file_uploader.py
@@ -441,6 +441,7 @@ class FileUploaderMixin:
             "file_uploader",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             type=type,
             accept_multiple_files=accept_multiple_files,
diff --git a/lib/streamlit/elements/widgets/multiselect.py b/lib/streamlit/elements/widgets/multiselect.py
index 04214f6cf..f4b3e68a8 100644
--- a/lib/streamlit/elements/widgets/multiselect.py
+++ b/lib/streamlit/elements/widgets/multiselect.py
@@ -449,6 +449,7 @@ class MultiSelectMixin:
             widget_name,
             user_key=key,
             form_id=form_id,
+            dg=self.dg,
             label=label,
             options=formatted_options,
             default=default_values,
diff --git a/lib/streamlit/elements/widgets/number_input.py b/lib/streamlit/elements/widgets/number_input.py
index 5c39f8abb..3f4eaac11 100644
--- a/lib/streamlit/elements/widgets/number_input.py
+++ b/lib/streamlit/elements/widgets/number_input.py
@@ -443,6 +443,7 @@ class NumberInputMixin:
             "number_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             min_value=min_value,
             max_value=max_value,
diff --git a/lib/streamlit/elements/widgets/radio.py b/lib/streamlit/elements/widgets/radio.py
index 1b7ef3863..4f55b978a 100644
--- a/lib/streamlit/elements/widgets/radio.py
+++ b/lib/streamlit/elements/widgets/radio.py
@@ -341,6 +341,7 @@ class RadioMixin:
             "radio",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             options=[str(format_func(option)) for option in opt],
             index=index,
diff --git a/lib/streamlit/elements/widgets/select_slider.py b/lib/streamlit/elements/widgets/select_slider.py
index 5d4cc9f59..7e419ea7f 100644
--- a/lib/streamlit/elements/widgets/select_slider.py
+++ b/lib/streamlit/elements/widgets/select_slider.py
@@ -370,6 +370,7 @@ class SelectSliderMixin:
             "select_slider",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             options=[str(format_func(option)) for option in opt],
             value=slider_value,
diff --git a/lib/streamlit/elements/widgets/selectbox.py b/lib/streamlit/elements/widgets/selectbox.py
index d5f3ef706..a70d53936 100644
--- a/lib/streamlit/elements/widgets/selectbox.py
+++ b/lib/streamlit/elements/widgets/selectbox.py
@@ -519,6 +519,7 @@ class SelectboxMixin:
             "selectbox",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             options=formatted_options,
             index=index,
diff --git a/lib/streamlit/elements/widgets/slider.py b/lib/streamlit/elements/widgets/slider.py
index 8b97194fe..50e51e802 100644
--- a/lib/streamlit/elements/widgets/slider.py
+++ b/lib/streamlit/elements/widgets/slider.py
@@ -674,6 +674,7 @@ class SliderMixin:
             "slider",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             min_value=min_value,
             max_value=max_value,
diff --git a/lib/streamlit/elements/widgets/text_widgets.py b/lib/streamlit/elements/widgets/text_widgets.py
index 43e812176..cb3f1d90a 100644
--- a/lib/streamlit/elements/widgets/text_widgets.py
+++ b/lib/streamlit/elements/widgets/text_widgets.py
@@ -317,6 +317,7 @@ class TextWidgetsMixin:
             "text_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=value,
             max_chars=max_chars,
@@ -621,6 +622,7 @@ class TextWidgetsMixin:
             "text_area",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=value,
             height=height,
diff --git a/lib/streamlit/elements/widgets/time_widgets.py b/lib/streamlit/elements/widgets/time_widgets.py
index 84543a659..91dc37337 100644
--- a/lib/streamlit/elements/widgets/time_widgets.py
+++ b/lib/streamlit/elements/widgets/time_widgets.py
@@ -523,6 +523,7 @@ class TimeWidgetsMixin:
             "time_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=parsed_time if isinstance(value, (datetime, time)) else value,
             help=help,
@@ -909,6 +910,7 @@ class TimeWidgetsMixin:
             "date_input",
             user_key=key,
             form_id=current_form_id(self.dg),
+            dg=self.dg,
             label=label,
             value=parsed,
             min_value=parsed_min_date,
diff --git a/lib/tests/streamlit/element_mocks.py b/lib/tests/streamlit/element_mocks.py
index c648db7d5..042a233f5 100644
--- a/lib/tests/streamlit/element_mocks.py
+++ b/lib/tests/streamlit/element_mocks.py
@@ -151,7 +151,6 @@ WIDGET_ELEMENTS: list[tuple[str, ELEMENT_PRODUCER]] = [
                 ],
             ),
             use_container_width=True,
-            key="mocked_pydeck_chart",
             on_select="rerun",
             selection_mode="single-object",
         ),
diff --git a/lib/tests/streamlit/runtime/state/widgets_test.py b/lib/tests/streamlit/runtime/state/widgets_test.py
index b4a62bd29..b9d18758e 100644
--- a/lib/tests/streamlit/runtime/state/widgets_test.py
+++ b/lib/tests/streamlit/runtime/state/widgets_test.py
@@ -357,7 +357,7 @@ class ComputeElementIdTests(DeltaGeneratorTestCase):
 
         # Add some kwargs that are passed to compute element ID
         # but don't appear in widget signatures.
-        for kwarg in ["form_id", "user_key"]:
+        for kwarg in ["form_id", "user_key", "dg"]:
             kwargs[kwarg] = ANY
 
         return kwargs
@@ -430,6 +430,17 @@ class ComputeElementIdTests(DeltaGeneratorTestCase):
         with pytest.raises(errors.DuplicateWidgetID):
             widget_func()
 
+    @parameterized.expand(WIDGET_ELEMENTS)
+    def test_not_triggers_duplicate_id_error(self, _element_name: str, widget_func):
+        """
+        Test that duplicate ID error is not raised if the same widget is
+        both in the main and sidebar area.
+        """
+        with st.container():
+            widget_func()
+        with st.sidebar:
+            widget_func()
+
     @parameterized.expand(
         [
             (st.camera_input, "camera_input"),
