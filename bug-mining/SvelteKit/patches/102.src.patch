diff --git a/.changeset/witty-ads-wave.md b/.changeset/witty-ads-wave.md
new file mode 100644
index 000000000..baac9a95b
--- /dev/null
+++ b/.changeset/witty-ads-wave.md
@@ -0,0 +1,5 @@
+---
+'@sveltejs/kit': patch
+---
+
+Fix route sorting with groups
diff --git a/packages/kit/src/core/sync/create_manifest_data/index.js b/packages/kit/src/core/sync/create_manifest_data/index.js
index a55c8ceed..ca4a48c8b 100644
--- a/packages/kit/src/core/sync/create_manifest_data/index.js
+++ b/packages/kit/src/core/sync/create_manifest_data/index.js
@@ -109,23 +109,25 @@ function create_routes_and_nodes(cwd, config, fallback) {
 
 			segment_map.set(
 				id,
-				segments.filter(Boolean).map((segment) => {
-					/** @type {import('./types').Part[]} */
-					const parts = [];
-					segment.split(/\[(.+?)\]/).map((content, i) => {
-						const dynamic = !!(i % 2);
-
-						if (!content) return;
-
-						parts.push({
-							content,
-							dynamic,
-							rest: dynamic && content.startsWith('...'),
-							type: (dynamic && content.split('=')[1]) || null
+				segments
+					.filter((segment) => segment !== '' && affects_path(segment))
+					.map((segment) => {
+						/** @type {import('./types').Part[]} */
+						const parts = [];
+						segment.split(/\[(.+?)\]/).map((content, i) => {
+							const dynamic = !!(i % 2);
+
+							if (!content) return;
+
+							parts.push({
+								content,
+								dynamic,
+								rest: dynamic && content.startsWith('...'),
+								type: (dynamic && content.split('=')[1]) || null
+							});
 						});
-					});
-					return parts;
-				})
+						return parts;
+					})
 			);
 
 			/** @type {import('types').RouteData} */
diff --git a/packages/kit/src/core/sync/create_manifest_data/index.spec.js b/packages/kit/src/core/sync/create_manifest_data/index.spec.js
index 4d2596e23..f1a863077 100644
--- a/packages/kit/src/core/sync/create_manifest_data/index.spec.js
+++ b/packages/kit/src/core/sync/create_manifest_data/index.spec.js
@@ -213,7 +213,10 @@ test('sorts routes correctly', () => {
 		routes.map((p) => p.id),
 		[
 			'',
+			'(foo)',
+			'(foo)/(bar)',
 			'about',
+			'foo',
 			'post',
 			'post/bar',
 			'post/foo',
@@ -221,6 +224,7 @@ test('sorts routes correctly', () => {
 			'post/f[zz]',
 			'post/f[xx]',
 			'post/f[yy]',
+			'foo/[bar]',
 			'post/[id]',
 			'[endpoint]',
 			'[wildcard]',
@@ -228,6 +232,7 @@ test('sorts routes correctly', () => {
 			'[...rest]/deep/[...deep_rest]',
 			'[...rest]/abc',
 			'[...rest]/deep',
+			'(foo)/(bar)/[...all]',
 			'[...anotherrest]',
 			'[...rest]'
 		]
@@ -502,36 +507,31 @@ test('creates routes with named layouts', () => {
 	]);
 
 	assert.equal(routes.filter((route) => route.page).map(simplify_route), [
-		{
-			id: 'a/a1',
-			pattern: '/^/a/a1/?$/',
-			page: { layouts: [0, 4], errors: [1, undefined], leaf: 10 }
-		},
 		{
 			id: '(special)/a/a2',
 			pattern: '/^/a/a2/?$/',
 			page: { layouts: [0, 2], errors: [1, undefined], leaf: 9 }
 		},
 		{
-			id: 'b/c/c2',
-			pattern: '/^/b/c/c2/?$/',
-			page: { layouts: [0], errors: [1], leaf: 11 }
+			id: 'a/a1',
+			pattern: '/^/a/a1/?$/',
+			page: { layouts: [0, 4], errors: [1, undefined], leaf: 10 }
 		},
 		{
 			id: 'b/d/(special)',
 			pattern: '/^/b/d/?$/',
 			page: { layouts: [0, 6], errors: [1, undefined], leaf: 12 }
 		},
-		{
-			id: 'b/d/d1',
-			pattern: '/^/b/d/d1/?$/',
-			page: { layouts: [0], errors: [1], leaf: 15 }
-		},
 		{
 			id: '(special)/(alsospecial)/b/c/c1',
 			pattern: '/^/b/c/c1/?$/',
 			page: { layouts: [0, 2, 3], errors: [1, undefined, undefined], leaf: 8 }
 		},
+		{
+			id: 'b/c/c2',
+			pattern: '/^/b/c/c2/?$/',
+			page: { layouts: [0], errors: [1], leaf: 11 }
+		},
 		{
 			id: 'b/d/(special)/(extraspecial)/d2',
 			pattern: '/^/b/d/d2/?$/',
@@ -541,6 +541,11 @@ test('creates routes with named layouts', () => {
 			id: 'b/d/(special)/(extraspecial)/d3',
 			pattern: '/^/b/d/d3/?$/',
 			page: { layouts: [0, 6], errors: [1, undefined], leaf: 14 }
+		},
+		{
+			id: 'b/d/d1',
+			pattern: '/^/b/d/d1/?$/',
+			page: { layouts: [0], errors: [1], leaf: 15 }
 		}
 	]);
 });
diff --git a/packages/kit/src/core/sync/create_manifest_data/test/samples/sorting/(foo)/(bar)/[...all]/+page.svelte b/packages/kit/src/core/sync/create_manifest_data/test/samples/sorting/(foo)/(bar)/[...all]/+page.svelte
new file mode 100644
index 000000000..e69de29bb
diff --git a/packages/kit/src/core/sync/create_manifest_data/test/samples/sorting/foo/[bar]/+page.svelte b/packages/kit/src/core/sync/create_manifest_data/test/samples/sorting/foo/[bar]/+page.svelte
new file mode 100644
index 000000000..e69de29bb
