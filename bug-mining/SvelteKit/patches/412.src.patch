diff --git a/.changeset/silver-bats-invent.md b/.changeset/silver-bats-invent.md
new file mode 100644
index 000000000..1c7a2622b
--- /dev/null
+++ b/.changeset/silver-bats-invent.md
@@ -0,0 +1,5 @@
+---
+'@sveltejs/kit': patch
+---
+
+fix: precompress filter
diff --git a/package.json b/package.json
index e3c25ea37..8f82a9908 100644
--- a/package.json
+++ b/package.json
@@ -33,7 +33,6 @@
 		"prettier": "^2.8.0",
 		"rollup": "^3.7.0",
 		"svelte": "^3.56.0",
-		"tiny-glob": "^0.2.9",
 		"typescript": "^4.9.4"
 	},
 	"packageManager": "pnpm@8.6.3",
diff --git a/packages/kit/src/core/adapt/builder.js b/packages/kit/src/core/adapt/builder.js
index 84b8c2c3d..28735f706 100644
--- a/packages/kit/src/core/adapt/builder.js
+++ b/packages/kit/src/core/adapt/builder.js
@@ -1,5 +1,5 @@
 import { existsSync, statSync, createReadStream, createWriteStream } from 'node:fs';
-import { extname, join } from 'node:path/posix';
+import { extname, join, resolve } from 'node:path';
 import { pipeline } from 'node:stream';
 import { promisify } from 'node:util';
 import zlib from 'node:zlib';
@@ -12,7 +12,7 @@ import { write } from '../sync/utils.js';
 import { list_files } from '../utils.js';
 
 const pipe = promisify(pipeline);
-const extensions = ['html', 'js', 'mjs', 'json', 'css', 'svg', 'xml', 'wasm'];
+const extensions = ['.html', '.js', '.mjs', '.json', '.css', '.svg', '.xml', '.wasm'];
 
 /**
  * Creates the Builder which is passed to adapters for building the application.
@@ -84,9 +84,12 @@ export function create_builder({
 				return;
 			}
 
-			const files = list_files(directory, (file) => extensions.includes(extname(file)));
+			const files = list_files(directory, (file) => extensions.includes(extname(file))).map(
+				(file) => resolve(directory, file)
+			);
+
 			await Promise.all(
-				files.map((file) => Promise.all([compress_file(file, 'gz'), compress_file(file, 'br')]))
+				files.flatMap((file) => [compress_file(file, 'gz'), compress_file(file, 'br')])
 			);
 		},
 
diff --git a/packages/kit/src/core/adapt/builder.spec.js b/packages/kit/src/core/adapt/builder.spec.js
index 483e9fffc..0b69433d8 100644
--- a/packages/kit/src/core/adapt/builder.spec.js
+++ b/packages/kit/src/core/adapt/builder.spec.js
@@ -1,10 +1,10 @@
-import { rmSync } from 'node:fs';
-import { join } from 'node:path';
+import { existsSync, rmSync } from 'node:fs';
+import { join, dirname } from 'node:path';
 import { fileURLToPath } from 'node:url';
-import { expect, test } from 'vitest';
-import glob from 'tiny-glob/sync.js';
+import { assert, expect, test } from 'vitest';
 import { create_builder } from './builder.js';
 import { posixify } from '../../utils/filesystem.js';
+import { list_files } from '../utils.js';
 
 const __filename = fileURLToPath(import.meta.url);
 const __dirname = join(__filename, '..');
@@ -46,23 +46,27 @@ test('copy files', () => {
 
 	rmSync(dest, { recursive: true, force: true });
 
-	expect(builder.writeClient(dest)).toEqual(
-		glob('**', { cwd: dest, dot: true, filesOnly: true }).map(posixify)
-	);
-
-	expect(glob('**', { cwd: `${outDir}/output/client`, dot: true })).toEqual(
-		glob('**', { cwd: dest, dot: true })
-	);
+	expect(builder.writeClient(dest)).toEqual(list_files(dest).map(posixify));
+	expect(list_files(`${outDir}/output/client`)).toEqual(list_files(dest));
 
 	rmSync(dest, { recursive: true, force: true });
 
-	expect(builder.writeServer(dest)).toEqual(
-		glob('**', { cwd: dest, dot: true, filesOnly: true }).map(posixify)
-	);
-
-	expect(glob('**', { cwd: `${outDir}/output/server`, dot: true })).toEqual(
-		glob('**', { cwd: dest, dot: true })
-	);
+	expect(builder.writeServer(dest)).toEqual(list_files(dest).map(posixify));
+	expect(list_files(`${outDir}/output/server`)).toEqual(list_files(dest));
 
 	rmSync(dest, { force: true, recursive: true });
 });
+
+test('compress files', async () => {
+	// @ts-expect-error - we don't need the whole config for this test
+	const builder = create_builder({
+		route_data: []
+	});
+
+	const target = fileURLToPath(new URL('./fixtures/compress/foo.css', import.meta.url));
+	rmSync(target + '.br', { force: true });
+	rmSync(target + '.gz', { force: true });
+	await builder.compress(dirname(target));
+	assert.ok(existsSync(target + '.br'));
+	assert.ok(existsSync(target + '.gz'));
+});
diff --git a/packages/kit/src/core/adapt/fixtures/.gitignore b/packages/kit/src/core/adapt/fixtures/.gitignore
new file mode 100644
index 000000000..463dd18ca
--- /dev/null
+++ b/packages/kit/src/core/adapt/fixtures/.gitignore
@@ -0,0 +1,2 @@
+compress/*.br
+compress/*.gz
diff --git a/packages/kit/src/core/adapt/fixtures/compress/foo.css b/packages/kit/src/core/adapt/fixtures/compress/foo.css
new file mode 100644
index 000000000..e69de29bb
diff --git a/pnpm-lock.yaml b/pnpm-lock.yaml
index b979ea385..d2cf06c1f 100644
--- a/pnpm-lock.yaml
+++ b/pnpm-lock.yaml
@@ -53,9 +53,6 @@ importers:
       svelte:
         specifier: ^3.56.0
         version: 3.56.0
-      tiny-glob:
-        specifier: ^0.2.9
-        version: 0.2.9
       typescript:
         specifier: ^4.9.4
         version: 4.9.4
