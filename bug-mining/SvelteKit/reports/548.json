{"url":"https://api.github.com/repos/sveltejs/kit/issues/14325","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/14325/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/14325/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/14325/events","html_url":"https://github.com/sveltejs/kit/issues/14325","id":3358716261,"node_id":"I_kwDOEiPr8c7IMfFl","number":14325,"title":"Remote Functions: `Cannot call a command during server-side rendering` when calling a command from an API endpoint","user":{"login":"MAttila42","id":65223119,"node_id":"MDQ6VXNlcjY1MjIzMTE5","avatar_url":"https://avatars.githubusercontent.com/u/65223119?v=4","gravatar_id":"","url":"https://api.github.com/users/MAttila42","html_url":"https://github.com/MAttila42","followers_url":"https://api.github.com/users/MAttila42/followers","following_url":"https://api.github.com/users/MAttila42/following{/other_user}","gists_url":"https://api.github.com/users/MAttila42/gists{/gist_id}","starred_url":"https://api.github.com/users/MAttila42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MAttila42/subscriptions","organizations_url":"https://api.github.com/users/MAttila42/orgs","repos_url":"https://api.github.com/users/MAttila42/repos","events_url":"https://api.github.com/users/MAttila42/events{/privacy}","received_events_url":"https://api.github.com/users/MAttila42/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-08-27T09:38:11Z","updated_at":"2025-09-11T01:34:38Z","closed_at":"2025-09-11T01:34:38Z","author_association":"NONE","type":{"id":4885414,"node_id":"IT_kwDOAWhhq84ASoum","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-29T23:39:46Z","updated_at":"2024-07-26T11:19:25Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen calling a [command](https://svelte.dev/docs/kit/remote-functions#command) from an API endpoint, the server throws a 500 error with the message `Cannot call a command during server-side rendering`, even when ssr is set to false!\n\nCalling a [query](https://svelte.dev/docs/kit/remote-functions#query) works fine!\n\n### Reproduction\n\n[https://github.com/MAttila42/cannot-call-command-repro](https://github.com/MAttila42/cannot-call-command-repro)\n\nEndpoints made in the repro:\n`GET http://localhost:5173/api/data` (works as intended)\n`POST http://localhost:5173/api/data` (throws the error mentioned)\n`POST http://localhost:5173/api/data/alternative` (first alternative - having the logic in a separate server function)\n`POST http://localhost:5173/api/data/alternative2` (second alternative - only using query functions)\n\nThe POST requests need a body like this:\n```json\n{\n    \"title\": \"test\"\n}\n```\n\n### Logs\n\n```Shell\n[500] POST /api/data\nError: Cannot call a command (`addData(...)`) during server-side rendering\n    at wrapper (node_modules\\@sveltejs\\kit\\src\\runtime\\app\\server\\remote\\command.js:68:10)\n    at POST (src\\routes\\api\\data\\+server.ts:12:9)\n```\n\n### System Info\n\n```Shell\nSystem:\n    OS: Windows 11 10.0.26100\n    CPU: (16) x64 12th Gen Intel(R) Core(TM) i7-12650H\n    Memory: 2.76 GB / 15.63 GB\n  Binaries (bun used):\n    Node: 24.6.0 - C:\\Program Files\\nodejs\\node.EXE\n    npm: 11.5.1 - C:\\Program Files\\nodejs\\npm.CMD\n    pnpm: 10.11.0 - ~\\AppData\\Roaming\\npm\\pnpm.CMD\n    bun: 1.2.20 - ~\\AppData\\Roaming\\npm\\bun.CMD\n  Browsers (none used):\n    Edge: Chromium (139.0.3405.111)\n    Internet Explorer: 11.0.26100.1882\n  npmPackages:\n    @sveltejs/adapter-auto: ^6.1.0 => 6.1.0 \n    @sveltejs/kit: ^2.36.3 => 2.36.3 \n    @sveltejs/vite-plugin-svelte: ^6.1.3 => 6.1.3 \n    svelte: ^5.38.5 => 5.38.5 \n    vite: ^7.1.3 => 7.1.3\n```\n\n### Severity\n\nblocking an upgrade\n\n### Additional Information\n\nThe reason why I'm doing this is because my project's not only present on the web, but also has an app counterpart. Following [Rich Harris' advice](https://github.com/sveltejs/kit/discussions/13897#discussioncomment-13531998) I exposed a public endpoint that calls my remote functions.","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/14325/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/14325/timeline","performed_via_github_app":null,"state_reason":"completed"}