{"url":"https://api.github.com/repos/sveltejs/kit/issues/5465","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/5465/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/5465/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/5465/events","html_url":"https://github.com/sveltejs/kit/issues/5465","id":1301107050,"node_id":"I_kwDOEiPr8c5NjVFq","number":5465,"title":"Can't build if the base is changed","user":{"login":"NatoBoram","id":10495562,"node_id":"MDQ6VXNlcjEwNDk1NTYy","avatar_url":"https://avatars.githubusercontent.com/u/10495562?v=4","gravatar_id":"","url":"https://api.github.com/users/NatoBoram","html_url":"https://github.com/NatoBoram","followers_url":"https://api.github.com/users/NatoBoram/followers","following_url":"https://api.github.com/users/NatoBoram/following{/other_user}","gists_url":"https://api.github.com/users/NatoBoram/gists{/gist_id}","starred_url":"https://api.github.com/users/NatoBoram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NatoBoram/subscriptions","organizations_url":"https://api.github.com/users/NatoBoram/orgs","repos_url":"https://api.github.com/users/NatoBoram/repos","events_url":"https://api.github.com/users/NatoBoram/events{/privacy}","received_events_url":"https://api.github.com/users/NatoBoram/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-07-11T19:06:51Z","updated_at":"2022-07-20T14:52:22Z","closed_at":"2022-07-20T14:52:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nIt doesn't seem possible to build the project if the base is different from `/`.\r\n\r\n```javascript\r\n/** @type {import('@sveltejs/kit').Config} */\r\nconst config = {\r\n\tpreprocess: preprocess(),\r\n\tkit: {\r\n\t\tadapter: adapter(),\r\n\t\tpaths: {\r\n\t\t\tbase: '/second-base'\r\n\t\t}\r\n\t}\r\n};\r\n```\r\n\r\n### Reproduction\r\n\r\nhttps://stackblitz.com/edit/sveltejs-kit-template-default-e2xkzk?file=svelte.config.js\r\n\r\n### Logs\r\n\r\n```shell\r\n❯ npm run build\r\n$ vite build\r\nvite v2.9.14 building for production...\r\n✓ 34 modules transformed.\r\n.svelte-kit/output/client/_app/immutable/assets/svelte-logo-87df40b8.svg                           1.85 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-cyrillic-ext-400-normal-3df7909e.woff2   15.40 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-cyrillic-400-normal-c7d433fd.woff2       8.89 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-greek-ext-400-normal-9e2fe623.woff2      7.33 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-greek-400-normal-a8be01ce.woff2          10.27 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-latin-ext-400-normal-6bfabd30.woff2      11.10 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-latin-400-normal-e43b3538.woff2          15.90 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/fira-mono-all-400-normal-1e3b098c.woff             75.55 KiB\r\n.svelte-kit/output/client/_app/manifest.json                                                       2.88 KiB\r\n.svelte-kit/output/client/_app/immutable/start-a1c478ce.js                                         23.46 KiB / gzip: 8.75 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/__layout.svelte-f4106418.js                         4.78 KiB / gzip: 1.87 KiB\r\n.svelte-kit/output/client/_app/immutable/error.svelte-3108b229.js                                  1.56 KiB / gzip: 0.75 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/about.svelte-b7b8ad3b.js                            2.51 KiB / gzip: 1.15 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/index.svelte-f3865f05.js                            5.47 KiB / gzip: 2.43 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/todos/index.svelte-1522aaac.js                      6.86 KiB / gzip: 2.88 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/index-8cfcc69b.js                                  11.81 KiB / gzip: 5.03 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/index-26741719.js                                  0.43 KiB / gzip: 0.30 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/singletons-cdeec3fd.js                             0.05 KiB / gzip: 0.07 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/pages/__layout.svelte-45a60d7c.css                 5.22 KiB / gzip: 1.56 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/pages/about.svelte-bf4528fa.css                    0.11 KiB / gzip: 0.10 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/pages/index.svelte-e12bfb09.css                    1.45 KiB / gzip: 0.52 KiB\r\n.svelte-kit/output/client/_app/immutable/assets/pages/todos/index.svelte-a910a02d.css              3.70 KiB / gzip: 1.03 KiB\r\nvite v2.9.14 building SSR bundle for production...\r\n✓ 35 modules transformed.\r\n.svelte-kit/output/server/manifest.json                         2.46 KiB\r\n.svelte-kit/output/server/index.js                              74.00 KiB\r\n.svelte-kit/output/server/entries/endpoints/todos/index.js      1.33 KiB\r\n.svelte-kit/output/server/entries/pages/__layout.svelte.js      4.63 KiB\r\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js     0.73 KiB\r\n.svelte-kit/output/server/entries/pages/about.svelte.js         1.39 KiB\r\n.svelte-kit/output/server/entries/pages/index.svelte.js         8.22 KiB\r\n.svelte-kit/output/server/entries/pages/todos/index.svelte.js   5.94 KiB\r\n.svelte-kit/output/server/immutable/chunks/index-59c70007.js    4.13 KiB\r\n.svelte-kit/output/server/immutable/chunks/hooks-5a10edf9.js    0.46 KiB\r\n(node:13) ExperimentalWarning: buffer.Blob is an experimental feature. This feature could change at any time\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\n[vite-plugin-svelte-kit] 404 / (linked from /second-base/about)\r\n\r\n> Using @sveltejs/adapter-auto\r\nError: 404 / (linked from /second-base/about)\r\n    at normalise_error_handler/<@file:///home/projects/sveltejs-kit-template-default-e2xkzk/node_modules/ (sveltejs/kit/dist/vite.js:1138:11)\r\n    at visit@file:///home/projects/sveltejs-kit-template-default-e2xkzk/node_modules/ (sveltejs/kit/dist/vite.js:1232:9)\r\n    at enqueue/<@file:///home/projects/sveltejs-kit-template-default-e2xkzk/node_modules/ (sveltejs/kit/dist/vite.js:1222:27)\r\n    at dequeue@file:///home/projects/sveltejs-kit-template-default-e2xkzk/node_modules/ (sveltejs/kit/dist/vite.js:805:42)\r\n    at dequeue/<@file:///home/projects/sveltejs-kit-template-default-e2xkzk/node_modules/ (sveltejs/kit/dist/vite.js:814:7)\r\n    at <anonymous> (<anonymous>) {\r\n  code: 'PLUGIN_ERROR',\r\n  plugin: 'vite-plugin-svelte-kit',\r\n  hook: 'writeBundle'\r\n}\r\n```\r\n\r\n\r\n### System Info\r\n\r\n```shell\r\nSystem:\r\n    OS: Linux 5.0 undefined\r\n    CPU: (4) x64 Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz\r\n    Memory: 0 Bytes / 0 Bytes\r\n    Shell: 1.0 - /bin/jsh\r\n  Binaries:\r\n    Node: 16.14.2 - /usr/local/bin/node\r\n    Yarn: 1.22.10 - /bin/yarn\r\n    npm: 7.17.0 - /bin/npm\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: next => 1.0.0-next.55 \r\n    @sveltejs/kit: next => 1.0.0-next.368 \r\n    svelte: ^3.46.0 => 3.49.0 \r\n    vite: ^2.9.13 => 2.9.14\r\n```\r\n\r\n\r\n### Severity\r\n\r\nserious, but I can work around it\r\n\r\n### Additional Information\r\n\r\nhttps://kit.svelte.dev/docs/configuration#paths\r\n\r\n> ### paths\r\n> \r\n> An object containing zero or more of the following `string` values:\r\n> \r\n> - `assets` — an absolute path that your app's files are served from. This is useful if your files are served from a storage bucket of some kind\r\n> - `base` — a root-relative path that must start, but not end with `/` (e.g. `/base-path`), unless it is the empty string. This specifies where your app is served from and allows the app to live on a non-root path\r\n\r\nI'm trying to serve an app from a base that's not `/` but I can't get it to build because of a mysterious `[vite-plugin-svelte-kit] 404` error.\r\n\r\nAdditionally, I can't find a `<base />` tag in the `<head>` when running `pnpm run dev`","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/5465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/5465/timeline","performed_via_github_app":null,"state_reason":"completed"}