{"url":"https://api.github.com/repos/sveltejs/kit/issues/13184","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/13184/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/13184/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/13184/events","html_url":"https://github.com/sveltejs/kit/issues/13184","id":2744355597,"node_id":"I_kwDOEiPr8c6jk4sN","number":13184,"title":"SvelteKit alternative hooks path resolving problem","user":{"login":"p4wn-dev","id":10571216,"node_id":"MDQ6VXNlcjEwNTcxMjE2","avatar_url":"https://avatars.githubusercontent.com/u/10571216?v=4","gravatar_id":"","url":"https://api.github.com/users/p4wn-dev","html_url":"https://github.com/p4wn-dev","followers_url":"https://api.github.com/users/p4wn-dev/followers","following_url":"https://api.github.com/users/p4wn-dev/following{/other_user}","gists_url":"https://api.github.com/users/p4wn-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/p4wn-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p4wn-dev/subscriptions","organizations_url":"https://api.github.com/users/p4wn-dev/orgs","repos_url":"https://api.github.com/users/p4wn-dev/repos","events_url":"https://api.github.com/users/p4wn-dev/events{/privacy}","received_events_url":"https://api.github.com/users/p4wn-dev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-12-17T09:14:31Z","updated_at":"2024-12-18T21:28:32Z","closed_at":"2024-12-18T21:28:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nI have defined an alternative path for my server hook file in svelte.config.js, which is\r\n\r\n[....]\r\n`files: {\r\n     hooks: {\r\n\tserver: 'src/hooks/hooks.server'\r\n    }\r\n}`\r\n[....]\r\n\r\nSince updating SvelteKit this does not work anymore and I get an internal server error. I provided the stack trace.\r\nAfter tinkering around I found that if you create an empty universal hook file and add it to svelte.config.js like this:\r\n\r\n`files: {\r\n     hooks: {\r\n\tserver: 'src/hooks/hooks.server',\r\n\tuniversal: 'src/hooks/hooks'\r\n    }\r\n}`\r\n\r\nThen it works.\r\nStrangely adding a client hooks file does not work, only with a universal hooks file.\r\n\r\nDid something change recently that I missed? I could not find anything related to this.\r\n\r\n### Reproduction\r\n\r\nhttps://stackblitz.com/edit/sveltejs-kit-template-default-llqwvuwy\r\n\r\n### Logs\r\n\r\n```Shell\r\nError: Failed to load url /src/hooks (resolved id: /src/hooks). Does the file exist?\r\n    at loadAndTransform (file:///<project_path>/node_modules/vite/dist/node/chunks/dep-yUJfKD1i.js:40842:17) {\r\n  code: 'ERR_LOAD_URL',\r\n  runnerError: Error: RunnerError\r\n      at reviveInvokeError (file:///<project_path>/node_modules/vite/dist/node/module-runner.js:545:18)\r\n      at Object.invoke (file:///<project_path>/node_modules/vite/dist/node/module-runner.js:628:15)\r\n      at async SSRCompatModuleRunner.getModuleInformation (file:///<project_path>/node_modules/vite/dist/node/module-runner.js:1200:73)\r\n      at async request (file:///<project_path>/node_modules/vite/dist/node/module-runner.js:1222:88)\r\n      at async get_hooks (<project_path>/.svelte-kit/generated/server/internal.js:44:28)\r\n      at async eval (<project_path>/node_modules/@sveltejs/kit/src/runtime/server/index.js:82:20)\r\n      at async Server.init (<project_path>/node_modules/@sveltejs/kit/src/runtime/server/index.js:80:3)\r\n      at async file:///<project_path>/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:489:5\r\n```\r\n\r\n\r\n### System Info\r\n\r\n```Shell\r\nSystem:\r\n    OS: Windows 10 10.0.19045\r\n    CPU: (8) x64 Intel(R) Xeon(R) W-2225 CPU @ 4.10GHz\r\n    Memory: 10.87 GB / 31.69 GB\r\n  Binaries:\r\n    Node: 22.6.0\r\n    npm: 10.9.2\r\n  Browsers:\r\n    Edge: Chromium (131.0.2903.99)\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^3.0.0 => 3.3.1\r\n    @sveltejs/adapter-node: ^5.2.9 => 5.2.10\r\n    @sveltejs/kit: ^2.9.0 => 2.12.1\r\n    @sveltejs/vite-plugin-svelte: ^5.0.0 => 5.0.2\r\n    svelte: ^5.0.0 => 5.14.1\r\n    vite: ^6.0.0 => 6.0.3\r\n```\r\n\r\n\r\n### Severity\r\n\r\nannoyance\r\n\r\n### Additional Information\r\n\r\nUPDATE: Can confirm that the issue occurs from version 2.11.0 upwards.\r\n\r\n_No response_","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/13184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/13184/timeline","performed_via_github_app":null,"state_reason":"completed"}