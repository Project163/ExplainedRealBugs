{"url":"https://api.github.com/repos/sveltejs/kit/issues/5896","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/5896/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/5896/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/5896/events","html_url":"https://github.com/sveltejs/kit/issues/5896","id":1339584388,"node_id":"I_kwDOEiPr8c5P2G-E","number":5896,"title":"Bring back support for content negotiation (allow +page.svelte & +server.ts to co-exist)","user":{"login":"CaptainCodeman","id":304910,"node_id":"MDQ6VXNlcjMwNDkxMA==","avatar_url":"https://avatars.githubusercontent.com/u/304910?v=4","gravatar_id":"","url":"https://api.github.com/users/CaptainCodeman","html_url":"https://github.com/CaptainCodeman","followers_url":"https://api.github.com/users/CaptainCodeman/followers","following_url":"https://api.github.com/users/CaptainCodeman/following{/other_user}","gists_url":"https://api.github.com/users/CaptainCodeman/gists{/gist_id}","starred_url":"https://api.github.com/users/CaptainCodeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CaptainCodeman/subscriptions","organizations_url":"https://api.github.com/users/CaptainCodeman/orgs","repos_url":"https://api.github.com/users/CaptainCodeman/repos","events_url":"https://api.github.com/users/CaptainCodeman/events{/privacy}","received_events_url":"https://api.github.com/users/CaptainCodeman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/2","html_url":"https://github.com/sveltejs/kit/milestone/2","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/2/labels","id":6044960,"node_id":"MDk6TWlsZXN0b25lNjA0NDk2MA==","number":2,"title":"1.0","description":"stuff we need to nail down before launch","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":628,"state":"closed","created_at":"2020-10-29T01:17:50Z","updated_at":"2022-12-19T11:47:29Z","due_on":null,"closed_at":"2022-12-19T11:47:29Z"},"comments":3,"created_at":"2022-08-15T22:25:21Z","updated_at":"2022-09-19T16:35:01Z","closed_at":"2022-09-19T16:35:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the problem\r\n\r\nPrevious versions of SvelteKit supported content negotiation where a route could serve HTML to browsers or JSON data if an `accept` header was used for a data request (as well as supporting data being posted to the same route).\r\n\r\nExisting sites may already use this, it's been part of HTTP since forever. You might want to replace such a site with SvelteKit (or previously relied on SvelteKit supporting this) but changing the existing URL structure would be problematic and impactful (other systems using endpoints, pages already indexed and publicized etc...)\r\n\r\nI think a router should be flexible enough to support existing URL structures, even if they are not the favoured default for the framework.\r\n\r\n### Describe the proposed solution\r\n\r\nSupport the `accept` header in the routing and allow `application/json` requests to an endpoint at the same route. Pages should only be concerned with GET requests with no `accept` header (or one for html content).\r\n\r\n### Alternatives considered\r\n\r\nAdding a load function to `+page.server.ts` allows a GET request for data, but makes it difficult to control the response and would limit things to JSON (maybe you want CSV, PDF, or XML). It also appears limited in terms of what control you have over the response (http headers etc...) and still leaves you unable to use other HTTP methods.\r\n\r\nUpdate: it appears that I should be treating `load` as GET and the other methods are supported. However they are inconsistent in terms of signature and what response is returned.\r\n\r\n### Importance\r\n\r\ni cannot use SvelteKit without it\r\n\r\n### Additional Information\r\n\r\n_No response_","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/5896/reactions","total_count":11,"+1":11,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/5896/timeline","performed_via_github_app":null,"state_reason":"completed"}