[{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344792844","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1344792844","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1344792844,"node_id":"IC_kwDOEiPr8c5QJ-kM","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T21:19:34Z","updated_at":"2022-12-09T21:19:34Z","body":"If you're seeing a `500 Internal Error` then something should definitely appear in your logs (you will need to be looking at the logs as the error occurs, since they're not buffered).\r\n\r\nHave you tried creating a minimal project that demonstrates the problem?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344792844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344802391","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1344802391","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1344802391,"node_id":"IC_kwDOEiPr8c5QKA5X","user":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T21:32:21Z","updated_at":"2022-12-11T19:37:36Z","body":"On Netlify, \"Deploy logs\" are all green, \"Function logs\" only show \"waiting for logs...\" forever and nothing happens.\r\n\r\nThe root page shows the error, same for `/blog`, and when hovering over \"Blog\" in the topbar, then the network request for `blog.json` errors out.\r\n\r\n`sitemap.xml` and `rss.xml` also work fine locally when navigating to them, but are broken on the deployed app. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344802391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8002461307,"node_id":"LE_lADOEiPr8c5YqORkzwAAAAHc-957","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8002461307","actor":{"login":"elliott-with-the-longest-name-on-github","id":76245373,"node_id":"MDQ6VXNlcjc2MjQ1Mzcz","avatar_url":"https://avatars.githubusercontent.com/u/76245373?v=4","gravatar_id":"","url":"https://api.github.com/users/elliott-with-the-longest-name-on-github","html_url":"https://github.com/elliott-with-the-longest-name-on-github","followers_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/followers","following_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/following{/other_user}","gists_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/gists{/gist_id}","starred_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/subscriptions","organizations_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/orgs","repos_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/repos","events_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/events{/privacy}","received_events_url":"https://api.github.com/users/elliott-with-the-longest-name-on-github/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-09T22:31:30Z","label":{"name":"awaiting submitter","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344860320","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1344860320","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1344860320,"node_id":"IC_kwDOEiPr8c5QKPCg","user":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T22:48:41Z","updated_at":"2022-12-09T22:48:41Z","body":"Okay, I was able to quickly throw together a minimal reproduction case:\r\n\r\nClone https://github.com/mcmxcdev/sveltekit-issue-8039 locally, run it and navigate to blog and then to the single blog post entry. It should work as expected.\r\n\r\nThe same project is deployed to https://main--stalwart-pika-07042f.netlify.app/, it will run into http 500 when preloading `blog.json` on hover and the single blog post entry will break (in the dev tools this time)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344860320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344872793","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1344872793","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1344872793,"node_id":"IC_kwDOEiPr8c5QKSFZ","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T23:09:58Z","updated_at":"2022-12-09T23:09:58Z","body":"Haven't had a chance to run the repo yet, but the problem is almost certainly that you're trying to read content from the filesystem that doesn't exist in the serverless functions.\r\n\r\nWe might add a way to include files in Lambda-based adapters in future, but until then if you want to access the filesystem (outside a non-Lambda Node.js deployment) then it has to be done during prerendering.\r\n\r\nAcknowledge that this could use a more helpful error.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344872793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344875327","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1344875327","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1344875327,"node_id":"IC_kwDOEiPr8c5QKSs_","user":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T23:13:32Z","updated_at":"2022-12-09T23:13:32Z","body":"I've been using helper scripts in package.json to test locally what adapter-vercel and adapter-netlify builds do:\r\n\r\n```js\r\n{\r\n  scripts: {\r\n    \"build:netlify\": \"cross-env NETLIFY=true pnpm build\",\r\n    \"build:vercel\": \"cross-env VERCEL=true pnpm build\",\r\n    ...\r\n  }\r\n}\r\n```\r\n\r\nInspecting their outputs in ./build (for adapter-netlify) and ./.vercel/output (for adapter-vercel) and comparing to normal builds may shed some light. It may be even possible to serve them out (without svelte-kit built backend functions).\r\n\r\nI got my template created from SvelteKit demo app to deploy cleanly on both, and the above was instrumental to figure out what wrong info I picked from outdated Internet pages, which has plenty.\r\n\r\nAnother thing I do regularly is make a clean SvelteKit demo app, and diff it to my code base. SvelteKit dev velocity is insanely high, and things change daily.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1344875327/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1345620946","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1345620946","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1345620946,"node_id":"IC_kwDOEiPr8c5QNIvS","user":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-11T18:11:26Z","updated_at":"2022-12-11T18:11:26Z","body":"> Haven't had a chance to run the repo yet, but the problem is almost certainly that you're trying to read content from the filesystem that doesn't exist in the serverless functions.\r\n> \r\n> We might add a way to include files in Lambda-based adapters in future, but until then if you want to access the filesystem (outside a non-Lambda Node.js deployment) then it has to be done during prerendering.\r\n> \r\n\r\nThat's a good hint and most likely the issue! \r\nI have used `@sveltejs/adapter-static` for like 2 years until it started throwing `Error: Encountered dynamic routes` where I couldn't figure out how to get rid of it except for attempting to switch adapter (which leads to this issue now)\r\n\r\nSo how can I now have blog posts loaded? No `adapter-static` since I have dynamic routes like `/blog/[slug]` but also Netlify/Vercel don't support loading from file system.\r\n\r\n> Acknowledge that this could use a more helpful error.\r\n\r\nI just tried to switch back to `@sveltejs/adapter-static` with `strict: false` and everything builds fine. I open the preview deployment on Netlify and it shows me a Netlify 404 page...\r\nSo yeah, it definitely needs more logging here in all the important parts, otherwise no clue what went wrong and its no fun.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1345620946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1347067452","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1347067452","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1347067452,"node_id":"IC_kwDOEiPr8c5QSp48","user":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T18:46:52Z","updated_at":"2022-12-12T18:48:24Z","body":"`adapter-static` can serve dynamic routes ok. Current demo app has `/sverdle` page which is dynamic and `adapter-static` is fine with it. I'm guessing \"dynamic\" means a node route with sub-routes, not the fact that it has server-side data (`/sverdle` route has both).\r\n\r\nBut if you enable `prerender`/`ssr` flags in a certain way globally (i.e. in /src/routes/+layout.svelte), the adapter complains. I had to create my own \"map\" of what these flags mean, since most docs online (including SvelteKit's own) are not accurate. E.g. 'ssr=false'  does not create a SPA as stated, but \"fallback=\" in adapter-static does. I had to enable `prerender='always'` and `ssr=true` globally for SPA to make deep-links work (or there's probably a bug in client-side router that does not navigate to the route after fallback page). But I digress...\r\n\r\nYou can add /<route>/+page.ts/js, and reset the offending flag for that page. I did so in my template project, and I have it build adapter-static/vercel/netlify without complaining. When dynamic page throws an error in the adapter, make `export const prerender = false;` in that route's +page.ts/js.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1347067452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1347653419","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1347653419","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1347653419,"node_id":"IC_kwDOEiPr8c5QU48r","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:18:16Z","updated_at":"2022-12-13T02:18:16Z","body":"> Current demo app has `/sverdle` page which is dynamic and `adapter-static` is fine with it\r\n\r\nNo, it isn't. `sverdle` requires a server.\r\n\r\n'Dynamic' routes in the sense of dynamic _parameters_ — `/blog/[slug]` — are a-ok, however. (https://kit.svelte.dev/docs is an example — `/docs/[slug]` reads from the filesystem at prerender time.)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1347653419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1354591427","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1354591427","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1354591427,"node_id":"IC_kwDOEiPr8c5QvWzD","user":{"login":"infovore","id":1103,"node_id":"MDQ6VXNlcjExMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1103?v=4","gravatar_id":"","url":"https://api.github.com/users/infovore","html_url":"https://github.com/infovore","followers_url":"https://api.github.com/users/infovore/followers","following_url":"https://api.github.com/users/infovore/following{/other_user}","gists_url":"https://api.github.com/users/infovore/gists{/gist_id}","starred_url":"https://api.github.com/users/infovore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/infovore/subscriptions","organizations_url":"https://api.github.com/users/infovore/orgs","repos_url":"https://api.github.com/users/infovore/repos","events_url":"https://api.github.com/users/infovore/events{/privacy}","received_events_url":"https://api.github.com/users/infovore/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T11:24:36Z","updated_at":"2022-12-16T11:24:36Z","body":"> So how can I now have blog posts loaded? No `adapter-static` since I have dynamic routes like `/blog/[slug]` but also Netlify/Vercel don't support loading from file system.\r\n\r\nThey do support loading from the file system. The problem is that the file _isn't there_ for them to load; it doesn't get moved into the relevant place for the functions, because there's no obvious need to do so.\r\n\r\nIf your posts really are JSON, is it possible for you to import them, rather than using `fetch`? eg: `import allPosts from \"/posts.json\"`? If you do this, `posts.json` now becomes a dependency of the function - it can be resolved, because it's imporpted -  I believe this means it'll be copied over into the relevant function. (It's unclear if `posts.json` is a server-generated endpoint, or just a file in the root of your site).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1354591427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"infovore","id":1103,"node_id":"MDQ6VXNlcjExMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1103?v=4","gravatar_id":"","url":"https://api.github.com/users/infovore","html_url":"https://github.com/infovore","followers_url":"https://api.github.com/users/infovore/followers","following_url":"https://api.github.com/users/infovore/following{/other_user}","gists_url":"https://api.github.com/users/infovore/gists{/gist_id}","starred_url":"https://api.github.com/users/infovore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/infovore/subscriptions","organizations_url":"https://api.github.com/users/infovore/orgs","repos_url":"https://api.github.com/users/infovore/repos","events_url":"https://api.github.com/users/infovore/events{/privacy}","received_events_url":"https://api.github.com/users/infovore/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1357086287","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1357086287","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1357086287,"node_id":"IC_kwDOEiPr8c5Q435P","user":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T04:38:34Z","updated_at":"2022-12-19T04:38:34Z","body":"@Rich-Harris \r\n> No, it isn't. sverdle requires a server.\r\n\r\nadapter-static provides a server, at least for `vite dev` and `vite build && vite preview`, I did not try deploying with adapter-static. What I meant is that there is no error from adapter-static if `src/routes/sverdle/+page.ts` has `export const prerender = false;`, but if `export const prerender = true;`, adapter-static throws an error about that route being dynamic.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1357086287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iva2k","id":416092,"node_id":"MDQ6VXNlcjQxNjA5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/416092?v=4","gravatar_id":"","url":"https://api.github.com/users/iva2k","html_url":"https://github.com/iva2k","followers_url":"https://api.github.com/users/iva2k/followers","following_url":"https://api.github.com/users/iva2k/following{/other_user}","gists_url":"https://api.github.com/users/iva2k/gists{/gist_id}","starred_url":"https://api.github.com/users/iva2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iva2k/subscriptions","organizations_url":"https://api.github.com/users/iva2k/orgs","repos_url":"https://api.github.com/users/iva2k/repos","events_url":"https://api.github.com/users/iva2k/events{/privacy}","received_events_url":"https://api.github.com/users/iva2k/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8065779343,"node_id":"MEE_lADOEiPr8c5YqORkzwAAAAHgwgaP","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8065779343","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-19T04:38:34Z","performed_via_github_app":null},{"id":8065779344,"node_id":"SE_lADOEiPr8c5YqORkzwAAAAHgwgaQ","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8065779344","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-19T04:38:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1358151186","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1358151186","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1358151186,"node_id":"IC_kwDOEiPr8c5Q874S","user":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T19:28:47Z","updated_at":"2022-12-19T19:31:49Z","body":"Generally speaking, the adapters need more documentation on what they can and can't do. I really don't care which one to use but just want it to work. \r\n\r\n> If your posts really are JSON, is it possible for you to import them, rather than using fetch?\r\n\r\nThat was a good suggestion and I tried to import `$lib/posts` instead of fetch the posts. Still running into 500 internal error unfortunately, locally still works fine.\r\n\r\nThis is what my posts file looks like:\r\n\r\n```ts\r\nimport fs from 'fs';\r\nimport frontMatter from 'front-matter';\r\nimport { marked } from 'marked';\r\nimport Prism from 'prismjs';\r\nimport 'prism-svelte';\r\nimport loadLanguages from 'prismjs/components/index.js';\r\nimport readingTime from 'reading-time';\r\n\r\nloadLanguages(['shell', 'markdown', 'json']);\r\n\r\nconst posts = fs\r\n  .readdirSync('./src/posts')\r\n  .filter((elem) => elem.endsWith('.svx'))\r\n  .map((postFilename) => {\r\n    const postContent = fs.readFileSync(`./src/posts/${postFilename}`, {\r\n      encoding: 'utf8',\r\n    });\r\n\r\n    const postFrontMatter = frontMatter(postContent);\r\n\r\n    const renderer = new marked.Renderer();\r\n\r\n    renderer.code = (source, lang: string) => {\r\n      const html = Prism.highlight(source, Prism.languages[lang], lang);\r\n      return `<pre class='language-${lang}'><code class='language-${lang}'>${html}</code></pre>`;\r\n    };\r\n\r\n    const html = marked.parse(postFrontMatter.body, { renderer });\r\n\r\n    const readingTimeDuration = readingTime(postFrontMatter.body).text;\r\n\r\n    return {\r\n      // @ts-expect-error Spread types may only be created from object types.\r\n      ...postFrontMatter.attributes,\r\n      html: marked.parse(html),\r\n      readingTime: readingTimeDuration,\r\n    };\r\n  });\r\n\r\nconst modifiedPosts = posts\r\n  .filter((post) => !post.hidden)\r\n  .sort((a, b) =>\r\n    new Date(a.creationDate).getTime() > new Date(b.creationDate).getTime()\r\n      ? -1\r\n      : new Date(a.creationDate).getTime() < new Date(b.creationDate).getTime()\r\n      ? 1\r\n      : 0,\r\n  );\r\n\r\nexport default modifiedPosts;\r\n\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1358151186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcmxcdev","id":16797721,"node_id":"MDQ6VXNlcjE2Nzk3NzIx","avatar_url":"https://avatars.githubusercontent.com/u/16797721?v=4","gravatar_id":"","url":"https://api.github.com/users/mcmxcdev","html_url":"https://github.com/mcmxcdev","followers_url":"https://api.github.com/users/mcmxcdev/followers","following_url":"https://api.github.com/users/mcmxcdev/following{/other_user}","gists_url":"https://api.github.com/users/mcmxcdev/gists{/gist_id}","starred_url":"https://api.github.com/users/mcmxcdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcmxcdev/subscriptions","organizations_url":"https://api.github.com/users/mcmxcdev/orgs","repos_url":"https://api.github.com/users/mcmxcdev/repos","events_url":"https://api.github.com/users/mcmxcdev/events{/privacy}","received_events_url":"https://api.github.com/users/mcmxcdev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1358158212","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1358158212","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1358158212,"node_id":"IC_kwDOEiPr8c5Q89mE","user":{"login":"infovore","id":1103,"node_id":"MDQ6VXNlcjExMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1103?v=4","gravatar_id":"","url":"https://api.github.com/users/infovore","html_url":"https://github.com/infovore","followers_url":"https://api.github.com/users/infovore/followers","following_url":"https://api.github.com/users/infovore/following{/other_user}","gists_url":"https://api.github.com/users/infovore/gists{/gist_id}","starred_url":"https://api.github.com/users/infovore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/infovore/subscriptions","organizations_url":"https://api.github.com/users/infovore/orgs","repos_url":"https://api.github.com/users/infovore/repos","events_url":"https://api.github.com/users/infovore/events{/privacy}","received_events_url":"https://api.github.com/users/infovore/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T19:35:00Z","updated_at":"2022-12-19T19:35:34Z","body":"Alas, I meant really a JSON file. Your example is an **endpoint** on your server, returning JSON, so you won't be able to load it from import - which only works for files directly available.oj disk.\r\n\r\nI have anecdotal success of doing what you're doing - anecdotal in that I no longer remember it all, but in a nutshell:\r\n\r\n- I do what you're doing for loading posts in development; in production, I have a pre-build phase that bakes out a JSON file to disk\r\n- you could then dynamically import that _if_ you're not in a `dev` environment, I think\r\n\r\nThis means it would get imported at build time, and then get deployed - but you'd still develop against the local endpoint.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1358158212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"infovore","id":1103,"node_id":"MDQ6VXNlcjExMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1103?v=4","gravatar_id":"","url":"https://api.github.com/users/infovore","html_url":"https://github.com/infovore","followers_url":"https://api.github.com/users/infovore/followers","following_url":"https://api.github.com/users/infovore/following{/other_user}","gists_url":"https://api.github.com/users/infovore/gists{/gist_id}","starred_url":"https://api.github.com/users/infovore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/infovore/subscriptions","organizations_url":"https://api.github.com/users/infovore/orgs","repos_url":"https://api.github.com/users/infovore/repos","events_url":"https://api.github.com/users/infovore/events{/privacy}","received_events_url":"https://api.github.com/users/infovore/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"benlau6","id":69983169,"node_id":"MDQ6VXNlcjY5OTgzMTY5","avatar_url":"https://avatars.githubusercontent.com/u/69983169?v=4","gravatar_id":"","url":"https://api.github.com/users/benlau6","html_url":"https://github.com/benlau6","followers_url":"https://api.github.com/users/benlau6/followers","following_url":"https://api.github.com/users/benlau6/following{/other_user}","gists_url":"https://api.github.com/users/benlau6/gists{/gist_id}","starred_url":"https://api.github.com/users/benlau6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benlau6/subscriptions","organizations_url":"https://api.github.com/users/benlau6/orgs","repos_url":"https://api.github.com/users/benlau6/repos","events_url":"https://api.github.com/users/benlau6/events{/privacy}","received_events_url":"https://api.github.com/users/benlau6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T07:59:15Z","updated_at":"2023-01-05T07:59:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8341","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/8341/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/8341/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/8341/events","html_url":"https://github.com/sveltejs/kit/issues/8341","id":1520273263,"node_id":"I_kwDOEiPr8c5anYdv","number":8341,"title":"Prerendered endpoint cannot be fetched by provided fetch in server load ","user":{"login":"benlau6","id":69983169,"node_id":"MDQ6VXNlcjY5OTgzMTY5","avatar_url":"https://avatars.githubusercontent.com/u/69983169?v=4","gravatar_id":"","url":"https://api.github.com/users/benlau6","html_url":"https://github.com/benlau6","followers_url":"https://api.github.com/users/benlau6/followers","following_url":"https://api.github.com/users/benlau6/following{/other_user}","gists_url":"https://api.github.com/users/benlau6/gists{/gist_id}","starred_url":"https://api.github.com/users/benlau6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benlau6/subscriptions","organizations_url":"https://api.github.com/users/benlau6/orgs","repos_url":"https://api.github.com/users/benlau6/repos","events_url":"https://api.github.com/users/benlau6/events{/privacy}","received_events_url":"https://api.github.com/users/benlau6/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-01-05T07:59:15Z","updated_at":"2023-01-11T16:29:35Z","closed_at":"2023-01-11T16:29:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Describe the bug\n\nA `+page.svelte` with `+page.server.js` using provided `fetch` in `load` cannot fetch prerendered endpoint (`+server.js`) after build\r\n\r\nClick to the page will give `500 Internal Error` `Error: Not found: /api/something`,\r\nHowever, it will be okay only if you refresh the page\r\n\r\nI tried different methods, found that\r\n<h4>Methods that always work</h4>\r\n<ul>\r\n  <li>+page.js</li>\r\n  <li>+page.server.js with native fetch and url.origin</li>\r\n</ul>\r\n\r\n<h4>Methods that does not work</h4>\r\n<ul>\r\n  <li>+page.server.js with sveltekit fetch</li>\r\n  <li>+page.server.js with sveltekit fetch and url.origin</li>\r\n</ul>\r\n\r\nAccording to https://kit.svelte.dev/docs/load#making-fetch-requests, I suspect that the provided `fetch` somehow stripped out the origin. It turned the fetch into an internal request to a prerendered route `/api/something`, which did not exist, and should be `localhost:4173/api/something` instead\r\n\r\nNote: It also happened using `@sveltejs/adapter-vercel`\r\n\r\nRelated issue (I suspect)\r\n#8039\r\n#8331\n\n### Reproduction\n\nhttps://github.com/benlau6/sveltekit-fetch-prerendered-endpoint-issue\r\n\r\n1. pnpm build\r\n2. pnpm preview\r\n3. Goto website\r\n4. Goto any of failure pages at navigation\r\n5. (Optional) Refresh, somehow it works\r\n6. (Optional) Goto any of success pages at navigation, it always works\n\n### Logs\n\n```Shell\nError: Not found: /api/something\r\n    at resolve (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:3095:18)\r\n    at resolve (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2982:34)\r\n    at options.hooks.handle (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:3217:59)\r\n    at respond (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2980:42)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async fetch (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2785:20)\r\n    at async file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2714:12\r\n    at async load (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/entries/pages/failure/1/_page.server.js:2:15)\r\n    at async load_server_data (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:921:18)\r\nSyntaxError: Unexpected token < in JSON at position 0\r\n    at JSON.parse (<anonymous>)\r\n    at packageData (/Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/node_modules/.pnpm/undici@5.14.0/node_modules/undici/lib/fetch/body.js:553:19)\r\n    at specConsumeBody (/Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/node_modules/.pnpm/undici@5.14.0/node_modules/undici/lib/fetch/body.js:517:10)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async load (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/entries/pages/failure/1/_page.server.js:3:16)\r\n    at async load_server_data (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:921:18)\r\n    at async Promise.all (index 1)\r\n    at async render_data (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2194:19)\r\n    at async resolve (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:3067:22)\r\n    at async respond (file:///Users/benyp/bull_butler/sveltekit-fetch-prerendered-endpoint-issue/.svelte-kit/output/server/index.js:2980:22)\n```\n\n\n### System Info\n\n```Shell\nSystem:\r\n    OS: macOS 13.1\r\n    CPU: (10) arm64 Apple M1 Pro\r\n    Memory: 50.56 MB / 16.00 GB\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.7.0 - ~/.nvm/versions/node/v18.7.0/bin/node\r\n    npm: 8.15.0 - ~/.nvm/versions/node/v18.7.0/bin/npm\r\n  Browsers:\r\n    Chrome: 95.0.4638.69\r\n    Firefox: 108.0.1\r\n    Safari: 16.2\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^1.0.0 => 1.0.0 \r\n    @sveltejs/kit: ^1.0.0 => 1.0.1 \r\n    svelte: ^3.54.0 => 3.55.0 \r\n    vite: ^4.0.0 => 4.0.4\n```\n\n\n### Severity\n\nserious, but I can work around it\n\n### Additional Information\n\n_No response_","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/8341/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1377602961","html_url":"https://github.com/sveltejs/kit/issues/8039#issuecomment-1377602961","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/8039","id":1377602961,"node_id":"IC_kwDOEiPr8c5SHI2R","user":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T17:24:19Z","updated_at":"2023-01-10T17:24:19Z","body":"The issue here is that the `blog.json` route is not prerendered, so that \"read the blog content from the file system and transform it\" is done at runtime on Netlify, where it can't work because those files aren't there and you don't have access to the file system like that. You would need to add `export const prerender = true` to `blog.json/+server.js` so that it's done while building the app, not while running it.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1377602961/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8194338757,"node_id":"REFE_lADOEiPr8c5YqORkzwAAAAHoa6_F","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8194338757","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e7cae202c52c484fad7c5d647389021c19157d33","commit_url":"https://api.github.com/repos/sveltejs/kit/commits/e7cae202c52c484fad7c5d647389021c19157d33","created_at":"2023-01-10T17:27:34Z","performed_via_github_app":null},{"actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T17:28:27Z","updated_at":"2023-01-10T17:28:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8441","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/8441/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/8441/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/8441/events","html_url":"https://github.com/sveltejs/kit/pull/8441","id":1527760837,"node_id":"PR_kwDOEiPr8c5HFyMG","number":8441,"title":"[docs] add note about inability to access file system at runtime","user":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470032,"node_id":"MDU6TGFiZWwyNDI4NDcwMDMy","url":"https://api.github.com/repos/sveltejs/kit/labels/documentation","name":"documentation","color":"0075ca","default":true,"description":"Improvements or additions to documentation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-01-10T17:28:27Z","updated_at":"2023-01-10T20:25:16Z","closed_at":"2023-01-10T20:25:15Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sveltejs/kit/pulls/8441","html_url":"https://github.com/sveltejs/kit/pull/8441","diff_url":"https://github.com/sveltejs/kit/pull/8441.diff","patch_url":"https://github.com/sveltejs/kit/pull/8441.patch","merged_at":"2023-01-10T20:25:15Z"},"body":"Closes #8039\r\nI'm not sure what else besides documentation we can do here - the runtime error is outside of our control, and simulating this during dev sounds super hard (there's also an open issue about that somewhere I think).\r\n\r\n### Please don't delete this checklist! Before submitting the PR, please make sure you do the following:\r\n- [x] It's really useful if your PR references an issue where it is discussed ahead of time. In many cases, features are absent for a reason. For large changes, please create an RFC: https://github.com/sveltejs/rfcs\r\n- [x] This message body should clearly illustrate what problems it solves.\r\n- [ ] Ideally, include a test that fails without this PR but passes with it.\r\n\r\n### Tests\r\n- [ ] Run the tests with `pnpm test` and lint the project with `pnpm lint` and `pnpm check`\r\n\r\n### Changesets\r\n- [x] If your PR makes a change that should be noted in one or more packages' changelogs, generate a changeset by running `pnpm changeset` and following the prompts. All changesets should be `patch` until SvelteKit 1.0\r\n","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/8441/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8195604597,"node_id":"CE_lADOEiPr8c5YqORkzwAAAAHofwB1","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8195604597","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-01-10T20:25:17Z","state_reason":null,"performed_via_github_app":null},{"id":8195604731,"node_id":"REFE_lADOEiPr8c5YqORkzwAAAAHofwD7","url":"https://api.github.com/repos/sveltejs/kit/issues/events/8195604731","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a7347b7f111b1ba3cae64493c35e2b00d9ba2ead","commit_url":"https://api.github.com/repos/sveltejs/kit/commits/a7347b7f111b1ba3cae64493c35e2b00d9ba2ead","created_at":"2023-01-10T20:25:18Z","performed_via_github_app":null},{"actor":{"login":"honzamoser","id":35738060,"node_id":"MDQ6VXNlcjM1NzM4MDYw","avatar_url":"https://avatars.githubusercontent.com/u/35738060?v=4","gravatar_id":"","url":"https://api.github.com/users/honzamoser","html_url":"https://github.com/honzamoser","followers_url":"https://api.github.com/users/honzamoser/followers","following_url":"https://api.github.com/users/honzamoser/following{/other_user}","gists_url":"https://api.github.com/users/honzamoser/gists{/gist_id}","starred_url":"https://api.github.com/users/honzamoser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/honzamoser/subscriptions","organizations_url":"https://api.github.com/users/honzamoser/orgs","repos_url":"https://api.github.com/users/honzamoser/repos","events_url":"https://api.github.com/users/honzamoser/events{/privacy}","received_events_url":"https://api.github.com/users/honzamoser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-21T15:38:24Z","updated_at":"2023-05-21T15:38:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/10001","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/10001/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/10001/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/10001/events","html_url":"https://github.com/sveltejs/kit/issues/10001","id":1718546024,"node_id":"I_kwDOEiPr8c5mbu5o","number":10001,"title":"Prerendered server route not found","user":{"login":"honzamoser","id":35738060,"node_id":"MDQ6VXNlcjM1NzM4MDYw","avatar_url":"https://avatars.githubusercontent.com/u/35738060?v=4","gravatar_id":"","url":"https://api.github.com/users/honzamoser","html_url":"https://github.com/honzamoser","followers_url":"https://api.github.com/users/honzamoser/followers","following_url":"https://api.github.com/users/honzamoser/following{/other_user}","gists_url":"https://api.github.com/users/honzamoser/gists{/gist_id}","starred_url":"https://api.github.com/users/honzamoser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/honzamoser/subscriptions","organizations_url":"https://api.github.com/users/honzamoser/orgs","repos_url":"https://api.github.com/users/honzamoser/repos","events_url":"https://api.github.com/users/honzamoser/events{/privacy}","received_events_url":"https://api.github.com/users/honzamoser/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-21T15:38:24Z","updated_at":"2023-05-21T15:53:41Z","closed_at":"2023-05-21T15:53:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Describe the bug\r\n\r\nWhen using `fetch` on a server route, that is pre-rendered (`export const prerender = true`), the operation fails with a message of not found. It can't be requested externally either ie. through the browser. This only occurs when using the built version.\r\n\r\n### Reproduction\r\n\r\nhttps://www.sveltelab.dev/s3p4ypow5f1hy0u\r\n\r\nRun using\r\n```\r\nnpm run build\r\nnpm run preview\r\n```\r\n\r\n### Logs\r\n\r\n```Shell\r\nTypeError: fetch failed\r\n    at fetch (file:///home/httpswwwsveltelabdev-n1l0/node_modules/undici/index.js:109:13)\r\n    at async resolve (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:2663:14)\r\n    at async respond (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:2529:22)\r\n    at async fetch (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:2291:20)\r\n    at async Object.eval [as fetch] (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:2230:12)\r\n    at async load (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/entries/pages/_page.server.js:15:15)\r\n    at async load_server_data (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:540:18)\r\n    at async eval (file://file:///home/httpswwwsveltelabdev-n1l0/.svelte-kit/output/server/index.js:1900:18) {\r\n  cause: HTTPParserError: Response does not match the HTTP/1.1 protocol (Content-Length can't be present with Transfer-Encoding)\r\n      at Parser.execute (file:///home/httpswwwsveltelabdev-n1l0/node_modules/undici/lib/client.js:577:15)\r\n      at Parser.readMore (file:///home/httpswwwsveltelabdev-n1l0/node_modules/undici/lib/client.js:518:12)\r\n      at Socket.onSocketReadable (file:///home/httpswwwsveltelabdev-n1l0/node_modules/undici/lib/client.js:945:10)\r\n      at EventEmitter.emit (https://httpswwwsveltelabdev-n1l0.w-corp.staticblitz.com/blitz.9c8944bc.js:35:156830)\r\n      at emitReadable_ (https://httpswwwsveltelabdev-n1l0.w-corp.staticblitz.com/blitz.9c8944bc.js:35:729152)\r\n      at _0xe8552e (https://httpswwwsveltelabdev-n1l0.w-corp.staticblitz.com/blitz.9c8944bc.js:44:152768)\r\n      at https://httpswwwsveltelabdev-n1l0.w-corp.staticblitz.com/blitz.9c8944bc.js:44:152515 {\r\n    code: 'HPE_UNEXPECTED_CONTENT_LENGTH',\r\n    data: '{\"data\":\"Test Data\"}'\r\n  }\r\n}\r\n```\r\n\r\n\r\n### System Info\r\n\r\n```Shell\r\n(Github Codespace)\r\n  System:\r\n    OS: Linux 5.4 Ubuntu 20.04.6 LTS (Focal Fossa)\r\n    CPU: (2) x64 Intel(R) Xeon(R) Platinum 8272CL CPU @ 2.60GHz\r\n    Memory: 1.22 GB / 3.84 GB\r\n    Container: Yes\r\n    Shell: 5.0.17 - /bin/bash\r\n  Binaries:\r\n    Node: 19.9.0 - ~/nvm/current/bin/node\r\n    Yarn: 1.22.19 - /usr/bin/yarn\r\n    npm: 9.6.3 - ~/nvm/current/bin/npm\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^2.1.0 => 2.1.0 \r\n    @sveltejs/adapter-vercel: ^2.4.3 => 2.4.3 \r\n    @sveltejs/kit: ^1.18.0 => 1.18.0 \r\n    svelte: ^3.59.1 => 3.59.1 \r\n    vite: ^4.3.8 => 4.3.8\r\n```\r\n\r\n\r\n### Severity\r\n\r\nserious, but I can work around it\r\n\r\n### Additional Information\r\n\r\nThis was already an issue that was apparently resolved\r\n#8341 \r\n#8039 \r\n#8331 \r\n\r\nSupposed to be fixed in #8453 \r\n\r\nAlso discussed on the discord server.","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/10001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/10001/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]