[{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238413744","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1238413744","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1238413744,"node_id":"IC_kwDOEiPr8c5J0LGw","user":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T16:55:11Z","updated_at":"2022-09-06T16:55:11Z","body":"This sounds like the expected behavior to me? The `fetch` in server-side `load`s is meant to approximate the behavior of a browser `fetch`. So, any cookies set for this domain in the responses of any `fetch`es made in `load`s will be propagated to the final server-side-rendered response. These are the same cookies that would be set if the requests had been made from the browser.\r\n\r\nIs the issue that the PHP server is setting a session cookie only if it doesn't find one, and the SSR `fetch`es aren't forwarding along the session cookie automatically? If so, https://kit.svelte.dev/docs/hooks#handlefetch should be able to help you manually forward this cookie.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238413744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7332237105,"node_id":"LE_lADOEiPr8c5RRel-zwAAAAG1CQ8x","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7332237105","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-06T16:55:24Z","label":{"name":"awaiting submitter","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238438952","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1238438952","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1238438952,"node_id":"IC_kwDOEiPr8c5J0RQo","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T17:12:25Z","updated_at":"2022-09-06T17:12:25Z","body":"@Conduitry yes, passing along the cookie from the browser would be an option this would also have to contain the user agent. since our particular PHP application tracks the user-agent to make sure nothing funny is happening.\r\n\r\nThis would 'solve' my problem here ... but I think there is a deeper issue.\r\n\r\nWhile the path from browser to server-side fetch request requires extra work for information to flow. The path from the fetch request to the client response seems automatic.\r\n\r\nImagine a case where svelte app itself was storing information in a cookie, then made a server-side fetch request to some third party service. The third-party service would set a cookie with the same name as the one used in the svelte app. This new cookie would be passed on to the client which would then loose its session information vis-a-vie the svelte app.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238438952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7332392238,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG1C20u","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7332392238","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-06T17:12:25Z","performed_via_github_app":null},{"id":7332392250,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG1C206","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7332392250","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-06T17:12:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238450702","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1238450702","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1238450702,"node_id":"IC_kwDOEiPr8c5J0UIO","user":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T17:25:15Z","updated_at":"2022-09-06T17:25:15Z","body":"Is the issue that when the `set-cookie` header is passed along, it's losing what domain the cookie is supposed to be set on? That _should_ be happening (meaning a third-party service would only be able to set cookies on its own subdomains). If the `set-cookie` returned by SvelteKit is setting them on a different domain than the endpoint is setting them on (or than the endpoint would be allowed to set them on), then yes that sounds like a bug, but it would need a more specific reproduction. It's hard to talk about the expected behavior when I don't know which things are subdomains of what, and which things are setting cookies where, and for that I need a more explicit reproduction.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238450702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238481777","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1238481777","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1238481777,"node_id":"IC_kwDOEiPr8c5J0btx","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T17:59:05Z","updated_at":"2022-09-06T17:59:05Z","body":"Given the following setup ... \r\n\r\nIf the 3rd party service is using the same name for its session cookie as the svelte-app, you run in to trouble when server-side\r\nfetch just passes along any cookies it gets from the 3rd party app.\r\n\r\nAs long as the fetch is executed on the browser all will be well, as the two session cookies will be kept separate ... \r\n\r\n```\r\n+--------------------------------------+                                            \r\n|+------------------------------------+|                                            \r\n||         https://svelte-app         ||                                            \r\n|+------------------------------------+|                                            \r\n|               Browser                |                                            \r\n|                                      --------------------------+                  \r\n|                                      |                         |                  \r\n|                                      |                         |                  \r\n|                                      |                         |                  \r\n+-------------------|------------------+                         |                  \r\n                    |                                            |                  \r\n                    |                                            |                  \r\n+-------------------|------------------+      +------------------|-----------------+\r\n|                                      |      |                                    |\r\n|                                      |      |                                    |\r\n|              Svelte App              --------        3rd Party Webservice        |\r\n|                                      |      |                                    |\r\n|                                      |      |                                    |\r\n+--------------------------------------+      +------------------------------------+\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238481777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238952816","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1238952816","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1238952816,"node_id":"IC_kwDOEiPr8c5J2Otw","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T06:15:41Z","updated_at":"2022-09-07T06:15:41Z","body":"I don't 100% understand the issue - again, it really does need a repro, we don't ask for one just to make you jump through hoops - but it sounds like the problem is that `set-cookie` headers from an external domain don't include said domain in the header, and we should fill that in (and possibly `path`? need to refresh my memory on the behavior) when we include the cookie in the response to the browser","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1238952816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239051538","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1239051538","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1239051538,"node_id":"IC_kwDOEiPr8c5J2m0S","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T08:06:14Z","updated_at":"2022-09-07T09:36:12Z","body":"@Rich-Harris\r\n\r\n* in your svelte page you use fetch to pull some data from a 3rd party service\r\n* in the response from the 3rd party service there is a 'set-cookie' header\r\n\r\nIf your svelte page runs on the browser, the cookie will go into the browsers cookie db, and the next time you talk to the thrid-party, the cookie goes out with the request ... all automatic\r\n\r\nIf your svelte(kit) page is rendered on the server, again the response from the 3rd party will contain a set-cookie header ... \r\n\r\nInterestingly enough, the browser, when it gets the (pre rendered) svelte page from the server, will find the same 'set-cookie' header in that server response which was sent from the 3rd party service.\r\n\r\nIn the browser, this cookie is now associated with the svelte server and not with the 3rd party service.\r\n\r\nSo when the browser talks to the svelte server next, it will send the cookie along ... \r\n\r\nIn most cases this is fine, and will even be helpful, because when svelte constructs another server-side request to the 3rd party service you can forward the cookie to the 3rd party service ...\r\n\r\nThe problem is that the forwarding of the cookies from the thrid-party service to the browser happens involuntarily and there is no name spacing ... \r\n\r\nWhile cookies from different sites are separated in the borwsers cookie db according to their domain, the cookies forwarded via svelte all end up in the same box. So if two third-party services were to use PHPSESSID (this could never happen surely) then things would become quite confusing.\r\n\r\nBottom line, do NOT automatically forward cookies from third party services.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239051538/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7336477646,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG1ScPO","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7336477646","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-07T08:06:14Z","performed_via_github_app":null},{"id":7336477654,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG1ScPW","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7336477654","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-07T08:06:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239377702","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1239377702","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1239377702,"node_id":"IC_kwDOEiPr8c5J32cm","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T13:17:11Z","updated_at":"2022-09-07T13:17:11Z","body":"guess here is where this whole 'problem' started #1198 ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239377702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239475975","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1239475975","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1239475975,"node_id":"IC_kwDOEiPr8c5J4OcH","user":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T14:35:16Z","updated_at":"2022-09-08T00:17:01Z","body":"@oetiker\r\nIf that is really the case, it sounds like a bug.\r\n~~But I can not imagine that this is the case, unless your 3rd-party services have the same domain that your app has.\r\nDo you have a repro?~~\r\n\r\n~~See~~\r\nhttps://github.com/sveltejs/kit/blob/4922e26856681fdfbe3afb1a31be0d7c7000283f/packages/kit/src/runtime/server/page/fetch.js#L34-L35\r\n\r\n\r\n\r\n> guess here is where this whole 'problem' started #1198\r\n\r\n~~The code I mentioned was added in the PR that fixed this issue.~~","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239475975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7339523235,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG1eDyj","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7339523235","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-07T14:35:17Z","performed_via_github_app":null},{"id":7339523241,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG1eDyp","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7339523241","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-07T14:35:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239542842","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1239542842","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1239542842,"node_id":"IC_kwDOEiPr8c5J4ew6","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T15:29:08Z","updated_at":"2022-09-07T15:29:08Z","body":"@PatrickG is url, the url the browser uses to talk to the svelte server ? if so, the problem is slightly different to what I thought it was.\r\n\r\nIn our case svelte and a headles cms with graphql support run on the same website, merged via a proxy. Whenever you access anything from the cms/graphql you get a session cookie. When logging into the cms-admin page your cookie is the ticket to greater access ... as usual.\r\n\r\nNow, when the svelte page is rendered in the browser, all works fine, since fetch already has a cookie, nothing strange happens.\r\n\r\nIf the svelte page is rendered serverside, it also fetches, but has no cookie yet, so it gets a new one and sends this along to the browser, blindly overwriting the existing one, killing the session.\r\n\r\nThere are two ways to fix this.\r\n\r\na) do not send cookies you got via fetch ssr\r\nb) pass the cookie from the browser along to the backend so that it can be set in the SSR fetch.\r\n\r\ncurrently the cookie is passed automatically from the backend to the browser, but the cookie set in the browser is not passed along in the backend ... \r\n\r\nSo either the cookies should be passed both ways (if the URL matches) or not at all ... \r\n\r\nThanks for pointing out that the behaviour is limited to matching urls ... ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239542842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7339996710,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG1f3Ym","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7339996710","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-07T15:29:08Z","performed_via_github_app":null},{"id":7339996721,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG1f3Yx","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7339996721","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-07T15:29:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239613051","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1239613051","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1239613051,"node_id":"IC_kwDOEiPr8c5J4v57","user":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T16:22:17Z","updated_at":"2022-09-08T00:15:51Z","body":"After looking at the code some more, I'm not really sure anymore that it works like I expected it to work.\r\n\r\nEdit: Yes, I was wrong\r\n\r\nhttps://github.com/sveltejs/kit/blob/4922e26856681fdfbe3afb1a31be0d7c7000283f/packages/kit/src/runtime/server/page/fetch.js#L34-L35\r\n\r\nThis only verifies that the cookies sent to the external service are intended for them.\r\nThe cookies from the external service are forwarded to your app.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1239613051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240035098","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1240035098","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1240035098,"node_id":"IC_kwDOEiPr8c5J6W8a","user":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T00:03:16Z","updated_at":"2022-09-08T00:10:50Z","body":"Okay, I did a little repro.\r\nIt seems that you can't set cookies on StackBlitz, so I used replit (a bit slow, sveltekit runtime might be a bit out of date, I used a template that was created Aug 24, 2022).\r\n\r\nThe sveltekit app: https://sveltekit-cookies-3.pehgeh.repl.co/ (source https://replit.com/@PehGeh/sveltekit-cookies-3)\r\nExternal service 1: https://sveltekit-cookies-1.pehgeh.repl.co/ (source https://replit.com/@PehGeh/sveltekit-cookies-1)\r\nExternal service 2: https://sveltekit-cookies-2.pehgeh.repl.co/ (source https://replit.com/@PehGeh/sveltekit-cookies-2)\r\n\r\nBoth external services set a cookie `TestCookie` to `external-1` and `external-2`.\r\nIf you go to the sveltekit app, it sets a cookie `TestCookie` to `external-2`. (In fact, it sends two `set-cookie` headers)\r\nImagine your sveltekit app uses a cookie with the same name.\r\n\r\nI think these cookies need to be prefixed with the domain or something.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240035098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240295534","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1240295534","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1240295534,"node_id":"IC_kwDOEiPr8c5J7Whu","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T06:47:52Z","updated_at":"2022-09-08T06:47:52Z","body":"@PatrickG since a cookie acquired while contacting a third party site in SSR can not be added to the browser's cookie store in a way that it can be used when the browser talks to the third party site directly, it makes little sense sending the cookies to the browser as cookies. How about providing some infrastructure to access the cookie jar in hook.js so that the information can be sent to the browser in a controlled manner ... \r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240295534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7344603188,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG1xcA0","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7344603188","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-08T06:47:53Z","performed_via_github_app":null},{"id":7344603195,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG1xcA7","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7344603195","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-08T06:47:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240699281","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1240699281","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1240699281,"node_id":"IC_kwDOEiPr8c5J85GR","user":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T13:12:14Z","updated_at":"2022-09-08T13:14:34Z","body":"@oetiker yeah that's true, the cookie would not be sent if we had navigated to the route via csr afterwards.\r\nI don't know how a hook could solve this.\r\nIf the 3rd party service needs that cookie to identify you, I guess you **must** proxy it with an endpoint.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240699281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7347672512,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG19JXA","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7347672512","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-08T13:12:15Z","performed_via_github_app":null},{"id":7347672522,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG19JXK","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7347672522","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-08T13:12:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240848949","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1240848949","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1240848949,"node_id":"IC_kwDOEiPr8c5J9do1","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T15:07:54Z","updated_at":"2022-09-08T15:08:11Z","body":"> @oetiker yeah that's true, the cookie would not be sent if we had navigated to the route via csr afterwards. I don't know how a hook could solve this. If the 3rd party service needs that cookie to identify you, I guess you **must** proxy it with an endpoint.\r\n\r\nyes totally ... \r\n\r\nThe bottom line remains though, sending cookies to the browser which have been acquired while talking to 3rd party services is probably a bad idea ... unless the application asks for this explicitly.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240848949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7348779566,"node_id":"MEE_lADOEiPr8c5RRel-zwAAAAG2BXou","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7348779566","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-08T15:07:55Z","performed_via_github_app":null},{"id":7348779575,"node_id":"SE_lADOEiPr8c5RRel-zwAAAAG2BXo3","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7348779575","actor":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-08T15:07:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240895649","html_url":"https://github.com/sveltejs/kit/issues/6604#issuecomment-1240895649","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6604","id":1240895649,"node_id":"IC_kwDOEiPr8c5J9pCh","user":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T15:43:50Z","updated_at":"2022-09-08T15:44:45Z","body":"> The bottom line remains though, sending cookies to the browser which have been acquired while talking to 3rd party services is probably a bad idea ... unless the application asks for this explicitly.\r\n\r\nRight, I wonder if the forwarding has any benefit at all if the external service is not running on the same domain (or a sub-domain).\r\nIt would make sense for `ServerLoad` (still would require a prefix of the cookie-name in my opinion), but there is no special `fetch` for them.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1240895649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PatrickG","id":196478,"node_id":"MDQ6VXNlcjE5NjQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/196478?v=4","gravatar_id":"","url":"https://api.github.com/users/PatrickG","html_url":"https://github.com/PatrickG","followers_url":"https://api.github.com/users/PatrickG/followers","following_url":"https://api.github.com/users/PatrickG/following{/other_user}","gists_url":"https://api.github.com/users/PatrickG/gists{/gist_id}","starred_url":"https://api.github.com/users/PatrickG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PatrickG/subscriptions","organizations_url":"https://api.github.com/users/PatrickG/orgs","repos_url":"https://api.github.com/users/PatrickG/repos","events_url":"https://api.github.com/users/PatrickG/events{/privacy}","received_events_url":"https://api.github.com/users/PatrickG/received_events","type":"User","user_view_type":"public","site_admin":false}}]