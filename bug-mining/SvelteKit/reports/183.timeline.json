[{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233567915","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1233567915","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1233567915,"node_id":"IC_kwDOEiPr8c5JhsCr","user":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T23:58:09Z","updated_at":"2022-08-31T23:58:09Z","body":"Do you have another idea of how to avoid #5725 without adding in a hard coded reference to `tauri:`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233567915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233650328","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1233650328","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1233650328,"node_id":"IC_kwDOEiPr8c5JiAKY","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T02:10:10Z","updated_at":"2022-09-01T02:10:10Z","body":"Could we just check if `url.protocol === location.protocol`? Not sure why we're not already doing that to be honest","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233650328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233650712","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1233650712","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1233650712,"node_id":"IC_kwDOEiPr8c5JiAQY","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T02:10:45Z","updated_at":"2022-09-01T02:10:45Z","body":"Or `url.origin === location.origin` for that matter","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233650712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233651928","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1233651928","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1233651928,"node_id":"IC_kwDOEiPr8c5JiAjY","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T02:12:53Z","updated_at":"2022-09-01T02:12:53Z","body":"Oh actually, looking at the code, we don't `return` at this point if `origin` differs because we want to run `beforeNavigate` functions for cross-document navigations (e.g. to pop up the 'you have unsaved changes' dialog). So it isn't _quite_ that simple","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233651928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233684938","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1233684938","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1233684938,"node_id":"IC_kwDOEiPr8c5JiInK","user":{"login":"stephenlrandall","id":41397226,"node_id":"MDQ6VXNlcjQxMzk3MjI2","avatar_url":"https://avatars.githubusercontent.com/u/41397226?v=4","gravatar_id":"","url":"https://api.github.com/users/stephenlrandall","html_url":"https://github.com/stephenlrandall","followers_url":"https://api.github.com/users/stephenlrandall/followers","following_url":"https://api.github.com/users/stephenlrandall/following{/other_user}","gists_url":"https://api.github.com/users/stephenlrandall/gists{/gist_id}","starred_url":"https://api.github.com/users/stephenlrandall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephenlrandall/subscriptions","organizations_url":"https://api.github.com/users/stephenlrandall/orgs","repos_url":"https://api.github.com/users/stephenlrandall/repos","events_url":"https://api.github.com/users/stephenlrandall/events{/privacy}","received_events_url":"https://api.github.com/users/stephenlrandall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T03:13:04Z","updated_at":"2022-09-01T03:13:04Z","body":"> Do you have another idea of how to avoid #5725 without adding in a hard coded reference to `tauri:`?\r\n\r\nI don't entirely know the intent behind the check so it's hard to say. If it's to intercept certain actions, then perhaps checking for those specifically instead of a blanket check to only allow `http(s)`?\r\n\r\nSomething more flexible would be to allow users to set their own \"allowed\" protocols (or disallowed, if the default is flipped), although I would understand not wanting to add configuration file bloat.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1233684938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stephenlrandall","id":41397226,"node_id":"MDQ6VXNlcjQxMzk3MjI2","avatar_url":"https://avatars.githubusercontent.com/u/41397226?v=4","gravatar_id":"","url":"https://api.github.com/users/stephenlrandall","html_url":"https://github.com/stephenlrandall","followers_url":"https://api.github.com/users/stephenlrandall/followers","following_url":"https://api.github.com/users/stephenlrandall/following{/other_user}","gists_url":"https://api.github.com/users/stephenlrandall/gists{/gist_id}","starred_url":"https://api.github.com/users/stephenlrandall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephenlrandall/subscriptions","organizations_url":"https://api.github.com/users/stephenlrandall/orgs","repos_url":"https://api.github.com/users/stephenlrandall/repos","events_url":"https://api.github.com/users/stephenlrandall/events{/privacy}","received_events_url":"https://api.github.com/users/stephenlrandall/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7317553986,"node_id":"MIE_lADOEiPr8c5Q8fyvzwAAAAG0KQNC","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7317553986","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-09-03T20:49:27Z","milestone":{"title":"1.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1251160370","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1251160370","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1251160370,"node_id":"IC_kwDOEiPr8c5KkzEy","user":{"login":"stephenlrandall","id":41397226,"node_id":"MDQ6VXNlcjQxMzk3MjI2","avatar_url":"https://avatars.githubusercontent.com/u/41397226?v=4","gravatar_id":"","url":"https://api.github.com/users/stephenlrandall","html_url":"https://github.com/stephenlrandall","followers_url":"https://api.github.com/users/stephenlrandall/followers","following_url":"https://api.github.com/users/stephenlrandall/following{/other_user}","gists_url":"https://api.github.com/users/stephenlrandall/gists{/gist_id}","starred_url":"https://api.github.com/users/stephenlrandall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephenlrandall/subscriptions","organizations_url":"https://api.github.com/users/stephenlrandall/orgs","repos_url":"https://api.github.com/users/stephenlrandall/repos","events_url":"https://api.github.com/users/stephenlrandall/events{/privacy}","received_events_url":"https://api.github.com/users/stephenlrandall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T15:12:16Z","updated_at":"2022-09-19T15:12:16Z","body":"Related (really, the same) issue: https://github.com/sveltejs/kit/issues/6166","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1251160370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stephenlrandall","id":41397226,"node_id":"MDQ6VXNlcjQxMzk3MjI2","avatar_url":"https://avatars.githubusercontent.com/u/41397226?v=4","gravatar_id":"","url":"https://api.github.com/users/stephenlrandall","html_url":"https://github.com/stephenlrandall","followers_url":"https://api.github.com/users/stephenlrandall/followers","following_url":"https://api.github.com/users/stephenlrandall/following{/other_user}","gists_url":"https://api.github.com/users/stephenlrandall/gists{/gist_id}","starred_url":"https://api.github.com/users/stephenlrandall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephenlrandall/subscriptions","organizations_url":"https://api.github.com/users/stephenlrandall/orgs","repos_url":"https://api.github.com/users/stephenlrandall/repos","events_url":"https://api.github.com/users/stephenlrandall/events{/privacy}","received_events_url":"https://api.github.com/users/stephenlrandall/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1258920752","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1258920752","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1258920752,"node_id":"IC_kwDOEiPr8c5LCZsw","user":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T03:28:18Z","updated_at":"2022-09-27T03:28:18Z","body":"> Related (really, the same) issue: #6166\r\n\r\nHi, do you mind telling me how you circumvent this issue? Trying to see if there's a better solution than mine. For me, I'm facing the same problem with electron (that annoyingly works in dev but not build). What I ended up doing was to use `goto` from `$app/navigation` instead of a href on my anchor tag and it seems to be working fine.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1258920752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T15:53:24Z","updated_at":"2022-09-28T15:53:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/6166","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/6166/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/6166/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/6166/events","html_url":"https://github.com/sveltejs/kit/issues/6166","id":1346779737,"node_id":"I_kwDOEiPr8c5QRjpZ","number":6166,"title":"Stores get reset on page change/reloads starting on kit v.1.0.0-next.398","user":{"login":"Layendan","id":46062388,"node_id":"MDQ6VXNlcjQ2MDYyMzg4","avatar_url":"https://avatars.githubusercontent.com/u/46062388?v=4","gravatar_id":"","url":"https://api.github.com/users/Layendan","html_url":"https://github.com/Layendan","followers_url":"https://api.github.com/users/Layendan/followers","following_url":"https://api.github.com/users/Layendan/following{/other_user}","gists_url":"https://api.github.com/users/Layendan/gists{/gist_id}","starred_url":"https://api.github.com/users/Layendan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Layendan/subscriptions","organizations_url":"https://api.github.com/users/Layendan/orgs","repos_url":"https://api.github.com/users/Layendan/repos","events_url":"https://api.github.com/users/Layendan/events{/privacy}","received_events_url":"https://api.github.com/users/Layendan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/3","html_url":"https://github.com/sveltejs/kit/milestone/3","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/3/labels","id":6045098,"node_id":"MDk6TWlsZXN0b25lNjA0NTA5OA==","number":3,"title":"non-urgent","description":"stuff that's not time-sensitive","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":121,"closed_issues":235,"state":"open","created_at":"2020-10-29T02:28:56Z","updated_at":"2025-10-03T09:31:01Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2022-08-22T17:49:29Z","updated_at":"2022-09-28T15:53:25Z","closed_at":"2022-09-28T15:53:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Describe the bug\n\nWhen building a sveltekit app using the static adapter plugin, Tauri, and sveltekit version next.398+, navigating between pages triggers a full page reload, resetting stores in the app, and rerendering the whole page.\n\n### Reproduction\n\nSorry for linking the whole project, but I have no idea where the point of failure is.\r\n\r\n1. Clone or Fork - https://github.com/Layendan/NineAnimator-Tauri\r\n2. Have Rust, Node, and Yarn installed\r\n3. Run `yarn build` to build the application\r\n4. Open the app and go to the *settings* tab on the top right\r\n5. Scroll down until the theme selection and choose `dark` or `light` (whichever one you are not currently using)\r\n6. Navigate back to any other tab using <kbd>Cmd</kbd> / <kbd>Alt</kbd> + <kbd>Left</kbd> or by clicking another tab in the navigation bar\r\n7. The theme, which is saved in a store, should be reset to the default theme.\r\n\r\nUsing `svelte dev` instead of `svelte build` will not reciprocate this problem and will render pages correctly.\n\n### Logs\n\n```shell\nNo logs are created\n```\n\n\n### System Info\n\n```shell\nSystem:\r\n    OS: macOS 12.5\r\n    CPU: (8) arm64 Apple M1\r\n    Memory: 473.59 MB / 16.00 GB\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.0.0 - /usr/local/bin/node\r\n    Yarn: 1.22.19 - ~/.yarn/bin/yarn\r\n    npm: 8.6.0 - /usr/local/bin/npm\r\n  Browsers:\r\n    Chrome: 104.0.5112.101\r\n    Safari: 15.6\r\n  npmPackages:\r\n    @sveltejs/adapter-static: ^1.0.0-next.39 => 1.0.0-next.39 \r\n    @sveltejs/kit: 1.0.0-next.428 => 1.0.0-next.428 \r\n    svelte: ^3.49.0 => 3.49.0 \r\n    vite: ^3.0.9 => 3.0.9 \r\n\r\n\r\nTauri Info:\r\nEnvironment\r\n  › OS: Mac OS 12.5.0 X64\r\n  › Node.js: 18.0.0\r\n  › npm: 8.6.0\r\n  › pnpm: Not installed!\r\n  › yarn: 1.22.19\r\n  › rustup: 1.25.1\r\n  › rustc: 1.61.0\r\n  › cargo: 1.61.0\r\n  › Rust toolchain: stable-aarch64-apple-darwin \r\n\r\nPackages\r\n  › @tauri-apps/cli [NPM]: 1.0.5\r\n  › @tauri-apps/api [NPM]: 1.0.2\r\n  › tauri [RUST]: 1.0.5,\r\n  › tauri-build [RUST]: 1.0.4,\r\n  › tao [RUST]: 0.12.2,\r\n  › wry [RUST]: 0.19.0,\r\n\r\nApp\r\n  › build-type: bundle\r\n  › CSP: asset 'https://asset.localhost';\r\n  › distDir: ../build\r\n  › devPath: http://localhost:3000/\r\n  › framework: Svelte\r\n\r\nApp directory structure\r\n  ├─ Misc\r\n  ├─ target\r\n  ├─ node_modules\r\n  ├─ static\r\n  ├─ .github\r\n  ├─ src-tauri\r\n  ├─ .svelte-kit\r\n  ├─ build\r\n  ├─ .git\r\n  └─ src\n```\n\n\n### Severity\n\nserious, but I can work around it\n\n### Additional Information\n\nI can currently work around this issue using LocalStorage/SessionStorage; however, I would much rather not have to use those for a smoother user experience and fewer system calls.\r\n\r\nI have also talked about this in discord and am willing to continue with it over there: [Discord Thread](https://ptb.discord.com/channels/457912077277855764/1005630446702436452)","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/6166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/6166/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":7479355880,"node_id":"REFE_lADOEiPr8c5Q8fyvzwAAAAG9zeno","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7479355880","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2f00ca39cd6e823c1c182ac9126a59a41c61b80","commit_url":"https://api.github.com/repos/sveltejs/kit/commits/b2f00ca39cd6e823c1c182ac9126a59a41c61b80","created_at":"2022-09-28T15:54:00Z","performed_via_github_app":null},{"actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T15:55:16Z","updated_at":"2022-09-28T15:55:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/7067","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/7067/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/7067/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/7067/events","html_url":"https://github.com/sveltejs/kit/pull/7067","id":1389598503,"node_id":"PR_kwDOEiPr8c4_ypeg","number":7067,"title":"[fix] better navigation protocol check","user":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-09-28T15:55:16Z","updated_at":"2022-10-13T07:32:10Z","closed_at":"2022-10-13T07:32:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sveltejs/kit/pulls/7067","html_url":"https://github.com/sveltejs/kit/pull/7067","diff_url":"https://github.com/sveltejs/kit/pull/7067.diff","patch_url":"https://github.com/sveltejs/kit/pull/7067.patch","merged_at":"2022-10-13T07:32:08Z"},"body":"Fixes #6496\r\n\r\nTakes the approach mentioned here: https://github.com/sveltejs/kit/issues/6496#issuecomment-1233650328\r\nMaybe @Rich-Harris can shed some light on what he ment with the two follow-up comments: Why checking the origin would be better, or why it isn't that easy after all (if you use the protocol check, it is easy, unless I missed something)\r\n\r\nEdit: I'm answering this myself - when the protocol is different, we don't know if this will result in \"nothing\" (like `mailto:`) or an external navigation - which is why the logic isn't that easy (I guess that's what Rich meant). I think we should finalize and merge \r\n#6813 first and then come back to this to figure out the best way to handle this. My idea is to \"take note\" of the navigation if the protocol is different, and then in `beforeUnload` check if the \"note\" is still present, and then fire a `beforeNavigate` event with the correct data, else, nothing happens and the \"note\" is cleared. Having written this, maybe it's easier to incorporate this into #6813 - will take a look at that PR.\r\n\r\nEdit 2: I think \"is the protocol different, and if yes, is it something else than http(s)\" will work for 99,9% of all use cases - I updated the code to that. The only thing where that should be buggy is when you are running the app on a different protocol, and the link points to yet another protocol which should be treated as an external navigation - in this case, we don't fire `beforeNavigate` when we should, but that's ok I guess. The alternative \"take note\" thing would look something like \"in all cases where we return early from the nav click handler, populate set `before_external_navigate` variable to a function which triggers before navigate with the info about the URL, and unset it after a few miliseconds - if `beforeunload` fires within that time, we invoke that function. This is sensitive to race conditions/things making our `beforeunload` event fire too late.\r\n\r\n### Please don't delete this checklist! Before submitting the PR, please make sure you do the following:\r\n- [x] It's really useful if your PR references an issue where it is discussed ahead of time. In many cases, features are absent for a reason. For large changes, please create an RFC: https://github.com/sveltejs/rfcs\r\n- [x] This message body should clearly illustrate what problems it solves.\r\n- [ ] Ideally, include a test that fails without this PR but passes with it.\r\n\r\n### Tests\r\n- [x] Run the tests with `pnpm test` and lint the project with `pnpm lint` and `pnpm check`\r\n\r\n### Changesets\r\n- [x] If your PR makes a change that should be noted in one or more packages' changelogs, generate a changeset by running `pnpm changeset` and following the prompts. All changesets should be `patch` until SvelteKit 1.0\r\n","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/7067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/7067/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T19:15:15Z","updated_at":"2022-09-28T19:15:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/6813","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/6813/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/6813/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/6813/events","html_url":"https://github.com/sveltejs/kit/pull/6813","id":1373467502,"node_id":"PR_kwDOEiPr8c4--G3-","number":6813,"title":"[breaking] beforeNavigate external link","user":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3229669367,"node_id":"MDU6TGFiZWwzMjI5NjY5MzY3","url":"https://api.github.com/repos/sveltejs/kit/labels/breaking%20change","name":"breaking change","color":"F859C7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":29,"created_at":"2022-09-14T19:15:20Z","updated_at":"2022-11-04T19:25:56Z","closed_at":"2022-11-04T19:25:55Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sveltejs/kit/pulls/6813","html_url":"https://github.com/sveltejs/kit/pull/6813","diff_url":"https://github.com/sveltejs/kit/pull/6813.diff","patch_url":"https://github.com/sveltejs/kit/pull/6813.patch","merged_at":"2022-11-04T19:25:55Z"},"body":"## Breaking change\r\n\r\n`type: 'load'` has been renamed to `type: 'enter'`:\r\n\r\n```diff\r\nafterNavigate(({ type }) => {\r\n-  if (type === 'load') {\r\n+ if (type === 'enter') {\r\n// ...\r\n})\r\n```\r\n\r\n`type: 'unload'` has been renamed to `type: 'leave'`:\r\n\r\n```diff\r\nbeforeNavigate(({ type }) => {\r\n-  if (type === 'unload') {\r\n+ if (type === 'leave') {\r\n// ...\r\n})\r\n```\r\n\r\nFix: `type: 'leave'` (formerly `type: 'unload'`) will no longer be fired for external link clicks (in addition to `type: 'link/goto'`, resulting in two `beforeNavigate` events), instead it will be `type: 'link/goto'` with `willUnload: true`\r\n\r\n## New feature\r\n\r\nUse the `willUnload` property to find out if the navigation will result the app being unloaded (full page reload/ closing/ leaving to another page).\r\n\r\n```js\r\nbeforeNavigate(({ willUnload }) => {\r\n  if (willUnload) {\r\n  // ...\r\n})\r\n```\r\n\r\n## PR description\r\n\r\nCall beforeNavigate once with type unload on external navigation\r\n\r\nFixes #6726\r\nFixes #6770\r\n\r\nGiven the reasons in https://github.com/sveltejs/kit/issues/6726#issuecomment-1247106719 I think this is the most sensible thing to do\r\n\r\n### Please don't delete this checklist! Before submitting the PR, please make sure you do the following:\r\n- [x] It's really useful if your PR references an issue where it is discussed ahead of time. In many cases, features are absent for a reason. For large changes, please create an RFC: https://github.com/sveltejs/rfcs\r\n- [x] This message body should clearly illustrate what problems it solves.\r\n- [x] Ideally, include a test that fails without this PR but passes with it.\r\n\r\n### Tests\r\n- [x] Run the tests with `pnpm test` and lint the project with `pnpm lint` and `pnpm check`\r\n\r\n### Changesets\r\n- [x] If your PR makes a change that should be noted in one or more packages' changelogs, generate a changeset by running `pnpm changeset` and following the prompts. All changesets should be `patch` until SvelteKit 1.0\r\n","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/6813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/6813/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7578281681,"node_id":"CE_lADOEiPr8c5Q8fyvzwAAAAHDs2bR","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7578281681","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-10-13T07:32:10Z","state_reason":null,"performed_via_github_app":null},{"id":7578281866,"node_id":"REFE_lADOEiPr8c5Q8fyvzwAAAAHDs2eK","url":"https://api.github.com/repos/sveltejs/kit/issues/events/7578281866","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"931cebc955663c0dcd08569f5fc362bc6f5ef32c","commit_url":"https://api.github.com/repos/sveltejs/kit/commits/931cebc955663c0dcd08569f5fc362bc6f5ef32c","created_at":"2022-10-13T07:32:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301815585","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1301815585","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1301815585,"node_id":"IC_kwDOEiPr8c5NmCEh","user":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T09:08:33Z","updated_at":"2022-11-03T09:08:33Z","body":"Hmm... I'm still facing the same issue even after the upgrade. I'm not sure if it might be an electron configuration issue on my end. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301815585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301831331","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1301831331","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1301831331,"node_id":"IC_kwDOEiPr8c5NmF6j","user":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T09:24:05Z","updated_at":"2022-11-03T09:24:05Z","body":"Are you sure it's the same underlying issue? Could you add a `console.log(url.protocol, location.protocol)` before `return` for the if that contains `!(url.protocol === 'https:' || url.protocol === 'http:'` inside `node_modules/@sveltejs/kit/src/runtime/client/client.js\r\n`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301831331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301867678","html_url":"https://github.com/sveltejs/kit/issues/6496#issuecomment-1301867678","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/6496","id":1301867678,"node_id":"IC_kwDOEiPr8c5NmOye","user":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T09:59:27Z","updated_at":"2022-11-03T09:59:27Z","body":"My bad. I didn't realise that my version of sveltekit is wrong. It is working now. Thanks for the fix!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1301867678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kalsyc","id":45655404,"node_id":"MDQ6VXNlcjQ1NjU1NDA0","avatar_url":"https://avatars.githubusercontent.com/u/45655404?v=4","gravatar_id":"","url":"https://api.github.com/users/Kalsyc","html_url":"https://github.com/Kalsyc","followers_url":"https://api.github.com/users/Kalsyc/followers","following_url":"https://api.github.com/users/Kalsyc/following{/other_user}","gists_url":"https://api.github.com/users/Kalsyc/gists{/gist_id}","starred_url":"https://api.github.com/users/Kalsyc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kalsyc/subscriptions","organizations_url":"https://api.github.com/users/Kalsyc/orgs","repos_url":"https://api.github.com/users/Kalsyc/repos","events_url":"https://api.github.com/users/Kalsyc/events{/privacy}","received_events_url":"https://api.github.com/users/Kalsyc/received_events","type":"User","user_view_type":"public","site_admin":false}}]