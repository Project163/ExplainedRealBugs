{"url":"https://api.github.com/repos/sveltejs/kit/issues/5693","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/5693/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/5693/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/5693/events","html_url":"https://github.com/sveltejs/kit/issues/5693","id":1315901911,"node_id":"I_kwDOEiPr8c5ObxHX","number":5693,"title":"$page store not correctly updating","user":{"login":"mattpilott","id":2401925,"node_id":"MDQ6VXNlcjI0MDE5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/2401925?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpilott","html_url":"https://github.com/mattpilott","followers_url":"https://api.github.com/users/mattpilott/followers","following_url":"https://api.github.com/users/mattpilott/following{/other_user}","gists_url":"https://api.github.com/users/mattpilott/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpilott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpilott/subscriptions","organizations_url":"https://api.github.com/users/mattpilott/orgs","repos_url":"https://api.github.com/users/mattpilott/repos","events_url":"https://api.github.com/users/mattpilott/events{/privacy}","received_events_url":"https://api.github.com/users/mattpilott/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2850697519,"node_id":"MDU6TGFiZWwyODUwNjk3NTE5","url":"https://api.github.com/repos/sveltejs/kit/labels/router","name":"router","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/2","html_url":"https://github.com/sveltejs/kit/milestone/2","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/2/labels","id":6044960,"node_id":"MDk6TWlsZXN0b25lNjA0NDk2MA==","number":2,"title":"1.0","description":"stuff we need to nail down before launch","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":628,"state":"closed","created_at":"2020-10-29T01:17:50Z","updated_at":"2022-12-19T11:47:29Z","due_on":null,"closed_at":"2022-12-19T11:47:29Z"},"comments":2,"created_at":"2022-07-24T13:01:11Z","updated_at":"2022-09-14T15:44:25Z","closed_at":"2022-09-14T15:44:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen watching for url changes the store seems to stop being reactive after a short while.\r\n\r\nFor example in my repro, i have a link that appends `#modal` to the url, i then have a modal component using the page store to watch this change and show some html, initially it works as expected but after opening then closing then opening then closing again that last close stops working.\r\n\r\nThere are no errors\n\n### Reproduction\n\nhttps://github.com/mattpilott/sveltekit-page-store-issue\n\n### Logs\n\n_No response_\n\n### System Info\n\n```shell\nSystem:\r\n    OS: macOS 13.0\r\n    CPU: (10) arm64 Apple M1 Max\r\n    Memory: 4.57 GB / 32.00 GB\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.6.0 - /opt/homebrew/bin/node\r\n    npm: 8.15.0 - /opt/homebrew/bin/npm\r\n  Browsers:\r\n    Chrome: 103.0.5060.134\r\n    Firefox: 102.0.1\r\n    Safari: 16.0\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: next => 1.0.0-next.63 \r\n    @sveltejs/kit: next => 1.0.0-next.392 \r\n    svelte: ^3.44.0 => 3.49.0 \r\n    vite: ^3.0.0 => 3.0.2\n```\n\n\n### Severity\n\nserious, but I can work around it\n\n### Additional Information\n\n# How to repro\r\n1. Clone repo `git clone`\r\n2. Install deps `npm i`\r\n3. Run dev server `npm run dev`\r\n4. Open browser `http://localhost:5173`\r\n5. Click link `Open Modal`\r\n6. Click link `Close me`\r\n7. Click link `Open Modal` again\r\n8. Click link `Close me` again\r\n9. Issue will happen `modal wont close even though url is updated`\r\n","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/5693/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/5693/timeline","performed_via_github_app":null,"state_reason":"completed"}