{"url":"https://api.github.com/repos/sveltejs/kit/issues/5543","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/5543/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/5543/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/5543/events","html_url":"https://github.com/sveltejs/kit/issues/5543","id":1305679887,"node_id":"I_kwDOEiPr8c5N0xgP","number":5543,"title":"vercel adapter 1.0.0-next.62 build errors with `Cannot find module..`","user":{"login":"tsukhu","id":846306,"node_id":"MDQ6VXNlcjg0NjMwNg==","avatar_url":"https://avatars.githubusercontent.com/u/846306?v=4","gravatar_id":"","url":"https://api.github.com/users/tsukhu","html_url":"https://github.com/tsukhu","followers_url":"https://api.github.com/users/tsukhu/followers","following_url":"https://api.github.com/users/tsukhu/following{/other_user}","gists_url":"https://api.github.com/users/tsukhu/gists{/gist_id}","starred_url":"https://api.github.com/users/tsukhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsukhu/subscriptions","organizations_url":"https://api.github.com/users/tsukhu/orgs","repos_url":"https://api.github.com/users/tsukhu/repos","events_url":"https://api.github.com/users/tsukhu/events{/privacy}","received_events_url":"https://api.github.com/users/tsukhu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2851466119,"node_id":"MDU6TGFiZWwyODUxNDY2MTE5","url":"https://api.github.com/repos/sveltejs/kit/labels/pkg:adapter-vercel","name":"pkg:adapter-vercel","color":"33818A","default":false,"description":"Pertaining to the Vercel adapter"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-07-15T07:24:41Z","updated_at":"2022-07-16T01:37:36Z","closed_at":"2022-07-15T18:54:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\n- My sveltekit product uses `mongoose` , post the version `1.0.0-next.60` the build breaks with multiple errors of `Cannot find module..`\r\n\r\nBuild log\r\n```\r\n> vite build\r\n\r\nvite v3.0.0 building for production...\r\n✓ 13 modules transformed.\r\n.svelte-kit/output/client/_app/manifest.json                              1.19 KiB\r\n.svelte-kit/output/client/_app/immutable/layout.svelte-c3373a0a.js        0.53 KiB / gzip: 0.35 KiB\r\n.svelte-kit/output/client/_app/immutable/error.svelte-ccaf9407.js         1.56 KiB / gzip: 0.74 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/index.svelte-d5d3b574.js   0.80 KiB / gzip: 0.47 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/index-bf1ed64f.js         6.85 KiB / gzip: 2.80 KiB\r\n.svelte-kit/output/client/_app/immutable/start-7f2c5316.js                23.42 KiB / gzip: 8.84 KiB\r\nvite v3.0.0 building SSR bundle for production...\r\n✓ 15 modules transformed.\r\nGenerated an empty chunk: \"hooks\"\r\n.svelte-kit/output/server/manifest.json                           1.27 KiB\r\n.svelte-kit/output/server/index.js                                76.00 KiB\r\n.svelte-kit/output/server/entries/endpoints/api/demo.json.ts.js   1.56 KiB\r\n.svelte-kit/output/server/entries/fallbacks/layout.svelte.js      0.25 KiB\r\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js       0.74 KiB\r\n.svelte-kit/output/server/entries/pages/index.svelte.js           0.33 KiB\r\n.svelte-kit/output/server/immutable/chunks/index-b9efae8a.js      2.61 KiB\r\n.svelte-kit/output/server/immutable/chunks/hooks-d259abab.js      0.00 KiB\r\n\r\nRun npm run preview to preview your production build locally.\r\n(node:8720) ExperimentalWarning: buffer.Blob is an experimental feature. This feature could change at any time\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\n\r\n> Using @sveltejs/adapter-vercel\r\nError: Failed to resolve dependency bson-ext:\r\nCannot find module 'bson-ext' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\bson.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency kerberos:\r\nCannot find module 'kerberos' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency snappy:\r\nCannot find module 'snappy' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 4)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency snappy/package.json:\r\nCannot find module 'snappy/package.json' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 5)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency aws4:\r\nCannot find module 'aws4' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 7)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency @mongodb-js/zstd:\r\nCannot find module '@mongodb-js/zstd' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 3)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency mongodb-client-encryption:\r\nCannot find module 'mongodb-client-encryption' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\encrypter.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 4)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 7)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency supports-color:\r\nCannot find module 'supports-color' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\debug\\src\\node.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 3)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n  ✔ done\r\n```\r\n\r\n- Workaround\r\n\r\n- revert to version 1.0.0-next.60\r\n\r\n- build log\r\n```\r\n> vite build\r\n\r\nvite v3.0.0 building for production...\r\n✓ 13 modules transformed.\r\n.svelte-kit/output/client/_app/manifest.json                              1.19 KiB\r\n.svelte-kit/output/client/_app/immutable/layout.svelte-c3373a0a.js        0.53 KiB / gzip: 0.35 KiB\r\n.svelte-kit/output/client/_app/immutable/error.svelte-ccaf9407.js         1.56 KiB / gzip: 0.74 KiB\r\n.svelte-kit/output/client/_app/immutable/pages/index.svelte-d5d3b574.js   0.80 KiB / gzip: 0.47 KiB\r\n.svelte-kit/output/client/_app/immutable/start-fa5ebffe.js                23.42 KiB / gzip: 8.84 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/index-bf1ed64f.js         6.85 KiB / gzip: 2.80 KiB\r\nvite v3.0.0 building SSR bundle for production...\r\n✓ 15 modules transformed.\r\nGenerated an empty chunk: \"hooks\"\r\n.svelte-kit/output/server/manifest.json                           1.27 KiB\r\n.svelte-kit/output/server/index.js                                76.00 KiB\r\n.svelte-kit/output/server/entries/endpoints/api/demo.json.ts.js   1.56 KiB\r\n.svelte-kit/output/server/entries/fallbacks/layout.svelte.js      0.25 KiB\r\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js       0.74 KiB\r\n.svelte-kit/output/server/entries/pages/index.svelte.js           0.33 KiB\r\n.svelte-kit/output/server/immutable/chunks/index-b9efae8a.js      2.61 KiB\r\n.svelte-kit/output/server/immutable/chunks/hooks-d259abab.js      0.00 KiB\r\n\r\nRun npm run preview to preview your production build locally.\r\n(node:12096) ExperimentalWarning: buffer.Blob is an experimental feature. This feature could change at any time\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\n\r\n> Using @sveltejs/adapter-vercel\r\n  ✔ done\r\n```\n\n### Reproduction\n\n- The bug has been reproduced in this repo [https://github.com/tsukhu/kit-mongoose-vercel-bug](https://github.com/tsukhu/kit-mongoose-vercel-bug)\r\n- Clone the repo\r\n- Follow the steps given in the readme [https://github.com/tsukhu/kit-mongoose-vercel-bug#steps-to-reproduce](https://github.com/tsukhu/kit-mongoose-vercel-bug#steps-to-reproduce)\n\n### Logs\n\n```shell\n> Using @sveltejs/adapter-vercel\r\nError: Failed to resolve dependency bson-ext:\r\nCannot find module 'bson-ext' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\bson.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency kerberos:\r\nCannot find module 'kerberos' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency snappy:\r\nCannot find module 'snappy' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 4)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency snappy/package.json:\r\nCannot find module 'snappy/package.json' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 5)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency aws4:\r\nCannot find module 'aws4' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 7)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency @mongodb-js/zstd:\r\nCannot find module '@mongodb-js/zstd' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\deps.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 3)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 19)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 36)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency mongodb-client-encryption:\r\nCannot find module 'mongodb-client-encryption' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\mongodb\\lib\\encrypter.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 4)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 7)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\nError: Failed to resolve dependency supports-color:\r\nCannot find module 'supports-color' loaded from D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\debug\\src\\node.js\r\n    at D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:301:39\r\n    at async Promise.all (index 2)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 1)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n    at async Promise.all (index 3)\r\n    at async Job.emitDependency (D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:287:9)\r\n    at async D:\\workspace\\kit-mongoose-vercel-bug\\node_modules\\@vercel\\nft\\out\\node-file-trace.js:316:21\r\n  ✔ done\r\n```\r\n```\n```\n\n\n### System Info\n\n```shell\nSystem:\r\n    OS: Windows 10 10.0.22000\r\n    CPU: (8) x64 Intel(R) Core(TM) i7-4790S CPU @ 3.20GHz\r\n    Memory: 6.84 GB / 15.92 GB\r\n  Binaries:\r\n    Node: 16.15.1 - C:\\Program Files\\nodejs\\node.EXE\r\n    Yarn: 1.22.18 - ~\\AppData\\Roaming\\npm\\yarn.CMD\r\n    npm: 8.10.0 - C:\\Program Files\\nodejs\\npm.CMD\r\n  Browsers:\r\n    Edge: Spartan (44.22000.120.0), Chromium (103.0.1264.49)\r\n    Internet Explorer: 11.0.22000.120\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^1.0.0-next.60 => 1.0.0-next.60\r\n    @sveltejs/adapter-node: ^1.0.0-next.81 => 1.0.0-next.81\r\n    @sveltejs/adapter-vercel: 1.0.0-next.62 => 1.0.0-next.60\r\n    @sveltejs/kit: next => 1.0.0-next.375\r\n    svelte: ^3.44.0 => 3.49.0\r\n    vite: ^3.0.0 => 3.0.0\n```\n\n\n### Severity\n\nserious, but I can work around it\n\n### Additional Information\n\n_No response_","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/5543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/5543/timeline","performed_via_github_app":null,"state_reason":"completed"}