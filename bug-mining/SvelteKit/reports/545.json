{"url":"https://api.github.com/repos/sveltejs/kit/issues/14305","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/14305/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/14305/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/14305/events","html_url":"https://github.com/sveltejs/kit/issues/14305","id":3349598716,"node_id":"I_kwDOEiPr8c7HptH8","number":14305,"title":"Remote form().for() shares instance cache between forms during SSR","user":{"login":"cofl","id":366548,"node_id":"MDQ6VXNlcjM2NjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/366548?v=4","gravatar_id":"","url":"https://api.github.com/users/cofl","html_url":"https://github.com/cofl","followers_url":"https://api.github.com/users/cofl/followers","following_url":"https://api.github.com/users/cofl/following{/other_user}","gists_url":"https://api.github.com/users/cofl/gists{/gist_id}","starred_url":"https://api.github.com/users/cofl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cofl/subscriptions","organizations_url":"https://api.github.com/users/cofl/orgs","repos_url":"https://api.github.com/users/cofl/repos","events_url":"https://api.github.com/users/cofl/events{/privacy}","received_events_url":"https://api.github.com/users/cofl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-08-24T15:02:06Z","updated_at":"2025-08-28T15:02:37Z","closed_at":"2025-08-28T15:02:37Z","author_association":"NONE","type":{"id":4885414,"node_id":"IT_kwDOAWhhq84ASoum","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-29T23:39:46Z","updated_at":"2024-07-26T11:19:25Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\n\nRemote `form()` functions return the same instance from their `for()` methods when not client-side rendering. All forms using the same key will initially use the form action for the first form to use the key.\n\nThe expected behavior is that each form function has its own instance cache (so for example, an `updatePost` and `deletePost` form could each refer to the same `post.id`). This is how `for()` seems to behave during CSR, but *not* during SSR, which affects environments where CSR or JavaScript are disabled.\n\n### Reproduction\n\n\nhttps://stackblitz.com/edit/sveltejs-kit-template-default-qfi3gy8i\n\nInspecting the second form element reveals that it has the same `action` as the first form. Changing the value of `csr` in `+page.js` and refreshing corrects this.\n\n### Logs\n\n```Shell\n\n```\n\n### System Info\n\n```Shell\nSystem:\n    OS: Linux 5.0 undefined\n    CPU: (8) x64 Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz\n    Memory: 0 Bytes / 0 Bytes\n    Shell: 1.0 - /bin/jsh\n  Binaries:\n    Node: 20.19.1 - /usr/local/bin/node\n    Yarn: 1.22.19 - /usr/local/bin/yarn\n    npm: 10.8.2 - /usr/local/bin/npm\n    pnpm: 8.15.6 - /usr/local/bin/pnpm\n  npmPackages:\n    @sveltejs/adapter-auto: ^6.0.0 => 6.1.0 \n    @sveltejs/kit: ^2.22.0 => 2.36.2 \n    @sveltejs/vite-plugin-svelte: ^6.0.0 => 6.1.3 \n    svelte: ^5.25.0 => 5.38.3 \n    vite: ^7.0.4 => 7.1.3\n```\n\n### Severity\n\nannoyance\n\n### Additional Information\n\n_No response_","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/14305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/14305/timeline","performed_via_github_app":null,"state_reason":"completed"}