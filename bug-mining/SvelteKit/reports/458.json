{"url":"https://api.github.com/repos/sveltejs/kit/issues/11523","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/11523/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/11523/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/11523/events","html_url":"https://github.com/sveltejs/kit/issues/11523","id":2067606335,"node_id":"I_kwDOEiPr8c57PSs_","number":11523,"title":"SvelteKit 2: Shallow Routing / Browser Navigation Fails to Reopen Modal and Route","user":{"login":"m345054","id":26409801,"node_id":"MDQ6VXNlcjI2NDA5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/26409801?v=4","gravatar_id":"","url":"https://api.github.com/users/m345054","html_url":"https://github.com/m345054","followers_url":"https://api.github.com/users/m345054/followers","following_url":"https://api.github.com/users/m345054/following{/other_user}","gists_url":"https://api.github.com/users/m345054/gists{/gist_id}","starred_url":"https://api.github.com/users/m345054/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m345054/subscriptions","organizations_url":"https://api.github.com/users/m345054/orgs","repos_url":"https://api.github.com/users/m345054/repos","events_url":"https://api.github.com/users/m345054/events{/privacy}","received_events_url":"https://api.github.com/users/m345054/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2850697519,"node_id":"MDU6TGFiZWwyODUwNjk3NTE5","url":"https://api.github.com/repos/sveltejs/kit/labels/router","name":"router","color":"0052cc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-01-05T16:07:10Z","updated_at":"2024-02-07T10:33:04Z","closed_at":"2024-01-31T11:45:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nIn SvelteKit, after opening and closing a post modal via browser navigation (back and forward buttons), the state or parameters fail to update correctly. While the URL reflects the navigated page, the post modal does not reopen as expected.\r\n\r\n### Reproduction\r\n\r\nhttps://github.com/m345054/sveltekit-shallow-routing-bug-report\r\n\r\n1. Load the '/' page.\r\n2. Open any post to view the modal.\r\n3. Use the browser's back button to return to '/' and close the modal.\r\n4. Use the browser's forward button to attempt to reopen the modal.\r\n\r\nExpected Behavior:\r\nThe post modal should reopen upon navigating forward.\r\n\r\nActual Behavior:\r\nThe URL changes, but the modal does not reopen.\r\n\r\nThis issue also appears when starting from a child page\r\n1. Load the '/[id]' page (e.g. '/2')\r\n2. Use svelte button to go to '/'\r\n3. Use brower's forward button to attempt to reopen the route.\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### System Info\r\n\r\n```Shell\r\nSystem:\r\n    OS: Windows 11\r\n  Binaries:\r\n    Node: 20.10.0\r\n    npm: 9.6.2\r\n  Browsers:\r\n    Chromium: 120.0.6099.199\r\n    Firefox: 121.0\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^3.0.0 => 3.1.0\r\n    @sveltejs/kit: ^2.0.0 => 2.0.6\r\n    @sveltejs/vite-plugin-svelte: ^3.0.0 => 3.0.1\r\n    svelte: ^4.2.7 => 4.2.8\r\n    vite: ^5.0.3 => 5.0.11\r\n```\r\n\r\n\r\n### Severity\r\n\r\ncritical\r\n\r\n### Additional Information\r\n\r\n- Console logs for $page.state and $page.params do not update as expected when using the browser's forward button.\r\n- Issue occurs regardless of SSR state.\r\n- Direct manipulation with pushState('', { id }); works but does not change the URL as I need for my project.","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/11523/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/11523/timeline","performed_via_github_app":null,"state_reason":"completed"}