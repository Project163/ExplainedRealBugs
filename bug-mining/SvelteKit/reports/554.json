{"url":"https://api.github.com/repos/sveltejs/kit/issues/14347","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/14347/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/14347/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/14347/events","html_url":"https://github.com/sveltejs/kit/issues/14347","id":3366096047,"node_id":"I_kwDOEiPr8c7Iooyv","number":14347,"title":"while build newer SvelteKit runs the init: ServerInit function from hooks.server.ts","user":{"login":"1muen","id":49640488,"node_id":"MDQ6VXNlcjQ5NjQwNDg4","avatar_url":"https://avatars.githubusercontent.com/u/49640488?v=4","gravatar_id":"","url":"https://api.github.com/users/1muen","html_url":"https://github.com/1muen","followers_url":"https://api.github.com/users/1muen/followers","following_url":"https://api.github.com/users/1muen/following{/other_user}","gists_url":"https://api.github.com/users/1muen/gists{/gist_id}","starred_url":"https://api.github.com/users/1muen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1muen/subscriptions","organizations_url":"https://api.github.com/users/1muen/orgs","repos_url":"https://api.github.com/users/1muen/repos","events_url":"https://api.github.com/users/1muen/events{/privacy}","received_events_url":"https://api.github.com/users/1muen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-08-29T09:05:40Z","updated_at":"2025-09-18T15:46:33Z","closed_at":"2025-09-18T15:46:33Z","author_association":"CONTRIBUTOR","type":{"id":4885414,"node_id":"IT_kwDOAWhhq84ASoum","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-29T23:39:46Z","updated_at":"2024-07-26T11:19:25Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nI noticed the builds failing because on our CI server we dont have the environment variables we check for in our init: ServerInit function.\nEarlier versions like \"@sveltejs/kit\": \"2.26.1\", dont have that bug.\n\n### Reproduction\n\nhttps://github.com/1muen/sv-build-bug-example/tree/buildFails\n\n### Logs\n\n```Shell\n❯ pnpm run build\n\n> sv-bug-example@0.0.1 build /home/lmuen/github/sv-bug-example\n> vite build\n\nvite v7.1.3 building SSR bundle for production...\n✓ 175 modules transformed.\nvite v7.1.3 building for production...\n✓ 142 modules transformed.\n.svelte-kit/output/client/_app/version.json                        0.03 kB │ gzip:  0.05 kB\n.svelte-kit/output/client/.vite/manifest.json                      2.66 kB │ gzip:  0.53 kB\n.svelte-kit/output/client/_app/immutable/chunks/Cn8smvWX.js        0.04 kB │ gzip:  0.06 kB\n.svelte-kit/output/client/_app/immutable/chunks/DsnmJJEf.js        0.07 kB │ gzip:  0.08 kB\n.svelte-kit/output/client/_app/immutable/entry/start.qYLW-IHu.js   0.08 kB │ gzip:  0.09 kB\n.svelte-kit/output/client/_app/immutable/nodes/0.D3vBsTvv.js       0.21 kB │ gzip:  0.17 kB\n.svelte-kit/output/client/_app/immutable/nodes/2.BpvxDwus.js       0.32 kB │ gzip:  0.24 kB\n.svelte-kit/output/client/_app/immutable/chunks/CWdd3wXn.js        0.41 kB │ gzip:  0.29 kB\n.svelte-kit/output/client/_app/immutable/nodes/1.BQ1_4Lna.js       1.01 kB │ gzip:  0.58 kB\n.svelte-kit/output/client/_app/immutable/chunks/99wAdZLI.js        3.78 kB │ gzip:  2.01 kB\n.svelte-kit/output/client/_app/immutable/entry/app.14EI74m7.js     7.30 kB │ gzip:  3.46 kB\n.svelte-kit/output/client/_app/immutable/chunks/Dv8ZI-4E.js       20.30 kB │ gzip:  8.08 kB\n.svelte-kit/output/client/_app/immutable/chunks/CS2OvKfn.js       31.91 kB │ gzip: 12.52 kB\n✓ built in 495ms\n✗ Build failed in 1.52s\nerror during build:\n[vite-plugin-sveltekit-compile] Failed with code 1\n    at Worker.<anonymous> (file:///home/lmuen/github/sv-bug-example/node_modules/@sveltejs/kit/src/utils/fork.js:65:13)\n    at Worker.emit (node:events:518:28)\n    at [kOnExit] (node:internal/worker:315:10)\n    at Worker.<computed>.onexit (node:internal/worker:229:20)\n ELIFECYCLE  Command failed with exit code 1.\n```\n\n### System Info\n\n```Shell\nSystem:\n    OS: Linux cpe:/o:nixos:nixos:25.11 25.11 (Xantusia)\n    Container: Yes\n    Shell: 4.0.2 - /run/current-system/sw/bin/fish\n  Binaries:\n    Node: 22.18.0 - /run/current-system/sw/bin/node\n    Yarn: 1.22.22 - /run/current-system/sw/bin/yarn\n    npm: 10.9.3 - /run/current-system/sw/bin/npm\n    pnpm: 10.15.0 - /run/current-system/sw/bin/pnpm\n    bun: 1.2.20 - /run/current-system/sw/bin/bun\n  npmPackages:\n    @sveltejs/adapter-auto: 6.1.0 => 6.1.0 \n    @sveltejs/adapter-node: 5.3.1 => 5.3.1 \n    @sveltejs/kit: 2.37.0 => 2.37.0 \n    @sveltejs/vite-plugin-svelte: 6.1.3 => 6.1.3 \n    svelte: 5.38.6 => 5.38.6 \n    vite: 7.1.3 => 7.1.3\n```\n\n### Severity\n\nblocking an upgrade\n\n### Additional Information\n\n_No response_","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/14347/reactions","total_count":4,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":3},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/14347/timeline","performed_via_github_app":null,"state_reason":"completed"}