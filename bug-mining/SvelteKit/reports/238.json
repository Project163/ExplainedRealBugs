{"url":"https://api.github.com/repos/sveltejs/kit/issues/7662","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/7662/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/7662/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/7662/events","html_url":"https://github.com/sveltejs/kit/issues/7662","id":1449666479,"node_id":"I_kwDOEiPr8c5WaCev","number":7662,"title":"Router picks up .d.ts files","user":{"login":"knpwrs","id":174864,"node_id":"MDQ6VXNlcjE3NDg2NA==","avatar_url":"https://avatars.githubusercontent.com/u/174864?v=4","gravatar_id":"","url":"https://api.github.com/users/knpwrs","html_url":"https://github.com/knpwrs","followers_url":"https://api.github.com/users/knpwrs/followers","following_url":"https://api.github.com/users/knpwrs/following{/other_user}","gists_url":"https://api.github.com/users/knpwrs/gists{/gist_id}","starred_url":"https://api.github.com/users/knpwrs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knpwrs/subscriptions","organizations_url":"https://api.github.com/users/knpwrs/orgs","repos_url":"https://api.github.com/users/knpwrs/repos","events_url":"https://api.github.com/users/knpwrs/events{/privacy}","received_events_url":"https://api.github.com/users/knpwrs/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-11-15T12:00:03Z","updated_at":"2022-11-16T20:27:46Z","closed_at":"2022-11-16T20:27:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWhen using tooling such as graphql-code-generator \n\n### Reproduction\n\nCreate a file anywhere under `routes` called `+layout.server.d.ts`.\n\n### Logs\n\n_No response_\n\n### System Info\n\n```Shell\nSystem:\r\n    OS: macOS 12.1\r\n    CPU: (10) arm64 Apple M1 Pro\r\n    Memory: 171.77 MB / 32.00 GB\r\n    Shell: 5.8 - /opt/homebrew/bin/zsh\r\n  Binaries:\r\n    Node: 18.10.0 - /nix/store/m3za3mblwg9az7vpkkvlfm04z66mcr6y-nodejs-18.10.0/bin/node\r\n    Yarn: 1.22.19 - /opt/homebrew/bin/yarn\r\n    npm: 8.19.2 - /nix/store/m3za3mblwg9az7vpkkvlfm04z66mcr6y-nodejs-18.10.0/bin/npm\r\n    Watchman: 2022.10.03.00 - /opt/homebrew/bin/watchman\r\n  Browsers:\r\n    Brave Browser: 106.1.44.101\r\n    Chrome: 107.0.5304.110\r\n    Chrome Canary: 99.0.4828.0\r\n    Firefox: 106.0.5\r\n    Safari: 15.2\n```\n\n\n### Severity\n\nannoyance\n\n### Additional Information\n\nI can think of four solutions:\r\n\r\n1. The router should ignore `.d.ts` files by default. As long as TypeScript is considered a first-class citizen in SvelteKit this doesn't seem like an unreasonable solution to me.\r\n  a. Another consideration: only allow specific extensions to be picked up by the router, maybe configured some way in Vite.\r\n3. Configurable ignore for the router. This is more complex, but opens up end users to be able to exclude any generated files of various extensions.\r\n4. Don't generate files with `+` at the start of their name. Unfortunately, I couldn't find a way to configure graphql code generator to do this, but I could either place all generated code in its own `.d.ts` file outside of `routes`, or, as suggested on Discord, I can place all queries in `queries.ts` files which would result in files such as `__generated__/queries.d.ts`, which should not be picked up by the router.\r\n\r\nI'd be willing to put up a PR for the first solution if the SvelteKit team would be open to that solution.","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/7662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/7662/timeline","performed_via_github_app":null,"state_reason":"completed"}