{"url":"https://api.github.com/repos/sveltejs/kit/issues/3722","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/3722/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/3722/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/3722/events","html_url":"https://github.com/sveltejs/kit/issues/3722","id":1123833426,"node_id":"I_kwDOEiPr8c5C_FZS","number":3722,"title":"`getSession()` does not get called on page load. should warn user","user":{"login":"luhagel","id":7240688,"node_id":"MDQ6VXNlcjcyNDA2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/7240688?v=4","gravatar_id":"","url":"https://api.github.com/users/luhagel","html_url":"https://github.com/luhagel","followers_url":"https://api.github.com/users/luhagel/followers","following_url":"https://api.github.com/users/luhagel/following{/other_user}","gists_url":"https://api.github.com/users/luhagel/gists{/gist_id}","starred_url":"https://api.github.com/users/luhagel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luhagel/subscriptions","organizations_url":"https://api.github.com/users/luhagel/orgs","repos_url":"https://api.github.com/users/luhagel/repos","events_url":"https://api.github.com/users/luhagel/events{/privacy}","received_events_url":"https://api.github.com/users/luhagel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2850376265,"node_id":"MDU6TGFiZWwyODUwMzc2MjY1","url":"https://api.github.com/repos/sveltejs/kit/labels/help%20wanted","name":"help wanted","color":"D625D9","default":true,"description":"PRs welcomed. The implementation details are unlikely to cause debate"},{"id":3229642339,"node_id":"MDU6TGFiZWwzMjI5NjQyMzM5","url":"https://api.github.com/repos/sveltejs/kit/labels/p2-nice-to-have","name":"p2-nice-to-have","color":"A7463B","default":false,"description":"SvelteKit cannot be used by a small number of people, quality of life improvements, etc."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/2","html_url":"https://github.com/sveltejs/kit/milestone/2","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/2/labels","id":6044960,"node_id":"MDk6TWlsZXN0b25lNjA0NDk2MA==","number":2,"title":"1.0","description":"stuff we need to nail down before launch","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":628,"state":"closed","created_at":"2020-10-29T01:17:50Z","updated_at":"2022-12-19T11:47:29Z","due_on":null,"closed_at":"2022-12-19T11:47:29Z"},"comments":17,"created_at":"2022-02-04T05:33:48Z","updated_at":"2022-08-18T17:48:38Z","closed_at":"2022-05-23T20:46:19Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nUnfortunately, I haven't been able to get our sveltekit app to work in production past kt@next.206 and adapter-node@next.56.\r\n\r\nSince the ssr was always somewhat flunky with our - aside from the login page- completely private app we previously disabled it via the config and on all update attempts in the handle hook.\r\n\r\nNow, the issue is always the same, everything runs fine locally, until it gets deployed, where you can't get past the login screen anymore, since the session never gets populated. I recently found out that the issue seems to lie somewhere within adapter-node, since running `dev` and `preview` works flawlessly, but running the build output directly via `node _build` presents the same issue our staging environment showed locally.\r\n\r\nAny help/pointers would be appreciated, ready to replace our auth code if necessary/it's just us working against sveltekit.\r\n\r\nIf you have any further questions, feel free to ask !\n\n### Reproduction\n\nhttps://github.com/luhagel/sveltekit-node-session-repro\n\n### Logs\n\n_No response_\n\n### System Info\n\n```shell\nSystem:\r\n    OS: macOS 11.6\r\n    CPU: (12) x64 AMD Ryzen 5 3600X 6-Core Processor             \r\n    Memory: 9.02 GB / 32.00 GB\r\n    Shell: 5.8 - /bin/zsh\r\n  Binaries:\r\n    Node: 17.4.0 - /usr/local/bin/node\r\n    Yarn: 1.22.17 - /usr/local/bin/yarn\r\n    npm: 8.3.1 - /usr/local/bin/npm\r\n  Browsers:\r\n    Chrome: 98.0.4758.80\r\n    Firefox: 96.0.2\r\n    Safari: 15.0\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: next => 1.0.0-next.17 \r\n    @sveltejs/adapter-node: ^1.0.0-next.67 => 1.0.0-next.67 \r\n    @sveltejs/kit: next => 1.0.0-next.260 \r\n    svelte: ^3.44.0 => 3.46.4\n```\n\n\n### Severity\n\nblocking an upgrade\n\n### Additional Information\n\n_No response_","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/3722/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/3722/timeline","performed_via_github_app":null,"state_reason":"completed"}