{"url":"https://api.github.com/repos/sveltejs/kit/issues/12654","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/12654/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/12654/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/12654/events","html_url":"https://github.com/sveltejs/kit/issues/12654","id":2507664668,"node_id":"I_kwDOEiPr8c6Vd-0c","number":12654,"title":"Should parent() call parent load functions by default ?","user":{"login":"bleucitron","id":8417814,"node_id":"MDQ6VXNlcjg0MTc4MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8417814?v=4","gravatar_id":"","url":"https://api.github.com/users/bleucitron","html_url":"https://github.com/bleucitron","followers_url":"https://api.github.com/users/bleucitron/followers","following_url":"https://api.github.com/users/bleucitron/following{/other_user}","gists_url":"https://api.github.com/users/bleucitron/gists{/gist_id}","starred_url":"https://api.github.com/users/bleucitron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleucitron/subscriptions","organizations_url":"https://api.github.com/users/bleucitron/orgs","repos_url":"https://api.github.com/users/bleucitron/repos","events_url":"https://api.github.com/users/bleucitron/events{/privacy}","received_events_url":"https://api.github.com/users/bleucitron/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470032,"node_id":"MDU6TGFiZWwyNDI4NDcwMDMy","url":"https://api.github.com/repos/sveltejs/kit/labels/documentation","name":"documentation","color":"0075ca","default":true,"description":"Improvements or additions to documentation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2024-09-05T12:34:01Z","updated_at":"2024-09-06T08:30:50Z","closed_at":"2024-09-06T08:30:50Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nI recently realised that `parent()` did not work the way I thought it did.\r\n\r\nMy understanding was that `await parent()` did somehing like this (pseudo code incoming)\r\n```ts\r\nconst layouts = [parent1.load(), parent2.load(), ...]\r\n\r\nfunction parent() {\r\n  return Promise.all(layouts)\r\n}\r\n```\r\n\r\nbut it seems it's more something like\r\n```ts\r\nconst layouts = [parent1, parent2, ...]\r\n\r\nfunction parent() {\r\n  return Promise.all(layouts.map(layout => layout.load()))\r\n}\r\n```\r\n\r\nThis implies that having `await parent()` in a load function actually re-runs the parents' load functions when accessing the page, even if you're coming from another page (and thus the layout already executed its load). This is actually strange to me, because it could be just providing the previously calculated data without actually rerunning the whole load chain.\r\n\r\nIs this a bug or is there a reason for this behavior ?\r\n\r\n(if this is normal, the docs might need an update to reference this as a situation that would rerun a `load` function)\r\n\r\nAlso, see [discussion on Discord](https://discord.com/channels/457912077277855764/1281187403511496736)\n\n### Reproduction\n\nhttps://stackblitz.com/edit/sveltejs-kit-template-default-wj1pbt?file=src%2Froutes%2Fabout%2F%2Bpage.svelte,src%2Froutes%2Fabout%2F%2Bpage.server.js,src%2Froutes%2F%2Blayout.server.js\n\n### Logs\n\n_No response_\n\n### System Info\n\n```Shell\nSystem:\r\n    OS: Linux 5.0 undefined\r\n    CPU: (3) x64 Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz\r\n    Memory: 0 Bytes / 0 Bytes\r\n    Shell: 1.0 - /bin/jsh\r\n  Binaries:\r\n    Node: 18.20.3 - /usr/local/bin/node\r\n    Yarn: 1.22.19 - /usr/local/bin/yarn\r\n    npm: 10.2.3 - /usr/local/bin/npm\r\n    pnpm: 8.15.6 - /usr/local/bin/pnpm\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^3.0.0 => 3.2.4 \r\n    @sveltejs/kit: ^2.5.26 => 2.5.26 \r\n    @sveltejs/vite-plugin-svelte: ^3.0.0 => 3.1.2 \r\n    svelte: ^4.2.7 => 4.2.19 \r\n    vite: ^5.0.3 => 5.4.3\n```\n\n\n### Severity\n\nannoyance\n\n### Additional Information\n\n_No response_","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/12654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/12654/timeline","performed_via_github_app":null,"state_reason":"completed"}