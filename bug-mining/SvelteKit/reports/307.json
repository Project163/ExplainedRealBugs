{"url":"https://api.github.com/repos/sveltejs/kit/issues/7411","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/7411/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/7411/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/7411/events","html_url":"https://github.com/sveltejs/kit/issues/7411","id":1426131909,"node_id":"I_kwDOEiPr8c5VAQvF","number":7411,"title":"Trouble converting svelte skeleton site to static, using adapter-static","user":{"login":"arrowtype","id":45946693,"node_id":"MDQ6VXNlcjQ1OTQ2Njkz","avatar_url":"https://avatars.githubusercontent.com/u/45946693?v=4","gravatar_id":"","url":"https://api.github.com/users/arrowtype","html_url":"https://github.com/arrowtype","followers_url":"https://api.github.com/users/arrowtype/followers","following_url":"https://api.github.com/users/arrowtype/following{/other_user}","gists_url":"https://api.github.com/users/arrowtype/gists{/gist_id}","starred_url":"https://api.github.com/users/arrowtype/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arrowtype/subscriptions","organizations_url":"https://api.github.com/users/arrowtype/orgs","repos_url":"https://api.github.com/users/arrowtype/repos","events_url":"https://api.github.com/users/arrowtype/events{/privacy}","received_events_url":"https://api.github.com/users/arrowtype/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/3","html_url":"https://github.com/sveltejs/kit/milestone/3","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/3/labels","id":6045098,"node_id":"MDk6TWlsZXN0b25lNjA0NTA5OA==","number":3,"title":"non-urgent","description":"stuff that's not time-sensitive","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":121,"closed_issues":235,"state":"open","created_at":"2020-10-29T02:28:56Z","updated_at":"2025-10-03T09:31:01Z","due_on":null,"closed_at":null},"comments":11,"created_at":"2022-10-27T18:57:16Z","updated_at":"2024-01-04T14:16:24Z","closed_at":"2023-01-13T20:06:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nHi, and thank you for working on a dev tool I love!\r\n\r\nI’m attempting to make a static site with Svelte. My ultimate goal is to convert a two-page site I’ve already built into something I can host on GH Pages instead of its current hosting on Netlify. However, I’ve run into a problem while using adapter-static, so I am now try to convert just the basic starter \"skeleton\" into a static site, and ... I’m running into the same problem.\r\n\r\nIn summary, adapter-static keeps telling me:\r\n\r\n```\r\n@sveltejs/adapter-static: all routes must be fully prerenderable, but found the following routes that are dynamic:\r\n    - src/routes/\r\n```\r\n\r\nI’ve tried to follow the advice that follows, but adding `export const prerender = true;` to my `src/routes/+layout.svelte` file doesn’t seem to make a difference.\r\n\r\n\r\n\r\n### Reproduction\r\n\r\nTo keep things simple, I’ll just say how to reproduce this with the skeleton site.\r\n\r\n1. Start a new project with `npm create svelte@latest my-app` (following the [Creating a Project](https://kit.svelte.dev/docs/creating-a-project) guide)\r\n2. Follow the prompts to set up the project. I’m using JS, ESLint, and Prettier, but not Playwright\r\n3. Test that the basic `npm run dev` works (it did for me)\r\n4. Follow the [adapter-static docs](https://github.com/sveltejs/kit/tree/master/packages/adapter-static) to convert the project to a static one.\r\n\r\n```js\r\n// svelte.config.js\r\n\r\nimport adapter from '@sveltejs/adapter-static';\r\n\r\nconst dev = process.env.NODE_ENV === 'development';\r\n\r\n/** @type {import('@sveltejs/kit').Config} */\r\nconst config = {\r\n\tkit: {\r\n\t\tadapter: adapter({\r\n\t\t\t// default options are shown. On some platforms\r\n\t\t\t// these options are set automatically — see below\r\n\t\t\tpages: 'docs',\r\n\t\t\tassets: 'docs',\r\n\t\t\tfallback: null,\r\n\t\t\tprecompress: false,\r\n\t\t\tstrict: true\r\n\t\t  }),\r\n\t\tpaths: {\r\n\t\t\tbase: dev ? '' : '/svelte-static-test-from_skeleton',\r\n\t\t},\r\n\t}\r\n};\r\n\r\nexport default config;\r\n```\r\n\r\nI tried to follow a suggestion, adding a file at `src/routes/+layout.svelte`. that simply includes the following:\r\n\r\n```html\r\n<script>\r\n    export const prerender = true;\r\n</script>\r\n```\r\n\r\n...but this didn’t change the error.\r\n\r\nI can’t get the build to work, so I don’t have browser logs, but the following is the full result from my terminal when I run the command `npm run build`.\r\n\r\n### Logs\r\n\r\n```Shell\r\n~/code/svelte-static-test-from_skeleton  master ✗                                                                                                  21m ⚑ ◒  ⍉\r\n▶ npm run build\r\n\r\n> my-app@0.0.1 build\r\n> vite build\r\n\r\npolyfillModulePreload is deprecated. Use modulePreload.polyfill instead.\r\nvite v3.2.0 building for production...\r\n✓ 36 modules transformed.\r\npolyfillModulePreload is deprecated. Use modulePreload.polyfill instead.\r\nvite v3.2.0 building SSR bundle for production...\r\n✓ 44 modules transformed.\r\nGenerated an empty chunk: \"hooks\"\r\n.svelte-kit/output/server/vite-manifest.json                  1.03 KiB\r\n.svelte-kit/output/server/index.js                            71.03 KiB\r\n.svelte-kit/output/server/entries/pages/_layout.svelte.js     0.24 KiB\r\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js   1.50 KiB\r\n.svelte-kit/output/server/entries/pages/_page.svelte.js       0.31 KiB\r\n.svelte-kit/output/server/chunks/index.js                     3.15 KiB\r\n.svelte-kit/output/server/chunks/hooks.js                     0.00 KiB\r\n\r\nRun npm run preview to preview your production build locally.\r\n.svelte-kit/output/client/vite-manifest.json                                           2.11 KiB\r\n.svelte-kit/output/client/_app/immutable/components/error.svelte-6882d5bf.js           2.07 KiB / gzip: 0.95 KiB\r\n.svelte-kit/output/client/_app/immutable/components/pages/_layout.svelte-95eb34a5.js   0.43 KiB / gzip: 0.30 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/0-39c7f10b.js                          0.09 KiB / gzip: 0.10 KiB\r\n.svelte-kit/output/client/_app/immutable/components/pages/_page.svelte-7a1cdd0a.js     0.81 KiB / gzip: 0.47 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/singletons-1b0e5fcb.js                 1.81 KiB / gzip: 0.99 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/index-a22ecbec.js                      6.08 KiB / gzip: 2.51 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/2-eb11e36a.js                          0.09 KiB / gzip: 0.10 KiB\r\n.svelte-kit/output/client/_app/immutable/chunks/1-e1814a8c.js                          0.09 KiB / gzip: 0.09 KiB\r\n.svelte-kit/output/client/_app/immutable/start-77a5842c.js                             24.87 KiB / gzip: 9.73 KiB\r\n\r\n> Using @sveltejs/adapter-static\r\n  @sveltejs/adapter-static: all routes must be fully prerenderable, but found the following routes that are dynamic:\r\n    - src/routes/\r\n  \r\n  You have the following options:\r\n    - set the `fallback` option — see https://github.com/sveltejs/kit/tree/master/packages/adapter-static#spa-mode for more info.\r\n    - add `export const prerender = true` to your root `+layout.js/.ts` or `+layout.server.js/.ts` file. This will try to prerender all pages.\r\n    - add `export const prerender = true` to any `+server.js/ts` files that are not fetched by page `load` functions.\r\n  \r\n    - pass `strict: false` to `adapter-static` to ignore this error. Only do this if you are sure you don't need the routes in question in your final app, as they will be unavailable. See https://github.com/sveltejs/kit/tree/master/packages/adapter-static#strict for more info.\r\n  \r\n  If this doesn't help, you may need to use a different adapter. @sveltejs/adapter-static can only be used for sites that don't need a server for dynamic rendering, and can run on just a static file server.\r\n  See https://kit.svelte.dev/docs/page-options#prerender for more details\r\nerror during build:\r\nError: Encountered dynamic routes\r\n    at adapt (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/@sveltejs/adapter-static/index.js:53:12)\r\n    at adapt (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/@sveltejs/kit/src/core/adapt/index.js:28:8)\r\n    at Object.handler (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/@sveltejs/kit/src/exports/vite/index.js:493:12)\r\n    at async PluginDriver.hookParallel (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/rollup/dist/es/shared/rollup.js:22670:17)\r\n    at async Object.close (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/rollup/dist/es/shared/rollup.js:23750:13)\r\n    at async Promise.all (index 0)\r\n    at async build (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/vite/dist/node/chunks/dep-61d2428a.js:48150:13)\r\n    at async CAC.<anonymous> (file:///Users/stephennixon/code/svelte-static-test-from_skeleton/node_modules/vite/dist/node/cli.js:758:9)\r\n```\r\n\r\n\r\n### System Info\r\n\r\n```Shell\r\nSystem:\r\n    OS: macOS 12.5\r\n    CPU: (12) x64 Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz\r\n    Memory: 2.00 GB / 32.00 GB\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.12.0 - ~/.nvm/versions/node/v18.12.0/bin/node\r\n    Yarn: 1.22.19 - /usr/local/bin/yarn\r\n    npm: 8.19.2 - ~/.nvm/versions/node/v18.12.0/bin/npm\r\n  Browsers:\r\n    Chrome: 106.0.5249.119\r\n    Chrome Canary: 109.0.5384.0\r\n    Firefox: 105.0.1\r\n    Safari: 15.6\r\n    Safari Technology Preview: 16.0\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: next => 1.0.0-next.84 \r\n    @sveltejs/adapter-static: ^1.0.0-next.46 => 1.0.0-next.46 \r\n    @sveltejs/kit: next => 1.0.0-next.525 \r\n    svelte: ^3.44.0 => 3.52.0 \r\n    vite: ^3.1.0 => 3.2.0\r\n```\r\n\r\n\r\n### Severity\r\n\r\nblocking all usage of SvelteKit\r\n\r\n(at least, all usage of SvelteKit to make a static site, which is my current main goal)\r\n\r\n### Additional Information\r\n\r\nMy understanding of the concept of what exactly \"dynamic rendering\" means is pretty surface level. So, I might be missing some part of what I need to do to convert a site to static.\r\n\r\nA specific question I have: can I run a Svelte store file if a site is converted to static, or would that make it dynamic? I’m using a Svelte store on a website to have a play/pause button in the navigation menu, which can play/pause CSS animations on either the home page or the about page (the site is just two pages, and won’t need frequent updates, so making it static seems ideal).\r\n\r\nAt the end of the day, my main goal is making a simple font specimen website that I can put up on GH Pages, and which I can trust to continue working for the foreseeable future. Svelte is awesome for this, because it makes it fun to see up interactive things like a \"type tester\" with variable axis sliders, and makes overall site composition really nice. I have a dynamic version that currently works well on Netlify, but I worry that maybe it may stop working (or be subject to hosting pricing changes) sooner than a static site would. If I am wrong to worry here, I’m also happy to hear if those concerns are unfounded.\r\n\r\nThank you so much for any insights or help!","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/7411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/7411/timeline","performed_via_github_app":null,"state_reason":"completed"}