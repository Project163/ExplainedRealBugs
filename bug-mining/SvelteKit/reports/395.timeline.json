[{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1526852480","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1526852480","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1526852480,"node_id":"IC_kwDOEiPr8c5bAeuA","user":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-28T01:28:38Z","updated_at":"2023-04-28T01:28:38Z","body":"Cannot reproduce the crash with the provided repro on either stackblitz or locally, but can confirm the error reporting seems to be broken. It's logging undefined every time.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1526852480/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9120118343,"node_id":"LE_lADOEiPr8c5klNwLzwAAAAIfmfZH","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9120118343","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-04-28T01:28:56Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":9120118347,"node_id":"LE_lADOEiPr8c5klNwLzwAAAAIfmfZL","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9120118347","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-04-28T01:28:56Z","label":{"name":"error handling","color":"aff99a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1526874912","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1526874912","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1526874912,"node_id":"IC_kwDOEiPr8c5bAkMg","user":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-28T02:04:06Z","updated_at":"2023-04-28T02:04:06Z","body":"It's this thing again, the default handleError hook only logs the error stack but since you're rejecting it with a string, it doesn't have one\r\n\r\nhttps://github.com/sveltejs/kit/blob/526a2ed5676905807d83ace90d3853027f17f265/packages/kit/src/runtime/server/index.js#L45\r\n\r\nAlthough I guess the expectation here is that you want \"Custom error\" to show up in the page as the error message, is that correct? \r\n\r\nFor that you'd have to reject promises with the `error` helper exported from @sveltejs/kit otherwise it'll get treated as an unexpected error and only send `Internal Error` in the response.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1526874912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-28T02:29:50Z","updated_at":"2023-04-28T02:29:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sveltejs/kit/issues/9791","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/9791/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/9791/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/9791/events","html_url":"https://github.com/sveltejs/kit/pull/9791","id":1687794034,"node_id":"PR_kwDOEiPr8c5PWLut","number":9791,"title":"fix: log whole error object in default handleError","user":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-28T02:29:50Z","updated_at":"2023-04-28T07:25:22Z","closed_at":"2023-04-28T07:25:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":304344049,"node_id":"MDEwOlJlcG9zaXRvcnkzMDQzNDQwNDk=","name":"kit","full_name":"sveltejs/kit","private":false,"owner":{"login":"sveltejs","id":23617963,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzNjE3OTYz","avatar_url":"https://avatars.githubusercontent.com/u/23617963?v=4","gravatar_id":"","url":"https://api.github.com/users/sveltejs","html_url":"https://github.com/sveltejs","followers_url":"https://api.github.com/users/sveltejs/followers","following_url":"https://api.github.com/users/sveltejs/following{/other_user}","gists_url":"https://api.github.com/users/sveltejs/gists{/gist_id}","starred_url":"https://api.github.com/users/sveltejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sveltejs/subscriptions","organizations_url":"https://api.github.com/users/sveltejs/orgs","repos_url":"https://api.github.com/users/sveltejs/repos","events_url":"https://api.github.com/users/sveltejs/events{/privacy}","received_events_url":"https://api.github.com/users/sveltejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sveltejs/kit","description":"web development, streamlined","fork":false,"url":"https://api.github.com/repos/sveltejs/kit","forks_url":"https://api.github.com/repos/sveltejs/kit/forks","keys_url":"https://api.github.com/repos/sveltejs/kit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sveltejs/kit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sveltejs/kit/teams","hooks_url":"https://api.github.com/repos/sveltejs/kit/hooks","issue_events_url":"https://api.github.com/repos/sveltejs/kit/issues/events{/number}","events_url":"https://api.github.com/repos/sveltejs/kit/events","assignees_url":"https://api.github.com/repos/sveltejs/kit/assignees{/user}","branches_url":"https://api.github.com/repos/sveltejs/kit/branches{/branch}","tags_url":"https://api.github.com/repos/sveltejs/kit/tags","blobs_url":"https://api.github.com/repos/sveltejs/kit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sveltejs/kit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sveltejs/kit/git/refs{/sha}","trees_url":"https://api.github.com/repos/sveltejs/kit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sveltejs/kit/statuses/{sha}","languages_url":"https://api.github.com/repos/sveltejs/kit/languages","stargazers_url":"https://api.github.com/repos/sveltejs/kit/stargazers","contributors_url":"https://api.github.com/repos/sveltejs/kit/contributors","subscribers_url":"https://api.github.com/repos/sveltejs/kit/subscribers","subscription_url":"https://api.github.com/repos/sveltejs/kit/subscription","commits_url":"https://api.github.com/repos/sveltejs/kit/commits{/sha}","git_commits_url":"https://api.github.com/repos/sveltejs/kit/git/commits{/sha}","comments_url":"https://api.github.com/repos/sveltejs/kit/comments{/number}","issue_comment_url":"https://api.github.com/repos/sveltejs/kit/issues/comments{/number}","contents_url":"https://api.github.com/repos/sveltejs/kit/contents/{+path}","compare_url":"https://api.github.com/repos/sveltejs/kit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sveltejs/kit/merges","archive_url":"https://api.github.com/repos/sveltejs/kit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sveltejs/kit/downloads","issues_url":"https://api.github.com/repos/sveltejs/kit/issues{/number}","pulls_url":"https://api.github.com/repos/sveltejs/kit/pulls{/number}","milestones_url":"https://api.github.com/repos/sveltejs/kit/milestones{/number}","notifications_url":"https://api.github.com/repos/sveltejs/kit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sveltejs/kit/labels{/name}","releases_url":"https://api.github.com/repos/sveltejs/kit/releases{/id}","deployments_url":"https://api.github.com/repos/sveltejs/kit/deployments","created_at":"2020-10-15T14:00:23Z","updated_at":"2025-11-09T20:00:19Z","pushed_at":"2025-11-09T16:24:14Z","git_url":"git://github.com/sveltejs/kit.git","ssh_url":"git@github.com:sveltejs/kit.git","clone_url":"https://github.com/sveltejs/kit.git","svn_url":"https://github.com/sveltejs/kit","homepage":"https://svelte.dev/docs/kit","size":31752,"stargazers_count":19933,"watchers_count":19933,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2150,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1029,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","svelte"],"visibility":"public","forks":2150,"open_issues":1029,"watchers":19933,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sveltejs/kit/pulls/9791","html_url":"https://github.com/sveltejs/kit/pull/9791","diff_url":"https://github.com/sveltejs/kit/pull/9791.diff","patch_url":"https://github.com/sveltejs/kit/pull/9791.patch","merged_at":"2023-04-28T07:25:20Z"},"body":"ref #9785 \r\n\r\nPeople may have custom errors without a stack and logging just the stack as a string misses out on some pretty terminal formatting from node, along with stuff like `Error.cause`.\r\n\r\n### Please don't delete this checklist! Before submitting the PR, please make sure you do the following:\r\n- [x] It's really useful if your PR references an issue where it is discussed ahead of time. In many cases, features are absent for a reason. For large changes, please create an RFC: https://github.com/sveltejs/rfcs\r\n- [x] This message body should clearly illustrate what problems it solves.\r\n- [ ] Ideally, include a test that fails without this PR but passes with it.\r\n\r\n### Tests\r\n- [x] Run the tests with `pnpm test` and lint the project with `pnpm lint` and `pnpm check`\r\n\r\n### Changesets\r\n- [x] If your PR makes a change that should be noted in one or more packages' changelogs, generate a changeset by running `pnpm changeset` and following the prompts. Changesets that add features should be `minor` and those that fix bugs should be `patch`. Please prefix changeset messages with `feat:`, `fix:`, or `chore:`.\r\n","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/9791/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/9791/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9121799069,"node_id":"CE_lADOEiPr8c5klNwLzwAAAAIfs5ud","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9121799069","actor":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"789f4c77d7343d48167e0201178cea5067a72c74","commit_url":"https://api.github.com/repos/sveltejs/kit/commits/789f4c77d7343d48167e0201178cea5067a72c74","created_at":"2023-04-28T07:25:25Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1528798536","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1528798536","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1528798536,"node_id":"IC_kwDOEiPr8c5bH51I","user":{"login":"rfberaldo","id":18370605,"node_id":"MDQ6VXNlcjE4MzcwNjA1","avatar_url":"https://avatars.githubusercontent.com/u/18370605?v=4","gravatar_id":"","url":"https://api.github.com/users/rfberaldo","html_url":"https://github.com/rfberaldo","followers_url":"https://api.github.com/users/rfberaldo/followers","following_url":"https://api.github.com/users/rfberaldo/following{/other_user}","gists_url":"https://api.github.com/users/rfberaldo/gists{/gist_id}","starred_url":"https://api.github.com/users/rfberaldo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rfberaldo/subscriptions","organizations_url":"https://api.github.com/users/rfberaldo/orgs","repos_url":"https://api.github.com/users/rfberaldo/repos","events_url":"https://api.github.com/users/rfberaldo/events{/privacy}","received_events_url":"https://api.github.com/users/rfberaldo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T14:14:05Z","updated_at":"2023-04-29T14:14:14Z","body":"> Although I guess the expectation here is that you want \"Custom error\" to show up in the page as the error message, is that correct?\r\n\r\nYes\r\n\r\n> For that you'd have to reject promises with the `error` helper exported from @sveltejs/kit otherwise it'll get treated as an unexpected error and only send `Internal Error` in the response.\r\n\r\nOK I got it working, the syntax should be: ``reject(error(404, 'Custom error'));``\r\n\r\nThank you very much!\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1528798536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rfberaldo","id":18370605,"node_id":"MDQ6VXNlcjE4MzcwNjA1","avatar_url":"https://avatars.githubusercontent.com/u/18370605?v=4","gravatar_id":"","url":"https://api.github.com/users/rfberaldo","html_url":"https://github.com/rfberaldo","followers_url":"https://api.github.com/users/rfberaldo/followers","following_url":"https://api.github.com/users/rfberaldo/following{/other_user}","gists_url":"https://api.github.com/users/rfberaldo/gists{/gist_id}","starred_url":"https://api.github.com/users/rfberaldo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rfberaldo/subscriptions","organizations_url":"https://api.github.com/users/rfberaldo/orgs","repos_url":"https://api.github.com/users/rfberaldo/repos","events_url":"https://api.github.com/users/rfberaldo/events{/privacy}","received_events_url":"https://api.github.com/users/rfberaldo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1529102538","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1529102538","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1529102538,"node_id":"IC_kwDOEiPr8c5bJEDK","user":{"login":"MarcusCemes","id":20288819,"node_id":"MDQ6VXNlcjIwMjg4ODE5","avatar_url":"https://avatars.githubusercontent.com/u/20288819?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusCemes","html_url":"https://github.com/MarcusCemes","followers_url":"https://api.github.com/users/MarcusCemes/followers","following_url":"https://api.github.com/users/MarcusCemes/following{/other_user}","gists_url":"https://api.github.com/users/MarcusCemes/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusCemes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusCemes/subscriptions","organizations_url":"https://api.github.com/users/MarcusCemes/orgs","repos_url":"https://api.github.com/users/MarcusCemes/repos","events_url":"https://api.github.com/users/MarcusCemes/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusCemes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-30T18:15:18Z","updated_at":"2023-04-30T18:16:20Z","body":"I also seem to be encountering this issue, hard to say if it was there before because I only noticed it once I was getting fetch timeouts from the API.\r\n\r\n**Rejecting a streaming promise will crash the dev server.**\r\n\r\nAdd this to `page.js` in the starter template:\r\n\r\n```js\r\nexport const load = () => ({\r\n\tstream: {\r\n\t\tvalue: Promise.reject(42)\r\n\t}\r\n});\r\n```\r\n\r\nThe terminal prints:\r\n\r\n```\r\n[UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason \"42\".] {\r\n  code: 'ERR_UNHANDLED_REJECTION'\r\n}\r\n```\r\n\r\nThis is a working reproduction for me:\r\n\r\nhttps://stackblitz.com/edit/sveltejs-kit-template-default-lphmtx?file=src/routes/+page.js","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1529102538/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MarcusCemes","id":20288819,"node_id":"MDQ6VXNlcjIwMjg4ODE5","avatar_url":"https://avatars.githubusercontent.com/u/20288819?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusCemes","html_url":"https://github.com/MarcusCemes","followers_url":"https://api.github.com/users/MarcusCemes/followers","following_url":"https://api.github.com/users/MarcusCemes/following{/other_user}","gists_url":"https://api.github.com/users/MarcusCemes/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusCemes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusCemes/subscriptions","organizations_url":"https://api.github.com/users/MarcusCemes/orgs","repos_url":"https://api.github.com/users/MarcusCemes/repos","events_url":"https://api.github.com/users/MarcusCemes/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusCemes/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9133590688,"node_id":"REE_lADOEiPr8c5klNwLzwAAAAIgZ4ig","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9133590688","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2023-05-01T01:28:06Z","state_reason":"reopened","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1535651974","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1535651974","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1535651974,"node_id":"IC_kwDOEiPr8c5biDCG","user":{"login":"ghostdevv","id":47755378,"node_id":"MDQ6VXNlcjQ3NzU1Mzc4","avatar_url":"https://avatars.githubusercontent.com/u/47755378?v=4","gravatar_id":"","url":"https://api.github.com/users/ghostdevv","html_url":"https://github.com/ghostdevv","followers_url":"https://api.github.com/users/ghostdevv/followers","following_url":"https://api.github.com/users/ghostdevv/following{/other_user}","gists_url":"https://api.github.com/users/ghostdevv/gists{/gist_id}","starred_url":"https://api.github.com/users/ghostdevv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghostdevv/subscriptions","organizations_url":"https://api.github.com/users/ghostdevv/orgs","repos_url":"https://api.github.com/users/ghostdevv/repos","events_url":"https://api.github.com/users/ghostdevv/events{/privacy}","received_events_url":"https://api.github.com/users/ghostdevv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-05T03:23:05Z","updated_at":"2023-05-05T03:23:05Z","body":"Happens for me too","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1535651974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghostdevv","id":47755378,"node_id":"MDQ6VXNlcjQ3NzU1Mzc4","avatar_url":"https://avatars.githubusercontent.com/u/47755378?v=4","gravatar_id":"","url":"https://api.github.com/users/ghostdevv","html_url":"https://github.com/ghostdevv","followers_url":"https://api.github.com/users/ghostdevv/followers","following_url":"https://api.github.com/users/ghostdevv/following{/other_user}","gists_url":"https://api.github.com/users/ghostdevv/gists{/gist_id}","starred_url":"https://api.github.com/users/ghostdevv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghostdevv/subscriptions","organizations_url":"https://api.github.com/users/ghostdevv/orgs","repos_url":"https://api.github.com/users/ghostdevv/repos","events_url":"https://api.github.com/users/ghostdevv/events{/privacy}","received_events_url":"https://api.github.com/users/ghostdevv/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1536509972","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1536509972","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1536509972,"node_id":"IC_kwDOEiPr8c5blUgU","user":{"login":"adrifer","id":812246,"node_id":"MDQ6VXNlcjgxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/812246?v=4","gravatar_id":"","url":"https://api.github.com/users/adrifer","html_url":"https://github.com/adrifer","followers_url":"https://api.github.com/users/adrifer/followers","following_url":"https://api.github.com/users/adrifer/following{/other_user}","gists_url":"https://api.github.com/users/adrifer/gists{/gist_id}","starred_url":"https://api.github.com/users/adrifer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrifer/subscriptions","organizations_url":"https://api.github.com/users/adrifer/orgs","repos_url":"https://api.github.com/users/adrifer/repos","events_url":"https://api.github.com/users/adrifer/events{/privacy}","received_events_url":"https://api.github.com/users/adrifer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-05T16:41:16Z","updated_at":"2023-05-05T16:41:16Z","body":"Yes I have the same issue. It breaks my refresh auth logic, when I do a request inside a load function that returns a 401, I throw a redirect to /refresh/login. That works when I'm waiting inside the load or returning as a first level in the return object, but as soon as I move that request on a deeper level to stream the response, it crash the dev server","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1536509972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adrifer","id":812246,"node_id":"MDQ6VXNlcjgxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/812246?v=4","gravatar_id":"","url":"https://api.github.com/users/adrifer","html_url":"https://github.com/adrifer","followers_url":"https://api.github.com/users/adrifer/followers","following_url":"https://api.github.com/users/adrifer/following{/other_user}","gists_url":"https://api.github.com/users/adrifer/gists{/gist_id}","starred_url":"https://api.github.com/users/adrifer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrifer/subscriptions","organizations_url":"https://api.github.com/users/adrifer/orgs","repos_url":"https://api.github.com/users/adrifer/repos","events_url":"https://api.github.com/users/adrifer/events{/privacy}","received_events_url":"https://api.github.com/users/adrifer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1537305914","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1537305914","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1537305914,"node_id":"IC_kwDOEiPr8c5boW06","user":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-07T06:12:59Z","updated_at":"2023-05-07T08:30:22Z","body":"@adrifer Before you tread down that path, I should let you know that you can't throw redirects from a streamed promise. The server needs to know the status code before it starts sending the response and it's too late by the time it gets to your streamed promises.\r\n\r\nAs for the issue in general, Node.js requires that an error handler must be attached before the tick in which the promise is rejected. In SvelteKit, that's done by the serializer, but by the time we're done awaiting all [the load functions](https://github.com/sveltejs/kit/blob/73a91c644ed9f797b97f85d6f99b5b0cdc0f857f/packages/kit/src/runtime/server/page/index.js#L201-L202) it may have been too late to attach the handler.\r\n\r\nI can't think of a clean way to solve this yet, I don't think it's actually possible with the current API, we'd have to walk the returned objects (arrays, maps, whatever included) as soon as we get it from the user but turns out even that's not enough.\r\n\r\nConsider\r\n```js\r\n{ nested: { promise: Promise.reject() }, something: await setTimeout(1000) }\r\n```\r\nthe rejected promise is created before the yield point of the timeout so the exception is triggered  and the process exits before the promise even reaches SvelteKit.\r\n\r\nPerhaps there is some way to kludge this, ensuring we attach the error handlers before any other yield point is reached. ~The handlers would catch the error and put it back on the promise under some special key and the serializer checks the key to get errors that happened before the promise reached the serializer~ (apparently just need to chain a catch handler, and not use the chained promise) but I won't be too hopeful that it's viable. We might need something like `defer()` after all.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1537305914/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9183708979,"node_id":"MEE_lADOEiPr8c5klNwLzwAAAAIjZEcz","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9183708979","actor":{"login":"adrifer","id":812246,"node_id":"MDQ6VXNlcjgxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/812246?v=4","gravatar_id":"","url":"https://api.github.com/users/adrifer","html_url":"https://github.com/adrifer","followers_url":"https://api.github.com/users/adrifer/followers","following_url":"https://api.github.com/users/adrifer/following{/other_user}","gists_url":"https://api.github.com/users/adrifer/gists{/gist_id}","starred_url":"https://api.github.com/users/adrifer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrifer/subscriptions","organizations_url":"https://api.github.com/users/adrifer/orgs","repos_url":"https://api.github.com/users/adrifer/repos","events_url":"https://api.github.com/users/adrifer/events{/privacy}","received_events_url":"https://api.github.com/users/adrifer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-07T06:12:59Z","performed_via_github_app":null},{"id":9183708980,"node_id":"SE_lADOEiPr8c5klNwLzwAAAAIjZEc0","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9183708980","actor":{"login":"adrifer","id":812246,"node_id":"MDQ6VXNlcjgxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/812246?v=4","gravatar_id":"","url":"https://api.github.com/users/adrifer","html_url":"https://github.com/adrifer","followers_url":"https://api.github.com/users/adrifer/followers","following_url":"https://api.github.com/users/adrifer/following{/other_user}","gists_url":"https://api.github.com/users/adrifer/gists{/gist_id}","starred_url":"https://api.github.com/users/adrifer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrifer/subscriptions","organizations_url":"https://api.github.com/users/adrifer/orgs","repos_url":"https://api.github.com/users/adrifer/repos","events_url":"https://api.github.com/users/adrifer/events{/privacy}","received_events_url":"https://api.github.com/users/adrifer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-07T06:12:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1546465192","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1546465192","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1546465192,"node_id":"IC_kwDOEiPr8c5cLS-o","user":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T00:26:05Z","updated_at":"2023-05-13T00:33:50Z","body":"FWIW, I am experiencing this and it hard crashes the prod server as well. For example if I have a fetch failure it will hard crash and terminate the process:\r\n\r\nFor example if I have a fetch like this in a `+page.ts` **and** there's no server running on port 8080\r\n\r\n```typescript\r\nexport function load(ctx) {\r\n  return {\r\n    streamed: {\r\n      thing: ctx.fetch(\"http://localhost:8080\")\r\n    }\r\n  };\r\n}\r\n```\r\n\r\nThe production server hard crashes:\r\n```bash\r\n> npm run build && npm run preview\r\n```\r\n<img width=\"667\" alt=\"Screenshot 2023-05-12 at 5 25 33 PM\" src=\"https://github.com/sveltejs/kit/assets/161737/27810863-cd48-4a7d-8b5f-544683f76b5c\">\r\n\r\nEven scarier is this happens on vercel and the server is just dead:\r\n<img width=\"591\" alt=\"Screenshot 2023-05-12 at 5 27 46 PM\" src=\"https://github.com/sveltejs/kit/assets/161737/e6063e1b-0007-4890-9f74-c0b54a505f73\">\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1546465192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1546471991","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1546471991","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1546471991,"node_id":"IC_kwDOEiPr8c5cLUo3","user":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T00:42:12Z","updated_at":"2023-05-13T00:42:12Z","body":"Here is a full repro: https://stackblitz.com/edit/sveltejs-kit-template-default-uq1e5c?file=src%2Froutes%2F%2Bpage.server.js","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1546471991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1552836871","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1552836871","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1552836871,"node_id":"IC_kwDOEiPr8c5cjmkH","user":{"login":"MLNW","id":20930814,"node_id":"MDQ6VXNlcjIwOTMwODE0","avatar_url":"https://avatars.githubusercontent.com/u/20930814?v=4","gravatar_id":"","url":"https://api.github.com/users/MLNW","html_url":"https://github.com/MLNW","followers_url":"https://api.github.com/users/MLNW/followers","following_url":"https://api.github.com/users/MLNW/following{/other_user}","gists_url":"https://api.github.com/users/MLNW/gists{/gist_id}","starred_url":"https://api.github.com/users/MLNW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLNW/subscriptions","organizations_url":"https://api.github.com/users/MLNW/orgs","repos_url":"https://api.github.com/users/MLNW/repos","events_url":"https://api.github.com/users/MLNW/events{/privacy}","received_events_url":"https://api.github.com/users/MLNW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T10:12:01Z","updated_at":"2023-05-18T10:12:01Z","body":"This issue makes streamed data mostly unusable. Especially when dealing with fetches that may return a 404 or those that want to throw a redirect. It, for example, prevents us from using redirects to protect authentication sensitive routes.\r\n\r\nAnd whats even worse is that the [documentation](https://kit.svelte.dev/docs/load#streaming-with-promises) of streamed data is suggesting that error handling isn't an issue. The example promise won't fail\r\n```javascript\r\n            three: new Promise((fulfil) => {\r\n                setTimeout(() => {\r\n                    fulfil(3)\r\n                }, 1000);\r\n            })\r\n```\r\nand the error handling\r\n```js\r\n    {#await data.streamed.three}\r\n        Loading...\r\n    {:then value}\r\n        {value}\r\n    {:catch error}\r\n        {error.message}\r\n    {/await}\r\n```\r\nsuggests that rejected, streamed data does not crash the server.\r\n\r\nDebugging this issue has cost us a lot of time that could have been prevent by mentioning this caveat in the documentation, or even better, implementing a fix. This should be a high priority issue, if you ask me.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1552836871/reactions","total_count":28,"+1":28,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MLNW","id":20930814,"node_id":"MDQ6VXNlcjIwOTMwODE0","avatar_url":"https://avatars.githubusercontent.com/u/20930814?v=4","gravatar_id":"","url":"https://api.github.com/users/MLNW","html_url":"https://github.com/MLNW","followers_url":"https://api.github.com/users/MLNW/followers","following_url":"https://api.github.com/users/MLNW/following{/other_user}","gists_url":"https://api.github.com/users/MLNW/gists{/gist_id}","starred_url":"https://api.github.com/users/MLNW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLNW/subscriptions","organizations_url":"https://api.github.com/users/MLNW/orgs","repos_url":"https://api.github.com/users/MLNW/repos","events_url":"https://api.github.com/users/MLNW/events{/privacy}","received_events_url":"https://api.github.com/users/MLNW/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9278663836,"node_id":"REFE_lADOEiPr8c5klNwLzwAAAAIpDSyc","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9278663836","actor":{"login":"MLNW","id":20930814,"node_id":"MDQ6VXNlcjIwOTMwODE0","avatar_url":"https://avatars.githubusercontent.com/u/20930814?v=4","gravatar_id":"","url":"https://api.github.com/users/MLNW","html_url":"https://github.com/MLNW","followers_url":"https://api.github.com/users/MLNW/followers","following_url":"https://api.github.com/users/MLNW/following{/other_user}","gists_url":"https://api.github.com/users/MLNW/gists{/gist_id}","starred_url":"https://api.github.com/users/MLNW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLNW/subscriptions","organizations_url":"https://api.github.com/users/MLNW/orgs","repos_url":"https://api.github.com/users/MLNW/repos","events_url":"https://api.github.com/users/MLNW/events{/privacy}","received_events_url":"https://api.github.com/users/MLNW/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"60b2dc7b9008e13e5f856f508360b50e42fdf171","commit_url":"https://api.github.com/repos/MLNW/skeleton-traders/commits/60b2dc7b9008e13e5f856f508360b50e42fdf171","created_at":"2023-05-18T11:17:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1553369119","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1553369119","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1553369119,"node_id":"IC_kwDOEiPr8c5clogf","user":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T17:16:16Z","updated_at":"2023-05-18T17:16:16Z","body":"Agreed with @MLNW. I ran into this issue specifically with trying to throw a redirect (which is the recommended approach) if the fetch failed on an unauthorized error. Right now we'd have to wrap this in something that is guaranteed not to fail and handle explicitly in our components.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1553369119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jetaggart","id":161737,"node_id":"MDQ6VXNlcjE2MTczNw==","avatar_url":"https://avatars.githubusercontent.com/u/161737?v=4","gravatar_id":"","url":"https://api.github.com/users/jetaggart","html_url":"https://github.com/jetaggart","followers_url":"https://api.github.com/users/jetaggart/followers","following_url":"https://api.github.com/users/jetaggart/following{/other_user}","gists_url":"https://api.github.com/users/jetaggart/gists{/gist_id}","starred_url":"https://api.github.com/users/jetaggart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jetaggart/subscriptions","organizations_url":"https://api.github.com/users/jetaggart/orgs","repos_url":"https://api.github.com/users/jetaggart/repos","events_url":"https://api.github.com/users/jetaggart/events{/privacy}","received_events_url":"https://api.github.com/users/jetaggart/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9282067719,"node_id":"MEE_lADOEiPr8c5klNwLzwAAAAIpQR0H","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9282067719","actor":{"login":"MLNW","id":20930814,"node_id":"MDQ6VXNlcjIwOTMwODE0","avatar_url":"https://avatars.githubusercontent.com/u/20930814?v=4","gravatar_id":"","url":"https://api.github.com/users/MLNW","html_url":"https://github.com/MLNW","followers_url":"https://api.github.com/users/MLNW/followers","following_url":"https://api.github.com/users/MLNW/following{/other_user}","gists_url":"https://api.github.com/users/MLNW/gists{/gist_id}","starred_url":"https://api.github.com/users/MLNW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLNW/subscriptions","organizations_url":"https://api.github.com/users/MLNW/orgs","repos_url":"https://api.github.com/users/MLNW/repos","events_url":"https://api.github.com/users/MLNW/events{/privacy}","received_events_url":"https://api.github.com/users/MLNW/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-18T17:16:16Z","performed_via_github_app":null},{"id":9282067727,"node_id":"SE_lADOEiPr8c5klNwLzwAAAAIpQR0P","url":"https://api.github.com/repos/sveltejs/kit/issues/events/9282067727","actor":{"login":"MLNW","id":20930814,"node_id":"MDQ6VXNlcjIwOTMwODE0","avatar_url":"https://avatars.githubusercontent.com/u/20930814?v=4","gravatar_id":"","url":"https://api.github.com/users/MLNW","html_url":"https://github.com/MLNW","followers_url":"https://api.github.com/users/MLNW/followers","following_url":"https://api.github.com/users/MLNW/following{/other_user}","gists_url":"https://api.github.com/users/MLNW/gists{/gist_id}","starred_url":"https://api.github.com/users/MLNW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLNW/subscriptions","organizations_url":"https://api.github.com/users/MLNW/orgs","repos_url":"https://api.github.com/users/MLNW/repos","events_url":"https://api.github.com/users/MLNW/events{/privacy}","received_events_url":"https://api.github.com/users/MLNW/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-18T17:16:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1576615961","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1576615961","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1576615961,"node_id":"IC_kwDOEiPr8c5d-UAZ","user":{"login":"mpiorowski","id":26543876,"node_id":"MDQ6VXNlcjI2NTQzODc2","avatar_url":"https://avatars.githubusercontent.com/u/26543876?v=4","gravatar_id":"","url":"https://api.github.com/users/mpiorowski","html_url":"https://github.com/mpiorowski","followers_url":"https://api.github.com/users/mpiorowski/followers","following_url":"https://api.github.com/users/mpiorowski/following{/other_user}","gists_url":"https://api.github.com/users/mpiorowski/gists{/gist_id}","starred_url":"https://api.github.com/users/mpiorowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpiorowski/subscriptions","organizations_url":"https://api.github.com/users/mpiorowski/orgs","repos_url":"https://api.github.com/users/mpiorowski/repos","events_url":"https://api.github.com/users/mpiorowski/events{/privacy}","received_events_url":"https://api.github.com/users/mpiorowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-05T11:29:22Z","updated_at":"2023-06-05T11:29:40Z","body":"Also the same problem, the funny thing is that the \r\n```\r\n{#await data.streamed.three}\r\n      Loading...\r\n  {:then value}\r\n      {value}\r\n  {:catch error}\r\n      {error.message}\r\n  {/await}\r\n```\r\nworks when i navigate to this page from another route, BUT crash the server when i reload the page.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1576615961/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mpiorowski","id":26543876,"node_id":"MDQ6VXNlcjI2NTQzODc2","avatar_url":"https://avatars.githubusercontent.com/u/26543876?v=4","gravatar_id":"","url":"https://api.github.com/users/mpiorowski","html_url":"https://github.com/mpiorowski","followers_url":"https://api.github.com/users/mpiorowski/followers","following_url":"https://api.github.com/users/mpiorowski/following{/other_user}","gists_url":"https://api.github.com/users/mpiorowski/gists{/gist_id}","starred_url":"https://api.github.com/users/mpiorowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpiorowski/subscriptions","organizations_url":"https://api.github.com/users/mpiorowski/orgs","repos_url":"https://api.github.com/users/mpiorowski/repos","events_url":"https://api.github.com/users/mpiorowski/events{/privacy}","received_events_url":"https://api.github.com/users/mpiorowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1636030142","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1636030142","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1636030142,"node_id":"IC_kwDOEiPr8c5hg9a-","user":{"login":"knulpi","id":24552458,"node_id":"MDQ6VXNlcjI0NTUyNDU4","avatar_url":"https://avatars.githubusercontent.com/u/24552458?v=4","gravatar_id":"","url":"https://api.github.com/users/knulpi","html_url":"https://github.com/knulpi","followers_url":"https://api.github.com/users/knulpi/followers","following_url":"https://api.github.com/users/knulpi/following{/other_user}","gists_url":"https://api.github.com/users/knulpi/gists{/gist_id}","starred_url":"https://api.github.com/users/knulpi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knulpi/subscriptions","organizations_url":"https://api.github.com/users/knulpi/orgs","repos_url":"https://api.github.com/users/knulpi/repos","events_url":"https://api.github.com/users/knulpi/events{/privacy}","received_events_url":"https://api.github.com/users/knulpi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-14T15:32:06Z","updated_at":"2023-07-14T15:32:06Z","body":"> works when i navigate to this page from another route, BUT crash the server when i reload the page.\r\n\r\nCould it be that you have a universal instead of a server-only load function set up? Because if it is universal, the client might handle it, and the error case here happens during SSR.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1636030142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"knulpi","id":24552458,"node_id":"MDQ6VXNlcjI0NTUyNDU4","avatar_url":"https://avatars.githubusercontent.com/u/24552458?v=4","gravatar_id":"","url":"https://api.github.com/users/knulpi","html_url":"https://github.com/knulpi","followers_url":"https://api.github.com/users/knulpi/followers","following_url":"https://api.github.com/users/knulpi/following{/other_user}","gists_url":"https://api.github.com/users/knulpi/gists{/gist_id}","starred_url":"https://api.github.com/users/knulpi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knulpi/subscriptions","organizations_url":"https://api.github.com/users/knulpi/orgs","repos_url":"https://api.github.com/users/knulpi/repos","events_url":"https://api.github.com/users/knulpi/events{/privacy}","received_events_url":"https://api.github.com/users/knulpi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1636078457","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1636078457","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1636078457,"node_id":"IC_kwDOEiPr8c5hhJN5","user":{"login":"knulpi","id":24552458,"node_id":"MDQ6VXNlcjI0NTUyNDU4","avatar_url":"https://avatars.githubusercontent.com/u/24552458?v=4","gravatar_id":"","url":"https://api.github.com/users/knulpi","html_url":"https://github.com/knulpi","followers_url":"https://api.github.com/users/knulpi/followers","following_url":"https://api.github.com/users/knulpi/following{/other_user}","gists_url":"https://api.github.com/users/knulpi/gists{/gist_id}","starred_url":"https://api.github.com/users/knulpi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knulpi/subscriptions","organizations_url":"https://api.github.com/users/knulpi/orgs","repos_url":"https://api.github.com/users/knulpi/repos","events_url":"https://api.github.com/users/knulpi/events{/privacy}","received_events_url":"https://api.github.com/users/knulpi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-14T16:13:23Z","updated_at":"2023-07-14T16:13:23Z","body":"The only solution for me right now to this, while still making use of the streaming feature is to catch the error in-place and handle the object in the page. This is not the same as classical error handling with load functions, but at least I can use `{#await}` blocks again to show loading state to the user.\r\n\r\n```ts\r\nreturn {\r\n\tpromises: {\r\n\t\tsectionData: GetPageData(params.pageId).then(undefined, () => {return {error: \"asdf\"}})\r\n\t}\r\n}\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1636078457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"knulpi","id":24552458,"node_id":"MDQ6VXNlcjI0NTUyNDU4","avatar_url":"https://avatars.githubusercontent.com/u/24552458?v=4","gravatar_id":"","url":"https://api.github.com/users/knulpi","html_url":"https://github.com/knulpi","followers_url":"https://api.github.com/users/knulpi/followers","following_url":"https://api.github.com/users/knulpi/following{/other_user}","gists_url":"https://api.github.com/users/knulpi/gists{/gist_id}","starred_url":"https://api.github.com/users/knulpi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knulpi/subscriptions","organizations_url":"https://api.github.com/users/knulpi/orgs","repos_url":"https://api.github.com/users/knulpi/repos","events_url":"https://api.github.com/users/knulpi/events{/privacy}","received_events_url":"https://api.github.com/users/knulpi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1639292146","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1639292146","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1639292146,"node_id":"IC_kwDOEiPr8c5htZzy","user":{"login":"eliasdefaria","id":30669330,"node_id":"MDQ6VXNlcjMwNjY5MzMw","avatar_url":"https://avatars.githubusercontent.com/u/30669330?v=4","gravatar_id":"","url":"https://api.github.com/users/eliasdefaria","html_url":"https://github.com/eliasdefaria","followers_url":"https://api.github.com/users/eliasdefaria/followers","following_url":"https://api.github.com/users/eliasdefaria/following{/other_user}","gists_url":"https://api.github.com/users/eliasdefaria/gists{/gist_id}","starred_url":"https://api.github.com/users/eliasdefaria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliasdefaria/subscriptions","organizations_url":"https://api.github.com/users/eliasdefaria/orgs","repos_url":"https://api.github.com/users/eliasdefaria/repos","events_url":"https://api.github.com/users/eliasdefaria/events{/privacy}","received_events_url":"https://api.github.com/users/eliasdefaria/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T03:33:09Z","updated_at":"2023-07-18T03:33:09Z","body":"Still struggling with this as well. Does not seem like there's a viable solution at the moment other than to just handle the errors on the client. For redirects, I'm just check if I'm in the browser then using `goto`. Doesn't feel right :/","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1639292146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eliasdefaria","id":30669330,"node_id":"MDQ6VXNlcjMwNjY5MzMw","avatar_url":"https://avatars.githubusercontent.com/u/30669330?v=4","gravatar_id":"","url":"https://api.github.com/users/eliasdefaria","html_url":"https://github.com/eliasdefaria","followers_url":"https://api.github.com/users/eliasdefaria/followers","following_url":"https://api.github.com/users/eliasdefaria/following{/other_user}","gists_url":"https://api.github.com/users/eliasdefaria/gists{/gist_id}","starred_url":"https://api.github.com/users/eliasdefaria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliasdefaria/subscriptions","organizations_url":"https://api.github.com/users/eliasdefaria/orgs","repos_url":"https://api.github.com/users/eliasdefaria/repos","events_url":"https://api.github.com/users/eliasdefaria/events{/privacy}","received_events_url":"https://api.github.com/users/eliasdefaria/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1675194694","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1675194694","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1675194694,"node_id":"IC_kwDOEiPr8c5j2XFG","user":{"login":"munzx","id":3707785,"node_id":"MDQ6VXNlcjM3MDc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/3707785?v=4","gravatar_id":"","url":"https://api.github.com/users/munzx","html_url":"https://github.com/munzx","followers_url":"https://api.github.com/users/munzx/followers","following_url":"https://api.github.com/users/munzx/following{/other_user}","gists_url":"https://api.github.com/users/munzx/gists{/gist_id}","starred_url":"https://api.github.com/users/munzx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munzx/subscriptions","organizations_url":"https://api.github.com/users/munzx/orgs","repos_url":"https://api.github.com/users/munzx/repos","events_url":"https://api.github.com/users/munzx/events{/privacy}","received_events_url":"https://api.github.com/users/munzx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-11T18:22:47Z","updated_at":"2023-08-11T18:22:47Z","body":"this is what I am using to resolve this issue \r\n\r\n`function streamedError(err: {status: number, body: {message: string}}) {\r\n    return new Promise((fulfil, reject) => {\r\n        setTimeout(() => {\r\n            reject(error(err.status, err.body.message));\r\n        }, 500);\r\n    });\r\n}`\r\n\r\nand then I attach it to the streamed promises as follows:\r\n`streamedFunc().catch(err=>streamedError(err))`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1675194694/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"munzx","id":3707785,"node_id":"MDQ6VXNlcjM3MDc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/3707785?v=4","gravatar_id":"","url":"https://api.github.com/users/munzx","html_url":"https://github.com/munzx","followers_url":"https://api.github.com/users/munzx/followers","following_url":"https://api.github.com/users/munzx/following{/other_user}","gists_url":"https://api.github.com/users/munzx/gists{/gist_id}","starred_url":"https://api.github.com/users/munzx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munzx/subscriptions","organizations_url":"https://api.github.com/users/munzx/orgs","repos_url":"https://api.github.com/users/munzx/repos","events_url":"https://api.github.com/users/munzx/events{/privacy}","received_events_url":"https://api.github.com/users/munzx/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1676418431","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1676418431","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1676418431,"node_id":"IC_kwDOEiPr8c5j7B1_","user":{"login":"jdgamble555","id":8333090,"node_id":"MDQ6VXNlcjgzMzMwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/8333090?v=4","gravatar_id":"","url":"https://api.github.com/users/jdgamble555","html_url":"https://github.com/jdgamble555","followers_url":"https://api.github.com/users/jdgamble555/followers","following_url":"https://api.github.com/users/jdgamble555/following{/other_user}","gists_url":"https://api.github.com/users/jdgamble555/gists{/gist_id}","starred_url":"https://api.github.com/users/jdgamble555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdgamble555/subscriptions","organizations_url":"https://api.github.com/users/jdgamble555/orgs","repos_url":"https://api.github.com/users/jdgamble555/repos","events_url":"https://api.github.com/users/jdgamble555/events{/privacy}","received_events_url":"https://api.github.com/users/jdgamble555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-13T17:24:55Z","updated_at":"2023-08-13T17:24:55Z","body":"Yup, this is definitely a problem.  If the `catch` on the frontend doesn't work, this is useless.  I don't think the docs need to get updated as much as this is a bug that needs fixed asap.  As said above, this makes streaming unusable.\r\n\r\nJ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1676418431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jdgamble555","id":8333090,"node_id":"MDQ6VXNlcjgzMzMwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/8333090?v=4","gravatar_id":"","url":"https://api.github.com/users/jdgamble555","html_url":"https://github.com/jdgamble555","followers_url":"https://api.github.com/users/jdgamble555/followers","following_url":"https://api.github.com/users/jdgamble555/following{/other_user}","gists_url":"https://api.github.com/users/jdgamble555/gists{/gist_id}","starred_url":"https://api.github.com/users/jdgamble555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdgamble555/subscriptions","organizations_url":"https://api.github.com/users/jdgamble555/orgs","repos_url":"https://api.github.com/users/jdgamble555/repos","events_url":"https://api.github.com/users/jdgamble555/events{/privacy}","received_events_url":"https://api.github.com/users/jdgamble555/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1676649981","html_url":"https://github.com/sveltejs/kit/issues/9785#issuecomment-1676649981","issue_url":"https://api.github.com/repos/sveltejs/kit/issues/9785","id":1676649981,"node_id":"IC_kwDOEiPr8c5j76X9","user":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-14T04:21:40Z","updated_at":"2023-08-14T04:21:40Z","body":"We'll probably not be able to fix this without changing a few things in a major version because your promises can reject before they even reach SvelteKit.\r\n\r\nIn the meantime you can use workarounds https://jakearchibald.com/2023/unhandled-rejections/ to prevent crashing your server. Or set up a global promise rejection handler, which would be a good idea regardless of streamed promises.\r\n\r\nFor the ones that want to throw redirects from their streamed promises, that will not work, ever, because the browser has already received an `OK` response with the rest of the page by that point. The best you can do there is make another navigation on the client side like @eliasdefaria said.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/comments/1676649981/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gtm-nayan","id":50981692,"node_id":"MDQ6VXNlcjUwOTgxNjky","avatar_url":"https://avatars.githubusercontent.com/u/50981692?v=4","gravatar_id":"","url":"https://api.github.com/users/gtm-nayan","html_url":"https://github.com/gtm-nayan","followers_url":"https://api.github.com/users/gtm-nayan/followers","following_url":"https://api.github.com/users/gtm-nayan/following{/other_user}","gists_url":"https://api.github.com/users/gtm-nayan/gists{/gist_id}","starred_url":"https://api.github.com/users/gtm-nayan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtm-nayan/subscriptions","organizations_url":"https://api.github.com/users/gtm-nayan/orgs","repos_url":"https://api.github.com/users/gtm-nayan/repos","events_url":"https://api.github.com/users/gtm-nayan/events{/privacy}","received_events_url":"https://api.github.com/users/gtm-nayan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10081859392,"node_id":"MEE_lADOEiPr8c5klNwLzwAAAAJY7PdA","url":"https://api.github.com/repos/sveltejs/kit/issues/events/10081859392","actor":{"login":"eliasdefaria","id":30669330,"node_id":"MDQ6VXNlcjMwNjY5MzMw","avatar_url":"https://avatars.githubusercontent.com/u/30669330?v=4","gravatar_id":"","url":"https://api.github.com/users/eliasdefaria","html_url":"https://github.com/eliasdefaria","followers_url":"https://api.github.com/users/eliasdefaria/followers","following_url":"https://api.github.com/users/eliasdefaria/following{/other_user}","gists_url":"https://api.github.com/users/eliasdefaria/gists{/gist_id}","starred_url":"https://api.github.com/users/eliasdefaria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliasdefaria/subscriptions","organizations_url":"https://api.github.com/users/eliasdefaria/orgs","repos_url":"https://api.github.com/users/eliasdefaria/repos","events_url":"https://api.github.com/users/eliasdefaria/events{/privacy}","received_events_url":"https://api.github.com/users/eliasdefaria/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-14T04:21:40Z","performed_via_github_app":null},{"id":10081859400,"node_id":"SE_lADOEiPr8c5klNwLzwAAAAJY7PdI","url":"https://api.github.com/repos/sveltejs/kit/issues/events/10081859400","actor":{"login":"eliasdefaria","id":30669330,"node_id":"MDQ6VXNlcjMwNjY5MzMw","avatar_url":"https://avatars.githubusercontent.com/u/30669330?v=4","gravatar_id":"","url":"https://api.github.com/users/eliasdefaria","html_url":"https://github.com/eliasdefaria","followers_url":"https://api.github.com/users/eliasdefaria/followers","following_url":"https://api.github.com/users/eliasdefaria/following{/other_user}","gists_url":"https://api.github.com/users/eliasdefaria/gists{/gist_id}","starred_url":"https://api.github.com/users/eliasdefaria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliasdefaria/subscriptions","organizations_url":"https://api.github.com/users/eliasdefaria/orgs","repos_url":"https://api.github.com/users/eliasdefaria/repos","events_url":"https://api.github.com/users/eliasdefaria/events{/privacy}","received_events_url":"https://api.github.com/users/eliasdefaria/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-14T04:21:40Z","performed_via_github_app":null}]