{"url":"https://api.github.com/repos/sveltejs/kit/issues/8512","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/8512/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/8512/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/8512/events","html_url":"https://github.com/sveltejs/kit/issues/8512","id":1532819094,"node_id":"I_kwDOEiPr8c5bXPaW","number":8512,"title":"Builds hang on kit 1.0.13","user":{"login":"Smirow","id":16503412,"node_id":"MDQ6VXNlcjE2NTAzNDEy","avatar_url":"https://avatars.githubusercontent.com/u/16503412?v=4","gravatar_id":"","url":"https://api.github.com/users/Smirow","html_url":"https://github.com/Smirow","followers_url":"https://api.github.com/users/Smirow/followers","following_url":"https://api.github.com/users/Smirow/following{/other_user}","gists_url":"https://api.github.com/users/Smirow/gists{/gist_id}","starred_url":"https://api.github.com/users/Smirow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Smirow/subscriptions","organizations_url":"https://api.github.com/users/Smirow/orgs","repos_url":"https://api.github.com/users/Smirow/repos","events_url":"https://api.github.com/users/Smirow/events{/privacy}","received_events_url":"https://api.github.com/users/Smirow/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3147046323,"node_id":"MDU6TGFiZWwzMTQ3MDQ2MzIz","url":"https://api.github.com/repos/sveltejs/kit/labels/awaiting%20submitter","name":"awaiting submitter","color":"c5def5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-01-13T19:44:12Z","updated_at":"2023-01-13T23:26:18Z","closed_at":"2023-01-13T21:38:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nBuilds hang and never complete on 1.0.13, everything is fine on 1.0.12, sounds like it was introduced by #8429.\r\n\r\n\r\n### Reproduction\r\n\r\nWorking on a simple reproduction as it seems to be related to some specif usage. This happens before triggering the adaptaters. hooks.server.ts seems to be loaded on the build process, and it hangs there.\r\n\r\n### Logs\r\n\r\n```Shell\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/rentals/_error.svelte.js                                            0.39 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/_error.svelte.js                       0.39 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/_page.svelte.js                                                     0.40 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/_error.svelte.js              0.40 kB\r\n.svelte-kit/output/server/entries/pages/db/_page.svelte.js                                                                               0.43 kB\r\n.svelte-kit/output/server/chunks/XMark.js                                                                                                0.49 kB\r\n.svelte-kit/output/server/chunks/Plus.js                                                                                                 0.49 kB\r\n.svelte-kit/output/server/entries/pages/auth/login/_page.svelte.js                                                                       0.54 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/_layout.server.ts.js                   0.59 kB\r\n.svelte-kit/output/server/chunks/stores.js                                                                                               0.60 kB\r\n.svelte-kit/output/server/chunks/ArchivedBox.js                                                                                          0.73 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/_layout.server.ts.js                                                0.79 kB\r\n.svelte-kit/output/server/chunks/ArchivedBoxXMark.js                                                                                     0.80 kB\r\n.svelte-kit/output/server/chunks/zod.server.js                                                                                           0.83 kB\r\n.svelte-kit/output/server/entries/pages/auth/login/_page.server.ts.js                                                                    0.94 kB\r\n.svelte-kit/output/server/chunks/Dropdown.js                                                                                             1.15 kB\r\n.svelte-kit/output/server/chunks/index2.js                                                                                               1.32 kB\r\n.svelte-kit/output/server/chunks/Label.js                                                                                                1.37 kB\r\n.svelte-kit/output/server/chunks/Logo.js                                                                                                 1.45 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/rentals/(rentals)/_page.server.ts.js                                1.46 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/(properties)/_page.server.ts.js                          1.47 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/archive/_page.svelte.js       1.64 kB\r\n.svelte-kit/output/server/chunks/countryName.js                                                                                          1.66 kB\r\n.svelte-kit/output/server/chunks/index.js                                                                                                1.79 kB\r\n.svelte-kit/output/server/entries/pages/test/_page.svelte.js                                                                             1.85 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/archive/_page.server.ts.js    1.96 kB\r\n.svelte-kit/output/server/chunks/session.server.js                                                                                       2.20 kB\r\n.svelte-kit/output/server/chunks/property.lessor.server.js                                                                               2.30 kB\r\n.svelte-kit/output/server/chunks/rentals.lessor.server.js                                                                                2.38 kB\r\n.svelte-kit/output/server/chunks/hooks.server.js                                                                                         2.86 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/create/_page.server.ts.js                                3.28 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/_layout.svelte.js                      3.38 kB\r\n.svelte-kit/output/server/chunks/index3.js                                                                                               3.78 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/(update)/_page.server.ts.js   4.15 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/_layout.svelte.js                                                   4.68 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/(update)/_page.svelte.js      5.61 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/settings/_layout.svelte.js             5.79 kB\r\n.svelte-kit/output/server/chunks/server-internal.js                                                                                      6.01 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/create/_page.svelte.js                                   6.21 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/(properties)/_page.svelte.js                             6.69 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/rentals/(rentals)/_page.svelte.js                                   6.92 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/properties/_propertyId_uuid_/(overview)/_page.svelte.js             7.43 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/rentals/create/_page.server.ts.js                                   9.55 kB\r\n.svelte-kit/output/server/entries/pages/_layout.svelte.js                                                                               11.88 kB\r\n.svelte-kit/output/server/chunks/ErrorLayout.js                                                                                         16.19 kB\r\n.svelte-kit/output/server/entries/pages/(app)/lessor/_lessorId_uuid_/rentals/create/_page.svelte.js                                     24.70 kB\r\n.svelte-kit/output/server/index.js                                                                                                      76.22 kB\r\nServer hooks loaded\r\n```\r\n\r\n\r\n### System Info\r\n\r\n```Shell\r\nSystem:\r\n    OS: macOS 13.1\r\n    CPU: (10) arm64 Apple M1 Pro\r\n    Memory: 901.34 MB / 16.00 GB\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.12.1 - ~/.nvm/versions/node/v18.12.1/bin/node\r\n    npm: 8.19.2 - ~/.nvm/versions/node/v18.12.1/bin/npm\r\n  Browsers:\r\n    Chrome: 108.0.5359.124\r\n    Firefox: 108.0.1\r\n    Safari: 16.2\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^1.0.0 => 1.0.0\r\n    @sveltejs/adapter-netlify: ^1.0.1 => 1.0.1\r\n    @sveltejs/adapter-node: ^1.1.1 => 1.1.1\r\n    @sveltejs/adapter-vercel: ^1.0.2 => 1.0.2\r\n    @sveltejs/kit: 1.0.13 => 1.0.13\r\n    svelte: ^3.55.1 => 3.55.1\r\n    vite: ^4.0.4 => 4.0.4\r\n```\r\n\r\n\r\n### Severity\r\n\r\nblocking an upgrade\r\n\r\n### Additional Information\r\n\r\nusing 1.0.12 fixes the issue","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8512/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/8512/timeline","performed_via_github_app":null,"state_reason":"completed"}