{"url":"https://api.github.com/repos/sveltejs/kit/issues/6604","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/6604/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/6604/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/6604/events","html_url":"https://github.com/sveltejs/kit/issues/6604","id":1363536254,"node_id":"I_kwDOEiPr8c5RRel-","number":6604,"title":"Cookie leak","user":{"login":"oetiker","id":429279,"node_id":"MDQ6VXNlcjQyOTI3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/429279?v=4","gravatar_id":"","url":"https://api.github.com/users/oetiker","html_url":"https://github.com/oetiker","followers_url":"https://api.github.com/users/oetiker/followers","following_url":"https://api.github.com/users/oetiker/following{/other_user}","gists_url":"https://api.github.com/users/oetiker/gists{/gist_id}","starred_url":"https://api.github.com/users/oetiker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oetiker/subscriptions","organizations_url":"https://api.github.com/users/oetiker/orgs","repos_url":"https://api.github.com/users/oetiker/repos","events_url":"https://api.github.com/users/oetiker/events{/privacy}","received_events_url":"https://api.github.com/users/oetiker/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3147046323,"node_id":"MDU6TGFiZWwzMTQ3MDQ2MzIz","url":"https://api.github.com/repos/sveltejs/kit/labels/awaiting%20submitter","name":"awaiting submitter","color":"c5def5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sveltejs/kit/milestones/2","html_url":"https://github.com/sveltejs/kit/milestone/2","labels_url":"https://api.github.com/repos/sveltejs/kit/milestones/2/labels","id":6044960,"node_id":"MDk6TWlsZXN0b25lNjA0NDk2MA==","number":2,"title":"1.0","description":"stuff we need to nail down before launch","creator":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":628,"state":"closed","created_at":"2020-10-29T01:17:50Z","updated_at":"2022-12-19T11:47:29Z","due_on":null,"closed_at":"2022-12-19T11:47:29Z"},"comments":16,"created_at":"2022-09-06T16:26:38Z","updated_at":"2022-09-22T09:01:54Z","closed_at":"2022-09-21T19:42:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nIt seems that cookies, acquired via fetch, in serverside requests are added to the response.\n\n### Reproduction\n\nRun a svelte app AND a php app on the same website. Use `fetch` in your svelte app to get something from a php website. If this fetch runs server-side the PHPSESSID from the fetch response will be added to the svelte response to the browser. Overwriting the PHPSESSID in the browser.\r\n\r\nSince my svelte kit app does not use cookies at present, this was easily fixed with this \r\n\r\n```javascript\r\nexport async function handle({ event, resolve }) {\r\n    const response = await resolve(event);\r\n    response.headers.delete('set-cookie');\r\n    return response;\r\n}\r\n```\n\n### Logs\n\n_No response_\n\n### System Info\n\n```shell\nSystem:\r\n    OS: Linux 5.4 Ubuntu 20.04.5 LTS (Focal Fossa)\r\n    CPU: (128) x64 AMD EPYC 7742 64-Core Processor\r\n    Memory: 36.57 GB / 78.07 GB\r\n    Container: Yes\r\n    Shell: 5.0.17 - /bin/bash\r\n  Binaries:\r\n    Node: 16.14.0 - ~/.asdf/installs/nodejs/16.14.0/bin/node\r\n    npm: 8.19.0 - ~/.asdf/plugins/nodejs/shims/npm\r\n  Browsers:\r\n    Chrome: 105.0.5195.102\r\n    Firefox: 104.0\n```\n\n\n### Severity\n\nserious, but I can work around it\n\n### Additional Information\n\n_No response_","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/6604/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/6604/timeline","performed_via_github_app":null,"state_reason":"completed"}