{"url":"https://api.github.com/repos/sveltejs/kit/issues/8200","repository_url":"https://api.github.com/repos/sveltejs/kit","labels_url":"https://api.github.com/repos/sveltejs/kit/issues/8200/labels{/name}","comments_url":"https://api.github.com/repos/sveltejs/kit/issues/8200/comments","events_url":"https://api.github.com/repos/sveltejs/kit/issues/8200/events","html_url":"https://github.com/sveltejs/kit/issues/8200","id":1501025912,"node_id":"I_kwDOEiPr8c5Zd9Z4","number":8200,"title":"Don't add `nonce` to `<link>` elements when CSP is enabled","user":{"login":"aradalvand","id":26527405,"node_id":"MDQ6VXNlcjI2NTI3NDA1","avatar_url":"https://avatars.githubusercontent.com/u/26527405?v=4","gravatar_id":"","url":"https://api.github.com/users/aradalvand","html_url":"https://github.com/aradalvand","followers_url":"https://api.github.com/users/aradalvand/followers","following_url":"https://api.github.com/users/aradalvand/following{/other_user}","gists_url":"https://api.github.com/users/aradalvand/gists{/gist_id}","starred_url":"https://api.github.com/users/aradalvand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aradalvand/subscriptions","organizations_url":"https://api.github.com/users/aradalvand/orgs","repos_url":"https://api.github.com/users/aradalvand/repos","events_url":"https://api.github.com/users/aradalvand/events{/privacy}","received_events_url":"https://api.github.com/users/aradalvand/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2428470026,"node_id":"MDU6TGFiZWwyNDI4NDcwMDI2","url":"https://api.github.com/repos/sveltejs/kit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":4343790735,"node_id":"LA_kwDOEiPr8c8AAAABAuj8jw","url":"https://api.github.com/repos/sveltejs/kit/labels/low%20hanging%20fruit","name":"low hanging fruit","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-12-17T00:01:54Z","updated_at":"2023-01-17T11:08:45Z","closed_at":"2023-01-09T09:40:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nCurrently, when nonce-based CSP is enabled in SvelteKit, the `nonce` attribute is added to `<link>` elements as well, but `nonce` is only applicable to `<style>` and `<script>`, according to [the CSP2 specification](https://www.w3.org/TR/CSP2/#script-src-the-nonce-attribute) + [the CSP3 specification](https://www.w3.org/TR/CSP3/#changes-from-level-2:~:text=Nonces%20only%20apply%20to%20inline). Unless I'm missing something, in which case please let me know.\r\n\r\nThis is what SvelteKit generates\r\n```html\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\" />\r\n\t\t<link rel=\"icon\" href=\"./favicon.png\" />\r\n\t\t<meta name=\"viewport\" content=\"width=device-width\" />\r\n\t\t\r\n\t\t<link href=\"./_app/immutable/assets/_page-2347c82c.css\" rel=\"stylesheet\" nonce=\"u7VH06jH02YES86ylTAPmA==\">\r\n\t</head>\r\n\t<body data-sveltekit-preload-data=\"hover\">\r\n\t\t<div style=\"display: contents\">\r\n\r\n<h1 class=\"svelte-bt9zrl\">Welcome to SvelteKit</h1>\r\n<p>Visit <a href=\"https://kit.svelte.dev\">kit.svelte.dev</a> to read the documentation</p>\r\n\r\n\r\n\t\t<script type=\"module\" data-sveltekit-hydrate=\"1j3ysyd\" nonce=\"u7VH06jH02YES86ylTAPmA==\">\r\n\t\t\timport { start } from \"./_app/immutable/start-c4a34443.js\";\r\n\r\n\t\t\tstart({\r\n\t\t\t\tenv: {},\r\n\t\t\t\tpaths: {\"base\":\"\",\"assets\":\"\"},\r\n\t\t\t\ttarget: document.querySelector('[data-sveltekit-hydrate=\"1j3ysyd\"]').parentNode,\r\n\t\t\t\tversion: \"1671235206427\",\r\n\t\t\t\thydrate: {\r\n\t\t\t\t\tnode_ids: [0, 2],\r\n\t\t\t\t\tdata: [null,null],\r\n\t\t\t\t\tform: null\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t</script>\r\n\t</div>\r\n\t</body>\r\n</html>\r\n```\r\n\r\nNotice the `nonce` is also added to the `<link>` element above. But that has no effect and isn't correct.\r\n\r\n### Reproduction\r\n\r\nN/A\r\n\r\n### Logs\r\n\r\n_No response_\r\n\r\n### System Info\r\n\r\n```Shell\r\nSystem:\r\n    OS: Linux 5.10 Ubuntu 22.04.1 LTS 22.04.1 LTS (Jammy Jellyfish)\r\n    CPU: (4) x64 Intel(R) Core(TM) i7-7500U CPU @ 2.70GHz\r\n    Memory: 3.45 GB / 3.84 GB\r\n    Container: Yes\r\n    Shell: 5.8.1 - /bin/zsh\r\n  Binaries:\r\n    Node: 18.12.1 - /usr/bin/node\r\n    npm: 8.19.2 - /usr/bin/npm\r\n  npmPackages:\r\n    @sveltejs/adapter-auto: ^1.0.0 => 1.0.0\r\n    @sveltejs/adapter-node: ^1.0.0 => 1.0.0\r\n    @sveltejs/kit: ^1.0.0 => 1.0.1\r\n    svelte: ^3.54.0 => 3.55.0\r\n    vite: ^4.0.0 => 4.0.1\r\n```\r\n\r\n\r\n### Severity\r\n\r\nannoyance\r\n\r\n### Additional Information\r\n\r\n_No response_","closed_by":{"login":"dummdidumm","id":5968653,"node_id":"MDQ6VXNlcjU5Njg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/5968653?v=4","gravatar_id":"","url":"https://api.github.com/users/dummdidumm","html_url":"https://github.com/dummdidumm","followers_url":"https://api.github.com/users/dummdidumm/followers","following_url":"https://api.github.com/users/dummdidumm/following{/other_user}","gists_url":"https://api.github.com/users/dummdidumm/gists{/gist_id}","starred_url":"https://api.github.com/users/dummdidumm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dummdidumm/subscriptions","organizations_url":"https://api.github.com/users/dummdidumm/orgs","repos_url":"https://api.github.com/users/dummdidumm/repos","events_url":"https://api.github.com/users/dummdidumm/events{/privacy}","received_events_url":"https://api.github.com/users/dummdidumm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sveltejs/kit/issues/8200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sveltejs/kit/issues/8200/timeline","performed_via_github_app":null,"state_reason":"completed"}