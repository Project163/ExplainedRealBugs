diff --git a/src/main/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledCondition.java b/src/main/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledCondition.java
index 52f8c8e..db7d961 100644
--- a/src/main/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledCondition.java
+++ b/src/main/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledCondition.java
@@ -43,7 +43,7 @@ public class WebhookIsEnabledCondition implements Condition {
   @Override
   public boolean shouldDisplay(Map<String, Object> context) {
     final Object obj = context.get(REPOSITORY);
-    if (!(obj instanceof Repository))
+    if (obj == null || !(obj instanceof Repository))
       return false;
     
     Repository repo = (Repository) obj;
diff --git a/src/test/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledConditionTest.java b/src/test/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledConditionTest.java
new file mode 100644
index 0000000..fc161dc
--- /dev/null
+++ b/src/test/java/com/nerdwin15/stash/webhook/conditions/WebhookIsEnabledConditionTest.java
@@ -0,0 +1,102 @@
+package com.nerdwin15.stash.webhook.conditions;
+
+import static org.junit.Assert.assertFalse;
+import static org.junit.Assert.assertTrue;
+import static org.mockito.Mockito.mock;
+import static org.mockito.Mockito.when;
+
+import java.util.HashMap;
+import java.util.Map;
+
+import org.junit.Before;
+import org.junit.Test;
+
+import com.atlassian.stash.hook.repository.RepositoryHook;
+import com.atlassian.stash.repository.Repository;
+import com.atlassian.stash.setting.Settings;
+import com.nerdwin15.stash.webhook.service.SettingsService;
+
+/**
+ * Test for the WebhookIsEnabledCondition class
+ * 
+ * @author Michael Irwin (mikesir87)
+ */
+public class WebhookIsEnabledConditionTest {
+
+  private Repository repo;
+  private RepositoryHook repoHook;
+  private Settings settings;
+  private SettingsService settingsService;
+  private Map<String, Object> context;
+  
+  private WebhookIsEnabledCondition condition;
+
+  /**
+   * Setup tasks
+   */
+  @Before
+  public void setup() throws Exception {
+    settingsService = mock(SettingsService.class);
+    repo = mock(Repository.class);
+    repoHook = mock(RepositoryHook.class);
+    settings = mock(Settings.class);
+
+    context = new HashMap<String, Object>();
+    context.put("repository", repo);
+
+    when(repoHook.isEnabled()).thenReturn(true);
+    when(settingsService.getRepositoryHook(repo)).thenReturn(repoHook);
+    when(settingsService.getSettings(repo)).thenReturn(settings);
+    
+    condition = new WebhookIsEnabledCondition(settingsService);
+  }
+
+  /**
+   * Ensure that if the repository is not found in the context, display should
+   * fail
+   */
+  @Test
+  public void testShouldNotDisplayIfRepositoryNullOrNotRepository() {
+    context.put("repository", null);
+    assertFalse(condition.shouldDisplay(context));
+    
+    context.put("repository", "notARepository");
+    assertFalse(condition.shouldDisplay(context));
+  }
+  
+  /**
+   * Ensure that if the hook is null, shouldDisplay returns false
+   */
+  @Test
+  public void testShouldNotDisplayIfHookIsNull() {
+    when(settingsService.getRepositoryHook(repo)).thenReturn(null);
+    assertFalse(condition.shouldDisplay(context));
+  }
+  
+  /**
+   * Ensure that if the hook is disabled, shouldDisplay returns false
+   */
+  @Test
+  public void testShouldNotDisplayIfHookIsDisabled() {
+    when(repoHook.isEnabled()).thenReturn(false);
+    assertFalse(condition.shouldDisplay(context));
+  }
+  
+  /**
+   * Ensure that if the settings are null, shouldDisplay returns false
+   */
+  @Test
+  public void testShouldNotDisplayIfSettingsIsNull() {
+    when(settingsService.getSettings(repo)).thenReturn(null);
+    assertFalse(condition.shouldDisplay(context));
+  }
+
+  /**
+   * Ensure that when everything is set correctly, shouldDisplay is true
+   */
+  @Test
+  public void testShouldDisplayWhenEverythingIsSetRight() {
+    assertTrue(condition.shouldDisplay(context));
+  }
+  
+}
