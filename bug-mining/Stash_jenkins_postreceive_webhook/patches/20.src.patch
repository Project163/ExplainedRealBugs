diff --git a/pom.xml b/pom.xml
index 22256f6..a359bc8 100644
--- a/pom.xml
+++ b/pom.xml
@@ -4,7 +4,7 @@
     <modelVersion>4.0.0</modelVersion>
     <groupId>com.nerdwin15.stash</groupId>
     <artifactId>stash-webhook-jenkins</artifactId>
-    <version>2.5.0</version>
+    <version>2.5.1-SNAPSHOT</version>
 
     <organization>
         <name>Nerdwin15</name>
@@ -168,7 +168,7 @@
         <stash.version>2.4.0</stash.version>
         <stash.data.version>2.4.0</stash.data.version>
         <stash.containerId>tomcat7x</stash.containerId>
-        <amps.version>4.2.3</amps.version>
+        <amps.version>5.0.3</amps.version>
         <plugin.testrunner.version>1.1.1</plugin.testrunner.version>
         <powermock.version>1.4.9</powermock.version>
     </properties>
diff --git a/src/main/resources/static/jenkins-pr-triggerbutton.js b/src/main/resources/static/jenkins-pr-triggerbutton.js
index 8b2380c..a90797a 100644
--- a/src/main/resources/static/jenkins-pr-triggerbutton.js
+++ b/src/main/resources/static/jenkins-pr-triggerbutton.js
@@ -3,12 +3,14 @@ define('plugin/jenkins/pr-triggerbutton', [
   'aui',
   'model/page-state'
 ], function($, AJS, pageState) {
-
-  var resourceUrl = AJS.contextPath() + '/rest/jenkins/latest/projects/' 
-    + pageState.getProject().getKey() + '/repos/' 
-    + pageState.getRepository().getSlug() + '/triggerJenkins'
-    + '?branch=' + pageState.getPullRequest().getFromRef().getDisplayId()
-    + '&sha1=' + pageState.getPullRequest().getFromRef().getLatestChangeset();
+  
+  var getResourceUrl = function() {
+    return AJS.contextPath() + '/rest/jenkins/latest/projects/' 
+      + pageState.getProject().getKey() + '/repos/' 
+      + pageState.getRepository().getSlug() + '/triggerJenkins'
+      + '?branch=' + pageState.getPullRequest().getFromRef().getDisplayId()
+      + '&sha1=' + pageState.getPullRequest().getFromRef().getLatestChangeset();
+  };
 
   var waiting = '<span class="aui-icon aui-icon-wait">Wait</span>';
   
@@ -18,7 +20,7 @@ define('plugin/jenkins/pr-triggerbutton', [
 
     $this.attr("disabled", "disabled").html(waiting + " " + text);
   
-    $.post(resourceUrl, function() {
+    $.post(getResourceUrl(), function() {
       // Place in timer for UI-happiness - might go "too quick" and not notice
       // it actually triggered
       setTimeout(function() {  
