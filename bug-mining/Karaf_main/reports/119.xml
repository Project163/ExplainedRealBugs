<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:13:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KARAF-6044] KARAF_LOG env variable generates stack trace in test cases</title>
                <link>https://issues.apache.org/jira/browse/KARAF-6044</link>
                <project id="12311140" key="KARAF">Karaf</project>
                    <description>&lt;p&gt;KARAF_LOG env variable generates stack trace in test cases&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-4095&quot; title=&quot;Introduce KARAF_LOG env variable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-4095&quot;&gt;&lt;del&gt;KARAF-4095&lt;/del&gt;&lt;/a&gt; I attached a patch which would fix some test cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13203365">KARAF-6044</key>
            <summary>KARAF_LOG env variable generates stack trace in test cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="martin.krueger">Martin Kr&#252;ger</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Mon, 10 Dec 2018 07:45:14 +0000</created>
                <updated>Mon, 17 Dec 2018 08:04:05 +0000</updated>
                            <resolved>Mon, 10 Dec 2018 15:18:02 +0000</resolved>
                                                    <fixVersion>4.2.2</fixVersion>
                                    <component>karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16714521" author="githubbot" created="Mon, 10 Dec 2018 10:07:32 +0000"  >&lt;p&gt;jbonofre opened a new pull request #694: &lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt; Avoid verbose stack trace in main tests.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/karaf/pull/694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/karaf/pull/694&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Author: Martin Kr&#252;ger&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16714895" author="githubbot" created="Mon, 10 Dec 2018 15:17:51 +0000"  >&lt;p&gt;jbonofre closed pull request #694: &lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt; Avoid verbose stack trace in main tests.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/karaf/pull/694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/karaf/pull/694&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/main/src/test/java/org/apache/karaf/main/MainLockingTest.java b/main/src/test/java/org/apache/karaf/main/MainLockingTest.java&lt;br/&gt;
index 46585ec288..6362d8e57e 100644&lt;br/&gt;
&amp;#8212; a/main/src/test/java/org/apache/karaf/main/MainLockingTest.java&lt;br/&gt;
+++ b/main/src/test/java/org/apache/karaf/main/MainLockingTest.java&lt;br/&gt;
@@ -18,11 +18,8 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.karaf.main;&lt;/p&gt;

&lt;p&gt;-import static org.ops4j.pax.tinybundles.core.TinyBundles.withBnd;&lt;br/&gt;
-&lt;br/&gt;
 import java.io.File;&lt;br/&gt;
 import java.io.IOException;&lt;br/&gt;
-&lt;br/&gt;
 import org.apache.karaf.main.util.Utils;&lt;br/&gt;
 import org.junit.After;&lt;br/&gt;
 import org.junit.Assert;&lt;br/&gt;
@@ -34,21 +31,26 @@&lt;br/&gt;
 import org.osgi.framework.launch.Framework;&lt;br/&gt;
 import org.osgi.framework.startlevel.FrameworkStartLevel;&lt;/p&gt;

&lt;p&gt;+import static org.ops4j.pax.tinybundles.core.TinyBundles.withBnd;&lt;br/&gt;
+&lt;br/&gt;
 public class MainLockingTest {&lt;br/&gt;
     private File home;&lt;/p&gt;

&lt;p&gt;     private File data;&lt;br/&gt;
+    private File log;&lt;/p&gt;

&lt;p&gt;     @Before&lt;br/&gt;
     public void setUp() throws IOException {&lt;br/&gt;
         File basedir = new File(getClass().getClassLoader().getResource(&quot;foo&quot;).getPath()).getParentFile();&lt;br/&gt;
         home = new File(basedir, &quot;test-karaf-home&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;data = new File(home, &quot;data&quot;);&lt;br/&gt;
+        data = new File(home, &quot;data&quot; + System.currentTimeMillis());&lt;br/&gt;
+        log = new File(home, &quot;log&quot; + System.currentTimeMillis());&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         Utils.deleteDirectory(data);&lt;/p&gt;

&lt;p&gt;         System.setProperty(&quot;karaf.home&quot;, home.toString());&lt;br/&gt;
         System.setProperty(&quot;karaf.data&quot;, data.toString());&lt;br/&gt;
+        System.setProperty(&quot;karaf.log&quot;, log.toString());&lt;br/&gt;
         System.setProperty(&quot;karaf.framework.factory&quot;, &quot;org.apache.felix.framework.FrameworkFactory&quot;);&lt;/p&gt;

&lt;p&gt;         System.setProperty(&quot;karaf.lock&quot;, &quot;true&quot;);&lt;br/&gt;
@@ -60,6 +62,18 @@ public void setUp() throws IOException {&lt;br/&gt;
     public void tearDown() &lt;/p&gt;
{
         home = null;
         data = null;
+        log = null;
+
+        System.clearProperty(&quot;karaf.home&quot;);
+        System.clearProperty(&quot;karaf.data&quot;);
+        System.clearProperty(&quot;karaf.log&quot;);
+        System.clearProperty(&quot;karaf.framework.factory&quot;);
+
+        System.clearProperty(&quot;karaf.lock&quot;);
+        System.clearProperty(&quot;karaf.lock.delay&quot;);
+        System.clearProperty(&quot;karaf.lock.class&quot;);
+
+        System.clearProperty(&quot;karaf.pid.file&quot;);
     }

&lt;p&gt;     @Test&lt;br/&gt;
diff --git a/main/src/test/java/org/apache/karaf/main/MainStartTest.java b/main/src/test/java/org/apache/karaf/main/MainStartTest.java&lt;br/&gt;
index 495aee038a..23b16b7776 100644&lt;br/&gt;
&amp;#8212; a/main/src/test/java/org/apache/karaf/main/MainStartTest.java&lt;br/&gt;
+++ b/main/src/test/java/org/apache/karaf/main/MainStartTest.java&lt;br/&gt;
@@ -35,6 +35,10 @@ public void tearDown() throws Exception {&lt;br/&gt;
         if(main != null)&lt;/p&gt;
{
             main.destroy();
         }
&lt;p&gt;+&lt;br/&gt;
+		System.clearProperty(&quot;karaf.home&quot;);&lt;br/&gt;
+		System.clearProperty(&quot;karaf.data&quot;);&lt;br/&gt;
+		System.clearProperty(&quot;karaf.log&quot;);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     @Test&lt;br/&gt;
@@ -43,10 +47,12 @@ public void testAutoStart() throws Exception {&lt;br/&gt;
         File home = new File(basedir, &quot;test-karaf-home&quot;);&lt;br/&gt;
         // generate an unique folder name to avoid conflict with folder created by other unit tests (&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-2558&quot; title=&quot;Unit Tests in error when building from trunk  on Windows platform&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-2558&quot;&gt;&lt;del&gt;KARAF-2558&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
         File data = new File(home, &quot;data&quot; + System.currentTimeMillis());&lt;br/&gt;
+		File log = new File(home, &quot;log&quot; + System.currentTimeMillis());&lt;/p&gt;

&lt;p&gt; 		String[] args = new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;;&lt;br/&gt;
 		System.setProperty(&quot;karaf.home&quot;, home.toString());&lt;br/&gt;
 		System.setProperty(&quot;karaf.data&quot;, data.toString());&lt;br/&gt;
+		System.setProperty(&quot;karaf.log&quot;, log.toString());&lt;/p&gt;

&lt;p&gt; 		main = new Main(args);&lt;br/&gt;
 		main.launch();&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16714896" author="jira-bot" created="Mon, 10 Dec 2018 15:17:55 +0000"  >&lt;p&gt;Commit 5bb2ca3bf04710065af8b7a63d931129a62d33e0 in karaf&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jb%40nanthrax.net&quot; class=&quot;user-hover&quot; rel=&quot;jb@nanthrax.net&quot;&gt;jb@nanthrax.net&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=5bb2ca3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=5bb2ca3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt; Avoid verbose stack trace in main tests.&lt;br/&gt;
Author: Martin Kr&#252;ger&lt;/p&gt;</comment>
                            <comment id="16714897" author="jira-bot" created="Mon, 10 Dec 2018 15:17:57 +0000"  >&lt;p&gt;Commit 1df0b90df20b8af45cc2d4c49fee5dcd56693556 in karaf&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jb%40nanthrax.net&quot; class=&quot;user-hover&quot; rel=&quot;jb@nanthrax.net&quot;&gt;jb@nanthrax.net&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=1df0b90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=1df0b90&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #694 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt; Avoid verbose stack trace in main tests.&lt;/p&gt;</comment>
                            <comment id="16714898" author="jira-bot" created="Mon, 10 Dec 2018 15:17:58 +0000"  >&lt;p&gt;Commit 1df0b90df20b8af45cc2d4c49fee5dcd56693556 in karaf&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jb%40nanthrax.net&quot; class=&quot;user-hover&quot; rel=&quot;jb@nanthrax.net&quot;&gt;jb@nanthrax.net&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=1df0b90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=1df0b90&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #694 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6044&quot; title=&quot;KARAF_LOG env variable generates stack trace in test cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6044&quot;&gt;&lt;del&gt;KARAF-6044&lt;/del&gt;&lt;/a&gt; Avoid verbose stack trace in main tests.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12910694">KARAF-4095</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01c68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>