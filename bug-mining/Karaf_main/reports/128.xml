<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:14:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[KARAF-6356] Using instance commands corrupts org.apache.karaf.shell.cfg</title>
                <link>https://issues.apache.org/jira/browse/KARAF-6356</link>
                <project id="12311140" key="KARAF">Karaf</project>
                    <description>&lt;p&gt;Can be triggered by both forms of invoking instance commands. From the OS shell:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Call bin/instance create &amp;lt;name&amp;gt;&lt;/li&gt;
	&lt;li&gt;Call bin/instance ssh-port-change &amp;lt;name&amp;gt; &amp;lt;port&amp;gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Or via the karaf shell using:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;instance:create &amp;lt;name&amp;gt;&lt;/li&gt;
	&lt;li&gt;instance:ssh-port-change &amp;lt;name&amp;gt; &amp;lt;port&amp;gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;In both cases, post step 2) any variables defined within org.apache.karaf.shell.cfg (e.g. ${karaf.etc} within the hostKey definition) will be replaced with their literal value. In the case of the shell command the path ends up with no backslashes at all:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hostKey = &lt;span class=&quot;code-quote&quot;&gt;&quot;D:Testapache-karaf-4.2.6etc/host.key&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the commands run from the root instance its a slight variance:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hostKey = &lt;span class=&quot;code-quote&quot;&gt;&quot;D:\\Test\\apache-karaf-4.2.6\\etc/host.key&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There are however other problems. The changed sshPort has a leading I prefix and is quoted:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sshPort = I&lt;span class=&quot;code-quote&quot;&gt;&quot;8104&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Other entries also gain quotes. This results in various exceptions visible in the log related to number format exceptions.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Observed on windows 10, java 1.8.0_201 (64bit)&lt;/p&gt;</environment>
        <key id="13244050">KARAF-6356</key>
            <summary>Using instance commands corrupts org.apache.karaf.shell.cfg</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbonofre">Jean-Baptiste Onofr&#233;</assignee>
                                    <reporter username="jamie.kemp">Jamie Kemp</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jul 2019 08:53:58 +0000</created>
                <updated>Sun, 22 Sep 2019 14:44:37 +0000</updated>
                            <resolved>Sun, 22 Sep 2019 14:44:36 +0000</resolved>
                                    <version>4.2.6</version>
                                    <fixVersion>4.3.0</fixVersion>
                    <fixVersion>4.2.7</fixVersion>
                                    <component>karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16935047" author="jbonofre" created="Sat, 21 Sep 2019 14:30:15 +0000"  >&lt;p&gt;The problem comes from Felix &lt;tt&gt;TypedProperties&lt;/tt&gt;. For instance, the following code creates &lt;tt&gt;I&quot;9999&quot;&lt;/tt&gt; instead of &lt;tt&gt;&quot;9999&quot;&lt;/tt&gt; or &lt;tt&gt;9999&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        TypedProperties typedProperties = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TypedProperties();
        typedProperties.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;sshPort&quot;&lt;/span&gt;, 9999);
        typedProperties.save(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/jbonofre/test.properties&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m testing a possible workaround.&lt;/p&gt;</comment>
                            <comment id="16935063" author="githubbot" created="Sat, 21 Sep 2019 15:10:05 +0000"  >&lt;p&gt;jbonofre commented on pull request #946: &lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/karaf/pull/946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/karaf/pull/946&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16935328" author="githubbot" created="Sun, 22 Sep 2019 14:43:45 +0000"  >&lt;p&gt;jbonofre commented on pull request #946: &lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/karaf/pull/946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/karaf/pull/946&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16935329" author="jira-bot" created="Sun, 22 Sep 2019 14:43:51 +0000"  >&lt;p&gt;Commit bb2cf58cb16f624876518670a761f1c26dbed45a in karaf&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=bb2cf58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=bb2cf58&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties (waiting &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6183&quot; title=&quot;TypedProperties doesn&amp;#39;t deal with Integer correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6183&quot;&gt;&lt;del&gt;FELIX-6183&lt;/del&gt;&lt;/a&gt;) to keep the original file formatting&lt;/p&gt;</comment>
                            <comment id="16935330" author="jira-bot" created="Sun, 22 Sep 2019 14:43:53 +0000"  >&lt;p&gt;Commit 66827d18cfba908be6975754f6cfe7c4b937f572 in karaf&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=66827d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=66827d1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #946 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties&lt;/p&gt;</comment>
                            <comment id="16935331" author="jira-bot" created="Sun, 22 Sep 2019 14:43:55 +0000"  >&lt;p&gt;Commit 66827d18cfba908be6975754f6cfe7c4b937f572 in karaf&apos;s branch refs/heads/master from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=66827d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=66827d1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #946 from jbonofre/&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties&lt;/p&gt;</comment>
                            <comment id="16935332" author="jira-bot" created="Sun, 22 Sep 2019 14:44:30 +0000"  >&lt;p&gt;Commit 32f9fa2e2051418ccac64ab66854052d67484921 in karaf&apos;s branch refs/heads/karaf-4.2.x from Jean-Baptiste Onofr&#233;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=karaf.git;h=32f9fa2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=karaf.git;h=32f9fa2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/KARAF-6356&quot; title=&quot;Using instance commands corrupts org.apache.karaf.shell.cfg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;KARAF-6356&quot;&gt;&lt;del&gt;KARAF-6356&lt;/del&gt;&lt;/a&gt; Use Felix Properties instead of TypedProperties (waiting &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6183&quot; title=&quot;TypedProperties doesn&amp;#39;t deal with Integer correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6183&quot;&gt;&lt;del&gt;FELIX-6183&lt;/del&gt;&lt;/a&gt;) to keep the original file formatting&lt;/p&gt;

&lt;p&gt;(cherry picked from commit bb2cf58cb16f624876518670a761f1c26dbed45a)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13258100">FELIX-6183</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04itc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>