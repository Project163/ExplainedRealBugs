diff --git a/main/src/main/java/org/apache/karaf/main/Main.java b/main/src/main/java/org/apache/karaf/main/Main.java
index 5df94ee5d0..0161906210 100644
--- a/main/src/main/java/org/apache/karaf/main/Main.java
+++ b/main/src/main/java/org/apache/karaf/main/Main.java
@@ -217,7 +217,8 @@ public class Main {
         if (config.delayConsoleStart) {
             System.out.println(config.startupMessage);
         }
-        BootstrapLogManager.setProperties(config.props);
+        String log4jConfigPath = System.getProperty("karaf.base") + "/etc/org.ops4j.pax.logging.cfg";
+        BootstrapLogManager.setProperties(config.props, log4jConfigPath);
         lock = createLock();
         lockCallback = new KarafLockCallback();
         InstanceHelper.updateInstancePid(config.karafHome, config.karafBase);
diff --git a/main/src/main/java/org/apache/karaf/main/util/BootstrapLogManager.java b/main/src/main/java/org/apache/karaf/main/util/BootstrapLogManager.java
index b80ef84cd9..ceb1725046 100644
--- a/main/src/main/java/org/apache/karaf/main/util/BootstrapLogManager.java
+++ b/main/src/main/java/org/apache/karaf/main/util/BootstrapLogManager.java
@@ -41,9 +41,11 @@ public class BootstrapLogManager {
     private static BootstrapLogManager instance;
 	private Handler handler;
     private Properties configProps;
+	private String log4jConfigPath;
     
-    public BootstrapLogManager(Properties configProps) {
+    public BootstrapLogManager(Properties configProps, String log4jConfigPath) {
 		this.configProps = configProps;
+		this.log4jConfigPath = log4jConfigPath;
 		this.handler = null;
 	}
 
@@ -55,8 +57,12 @@ public class BootstrapLogManager {
     }
     
     public static void setProperties(Properties configProps) {
-        instance = new BootstrapLogManager(configProps);
+        setProperties(configProps, null);
     }
+    
+	public static void setProperties(Properties configProps, String log4jConfigPath) {
+		instance = new BootstrapLogManager(configProps, log4jConfigPath);
+	}
 
     private Handler getDefaultHandlerInternal() {
         if (handler != null) {
@@ -64,7 +70,7 @@ public class BootstrapLogManager {
         }
         
         String filename = getLogFilePath();
-        filename = SubstHelper.substVars(filename, LOG4J_APPENDER_FILE, null, null);
+        filename = SubstHelper.substVars(filename, LOG4J_APPENDER_FILE, null, configProps);
         File logFile = new File(filename);
         try {
 			return new SimpleFileHandler(logFile);
@@ -73,11 +79,11 @@ public class BootstrapLogManager {
 		}
 	}
 
-	private static Properties loadPaxLoggingConfig() {
+	private Properties loadPaxLoggingConfig() {
     	Properties props = new Properties();
         FileInputStream fis = null;
         try {
-            fis = new FileInputStream(System.getProperty("karaf.base") + "/etc/org.ops4j.pax.logging.cfg");
+            fis = new FileInputStream(log4jConfigPath);
             props.load(fis);
         } catch (Exception e) {
         	// Ignore
diff --git a/main/src/test/java/org/apache/karaf/main/util/BootstrapLogManagerTest.java b/main/src/test/java/org/apache/karaf/main/util/BootstrapLogManagerTest.java
index 25513a0b52..d9e203ca87 100644
--- a/main/src/test/java/org/apache/karaf/main/util/BootstrapLogManagerTest.java
+++ b/main/src/test/java/org/apache/karaf/main/util/BootstrapLogManagerTest.java
@@ -21,19 +21,22 @@ package org.apache.karaf.main.util;
 import java.io.File;
 import java.util.Properties;
 import java.util.logging.Handler;
-import java.util.logging.Level;
-import java.util.logging.LogRecord;
 
 import junit.framework.Assert;
 
 import org.junit.Test;
 
 public class BootstrapLogManagerTest {
-
+	
+	private Properties getConfigProperties() {
+		Properties configProps = new Properties();
+		configProps.put("karaf.data", "target");
+		return configProps;
+	}
+	
 	@Test
 	public void testGetLogManagerNoProperties() {
-		System.setProperty("karaf.data", "target");
-		BootstrapLogManager.setProperties(null);
+		BootstrapLogManager.setProperties(getConfigProperties());
 		try {
 			BootstrapLogManager.getDefaultHandler();
 		} catch (IllegalStateException e) {
@@ -44,9 +47,7 @@ public class BootstrapLogManagerTest {
 	@Test
 	public void testGetLogManager() {
 		new File("target/log/karaf.log").delete();
-		System.setProperty("karaf.data", "target");
-		Properties configProps = new Properties();
-		BootstrapLogManager.setProperties(configProps);
+		BootstrapLogManager.setProperties(getConfigProperties());
 		Handler handler = BootstrapLogManager.getDefaultHandler();
 		Assert.assertNotNull(handler);
 		assertExists("target/log/karaf.log");
@@ -55,9 +56,8 @@ public class BootstrapLogManagerTest {
 	@Test
 	public void testGetLogManagerFromPaxLoggingConfig() {
 		new File("target/test.log").delete();
-		System.setProperty("karaf.base", "src/test/resources/test-karaf-home");
-		Properties configProps = new Properties();
-		BootstrapLogManager.setProperties(configProps);
+		Properties configProps = getConfigProperties();
+		BootstrapLogManager.setProperties(configProps, "src/test/resources/org.ops4j.pax.logging.cfg");
 		Handler handler = BootstrapLogManager.getDefaultHandler();
 		Assert.assertNotNull(handler);
 		assertExists("target/test.log");
diff --git a/main/src/test/resources/test-karaf-home/etc/org.ops4j.pax.logging.cfg b/main/src/test/resources/org.ops4j.pax.logging.cfg
similarity index 100%
rename from main/src/test/resources/test-karaf-home/etc/org.ops4j.pax.logging.cfg
rename to main/src/test/resources/org.ops4j.pax.logging.cfg
