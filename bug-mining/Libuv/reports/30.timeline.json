[{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126225246","html_url":"https://github.com/libuv/libuv/issues/462#issuecomment-126225246","issue_url":"https://api.github.com/repos/libuv/libuv/issues/462","id":126225246,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjIyNTI0Ng==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-30T08:34:26Z","updated_at":"2015-07-30T08:34:26Z","body":"> On Linux, close() should not be retried after an EINTR because the file descriptor was closed, despite the error. A retry either fails with EBADF or ends up closing the wrong file descriptor.\n\nBack in the day we switched from close() to uv__close just to retry on EINTR: https://github.com/libuv/libuv/commit/1028a9c6a75fde47b848c09c450fc066249fac1b Does the comment on that commit still stand or should we not retry on EINTR at all? (for close, at least).\n\nThen uv__close morphed in this: https://github.com/libuv/libuv/commit/359d6678930fbb25e612d290a2ff5114e10eda6f which sanity-checks the fd about to be closed, but we retained the EINTR behavior and actually added some compatibility thing by turning it into EINPROGRESS.\n\nSo, wouldn't dup2/3 suffer from the same problems in their implicit close? Where those fixes 2 years ago kinda incorrect?\n\nAt any rate, I trust you've become (even) better with age, just like good whiskey ;-)\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126225246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126234538","html_url":"https://github.com/libuv/libuv/issues/462#issuecomment-126234538","issue_url":"https://api.github.com/repos/libuv/libuv/issues/462","id":126234538,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjIzNDUzOA==","user":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-30T09:08:41Z","updated_at":"2015-07-30T09:08:41Z","body":"1028a9c is incorrect depending on the platform: on Linux, the file descriptor is closed even on EINTR; other Unices have different behavior.\n\n359d667 is correct in that it doesn't retry on EINTR.  Changing the return code to EINPROGRESS is for forward compatibility with the upcoming POSIX revision.  (We could change it to 0 is that's more convenient but it doesn't matter right now, I don't think the return value is checked anywhere.)\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126234538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126236656","html_url":"https://github.com/libuv/libuv/issues/462#issuecomment-126236656","issue_url":"https://api.github.com/repos/libuv/libuv/issues/462","id":126236656,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjIzNjY1Ng==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-30T09:15:33Z","updated_at":"2015-07-30T09:15:33Z","body":"> 1028a9c is incorrect depending on the platform: on Linux, the file descriptor is closed even on EINTR; other Unices have different behavior.\n\nYay consistency!\n\n> 359d667 is correct in that it doesn't retry on EINTR. Changing the return code to EINPROGRESS is for forward compatibility with the upcoming POSIX revision. (We could change it to 0 is that's more convenient but it doesn't matter right now, I don't think the return value is checked anywhere.)\n\nAh, I see. There is one single place which checks for it, AFAIS: https://github.com/libuv/libuv/commit/359d6678930fbb25e612d290a2ff5114e10eda6f#diff-993e2d1f75ebf418adfbe81df8050a95R234\n\nSo I say go for it! Because you volunteered, right? :-)\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/126236656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":455896262,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1NTg5NjI2Mg==","url":"https://api.github.com/repos/libuv/libuv/issues/events/455896262","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2f8221a6c70d2fc075f9c3ad5fdce6e28ffc288","commit_url":"https://api.github.com/repos/bnoordhuis/libuv/commits/b2f8221a6c70d2fc075f9c3ad5fdce6e28ffc288","created_at":"2015-11-05T16:12:39Z","performed_via_github_app":null},{"id":455896263,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1NTg5NjI2Mw==","url":"https://api.github.com/repos/libuv/libuv/issues/events/455896263","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fd61cf68b53fbfecf93b2eda063ca1188553fd1c","commit_url":"https://api.github.com/repos/bnoordhuis/libuv/commits/fd61cf68b53fbfecf93b2eda063ca1188553fd1c","created_at":"2015-11-05T16:12:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/154108511","html_url":"https://github.com/libuv/libuv/issues/462#issuecomment-154108511","issue_url":"https://api.github.com/repos/libuv/libuv/issues/462","id":154108511,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDEwODUxMQ==","user":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-05T16:15:07Z","updated_at":"2015-11-05T16:15:07Z","body":"See #608.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/154108511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":466478355,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ2NjQ3ODM1NQ==","url":"https://api.github.com/repos/libuv/libuv/issues/events/466478355","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"af7a3614d0d64233bae84fe089faefbcf720e95b","commit_url":"https://api.github.com/repos/bnoordhuis/libuv/commits/af7a3614d0d64233bae84fe089faefbcf720e95b","created_at":"2015-11-17T09:48:56Z","performed_via_github_app":null},{"id":466478357,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ2NjQ3ODM1Nw==","url":"https://api.github.com/repos/libuv/libuv/issues/events/466478357","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9bbc1137eee705b818f145c3819e1383771fcbb2","commit_url":"https://api.github.com/repos/bnoordhuis/libuv/commits/9bbc1137eee705b818f145c3819e1383771fcbb2","created_at":"2015-11-17T09:48:56Z","performed_via_github_app":null},{"id":466478404,"node_id":"MDExOkNsb3NlZEV2ZW50NDY2NDc4NDA0","url":"https://api.github.com/repos/libuv/libuv/issues/events/466478404","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"af7a3614d0d64233bae84fe089faefbcf720e95b","commit_url":"https://api.github.com/repos/libuv/libuv/commits/af7a3614d0d64233bae84fe089faefbcf720e95b","created_at":"2015-11-17T09:48:58Z","state_reason":null,"performed_via_github_app":null}]