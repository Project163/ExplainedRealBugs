[{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118939605","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-118939605","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":118939605,"node_id":"MDEyOklzc3VlQ29tbWVudDExODkzOTYwNQ==","user":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-06T17:59:33Z","updated_at":"2015-07-06T17:59:33Z","body":"What version of libuv is that?  Going by the line numbers, it's not the most recent release.\n\nCan you try a debug build and post the output of `info locals` at the crash site?  Can you include the output of `print *req` as well?  Thanks.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118939605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118941024","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-118941024","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":118941024,"node_id":"MDEyOklzc3VlQ29tbWVudDExODk0MTAyNA==","user":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-06T18:06:31Z","updated_at":"2015-07-06T18:06:31Z","body":"I believe we're running libuv 1.3 -- I'll investigate whether we can upgrade easily. \n\nuv__write (stream=0x7fffb8000a90) at src/unix/stream.c:841\n841       size_t len = buf->len;\n(gdb) info locals\nbuf = 0x10\nlen = <optimized out>\niov = 0x7fffc4000ee0\nq = 0x7fffc4000eb8\nreq = 0x7fffc4000e60\niovcnt = <optimized out>\nn = <optimized out>\n**PRETTY_FUNCTION** = \"uv__write\"\n\n(gdb) print _req\n$1 = {data = 0x852f20, type = UV_WRITE, active_queue = {0x852f48, 0x852f48}, reserved = {0x0, 0x0, 0x0, 0x0}, cb = 0x51bb30\n     <BasePipe::after_standalone_write(uv_write_s_, int)>, send_handle = 0x0, handle = 0x7fffb8000a90, queue = {\n    0x7fffb8000b60, 0x7fffb8000b60}, write_index = 1, bufs = 0x0, nbufs = 1, error = 0, bufsml = {{\n      base = 0x7fffc4000d60 \"\\355\\376a\", len = 103}, {base = 0x0, len = 0}, {base = 0x0, len = 0}, {base = 0x0, len = 0}}}\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118941024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118969554","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-118969554","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":118969554,"node_id":"MDEyOklzc3VlQ29tbWVudDExODk2OTU1NA==","user":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-06T19:23:09Z","updated_at":"2015-07-06T19:23:09Z","body":"Libuv follows semver so an upgrade should be a drop-in replacement.\n\n`req->write_index == req->nbufs == 1` might be indicative of a bug.  Is there anywhere in your application where you close one handle when another handle errors/eofs/etc.?  I wonder if the queue manipulation in `uv__run_pending()` is unsound.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118969554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118975859","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-118975859","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":118975859,"node_id":"MDEyOklzc3VlQ29tbWVudDExODk3NTg1OQ==","user":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-06T19:45:11Z","updated_at":"2015-07-06T19:45:11Z","body":"I updated to libuv 1.6.1,  saw the crash again.  Looks like the same basic issue (bufs is NULL)\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffc77fe700 (LWP 29192)]\nuv__write (stream=0x7fffb0000a90) at src/unix/stream.c:853\n853       size_t len = buf->len;\n(gdb) bt\n#0  uv__write (stream=0x7fffb0000a90) at src/unix/stream.c:853\n#1  0x00007ffff79af22b in uv_write2 (req=0x7fffb8002d40, stream=0x7fffb0000a90, bufs=0x7fffb8002e00, nbufs=1, \n    send_handle=<optimized out>, cb=<optimized out>) at src/unix/stream.c:1388\n#2  0x000000000053628a in ReliablePipe::SendBinaryMessage (this=0x852f20, msg=0x7fffb8002c60 \"\\220&\", length=205)\n    at Pipe/ReliablePipe.cpp:298\n\n(gdb) info locals\nbuf = 0x10\nlen = <optimized out>\niov = 0x7fffb8002dc0\nq = 0x7fffb8002d98\nreq = 0x7fffb8002d40\niovcnt = <optimized out>\nn = <optimized out>\n**PRETTY_FUNCTION** = \"uv__write\"\n\n(gdb) p _req\n$1 = {data = 0x852f20, type = UV_WRITE, active_queue = {0x852f48, 0x852f48}, reserved = {0x0, 0x0, 0x0, 0x0}, cb = 0x51bb30\n     <BasePipe::after_standalone_write(uv_write_s_, int)>, send_handle = 0x0, handle = 0x7fffb0000a90, queue = {\n    0x7fffb0000b60, 0x7fffb0000b60}, write_index = 1, bufs = 0x0, nbufs = 1, error = 0, bufsml = {{\n      base = 0x7fffb8002c60 \"\\220&\", len = 205}, {base = 0x0, len = 0}, {base = 0x0, len = 0}, {base = 0x0, len = 0}}}\n\nThanks for the handle close idea -- I'll investigate. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/118975859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119108355","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119108355","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119108355,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTEwODM1NQ==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T07:50:26Z","updated_at":"2015-07-07T07:50:26Z","body":"Quick sanity check: there is no chance you're reusing `uv_write_t` structures, is there?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119108355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119190842","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119190842","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119190842,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTE5MDg0Mg==","user":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T12:34:55Z","updated_at":"2015-07-07T12:34:55Z","body":"- it doesn't appear we're reusing write_t structures \n- doesn't appear the stream has been disconnected by the other side before the crash (and none of the EOF / disconnect handlers are invoked)\n- the crash typically appears 30-45 minutes after opening the stream and sending and receiving  about 10 small messages (<500 bytes ) per second; however it sometimes appears as soon as 30 seconds \n- this code is running in a multithreaded environment. All direct access to the stream is wrapped in a mutex (read_start, write, etc)-- however, uv_run is not, and we're using the default run mode\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119190842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119202148","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119202148","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119202148,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIwMjE0OA==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T13:26:55Z","updated_at":"2015-07-07T13:26:55Z","body":"Ah, that's not right. None of the APIs are thread-safe unless stated\notherwise, so calling uv_write from outside the loop thread can lead to any\nkind of failure.\n- it doesn't appear we're reusing write_t structures\n- doesn't appear the stream has been disconnected by the other side\n  before the crash (and none of the EOF / disconnect handlers are invoked)\n- the crash typically appears 30-45 minutes after opening the stream and\n  sending and receiving about 10 small messages (<500 bytes ) per second;\n  however it sometimes appears as soon as 30 seconds\n- this code is running in a multithreaded environment. All direct access\n  to the stream is wrapped in a mutex (read_start, write, etc)-- however,\n  uv_run is not, and we're using the default run mode\n\n—\nReply to this email directly or view it on GitHub\nhttps://github.com/libuv/libuv/issues/425#issuecomment-119190842.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119202148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119247947","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119247947","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119247947,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTI0Nzk0Nw==","user":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T15:57:42Z","updated_at":"2015-07-07T15:57:42Z","body":"Can you clarify this?\n\nIf you have one thread driving uv_run (which blocks in the default run mode), how should one then call uv_write?\n\n> On Jul 7, 2015, at 6:27 AM, Saúl Ibarra Corretgé notifications@github.com wrote:\n> \n> Ah, that's not right. None of the APIs are thread-safe unless stated\n> otherwise, so calling uv_write from outside the loop thread can lead to any\n> kind of failure.\n> - it doesn't appear we're reusing write_t structures\n> - doesn't appear the stream has been disconnected by the other side\n>   before the crash (and none of the EOF / disconnect handlers are invoked)\n> - the crash typically appears 30-45 minutes after opening the stream and\n>   sending and receiving about 10 small messages (<500 bytes ) per second;\n>   however it sometimes appears as soon as 30 seconds\n> - this code is running in a multithreaded environment. All direct access\n>   to the stream is wrapped in a mutex (read_start, write, etc)-- however,\n>   uv_run is not, and we're using the default run mode\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/libuv/libuv/issues/425#issuecomment-119190842.\n> —\n> Reply to this email directly or view it on GitHub.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119247947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119252799","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119252799","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119252799,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTI1Mjc5OQ==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T16:08:28Z","updated_at":"2015-07-07T16:08:28Z","body":"As a result of any other operation, such as a connection was made, data was received, a timer kicked in, etc.\n\nNone of the loop or handle APIs are thread-safe, the only exception is `uv_async_send`, which is used to trigger a callback in the loop thread by another thread: http://docs.libuv.org/en/v1.x/async.html?highlight=uv_async_send#c.uv_async_send\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119252799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119256794","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-119256794","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":119256794,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTI1Njc5NA==","user":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-07T16:15:29Z","updated_at":"2015-07-07T16:15:29Z","body":"Thanks for the clarification.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/119256794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":349862031,"node_id":"MDExOkNsb3NlZEV2ZW50MzQ5ODYyMDMx","url":"https://api.github.com/repos/libuv/libuv/issues/events/349862031","actor":{"login":"tstellanova","id":1440229,"node_id":"MDQ6VXNlcjE0NDAyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1440229?v=4","gravatar_id":"","url":"https://api.github.com/users/tstellanova","html_url":"https://github.com/tstellanova","followers_url":"https://api.github.com/users/tstellanova/followers","following_url":"https://api.github.com/users/tstellanova/following{/other_user}","gists_url":"https://api.github.com/users/tstellanova/gists{/gist_id}","starred_url":"https://api.github.com/users/tstellanova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstellanova/subscriptions","organizations_url":"https://api.github.com/users/tstellanova/orgs","repos_url":"https://api.github.com/users/tstellanova/repos","events_url":"https://api.github.com/users/tstellanova/events{/privacy}","received_events_url":"https://api.github.com/users/tstellanova/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-07-07T16:15:29Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139288737","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-139288737","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":139288737,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTI4ODczNw==","user":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-10T15:53:14Z","updated_at":"2015-09-10T15:53:14Z","body":"@saghul , as a developer coming from *nix select/epoll background, I like to get a bit more clarification on the \"single threaded network I/O \" nature of libuv.  \nDoes it means if uv_run's loop monitoring/polling a socket for anything readable, another thread CAN NOT send/write to that socket ? With Linux select or epoll, I believe that is allowed. We tried the same way with libuv. Not sure it is correct.\nOur app gets sporadic  Segmentation fault. And the stack is below,\n#0  0x00007f8734756818 in uv__write (stream=0x7f873401b558) at src/unix/stream.c:863\n#1  0x00007f87347577bb in uv__stream_io (loop=0x7f8734969b20 <default_loop_struct>, w=0x7f873401b5e0, events=4) at src/unix/stream.c:1264\n#2  0x00007f873474a365 in uv__run_pending (loop=0x7f8734969b20 <default_loop_struct>) at src/unix/core.c:733\n#3  0x00007f8734749a49 in uv_run (loop=0x7f8734969b20 <default_loop_struct>, mode=UV_RUN_DEFAULT) at src/unix/core.c:333\n\nAnd the _req is :\n(gdb) p req\n$1 = (uv_write_t *) 0x162be30\n(gdb) p *req\n$2 = {data = 0x162ba20, type = UV_WRITE, active_queue = {0x1632990, 0x1624530}, reserved = {0x0, 0x0, 0x0, 0x0},\n  cb = 0x7f87349d5fb3 <UV::g_on_write_end(uv_write_t_, int)>, send_handle = 0x0, handle = 0x7f873401b558, queue = {0x16329d8, 0x1624578}, write_index = 1,\n  bufs = 0x0, nbufs = 1, error = 0, bufsml = {{base = 0x162ba20 \"5\", len = 55}, {base = 0x0, len = 0}, {base = 0x0, len = 0}, {base = 0x0, len = 0}}}\n\nThanks in advance,\nFrank\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139288737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":406125992,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDA2MTI1OTky","url":"https://api.github.com/repos/libuv/libuv/issues/events/406125992","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-09-10T15:53:14Z","performed_via_github_app":null},{"id":406125993,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwNjEyNTk5Mw==","url":"https://api.github.com/repos/libuv/libuv/issues/events/406125993","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-09-10T15:53:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139310939","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-139310939","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":139310939,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTMxMDkzOQ==","user":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-10T17:04:27Z","updated_at":"2015-09-10T17:04:27Z","body":"@franknj You cannot call `uv_write()` or `uv_read_start()` from a different thread than the one that calls `uv_run()`.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139310939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":406203251,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDA2MjAzMjUx","url":"https://api.github.com/repos/libuv/libuv/issues/events/406203251","actor":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-09-10T17:04:27Z","performed_via_github_app":null},{"id":406203252,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwNjIwMzI1Mg==","url":"https://api.github.com/repos/libuv/libuv/issues/events/406203252","actor":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-09-10T17:04:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139329143","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-139329143","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":139329143,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTMyOTE0Mw==","user":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-09-10T18:02:44Z","updated_at":"2015-09-10T18:02:44Z","body":"@bnoordhuis , thanks for clarification. That is a big difference from select/epoll based approach. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/139329143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"franknj","id":14219160,"node_id":"MDQ6VXNlcjE0MjE5MTYw","avatar_url":"https://avatars.githubusercontent.com/u/14219160?v=4","gravatar_id":"","url":"https://api.github.com/users/franknj","html_url":"https://github.com/franknj","followers_url":"https://api.github.com/users/franknj/followers","following_url":"https://api.github.com/users/franknj/following{/other_user}","gists_url":"https://api.github.com/users/franknj/gists{/gist_id}","starred_url":"https://api.github.com/users/franknj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franknj/subscriptions","organizations_url":"https://api.github.com/users/franknj/orgs","repos_url":"https://api.github.com/users/franknj/repos","events_url":"https://api.github.com/users/franknj/events{/privacy}","received_events_url":"https://api.github.com/users/franknj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":406265103,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDA2MjY1MTAz","url":"https://api.github.com/repos/libuv/libuv/issues/events/406265103","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-09-10T18:02:44Z","performed_via_github_app":null},{"id":406265104,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwNjI2NTEwNA==","url":"https://api.github.com/repos/libuv/libuv/issues/events/406265104","actor":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-09-10T18:02:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228105096","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-228105096","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":228105096,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODEwNTA5Ng==","user":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-23T16:25:45Z","updated_at":"2016-06-23T16:25:45Z","body":"I run into this same problem for blindly reusing the `uv_write_t` object. \n\n@saghul I think it would be useful to mention in the documentation that `uv_write_t` should not be reused without careful memory management.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228105096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":702133615,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzAyMTMzNjE1","url":"https://api.github.com/repos/libuv/libuv/issues/events/702133615","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-23T16:25:45Z","performed_via_github_app":null},{"id":702133616,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDcwMjEzMzYxNg==","url":"https://api.github.com/repos/libuv/libuv/issues/events/702133616","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-23T16:25:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228106898","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-228106898","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":228106898,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODEwNjg5OA==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-23T16:32:21Z","updated_at":"2016-06-23T16:32:21Z","body":"@neevek mind submitting a documentation PR?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228106898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":702141928,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzAyMTQxOTI4","url":"https://api.github.com/repos/libuv/libuv/issues/events/702141928","actor":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-23T16:32:21Z","performed_via_github_app":null},{"id":702141929,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDcwMjE0MTkyOQ==","url":"https://api.github.com/repos/libuv/libuv/issues/events/702141929","actor":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-23T16:32:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228223739","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-228223739","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":228223739,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODIyMzczOQ==","user":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-24T00:21:11Z","updated_at":"2016-06-24T00:21:11Z","body":"@saghul I will do it later. \nBut I am still confused because I changed my code and I reuse the `uv_write_t` object only after `uv_write_cb` is called, I assume that when the callback is called, the libuv internal is done with the `uv_write_t` object, but it seems not, the segfault still occurs. why?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228223739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"neevek","id":525786,"node_id":"MDQ6VXNlcjUyNTc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/525786?v=4","gravatar_id":"","url":"https://api.github.com/users/neevek","html_url":"https://github.com/neevek","followers_url":"https://api.github.com/users/neevek/followers","following_url":"https://api.github.com/users/neevek/following{/other_user}","gists_url":"https://api.github.com/users/neevek/gists{/gist_id}","starred_url":"https://api.github.com/users/neevek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neevek/subscriptions","organizations_url":"https://api.github.com/users/neevek/orgs","repos_url":"https://api.github.com/users/neevek/repos","events_url":"https://api.github.com/users/neevek/events{/privacy}","received_events_url":"https://api.github.com/users/neevek/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":702645842,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzAyNjQ1ODQy","url":"https://api.github.com/repos/libuv/libuv/issues/events/702645842","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-24T00:21:11Z","performed_via_github_app":null},{"id":702645844,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDcwMjY0NTg0NA==","url":"https://api.github.com/repos/libuv/libuv/issues/events/702645844","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-24T00:21:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228227124","html_url":"https://github.com/libuv/libuv/issues/425#issuecomment-228227124","issue_url":"https://api.github.com/repos/libuv/libuv/issues/425","id":228227124,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODIyNzEyNA==","user":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-24T00:45:41Z","updated_at":"2016-06-24T00:45:41Z","body":"After the callback fires it should be fine to reuse it, if not, there is a bug somewhere. A test case would definitely help.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/comments/228227124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}}]