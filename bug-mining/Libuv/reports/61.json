{"url":"https://api.github.com/repos/libuv/libuv/issues/978","repository_url":"https://api.github.com/repos/libuv/libuv","labels_url":"https://api.github.com/repos/libuv/libuv/issues/978/labels{/name}","comments_url":"https://api.github.com/repos/libuv/libuv/issues/978/comments","events_url":"https://api.github.com/repos/libuv/libuv/issues/978/events","html_url":"https://github.com/libuv/libuv/issues/978","id":169694660,"node_id":"MDU6SXNzdWUxNjk2OTQ2NjA=","number":978,"title":"va_start behavior in uv_loop_configure is undefined.","user":{"login":"hokein","id":2557445,"node_id":"MDQ6VXNlcjI1NTc0NDU=","avatar_url":"https://avatars.githubusercontent.com/u/2557445?v=4","gravatar_id":"","url":"https://api.github.com/users/hokein","html_url":"https://github.com/hokein","followers_url":"https://api.github.com/users/hokein/followers","following_url":"https://api.github.com/users/hokein/following{/other_user}","gists_url":"https://api.github.com/users/hokein/gists{/gist_id}","starred_url":"https://api.github.com/users/hokein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hokein/subscriptions","organizations_url":"https://api.github.com/users/hokein/orgs","repos_url":"https://api.github.com/users/hokein/repos","events_url":"https://api.github.com/users/hokein/events{/privacy}","received_events_url":"https://api.github.com/users/hokein/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-08-05T20:54:58Z","updated_at":"2018-04-12T14:44:52Z","closed_at":"2018-04-12T14:44:51Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"there is a a `-Wvarargs` warning when compiling `libuv` with clang.\n\n```\nuv/src/uv-common.c:572:16: warning: passing an object that undergoes default argument promotion to 'va_start' has undefined behavior [-Wvarargs]\n  va_start(ap, option);\n```\n\nNote that `option` type is `uv_loop_option` which is an enum. This violates the promotion rules\nfor passing the value to `va_start`, so the behavior of `va_start` is undefined here. From C standard 7.16.1.4:\n\n> The parameter parmN is the identifier of the rightmost parameter in the variable parameter list in the function definition (the one just before the ...). If the parameter parmN is declared with the register storage class, with a function or array type, or with a type that is not compatible with the type that results after application of the default argument promotions, the behavior is undefined.\n\nFor more details, you can refer to https://www.securecoding.cert.org/confluence/display/cplusplus/EXP58-CPP.+Pass+an+object+of+the+correct+type+to+va_start.\n","closed_by":{"login":"bnoordhuis","id":275871,"node_id":"MDQ6VXNlcjI3NTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/275871?v=4","gravatar_id":"","url":"https://api.github.com/users/bnoordhuis","html_url":"https://github.com/bnoordhuis","followers_url":"https://api.github.com/users/bnoordhuis/followers","following_url":"https://api.github.com/users/bnoordhuis/following{/other_user}","gists_url":"https://api.github.com/users/bnoordhuis/gists{/gist_id}","starred_url":"https://api.github.com/users/bnoordhuis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bnoordhuis/subscriptions","organizations_url":"https://api.github.com/users/bnoordhuis/orgs","repos_url":"https://api.github.com/users/bnoordhuis/repos","events_url":"https://api.github.com/users/bnoordhuis/events{/privacy}","received_events_url":"https://api.github.com/users/bnoordhuis/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libuv/libuv/issues/978/timeline","performed_via_github_app":null,"state_reason":"completed"}