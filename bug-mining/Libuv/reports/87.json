{"url":"https://api.github.com/repos/libuv/libuv/issues/93","repository_url":"https://api.github.com/repos/libuv/libuv","labels_url":"https://api.github.com/repos/libuv/libuv/issues/93/labels{/name}","comments_url":"https://api.github.com/repos/libuv/libuv/issues/93/comments","events_url":"https://api.github.com/repos/libuv/libuv/issues/93/events","html_url":"https://github.com/libuv/libuv/issues/93","id":53017158,"node_id":"MDU6SXNzdWU1MzAxNzE1OA==","number":93,"title":"uv_udp_set_multicast_loop doesn't do anything on IPv6","user":{"login":"kira-bruneau","id":382041,"node_id":"MDQ6VXNlcjM4MjA0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/382041?v=4","gravatar_id":"","url":"https://api.github.com/users/kira-bruneau","html_url":"https://github.com/kira-bruneau","followers_url":"https://api.github.com/users/kira-bruneau/followers","following_url":"https://api.github.com/users/kira-bruneau/following{/other_user}","gists_url":"https://api.github.com/users/kira-bruneau/gists{/gist_id}","starred_url":"https://api.github.com/users/kira-bruneau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kira-bruneau/subscriptions","organizations_url":"https://api.github.com/users/kira-bruneau/orgs","repos_url":"https://api.github.com/users/kira-bruneau/repos","events_url":"https://api.github.com/users/kira-bruneau/events{/privacy}","received_events_url":"https://api.github.com/users/kira-bruneau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2014-12-29T03:03:32Z","updated_at":"2015-01-02T16:34:34Z","closed_at":"2015-01-02T16:34:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"While I was experimenting with multicast I found that the `uv_udp_set_multicast_loop` function wasn't failing but wasn't working either. After looking through the UDP source code, I found that `uv_udp_set_multicast_loop`, `uv_udp_set_multicast_ttl`, and `uv_udp_set_ttl` all set their respective IPv4 socket options, but have no logic to set their respective IPv6 socket options.\n\nI believe the reason why this hasn't caused an error is that dual-stack is enabled by default and it's setting the options for the IPv4 packets but not for IPv6 packets.\n\nThe simpliest solution would be to make these three functions IP specific but then that would retract from the unification of IPv4 and IPv6.\n\nAnother solution be to drop `uv_udp_set_multicast_loop` and provide the option as a flag on bind, but then there is still the issue with the two ttl functions.\n\nOverall I believe this problem should be handled with caution.\n\n**Edit:**\nI tried setting UV_UDP_IPV6ONLY and found that setsockopt still doesn't fail when setting IPv4 socket options on an IPv6 socket.\n","closed_by":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/93/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libuv/libuv/issues/93/timeline","performed_via_github_app":null,"state_reason":"completed"}