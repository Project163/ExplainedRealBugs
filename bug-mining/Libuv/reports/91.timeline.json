[{"actor":{"login":"jasongin","id":13093042,"node_id":"MDQ6VXNlcjEzMDkzMDQy","avatar_url":"https://avatars.githubusercontent.com/u/13093042?v=4","gravatar_id":"","url":"https://api.github.com/users/jasongin","html_url":"https://github.com/jasongin","followers_url":"https://api.github.com/users/jasongin/followers","following_url":"https://api.github.com/users/jasongin/following{/other_user}","gists_url":"https://api.github.com/users/jasongin/gists{/gist_id}","starred_url":"https://api.github.com/users/jasongin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasongin/subscriptions","organizations_url":"https://api.github.com/users/jasongin/orgs","repos_url":"https://api.github.com/users/jasongin/repos","events_url":"https://api.github.com/users/jasongin/events{/privacy}","received_events_url":"https://api.github.com/users/jasongin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-15T18:50:54Z","updated_at":"2016-08-15T18:50:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/libuv/libuv/issues/996","repository_url":"https://api.github.com/repos/libuv/libuv","labels_url":"https://api.github.com/repos/libuv/libuv/issues/996/labels{/name}","comments_url":"https://api.github.com/repos/libuv/libuv/issues/996/comments","events_url":"https://api.github.com/repos/libuv/libuv/issues/996/events","html_url":"https://github.com/libuv/libuv/pull/996","id":171235353,"node_id":"MDExOlB1bGxSZXF1ZXN0ODEzNTYzNDU=","number":996,"title":"win: lstat reparse point without link data","user":{"login":"jasongin","id":13093042,"node_id":"MDQ6VXNlcjEzMDkzMDQy","avatar_url":"https://avatars.githubusercontent.com/u/13093042?v=4","gravatar_id":"","url":"https://api.github.com/users/jasongin","html_url":"https://github.com/jasongin","followers_url":"https://api.github.com/users/jasongin/followers","following_url":"https://api.github.com/users/jasongin/following{/other_user}","gists_url":"https://api.github.com/users/jasongin/gists{/gist_id}","starred_url":"https://api.github.com/users/jasongin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasongin/subscriptions","organizations_url":"https://api.github.com/users/jasongin/orgs","repos_url":"https://api.github.com/users/jasongin/repos","events_url":"https://api.github.com/users/jasongin/events{/privacy}","received_events_url":"https://api.github.com/users/jasongin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2016-08-15T18:50:54Z","updated_at":"2016-08-16T09:04:10Z","closed_at":"2016-08-16T09:04:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14812739,"node_id":"MDEwOlJlcG9zaXRvcnkxNDgxMjczOQ==","name":"libuv","full_name":"libuv/libuv","private":false,"owner":{"login":"libuv","id":4030929,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwMzA5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4030929?v=4","gravatar_id":"","url":"https://api.github.com/users/libuv","html_url":"https://github.com/libuv","followers_url":"https://api.github.com/users/libuv/followers","following_url":"https://api.github.com/users/libuv/following{/other_user}","gists_url":"https://api.github.com/users/libuv/gists{/gist_id}","starred_url":"https://api.github.com/users/libuv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libuv/subscriptions","organizations_url":"https://api.github.com/users/libuv/orgs","repos_url":"https://api.github.com/users/libuv/repos","events_url":"https://api.github.com/users/libuv/events{/privacy}","received_events_url":"https://api.github.com/users/libuv/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/libuv/libuv","description":"Cross-platform asynchronous I/O","fork":false,"url":"https://api.github.com/repos/libuv/libuv","forks_url":"https://api.github.com/repos/libuv/libuv/forks","keys_url":"https://api.github.com/repos/libuv/libuv/keys{/key_id}","collaborators_url":"https://api.github.com/repos/libuv/libuv/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/libuv/libuv/teams","hooks_url":"https://api.github.com/repos/libuv/libuv/hooks","issue_events_url":"https://api.github.com/repos/libuv/libuv/issues/events{/number}","events_url":"https://api.github.com/repos/libuv/libuv/events","assignees_url":"https://api.github.com/repos/libuv/libuv/assignees{/user}","branches_url":"https://api.github.com/repos/libuv/libuv/branches{/branch}","tags_url":"https://api.github.com/repos/libuv/libuv/tags","blobs_url":"https://api.github.com/repos/libuv/libuv/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/libuv/libuv/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/libuv/libuv/git/refs{/sha}","trees_url":"https://api.github.com/repos/libuv/libuv/git/trees{/sha}","statuses_url":"https://api.github.com/repos/libuv/libuv/statuses/{sha}","languages_url":"https://api.github.com/repos/libuv/libuv/languages","stargazers_url":"https://api.github.com/repos/libuv/libuv/stargazers","contributors_url":"https://api.github.com/repos/libuv/libuv/contributors","subscribers_url":"https://api.github.com/repos/libuv/libuv/subscribers","subscription_url":"https://api.github.com/repos/libuv/libuv/subscription","commits_url":"https://api.github.com/repos/libuv/libuv/commits{/sha}","git_commits_url":"https://api.github.com/repos/libuv/libuv/git/commits{/sha}","comments_url":"https://api.github.com/repos/libuv/libuv/comments{/number}","issue_comment_url":"https://api.github.com/repos/libuv/libuv/issues/comments{/number}","contents_url":"https://api.github.com/repos/libuv/libuv/contents/{+path}","compare_url":"https://api.github.com/repos/libuv/libuv/compare/{base}...{head}","merges_url":"https://api.github.com/repos/libuv/libuv/merges","archive_url":"https://api.github.com/repos/libuv/libuv/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/libuv/libuv/downloads","issues_url":"https://api.github.com/repos/libuv/libuv/issues{/number}","pulls_url":"https://api.github.com/repos/libuv/libuv/pulls{/number}","milestones_url":"https://api.github.com/repos/libuv/libuv/milestones{/number}","notifications_url":"https://api.github.com/repos/libuv/libuv/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/libuv/libuv/labels{/name}","releases_url":"https://api.github.com/repos/libuv/libuv/releases{/id}","deployments_url":"https://api.github.com/repos/libuv/libuv/deployments","created_at":"2013-11-30T00:29:56Z","updated_at":"2025-11-10T12:47:39Z","pushed_at":"2025-11-06T21:34:45Z","git_url":"git://github.com/libuv/libuv.git","ssh_url":"git@github.com:libuv/libuv.git","clone_url":"https://github.com/libuv/libuv.git","svn_url":"https://github.com/libuv/libuv","homepage":"https://libuv.org/","size":16928,"stargazers_count":26166,"watchers_count":26166,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":3784,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":205,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asynchronous","deep-io","io","networking","unicorns","unix","velociraptors","windows"],"visibility":"public","forks":3784,"open_issues":205,"watchers":26166,"default_branch":"v1.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/libuv/libuv/pulls/996","html_url":"https://github.com/libuv/libuv/pull/996","diff_url":"https://github.com/libuv/libuv/pull/996.diff","patch_url":"https://github.com/libuv/libuv/pull/996.patch","merged_at":null},"body":"This fixes https://github.com/libuv/libuv/issues/995\n\nCheck for `ERROR_NOT_A_REPARSE_POINT` after the `fs__readlink_handle()` call and in that case treat the file as if `FILE_ATTRIBUTE_REPARSE_POINT` was not there. I looked at the 2 other calls to `fs__readlink_handle()` and concluded those do not need a similar check.\n","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/996/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libuv/libuv/issues/996/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":756753556,"node_id":"MDExOkNsb3NlZEV2ZW50NzU2NzUzNTU2","url":"https://api.github.com/repos/libuv/libuv/issues/events/756753556","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"7ae4b1ad7f6d09f5994403b253a0494a6642c8f2","commit_url":"https://api.github.com/repos/libuv/libuv/commits/7ae4b1ad7f6d09f5994403b253a0494a6642c8f2","created_at":"2016-08-16T09:03:41Z","state_reason":null,"performed_via_github_app":null},{"id":759318930,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDc1OTMxODkzMA==","url":"https://api.github.com/repos/libuv/libuv/issues/events/759318930","actor":{"login":"saghul","id":317464,"node_id":"MDQ6VXNlcjMxNzQ2NA==","avatar_url":"https://avatars.githubusercontent.com/u/317464?v=4","gravatar_id":"","url":"https://api.github.com/users/saghul","html_url":"https://github.com/saghul","followers_url":"https://api.github.com/users/saghul/followers","following_url":"https://api.github.com/users/saghul/following{/other_user}","gists_url":"https://api.github.com/users/saghul/gists{/gist_id}","starred_url":"https://api.github.com/users/saghul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saghul/subscriptions","organizations_url":"https://api.github.com/users/saghul/orgs","repos_url":"https://api.github.com/users/saghul/repos","events_url":"https://api.github.com/users/saghul/events{/privacy}","received_events_url":"https://api.github.com/users/saghul/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c9c9d5206fefd389bf80696db017de06535942cc","commit_url":"https://api.github.com/repos/saghul/libuv/commits/c9c9d5206fefd389bf80696db017de06535942cc","created_at":"2016-08-18T01:29:25Z","performed_via_github_app":null},{"id":1235621331,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMzU2MjEzMzE=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1235621331","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1579225bc0402d67f7c7e2d2e610bb776009b530","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/1579225bc0402d67f7c7e2d2e610bb776009b530","created_at":"2017-09-05T20:15:01Z","performed_via_github_app":null},{"actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-05T20:34:25Z","updated_at":"2017-09-05T20:34:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/libuv/libuv/issues/1521","repository_url":"https://api.github.com/repos/libuv/libuv","labels_url":"https://api.github.com/repos/libuv/libuv/issues/1521/labels{/name}","comments_url":"https://api.github.com/repos/libuv/libuv/issues/1521/comments","events_url":"https://api.github.com/repos/libuv/libuv/issues/1521/events","html_url":"https://github.com/libuv/libuv/pull/1521","id":255400444,"node_id":"MDExOlB1bGxSZXF1ZXN0MTM5NDE0OTMx","number":1521,"title":"windows: fix non-symlink reparse points","user":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-09-05T20:34:25Z","updated_at":"2017-09-05T21:47:30Z","closed_at":"2017-09-05T21:43:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14812739,"node_id":"MDEwOlJlcG9zaXRvcnkxNDgxMjczOQ==","name":"libuv","full_name":"libuv/libuv","private":false,"owner":{"login":"libuv","id":4030929,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwMzA5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4030929?v=4","gravatar_id":"","url":"https://api.github.com/users/libuv","html_url":"https://github.com/libuv","followers_url":"https://api.github.com/users/libuv/followers","following_url":"https://api.github.com/users/libuv/following{/other_user}","gists_url":"https://api.github.com/users/libuv/gists{/gist_id}","starred_url":"https://api.github.com/users/libuv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libuv/subscriptions","organizations_url":"https://api.github.com/users/libuv/orgs","repos_url":"https://api.github.com/users/libuv/repos","events_url":"https://api.github.com/users/libuv/events{/privacy}","received_events_url":"https://api.github.com/users/libuv/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/libuv/libuv","description":"Cross-platform asynchronous I/O","fork":false,"url":"https://api.github.com/repos/libuv/libuv","forks_url":"https://api.github.com/repos/libuv/libuv/forks","keys_url":"https://api.github.com/repos/libuv/libuv/keys{/key_id}","collaborators_url":"https://api.github.com/repos/libuv/libuv/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/libuv/libuv/teams","hooks_url":"https://api.github.com/repos/libuv/libuv/hooks","issue_events_url":"https://api.github.com/repos/libuv/libuv/issues/events{/number}","events_url":"https://api.github.com/repos/libuv/libuv/events","assignees_url":"https://api.github.com/repos/libuv/libuv/assignees{/user}","branches_url":"https://api.github.com/repos/libuv/libuv/branches{/branch}","tags_url":"https://api.github.com/repos/libuv/libuv/tags","blobs_url":"https://api.github.com/repos/libuv/libuv/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/libuv/libuv/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/libuv/libuv/git/refs{/sha}","trees_url":"https://api.github.com/repos/libuv/libuv/git/trees{/sha}","statuses_url":"https://api.github.com/repos/libuv/libuv/statuses/{sha}","languages_url":"https://api.github.com/repos/libuv/libuv/languages","stargazers_url":"https://api.github.com/repos/libuv/libuv/stargazers","contributors_url":"https://api.github.com/repos/libuv/libuv/contributors","subscribers_url":"https://api.github.com/repos/libuv/libuv/subscribers","subscription_url":"https://api.github.com/repos/libuv/libuv/subscription","commits_url":"https://api.github.com/repos/libuv/libuv/commits{/sha}","git_commits_url":"https://api.github.com/repos/libuv/libuv/git/commits{/sha}","comments_url":"https://api.github.com/repos/libuv/libuv/comments{/number}","issue_comment_url":"https://api.github.com/repos/libuv/libuv/issues/comments{/number}","contents_url":"https://api.github.com/repos/libuv/libuv/contents/{+path}","compare_url":"https://api.github.com/repos/libuv/libuv/compare/{base}...{head}","merges_url":"https://api.github.com/repos/libuv/libuv/merges","archive_url":"https://api.github.com/repos/libuv/libuv/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/libuv/libuv/downloads","issues_url":"https://api.github.com/repos/libuv/libuv/issues{/number}","pulls_url":"https://api.github.com/repos/libuv/libuv/pulls{/number}","milestones_url":"https://api.github.com/repos/libuv/libuv/milestones{/number}","notifications_url":"https://api.github.com/repos/libuv/libuv/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/libuv/libuv/labels{/name}","releases_url":"https://api.github.com/repos/libuv/libuv/releases{/id}","deployments_url":"https://api.github.com/repos/libuv/libuv/deployments","created_at":"2013-11-30T00:29:56Z","updated_at":"2025-11-10T12:47:39Z","pushed_at":"2025-11-06T21:34:45Z","git_url":"git://github.com/libuv/libuv.git","ssh_url":"git@github.com:libuv/libuv.git","clone_url":"https://github.com/libuv/libuv.git","svn_url":"https://github.com/libuv/libuv","homepage":"https://libuv.org/","size":16928,"stargazers_count":26166,"watchers_count":26166,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":3784,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":205,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asynchronous","deep-io","io","networking","unicorns","unix","velociraptors","windows"],"visibility":"public","forks":3784,"open_issues":205,"watchers":26166,"default_branch":"v1.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/libuv/libuv/pulls/1521","html_url":"https://github.com/libuv/libuv/pull/1521","diff_url":"https://github.com/libuv/libuv/pull/1521.diff","patch_url":"https://github.com/libuv/libuv/pull/1521.patch","merged_at":null},"body":"Fixes uv_fs_stat and uv_fs_lstat returning EINVAL when invoked on a non-symlink reparse point.\r\n\r\n1. Only tries to read symlinks when invoked via lstat (do_lstat == 1).\r\n\r\nRationale is that only lstat can set S_IFLNK because when a file is tested by stat, symlinks are resolved by the OS and the returned file must be real. Note that broken symlinks fail at CreateFile.\r\n\r\nFILE_ATTRIBUTE_REPARSE_POINT is used by filesystem drivers for purposes besides symlinks, and uv_fs_stat fails when invoked on these files because fs__readlink_handle returns ERROR_SYMLINK_NOT_SUPPORTED. By ignoring the attribute in uv_fs_stat, these files are now handled correctly.\r\n\r\n2. Modifies the logic added to fs__stat_handle to fix #995 as follows:\r\n\r\nA failed fs__readlink_handle on a file with a reparse point indicates that the file is not a symlink. The fix for #995 added code to fall through and behave as with a normal file in this case. However, this is not correct because lstat had opened the file with FILE_FLAG_OPEN_REPARSE_POINT, preventing the filesystem from acting based on the reparse point contents.\r\n\r\nThe fix makes fs__stat_handle fail back to the higher level fs__stat_impl, which sets do_lstat to 0 and re-opens the file without FILE_FLAG_OPEN_REPARSE_POINT, allowing normal filesystem processing to take place.\r\n\r\nThis is also a slightly cleaner solution as symlink fallback is only handled in one place (fs__stat_impl) instead of two (fs__stat_impl and fs__stat_handle).\r\n\r\nNote that the error tested in the fix for #995, ERROR_NOT_A_REPARSE_POINT, is not actually returned by Windows in the case of a non-symlink reparse point. I attempted to reproduce the error by repeating the test steps in the issue but failed. However, the the fix logic is preserved out of caution.\r\n\r\n3. Adds tests to fs-test.c for the above two changes.\r\n\r\nThorough testing requires some non-trivial setup - like an OSX computer on the LAN or a custom filesystem driver - so these tests are left commented out for manual invocation.","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/1521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libuv/libuv/issues/1521/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1235755205,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMzU3NTUyMDU=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1235755205","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e54b26824da1e14ed2e4cbdda579b533ca10b275","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/e54b26824da1e14ed2e4cbdda579b533ca10b275","created_at":"2017-09-05T21:41:41Z","performed_via_github_app":null},{"actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-05T21:46:25Z","updated_at":"2017-09-05T21:46:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/libuv/libuv/issues/1522","repository_url":"https://api.github.com/repos/libuv/libuv","labels_url":"https://api.github.com/repos/libuv/libuv/issues/1522/labels{/name}","comments_url":"https://api.github.com/repos/libuv/libuv/issues/1522/comments","events_url":"https://api.github.com/repos/libuv/libuv/issues/1522/events","html_url":"https://github.com/libuv/libuv/pull/1522","id":255418647,"node_id":"MDExOlB1bGxSZXF1ZXN0MTM5NDI4NTU3","number":1522,"title":"windows: fix non-symlink reparse points","user":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":24,"created_at":"2017-09-05T21:46:25Z","updated_at":"2017-10-04T00:02:37Z","closed_at":"2017-10-03T14:51:38Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14812739,"node_id":"MDEwOlJlcG9zaXRvcnkxNDgxMjczOQ==","name":"libuv","full_name":"libuv/libuv","private":false,"owner":{"login":"libuv","id":4030929,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwMzA5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/4030929?v=4","gravatar_id":"","url":"https://api.github.com/users/libuv","html_url":"https://github.com/libuv","followers_url":"https://api.github.com/users/libuv/followers","following_url":"https://api.github.com/users/libuv/following{/other_user}","gists_url":"https://api.github.com/users/libuv/gists{/gist_id}","starred_url":"https://api.github.com/users/libuv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libuv/subscriptions","organizations_url":"https://api.github.com/users/libuv/orgs","repos_url":"https://api.github.com/users/libuv/repos","events_url":"https://api.github.com/users/libuv/events{/privacy}","received_events_url":"https://api.github.com/users/libuv/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/libuv/libuv","description":"Cross-platform asynchronous I/O","fork":false,"url":"https://api.github.com/repos/libuv/libuv","forks_url":"https://api.github.com/repos/libuv/libuv/forks","keys_url":"https://api.github.com/repos/libuv/libuv/keys{/key_id}","collaborators_url":"https://api.github.com/repos/libuv/libuv/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/libuv/libuv/teams","hooks_url":"https://api.github.com/repos/libuv/libuv/hooks","issue_events_url":"https://api.github.com/repos/libuv/libuv/issues/events{/number}","events_url":"https://api.github.com/repos/libuv/libuv/events","assignees_url":"https://api.github.com/repos/libuv/libuv/assignees{/user}","branches_url":"https://api.github.com/repos/libuv/libuv/branches{/branch}","tags_url":"https://api.github.com/repos/libuv/libuv/tags","blobs_url":"https://api.github.com/repos/libuv/libuv/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/libuv/libuv/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/libuv/libuv/git/refs{/sha}","trees_url":"https://api.github.com/repos/libuv/libuv/git/trees{/sha}","statuses_url":"https://api.github.com/repos/libuv/libuv/statuses/{sha}","languages_url":"https://api.github.com/repos/libuv/libuv/languages","stargazers_url":"https://api.github.com/repos/libuv/libuv/stargazers","contributors_url":"https://api.github.com/repos/libuv/libuv/contributors","subscribers_url":"https://api.github.com/repos/libuv/libuv/subscribers","subscription_url":"https://api.github.com/repos/libuv/libuv/subscription","commits_url":"https://api.github.com/repos/libuv/libuv/commits{/sha}","git_commits_url":"https://api.github.com/repos/libuv/libuv/git/commits{/sha}","comments_url":"https://api.github.com/repos/libuv/libuv/comments{/number}","issue_comment_url":"https://api.github.com/repos/libuv/libuv/issues/comments{/number}","contents_url":"https://api.github.com/repos/libuv/libuv/contents/{+path}","compare_url":"https://api.github.com/repos/libuv/libuv/compare/{base}...{head}","merges_url":"https://api.github.com/repos/libuv/libuv/merges","archive_url":"https://api.github.com/repos/libuv/libuv/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/libuv/libuv/downloads","issues_url":"https://api.github.com/repos/libuv/libuv/issues{/number}","pulls_url":"https://api.github.com/repos/libuv/libuv/pulls{/number}","milestones_url":"https://api.github.com/repos/libuv/libuv/milestones{/number}","notifications_url":"https://api.github.com/repos/libuv/libuv/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/libuv/libuv/labels{/name}","releases_url":"https://api.github.com/repos/libuv/libuv/releases{/id}","deployments_url":"https://api.github.com/repos/libuv/libuv/deployments","created_at":"2013-11-30T00:29:56Z","updated_at":"2025-11-10T12:47:39Z","pushed_at":"2025-11-06T21:34:45Z","git_url":"git://github.com/libuv/libuv.git","ssh_url":"git@github.com:libuv/libuv.git","clone_url":"https://github.com/libuv/libuv.git","svn_url":"https://github.com/libuv/libuv","homepage":"https://libuv.org/","size":16928,"stargazers_count":26166,"watchers_count":26166,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":3784,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":205,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["asynchronous","deep-io","io","networking","unicorns","unix","velociraptors","windows"],"visibility":"public","forks":3784,"open_issues":205,"watchers":26166,"default_branch":"v1.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/libuv/libuv/pulls/1522","html_url":"https://github.com/libuv/libuv/pull/1522","diff_url":"https://github.com/libuv/libuv/pull/1522.diff","patch_url":"https://github.com/libuv/libuv/pull/1522.patch","merged_at":null},"body":"Fixes uv_fs_stat and uv_fs_lstat returning EINVAL when invoked on a non-symlink reparse point.\r\n\r\n1. Only tries to read symlinks when invoked via lstat (do_lstat == 1).\r\n\r\nRationale is that only lstat can set S_IFLNK because when a file is tested by stat, symlinks are resolved by the OS and the returned file must be real. Note that broken symlinks fail at CreateFile.\r\n\r\nFILE_ATTRIBUTE_REPARSE_POINT is used by filesystem drivers for purposes besides symlinks, and uv_fs_stat fails when invoked on these files because fs__readlink_handle returns ERROR_SYMLINK_NOT_SUPPORTED. By ignoring the attribute in uv_fs_stat, these files are now handled correctly.\r\n\r\n2. Modifies the logic added to fs__stat_handle to fix #995 as follows:\r\n\r\nA failed fs__readlink_handle on a file with a reparse point indicates that the file is not a symlink. The fix for #995 added code to fall through and behave as with a normal file in this case. However, this is not correct because lstat had opened the file with FILE_FLAG_OPEN_REPARSE_POINT, preventing the filesystem from acting based on the reparse point contents.\r\n\r\nThe fix makes fs__stat_handle fail back to the higher level fs__stat_impl, which sets do_lstat to 0 and re-opens the file without FILE_FLAG_OPEN_REPARSE_POINT, allowing normal filesystem processing to take place.\r\n\r\nThis is also a slightly cleaner solution as symlink fallback is only handled in one place (fs__stat_impl) instead of two (fs__stat_impl and fs__stat_handle).\r\n\r\nNote that the error tested in the fix for #995, ERROR_NOT_A_REPARSE_POINT, is not actually returned by Windows in the case of a non-symlink reparse point. I attempted to reproduce the error by repeating the test steps in the issue but failed. However, the the fix logic is preserved out of caution.\r\n\r\n3. Adds tests to fs-test.c for the above two changes.\r\n\r\nThorough testing requires some non-trivial setup - like an OSX computer on the LAN or a custom filesystem driver - so these tests are left commented out for manual invocation.","reactions":{"url":"https://api.github.com/repos/libuv/libuv/issues/1522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/libuv/libuv/issues/1522/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1237484467,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMzc0ODQ0Njc=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1237484467","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2475df32de6216f626c67450cfaf6d7e5f1cfe55","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/2475df32de6216f626c67450cfaf6d7e5f1cfe55","created_at":"2017-09-06T19:14:08Z","performed_via_github_app":null},{"id":1239503892,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMzk1MDM4OTI=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1239503892","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3b64aec35a9245e3b4cdac426f5f6c74cebe73f8","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/3b64aec35a9245e3b4cdac426f5f6c74cebe73f8","created_at":"2017-09-07T20:05:27Z","performed_via_github_app":null},{"id":1245756598,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNDU3NTY1OTg=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1245756598","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3bb96fe9e3855ed79518de841738166a1177681a","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/3bb96fe9e3855ed79518de841738166a1177681a","created_at":"2017-09-12T17:29:30Z","performed_via_github_app":null},{"id":1245761953,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNDU3NjE5NTM=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1245761953","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"01c826096e603d5d5fbcad7d86e13bd13758cb27","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/01c826096e603d5d5fbcad7d86e13bd13758cb27","created_at":"2017-09-12T17:32:53Z","performed_via_github_app":null},{"id":1269951161,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNjk5NTExNjE=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1269951161","actor":{"login":"wadetb","id":942582,"node_id":"MDQ6VXNlcjk0MjU4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/942582?v=4","gravatar_id":"","url":"https://api.github.com/users/wadetb","html_url":"https://github.com/wadetb","followers_url":"https://api.github.com/users/wadetb/followers","following_url":"https://api.github.com/users/wadetb/following{/other_user}","gists_url":"https://api.github.com/users/wadetb/gists{/gist_id}","starred_url":"https://api.github.com/users/wadetb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadetb/subscriptions","organizations_url":"https://api.github.com/users/wadetb/orgs","repos_url":"https://api.github.com/users/wadetb/repos","events_url":"https://api.github.com/users/wadetb/events{/privacy}","received_events_url":"https://api.github.com/users/wadetb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fca36182d88e545ef9587f309c790614766ccfe2","commit_url":"https://api.github.com/repos/wadetb/libuv/commits/fca36182d88e545ef9587f309c790614766ccfe2","created_at":"2017-09-28T14:49:15Z","performed_via_github_app":null},{"id":1276133676,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNzYxMzM2NzY=","url":"https://api.github.com/repos/libuv/libuv/issues/events/1276133676","actor":{"login":"bzoz","id":17704638,"node_id":"MDQ6VXNlcjE3NzA0NjM4","avatar_url":"https://avatars.githubusercontent.com/u/17704638?v=4","gravatar_id":"","url":"https://api.github.com/users/bzoz","html_url":"https://github.com/bzoz","followers_url":"https://api.github.com/users/bzoz/followers","following_url":"https://api.github.com/users/bzoz/following{/other_user}","gists_url":"https://api.github.com/users/bzoz/gists{/gist_id}","starred_url":"https://api.github.com/users/bzoz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bzoz/subscriptions","organizations_url":"https://api.github.com/users/bzoz/orgs","repos_url":"https://api.github.com/users/bzoz/repos","events_url":"https://api.github.com/users/bzoz/events{/privacy}","received_events_url":"https://api.github.com/users/bzoz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1d9c13f1f7d6e769833346daf0f8811ba111d100","commit_url":"https://api.github.com/repos/libuv/libuv/commits/1d9c13f1f7d6e769833346daf0f8811ba111d100","created_at":"2017-10-03T14:51:06Z","performed_via_github_app":null}]