{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120/events","html_url":"https://github.com/pylint-dev/pylint/issues/1120","id":179744982,"node_id":"MDU6SXNzdWUxNzk3NDQ5ODI=","number":1120,"title":"Pylint gets file path wrong","user":{"login":"DeTeReR","id":4280005,"node_id":"MDQ6VXNlcjQyODAwMDU=","avatar_url":"https://avatars.githubusercontent.com/u/4280005?v=4","gravatar_id":"","url":"https://api.github.com/users/DeTeReR","html_url":"https://github.com/DeTeReR","followers_url":"https://api.github.com/users/DeTeReR/followers","following_url":"https://api.github.com/users/DeTeReR/following{/other_user}","gists_url":"https://api.github.com/users/DeTeReR/gists{/gist_id}","starred_url":"https://api.github.com/users/DeTeReR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DeTeReR/subscriptions","organizations_url":"https://api.github.com/users/DeTeReR/orgs","repos_url":"https://api.github.com/users/DeTeReR/repos","events_url":"https://api.github.com/users/DeTeReR/events{/privacy}","received_events_url":"https://api.github.com/users/DeTeReR/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472205214,"node_id":"MDU6TGFiZWw0NzIyMDUyMTQ=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Needs%20reproduction%20:mag:","name":"Needs reproduction :mag:","color":"ffa500","default":false,"description":"Need a way to reproduce it locally on a maintainer's machine"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-09-28T11:16:22Z","updated_at":"2018-03-01T08:55:06Z","closed_at":"2018-03-01T08:55:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Pylint seems to mangle file paths when its run from a directory in '/' which has the same name as a dir lower down in the hierarchy which contains a python file with linting errors.\n### Steps to reproduce\n\nA (probably not completely minimised) directory structure (__init__s are all empty):\n\n```\ndeterer@deterer /grom % ls -R\n.:\ntest\n\n./test:\ngrom  __init__.py\n\n./test/grom:\n__init__.py  test\n\n./test/grom/test:\nfoo.py  __init__.py\n\n\ndeterer@deterer /grom % cat test/grom/test/foo.py \na = object()\na.bar()\n\n```\n\nRun pylint:\n\n```\ndeterer@deterer /grom %  pylint --reports no --output-format parseable --msg-template=ERROR:{path}:{line}:{symbol}:{msg} test/grom/test/foo.py \n```\n### Current behavior\n\nOutput has the wrong path.\n\n```\nNo config file found, using default configuration\n/usr/lib/python2.7/dist-packages/pylint/reporters/text.py:79: UserWarning: parseable output format is deprecated. This is equivalent to --msg-template={path}:{line}: [{msg_id}({symbol}), {obj}] {msg}\n  'to --msg-template=%s' % (self.name, self.line_format))\n************* Module test.grom.test.foo\nERROR:testtest/foo.py:1:blacklisted-name:Black listed name \"foo\"\nERROR:testtest/foo.py:1:missing-docstring:Missing module docstring\nERROR:testtest/foo.py:1:invalid-name:Invalid constant name \"a\"\nERROR:testtest/foo.py:2:no-member:Instance of 'object' has no 'bar' member\n```\n### Expected behavior\n\nOutput has the right path\n\n```\nNo config file found, using default configuration\n/usr/lib/python2.7/dist-packages/pylint/reporters/text.py:79: UserWarning: parseable output format is deprecated. This is equivalent to --msg-template={path}:{line}: [{msg_id}({symbol}), {obj}] {msg}\n  'to --msg-template=%s' % (self.name, self.line_format))\n************* Module test.grom.test.foo\nERROR:test/grom/test/foo.py:1:blacklisted-name:Black listed name \"foo\"\nERROR:test/grom/test/foo.py:1:missing-docstring:Missing module docstring\nERROR:test/grom/test/foo.py:1:invalid-name:Invalid constant name \"a\"\nERROR:test/grom/test/foo.py:2:no-member:Instance of 'object' has no 'bar' member\n```\n### pylint --version output\n\n```\ndeterer@deterer /grom % pylint --version\nNo config file found, using default configuration\npylint 1.1.0, \nastroid 1.0.1, common 0.61.0\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2]\n```\n### Additional\n\nI have also run this in Docker to try it with Ubuntu 16.04 and pylint 1.6.4\n\n```\ndeterer@deterer /grom % docker build -t dock-pylint .                                                                                         \nSending build context to Docker daemon 6.144 kB\nStep 1 : FROM ubuntu:16.04\n ---> 45bc58500fa3\nStep 2 : RUN apt-get -qq update\n ---> Using cache\n ---> db0460086527\nStep 3 : RUN apt-get -qq install python python-pip vim tree\n ---> Using cache\n ---> 88bac80f6c74\nStep 4 : RUN pip install pylint\n ---> Using cache\n ---> acad50c8ef05\nStep 5 : COPY . /grom\n ---> 2e7a96ea7765\nRemoving intermediate container d383244f20e2\nSuccessfully built 2e7a96ea7765\ndeterer@deterer /grom % docker run  -w /grom dock-pylint pylint --reports no --output-format parseable --msg-template=ERROR:{path}:{line}:{symbol}:{msg} *\nNo config file found, using default configuration\n************* Module Dockerfile\nERROR:Dockerfile:1:syntax-error:invalid syntax\n************* Module test.grom.test.foo\nERROR:testtest/foo.py:3:trailing-newlines:Trailing newlines\nERROR:testtest/foo.py:1:blacklisted-name:Black listed name \"foo\"\nERROR:testtest/foo.py:1:missing-docstring:Missing module docstring\nERROR:testtest/foo.py:1:invalid-name:Invalid constant name \"a\"\nERROR:testtest/foo.py:2:no-member:Instance of 'object' has no 'bar' member\ndeterer@deterer /grom % docker run -w /grom dock-pylint pylint --version                                                                                 \nNo config file found, using default configuration\npylint 1.6.4, \nastroid 1.4.8\nPython 2.7.12 (default, Jul  1 2016, 15:12:24) \n[GCC 5.4.0 20160609]\n```\n","closed_by":{"login":"PCManticore","id":448166,"node_id":"MDQ6VXNlcjQ0ODE2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/448166?v=4","gravatar_id":"","url":"https://api.github.com/users/PCManticore","html_url":"https://github.com/PCManticore","followers_url":"https://api.github.com/users/PCManticore/followers","following_url":"https://api.github.com/users/PCManticore/following{/other_user}","gists_url":"https://api.github.com/users/PCManticore/gists{/gist_id}","starred_url":"https://api.github.com/users/PCManticore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PCManticore/subscriptions","organizations_url":"https://api.github.com/users/PCManticore/orgs","repos_url":"https://api.github.com/users/PCManticore/repos","events_url":"https://api.github.com/users/PCManticore/events{/privacy}","received_events_url":"https://api.github.com/users/PCManticore/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1120/timeline","performed_via_github_app":null,"state_reason":"completed"}