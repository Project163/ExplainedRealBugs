{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874/events","html_url":"https://github.com/pylint-dev/pylint/issues/1874","id":296089879,"node_id":"MDU6SXNzdWUyOTYwODk4Nzk=","number":1874,"title":"not-context-manager tests fail with astroid 2.0","user":{"login":"PCManticore","id":448166,"node_id":"MDQ6VXNlcjQ0ODE2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/448166?v=4","gravatar_id":"","url":"https://api.github.com/users/PCManticore","html_url":"https://github.com/PCManticore","followers_url":"https://api.github.com/users/PCManticore/followers","following_url":"https://api.github.com/users/PCManticore/following{/other_user}","gists_url":"https://api.github.com/users/PCManticore/gists{/gist_id}","starred_url":"https://api.github.com/users/PCManticore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PCManticore/subscriptions","organizations_url":"https://api.github.com/users/PCManticore/orgs","repos_url":"https://api.github.com/users/PCManticore/repos","events_url":"https://api.github.com/users/PCManticore/events{/privacy}","received_events_url":"https://api.github.com/users/PCManticore/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":297274515,"node_id":"MDU6TGFiZWwyOTcyNzQ1MTU=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Bug%20:beetle:","name":"Bug :beetle:","color":"ea9896","default":false,"description":""},{"id":303519130,"node_id":"MDU6TGFiZWwzMDM1MTkxMzA=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Blocker%20%F0%9F%99%85","name":"Blocker ðŸ™…","color":"e11d21","default":false,"description":"Blocks the next release"}],"state":"closed","locked":false,"assignee":{"login":"brycepg","id":441800,"node_id":"MDQ6VXNlcjQ0MTgwMA==","avatar_url":"https://avatars.githubusercontent.com/u/441800?v=4","gravatar_id":"","url":"https://api.github.com/users/brycepg","html_url":"https://github.com/brycepg","followers_url":"https://api.github.com/users/brycepg/followers","following_url":"https://api.github.com/users/brycepg/following{/other_user}","gists_url":"https://api.github.com/users/brycepg/gists{/gist_id}","starred_url":"https://api.github.com/users/brycepg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brycepg/subscriptions","organizations_url":"https://api.github.com/users/brycepg/orgs","repos_url":"https://api.github.com/users/brycepg/repos","events_url":"https://api.github.com/users/brycepg/events{/privacy}","received_events_url":"https://api.github.com/users/brycepg/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"brycepg","id":441800,"node_id":"MDQ6VXNlcjQ0MTgwMA==","avatar_url":"https://avatars.githubusercontent.com/u/441800?v=4","gravatar_id":"","url":"https://api.github.com/users/brycepg","html_url":"https://github.com/brycepg","followers_url":"https://api.github.com/users/brycepg/followers","following_url":"https://api.github.com/users/brycepg/following{/other_user}","gists_url":"https://api.github.com/users/brycepg/gists{/gist_id}","starred_url":"https://api.github.com/users/brycepg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brycepg/subscriptions","organizations_url":"https://api.github.com/users/brycepg/orgs","repos_url":"https://api.github.com/users/brycepg/repos","events_url":"https://api.github.com/users/brycepg/events{/privacy}","received_events_url":"https://api.github.com/users/brycepg/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2018-02-10T10:10:33Z","updated_at":"2018-02-15T04:08:04Z","closed_at":"2018-02-15T04:08:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Steps to reproduce\r\n1. Use astroid 2.0 as in the following commit https://github.com/PyCQA/pylint/commit/88d336ec29ad046f65c64f56f68637c321d744b2\r\n2. Run the test suite using `tox`\r\n\r\n\r\n### Current behavior\r\n\r\nThe tests for the `not-context-manager` check will fail with:\r\n```\r\n>           pytest.fail('\\n'.join(msg))\r\nE           Failed: Wrong results for file \"not_context_manager\":\r\nE           \r\nE           Unexpected in testdata:\r\nE            121: not-context-manager\r\nE            125: not-context-manager\r\n```\r\n\r\n### Expected behavior\r\n\r\nFor the tests to not fail. I *think* this is caused by https://github.com/PyCQA/astroid/commit/53ab62402b2842dbe79cfbd91f3d698d74200485, which modifies the way (in a correct way) how contexts works. We were actually asking for some breakage around here https://github.com/PyCQA/pylint/blob/72df0403c84b3ac6deb7cb4023912b58321c3181/pylint/checkers/typecheck.py#L1148, where we were relying on inspecting the context's path to see if we find the scope of the context manager. We should probably find another way to infer that, rather than inspecting something as brittle as the context inference path.\r\n\r\nCC @brycepg \r\n\r\n","closed_by":{"login":"brycepg","id":441800,"node_id":"MDQ6VXNlcjQ0MTgwMA==","avatar_url":"https://avatars.githubusercontent.com/u/441800?v=4","gravatar_id":"","url":"https://api.github.com/users/brycepg","html_url":"https://github.com/brycepg","followers_url":"https://api.github.com/users/brycepg/followers","following_url":"https://api.github.com/users/brycepg/following{/other_user}","gists_url":"https://api.github.com/users/brycepg/gists{/gist_id}","starred_url":"https://api.github.com/users/brycepg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brycepg/subscriptions","organizations_url":"https://api.github.com/users/brycepg/orgs","repos_url":"https://api.github.com/users/brycepg/repos","events_url":"https://api.github.com/users/brycepg/events{/privacy}","received_events_url":"https://api.github.com/users/brycepg/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/1874/timeline","performed_via_github_app":null,"state_reason":"completed"}