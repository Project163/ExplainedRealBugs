{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042/events","html_url":"https://github.com/pylint-dev/pylint/issues/4042","id":792665849,"node_id":"MDU6SXNzdWU3OTI2NjU4NDk=","number":4042,"title":"format-string inconsistencies and bugs","user":{"login":"twmr","id":206581,"node_id":"MDQ6VXNlcjIwNjU4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/206581?v=4","gravatar_id":"","url":"https://api.github.com/users/twmr","html_url":"https://github.com/twmr","followers_url":"https://api.github.com/users/twmr/followers","following_url":"https://api.github.com/users/twmr/following{/other_user}","gists_url":"https://api.github.com/users/twmr/gists{/gist_id}","starred_url":"https://api.github.com/users/twmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twmr/subscriptions","organizations_url":"https://api.github.com/users/twmr/orgs","repos_url":"https://api.github.com/users/twmr/repos","events_url":"https://api.github.com/users/twmr/events{/privacy}","received_events_url":"https://api.github.com/users/twmr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":297274517,"node_id":"MDU6TGFiZWwyOTcyNzQ1MTc=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Enhancement%20%E2%9C%A8","name":"Enhancement âœ¨","color":"84b6eb","default":false,"description":"Improvement to a component"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/36","html_url":"https://github.com/pylint-dev/pylint/milestone/36","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/36/labels","id":6648910,"node_id":"MDk6TWlsZXN0b25lNjY0ODkxMA==","number":36,"title":"2.10.0","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":125,"state":"closed","created_at":"2021-04-11T19:58:50Z","updated_at":"2022-10-26T09:54:12Z","due_on":null,"closed_at":"2021-08-20T21:00:48Z"},"comments":1,"created_at":"2021-01-23T22:49:43Z","updated_at":"2021-08-04T18:36:11Z","closed_at":"2021-08-04T18:35:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"At work we stumbled upon a bug in an old code, that used `%` formatting, but the fmt string was wrong, because it didn't contain any replacement fields. It would be nice if pylint could warn about format strings without any replacement fields.\r\n\r\n### Current behavior\r\n\r\n```py\r\ndef demo(param):\r\n    print(\"1asfasfdsf dasfdadfsdf\" % param)  # no warning (code like this line was used in our code-base)\r\n    print(\"2asfasfdsf dasfdadfsdf\" % ())  # no warning\r\n    print(\"3asfasfdsf dasfdadfsdf\" % [])  # pylint outputs too-many-format-args\r\n\r\n    # this line raises when you run the script using cpython\r\n    print(\"4asfasfdsf dasfdadfsdf\" % None)  # pylint outputs too-many-format-args\r\n\r\ndemo(())\r\n```\r\n\r\n```\r\ndemo.py:4:10: E1305: Too many arguments for format string (too-many-format-args)\r\ndemo.py:7:10: E1305: Too many arguments for format string (too-many-format-args)\r\n```\r\n\r\nWhen using `.format` the behavior is a bit different (both in cpython as well as in pylint)\r\n\r\n```py\r\ndef demo(param):\r\n    print(\"1asfasfdsf dasfdadfsdf\".format(param))  # pylint outputs too-many-format-args\r\n    print(\"2asfasfdsf dasfdadfsdf\".format(()))  # pylint outputs too-many-format-args\r\n    print(\"3asfasfdsf dasfdadfsdf\".format([]))  # pylint outputs too-many-format-args\r\n    print(\"4asfasfdsf dasfdadfsdf\".format(None))  # pylint outputs too-many-format-args\r\n\r\ndemo(())\r\n```\r\n\r\nContrary to the first example, this one doesn't raise an exception when you run it using cpython. However, pylint considers all print  function calls as invalid, which is wrong, because cpython doesn't raise.\r\n\r\n```py\r\ndemo_usint_dot_format.py:2:10: E1305: Too many arguments for format string (too-many-format-args)\r\ndemo_usint_dot_format.py:3:10: E1305: Too many arguments for format string (too-many-format-args)\r\ndemo_usint_dot_format.py:4:10: E1305: Too many arguments for format string (too-many-format-args)\r\ndemo_usint_dot_format.py:7:10: E1305: Too many arguments for format string (too-many-format-args)\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nI don't understand why python supports format strings without any replacement fields. Maybe because if the fmt string and the args passed to e.g. `.format` are determined dynamically.\r\n\r\n**Anyway, I think pylint should output an error (e.g. `bad-format-string`) if the format string is a string without any replacement fields** (as in the examples above).\r\n\r\nThings I want to mention but I don't care about them:\r\n \r\nThere is an inconsistency between lists and tuples if used as format string args:\r\n\r\n```py\r\n    print(\"2asfasfdsf dasfdadfsdf\" % ())  # no warning\r\n    print(\"3asfasfdsf dasfdadfsdf\" % [])  # pylint outputs too-many-format-args\r\n```\r\n\r\nThere are differences between `%` formating and `.format` formatting in pylint.\r\n\r\n\r\n\r\n### pylint --version output\r\n\r\n```\r\npylint 2.6.0\r\nastroid 2.4.2\r\nPython 3.8.6 | packaged by conda-forge | (default, Oct  7 2020, 19:08:05) \r\n[GCC 7.5.0]\r\n```\r\n","closed_by":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/4042/timeline","performed_via_github_app":null,"state_reason":"completed"}