{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938/events","html_url":"https://github.com/pylint-dev/pylint/issues/7938","id":1496673488,"node_id":"I_kwDOAtdnV85ZNWzQ","number":7938,"title":"ModuleNotFound error with pylint-django plugin","user":{"login":"living180","id":425650,"node_id":"MDQ6VXNlcjQyNTY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/425650?v=4","gravatar_id":"","url":"https://api.github.com/users/living180","html_url":"https://github.com/living180","followers_url":"https://api.github.com/users/living180/followers","following_url":"https://api.github.com/users/living180/following{/other_user}","gists_url":"https://api.github.com/users/living180/gists{/gist_id}","starred_url":"https://api.github.com/users/living180/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/living180/subscriptions","organizations_url":"https://api.github.com/users/living180/orgs","repos_url":"https://api.github.com/users/living180/repos","events_url":"https://api.github.com/users/living180/events{/privacy}","received_events_url":"https://api.github.com/users/living180/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":297274515,"node_id":"MDU6TGFiZWwyOTcyNzQ1MTU=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Bug%20:beetle:","name":"Bug :beetle:","color":"ea9896","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/84","html_url":"https://github.com/pylint-dev/pylint/milestone/84","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/84/labels","id":8718145,"node_id":"MI_kwDOAtdnV84AhQdB","number":84,"title":"2.15.9","description":null,"creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2022-12-04T16:40:41Z","updated_at":"2022-12-17T18:37:33Z","due_on":null,"closed_at":"2022-12-17T14:09:57Z"},"comments":0,"created_at":"2022-12-14T13:51:00Z","updated_at":"2022-12-14T19:32:30Z","closed_at":"2022-12-14T19:32:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\n\nStarting with pylint 2.15, running pylint on a Django project with the `pylint_django` plugin enabled results in a `ModuleNotFound` exception.  Bisecting points to commit a2c57ec06070b6d2485082e3a131a087f8d6d921 as the one that exposes the issue.  The reason the exception occurs is that when `_astroid_module_checker()` opens the the `pylint_django` plugin, `pylint_django` attempts to import the Django settings module.  However, the import path has not been fixed up at this point, so the module cannot be found, thus the exception.  I already have a fix working on my machine and thus hope to have a PR ready shortly.\n\n### Configuration\n\n```ini\n[MAIN]\r\nload-plugins = pylint_django\n```\n\n\n### Command used\n\n```shell\nDJANGO_SETTINGS_MODULE=demosite.settings pylint polls/models.py\n```\n\n\n### Pylint output\n\n```shell\nUsing env: /home/dharding/.virtualenvs/demosite\r\nTraceback (most recent call last):\r\n  File \"/home/dharding/.local/bin/pylint\", line 8, in <module>\r\n    sys.exit(run_pylint())\r\n  File \"/home/dharding/.local/venvs/pylint/lib/python3.8/site-packages/pylint/__init__.py\", line 35, in run_pylint\r\n    PylintRun(argv or sys.argv[1:])\r\n  File \"/home/dharding/.local/venvs/pylint/lib/python3.8/site-packages/pylint/lint/run.py\", line 207, in __init__\r\n    linter.check(args)\r\n  File \"/home/dharding/.local/venvs/pylint/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 693, in check\r\n    with self._astroid_module_checker() as check_astroid_module:\r\n  File \"/usr/lib/python3.8/contextlib.py\", line 113, in __enter__\r\n    return next(self.gen)\r\n  File \"/home/dharding/.local/venvs/pylint/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 990, in _astroid_module_checker\r\n    checker.open()\r\n  File \"/home/dharding/.local/venvs/pylint/lib/python3.8/site-packages/pylint_django/checkers/foreign_key_strings.py\", line 92, in open\r\n    django.setup()\r\n  File \"/home/dharding/.virtualenvs/demosite/lib/python3.8/site-packages/django/__init__.py\", line 19, in setup\r\n    configure_logging(settings.LOGGING_CONFIG, settings.LOGGING)\r\n  File \"/home/dharding/.virtualenvs/demosite/lib/python3.8/site-packages/django/conf/__init__.py\", line 92, in __getattr__\r\n    self._setup(name)\r\n  File \"/home/dharding/.virtualenvs/demosite/lib/python3.8/site-packages/django/conf/__init__.py\", line 79, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"/home/dharding/.virtualenvs/demosite/lib/python3.8/site-packages/django/conf/__init__.py\", line 190, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/usr/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 973, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'demosite'\n```\n\n\n### Expected behavior\n\nNormal output without crashing, e.g.\r\n```\r\nUsing env: /home/dharding/.virtualenvs/demosite\r\n************* Module polls.models\r\npolls/models.py:24: [E1101(no-member), Choice.was_published_recently] Instance of 'Choice' has no 'pub_date' member\r\n```\n\n### Pylint version\n\n```shell\npylint 2.15.8\r\nastroid 2.12.13\r\nPython 3.8.10 (default, Nov 14 2022, 12:59:47)\r\n[GCC 9.4.0]\n```\n\n\n### OS / Environment\n\nUbuntu 20.04.05\n\n### Additional dependencies\n\n`pylint-django==2.5.3`","closed_by":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/7938/timeline","performed_via_github_app":null,"state_reason":"completed"}