{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048/events","html_url":"https://github.com/pylint-dev/pylint/issues/5048","id":1000708143,"node_id":"I_kwDOAtdnV847pZgv","number":5048,"title":"Crash ``'AsStringVisitor' object has no attribute 'visit_unknown'``","user":{"login":"WolfgangFellger","id":3383433,"node_id":"MDQ6VXNlcjMzODM0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/3383433?v=4","gravatar_id":"","url":"https://api.github.com/users/WolfgangFellger","html_url":"https://github.com/WolfgangFellger","followers_url":"https://api.github.com/users/WolfgangFellger/followers","following_url":"https://api.github.com/users/WolfgangFellger/following{/other_user}","gists_url":"https://api.github.com/users/WolfgangFellger/gists{/gist_id}","starred_url":"https://api.github.com/users/WolfgangFellger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WolfgangFellger/subscriptions","organizations_url":"https://api.github.com/users/WolfgangFellger/orgs","repos_url":"https://api.github.com/users/WolfgangFellger/repos","events_url":"https://api.github.com/users/WolfgangFellger/events{/privacy}","received_events_url":"https://api.github.com/users/WolfgangFellger/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":297274515,"node_id":"MDU6TGFiZWwyOTcyNzQ1MTU=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Bug%20:beetle:","name":"Bug :beetle:","color":"ea9896","default":false,"description":""},{"id":1041256788,"node_id":"MDU6TGFiZWwxMDQxMjU2Nzg4","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Crash%20%F0%9F%92%A5","name":"Crash ðŸ’¥","color":"c64d6f","default":false,"description":"A bug that makes pylint crash"},{"id":2899705565,"node_id":"MDU6TGFiZWwyODk5NzA1NTY1","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Needs%20astroid%20update","name":"Needs astroid update","color":"5319E7","default":false,"description":"Needs an astroid update (probably a release too) before being mergable"}],"state":"closed","locked":false,"assignee":{"login":"DanielNoord","id":13665637,"node_id":"MDQ6VXNlcjEzNjY1NjM3","avatar_url":"https://avatars.githubusercontent.com/u/13665637?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielNoord","html_url":"https://github.com/DanielNoord","followers_url":"https://api.github.com/users/DanielNoord/followers","following_url":"https://api.github.com/users/DanielNoord/following{/other_user}","gists_url":"https://api.github.com/users/DanielNoord/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielNoord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielNoord/subscriptions","organizations_url":"https://api.github.com/users/DanielNoord/orgs","repos_url":"https://api.github.com/users/DanielNoord/repos","events_url":"https://api.github.com/users/DanielNoord/events{/privacy}","received_events_url":"https://api.github.com/users/DanielNoord/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"DanielNoord","id":13665637,"node_id":"MDQ6VXNlcjEzNjY1NjM3","avatar_url":"https://avatars.githubusercontent.com/u/13665637?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielNoord","html_url":"https://github.com/DanielNoord","followers_url":"https://api.github.com/users/DanielNoord/followers","following_url":"https://api.github.com/users/DanielNoord/following{/other_user}","gists_url":"https://api.github.com/users/DanielNoord/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielNoord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielNoord/subscriptions","organizations_url":"https://api.github.com/users/DanielNoord/orgs","repos_url":"https://api.github.com/users/DanielNoord/repos","events_url":"https://api.github.com/users/DanielNoord/events{/privacy}","received_events_url":"https://api.github.com/users/DanielNoord/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/51","html_url":"https://github.com/pylint-dev/pylint/milestone/51","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/51/labels","id":7159222,"node_id":"MI_kwDOAtdnV84AbT22","number":51,"title":"2.12.0","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":226,"state":"closed","created_at":"2021-09-16T15:50:04Z","updated_at":"2024-12-17T20:23:50Z","due_on":null,"closed_at":"2021-11-25T14:30:10Z"},"comments":5,"created_at":"2021-09-20T08:36:14Z","updated_at":"2021-10-07T13:05:45Z","closed_at":"2021-10-07T13:05:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\r\n\r\npylint crashed with a ``AttributeError`` when parsing a file, see stacktrace below.\r\n\r\nEdit: Forgot to mention this is a regression. File worked in pylint 2.10.2/astroid 2.7.3.\r\n\r\nThe example below is as condensed as possible (to the point of not making sense, I know):\r\n\r\n```python\r\ndef _find_prefix(a, b):\r\n    common_prefix = []\r\n    for i, j in zip(a, b):\r\n        if i != j:\r\n            break\r\n        common_prefix.append(i)\r\n    return tuple(common_prefix)\r\n\r\n\r\ndef _check_role_references(path, nearest_provider, provider_paths):\r\n    checked_parent_providers = set()\r\n    prefix = _find_prefix(path, nearest_provider)\r\n    parent = prefix + (nearest_provider[len(prefix)],)\r\n    if parent in checked_parent_providers:\r\n        raise Exception()\r\n```\r\n\r\n\r\n### Configuration\r\n\r\n_No response_\r\n\r\n### Command used\r\n\r\n```shell\r\npylint faulty.py\r\n```\r\n\r\n\r\n### Pylint output\r\n\r\n```shell\r\n************* Module faulty\r\nfaulty.py:1:0: C0114: Missing module docstring (missing-module-docstring)\r\nfaulty.py:1:0: C0103: Argument name \"a\" doesn't conform to snake_case naming style (invalid-name)\r\nfaulty.py:1:0: C0103: Argument name \"b\" doesn't conform to snake_case naming style (invalid-name)\r\nException on node <If l.14 at 0x7f419c74e9d0> in file '/opt/code/quidditch/faulty.py'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/pylint/utils/ast_walker.py\", line 75, in walk\r\n    callback(astroid)\r\n  File \"/usr/local/lib/python3.9/site-packages/pylint/checkers/base.py\", line 1104, in visit_if\r\n    self._check_using_constant_test(node, node.test)\r\n  File \"/usr/local/lib/python3.9/site-packages/pylint/checkers/base.py\", line 1142, in _check_using_constant_test\r\n    inferred = utils.safe_infer(test)\r\n  File \"/usr/local/lib/python3.9/site-packages/pylint/checkers/utils.py\", line 1181, in safe_infer\r\n    value = next(infer_gen)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/node_ng.py\", line 105, in infer\r\n    yield from self._infer(context, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/inference.py\", line 872, in _infer_compare\r\n    retval = _do_compare(lhs, op, rhs)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/inference.py\", line 842, in _do_compare\r\n    left, right = _to_literal(left), _to_literal(right)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/inference.py\", line 814, in _to_literal\r\n    return ast.literal_eval(node.as_string())\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/node_ng.py\", line 547, in as_string\r\n    return AsStringVisitor()(self)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/as_string.py\", line 55, in __call__\r\n    return node.accept(self).replace(DOC_NEWLINE, \"\\n\")\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/node_ng.py\", line 186, in accept\r\n    return func(self)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/as_string.py\", line 516, in visit_tuple\r\n    return \"(%s, )\" % node.elts[0].accept(self)\r\n  File \"/usr/local/lib/python3.9/site-packages/astroid/nodes/node_ng.py\", line 185, in accept\r\n    func = getattr(visitor, \"visit_\" + self.__class__.__name__.lower())\r\nAttributeError: 'AsStringVisitor' object has no attribute 'visit_unknown'\r\nfaulty.py:1:0: F0001: Fatal error while checking 'faulty.py'. Please open an issue in our bug tracker so we address this. There is a pre-filled template that you can use in '/home/uid1000/.cache/pylint/pylint-crash-2021-09-20-08.txt'. (fatal)\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nNot quite sure, but not crashing\r\n\r\n### Pylint version\r\n\r\n```shell\r\npylint 2.11.1\r\nastroid 2.8.0\r\nPython 3.9.7 (default, Sep  3 2021, 02:02:37) \r\n[GCC 10.2.1 20210110]\r\n```\r\n\r\n\r\n### OS / Environment\r\n\r\n_No response_\r\n\r\n### Additional dependencies\r\n\r\n_No response_","closed_by":{"login":"cdce8p","id":30130371,"node_id":"MDQ6VXNlcjMwMTMwMzcx","avatar_url":"https://avatars.githubusercontent.com/u/30130371?v=4","gravatar_id":"","url":"https://api.github.com/users/cdce8p","html_url":"https://github.com/cdce8p","followers_url":"https://api.github.com/users/cdce8p/followers","following_url":"https://api.github.com/users/cdce8p/following{/other_user}","gists_url":"https://api.github.com/users/cdce8p/gists{/gist_id}","starred_url":"https://api.github.com/users/cdce8p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdce8p/subscriptions","organizations_url":"https://api.github.com/users/cdce8p/orgs","repos_url":"https://api.github.com/users/cdce8p/repos","events_url":"https://api.github.com/users/cdce8p/events{/privacy}","received_events_url":"https://api.github.com/users/cdce8p/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5048/timeline","performed_via_github_app":null,"state_reason":"completed"}