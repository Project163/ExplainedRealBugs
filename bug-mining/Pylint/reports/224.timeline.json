[{"id":6462152122,"node_id":"LE_lADOAtdnV85IF74dzwAAAAGBLJ26","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462152122","actor":{"login":"mh21","id":755362,"node_id":"MDQ6VXNlcjc1NTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/755362?v=4","gravatar_id":"","url":"https://api.github.com/users/mh21","html_url":"https://github.com/mh21","followers_url":"https://api.github.com/users/mh21/followers","following_url":"https://api.github.com/users/mh21/following{/other_user}","gists_url":"https://api.github.com/users/mh21/gists{/gist_id}","starred_url":"https://api.github.com/users/mh21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mh21/subscriptions","organizations_url":"https://api.github.com/users/mh21/orgs","repos_url":"https://api.github.com/users/mh21/repos","events_url":"https://api.github.com/users/mh21/events{/privacy}","received_events_url":"https://api.github.com/users/mh21/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-20T10:52:33Z","label":{"name":"needs triage","color":"fc8fc7"},"performed_via_github_app":null},{"id":6462191105,"node_id":"UNLE_lADOAtdnV85IF74dzwAAAAGBLTYB","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462191105","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-04-20T10:59:00Z","label":{"name":"needs triage","color":"fc8fc7"},"performed_via_github_app":null},{"id":6462191110,"node_id":"LE_lADOAtdnV85IF74dzwAAAAGBLTYG","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462191110","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-20T10:59:00Z","label":{"name":"Crash üí•","color":"c64d6f"},"performed_via_github_app":null},{"id":6462191441,"node_id":"MIE_lADOAtdnV85IF74dzwAAAAGBLTdR","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462191441","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-04-20T10:59:03Z","milestone":{"title":"2.13.7"},"performed_via_github_app":null},{"actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:00:10Z","updated_at":"2022-04-20T11:00:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409/events","html_url":"https://github.com/pylint-dev/pylint/issues/6409","id":1209516921,"node_id":"I_kwDOAtdnV85IF8N5","number":6409,"title":"'Values' object has no attribute 'additional_builtins'","user":{"login":"mortalisk","id":596662,"node_id":"MDQ6VXNlcjU5NjY2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/596662?v=4","gravatar_id":"","url":"https://api.github.com/users/mortalisk","html_url":"https://github.com/mortalisk","followers_url":"https://api.github.com/users/mortalisk/followers","following_url":"https://api.github.com/users/mortalisk/following{/other_user}","gists_url":"https://api.github.com/users/mortalisk/gists{/gist_id}","starred_url":"https://api.github.com/users/mortalisk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mortalisk/subscriptions","organizations_url":"https://api.github.com/users/mortalisk/orgs","repos_url":"https://api.github.com/users/mortalisk/repos","events_url":"https://api.github.com/users/mortalisk/events{/privacy}","received_events_url":"https://api.github.com/users/mortalisk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1030537680,"node_id":"MDU6TGFiZWwxMDMwNTM3Njgw","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Duplicate%20%F0%9F%90%AB","name":"Duplicate üê´","color":"000000","default":false,"description":"Duplicate of an already existing issue"},{"id":1041256788,"node_id":"MDU6TGFiZWwxMDQxMjU2Nzg4","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Crash%20%F0%9F%92%A5","name":"Crash üí•","color":"c64d6f","default":false,"description":"A bug that makes pylint crash"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/64","html_url":"https://github.com/pylint-dev/pylint/milestone/64","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/64/labels","id":7895144,"node_id":"MI_kwDOAtdnV84AeHho","number":64,"title":"2.13.7","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"closed","created_at":"2022-04-20T10:58:12Z","updated_at":"2022-04-20T11:40:36Z","due_on":null,"closed_at":"2022-04-20T11:40:36Z"},"comments":1,"created_at":"2022-04-20T10:53:53Z","updated_at":"2022-04-20T11:28:13Z","closed_at":"2022-04-20T11:00:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":47671127,"node_id":"MDEwOlJlcG9zaXRvcnk0NzY3MTEyNw==","name":"pylint","full_name":"pylint-dev/pylint","private":false,"owner":{"login":"pylint-dev","id":121692054,"node_id":"O_kgDOB0Dflg","avatar_url":"https://avatars.githubusercontent.com/u/121692054?v=4","gravatar_id":"","url":"https://api.github.com/users/pylint-dev","html_url":"https://github.com/pylint-dev","followers_url":"https://api.github.com/users/pylint-dev/followers","following_url":"https://api.github.com/users/pylint-dev/following{/other_user}","gists_url":"https://api.github.com/users/pylint-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/pylint-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pylint-dev/subscriptions","organizations_url":"https://api.github.com/users/pylint-dev/orgs","repos_url":"https://api.github.com/users/pylint-dev/repos","events_url":"https://api.github.com/users/pylint-dev/events{/privacy}","received_events_url":"https://api.github.com/users/pylint-dev/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pylint-dev/pylint","description":"It's not just a linter that annoys you!","fork":false,"url":"https://api.github.com/repos/pylint-dev/pylint","forks_url":"https://api.github.com/repos/pylint-dev/pylint/forks","keys_url":"https://api.github.com/repos/pylint-dev/pylint/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pylint-dev/pylint/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pylint-dev/pylint/teams","hooks_url":"https://api.github.com/repos/pylint-dev/pylint/hooks","issue_events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/events{/number}","events_url":"https://api.github.com/repos/pylint-dev/pylint/events","assignees_url":"https://api.github.com/repos/pylint-dev/pylint/assignees{/user}","branches_url":"https://api.github.com/repos/pylint-dev/pylint/branches{/branch}","tags_url":"https://api.github.com/repos/pylint-dev/pylint/tags","blobs_url":"https://api.github.com/repos/pylint-dev/pylint/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pylint-dev/pylint/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pylint-dev/pylint/git/refs{/sha}","trees_url":"https://api.github.com/repos/pylint-dev/pylint/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pylint-dev/pylint/statuses/{sha}","languages_url":"https://api.github.com/repos/pylint-dev/pylint/languages","stargazers_url":"https://api.github.com/repos/pylint-dev/pylint/stargazers","contributors_url":"https://api.github.com/repos/pylint-dev/pylint/contributors","subscribers_url":"https://api.github.com/repos/pylint-dev/pylint/subscribers","subscription_url":"https://api.github.com/repos/pylint-dev/pylint/subscription","commits_url":"https://api.github.com/repos/pylint-dev/pylint/commits{/sha}","git_commits_url":"https://api.github.com/repos/pylint-dev/pylint/git/commits{/sha}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/comments{/number}","issue_comment_url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments{/number}","contents_url":"https://api.github.com/repos/pylint-dev/pylint/contents/{+path}","compare_url":"https://api.github.com/repos/pylint-dev/pylint/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pylint-dev/pylint/merges","archive_url":"https://api.github.com/repos/pylint-dev/pylint/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pylint-dev/pylint/downloads","issues_url":"https://api.github.com/repos/pylint-dev/pylint/issues{/number}","pulls_url":"https://api.github.com/repos/pylint-dev/pylint/pulls{/number}","milestones_url":"https://api.github.com/repos/pylint-dev/pylint/milestones{/number}","notifications_url":"https://api.github.com/repos/pylint-dev/pylint/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pylint-dev/pylint/labels{/name}","releases_url":"https://api.github.com/repos/pylint-dev/pylint/releases{/id}","deployments_url":"https://api.github.com/repos/pylint-dev/pylint/deployments","created_at":"2015-12-09T05:40:02Z","updated_at":"2025-11-08T08:50:00Z","pushed_at":"2025-11-08T08:26:15Z","git_url":"git://github.com/pylint-dev/pylint.git","ssh_url":"git@github.com:pylint-dev/pylint.git","clone_url":"https://github.com/pylint-dev/pylint.git","svn_url":"https://github.com/pylint-dev/pylint","homepage":"https://pylint.readthedocs.io/en/latest/","size":41754,"stargazers_count":5591,"watchers_count":5591,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1197,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1060,"license":{"key":"gpl-2.0","name":"GNU General Public License v2.0","spdx_id":"GPL-2.0","url":"https://api.github.com/licenses/gpl-2.0","node_id":"MDc6TGljZW5zZTg="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["closember","code-quality","hacktoberfest","linter","pep8","static-analysis","static-code-analysis"],"visibility":"public","forks":1197,"open_issues":1060,"watchers":5591,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Bug description\r\n\r\nUsing the latest release (2.13.6) we get this crash in pylint. It works with the previous version. This was ran on https://github.com/equinor/ert according to the github action in https://github.com/equinor/ert/blob/main/.github/workflows/style.yml\r\n\r\nThis happens while checking several different files. Only including the one report, as they are all reporting the same error.\r\n\r\n\r\n### Configuration\r\n\r\n_No response_\r\n\r\n### Command used\r\n\r\n```shell\r\npylint ert ert3\r\n```\r\n\r\n\r\n### Pylint output\r\n\r\n```shell\r\n2022-04-20T08:48:25.7211802Z Exception on node <Name.record l.406 at 0x7f764e8a9040> in file '/home/runner/work/ert/ert/ert/storage/_storage.py'\r\n2022-04-20T08:48:25.7213396Z Can't write the issue template for the crash in /home/runner/.cache/pylint/pylint-crash-2022-04-20-08.txt because of: '[Errno 2] No such file or directory: '/home/runner/.cache/pylint/pylint-crash-2022-04-20-08.txt''\r\n2022-04-20T08:48:25.7214301Z Here's the content anyway:\r\n2022-04-20T08:48:25.7214936Z First, please verify that the bug is not already filled:\r\n2022-04-20T08:48:25.7215678Z https://github.com/PyCQA/pylint/issues/\r\n2022-04-20T08:48:25.7215907Z \r\n2022-04-20T08:48:25.7216011Z Then create a new crash issue:\r\n2022-04-20T08:48:25.7260608Z https://github.com/PyCQA/pylint/issues/new?assignees=&labels=crash%2Cneeds+triage&template=BUG-REPORT.yml\r\n2022-04-20T08:48:25.7263107Z \r\n2022-04-20T08:48:25.7265187Z \r\n2022-04-20T08:48:25.7267354Z Issue title:\r\n2022-04-20T08:48:25.7270018Z Crash ``'Values' object has no attribute 'additional_builtins'`` (if possible, be more specific about what made pylint crash)\r\n2022-04-20T08:48:25.7272491Z Content:\r\n2022-04-20T08:48:25.7275004Z When parsing the following file:\r\n2022-04-20T08:48:25.7277332Z \r\n2022-04-20T08:48:25.7279586Z <!--\r\n2022-04-20T08:48:25.7282064Z  If sharing the code is not an option, please state so,\r\n2022-04-20T08:48:25.7284583Z  but providing only the stacktrace would still be helpful.\r\n2022-04-20T08:48:25.7287174Z  -->\r\n2022-04-20T08:48:25.7289401Z \r\n2022-04-20T08:48:25.7291546Z \r\n2022-04-20T08:48:25.7293835Z import io\r\n2022-04-20T08:48:25.7296113Z import logging\r\n2022-04-20T08:48:25.7299621Z import json\r\n2022-04-20T08:48:25.7303474Z from functools import partial\r\n2022-04-20T08:48:25.7306300Z from http import HTTPStatus\r\n2022-04-20T08:48:25.7308610Z from typing import (\r\n2022-04-20T08:48:25.7310805Z     Any,\r\n2022-04-20T08:48:25.7312971Z     Awaitable,\r\n2022-04-20T08:48:25.7315421Z     Dict,\r\n2022-04-20T08:48:25.7317736Z     Iterable,\r\n2022-04-20T08:48:25.7320050Z     List,\r\n2022-04-20T08:48:25.7322527Z     Optional,\r\n2022-04-20T08:48:25.7324876Z     Set,\r\n2022-04-20T08:48:25.7327208Z     Tuple,\r\n2022-04-20T08:48:25.7329214Z     Union,\r\n2022-04-20T08:48:25.7331228Z )\r\n2022-04-20T08:48:25.7333246Z import httpx\r\n2022-04-20T08:48:25.7334983Z import pandas as pd\r\n2022-04-20T08:48:25.7335366Z import ert\r\n2022-04-20T08:48:25.7335790Z from ert_shared.async_utils import get_event_loop\r\n2022-04-20T08:48:25.7336244Z from ert_shared.services import Storage\r\n2022-04-20T08:48:25.7336570Z \r\n2022-04-20T08:48:25.7336841Z logger = logging.getLogger(__name__)\r\n2022-04-20T08:48:25.7337339Z read_csv = partial(pd.read_csv, index_col=0, float_precision=\"round_trip\")\r\n2022-04-20T08:48:25.7337710Z \r\n2022-04-20T08:48:25.7337988Z _ENSEMBLE_RECORDS = \"__ensemble_records__\"\r\n2022-04-20T08:48:25.7338429Z _SPECIAL_KEYS = (_ENSEMBLE_RECORDS,)\r\n2022-04-20T08:48:25.7338726Z \r\n2022-04-20T08:48:25.7339066Z # Character used as separator for parameter record names. This is used as a\r\n2022-04-20T08:48:25.7339812Z # workaround for webviz-ert, which expects each parameter record to have exactly\r\n2022-04-20T08:48:25.7340329Z # one value per realisation.\r\n2022-04-20T08:48:25.7340948Z _PARAMETER_RECORD_SEPARATOR = \".\"\r\n2022-04-20T08:48:25.7341492Z _OCTET_STREAM = \"application/octet-stream\"\r\n2022-04-20T08:48:25.7341921Z _CSV = \"text/csv\"\r\n2022-04-20T08:48:25.7342206Z \r\n2022-04-20T08:48:25.7342352Z \r\n2022-04-20T08:48:25.7342690Z class StorageRecordTransmitter(ert.data.RecordTransmitter):\r\n2022-04-20T08:48:25.7343242Z     def __init__(self, name: str, storage_url: str, iens: Optional[int] = None):\r\n2022-04-20T08:48:25.7343779Z         super().__init__(ert.data.RecordTransmitterType.ert_storage)\r\n2022-04-20T08:48:25.7344255Z         self._name: str = name\r\n2022-04-20T08:48:25.7344674Z         self._uri = f\"{storage_url}/{name}\"\r\n2022-04-20T08:48:25.7345112Z         self._real_id: Optional[int] = iens\r\n2022-04-20T08:48:25.7345428Z \r\n2022-04-20T08:48:25.7346012Z     async def _get_recordtree_transmitters(\r\n2022-04-20T08:48:25.7346398Z         self,\r\n2022-04-20T08:48:25.7346765Z         trans_records: Dict[str, str],\r\n2022-04-20T08:48:25.7347174Z         record_type: ert.data.RecordType,\r\n2022-04-20T08:48:25.7347565Z         path: Optional[str] = None,\r\n2022-04-20T08:48:25.7348097Z     ) -> Dict[str, ert.data.RecordTransmitter]:\r\n2022-04-20T08:48:25.7348565Z         _storage_url = self._uri[: self._uri.rfind(\"/\")]\r\n2022-04-20T08:48:25.7349027Z         transmitters: Dict[str, ert.data.RecordTransmitter] = {}\r\n2022-04-20T08:48:25.7350313Z         for record_path, record_uri in trans_records.items():\r\n2022-04-20T08:48:25.7350940Z             if path is None or path in record_path:\r\n2022-04-20T08:48:25.7351471Z                 record_name = record_path.split(\"/\")[-1]\r\n2022-04-20T08:48:25.7351855Z                 transmitter = StorageRecordTransmitter(record_name, _storage_url)\r\n2022-04-20T08:48:25.7352234Z                 transmitter.set_transmitted(record_uri, record_type)\r\n2022-04-20T08:48:25.7352684Z                 transmitters[record_path] = transmitter\r\n2022-04-20T08:48:25.7352946Z         return transmitters\r\n2022-04-20T08:48:25.7353090Z \r\n2022-04-20T08:48:25.7353156Z     @property\r\n2022-04-20T08:48:25.7353428Z     def uri(self) -> str:\r\n2022-04-20T08:48:25.7353666Z         if not self.is_transmitted():\r\n2022-04-20T08:48:25.7353973Z             raise RuntimeError(f\"Record {self._name} not transmitted\")\r\n2022-04-20T08:48:25.7354235Z         return self._uri\r\n2022-04-20T08:48:25.7354369Z \r\n2022-04-20T08:48:25.7354448Z     @property\r\n2022-04-20T08:48:25.7354793Z     def record_type(self) -> Optional[ert.data.RecordType]:\r\n2022-04-20T08:48:25.7355067Z         assert self.is_transmitted()\r\n2022-04-20T08:48:25.7355313Z         return self._record_type\r\n2022-04-20T08:48:25.7355454Z \r\n2022-04-20T08:48:25.7355919Z     def set_transmitted(self, uri: str, record_type: ert.data.RecordType) -> None:\r\n2022-04-20T08:48:25.7356269Z         self._set_transmitted_state(uri, record_type)\r\n2022-04-20T08:48:25.7356442Z \r\n2022-04-20T08:48:25.7356749Z     async def _transmit_numerical_record(self, record: ert.data.NumericalRecord) -> str:\r\n2022-04-20T08:48:25.7357073Z         url = f\"{self._uri}/matrix\"\r\n2022-04-20T08:48:25.7357312Z         if self._real_id is not None:\r\n2022-04-20T08:48:25.7357722Z             url = f\"{url}?realization_index={self._real_id}\"\r\n2022-04-20T08:48:25.7358076Z             self._uri = f\"{self._uri}?realization_index={self._real_id}\"\r\n2022-04-20T08:48:25.7358392Z         await add_record(url, record)\r\n2022-04-20T08:48:25.7358637Z         return self._uri\r\n2022-04-20T08:48:25.7358786Z \r\n2022-04-20T08:48:25.7359091Z     async def _transmit_blob_record(self, record: ert.data.BlobRecord) -> str:\r\n2022-04-20T08:48:25.7359700Z         url = f\"{self._uri}/file\"\r\n2022-04-20T08:48:25.7359968Z         if self._real_id is not None:\r\n2022-04-20T08:48:25.7360273Z             url = f\"{url}?realization_index={self._real_id}\"\r\n2022-04-20T08:48:25.7360897Z             self._uri = f\"{self._uri}?realization_index={self._real_id}\"\r\n2022-04-20T08:48:25.7361181Z         await add_record(url, record)\r\n2022-04-20T08:48:25.7361395Z         return self._uri\r\n2022-04-20T08:48:25.7361525Z \r\n2022-04-20T08:48:25.7361635Z     async def _transmit_recordtree(\r\n2022-04-20T08:48:25.7361976Z         self, record: Union[ert.data.NumericalRecordTree, ert.data.BlobRecordTree]\r\n2022-04-20T08:48:25.7362310Z     ) -> str:\r\n2022-04-20T08:48:25.7362522Z         data: Dict[str, str] = {}\r\n2022-04-20T08:48:25.7362787Z         storage_url = self._uri[: self._uri.rfind(\"/\")]\r\n2022-04-20T08:48:25.7363081Z         for record_path in record.flat_record_dict:\r\n2022-04-20T08:48:25.7363429Z             record_name = record_path.split(\"/\")[-1]\r\n2022-04-20T08:48:25.7363730Z             transmitter = StorageRecordTransmitter(\r\n2022-04-20T08:48:25.7364034Z                 record_name, storage_url, iens=self._real_id\r\n2022-04-20T08:48:25.7364260Z             )\r\n2022-04-20T08:48:25.7364551Z             await transmitter.transmit_record(record.flat_record_dict[record_path])\r\n2022-04-20T08:48:25.7364995Z             data[record_path] = transmitter._uri\r\n2022-04-20T08:48:25.7365246Z         await self._transmit_blob_record(\r\n2022-04-20T08:48:25.7365650Z             ert.data.BlobRecord(data=json.dumps(data).encode(\"utf-8\"))\r\n2022-04-20T08:48:25.7365913Z         )\r\n2022-04-20T08:48:25.7366172Z         # Since metadata is stored only for record with real_id == 0, within async\r\n2022-04-20T08:48:25.7366538Z         # processing we make sure that only the same realization write the metadata\r\n2022-04-20T08:48:25.7366831Z         if self._real_id == 0:\r\n2022-04-20T08:48:25.7367065Z             await add_record_metadata(\r\n2022-04-20T08:48:25.7367350Z                 storage_url, self._name, {\"record_type\": record.record_type}\r\n2022-04-20T08:48:25.7367608Z             )\r\n2022-04-20T08:48:25.7367808Z         return self._uri\r\n2022-04-20T08:48:25.7367939Z \r\n2022-04-20T08:48:25.7368185Z     async def _load_numerical_record(self) -> ert.data.NumericalRecord:\r\n2022-04-20T08:48:25.7368491Z         assert self._record_type\r\n2022-04-20T08:48:25.7370009Z         record = await load_record(self._uri, self._record_type)\r\n2022-04-20T08:48:25.7370442Z         if not isinstance(record, ert.data.NumericalRecord):\r\n2022-04-20T08:48:25.7370830Z             raise TypeError(f\"unexpected blobrecord for numerical {self._uri}\")\r\n2022-04-20T08:48:25.7371152Z         return record\r\n2022-04-20T08:48:25.7371298Z \r\n2022-04-20T08:48:25.7371606Z     async def _load_blob_record(self) -> ert.data.BlobRecord:\r\n2022-04-20T08:48:25.7371908Z         assert self._record_type\r\n2022-04-20T08:48:25.7372223Z         record = await load_record(self._uri, self._record_type)\r\n2022-04-20T08:48:25.7372809Z         if not isinstance(record, ert.data.BlobRecord):\r\n2022-04-20T08:48:25.7373155Z             raise TypeError(f\"unexpected numerical record for blob {self._uri}\")\r\n2022-04-20T08:48:25.7373452Z         return record\r\n2022-04-20T08:48:25.7373754Z \r\n2022-04-20T08:48:25.7373765Z \r\n2022-04-20T08:48:25.7373913Z async def _get_record_storage_transmitters(\r\n2022-04-20T08:48:25.7374183Z     records_url: str,\r\n2022-04-20T08:48:25.7374495Z     record_name: str,\r\n2022-04-20T08:48:25.7374734Z     record_source: Optional[str] = None,\r\n2022-04-20T08:48:25.7374999Z     ensemble_size: Optional[int] = None,\r\n2022-04-20T08:48:25.7375435Z ) -> Tuple[List[StorageRecordTransmitter], ert.data.RecordCollectionType]:\r\n2022-04-20T08:48:25.7375763Z     if record_source is None:\r\n2022-04-20T08:48:25.7376000Z         record_source = record_name\r\n2022-04-20T08:48:25.7376237Z     uri = f\"{records_url}/{record_source}\"\r\n2022-04-20T08:48:25.7376509Z     metadata = await get_record_metadata(uri)\r\n2022-04-20T08:48:25.7376779Z     record_type = metadata[\"record_type\"]\r\n2022-04-20T08:48:25.7377107Z     collection_type: ert.data.RecordCollectionType = metadata[\"collection_type\"]\r\n2022-04-20T08:48:25.7377422Z     uris = metadata[\"uris\"]\r\n2022-04-20T08:48:25.7377720Z     # We expect the number of uris in the record metadata to match the size of\r\n2022-04-20T08:48:25.7378060Z     # the ensemble or be equal to 1, in the case of an uniform record\r\n2022-04-20T08:48:25.7378330Z     if ensemble_size is not None:\r\n2022-04-20T08:48:25.7378673Z         if collection_type == ert.data.RecordCollectionType.UNIFORM and len(uris) != 1:\r\n2022-04-20T08:48:25.7379028Z             raise ert.exceptions.ErtError(\r\n2022-04-20T08:48:25.7379310Z                 \"Ensemble is uniform but stores multiple records\"\r\n2022-04-20T08:48:25.7379554Z             )\r\n2022-04-20T08:48:25.7379740Z         if (\r\n2022-04-20T08:48:25.7380014Z             collection_type != ert.data.RecordCollectionType.UNIFORM\r\n2022-04-20T08:48:25.7380323Z             and len(uris) != ensemble_size\r\n2022-04-20T08:48:25.7381016Z         ):\r\n2022-04-20T08:48:25.7381268Z             raise ert.exceptions.ErtError(\r\n2022-04-20T08:48:25.7381598Z                 f\"Ensemble size {ensemble_size} does not match stored record ensemble \"\r\n2022-04-20T08:48:25.7381945Z                 + f\"for {record_name} of size {len(uris)}\"\r\n2022-04-20T08:48:25.7382189Z             )\r\n2022-04-20T08:48:25.7382438Z \r\n2022-04-20T08:48:25.7382538Z     transmitters = []\r\n2022-04-20T08:48:25.7382776Z     for record_uri in uris:\r\n2022-04-20T08:48:25.7383104Z         transmitter = StorageRecordTransmitter(record_source, records_url)\r\n2022-04-20T08:48:25.7383593Z         # Record data has already been stored, now just setting the transmitter uri and\r\n2022-04-20T08:48:25.7383881Z         # record type\r\n2022-04-20T08:48:25.7384151Z         transmitter.set_transmitted(record_uri, record_type)\r\n2022-04-20T08:48:25.7384446Z         transmitters.append(transmitter)\r\n2022-04-20T08:48:25.7384595Z \r\n2022-04-20T08:48:25.7384717Z     return transmitters, collection_type\r\n2022-04-20T08:48:25.7384876Z \r\n2022-04-20T08:48:25.7384882Z \r\n2022-04-20T08:48:25.7385005Z async def get_record_storage_transmitters(\r\n2022-04-20T08:48:25.7385248Z     records_url: str,\r\n2022-04-20T08:48:25.7385444Z     record_name: str,\r\n2022-04-20T08:48:25.7385686Z     record_source: Optional[str] = None,\r\n2022-04-20T08:48:25.7385944Z     ensemble_size: Optional[int] = None,\r\n2022-04-20T08:48:25.7386335Z ) -> Dict[int, Dict[str, ert.data.RecordTransmitter]]:\r\n2022-04-20T08:48:25.7386686Z     transmitters, collection_type = await _get_record_storage_transmitters(\r\n2022-04-20T08:48:25.7387027Z         records_url, record_name, record_source, ensemble_size\r\n2022-04-20T08:48:25.7387270Z     )\r\n2022-04-20T08:48:25.7387435Z     if (\r\n2022-04-20T08:48:25.7387641Z         ensemble_size is not None\r\n2022-04-20T08:48:25.7387956Z         and collection_type == ert.data.RecordCollectionType.UNIFORM\r\n2022-04-20T08:48:25.7388217Z     ):\r\n2022-04-20T08:48:25.7388492Z         return {iens: {record_name: transmitters[0]} for iens in range(ensemble_size)}\r\n2022-04-20T08:48:25.7388765Z     return {\r\n2022-04-20T08:48:25.7388975Z         iens: {record_name: transmitter}\r\n2022-04-20T08:48:25.7389257Z         for iens, transmitter in enumerate(transmitters)\r\n2022-04-20T08:48:25.7389587Z     }\r\n2022-04-20T08:48:25.7389710Z \r\n2022-04-20T08:48:25.7389715Z \r\n2022-04-20T08:48:25.7389950Z def _get(url: str, headers: Dict[str, Any]) -> httpx.Response:\r\n2022-04-20T08:48:25.7390244Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7390532Z         return session.get(url, headers=headers, timeout=60)\r\n2022-04-20T08:48:25.7390708Z \r\n2022-04-20T08:48:25.7390714Z \r\n2022-04-20T08:48:25.7390823Z async def _get_from_server_async(\r\n2022-04-20T08:48:25.7391026Z     url: str,\r\n2022-04-20T08:48:25.7391238Z     headers: Dict[str, str],\r\n2022-04-20T08:48:25.7391451Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7391694Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7391828Z \r\n2022-04-20T08:48:25.7391926Z     loop = get_event_loop()\r\n2022-04-20T08:48:25.7392065Z \r\n2022-04-20T08:48:25.7392236Z     # Using sync code because one of the httpx dependencies (anyio) throws an\r\n2022-04-20T08:48:25.7392710Z     # AttributeError: module 'anyio._backends._asyncio' has no attribute 'current_time'\r\n2022-04-20T08:48:25.7393073Z     # Refactor and try to use aiohttp or httpx once the issue above is fixed\r\n2022-04-20T08:48:25.7393368Z     future = loop.run_in_executor(\r\n2022-04-20T08:48:25.7393703Z         None,\r\n2022-04-20T08:48:25.7393919Z         partial(_get, url, headers),\r\n2022-04-20T08:48:25.7394144Z     )\r\n2022-04-20T08:48:25.7394346Z     resp = await future\r\n2022-04-20T08:48:25.7394485Z \r\n2022-04-20T08:48:25.7394598Z     if resp.status_code != HTTPStatus.OK:\r\n2022-04-20T08:48:25.7394937Z         logger.error(\"Failed to fetch from %s. Response: %s\", url, resp.text)\r\n2022-04-20T08:48:25.7395286Z         if resp.status_code == HTTPStatus.NOT_FOUND:\r\n2022-04-20T08:48:25.7395626Z             raise ert.exceptions.ElementMissingError(resp.text)\r\n2022-04-20T08:48:25.7395989Z         raise ert.exceptions.StorageError(resp.text)\r\n2022-04-20T08:48:25.7396384Z     return resp\r\n2022-04-20T08:48:25.7396519Z \r\n2022-04-20T08:48:25.7396525Z \r\n2022-04-20T08:48:25.7396817Z def _post(url: str, headers: Dict[str, Any], **kwargs: Any) -> httpx.Response:\r\n2022-04-20T08:48:25.7397142Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7397529Z         return session.post(url=url, headers=headers, timeout=60, **kwargs)\r\n2022-04-20T08:48:25.7397853Z \r\n2022-04-20T08:48:25.7397859Z \r\n2022-04-20T08:48:25.7397977Z async def _post_to_server_async(\r\n2022-04-20T08:48:25.7398218Z     url: str,\r\n2022-04-20T08:48:25.7398461Z     headers: Optional[Dict[str, str]] = None,\r\n2022-04-20T08:48:25.7398838Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7399606Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7399875Z     if headers is None:\r\n2022-04-20T08:48:25.7400117Z         headers = {}\r\n2022-04-20T08:48:25.7400262Z \r\n2022-04-20T08:48:25.7400373Z     loop = get_event_loop()\r\n2022-04-20T08:48:25.7400700Z     # Using sync code because one of the httpx dependencies (anyio) throws an\r\n2022-04-20T08:48:25.7401285Z     # AttributeError: module 'anyio._backends._asyncio' has no attribute 'current_time'\r\n2022-04-20T08:48:25.7401715Z     # Refactor and try to use aiohttp or httpx once the issue above is fixed\r\n2022-04-20T08:48:25.7402043Z     future = loop.run_in_executor(\r\n2022-04-20T08:48:25.7402289Z         None,\r\n2022-04-20T08:48:25.7402615Z         partial(_post, url, headers, **kwargs),\r\n2022-04-20T08:48:25.7402874Z     )\r\n2022-04-20T08:48:25.7403077Z     resp = await future\r\n2022-04-20T08:48:25.7403226Z \r\n2022-04-20T08:48:25.7403363Z     if resp.status_code != HTTPStatus.OK:\r\n2022-04-20T08:48:25.7403837Z         logger.error(\"Failed to post to %s. Response: %s\", url, resp.text)\r\n2022-04-20T08:48:25.7404181Z         if resp.status_code == HTTPStatus.CONFLICT:\r\n2022-04-20T08:48:25.7404548Z             raise ert.exceptions.ElementExistsError(resp.text)\r\n2022-04-20T08:48:25.7404922Z         raise ert.exceptions.StorageError(resp.text)\r\n2022-04-20T08:48:25.7405191Z     return resp\r\n2022-04-20T08:48:25.7405326Z \r\n2022-04-20T08:48:25.7405332Z \r\n2022-04-20T08:48:25.7405622Z def _put(url: str, headers: Dict[str, Any], **kwargs: Any) -> httpx.Response:\r\n2022-04-20T08:48:25.7405960Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7406479Z         return session.put(url=url, headers=headers, timeout=60, **kwargs)\r\n2022-04-20T08:48:25.7406693Z \r\n2022-04-20T08:48:25.7406721Z \r\n2022-04-20T08:48:25.7406822Z async def _put_to_server_async(\r\n2022-04-20T08:48:25.7407062Z     url: str,\r\n2022-04-20T08:48:25.7407292Z     headers: Dict[str, str],\r\n2022-04-20T08:48:25.7407517Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7407810Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7408058Z     loop = get_event_loop()\r\n2022-04-20T08:48:25.7408210Z \r\n2022-04-20T08:48:25.7408383Z     # Using sync code because one of the httpx dependencies (anyio) throws an\r\n2022-04-20T08:48:25.7408903Z     # AttributeError: module 'anyio._backends._asyncio' has no attribute 'current_time'\r\n2022-04-20T08:48:25.7409315Z     # Refactor and try to use aiohttp or httpx once the issue above is fixed\r\n2022-04-20T08:48:25.7409643Z     future = loop.run_in_executor(\r\n2022-04-20T08:48:25.7409868Z         None,\r\n2022-04-20T08:48:25.7410127Z         partial(_put, url, headers, **kwargs),\r\n2022-04-20T08:48:25.7410376Z     )\r\n2022-04-20T08:48:25.7410576Z     resp = await future\r\n2022-04-20T08:48:25.7410721Z \r\n2022-04-20T08:48:25.7410854Z     if resp.status_code != HTTPStatus.OK:\r\n2022-04-20T08:48:25.7411206Z         logger.error(\"Failed to post to %s. Response: %s\", url, resp.text)\r\n2022-04-20T08:48:25.7411652Z         if resp.status_code == HTTPStatus.CONFLICT:\r\n2022-04-20T08:48:25.7412005Z             raise ert.exceptions.ElementExistsError(resp.text)\r\n2022-04-20T08:48:25.7412369Z         raise ert.exceptions.StorageError(resp.text)\r\n2022-04-20T08:48:25.7412563Z \r\n2022-04-20T08:48:25.7412649Z     return resp\r\n2022-04-20T08:48:25.7412764Z \r\n2022-04-20T08:48:25.7412785Z \r\n2022-04-20T08:48:25.7412870Z def _set_content_header(\r\n2022-04-20T08:48:25.7413093Z     header: str,\r\n2022-04-20T08:48:25.7413340Z     record_type: ert.data.RecordType,\r\n2022-04-20T08:48:25.7413613Z     headers: Optional[Dict[str, str]] = None,\r\n2022-04-20T08:48:25.7413923Z ) -> Dict[str, str]:\r\n2022-04-20T08:48:25.7414374Z     content_type = _OCTET_STREAM if record_type == ert.data.RecordType.BYTES else _CSV\r\n2022-04-20T08:48:25.7414705Z     if headers is None:\r\n2022-04-20T08:48:25.7414938Z         return {header: content_type}\r\n2022-04-20T08:48:25.7415316Z     headers_ = headers.copy()\r\n2022-04-20T08:48:25.7415577Z     headers_[header] = content_type\r\n2022-04-20T08:48:25.7415802Z     return headers_\r\n2022-04-20T08:48:25.7415940Z \r\n2022-04-20T08:48:25.7415946Z \r\n2022-04-20T08:48:25.7416341Z async def add_record(url: str, record: ert.data.Record) -> None:\r\n2022-04-20T08:48:25.7416659Z     assert record.record_type\r\n2022-04-20T08:48:25.7416966Z     if record.record_type != ert.data.RecordType.BYTES:\r\n2022-04-20T08:48:25.7417279Z         headers = _set_content_header(\r\n2022-04-20T08:48:25.7417689Z             header=\"content-type\", record_type=record.record_type\r\n2022-04-20T08:48:25.7417954Z         )\r\n2022-04-20T08:48:25.7418230Z         data = pd.DataFrame([record.data]).to_csv().encode()\r\n2022-04-20T08:48:25.7418597Z         await _post_to_server_async(url=url, headers=headers, data=data)\r\n2022-04-20T08:48:25.7418890Z     else:\r\n2022-04-20T08:48:25.7419129Z         assert isinstance(record.data, bytes)\r\n2022-04-20T08:48:25.7419543Z         data = {\"file\": io.BytesIO(record.data)}\r\n2022-04-20T08:48:25.7419850Z         await _post_to_server_async(url=url, files=data)\r\n2022-04-20T08:48:25.7420029Z \r\n2022-04-20T08:48:25.7420036Z \r\n2022-04-20T08:48:25.7420316Z def _interpret_series(row: pd.Series, record_type: ert.data.RecordType) -> Any:\r\n2022-04-20T08:48:25.7421050Z     if record_type not in {item.value for item in ert.data.RecordType}:\r\n2022-04-20T08:48:25.7421370Z         raise ValueError(\r\n2022-04-20T08:48:25.7421705Z             f\"Unexpected record type when loading numerical record: {record_type}\"\r\n2022-04-20T08:48:25.7421991Z         )\r\n2022-04-20T08:48:25.7422114Z \r\n2022-04-20T08:48:25.7422294Z     if record_type == ert.data.RecordType.MAPPING_INT_FLOAT:\r\n2022-04-20T08:48:25.7422647Z         return {int(k): v for k, v in row.to_dict().items()}\r\n2022-04-20T08:48:25.7422890Z     return (\r\n2022-04-20T08:48:25.7423213Z         row.to_list()\r\n2022-04-20T08:48:25.7423628Z         if record_type == ert.data.RecordType.LIST_FLOAT\r\n2022-04-20T08:48:25.7423900Z         else row.to_dict()\r\n2022-04-20T08:48:25.7424111Z     )\r\n2022-04-20T08:48:25.7424225Z \r\n2022-04-20T08:48:25.7424231Z \r\n2022-04-20T08:48:25.7424562Z async def load_record(url: str, record_type: ert.data.RecordType) -> ert.data.Record:\r\n2022-04-20T08:48:25.7424889Z     if record_type in (\r\n2022-04-20T08:48:25.7425153Z         ert.data.RecordType.NUMERICAL_TREE,\r\n2022-04-20T08:48:25.7425453Z         ert.data.RecordType.BLOB_TREE,\r\n2022-04-20T08:48:25.7425692Z     ):\r\n2022-04-20T08:48:25.7425896Z         headers = _set_content_header(\r\n2022-04-20T08:48:25.7426217Z             header=\"accept\", record_type=ert.data.RecordType.BYTES\r\n2022-04-20T08:48:25.7426491Z         )\r\n2022-04-20T08:48:25.7426665Z     else:\r\n2022-04-20T08:48:25.7426957Z         headers = _set_content_header(header=\"accept\", record_type=record_type)\r\n2022-04-20T08:48:25.7427336Z     response = await _get_from_server_async(url=url, headers=headers)\r\n2022-04-20T08:48:25.7427629Z     content = response.content\r\n2022-04-20T08:48:25.7427875Z     if record_type in (\r\n2022-04-20T08:48:25.7428135Z         ert.data.RecordType.LIST_FLOAT,\r\n2022-04-20T08:48:25.7428433Z         ert.data.RecordType.MAPPING_STR_FLOAT,\r\n2022-04-20T08:48:25.7428757Z         ert.data.RecordType.MAPPING_INT_FLOAT,\r\n2022-04-20T08:48:25.7429006Z     ):\r\n2022-04-20T08:48:25.7429278Z         dataframe: pd.DataFrame = read_csv(io.BytesIO(content))\r\n2022-04-20T08:48:25.7429725Z         for _, row in dataframe.iterrows():  # pylint: disable=no-member\r\n2022-04-20T08:48:25.7430063Z             return ert.data.NumericalRecord(\r\n2022-04-20T08:48:25.7430399Z                 data=_interpret_series(row=row, record_type=record_type)\r\n2022-04-20T08:48:25.7430656Z             )\r\n2022-04-20T08:48:25.7430908Z     return ert.data.BlobRecord(data=content)\r\n2022-04-20T08:48:25.7431084Z \r\n2022-04-20T08:48:25.7431090Z \r\n2022-04-20T08:48:25.7431341Z async def get_record_metadata(record_url: str) -> Dict[Any, Any]:\r\n2022-04-20T08:48:25.7431739Z     # TODO once storage returns proper record metadata information add proper support\r\n2022-04-20T08:48:25.7432145Z     # for metadata\r\n2022-04-20T08:48:25.7432420Z     url = f\"{record_url}/userdata?realization_index=0\"\r\n2022-04-20T08:48:25.7432728Z     resp = await _get_from_server_async(url, {})\r\n2022-04-20T08:48:25.7432993Z     ret: Dict[Any, Any] = resp.json()\r\n2022-04-20T08:48:25.7433231Z     return ret\r\n2022-04-20T08:48:25.7433363Z \r\n2022-04-20T08:48:25.7433369Z \r\n2022-04-20T08:48:25.7433479Z async def add_record_metadata(\r\n2022-04-20T08:48:25.7433767Z     record_urls: str, record_name: str, metadata: Dict[Any, Any]\r\n2022-04-20T08:48:25.7434086Z ) -> None:\r\n2022-04-20T08:48:25.7434369Z     url = f\"{record_urls}/{record_name}/userdata?realization_index=0\"\r\n2022-04-20T08:48:25.7434704Z     await _put_to_server_async(url, {}, json=metadata)\r\n2022-04-20T08:48:25.7434869Z \r\n2022-04-20T08:48:25.7434875Z \r\n2022-04-20T08:48:25.7435021Z async def transmit_awaitable_record_collection(\r\n2022-04-20T08:48:25.7435363Z     record_awaitable: Awaitable[ert.data.RecordCollection],\r\n2022-04-20T08:48:25.7435655Z     record_name: str,\r\n2022-04-20T08:48:25.7435870Z     workspace_name: str,\r\n2022-04-20T08:48:25.7436138Z     experiment_name: Optional[str] = None,\r\n2022-04-20T08:48:25.7436540Z ) -> Dict[int, Dict[str, ert.data.RecordTransmitter]]:\r\n2022-04-20T08:48:25.7436838Z     record_coll = await record_awaitable\r\n2022-04-20T08:48:25.7437126Z     return await transmit_record_collection(\r\n2022-04-20T08:48:25.7437454Z         record_coll, record_name, workspace_name, experiment_name\r\n2022-04-20T08:48:25.7437721Z     )\r\n2022-04-20T08:48:25.7437822Z \r\n2022-04-20T08:48:25.7437828Z \r\n2022-04-20T08:48:25.7437948Z async def transmit_record_collection(\r\n2022-04-20T08:48:25.7438242Z     record_coll: ert.data.RecordCollection,\r\n2022-04-20T08:48:25.7438505Z     record_name: str,\r\n2022-04-20T08:48:25.7438720Z     workspace_name: str,\r\n2022-04-20T08:48:25.7438984Z     experiment_name: Optional[str] = None,\r\n2022-04-20T08:48:25.7439457Z ) -> Dict[int, Dict[str, ert.data.RecordTransmitter]]:\r\n2022-04-20T08:48:25.7439751Z     record: ert.data.Record\r\n2022-04-20T08:48:25.7440009Z     metadata: Dict[Any, Any] = {\r\n2022-04-20T08:48:25.7440292Z         \"record_type\": record_coll.record_type,\r\n2022-04-20T08:48:25.7440591Z         \"collection_type\": record_coll.collection_type,\r\n2022-04-20T08:48:25.7440854Z         \"uris\": [],\r\n2022-04-20T08:48:25.7441053Z     }\r\n2022-04-20T08:48:25.7441167Z \r\n2022-04-20T08:48:25.7441351Z     records_url = await get_records_url_async(workspace_name, experiment_name)\r\n2022-04-20T08:48:25.7441668Z     if experiment_name is not None:\r\n2022-04-20T08:48:25.7442006Z         ensemble_id = await _get_ensemble_id_async(workspace_name, experiment_name)\r\n2022-04-20T08:48:25.7442386Z         ensemble_size = await _get_ensemble_size(ensemble_id=ensemble_id)\r\n2022-04-20T08:48:25.7442647Z     else:\r\n2022-04-20T08:48:25.7442876Z         ensemble_size = len(record_coll)\r\n2022-04-20T08:48:25.7443037Z \r\n2022-04-20T08:48:25.7443160Z     if len(record_coll) != ensemble_size:\r\n2022-04-20T08:48:25.7443427Z         raise ert.exceptions.ErtError(\r\n2022-04-20T08:48:25.7443760Z             f\"Experiment ensemble size {ensemble_size} does not match\"\r\n2022-04-20T08:48:25.7444074Z             f\" data size {len(record_coll)}\"\r\n2022-04-20T08:48:25.7444305Z         )\r\n2022-04-20T08:48:25.7444408Z \r\n2022-04-20T08:48:25.7444558Z     # Handle special case of a uniform record collection\r\n2022-04-20T08:48:25.7444947Z     if record_coll.collection_type == ert.data.RecordCollectionType.UNIFORM:\r\n2022-04-20T08:48:25.7445297Z         record = record_coll.records[0]\r\n2022-04-20T08:48:25.7445615Z         transmitter = ert.storage.StorageRecordTransmitter(\r\n2022-04-20T08:48:25.7445972Z             name=record_name, storage_url=records_url, iens=0\r\n2022-04-20T08:48:25.7446223Z         )\r\n2022-04-20T08:48:25.7446512Z         await transmitter.transmit_record(record)\r\n2022-04-20T08:48:25.7446828Z         metadata[\"uris\"].append(transmitter.uri)\r\n2022-04-20T08:48:25.7447165Z         await add_record_metadata(records_url, record_name, metadata)\r\n2022-04-20T08:48:25.7447541Z         return {iens: {record_name: transmitter} for iens in range(ensemble_size)}\r\n2022-04-20T08:48:25.7447828Z \r\n2022-04-20T08:48:25.7448014Z     transmitters: Dict[int, Dict[str, ert.data.RecordTransmitter]] = {}\r\n2022-04-20T08:48:25.7448328Z     transmitter_list = []\r\n2022-04-20T08:48:25.7448615Z     for iens, record in enumerate(record_coll.records):\r\n2022-04-20T08:48:25.7448981Z         transmitter = StorageRecordTransmitter(record_name, records_url, iens=iens)\r\n2022-04-20T08:48:25.7449350Z         await transmitter.transmit_record(record)\r\n2022-04-20T08:48:25.7449787Z         transmitter_list.append(transmitter)\r\n2022-04-20T08:48:25.7450091Z         transmitters[iens] = {record_name: transmitter}\r\n2022-04-20T08:48:25.7450278Z \r\n2022-04-20T08:48:25.7450406Z     for transmitter in transmitter_list:\r\n2022-04-20T08:48:25.7450712Z         metadata[\"uris\"].append(transmitter.uri)\r\n2022-04-20T08:48:25.7451058Z     await add_record_metadata(records_url, record_name, metadata)\r\n2022-04-20T08:48:25.7451263Z \r\n2022-04-20T08:48:25.7451350Z     return transmitters\r\n2022-04-20T08:48:25.7451501Z \r\n2022-04-20T08:48:25.7451508Z \r\n2022-04-20T08:48:25.7451604Z def _get_from_server(\r\n2022-04-20T08:48:25.7451829Z     path: str,\r\n2022-04-20T08:48:25.7452079Z     headers: Optional[Dict[Any, Any]] = None,\r\n2022-04-20T08:48:25.7452350Z     status_code: int = 200,\r\n2022-04-20T08:48:25.7452582Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7452883Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7453099Z     if not headers:\r\n2022-04-20T08:48:25.7453321Z         headers = {}\r\n2022-04-20T08:48:25.7453458Z \r\n2022-04-20T08:48:25.7453580Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7453898Z         resp = session.get(path, headers=headers, timeout=60, **kwargs)\r\n2022-04-20T08:48:25.7454221Z     if resp.status_code != status_code:\r\n2022-04-20T08:48:25.7454568Z         logger.error(\"Failed to fetch from %s. Response: %s\", path, resp.text)\r\n2022-04-20T08:48:25.7454787Z \r\n2022-04-20T08:48:25.7454940Z     return resp\r\n2022-04-20T08:48:25.7455092Z \r\n2022-04-20T08:48:25.7455099Z \r\n2022-04-20T08:48:25.7455427Z def get_records_url(workspace_name: str, experiment_name: Optional[str] = None) -> str:\r\n2022-04-20T08:48:25.7455774Z     if experiment_name is None:\r\n2022-04-20T08:48:25.7456208Z         experiment_name = f\"{workspace_name}.{_ENSEMBLE_RECORDS}\"\r\n2022-04-20T08:48:25.7456561Z     experiment = _get_experiment_by_name(experiment_name)\r\n2022-04-20T08:48:25.7456866Z     if experiment is None:\r\n2022-04-20T08:48:25.7457196Z         raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7457550Z             f\"Experiment {experiment_name} does not exist\"\r\n2022-04-20T08:48:25.7457820Z         )\r\n2022-04-20T08:48:25.7457948Z \r\n2022-04-20T08:48:25.7458143Z     ensemble_id = experiment[\"ensemble_ids\"][0]  # currently just one ens per exp\r\n2022-04-20T08:48:25.7458503Z     return f\"/ensembles/{ensemble_id}/records\"\r\n2022-04-20T08:48:25.7458671Z \r\n2022-04-20T08:48:25.7458677Z \r\n2022-04-20T08:48:25.7458801Z async def get_records_url_async(\r\n2022-04-20T08:48:25.7459133Z     workspace_name: str, experiment_name: Optional[str] = None\r\n2022-04-20T08:48:25.7459587Z ) -> str:\r\n2022-04-20T08:48:25.7459881Z     ensemble_id = await _get_ensemble_id_async(workspace_name, experiment_name)\r\n2022-04-20T08:48:25.7460240Z     return f\"/ensembles/{ensemble_id}/records\"\r\n2022-04-20T08:48:25.7460416Z \r\n2022-04-20T08:48:25.7460423Z \r\n2022-04-20T08:48:25.7502008Z def _delete_on_server(\r\n2022-04-20T08:48:25.7502481Z     path: str, headers: Optional[Dict[Any, Any]] = None, status_code: int = 200\r\n2022-04-20T08:48:25.7502904Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7503357Z     if not headers:\r\n2022-04-20T08:48:25.7503583Z         headers = {}\r\n2022-04-20T08:48:25.7503824Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7504098Z         resp = session.delete(\r\n2022-04-20T08:48:25.7504331Z             path,\r\n2022-04-20T08:48:25.7504545Z             headers=headers,\r\n2022-04-20T08:48:25.7504778Z             timeout=60,\r\n2022-04-20T08:48:25.7504995Z         )\r\n2022-04-20T08:48:25.7505222Z     if resp.status_code != status_code:\r\n2022-04-20T08:48:25.7505752Z         logger.error(\"Failed to delete %s. Response: %s\", path, resp.text)\r\n2022-04-20T08:48:25.7505972Z \r\n2022-04-20T08:48:25.7506064Z     return resp\r\n2022-04-20T08:48:25.7506202Z \r\n2022-04-20T08:48:25.7506208Z \r\n2022-04-20T08:48:25.7506305Z def _post_to_server(\r\n2022-04-20T08:48:25.7506514Z     path: str,\r\n2022-04-20T08:48:25.7506775Z     headers: Optional[Dict[Any, Any]] = None,\r\n2022-04-20T08:48:25.7507048Z     status_code: int = 200,\r\n2022-04-20T08:48:25.7507264Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7507559Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7507790Z     if not headers:\r\n2022-04-20T08:48:25.7507998Z         headers = {}\r\n2022-04-20T08:48:25.7508250Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7508588Z         resp = session.post(path, headers=headers, timeout=60, **kwargs)\r\n2022-04-20T08:48:25.7508904Z     if resp.status_code != status_code:\r\n2022-04-20T08:48:25.7509252Z         logger.error(\"Failed to post to %s. Response: %s\", path, resp.text)\r\n2022-04-20T08:48:25.7509470Z \r\n2022-04-20T08:48:25.7509563Z     return resp\r\n2022-04-20T08:48:25.7509805Z \r\n2022-04-20T08:48:25.7509811Z \r\n2022-04-20T08:48:25.7509904Z def _put_to_server(\r\n2022-04-20T08:48:25.7510105Z     path: str,\r\n2022-04-20T08:48:25.7510360Z     headers: Optional[Dict[Any, Any]] = None,\r\n2022-04-20T08:48:25.7510626Z     status_code: int = 200,\r\n2022-04-20T08:48:25.7510837Z     **kwargs: Any,\r\n2022-04-20T08:48:25.7511114Z ) -> httpx.Response:\r\n2022-04-20T08:48:25.7511340Z     if not headers:\r\n2022-04-20T08:48:25.7511542Z         headers = {}\r\n2022-04-20T08:48:25.7511788Z     with Storage.session() as session:\r\n2022-04-20T08:48:25.7512112Z         resp = session.put(path, headers=headers, timeout=60, **kwargs)\r\n2022-04-20T08:48:25.7512410Z     if resp.status_code != status_code:\r\n2022-04-20T08:48:25.7512740Z         logger.error(\"Failed to put to %s. Response: %s\", path, resp.text)\r\n2022-04-20T08:48:25.7513026Z     return resp\r\n2022-04-20T08:48:25.7513250Z \r\n2022-04-20T08:48:25.7513260Z \r\n2022-04-20T08:48:25.7513543Z def _get_experiment_by_name(experiment_name: str) -> Dict[str, Any]:\r\n2022-04-20T08:48:25.7514033Z     response = _get_from_server(path=\"experiments\")\r\n2022-04-20T08:48:25.7514341Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7514681Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7515057Z     experiments = {exp[\"name\"]: exp for exp in response.json()}\r\n2022-04-20T08:48:25.7515397Z     return experiments.get(experiment_name, None)\r\n2022-04-20T08:48:25.7515593Z \r\n2022-04-20T08:48:25.7515599Z \r\n2022-04-20T08:48:25.7515717Z async def _get_ensemble_id_async(\r\n2022-04-20T08:48:25.7516044Z     workspace_name: str, experiment_name: Optional[str] = None\r\n2022-04-20T08:48:25.7516361Z ) -> str:\r\n2022-04-20T08:48:25.7516588Z     url = \"/experiments\"\r\n2022-04-20T08:48:25.7517076Z     if experiment_name is None:\r\n2022-04-20T08:48:25.7517366Z         experiment_name = f\"{workspace_name}.{_ENSEMBLE_RECORDS}\"\r\n2022-04-20T08:48:25.7517564Z \r\n2022-04-20T08:48:25.7517702Z     response = await _get_from_server_async(url, {})\r\n2022-04-20T08:48:25.7518031Z     experiments = {exp[\"name\"]: exp for exp in response.json()}\r\n2022-04-20T08:48:25.7518368Z     experiment = experiments.get(experiment_name, None)\r\n2022-04-20T08:48:25.7518650Z     if experiment is not None:\r\n2022-04-20T08:48:25.7518928Z         return str(experiment[\"ensemble_ids\"][0])\r\n2022-04-20T08:48:25.7519258Z     raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7519583Z         f\"Experiment {experiment_name} does not exist\"\r\n2022-04-20T08:48:25.7519829Z     )\r\n2022-04-20T08:48:25.7519944Z \r\n2022-04-20T08:48:25.7519951Z \r\n2022-04-20T08:48:25.7520181Z async def _get_ensemble_size(ensemble_id: str) -> int:\r\n2022-04-20T08:48:25.7520473Z     url = f\"/ensembles/{ensemble_id}\"\r\n2022-04-20T08:48:25.7520750Z     response = await _get_from_server_async(url, {})\r\n2022-04-20T08:48:25.7521038Z     response_json = response.json()\r\n2022-04-20T08:48:25.7521309Z     return int(response_json[\"size\"])\r\n2022-04-20T08:48:25.7521454Z \r\n2022-04-20T08:48:25.7521473Z \r\n2022-04-20T08:48:25.7521650Z def init(*, workspace_name: str) -> None:\r\n2022-04-20T08:48:25.7522048Z     response = _get_from_server(path=\"experiments\")\r\n2022-04-20T08:48:25.7522407Z     experiment_names = {exp[\"name\"]: exp[\"ensemble_ids\"] for exp in response.json()}\r\n2022-04-20T08:48:25.7522631Z \r\n2022-04-20T08:48:25.7522746Z     for special_key in _SPECIAL_KEYS:\r\n2022-04-20T08:48:25.7523045Z         if f\"{workspace_name}.{special_key}\" in experiment_names:\r\n2022-04-20T08:48:25.7523332Z             raise RuntimeError(\r\n2022-04-20T08:48:25.7523640Z                 f\"Workspace {workspace_name} already registered in storage\"\r\n2022-04-20T08:48:25.7523897Z             )\r\n2022-04-20T08:48:25.7524108Z         _init_experiment(\r\n2022-04-20T08:48:25.7524390Z             experiment_name=f\"{workspace_name}.{special_key}\",\r\n2022-04-20T08:48:25.7524654Z             parameters={},\r\n2022-04-20T08:48:25.7524960Z             ensemble_size=-1,\r\n2022-04-20T08:48:25.7525195Z             responses=[],\r\n2022-04-20T08:48:25.7525387Z         )\r\n2022-04-20T08:48:25.7525503Z \r\n2022-04-20T08:48:25.7525512Z \r\n2022-04-20T08:48:25.7525757Z def assert_storage_initialized(workspace_name: str) -> None:\r\n2022-04-20T08:48:25.7526092Z     response = _get_from_server(path=\"experiments\")\r\n2022-04-20T08:48:25.7526453Z     experiment_names = {exp[\"name\"]: exp[\"ensemble_ids\"] for exp in response.json()}\r\n2022-04-20T08:48:25.7526663Z \r\n2022-04-20T08:48:25.7526781Z     for special_key in _SPECIAL_KEYS:\r\n2022-04-20T08:48:25.7527096Z         if f\"{workspace_name}.{special_key}\" not in experiment_names:\r\n2022-04-20T08:48:25.7527430Z             raise ert.exceptions.StorageError(\r\n2022-04-20T08:48:25.7527729Z                 \"Storage is not initialized properly. \"\r\n2022-04-20T08:48:25.7528043Z                 + \"The workspace needs to be reinitialized\"\r\n2022-04-20T08:48:25.7528289Z             )\r\n2022-04-20T08:48:25.7528410Z \r\n2022-04-20T08:48:25.7528417Z \r\n2022-04-20T08:48:25.7528589Z def init_experiment(\r\n2022-04-20T08:48:25.7528799Z     *,\r\n2022-04-20T08:48:25.7529007Z     experiment_name: str,\r\n2022-04-20T08:48:25.7529255Z     parameters: Iterable[str],\r\n2022-04-20T08:48:25.7529481Z     ensemble_size: int,\r\n2022-04-20T08:48:25.7529716Z     responses: Iterable[str],\r\n2022-04-20T08:48:25.7529987Z ) -> None:\r\n2022-04-20T08:48:25.7532745Z     if ensemble_size <= 0:\r\n2022-04-20T08:48:25.7533117Z         raise ValueError(\"Ensemble cannot have a size <= 0\")\r\n2022-04-20T08:48:25.7533319Z \r\n2022-04-20T08:48:25.7533422Z     _init_experiment(\r\n2022-04-20T08:48:25.7533805Z         experiment_name=experiment_name,\r\n2022-04-20T08:48:25.7534081Z         parameters=parameters,\r\n2022-04-20T08:48:25.7534345Z         ensemble_size=ensemble_size,\r\n2022-04-20T08:48:25.7534590Z         responses=responses,\r\n2022-04-20T08:48:25.7534810Z     )\r\n2022-04-20T08:48:25.7534930Z \r\n2022-04-20T08:48:25.7534936Z \r\n2022-04-20T08:48:25.7535033Z def _init_experiment(\r\n2022-04-20T08:48:25.7535350Z     *,\r\n2022-04-20T08:48:25.7535551Z     experiment_name: str,\r\n2022-04-20T08:48:25.7535795Z     parameters: Iterable[str],\r\n2022-04-20T08:48:25.7536034Z     ensemble_size: int,\r\n2022-04-20T08:48:25.7536261Z     responses: Iterable[str],\r\n2022-04-20T08:48:25.7536576Z ) -> None:\r\n2022-04-20T08:48:25.7536794Z     if not experiment_name:\r\n2022-04-20T08:48:25.7537093Z         raise ValueError(\"Cannot initialize experiment without a name\")\r\n2022-04-20T08:48:25.7537301Z \r\n2022-04-20T08:48:25.7537456Z     if _get_experiment_by_name(experiment_name) is not None:\r\n2022-04-20T08:48:25.7537796Z         raise ert.exceptions.ElementExistsError(\r\n2022-04-20T08:48:25.7538139Z             f\"Cannot initialize existing experiment: {experiment_name}\"\r\n2022-04-20T08:48:25.7538412Z         )\r\n2022-04-20T08:48:25.7538530Z \r\n2022-04-20T08:48:25.7538684Z     if len(set(parameters).intersection(responses)) > 0:\r\n2022-04-20T08:48:25.7539001Z         raise ert.exceptions.StorageError(\r\n2022-04-20T08:48:25.7539336Z             \"Experiment parameters and responses cannot have a name in common\"\r\n2022-04-20T08:48:25.7539623Z         )\r\n2022-04-20T08:48:25.7539741Z \r\n2022-04-20T08:48:25.7539931Z     exp_response = _post_to_server(path=\"experiments\", json={\"name\": experiment_name})\r\n2022-04-20T08:48:25.7557803Z     exp_id = exp_response.json()[\"id\"]\r\n2022-04-20T08:48:25.7558103Z \r\n2022-04-20T08:48:25.7558227Z     response = _post_to_server(\r\n2022-04-20T08:48:25.7558506Z         f\"experiments/{exp_id}/ensembles\",\r\n2022-04-20T08:48:25.7558749Z         json={\r\n2022-04-20T08:48:25.7558991Z             \"parameter_names\": list(parameters),\r\n2022-04-20T08:48:25.7559284Z             \"response_names\": list(responses),\r\n2022-04-20T08:48:25.7559544Z             \"size\": ensemble_size,\r\n2022-04-20T08:48:25.7559802Z             \"userdata\": {\"name\": experiment_name},\r\n2022-04-20T08:48:25.7560041Z         },\r\n2022-04-20T08:48:25.7560226Z     )\r\n2022-04-20T08:48:25.7560439Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7560766Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7560968Z \r\n2022-04-20T08:48:25.7560982Z \r\n2022-04-20T08:48:25.7561308Z def get_experiment_names(*, workspace_name: str) -> Set[str]:\r\n2022-04-20T08:48:25.7561753Z     response = _get_from_server(path=\"experiments\")\r\n2022-04-20T08:48:25.7562107Z     experiment_names = {exp[\"name\"] for exp in response.json()}\r\n2022-04-20T08:48:25.7562421Z     for special_key in _SPECIAL_KEYS:\r\n2022-04-20T08:48:25.7562721Z         key = f\"{workspace_name}.{special_key}\"\r\n2022-04-20T08:48:25.7562989Z         if key in experiment_names:\r\n2022-04-20T08:48:25.7563266Z             experiment_names.remove(key)\r\n2022-04-20T08:48:25.7563535Z     return experiment_names\r\n2022-04-20T08:48:25.7563690Z \r\n2022-04-20T08:48:25.7563697Z \r\n2022-04-20T08:48:25.7563966Z def _get_experiment_parameters(experiment_name: str) -> Iterable[str]:\r\n2022-04-20T08:48:25.7564471Z     experiment = _get_experiment_by_name(experiment_name)\r\n2022-04-20T08:48:25.7564775Z     if experiment is None:\r\n2022-04-20T08:48:25.7565106Z         raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7565811Z             f\"Cannot get parameters from non-existing experiment: {experiment_name}\"\r\n2022-04-20T08:48:25.7566157Z         )\r\n2022-04-20T08:48:25.7566288Z \r\n2022-04-20T08:48:25.7566534Z     ensemble_id = experiment[\"ensemble_ids\"][0]  # currently just one ens per exp\r\n2022-04-20T08:48:25.7566927Z     response = _get_from_server(f\"ensembles/{ensemble_id}/parameters\")\r\n2022-04-20T08:48:25.7567148Z \r\n2022-04-20T08:48:25.7567393Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7567727Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7567935Z \r\n2022-04-20T08:48:25.7568050Z     return list(response.json())\r\n2022-04-20T08:48:25.7568197Z \r\n2022-04-20T08:48:25.7568203Z \r\n2022-04-20T08:48:25.7568319Z async def _get_record_collection(\r\n2022-04-20T08:48:25.7568571Z     records_url: str,\r\n2022-04-20T08:48:25.7568801Z     record_name: str,\r\n2022-04-20T08:48:25.7569017Z     ensemble_size: int,\r\n2022-04-20T08:48:25.7569282Z     record_source: Optional[str] = None,\r\n2022-04-20T08:48:25.7569780Z ) -> Tuple[List[StorageRecordTransmitter], ert.data.RecordCollectionType]:\r\n2022-04-20T08:48:25.7570167Z     return await _get_record_storage_transmitters(\r\n2022-04-20T08:48:25.7570507Z         records_url, record_name, record_source, ensemble_size\r\n2022-04-20T08:48:25.7570773Z     )\r\n2022-04-20T08:48:25.7570893Z \r\n2022-04-20T08:48:25.7570900Z \r\n2022-04-20T08:48:25.7571073Z def get_ensemble_record(\r\n2022-04-20T08:48:25.7571325Z     *,\r\n2022-04-20T08:48:25.7571738Z     workspace_name: str,\r\n2022-04-20T08:48:25.7572068Z     record_name: str,\r\n2022-04-20T08:48:25.7572376Z     ensemble_size: int,\r\n2022-04-20T08:48:25.7572670Z     experiment_name: Optional[str] = None,\r\n2022-04-20T08:48:25.7573023Z     source: Optional[str] = None,\r\n2022-04-20T08:48:25.7573531Z ) -> ert.data.RecordCollection:\r\n2022-04-20T08:48:25.7573868Z     records_url = ert.storage.get_records_url(\r\n2022-04-20T08:48:25.7574300Z         workspace_name=workspace_name, experiment_name=experiment_name\r\n2022-04-20T08:48:25.7574664Z     )\r\n2022-04-20T08:48:25.7598647Z \r\n2022-04-20T08:48:25.7598887Z     transmitters, collection_type = get_event_loop().run_until_complete(\r\n2022-04-20T08:48:25.7599222Z         _get_record_collection(\r\n2022-04-20T08:48:25.7599670Z             records_url=records_url,\r\n2022-04-20T08:48:25.7599926Z             record_name=record_name,\r\n2022-04-20T08:48:25.7600898Z             record_source=source,\r\n2022-04-20T08:48:25.7601193Z             ensemble_size=ensemble_size,\r\n2022-04-20T08:48:25.7601440Z         )\r\n2022-04-20T08:48:25.7601638Z     )\r\n2022-04-20T08:48:25.7601838Z     records = tuple(\r\n2022-04-20T08:48:25.7602151Z         get_event_loop().run_until_complete(transmitter.load())\r\n2022-04-20T08:48:25.7602480Z         for transmitter in transmitters\r\n2022-04-20T08:48:25.7602708Z     )\r\n2022-04-20T08:48:25.7602954Z     return ert.data.RecordCollection(\r\n2022-04-20T08:48:25.7603325Z         records=records, length=ensemble_size, collection_type=collection_type\r\n2022-04-20T08:48:25.7603634Z     )\r\n2022-04-20T08:48:25.7603746Z \r\n2022-04-20T08:48:25.7603754Z \r\n2022-04-20T08:48:25.7603878Z def get_ensemble_record_names(\r\n2022-04-20T08:48:25.7604468Z     *, workspace_name: str, experiment_name: Optional[str] = None, _flatten: bool = True\r\n2022-04-20T08:48:25.7604895Z ) -> Iterable[str]:\r\n2022-04-20T08:48:25.7605203Z     # _flatten is a parameter used only for testing separated parameter records\r\n2022-04-20T08:48:25.7605526Z     if experiment_name is None:\r\n2022-04-20T08:48:25.7605831Z         experiment_name = f\"{workspace_name}.{_ENSEMBLE_RECORDS}\"\r\n2022-04-20T08:48:25.7606157Z     experiment = _get_experiment_by_name(experiment_name)\r\n2022-04-20T08:48:25.7606442Z     if experiment is None:\r\n2022-04-20T08:48:25.7606749Z         raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7607245Z             f\"Cannot get record names of non-existing experiment: {experiment_name}\"\r\n2022-04-20T08:48:25.7607526Z         )\r\n2022-04-20T08:48:25.7607646Z \r\n2022-04-20T08:48:25.7607825Z     ensemble_id = experiment[\"ensemble_ids\"][0]  # currently just one ens per exp\r\n2022-04-20T08:48:25.7608399Z     response = _get_from_server(path=f\"ensembles/{ensemble_id}/records\")\r\n2022-04-20T08:48:25.7608731Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7609059Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7609260Z \r\n2022-04-20T08:48:25.7609400Z     # Flatten any parameter records that were split\r\n2022-04-20T08:48:25.7609655Z     if _flatten:\r\n2022-04-20T08:48:25.7609955Z         return {x.split(_PARAMETER_RECORD_SEPARATOR)[0] for x in response.json().keys()}\r\n2022-04-20T08:48:25.7610291Z     return list(response.json().keys())\r\n2022-04-20T08:48:25.7610454Z \r\n2022-04-20T08:48:25.7610460Z \r\n2022-04-20T08:48:25.7610753Z def get_experiment_parameters(*, experiment_name: str) -> Iterable[str]:\r\n2022-04-20T08:48:25.7611102Z     return _get_experiment_parameters(experiment_name)\r\n2022-04-20T08:48:25.7611290Z \r\n2022-04-20T08:48:25.7611296Z \r\n2022-04-20T08:48:25.7611560Z def get_experiment_responses(*, experiment_name: str) -> Iterable[str]:\r\n2022-04-20T08:48:25.7611922Z     experiment = _get_experiment_by_name(experiment_name)\r\n2022-04-20T08:48:25.7612205Z     if experiment is None:\r\n2022-04-20T08:48:25.7612499Z         raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7612983Z             f\"Cannot get responses from non-existing experiment: {experiment_name}\"\r\n2022-04-20T08:48:25.7613275Z         )\r\n2022-04-20T08:48:25.7613394Z \r\n2022-04-20T08:48:25.7613563Z     ensemble_id = experiment[\"ensemble_ids\"][0]  # currently just one ens per exp\r\n2022-04-20T08:48:25.7613934Z     response = _get_from_server(f\"ensembles/{ensemble_id}/responses\")\r\n2022-04-20T08:48:25.7614137Z \r\n2022-04-20T08:48:25.7614251Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7614568Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7614755Z \r\n2022-04-20T08:48:25.7614909Z     # The ensemble responses are sent in the following form:\r\n2022-04-20T08:48:25.7615166Z     #     {\r\n2022-04-20T08:48:25.7615441Z     #         \"polynomial_output\": {\"id\": id, \"name\": name, \"userdata\": {}}\r\n2022-04-20T08:48:25.7615694Z     #     }\r\n2022-04-20T08:48:25.7615927Z     # therefore we extract only the keys\r\n2022-04-20T08:48:25.7616318Z \r\n2022-04-20T08:48:25.7616443Z     return list(response.json().keys())\r\n2022-04-20T08:48:25.7616612Z \r\n2022-04-20T08:48:25.7616618Z \r\n2022-04-20T08:48:25.7616870Z def delete_experiment(*, experiment_name: str) -> None:\r\n2022-04-20T08:48:25.7617204Z     experiment = _get_experiment_by_name(experiment_name)\r\n2022-04-20T08:48:25.7617496Z     if experiment is None:\r\n2022-04-20T08:48:25.7617815Z         raise ert.exceptions.NonExistentExperiment(\r\n2022-04-20T08:48:25.7618161Z             f\"Experiment does not exist: {experiment_name}\"\r\n2022-04-20T08:48:25.7618421Z         )\r\n2022-04-20T08:48:25.7618813Z     response = _delete_on_server(path=f\"experiments/{experiment['id']}\")\r\n2022-04-20T08:48:25.7619034Z \r\n2022-04-20T08:48:25.7619140Z     if response.status_code != 200:\r\n2022-04-20T08:48:25.7619569Z         raise ert.exceptions.StorageError(response.text)\r\n2022-04-20T08:48:25.7619767Z \r\n2022-04-20T08:48:25.7619844Z ```\r\n2022-04-20T08:48:25.7619957Z \r\n2022-04-20T08:48:25.7620140Z pylint crashed with a ``AttributeError`` and with the following stacktrace:\r\n2022-04-20T08:48:25.7620415Z ```\r\n2022-04-20T08:48:25.7620813Z Traceback (most recent call last):\r\n2022-04-20T08:48:25.7628768Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1111, in _check_files\r\n2022-04-20T08:48:25.7629282Z     self._check_file(get_ast, check_astroid_module, file)\r\n2022-04-20T08:48:25.7630000Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1146, in _check_file\r\n2022-04-20T08:48:25.7630402Z     check_astroid_module(ast_node)\r\n2022-04-20T08:48:25.7631034Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1298, in check_astroid_module\r\n2022-04-20T08:48:25.7631451Z     retval = self._check_astroid_module(\r\n2022-04-20T08:48:25.7632326Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1345, in _check_astroid_module\r\n2022-04-20T08:48:25.7632733Z     walker.walk(node)\r\n2022-04-20T08:48:25.7633323Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 76, in walk\r\n2022-04-20T08:48:25.7633694Z     self.walk(child)\r\n2022-04-20T08:48:25.7634242Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 76, in walk\r\n2022-04-20T08:48:25.7634589Z     self.walk(child)\r\n2022-04-20T08:48:25.7635129Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 76, in walk\r\n2022-04-20T08:48:25.7635492Z     self.walk(child)\r\n2022-04-20T08:48:25.7635753Z   [Previous line repeated 3 more times]\r\n2022-04-20T08:48:25.7636411Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 73, in walk\r\n2022-04-20T08:48:25.7636765Z     callback(astroid)\r\n2022-04-20T08:48:25.7637348Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/checkers/variables.py\", line 1377, in visit_name\r\n2022-04-20T08:48:25.7637778Z     self._undefined_and_used_before_checker(node, stmt)\r\n2022-04-20T08:48:25.7638448Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/checkers/variables.py\", line 1419, in _undefined_and_used_before_checker\r\n2022-04-20T08:48:25.7638879Z     action, nodes_to_consume = self._check_consumer(\r\n2022-04-20T08:48:25.7639495Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/checkers/variables.py\", line 1680, in _check_consumer\r\n2022-04-20T08:48:25.7639924Z     elif self._is_only_type_assignment(node, defstmt):\r\n2022-04-20T08:48:25.7640570Z   File \"/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/pylint/checkers/variables.py\", line 2072, in _is_only_type_assignment\r\n2022-04-20T08:48:25.7641054Z     if node.name in self.linter.config.additional_builtins or utils.is_builtin(\r\n2022-04-20T08:48:25.7641551Z AttributeError: 'Values' object has no attribute 'additional_builtins'\r\n2022-04-20T08:48:25.7641960Z ```\r\n2022-04-20T08:48:38.8692233Z .\r\n```\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\npylint should report success of failure with the linting, and exit accordingly, with no crash.\r\n\r\n### Pylint version\r\n\r\n```shell\r\npylint 2.13.6\r\n```\r\n\r\n\r\n### OS / Environment\r\n\r\n  Ubuntu  20.04.4  LTS\r\n\r\n### Additional dependencies\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6409/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103803082","html_url":"https://github.com/pylint-dev/pylint/issues/6408#issuecomment-1103803082","issue_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6408","id":1103803082,"node_id":"IC_kwDOAtdnV85ByrLK","user":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:02:14Z","updated_at":"2022-04-20T11:02:14Z","body":"Thank you for opening the issue, it look like we cherry-picked a commit that we could not cherry-pick.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103803082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103803271","html_url":"https://github.com/pylint-dev/pylint/issues/6408#issuecomment-1103803271","issue_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6408","id":1103803271,"node_id":"IC_kwDOAtdnV85ByrOH","user":{"login":"DanielNoord","id":13665637,"node_id":"MDQ6VXNlcjEzNjY1NjM3","avatar_url":"https://avatars.githubusercontent.com/u/13665637?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielNoord","html_url":"https://github.com/DanielNoord","followers_url":"https://api.github.com/users/DanielNoord/followers","following_url":"https://api.github.com/users/DanielNoord/following{/other_user}","gists_url":"https://api.github.com/users/DanielNoord/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielNoord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielNoord/subscriptions","organizations_url":"https://api.github.com/users/DanielNoord/orgs","repos_url":"https://api.github.com/users/DanielNoord/repos","events_url":"https://api.github.com/users/DanielNoord/events{/privacy}","received_events_url":"https://api.github.com/users/DanielNoord/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:02:29Z","updated_at":"2022-04-20T11:02:54Z","body":"@Pierre-Sassoulas we might want to yank `2.13.6` asap. That build is broken.\r\n\r\nFaulty commit is https://github.com/PyCQA/pylint/commit/ddca4dd30ebe3c7bb529a96a541192b73a5b1c85.\r\n\r\nL2072 with `self.linter.config.additional_builtins` doesn't work.\r\n\r\nEdit: To make it work on a non-argparse-ready build I think it should be `self.config.additional_builtins`.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103803271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DanielNoord","id":13665637,"node_id":"MDQ6VXNlcjEzNjY1NjM3","avatar_url":"https://avatars.githubusercontent.com/u/13665637?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielNoord","html_url":"https://github.com/DanielNoord","followers_url":"https://api.github.com/users/DanielNoord/followers","following_url":"https://api.github.com/users/DanielNoord/following{/other_user}","gists_url":"https://api.github.com/users/DanielNoord/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielNoord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielNoord/subscriptions","organizations_url":"https://api.github.com/users/DanielNoord/orgs","repos_url":"https://api.github.com/users/DanielNoord/repos","events_url":"https://api.github.com/users/DanielNoord/events{/privacy}","received_events_url":"https://api.github.com/users/DanielNoord/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6462213467,"node_id":"MEE_lADOAtdnV85IF74dzwAAAAGBLY1b","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462213467","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-04-20T11:02:29Z","performed_via_github_app":null},{"id":6462213472,"node_id":"SE_lADOAtdnV85IF74dzwAAAAGBLY1g","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462213472","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-04-20T11:02:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103806974","html_url":"https://github.com/pylint-dev/pylint/issues/6408#issuecomment-1103806974","issue_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6408","id":1103806974,"node_id":"IC_kwDOAtdnV85BysH-","user":{"login":"mbyrnepr2","id":31762852,"node_id":"MDQ6VXNlcjMxNzYyODUy","avatar_url":"https://avatars.githubusercontent.com/u/31762852?v=4","gravatar_id":"","url":"https://api.github.com/users/mbyrnepr2","html_url":"https://github.com/mbyrnepr2","followers_url":"https://api.github.com/users/mbyrnepr2/followers","following_url":"https://api.github.com/users/mbyrnepr2/following{/other_user}","gists_url":"https://api.github.com/users/mbyrnepr2/gists{/gist_id}","starred_url":"https://api.github.com/users/mbyrnepr2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbyrnepr2/subscriptions","organizations_url":"https://api.github.com/users/mbyrnepr2/orgs","repos_url":"https://api.github.com/users/mbyrnepr2/repos","events_url":"https://api.github.com/users/mbyrnepr2/events{/privacy}","received_events_url":"https://api.github.com/users/mbyrnepr2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:06:56Z","updated_at":"2022-04-20T11:06:56Z","body":"I don't see the crash happening on latest main:\r\n```\r\npylint 2.14.0-dev0\r\nastroid 2.11.3\r\nPython 3.10.0b2\r\n```\r\n\r\nCan reproduce with 2.13.6 as reported.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103806974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbyrnepr2","id":31762852,"node_id":"MDQ6VXNlcjMxNzYyODUy","avatar_url":"https://avatars.githubusercontent.com/u/31762852?v=4","gravatar_id":"","url":"https://api.github.com/users/mbyrnepr2","html_url":"https://github.com/mbyrnepr2","followers_url":"https://api.github.com/users/mbyrnepr2/followers","following_url":"https://api.github.com/users/mbyrnepr2/following{/other_user}","gists_url":"https://api.github.com/users/mbyrnepr2/gists{/gist_id}","starred_url":"https://api.github.com/users/mbyrnepr2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbyrnepr2/subscriptions","organizations_url":"https://api.github.com/users/mbyrnepr2/orgs","repos_url":"https://api.github.com/users/mbyrnepr2/repos","events_url":"https://api.github.com/users/mbyrnepr2/events{/privacy}","received_events_url":"https://api.github.com/users/mbyrnepr2/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103810904","html_url":"https://github.com/pylint-dev/pylint/issues/6408#issuecomment-1103810904","issue_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6408","id":1103810904,"node_id":"IC_kwDOAtdnV85BytFY","user":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:11:42Z","updated_at":"2022-04-20T11:11:42Z","body":">  we might want to yank 2.13.6 asap.\r\n\r\nYeah, the issue is that I don't have managing right. Let's release 2.13.7 after #6410 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments/1103810904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T11:12:03Z","updated_at":"2022-04-20T11:12:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410/events","html_url":"https://github.com/pylint-dev/pylint/pull/6410","id":1209533113,"node_id":"PR_kwDOAtdnV842e9t-","number":6410,"title":"Fix 'object has no attribute additional_builtins'","user":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1041256788,"node_id":"MDU6TGFiZWwxMDQxMjU2Nzg4","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Crash%20%F0%9F%92%A5","name":"Crash üí•","color":"c64d6f","default":false,"description":"A bug that makes pylint crash"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/64","html_url":"https://github.com/pylint-dev/pylint/milestone/64","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/64/labels","id":7895144,"node_id":"MI_kwDOAtdnV84AeHho","number":64,"title":"2.13.7","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"closed","created_at":"2022-04-20T10:58:12Z","updated_at":"2022-04-20T11:40:36Z","due_on":null,"closed_at":"2022-04-20T11:40:36Z"},"comments":0,"created_at":"2022-04-20T11:08:58Z","updated_at":"2022-04-20T12:37:05Z","closed_at":"2022-04-20T11:36:30Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":47671127,"node_id":"MDEwOlJlcG9zaXRvcnk0NzY3MTEyNw==","name":"pylint","full_name":"pylint-dev/pylint","private":false,"owner":{"login":"pylint-dev","id":121692054,"node_id":"O_kgDOB0Dflg","avatar_url":"https://avatars.githubusercontent.com/u/121692054?v=4","gravatar_id":"","url":"https://api.github.com/users/pylint-dev","html_url":"https://github.com/pylint-dev","followers_url":"https://api.github.com/users/pylint-dev/followers","following_url":"https://api.github.com/users/pylint-dev/following{/other_user}","gists_url":"https://api.github.com/users/pylint-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/pylint-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pylint-dev/subscriptions","organizations_url":"https://api.github.com/users/pylint-dev/orgs","repos_url":"https://api.github.com/users/pylint-dev/repos","events_url":"https://api.github.com/users/pylint-dev/events{/privacy}","received_events_url":"https://api.github.com/users/pylint-dev/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pylint-dev/pylint","description":"It's not just a linter that annoys you!","fork":false,"url":"https://api.github.com/repos/pylint-dev/pylint","forks_url":"https://api.github.com/repos/pylint-dev/pylint/forks","keys_url":"https://api.github.com/repos/pylint-dev/pylint/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pylint-dev/pylint/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pylint-dev/pylint/teams","hooks_url":"https://api.github.com/repos/pylint-dev/pylint/hooks","issue_events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/events{/number}","events_url":"https://api.github.com/repos/pylint-dev/pylint/events","assignees_url":"https://api.github.com/repos/pylint-dev/pylint/assignees{/user}","branches_url":"https://api.github.com/repos/pylint-dev/pylint/branches{/branch}","tags_url":"https://api.github.com/repos/pylint-dev/pylint/tags","blobs_url":"https://api.github.com/repos/pylint-dev/pylint/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pylint-dev/pylint/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pylint-dev/pylint/git/refs{/sha}","trees_url":"https://api.github.com/repos/pylint-dev/pylint/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pylint-dev/pylint/statuses/{sha}","languages_url":"https://api.github.com/repos/pylint-dev/pylint/languages","stargazers_url":"https://api.github.com/repos/pylint-dev/pylint/stargazers","contributors_url":"https://api.github.com/repos/pylint-dev/pylint/contributors","subscribers_url":"https://api.github.com/repos/pylint-dev/pylint/subscribers","subscription_url":"https://api.github.com/repos/pylint-dev/pylint/subscription","commits_url":"https://api.github.com/repos/pylint-dev/pylint/commits{/sha}","git_commits_url":"https://api.github.com/repos/pylint-dev/pylint/git/commits{/sha}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/comments{/number}","issue_comment_url":"https://api.github.com/repos/pylint-dev/pylint/issues/comments{/number}","contents_url":"https://api.github.com/repos/pylint-dev/pylint/contents/{+path}","compare_url":"https://api.github.com/repos/pylint-dev/pylint/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pylint-dev/pylint/merges","archive_url":"https://api.github.com/repos/pylint-dev/pylint/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pylint-dev/pylint/downloads","issues_url":"https://api.github.com/repos/pylint-dev/pylint/issues{/number}","pulls_url":"https://api.github.com/repos/pylint-dev/pylint/pulls{/number}","milestones_url":"https://api.github.com/repos/pylint-dev/pylint/milestones{/number}","notifications_url":"https://api.github.com/repos/pylint-dev/pylint/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pylint-dev/pylint/labels{/name}","releases_url":"https://api.github.com/repos/pylint-dev/pylint/releases{/id}","deployments_url":"https://api.github.com/repos/pylint-dev/pylint/deployments","created_at":"2015-12-09T05:40:02Z","updated_at":"2025-11-08T08:50:00Z","pushed_at":"2025-11-08T08:26:15Z","git_url":"git://github.com/pylint-dev/pylint.git","ssh_url":"git@github.com:pylint-dev/pylint.git","clone_url":"https://github.com/pylint-dev/pylint.git","svn_url":"https://github.com/pylint-dev/pylint","homepage":"https://pylint.readthedocs.io/en/latest/","size":41754,"stargazers_count":5591,"watchers_count":5591,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1197,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1060,"license":{"key":"gpl-2.0","name":"GNU General Public License v2.0","spdx_id":"GPL-2.0","url":"https://api.github.com/licenses/gpl-2.0","node_id":"MDc6TGljZW5zZTg="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["closember","code-quality","hacktoberfest","linter","pep8","static-analysis","static-code-analysis"],"visibility":"public","forks":1197,"open_issues":1060,"watchers":5591,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pylint-dev/pylint/pulls/6410","html_url":"https://github.com/pylint-dev/pylint/pull/6410","diff_url":"https://github.com/pylint-dev/pylint/pull/6410.diff","patch_url":"https://github.com/pylint-dev/pylint/pull/6410.patch","merged_at":"2022-04-20T11:36:30Z"},"body":"## Type of Changes\r\n\r\n<!-- Leave the corresponding lines for the applicable type of change: -->\r\n\r\n|     | Type                   |\r\n| --- | ---------------------- |\r\n| ‚úì   | :bug: Bug fix          |\r\n| ‚úì   | :scroll: Docs          |\r\n\r\n## Description\r\n\r\nWe cherry picked a fix without testing on all python versions in the CI.\r\n\r\nCloses #6408 \r\n","reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/6410/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6462299003,"node_id":"REFE_lADOAtdnV85IF74dzwAAAAGBLtt7","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462299003","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bc11f90d9fdec840e77bb665549561fb9cd4fc71","commit_url":"https://api.github.com/repos/pylint-dev/pylint/commits/bc11f90d9fdec840e77bb665549561fb9cd4fc71","created_at":"2022-04-20T11:16:52Z","performed_via_github_app":null},{"id":6462416784,"node_id":"REFE_lADOAtdnV85IF74dzwAAAAGBMKeQ","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462416784","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"106f0afd2abe6b3ace3a6eff86d7adc76977f8b3","commit_url":"https://api.github.com/repos/pylint-dev/pylint/commits/106f0afd2abe6b3ace3a6eff86d7adc76977f8b3","created_at":"2022-04-20T11:36:33Z","performed_via_github_app":null},{"id":6462440285,"node_id":"CE_lADOAtdnV85IF74dzwAAAAGBMQNd","url":"https://api.github.com/repos/pylint-dev/pylint/issues/events/6462440285","actor":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-04-20T11:40:27Z","state_reason":null,"performed_via_github_app":null}]