{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696/events","html_url":"https://github.com/pylint-dev/pylint/issues/9696","id":2336370246,"node_id":"I_kwDOAtdnV86LQi5G","number":9696,"title":"False positive for `use-yield-from` for generators yielding from iterators","user":{"login":"jakelishman","id":5968590,"node_id":"MDQ6VXNlcjU5Njg1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/5968590?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelishman","html_url":"https://github.com/jakelishman","followers_url":"https://api.github.com/users/jakelishman/followers","following_url":"https://api.github.com/users/jakelishman/following{/other_user}","gists_url":"https://api.github.com/users/jakelishman/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelishman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelishman/subscriptions","organizations_url":"https://api.github.com/users/jakelishman/orgs","repos_url":"https://api.github.com/users/jakelishman/repos","events_url":"https://api.github.com/users/jakelishman/events{/privacy}","received_events_url":"https://api.github.com/users/jakelishman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2374167765,"node_id":"MDU6TGFiZWwyMzc0MTY3NzY1","url":"https://api.github.com/repos/pylint-dev/pylint/labels/False%20Positive%20%F0%9F%A6%9F","name":"False Positive ðŸ¦Ÿ","color":"28a2b7","default":false,"description":"A message is emitted but nothing is wrong with the code"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/114","html_url":"https://github.com/pylint-dev/pylint/milestone/114","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/114/labels","id":11074642,"node_id":"MI_kwDOAtdnV84AqPxS","number":114,"title":"3.2.3","description":"","creator":{"login":"cdce8p","id":30130371,"node_id":"MDQ6VXNlcjMwMTMwMzcx","avatar_url":"https://avatars.githubusercontent.com/u/30130371?v=4","gravatar_id":"","url":"https://api.github.com/users/cdce8p","html_url":"https://github.com/cdce8p","followers_url":"https://api.github.com/users/cdce8p/followers","following_url":"https://api.github.com/users/cdce8p/following{/other_user}","gists_url":"https://api.github.com/users/cdce8p/gists{/gist_id}","starred_url":"https://api.github.com/users/cdce8p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdce8p/subscriptions","organizations_url":"https://api.github.com/users/cdce8p/orgs","repos_url":"https://api.github.com/users/cdce8p/repos","events_url":"https://api.github.com/users/cdce8p/events{/privacy}","received_events_url":"https://api.github.com/users/cdce8p/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":11,"state":"closed","created_at":"2024-05-20T06:34:10Z","updated_at":"2024-06-06T15:04:56Z","due_on":null,"closed_at":"2024-06-06T14:17:19Z"},"comments":0,"created_at":"2024-06-05T16:39:38Z","updated_at":"2024-06-06T12:54:11Z","closed_at":"2024-06-06T12:54:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\r\n\r\nWithin a generator expression, pylint issues `use-yield-from` for constructs such as:\r\n\r\n```python\r\ndef my_generator[T, S](iterator: Iterable[T]) -> Generator[T, S, S]:\r\n    for item in iterator:\r\n        state = yield iterator\r\n    return state\r\n```\r\n\r\nWhen `iterator` is an `Iterator` and not a `Generator`, it will not have the `generator` methods (e.g. `send`), so applying Pylint's suggestion will modify the type of `my_generator` from `Generator[T, S, S]` to `Generator[T, None, None]` (and will generally cause `AttributeError` to be raised on calls to `send`).\r\n\r\nExample file `generator.py`:\r\n```python\r\nimport typing\r\n\r\niterable: list[int] = [1, 2, 3]\r\n\r\ndef gen1():\r\n    for item in iterable:\r\n        # Implicitly suggesting that `send` will be used.\r\n        _ = yield item\r\n\r\n# ... and ...\r\n\r\n# Explicitly requiring that `send` must exist.\r\ndef gen2() -> typing.Generator[int, object, None]:\r\n    for item in iterable:\r\n        yield item\r\n```\r\n\r\n\r\n### Configuration\r\n\r\n_No response_\r\n\r\n### Command used\r\n\r\n```shell\r\npylint generator.py\r\n```\r\n\r\n\r\n### Pylint output\r\n\r\n```python\r\n************* Module generator\r\ngenerator.py:6:4: R1737: Use 'yield from' directly instead of yielding each element one by one (use-yield-from)\r\ngenerator.py:14:4: R1737: Use 'yield from' directly instead of yielding each element one by one (use-yield-from)\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nIn many cases, I suspect that the message is worth the risk of the false positive:\r\n```python\r\ndef gen():\r\n    for item in iterator:\r\n        yield item\r\n```\r\nprobably should emit the message, but imo neither of my examples in `generator.py` should, maybe unless `iterable` could be inferred to be a compatible type (which it explicitly isn't in my example).\r\n\r\n### Pylint version\r\n\r\n```shell\r\npylint 3.2.2\r\nastroid 3.2.2\r\nPython 3.12.0rc3 (main, Sep 21 2023, 17:27:59) [Clang 16.0.6 ]\r\n```\r\n\r\n\r\n### OS / Environment\r\n\r\n_No response_\r\n\r\n### Additional dependencies\r\n\r\n_No response_","closed_by":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/9696/timeline","performed_via_github_app":null,"state_reason":"completed"}