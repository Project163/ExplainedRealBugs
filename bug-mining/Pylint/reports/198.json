{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683/events","html_url":"https://github.com/pylint-dev/pylint/issues/5683","id":1104234581,"node_id":"I_kwDOAtdnV85B0UhV","number":5683,"title":"False positive for `used-before-assignment` in `else` clause when the only non-`break` exit from a loop is an except block","user":{"login":"jacobtylerwalls","id":38668450,"node_id":"MDQ6VXNlcjM4NjY4NDUw","avatar_url":"https://avatars.githubusercontent.com/u/38668450?v=4","gravatar_id":"","url":"https://api.github.com/users/jacobtylerwalls","html_url":"https://github.com/jacobtylerwalls","followers_url":"https://api.github.com/users/jacobtylerwalls/followers","following_url":"https://api.github.com/users/jacobtylerwalls/following{/other_user}","gists_url":"https://api.github.com/users/jacobtylerwalls/gists{/gist_id}","starred_url":"https://api.github.com/users/jacobtylerwalls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacobtylerwalls/subscriptions","organizations_url":"https://api.github.com/users/jacobtylerwalls/orgs","repos_url":"https://api.github.com/users/jacobtylerwalls/repos","events_url":"https://api.github.com/users/jacobtylerwalls/events{/privacy}","received_events_url":"https://api.github.com/users/jacobtylerwalls/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2374167765,"node_id":"MDU6TGFiZWwyMzc0MTY3NzY1","url":"https://api.github.com/repos/pylint-dev/pylint/labels/False%20Positive%20%F0%9F%A6%9F","name":"False Positive ðŸ¦Ÿ","color":"28a2b7","default":false,"description":"A message is emitted but nothing is wrong with the code"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/49","html_url":"https://github.com/pylint-dev/pylint/milestone/49","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/49/labels","id":7110914,"node_id":"MI_kwDOAtdnV84AbIEC","number":49,"title":"2.13.0","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":395,"state":"closed","created_at":"2021-09-01T07:15:02Z","updated_at":"2024-02-01T14:06:23Z","due_on":null,"closed_at":"2022-03-24T22:18:12Z"},"comments":0,"created_at":"2022-01-15T00:25:04Z","updated_at":"2022-01-27T15:58:43Z","closed_at":"2022-01-27T15:58:43Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\n\n```python\r\ndef do_something():\r\n    pass\r\n\r\nfor _ in range(3):\r\n    try:\r\n        do_something()  # not an exit branch because of `else` below (will only exit here with an exception)\r\n    except ZeroDivisionError as e:\r\n        error = e  # < exit branch where error is defined\r\n    else:\r\n        break  # < exit condition where error is *not* defined, but will skip `raise error` below\r\n    print(\"retrying...\")\r\nelse:\r\n    raise error\r\n```\n\n### Configuration\n\n_No response_\n\n### Command used\n\n```shell\npylint a.py\n```\n\n\n### Pylint output\n\n```shell\n************* Module a\r\na.py:13:10: E0601: Using variable 'error' before assignment (used-before-assignment)\n```\n\n\n### Expected behavior\n\nNo message. Identified by @martimlobao and discussed in detail https://github.com/PyCQA/pylint/pull/5402#issuecomment-1012791780.\r\n\r\nQuoting from my [suggested](https://github.com/PyCQA/pylint/pull/5402#issuecomment-1013209351) solution:\r\n\r\nSo maybe this is the constraint to check for:\r\n\r\n- if the use of `error` being tested is guarded by `else` in `for/else` (or `while/else`)\r\n- if the definition of `error` in an `except` block is a descendant of the same `for/while`\r\n- if that inner `else` breaks\r\n- if there is no `continue` anywhere at all underneath the loop and before the break (other than inside another loop, but including nested conditions and try/excepts)\n\n### Pylint version\n\n```shell\npylint 2.13.0-dev0\r\nastroid 2.9.2\r\nPython 3.10.1 (v3.10.1:2cd268a3a9, Dec  6 2021, 14:28:59) [Clang 13.0.0 (clang-1300.0.29.3)]\n```\n\n\n### OS / Environment\n\n_No response_\n\n### Additional dependencies\n\n_No response_","closed_by":{"login":"DanielNoord","id":13665637,"node_id":"MDQ6VXNlcjEzNjY1NjM3","avatar_url":"https://avatars.githubusercontent.com/u/13665637?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielNoord","html_url":"https://github.com/DanielNoord","followers_url":"https://api.github.com/users/DanielNoord/followers","following_url":"https://api.github.com/users/DanielNoord/following{/other_user}","gists_url":"https://api.github.com/users/DanielNoord/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielNoord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielNoord/subscriptions","organizations_url":"https://api.github.com/users/DanielNoord/orgs","repos_url":"https://api.github.com/users/DanielNoord/repos","events_url":"https://api.github.com/users/DanielNoord/events{/privacy}","received_events_url":"https://api.github.com/users/DanielNoord/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5683/timeline","performed_via_github_app":null,"state_reason":"completed"}