{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030","repository_url":"https://api.github.com/repos/pylint-dev/pylint","labels_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030/labels{/name}","comments_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030/comments","events_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030/events","html_url":"https://github.com/pylint-dev/pylint/issues/5030","id":999105196,"node_id":"I_kwDOAtdnV847jSKs","number":5030,"title":"Fatal error with dataclass after 2.11","user":{"login":"friggog","id":6437437,"node_id":"MDQ6VXNlcjY0Mzc0Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/6437437?v=4","gravatar_id":"","url":"https://api.github.com/users/friggog","html_url":"https://github.com/friggog","followers_url":"https://api.github.com/users/friggog/followers","following_url":"https://api.github.com/users/friggog/following{/other_user}","gists_url":"https://api.github.com/users/friggog/gists{/gist_id}","starred_url":"https://api.github.com/users/friggog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/friggog/subscriptions","organizations_url":"https://api.github.com/users/friggog/orgs","repos_url":"https://api.github.com/users/friggog/repos","events_url":"https://api.github.com/users/friggog/events{/privacy}","received_events_url":"https://api.github.com/users/friggog/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":297362729,"node_id":"MDU6TGFiZWwyOTczNjI3Mjk=","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Astroid","name":"Astroid","color":"DEE753","default":false,"description":"Related to astroid"},{"id":1001942788,"node_id":"MDU6TGFiZWwxMDAxOTQyNzg4","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Regression","name":"Regression","color":"6ba0e0","default":false,"description":""},{"id":1041256788,"node_id":"MDU6TGFiZWwxMDQxMjU2Nzg4","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Crash%20%F0%9F%92%A5","name":"Crash ðŸ’¥","color":"c64d6f","default":false,"description":"A bug that makes pylint crash"},{"id":2899705565,"node_id":"MDU6TGFiZWwyODk5NzA1NTY1","url":"https://api.github.com/repos/pylint-dev/pylint/labels/Needs%20astroid%20update","name":"Needs astroid update","color":"5319E7","default":false,"description":"Needs an astroid update (probably a release too) before being mergable"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pylint-dev/pylint/milestones/51","html_url":"https://github.com/pylint-dev/pylint/milestone/51","labels_url":"https://api.github.com/repos/pylint-dev/pylint/milestones/51/labels","id":7159222,"node_id":"MI_kwDOAtdnV84AbT22","number":51,"title":"2.12.0","description":"","creator":{"login":"Pierre-Sassoulas","id":5493666,"node_id":"MDQ6VXNlcjU0OTM2NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5493666?v=4","gravatar_id":"","url":"https://api.github.com/users/Pierre-Sassoulas","html_url":"https://github.com/Pierre-Sassoulas","followers_url":"https://api.github.com/users/Pierre-Sassoulas/followers","following_url":"https://api.github.com/users/Pierre-Sassoulas/following{/other_user}","gists_url":"https://api.github.com/users/Pierre-Sassoulas/gists{/gist_id}","starred_url":"https://api.github.com/users/Pierre-Sassoulas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pierre-Sassoulas/subscriptions","organizations_url":"https://api.github.com/users/Pierre-Sassoulas/orgs","repos_url":"https://api.github.com/users/Pierre-Sassoulas/repos","events_url":"https://api.github.com/users/Pierre-Sassoulas/events{/privacy}","received_events_url":"https://api.github.com/users/Pierre-Sassoulas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":226,"state":"closed","created_at":"2021-09-16T15:50:04Z","updated_at":"2024-12-17T20:23:50Z","due_on":null,"closed_at":"2021-11-25T14:30:10Z"},"comments":1,"created_at":"2021-09-17T08:45:33Z","updated_at":"2021-10-07T12:31:40Z","closed_at":"2021-10-07T12:31:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\r\n\r\nAfter 2.11 dataclass with dict causes fatal error.\r\n\r\nExample code:\r\n```python\r\n\"\"\"Example of fatal pylint error with dataclass.\"\"\"\r\nfrom typing import Dict, List, Any\r\nfrom dataclasses import dataclass, field\r\n\r\n\r\n@dataclass\r\nclass SomeData:\r\n    \"\"\"A dataclass.\"\"\"\r\n    a_dict: Dict[str, List[str]] = field(default_factory=dict)\r\n\r\n\r\n@dataclass\r\nclass SubSomeData(SomeData):\r\n    \"\"\"A subclass of a dataclass.\"\"\"\r\n\r\n    def __init__(self, **kwargs: Dict[str, Any]) -> None:\r\n        \"\"\"Subclass init func.\"\"\"\r\n        super().__init__(**kwargs)\r\n        if \"test\" in self.a_dict:\r\n            print(self.a_dict[\"test\"])\r\n\r\n```\r\n\r\n\r\n### Configuration\r\n\r\n_No response_\r\n\r\n### Command used\r\n\r\n```shell\r\npylint pylint_test.py\r\n```\r\n\r\n\r\n### Pylint output\r\n\r\n```shell\r\nException on node <If l.19 at 0x206550d06c8> in file '..\\pylint_test.py'\r\nTraceback (most recent call last):\r\n  File \"...\\lib\\site-packages\\pylint\\utils\\ast_walker.py\", line 75, in walk\r\n    callback(astroid)\r\n  File \"...\\lib\\site-packages\\pylint\\checkers\\base.py\", line 1104, in visit_if\r\n    self._check_using_constant_test(node, node.test)\r\n  File \"...\\lib\\site-packages\\pylint\\checkers\\base.py\", line 1142, in _check_using_constant_test\r\n    inferred = utils.safe_infer(test)\r\n  File \"...\\lib\\site-packages\\pylint\\checkers\\utils.py\", line 1181, in safe_infer\r\n    value = next(infer_gen)\r\n  File \"...\\lib\\site-packages\\astroid\\nodes\\node_ng.py\", line 105, in infer\r\n    yield from self._infer(context, **kwargs)\r\n  File \"...\\lib\\site-packages\\astroid\\inference.py\", line 872, in _infer_compare\r\n    retval = _do_compare(lhs, op, rhs)\r\n  File \"...\\lib\\site-packages\\astroid\\inference.py\", line 842, in _do_compare\r\n    left, right = _to_literal(left), _to_literal(right)\r\n  File \"...\\lib\\site-packages\\astroid\\inference.py\", line 814, in _to_literal\r\n    return ast.literal_eval(node.as_string())\r\n  File \"...\\lib\\site-packages\\astroid\\nodes\\node_ng.py\", line 547, in as_string\r\n    return AsStringVisitor()(self)\r\n  File \"...\\lib\\site-packages\\astroid\\nodes\\as_string.py\", line 55, in __call__\r\n    return node.accept(self).replace(DOC_NEWLINE, \"\\n\")\r\n  File \"...\\lib\\site-packages\\astroid\\nodes\\node_ng.py\", line 186, in accept\r\n    return func(self)\r\n  File \"...\\lib\\site-packages\\astroid\\nodes\\as_string.py\", line 185, in visit_classdef\r\n    args += [n.accept(self) for n in node.keywords]\r\nTypeError: 'NoneType' object is not iterable\r\n************* Module pylint_test\r\npylint_test.py:1:0: F0001: Fatal error while checking 'pylint_test.py'. Please open an issue in our bug tracker so we address this. There is a pre-filled template that you can use in 'C:\\Users\\chewitt\\AppData\\Local\\pylint\\pylint\\Cache\\pylint-crash-2021-09-17-09.txt'. (fatal)\r\n\r\n--------------------------------------------------------------------\r\nYour code has been rated at 10.00/10 (previous run: 10.00/10, +0.00)\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nAs on 2.10:\r\n\r\n```\r\n--------------------------------------------------------------------\r\nYour code has been rated at 10.00/10 (previous run: 10.00/10, +0.00)\r\n```\r\n\r\n### Pylint version\r\n\r\n```shell\r\n2.11.*\r\n```\r\n\r\nastroid==2.8.0\r\n\r\n\r\n### OS / Environment\r\n\r\nWindows 10\r\n\r\n### Additional dependencies\r\n\r\n_No response_","closed_by":{"login":"cdce8p","id":30130371,"node_id":"MDQ6VXNlcjMwMTMwMzcx","avatar_url":"https://avatars.githubusercontent.com/u/30130371?v=4","gravatar_id":"","url":"https://api.github.com/users/cdce8p","html_url":"https://github.com/cdce8p","followers_url":"https://api.github.com/users/cdce8p/followers","following_url":"https://api.github.com/users/cdce8p/following{/other_user}","gists_url":"https://api.github.com/users/cdce8p/gists{/gist_id}","starred_url":"https://api.github.com/users/cdce8p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdce8p/subscriptions","organizations_url":"https://api.github.com/users/cdce8p/orgs","repos_url":"https://api.github.com/users/cdce8p/repos","events_url":"https://api.github.com/users/cdce8p/events{/privacy}","received_events_url":"https://api.github.com/users/cdce8p/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pylint-dev/pylint/issues/5030/timeline","performed_via_github_app":null,"state_reason":"completed"}