diff --git a/bin/test b/bin/test
index b13c5920a..e3aa2b9a7 100755
--- a/bin/test
+++ b/bin/test
@@ -1,4 +1,5 @@
 #!/bin/sh
 (cd diesel && cargo test --features unstable) &&
   (cd diesel_cli && cargo test) &&
+  (cd diesel_codegen && cargo test --no-default-features --features nightly) &&
   (cd diesel_tests && cargo test --features unstable --no-default-features)
diff --git a/diesel_codegen/src/model.rs b/diesel_codegen/src/model.rs
index 077ea9a34..7a5054030 100644
--- a/diesel_codegen/src/model.rs
+++ b/diesel_codegen/src/model.rs
@@ -39,8 +39,7 @@ impl Model {
     }
 
     pub fn table_name(&self) -> ast::Ident {
-        let pluralized = format!("{}s", self.name.name.as_str());
-        str_to_ident(&pluralized.to_lowercase())
+        str_to_ident(&infer_table_name(&self.name.name.as_str()))
     }
 
     pub fn attr_named(&self, name: ast::Ident) -> &Attr {
@@ -49,3 +48,32 @@ impl Model {
         }).expect(&format!("Couldn't find an attr named {}", name))
     }
 }
+
+fn infer_table_name(name: &str) -> String {
+    let mut result = String::with_capacity(name.len());
+    result.push_str(&name[..1].to_lowercase());
+    for character in name[1..].chars() {
+        if character.is_uppercase() {
+            result.push('_');
+            for lowercase in character.to_lowercase() {
+                result.push(lowercase);
+            }
+        } else {
+            result.push(character);
+        }
+    }
+    result.push('s');
+    result
+}
+
+#[test]
+fn infer_table_name_pluralizes_and_downcases() {
+    assert_eq!("foos", &infer_table_name("Foo"));
+    assert_eq!("bars", &infer_table_name("Bar"));
+}
+
+#[test]
+fn infer_table_name_properly_handles_underscores() {
+    assert_eq!("foo_bars", &infer_table_name("FooBar"));
+    assert_eq!("foo_bar_bazs", &infer_table_name("FooBarBaz"));
+}
