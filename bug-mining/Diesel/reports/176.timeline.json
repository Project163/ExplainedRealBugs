[{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517392676","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517392676","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517392676,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzM5MjY3Ng==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T17:53:50Z","updated_at":"2019-08-01T17:53:50Z","body":"It seems like this issue is specific to mysql 8.0.17. We are already aware of this but nobody had enough time to look into it yet. Maybe I will find some time in the next few days. In the mean time just use 8.0.16 which should work fine.\n\nSee #2108 for some details.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517392676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517402312","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517402312","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517402312,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQwMjMxMg==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T18:20:27Z","updated_at":"2019-08-01T18:20:45Z","body":"Yep, it worked. The following patch fixes the problem:\r\n\r\n```diff\r\ndiff --git a/docker-compose.yml b/docker-compose.yml\r\nindex 80bd7b1a..9592e55a 100644\r\n--- a/docker-compose.yml\r\n+++ b/docker-compose.yml\r\n@@ -1,7 +1,7 @@\r\n version: '3'\r\n services:\r\n   mysql:\r\n-    image: mysql\r\n+    image: mysql:8.0.16\r\n     container_name: diesel.mysql\r\n     volumes:\r\n       - \"mysql-data:/var/lib/mysql/:delegated\"\r\n```\r\n\r\nI also had to delete old docker volume with `docker volume rm diesel_mysql-data` because otherwise mysql wouldn't start.\r\n\r\nThank you for the prompt response and feel free to close this issue if it's a duplicate.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517402312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517407570","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517407570","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517407570,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQwNzU3MA==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T18:35:41Z","updated_at":"2019-08-01T18:35:41Z","body":"Looking at the error message and MySQL changelog, this seems relevant:\r\n\r\nhttps://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-17.html#mysqld-8-0-17-deprecation-removal\r\n\r\n> Use of || is deprecated unless the PIPES_AS_CONCAT SQL mode is enabled. In that case, || signifies the SQL-standard string concatenation operator).\r\n\r\nAlthough we do set `PIPES_AS_CONCAT` there: https://github.com/diesel-rs/diesel/blob/0b6c59e36cef3faea0184404e43e3db4739d1193/diesel/src/mysql/connection/mod.rs#L134... So it should still work.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517407570/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517410063","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517410063","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517410063,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQxMDA2Mw==","user":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T18:42:52Z","updated_at":"2019-08-01T18:42:52Z","body":"Thanks for your report, I'll take a look shortly.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517410063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517424102","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517424102","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517424102,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQyNDEwMg==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:25:04Z","updated_at":"2019-08-01T19:25:04Z","body":"I updated docker-compose to run the two versions of mysql side by side on different ports, and created a small isolated script to show the difference between them. Mysql client needs to be installed locally in order to run them.\r\n\r\n``` bash\r\n# Note: the two commands are only different by port number.\r\n$ echo \"SET sql_mode=(SELECT CONCAT(@@sql_mode, ',PIPES_AS_CONCAT')); select 'ab' like 'a' || '%'\" | mysql --port 3307 --host localhost --protocol=TCP --user root diesel_test\r\n'ab' like 'a' || '%'\r\n1\r\n\r\n$ echo \"SET sql_mode=(SELECT CONCAT(@@sql_mode, ',PIPES_AS_CONCAT')); select 'ab' like 'a' || '%'\" | mysql --port 3308 --host localhost --protocol=TCP --user root diesel_test\r\nERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '|| '%'' at line 1\r\n```\r\n\r\nMy docker-compose:\r\n\r\n```yml\r\nversion: '3'\r\nservices:\r\n  mysql:\r\n    image: mysql:8.0.17\r\n    container_name: diesel.mysql\r\n    volumes:\r\n      - \"mysql-data:/var/lib/mysql/:delegated\"\r\n      - \"./docker/mysql/init:/docker-entrypoint-initdb.d\"\r\n    ports:\r\n      - \"3308:3306\"\r\n    environment:\r\n      - MYSQL_ALLOW_EMPTY_PASSWORD=true\r\n\r\n  mysql-old:\r\n    image: mysql:8.0.16\r\n    container_name: diesel.mysql.old\r\n    volumes:\r\n      - \"mysql-data-old:/var/lib/mysql/:delegated\"\r\n      - \"./docker/mysql/init:/docker-entrypoint-initdb.d\"\r\n    ports:\r\n      - \"3307:3306\"\r\n    environment:\r\n      - MYSQL_ALLOW_EMPTY_PASSWORD=true\r\n\r\nvolumes:\r\n  mysql-data:\r\n    driver: local\r\n  mysql-data-old:\r\n    driver: local\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517424102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517432317","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517432317","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517432317,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQzMjMxNw==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:51:27Z","updated_at":"2019-08-01T19:51:27Z","body":"So I've digged a bit further into this:\r\n\r\nEnabling `PIPES_AS_CONCAT` seems to work fine on both versions because `SELECT 'abc' || 'def';` fine for both.\r\n\r\nThe actual query that fails is this one:\r\n```sql\r\nSELECT `users`.`name`, `posts`.`title` FROM (`users` INNER JOIN `posts` ON `posts`.`title` LIKE `users`.`name` || '%');\r\n```\r\n\r\nNotably the concat operator is used in the on clause of an join.  I was also able to reproduce this using the concat operator as part of a normal where clause, so the new version seems to have changed the behaviour their. I would say this is a bug of mysql side and should be reported there. Anyone interested in doing that?\r\n\r\nInterestingly this is fixable by just adding a set of brackets around the strings for the concat operator.  So the following query works fine:\r\n\r\n```sql\r\nSELECT `users`.`name`, `posts`.`title` FROM (`users` INNER JOIN `posts` ON `posts`.`title` LIKE (`users`.`name` || '%'));\r\n```\r\n\r\nI will think about what's the best way to work around that in short term on our end.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517432317/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517434526","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517434526","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517434526,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQzNDUyNg==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:57:28Z","updated_at":"2019-08-01T19:57:28Z","body":"I'll report a bug. Will post a link there later.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517434526/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517436501","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517436501","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517436501,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQzNjUwMQ==","user":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T20:02:20Z","updated_at":"2019-08-01T20:02:20Z","body":"Oh, good point, this query also works fine.\r\n`SET sql_mode=(SELECT CONCAT(@@sql_mode, ',PIPES_AS_CONCAT')); select 'ab' like ('a' || '%');`","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517436501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517437643","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517437643","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517437643,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQzNzY0Mw==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T20:05:35Z","updated_at":"2019-08-01T20:05:35Z","body":"https://bugs.mysql.com/bug.php?id=96405","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517437643/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2527744873,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI1Mjc3NDQ4NzM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527744873","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"56a0adf17827937325b48ac3f81c21fd72717248","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/56a0adf17827937325b48ac3f81c21fd72717248","created_at":"2019-08-01T20:15:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517454597","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517454597","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517454597,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ1NDU5Nw==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T20:55:22Z","updated_at":"2019-08-01T20:55:22Z","body":"FWIW, I think I worked around the bug locally with slightly smaller changes than 56a0adf17827937325b48ac3f81c21fd72717248. The following patch fixes the test for 8.0.17, and 8.0.16 also works as before. Don't know if it's the right implementation though, maybe I did something stupid. But it compiles!\r\n\r\n```diff\r\ndiff --git a/diesel/src/expression_methods/text_expression_methods.rs b/diesel/src/expression_methods/text_expression_methods.rs\r\nindex 55395bb2..9e1e31e8 100644\r\n--- a/diesel/src/expression_methods/text_expression_methods.rs\r\n+++ b/diesel/src/expression_methods/text_expression_methods.rs\r\n@@ -1,6 +1,7 @@\r\n use expression::operators::{Concat, Like, NotLike};\r\n use expression::{AsExpression, Expression};\r\n use sql_types::{Nullable, Text};\r\n+use expression::grouped::Grouped;\r\n \r\n /// Methods present on text expressions\r\n pub trait TextExpressionMethods: Expression + Sized {\r\n@@ -55,8 +56,8 @@ pub trait TextExpressionMethods: Expression + Sized {\r\n     /// assert_eq!(Ok(expected_names), names);\r\n     /// # }\r\n     /// ```\r\n-    fn concat<T: AsExpression<Self::SqlType>>(self, other: T) -> Concat<Self, T::Expression> {\r\n-        Concat::new(self, other.as_expression())\r\n+    fn concat<T: AsExpression<Self::SqlType>>(self, other: T) -> Grouped<Concat<Self, T::Expression>> {\r\n+        Grouped(Concat::new(self, other.as_expression()))\r\n     }\r\n \r\n     /// Returns a SQL `LIKE` expression\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517454597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517457470","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517457470","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517457470,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ1NzQ3MA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T21:04:00Z","updated_at":"2019-08-01T21:04:00Z","body":"Yes that also would work with the downside of changing the type signature of queries containing a concat operator. I would rather like to avoid changing that signature in a incompatible way, if there is another way, but probably other people from @diesel-rs/contributors have different opinion here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517457470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2527865037,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwMzc=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865037","actor":{"login":"killercup","id":20063,"node_id":"MDQ6VXNlcjIwMDYz","avatar_url":"https://avatars.githubusercontent.com/u/20063?v=4","gravatar_id":"","url":"https://api.github.com/users/killercup","html_url":"https://github.com/killercup","followers_url":"https://api.github.com/users/killercup/followers","following_url":"https://api.github.com/users/killercup/following{/other_user}","gists_url":"https://api.github.com/users/killercup/gists{/gist_id}","starred_url":"https://api.github.com/users/killercup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killercup/subscriptions","organizations_url":"https://api.github.com/users/killercup/orgs","repos_url":"https://api.github.com/users/killercup/repos","events_url":"https://api.github.com/users/killercup/events{/privacy}","received_events_url":"https://api.github.com/users/killercup/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:00Z","performed_via_github_app":null},{"id":2527865042,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNDI=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865042","actor":{"login":"yamishi13","id":187043,"node_id":"MDQ6VXNlcjE4NzA0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/187043?v=4","gravatar_id":"","url":"https://api.github.com/users/yamishi13","html_url":"https://github.com/yamishi13","followers_url":"https://api.github.com/users/yamishi13/followers","following_url":"https://api.github.com/users/yamishi13/following{/other_user}","gists_url":"https://api.github.com/users/yamishi13/gists{/gist_id}","starred_url":"https://api.github.com/users/yamishi13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yamishi13/subscriptions","organizations_url":"https://api.github.com/users/yamishi13/orgs","repos_url":"https://api.github.com/users/yamishi13/repos","events_url":"https://api.github.com/users/yamishi13/events{/privacy}","received_events_url":"https://api.github.com/users/yamishi13/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:00Z","performed_via_github_app":null},{"id":2527865048,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNDg=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865048","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865051,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNTE=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865051","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865053,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNTM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865053","actor":{"login":"mfpiccolo","id":3249825,"node_id":"MDQ6VXNlcjMyNDk4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3249825?v=4","gravatar_id":"","url":"https://api.github.com/users/mfpiccolo","html_url":"https://github.com/mfpiccolo","followers_url":"https://api.github.com/users/mfpiccolo/followers","following_url":"https://api.github.com/users/mfpiccolo/following{/other_user}","gists_url":"https://api.github.com/users/mfpiccolo/gists{/gist_id}","starred_url":"https://api.github.com/users/mfpiccolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfpiccolo/subscriptions","organizations_url":"https://api.github.com/users/mfpiccolo/orgs","repos_url":"https://api.github.com/users/mfpiccolo/repos","events_url":"https://api.github.com/users/mfpiccolo/events{/privacy}","received_events_url":"https://api.github.com/users/mfpiccolo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865055,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNTU=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865055","actor":{"login":"Eijebong","id":3650385,"node_id":"MDQ6VXNlcjM2NTAzODU=","avatar_url":"https://avatars.githubusercontent.com/u/3650385?v=4","gravatar_id":"","url":"https://api.github.com/users/Eijebong","html_url":"https://github.com/Eijebong","followers_url":"https://api.github.com/users/Eijebong/followers","following_url":"https://api.github.com/users/Eijebong/following{/other_user}","gists_url":"https://api.github.com/users/Eijebong/gists{/gist_id}","starred_url":"https://api.github.com/users/Eijebong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eijebong/subscriptions","organizations_url":"https://api.github.com/users/Eijebong/orgs","repos_url":"https://api.github.com/users/Eijebong/repos","events_url":"https://api.github.com/users/Eijebong/events{/privacy}","received_events_url":"https://api.github.com/users/Eijebong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865059,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNTk=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865059","actor":{"login":"mcasper","id":6878025,"node_id":"MDQ6VXNlcjY4NzgwMjU=","avatar_url":"https://avatars.githubusercontent.com/u/6878025?v=4","gravatar_id":"","url":"https://api.github.com/users/mcasper","html_url":"https://github.com/mcasper","followers_url":"https://api.github.com/users/mcasper/followers","following_url":"https://api.github.com/users/mcasper/following{/other_user}","gists_url":"https://api.github.com/users/mcasper/gists{/gist_id}","starred_url":"https://api.github.com/users/mcasper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcasper/subscriptions","organizations_url":"https://api.github.com/users/mcasper/orgs","repos_url":"https://api.github.com/users/mcasper/repos","events_url":"https://api.github.com/users/mcasper/events{/privacy}","received_events_url":"https://api.github.com/users/mcasper/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865062,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNjI=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865062","actor":{"login":"notryanb","id":9320141,"node_id":"MDQ6VXNlcjkzMjAxNDE=","avatar_url":"https://avatars.githubusercontent.com/u/9320141?v=4","gravatar_id":"","url":"https://api.github.com/users/notryanb","html_url":"https://github.com/notryanb","followers_url":"https://api.github.com/users/notryanb/followers","following_url":"https://api.github.com/users/notryanb/following{/other_user}","gists_url":"https://api.github.com/users/notryanb/gists{/gist_id}","starred_url":"https://api.github.com/users/notryanb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/notryanb/subscriptions","organizations_url":"https://api.github.com/users/notryanb/orgs","repos_url":"https://api.github.com/users/notryanb/repos","events_url":"https://api.github.com/users/notryanb/events{/privacy}","received_events_url":"https://api.github.com/users/notryanb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865066,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNjY=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865066","actor":{"login":"tessgriffin","id":10032968,"node_id":"MDQ6VXNlcjEwMDMyOTY4","avatar_url":"https://avatars.githubusercontent.com/u/10032968?v=4","gravatar_id":"","url":"https://api.github.com/users/tessgriffin","html_url":"https://github.com/tessgriffin","followers_url":"https://api.github.com/users/tessgriffin/followers","following_url":"https://api.github.com/users/tessgriffin/following{/other_user}","gists_url":"https://api.github.com/users/tessgriffin/gists{/gist_id}","starred_url":"https://api.github.com/users/tessgriffin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tessgriffin/subscriptions","organizations_url":"https://api.github.com/users/tessgriffin/orgs","repos_url":"https://api.github.com/users/tessgriffin/repos","events_url":"https://api.github.com/users/tessgriffin/events{/privacy}","received_events_url":"https://api.github.com/users/tessgriffin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"id":2527865069,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Mjc4NjUwNjk=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2527865069","actor":{"login":"galuhsahid","id":10180442,"node_id":"MDQ6VXNlcjEwMTgwNDQy","avatar_url":"https://avatars.githubusercontent.com/u/10180442?v=4","gravatar_id":"","url":"https://api.github.com/users/galuhsahid","html_url":"https://github.com/galuhsahid","followers_url":"https://api.github.com/users/galuhsahid/followers","following_url":"https://api.github.com/users/galuhsahid/following{/other_user}","gists_url":"https://api.github.com/users/galuhsahid/gists{/gist_id}","starred_url":"https://api.github.com/users/galuhsahid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/galuhsahid/subscriptions","organizations_url":"https://api.github.com/users/galuhsahid/orgs","repos_url":"https://api.github.com/users/galuhsahid/repos","events_url":"https://api.github.com/users/galuhsahid/events{/privacy}","received_events_url":"https://api.github.com/users/galuhsahid/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-01T21:04:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517461649","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517461649","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517461649,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ2MTY0OQ==","user":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T21:17:44Z","updated_at":"2019-08-01T21:17:44Z","body":"I think 56a0adf17827937325b48ac3f81c21fd72717248 seems better that it just changes the way `||` parses without touching `fn concat`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517461649/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JohnTitor","id":25030997,"node_id":"MDQ6VXNlcjI1MDMwOTk3","avatar_url":"https://avatars.githubusercontent.com/u/25030997?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnTitor","html_url":"https://github.com/JohnTitor","followers_url":"https://api.github.com/users/JohnTitor/followers","following_url":"https://api.github.com/users/JohnTitor/following{/other_user}","gists_url":"https://api.github.com/users/JohnTitor/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnTitor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnTitor/subscriptions","organizations_url":"https://api.github.com/users/JohnTitor/orgs","repos_url":"https://api.github.com/users/JohnTitor/repos","events_url":"https://api.github.com/users/JohnTitor/events{/privacy}","received_events_url":"https://api.github.com/users/JohnTitor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517470349","html_url":"https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517470349","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","id":517470349,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ3MDM0OQ==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T21:48:15Z","updated_at":"2019-08-01T21:51:18Z","body":"Looking at it - maybe it's a good idea to use parentheses more generously in general.\r\n\r\nI just found another bug (in diesel this time). Consider this:\r\n\r\n```diff\r\ndiff --git a/diesel/src/query_dsl/mod.rs b/diesel/src/query_dsl/mod.rs\r\nindex 584cb29d..db2c0f8d 100644\r\n--- a/diesel/src/query_dsl/mod.rs\r\n+++ b/diesel/src/query_dsl/mod.rs\r\n@@ -415,6 +415,7 @@ pub trait QueryDsl: Sized {\r\n     ///\r\n     /// let data = users\r\n     ///     .inner_join(posts.on(title.like(name.concat(\"%\"))))\r\n+    ///     .filter(title.eq(\"ABRA\").eq(title.eq(\"CADABRA\")))\r\n     ///     .select((name, title))\r\n     ///     .load(&connection);\r\n     /// let expected_data = vec![\r\n\r\n```\r\n\r\nYou can run the test with `cd diesel && RUST_TEST_THREADS=1 cargo test --no-default-features --features postgres query_dsl::QueryDsl::inner_join`.\r\n\r\nThis change should not break the test because `title = \"ABRA\"` is false for all rows in test data and `title = \"CADABRA\"` is also false. `false = false` should evaluate to `true`, so the generated `WHERE` shouldn't filter out any rows and the test should pass (even on 8.0.16).\r\n\r\nIt does break the test, however, because the generated condition evaluates to false, so no records are returned as a result. The reason is missing brackets.\r\n\r\n```sql\r\n-- this is generated\r\nWHERE title = title = title = title\r\n\r\n-- this should be generated instead\r\nWHERE (title = title) = (title = title)\r\n```\r\n\r\n```\r\nmysql> select (2=2)=(2=2), 2=2 = 2=2;\r\n+-------------+-----------+\r\n| (2=2)=(2=2) | 2=2 = 2=2 |\r\n+-------------+-----------+\r\n|           1 |         0 |\r\n+-------------+-----------+\r\n1 row in set (0.00 sec)\r\n```\r\n\r\nMore than that, in postgres the `title = title = title = title` part yields a syntax error.\r\n\r\nThis example is a bit contrived, but I'm pretty sure there are other, more realistic cases for which missing parentheses mean broken SQL.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/517470349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2536618317,"node_id":"MDExOkNsb3NlZEV2ZW50MjUzNjYxODMxNw==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2536618317","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"56a0adf17827937325b48ac3f81c21fd72717248","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/56a0adf17827937325b48ac3f81c21fd72717248","created_at":"2019-08-06T12:42:54Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T15:26:35Z","updated_at":"2019-08-08T15:26:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140/events","html_url":"https://github.com/diesel-rs/diesel/issues/2140","id":478540946,"node_id":"MDU6SXNzdWU0Nzg1NDA5NDY=","number":2140,"title":"Missing parenthesis lead to broken SQL queries","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/diesel-rs/diesel/milestones/16","html_url":"https://github.com/diesel-rs/diesel/milestone/16","labels_url":"https://api.github.com/repos/diesel-rs/diesel/milestones/16/labels","id":3954983,"node_id":"MDk6TWlsZXN0b25lMzk1NDk4Mw==","number":16,"title":"2.0","description":"","creator":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":40,"state":"closed","created_at":"2019-01-09T08:56:03Z","updated_at":"2024-11-24T07:42:53Z","due_on":null,"closed_at":"2022-10-27T10:21:27Z"},"comments":7,"created_at":"2019-08-08T15:26:35Z","updated_at":"2020-10-05T15:32:54Z","closed_at":"2020-10-05T15:32:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nIf you want to report a bug, we added some points below you can fill out. If you want to request a feature, feel free to remove all the irrelevant text. In addition to this [issue tracker](https://github.com/diesel-rs/diesel/issues), you can also talk to Diesel maintainers and users on [Gitter](https://gitter.im/diesel-rs/diesel).\r\n-->\r\n\r\n## Setup\r\n\r\n### Versions\r\n\r\n- **Rust:** rustc 1.36.0 (a53f9df32 2019-07-03)\r\n- **Diesel:** latest master (0cacfa080183076669112a5ccb192d9c30b8ac15)\r\n- **Database:** psql (11.1, server 11.4 (Debian 11.4-1.pgdg90+1))\r\n- **Operating System** Debian 11.4-1.pgdg90+1\r\n\r\n### Feature Flags\r\n\r\n- **diesel:** postgres\r\n\r\n## Problem Description\r\n\r\nMissing parentheses around equality operator lead to malformed SQL queries in the best case and wrong SQL queries silently returning incorrect results in the worst case.\r\n\r\n### What are you trying to accomplish?\r\n\r\nBuild a query which corresponds to something like this:\r\n\r\n```sql\r\nSELECT (1 > 0) = true\r\n```\r\n\r\nTranslating this to diesel, the code will look like this:\r\n\r\n```rust\r\nnumbers.select((n.gt(0)).eq(true));\r\n```\r\n\r\nFull runnable test can be found in my `operator-precedence-bug` branch of diesel. Here is the full test https://github.com/DNNX/diesel/compare/master...operator-precedence-bug which can be run with `(cd diesel_tests && cargo test --features \"postgres\" --no-default-features expressions::test_operator_precedence)`.\r\n\r\n### What is the expected output?\r\n\r\nGreen test.\r\n\r\n### What is the actual output?\r\n\r\n```\r\n  diesel git:(operator-precedence-bug)  (cd diesel_tests && cargo test --features \"postgres\" --no-default-features expressions::test_operator_precedence)\r\n   Compiling diesel_tests v0.1.0 (/Users/dnnx/work/diesel/diesel_tests)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 12.26s\r\n     Running /Users/dnnx/work/diesel/target/debug/deps/integration_tests-514980afda54a7bd\r\n\r\nrunning 1 test\r\ntest expressions::test_operator_precedence ... FAILED\r\n\r\nfailures:\r\n\r\n---- expressions::test_operator_precedence stdout ----\r\nthread 'expressions::test_operator_precedence' panicked at 'assertion failed: `(left == right)`\r\n  left: `Ok(true)`,\r\n right: `Err(DatabaseError(__Unknown, \"syntax error at or near \\\"=\\\"\"))`', diesel_tests/tests/expressions/mod.rs:469:5\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n\r\n\r\nfailures:\r\n    expressions::test_operator_precedence\r\n\r\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 309 filtered out\r\n\r\nerror: test failed, to rerun pass '--test integration_tests'\r\n```\r\n\r\n### Are you seeing any additional errors?\r\n\r\nNo.\r\n\r\n### Steps to reproduce\r\n\r\n1. Check our my branch or apply the diff below to latest diesel master.\r\n2. Run `(cd diesel_tests && cargo test --features \"postgres\" --no-default-features expressions::test_operator_precedence).\r\n\r\n```diff\r\ndiff --git a/diesel_tests/tests/expressions/mod.rs b/diesel_tests/tests/expressions/mod.rs\r\nindex e6cd0b1e..2dbd584c 100644\r\n--- a/diesel_tests/tests/expressions/mod.rs\r\n+++ b/diesel_tests/tests/expressions/mod.rs\r\n@@ -454,3 +454,17 @@ fn test_arrays_b() {\r\n \r\n     assert_eq!(value, vec![7, 14]);\r\n }\r\n+\r\n+#[test]\r\n+fn test_operator_precedence() {\r\n+    use self::numbers::columns::*;\r\n+    use self::numbers::table as numbers;\r\n+\r\n+    let connection = connection();\r\n+    connection\r\n+        .execute(\"INSERT INTO numbers (n) VALUES (2)\")\r\n+        .unwrap();\r\n+    let source = numbers.select((n.gt(0)).eq(true));\r\n+\r\n+    assert_eq!(Ok(true), source.first(&connection));\r\n+}\r\n```\r\n\r\n### Additional notes\r\n\r\nI already raised this issue in https://github.com/diesel-rs/diesel/issues/2133#issuecomment-517470349, but I probably failed to express myself very clearly. \r\n\r\nThe big problem with this bug is that it may result in incorrectly working SQL queries, in particular in Mysql. Mysql is less strict about queries, so it parses things like `select 2=2=2=2` just fine, whereas Postgres rejects such queries.\r\n\r\nI tried to fix the bug myself, but I don't even know where to start. I think adding parentheses around every operator might be a solution, but there's one subtle issue with it: diesel also uses `eq` to generate `SET` part of the `UPDATE` statements - and there having parentheses around `x = <expr>` in `UPDATE foo SET x = <expr>` will be a problem.\r\n\r\n<!--\r\nPlease include as much of your codebase as needed to reproduce the error.  If the relevant files are large, please consider linking to a public repository or a [Gist](https://gist.github.com/).\r\n\r\nPlease post as much of your database schema as necessary. If you are using `infer_schema!`, you can use `diesel print-schema` and post the relevant parts from that.\r\n-->\r\n\r\n## Checklist\r\n\r\n- [x] I have already looked over the [issue tracker](https://github.com/diesel-rs/diesel/issues) for similar issues.\r\n- [x] This issue can be reproduced on Rust's stable channel. (Your issue will be\r\n  closed if this is not the case)\r\n\r\n<!--\r\nThank you for your submission!  You're helping make Diesel more robust \r\n\r\nWe'll try to respond as quickly as possible.\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4043925505,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNDM5MjU1MDU=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/4043925505","actor":{"login":"disconsented","id":1381469,"node_id":"MDQ6VXNlcjEzODE0Njk=","avatar_url":"https://avatars.githubusercontent.com/u/1381469?v=4","gravatar_id":"","url":"https://api.github.com/users/disconsented","html_url":"https://github.com/disconsented","followers_url":"https://api.github.com/users/disconsented/followers","following_url":"https://api.github.com/users/disconsented/following{/other_user}","gists_url":"https://api.github.com/users/disconsented/gists{/gist_id}","starred_url":"https://api.github.com/users/disconsented/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/disconsented/subscriptions","organizations_url":"https://api.github.com/users/disconsented/orgs","repos_url":"https://api.github.com/users/disconsented/repos","events_url":"https://api.github.com/users/disconsented/events{/privacy}","received_events_url":"https://api.github.com/users/disconsented/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3c8031ac86890e59a1f295ca44adbc35ed3fe3ad","commit_url":"https://api.github.com/repos/NarrativeApp/diesel/commits/3c8031ac86890e59a1f295ca44adbc35ed3fe3ad","created_at":"2020-11-26T21:41:50Z","performed_via_github_app":null}]