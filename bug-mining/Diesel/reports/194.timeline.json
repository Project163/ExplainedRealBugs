[{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519572042","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-519572042","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":519572042,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU3MjA0Mg==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T15:38:43Z","updated_at":"2019-08-08T15:38:43Z","body":"To be clear `numbers.select((n.gt(0)).eq(true));` is never to be expected to insert any parenthesis based on parenthesis on the rust code because there is no way to tell at a type system level (that's where the query string is build) if there are parenthesis.\r\n\r\nBeside of that I see two possible solutions to fix this:\r\n\r\n1. Being smarter about where the insert parenthesis in the generated SQL\r\n2. Expose a function to explicitly group query part and document that this should be used if required.\r\n\r\nAs you've already noticed it is not as simple as adding just parenthesis everywhere the first solution would involve a quite heavy rework of our internal query constructing workflow. Additionally even than there may be expressions where it is just not decidable which variant is the right one. In that light I'm in favour of keeping the rules as simple as possible and just add parenthesis in as few cases as possible and expose the functionality to insert parenthesis manually.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519572042/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519673780","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-519673780","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":519673780,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTY3Mzc4MA==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T20:23:17Z","updated_at":"2019-08-08T20:23:17Z","body":"> To be clear numbers.select((n.gt(0)).eq(true)); is never to be expected to insert any parenthesis based on parenthesis on the rust code because there is no way to tell at a type system level (that's where the query string is build) if there are parenthesis.\r\n\r\nYes, I understand that.\r\n\r\n> ... Additionally even than there may be expressions where it is just not decidable which variant is the right one.\r\n\r\nCould you please give an example? From what I can see, if we just wrap all binary operations in parenthesis, the resulting SQL AST will be exactly the same as the original Rust AST (which is what library user want, as I see it). Considering the example of `n.eq(0).eq(true)`, syntax tree would be something like:\r\n\r\n```\r\n           Op =\r\n         /      \\\r\n       Op =      Const true\r\n    /       \\\r\nVar n       Const 0\r\n```\r\n\r\nAnd, assuming we put parenthesis around every binary operation, SQL syntax tree is exactly the same. It will result in `(n = 0) = true` then, which is semantically equal to the Rust one.\r\n\r\nAs to using `eq` in `UPDATE ... SET` (as in `update(posts).set(body.eq(\"updated\"))`, I don't really understand why the same `eq` function is used there as in boolean-returning equality expression. Those are kind of different things. `=` in `UPDATE` doesn't return anything - it's not an expression; comparison operator `=` returns a bool. Also, right hand side of `=` in `UPDATE`  can't be an arbitrary expression, unlike in equality comparison operator. It's just a coincidence that they both syntactically represented as equal sign. Assignment operator could as well be `:=` or `<-` or something along those lines, and equality operator could easily be `==`.\r\n\r\nIt may sound stupid or maybe overly na√Øve, but what if we change the public api of `update/set` to look like this:\r\n\r\n```rust\r\nupdate(posts).set(body, \"updated\");\r\nupdate(users).set(login_attempts, login_attempts + 1);\r\n\r\n// or\r\n\r\nupdate(posts).set(body.assign(\"updated\"));\r\n```\r\n\r\nThis way we could freely add parenthesis around all binary operators and be sure that Rust and SQL expressions have the same meaning.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519673780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519676384","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-519676384","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":519676384,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTY3NjM4NA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T20:31:07Z","updated_at":"2019-08-08T20:31:07Z","body":"> Could you please give an example? \r\n\r\nWhat about the following, pathological example?\r\n```rust\r\ntrue.into_sql::<Bool>.eq(false).eq(false)\r\n```\r\nThat would generate the following query ` true = false = flase` where both variants (`(true = false) = false` and  `true = (false = false)` would be meaningful (depending on the context and the definition of meaningful, but it's just an example ü§∑‚Äç)\r\n\r\n> It may sound stupid or maybe overly na√Øve, but what if we change the public api of update/set to look like this:\r\n\r\nChanging the public API of `update/set` is currently not an option because of our backwards compatibility promise.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519676384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519833355","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-519833355","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":519833355,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTgzMzM1NQ==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T08:35:58Z","updated_at":"2019-08-09T08:35:58Z","body":"```\r\ntrue.into_sql::<Bool>.eq(false).eq(false)\r\n```\r\n\r\nWell I think syntactically this is the tree below, no ambiguity here. So if we properly wrap every expression in brackets, it will render as `((true = false) = false)`.\r\n\r\n```\r\n           Op =\r\n         /      \\\r\n       Op =      Const false\r\n    /       \\\r\nVar true       Const false\r\n```\r\n\r\nIf one wants `(true = (false = false))` to be generated, they have to write corresponding Rust: `true.into_sql::<Bool>.eq(false.into_sql::<Bool>.eq(true))`. Again, clear 1-1 mapping between Rust code and generated SQL.\r\n\r\n> Changing the public API of update/set is currently not an option because of our backwards compatibility promise.\r\n\r\nMakes total sense.\r\n\r\nSpeaking of keeping backward compatibility. I was also playing with the idea of changing the way `SET` expression is rendered. Let's assume all operations are generated with parenthesis, no exceptions. Then in order to \"fix\" `UPDATE...SET`, we can implement a new struct `Ungrouped`, which will \"override\" `walk_ast` implementation of given binary operator not to render `()` around the expression.\r\n\r\nWe can use it on one single place then, like this:\r\n\r\n```diff\r\ndiff --git a/diesel/src/query_builder/update_statement/mod.rs b/diesel/src/query_builder/update_statement/mod.rs\r\nindex 53ec7870..faeb7c70 100644\r\n--- a/diesel/src/query_builder/update_statement/mod.rs\r\n+++ b/diesel/src/query_builder/update_statement/mod.rs\r\n@@ -207,7 +207,7 @@ where\r\n         out.push_sql(\"UPDATE \");\r\n         self.table.from_clause().walk_ast(out.reborrow())?;\r\n         out.push_sql(\" SET \");\r\n-        self.values.walk_ast(out.reborrow())?;\r\n+        Ungrouped(self.values).walk_ast(out.reborrow())?;\r\n         self.where_clause.walk_ast(out.reborrow())?;\r\n         self.returning.walk_ast(out.reborrow())?;\r\n         Ok(())\r\n```\r\n\r\nHmmm, actually, looking at the code, I'm not even sure anymore that `update(t).set(x.eq(1))` would generate brackets around `x = 1` even if we override Eq to generate parenthesis no matter what. Looks like my assumption was wrong. I think, this code is used for `SET ...` rendering: https://github.com/diesel-rs/diesel/blob/master/diesel/src/query_builder/update_statement/changeset.rs#L72-L74, which is independent from the code which renders `x.eq(y)` when they are part of equality comparison expressions.\r\n\r\nSo, bottom line is: I still believe that the right way to go is to wrap all operator expressions in parenthesis there https://github.com/diesel-rs/diesel/blob/b649a86bd810fae05063710f8db73b88047333ee/diesel/src/expression/operators.rs#L109-L111.\r\n\r\nWhen I have more time, I'll play with the code. I want to see what is going to be broken by this change as I don't really see it now.\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519833355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519903517","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-519903517","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":519903517,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTkwMzUxNw==","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T12:40:51Z","updated_at":"2019-08-09T12:40:51Z","body":"I just made a little test and ran `(cd diesel_tests && RUST_TEST_THREADS=1 cargo test --no-default-features --features mysql)` (and `--features posgres` too) on this https://github.com/DNNX/diesel/compare/master...brackets-brackets-everywhere.\r\n\r\nAlmost everything passed with one exception: `between` tests. Because of the way `Between/NotBetween` structs are implemented, the `And` part is assumed to be a subexpression and it renders it as `(x BETWEEN (y AND z))`. But conceptually, `BETWEEN` is not a binary operator, it's a ternary construct. If we implement it this way, as a struct with 3 fields, and implement `QueryFragment` for it to avoid rendering inner parenthesis, everything is going to be green, probably :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/519903517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/520837980","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-520837980","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":520837980,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDgzNzk4MA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T13:37:48Z","updated_at":"2019-08-13T13:37:48Z","body":"First of all: Passing all tests in `diesel_tests` does not mean that there is no code out there that will break by this change. \r\nBeside of that I'm not sure if that follows the operator precedence from the underlying database systems. I would like to avoid situations where diesels generated sql diverges from those rules. (I cannot point out a example where this is the case, by this is something that needs to be verified.)\r\n\r\nAdditionally I would like to hear the opinion of the other @diesel-rs/core members here. \r\nMaybe open a PR and continue the discussion there?\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/520837980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2553405821,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTM0MDU4MjE=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2553405821","actor":{"login":"killercup","id":20063,"node_id":"MDQ6VXNlcjIwMDYz","avatar_url":"https://avatars.githubusercontent.com/u/20063?v=4","gravatar_id":"","url":"https://api.github.com/users/killercup","html_url":"https://github.com/killercup","followers_url":"https://api.github.com/users/killercup/followers","following_url":"https://api.github.com/users/killercup/following{/other_user}","gists_url":"https://api.github.com/users/killercup/gists{/gist_id}","starred_url":"https://api.github.com/users/killercup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killercup/subscriptions","organizations_url":"https://api.github.com/users/killercup/orgs","repos_url":"https://api.github.com/users/killercup/repos","events_url":"https://api.github.com/users/killercup/events{/privacy}","received_events_url":"https://api.github.com/users/killercup/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T13:37:48Z","performed_via_github_app":null},{"id":2553405824,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTM0MDU4MjQ=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2553405824","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T13:37:48Z","performed_via_github_app":null},{"id":2553405833,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTM0MDU4MzM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2553405833","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T13:37:49Z","performed_via_github_app":null},{"id":2553405842,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTM0MDU4NDI=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2553405842","actor":{"login":"Eijebong","id":3650385,"node_id":"MDQ6VXNlcjM2NTAzODU=","avatar_url":"https://avatars.githubusercontent.com/u/3650385?v=4","gravatar_id":"","url":"https://api.github.com/users/Eijebong","html_url":"https://github.com/Eijebong","followers_url":"https://api.github.com/users/Eijebong/followers","following_url":"https://api.github.com/users/Eijebong/following{/other_user}","gists_url":"https://api.github.com/users/Eijebong/gists{/gist_id}","starred_url":"https://api.github.com/users/Eijebong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eijebong/subscriptions","organizations_url":"https://api.github.com/users/Eijebong/orgs","repos_url":"https://api.github.com/users/Eijebong/repos","events_url":"https://api.github.com/users/Eijebong/events{/privacy}","received_events_url":"https://api.github.com/users/Eijebong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T13:37:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/521455630","html_url":"https://github.com/diesel-rs/diesel/issues/2140#issuecomment-521455630","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2140","id":521455630,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ1NTYzMA==","user":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T23:23:26Z","updated_at":"2019-08-14T23:23:26Z","body":"@weiznich This seems like the same issue as #2017, doesn't it? The same solution seems like it'd make sense IMO. I'm wondering if we should even just always insert parens for all uses of `infix_operator!`","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/521455630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2558173726,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU1ODE3MzcyNg==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2558173726","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-14T23:23:26Z","performed_via_github_app":null},{"id":2558173727,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTgxNzM3Mjc=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/2558173727","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-14T23:23:26Z","performed_via_github_app":null},{"id":3465285470,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDM0NjUyODU0NzA=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3465285470","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-06-21T07:36:39Z","milestone":{"title":"2.0"},"performed_via_github_app":null},{"id":3815203336,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MTUyMDMzMzY=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3815203336","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8c925d0468e5770467f91e7ad18e4120e736ad6c","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/8c925d0468e5770467f91e7ad18e4120e736ad6c","created_at":"2020-09-28T15:40:21Z","performed_via_github_app":null},{"id":3833430819,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MzM0MzA4MTk=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3833430819","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"29579f527e34bf72926ed8a8ad317ede110e5667","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/29579f527e34bf72926ed8a8ad317ede110e5667","created_at":"2020-10-02T10:52:15Z","performed_via_github_app":null},{"id":3833456868,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MzM0NTY4Njg=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3833456868","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ffc4c7a2a11a62afa59fd694753deba7a309802f","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/ffc4c7a2a11a62afa59fd694753deba7a309802f","created_at":"2020-10-02T10:59:46Z","performed_via_github_app":null},{"id":3833725575,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MzM3MjU1NzU=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3833725575","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a5e1a7495591f1618c3f26e8eefef2256e7a8512","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/a5e1a7495591f1618c3f26e8eefef2256e7a8512","created_at":"2020-10-02T12:20:16Z","performed_via_github_app":null},{"id":3833861327,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MzM4NjEzMjc=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3833861327","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2f8ab6ad4e6d228e8db17882b97c61fab0484a6a","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/2f8ab6ad4e6d228e8db17882b97c61fab0484a6a","created_at":"2020-10-02T12:59:22Z","performed_via_github_app":null},{"id":3834177341,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4MzQxNzczNDE=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3834177341","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bd196aa5a1a38845c93d8f87743ca82676707fe8","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/bd196aa5a1a38845c93d8f87743ca82676707fe8","created_at":"2020-10-02T14:14:43Z","performed_via_github_app":null},{"id":3840151349,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NDAxNTEzNDk=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3840151349","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0b72b377a7f314ae0b6d4e6e13cae8cab378ced7","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/0b72b377a7f314ae0b6d4e6e13cae8cab378ced7","created_at":"2020-10-05T12:25:22Z","performed_via_github_app":null},{"id":3840846169,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NDA4NDYxNjk=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3840846169","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7ff5e6327d5e88095cb4b342da13bf06d6d0d1cd","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/7ff5e6327d5e88095cb4b342da13bf06d6d0d1cd","created_at":"2020-10-05T14:43:06Z","performed_via_github_app":null},{"id":3841105389,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg0MTEwNTM4OQ==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3841105389","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"7ff5e6327d5e88095cb4b342da13bf06d6d0d1cd","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/7ff5e6327d5e88095cb4b342da13bf06d6d0d1cd","created_at":"2020-10-05T15:32:54Z","state_reason":null,"performed_via_github_app":null},{"id":3841105426,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NDExMDU0MjY=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3841105426","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"216f5ace729b2a15921c249b7b02893a21d56fbc","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/216f5ace729b2a15921c249b7b02893a21d56fbc","created_at":"2020-10-05T15:32:54Z","performed_via_github_app":null},{"actor":{"login":"Ten0","id":9094255,"node_id":"MDQ6VXNlcjkwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/9094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Ten0","html_url":"https://github.com/Ten0","followers_url":"https://api.github.com/users/Ten0/followers","following_url":"https://api.github.com/users/Ten0/following{/other_user}","gists_url":"https://api.github.com/users/Ten0/gists{/gist_id}","starred_url":"https://api.github.com/users/Ten0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ten0/subscriptions","organizations_url":"https://api.github.com/users/Ten0/orgs","repos_url":"https://api.github.com/users/Ten0/repos","events_url":"https://api.github.com/users/Ten0/events{/privacy}","received_events_url":"https://api.github.com/users/Ten0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-18T17:11:09Z","updated_at":"2020-12-18T17:11:09Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589/events","html_url":"https://github.com/diesel-rs/diesel/issues/2589","id":758506175,"node_id":"MDU6SXNzdWU3NTg1MDYxNzU=","number":2589,"title":"master: a.and(b) is nullable even though a and b are non nullable","user":{"login":"Ten0","id":9094255,"node_id":"MDQ6VXNlcjkwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/9094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Ten0","html_url":"https://github.com/Ten0","followers_url":"https://api.github.com/users/Ten0/followers","following_url":"https://api.github.com/users/Ten0/following{/other_user}","gists_url":"https://api.github.com/users/Ten0/gists{/gist_id}","starred_url":"https://api.github.com/users/Ten0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ten0/subscriptions","organizations_url":"https://api.github.com/users/Ten0/orgs","repos_url":"https://api.github.com/users/Ten0/repos","events_url":"https://api.github.com/users/Ten0/events{/privacy}","received_events_url":"https://api.github.com/users/Ten0/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2020-12-07T13:26:33Z","updated_at":"2021-01-25T09:53:48Z","closed_at":"2021-01-25T09:53:48Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Setup\r\n\r\n### Versions\r\n\r\n- **Rust:** latest stable - 1.48.0 (7eac88abb 2020-11-16)\r\n- **Diesel:** latest master (ff8e5b15ea0dfaa22e9c12c5ed2a0e23992b0617)\r\n- **Database:** postgresql\r\n- **Operating System** Linux\r\n\r\n### Feature Flags\r\n\r\n- **diesel:** postgres, chrono\r\n\r\n## Problem Description\r\na.and(b) is nullable even though a and b are non nullable\r\n\r\n### What are you trying to accomplish?\r\nWriting an `and` condition of which I expect the output to be non-nullable.\r\n\r\n### What is the expected output?\r\n*compiles*\r\n\r\n### What is the actual output?\r\n```\r\nerror[E0271]: type mismatch resolving `<Grouped<diesel::expression::operators::And<diesel::expression::nullable::Nullable<Grouped<diesel::expression::operators::Gt<C, diesel::expression::bound::Bound<Timestamptz, DateTime<Utc>>>>>, diesel::expression::nullable::Nullable<Grouped<diesel::expression::operators::Lt<C, diesel::expression::bound::Bound<Timestamptz, DateTime<Utc>>>>>>> as diesel::Expression>::SqlType == Bool`\r\n  --> src/lib.rs:49:29\r\n   |\r\n49 |             InInterval { gt, lt } => Box::new(column.gt(gt).and(column.lt(lt)))\r\n   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected struct `Bool`, found struct `diesel::sql_types::Nullable`\r\n   |\r\n   = note: expected struct `Bool`\r\n              found struct `diesel::sql_types::Nullable<Bool>`\r\n   = note: required for the cast to the object type `dyn diesel::BoxableExpression<T, Pg, SqlType = Bool>`\r\n```\r\n\r\n### Are you seeing any additional errors?\r\nno\r\n\r\n### Steps to reproduce\r\n```\r\ngit clone https://github.com/Ten0/diesel_2589_repro\r\ncd diesel_2589_repro\r\ncargo check\r\n```\r\n\r\nCode for reference in case that repo is removed later:\r\n```rust\r\nuse diesel::prelude::*;\r\n\r\npub enum TimestampFilter {\r\n\tLowerThan(chrono::DateTime<chrono::Utc>),\r\n\tGreaterThan(chrono::DateTime<chrono::Utc>),\r\n\tInInterval {\r\n\t\tgt: chrono::DateTime<chrono::Utc>,\r\n\t\tlt: chrono::DateTime<chrono::Utc>,\r\n\t},\r\n}\r\n\r\n\r\npub trait IntoDieselExpr<SqlType> {\r\n\ttype OutSqlType: diesel::sql_types::SingleValue;\r\n\tfn into_diesel_expr<T, C>(\r\n\t\tself,\r\n\t\tcolumn: C,\r\n\t) -> Box<dyn BoxableExpression<T, diesel::pg::Pg, SqlType = Self::OutSqlType>>\r\n\twhere\r\n\t\tT: diesel::Table + 'static,\r\n\t\tSqlType: diesel::sql_types::SingleValue,\r\n\t\tC: Expression<SqlType = SqlType>\r\n\t\t\t+ diesel::query_builder::QueryFragment<diesel::pg::Pg>\r\n\t\t\t+ diesel::expression::ValidGrouping<(), IsAggregate = diesel::expression::is_aggregate::No>\r\n\t\t\t+ diesel::expression::SelectableExpression<T>\r\n\t\t\t+ Copy\r\n\t\t\t+ 'static;\r\n}\r\n\r\nimpl IntoDieselExpr<diesel::sql_types::Timestamptz> for TimestampFilter {\r\n\ttype OutSqlType = diesel::sql_types::Bool;\r\n\tfn into_diesel_expr<T, C>(\r\n\t\tself,\r\n\t\tcolumn: C,\r\n\t) -> Box<dyn BoxableExpression<T, diesel::pg::Pg, SqlType = Self::OutSqlType>>\r\n\twhere\r\n\t\tT: diesel::Table + 'static,\r\n\t\tC: Expression<SqlType = diesel::sql_types::Timestamptz>\r\n\t\t\t+ diesel::query_builder::QueryFragment<diesel::pg::Pg>\r\n\t\t\t+ diesel::expression::ValidGrouping<(), IsAggregate = diesel::expression::is_aggregate::No>\r\n\t\t\t+ diesel::expression::SelectableExpression<T>\r\n\t\t\t+ Copy\r\n\t\t\t+ 'static,\r\n\t{\r\n\t\tuse TimestampFilter::*;\r\n\t\tmatch self {\r\n\t\t\tLowerThan(date) => Box::new(column.lt(date)),\r\n\t\t\tGreaterThan(date) => Box::new(column.gt(date)),\r\n\t\t\tInInterval { gt, lt } => Box::new(column.gt(gt).and(column.lt(lt)))\r\n\t\t\t\tas Box<dyn BoxableExpression<T, diesel::pg::Pg, SqlType = Self::OutSqlType>>,\r\n\t\t}\r\n\t}\r\n}\r\n\r\nimpl IntoDieselExpr<diesel::sql_types::Nullable<diesel::sql_types::Timestamptz>> for TimestampFilter {\r\n\ttype OutSqlType = diesel::sql_types::Nullable<diesel::sql_types::Bool>;\r\n\tfn into_diesel_expr<T, C>(\r\n\t\tself,\r\n\t\tcolumn: C,\r\n\t) -> Box<dyn BoxableExpression<T, diesel::pg::Pg, SqlType = Self::OutSqlType>>\r\n\twhere\r\n\t\tT: diesel::Table + 'static,\r\n\t\tC: Expression<SqlType = diesel::sql_types::Nullable<diesel::sql_types::Timestamptz>>\r\n\t\t\t+ diesel::query_builder::QueryFragment<diesel::pg::Pg>\r\n\t\t\t+ diesel::expression::ValidGrouping<(), IsAggregate = diesel::expression::is_aggregate::No>\r\n\t\t\t+ diesel::expression::SelectableExpression<T>\r\n\t\t\t+ Copy\r\n\t\t\t+ 'static,\r\n\t{\r\n\t\tuse TimestampFilter::*;\r\n\t\tmatch self {\r\n\t\t\tLowerThan(date) => Box::new(column.lt(date)),\r\n\t\t\tGreaterThan(date) => Box::new(column.gt(date)),\r\n\t\t\tInInterval { gt, lt } => Box::new(column.gt(gt).and(column.lt(lt))),\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\n## Checklist\r\n\r\n- [X] I have already looked over the [issue tracker](https://github.com/diesel-rs/diesel/issues) for similar issues.\r\n- [X] This issue can be reproduced on Rust's stable channel. (Your issue will be\r\n  closed if this is not the case)\r\n","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2589/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]