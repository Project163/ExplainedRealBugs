{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133/events","html_url":"https://github.com/diesel-rs/diesel/issues/2133","id":475807332,"node_id":"MDU6SXNzdWU0NzU4MDczMzI=","number":2133,"title":"One test fails when I run `bin/test` locally","user":{"login":"DNNX","id":447953,"node_id":"MDQ6VXNlcjQ0Nzk1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/447953?v=4","gravatar_id":"","url":"https://api.github.com/users/DNNX","html_url":"https://github.com/DNNX","followers_url":"https://api.github.com/users/DNNX/followers","following_url":"https://api.github.com/users/DNNX/following{/other_user}","gists_url":"https://api.github.com/users/DNNX/gists{/gist_id}","starred_url":"https://api.github.com/users/DNNX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DNNX/subscriptions","organizations_url":"https://api.github.com/users/DNNX/orgs","repos_url":"https://api.github.com/users/DNNX/repos","events_url":"https://api.github.com/users/DNNX/events{/privacy}","received_events_url":"https://api.github.com/users/DNNX/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2019-08-01T17:41:05Z","updated_at":"2019-08-06T12:42:54Z","closed_at":"2019-08-06T12:42:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nIf you want to report a bug, we added some points below you can fill out. If you want to request a feature, feel free to remove all the irrelevant text. In addition to this [issue tracker](https://github.com/diesel-rs/diesel/issues), you can also talk to Diesel maintainers and users on [Gitter](https://gitter.im/diesel-rs/diesel).\r\n-->\r\n\r\n## Setup\r\n\r\n### Versions\r\n\r\n- **Rust:** `rustc 1.31.0 (abe02cefd 2018-12-04)`\r\n- **Diesel:** v1.4.2 and 0b6c59e36cef3faea0184404e43e3db4739d1193 (latest master at the time of writing)\r\n- **Database:** `mysql  Ver 8.0.17 for osx10.13 on x86_64 (Homebrew)` - client libraries, `8.0.17` - server.\r\n- **Operating System** docker host is `macOS High Sierra 10.13.6 (17G65)`, not sure what OS mysql container runs on.\r\n\r\n### Feature Flags\r\n\r\n- **diesel:** `mysql`\r\n\r\n## Problem Description\r\n\r\nWhen I run `bin/test`, all the tests pass except one. \r\n\r\n### What are you trying to accomplish?\r\n\r\nI want to have all tests green on my machine in order to be able to play with diesel source code and possibly contribute.\r\n\r\n### What is the expected output?\r\n\r\nAll tests are green.\r\n\r\n### What is the actual output?\r\n\r\n```\r\n$ cd diesel && RUST_TEST_THREADS=1 cargo test --no-default-features --features mysql\r\n\r\n...\r\n\r\n---- src/query_dsl/mod.rs - query_dsl::QueryDsl::inner_join (line 398) stdout ----\r\nthread 'src/query_dsl/mod.rs - query_dsl::QueryDsl::inner_join (line 398)' panicked at 'test executable failed:\r\n\r\nthread 'main' panicked at 'assertion failed: `(left == right)`\r\n  left: `Ok([(\"Sean\", \"Sean\\'s post\"), (\"Sean\", \"Sean is a jerk\")])`,\r\n right: `Err(DatabaseError(__Unknown, \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \\'|| ?)\\' at line 1\"))`', src/query_dsl/mod.rs:30:1\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\n', librustdoc/test.rs:367:17\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\n\r\nfailures:\r\n    src/query_dsl/mod.rs - query_dsl::QueryDsl::inner_join (line 398)\r\n\r\ntest result: FAILED. 116 passed; 1 failed; 16 ignored; 0 measured; 0 filtered out\r\n```\r\n\r\nI tried it on the latest master and on `v1.4.2`. Same error.\r\n\r\n### Are you seeing any additional errors?\r\n\r\nNope.\r\n\r\n### Steps to reproduce\r\n\r\nI followed the [contributing guidelines](https://github.com/diesel-rs/diesel/blob/master/CONTRIBUTING.md) when setting up everything locally. Here is what I did, precisely:\r\n\r\n* Clone the repo and `cd` into it\r\n* `cp .env.sample .env`, also bump all ports by 1, i.e. 5432 -> 5433 and 3306 -> 3307.\r\n* Made the same changes in `docker-compose.yml`, so that ports from docker don't conflict with my local database servers.\r\n* `brew install mysql`\r\n* `bin/test`\r\n\r\n<!--\r\nPlease include as much of your codebase as needed to reproduce the error.  If the relevant files are large, please consider linking to a public repository or a [Gist](https://gist.github.com/).\r\n\r\nPlease post as much of your database schema as necessary. If you are using `infer_schema!`, you can use `diesel print-schema` and post the relevant parts from that.\r\n-->\r\n\r\n## Checklist\r\n\r\n- [x] I have already looked over the [issue tracker](https://github.com/diesel-rs/diesel/issues) for similar issues.\r\n- [x] This issue can be reproduced on Rust's stable channel.\r\n\r\n<!--\r\nThank you for your submission!  You're helping make Diesel more robust ðŸŽ‰\r\n\r\nWe'll try to respond as quickly as possible.\r\n-->\r\n","closed_by":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2133/timeline","performed_via_github_app":null,"state_reason":"completed"}