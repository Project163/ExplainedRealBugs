[{"id":7428077323,"node_id":"LE_lADOAnrqL85SR9-UzwAAAAG6v3cL","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7428077323","actor":{"login":"bowenyang007","id":11738325,"node_id":"MDQ6VXNlcjExNzM4MzI1","avatar_url":"https://avatars.githubusercontent.com/u/11738325?v=4","gravatar_id":"","url":"https://api.github.com/users/bowenyang007","html_url":"https://github.com/bowenyang007","followers_url":"https://api.github.com/users/bowenyang007/followers","following_url":"https://api.github.com/users/bowenyang007/following{/other_user}","gists_url":"https://api.github.com/users/bowenyang007/gists{/gist_id}","starred_url":"https://api.github.com/users/bowenyang007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowenyang007/subscriptions","organizations_url":"https://api.github.com/users/bowenyang007/orgs","repos_url":"https://api.github.com/users/bowenyang007/repos","events_url":"https://api.github.com/users/bowenyang007/events{/privacy}","received_events_url":"https://api.github.com/users/bowenyang007/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-21T07:13:58Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"actor":{"login":"bowenyang007","id":11738325,"node_id":"MDQ6VXNlcjExNzM4MzI1","avatar_url":"https://avatars.githubusercontent.com/u/11738325?v=4","gravatar_id":"","url":"https://api.github.com/users/bowenyang007","html_url":"https://github.com/bowenyang007","followers_url":"https://api.github.com/users/bowenyang007/followers","following_url":"https://api.github.com/users/bowenyang007/following{/other_user}","gists_url":"https://api.github.com/users/bowenyang007/gists{/gist_id}","starred_url":"https://api.github.com/users/bowenyang007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowenyang007/subscriptions","organizations_url":"https://api.github.com/users/bowenyang007/orgs","repos_url":"https://api.github.com/users/bowenyang007/repos","events_url":"https://api.github.com/users/bowenyang007/events{/privacy}","received_events_url":"https://api.github.com/users/bowenyang007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T08:38:25Z","updated_at":"2022-09-21T08:38:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379","repository_url":"https://api.github.com/repos/aptos-labs/aptos-core","labels_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379/labels{/name}","comments_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379/comments","events_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379/events","html_url":"https://github.com/aptos-labs/aptos-core/pull/4379","id":1379687389,"node_id":"PR_kwDOG5Kuns4_Sg_y","number":4379,"title":"[Indexer] Create current token tables","user":{"login":"bowenyang007","id":11738325,"node_id":"MDQ6VXNlcjExNzM4MzI1","avatar_url":"https://avatars.githubusercontent.com/u/11738325?v=4","gravatar_id":"","url":"https://api.github.com/users/bowenyang007","html_url":"https://github.com/bowenyang007","followers_url":"https://api.github.com/users/bowenyang007/followers","following_url":"https://api.github.com/users/bowenyang007/following{/other_user}","gists_url":"https://api.github.com/users/bowenyang007/gists{/gist_id}","starred_url":"https://api.github.com/users/bowenyang007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowenyang007/subscriptions","organizations_url":"https://api.github.com/users/bowenyang007/orgs","repos_url":"https://api.github.com/users/bowenyang007/repos","events_url":"https://api.github.com/users/bowenyang007/events{/privacy}","received_events_url":"https://api.github.com/users/bowenyang007/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4155916180,"node_id":"LA_kwDOG5Kuns73tj-U","url":"https://api.github.com/repos/aptos-labs/aptos-core/labels/CICD:build-images","name":"CICD:build-images","color":"7C1C6B","default":false,"description":"when this label is present github actions will start build+push rust images from the PR."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-09-20T16:27:38Z","updated_at":"2022-09-23T01:49:12Z","closed_at":"2022-09-23T01:48:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":462597790,"node_id":"R_kgDOG5Kung","name":"aptos-core","full_name":"aptos-labs/aptos-core","private":false,"owner":{"login":"aptos-labs","id":99841612,"node_id":"O_kgDOBfN2TA","avatar_url":"https://avatars.githubusercontent.com/u/99841612?v=4","gravatar_id":"","url":"https://api.github.com/users/aptos-labs","html_url":"https://github.com/aptos-labs","followers_url":"https://api.github.com/users/aptos-labs/followers","following_url":"https://api.github.com/users/aptos-labs/following{/other_user}","gists_url":"https://api.github.com/users/aptos-labs/gists{/gist_id}","starred_url":"https://api.github.com/users/aptos-labs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aptos-labs/subscriptions","organizations_url":"https://api.github.com/users/aptos-labs/orgs","repos_url":"https://api.github.com/users/aptos-labs/repos","events_url":"https://api.github.com/users/aptos-labs/events{/privacy}","received_events_url":"https://api.github.com/users/aptos-labs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/aptos-labs/aptos-core","description":"Aptos is a layer 1 blockchain built to support the widespread use of blockchain through better technology and user experience.","fork":false,"url":"https://api.github.com/repos/aptos-labs/aptos-core","forks_url":"https://api.github.com/repos/aptos-labs/aptos-core/forks","keys_url":"https://api.github.com/repos/aptos-labs/aptos-core/keys{/key_id}","collaborators_url":"https://api.github.com/repos/aptos-labs/aptos-core/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/aptos-labs/aptos-core/teams","hooks_url":"https://api.github.com/repos/aptos-labs/aptos-core/hooks","issue_events_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/events{/number}","events_url":"https://api.github.com/repos/aptos-labs/aptos-core/events","assignees_url":"https://api.github.com/repos/aptos-labs/aptos-core/assignees{/user}","branches_url":"https://api.github.com/repos/aptos-labs/aptos-core/branches{/branch}","tags_url":"https://api.github.com/repos/aptos-labs/aptos-core/tags","blobs_url":"https://api.github.com/repos/aptos-labs/aptos-core/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/aptos-labs/aptos-core/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/aptos-labs/aptos-core/git/refs{/sha}","trees_url":"https://api.github.com/repos/aptos-labs/aptos-core/git/trees{/sha}","statuses_url":"https://api.github.com/repos/aptos-labs/aptos-core/statuses/{sha}","languages_url":"https://api.github.com/repos/aptos-labs/aptos-core/languages","stargazers_url":"https://api.github.com/repos/aptos-labs/aptos-core/stargazers","contributors_url":"https://api.github.com/repos/aptos-labs/aptos-core/contributors","subscribers_url":"https://api.github.com/repos/aptos-labs/aptos-core/subscribers","subscription_url":"https://api.github.com/repos/aptos-labs/aptos-core/subscription","commits_url":"https://api.github.com/repos/aptos-labs/aptos-core/commits{/sha}","git_commits_url":"https://api.github.com/repos/aptos-labs/aptos-core/git/commits{/sha}","comments_url":"https://api.github.com/repos/aptos-labs/aptos-core/comments{/number}","issue_comment_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/comments{/number}","contents_url":"https://api.github.com/repos/aptos-labs/aptos-core/contents/{+path}","compare_url":"https://api.github.com/repos/aptos-labs/aptos-core/compare/{base}...{head}","merges_url":"https://api.github.com/repos/aptos-labs/aptos-core/merges","archive_url":"https://api.github.com/repos/aptos-labs/aptos-core/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/aptos-labs/aptos-core/downloads","issues_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues{/number}","pulls_url":"https://api.github.com/repos/aptos-labs/aptos-core/pulls{/number}","milestones_url":"https://api.github.com/repos/aptos-labs/aptos-core/milestones{/number}","notifications_url":"https://api.github.com/repos/aptos-labs/aptos-core/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/aptos-labs/aptos-core/labels{/name}","releases_url":"https://api.github.com/repos/aptos-labs/aptos-core/releases{/id}","deployments_url":"https://api.github.com/repos/aptos-labs/aptos-core/deployments","created_at":"2022-02-23T05:43:17Z","updated_at":"2025-11-09T18:51:58Z","pushed_at":"2025-11-10T00:20:12Z","git_url":"git://github.com/aptos-labs/aptos-core.git","ssh_url":"git@github.com:aptos-labs/aptos-core.git","clone_url":"https://github.com/aptos-labs/aptos-core.git","svn_url":"https://github.com/aptos-labs/aptos-core","homepage":"https://aptosfoundation.org","size":418663,"stargazers_count":6384,"watchers_count":6384,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":3861,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":597,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aptos","blockchain","blockchain-network","move","smart-contracts"],"visibility":"public","forks":3861,"open_issues":597,"watchers":6384,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/aptos-labs/aptos-core/pulls/4379","html_url":"https://github.com/aptos-labs/aptos-core/pull/4379","diff_url":"https://github.com/aptos-labs/aptos-core/pull/4379.diff","patch_url":"https://github.com/aptos-labs/aptos-core/pull/4379.patch","merged_at":"2022-09-23T01:48:46Z"},"body":"### Description\r\n* Cleaned up code a bit with types\r\n* Added current token tables\r\n* Make sure that for current token tables, only latest will be overridden (i.e. current transaction processing > last transaction stored in db)\r\n\r\n### Test Plan\r\nRan locally and against devnet\r\n\r\nSpecifically to make sure that only latest will be overridden, I did extensive manual testing for now. \r\n1. Version 13760 has token X, amount 1\r\n2. Ran indexer w/ mocked data: hardcoded to version 13761 with amount 1000, pulled token X and observed that it was updated\r\n3. hardcoded to version 13761 with amount 9000, pulled token X and observed that it was *not* updated\r\n4. hardcoded to version 13760 with amount 9000, pulled token X and observed that it was *not* updated\r\n5. hardcoded to version 13770 with amount 9000, pulled token X and observed that it was updated\r\n\r\n<!-- Reviewable:start -->\r\n- - -\r\nThis change isâ€‚[<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/aptos-labs/aptos-core/4379)\r\n<!-- Reviewable:end -->\r\n","reactions":{"url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/aptos-labs/aptos-core/issues/4379/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1254108461","html_url":"https://github.com/diesel-rs/diesel/issues/3330#issuecomment-1254108461","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3330","id":1254108461,"node_id":"IC_kwDOAnrqL85KwC0t","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T19:01:34Z","updated_at":"2022-09-21T19:01:34Z","body":"Thanks for the bug report. To clarify that: This was correct with the 1.4 release? Or was this always broken?\r\n\r\nThe relevant impl is here:\r\n\r\nhttps://github.com/diesel-rs/diesel/blob/269e8b242eb2664c6fc98972de092a060d96be28/diesel/src/query_builder/upsert/on_conflict_clause.rs#L51-L66\r\n\r\nThe problematic field there is `target`. Unfortunately does the `target` field contain much more information than only the `WHERE` clause. So just moving it to the end won't work. What could work is splitting this impl in such a way that there is a concrete one for `Target: UndecoratedConflictTarget` and one for `Target = DecoratedConflictTarget`. Given that we could modify the `QueryFragment` impl for the second case in such a way that we don't call `QueryFragment` for the inner type, but only the specific fields. This would allow to reorder the specific clauses.\r\n\r\nThat all written: I would happily accept a PR fixing this as long as it includes a working test. Hopefully the information above gives some indication where to start looking.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1254108461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-26T15:48:05Z","updated_at":"2022-09-26T15:48:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344/events","html_url":"https://github.com/diesel-rs/diesel/pull/3344","id":1385614698,"node_id":"PR_kwDOAnrqL84_lWJX","number":3344,"title":"Clear db connection after database error","user":{"login":"heyrutvik","id":6268538,"node_id":"MDQ6VXNlcjYyNjg1Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/6268538?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrutvik","html_url":"https://github.com/heyrutvik","followers_url":"https://api.github.com/users/heyrutvik/followers","following_url":"https://api.github.com/users/heyrutvik/following{/other_user}","gists_url":"https://api.github.com/users/heyrutvik/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrutvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrutvik/subscriptions","organizations_url":"https://api.github.com/users/heyrutvik/orgs","repos_url":"https://api.github.com/users/heyrutvik/repos","events_url":"https://api.github.com/users/heyrutvik/events{/privacy}","received_events_url":"https://api.github.com/users/heyrutvik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-09-26T08:01:49Z","updated_at":"2022-09-26T15:48:05Z","closed_at":"2022-09-26T15:46:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/diesel-rs/diesel/pulls/3344","html_url":"https://github.com/diesel-rs/diesel/pull/3344","diff_url":"https://github.com/diesel-rs/diesel/pull/3344.diff","patch_url":"https://github.com/diesel-rs/diesel/pull/3344.patch","merged_at":"2022-09-26T15:46:44Z"},"body":"Closes #3342","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3344/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7484783869,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAG-ILz9","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7484783869","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"670211005ead03ce18a25734c95fec161106452d","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/670211005ead03ce18a25734c95fec161106452d","created_at":"2022-09-29T09:09:28Z","performed_via_github_app":null},{"id":7499854897,"node_id":"CE_lADOAnrqL85SR9-UzwAAAAG_BrQx","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7499854897","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"670211005ead03ce18a25734c95fec161106452d","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/670211005ead03ce18a25734c95fec161106452d","created_at":"2022-10-01T06:41:24Z","state_reason":null,"performed_via_github_app":null},{"id":7499854904,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAG_BrQ4","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7499854904","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5dce49ba56e5a083d579725b02458da06679a364","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/5dce49ba56e5a083d579725b02458da06679a364","created_at":"2022-10-01T06:41:24Z","performed_via_github_app":null},{"id":7502135270,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAG_KX_m","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7502135270","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"051f39f932342d925aa3872bafba1915cf0b84a3","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/051f39f932342d925aa3872bafba1915cf0b84a3","created_at":"2022-10-02T14:54:18Z","performed_via_github_app":null},{"actor":{"login":"jgallagher","id":1435635,"node_id":"MDQ6VXNlcjE0MzU2MzU=","avatar_url":"https://avatars.githubusercontent.com/u/1435635?v=4","gravatar_id":"","url":"https://api.github.com/users/jgallagher","html_url":"https://github.com/jgallagher","followers_url":"https://api.github.com/users/jgallagher/followers","following_url":"https://api.github.com/users/jgallagher/following{/other_user}","gists_url":"https://api.github.com/users/jgallagher/gists{/gist_id}","starred_url":"https://api.github.com/users/jgallagher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jgallagher/subscriptions","organizations_url":"https://api.github.com/users/jgallagher/orgs","repos_url":"https://api.github.com/users/jgallagher/repos","events_url":"https://api.github.com/users/jgallagher/events{/privacy}","received_events_url":"https://api.github.com/users/jgallagher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-10T21:50:11Z","updated_at":"2022-10-10T21:50:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368/events","html_url":"https://github.com/diesel-rs/diesel/issues/3368","id":1403745433,"node_id":"I_kwDOAnrqL85Tq3SZ","number":3368,"title":"Postgres upsert regression in diesel 2.0.1","user":{"login":"jgallagher","id":1435635,"node_id":"MDQ6VXNlcjE0MzU2MzU=","avatar_url":"https://avatars.githubusercontent.com/u/1435635?v=4","gravatar_id":"","url":"https://api.github.com/users/jgallagher","html_url":"https://github.com/jgallagher","followers_url":"https://api.github.com/users/jgallagher/followers","following_url":"https://api.github.com/users/jgallagher/following{/other_user}","gists_url":"https://api.github.com/users/jgallagher/gists{/gist_id}","starred_url":"https://api.github.com/users/jgallagher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jgallagher/subscriptions","organizations_url":"https://api.github.com/users/jgallagher/orgs","repos_url":"https://api.github.com/users/jgallagher/repos","events_url":"https://api.github.com/users/jgallagher/events{/privacy}","received_events_url":"https://api.github.com/users/jgallagher/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":254193212,"node_id":"MDU6TGFiZWwyNTQxOTMyMTI=","url":"https://api.github.com/repos/diesel-rs/diesel/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-10-10T21:50:11Z","updated_at":"2022-10-11T19:08:18Z","closed_at":"2022-10-11T10:43:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I believe there's a regression in diesel 2.0.1 coming from 2.0.0 related to https://github.com/diesel-rs/diesel/issues/3330. That issue has a couple notes about the placement of WHERE clauses in relation to DO UPDATE upserts, but the linked postgres docs (https://www.postgresql.org/docs/current/sql-insert.html) show the conflict target can _also_ include a WHERE clause; that previously worked with diesel 2.0.0 but no longer compiles in 2.0.1.\r\n\r\nI put an attempt at a minimal reproducer here: https://github.com/jgallagher/diesel-2-0-1-regression. The salient details are that we have a table with a unique index that itself involves another column:\r\n\r\n```sql\r\nCREATE TABLE items (\r\n    id SERIAL PRIMARY KEY,\r\n    name VARCHAR NOT NULL,\r\n    time_deleted TIMESTAMPTZ\r\n);\r\n\r\nCREATE UNIQUE INDEX ON items (\r\n    name\r\n) WHERE\r\n    time_deleted IS NULL;\r\n```\r\n\r\nthat restrict item names to unique _if_ their `time_deleted` column IS NULL, but names with a non-NULL `time_deleted` are not required to be unique. We can then upsert with this query in diesel 2.0.0:\r\n\r\n```rust\r\n    let query = diesel::insert_into(dsl::items)\r\n        .values(NewItem { name, time_deleted: None })\r\n        .on_conflict(dsl::name)\r\n        .filter_target(dsl::time_deleted.is_null())\r\n        .do_nothing()\r\n        .returning(Item::as_returning());\r\n```\r\n\r\nwhich produces a query with a correct WHERE clause as part of the conflict target:\r\n\r\n```sql\r\nINSERT INTO \"items\" (\"name\", \"time_deleted\") VALUES ($1, DEFAULT)\r\n    ON CONFLICT (\"name\") WHERE (\"items\".\"time_deleted\" IS NULL)\r\n    DO NOTHING RETURNING \"items\".\"id\", \"items\".\"name\", \"items\".\"time_deleted\"\r\n```\r\n\r\nHowever, this same query now fails to compile in diesel 2.0.1:\r\n\r\n```\r\nerror[E0277]: the trait bound `query_builder::upsert::on_conflict_clause::OnConflictValues<query_builder::insert_statement::ValuesClause<(DefaultableColumnInsertValue<ColumnInsertValue<columns::name, diesel::expression::bound::Bound<Text, &str>>>, Defaultab\r\nleColumnInsertValue<ColumnInsertValue<columns::time_deleted, diesel::expression::bound::Bound<diesel::sql_types::Nullable<diesel::sql_types::Timestamptz>, DateTime<Utc>>>>), table>, query_builder::upsert::on_conflict_target_decorations::DecoratedConflictTar\r\nget<query_builder::upsert::on_conflict_target::ConflictTarget<columns::name>, query_builder::where_clause::WhereClause<diesel::expression::grouped::Grouped<diesel::expression::operators::IsNull<columns::time_deleted>>>>, query_builder::upsert::on_conflict_a\r\nctions::DoNothing>: QueryFragment<Pg, pg::backend::PgOnConflictClaues>` is not satisfied\r\n    --> src/main.rs:35:17\r\n     |\r\n35   |     match query.get_result(conn) {\r\n     |                 ^^^^^^^^^^ the trait `QueryFragment<Pg, pg::backend::PgOnConflictClaues>` is not implemented for `query_builder::upsert::on_conflict_clause::OnConflictValues<query_builder::insert_statement::ValuesClause<(DefaultableColumnInsertValue<\r\nColumnInsertValue<columns::name, diesel::expression::bound::Bound<Text, &str>>>, DefaultableColumnInsertValue<ColumnInsertValue<columns::time_deleted, diesel::expression::bound::Bound<diesel::sql_types::Nullable<diesel::sql_types::Timestamptz>, DateTime<Utc\r\n>>>>), table>, query_builder::upsert::on_conflict_target_decorations::DecoratedConflictTarget<query_builder::upsert::on_conflict_target::ConflictTarget<columns::name>, query_builder::where_clause::WhereClause<diesel::expression::grouped::Grouped<diesel::exp\r\nression::operators::IsNull<columns::time_deleted>>>>, query_builder::upsert::on_conflict_actions::DoNothing>`\r\n```\r\n\r\n---\r\n\r\nWhen running the reproducer the first time (with diesel 2.0.0), you should get output like:\r\n\r\n```\r\nquery to upsert one: INSERT INTO \"items\" (\"name\", \"time_deleted\") VALUES ($1, DEFAULT) ON CONFLICT (\"name\") WHERE (\"items\".\"time_deleted\" IS NULL) DO NOTHING RETURNING \"items\".\"id\", \"items\".\"name\", \"items\".\"time_deleted\" -- binds: [\"one\"]\r\nresult of upserting one: Some(Item { id: 26, name: \"one\", time_deleted: None })\r\nquery to upsert two: INSERT INTO \"items\" (\"name\", \"time_deleted\") VALUES ($1, DEFAULT) ON CONFLICT (\"name\") WHERE (\"items\".\"time_deleted\" IS NULL) DO NOTHING RETURNING \"items\".\"id\", \"items\".\"name\", \"items\".\"time_deleted\" -- binds: [\"two\"]\r\nresult of upserting two: Some(Item { id: 27, name: \"two\", time_deleted: None })\r\n```\r\n\r\nand subsequent runs should produce:\r\n\r\n```\r\nquery to upsert one: INSERT INTO \"items\" (\"name\", \"time_deleted\") VALUES ($1, DEFAULT) ON CONFLICT (\"name\") WHERE (\"items\".\"time_deleted\" IS NULL) DO NOTHING RETURNING \"items\".\"id\", \"items\".\"name\", \"items\".\"time_deleted\" -- binds: [\"one\"]\r\nresult of upserting one: None\r\nquery to upsert two: INSERT INTO \"items\" (\"name\", \"time_deleted\") VALUES ($1, DEFAULT) ON CONFLICT (\"name\") WHERE (\"items\".\"time_deleted\" IS NULL) DO NOTHING RETURNING \"items\".\"id\", \"items\".\"name\", \"items\".\"time_deleted\" -- binds: [\"two\"]\r\nresult of upserting two: None\r\n```\r\n\r\nThe `None` is due to the reproducer mapping a `NotFound` error to `None`.\r\n\r\nI'm very much not a diesel expert - is it possible to write this query in 2.0.1 given the new restrictions?","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3368/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":7561000950,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAHCq7f2","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561000950","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6b6dd0ef7eb89fd083ac761bd12d7f174ae3df98","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/6b6dd0ef7eb89fd083ac761bd12d7f174ae3df98","created_at":"2022-10-11T09:46:58Z","performed_via_github_app":null},{"actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T09:48:19Z","updated_at":"2022-10-11T09:48:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369/events","html_url":"https://github.com/diesel-rs/diesel/pull/3369","id":1404345497,"node_id":"PR_kwDOAnrqL85Ajisd","number":3369,"title":"Revert \"Fix #3330\"","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-10-11T09:48:19Z","updated_at":"2023-03-09T11:18:49Z","closed_at":"2022-10-11T10:30:30Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/diesel-rs/diesel/pulls/3369","html_url":"https://github.com/diesel-rs/diesel/pull/3369","diff_url":"https://github.com/diesel-rs/diesel/pull/3369.diff","patch_url":"https://github.com/diesel-rs/diesel/pull/3369.patch","merged_at":"2022-10-11T10:30:30Z"},"body":"Reverts diesel-rs/diesel#3349\r\n\r\nSee #3368 for the reasoning\r\n\r\nReopens #3330 \r\n\r\nAdditionally I suggest to release a 2.0.2 version containing this fix soon.","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3369/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7561368062,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAHCsVH-","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561368062","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"032353e6c818db3e7d6395a020b662126faefd0a","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/032353e6c818db3e7d6395a020b662126faefd0a","created_at":"2022-10-11T10:30:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1274476646","html_url":"https://github.com/diesel-rs/diesel/issues/3330#issuecomment-1274476646","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3330","id":1274476646,"node_id":"IC_kwDOAnrqL85L9vhm","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T10:31:51Z","updated_at":"2022-10-11T10:32:15Z","body":"This report does not describe an actual bug, but it's a feature request as it seek to add new functionality. The `WHERE` clause in this position is valid and shouldn't be changed as outlined in #3368.\r\nContributions are welcome to add the necessary query dsl interface to support this feature.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1274476646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7561377546,"node_id":"REE_lADOAnrqL85SR9-UzwAAAAHCsXcK","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561377546","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2022-10-11T10:31:51Z","state_reason":"reopened","performed_via_github_app":null},{"id":7561489843,"node_id":"REFE_lADOAnrqL85SR9-UzwAAAAHCsy2z","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561489843","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"94ae8df017f50a1e0d304a57c793a7d1815c7f08","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/94ae8df017f50a1e0d304a57c793a7d1815c7f08","created_at":"2022-10-11T10:47:40Z","performed_via_github_app":null},{"id":7561924863,"node_id":"UNLE_lADOAnrqL85SR9-UzwAAAAHCudD_","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561924863","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-10-11T11:46:07Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":7561924867,"node_id":"LE_lADOAnrqL85SR9-UzwAAAAHCudED","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561924867","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-11T11:46:07Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":7561924868,"node_id":"LE_lADOAnrqL85SR9-UzwAAAAHCudEE","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561924868","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-11T11:46:07Z","label":{"name":"hole in api","color":"eb6420"},"performed_via_github_app":null},{"id":7561925647,"node_id":"LE_lADOAnrqL85SR9-UzwAAAAHCudQP","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561925647","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-11T11:46:14Z","label":{"name":"postgres","color":"c5def5"},"performed_via_github_app":null},{"id":7561948008,"node_id":"CE_lADOAnrqL85SR9-UzwAAAAHCuito","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7561948008","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"94ae8df017f50a1e0d304a57c793a7d1815c7f08","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/94ae8df017f50a1e0d304a57c793a7d1815c7f08","created_at":"2022-10-11T11:49:15Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1279935340","html_url":"https://github.com/diesel-rs/diesel/issues/3330#issuecomment-1279935340","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3330","id":1279935340,"node_id":"IC_kwDOAnrqL85MSkNs","user":{"login":"mohe2015","id":13287984,"node_id":"MDQ6VXNlcjEzMjg3OTg0","avatar_url":"https://avatars.githubusercontent.com/u/13287984?v=4","gravatar_id":"","url":"https://api.github.com/users/mohe2015","html_url":"https://github.com/mohe2015","followers_url":"https://api.github.com/users/mohe2015/followers","following_url":"https://api.github.com/users/mohe2015/following{/other_user}","gists_url":"https://api.github.com/users/mohe2015/gists{/gist_id}","starred_url":"https://api.github.com/users/mohe2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohe2015/subscriptions","organizations_url":"https://api.github.com/users/mohe2015/orgs","repos_url":"https://api.github.com/users/mohe2015/repos","events_url":"https://api.github.com/users/mohe2015/events{/privacy}","received_events_url":"https://api.github.com/users/mohe2015/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-16T09:54:25Z","updated_at":"2022-10-16T09:54:25Z","body":"I assume the close was accidential?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1279935340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mohe2015","id":13287984,"node_id":"MDQ6VXNlcjEzMjg3OTg0","avatar_url":"https://avatars.githubusercontent.com/u/13287984?v=4","gravatar_id":"","url":"https://api.github.com/users/mohe2015","html_url":"https://github.com/mohe2015","followers_url":"https://api.github.com/users/mohe2015/followers","following_url":"https://api.github.com/users/mohe2015/following{/other_user}","gists_url":"https://api.github.com/users/mohe2015/gists{/gist_id}","starred_url":"https://api.github.com/users/mohe2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohe2015/subscriptions","organizations_url":"https://api.github.com/users/mohe2015/orgs","repos_url":"https://api.github.com/users/mohe2015/repos","events_url":"https://api.github.com/users/mohe2015/events{/privacy}","received_events_url":"https://api.github.com/users/mohe2015/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7596152749,"node_id":"REE_lADOAnrqL85SR9-UzwAAAAHExBet","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7596152749","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2022-10-16T09:59:06Z","state_reason":"reopened","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1279993871","html_url":"https://github.com/diesel-rs/diesel/issues/3330#issuecomment-1279993871","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3330","id":1279993871,"node_id":"IC_kwDOAnrqL85MSygP","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-16T15:37:25Z","updated_at":"2022-10-16T15:37:25Z","body":"@mohe2015 Yes that was not planed. Seems like github interpreted \"Revert \"Fix #3330\"\" as action to close this issue ðŸ¤¦ ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1279993871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7596543311,"node_id":"MEE_lADOAnrqL85SR9-UzwAAAAHEyg1P","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7596543311","actor":{"login":"mohe2015","id":13287984,"node_id":"MDQ6VXNlcjEzMjg3OTg0","avatar_url":"https://avatars.githubusercontent.com/u/13287984?v=4","gravatar_id":"","url":"https://api.github.com/users/mohe2015","html_url":"https://github.com/mohe2015","followers_url":"https://api.github.com/users/mohe2015/followers","following_url":"https://api.github.com/users/mohe2015/following{/other_user}","gists_url":"https://api.github.com/users/mohe2015/gists{/gist_id}","starred_url":"https://api.github.com/users/mohe2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohe2015/subscriptions","organizations_url":"https://api.github.com/users/mohe2015/orgs","repos_url":"https://api.github.com/users/mohe2015/repos","events_url":"https://api.github.com/users/mohe2015/events{/privacy}","received_events_url":"https://api.github.com/users/mohe2015/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-16T15:37:25Z","performed_via_github_app":null},{"id":7596543312,"node_id":"SE_lADOAnrqL85SR9-UzwAAAAHEyg1Q","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/7596543312","actor":{"login":"mohe2015","id":13287984,"node_id":"MDQ6VXNlcjEzMjg3OTg0","avatar_url":"https://avatars.githubusercontent.com/u/13287984?v=4","gravatar_id":"","url":"https://api.github.com/users/mohe2015","html_url":"https://github.com/mohe2015","followers_url":"https://api.github.com/users/mohe2015/followers","following_url":"https://api.github.com/users/mohe2015/following{/other_user}","gists_url":"https://api.github.com/users/mohe2015/gists{/gist_id}","starred_url":"https://api.github.com/users/mohe2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohe2015/subscriptions","organizations_url":"https://api.github.com/users/mohe2015/orgs","repos_url":"https://api.github.com/users/mohe2015/repos","events_url":"https://api.github.com/users/mohe2015/events{/privacy}","received_events_url":"https://api.github.com/users/mohe2015/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-16T15:37:25Z","performed_via_github_app":null},{"actor":{"login":"neogenie","id":58473459,"node_id":"MDQ6VXNlcjU4NDczNDU5","avatar_url":"https://avatars.githubusercontent.com/u/58473459?v=4","gravatar_id":"","url":"https://api.github.com/users/neogenie","html_url":"https://github.com/neogenie","followers_url":"https://api.github.com/users/neogenie/followers","following_url":"https://api.github.com/users/neogenie/following{/other_user}","gists_url":"https://api.github.com/users/neogenie/gists{/gist_id}","starred_url":"https://api.github.com/users/neogenie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neogenie/subscriptions","organizations_url":"https://api.github.com/users/neogenie/orgs","repos_url":"https://api.github.com/users/neogenie/repos","events_url":"https://api.github.com/users/neogenie/events{/privacy}","received_events_url":"https://api.github.com/users/neogenie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T07:41:59Z","updated_at":"2022-12-06T07:41:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440/events","html_url":"https://github.com/diesel-rs/diesel/pull/3440","id":1474862472,"node_id":"PR_kwDOAnrqL85EP_SX","number":3440,"title":"Add Conditionally InsertStatement","user":{"login":"neogenie","id":58473459,"node_id":"MDQ6VXNlcjU4NDczNDU5","avatar_url":"https://avatars.githubusercontent.com/u/58473459?v=4","gravatar_id":"","url":"https://api.github.com/users/neogenie","html_url":"https://github.com/neogenie","followers_url":"https://api.github.com/users/neogenie/followers","following_url":"https://api.github.com/users/neogenie/following{/other_user}","gists_url":"https://api.github.com/users/neogenie/gists{/gist_id}","starred_url":"https://api.github.com/users/neogenie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neogenie/subscriptions","organizations_url":"https://api.github.com/users/neogenie/orgs","repos_url":"https://api.github.com/users/neogenie/repos","events_url":"https://api.github.com/users/neogenie/events{/privacy}","received_events_url":"https://api.github.com/users/neogenie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-12-04T14:21:41Z","updated_at":"2023-05-28T22:44:24Z","closed_at":"2023-02-01T10:49:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/diesel-rs/diesel/pulls/3440","html_url":"https://github.com/diesel-rs/diesel/pull/3440","diff_url":"https://github.com/diesel-rs/diesel/pull/3440.diff","patch_url":"https://github.com/diesel-rs/diesel/pull/3440.patch","merged_at":"2023-02-01T10:49:47Z"},"body":"Allow to apply filters on `ON CONFLICT ... DO UPDATE ... WHERE ...`","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3440/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1411855458","html_url":"https://github.com/diesel-rs/diesel/issues/3330#issuecomment-1411855458","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3330","id":1411855458,"node_id":"IC_kwDOAnrqL85UJzRi","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T10:50:09Z","updated_at":"2023-02-01T10:50:09Z","body":"Implemented by #3440 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1411855458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8409026541,"node_id":"CE_lADOAnrqL85SR9-UzwAAAAH1N4_t","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/8409026541","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-02-01T10:50:09Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"bowenyang007","id":11738325,"node_id":"MDQ6VXNlcjExNzM4MzI1","avatar_url":"https://avatars.githubusercontent.com/u/11738325?v=4","gravatar_id":"","url":"https://api.github.com/users/bowenyang007","html_url":"https://github.com/bowenyang007","followers_url":"https://api.github.com/users/bowenyang007/followers","following_url":"https://api.github.com/users/bowenyang007/following{/other_user}","gists_url":"https://api.github.com/users/bowenyang007/gists{/gist_id}","starred_url":"https://api.github.com/users/bowenyang007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowenyang007/subscriptions","organizations_url":"https://api.github.com/users/bowenyang007/orgs","repos_url":"https://api.github.com/users/bowenyang007/repos","events_url":"https://api.github.com/users/bowenyang007/events{/privacy}","received_events_url":"https://api.github.com/users/bowenyang007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-06T06:58:52Z","updated_at":"2025-03-06T06:58:52Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74","repository_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2","labels_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74/labels{/name}","comments_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74/comments","events_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74/events","html_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2/pull/74","id":2898901056,"node_id":"PR_kwDONwaUks6Nj1EZ","number":74,"title":"Finally remove diesel hack!","user":{"login":"bowenyang007","id":11738325,"node_id":"MDQ6VXNlcjExNzM4MzI1","avatar_url":"https://avatars.githubusercontent.com/u/11738325?v=4","gravatar_id":"","url":"https://api.github.com/users/bowenyang007","html_url":"https://github.com/bowenyang007","followers_url":"https://api.github.com/users/bowenyang007/followers","following_url":"https://api.github.com/users/bowenyang007/following{/other_user}","gists_url":"https://api.github.com/users/bowenyang007/gists{/gist_id}","starred_url":"https://api.github.com/users/bowenyang007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowenyang007/subscriptions","organizations_url":"https://api.github.com/users/bowenyang007/orgs","repos_url":"https://api.github.com/users/bowenyang007/repos","events_url":"https://api.github.com/users/bowenyang007/events{/privacy}","received_events_url":"https://api.github.com/users/bowenyang007/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-03-06T00:19:32Z","updated_at":"2025-03-06T23:00:02Z","closed_at":"2025-03-06T23:00:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":923178130,"node_id":"R_kgDONwaUkg","name":"aptos-indexer-processors-v2","full_name":"aptos-labs/aptos-indexer-processors-v2","private":false,"owner":{"login":"aptos-labs","id":99841612,"node_id":"O_kgDOBfN2TA","avatar_url":"https://avatars.githubusercontent.com/u/99841612?v=4","gravatar_id":"","url":"https://api.github.com/users/aptos-labs","html_url":"https://github.com/aptos-labs","followers_url":"https://api.github.com/users/aptos-labs/followers","following_url":"https://api.github.com/users/aptos-labs/following{/other_user}","gists_url":"https://api.github.com/users/aptos-labs/gists{/gist_id}","starred_url":"https://api.github.com/users/aptos-labs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aptos-labs/subscriptions","organizations_url":"https://api.github.com/users/aptos-labs/orgs","repos_url":"https://api.github.com/users/aptos-labs/repos","events_url":"https://api.github.com/users/aptos-labs/events{/privacy}","received_events_url":"https://api.github.com/users/aptos-labs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2","description":null,"fork":false,"url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2","forks_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/forks","keys_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/teams","hooks_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/hooks","issue_events_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/events{/number}","events_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/events","assignees_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/assignees{/user}","branches_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/branches{/branch}","tags_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/tags","blobs_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/git/refs{/sha}","trees_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/statuses/{sha}","languages_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/languages","stargazers_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/stargazers","contributors_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/contributors","subscribers_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/subscribers","subscription_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/subscription","commits_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/commits{/sha}","git_commits_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/git/commits{/sha}","comments_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/comments{/number}","issue_comment_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/comments{/number}","contents_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/contents/{+path}","compare_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/merges","archive_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/downloads","issues_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues{/number}","pulls_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/pulls{/number}","milestones_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/milestones{/number}","notifications_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/labels{/name}","releases_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/releases{/id}","deployments_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/deployments","created_at":"2025-01-27T19:14:55Z","updated_at":"2025-11-01T05:09:38Z","pushed_at":"2025-11-01T05:09:34Z","git_url":"git://github.com/aptos-labs/aptos-indexer-processors-v2.git","ssh_url":"git@github.com:aptos-labs/aptos-indexer-processors-v2.git","clone_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2.git","svn_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2","homepage":null,"size":1166,"stargazers_count":12,"watchers_count":12,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":13,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":13,"open_issues":7,"watchers":12,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/pulls/74","html_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2/pull/74","diff_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2/pull/74.diff","patch_url":"https://github.com/aptos-labs/aptos-indexer-processors-v2/pull/74.patch","merged_at":"2025-03-06T23:00:01Z"},"body":"For context, we wanted to filter before insert but that was not supported. See issue https://github.com/diesel-rs/diesel/issues/3330. It turns out that a few months later diesel did implement it! https://github.com/diesel-rs/diesel/pull/3440\r\n\r\nWe finally got around this 2 years later (never too late) and this is beautiful. \r\n\r\n## Testing\r\nI added a couple of integration tests, but also manually compared queries to make sure that they're equivalent\r\n\r\nMy hack:\r\n```\r\nWHERE current_fungible_asset_balances.last_transaction_version_v1 IS NULL OR current_fungible_asset_balances.last_transaction_version_v1 <= excluded.last_transaction_version_v1 \r\n```\r\nDiesel dsl:\r\n```\r\nWHERE ((\\\"current_fungible_asset_balances\\\".\\\"last_transaction_version_v1\\\" IS NULL) OR (\\\"current_fungible_asset_balances\\\".\\\"last_transaction_version_v1\\\" <= excluded.\\\"last_transaction_version_v1\\\"))\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/aptos-labs/aptos-indexer-processors-v2/issues/74/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]