[{"id":6529113358,"node_id":"LE_lADOAnrqL85I1ztwzwAAAAGFKl0O","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6529113358","actor":{"login":"heyrict","id":25698503,"node_id":"MDQ6VXNlcjI1Njk4NTAz","avatar_url":"https://avatars.githubusercontent.com/u/25698503?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrict","html_url":"https://github.com/heyrict","followers_url":"https://api.github.com/users/heyrict/followers","following_url":"https://api.github.com/users/heyrict/following{/other_user}","gists_url":"https://api.github.com/users/heyrict/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrict/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrict/subscriptions","organizations_url":"https://api.github.com/users/heyrict/orgs","repos_url":"https://api.github.com/users/heyrict/repos","events_url":"https://api.github.com/users/heyrict/events{/privacy}","received_events_url":"https://api.github.com/users/heyrict/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-05-01T08:05:57Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":6534009695,"node_id":"REFE_lADOAnrqL85I1ztwzwAAAAGFdRNf","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6534009695","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fb70fd70791010ab9fe8d02c21d78d6946f16dd7","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/fb70fd70791010ab9fe8d02c21d78d6946f16dd7","created_at":"2022-05-02T14:40:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1114977766","html_url":"https://github.com/diesel-rs/diesel/issues/3156#issuecomment-1114977766","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3156","id":1114977766,"node_id":"IC_kwDOAnrqL85CdTXm","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-02T14:42:49Z","updated_at":"2022-05-02T14:42:49Z","body":"This is caused by broken `R2D2Connection::is_broken` implementations in diesel. Those result in marking any connection as broken as soon as it is checked into the pool again. In turn that results in not reusing connections at all, so that the \"pool\" reestablish a new connection every time you checked out an connection from the pool.\r\n\r\nhttps://github.com/diesel-rs/diesel/pull/3159 addresses this. Can you verify that this solves the issue for you?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1114977766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6537212142,"node_id":"RTE_lADOAnrqL85I1ztwzwAAAAGFpfDu","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6537212142","actor":{"login":"heyrict","id":25698503,"node_id":"MDQ6VXNlcjI1Njk4NTAz","avatar_url":"https://avatars.githubusercontent.com/u/25698503?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrict","html_url":"https://github.com/heyrict","followers_url":"https://api.github.com/users/heyrict/followers","following_url":"https://api.github.com/users/heyrict/following{/other_user}","gists_url":"https://api.github.com/users/heyrict/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrict/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrict/subscriptions","organizations_url":"https://api.github.com/users/heyrict/orgs","repos_url":"https://api.github.com/users/heyrict/repos","events_url":"https://api.github.com/users/heyrict/events{/privacy}","received_events_url":"https://api.github.com/users/heyrict/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T01:22:30Z","rename":{"from":"Performance regression in aggregation queries in `r2d2::Pool`","to":"Performance regression with getting multiple connections with `r2d2::Pool`"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1115525691","html_url":"https://github.com/diesel-rs/diesel/issues/3156#issuecomment-1115525691","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/3156","id":1115525691,"node_id":"IC_kwDOAnrqL85CfZI7","user":{"login":"heyrict","id":25698503,"node_id":"MDQ6VXNlcjI1Njk4NTAz","avatar_url":"https://avatars.githubusercontent.com/u/25698503?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrict","html_url":"https://github.com/heyrict","followers_url":"https://api.github.com/users/heyrict/followers","following_url":"https://api.github.com/users/heyrict/following{/other_user}","gists_url":"https://api.github.com/users/heyrict/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrict/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrict/subscriptions","organizations_url":"https://api.github.com/users/heyrict/orgs","repos_url":"https://api.github.com/users/heyrict/repos","events_url":"https://api.github.com/users/heyrict/events{/privacy}","received_events_url":"https://api.github.com/users/heyrict/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T01:24:50Z","updated_at":"2022-05-03T01:24:50Z","body":"I've changed the title to reflect the actual bug. Can confirm the bug is fixed with your PR. Thank you for debugging this :+1:","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/1115525691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"heyrict","id":25698503,"node_id":"MDQ6VXNlcjI1Njk4NTAz","avatar_url":"https://avatars.githubusercontent.com/u/25698503?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrict","html_url":"https://github.com/heyrict","followers_url":"https://api.github.com/users/heyrict/followers","following_url":"https://api.github.com/users/heyrict/following{/other_user}","gists_url":"https://api.github.com/users/heyrict/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrict/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrict/subscriptions","organizations_url":"https://api.github.com/users/heyrict/orgs","repos_url":"https://api.github.com/users/heyrict/repos","events_url":"https://api.github.com/users/heyrict/events{/privacy}","received_events_url":"https://api.github.com/users/heyrict/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6537246000,"node_id":"RTE_lADOAnrqL85I1ztwzwAAAAGFpnUw","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6537246000","actor":{"login":"heyrict","id":25698503,"node_id":"MDQ6VXNlcjI1Njk4NTAz","avatar_url":"https://avatars.githubusercontent.com/u/25698503?v=4","gravatar_id":"","url":"https://api.github.com/users/heyrict","html_url":"https://github.com/heyrict","followers_url":"https://api.github.com/users/heyrict/followers","following_url":"https://api.github.com/users/heyrict/following{/other_user}","gists_url":"https://api.github.com/users/heyrict/gists{/gist_id}","starred_url":"https://api.github.com/users/heyrict/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyrict/subscriptions","organizations_url":"https://api.github.com/users/heyrict/orgs","repos_url":"https://api.github.com/users/heyrict/repos","events_url":"https://api.github.com/users/heyrict/events{/privacy}","received_events_url":"https://api.github.com/users/heyrict/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-05-03T01:31:37Z","rename":{"from":"Performance regression with getting multiple connections with `r2d2::Pool`","to":"Performance regression when getting multiple connections with `r2d2::Pool`"},"performed_via_github_app":null},{"id":6542499200,"node_id":"CE_lADOAnrqL85I1ztwzwAAAAGF9p2A","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6542499200","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"fb70fd70791010ab9fe8d02c21d78d6946f16dd7","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/fb70fd70791010ab9fe8d02c21d78d6946f16dd7","created_at":"2022-05-03T17:20:52Z","state_reason":null,"performed_via_github_app":null},{"id":6542499215,"node_id":"REFE_lADOAnrqL85I1ztwzwAAAAGF9p2P","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6542499215","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0c6219f5bd9641eea09c6fa7dca4995aefda30a0","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/0c6219f5bd9641eea09c6fa7dca4995aefda30a0","created_at":"2022-05-03T17:20:52Z","performed_via_github_app":null},{"actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T11:49:42Z","updated_at":"2022-06-15T11:49:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892","repository_url":"https://api.github.com/repos/rust-lang/crates.io","labels_url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892/labels{/name}","comments_url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892/comments","events_url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892/events","html_url":"https://github.com/rust-lang/crates.io/pull/4892","id":1271529489,"node_id":"PR_kwDOAUYDTc45q8yH","number":4892,"title":"Port to diesel 2.0.3","user":{"login":"jtgeibel","id":22186,"node_id":"MDQ6VXNlcjIyMTg2","avatar_url":"https://avatars.githubusercontent.com/u/22186?v=4","gravatar_id":"","url":"https://api.github.com/users/jtgeibel","html_url":"https://github.com/jtgeibel","followers_url":"https://api.github.com/users/jtgeibel/followers","following_url":"https://api.github.com/users/jtgeibel/following{/other_user}","gists_url":"https://api.github.com/users/jtgeibel/gists{/gist_id}","starred_url":"https://api.github.com/users/jtgeibel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtgeibel/subscriptions","organizations_url":"https://api.github.com/users/jtgeibel/orgs","repos_url":"https://api.github.com/users/jtgeibel/repos","events_url":"https://api.github.com/users/jtgeibel/events{/privacy}","received_events_url":"https://api.github.com/users/jtgeibel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":501003957,"node_id":"MDU6TGFiZWw1MDEwMDM5NTc=","url":"https://api.github.com/repos/rust-lang/crates.io/labels/C-internal%20%F0%9F%94%A7","name":"C-internal üîß","color":"1d76db","default":false,"description":"Category: Nonessential work that would make the codebase more consistent or clear"},{"id":501012668,"node_id":"MDU6TGFiZWw1MDEwMTI2Njg=","url":"https://api.github.com/repos/rust-lang/crates.io/labels/A-backend%20%E2%9A%99%EF%B8%8F","name":"A-backend ‚öôÔ∏è","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2022-06-15T00:55:45Z","updated_at":"2023-02-17T01:00:59Z","closed_at":"2023-02-17T00:18:50Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":21365581,"node_id":"MDEwOlJlcG9zaXRvcnkyMTM2NTU4MQ==","name":"crates.io","full_name":"rust-lang/crates.io","private":false,"owner":{"login":"rust-lang","id":5430905,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=","avatar_url":"https://avatars.githubusercontent.com/u/5430905?v=4","gravatar_id":"","url":"https://api.github.com/users/rust-lang","html_url":"https://github.com/rust-lang","followers_url":"https://api.github.com/users/rust-lang/followers","following_url":"https://api.github.com/users/rust-lang/following{/other_user}","gists_url":"https://api.github.com/users/rust-lang/gists{/gist_id}","starred_url":"https://api.github.com/users/rust-lang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rust-lang/subscriptions","organizations_url":"https://api.github.com/users/rust-lang/orgs","repos_url":"https://api.github.com/users/rust-lang/repos","events_url":"https://api.github.com/users/rust-lang/events{/privacy}","received_events_url":"https://api.github.com/users/rust-lang/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rust-lang/crates.io","description":"The Rust package registry","fork":false,"url":"https://api.github.com/repos/rust-lang/crates.io","forks_url":"https://api.github.com/repos/rust-lang/crates.io/forks","keys_url":"https://api.github.com/repos/rust-lang/crates.io/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rust-lang/crates.io/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rust-lang/crates.io/teams","hooks_url":"https://api.github.com/repos/rust-lang/crates.io/hooks","issue_events_url":"https://api.github.com/repos/rust-lang/crates.io/issues/events{/number}","events_url":"https://api.github.com/repos/rust-lang/crates.io/events","assignees_url":"https://api.github.com/repos/rust-lang/crates.io/assignees{/user}","branches_url":"https://api.github.com/repos/rust-lang/crates.io/branches{/branch}","tags_url":"https://api.github.com/repos/rust-lang/crates.io/tags","blobs_url":"https://api.github.com/repos/rust-lang/crates.io/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rust-lang/crates.io/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rust-lang/crates.io/git/refs{/sha}","trees_url":"https://api.github.com/repos/rust-lang/crates.io/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rust-lang/crates.io/statuses/{sha}","languages_url":"https://api.github.com/repos/rust-lang/crates.io/languages","stargazers_url":"https://api.github.com/repos/rust-lang/crates.io/stargazers","contributors_url":"https://api.github.com/repos/rust-lang/crates.io/contributors","subscribers_url":"https://api.github.com/repos/rust-lang/crates.io/subscribers","subscription_url":"https://api.github.com/repos/rust-lang/crates.io/subscription","commits_url":"https://api.github.com/repos/rust-lang/crates.io/commits{/sha}","git_commits_url":"https://api.github.com/repos/rust-lang/crates.io/git/commits{/sha}","comments_url":"https://api.github.com/repos/rust-lang/crates.io/comments{/number}","issue_comment_url":"https://api.github.com/repos/rust-lang/crates.io/issues/comments{/number}","contents_url":"https://api.github.com/repos/rust-lang/crates.io/contents/{+path}","compare_url":"https://api.github.com/repos/rust-lang/crates.io/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rust-lang/crates.io/merges","archive_url":"https://api.github.com/repos/rust-lang/crates.io/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rust-lang/crates.io/downloads","issues_url":"https://api.github.com/repos/rust-lang/crates.io/issues{/number}","pulls_url":"https://api.github.com/repos/rust-lang/crates.io/pulls{/number}","milestones_url":"https://api.github.com/repos/rust-lang/crates.io/milestones{/number}","notifications_url":"https://api.github.com/repos/rust-lang/crates.io/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rust-lang/crates.io/labels{/name}","releases_url":"https://api.github.com/repos/rust-lang/crates.io/releases{/id}","deployments_url":"https://api.github.com/repos/rust-lang/crates.io/deployments","created_at":"2014-06-30T20:53:49Z","updated_at":"2025-11-10T00:35:30Z","pushed_at":"2025-11-09T13:45:29Z","git_url":"git://github.com/rust-lang/crates.io.git","ssh_url":"git@github.com:rust-lang/crates.io.git","clone_url":"https://github.com/rust-lang/crates.io.git","svn_url":"https://github.com/rust-lang/crates.io","homepage":"https://crates.io","size":53377,"stargazers_count":3378,"watchers_count":3378,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":677,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":89,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","rust"],"visibility":"public","forks":677,"open_issues":89,"watchers":3378,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rust-lang/crates.io/pulls/4892","html_url":"https://github.com/rust-lang/crates.io/pull/4892","diff_url":"https://github.com/rust-lang/crates.io/pull/4892.diff","patch_url":"https://github.com/rust-lang/crates.io/pull/4892.patch","merged_at":"2023-02-17T00:18:50Z"},"body":"With the latest upstream diesel changes in the 2.0.3 release, our final failing test is now passing!\r\n\r\n#### Original PR Text\r\n\r\nThis is a nearly complete port to diesel 2, with the following exceptions:\r\n\r\n* It relies on git branches of `diesel_full_text_search` (an upstream PR) and `swirl` (a development branch [here](https://github.com/jtgeibel/swirl/commit/cca24585daa89c856f1e4523c07e45b7a1890c9c)).\r\n* Due to the upstream change from `&PgConnection` to `&mut PgConnection`, it seems to no longer be possible to run the test suite with a single connection, as required by our background job tests. The current design uses a re-entrant mutex , but this no longer works and unless I'm missing something, there is (for good reason) no safe API to hand out multiple `&mut` to the same location even if we're on the same thread. Maybe we can rework the `swirl` backend to add support for our test harness.\r\n* A temporary workaround to the previous issue is in [jtgeibel/crates.io@diesel2-crimes](https://github.com/jtgeibel/crates.io/commit/a69501a045b9c289495934bd4f83b6844164d8dd) which switches to a regular mutex which fails upon the second attempt to take the lock. This allows the branch to build and most tests pass. There are currently 60 test failures, though most of these are due this hack.\r\n\r\nAny suggestions on how to resolve this are greatly appreciated!","reactions":{"url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rust-lang/crates.io/issues/4892/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6821215423,"node_id":"REFE_lADOAnrqL85I1ztwzwAAAAGWk3y_","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/6821215423","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fd596a08f104f50ac0d03ff73ba60a1b75a7c252","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/fd596a08f104f50ac0d03ff73ba60a1b75a7c252","created_at":"2022-06-16T13:48:38Z","performed_via_github_app":null}]