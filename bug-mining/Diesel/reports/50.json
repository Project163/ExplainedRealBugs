{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/291","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/291/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/291/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/291/events","html_url":"https://github.com/diesel-rs/diesel/issues/291","id":149835875,"node_id":"MDU6SXNzdWUxNDk4MzU4NzU=","number":291,"title":"Issues with codegen for PG text[]","user":{"login":"anp","id":6812281,"node_id":"MDQ6VXNlcjY4MTIyODE=","avatar_url":"https://avatars.githubusercontent.com/u/6812281?v=4","gravatar_id":"","url":"https://api.github.com/users/anp","html_url":"https://github.com/anp","followers_url":"https://api.github.com/users/anp/followers","following_url":"https://api.github.com/users/anp/following{/other_user}","gists_url":"https://api.github.com/users/anp/gists{/gist_id}","starred_url":"https://api.github.com/users/anp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anp/subscriptions","organizations_url":"https://api.github.com/users/anp/orgs","repos_url":"https://api.github.com/users/anp/repos","events_url":"https://api.github.com/users/anp/events{/privacy}","received_events_url":"https://api.github.com/users/anp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-04-20T17:34:43Z","updated_at":"2016-04-20T18:19:16Z","closed_at":"2016-04-20T18:19:16Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When trying to set up `insertable_into` a table which has a `text[]` datatype in postgres:\n\n```\n$ multirust run nightly cargo build --verbose\nmultirust: checking metadata version\nmultirust: got metadata version 2\n       Fresh libc v0.2.10\n       Fresh byteorder v0.3.13\n       Fresh pq-sys v0.2.1\n       Fresh diesel v0.6.1\n       Fresh diesel_codegen v0.6.1\n   Compiling diesel_repro v0.1.0 (file:///home/adam/rust-projects/diesel_repro)\n     Running `rustc src/main.rs --crate-name diesel_repro --crate-type bin -g --out-dir /home/adam/rust-projects/diesel_repro/target/debug --emit=dep-info,link -L dependency=/home/adam/rust-projects/diesel_repro/target/debug -L dependency=/home/adam/rust-projects/diesel_repro/target/debug/deps --extern diesel_codegen=/home/adam/rust-projects/diesel_repro/target/debug/deps/libdiesel_codegen-f1388be2227ebc98.so --extern diesel=/home/adam/rust-projects/diesel_repro/target/debug/deps/libdiesel-85b76bcc9835dd7c.rlib -L native=/usr/lib`\nsrc/main.rs:9:1: 9:28 error: the trait bound `std::vec::Vec<std::string::String>: diesel::Expression` is not satisfied [E0277]\nsrc/main.rs:9 #[insertable_into(testing)]\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc/main.rs:9:1: 9:28 note: in this expansion of #[insertable_into] (defined in src/main.rs)\nsrc/main.rs:9:1: 9:28 help: run `rustc --explain E0277` to see a detailed explanation\nsrc/main.rs:9:1: 9:28 note: required by `diesel::expression::AsExpression::as_expression`\nsrc/main.rs:9:1: 9:28 error: mismatched types:\n expected `diesel::expression::bound::Bound<diesel::types::Nullable<diesel::types::Array<diesel::types::Text>>, &std::vec::Vec<std::string::String>>`,\n    found `&std::vec::Vec<std::string::String>`\n(expected struct `diesel::expression::bound::Bound`,\n    found &-ptr) [E0308]\nsrc/main.rs:9 #[insertable_into(testing)]\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc/main.rs:9:1: 9:28 note: in this expansion of #[insertable_into] (defined in src/main.rs)\nsrc/main.rs:9:1: 9:28 help: run `rustc --explain E0308` to see a detailed explanation\nerror: aborting due to 2 previous errors\nerror: Could not compile `diesel_repro`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name diesel_repro --crate-type bin -g --out-dir /home/adam/rust-projects/diesel_repro/target/debug --emit=dep-info,link -L dependency=/home/adam/rust-projects/diesel_repro/target/debug -L dependency=/home/adam/rust-projects/diesel_repro/target/debug/deps --extern diesel_codegen=/home/adam/rust-projects/diesel_repro/target/debug/deps/libdiesel_codegen-f1388be2227ebc98.so --extern diesel=/home/adam/rust-projects/diesel_repro/target/debug/deps/libdiesel-85b76bcc9835dd7c.rlib -L native=/usr/lib` (exit code: 101)\n```\n\nRust version:\n\n```\n$ multirust run nightly rustc --version\nrustc 1.10.0-nightly (c2aaad4e2 2016-04-19)\n```\n\nCargo.toml:\n\n``` toml\n[package]\nname = \"diesel_repro\"\nversion = \"0.1.0\"\nauthors = [\"Adam Perry <adam.n.perry@gmail.com>\"]\n\n[dependencies.diesel]\nversion = \"0.6.1\"\ndefault-features = false\nfeatures = [\"postgres\"]\n\n[dependencies.diesel_codegen]\nversion = \"0.6.1\"\ndefault-features = false\nfeatures = [\"nightly\", \"postgres\"]\n```\n\nup.sql:\n\n``` sql\nCREATE TABLE testing (\n  id serial primary key,\n  arr text[]\n)\n```\n\nmain.rs:\n\n``` rust\n#![feature(custom_attribute, custom_derive, plugin)]\n#![plugin(diesel_codegen)]\n\n#[macro_use]\nextern crate diesel;\n\ninfer_schema!(\"postgres://localhost/testing\");\n\n#[insertable_into(testing)]\npub struct Testing {\n    id: i32,\n    arr: Vec<String>,\n}\n\nfn main() {\n    println!(\"Hello, world!\");\n}\n```\n","closed_by":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/291/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/291/timeline","performed_via_github_app":null,"state_reason":"completed"}