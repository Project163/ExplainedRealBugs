[{"id":3260077921,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2MDA3NzkyMQ==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3260077921","actor":{"login":"frol","id":304265,"node_id":"MDQ6VXNlcjMwNDI2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/304265?v=4","gravatar_id":"","url":"https://api.github.com/users/frol","html_url":"https://github.com/frol","followers_url":"https://api.github.com/users/frol/followers","following_url":"https://api.github.com/users/frol/following{/other_user}","gists_url":"https://api.github.com/users/frol/gists{/gist_id}","starred_url":"https://api.github.com/users/frol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frol/subscriptions","organizations_url":"https://api.github.com/users/frol/orgs","repos_url":"https://api.github.com/users/frol/repos","events_url":"https://api.github.com/users/frol/events{/privacy}","received_events_url":"https://api.github.com/users/frol/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-22T11:11:49Z","performed_via_github_app":null},{"id":3260077923,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjAwNzc5MjM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3260077923","actor":{"login":"frol","id":304265,"node_id":"MDQ6VXNlcjMwNDI2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/304265?v=4","gravatar_id":"","url":"https://api.github.com/users/frol","html_url":"https://github.com/frol","followers_url":"https://api.github.com/users/frol/followers","following_url":"https://api.github.com/users/frol/following{/other_user}","gists_url":"https://api.github.com/users/frol/gists{/gist_id}","starred_url":"https://api.github.com/users/frol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frol/subscriptions","organizations_url":"https://api.github.com/users/frol/orgs","repos_url":"https://api.github.com/users/frol/repos","events_url":"https://api.github.com/users/frol/events{/privacy}","received_events_url":"https://api.github.com/users/frol/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-22T11:11:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617747804","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-617747804","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":617747804,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzc0NzgwNA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-22T12:26:11Z","updated_at":"2020-04-22T12:26:11Z","body":"So I had a quick dive into this and will note my current results below:\r\n\r\n* We test exactly [this case](https://github.com/diesel-rs/diesel/blob/be0854094c79ae99ba3c893242a4be358ac0b0c5/diesel/src/mysql/types/date_and_time.rs#L209-L211) and  [tests succeeds at the CI](https://dev.azure.com/diesel-rs/diesel/_build/results?buildId=987&view=logs&j=898255ad-f705-5494-f0f7-685793ef9b54&t=8f733844-0f90-5c8a-3454-2ad445d95c2c&l=172)\r\n* If I ran the mysql tests locally I can reproduce exactly the described error message\r\n\r\nSo my local system is ubuntu 20.04 with libmysqlclient version 8.0.19-0ubuntu5 while the CI us using  ubuntu 16.04 with libmysqlclient version 5.7.29-0ubuntu0.16.04.1. Out of curiosity I've tested started a docker container of 18.04 and also run the tests  successfully there (libmysqlclient version 5.7.29-0ubuntu0.18.04.1), while it failed using 19.10 (libmysqlclient version 5.7.29-0ubuntu0.16.04.1).\r\n\r\nSo that does not say what is causing this, just that it could be possibly related to the version of libmysqlclient.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617747804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617763874","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-617763874","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":617763874,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzc2Mzg3NA==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-22T12:59:28Z","updated_at":"2020-04-22T12:59:28Z","body":"Thanks @weiznich! That was a quick turn around!\r\n\r\nIt seems like a big difference in behaviour for such similar versions (5.7.29-0ubuntu0.16.04.1 vs 5.7.29-0ubuntu0.18.04.1). I've had a quick look and they both seem to pack the same version of the upstream code: mysql-5.7.29 from 18-Dec-2019. Which makes it even more puzzling.\r\n\r\nI'm wondering if the version of support libraries (libc6, liggcc1, etc.) could be making all the difference. Not sure if it's easy for you to do a quick test.\r\n\r\nCheers\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617763874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3260469545,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2MDQ2OTU0NQ==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3260469545","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-22T12:59:28Z","performed_via_github_app":null},{"id":3260469553,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjA0Njk1NTM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3260469553","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-22T12:59:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617789799","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-617789799","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":617789799,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzc4OTc5OQ==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-22T13:47:37Z","updated_at":"2020-04-22T13:47:37Z","body":"Ok, seems like I've copied the wrong version for 19.04 ðŸ¤¦  The right one is `8.0.19-0ubuntu0.19.10.3`, so this is probably related to same changes regarding to  `libmysqlclient` between 5.8 and 8.0.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617789799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617866962","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-617866962","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":617866962,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzg2Njk2Mg==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-22T15:55:54Z","updated_at":"2020-04-22T15:55:54Z","body":"Ah, that makes more sense now. ;-)\r\nThose two versions use version 8.0 of the connector, which I believe is a single C++ code base for C and C++ clients.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617866962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617923945","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-617923945","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":617923945,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzkyMzk0NQ==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-22T17:34:17Z","updated_at":"2020-04-22T17:34:17Z","body":"Would be interesting to know which component exactly contains the issue. Is it caused by diesel or is it a bug in mysqlclient? The next thing I would try is building everything with asan enabled or trying to run the tests inside of valgrind. Any help here would be nice.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/617923945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618313208","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618313208","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618313208,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODMxMzIwOA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T10:12:04Z","updated_at":"2020-04-23T10:12:04Z","body":"So I've tried both `asan` and `valgrind`. Compiling and running the corresponding test with `asan` does make the error vanish ðŸ˜³ . \r\n`valgrind` emits the following output while the test succeedsâ€¦\r\n```\r\n==443951== Thread 2 mysql::types::da:\r\n==443951== Invalid write of size 8\r\n==443951==    at 0x48B8468: ??? (in /usr/lib/x86_64-linux-gnu/libmysqlclient.so.21.1.19)\r\n==443951==    by 0x48A378C: mysql_stmt_fetch (in /usr/lib/x86_64-linux-gnu/libmysqlclient.so.21.1.19)\r\n==443951==    by 0x31C048: diesel::mysql::connection::stmt::iterator::populate_row_buffers (iterator.rs:133)\r\n==443951==    by 0x31BBED: diesel::mysql::connection::stmt::iterator::StatementIterator::next (iterator.rs:36)\r\n==443951==    by 0x347415: diesel::mysql::connection::stmt::iterator::StatementIterator::map (iterator.rs:29)\r\n==443951==    by 0x2F3B5F: <diesel::mysql::connection::MysqlConnection as diesel::connection::Connection>::query_by_index (mod.rs:77)\r\n==443951==    by 0x340D06: <T as diesel::query_dsl::load_dsl::LoadQuery<Conn,U>>::internal_load (load_dsl.rs:30)\r\n==443951==    by 0x340DF3: diesel::query_dsl::RunQueryDsl::load (mod.rs:1190)\r\n==443951==    by 0x3413D1: diesel::query_dsl::RunQueryDsl::get_result (mod.rs:1239)\r\n==443951==    by 0x30B40B: diesel::mysql::types::date_and_time::tests::times_of_day_decode_correctly (date_and_time.rs:227)\r\n==443951==    by 0x2C92B9: diesel::mysql::types::date_and_time::tests::times_of_day_decode_correctly::{{closure}} (date_and_time.rs:223)\r\n==443951==    by 0x2EB21D: core::ops::function::FnOnce::call_once (function.rs:232)\r\n==443951==  Address 0x5970e78 is 0 bytes after a block of size 40 alloc'd\r\n==443951==    at 0x483DD99: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==443951==    by 0x568F3B: alloc::alloc::alloc_zeroed (alloc.rs:162)\r\n==443951==    by 0x569091: <alloc::alloc::Global as core::alloc::AllocRef>::alloc_zeroed (alloc.rs:189)\r\n==443951==    by 0x5695B4: alloc::raw_vec::RawVec<T,A>::allocate_in (raw_vec.rs:88)\r\n==443951==    by 0x452723: alloc::raw_vec::RawVec<T>::with_capacity_zeroed (raw_vec.rs:149)\r\n==443951==    by 0x40B9E5: <u8 as alloc::vec::SpecFromElem>::from_elem (vec.rs:1750)\r\n==443951==    by 0x411DAD: alloc::vec::from_elem (vec.rs:1730)\r\n==443951==    by 0x333B64: diesel::mysql::connection::bind::BindData::for_output::{{closure}} (bind.rs:123)\r\n==443951==    by 0x320964: core::option::Option<T>::map (option.rs:456)\r\n==443951==    by 0x32F18D: diesel::mysql::connection::bind::BindData::for_output (bind.rs:120)\r\n==443951==    by 0x2EAC35: core::ops::function::FnMut::call_mut (function.rs:154)\r\n==443951==    by 0x2C7B81: core::iter::adapters::map_fold::{{closure}} (mod.rs:772)``\r\n```\r\n\r\nAnother think I've checked is: Did the definition of `MYSQL_TIME` changed between 5.8 and 8.0, but it seems to be the same struct for both version.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618313208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618331327","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618331327","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618331327,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODMzMTMyNw==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T10:50:33Z","updated_at":"2020-04-23T10:51:22Z","body":"Thanks @weiznich!\r\n\r\nThat's interesting. While debugging my error I noticed that the `length` member of the MYSQL_BIND structure for the Time columns was set to **48**, while the length of the buffer (vector) was **40**.\r\nI thought that could be due to some alignment artefact, but the fact that the `length` member is supposed to be set by the _mysqlclient library_ made me a bit suspicious.\r\n\r\nHowever, I've been doing some (unrelated) refactoring of my code and have started using BoxedQuery for this particular query... and when I've tried to replicate the error to add some details to this comment it's **not happening** any more. (?!?!?)\r\n\r\nI guess the memory problem is somewhat subtle and is affected by any changes introduced by BoxedQuery, but perhaps this provides additional clues.\r\n\r\nI'll see if I can go back to my previous version and do some more testing, but it might not be until tomorrow now.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618331327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3264506638,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2NDUwNjYzOA==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3264506638","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-23T10:50:34Z","performed_via_github_app":null},{"id":3264506646,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjQ1MDY2NDY=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3264506646","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-23T10:50:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618367032","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618367032","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618367032,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODM2NzAzMg==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T12:13:37Z","updated_at":"2020-04-23T12:13:37Z","body":"I spoke too soon. :-(\r\n\r\nAs mentioned above, after changing to BoxedQuery the app stopped crashing with the same data that I was testing with before. However, when I changed to a different set of rows (still including a mix of columns with and without midnight values) the app crashed again - this time with \"free(): invalid pointer\".\r\n\r\nUnfortunately, it seems that the context of the row processing and later deallocation has an significant impact on the present and exact nature of the problem.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618367032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618408680","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618408680","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618408680,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQwODY4MA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T13:57:11Z","updated_at":"2020-04-23T13:57:11Z","body":"> That's interesting. While debugging my error I noticed that the length member of the MYSQL_BIND structure for the Time columns was set to 48, while the length of the buffer (vector) was 40.\r\nI thought that could be due to some alignment artefact, but the fact that the length member is supposed to be set by the mysqlclient library made me a bit suspicious.\r\n\r\nAs this seems to be very suspicious I've digged again into the source code of `mysql_time.h` and it's horrifyingâ€¦\r\nCompare [the definition](https://github.com/mysql/mysql-server/blob/ea7d2e2d16ac03afdd9cb72a972a95981107bf51/include/mysql_time.h#L81-L88) from the central mysql github repository with the [corresponding definition](https://github.com/MariaDB/server/blob/2655984ed4d22cf6eeec59637e1bf31d78cac679/include/mysql_time.h#L59-L65) from the mariadb repository. Someone added a `int time_zone_displacement` in the mysql definition, making both incompatible. Additionally `git blame` reveals that this happens with the 8.0.19 release. I've not found any change log entry anywhere about thisâ€¦\r\n\r\nWhat now happens is the following:\r\n\r\n* `diesel` uses static bindings generated for an older mysqlclient version\r\n* This bindings [contain](https://github.com/sgrif/mysqlclient-sys/blob/a1ef27b075df6d6c6f760554c94b9860ca9e7c24/src/bindings_macos.rs#L197-L208) contain a now incomplete definition of `MYSQL_TIME` that has only a size of 40 bytes.\r\n* `diesel` then uses this definition [here](https://github.com/diesel-rs/diesel/blob/4d6a088f337d0111bed022bb8128a82927ac610c/diesel/src/mysql/connection/bind.rs#L247) to calculate the correct binding buffer size for the query result.\r\n* Newer `libmysqlclient` versions expect that the buffer has a size of 48 byte and write past the bounds of the buffer. While doing that some probably unrelated thing gets overridden. That then causes the crash in a with an unrelated error message about free.\r\n* Crashes do not happen with asan/valgrind because they insert padding bytes/red zones to detect such writes. (Don't know why asan does not detect this write)\r\n\r\nThat all written comes up the question how to fix this mess. As the new field is in the end of the struct and the c standard does not allow struct field reordering it should be possible to just update our bindings to the new version. That means someone needs to run `bindgen` on `mysql.h` on different platforms and submit a PR to the `mysqlclient-sys` repo linked above. After that we can issue a new release that hopefully fixes this issue for newer versions of `libmysqlclient`. Older versions should continue to work as we now just allocate a larger buffer for them. They will only populate all but the last field, but as we initialize the buffer to be zeroed we can assume that the field will be then set to zero, which seems to be a sensible default for `time_zone_displacement`. Beside of that we may want to update the time handling code in `diesel/mysql` to handle that field as well, but that is something that could be done later. \r\nAs I'm not using mysql myself and also do not have access to a windows PC I will not work on this issue any time soon. Therefore I mark this issue as help wanted, so for anyone interested feel free to submit a corresponding fix.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618408680/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3265106094,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyNjUxMDYwOTQ=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3265106094","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-23T13:57:26Z","label":{"name":"help wanted","color":"159818"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618439125","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618439125","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618439125,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQzOTEyNQ==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T14:48:51Z","updated_at":"2020-04-23T14:48:51Z","body":"I only ever use Linux, but I can give it a try on that environment. If the tests are successful on Linux then we'd just need somebody to do the Windows part - perhaps an easy change once we see all the differences between the two versions.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618439125/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618988019","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-618988019","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":618988019,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk4ODAxOQ==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T12:48:09Z","updated_at":"2020-04-24T12:48:09Z","body":"Ok, I think I made a bit of progress on the Linux front (I guess valid for MacOS too).\r\nI've generated a new version of the bindings from version 8.0.19-0ubuntu5 of the library (libmysqlclient21). I wasn't quite sure which options to use, so I've looked at an old revision of mysqlclient_sys to replicate how it was being generated programmatically. This is what I've used:\r\n\r\n```shell\r\nbindgen --whitelist-function mysql.* --whitelist-type MYSQL.* --whitelist-var MYSQL.* -o bindings_macos.rs --default-enum-style=rust /usr/include/mysql/mysql.h -- -I/usr/include/mysql\r\n```\r\n\r\nI've applied the new file to the current version of **mysqlclient_sys** and then pointed a local version of **diesel** (master) at the modified repo. Initially it threw a few errors while building due to the change of `my_bool` to plain `bool`, plus some knock-on changes because now it is a proper boolean and before is was an `int`.\r\n\r\nAfter those minor fixes I was able to compile my program and successfully run all the commands (or exacution paths) that it supports. This is not a full test by any means, but I don't think I can really run diesel's tests locally (?).\r\n\r\n**Note**: Even though I'm normally using diesel 1.4.4, and I tried to apply the changes to that version initially, it started to come up with other errors that were not related to the update of the bindings (e.g. deprecation of `Error::description()`). In the end I went for the current master branch, which I guess makes sense in the long run.\r\n\r\nSo, I have a couple of patches, for diesel and mysqlclient_sys respectively, that might be worth testing a bit more \"seriously\". I could try and fork the repos and submit PRs or I can create a couple of patch files and send to anybody already doing PRs on a regular basis.\r\n\r\nHowever, these changes are just for Linux/MacOS. Perhaps somebody can take the info about bindgen above and generate the Windows bindings (?).\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/618988019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619221515","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-619221515","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":619221515,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTIyMTUxNQ==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T20:21:03Z","updated_at":"2020-04-24T20:21:03Z","body":"Just a quick note about the build errors on the 1.4.x branch: Development normally happens on master. Those warnings/errors are fixed there. Changes are then backported if suitable to the other branch.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619221515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619968997","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-619968997","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":619968997,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTk2ODk5Nw==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T12:57:51Z","updated_at":"2020-04-27T12:57:51Z","body":"I've now tested my changes against libmysqlclient20 (libmysqlclient20_5.7.29-0ubuntu0.18.04.1) as well, and it seems to be working fine.\r\nAgain, this is a limited test, but it appears that the updated bindings are compatible with MySQL 5.7 and 8.0.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619968997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619984278","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-619984278","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":619984278,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTk4NDI3OA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T13:25:30Z","updated_at":"2020-04-27T13:25:30Z","body":":+1: Feel free to open WIP PR's at the corresponding locations, so we can talk about specific changes there.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/619984278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T09:55:52Z","updated_at":"2020-04-28T09:55:52Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24","repository_url":"https://api.github.com/repos/sgrif/mysqlclient-sys","labels_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24/comments","events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24/events","html_url":"https://github.com/sgrif/mysqlclient-sys/pull/24","id":608183624,"node_id":"MDExOlB1bGxSZXF1ZXN0NDEwMDEwNDIw","number":24,"title":"Update Linux/MacOS bindings to MySQL client 8.0","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-04-28T09:55:52Z","updated_at":"2024-05-11T07:27:19Z","closed_at":"2024-05-11T07:27:19Z","author_association":"NONE","active_lock_reason":null,"draft":false,"repository":{"id":80854670,"node_id":"MDEwOlJlcG9zaXRvcnk4MDg1NDY3MA==","name":"mysqlclient-sys","full_name":"sgrif/mysqlclient-sys","private":false,"owner":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sgrif/mysqlclient-sys","description":"Rust bindings for libmysqlclient","fork":false,"url":"https://api.github.com/repos/sgrif/mysqlclient-sys","forks_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/forks","keys_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/teams","hooks_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/hooks","issue_events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/events{/number}","events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/events","assignees_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/assignees{/user}","branches_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/branches{/branch}","tags_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/tags","blobs_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/refs{/sha}","trees_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/statuses/{sha}","languages_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/languages","stargazers_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/stargazers","contributors_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/contributors","subscribers_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/subscribers","subscription_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/subscription","commits_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/commits{/sha}","git_commits_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/commits{/sha}","comments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/comments{/number}","issue_comment_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/comments{/number}","contents_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/contents/{+path}","compare_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/merges","archive_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/downloads","issues_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues{/number}","pulls_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/pulls{/number}","milestones_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/milestones{/number}","notifications_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/labels{/name}","releases_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/releases{/id}","deployments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/deployments","created_at":"2017-02-03T17:59:46Z","updated_at":"2025-10-25T04:20:55Z","pushed_at":"2025-07-22T19:45:00Z","git_url":"git://github.com/sgrif/mysqlclient-sys.git","ssh_url":"git@github.com:sgrif/mysqlclient-sys.git","clone_url":"https://github.com/sgrif/mysqlclient-sys.git","svn_url":"https://github.com/sgrif/mysqlclient-sys","homepage":null,"size":579,"stargazers_count":39,"watchers_count":39,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":40,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":40,"open_issues":2,"watchers":39,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sgrif/mysqlclient-sys/pulls/24","html_url":"https://github.com/sgrif/mysqlclient-sys/pull/24","diff_url":"https://github.com/sgrif/mysqlclient-sys/pull/24.diff","patch_url":"https://github.com/sgrif/mysqlclient-sys/pull/24.patch","merged_at":null},"body":"This is the PR discussed in diesel's issue diesel-rs/diesel#2373.\r\nIt includes the **update of the bindings to support MySQL client library 8.0** for the common Linux/MacOS bindings_macos.rs file.\r\n\r\n### Tests:\r\n\r\n- This crate - **passed** on Linux\r\n- Diesel's crate - test **passed** for the master branch against libmysqlclient20 (MySQL 5.7) and libmysqlclient21 (MySQL 8.0); both on Linux (Ubuntu 18.04 and 20.04, respectively).\r\n\r\n### Limitations:\r\n\r\n- No tests run on MacOS\r\n- This PR does **not** include an update for the Windows bindings (bindings_windows.rs)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/24/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/620665627","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-620665627","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":620665627,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDY2NTYyNw==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T15:07:06Z","updated_at":"2020-04-28T15:07:06Z","body":"Hi @weiznich,\r\n\r\nI've opened a PR for the **mysqlclient-sys** part of the fix: sgrif/mysqlclient-sys#24\r\n\r\nMy understanding is that the PR for **diesel** should wait until that change is committed to mysqlclient-sys and then we can update the dependency on diesel. Please let me know if you think there's a better approach.\r\nAs mentioned on the PR, I've run the diesel tests against both MySQL versions, 5.7 and 8.0, but that was linking to my local, updated, copy of mysqlclient-sys.\r\n\r\nThanks & regards,\r\nAlfonso","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/620665627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3280779284,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI4MDc3OTI4NA==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3280779284","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-28T15:07:06Z","performed_via_github_app":null},{"id":3280779293,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyODA3NzkyOTM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3280779293","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-28T15:07:06Z","performed_via_github_app":null},{"actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-02T21:31:57Z","updated_at":"2020-05-02T21:31:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25","repository_url":"https://api.github.com/repos/sgrif/mysqlclient-sys","labels_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25/labels{/name}","comments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25/comments","events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25/events","html_url":"https://github.com/sgrif/mysqlclient-sys/issues/25","id":610868401,"node_id":"MDU6SXNzdWU2MTA4Njg0MDE=","number":25,"title":"set properly cargo:rustc-link-lib for mariadb ","user":{"login":"p-alik","id":2326795,"node_id":"MDQ6VXNlcjIzMjY3OTU=","avatar_url":"https://avatars.githubusercontent.com/u/2326795?v=4","gravatar_id":"","url":"https://api.github.com/users/p-alik","html_url":"https://github.com/p-alik","followers_url":"https://api.github.com/users/p-alik/followers","following_url":"https://api.github.com/users/p-alik/following{/other_user}","gists_url":"https://api.github.com/users/p-alik/gists{/gist_id}","starred_url":"https://api.github.com/users/p-alik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p-alik/subscriptions","organizations_url":"https://api.github.com/users/p-alik/orgs","repos_url":"https://api.github.com/users/p-alik/repos","events_url":"https://api.github.com/users/p-alik/events{/privacy}","received_events_url":"https://api.github.com/users/p-alik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-05-01T17:27:53Z","updated_at":"2024-05-10T15:22:18Z","closed_at":"2024-05-10T15:22:18Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":80854670,"node_id":"MDEwOlJlcG9zaXRvcnk4MDg1NDY3MA==","name":"mysqlclient-sys","full_name":"sgrif/mysqlclient-sys","private":false,"owner":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sgrif/mysqlclient-sys","description":"Rust bindings for libmysqlclient","fork":false,"url":"https://api.github.com/repos/sgrif/mysqlclient-sys","forks_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/forks","keys_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/teams","hooks_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/hooks","issue_events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/events{/number}","events_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/events","assignees_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/assignees{/user}","branches_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/branches{/branch}","tags_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/tags","blobs_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/refs{/sha}","trees_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/statuses/{sha}","languages_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/languages","stargazers_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/stargazers","contributors_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/contributors","subscribers_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/subscribers","subscription_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/subscription","commits_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/commits{/sha}","git_commits_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/git/commits{/sha}","comments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/comments{/number}","issue_comment_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/comments{/number}","contents_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/contents/{+path}","compare_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/merges","archive_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/downloads","issues_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues{/number}","pulls_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/pulls{/number}","milestones_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/milestones{/number}","notifications_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/labels{/name}","releases_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/releases{/id}","deployments_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/deployments","created_at":"2017-02-03T17:59:46Z","updated_at":"2025-10-25T04:20:55Z","pushed_at":"2025-07-22T19:45:00Z","git_url":"git://github.com/sgrif/mysqlclient-sys.git","ssh_url":"git@github.com:sgrif/mysqlclient-sys.git","clone_url":"https://github.com/sgrif/mysqlclient-sys.git","svn_url":"https://github.com/sgrif/mysqlclient-sys","homepage":null,"size":579,"stargazers_count":39,"watchers_count":39,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":40,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":40,"open_issues":2,"watchers":39,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I run in an issue due mariadb recently, which inclusive a workaround is described on [stackoverflow](https://stackoverflow.com/questions/61505861/crate-with-diesel-and-mysql-dependencies-no-longer-compiles-against-mariadb-afte).\r\n\r\nThis patch of [build.rs](https://github.com/sgrif/mysqlclient-sys/blob/master/build.rs) would solve my issue, but maybe approach of PR #2 is worthwhile.\r\n\r\n```diff\r\ndiff --git a/build.rs b/build.rs\r\nindex 6b573bd..10f893e 100644\r\n--- a/build.rs\r\n+++ b/build.rs\r\n@@ -24,13 +24,24 @@ fn main() {\r\n     } else if cfg!(all(windows, target_env=\"msvc\")) {\r\n         println!(\"cargo:rustc-link-lib=static=mysqlclient\");\r\n     } else {\r\n-        println!(\"cargo:rustc-link-lib=mysqlclient\");\r\n+        match mysql_config(\"--libs\") {\r\n+            Some(v) => {\r\n+                if v.contains(\" -lmariadb\") {\r\n+                    println!(\"cargo:rustc-link-lib=mariadb\");\r\n+                } else {\r\n+                    println!(\"cargo:rustc-link-lib=mysqlclient\");\r\n+                }\r\n+            },\r\n+            None   => println!(\"nothing\")\r\n+        }\r\n+\r\n     }\r\n }\r\n \r\n-fn mysql_config_variable(var_name: &str) -> Option<String> {\r\n+fn mysql_config(option: &str) -> Option<String> {\r\n+    println!(\"mysql_config {}\", option);\r\n     Command::new(\"mysql_config\")\r\n-        .arg(format!(\"--variable={}\", var_name))\r\n+        .arg(option)\r\n         .output()\r\n         .into_iter()\r\n         .filter(|output| output.status.success())\r\n@@ -39,6 +50,10 @@ fn mysql_config_variable(var_name: &str) -> Option<String> {\r\n         .next()\r\n }\r\n \r\n+fn mysql_config_variable(var_name: &str) -> Option<String> {\r\n+    mysql_config(format!(\"--variable={}\", var_name).as_str())\r\n+}\r\n+\r\n #[cfg(target_env = \"msvc\")]\r\n fn try_vcpkg() -> bool {\r\n     vcpkg::find_package(\"libmysql\").is_ok()\r\n```\r\n\r\nfull output of `mysql_config`:\r\n\r\n```bash\r\nmysql_config \r\nUsage: /nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/bin/mysql_config [OPTIONS]\r\nOptions:\r\n        --cflags         [-I/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/include/mysql -I/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/include/mysql/mysql]\r\n        --include        [-I/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/include/mysql -I/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/include/mysql/mysql]\r\n        --libs           [-L/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/ -lmariadb]\r\n        --libs_r         [-L/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/ -lmariadb]\r\n        --plugindir      [/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/mysql/plugin]\r\n        --socket         [/run/mysqld/mysqld.sock]\r\n        --port           [3306]\r\n        --version        [10.3.18]\r\n        --libmysqld-libs [-L/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/mysql  -lmysqld]\r\n        --variable=VAR   VAR is one of:\r\n                pkgincludedir [/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/include/mysql]\r\n                pkglibdir     [/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/mysql]\r\n                plugindir     [/nix/store/p9qk6grnkmg96bvhyxix70wcb6bak7xx-mariadb-server-10.3.18-dev/lib/mysql/plugin]\r\n```\r\n\r\nFor isntance to compile following C code I've to run `gcc -Wall mysql-connect.c -lmariadb`. Otherwise I get same exception I've faced with Rust.\r\n\r\n```c\r\n#include \"mysql/mysql.h\"\r\n#include \"stdio.h\"\r\n\r\n#define DB_HOST         NULL\r\n#define DB_USER        \"root\"\r\n#define DB_PASSW       \"test\"\r\n#define DB_NAME        \"test\"\r\n#define DB_PORT        0\r\n#define DB_UNIX_SOCKET NULL\r\n\r\nint main( void ) {\r\n   MYSQL mysql;\r\n   mysql_init(&mysql);\r\n   if (!mysql_real_connect(&mysql, NULL, DB_USER, DB_PASSW, DB_NAME, DB_PORT, DB_UNIX_SOCKET, 0)) {\r\n      printf(\"Error: %s\\n\", mysql_error(&mysql));\r\n   } else {\r\n      printf(\"Connected to the server: %s\\n\", mysql_get_server_info(&mysql));\r\n      mysql_close(&mysql);\r\n   }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sgrif/mysqlclient-sys/issues/25/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":3405608053,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0MDU2MDgwNTM=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3405608053","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b4cec806a1d6c984f6510a1710b4759a189a36f8","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/b4cec806a1d6c984f6510a1710b4759a189a36f8","created_at":"2020-06-04T08:05:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/638683670","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-638683670","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":638683670,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODY4MzY3MA==","user":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T08:08:20Z","updated_at":"2020-06-04T08:11:47Z","body":"I've pushed a fix not depending on a update of `mysqlclient-sys` as 1b0453f2cb814d39fbceb21807c5fb8c4ce9a6cc. \r\nIf someone is interested in seeing this fixed as part of the current 1.4.x release feel free to submit a backport PR based on this. (Keep in mind that the public `FromSql`/`ToSql` impls for `mysqlclient-sys::MYSQL_TIME` need to be preserved. I think they should internally relay on the impls based on the updated struct layout)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/638683670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3405630420,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0MDU2MzA0MjA=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/3405630420","actor":{"login":"weiznich","id":1674512,"node_id":"MDQ6VXNlcjE2NzQ1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1674512?v=4","gravatar_id":"","url":"https://api.github.com/users/weiznich","html_url":"https://github.com/weiznich","followers_url":"https://api.github.com/users/weiznich/followers","following_url":"https://api.github.com/users/weiznich/following{/other_user}","gists_url":"https://api.github.com/users/weiznich/gists{/gist_id}","starred_url":"https://api.github.com/users/weiznich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiznich/subscriptions","organizations_url":"https://api.github.com/users/weiznich/orgs","repos_url":"https://api.github.com/users/weiznich/repos","events_url":"https://api.github.com/users/weiznich/events{/privacy}","received_events_url":"https://api.github.com/users/weiznich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1b0453f2cb814d39fbceb21807c5fb8c4ce9a6cc","commit_url":"https://api.github.com/repos/weiznich/diesel/commits/1b0453f2cb814d39fbceb21807c5fb8c4ce9a6cc","created_at":"2020-06-04T08:11:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/638771530","html_url":"https://github.com/diesel-rs/diesel/issues/2373#issuecomment-638771530","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/2373","id":638771530,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODc3MTUzMA==","user":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T10:44:27Z","updated_at":"2020-06-04T10:44:27Z","body":"Happy to work on the 1.4.x backport (at least try).\r\n\r\n@weiznich When you have a minute, could you explain what you mean with your comment about preserving `FromSql`/`ToSql` impls on the `mysqlclient-sys` version? As far as I can see the fix consist on creating and using a diesel-specific version of `MYSQL_TIME` that's compatible with newer libraries. So we are not touching or using the one from `mysqlclient-sys`, right?\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/638771530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alfonso-eusebio","id":9017519,"node_id":"MDQ6VXNlcjkwMTc1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9017519?v=4","gravatar_id":"","url":"https://api.github.com/users/alfonso-eusebio","html_url":"https://github.com/alfonso-eusebio","followers_url":"https://api.github.com/users/alfonso-eusebio/followers","following_url":"https://api.github.com/users/alfonso-eusebio/following{/other_user}","gists_url":"https://api.github.com/users/alfonso-eusebio/gists{/gist_id}","starred_url":"https://api.github.com/users/alfonso-eusebio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alfonso-eusebio/subscriptions","organizations_url":"https://api.github.com/users/alfonso-eusebio/orgs","repos_url":"https://api.github.com/users/alfonso-eusebio/repos","events_url":"https://api.github.com/users/alfonso-eusebio/events{/privacy}","received_events_url":"https://api.github.com/users/alfonso-eusebio/received_events","type":"User","user_view_type":"public","site_admin":false}}]