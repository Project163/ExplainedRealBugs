{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827/events","html_url":"https://github.com/diesel-rs/diesel/issues/1827","id":353541332,"node_id":"MDU6SXNzdWUzNTM1NDEzMzI=","number":1827,"title":"Associations with generic types","user":{"login":"moulins","id":10963458,"node_id":"MDQ6VXNlcjEwOTYzNDU4","avatar_url":"https://avatars.githubusercontent.com/u/10963458?v=4","gravatar_id":"","url":"https://api.github.com/users/moulins","html_url":"https://github.com/moulins","followers_url":"https://api.github.com/users/moulins/followers","following_url":"https://api.github.com/users/moulins/following{/other_user}","gists_url":"https://api.github.com/users/moulins/gists{/gist_id}","starred_url":"https://api.github.com/users/moulins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moulins/subscriptions","organizations_url":"https://api.github.com/users/moulins/orgs","repos_url":"https://api.github.com/users/moulins/repos","events_url":"https://api.github.com/users/moulins/events{/privacy}","received_events_url":"https://api.github.com/users/moulins/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-08-23T20:28:53Z","updated_at":"2018-09-12T20:16:23Z","closed_at":"2018-09-12T19:50:37Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have the following two tables (with the corresponding `schema!`s):\r\n```rust\r\n#[derive(Debug, Queryable, Insertable, Identifiable)]\r\n#[table_name = \"foos\"]\r\npub struct Foo<'a> {\r\n    id: i32,\r\n    stuff: Cow<'a, String>\r\n}\r\n\r\n#[derive(Debug, Queryable, Insertable, Identifiable, Associations)]\r\n#[belongs_to(Foo)]\r\n#[table_name = \"bars\"]\r\npub struct Bar {\r\n    id: i32,\r\n    foo_id: i32\r\n}\r\n```\r\n\r\nThe `#[derive(Associations)]` fail with `expected lifetime parameter`, because there is no way to refer to the generic lifetime `'a` of `Foo` in the `#[belongs_to]`. Did I overlook something which could allow me to use the derive?\r\n\r\n------\r\n\r\nOf course, I can implement `BelongsTo` manually, and everything seems to work:\r\n\r\n```rust\r\nimpl<'a> BelongsTo<Foo<'a>> for Bar {\r\n    type ForeignKey = i32;\r\n    type ForeignKeyColumn = schema::bars::foo_id;\r\n    \r\n    fn foreign_key(&self) -> Option<&Self::ForeignKey> {\r\n        Some(&self.foo_id)\r\n    }\r\n\r\n    fn foreign_key_column() -> Self::ForeignKeyColumn {\r\n        schema::bars::foo_id\r\n    }\r\n}\r\n```\r\nBut it would be nicer if we could specify these kinds of generic lifetimes, maybe with something like: `#[belongs_to(type=\"for<'a> Foo<'a>\")]`?\r\n\r\n","closed_by":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1827/timeline","performed_via_github_app":null,"state_reason":"completed"}