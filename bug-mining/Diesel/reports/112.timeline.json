[{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313186878","html_url":"https://github.com/diesel-rs/diesel/issues/998#issuecomment-313186878","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/998","id":313186878,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzE4Njg3OA==","user":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-05T18:27:24Z","updated_at":"2017-07-05T18:27:24Z","body":"We need to make this fail to compile. We don't support the PG tuple type (and even if we did, it wouldn't map to a Rust tuple).\r\n\r\nWe should probably figure out a way to have all of the expression methods omitted from tuples.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313186878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313194992","html_url":"https://github.com/diesel-rs/diesel/issues/998#issuecomment-313194992","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/998","id":313194992,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzE5NDk5Mg==","user":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-05T18:57:59Z","updated_at":"2017-07-05T18:57:59Z","body":"Also since you're probably looking for a workaround for what you're trying to do:\r\n\r\n```rust\r\nuse diesel::expression::grouped::Grouped;\r\nlet query = diesel::delete(subs::table.filter(Grouped((user_id, show_id)).eq_any(\r\n        users::table.inner_join((subs::table).inner_join(shows::table))\r\n            .select((user_id, show_id))\r\n            .filter(id.eq(test_user_id).and(title.eq(test_title))))\r\n    ));\r\n```\r\n\r\n`Grouped` is internal, and that code may stop working in the future, but that will at least give you what you need for now. The way that I'd probably want to write that is:\r\n\r\n```rust\r\nlet target = subs::table\r\n    .filter(subs::user_id.eq(test_user_id))\r\n    .filter(exists(shows::table.filter(shows::title.eq(test_title).and(shows::id.eq(subs::show_id)))\r\n```\r\n\r\nbut that will fail to compile at the moment (supporting subselects which reference the outer table is something we're looking to fix)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313194992/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313206631","html_url":"https://github.com/diesel-rs/diesel/issues/998#issuecomment-313206631","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/998","id":313206631,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzIwNjYzMQ==","user":{"login":"Undin","id":2539310,"node_id":"MDQ6VXNlcjI1MzkzMTA=","avatar_url":"https://avatars.githubusercontent.com/u/2539310?v=4","gravatar_id":"","url":"https://api.github.com/users/Undin","html_url":"https://github.com/Undin","followers_url":"https://api.github.com/users/Undin/followers","following_url":"https://api.github.com/users/Undin/following{/other_user}","gists_url":"https://api.github.com/users/Undin/gists{/gist_id}","starred_url":"https://api.github.com/users/Undin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Undin/subscriptions","organizations_url":"https://api.github.com/users/Undin/orgs","repos_url":"https://api.github.com/users/Undin/repos","events_url":"https://api.github.com/users/Undin/events{/privacy}","received_events_url":"https://api.github.com/users/Undin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-05T19:45:34Z","updated_at":"2017-07-05T19:45:34Z","body":"Workaround works perfectly:)\r\nThanks a lot!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313206631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Undin","id":2539310,"node_id":"MDQ6VXNlcjI1MzkzMTA=","avatar_url":"https://avatars.githubusercontent.com/u/2539310?v=4","gravatar_id":"","url":"https://api.github.com/users/Undin","html_url":"https://github.com/Undin","followers_url":"https://api.github.com/users/Undin/followers","following_url":"https://api.github.com/users/Undin/following{/other_user}","gists_url":"https://api.github.com/users/Undin/gists{/gist_id}","starred_url":"https://api.github.com/users/Undin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Undin/subscriptions","organizations_url":"https://api.github.com/users/Undin/orgs","repos_url":"https://api.github.com/users/Undin/repos","events_url":"https://api.github.com/users/Undin/events{/privacy}","received_events_url":"https://api.github.com/users/Undin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1152659047,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExNTI2NTkwNDc=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/1152659047","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"139c49fb41b8f2d0ace99625cfb04d682a0743a1","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/139c49fb41b8f2d0ace99625cfb04d682a0743a1","created_at":"2017-07-06T12:51:52Z","performed_via_github_app":null},{"actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-06T12:52:02Z","updated_at":"2017-07-06T12:52:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002/events","html_url":"https://github.com/diesel-rs/diesel/pull/1002","id":240946323,"node_id":"MDExOlB1bGxSZXF1ZXN0MTI5MTc3OTE3","number":1002,"title":"Don't implement expression methods on tuples","user":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-07-06T12:52:02Z","updated_at":"2017-07-06T18:34:59Z","closed_at":"2017-07-06T18:34:56Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/diesel-rs/diesel/pulls/1002","html_url":"https://github.com/diesel-rs/diesel/pull/1002","diff_url":"https://github.com/diesel-rs/diesel/pull/1002.diff","patch_url":"https://github.com/diesel-rs/diesel/pull/1002.patch","merged_at":"2017-07-06T18:34:56Z"},"body":"With the exception of `.nullable`, all of these methods would generate\r\ninvalid SQL if used. Some people mistakenly think that we map rust\r\ntuples to a PG tuple. We don't actually support PG tuples, and if we did\r\nwe'd need to have it be a separate type to differentiate `SELECT id,\r\nname` from `SELECT (id, name)`.\r\n\r\nThis is not a full solution to the problem. Ideally we would actually\r\nproperly represent in the type system that a tuple is a list, which is\r\nonly valid in a few contexts. Instead, this solution simply prevents\r\ntheir construction. I don't think this mistake is common enough to\r\nwarrant more time being spent on it.\r\n\r\nMy hope is that if/when variadic generics happen, they are not built\r\naround tuples, which would allow us to better separate this case from\r\nnormal values. Until that time, this should suffice.\r\n\r\nI'm not 100% sold on the name `SingleValue`, as it seems odd that\r\n`Array<T>` implements it. However, the only other name I could think of\r\nwas `NotTuple`, which will feel odd if we ever do support PG tuples.\r\nSomething like `NotColumnList` could work, but that name feels odd to\r\nme. I think I want to stick with a name that says what the type is, not\r\nwhat it isn't.\r\n\r\nFixes #998.","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1002/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1152823464,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExNTI4MjM0NjQ=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/1152823464","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6491328ba4dead88016efe7611f3edc74ce0113c","commit_url":"https://api.github.com/repos/diesel-rs/diesel/commits/6491328ba4dead88016efe7611f3edc74ce0113c","created_at":"2017-07-06T14:23:21Z","performed_via_github_app":null},{"id":1153273590,"node_id":"MDExOkNsb3NlZEV2ZW50MTE1MzI3MzU5MA==","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/1153273590","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-07-06T18:34:56Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313482650","html_url":"https://github.com/diesel-rs/diesel/issues/998#issuecomment-313482650","issue_url":"https://api.github.com/repos/diesel-rs/diesel/issues/998","id":313482650,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzQ4MjY1MA==","user":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-06T18:37:22Z","updated_at":"2017-07-06T18:43:50Z","body":"FYI the workaround I gave you will no longer work in the next release. I'd do this instead (and this is probably just the best way to write the query regardless):\r\n\r\n```rust\r\nlet shows_with_title = shows::table\r\n    .select(shows::id)\r\n    .filter(shows::title.eq(test_title));\r\nlet target = subs::table\r\n    .filter(subs::user_id.eq(test_user_id))\r\n    .filter(subs::show_id.eq_any(shows_with_title));\r\nlet query = diesel::delete(target);\r\n```\r\n\r\nThe SQL will be:\r\n\r\n```SQL\r\nDELETE FROM subs\r\n  WHERE subs.user_id = $1\r\n    AND subs.show_id IN (\r\n      SELECT shows.id FROM shows WHERE shows.title = $2\r\n    )\r\n```\r\n\r\nwhich should be significantly more efficient than what you were trying to write originally","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments/313482650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sgrif","id":1529387,"node_id":"MDQ6VXNlcjE1MjkzODc=","avatar_url":"https://avatars.githubusercontent.com/u/1529387?v=4","gravatar_id":"","url":"https://api.github.com/users/sgrif","html_url":"https://github.com/sgrif","followers_url":"https://api.github.com/users/sgrif/followers","following_url":"https://api.github.com/users/sgrif/following{/other_user}","gists_url":"https://api.github.com/users/sgrif/gists{/gist_id}","starred_url":"https://api.github.com/users/sgrif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgrif/subscriptions","organizations_url":"https://api.github.com/users/sgrif/orgs","repos_url":"https://api.github.com/users/sgrif/repos","events_url":"https://api.github.com/users/sgrif/events{/privacy}","received_events_url":"https://api.github.com/users/sgrif/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1155786055,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExNTU3ODYwNTU=","url":"https://api.github.com/repos/diesel-rs/diesel/issues/events/1155786055","actor":{"login":"Fiedzia","id":240435,"node_id":"MDQ6VXNlcjI0MDQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/240435?v=4","gravatar_id":"","url":"https://api.github.com/users/Fiedzia","html_url":"https://github.com/Fiedzia","followers_url":"https://api.github.com/users/Fiedzia/followers","following_url":"https://api.github.com/users/Fiedzia/following{/other_user}","gists_url":"https://api.github.com/users/Fiedzia/gists{/gist_id}","starred_url":"https://api.github.com/users/Fiedzia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fiedzia/subscriptions","organizations_url":"https://api.github.com/users/Fiedzia/orgs","repos_url":"https://api.github.com/users/Fiedzia/repos","events_url":"https://api.github.com/users/Fiedzia/events{/privacy}","received_events_url":"https://api.github.com/users/Fiedzia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0ba1d5b51edae3c425daf3f3a80dca8000123a21","commit_url":"https://api.github.com/repos/Fiedzia/diesel/commits/0ba1d5b51edae3c425daf3f3a80dca8000123a21","created_at":"2017-07-09T13:43:40Z","performed_via_github_app":null},{"actor":{"login":"Libbum","id":3059508,"node_id":"MDQ6VXNlcjMwNTk1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/3059508?v=4","gravatar_id":"","url":"https://api.github.com/users/Libbum","html_url":"https://github.com/Libbum","followers_url":"https://api.github.com/users/Libbum/followers","following_url":"https://api.github.com/users/Libbum/following{/other_user}","gists_url":"https://api.github.com/users/Libbum/gists{/gist_id}","starred_url":"https://api.github.com/users/Libbum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Libbum/subscriptions","organizations_url":"https://api.github.com/users/Libbum/orgs","repos_url":"https://api.github.com/users/Libbum/repos","events_url":"https://api.github.com/users/Libbum/events{/privacy}","received_events_url":"https://api.github.com/users/Libbum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T16:25:14Z","updated_at":"2017-12-11T16:25:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369","repository_url":"https://api.github.com/repos/diesel-rs/diesel","labels_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369/labels{/name}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369/comments","events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369/events","html_url":"https://github.com/diesel-rs/diesel/issues/1369","id":281078909,"node_id":"MDU6SXNzdWUyODEwNzg5MDk=","number":1369,"title":"IntoUpdateTarget not implemented for a delete operation","user":{"login":"Libbum","id":3059508,"node_id":"MDQ6VXNlcjMwNTk1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/3059508?v=4","gravatar_id":"","url":"https://api.github.com/users/Libbum","html_url":"https://github.com/Libbum","followers_url":"https://api.github.com/users/Libbum/followers","following_url":"https://api.github.com/users/Libbum/following{/other_user}","gists_url":"https://api.github.com/users/Libbum/gists{/gist_id}","starred_url":"https://api.github.com/users/Libbum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Libbum/subscriptions","organizations_url":"https://api.github.com/users/Libbum/orgs","repos_url":"https://api.github.com/users/Libbum/repos","events_url":"https://api.github.com/users/Libbum/events{/privacy}","received_events_url":"https://api.github.com/users/Libbum/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-12-11T16:25:14Z","updated_at":"2017-12-12T16:18:19Z","closed_at":"2017-12-12T16:14:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":41609775,"node_id":"MDEwOlJlcG9zaXRvcnk0MTYwOTc3NQ==","name":"diesel","full_name":"diesel-rs/diesel","private":false,"owner":{"login":"diesel-rs","id":16763251,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2NzYzMjUx","avatar_url":"https://avatars.githubusercontent.com/u/16763251?v=4","gravatar_id":"","url":"https://api.github.com/users/diesel-rs","html_url":"https://github.com/diesel-rs","followers_url":"https://api.github.com/users/diesel-rs/followers","following_url":"https://api.github.com/users/diesel-rs/following{/other_user}","gists_url":"https://api.github.com/users/diesel-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/diesel-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diesel-rs/subscriptions","organizations_url":"https://api.github.com/users/diesel-rs/orgs","repos_url":"https://api.github.com/users/diesel-rs/repos","events_url":"https://api.github.com/users/diesel-rs/events{/privacy}","received_events_url":"https://api.github.com/users/diesel-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/diesel-rs/diesel","description":"A safe, extensible ORM and Query Builder for Rust","fork":false,"url":"https://api.github.com/repos/diesel-rs/diesel","forks_url":"https://api.github.com/repos/diesel-rs/diesel/forks","keys_url":"https://api.github.com/repos/diesel-rs/diesel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diesel-rs/diesel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diesel-rs/diesel/teams","hooks_url":"https://api.github.com/repos/diesel-rs/diesel/hooks","issue_events_url":"https://api.github.com/repos/diesel-rs/diesel/issues/events{/number}","events_url":"https://api.github.com/repos/diesel-rs/diesel/events","assignees_url":"https://api.github.com/repos/diesel-rs/diesel/assignees{/user}","branches_url":"https://api.github.com/repos/diesel-rs/diesel/branches{/branch}","tags_url":"https://api.github.com/repos/diesel-rs/diesel/tags","blobs_url":"https://api.github.com/repos/diesel-rs/diesel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diesel-rs/diesel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diesel-rs/diesel/git/refs{/sha}","trees_url":"https://api.github.com/repos/diesel-rs/diesel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diesel-rs/diesel/statuses/{sha}","languages_url":"https://api.github.com/repos/diesel-rs/diesel/languages","stargazers_url":"https://api.github.com/repos/diesel-rs/diesel/stargazers","contributors_url":"https://api.github.com/repos/diesel-rs/diesel/contributors","subscribers_url":"https://api.github.com/repos/diesel-rs/diesel/subscribers","subscription_url":"https://api.github.com/repos/diesel-rs/diesel/subscription","commits_url":"https://api.github.com/repos/diesel-rs/diesel/commits{/sha}","git_commits_url":"https://api.github.com/repos/diesel-rs/diesel/git/commits{/sha}","comments_url":"https://api.github.com/repos/diesel-rs/diesel/comments{/number}","issue_comment_url":"https://api.github.com/repos/diesel-rs/diesel/issues/comments{/number}","contents_url":"https://api.github.com/repos/diesel-rs/diesel/contents/{+path}","compare_url":"https://api.github.com/repos/diesel-rs/diesel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diesel-rs/diesel/merges","archive_url":"https://api.github.com/repos/diesel-rs/diesel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diesel-rs/diesel/downloads","issues_url":"https://api.github.com/repos/diesel-rs/diesel/issues{/number}","pulls_url":"https://api.github.com/repos/diesel-rs/diesel/pulls{/number}","milestones_url":"https://api.github.com/repos/diesel-rs/diesel/milestones{/number}","notifications_url":"https://api.github.com/repos/diesel-rs/diesel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diesel-rs/diesel/labels{/name}","releases_url":"https://api.github.com/repos/diesel-rs/diesel/releases{/id}","deployments_url":"https://api.github.com/repos/diesel-rs/diesel/deployments","created_at":"2015-08-29T22:51:00Z","updated_at":"2025-11-09T19:31:55Z","pushed_at":"2025-11-07T18:13:31Z","git_url":"git://github.com/diesel-rs/diesel.git","ssh_url":"git@github.com:diesel-rs/diesel.git","clone_url":"https://github.com/diesel-rs/diesel.git","svn_url":"https://github.com/diesel-rs/diesel","homepage":"https://diesel.rs","size":109357,"stargazers_count":13771,"watchers_count":13771,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1168,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":153,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["mysql","orm","postgresql","query-builder","rust","sqlite"],"visibility":"public","forks":1168,"open_issues":153,"watchers":13771,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--\r\nIf you want to report a bug, we added some points below you can fill out. If you want to request a feature, feel free to remove all the irrelevant text. In addition to this [issue tracker](https://github.com/diesel-rs/diesel/issues), you can also talk to Diesel maintainers and users on [Gitter](https://gitter.im/diesel-rs/diesel).\r\n-->\r\n\r\n## Setup\r\n\r\n### Versions\r\n\r\n- **Rust:** 1.24.0-nightly (2d4df9584 2017-12-10)\r\n- **Diesel:** 1.0.0-beta1\r\n- **Database:** sqlite\r\n- **Operating System** Arch Linux\r\n\r\n### Feature Flags\r\n\r\n- **diesel:** sqlite, chrono\r\n- **diesel_codegen:** not using it\r\n\r\n## Problem Description\r\n\r\nI have a similar issue to #998 in that my delete operation is failing to build in a portion of my query.\r\n\r\n### What are you trying to accomplish?\r\n\r\nThe following sql:\r\n\r\n```sql\r\nDELETE FROM comments WHERE mode=2 AND id NOT IN\r\n    (SELECT parent FROM comments WHERE parent IS NOT NULL);\r\n```\r\n\r\nimplemented with the following query:\r\n \r\n```rust\r\nlet child = comments::table.select(comments::parent).filter(comments::parent.is_not_null());\r\nlet target = comments::table.filter(comments::mode.eq(2)).filter(comments::id.ne_any(child));\r\nlet query = diesel::delete(target);\r\n```\r\non a table:\r\n\r\n```rust\r\ntable! {\r\n    comments (id) {\r\n        id -> Integer,\r\n        tid -> Integer,\r\n        parent -> Nullable<Integer>,\r\n        created -> Timestamp,\r\n        modified -> Nullable<Timestamp>,\r\n        mode -> Integer,\r\n        remote_addr -> Nullable<Text>,\r\n        text -> Text,\r\n        author -> Nullable<Text>,\r\n        email -> Nullable<Text>,\r\n        website -> Nullable<Text>,\r\n        hash -> Text,\r\n        likes -> Nullable<Integer>,\r\n        dislikes -> Nullable<Integer>,\r\n        voters -> Text,\r\n    }\r\n}\r\n```\r\n### What is the expected output?\r\n\r\n`query` should successfully compile.\r\n\r\n### What is the actual output?\r\n\r\nA compilation failure stating that `IntoUpdateTarget` is not implemented for the `query`.\r\n\r\n### Are you seeing any additional errors?\r\n\r\nThe complete error output is below:\r\n\r\nerror[E0277]: the trait bound `diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::expression::operators::And<diesel::expression::operators::Eq<schema::comments::columns::mode, diesel::expression::bound::Bound<diesel::types::Integer, i32>>, diesel::expression::array_comparison::NotIn<schema::comments::columns::id, diesel::expression::array_comparison::Subselect<diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::SelectClause<schema::comments::columns::parent>, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::dsl::IsNotNull<schema::comments::columns::parent>>>, diesel::types::Integer>>>>>: diesel::query_builder::IntoUpdateTarget` is not satisfied\r\n   --> src/models/comments/mod.rs:196:21\r\n    |\r\n196 |         let query = diesel::delete(target);\r\n    |                     ^^^^^^^^^^^^^^ the trait `diesel::query_builder::IntoUpdateTarget` is not implemented for `diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::expression::operators::And<diesel::expression::operators::Eq<schema::comments::columns::mode, diesel::expression::bound::Bound<diesel::types::Integer, i32>>, diesel::expression::array_comparison::NotIn<schema::comments::columns::id, diesel::expression::array_comparison::Subselect<diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::SelectClause<schema::comments::columns::parent>, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::dsl::IsNotNull<schema::comments::columns::parent>>>, diesel::types::Integer>>>>>`\r\n    |\r\n    = help: the following implementations were found:\r\n              <diesel::query_builder::SelectStatement<F, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, W> as diesel::query_builder::IntoUpdateTarget>\r\n    = note: required by `diesel::delete`\r\n\r\nerror[E0277]: the trait bound `diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::expression::operators::And<diesel::expression::operators::Eq<schema::comments::columns::mode, diesel::expression::bound::Bound<diesel::types::Integer, i32>>, diesel::expression::array_comparison::NotIn<schema::comments::columns::id, diesel::expression::array_comparison::Subselect<diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::SelectClause<schema::comments::columns::parent>, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::dsl::IsNotNull<schema::comments::columns::parent>>>, diesel::types::Integer>>>>>: diesel::query_builder::IntoUpdateTarget` is not satisfied\r\n   --> src/models/comments/mod.rs:196:21\r\n    |\r\n196 |         let query = diesel::delete(target);\r\n    |                     ^^^^^^^^^^^^^^^^^^^^^^ the trait `diesel::query_builder::IntoUpdateTarget` is not implemented for `diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::expression::operators::And<diesel::expression::operators::Eq<schema::comments::columns::mode, diesel::expression::bound::Bound<diesel::types::Integer, i32>>, diesel::expression::array_comparison::NotIn<schema::comments::columns::id, diesel::expression::array_comparison::Subselect<diesel::query_builder::SelectStatement<schema::comments::table, diesel::query_builder::select_clause::SelectClause<schema::comments::columns::parent>, diesel::query_builder::distinct_clause::NoDistinctClause, diesel::query_builder::where_clause::WhereClause<diesel::dsl::IsNotNull<schema::comments::columns::parent>>>, diesel::types::Integer>>>>>`\r\n    |\r\n    = help: the following implementations were found:\r\n              <diesel::query_builder::SelectStatement<F, diesel::query_builder::select_clause::DefaultSelectClause, diesel::query_builder::distinct_clause::NoDistinctClause, W> as diesel::query_builder::IntoUpdateTarget>\r\n\r\nerror: aborting due to 2 previous errors\r\n\r\n### Steps to reproduce\r\n\r\n<!--\r\nPlease include as much of your codebase as needed to reproduce the error.  If the relevant files are large, please consider linking to a public repository or a [Gist](https://gist.github.com/).\r\n\r\nPlease post as much of your database schema as necessary. If you are using `infer_schema!`, you can use `diesel print-schema` and post the relevant parts from that.\r\n-->\r\n\r\n## Checklist\r\n\r\n- [x] I have already looked over the [issue tracker](https://github.com/diesel-rs/diesel/issues) for similar issues.\r\n\r\n\r\n<!--\r\nThank you for your submission!  You're helping make Diesel more robust ðŸŽ‰  \r\n\r\nWe'll try to respond as quickly as possible.\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diesel-rs/diesel/issues/1369/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]