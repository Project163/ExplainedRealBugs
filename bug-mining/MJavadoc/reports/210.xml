<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:27:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MJAVADOC-650] Fix Javadoc search path for Java 9+</title>
                <link>https://issues.apache.org/jira/browse/MJAVADOC-650</link>
                <project id="12317529" key="MJAVADOC">Maven Javadoc Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Java 9 changed the directory structure of the JDK and JRE so&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; no longer finds the javadoc command. Debian has a patch to fix this at &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. It&apos;s only a few lines. Please apply the patch or implement the capability to look for `./bin/javadoc` as well as `../bin/javadoc`.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Evan&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/maven-javadoc-plugin/blob/master/src/main/java/org/apache/maven/plugins/javadoc/AbstractJavadocMojo.java#L3805&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-javadoc-plugin/blob/master/src/main/java/org/apache/maven/plugins/javadoc/AbstractJavadocMojo.java#L3805&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://sources.debian.org/data/main/m/maven-javadoc-plugin/3.0.1-3/debian/patches/openjdk-9-javadoc-path.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sources.debian.org/data/main/m/maven-javadoc-plugin/3.0.1-3/debian/patches/openjdk-9-javadoc-path.patch&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13298589">MJAVADOC-650</key>
            <summary>Fix Javadoc search path for Java 9+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slachiewicz">Sylwester Lachiewicz</assignee>
                                    <reporter username="evanward">Evan Ward</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2020 14:38:22 +0000</created>
                <updated>Tue, 10 Jun 2025 05:21:17 +0000</updated>
                            <resolved>Thu, 17 Sep 2020 21:06:22 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17193529" author="mampf86" created="Thu, 10 Sep 2020 10:44:25 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=evanward&quot; class=&quot;user-hover&quot; rel=&quot;evanward&quot;&gt;evanward&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I did a quick check because this never failed for me and I found that the &lt;tt&gt;javadoc&lt;/tt&gt; binaries are usually located in the correct path:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
user@host$:~/.jabba/jdk$ find . -name &lt;span class=&quot;code-quote&quot;&gt;&quot;javadoc&quot;&lt;/span&gt;
./adopt-openj9@1.8.0-232/bin/javadoc
./openjdk@1.11.0-2/bin/javadoc
./adopt-openj9@1.14.0-1/bin/javadoc
./openjdk@1.15.0-ea20/bin/javadoc
./openjdk@1.14.0-30/bin/javadoc
./ibm@1.8.0-211-SP5-FP37/bin/javadoc
./adopt@1.8.0-242/bin/javadoc
./adopt-openj9@1.11.0-6/bin/javadoc
./openjdk@1.15.0-ea21/bin/javadoc&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So maybe it is only the Debian distribution which relocates this binary? This is usually not in the &quot;jre&quot; folder. If debian moves it, it must be a debian bug.&lt;/p&gt;</comment>
                            <comment id="17193607" author="evanward" created="Thu, 10 Sep 2020 12:51:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmarwell&quot; class=&quot;user-hover&quot; rel=&quot;bmarwell&quot;&gt;bmarwell&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;The `javadoc` executable has stayed in the same place. The change was that `&quot;java.home&quot;` changed from `/usr/lib/jvm/java-8-openjdk-amd64/jre/` to `/usr/lib/jvm/java-11-openjdk-amd64/. So when the code at the linked line tries to do `${java.home}/../bin/javadoc` it ends up outside the JDK. The correct path should be `${java.home}/bin/javadoc` on Java 1.9+ as in the patch from Debian. It is my understanding that this was an upstream change made by Java, not Debian specific.&lt;/p&gt;

&lt;p&gt;Note that if you&apos;re using a Mac and Java &amp;gt;= 1.7 you won&apos;t see this bug because of the if clause above the linked line.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17193638" author="mampf86" created="Thu, 10 Sep 2020 14:10:13 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=evanward&quot; class=&quot;user-hover&quot; rel=&quot;evanward&quot;&gt;evanward&lt;/a&gt;, I never set my &lt;tt&gt;JAVA_HOME&lt;/tt&gt; to anything else than the root directory (i.e. &lt;tt&gt;$JAVA_HOME/jre/..&lt;/tt&gt;). This never failed me and I have active Java8 and java 11 jdks working this way. In fact, jabba (above output) works this way. Therefore, your first claim is just untrue &#8211; no JDK changed the path of the javadoc binary. I am on Linux btw.&lt;/p&gt;

&lt;p&gt;Which JDK are you using? A JDK which is shipped with Ubuntu or Debian? If so, they may have changed something.&lt;/p&gt;

&lt;p&gt;Also, which Maven installation are you using? A maven installation which is being shipped with debian? Your link to a Debian-specific fix suggests this, and this would not be the place to fix this.&lt;/p&gt;

&lt;p&gt;But, I am interested if this is a Debian-Specific issue or not. I can only tell you, a &lt;tt&gt;$JAVA_HOME/jre/bin/javadoc&lt;/tt&gt; binary should never have existed.&lt;/p&gt;</comment>
                            <comment id="17193704" author="evanward" created="Thu, 10 Sep 2020 16:13:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bmarwell&quot; class=&quot;user-hover&quot; rel=&quot;bmarwell&quot;&gt;bmarwell&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I don&apos;t think were having a good conversation with mutual understanding. If you read what I wrote I have never said the location of the javadoc binary has changed. Also I have never implied that there ever existed a javadoc executable within the JRE.&lt;/p&gt;

&lt;p&gt;Please read the links I provided. Specifically the linked code in maven where the comments state:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// ----------------------------------------------------------------------
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// Try to find javadocExe from &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;java.home&quot;&lt;/span&gt; )
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty( &lt;span class=&quot;code-quote&quot;&gt;&quot;java.home&quot;&lt;/span&gt; ) = JRE_HOME and JRE_HOME
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// should be in the JDK_HOME
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// ----------------------------------------------------------------------&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That assumption, which the code makes, was invalidated when Java 9 removed the `jre` directory. That is the faulty assumption that needs to be fixed. That is the assumption that is fixed by the attached patch. It is not Debian specific, it applies to all implementations of the JDK. To quote the Oracle release notes &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;for JDK 9:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;After you install JDK 9, if you look at the file system, you&#8217;ll notice that the directory layout is different from that of previous releases.&lt;/p&gt;

&lt;p&gt;Prior releases produced two types of runtime images: the JRE, which was a complete implementation of the Java SE Platform, and the JDK, which included the entire JRE in a&#160;&lt;tt&gt;jre/&lt;/tt&gt;&#160;directory, plus development tools and libraries.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Regarding your questions:&lt;/p&gt;

&lt;p&gt;I have never set $JAVA_HOME.&#160; When $JAVA_HOME is not set Java determines it own installation directory. This is the process that has changed between 8 and 9, not the location of the javadoc binary. Try running `find . -name &apos;java&apos;` in your JDK zoo. You will find that in in versions before 9 there is a java executable in `jre/bin/java` instead of just the `bin/java` in newer JDKs. Before 9 Java determined its installation directory to be the `jre` directory so that is the path returned by `System.getProperty(&quot;java.home&quot;)`. That changed with 9 when the Java project deleted the `jre` directory from the JDK.&lt;/p&gt;

&lt;p&gt;I&apos;ve tested with the JDK&apos;s shipped with Ubuntu and with Adopt OpenJDK JDKs. They all have the same results. I&apos;ve tested with the Ubuntu provide maven and with the Apache provided maven. They all have the same results.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-D867DCCC-CEB5-4AFA-9D11-9C62B7A3FAB1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-D867DCCC-CEB5-4AFA-9D11-9C62B7A3FAB1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17193727" author="mampf86" created="Thu, 10 Sep 2020 16:57:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=evanward&quot; class=&quot;user-hover&quot; rel=&quot;evanward&quot;&gt;evanward&lt;/a&gt;&#160;thanks for your in-depth explanation. I see now what is going on here. My fault was to imply &quot;the binary has been relocated&quot; when you in fact wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Java 9 changed the directory structure of the JDK and JRE so &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; no longer finds the javadoc command.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry for that and thanks for explaining.&lt;/p&gt;

&lt;p&gt;I just wonder why this never fails for me (nor a lot of other people). Maybe not setting&#160; the environment variable &lt;tt&gt;JAVA_HOME&lt;/tt&gt; OR setting &lt;tt&gt;JRE_HOME&lt;/tt&gt; will result in this behaviour. The official documentation is in fact:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&quot;java.home&quot; Installation directory for Java Runtime Environment (JRE)&quot;java.home&quot; Installation directory for Java Runtime Environment (JRE)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But it does not state that this is a &quot;jre&quot; folder, which is what you said.&lt;/p&gt;

&lt;p&gt;What actually brought me of track was this comment in the patch you attached a link to:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;// On Java 9, this has moved to: /usr/lib/jvm/java-9-openjdk-amd64/bin/javadoc&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Well, it was never moved. The java binary was moved from &lt;tt&gt;jdk/jre/bin/java&lt;/tt&gt; to &lt;tt&gt;jdk/bin/java&lt;/tt&gt; and &lt;tt&gt;java.home&lt;/tt&gt; was moved from &lt;tt&gt;jdk/jre&lt;/tt&gt; to just &lt;tt&gt;jdk&lt;/tt&gt; if you will. This will also explain why I never had the problem &#8211; if the file does not exist and &lt;tt&gt;JAVA_HOME&lt;/tt&gt; env var is set, that one will be used, &lt;a href=&quot;#L3811-L3826]&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;see these lines&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think the patch is just fine the way it is, just the comment is a bit misleading or could use some rephrasing. Would you like to create a pull request?&lt;/p&gt;</comment>
                            <comment id="17193773" author="evanward" created="Thu, 10 Sep 2020 18:14:19 +0000"  >&lt;p&gt;Sounds good. Thanks for looking in to it. I&apos;ll update the comments in the patch.&#160;&lt;/p&gt;</comment>
                            <comment id="17193775" author="mampf86" created="Thu, 10 Sep 2020 18:24:58 +0000"  >&lt;p&gt;Thanks for creating a PR and taking the time to explain it!&lt;/p&gt;

&lt;p&gt;Btw, I (just speaking for myself) would recommend to always set &lt;tt&gt;JAVA_HOME&lt;/tt&gt;, so you have control over the exact JDK you are running maven (and if not using toolchains, compiling the code) with. Anyway, good find and easy to fix &#8211; thanks! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17198030" author="hudson" created="Fri, 18 Sep 2020 00:14:20 +0000"  >&lt;p&gt;Build succeeded in Jenkins: Maven &#187; Maven TLP &#187; maven-javadoc-plugin &#187; master #24&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://ci-builds.apache.org/job/Maven/job/maven-box/job/maven-javadoc-plugin/job/master/24/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Maven/job/maven-box/job/maven-javadoc-plugin/job/master/24/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17958032" author="olamy" created="Tue, 10 Jun 2025 05:21:17 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-javadoc-plugin/issues/1009&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-javadoc-plugin#1009&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13225454">MJAVADOC-595</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13225454">MJAVADOC-595</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13293752">MJAVADOC-646</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0do3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>