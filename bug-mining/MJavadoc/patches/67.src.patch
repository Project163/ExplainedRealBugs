diff --git a/pom.xml b/pom.xml
index c08b6285..cfad9775 100644
--- a/pom.xml
+++ b/pom.xml
@@ -1,3 +1,22 @@
+<?xml version='1.0' encoding='UTF-8'?>
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one
+  or more contributor license agreements.  See the NOTICE file
+  distributed with this work for additional information
+  regarding copyright ownership.  The ASF licenses this file
+  to you under the Apache License, Version 2.0 (the
+  "License"); you may not use this file except in compliance
+  with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing,
+  software distributed under the License is distributed on an
+  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+  KIND, either express or implied.  See the License for the
+  specific language governing permissions and limitations
+  under the License.
+-->
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
 
@@ -250,6 +269,7 @@
                 <pomInclude>**/MJAVADOC-110/pom.xml</pomInclude>
                 <pomInclude>**/MJAVADOC-137/pom.xml</pomInclude>
                 <pomInclude>**/MJAVADOC-172/pom.xml</pomInclude>
+                <pomInclude>**/MJAVADOC-180/pom.xml</pomInclude>
               </pomIncludes>
               <postBuildHookScript>verify.bsh</postBuildHookScript>
               <localRepositoryPath>${basedir}/target/local-repo</localRepositoryPath>
diff --git a/src/it/MJAVADOC-180/goals.txt b/src/it/MJAVADOC-180/goals.txt
new file mode 100644
index 00000000..0fb68e08
--- /dev/null
+++ b/src/it/MJAVADOC-180/goals.txt
@@ -0,0 +1 @@
+javadoc:test-javadoc
\ No newline at end of file
diff --git a/src/it/MJAVADOC-180/module1/pom.xml b/src/it/MJAVADOC-180/module1/pom.xml
new file mode 100644
index 00000000..475cc6fb
--- /dev/null
+++ b/src/it/MJAVADOC-180/module1/pom.xml
@@ -0,0 +1,37 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project xmlns="http://maven.apache.org/POM/4.0.0"
+    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
+    
+    <parent>
+        <artifactId>MJAVADOC-180</artifactId>
+        <groupId>edu.jhu.library</groupId>
+        <version>1.0-SNAPSHOT</version>
+    </parent>
+    
+    <modelVersion>4.0.0</modelVersion>
+    
+    <groupId>edu.jhu.library</groupId>
+    <artifactId>module1</artifactId>
+    <name>module1</name>
+    <version>1.0-SNAPSHOT</version>
+    
+    <dependencies>
+        
+        <dependency>
+            <groupId>org.dbunit</groupId>
+            <artifactId>dbunit</artifactId>
+            <version>2.2</version>
+            <scope>test</scope>
+        </dependency>
+        
+        <dependency>
+            <groupId>junit</groupId>
+            <artifactId>junit</artifactId>
+            <version>4.4</version>
+            <scope>test</scope>
+        </dependency>
+        
+    </dependencies>
+    
+</project>
diff --git a/src/it/MJAVADOC-180/module1/src/main/java/edu/jhu/library/HelloWorld.java b/src/it/MJAVADOC-180/module1/src/main/java/edu/jhu/library/HelloWorld.java
new file mode 100644
index 00000000..393272c3
--- /dev/null
+++ b/src/it/MJAVADOC-180/module1/src/main/java/edu/jhu/library/HelloWorld.java
@@ -0,0 +1,16 @@
+package edu.jhu.library;
+
+/**
+ * Created by IntelliJ IDEA.
+ * User: esm
+ * Date: May 17, 2008
+ * Time: 11:26:25 AM
+ * To change this template use File | Settings | File Templates.
+ */
+public class HelloWorld
+{
+    public String hello( String s )
+    {
+        return s;
+    }
+}
diff --git a/src/it/MJAVADOC-180/module1/src/test/java/edu/jhu/library/Mjavadoc180Test.java b/src/it/MJAVADOC-180/module1/src/test/java/edu/jhu/library/Mjavadoc180Test.java
new file mode 100644
index 00000000..5fde66f6
--- /dev/null
+++ b/src/it/MJAVADOC-180/module1/src/test/java/edu/jhu/library/Mjavadoc180Test.java
@@ -0,0 +1,26 @@
+package edu.jhu.library;
+
+import static org.junit.Assert.assertTrue;
+import org.junit.Test;
+import org.dbunit.database.IDatabaseConnection;
+
+/**
+ * Created by IntelliJ IDEA.
+ * User: esm
+ * Date: May 17, 2008
+ * Time: 11:28:04 AM
+ * To change this template use File | Settings | File Templates.
+ */
+public class Mjavadoc180Test
+{
+    /**
+     * This is some test javadoc.  This test method has a phony dependency on DB Unit.
+     */
+    @Test
+    public void testMJAVADOC180()
+    {
+        IDatabaseConnection phony = null;
+        final HelloWorld hw = new HelloWorld();
+        assertTrue( "Hello World".equals( hw.hello( "Hello World" ) ) );
+    }
+}
diff --git a/src/it/MJAVADOC-180/pom.xml b/src/it/MJAVADOC-180/pom.xml
new file mode 100644
index 00000000..ae319793
--- /dev/null
+++ b/src/it/MJAVADOC-180/pom.xml
@@ -0,0 +1,97 @@
+<?xml version='1.0' encoding='UTF-8'?>
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one
+  or more contributor license agreements.  See the NOTICE file
+  distributed with this work for additional information
+  regarding copyright ownership.  The ASF licenses this file
+  to you under the Apache License, Version 2.0 (the
+  "License"); you may not use this file except in compliance
+  with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing,
+  software distributed under the License is distributed on an
+  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+  KIND, either express or implied.  See the License for the
+  specific language governing permissions and limitations
+  under the License.
+-->
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
+  <modelVersion>4.0.0</modelVersion>
+
+  <groupId>edu.jhu.library</groupId>
+  <artifactId>MJAVADOC-180</artifactId>
+  <packaging>pom</packaging>
+  <version>1.0-SNAPSHOT</version>
+  <name>MJAVADOC-180</name>
+
+  <modules>
+    <module>module1</module>
+  </modules>
+
+  <build>
+    <pluginManagement>
+      <plugins>
+        <plugin>
+          <groupId>org.apache.maven.plugins</groupId>
+          <artifactId>maven-javadoc-plugin</artifactId>
+          <version>@pom.version@</version>
+        </plugin>
+        <plugin>
+          <groupId>org.apache.maven.plugins</groupId>
+          <artifactId>maven-compiler-plugin</artifactId>
+          <version>2.0.2</version>
+        </plugin>
+      </plugins>
+    </pluginManagement>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-compiler-plugin</artifactId>
+        <configuration>
+          <source>1.5</source>
+          <target>1.5</target>
+        </configuration>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-site-plugin</artifactId>
+        <version>2.0-beta-6</version>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-project-info-reports-plugin</artifactId>
+        <version>2.0.1</version>
+      </plugin>
+    </plugins>
+  </build>
+
+  <reporting>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-project-info-reports-plugin</artifactId>
+        <version>2.0.1</version>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-javadoc-plugin</artifactId>
+        <version>@pom.version@</version>
+        <inherited>true</inherited>
+        <configuration>
+          <debug>true</debug>
+          <quiet>true</quiet>
+          <verbose>false</verbose>
+          <!-- to workaround MJAVADOC-180, aggregate must be false -->
+          <aggregate>true</aggregate>
+          <show>protected</show>
+          <links>
+            <link>http://java.sun.com/j2se/1.5.0/docs/api/</link>
+          </links>
+        </configuration>
+      </plugin>
+    </plugins>
+  </reporting>
+
+</project>
diff --git a/src/it/MJAVADOC-180/verify.bsh b/src/it/MJAVADOC-180/verify.bsh
new file mode 100644
index 00000000..db279577
--- /dev/null
+++ b/src/it/MJAVADOC-180/verify.bsh
@@ -0,0 +1,61 @@
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import java.io.*;
+
+boolean result = true;
+
+try
+{
+    File target = new File( basedir, "target" );
+    if ( !target.exists() || !target.isDirectory() )
+    {
+        System.err.println( "target file is missing or a directory." );
+        return false;
+    }
+
+    File testapidocs = new File( basedir, "target/site/testapidocs" );
+    if ( !testapidocs.exists() || !testapidocs.isDirectory() )
+    {
+        System.err.println( "target/site/testapidocs file is missing or a directory." );
+        return false;
+    }
+
+    File options = new File( testapidocs, "options" );
+    if ( !options.exists() || !options.isFile() )
+    {
+        System.err.println( "target/site/testapidocs/options file is missing or not a file." );
+        return false;
+    }
+
+    File index = new File( testapidocs, "index.html" );
+    if ( !index.exists() || !index.isFile() )
+    {
+        System.err.println( "target/site/testapidocs/index.html file is missing or not a file." );
+        return false;
+    }
+}
+catch( IOException e )
+{
+    e.printStackTrace();
+    result = false;
+}
+
+return result;
diff --git a/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java b/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
index 53e805d6..05cfaa44 100644
--- a/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
+++ b/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
@@ -1737,6 +1737,16 @@ public abstract class AbstractJavadocMojo
         return canGenerate;
     }
 
+    /**
+     * @param result not null
+     * @return the compile artifacts from the result
+     * @see JavadocUtil#getCompileArtifacts(Set, boolean)
+     */
+    protected List getCompileArtifacts( ArtifactResolutionResult result )
+    {
+        return JavadocUtil.getCompileArtifacts( result.getArtifacts(), false );
+    }
+
     // ----------------------------------------------------------------------
     // private methods
     // ----------------------------------------------------------------------
@@ -1843,6 +1853,7 @@ public abstract class AbstractJavadocMojo
                 for ( Iterator i = reactorProjects.iterator(); i.hasNext(); )
                 {
                     MavenProject subProject = (MavenProject) i.next();
+
                     if ( subProject != project )
                     {
                         classpathElements.addAll( getProjectBuildOutputDirs( subProject ) );
@@ -1883,7 +1894,7 @@ public abstract class AbstractJavadocMojo
                                 continue;
                             }
 
-                            populateCompileArtifactMap( compileArtifactMap, JavadocUtil.getCompileArtifacts( result.getArtifacts() ) );
+                            populateCompileArtifactMap( compileArtifactMap, getCompileArtifacts( result ) );
 
                             if ( getLog().isDebugEnabled() )
                             {
diff --git a/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java b/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
index f2b8d261..67b000a1 100644
--- a/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
+++ b/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
@@ -150,7 +150,7 @@ public class JavadocUtil
      * @param artifacts
      * @return list of compile artifacts
      */
-    protected static List getCompileArtifacts( Set artifacts )
+    protected static List getCompileArtifacts( Set artifacts, boolean withTestScope )
     {
         List list = new ArrayList( artifacts.size() );
 
@@ -162,10 +162,21 @@ public class JavadocUtil
             if ( a.getArtifactHandler().isAddedToClasspath() )
             {
                 // TODO: let the scope handler deal with this
-                if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )
-                    || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )
+                if ( withTestScope )
                 {
-                    list.add( a );
+                    if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )
+                        || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) || Artifact.SCOPE_TEST.equals( a.getScope() ))
+                    {
+                        list.add( a );
+                    }
+                }
+                else
+                {
+                    if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )
+                        || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )
+                    {
+                        list.add( a );
+                    }
                 }
             }
         }
diff --git a/src/main/java/org/apache/maven/plugin/javadoc/TestJavadocReport.java b/src/main/java/org/apache/maven/plugin/javadoc/TestJavadocReport.java
index b9356490..d43f8310 100644
--- a/src/main/java/org/apache/maven/plugin/javadoc/TestJavadocReport.java
+++ b/src/main/java/org/apache/maven/plugin/javadoc/TestJavadocReport.java
@@ -26,6 +26,7 @@ import java.util.List;
 import java.util.Locale;
 import java.util.ResourceBundle;
 
+import org.apache.maven.artifact.resolver.ArtifactResolutionResult;
 import org.apache.maven.project.MavenProject;
 import org.codehaus.plexus.util.StringUtils;
 
@@ -273,6 +274,14 @@ public class TestJavadocReport
         return windowtitle;
     }
 
+    /**
+     * @see org.apache.maven.plugin.javadoc.AbstractJavadocMojo#getCompileArtifacts(org.apache.maven.artifact.resolver.ArtifactResolutionResult)
+     */
+    protected List getCompileArtifacts( ArtifactResolutionResult result )
+    {
+        return JavadocUtil.getCompileArtifacts( result.getArtifacts(), true );
+    }
+
     /**
      * Gets the resource bundle for the specified locale.
      *
