diff --git a/pom.xml b/pom.xml
index 0a2875b2..dd390915 100644
--- a/pom.xml
+++ b/pom.xml
@@ -153,6 +153,12 @@ under the License.
       <artifactId>commons-logging</artifactId>
       <version>1.1.1</version>
     </dependency>
+    <!-- Not included in Httpclient -->
+    <dependency>
+      <groupId>log4j</groupId>
+      <artifactId>log4j</artifactId>
+      <version>1.2.14</version>
+    </dependency>
     <dependency>
       <groupId>com.thoughtworks.qdox</groupId>
       <artifactId>qdox</artifactId>
@@ -198,6 +204,7 @@ under the License.
       <version>1.5.8</version>
     </dependency>
 
+    <!-- test -->
     <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
@@ -328,6 +335,40 @@ under the License.
           </systemProperties>
         </configuration>
       </plugin>
+
+      <!-- Backward compatibility with Maven 2.0.x -->
+      <plugin>
+        <artifactId>maven-shade-plugin</artifactId>
+        <executions>
+          <execution>
+            <phase>package</phase>
+            <goals>
+              <goal>shade</goal>
+            </goals>
+            <configuration>
+              <finalName>${project.build.finalName}</finalName>
+              <createDependencyReducedPom>false</createDependencyReducedPom>
+              <keepDependenciesWithProvidedScope>true</keepDependenciesWithProvidedScope>
+              <transformers>
+                <transformer implementation="org.apache.maven.plugins.shade.resource.ComponentsXmlResourceTransformer" />
+              </transformers>
+              <artifactSet>
+                <includes>
+                  <include>org.apache.maven.wagon:wagon-provider-api</include>
+                </includes>
+              </artifactSet>
+              <filters>
+                <filter>
+                  <artifact>org.apache.maven.wagon:wagon-provider-api</artifact>
+                  <includes>
+                    <include>org/apache/maven/wagon/proxy/ProxyUtils.class</include>
+                  </includes>
+                </filter>
+              </filters>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 
diff --git a/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java b/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
index 2af86d58..7e9360d9 100644
--- a/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
+++ b/src/main/java/org/apache/maven/plugin/javadoc/AbstractJavadocMojo.java
@@ -315,6 +315,8 @@ public abstract class AbstractJavadocMojo
      * See <a href="http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javadoc.html#J">Jflag</a>.
      * <br/>
      * See <a href="http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp">vmoptions</a>.
+     * <br/>
+     * See <a href="http://java.sun.com/j2se/1.4.2/docs/guide/net/properties.html">Networking Properties</a>.
      *
      * @since 2.3
      * @parameter expression="${additionalJOption}"
diff --git a/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java b/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
index c9e38b94..02c7db6b 100644
--- a/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
+++ b/src/main/java/org/apache/maven/plugin/javadoc/JavadocUtil.java
@@ -48,11 +48,15 @@ import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 import java.util.regex.PatternSyntaxException;
 
+import org.apache.commons.httpclient.Credentials;
 import org.apache.commons.httpclient.HttpClient;
 import org.apache.commons.httpclient.HttpStatus;
+import org.apache.commons.httpclient.MultiThreadedHttpConnectionManager;
 import org.apache.commons.httpclient.UsernamePasswordCredentials;
 import org.apache.commons.httpclient.auth.AuthScope;
 import org.apache.commons.httpclient.methods.GetMethod;
+import org.apache.commons.httpclient.params.HttpClientParams;
+import org.apache.commons.httpclient.params.HttpMethodParams;
 import org.apache.commons.lang.SystemUtils;
 import org.apache.maven.artifact.Artifact;
 import org.apache.maven.plugin.logging.Log;
@@ -67,6 +71,8 @@ import org.apache.maven.shared.invoker.InvocationResult;
 import org.apache.maven.shared.invoker.Invoker;
 import org.apache.maven.shared.invoker.MavenInvocationException;
 import org.apache.maven.shared.invoker.PrintStreamHandler;
+import org.apache.maven.wagon.proxy.ProxyInfo;
+import org.apache.maven.wagon.proxy.ProxyUtils;
 import org.codehaus.plexus.util.FileUtils;
 import org.codehaus.plexus.util.IOUtil;
 import org.codehaus.plexus.util.Os;
@@ -731,71 +737,66 @@ public class JavadocUtil
             throw new IllegalArgumentException( "The url is null" );
         }
 
-        HttpClient httpClient = null;
-        if ( !"file".equals( url.getProtocol() ) )
+        if ( "file".equals( url.getProtocol() ) )
         {
-            httpClient = new HttpClient();
-            httpClient.getHttpConnectionManager().getParams().setConnectionTimeout( DEFAULT_TIMEOUT );
-            httpClient.getHttpConnectionManager().getParams().setSoTimeout( DEFAULT_TIMEOUT );
-
-            if ( settings != null )
+            InputStream in = null;
+            try
+            {
+                in = url.openStream();
+            }
+            finally
             {
-                Proxy activeProxy = settings.getActiveProxy();
+                IOUtil.close( in );
+            }
 
-                if ( activeProxy != null )
-                {
-                    String proxyHost = settings.getActiveProxy().getHost();
-                    int proxyPort = settings.getActiveProxy().getPort();
+            return;
+        }
 
-                    String proxyUser = settings.getActiveProxy().getUsername();
-                    String proxyPass = settings.getActiveProxy().getPassword();
+        // http, https...
+        HttpClient httpClient = new HttpClient( new MultiThreadedHttpConnectionManager() );
+        httpClient.getHttpConnectionManager().getParams().setConnectionTimeout( DEFAULT_TIMEOUT );
+        httpClient.getHttpConnectionManager().getParams().setSoTimeout( DEFAULT_TIMEOUT );
+        httpClient.getParams().setBooleanParameter( HttpClientParams.ALLOW_CIRCULAR_REDIRECTS, true );
 
-                    if ( StringUtils.isNotEmpty( proxyHost ) )
-                    {
-                        httpClient.getHostConfiguration().setProxy( proxyHost, proxyPort );
-                    }
+        // Some web servers don't allow the default user-agent sent by httpClient
+        httpClient.getParams().setParameter( HttpMethodParams.USER_AGENT,
+                                             "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)" );
 
-                    if ( StringUtils.isNotEmpty( proxyUser ) )
-                    {
-                        AuthScope authScope =
-                            new AuthScope( AuthScope.ANY_HOST, AuthScope.ANY_PORT, AuthScope.ANY_REALM,
-                                           AuthScope.ANY_SCHEME );
-                        UsernamePasswordCredentials usernamePasswordCredentials =
-                            new UsernamePasswordCredentials( proxyUser, proxyPass );
-                        httpClient.getState().setProxyCredentials( authScope, usernamePasswordCredentials );
-                    }
+        if ( settings != null && settings.getActiveProxy() != null )
+        {
+            Proxy activeProxy = settings.getActiveProxy();
+
+            ProxyInfo proxyInfo = new ProxyInfo();
+            proxyInfo.setNonProxyHosts( activeProxy.getNonProxyHosts() );
+
+            if ( StringUtils.isNotEmpty( activeProxy.getHost() )
+                && !ProxyUtils.validateNonProxyHosts( proxyInfo, url.getHost() ) )
+            {
+                httpClient.getHostConfiguration().setProxy( activeProxy.getHost(), activeProxy.getPort() );
+
+                if ( StringUtils.isNotEmpty( activeProxy.getUsername() ) && activeProxy.getPassword() != null )
+                {
+                    Credentials credentials =
+                        new UsernamePasswordCredentials( activeProxy.getUsername(), activeProxy.getPassword() );
+
+                    httpClient.getState().setProxyCredentials( AuthScope.ANY, credentials );
                 }
             }
         }
 
-        InputStream in = null;
+        GetMethod getMethod = new GetMethod( url.toString() );
         try
         {
-            if ( httpClient != null )
-            {
-                GetMethod getMethod = new GetMethod( url.toString() );
+            int status = httpClient.executeMethod( getMethod );
 
-                try
-                {
-                    int status = httpClient.executeMethod( getMethod );
-                    if ( status != HttpStatus.SC_OK )
-                    {
-                        throw new FileNotFoundException( url.toString() );
-                    }
-                }
-                finally
-                {
-                    getMethod.releaseConnection();
-                }
-            }
-            else
+            if ( status != HttpStatus.SC_OK )
             {
-                in = url.openStream();
+                throw new FileNotFoundException( url.toString() );
             }
         }
         finally
         {
-            IOUtil.close( in );
+            getMethod.releaseConnection();
         }
     }
 
diff --git a/src/main/resources/log4j.properties b/src/main/resources/log4j.properties
new file mode 100644
index 00000000..f9abe9a5
--- /dev/null
+++ b/src/main/resources/log4j.properties
@@ -0,0 +1,24 @@
+# Licensed to the Apache Software Foundation (ASF) under one
+# or more contributor license agreements.  See the NOTICE file
+# distributed with this work for additional information
+# regarding copyright ownership.  The ASF licenses this file
+# to you under the Apache License, Version 2.0 (the
+# "License"); you may not use this file except in compliance
+# with the License.  You may obtain a copy of the License at
+#
+#   http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing,
+# software distributed under the License is distributed on an
+# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+# KIND, either express or implied.  See the License for the
+# specific language governing permissions and limitations
+# under the License.
+
+log4j.rootCategory=INFO, stdout
+
+log4j.appender.stdout=org.apache.log4j.ConsoleAppender
+log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
+log4j.appender.stdout.layout.ConversionPattern=[%5p] %m%n
+
+log4j.logger.org.apache.commons.httpclient=INFO
diff --git a/src/site/fml/faq.fml b/src/site/fml/faq.fml
index 86cc1e89..ad409847 100644
--- a/src/site/fml/faq.fml
+++ b/src/site/fml/faq.fml
@@ -159,22 +159,48 @@ ${project.reporting.outputDirectory}/apidocs/javadoc.exe(or .sh) \
       <question>How to add proxy support?</question>
       <answer>
         <p>
-          To specify a proxy in the Javadoc tool, you need to configure an active proxy in your <i>settings.xml</i>. Read the
-          <a href="http://maven.apache.org/guides/mini/guide-proxies.html">Configuring a proxy</a> guide for more information.
-        </p>
-        <p>
-          The Javadoc Plugin calls the Javadoc tool with networking J options, i.e.:
+          To specify a proxy in the Javadoc tool, you need to configure an active proxy in your
+          <i>${user.home}/.m2/settings.xml</i>, similar to:
+          <source><![CDATA[
+<settings>
+  ...
+  <proxies>
+   <proxy>
+      <active>true</active>
+      <protocol>http</protocol>
+      <host>proxy.somewhere.com</host>
+      <port>3128</port>
+      <username>foo</username>
+      <password>bar</password>
+      <nonProxyHosts>java.sun.com|*.somewhere.com</nonProxyHosts>
+    </proxy>
+  </proxies>
+  ...
+</settings>
+]]></source>
+          With this, the Javadoc tool will be called with networking J options, i.e.:
           <source><![CDATA[
 ${project.reporting.outputDirectory}/apidocs/javadoc.exe(or .sh) \
     -J-Dhttp.proxySet=true \
-    -J-Dhttp.proxyHost=http://localhost \
-    -J-Dhttp.proxyPort=80 \
-    -J-Dhttp.nonProxyHosts="www.google.com|*.somewhere.com" \
-    -J-Dhttp.proxyUser="toto" \
-    -J-Dhttp.proxyPassword="toto" \
+    -J-Dhttp.proxyHost=proxy.somewhere.com \
+    -J-Dhttp.proxyPort=3128 \
+    -J-Dhttp.nonProxyHosts="java.sun.com|*.somewhere.com" \
+    -J-Dhttp.proxyUser="foo" \
+    -J-Dhttp.proxyPassword="bar" \
     @options \
     @packages | @argfile]]></source>
         </p>
+        <p>
+          <b>Note</b>: If your proxy needs more JVM
+          <a href="http://java.sun.com/j2se/1.4.2/docs/guide/net/properties.html">networking properties</a>
+          (like NTLM), you could always add JVM options using the <i>&lt;additionalJOption/&gt;</i> parameter
+          in your Javadoc Plugin configuration, i.e.:
+          <source><![CDATA[
+<configuration>
+  <additionalJOption>-J-Dhttp.auth.ntlm.domain=MYDOMAIN</additionalJOption>
+  ...
+</configuration>]]></source>
+        </p>
       </answer>
     </faq>
     <faq id="How to have less output">
diff --git a/src/test/java/org/apache/maven/plugin/javadoc/JavadocReportTest.java b/src/test/java/org/apache/maven/plugin/javadoc/JavadocReportTest.java
index 0ebe25d2..cd0b0da6 100644
--- a/src/test/java/org/apache/maven/plugin/javadoc/JavadocReportTest.java
+++ b/src/test/java/org/apache/maven/plugin/javadoc/JavadocReportTest.java
@@ -24,6 +24,7 @@ import java.io.File;
 import java.io.FileReader;
 import java.io.IOException;
 import java.io.Reader;
+import java.net.URL;
 import java.util.HashMap;
 import java.util.Iterator;
 import java.util.List;
@@ -35,6 +36,7 @@ import org.apache.maven.plugin.javadoc.ProxyServer.AuthAsyncProxyServlet;
 import org.apache.maven.plugin.testing.AbstractMojoTestCase;
 import org.apache.maven.settings.Proxy;
 import org.apache.maven.settings.Settings;
+import org.apache.maven.wagon.proxy.ProxyInfo;
 import org.codehaus.plexus.util.FileUtils;
 import org.codehaus.plexus.util.IOUtil;
 import org.codehaus.plexus.util.ReaderFactory;
@@ -910,8 +912,9 @@ public class JavadocReportTest
 
         //dummy proxy
         proxy.setActive( true );
-        proxy.setHost( "http://localhost" );
+        proxy.setHost( "127.0.0.1" );
         proxy.setPort( 80 );
+        proxy.setProtocol( "http" );
         proxy.setUsername( "toto" );
         proxy.setPassword( "toto" );
         proxy.setNonProxyHosts( "www.google.com|*.somewhere.com" );
@@ -927,7 +930,7 @@ public class JavadocReportTest
         assertTrue( FileUtils.fileExists( commandLine.getAbsolutePath() ) );
         String readed = readFile( commandLine );
         assertTrue( readed.indexOf( "-J-Dhttp.proxySet=true" ) != -1 );
-        assertTrue( readed.indexOf( "-J-Dhttp.proxyHost=http://localhost" ) != -1 );
+        assertTrue( readed.indexOf( "-J-Dhttp.proxyHost=127.0.0.1" ) != -1 );
         assertTrue( readed.indexOf( "-J-Dhttp.proxyPort=80" ) != -1 );
         assertTrue( readed.indexOf( "-J-Dhttp.proxyUser=\\\"toto\\\"" ) != -1 );
         assertTrue( readed.indexOf( "-J-Dhttp.proxyPassword=\\\"toto\\\"" ) != -1 );
@@ -956,6 +959,7 @@ public class JavadocReportTest
             proxy.setActive( true );
             proxy.setHost( proxyServer.getHostName() );
             proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
             settings.addProxy( proxy );
 
             mojo = (JavadocReport) lookupMojo( "javadoc", testPom );
@@ -1000,6 +1004,7 @@ public class JavadocReportTest
             proxy.setActive( true );
             proxy.setHost( proxyServer.getHostName() );
             proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
             proxy.setUsername( "foo" );
             proxy.setPassword( "bar" );
             settings.addProxy( proxy );
diff --git a/src/test/java/org/apache/maven/plugin/javadoc/JavadocUtilTest.java b/src/test/java/org/apache/maven/plugin/javadoc/JavadocUtilTest.java
index 5a1d3cf4..b964e9d6 100644
--- a/src/test/java/org/apache/maven/plugin/javadoc/JavadocUtilTest.java
+++ b/src/test/java/org/apache/maven/plugin/javadoc/JavadocUtilTest.java
@@ -224,7 +224,7 @@ public class JavadocUtilTest
     public void testHideProxyPassword()
         throws Exception
     {
-        String cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=http://localhost "
+        String cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=127.0.0.1 "
         + "-J-Dhttp.proxyPort=80 " + "-J-Dhttp.nonProxyHosts=\"www.google.com|*.somewhere.com\" "
         + "-J-Dhttp.proxyUser=\"toto\" " + "-J-Dhttp.proxyPassword=\"toto\" " + "@options @packages";
         cmdLine = JavadocUtil.hideProxyPassword( cmdLine, null );
@@ -233,14 +233,15 @@ public class JavadocUtilTest
         Settings settings = new Settings();
         Proxy proxy = new Proxy();
         proxy.setActive( true );
-        proxy.setHost( "http://localhost" );
+        proxy.setHost( "127.0.0.1" );
         proxy.setPort( 80 );
+        proxy.setProtocol( "http" );
         proxy.setUsername( "toto" );
         proxy.setPassword( "toto" );
         proxy.setNonProxyHosts( "www.google.com|*.somewhere.com" );
         settings.addProxy( proxy );
 
-        cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=http://localhost "
+        cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=127.0.0.1 "
             + "-J-Dhttp.proxyPort=80 " + "-J-Dhttp.nonProxyHosts=\"www.google.com|*.somewhere.com\" "
             + "-J-Dhttp.proxyUser=\"toto\" " + "-J-Dhttp.proxyPassword=\"toto\" " + "@options @packages";
         cmdLine = JavadocUtil.hideProxyPassword( cmdLine, settings );
@@ -249,13 +250,14 @@ public class JavadocUtilTest
         settings = new Settings();
         proxy = new Proxy();
         proxy.setActive( true );
-        proxy.setHost( "http://localhost" );
+        proxy.setHost( "127.0.0.1" );
         proxy.setPort( 80 );
+        proxy.setProtocol( "http" );
         proxy.setUsername( "toto" );
         proxy.setNonProxyHosts( "www.google.com|*.somewhere.com" );
         settings.addProxy( proxy );
 
-        cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=http://localhost "
+        cmdLine = "javadoc.exe " + "-J-Dhttp.proxySet=true " + "-J-Dhttp.proxyHost=127.0.0.1 "
         + "-J-Dhttp.proxyPort=80 " + "-J-Dhttp.nonProxyHosts=\"www.google.com|*.somewhere.com\" "
         + "-J-Dhttp.proxyUser=\"toto\" " + "-J-Dhttp.proxyPassword=\"toto\" " + "@options @packages";
         cmdLine = JavadocUtil.hideProxyPassword( cmdLine, null );
@@ -289,8 +291,11 @@ public class JavadocUtilTest
         JavadocUtil.fetchURL( settings, url );
         assertTrue( true );
 
-        if ( isWebSiteOnline( settings, getContainer().getLogger(), "http://maven.apache.org" ) )
+        if ( !isWebSiteOnline( settings, getContainer().getLogger(), "http://maven.apache.org" ) )
         {
+            getContainer().getLogger().warn(
+                                             "http://maven.apache.org should be on line to run '"
+                                                 + getClass().getName() + "#" + getName() + "()'." );
             return;
         }
 
@@ -359,6 +364,7 @@ public class JavadocUtilTest
             proxy.setActive( true );
             proxy.setHost( proxyServer.getHostName() );
             proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
             settings.addProxy( proxy );
 
             JavadocUtil.fetchURL( settings, url );
@@ -392,6 +398,7 @@ public class JavadocUtilTest
             proxy.setActive( true );
             proxy.setHost( proxyServer.getHostName() );
             proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
             proxy.setUsername( "foo" );
             proxy.setPassword( "bar" );
             settings.addProxy( proxy );
@@ -433,9 +440,11 @@ public class JavadocUtilTest
             proxy.setActive( true );
             proxy.setHost( proxyServer.getHostName() );
             proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
             proxy.setUsername( "foo" );
             proxy.setPassword( "bar" );
             settings.addProxy( proxy );
+
             JavadocUtil.fetchURL( settings, url );
             assertTrue( false );
         }
@@ -450,6 +459,37 @@ public class JavadocUtilTest
                 proxyServer.stop();
             }
         }
+
+        // nonProxyHosts
+        try
+        {
+            proxyServlet = new AuthAsyncProxyServlet( authentications );
+            proxyServer = new ProxyServer( proxyServlet );
+            proxyServer.start();
+
+            settings = new Settings();
+            proxy = new Proxy();
+            proxy.setActive( true );
+            proxy.setHost( proxyServer.getHostName() );
+            proxy.setPort( proxyServer.getPort() );
+            proxy.setProtocol( "http" );
+            proxy.setUsername( "foo" );
+            proxy.setPassword( "bar" );
+            proxy.setNonProxyHosts( "maven.apache.org" );
+            settings.addProxy( proxy );
+
+            url = new URL( "http://maven.apache.org/plugins/maven-javadoc-plugin/apidocs/package-list" );
+
+            JavadocUtil.fetchURL( settings, url );
+            assertTrue( true );
+        }
+        finally
+        {
+            if ( proxyServer != null )
+            {
+                proxyServer.stop();
+            }
+        }
     }
 
     /**
