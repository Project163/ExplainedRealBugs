diff --git a/lib/Doctrine/DBAL/DriverManager.php b/lib/Doctrine/DBAL/DriverManager.php
index 3822bd420..2a4b65392 100644
--- a/lib/Doctrine/DBAL/DriverManager.php
+++ b/lib/Doctrine/DBAL/DriverManager.php
@@ -160,7 +160,30 @@ final class DriverManager
      * @throws Exception
      *
      * @phpstan-param array<string,mixed> $params
-     * @psalm-param Params $params
+     * @psalm-param array{
+     *     charset?: string,
+     *     dbname?: string,
+     *     default_dbname?: string,
+     *     driver?: key-of<self::DRIVER_MAP>,
+     *     driverClass?: class-string<Driver>,
+     *     driverOptions?: array<mixed>,
+     *     host?: string,
+     *     keepSlave?: bool,
+     *     keepReplica?: bool,
+     *     master?: OverrideParams,
+     *     memory?: bool,
+     *     password?: string,
+     *     path?: string,
+     *     pdo?: \PDO,
+     *     platform?: Platforms\AbstractPlatform,
+     *     port?: int,
+     *     primary?: OverrideParams,
+     *     replica?: array<OverrideParams>,
+     *     sharding?: array<string,mixed>,
+     *     slaves?: array<OverrideParams>,
+     *     user?: string,
+     *     wrapperClass?: class-string<T>,
+     * } $params
      * @psalm-return ($params is array{wrapperClass:mixed} ? T : Connection)
      * @template T of Connection
      */
diff --git a/phpcs.xml.dist b/phpcs.xml.dist
index 33fda9b92..b7d41ac23 100644
--- a/phpcs.xml.dist
+++ b/phpcs.xml.dist
@@ -14,7 +14,7 @@
 
     <file>bin</file>
     <file>lib</file>
-    <file>tests</file>
+    <file>tests/Doctrine/Tests</file>
 
     <rule ref="Doctrine">
         <exclude name="SlevomatCodingStandard.TypeHints.DeclareStrictTypes"/>
diff --git a/psalm-strict.xml b/psalm-strict.xml
new file mode 100644
index 000000000..9c80c9e93
--- /dev/null
+++ b/psalm-strict.xml
@@ -0,0 +1,15 @@
+<?xml version="1.0"?>
+<psalm
+    totallyTyped="true"
+    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+    xmlns="https://getpsalm.org/schema/config"
+    xsi:schemaLocation="https://getpsalm.org/schema/config vendor/vimeo/psalm/config.xsd"
+>
+    <projectFiles>
+        <directory name="tests/Doctrine/StaticAnalysis" />
+        <ignoreFiles>
+            <directory name="lib" />
+            <directory name="vendor" />
+        </ignoreFiles>
+    </projectFiles>
+</psalm>
diff --git a/psalm.xml.dist b/psalm.xml.dist
index b30b4f1a3..1282a41f0 100644
--- a/psalm.xml.dist
+++ b/psalm.xml.dist
@@ -7,6 +7,7 @@
 >
     <projectFiles>
         <directory name="lib/Doctrine/DBAL" />
+        <directory name="tests/Doctrine/StaticAnalysis" />
         <directory name="tests/Doctrine/Tests" />
         <ignoreFiles>
             <directory name="vendor" />
diff --git a/tests/Doctrine/StaticAnalysis/DBAL/driver-manager-retrieves-correct-connection-type.php b/tests/Doctrine/StaticAnalysis/DBAL/driver-manager-retrieves-correct-connection-type.php
new file mode 100644
index 000000000..566db2474
--- /dev/null
+++ b/tests/Doctrine/StaticAnalysis/DBAL/driver-manager-retrieves-correct-connection-type.php
@@ -0,0 +1,19 @@
+<?php
+
+declare(strict_types=1);
+
+namespace Doctrine\StaticAnalysis\DBAL;
+
+use Doctrine\DBAL\Connection;
+use Doctrine\DBAL\DriverManager;
+
+final class MyConnection extends Connection
+{
+}
+
+function makeMeACustomConnection(): MyConnection
+{
+    return DriverManager::getConnection([
+        'wrapperClass' => MyConnection::class,
+    ]);
+}
