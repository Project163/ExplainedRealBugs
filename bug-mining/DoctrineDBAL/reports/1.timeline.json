[{"id":483881251,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4Mzg4MTI1MQ==","url":"https://api.github.com/repos/doctrine/dbal/issues/events/483881251","actor":{"login":"doctrinebot","id":2414358,"node_id":"MDQ6VXNlcjI0MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/2414358?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrinebot","html_url":"https://github.com/doctrinebot","followers_url":"https://api.github.com/users/doctrinebot/followers","following_url":"https://api.github.com/users/doctrinebot/following{/other_user}","gists_url":"https://api.github.com/users/doctrinebot/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrinebot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrinebot/subscriptions","organizations_url":"https://api.github.com/users/doctrinebot/orgs","repos_url":"https://api.github.com/users/doctrinebot/repos","events_url":"https://api.github.com/users/doctrinebot/events{/privacy}","received_events_url":"https://api.github.com/users/doctrinebot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-12-06T23:56:51Z","label":{"name":"Bug","color":"e11d21"},"performed_via_github_app":null},{"id":483881252,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ0ODM4ODEyNTI=","url":"https://api.github.com/repos/doctrine/dbal/issues/events/483881252","actor":{"login":"doctrinebot","id":2414358,"node_id":"MDQ6VXNlcjI0MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/2414358?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrinebot","html_url":"https://github.com/doctrinebot","followers_url":"https://api.github.com/users/doctrinebot/followers","following_url":"https://api.github.com/users/doctrinebot/following{/other_user}","gists_url":"https://api.github.com/users/doctrinebot/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrinebot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrinebot/subscriptions","organizations_url":"https://api.github.com/users/doctrinebot/orgs","repos_url":"https://api.github.com/users/doctrinebot/repos","events_url":"https://api.github.com/users/doctrinebot/events{/privacy}","received_events_url":"https://api.github.com/users/doctrinebot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2015-12-06T23:56:51Z","assignee":{"login":"beberlei","id":26936,"node_id":"MDQ6VXNlcjI2OTM2","avatar_url":"https://avatars.githubusercontent.com/u/26936?v=4","gravatar_id":"","url":"https://api.github.com/users/beberlei","html_url":"https://github.com/beberlei","followers_url":"https://api.github.com/users/beberlei/followers","following_url":"https://api.github.com/users/beberlei/following{/other_user}","gists_url":"https://api.github.com/users/beberlei/gists{/gist_id}","starred_url":"https://api.github.com/users/beberlei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beberlei/subscriptions","organizations_url":"https://api.github.com/users/beberlei/orgs","repos_url":"https://api.github.com/users/beberlei/repos","events_url":"https://api.github.com/users/beberlei/events{/privacy}","received_events_url":"https://api.github.com/users/beberlei/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"actor":{"login":"o5","id":218562,"node_id":"MDQ6VXNlcjIxODU2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/218562?v=4","gravatar_id":"","url":"https://api.github.com/users/o5","html_url":"https://github.com/o5","followers_url":"https://api.github.com/users/o5/followers","following_url":"https://api.github.com/users/o5/following{/other_user}","gists_url":"https://api.github.com/users/o5/gists{/gist_id}","starred_url":"https://api.github.com/users/o5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/o5/subscriptions","organizations_url":"https://api.github.com/users/o5/orgs","repos_url":"https://api.github.com/users/o5/repos","events_url":"https://api.github.com/users/o5/events{/privacy}","received_events_url":"https://api.github.com/users/o5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-26T14:41:25Z","updated_at":"2016-08-26T14:41:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/dbal/issues/2491","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/2491/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/2491/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/2491/events","html_url":"https://github.com/doctrine/dbal/issues/2491","id":173465739,"node_id":"MDU6SXNzdWUxNzM0NjU3Mzk=","number":2491,"title":"Working with Doctrine Migrations","user":{"login":"o5","id":218562,"node_id":"MDQ6VXNlcjIxODU2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/218562?v=4","gravatar_id":"","url":"https://api.github.com/users/o5","html_url":"https://github.com/o5","followers_url":"https://api.github.com/users/o5/followers","following_url":"https://api.github.com/users/o5/following{/other_user}","gists_url":"https://api.github.com/users/o5/gists{/gist_id}","starred_url":"https://api.github.com/users/o5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/o5/subscriptions","organizations_url":"https://api.github.com/users/o5/orgs","repos_url":"https://api.github.com/users/o5/repos","events_url":"https://api.github.com/users/o5/events{/privacy}","received_events_url":"https://api.github.com/users/o5/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-08-26T14:25:15Z","updated_at":"2016-09-21T11:07:34Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":677464,"node_id":"MDEwOlJlcG9zaXRvcnk2Nzc0NjQ=","name":"dbal","full_name":"doctrine/dbal","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/dbal","description":"Doctrine Database Abstraction Layer","fork":false,"url":"https://api.github.com/repos/doctrine/dbal","forks_url":"https://api.github.com/repos/doctrine/dbal/forks","keys_url":"https://api.github.com/repos/doctrine/dbal/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/dbal/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/dbal/teams","hooks_url":"https://api.github.com/repos/doctrine/dbal/hooks","issue_events_url":"https://api.github.com/repos/doctrine/dbal/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/dbal/events","assignees_url":"https://api.github.com/repos/doctrine/dbal/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/dbal/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/dbal/tags","blobs_url":"https://api.github.com/repos/doctrine/dbal/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/dbal/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/dbal/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/dbal/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/dbal/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/dbal/languages","stargazers_url":"https://api.github.com/repos/doctrine/dbal/stargazers","contributors_url":"https://api.github.com/repos/doctrine/dbal/contributors","subscribers_url":"https://api.github.com/repos/doctrine/dbal/subscribers","subscription_url":"https://api.github.com/repos/doctrine/dbal/subscription","commits_url":"https://api.github.com/repos/doctrine/dbal/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/dbal/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/dbal/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/dbal/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/dbal/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/dbal/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/dbal/merges","archive_url":"https://api.github.com/repos/doctrine/dbal/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/dbal/downloads","issues_url":"https://api.github.com/repos/doctrine/dbal/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/dbal/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/dbal/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/dbal/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/dbal/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/dbal/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/dbal/deployments","created_at":"2010-05-20T17:01:42Z","updated_at":"2025-11-10T09:25:45Z","pushed_at":"2025-10-30T13:20:32Z","git_url":"git://github.com/doctrine/dbal.git","ssh_url":"git@github.com:doctrine/dbal.git","clone_url":"https://github.com/doctrine/dbal.git","svn_url":"https://github.com/doctrine/dbal","homepage":"https://www.doctrine-project.org/projects/dbal.html","size":44600,"stargazers_count":9662,"watchers_count":9662,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1374,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":273,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["database","hacktoberfest","ibm-db2","mariadb","mysql","oracle","postgresql","sql-server","sqlite"],"visibility":"public","forks":1374,"open_issues":273,"watchers":9662,"default_branch":"4.3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi there, \n\nI would like to use [Doctrine Migrations](http://docs.doctrine-project.org/projects/doctrine-migrations/en/latest/toc.html) with PostgreSQL. I want a table `migration_versions` in `public` schema:\n\n``` php\n$configuration->setMigrationsTableName('public.migration_versions');\n```\n\nI created first migration file and it worked perfectly in first `migrations:migrate` command execution. But second execution of same command fails:\n\n```\n[Doctrine\\DBAL\\Exception\\TableExistsException]\n  An exception occurred while executing 'CREATE TABLE public.migration_versions (version VARCHAR(255) NOT NULL, PRIMARY KEY(version))':\n  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation \"migration_versions\" already exists\n```\n\nI ended in source code of DBAL, and [this line](https://github.com/doctrine/dbal/blob/master/lib/Doctrine/DBAL/Schema/PostgreSqlSchemaManager.php#L196) causes the problem. If I change `return` statement to \n\n``` php\nreturn $table['schema_name'] . \".\" . $table['table_name'];\n```\n\nproblem is fixed. It's interesting because [the change](https://github.com/doctrine/dbal/commit/17c1476e8681ad05154631bcc2b9ec17419461b2#diff-dbd1f3ba02b3646009895e87f7c6272aR113) is very old. \n\nAny idea? Is there somebody who uses Doctrine Migrations with PostgreSQL?\n\nVersions:\n\n```\ndoctrine/migrations: 1.4.1\nPostgeSQL 9.5.4\n```\n\nThank you.\n","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/2491/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/2491/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/doctrine/dbal/issues/comments/437716708","html_url":"https://github.com/doctrine/dbal/issues/1599#issuecomment-437716708","issue_url":"https://api.github.com/repos/doctrine/dbal/issues/1599","id":437716708,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzcxNjcwOA==","user":{"login":"lainosantos","id":8415575,"node_id":"MDQ6VXNlcjg0MTU1NzU=","avatar_url":"https://avatars.githubusercontent.com/u/8415575?v=4","gravatar_id":"","url":"https://api.github.com/users/lainosantos","html_url":"https://github.com/lainosantos","followers_url":"https://api.github.com/users/lainosantos/followers","following_url":"https://api.github.com/users/lainosantos/following{/other_user}","gists_url":"https://api.github.com/users/lainosantos/gists{/gist_id}","starred_url":"https://api.github.com/users/lainosantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lainosantos/subscriptions","organizations_url":"https://api.github.com/users/lainosantos/orgs","repos_url":"https://api.github.com/users/lainosantos/repos","events_url":"https://api.github.com/users/lainosantos/events{/privacy}","received_events_url":"https://api.github.com/users/lainosantos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-11T23:44:22Z","updated_at":"2018-11-11T23:44:22Z","body":"@doctrinebot Hello, Did you made any PR for this?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/comments/437716708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lainosantos","id":8415575,"node_id":"MDQ6VXNlcjg0MTU1NzU=","avatar_url":"https://avatars.githubusercontent.com/u/8415575?v=4","gravatar_id":"","url":"https://api.github.com/users/lainosantos","html_url":"https://github.com/lainosantos","followers_url":"https://api.github.com/users/lainosantos/followers","following_url":"https://api.github.com/users/lainosantos/following{/other_user}","gists_url":"https://api.github.com/users/lainosantos/gists{/gist_id}","starred_url":"https://api.github.com/users/lainosantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lainosantos/subscriptions","organizations_url":"https://api.github.com/users/lainosantos/orgs","repos_url":"https://api.github.com/users/lainosantos/repos","events_url":"https://api.github.com/users/lainosantos/events{/privacy}","received_events_url":"https://api.github.com/users/lainosantos/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1959114354,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk1OTExNDM1NA==","url":"https://api.github.com/repos/doctrine/dbal/issues/events/1959114354","actor":{"login":"doctrinebot","id":2414358,"node_id":"MDQ6VXNlcjI0MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/2414358?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrinebot","html_url":"https://github.com/doctrinebot","followers_url":"https://api.github.com/users/doctrinebot/followers","following_url":"https://api.github.com/users/doctrinebot/following{/other_user}","gists_url":"https://api.github.com/users/doctrinebot/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrinebot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrinebot/subscriptions","organizations_url":"https://api.github.com/users/doctrinebot/orgs","repos_url":"https://api.github.com/users/doctrinebot/repos","events_url":"https://api.github.com/users/doctrinebot/events{/privacy}","received_events_url":"https://api.github.com/users/doctrinebot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-11T23:44:22Z","performed_via_github_app":null},{"id":1959114355,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5NTkxMTQzNTU=","url":"https://api.github.com/repos/doctrine/dbal/issues/events/1959114355","actor":{"login":"doctrinebot","id":2414358,"node_id":"MDQ6VXNlcjI0MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/2414358?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrinebot","html_url":"https://github.com/doctrinebot","followers_url":"https://api.github.com/users/doctrinebot/followers","following_url":"https://api.github.com/users/doctrinebot/following{/other_user}","gists_url":"https://api.github.com/users/doctrinebot/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrinebot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrinebot/subscriptions","organizations_url":"https://api.github.com/users/doctrinebot/orgs","repos_url":"https://api.github.com/users/doctrinebot/repos","events_url":"https://api.github.com/users/doctrinebot/events{/privacy}","received_events_url":"https://api.github.com/users/doctrinebot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-11T23:44:22Z","performed_via_github_app":null},{"actor":{"login":"chrisguitarguy","id":1010392,"node_id":"MDQ6VXNlcjEwMTAzOTI=","avatar_url":"https://avatars.githubusercontent.com/u/1010392?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisguitarguy","html_url":"https://github.com/chrisguitarguy","followers_url":"https://api.github.com/users/chrisguitarguy/followers","following_url":"https://api.github.com/users/chrisguitarguy/following{/other_user}","gists_url":"https://api.github.com/users/chrisguitarguy/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisguitarguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisguitarguy/subscriptions","organizations_url":"https://api.github.com/users/chrisguitarguy/orgs","repos_url":"https://api.github.com/users/chrisguitarguy/repos","events_url":"https://api.github.com/users/chrisguitarguy/events{/privacy}","received_events_url":"https://api.github.com/users/chrisguitarguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T16:07:42Z","updated_at":"2019-08-01T16:07:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/doctrine/migrations/issues/846","repository_url":"https://api.github.com/repos/doctrine/migrations","labels_url":"https://api.github.com/repos/doctrine/migrations/issues/846/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/migrations/issues/846/comments","events_url":"https://api.github.com/repos/doctrine/migrations/issues/846/events","html_url":"https://github.com/doctrine/migrations/issues/846","id":475768623,"node_id":"MDU6SXNzdWU0NzU3Njg2MjM=","number":846,"title":"Version Table in Schema Named After the Connecting User Always Tries to be Re-Created","user":{"login":"chrisguitarguy","id":1010392,"node_id":"MDQ6VXNlcjEwMTAzOTI=","avatar_url":"https://avatars.githubusercontent.com/u/1010392?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisguitarguy","html_url":"https://github.com/chrisguitarguy","followers_url":"https://api.github.com/users/chrisguitarguy/followers","following_url":"https://api.github.com/users/chrisguitarguy/following{/other_user}","gists_url":"https://api.github.com/users/chrisguitarguy/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisguitarguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisguitarguy/subscriptions","organizations_url":"https://api.github.com/users/chrisguitarguy/orgs","repos_url":"https://api.github.com/users/chrisguitarguy/repos","events_url":"https://api.github.com/users/chrisguitarguy/events{/privacy}","received_events_url":"https://api.github.com/users/chrisguitarguy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":308638308,"node_id":"MDU6TGFiZWwzMDg2MzgzMDg=","url":"https://api.github.com/repos/doctrine/migrations/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-08-01T16:07:42Z","updated_at":"2023-09-18T23:03:38Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":576099,"node_id":"MDEwOlJlcG9zaXRvcnk1NzYwOTk=","name":"migrations","full_name":"doctrine/migrations","private":false,"owner":{"login":"doctrine","id":209254,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwOTI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/209254?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrine","html_url":"https://github.com/doctrine","followers_url":"https://api.github.com/users/doctrine/followers","following_url":"https://api.github.com/users/doctrine/following{/other_user}","gists_url":"https://api.github.com/users/doctrine/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrine/subscriptions","organizations_url":"https://api.github.com/users/doctrine/orgs","repos_url":"https://api.github.com/users/doctrine/repos","events_url":"https://api.github.com/users/doctrine/events{/privacy}","received_events_url":"https://api.github.com/users/doctrine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/doctrine/migrations","description":"Doctrine Database Migrations Library","fork":false,"url":"https://api.github.com/repos/doctrine/migrations","forks_url":"https://api.github.com/repos/doctrine/migrations/forks","keys_url":"https://api.github.com/repos/doctrine/migrations/keys{/key_id}","collaborators_url":"https://api.github.com/repos/doctrine/migrations/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/doctrine/migrations/teams","hooks_url":"https://api.github.com/repos/doctrine/migrations/hooks","issue_events_url":"https://api.github.com/repos/doctrine/migrations/issues/events{/number}","events_url":"https://api.github.com/repos/doctrine/migrations/events","assignees_url":"https://api.github.com/repos/doctrine/migrations/assignees{/user}","branches_url":"https://api.github.com/repos/doctrine/migrations/branches{/branch}","tags_url":"https://api.github.com/repos/doctrine/migrations/tags","blobs_url":"https://api.github.com/repos/doctrine/migrations/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/doctrine/migrations/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/doctrine/migrations/git/refs{/sha}","trees_url":"https://api.github.com/repos/doctrine/migrations/git/trees{/sha}","statuses_url":"https://api.github.com/repos/doctrine/migrations/statuses/{sha}","languages_url":"https://api.github.com/repos/doctrine/migrations/languages","stargazers_url":"https://api.github.com/repos/doctrine/migrations/stargazers","contributors_url":"https://api.github.com/repos/doctrine/migrations/contributors","subscribers_url":"https://api.github.com/repos/doctrine/migrations/subscribers","subscription_url":"https://api.github.com/repos/doctrine/migrations/subscription","commits_url":"https://api.github.com/repos/doctrine/migrations/commits{/sha}","git_commits_url":"https://api.github.com/repos/doctrine/migrations/git/commits{/sha}","comments_url":"https://api.github.com/repos/doctrine/migrations/comments{/number}","issue_comment_url":"https://api.github.com/repos/doctrine/migrations/issues/comments{/number}","contents_url":"https://api.github.com/repos/doctrine/migrations/contents/{+path}","compare_url":"https://api.github.com/repos/doctrine/migrations/compare/{base}...{head}","merges_url":"https://api.github.com/repos/doctrine/migrations/merges","archive_url":"https://api.github.com/repos/doctrine/migrations/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/doctrine/migrations/downloads","issues_url":"https://api.github.com/repos/doctrine/migrations/issues{/number}","pulls_url":"https://api.github.com/repos/doctrine/migrations/pulls{/number}","milestones_url":"https://api.github.com/repos/doctrine/migrations/milestones{/number}","notifications_url":"https://api.github.com/repos/doctrine/migrations/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/doctrine/migrations/labels{/name}","releases_url":"https://api.github.com/repos/doctrine/migrations/releases{/id}","deployments_url":"https://api.github.com/repos/doctrine/migrations/deployments","created_at":"2010-03-23T18:08:24Z","updated_at":"2025-11-09T16:20:07Z","pushed_at":"2025-11-03T22:12:05Z","git_url":"git://github.com/doctrine/migrations.git","ssh_url":"git@github.com:doctrine/migrations.git","clone_url":"https://github.com/doctrine/migrations.git","svn_url":"https://github.com/doctrine/migrations","homepage":"https://www.doctrine-project.org/projects/migrations.html","size":5148,"stargazers_count":4749,"watchers_count":4749,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":395,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":130,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":395,"open_issues":130,"watchers":4749,"default_branch":"3.9.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Bug Report\r\n\r\n<!-- Fill in the relevant information below to help triage your issue. -->\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | no\r\n| Version     | 2.1.1\r\n\r\n#### Summary\r\n\r\nI've got a postgres database with two schemas: `public` and `{userName}` (where `{userName}` is the name of my connecting user). My migration versions table is in `{userName}.migration_versions`. \r\n\r\nWhen migrations attempts to figure out whether the table exists, it always determines that it does not exist and attempts to recreate. Which causes an error.\r\n\r\n#### Current behavior\r\n\r\nAn initial run of a `migraitons:*` command will create the version table perfectly in the correct schema and such. But subsequent runs will always try to create the table again.\r\n\r\n#### How to reproduce\r\n\r\nCreate a postgres database with two schemas and put the migration versions table in the non `public` schema.\r\n\r\nI also suspect it's important that the other schema comes before the `public` in the query that generates the search paths (see below).\r\n\r\n#### Expected behavior\r\n\r\nMigrations shouldn't try to recreate the table each time.\r\n\r\nDBAL has a bug open for this: https://github.com/doctrine/dbal/issues/1599 and https://github.com/doctrine/dbal/issues/2491, but it seems like this might be expected behavior in DBAL (the table *does* exist and the search path would make that the case were you to run queries on it).\r\n\r\nMaybe a work around would be to use `listTableDetails` or something like that to determine if the table exists.","reactions":{"url":"https://api.github.com/repos/doctrine/migrations/issues/846/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/migrations/issues/846/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7317439670,"node_id":"UNE_lADOAApWWM4HMVfwzwAAAAG0J0S2","url":"https://api.github.com/repos/doctrine/dbal/issues/events/7317439670","actor":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2022-09-03T18:28:56Z","assignee":{"login":"beberlei","id":26936,"node_id":"MDQ6VXNlcjI2OTM2","avatar_url":"https://avatars.githubusercontent.com/u/26936?v=4","gravatar_id":"","url":"https://api.github.com/users/beberlei","html_url":"https://github.com/beberlei","followers_url":"https://api.github.com/users/beberlei/followers","following_url":"https://api.github.com/users/beberlei/following{/other_user}","gists_url":"https://api.github.com/users/beberlei/gists{/gist_id}","starred_url":"https://api.github.com/users/beberlei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beberlei/subscriptions","organizations_url":"https://api.github.com/users/beberlei/orgs","repos_url":"https://api.github.com/users/beberlei/repos","events_url":"https://api.github.com/users/beberlei/events{/privacy}","received_events_url":"https://api.github.com/users/beberlei/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":7317439833,"node_id":"CE_lADOAApWWM4HMVfwzwAAAAG0J0VZ","url":"https://api.github.com/repos/doctrine/dbal/issues/events/7317439833","actor":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-09-03T18:29:09Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/doctrine/dbal/issues/comments/1266250024","html_url":"https://github.com/doctrine/dbal/issues/1599#issuecomment-1266250024","issue_url":"https://api.github.com/repos/doctrine/dbal/issues/1599","id":1266250024,"node_id":"IC_kwDOAApWWM5LeXEo","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T00:33:56Z","updated_at":"2022-10-04T00:33:56Z","body":"This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/comments/1266250024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":7511904850,"node_id":"LOE_lADOAApWWM4HMVfwzwAAAAG_vpJS","url":"https://api.github.com/repos/doctrine/dbal/issues/events/7511904850","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2022-10-04T00:33:57Z","lock_reason":"resolved","performed_via_github_app":null}]