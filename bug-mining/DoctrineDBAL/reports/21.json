{"url":"https://api.github.com/repos/doctrine/dbal/issues/2182","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/2182/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/2182/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/2182/events","html_url":"https://github.com/doctrine/dbal/issues/2182","id":120675586,"node_id":"MDU6SXNzdWUxMjA2NzU1ODY=","number":2182,"title":"DBAL-939: schema update doesnt detect boolean type correctly","user":{"login":"doctrinebot","id":2414358,"node_id":"MDQ6VXNlcjI0MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/2414358?v=4","gravatar_id":"","url":"https://api.github.com/users/doctrinebot","html_url":"https://github.com/doctrinebot","followers_url":"https://api.github.com/users/doctrinebot/followers","following_url":"https://api.github.com/users/doctrinebot/following{/other_user}","gists_url":"https://api.github.com/users/doctrinebot/gists{/gist_id}","starred_url":"https://api.github.com/users/doctrinebot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/doctrinebot/subscriptions","organizations_url":"https://api.github.com/users/doctrinebot/orgs","repos_url":"https://api.github.com/users/doctrinebot/repos","events_url":"https://api.github.com/users/doctrinebot/events{/privacy}","received_events_url":"https://api.github.com/users/doctrinebot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":225630643,"node_id":"MDU6TGFiZWwyMjU2MzA2NDM=","url":"https://api.github.com/repos/doctrine/dbal/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":308743765,"node_id":"MDU6TGFiZWwzMDg3NDM3NjU=","url":"https://api.github.com/repos/doctrine/dbal/labels/Db2","name":"Db2","color":"c7def8","default":false,"description":""},{"id":308807911,"node_id":"MDU6TGFiZWwzMDg4MDc5MTE=","url":"https://api.github.com/repos/doctrine/dbal/labels/Platforms","name":"Platforms","color":"bfe5bf","default":false,"description":null},{"id":308807940,"node_id":"MDU6TGFiZWwzMDg4MDc5NDA=","url":"https://api.github.com/repos/doctrine/dbal/labels/Schema%20Management","name":"Schema Management","color":"bfe5bf","default":false,"description":""}],"state":"closed","locked":true,"assignee":{"login":"deeky666","id":1411514,"node_id":"MDQ6VXNlcjE0MTE1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1411514?v=4","gravatar_id":"","url":"https://api.github.com/users/deeky666","html_url":"https://github.com/deeky666","followers_url":"https://api.github.com/users/deeky666/followers","following_url":"https://api.github.com/users/deeky666/following{/other_user}","gists_url":"https://api.github.com/users/deeky666/gists{/gist_id}","starred_url":"https://api.github.com/users/deeky666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deeky666/subscriptions","organizations_url":"https://api.github.com/users/deeky666/orgs","repos_url":"https://api.github.com/users/deeky666/repos","events_url":"https://api.github.com/users/deeky666/events{/privacy}","received_events_url":"https://api.github.com/users/deeky666/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"deeky666","id":1411514,"node_id":"MDQ6VXNlcjE0MTE1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1411514?v=4","gravatar_id":"","url":"https://api.github.com/users/deeky666","html_url":"https://github.com/deeky666","followers_url":"https://api.github.com/users/deeky666/followers","following_url":"https://api.github.com/users/deeky666/following{/other_user}","gists_url":"https://api.github.com/users/deeky666/gists{/gist_id}","starred_url":"https://api.github.com/users/deeky666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deeky666/subscriptions","organizations_url":"https://api.github.com/users/deeky666/orgs","repos_url":"https://api.github.com/users/deeky666/repos","events_url":"https://api.github.com/users/deeky666/events{/privacy}","received_events_url":"https://api.github.com/users/deeky666/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/doctrine/dbal/milestones/50","html_url":"https://github.com/doctrine/dbal/milestone/50","labels_url":"https://api.github.com/repos/doctrine/dbal/milestones/50/labels","id":1486000,"node_id":"MDk6TWlsZXN0b25lMTQ4NjAwMA==","number":50,"title":"2.5.5","description":"https://github.com/doctrine/dbal/releases/tag/v2.5.5","creator":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":41,"state":"closed","created_at":"2016-01-05T21:59:07Z","updated_at":"2021-10-30T22:02:00Z","due_on":null,"closed_at":"2016-09-09T19:29:51Z"},"comments":4,"created_at":"2014-07-16T21:34:03Z","updated_at":"2022-08-07T00:26:42Z","closed_at":"2016-09-09T18:17:05Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Jira issue originally created by user rehfeldchris:\n\n**_edited**_\n\nDbal for db2 doesn't seem to be able to differentiate between a smallint and a boolean field on db2. If I make an entity which has a boolean field, it will create a table using type smallint. If I later try to update the schema, it will detect the column in the table as a small int, not a boolean. So, it will produce sql update statements to change the type from smallint to smallint, which is obviously unnecessary. I understand db2 doesn't have a boolean type, but it would be nice if dbal realized that a smallint is essentially already a dbal boolean.\n\nAdditionally, the update statement is invalid syntax and fails, although this is probably a separate issue.\n\nExample entity\n\n```\n<?php\n/****\n * @ORM\\Entity\n ****/\nclass Widget\n{\n    /*** @ORM\\Id @ORM\\Column(type=\"integer\") @ORM\\GeneratedValue ***/\n    protected $id;\n\n    /*** @ORM\\Column(type=\"boolean\", nullable=false) ***/\n    private $isGoat;\n}\n```\n\n`orm:schema-tool:create` produces:\n`CREATE TABLE Widget (id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, isGoat SMALLINT NOT NULL, PRIMARY KEY(id));`\n\nIf you then run `orm:schema-tool:update`, it will try to run: \n\n`ALTER TABLE WIDGET ALTER ISGOAT isGoat SMALLINT NOT NULL; CALL SYSPROC.ADMIN_CMD ('REORG TABLE WIDGET');`\n\nbut no column alteration is obviosuly needed.\n\nSo in summary, smallint to boolean type mapping isn't realized, causing the update command to think it needs to change the type of the column.\n","closed_by":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/2182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/2182/timeline","performed_via_github_app":null,"state_reason":"completed"}