{"url":"https://api.github.com/repos/doctrine/dbal/issues/3336","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/3336/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/3336/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/3336/events","html_url":"https://github.com/doctrine/dbal/issues/3336","id":375979412,"node_id":"MDU6SXNzdWUzNzU5Nzk0MTI=","number":3336,"title":"Comparator incorrectly diffs default values (regression in master)","user":{"login":"Majkl578","id":144181,"node_id":"MDQ6VXNlcjE0NDE4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/144181?v=4","gravatar_id":"","url":"https://api.github.com/users/Majkl578","html_url":"https://github.com/Majkl578","followers_url":"https://api.github.com/users/Majkl578/followers","following_url":"https://api.github.com/users/Majkl578/following{/other_user}","gists_url":"https://api.github.com/users/Majkl578/gists{/gist_id}","starred_url":"https://api.github.com/users/Majkl578/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Majkl578/subscriptions","organizations_url":"https://api.github.com/users/Majkl578/orgs","repos_url":"https://api.github.com/users/Majkl578/repos","events_url":"https://api.github.com/users/Majkl578/events{/privacy}","received_events_url":"https://api.github.com/users/Majkl578/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":225630643,"node_id":"MDU6TGFiZWwyMjU2MzA2NDM=","url":"https://api.github.com/repos/doctrine/dbal/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":308742506,"node_id":"MDU6TGFiZWwzMDg3NDI1MDY=","url":"https://api.github.com/repos/doctrine/dbal/labels/Regression","name":"Regression","color":"e11d21","default":false,"description":null},{"id":308836049,"node_id":"MDU6TGFiZWwzMDg4MzYwNDk=","url":"https://api.github.com/repos/doctrine/dbal/labels/Schema%20Comparison","name":"Schema Comparison","color":"ffffff","default":false,"description":null},{"id":309396347,"node_id":"MDU6TGFiZWwzMDkzOTYzNDc=","url":"https://api.github.com/repos/doctrine/dbal/labels/Blocker","name":"Blocker","color":"e11d21","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/doctrine/dbal/milestones/68","html_url":"https://github.com/doctrine/dbal/milestone/68","labels_url":"https://api.github.com/repos/doctrine/dbal/milestones/68/labels","id":3426445,"node_id":"MDk6TWlsZXN0b25lMzQyNjQ0NQ==","number":68,"title":"2.9.0","description":"","creator":{"login":"Majkl578","id":144181,"node_id":"MDQ6VXNlcjE0NDE4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/144181?v=4","gravatar_id":"","url":"https://api.github.com/users/Majkl578","html_url":"https://github.com/Majkl578","followers_url":"https://api.github.com/users/Majkl578/followers","following_url":"https://api.github.com/users/Majkl578/following{/other_user}","gists_url":"https://api.github.com/users/Majkl578/gists{/gist_id}","starred_url":"https://api.github.com/users/Majkl578/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Majkl578/subscriptions","organizations_url":"https://api.github.com/users/Majkl578/orgs","repos_url":"https://api.github.com/users/Majkl578/repos","events_url":"https://api.github.com/users/Majkl578/events{/privacy}","received_events_url":"https://api.github.com/users/Majkl578/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2018-06-14T22:12:09Z","updated_at":"2021-10-09T19:19:50Z","due_on":null,"closed_at":"2018-12-04T08:39:13Z"},"comments":1,"created_at":"2018-10-31T14:06:27Z","updated_at":"2022-08-01T00:25:43Z","closed_at":"2018-11-24T21:26:16Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### BC Break Report\r\n\r\n|    Q        |   A\r\n|------------ | ------\r\n| BC Break    | yes\r\n| Version     | 2.9.0-dev\r\n\r\n#### Summary\r\n\r\nAfter applying Doctrine CS 5.0, weak comparisons became strict comparisons.\r\nOne of the affected places is Comparator which compares default values _as is_ (always `string|null` from the DB while it's `scalar|null` when declared in ORM):\r\nhttps://github.com/doctrine/dbal/blob/bef35e9024cca9e4e758b4fed274e8a03dfa8a94/lib/Doctrine/DBAL/Schema/Comparator.php#L435\r\n\r\n#### Previous behaviour\r\nThe following test works with snapshot/develop/2018-04-17\r\nhttps://github.com/doctrine/doctrine2/blob/2726636e55fdbdf6fb1ed466f22d34de116fb8f9/tests/Doctrine/Tests/ORM/Functional/SchemaTool/DBAL483Test.php#L24-L41\r\n\r\n#### Current behavior\r\n\r\nComparator now produces diff SQL when `default` is `(int) 0`.\r\n\r\n#### How to reproduce\r\n\r\nRun ORM 2.6 test suite with DBAL 2.9.0-dev.\r\nhttps://travis-ci.org/doctrine/doctrine2/jobs/448657137#L608","closed_by":{"login":"morozov","id":59683,"node_id":"MDQ6VXNlcjU5Njgz","avatar_url":"https://avatars.githubusercontent.com/u/59683?v=4","gravatar_id":"","url":"https://api.github.com/users/morozov","html_url":"https://github.com/morozov","followers_url":"https://api.github.com/users/morozov/followers","following_url":"https://api.github.com/users/morozov/following{/other_user}","gists_url":"https://api.github.com/users/morozov/gists{/gist_id}","starred_url":"https://api.github.com/users/morozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morozov/subscriptions","organizations_url":"https://api.github.com/users/morozov/orgs","repos_url":"https://api.github.com/users/morozov/repos","events_url":"https://api.github.com/users/morozov/events{/privacy}","received_events_url":"https://api.github.com/users/morozov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/3336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/3336/timeline","performed_via_github_app":null,"state_reason":"completed"}