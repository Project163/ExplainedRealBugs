{"url":"https://api.github.com/repos/doctrine/dbal/issues/2291","repository_url":"https://api.github.com/repos/doctrine/dbal","labels_url":"https://api.github.com/repos/doctrine/dbal/issues/2291/labels{/name}","comments_url":"https://api.github.com/repos/doctrine/dbal/issues/2291/comments","events_url":"https://api.github.com/repos/doctrine/dbal/issues/2291/events","html_url":"https://github.com/doctrine/dbal/issues/2291","id":125874577,"node_id":"MDU6SXNzdWUxMjU4NzQ1Nzc=","number":2291,"title":"The QueryBuilder::getSQLForSelect() always appends a FROM clause for select queries","user":{"login":"kabirbaidhya","id":3315763,"node_id":"MDQ6VXNlcjMzMTU3NjM=","avatar_url":"https://avatars.githubusercontent.com/u/3315763?v=4","gravatar_id":"","url":"https://api.github.com/users/kabirbaidhya","html_url":"https://github.com/kabirbaidhya","followers_url":"https://api.github.com/users/kabirbaidhya/followers","following_url":"https://api.github.com/users/kabirbaidhya/following{/other_user}","gists_url":"https://api.github.com/users/kabirbaidhya/gists{/gist_id}","starred_url":"https://api.github.com/users/kabirbaidhya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabirbaidhya/subscriptions","organizations_url":"https://api.github.com/users/kabirbaidhya/orgs","repos_url":"https://api.github.com/users/kabirbaidhya/repos","events_url":"https://api.github.com/users/kabirbaidhya/events{/privacy}","received_events_url":"https://api.github.com/users/kabirbaidhya/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":225630643,"node_id":"MDU6TGFiZWwyMjU2MzA2NDM=","url":"https://api.github.com/repos/doctrine/dbal/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null},{"id":308809497,"node_id":"MDU6TGFiZWwzMDg4MDk0OTc=","url":"https://api.github.com/repos/doctrine/dbal/labels/QueryBuilder","name":"QueryBuilder","color":"bfe5bf","default":false,"description":""}],"state":"closed","locked":true,"assignee":{"login":"deeky666","id":1411514,"node_id":"MDQ6VXNlcjE0MTE1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1411514?v=4","gravatar_id":"","url":"https://api.github.com/users/deeky666","html_url":"https://github.com/deeky666","followers_url":"https://api.github.com/users/deeky666/followers","following_url":"https://api.github.com/users/deeky666/following{/other_user}","gists_url":"https://api.github.com/users/deeky666/gists{/gist_id}","starred_url":"https://api.github.com/users/deeky666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deeky666/subscriptions","organizations_url":"https://api.github.com/users/deeky666/orgs","repos_url":"https://api.github.com/users/deeky666/repos","events_url":"https://api.github.com/users/deeky666/events{/privacy}","received_events_url":"https://api.github.com/users/deeky666/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"deeky666","id":1411514,"node_id":"MDQ6VXNlcjE0MTE1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1411514?v=4","gravatar_id":"","url":"https://api.github.com/users/deeky666","html_url":"https://github.com/deeky666","followers_url":"https://api.github.com/users/deeky666/followers","following_url":"https://api.github.com/users/deeky666/following{/other_user}","gists_url":"https://api.github.com/users/deeky666/gists{/gist_id}","starred_url":"https://api.github.com/users/deeky666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deeky666/subscriptions","organizations_url":"https://api.github.com/users/deeky666/orgs","repos_url":"https://api.github.com/users/deeky666/repos","events_url":"https://api.github.com/users/deeky666/events{/privacy}","received_events_url":"https://api.github.com/users/deeky666/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/doctrine/dbal/milestones/50","html_url":"https://github.com/doctrine/dbal/milestone/50","labels_url":"https://api.github.com/repos/doctrine/dbal/milestones/50/labels","id":1486000,"node_id":"MDk6TWlsZXN0b25lMTQ4NjAwMA==","number":50,"title":"2.5.5","description":"https://github.com/doctrine/dbal/releases/tag/v2.5.5","creator":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":41,"state":"closed","created_at":"2016-01-05T21:59:07Z","updated_at":"2021-10-30T22:02:00Z","due_on":null,"closed_at":"2016-09-09T19:29:51Z"},"comments":8,"created_at":"2016-01-11T05:08:10Z","updated_at":"2022-08-07T00:26:53Z","closed_at":"2016-07-15T21:22:59Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Running queries without `FROM` clause is not possible currently with the `Doctrine\\DBAL\\Query\\QueryBuilder`.\n\nFor instance we have these queries: \n\n`SELECT EXISTS(...)`\n`SELECT some_function(1, 1)`\n\nWe would probably write something like this: \n`$qb->select('EXISTS (...)')`\nAnd, `$qb->select('my_function(1, 1)')`\n\nBut, when we do `$qb->execute()` it would fail because, internally the `FROM` clause is being appended to the SQL every time we use `QueryBuilder::select()`. \n\nHere's, the part of `QueryBuilder::getSQLForSelect()` that's responsible for this. \n\n``` php\n    /**\n     * @return string\n     *\n     * @throws \\Doctrine\\DBAL\\Query\\QueryException\n     */\n    private function getSQLForSelect()\n    {\n        $query = 'SELECT ' . implode(', ', $this->sqlParts['select']) . ' FROM ';\n\n        $query .= implode(', ', $this->getFromClauses())\n```\n\nhttps://github.com/doctrine/dbal/blob/a3a86aa50ebfe180ac5943cce90a40262041bbdf/lib/Doctrine/DBAL/Query/QueryBuilder.php#L1108-L1111\n\nI have come across a lot of scenarios, where we need to run `SELECT` without `FROM`. But, it's not possible right now. \n\nEg: If I want to check if the user exists in the database, I would want to do: \n`SELECT EXISTS(SELECT 1 FROM user WHERE id = :userId)` as this is the fastest way\n\nBut, I have been using this type of query as a work around\n`SELECT COUNT(id) FROM user WHERE id = :userId` which is comparatively slower than the first one. \nhttp://stackoverflow.com/questions/7471625/fastest-check-if-row-exists-in-postgresql#answer-16467634\n","closed_by":{"login":"Ocramius","id":154256,"node_id":"MDQ6VXNlcjE1NDI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/154256?v=4","gravatar_id":"","url":"https://api.github.com/users/Ocramius","html_url":"https://github.com/Ocramius","followers_url":"https://api.github.com/users/Ocramius/followers","following_url":"https://api.github.com/users/Ocramius/following{/other_user}","gists_url":"https://api.github.com/users/Ocramius/gists{/gist_id}","starred_url":"https://api.github.com/users/Ocramius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ocramius/subscriptions","organizations_url":"https://api.github.com/users/Ocramius/orgs","repos_url":"https://api.github.com/users/Ocramius/repos","events_url":"https://api.github.com/users/Ocramius/events{/privacy}","received_events_url":"https://api.github.com/users/Ocramius/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doctrine/dbal/issues/2291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doctrine/dbal/issues/2291/timeline","performed_via_github_app":null,"state_reason":"completed"}