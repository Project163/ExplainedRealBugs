{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1768","id":258484012,"node_id":"MDU6SXNzdWUyNTg0ODQwMTI=","number":1768,"title":"Improve `TypeFactory.constructFromCanonical()` to work with `java.lang.reflect.Type.getTypeName()' format","user":{"login":"luiscleto","id":4206519,"node_id":"MDQ6VXNlcjQyMDY1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/4206519?v=4","gravatar_id":"","url":"https://api.github.com/users/luiscleto","html_url":"https://github.com/luiscleto","followers_url":"https://api.github.com/users/luiscleto/followers","following_url":"https://api.github.com/users/luiscleto/following{/other_user}","gists_url":"https://api.github.com/users/luiscleto/gists{/gist_id}","starred_url":"https://api.github.com/users/luiscleto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luiscleto/subscriptions","organizations_url":"https://api.github.com/users/luiscleto/orgs","repos_url":"https://api.github.com/users/luiscleto/repos","events_url":"https://api.github.com/users/luiscleto/events{/privacy}","received_events_url":"https://api.github.com/users/luiscleto/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/85","html_url":"https://github.com/FasterXML/jackson-databind/milestone/85","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/85/labels","id":2776360,"node_id":"MDk6TWlsZXN0b25lMjc3NjM2MA==","number":85,"title":"2.9.2","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9.2","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2017-09-19T03:43:42Z","updated_at":"2021-03-04T04:48:26Z","due_on":"2017-10-14T07:00:00Z","closed_at":"2021-03-04T04:48:26Z"},"comments":3,"created_at":"2017-09-18T13:42:10Z","updated_at":"2017-09-19T09:49:41Z","closed_at":"2017-09-19T03:49:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Java's Type#getTypeName() for parameterized types with multiple type parameters returns the inner types in a comma **and space** separated list. (e.g. \"java.util.Map<java.lang.Integer, java.lang.Double>\").\r\n\r\nAttempting to construct the type using TypeFactory's constructFromCanonical will result in an exception as the inner tokens are not trimmed (although the top level String is). For the example above it would be\r\n```\r\njava.lang.IllegalArgumentException: Failed to parse type 'java.util.Map<java.lang.Integer, java.lang.Double>' (remaining: '>'): Can not locate class ' java.lang.Double', problem:  java.lang.Double\r\n\tat com.fasterxml.jackson.databind.type.TypeParser._problem(TypeParser.java:87)\r\n\tat com.fasterxml.jackson.databind.type.TypeParser.findClass(TypeParser.java:81)\r\n\tat com.fasterxml.jackson.databind.type.TypeParser.parseType(TypeParser.java:44)\r\n\tat com.fasterxml.jackson.databind.type.TypeParser.parseTypes(TypeParser.java:62)\r\n\tat com.fasterxml.jackson.databind.type.TypeParser.parseType(TypeParser.java:49)\r\n\tat com.fasterxml.jackson.databind.type.TypeParser.parse(TypeParser.java:30)\r\n\tat com.fasterxml.jackson.databind.type.TypeFactory.constructFromCanonical(TypeFactory.java:236)\r\n```\r\n\r\nSince using Jackson's own JavaTypes to obtain the canonical form does not yield inner spaces, no error will occur for that scenario, hence I see this as a feature I'd like to have rather than a bug. This could be easily achieved if findClass trimmed the String it receives (or received an already trimmed token).","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1768/timeline","performed_via_github_app":null,"state_reason":"completed"}