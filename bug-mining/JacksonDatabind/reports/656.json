{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1751","id":253110292,"node_id":"MDU6SXNzdWUyNTMxMTAyOTI=","number":1751,"title":"`@JsonTypeInfo` does not work if the Type Id is an Integer value","user":{"login":"marvin-we","id":23293713,"node_id":"MDQ6VXNlcjIzMjkzNzEz","avatar_url":"https://avatars.githubusercontent.com/u/23293713?v=4","gravatar_id":"","url":"https://api.github.com/users/marvin-we","html_url":"https://github.com/marvin-we","followers_url":"https://api.github.com/users/marvin-we/followers","following_url":"https://api.github.com/users/marvin-we/following{/other_user}","gists_url":"https://api.github.com/users/marvin-we/gists{/gist_id}","starred_url":"https://api.github.com/users/marvin-we/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marvin-we/subscriptions","organizations_url":"https://api.github.com/users/marvin-we/orgs","repos_url":"https://api.github.com/users/marvin-we/repos","events_url":"https://api.github.com/users/marvin-we/events{/privacy}","received_events_url":"https://api.github.com/users/marvin-we/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/148","html_url":"https://github.com/FasterXML/jackson-databind/milestone/148","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/148/labels","id":8692747,"node_id":"MI_kwDOAC5e2c4AhKQL","number":148,"title":"2.14.2","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2022-11-26T03:58:59Z","updated_at":"2025-10-30T23:29:21Z","due_on":null,"closed_at":"2025-10-30T23:29:21Z"},"comments":6,"created_at":"2017-08-26T17:29:21Z","updated_at":"2023-01-31T18:16:16Z","closed_at":"2022-11-26T04:08:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello together,\r\n\r\nI am using the latest version of jackson (2.9.0) and I am trying to parse the following json:\r\n\r\n```JSON\r\n[0,{\"beneficiaries\":[{\"account\":\"esteemapp\",\"weight\":500}]}]\r\n```\r\n\r\nThe first part of the array (0) is the id of the type of the second part of the array. To solve this I came up with the following configuration for the parent class:\r\n\r\n```JAVA\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_ARRAY)\r\n@JsonSubTypes({ @Type(value = CommentPayoutBeneficiaries.class, name = \"0\") })\r\npublic abstract class CommentOptionsExtension {\r\n```\r\n\r\nUsing the snippet above causes the following Exception:\r\n\r\n> Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (VALUE_NUMBER_INT), expected VALUE_STRING: need JSON String that contains type id (for subtype of eu.bittrade.libs.steemj.base.models.CommentOptionsExtension)\r\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->eu.bittrade.libs.steemj.base.models.SignedBlockWithInfo[\"transactions\"]->java.util.ArrayList[9]->eu.bittrade.libs.steemj.base.models.Transaction[\"operations\"]->java.util.ArrayList[1]->eu.bittrade.libs.steemj.base.models.operations.CommentOptionsOperation[\"extensions\"]->java.util.ArrayList[0])\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1485)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1260)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:151)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromObject(AsArrayTypeDeserializer.java:61)\r\n\tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserializeWithType(AbstractDeserializer.java:254)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:127)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:287)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:116)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromObject(AsArrayTypeDeserializer.java:61)\r\n\tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserializeWithType(AbstractDeserializer.java:254)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:127)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:287)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:285)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:287)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:285)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:3733)\r\n\t... 28 more\r\n\r\nIt would be great if it would be possible to also use Integer values as an Id.\r\n\r\nThank you and best regards! ","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1751/timeline","performed_via_github_app":null,"state_reason":"completed"}