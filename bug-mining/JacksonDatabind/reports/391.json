{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1328","id":170307228,"node_id":"MDU6SXNzdWUxNzAzMDcyMjg=","number":1328,"title":"External property polymorphic deserialization does not work with enums","user":{"login":"rocketraman","id":53049,"node_id":"MDQ6VXNlcjUzMDQ5","avatar_url":"https://avatars.githubusercontent.com/u/53049?v=4","gravatar_id":"","url":"https://api.github.com/users/rocketraman","html_url":"https://github.com/rocketraman","followers_url":"https://api.github.com/users/rocketraman/followers","following_url":"https://api.github.com/users/rocketraman/following{/other_user}","gists_url":"https://api.github.com/users/rocketraman/gists{/gist_id}","starred_url":"https://api.github.com/users/rocketraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rocketraman/subscriptions","organizations_url":"https://api.github.com/users/rocketraman/orgs","repos_url":"https://api.github.com/users/rocketraman/repos","events_url":"https://api.github.com/users/rocketraman/events{/privacy}","received_events_url":"https://api.github.com/users/rocketraman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/92","html_url":"https://github.com/FasterXML/jackson-databind/milestone/92","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/92/labels","id":3246804,"node_id":"MDk6TWlsZXN0b25lMzI0NjgwNA==","number":92,"title":"2.9.6","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9.6","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2018-04-06T03:10:15Z","updated_at":"2021-03-04T04:11:20Z","due_on":"2018-06-12T07:00:00Z","closed_at":"2021-03-04T04:11:20Z"},"comments":23,"created_at":"2016-08-10T01:17:07Z","updated_at":"2025-02-06T04:19:33Z","closed_at":"2018-06-01T06:16:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"versions: Jackson 2.8.1, Jackson-module-kotlin 2.8.1\r\n\r\nAttempting to deserialize a class using external_property. In my case, the property is an Enum type with values matching the type name. Now that issue #999 is fixed, I thought this would work, but now I'm getting a different error:\r\n\r\n```\r\nException in thread \"main\" com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of enum.Invite, problem: argument type mismatch\r\n at [Source: {\r\n  \"kind\": \"CONTACT\",\r\n  \"to\": {\r\n    \"name\": \"Foo\"\r\n  }\r\n}; line: 6, column: 1]\r\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:268)\r\n    at com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1405)\r\n    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.wrapAsJsonMappingException(StdValueInstantiator.java:468)\r\n    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.rewrapCtorProblem(StdValueInstantiator.java:487)\r\n    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.createFromObjectWith(StdValueInstantiator.java:276)\r\n    at com.fasterxml.jackson.module.kotlin.KotlinValueInstantiator.createFromObjectWith(KotlinValueInstantiator.kt:30)\r\n    at com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.build(PropertyBasedCreator.java:135)\r\n    at com.fasterxml.jackson.databind.deser.impl.ExternalTypeHandler.complete(ExternalTypeHandler.java:225)\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeUsingPropertyBasedWithExternalTypeId(BeanDeserializer.java:937)\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeWithExternalTypeId(BeanDeserializer.java:792)\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:312)\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148)\r\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3789)\r\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2852)\r\n    at enum.Reproduction_KindEnumKt.main(Reproduction-KindEnum.kt:49)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\nCaused by: java.lang.IllegalArgumentException: argument type mismatch\r\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    at com.fasterxml.jackson.databind.introspect.AnnotatedConstructor.call(AnnotatedConstructor.java:124)\r\n    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.createFromObjectWith(StdValueInstantiator.java:274)\r\n    ... 15 more\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nHere is the reproduction recipe: https://github.com/rocketraman/jackson-issue-enum-polymorphism/blob/master/src/main/kotlin/enumtype/Reproduction-KindEnum.kt\r\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1328/timeline","performed_via_github_app":null,"state_reason":"completed"}