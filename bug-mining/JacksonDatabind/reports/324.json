{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1058","id":124002063,"node_id":"MDU6SXNzdWUxMjQwMDIwNjM=","number":1058,"title":"Add a way to pass std and format-specific parser/generator flags during parser/generation construction","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":455264793,"node_id":"MDU6TGFiZWw0NTUyNjQ3OTM=","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/3.x","name":"3.x","color":"0E8A16","default":false,"description":"Issues to be only tackled for Jackson 3.x, not 2.x"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/84","html_url":"https://github.com/FasterXML/jackson-databind/milestone/84","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/84/labels","id":2761683,"node_id":"MDk6TWlsZXN0b25lMjc2MTY4Mw==","number":84,"title":"3.0.0","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-3.0\r\n","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"open","created_at":"2017-09-13T02:21:16Z","updated_at":"2025-10-06T02:27:52Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2015-12-28T00:01:17Z","updated_at":"2017-10-09T03:39:33Z","closed_at":"2017-10-09T03:38:37Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"(note: functionality is cross-cutting between databind and `jackson-core`, but I'll file main issue here)\n\nWith Jackson 2.6, it is possible to specify dynamically changeable \"standard\" parser/generator features (`JsonParser.Feature`, `JsonGenerator.Faeture`), by using `ObjectReader` / `ObjectWriter` methods.\nJackson 2.7 adds similar functionality to pass format-specific features for other data formats.\n\nBut one problem in both cases is that the way overrides are passed only comes after construction of parser / generator instances. This works for most features, but not all, as some constructors (or, parser bootstrappers) must use information they get from factory; and as a result, a subset of features can not be passed dynamically.\n\nWhile it would be technically possible to rewrite parser, generators to have sort of delayed initialization for features involved, that would lead to more complex state, error-prone checks.\nSo instead it would seem better to be able to pass feature flags to the constructors.\nAside from explicitly passing flags, a better (not perfect but better) encapsulation could be to use existing `IOContext` for passing this information.\n\nBut even with `IOContext`, there is the question of how overrides would be passed to `JsonFactory` and sub-classes. The long and short of it is that this must be done by adding new factory methods for construction. This is unfortunate, but I don't see a way around that.\n\nOne remaining question there is how methods should be augmented. One possibility would be to pass two `int` flag sets; but this seems fragile, and bit confusing in some cases (when passing `byte[]` or `char[]` buffers with offsets). It is also non-extensible.\nAdding a new simple configuration container interface type is probably a lesser evil -- while we do want to minimize additions, one more `interface`, implemented by existing context objects (`SerializerProvider`, `DeserializationContext`), probably would work quite well. Note that while abstract class would usually be a better choice, here existing inheritance hierachy prevents this approach.\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1058/timeline","performed_via_github_app":null,"state_reason":"completed"}