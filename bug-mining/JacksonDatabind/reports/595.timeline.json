[{"id":4122609360,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxMjI2MDkzNjA=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4122609360","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-17T00:35:31Z","label":{"name":"2.13","color":"c2e0c6"},"performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T21:58:24Z","updated_at":"2024-04-19T00:56:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307","repository_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307/events","html_url":"https://github.com/FasterXML/jackson-modules-java8/issues/307","id":2251861844,"node_id":"MDU6SXNzdWUyMjUxODYxODQ0","number":307,"title":"Instant precision should be retained in ObjectMapper#readTree (add `JsonNodeFeature` to force use of `BigDecimal` for `JsonNode` reads)","user":{"login":"jzheaux","id":3627351,"node_id":"MDQ6VXNlcjM2MjczNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3627351?v=4","gravatar_id":"","url":"https://api.github.com/users/jzheaux","html_url":"https://github.com/jzheaux","followers_url":"https://api.github.com/users/jzheaux/followers","following_url":"https://api.github.com/users/jzheaux/following{/other_user}","gists_url":"https://api.github.com/users/jzheaux/gists{/gist_id}","starred_url":"https://api.github.com/users/jzheaux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzheaux/subscriptions","organizations_url":"https://api.github.com/users/jzheaux/orgs","repos_url":"https://api.github.com/users/jzheaux/repos","events_url":"https://api.github.com/users/jzheaux/events{/privacy}","received_events_url":"https://api.github.com/users/jzheaux/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4248904762,"node_id":"LA_kwDOBFVThM79QSQ6","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"},{"id":6195639383,"node_id":"LA_kwDOBFVThM8AAAABcUn0Vw","url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels/2.17","name":"2.17","color":"0E8A16","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-02-12T00:59:01Z","updated_at":"2024-08-15T22:36:15Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":72700804,"node_id":"MDEwOlJlcG9zaXRvcnk3MjcwMDgwNA==","name":"jackson-modules-java8","full_name":"FasterXML/jackson-modules-java8","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-modules-java8","description":"Set of support modules for Java 8 datatypes (Optionals, date/time) and features (parameter names)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8","forks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/deployments","created_at":"2016-11-03T02:26:02Z","updated_at":"2025-10-31T00:02:49Z","pushed_at":"2025-10-31T00:02:44Z","git_url":"git://github.com/FasterXML/jackson-modules-java8.git","ssh_url":"git@github.com:FasterXML/jackson-modules-java8.git","clone_url":"https://github.com/FasterXML/jackson-modules-java8.git","svn_url":"https://github.com/FasterXML/jackson-modules-java8","homepage":"","size":2864,"stargazers_count":416,"watchers_count":416,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":124,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":29,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","java-date"],"visibility":"public","forks":124,"open_issues":29,"watchers":416,"default_branch":"2.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Describe the bug**\r\n\r\n`ObjectMapper#readValue(String)` seems to preserve all nine digits of an `Instant`'s decimal, but `ObjectMapper#readTree(JsonParser)` does not.\r\n\r\n**Version information**\r\n\r\nJackson 2.12.1\r\n\r\n**To Reproduce**\r\n\r\n```java\r\nObjectMapper mapper = new ObjectMapper();\r\n{\r\n\tmapper.registerModule(new JavaTimeModule());\r\n}\r\n\r\nInstant issuedAt = Instant.ofEpochSecond(1234567890).plusNanos(123456789);\r\nMap<String, Instant> attributes = new HashMap<>();\r\n{\r\n\tattributes.put(\"iat\", issuedAt);\r\n}\r\n\r\n@Test\r\nvoid passes() throws Exception {\r\n\tString serialized = mapper.writeValueAsString(attributes);\r\n\tMap<String, Instant> deserialized = mapper.readValue(serialized, new TypeReference<>() {});\r\n\tassertThat(deserialized.get(\"iat\")).isEqualTo(issuedAt);\r\n}\r\n\r\n@Test\r\nvoid fails() throws Exception {\r\n\tString serialized = mapper.writeValueAsString(attributes);\r\n\tJsonParser parser = mapper.createParser(serialized);\r\n\tJsonNode mapNode = mapper.readTree(parser);\r\n\tMap<String, Object> deserialized = new LinkedHashMap<>();\r\n\tIterable<Map.Entry<String, JsonNode>> fields = mapNode::fields;\r\n\tfor (Map.Entry<String, JsonNode> field : fields) {\r\n\t\tdeserialized.put(field.getKey(), mapper.readValue(field.getValue().traverse(mapper), Instant.class));\r\n\t}\r\n\tassertThat(deserialized.get(\"iat\")).isEqualTo(issuedAt);\r\n}\r\n```\r\n\r\nThe second test fails with:\r\n\r\n```text\r\nExpecting:\r\n <2009-02-13T23:31:30.123456700Z>\r\nto be equal to:\r\n <2009-02-13T23:31:30.123456789Z>\r\nbut was not.\r\nExpected :2009-02-13T23:31:30.123456789Z\r\nActual   :2009-02-13T23:31:30.123456700Z\r\n```\r\n\r\n**Additional context**\r\n\r\nThe failure case is derived from [a custom deserializer](https://github.com/spring-projects/spring-security/blob/master/oauth2/oauth2-client/src/main/java/org/springframework/security/oauth2/client/jackson2/UnmodifiableMapDeserializer.java) in our project.\r\n\r\nIdeally, I'd like `readTree` to retain the `Instant`'s precision in the same way that `ObjectMapper#readValue` does when it deserializes a `Map` that contains `Instant`s, though I'd be happy with advice on how to change my approach in my deserializer instead.\r\n\r\nI realize also that `USE_BIG_DECIMAL_FOR_FLOATS` addresses this issue, but I'd prefer to avoid that, since others import [our module](https://github.com/spring-projects/spring-security/blob/master/oauth2/oauth2-client/src/main/java/org/springframework/security/oauth2/client/jackson2/OAuth2ClientJackson2Module.java).","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-modules-java8/issues/307/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T22:08:14Z","updated_at":"2021-03-10T22:08:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251/events","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/251","id":828276712,"node_id":"MDU6SXNzdWU4MjgyNzY3MTI=","number":251,"title":"Unable to deserialize Object with unknown `Timestamp` field","user":{"login":"mgoertzen","id":8344791,"node_id":"MDQ6VXNlcjgzNDQ3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8344791?v=4","gravatar_id":"","url":"https://api.github.com/users/mgoertzen","html_url":"https://github.com/mgoertzen","followers_url":"https://api.github.com/users/mgoertzen/followers","following_url":"https://api.github.com/users/mgoertzen/following{/other_user}","gists_url":"https://api.github.com/users/mgoertzen/gists{/gist_id}","starred_url":"https://api.github.com/users/mgoertzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgoertzen/subscriptions","organizations_url":"https://api.github.com/users/mgoertzen/orgs","repos_url":"https://api.github.com/users/mgoertzen/repos","events_url":"https://api.github.com/users/mgoertzen/events{/privacy}","received_events_url":"https://api.github.com/users/mgoertzen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":635496628,"node_id":"MDU6TGFiZWw2MzU0OTY2Mjg=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/labels/ion","name":"ion","color":"f9d0c4","default":false,"description":null},{"id":3872378314,"node_id":"LA_kwDOA3Qg687mz83K","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2021-03-10T20:11:39Z","updated_at":"2024-02-01T17:13:40Z","closed_at":"2024-02-01T02:46:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":57942251,"node_id":"MDEwOlJlcG9zaXRvcnk1Nzk0MjI1MQ==","name":"jackson-dataformats-binary","full_name":"FasterXML/jackson-dataformats-binary","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-dataformats-binary","description":"Uber-project for standard Jackson binary format backends: avro, cbor, ion, protobuf, smile","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary","forks_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/deployments","created_at":"2016-05-03T04:54:56Z","updated_at":"2025-11-08T04:52:36Z","pushed_at":"2025-11-08T04:52:33Z","git_url":"git://github.com/FasterXML/jackson-dataformats-binary.git","ssh_url":"git@github.com:FasterXML/jackson-dataformats-binary.git","clone_url":"https://github.com/FasterXML/jackson-dataformats-binary.git","svn_url":"https://github.com/FasterXML/jackson-dataformats-binary","homepage":"","size":12099,"stargazers_count":334,"watchers_count":334,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":149,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":71,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["avro","cbor","hacktoberfest","jackson-backends","protobuf","smile"],"visibility":"public","forks":149,"open_issues":71,"watchers":334,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Repro code:\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.DeserializationFeature;\r\nimport com.fasterxml.jackson.dataformat.ion.IonObjectMapper;\r\nimport com.fasterxml.jackson.dataformat.ion.ionvalue.IonValueModule;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class Test {\r\n\r\n    private static class Message {\r\n        private final String message;\r\n        private final Integer count;\r\n\r\n        @JsonCreator\r\n        public Message(@JsonProperty(\"message\") String message,\r\n                       @JsonProperty(\"count\") Integer count) {\r\n            this.message = message;\r\n            this.count = count;\r\n        }\r\n\r\n        public String getMessage() {\r\n            return message;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String ion = \"{message: \\\"Hello, world\\\", timestamp:2021-03-10T01:49:30.242-00:00}\";\r\n        IonObjectMapper mapper = IonObjectMapper.builder()\r\n                .addModule(new IonValueModule())\r\n                .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n                .build();\r\n\r\n        Message message;\r\n        try {\r\n            message = mapper.readValue(ion, Message.class);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        \r\n        System.out.println(message.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nResults in:\r\n\r\n```\r\nException in thread \"main\" java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: com.fasterxml.jackson.databind.util.TokenBuffer cannot be cast to com.fasterxml.jackson.dataformat.ion.IonGenerator\r\n\tat Test.main(Test.java:41)\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: com.fasterxml.jackson.databind.util.TokenBuffer cannot be cast to com.fasterxml.jackson.dataformat.ion.IonGenerator\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._wrapAsIOE(DefaultSerializerProvider.java:509)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:482)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3126)\r\n\tat com.fasterxml.jackson.databind.util.TokenBuffer.writeObject(TokenBuffer.java:938)\r\n\tat com.fasterxml.jackson.databind.util.TokenBuffer._copyBufferValue(TokenBuffer.java:1247)\r\n\tat com.fasterxml.jackson.databind.util.TokenBuffer.copyCurrentStructure(TokenBuffer.java:1148)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:514)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1390)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:362)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:195)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\r\n\tat Test.main(Test.java:38)\r\nCaused by: java.lang.ClassCastException: com.fasterxml.jackson.databind.util.TokenBuffer cannot be cast to com.fasterxml.jackson.dataformat.ion.IonGenerator\r\n\tat com.fasterxml.jackson.dataformat.ion.ionvalue.TimestampSerializer.serialize(TimestampSerializer.java:39)\r\n\tat com.fasterxml.jackson.dataformat.ion.ionvalue.TimestampSerializer.serialize(TimestampSerializer.java:29)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\r\n\t... 14 more\r\n```\r\n\r\nThis looks to be because by default ObjectMapper will copy unknown fields into a TokenBuffer before figuring out how to handle them; it tries to use `TimestampSerializer` and passes in the TokenBuffer as the JsonGenerator, but since TokenBuffer is not an instance of `IonGenerator` the cast at line 39 fails.\r\n\r\nI see two potential options:\r\n1. TimestampSerializer checks the type of `JsonGenerator` and tries to write out a string or int value if it's not an `IonGenerator`; OR\r\n2. IonObjectMapper overrides the BeanDeserializerFactory to provide a BeanDeserializer with `._deserializeUsingPropertyBased` overrridden, implementing logic to handle unknown fields using an Ion-based TokenBuffer or other such mechanism instead of the Json TokenBuffer.","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/251/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4815420638,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MTU0MjA2Mzg=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4815420638","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2e986dfe5937b28ba39b4d28e0f993802c7c9f68","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/2e986dfe5937b28ba39b4d28e0f993802c7c9f68","created_at":"2021-05-29T01:55:55Z","performed_via_github_app":null},{"id":4815481438,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MTU0ODE0Mzg=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4815481438","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b5a60a816b9333edbba830bb252a1417dcd2686b","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/b5a60a816b9333edbba830bb252a1417dcd2686b","created_at":"2021-05-29T02:57:22Z","performed_via_github_app":null},{"id":4815550674,"node_id":"MDExOkNsb3NlZEV2ZW50NDgxNTU1MDY3NA==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4815550674","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"bbf650f8db05f6aa7e9f39d2685fb620ba7c5707","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/bbf650f8db05f6aa7e9f39d2685fb620ba7c5707","created_at":"2021-05-29T04:06:07Z","state_reason":null,"performed_via_github_app":null},{"id":4815550703,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ4MTU1NTA3MDM=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4815550703","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-05-29T04:06:08Z","milestone":{"title":"2.13.0"},"performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-08T15:45:31Z","updated_at":"2021-07-08T15:45:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/3202","id":939875241,"node_id":"MDU6SXNzdWU5Mzk4NzUyNDE=","number":3202,"title":"Buffering needed for `@JsonTypeInfo` property breaks parsing of Floats (depending on property order) (dup of #3133)","user":{"login":"lost-carrier","id":3090579,"node_id":"MDQ6VXNlcjMwOTA1Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/3090579?v=4","gravatar_id":"","url":"https://api.github.com/users/lost-carrier","html_url":"https://github.com/lost-carrier","followers_url":"https://api.github.com/users/lost-carrier/followers","following_url":"https://api.github.com/users/lost-carrier/following{/other_user}","gists_url":"https://api.github.com/users/lost-carrier/gists{/gist_id}","starred_url":"https://api.github.com/users/lost-carrier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lost-carrier/subscriptions","organizations_url":"https://api.github.com/users/lost-carrier/orgs","repos_url":"https://api.github.com/users/lost-carrier/repos","events_url":"https://api.github.com/users/lost-carrier/events{/privacy}","received_events_url":"https://api.github.com/users/lost-carrier/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1473129874,"node_id":"MDU6TGFiZWwxNDczMTI5ODc0","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/duplicate","name":"duplicate","color":"ef7a3b","default":true,"description":"Duplicate of an existing (usually earlier) issue"},{"id":2457821256,"node_id":"MDU6TGFiZWwyNDU3ODIxMjU2","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-07-08T13:43:24Z","updated_at":"2024-09-25T00:39:58Z","closed_at":"2024-09-25T00:39:58Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We're using a class structure similar to the following one using the `@JsonTypeInfo` to determine various SubTypes possible for that JSON:\r\n\r\n```java\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY,\r\n        property = \"classType\", visible = true)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(value = ClassA.class, name = \"a\"),\r\n        @JsonSubTypes.Type(value = ClassB.class, name = \"b\")\r\n})\r\ninterface ClassInterface {\r\n    String getClassType();\r\n}\r\n\r\n\r\nabstract class AbstractClass implements ClassInterface {\r\n    private String classType;\r\n\r\n    @Override\r\n    public String getClassType() {\r\n        return classType;\r\n    }\r\n\r\n    public void setClassType(String classType) {\r\n        this.classType = classType;\r\n    }\r\n}\r\n\r\n\r\nclass ClassA extends AbstractClass {\r\n\r\n    private Object testA;\r\n\r\n    public Object getTestA() {\r\n        return testA;\r\n    }\r\n\r\n    public void setTestA(Object testA) {\r\n        this.testA = testA;\r\n    }\r\n}\r\n\r\n\r\nclass ClassB extends AbstractClass {\r\n    private Object testB;\r\n\r\n    public Object getTestB() {\r\n        return testB;\r\n    }\r\n\r\n    public void setTestB(Object testB) {\r\n        this.testB = testB;\r\n    }\r\n}\r\n```\r\n\r\nNow we were facing problems because we cannot ensure the order of the properties of the incoming JSONs. Unfortunately it turned out that Jackson would parse Doubles as BigDecimals depending of the order of the type info. E.g.: \r\n\r\n```java\r\n    @Test\r\n    public void testJsonSubtypes() throws JsonProcessingException {\r\n\r\n        ClassA classA = new ObjectMapper()\r\n                .configure(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS, false)\r\n                .readerFor(ClassInterface.class)\r\n                .readValue(\"\"\"\r\n                        {\r\n                            \"classType\": \"a\",\r\n                            \"testA\": 47.11\r\n                        }\r\n                        \"\"\"); // IMPORTANT: classType goes first\r\n        assertFalse(classA.getTestA() instanceof BigDecimal); // ...works!\r\n        assertTrue(classA.getTestA() instanceof Double);\r\n\r\n        ClassB classB = new ObjectMapper()\r\n                .configure(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS, false)\r\n                .readerFor(ClassInterface.class)\r\n                .readValue(\"\"\"\r\n                        {\r\n                            \"testB\": 47.11,\r\n                            \"classType\": \"b\"\r\n                        }\r\n                        \"\"\"); // IMPORTANT: classType goes second\r\n        assertFalse(classB.getTestB() instanceof BigDecimal); // ...doesen't!\r\n        assertTrue(classB.getTestB() instanceof Double);\r\n    }\r\n```\r\n\r\nDuring my diggings I found that https://github.com/FasterXML/jackson-databind/blob/0e231952a5611bc56f948c7d23f70cb8299f5ebb/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/AsPropertyTypeDeserializer.java#L105 ... the `_deserializeTypedForId(p, ctxt, tb, p.getText());` which then somehow triggers a `ParserBase.resetFloats()`, which sets `this._numTypesValid = 0;` where I'd say this then causes `_parseSlowFloat(16)` then to parse everything as BigDecimal. (...but I'm certainly no expert there...)\r\n\r\nAbout the context: we're using Java 15 with the current Spring Boot V 2.5.2 which contains Jackson V 2.12.3. (...and I consciously used `new ObjectMapper()` to bypass the Spring wirings...)\r\n ","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3202/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"JooHyukKim","id":61615301,"node_id":"MDQ6VXNlcjYxNjE1MzAx","avatar_url":"https://avatars.githubusercontent.com/u/61615301?v=4","gravatar_id":"","url":"https://api.github.com/users/JooHyukKim","html_url":"https://github.com/JooHyukKim","followers_url":"https://api.github.com/users/JooHyukKim/followers","following_url":"https://api.github.com/users/JooHyukKim/following{/other_user}","gists_url":"https://api.github.com/users/JooHyukKim/gists{/gist_id}","starred_url":"https://api.github.com/users/JooHyukKim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JooHyukKim/subscriptions","organizations_url":"https://api.github.com/users/JooHyukKim/orgs","repos_url":"https://api.github.com/users/JooHyukKim/repos","events_url":"https://api.github.com/users/JooHyukKim/events{/privacy}","received_events_url":"https://api.github.com/users/JooHyukKim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-20T14:59:10Z","updated_at":"2023-07-20T14:59:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050/events","html_url":"https://github.com/FasterXML/jackson-databind/pull/4050","id":1814206839,"node_id":"PR_kwDOAC5e2c5WA3-Q","number":4050,"title":"Fix #4047","user":{"login":"JooHyukKim","id":61615301,"node_id":"MDQ6VXNlcjYxNjE1MzAx","avatar_url":"https://avatars.githubusercontent.com/u/61615301?v=4","gravatar_id":"","url":"https://api.github.com/users/JooHyukKim","html_url":"https://github.com/JooHyukKim","followers_url":"https://api.github.com/users/JooHyukKim/followers","following_url":"https://api.github.com/users/JooHyukKim/following{/other_user}","gists_url":"https://api.github.com/users/JooHyukKim/gists{/gist_id}","starred_url":"https://api.github.com/users/JooHyukKim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JooHyukKim/subscriptions","organizations_url":"https://api.github.com/users/JooHyukKim/orgs","repos_url":"https://api.github.com/users/JooHyukKim/repos","events_url":"https://api.github.com/users/JooHyukKim/events{/privacy}","received_events_url":"https://api.github.com/users/JooHyukKim/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-20T14:59:09Z","updated_at":"2023-07-28T13:43:13Z","closed_at":"2023-07-26T03:23:36Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls/4050","html_url":"https://github.com/FasterXML/jackson-databind/pull/4050","diff_url":"https://github.com/FasterXML/jackson-databind/pull/4050.diff","patch_url":"https://github.com/FasterXML/jackson-databind/pull/4050.patch","merged_at":"2023-07-26T03:23:36Z"},"body":"Fixes #4047 ","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4050/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"JooHyukKim","id":61615301,"node_id":"MDQ6VXNlcjYxNjE1MzAx","avatar_url":"https://avatars.githubusercontent.com/u/61615301?v=4","gravatar_id":"","url":"https://api.github.com/users/JooHyukKim","html_url":"https://github.com/JooHyukKim","followers_url":"https://api.github.com/users/JooHyukKim/followers","following_url":"https://api.github.com/users/JooHyukKim/following{/other_user}","gists_url":"https://api.github.com/users/JooHyukKim/gists{/gist_id}","starred_url":"https://api.github.com/users/JooHyukKim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JooHyukKim/subscriptions","organizations_url":"https://api.github.com/users/JooHyukKim/orgs","repos_url":"https://api.github.com/users/JooHyukKim/repos","events_url":"https://api.github.com/users/JooHyukKim/events{/privacy}","received_events_url":"https://api.github.com/users/JooHyukKim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-20T15:04:43Z","updated_at":"2023-07-20T15:04:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/4047","id":1809254483,"node_id":"I_kwDOAC5e2c5r1whT","number":4047,"title":"`ObjectMapper.valueToTree()` will ignore the configuration `SerializationFeature.WRAP_ROOT_VALUE`","user":{"login":"jessepys","id":12562318,"node_id":"MDQ6VXNlcjEyNTYyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/12562318?v=4","gravatar_id":"","url":"https://api.github.com/users/jessepys","html_url":"https://github.com/jessepys","followers_url":"https://api.github.com/users/jessepys/followers","following_url":"https://api.github.com/users/jessepys/following{/other_user}","gists_url":"https://api.github.com/users/jessepys/gists{/gist_id}","starred_url":"https://api.github.com/users/jessepys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jessepys/subscriptions","organizations_url":"https://api.github.com/users/jessepys/orgs","repos_url":"https://api.github.com/users/jessepys/repos","events_url":"https://api.github.com/users/jessepys/events{/privacy}","received_events_url":"https://api.github.com/users/jessepys/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-07-18T06:48:58Z","updated_at":"2023-07-26T03:23:37Z","closed_at":"2023-07-26T03:23:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Search before asking\n\n- [X] I searched in the [issues](https://github.com/FasterXML/jackson-databind/issues) and found nothing similar.\n\n### Describe the bug\n\nWhen we upgrade the jackson-databind version, then we found the ObjectMapper.valueToTree will return the different result with the previous version. Actually, we configured the SerializationFeature.WRAP_ROOT_VALUE. \r\n\r\nThe class is like this:\r\n\r\n@JsonRootName(\"event\")\r\npublic class Event {\r\n\r\n}\r\n\r\nThe previous ObjectMapper.valueToTree result: \r\n![image](https://github.com/FasterXML/jackson-databind/assets/12562318/a7e457b5-dacd-49d2-8f0f-79f266770d55)\r\n\r\nAfter upgraded the version result:\r\n![image](https://github.com/FasterXML/jackson-databind/assets/12562318/0ab4429c-8add-48db-9f9a-f52167420e2f)\r\n\r\n\r\nThis should caused by the commit.  \r\nhttps://github.com/FasterXML/jackson-databind/commit/2e986dfe5937b28ba39b4d28e0f993802c7c9f68\r\nCan we re-enbale SerializationFeature.WRAP_ROOT_VALUE in ObjectMapper.valueToTree method to keep consistent with method writeValueAsString?\n\n### Version Information\n\n2.14.2 (The version after 2.13 should have this issue)\n\n### Reproduction\n\n<-- Any of the following\r\n1. Configure the object mapper  objectMapper.enable(SerializationFeature.WRAP_ROOT_VALUE);\r\n2. Call objectMapper.valueToTree(event) method\r\n3. You can the SerializationFeature.WRAP_ROOT_VALUE does not take effect after version 2.13.x\r\n -->\r\n```java\r\n public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.findAndRegisterModules();\r\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n        objectMapper.enable(SerializationFeature.WRAP_ROOT_VALUE);\r\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n        objectMapper.registerModule(new JSR310Module());\r\n        return objectMapper;\r\n    }\r\n\r\n@JsonRootName(\"event\")\r\npublic class Event {\r\n    private Long id;\r\n    private String name;\r\n}\r\n//call valueToTree method\r\nobjectMapper.valueToTree(event)\r\n``` \r\n\n\n### Expected behavior\n\nSerializationFeature.WRAP_ROOT_VALUE configuration should be global and take effect in method valueToTree to keep the same with writeValueAsString\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4047/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":14794525642,"node_id":"REFE_lADOAC5e2c4t28chzwAAAANx0ovK","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/14794525642","actor":{"login":"ggrebert","id":1737774,"node_id":"MDQ6VXNlcjE3Mzc3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1737774?v=4","gravatar_id":"","url":"https://api.github.com/users/ggrebert","html_url":"https://github.com/ggrebert","followers_url":"https://api.github.com/users/ggrebert/followers","following_url":"https://api.github.com/users/ggrebert/following{/other_user}","gists_url":"https://api.github.com/users/ggrebert/gists{/gist_id}","starred_url":"https://api.github.com/users/ggrebert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ggrebert/subscriptions","organizations_url":"https://api.github.com/users/ggrebert/orgs","repos_url":"https://api.github.com/users/ggrebert/repos","events_url":"https://api.github.com/users/ggrebert/events{/privacy}","received_events_url":"https://api.github.com/users/ggrebert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bbf650f8db05f6aa7e9f39d2685fb620ba7c5707","commit_url":"https://api.github.com/repos/ggrebert/jackson-databind/commits/bbf650f8db05f6aa7e9f39d2685fb620ba7c5707","created_at":"2024-10-22T23:36:50Z","performed_via_github_app":null}]