{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/2692","id":603225640,"node_id":"MDU6SXNzdWU2MDMyMjU2NDA=","number":2692,"title":"Should never call `set()` on setterless property during deserialization","user":{"login":"lbonco","id":5287728,"node_id":"MDQ6VXNlcjUyODc3Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/5287728?v=4","gravatar_id":"","url":"https://api.github.com/users/lbonco","html_url":"https://github.com/lbonco","followers_url":"https://api.github.com/users/lbonco/followers","following_url":"https://api.github.com/users/lbonco/following{/other_user}","gists_url":"https://api.github.com/users/lbonco/gists{/gist_id}","starred_url":"https://api.github.com/users/lbonco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbonco/subscriptions","organizations_url":"https://api.github.com/users/lbonco/orgs","repos_url":"https://api.github.com/users/lbonco/repos","events_url":"https://api.github.com/users/lbonco/events{/privacy}","received_events_url":"https://api.github.com/users/lbonco/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2457821256,"node_id":"MDU6TGFiZWwyNDU3ODIxMjU2","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"},{"id":8506095424,"node_id":"LA_kwDOAC5e2c8AAAAB-wC3QA","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/2.20","name":"2.20","color":"1D76DB","default":false,"description":"Issues planned at 2.20 or later"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/181","html_url":"https://github.com/FasterXML/jackson-databind/milestone/181","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/181/labels","id":12791387,"node_id":"MI_kwDOAC5e2c4Awy5b","number":181,"title":"2.20.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2025-04-26T00:26:36Z","updated_at":"2025-10-30T23:28:38Z","due_on":null,"closed_at":"2025-10-30T23:28:38Z"},"comments":6,"created_at":"2020-04-20T13:09:23Z","updated_at":"2025-08-13T03:34:32Z","closed_at":"2025-08-13T03:27:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\nI have something like the following code:\r\n\r\n\r\n ```\r\npublic class DataBean {\r\n\r\n\tprivate final String val;\r\n\r\n\t@JsonCreator\r\n\tpublic DataBean(\r\n\t\t\t@JsonProperty(value = \"val\")\r\n\t\t\tString val) {\r\n\t\tsuper();\r\n\t\tthis.val = val;\r\n\t}\r\n\r\n\tpublic String getVal() {\r\n\t\treturn val;\r\n\t}\r\n\t\r\n\tpublic List<String> getList(){\r\n\t\treturn new ArrayList<>();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn \"DataBean [val=\" + val + \"]\";\r\n\t}\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tObjectMapper om = new ObjectMapper();\r\n\t\tString json;\r\n\t\tDataBean out;\r\n\t\tjson = \"{\\\"list\\\":[\\\"11\\\"],\\\"val\\\":\\\"VAL2\\\"}\";\r\n\t\tout = om.readerFor(DataBean.class).readValue(json);\r\n\t\tSystem.out.println(\"this is ko\" + out);\r\n\t}\r\n}\r\n```\r\n\r\nWhen I run the test, I get:\r\n\r\n ```\r\nException in thread \"main\" com.fasterxml.jackson.databind.exc.ValueInstantiationException: Cannot construct instance of `DataBean`, problem: Should never call `set()` on setterless property ('list')\r\n at [Source: (String)\"{\"list\":[\"11\"],\"val\":\"VAL2\"}\"; line: 1, column: 28]\r\n\tat com.fasterxml.jackson.databind.exc.ValueInstantiationException.from(ValueInstantiationException.java:47)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1735)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleInstantiationProblem(DeserializationContext.java:1109)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.wrapInstantiationProblem(BeanDeserializerBase.java:1757)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:424)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1287)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:326)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)\r\n\tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:1719)\r\n\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1261)\r\n\tat DataBean.main(DataBean.java:53)\r\nCaused by: java.lang.UnsupportedOperationException: Should never call `set()` on setterless property ('list')\r\n\tat com.fasterxml.jackson.databind.deser.impl.SetterlessProperty.set(SetterlessProperty.java:147)\r\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyValue$Regular.assign(PropertyValue.java:62)\r\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.build(PropertyBasedCreator.java:207)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:422)\r\n ```\r\n If I modify the JSON, having the value of the constructor as first field, it runs OK. \r\n\r\nIn order to solve the issue, I try the following horrible patch:\r\n\r\n```\r\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/deser/impl/SetterlessProperty.java b/src/main/java/com/fasterxml/jackson/databind/deser/impl/SetterlessProperty.java\r\nindex 9c80e49..ca7ec85 100644\r\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/impl/SetterlessProperty.java\r\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/impl/SetterlessProperty.java\r\n@@ -3,6 +3,8 @@\r\n import java.io.IOException;\r\n import java.lang.annotation.Annotation;\r\n import java.lang.reflect.Method;\r\n+import java.util.Collection;\r\n+import java.util.List;\r\n \r\n import com.fasterxml.jackson.core.JsonParser;\r\n import com.fasterxml.jackson.core.JsonToken;\r\n@@ -144,7 +146,21 @@\r\n \r\n     @Override\r\n     public final void set(Object instance, Object value) throws IOException {\r\n-        throw new UnsupportedOperationException(\"Should never call `set()` on setterless property ('\"+getName()+\"')\");\r\n+    \tif(value instanceof Collection) {\r\n+    \t\t\r\n+    \t\tCollection<Object> collection = (Collection<Object>) value;\r\n+\t\t\tCollection<Object> toModify;\r\n+    \t\ttry {\r\n+    \t\t\ttoModify = (Collection<Object> )_getter.invoke(instance, (Object[]) null);\r\n+    \t\t\ttoModify.addAll(collection);\r\n+    \t\t} catch (Exception e) {\r\n+    \t\t\t_throwAsIOE((JsonParser)null, e);\r\n+    \t\t\treturn; // never gets here\r\n+    \t\t}\r\n+    \t\t\r\n+    \t} else {\r\n+    \t\tthrow new UnsupportedOperationException(\"Should never call `set()` on setterless property ('\"+getName()+\"')\");\r\n+    \t}\r\n     }\r\n \r\n     @Override+    Collection<Object> collection = (Collection<Object>) value;\r\n```\r\n\r\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2692/timeline","performed_via_github_app":null,"state_reason":"completed"}