{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/888","id":99357637,"node_id":"MDU6SXNzdWU5OTM1NzYzNw==","number":888,"title":"Allow specifying custom exclusion comparator via `@JsonInclude`, using `JsonInclude.Include.CUSTOM`","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/63","html_url":"https://github.com/FasterXML/jackson-databind/milestone/63","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/63/labels","id":2003215,"node_id":"MDk6TWlsZXN0b25lMjAwMzIxNQ==","number":63,"title":"2.9.0","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"closed","created_at":"2016-09-14T06:07:39Z","updated_at":"2021-03-04T04:46:44Z","due_on":"2017-07-30T07:00:00Z","closed_at":"2021-03-04T04:46:44Z"},"comments":7,"created_at":"2015-08-06T05:25:23Z","updated_at":"2016-10-01T04:16:40Z","closed_at":"2016-10-01T04:16:40Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"(note, possible related to #885. Also note that this supercedes #558)\n\nChoices used with `@JsonInclude` are currently somewhat limited, and specifically require either hard-coded criteria (`null`, or default property values of a POJO) or support from `JsonSerializer` for type (for \"empty\" check via `JsonSerializer.isEmpty(...)).\nThis makes it difficult to have custom criteria for exclusion without using other mechanisms like JSON Views or Json filter.\n\nBut it would seem possible to instead allow use of some kind of custom object that is called to determine whether given value is to be included/excluded.\nWhile there are multiple possible ways to go about with this -- specifically, whether to create a new interface for comparing -- but one very simple way would be to simply use `Object.equals();` method of comparator, and use return value to indicate inclusion (if `true` returned) vs exclusion (`false`).\n\nThe only other thing needed would seem to be to modify `@JsonInclude` so that:\n1. There is a way specify the `Class` of custom comparator (default of `Void.class` to indicate \"no custom comparator\")\n2. (optional) Add yet another `JsonInclude.Include` enum choice of `CUSTOM`\n3. Also probably need to implement #839 \n\nOf these, (2) is optional: we could choose to always check custom comparator, and if one defined, ignore enum. But from readability stand-point it seems better to add a new choice.\n\nAlso: for maximum power, we could choose to instead require implementation of some special interface, through which we could pass context (`SerializerProvider`). While this would be powerful, it seems that perhaps it is better not get carried away at this point: given that there are more powerful mechanisms for doing that (JSON Filter), we may want to keep this feature simple.\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/888/timeline","performed_via_github_app":null,"state_reason":"completed"}