[{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287592187","html_url":"https://github.com/FasterXML/jackson-databind/issues/1565#issuecomment-287592187","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1565","id":287592187,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzU5MjE4Nw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T03:45:19Z","updated_at":"2017-03-19T03:45:19Z","body":"@j1234d2003 It is not possible to know which version would behave differently before understand specific issue. And although explanation may be helpful, what really helps is a reproduction, ideally simple unit test.\r\nAs an educated guess, however, I would suspect that version that changes behavior is either 2.7 or 2.8, so on short term trying 2.6.7 or 2.7.9 makes sense.\r\n(and in general changes like this are very unlikely within patches so it's good to find minor version match rirst).\r\n\r\nBut also make sure you follow the logic of `defaultImpl` resolution: it absolutely has to be a sub-type of base type that is being annotated; and must not be overridden by subtypes. That is, it is not possibly to specify more specific default implementations for subtypes: there can only be exactly one default implementation type, and one that is compatible with the nominal base type (usually type with `@JsonTypeInfo` annotation).\r\nThat is, it is possible exception you get is result of more thorough validation of annotations, and something that was formerly not caught.\r\n\r\nI suspect this could be related to #1358.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287592187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1005735216,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAwNTczNTIxNg==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1005735216","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-19T03:45:19Z","performed_via_github_app":null},{"id":1005735217,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwMDU3MzUyMTc=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1005735217","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-19T03:45:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287599003","html_url":"https://github.com/FasterXML/jackson-databind/issues/1565#issuecomment-287599003","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1565","id":287599003,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzU5OTAwMw==","user":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T07:05:34Z","updated_at":"2017-03-19T07:05:34Z","body":"Thank you for your response. I agree unit testing on older version is vital and would start by 2.7.9.\r\n\r\nFor longer term solution, I would like to ensure I understand the logic of defaultImpl resolution explained in your response and reflect further based on the polymorphic usage I have seen over the years. I also studied issues 1358 and 1339 to improve my understanding of the problem.\r\n\r\nIn my example:\r\n\r\n- `@JsonTypeInfo` is annotated on interface `CTestInterface` and defaultImpl = `CBaseClass` - the top-most concrete implemetation of  `CTestInterface`. So it obeys \"it absolutely has to be a sub-type of base type that is being annotated;\"\r\n- `CDerivedClass` extends `CBaseClass` and `new ObjectMapper().readValue(value, CDerivedClass.class);` fails whereas `new ObjectMapper().readValue(value, CBaseClass.class);` succeeds - the latter correctly deserializes an instance of `CDerivedClass` if encoded value includes the id property and an instance of  `CBaseClass` if encoded value does not include the id property\r\n\r\n- \"That is, it is not possible to specify more specific default implementations for subtypes: there can only be exactly one default implementation type, and one that is compatible with the nominal base type\". I am assuming that since `@JsonTypeInfo` annotations may be present on any member of a class hierarchy, multiple annotations with different defaultImpl cannot be allowed. We don't have that here in our test example.\r\n\r\nSo based on your description, it seems like you are stating `new ObjectMapper().readValue(value, CDerivedClass.class);` fails because:\r\n- `CDerivedClass` extends the defaultImpl=`CBaseClass`: \"and must not be overridden by subtypes.\"\r\n\r\nIt should be okay to fail if the encoded value DID NOT contain the id property and you try to decode the value as a  `CDerivedClass`. However, if the encoded value contains the id property, there should be no reason to depend on defaultImpl and therefore it should not fail.\r\n\r\nIf a defaultImpl class can never be extended, this is truly troublesome in many real-world usecases. Having a Java interface and a class hierarchy that implements this hierarchy is fairly common. For many usecases such as in messaging protocols, it is necessary to have a default format if format is not explicitly specified. Now the selection of default format is typically based on the domain semantics and not class hierarchy structure. Therefore, a requirement that the defaultImpl class must always be at bottom (away from root - as a leaf) of class hierarchy is impractical in many cases. Even if it is designed with such constraint, a future refactoring that requires extending that defaultImpl class can break the software. \r\n\r\nIt many cases, the software has knowledge of actual target type using means outside the decoders (e.g. message headers) and therefore, it is reasonable to expect that a decoding attempt would be performed with the exact expected type - not the defaultImpl type - we don't want a leakage of an undesirable restriction into software due to usage of Jackson decoding library.\r\n\r\nE.g. Consider a Shape interface annotated using `@JsonTypeInfo` with defaultImpl of `Rectangle` class. Now `Rectangle` cannot be extended by a `Square` class because that would cause decoding of all Square objects to fail - even if each of these encoded Square object data contained an id property. Moreover, I may have to refactor  `Rectangle` class in future to allow `RoundedRectangle` class in future. Just because I need a few `RoundedRectangle` instances, I cannot change that to be the default shape - my default shape is dictated by semantics of use - not my class hierarchy. \r\n\r\nIt would seem that the correct behavior should be that you cannot expect to get a `Square` instance when the encoded object does not have any id - you would get a `Rectangle` instance as that is the defaultImpl. However, if the encoded object does include an id property, you should be able to get a `Square` instance. As a matter of fact, with id property in the encoded object, I should be able to deserialize any member of class hierarchy irrespective of if/what is the defaultImpl.\r\n\r\nPlease share your thoughts.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287599003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1005765820,"node_id":"MDExOkNsb3NlZEV2ZW50MTAwNTc2NTgyMA==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1005765820","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-03-19T07:05:34Z","state_reason":null,"performed_via_github_app":null},{"id":1005765862,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQxMDA1NzY1ODYy","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1005765862","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2017-03-19T07:05:48Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287599021","html_url":"https://github.com/FasterXML/jackson-databind/issues/1565#issuecomment-287599021","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1565","id":287599021,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzU5OTAyMQ==","user":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T07:06:02Z","updated_at":"2017-03-19T07:06:02Z","body":"Sorry, I accidentally closed it.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287599021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287642738","html_url":"https://github.com/FasterXML/jackson-databind/issues/1565#issuecomment-287642738","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1565","id":287642738,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzY0MjczOA==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T19:56:08Z","updated_at":"2017-03-19T19:56:08Z","body":"I wish I had more to spend here, but from glance I think #1358 would be along lines you are thinking.\r\nIdeally I think that pushing failure detection to a later stage would make sense here, as per discussion in that issue (and another that prompted it, not unlike this one I think).\r\n\r\nThere is also the question of whether attempt to direct deserialization into subtype (`Rectangle`) is valid use case at all for base type `Shape`, since even regardless of default implementation that is not a `Rectangle`, type id could also give incompatible type `Triangle`.\r\nWhile it is of course possible to allow that assuming caller knows better to guarantee there shouldn't be a problem, this is not the only way to go about it.\r\n\r\nIn the meantime, in practical terms, I do not think behavior here will be changed in patch releases: so the first version where usage would work as desired is 2.9.\r\nThe way to make code work for now is to use nominal target type of `Shape` (or whatever class `@JsonTypeInfo` is used, for root values; or whatever is the declared type of property), and use explicit cast on result. This is guaranteed to work and does not really change binding aspects; but it does prevent validation from failing for `defaultImpl`. It should also work with earlier versions so change itself does not require upgrade.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287642738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"thomasturrell","id":1552612,"node_id":"MDQ6VXNlcjE1NTI2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1552612?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasturrell","html_url":"https://github.com/thomasturrell","followers_url":"https://api.github.com/users/thomasturrell/followers","following_url":"https://api.github.com/users/thomasturrell/following{/other_user}","gists_url":"https://api.github.com/users/thomasturrell/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasturrell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasturrell/subscriptions","organizations_url":"https://api.github.com/users/thomasturrell/orgs","repos_url":"https://api.github.com/users/thomasturrell/repos","events_url":"https://api.github.com/users/thomasturrell/events{/privacy}","received_events_url":"https://api.github.com/users/thomasturrell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T14:10:20Z","updated_at":"2017-03-20T14:10:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1538","id":211277995,"node_id":"MDU6SXNzdWUyMTEyNzc5OTU=","number":1538,"title":"Polymorphic deserialization fails when `defaultImpl` is specified and a subtype contains a subtype property that is set to null","user":{"login":"trevora-edge","id":13540261,"node_id":"MDQ6VXNlcjEzNTQwMjYx","avatar_url":"https://avatars.githubusercontent.com/u/13540261?v=4","gravatar_id":"","url":"https://api.github.com/users/trevora-edge","html_url":"https://github.com/trevora-edge","followers_url":"https://api.github.com/users/trevora-edge/followers","following_url":"https://api.github.com/users/trevora-edge/following{/other_user}","gists_url":"https://api.github.com/users/trevora-edge/gists{/gist_id}","starred_url":"https://api.github.com/users/trevora-edge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevora-edge/subscriptions","organizations_url":"https://api.github.com/users/trevora-edge/orgs","repos_url":"https://api.github.com/users/trevora-edge/repos","events_url":"https://api.github.com/users/trevora-edge/events{/privacy}","received_events_url":"https://api.github.com/users/trevora-edge/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-03-02T03:21:22Z","updated_at":"2017-07-03T09:00:20Z","closed_at":"2017-03-20T13:20:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We have a protocol where all JSON objects contain a `_type` field that indicates what the JSON represents. In some cases, protocol objects contain other protocol objects as properties. We are currently using Jackson 2.8.7 for serialization and deserialization.\r\n\r\nIf we define a `defaultImpl` class as a catch-all for unknown types, deserialization fails for any protocol objects that contain other protocol objects if the reference to those objects is `null`. It appears that Jackson attempts to substitute the `null` with an instance of the default class. This results in a `com.fasterxml.jackson.databind.JsonMappingException` exception as the default class is not a subclass of the property's type.\r\n\r\nThe following code illustrates the problem:\r\n\r\n```java\r\npackage com.example.test;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonAnyGetter;\r\nimport com.fasterxml.jackson.annotation.JsonAnySetter;\r\nimport com.fasterxml.jackson.annotation.JsonGetter;\r\nimport com.fasterxml.jackson.annotation.JsonSetter;\r\nimport com.fasterxml.jackson.annotation.JsonSubTypes;\r\nimport com.fasterxml.jackson.annotation.JsonSubTypes.Type;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport java.util.LinkedHashMap;\r\nimport java.util.Map;\r\n\r\npublic class JacksonTest {\r\n\r\n    @JsonTypeInfo(\r\n        use = JsonTypeInfo.Id.NAME,\r\n        include = JsonTypeInfo.As.PROPERTY,\r\n        property = \"_type\",\r\n        visible = true,\r\n        defaultImpl = Default.class)\r\n        //visible = true)\r\n    @JsonSubTypes({\r\n        @Type(value = Inner.class, name = Inner._TYPE),\r\n        @Type(value = Outer.class, name = Outer._TYPE)\r\n    })\r\n    public static class Base {\r\n        private String type;\r\n\r\n        @JsonGetter(\"_type\")\r\n        public String type() {\r\n            return this.type;\r\n        }\r\n\r\n        @JsonSetter(\"_type\")\r\n        public void setType(String type) {\r\n            this.type = type;\r\n        }\r\n\r\n        protected Base(String type) {\r\n            this.type = type;\r\n        }\r\n    }\r\n\r\n    public static class Inner extends Base {\r\n        public static final String _TYPE = \"inner\";\r\n\r\n        public Inner() {\r\n            super(_TYPE);\r\n        }\r\n    }\r\n\r\n    public static class Outer extends Base {\r\n        public static final String _TYPE = \"outer\";\r\n\r\n        private Inner inner;\r\n\r\n        public Outer() {\r\n            super(_TYPE);\r\n        }\r\n\r\n        @JsonGetter(\"inner\")\r\n        public Inner inner() {\r\n            return this.inner;\r\n        }\r\n\r\n        @JsonSetter(\"inner\")\r\n        public void setInner(Inner inner) {\r\n            this.inner = inner;\r\n        }\r\n    }\r\n\r\n    public static class Default extends Base {\r\n        private Map<String, Object> properties = new LinkedHashMap<String, Object>();\r\n\r\n        public Default() {\r\n            super(\"default\");\r\n        }\r\n\r\n        @JsonAnySetter\r\n        public void set(String name, Object value) {\r\n            this.properties.put(name, value);\r\n        }\r\n\r\n        @JsonAnyGetter\r\n        public Map<String, Object> properties() {\r\n            return this.properties;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        // leave 'inner' as null\r\n        Outer originalOuter = new Outer();\r\n        try {\r\n            JsonNode tree = mapper.valueToTree(originalOuter);\r\n            Base base = mapper.treeToValue(tree, Base.class);\r\n            System.out.println(base.type());\r\n        } catch (JsonProcessingException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nRunning this code produces the exception\r\n\r\n    com.fasterxml.jackson.databind.JsonMappingException: Class com.example.test.JacksonTest$Default not subtype of [simple type, class com.example.test.JacksonTest$Inner]\r\n     at [Source: N/A; line: -1, column: -1]\r\n        at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:305)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:268)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCacheValueDeserializer(DeserializerCache.java:244)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache.findValueDeserializer(DeserializerCache.java:142)\r\n        at com.fasterxml.jackson.databind.DeserializationContext.findContextualValueDeserializer(DeserializationContext.java:443)\r\n        at com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:188)\r\n        at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:112)\r\n        at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:97)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1089)\r\n        at com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:63)\r\n        at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3770)\r\n        at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2099)\r\n        at com.fasterxml.jackson.databind.ObjectMapper.treeToValue(ObjectMapper.java:2596)\r\n        at com.example.test.JacksonTest.main(JacksonTest.java:101)\r\n    Caused by: java.lang.IllegalArgumentException: Class com.example.test.JacksonTest$Default not subtype of [simple type, class com.example.test.JacksonTest$Inner]\r\n        at com.fasterxml.jackson.databind.type.TypeFactory.constructSpecializedType(TypeFactory.java:359)\r\n        at com.fasterxml.jackson.databind.jsontype.impl.StdTypeResolverBuilder.buildTypeDeserializer(StdTypeResolverBuilder.java:128)\r\n        at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findTypeDeserializer(BasicDeserializerFactory.java:1373)\r\n        at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findPropertyTypeDeserializer(BasicDeserializerFactory.java:1508)\r\n        at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.resolveMemberAndTypeAnnotations(BasicDeserializerFactory.java:1857)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.constructSettableProperty(BeanDeserializerFactory.java:728)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:516)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:226)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:141)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer2(DeserializerCache.java:403)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer(DeserializerCache.java:349)\r\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:264)\r\n        ... 12 more\r\n\r\nIf you comment out the `defaultImpl` portion of the annotation, the application runs as expected without an exception.\r\n\r\nMy general expectation would be that the deserializer would simply set the property to `null`. However, I'm somewhat new to Jackson, so perhaps I'm missing something here.","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1538/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287928411","html_url":"https://github.com/FasterXML/jackson-databind/issues/1565#issuecomment-287928411","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1565","id":287928411,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzkyODQxMQ==","user":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T23:19:52Z","updated_at":"2017-03-20T23:19:52Z","body":"Thank you for your detailed response.\r\n\r\nIn order to perform a thorough analysis of current behavior and find an older version that would allow me to proceed in the short term, here is a sample test program using the Shape class hierarchy: \r\n[RectangleTest.java.txt](https://github.com/FasterXML/jackson-databind/files/856489/RectangleTest.java.txt)\r\n\r\nFor version 2.8.7, here are the results: \r\n[2.8.7.txt](https://github.com/FasterXML/jackson-databind/files/856491/2.8.7.txt)\r\n\r\nAs is apparent from this result, a new problem has been detected that is related to defaultImpl:\r\nWhen used as a member attribute inside another instance, it is not possible to use the concrete types other than the annotated interface or the defaultImpl class.  Here, `Shape` and `Rectangle` members work correctly but decoding fails when there is a `Square` or `Circle` member nested inside another object.\r\n\r\nThis problem seems more troubling as I cannot comprehend a workaround like the explicit case you proposed. It is would be unreasonable to restrict use of concrete types in other domain-specific classes as only members with those concrete types may make sense for those domain-specific classes.\r\n\r\nAs before, the problem with top-most object type persists as follows:\r\nWhen deserializing as top-most object, it is not possible to use concrete types other than the annotated interface or the defaultImpl class. i.e. `new ObjectMapper().readValue(encodedValue, Square.class) ` and `new ObjectMapper().readValue(encodedValue, Circle.class) ` fail to deserialize as expected.\r\nAs per your suggestion, there may be a temporary workaround using explicit casting for this problem.\r\n\r\nUsing the actual concrete type for deserialization is a valid usecase as in most of our target usecases, it is necessary to know the type of content you are expecting - like when you are processing a message, you already have message type from a previously decoded message header (may be other format) and now you are decoding the message payload to get additional information to process this message. It would be best if we did not have to use the Interface type or some super-type due to deserialization library constraints as you already know what you need. Getting something other than that may be an error.\r\n\r\nOne can also look at this problem in another way: The type id resolver is able to completely resolve the type from the encoded data and therefore it should be allowed to do so. It seems reasonable to depend on defaultImpl when type could not be detected from the encoded data and therefore there is no further recourse to determine how to proceed w.r.t. type detection. If defaultImpl is not meant to work like this, it would be desirable to provide something which does offer this functionality. It seems overly restrictive for a deserialization library to constraint the type of expected data or data-type of domain-specific classes. It would help if a deserializer throws an exception only when the underlying encoded data cannot be decoded to what the user requested. Right now it throws an exception even when the encoded data is correct.\r\n\r\nThe same tests for 2.7.9 (with few mods for TypeIdResolver impl) did not fail for any of the above usecases. Here is the result for 2.7.9 testing: \r\n[2.7.9.txt](https://github.com/FasterXML/jackson-databind/files/856537/2.7.9.txt)\r\n\r\nSo I plan to move to 2.7.9 in short term but hope you can help fix this issue so that I can proceed to the latest version in the near future. Hope you will be able to address both of these problem usecases. You hinted on 2.9 version. Do you have an estimated release time-frame for stable version for 2.9?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/287928411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"j1234d2003","id":2636821,"node_id":"MDQ6VXNlcjI2MzY4MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2636821?v=4","gravatar_id":"","url":"https://api.github.com/users/j1234d2003","html_url":"https://github.com/j1234d2003","followers_url":"https://api.github.com/users/j1234d2003/followers","following_url":"https://api.github.com/users/j1234d2003/following{/other_user}","gists_url":"https://api.github.com/users/j1234d2003/gists{/gist_id}","starred_url":"https://api.github.com/users/j1234d2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j1234d2003/subscriptions","organizations_url":"https://api.github.com/users/j1234d2003/orgs","repos_url":"https://api.github.com/users/j1234d2003/repos","events_url":"https://api.github.com/users/j1234d2003/events{/privacy}","received_events_url":"https://api.github.com/users/j1234d2003/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1121668109,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExMjE2NjgxMDk=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1121668109","actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4f4e08f740a598f3d788e9a968a1d0f15461dbb0","commit_url":"https://api.github.com/repos/showbie/jackson-databind/commits/4f4e08f740a598f3d788e9a968a1d0f15461dbb0","created_at":"2017-06-13T15:54:12Z","performed_via_github_app":null},{"id":1121668112,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExMjE2NjgxMTI=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1121668112","actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"158026aaabfbf3c4357e931a4aa06bd29aa7d007","commit_url":"https://api.github.com/repos/showbie/jackson-databind/commits/158026aaabfbf3c4357e931a4aa06bd29aa7d007","created_at":"2017-06-13T15:54:12Z","performed_via_github_app":null},{"id":1121775616,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExMjE3NzU2MTY=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1121775616","actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"228c5a0f95c5957a50d25f31986fc491989f48ff","commit_url":"https://api.github.com/repos/showbie/jackson-databind/commits/228c5a0f95c5957a50d25f31986fc491989f48ff","created_at":"2017-06-13T16:54:22Z","performed_via_github_app":null},{"actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T17:21:10Z","updated_at":"2017-06-13T17:21:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656/events","html_url":"https://github.com/FasterXML/jackson-databind/pull/1656","id":235627194,"node_id":"MDExOlB1bGxSZXF1ZXN0MTI1NDE3NTk0","number":1656,"title":"Work-around for #1565: Deserialization failure with Polymorphism using JsonTypeInfo defaultImpl","user":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-06-13T17:21:10Z","updated_at":"2018-04-06T03:10:03Z","closed_at":"2018-04-06T03:10:03Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls/1656","html_url":"https://github.com/FasterXML/jackson-databind/pull/1656","diff_url":"https://github.com/FasterXML/jackson-databind/pull/1656.diff","patch_url":"https://github.com/FasterXML/jackson-databind/pull/1656.patch","merged_at":null},"body":"This commit provides a work-around-ish solution for #1565. It does not attempt to address the deeper issues as discussed in #1358.\r\n\r\nBasically this patch adds a check to detect the scenario when `defaultImpl` is set to a class that is not a subclass of the base type: Then in that case, check whether `baseType` and `defaultImpl` share a superclass with the `@JsonTypeInfo` annotation. If yes, allow the type deserializer to be built without `defaultImpl`. If no, then the current behaviour applies (exception thrown because of invalid `@JsonTypeInfo`).","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1656/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1123574353,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExMjM1NzQzNTM=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1123574353","actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"60293443b30c2af6418e8bf264d60d6e80a411da","commit_url":"https://api.github.com/repos/showbie/jackson-databind/commits/60293443b30c2af6418e8bf264d60d6e80a411da","created_at":"2017-06-14T15:55:48Z","performed_via_github_app":null},{"id":1123574354,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDExMjM1NzQzNTQ=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1123574354","actor":{"login":"slobo-showbie","id":5472842,"node_id":"MDQ6VXNlcjU0NzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5472842?v=4","gravatar_id":"","url":"https://api.github.com/users/slobo-showbie","html_url":"https://github.com/slobo-showbie","followers_url":"https://api.github.com/users/slobo-showbie/followers","following_url":"https://api.github.com/users/slobo-showbie/following{/other_user}","gists_url":"https://api.github.com/users/slobo-showbie/gists{/gist_id}","starred_url":"https://api.github.com/users/slobo-showbie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slobo-showbie/subscriptions","organizations_url":"https://api.github.com/users/slobo-showbie/orgs","repos_url":"https://api.github.com/users/slobo-showbie/repos","events_url":"https://api.github.com/users/slobo-showbie/events{/privacy}","received_events_url":"https://api.github.com/users/slobo-showbie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"78bc4d694cc4ecd2a7f8009cf8d87d62d10ad031","commit_url":"https://api.github.com/repos/showbie/jackson-databind/commits/78bc4d694cc4ecd2a7f8009cf8d87d62d10ad031","created_at":"2017-06-14T15:55:48Z","performed_via_github_app":null},{"id":1560093231,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE1NjAwOTMyMzE=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1560093231","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-04-06T03:10:15Z","milestone":{"title":"2.9.6"},"performed_via_github_app":null},{"id":1560093373,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTU2MDA5MzM3Mw==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1560093373","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-04-06T03:10:29Z","rename":{"from":"Deserialization failure with Polymorphism using JsonTypeInfo defaultImpl","to":"Deserialization failure with Polymorphism using JsonTypeInfo `defaultImpl`, subtype as target"},"performed_via_github_app":null},{"id":1560096474,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE1NjAwOTY0NzQ=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1560096474","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"09e5ba14fbd519116cbcd23a9ee273bf5d98c7f3","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/09e5ba14fbd519116cbcd23a9ee273bf5d98c7f3","created_at":"2018-04-06T03:14:47Z","performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:15:28Z","updated_at":"2018-04-06T03:15:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1381","id":178474904,"node_id":"MDU6SXNzdWUxNzg0NzQ5MDQ=","number":1381,"title":"Add a way to specify \"inject-only\" with `@JacksonInject`","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1955308541,"node_id":"MDU6TGFiZWwxOTU1MzA4NTQx","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/most-wanted","name":"most-wanted","color":"71db51","default":false,"description":"Tag to indicate that there is heavy user +1'ing action"},{"id":9105965906,"node_id":"LA_kwDOAC5e2c8AAAACHsIDUg","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/2.21","name":"2.21","color":"1d76db","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-09-21T22:08:37Z","updated_at":"2025-11-06T01:29:32Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Currently all injectable properties also allow binding of data from input, so if there is a JSON value for property, it will override anything injected. But this may not always be what user wants; sometimes it may be preferable to only use injection (and quietly drop value from data, if any). Or possible even reverse, that is, allowing injection to optional override value, but if no injectable value given to default to value from input data.\n\nTo support this change, some other changes are needed:\n1. Create `JacksonInject.Value` to contain aspects (name, precedence for now, possibly more in future)\n2. Create a new enum type for `JacksonInject` to indicate if and how input data value is to be used.\n3. Change introspection method in `AnnotationIntrospector` to produce new value object but allow chaining with old implementations, to support some level of interoperability\n4. Change introspectors (Guice module uses one I think; OSGi too?)\n\nAs to enum to use (`JacksonInject.Input`?), perhaps:\n- `Primary`: (default) if input data has property, use that, not injected value\n- `Secondary`: input data only used if no injected value can be found\n- `Never`: input data never used, only injected value\n\nAnother possible improvement could be to add another property (`required`?) to indicate whether it is acceptable to not have an injectable value defined, when one is needed (which is in all cases except with `Primary`, and finding actual data).\nIf no value is found, and injection is NOT required (required would be the default for now) `null` would be injected.\n","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1381/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1560100677,"node_id":"MDExOkNsb3NlZEV2ZW50MTU2MDEwMDY3Nw==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/1560100677","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"09e5ba14fbd519116cbcd23a9ee273bf5d98c7f3","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/09e5ba14fbd519116cbcd23a9ee273bf5d98c7f3","created_at":"2018-04-06T03:21:16Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T20:44:14Z","updated_at":"2018-05-29T20:44:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1358","id":174393610,"node_id":"MDU6SXNzdWUxNzQzOTM2MTA=","number":1358,"title":"Improve handling of `@JsonTypeInfo`, `defaultImpl` to anchor definition","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":455264793,"node_id":"MDU6TGFiZWw0NTUyNjQ3OTM=","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/3.x","name":"3.x","color":"0E8A16","default":false,"description":"Issues to be only tackled for Jackson 3.x, not 2.x"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-08-31T22:23:30Z","updated_at":"2018-05-29T23:07:43Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"So: currently it is possible to declare a valid `@JsonTypeInfo` in basetype, where `defaultImpl` specifies a subtype that is valid within context of declaration; but use it in a way that triggers an exception for potential conflict.\n\nThis happens when user requests deserialization into a subtype of original type, but one that is not castable to the type of `defaultImpl`. For example, something like:\n\n``` java\n@JsonTypeInfo(.... defaultImpl=DefaultImpl.class)\npublic class Base { }\n\npublic class Concrete extends Base { }\n\npublic class DefaultImpl extends Base { }\n```\n\nwhere deserialization using:\n\n``` java\nBase result = mapper.readValue(\"{ }\", Base.class);\n```\n\nsucceeds, but attempts to do:\n\n``` java\nConcrete result = mapper.readValue(\"{ }\", Concrete.class);\n```\n\nwill fail, because `DefaultImpl` is not assignable from `Concrete`.\n\nWhile code is not exactly wrong in that there is potential problem -- if default implementation ends up required to be used, there would be a cast exception -- it is not necessarily something that will happen, and in fact user may be able to either guarantee it will not, or, even if not it may be better to indicate problem only when it does occur as opposed to merely possibly happening.\n\nThe technical problem is most likely due to inheritance of `@JsonTypeInfo` annotation, so that code has no way of knowing where exactly declaration is bound. If binding was known, base type comparison could use `Base` regardless of expected type, and we could indicate failure only when it actually happens.\n\nIt is not 100% certain that this problem can be resolved, but it would be good to try to do so.\n","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1358/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"KroligG","id":9104757,"node_id":"MDQ6VXNlcjkxMDQ3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/9104757?v=4","gravatar_id":"","url":"https://api.github.com/users/KroligG","html_url":"https://github.com/KroligG","followers_url":"https://api.github.com/users/KroligG/followers","following_url":"https://api.github.com/users/KroligG/following{/other_user}","gists_url":"https://api.github.com/users/KroligG/gists{/gist_id}","starred_url":"https://api.github.com/users/KroligG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KroligG/subscriptions","organizations_url":"https://api.github.com/users/KroligG/orgs","repos_url":"https://api.github.com/users/KroligG/repos","events_url":"https://api.github.com/users/KroligG/events{/privacy}","received_events_url":"https://api.github.com/users/KroligG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T21:02:17Z","updated_at":"2019-02-20T21:02:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1488","id":198722092,"node_id":"MDU6SXNzdWUxOTg3MjIwOTI=","number":1488,"title":"Unable to deserialize collection of concrete subclass when using defaultImpl","user":{"login":"michaelaberman","id":3767348,"node_id":"MDQ6VXNlcjM3NjczNDg=","avatar_url":"https://avatars.githubusercontent.com/u/3767348?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelaberman","html_url":"https://github.com/michaelaberman","followers_url":"https://api.github.com/users/michaelaberman/followers","following_url":"https://api.github.com/users/michaelaberman/following{/other_user}","gists_url":"https://api.github.com/users/michaelaberman/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelaberman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelaberman/subscriptions","organizations_url":"https://api.github.com/users/michaelaberman/orgs","repos_url":"https://api.github.com/users/michaelaberman/repos","events_url":"https://api.github.com/users/michaelaberman/events{/privacy}","received_events_url":"https://api.github.com/users/michaelaberman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-01-04T14:38:57Z","updated_at":"2019-02-20T21:02:17Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This worked in the last 2.7, but is broken in both 2.8.0 and 2.8.5.\r\n\r\nI have a field parameterized with a concrete subclass of a base class annotated with `@JsonTypeInfo`, and I am trying to deserialize a collection that contains only that specific class. In 2.8.x, the `readValue` method fails with `com.fasterxml.jackson.databind.JsonMappingException: Class JacksonSubclassCollectionTest$SomeBaseClass not subtype of [simple type, class JacksonSubclassCollectionTest$SomeSubClass]`. This doesn't appear to happen without `defaultImpl` (but I have legacy data with no `type` field that I need to be able to keep deserializing in other contexts). Full stack trace follows example.\r\n\r\n```\r\npublic class JacksonSubclassCollectionTest {\r\n  public static void main(String[] args) throws Exception {\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\r\n    SomeContainer container = mapper.readValue(\"{\\\"collection\\\":[{\\\"type\\\":\\\"SUBCLASS\\\",\\\"field\\\":7}]}\", SomeContainer.class);\r\n\r\n    System.out.println(container.collection.get(0).field);\r\n  }\r\n\r\n  @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\", defaultImpl = SomeBaseClass.class, visible = true)\r\n  @JsonSubTypes({@JsonSubTypes.Type(name = \"SUBCLASS\", value = SomeSubClass.class)})\r\n  public static class SomeBaseClass {\r\n    @JsonTypeId\r\n    public String type;\r\n  }\r\n\r\n  public static class SomeSubClass extends SomeBaseClass {\r\n    public int field;\r\n  }\r\n\r\n  public static class SomeContainer {\r\n    public ArrayList<SomeSubClass> collection;\r\n  }\r\n}\r\n```\r\n\r\n```\r\nException in thread \"main\" com.fasterxml.jackson.databind.JsonMappingException: Class JacksonSubclassCollectionTest$SomeBaseClass not subtype of [simple type, class JacksonSubclassCollectionTest$SomeSubClass]\r\n at [Source: {\"collection\":[{\"type\":\"SUBCLASS\",\"field\":7}]}; line: 1, column: 1]\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:296)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:269)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCacheValueDeserializer(DeserializerCache.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache.findValueDeserializer(DeserializerCache.java:142)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:475)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._findRootDeserializer(ObjectMapper.java:3890)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3785)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2833)\r\n\tat JacksonSubclassCollectionTest.main(JacksonSubclassCollectionTest.java:20)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)\r\nCaused by: java.lang.IllegalArgumentException: Class JacksonSubclassCollectionTest$SomeBaseClass not subtype of [simple type, class JacksonSubclassCollectionTest$SomeSubClass]\r\n\tat com.fasterxml.jackson.databind.type.TypeFactory.constructSpecializedType(TypeFactory.java:359)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.StdTypeResolverBuilder.buildTypeDeserializer(StdTypeResolverBuilder.java:118)\r\n\tat com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findTypeDeserializer(BasicDeserializerFactory.java:1363)\r\n\tat com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findPropertyContentTypeDeserializer(BasicDeserializerFactory.java:1526)\r\n\tat com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.resolveMemberAndTypeAnnotations(BasicDeserializerFactory.java:1841)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.constructSettableProperty(BeanDeserializerFactory.java:735)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:520)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:226)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:141)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer2(DeserializerCache.java:406)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer(DeserializerCache.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:264)\r\n\t... 12 more\r\n```","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1488/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"drnushooz","id":10852951,"node_id":"MDQ6VXNlcjEwODUyOTUx","avatar_url":"https://avatars.githubusercontent.com/u/10852951?v=4","gravatar_id":"","url":"https://api.github.com/users/drnushooz","html_url":"https://github.com/drnushooz","followers_url":"https://api.github.com/users/drnushooz/followers","following_url":"https://api.github.com/users/drnushooz/following{/other_user}","gists_url":"https://api.github.com/users/drnushooz/gists{/gist_id}","starred_url":"https://api.github.com/users/drnushooz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drnushooz/subscriptions","organizations_url":"https://api.github.com/users/drnushooz/orgs","repos_url":"https://api.github.com/users/drnushooz/repos","events_url":"https://api.github.com/users/drnushooz/events{/privacy}","received_events_url":"https://api.github.com/users/drnushooz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T18:25:19Z","updated_at":"2019-08-17T18:25:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/apache/druid/issues/8325","repository_url":"https://api.github.com/repos/apache/druid","labels_url":"https://api.github.com/repos/apache/druid/issues/8325/labels{/name}","comments_url":"https://api.github.com/repos/apache/druid/issues/8325/comments","events_url":"https://api.github.com/repos/apache/druid/issues/8325/events","html_url":"https://github.com/apache/druid/issues/8325","id":481757333,"node_id":"MDU6SXNzdWU0ODE3NTczMzM=","number":8325,"title":"InvalidTypeIdException while deserializing Granularity JSON ","user":{"login":"drnushooz","id":10852951,"node_id":"MDQ6VXNlcjEwODUyOTUx","avatar_url":"https://avatars.githubusercontent.com/u/10852951?v=4","gravatar_id":"","url":"https://api.github.com/users/drnushooz","html_url":"https://github.com/drnushooz","followers_url":"https://api.github.com/users/drnushooz/followers","following_url":"https://api.github.com/users/drnushooz/following{/other_user}","gists_url":"https://api.github.com/users/drnushooz/gists{/gist_id}","starred_url":"https://api.github.com/users/drnushooz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drnushooz/subscriptions","organizations_url":"https://api.github.com/users/drnushooz/orgs","repos_url":"https://api.github.com/users/drnushooz/repos","events_url":"https://api.github.com/users/drnushooz/events{/privacy}","received_events_url":"https://api.github.com/users/drnushooz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1498568141,"node_id":"MDU6TGFiZWwxNDk4NTY4MTQx","url":"https://api.github.com/repos/apache/druid/labels/Uncategorized%20problem%20report","name":"Uncategorized problem report","color":"e56b6d","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-16T19:41:08Z","updated_at":"2019-08-18T07:58:22Z","closed_at":"2019-08-18T07:58:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":6358188,"node_id":"MDEwOlJlcG9zaXRvcnk2MzU4MTg4","name":"druid","full_name":"apache/druid","private":false,"owner":{"login":"apache","id":47359,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3MzU5","avatar_url":"https://avatars.githubusercontent.com/u/47359?v=4","gravatar_id":"","url":"https://api.github.com/users/apache","html_url":"https://github.com/apache","followers_url":"https://api.github.com/users/apache/followers","following_url":"https://api.github.com/users/apache/following{/other_user}","gists_url":"https://api.github.com/users/apache/gists{/gist_id}","starred_url":"https://api.github.com/users/apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apache/subscriptions","organizations_url":"https://api.github.com/users/apache/orgs","repos_url":"https://api.github.com/users/apache/repos","events_url":"https://api.github.com/users/apache/events{/privacy}","received_events_url":"https://api.github.com/users/apache/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/apache/druid","description":"Apache Druid: a high performance real-time analytics database.","fork":false,"url":"https://api.github.com/repos/apache/druid","forks_url":"https://api.github.com/repos/apache/druid/forks","keys_url":"https://api.github.com/repos/apache/druid/keys{/key_id}","collaborators_url":"https://api.github.com/repos/apache/druid/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/apache/druid/teams","hooks_url":"https://api.github.com/repos/apache/druid/hooks","issue_events_url":"https://api.github.com/repos/apache/druid/issues/events{/number}","events_url":"https://api.github.com/repos/apache/druid/events","assignees_url":"https://api.github.com/repos/apache/druid/assignees{/user}","branches_url":"https://api.github.com/repos/apache/druid/branches{/branch}","tags_url":"https://api.github.com/repos/apache/druid/tags","blobs_url":"https://api.github.com/repos/apache/druid/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/apache/druid/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/apache/druid/git/refs{/sha}","trees_url":"https://api.github.com/repos/apache/druid/git/trees{/sha}","statuses_url":"https://api.github.com/repos/apache/druid/statuses/{sha}","languages_url":"https://api.github.com/repos/apache/druid/languages","stargazers_url":"https://api.github.com/repos/apache/druid/stargazers","contributors_url":"https://api.github.com/repos/apache/druid/contributors","subscribers_url":"https://api.github.com/repos/apache/druid/subscribers","subscription_url":"https://api.github.com/repos/apache/druid/subscription","commits_url":"https://api.github.com/repos/apache/druid/commits{/sha}","git_commits_url":"https://api.github.com/repos/apache/druid/git/commits{/sha}","comments_url":"https://api.github.com/repos/apache/druid/comments{/number}","issue_comment_url":"https://api.github.com/repos/apache/druid/issues/comments{/number}","contents_url":"https://api.github.com/repos/apache/druid/contents/{+path}","compare_url":"https://api.github.com/repos/apache/druid/compare/{base}...{head}","merges_url":"https://api.github.com/repos/apache/druid/merges","archive_url":"https://api.github.com/repos/apache/druid/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/apache/druid/downloads","issues_url":"https://api.github.com/repos/apache/druid/issues{/number}","pulls_url":"https://api.github.com/repos/apache/druid/pulls{/number}","milestones_url":"https://api.github.com/repos/apache/druid/milestones{/number}","notifications_url":"https://api.github.com/repos/apache/druid/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/apache/druid/labels{/name}","releases_url":"https://api.github.com/repos/apache/druid/releases{/id}","deployments_url":"https://api.github.com/repos/apache/druid/deployments","created_at":"2012-10-23T19:08:07Z","updated_at":"2025-11-08T16:02:28Z","pushed_at":"2025-11-08T05:30:40Z","git_url":"git://github.com/apache/druid.git","ssh_url":"git@github.com:apache/druid.git","clone_url":"https://github.com/apache/druid.git","svn_url":"https://github.com/apache/druid","homepage":"https://druid.apache.org/","size":404978,"stargazers_count":13865,"watchers_count":13865,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3762,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":747,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["druid"],"visibility":"public","forks":3762,"open_issues":747,"watchers":13865,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Getting `Cause: com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class org.apache.druid.java.util.common.granularity.PeriodGranularity]: missing type id property 'type'` when deserializing `Granularity`.\r\n\r\n### Affected Version\r\n\r\n0.15.0-incubating\r\n\r\n### Description\r\nI am working on porting https://github.com/metamx/druid-spark-batch to the latest version of Druid and there are couple of unit tests which are failing while trying to deserialize Granularity in `DateBucketPartitioner`. My code is located here https://github.com/drnushooz/druid-spark-batch/tree/druid-version-upgrade and the exact location of the exception is https://github.com/drnushooz/druid-spark-batch/blob/druid-version-upgrade/src/main/scala/org/apache/druid/indexer/spark/DateBucketPartitioner.scala#L41\r\n\r\nThe exception is reported below when I run `\"TestSparkDruidIndexer.The spark indexer return proper DataSegments\"` located at https://github.com/drnushooz/druid-spark-batch/blob/druid-version-upgrade/src/test/scala/org/apache/druid/indexer/spark/TestSparkDruidIndexer.scala#L48\r\n\r\n```Caused by: com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class org.apache.druid.java.util.common.granularity.PeriodGranularity]: missing type id property 'type'\r\n at [Source: UNKNOWN; line: 1, column: 1]\r\n\tat com.fasterxml.jackson.databind.exc.InvalidTypeIdException.from(InvalidTypeIdException.java:43)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.missingTypeIdException(DeserializationContext.java:1645)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingTypeId(DeserializationContext.java:1218)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._handleMissingTypeId(TypeDeserializerBase.java:300)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedUsingDefaultImpl(AsPropertyTypeDeserializer.java:164)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:88)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:68)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3004)\r\n\tat org.apache.druid.indexer.spark.SerializedJson.fillFromMap(SerializedJson.scala:81)\r\n\tat org.apache.druid.indexer.spark.SerializedJson.readObject(SerializedJson.scala:51)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2178)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\r\n\tat org.apache.druid.indexer.spark.DateBucketPartitioner.readObject(DateBucketPartitioner.scala:42)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2178)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2287)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2211)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2287)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2211)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:75)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:114)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:88)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:55)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:121)\r\n\tat org.apache.spark.executor.Executor$TaskRunner$$anonfun$10.apply(Executor.scala:408)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1360)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:414)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nAnother variation of the stack trace\r\n```\r\norg.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 1.0 failed 1 times, most recent failure: Lost task 0.0 in stage 1.0 (TID 1, localhost, executor driver): com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class org.apache.druid.java.util.common.granularity.PeriodGranularity]: missing type id property 'type'\r\n at [Source: (String)\"\"YEAR\"\"; line: 1, column: 1]\r\n\tat com.fasterxml.jackson.databind.exc.InvalidTypeIdException.from(InvalidTypeIdException.java:43)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.missingTypeIdException(DeserializationContext.java:1645)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingTypeId(DeserializationContext.java:1218)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._handleMissingTypeId(TypeDeserializerBase.java:300)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedUsingDefaultImpl(AsPropertyTypeDeserializer.java:164)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:88)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:68)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3004)\r\n\tat org.apache.druid.indexer.spark.SerializedJson.fillFromMap(SerializedJson.scala:81)\r\n\tat org.apache.druid.indexer.spark.SerializedJson.readObject(SerializedJson.scala:51)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2178)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\r\n\tat org.apache.druid.indexer.spark.DateBucketPartitioner.readObject(DateBucketPartitioner.scala:42)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2178)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2287)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2211)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2287)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2211)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:75)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:114)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:88)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:55)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:121)\r\n\tat org.apache.spark.executor.Executor$TaskRunner$$anonfun$10.apply(Executor.scala:408)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1360)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:414)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\nI looked through the GranularitySpec.scala to see if there are issues with the input schema which doesn't seem to be the case. What am I doing wrong in deserialization of Granularity?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/8325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/druid/issues/8325/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]