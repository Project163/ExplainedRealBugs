[{"id":11578396514,"node_id":"LE_lADOAC5e2c59ArW0zwAAAAKyIE9i","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578396514","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-01-24T03:01:56Z","label":{"name":"to-evaluate","color":"fbca04"},"performed_via_github_app":null},{"id":11578399662,"node_id":"UNLE_lADOAC5e2c59ArW0zwAAAAKyIFuu","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578399662","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-01-24T03:02:29Z","label":{"name":"to-evaluate","color":"fbca04"},"performed_via_github_app":null},{"id":11578399664,"node_id":"LE_lADOAC5e2c59ArW0zwAAAAKyIFuw","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578399664","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-01-24T03:02:29Z","label":{"name":"2.17","color":"0052cc"},"performed_via_github_app":null},{"id":11578414004,"node_id":"REFE_lADOAC5e2c59ArW0zwAAAAKyIJO0","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578414004","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b2006f5ba9df1f99f1a48166baadf982dfbbb662","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/b2006f5ba9df1f99f1a48166baadf982dfbbb662","created_at":"2024-01-24T03:05:01Z","performed_via_github_app":null},{"id":11578427482,"node_id":"CE_lADOAC5e2c59ArW0zwAAAAKyIMha","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578427482","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"215557b30a73263ad5c179ace5cbc9eecd211183","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/215557b30a73263ad5c179ace5cbc9eecd211183","created_at":"2024-01-24T03:07:18Z","state_reason":null,"performed_via_github_app":null},{"id":11578517466,"node_id":"REFE_lADOAC5e2c59ArW0zwAAAAKyIifa","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578517466","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a4c0a59f60eda35466558efe1fa6ca2f940291ee","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/a4c0a59f60eda35466558efe1fa6ca2f940291ee","created_at":"2024-01-24T03:24:31Z","performed_via_github_app":null},{"id":11578526368,"node_id":"REFE_lADOAC5e2c59ArW0zwAAAAKyIkqg","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/11578526368","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"52ca1778769fd99cc41cf74fc261a7968ca298bd","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/52ca1778769fd99cc41cf74fc261a7968ca298bd","created_at":"2024-01-24T03:26:35Z","performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-05T05:07:49Z","updated_at":"2024-03-05T05:07:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/4413","id":2167160708,"node_id":"I_kwDOAC5e2c6BLD-E","number":4413,"title":"Regression: ClassCastException with contentConverter and Optional","user":{"login":"emlun","id":1367758,"node_id":"MDQ6VXNlcjEzNjc3NTg=","avatar_url":"https://avatars.githubusercontent.com/u/1367758?v=4","gravatar_id":"","url":"https://api.github.com/users/emlun","html_url":"https://github.com/emlun","followers_url":"https://api.github.com/users/emlun/followers","following_url":"https://api.github.com/users/emlun/following{/other_user}","gists_url":"https://api.github.com/users/emlun/gists{/gist_id}","starred_url":"https://api.github.com/users/emlun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emlun/subscriptions","organizations_url":"https://api.github.com/users/emlun/orgs","repos_url":"https://api.github.com/users/emlun/repos","events_url":"https://api.github.com/users/emlun/events{/privacy}","received_events_url":"https://api.github.com/users/emlun/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2457821256,"node_id":"MDU6TGFiZWwyNDU3ODIxMjU2","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/has-failing-test","name":"has-failing-test","color":"4e8a16","default":false,"description":"Indicates that there exists a test case (under `failing/`) to reproduce the issue"},{"id":6031275861,"node_id":"LA_kwDOAC5e2c8AAAABZ333VQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/2.17","name":"2.17","color":"0052cc","default":false,"description":"Issues planned at earliest for 2.17"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-03-04T15:47:05Z","updated_at":"2024-03-06T04:38:23Z","closed_at":"2024-03-06T04:38:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-10T02:17:47Z","pushed_at":"2025-11-10T02:17:44Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83236,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":383,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":383,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Search before asking\r\n\r\n- [X] I searched in the [issues](https://github.com/FasterXML/jackson-databind/issues) and found nothing similar.\r\n\r\n### Describe the bug\r\n\r\nUsing `@JsonSerialize(contentConverter = ...)` on a field with an `Optional<...>` getter fails with Jackson `2.17.0-rc1` but not with `2.16.1`, with a runtime error like this:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.JsonMappingException: class java.util.Collections$EmptyList cannot be cast to class java.security.cert.X509Certificate (java.util.Collections$EmptyList and java.security.cert.X509Certificate are in module java.base of loader 'bootstrap') (through reference chain: Jackson2_17_Test$WithContentConverter[\"x5c\"])\r\n```\r\n\r\nIt appears the serializer attempts to match the input type of the content converter against the type of the collection itself instead of its contents.\r\n\r\n\r\n### Version Information\r\n\r\n2.17.0-rc1\r\n\r\n### Reproduction\r\n\r\nFull reproduction test case:\r\n\r\n```java\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport com.fasterxml.jackson.databind.type.TypeFactory;\r\nimport com.fasterxml.jackson.databind.util.Converter;\r\nimport com.fasterxml.jackson.datatype.jdk8.Jdk8Module;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport org.junit.Test;\r\n\r\npublic class Jackson2_17_Test {\r\n\r\n    private static ObjectMapper json() {\r\n        return JsonMapper.builder()\r\n                .addModule(new Jdk8Module())\r\n                .build();\r\n    }\r\n\r\n    @Test\r\n    public void testWithoutContentConverter() throws JsonProcessingException {\r\n        final WithoutContentConverter value = new WithoutContentConverter(Collections.emptyList());\r\n        final String encoded = json().writeValueAsString(value);\r\n        System.out.println(\"testWithoutContentConverter encoded: \" + encoded);\r\n    }\r\n\r\n    @Test\r\n    public void testWithoutOptional() throws JsonProcessingException {\r\n        final WithoutOptional value = new WithoutOptional(Collections.emptyList());\r\n        final String encoded = json().writeValueAsString(value);\r\n        System.out.println(\"testWithoutOptional encoded: \" + encoded);\r\n    }\r\n\r\n    @Test\r\n    public void testWithContentConverter() throws JsonProcessingException {\r\n        final WithContentConverter value = new WithContentConverter(Collections.emptyList());\r\n        final String encoded = json().writeValueAsString(value);\r\n        System.out.println(\"testWithContentConverter encoded: \" + encoded);\r\n    }\r\n\r\n    static class WithoutContentConverter {\r\n        @JsonSerialize\r\n        private List<X509Certificate> x5c;\r\n\r\n        @JsonCreator\r\n        public WithoutContentConverter(@JsonProperty(\"x5c\") List<X509Certificate> x5c) {\r\n            this.x5c = x5c;\r\n        }\r\n\r\n        public Optional<List<X509Certificate>> getX5c() {\r\n            return Optional.ofNullable(x5c);\r\n        }\r\n    }\r\n\r\n    static class WithoutOptional {\r\n        @JsonSerialize(contentConverter = CertToBase64Converter.class)\r\n        private List<X509Certificate> x5c;\r\n\r\n        @JsonCreator\r\n        public WithoutOptional(@JsonProperty(\"x5c\") List<X509Certificate> x5c) {\r\n            this.x5c = x5c;\r\n        }\r\n\r\n        public List<X509Certificate> getX5c() {\r\n            return x5c;\r\n        }\r\n    }\r\n\r\n    static class WithContentConverter {\r\n        @JsonSerialize(contentConverter = CertToBase64Converter.class)\r\n        public List<X509Certificate> x5c;\r\n\r\n        @JsonCreator\r\n        public WithContentConverter(@JsonProperty(\"x5c\") List<X509Certificate> x5c) {\r\n            this.x5c = x5c;\r\n        }\r\n\r\n        public Optional<List<X509Certificate>> getX5c() {\r\n            return Optional.ofNullable(x5c);\r\n        }\r\n    }\r\n\r\n    static class CertToBase64Converter implements Converter<X509Certificate, String> {\r\n        @Override\r\n        public String convert(X509Certificate value) {\r\n            throw new UnsupportedOperationException(\"This code is never reached\");\r\n        }\r\n\r\n        @Override\r\n        public JavaType getInputType(TypeFactory typeFactory) {\r\n            return typeFactory.constructType(X509Certificate.class);\r\n        }\r\n\r\n        @Override\r\n        public JavaType getOutputType(TypeFactory typeFactory) {\r\n            return typeFactory.constructType(String.class);\r\n        }\r\n    }\r\n\r\n}\r\n``` \r\n\r\nThe tests `testWithoutContentConverter` and `testWithoutOptional` are expected to succeed and `testWithContentConverter` is expected to fail with Jackson `2.17.0-rc1`. All three tests are expected to succeed with Jackson `2.16.1`.\r\n\r\n### Expected behavior\r\n\r\n`@JsonSerialize(contentConverter = ...)` should continue to work as it did in version `2.16.1`.\r\n\r\n### Additional context\r\n\r\nOriginally detected here: https://github.com/Yubico/java-webauthn-server/issues/350","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4413/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]