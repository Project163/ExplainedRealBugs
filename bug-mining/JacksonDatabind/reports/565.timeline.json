[{"id":3479629750,"node_id":"MDEyOkxhYmVsZWRFdmVudDM0Nzk2Mjk3NTA=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3479629750","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-06-24T22:31:43Z","label":{"name":"2.11","color":"71d151"},"performed_via_github_app":null},{"id":3861216129,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4NjEyMTYxMjk=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3861216129","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-09T17:50:58Z","label":{"name":"good first issue","color":"b3ff6d"},"performed_via_github_app":null},{"id":3861216131,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4NjEyMTYxMzE=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3861216131","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-09T17:50:58Z","label":{"name":"hacktoberfest","color":"e580aa"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/706703617","html_url":"https://github.com/FasterXML/jackson-databind/issues/2775#issuecomment-706703617","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2775","id":706703617,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjcwMzYxNw==","user":{"login":"singleton11","id":400442,"node_id":"MDQ6VXNlcjQwMDQ0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/400442?v=4","gravatar_id":"","url":"https://api.github.com/users/singleton11","html_url":"https://github.com/singleton11","followers_url":"https://api.github.com/users/singleton11/followers","following_url":"https://api.github.com/users/singleton11/following{/other_user}","gists_url":"https://api.github.com/users/singleton11/gists{/gist_id}","starred_url":"https://api.github.com/users/singleton11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singleton11/subscriptions","organizations_url":"https://api.github.com/users/singleton11/orgs","repos_url":"https://api.github.com/users/singleton11/repos","events_url":"https://api.github.com/users/singleton11/events{/privacy}","received_events_url":"https://api.github.com/users/singleton11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-11T13:17:36Z","updated_at":"2020-10-11T13:21:11Z","body":"```\r\npublic class Test {\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\r\n    interface CustomEnum {}\r\n\r\n    @JsonTypeName(\"Test\")\r\n    enum TestEnum implements CustomEnum {\r\n        VALUE;\r\n    }\r\n\r\n    @org.junit.Test\r\n    public void test() throws JsonProcessingException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.registerSubtypes(TestEnum.class);\r\n\r\n//        mapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\r\n\r\n        CustomEnum testValue = TestEnum.VALUE;\r\n        String json = mapper.writeValueAsString(testValue);\r\n\r\n        CustomEnum deserializedValue = mapper.readValue(json, CustomEnum.class);\r\n        assertEquals(testValue, deserializedValue);\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis test works fine in 2.11 branch, what I do wrong?\r\n\r\nUPD: Sorry, I see, I just had to explicitly disable this feature","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/706703617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"singleton11","id":400442,"node_id":"MDQ6VXNlcjQwMDQ0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/400442?v=4","gravatar_id":"","url":"https://api.github.com/users/singleton11","html_url":"https://github.com/singleton11","followers_url":"https://api.github.com/users/singleton11/followers","following_url":"https://api.github.com/users/singleton11/following{/other_user}","gists_url":"https://api.github.com/users/singleton11/gists{/gist_id}","starred_url":"https://api.github.com/users/singleton11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singleton11/subscriptions","organizations_url":"https://api.github.com/users/singleton11/orgs","repos_url":"https://api.github.com/users/singleton11/repos","events_url":"https://api.github.com/users/singleton11/events{/privacy}","received_events_url":"https://api.github.com/users/singleton11/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708086444","html_url":"https://github.com/FasterXML/jackson-databind/issues/2775#issuecomment-708086444","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2775","id":708086444,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA4NjQ0NA==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T00:44:50Z","updated_at":"2020-10-14T00:44:50Z","body":"Interesting. I can reproduce this. Workaround that trips handling appears to be fix for #148 so can not just remove use of `NullifyingDeserializer`.\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708086444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708089784","html_url":"https://github.com/FasterXML/jackson-databind/issues/2775#issuecomment-708089784","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2775","id":708089784,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA4OTc4NA==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T00:56:53Z","updated_at":"2020-10-14T00:56:53Z","body":"Fundamentally the problem is that `Enum`s are serialized as `String`s -- scalar value -- and not as JSON Objects, so it is not possible use inclusion of `As.PROPERTY`. Instead, serialization occurs using `As.WRAPPER_ARRAY`.\r\nBut on deserialization this can not be determined. I am not sure why it appears to work with different settings however.\r\n\r\nA solution here really is to use different inclusion:\r\n\r\n```java\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_ARRAY)\r\n```\r\n\r\nand things will work.\r\n\r\nIt is odd that without disabling `FAIL_ON_INVALID_SUBTYPE` things appear to work ok, so I'll see if there is a way to handle this case as expected. But in the mean time specifying more general inclusion type (WRAPPER_ARRAY is guaranteed to work all shapes, ditto for WRAPPER_OBJECT).\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708089784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3874240976,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NzQyNDA5NzY=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874240976","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"de46edf32d53ac0e609df3a1717c7c4040d8a10e","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/de46edf32d53ac0e609df3a1717c7c4040d8a10e","created_at":"2020-10-14T01:00:33Z","performed_via_github_app":null},{"id":3874352280,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50Mzg3NDM1MjI4MA==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874352280","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:01:15Z","label":{"name":"good first issue","color":"b3ff6d"},"performed_via_github_app":null},{"id":3874352281,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50Mzg3NDM1MjI4MQ==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874352281","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:01:15Z","label":{"name":"hacktoberfest","color":"e580aa"},"performed_via_github_app":null},{"id":3874352282,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4NzQzNTIyODI=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874352282","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:01:15Z","label":{"name":"2.12","color":"71d34a"},"performed_via_github_app":null},{"id":3874352451,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50Mzg3NDM1MjQ1MQ==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874352451","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:01:19Z","label":{"name":"2.11","color":"71d151"},"performed_via_github_app":null},{"id":3874366991,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50Mzg3NDM2Njk5MQ==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874366991","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:09:03Z","rename":{"from":"Disabling FAIL_ON_INVALID_SUBTYPE breaks enum deserialization with interfaces","to":"Disabling `FAIL_ON_INVALID_SUBTYPE` breaks polymorphic deserialization of Enums"},"performed_via_github_app":null},{"id":3874367949,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDM4NzQzNjc5NDk=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874367949","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2020-10-14T02:09:33Z","milestone":{"title":"2.12.0-rc2"},"performed_via_github_app":null},{"id":3874369441,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NzQzNjk0NDE=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874369441","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"78f609e687769e16d6866be9a5bc8db58a9d3890","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/78f609e687769e16d6866be9a5bc8db58a9d3890","created_at":"2020-10-14T02:10:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708111007","html_url":"https://github.com/FasterXML/jackson-databind/issues/2775#issuecomment-708111007","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2775","id":708111007,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODExMTAwNw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T02:13:12Z","updated_at":"2020-10-14T02:13:12Z","body":"I was able to fix this, but since there is some risk in fix will only add in for 2.12.0 (probably in 2.12.0-rc2), not for earlier minor versions. I suspect risk simply because this affects edge cases and testing is probably not extensive for such cases.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/708111007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3874374911,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg3NDM3NDkxMQ==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874374911","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"78f609e687769e16d6866be9a5bc8db58a9d3890","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/78f609e687769e16d6866be9a5bc8db58a9d3890","created_at":"2020-10-14T02:13:24Z","state_reason":null,"performed_via_github_app":null},{"id":3874385852,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4NzQzODU4NTI=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/3874385852","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3f9ee4beb2da8c7ca4ab7e0af74093b3749a5de7","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/3f9ee4beb2da8c7ca4ab7e0af74093b3749a5de7","created_at":"2020-10-14T02:18:41Z","performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T22:57:20Z","updated_at":"2020-11-10T22:57:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/2933","id":740037561,"node_id":"MDU6SXNzdWU3NDAwMzc1NjE=","number":2933,"title":"Disabling FAIL_ON_INVALID_SUBTYPE breaks deserialization in an edge case with generics + custom (de)serializers","user":{"login":"stevestorey","id":1728140,"node_id":"MDQ6VXNlcjE3MjgxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1728140?v=4","gravatar_id":"","url":"https://api.github.com/users/stevestorey","html_url":"https://github.com/stevestorey","followers_url":"https://api.github.com/users/stevestorey/followers","following_url":"https://api.github.com/users/stevestorey/following{/other_user}","gists_url":"https://api.github.com/users/stevestorey/gists{/gist_id}","starred_url":"https://api.github.com/users/stevestorey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevestorey/subscriptions","organizations_url":"https://api.github.com/users/stevestorey/orgs","repos_url":"https://api.github.com/users/stevestorey/repos","events_url":"https://api.github.com/users/stevestorey/events{/privacy}","received_events_url":"https://api.github.com/users/stevestorey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-11-10T16:03:40Z","updated_at":"2020-11-13T00:59:54Z","closed_at":"2020-11-12T20:54:52Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-10T02:17:47Z","pushed_at":"2025-11-10T02:17:44Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83236,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":383,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":383,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Describe the bug**\r\nDisabling FAIL_ON_INVALID_SUBTYPE can cause deserialization (involving generic types) to fail, in such a way that values that were previously deserialized correctly when the feature is enabled get converted to `null` when the feature is disabled.\r\n\r\nMy reading is that the feature should control whether an exception is thrown, or whether null is returned?\r\n```\r\n     * Feature that determines what happens when type of a polymorphic\r\n     * value (indicated for example by {@link com.fasterxml.jackson.annotation.JsonTypeInfo})\r\n     * cannot be found (missing) or resolved (invalid class name, unmappable id);\r\n     * if enabled, an exception ir thrown; if false, null value is used instead.\r\n```\r\nbut in this case, the type resolution is working fine with the feature enabled, but returns nulls when it's disabled which seems to break the docs (and seems likely that it's a bug)\r\n\r\n**Version information**\r\nTests fail with all of 2.10.2, 2.11.3, 2.11.4-SNAPSHOT\r\n\r\n**To Reproduce**\r\nStandalone test case:\r\n\r\n```java\r\npackage bugs;\r\n\r\nimport static com.fasterxml.jackson.annotation.JsonTypeInfo.As.PROPERTY;\r\nimport static com.fasterxml.jackson.annotation.JsonTypeInfo.Id.CLASS;\r\n\r\nimport java.io.IOException;\r\n\r\nimport org.junit.jupiter.api.Assertions;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.core.TreeNode;\r\nimport com.fasterxml.jackson.databind.BeanProperty;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.DeserializationFeature;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport com.fasterxml.jackson.databind.JsonMappingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport com.fasterxml.jackson.databind.deser.ContextualDeserializer;\r\nimport com.fasterxml.jackson.databind.deser.std.StdScalarDeserializer;\r\nimport com.fasterxml.jackson.databind.node.NumericNode;\r\nimport com.fasterxml.jackson.databind.ser.std.StdScalarSerializer;\r\n\r\npublic class DisablingSubTypeFailureBreaksDeserialization {\r\n\r\n    private ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Test // PASSES\r\n    public void testWithSubTypeFailuresEnabled() throws IOException {\r\n        objectMapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\r\n        runTest();\r\n    }\r\n\r\n    @Test // FAILS as the ID is `null`\r\n    public void testWithSubTypeFailuresDisabled() throws IOException {\r\n        objectMapper.disable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\r\n        runTest();\r\n    }\r\n    \r\n    private void runTest() throws IOException {\r\n        // Not the prettiest JSON, but functional ... The array is because of the custom serializer\r\n        String json = \"{\\\"id\\\":[\\\"\" + WrappedId.class.getName() + \"\\\",1]}\";\r\n        Assertions.assertEquals(json, objectMapper.writeValueAsString(new IdHolderWithTypeInfo<>(new WrappedId(1L))));\r\n        IdHolderWithTypeInfo<?> readBack = objectMapper.readValue(json, IdHolderWithTypeInfo.class);\r\n        Assertions.assertTrue(readBack.getId() instanceof WrappedId); // FAILS when FAIL_ON_INVALID_SUBTYPE is disabled\r\n        Assertions.assertEquals(1L, readBack.getId().getId());\r\n    }\r\n\r\n    interface HasId {\r\n        Long getId();\r\n    }\r\n\r\n    @JsonSerialize(using = TestSerializer.class)\r\n    @JsonDeserialize(using = TestDeserializer.class)\r\n    static class WrappedId implements HasId {\r\n        private final Long id;\r\n\r\n        WrappedId(Long id) {\r\n            this.id = id;\r\n        }\r\n\r\n        @Override\r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param <I> this generic type appears to be part of the problem. If you change this\r\n     * to extend WrappedId instead of HasId then the tests pass again\r\n     */\r\n    private static class IdHolderWithTypeInfo<I extends HasId /* WrappedId instead of HasId works */> {\r\n        private final I id;\r\n\r\n        @JsonCreator\r\n        IdHolderWithTypeInfo(@JsonProperty(\"id\") I id) {\r\n            this.id = id;\r\n        }\r\n\r\n        @JsonTypeInfo(include = PROPERTY, property = \"class\", use = CLASS)\r\n        public I getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\n    static class TestSerializer extends StdScalarSerializer<WrappedId> {\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        TestSerializer() {\r\n            super(WrappedId.class, true);\r\n        }\r\n\r\n        @Override\r\n        public void serialize(WrappedId value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n            gen.writeNumber(value.getId());\r\n        }\r\n    }\r\n\r\n    static class TestDeserializer extends JsonDeserializer<WrappedId> implements ContextualDeserializer {\r\n\r\n        @Override\r\n        public JsonDeserializer<WrappedId> createContextual(DeserializationContext ctxt, BeanProperty property)\r\n                throws JsonMappingException {\r\n            return new StdScalarDeserializer<>(WrappedId.class) {\r\n                private static final long serialVersionUID = 1L;\r\n\r\n                @Override\r\n                public WrappedId deserialize(JsonParser p, DeserializationContext ctxt)\r\n                        throws IOException, JsonProcessingException {\r\n                    TreeNode node = p.getCodec().readTree(p);\r\n                    long value = ((NumericNode) node).asLong();\r\n                    return new WrappedId(value);\r\n                }\r\n            };\r\n        }\r\n\r\n        @Override\r\n        public WrappedId deserialize(JsonParser p, DeserializationContext ctxt)\r\n                throws IOException, JsonProcessingException {\r\n            throw new UnsupportedOperationException(\"Should have used the delegate\");\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nBoth tests pass\r\n\r\n**Additional context**\r\nI expect that there are several things that are cotributing to the issue, not least the use of the custom serializers. Our 'real' code example is trying to (de)serialize ID types as scalar types based on string prefixes, and we occasionally want to use such `WrappedId` types in generic types some of which require generic type information to be included in the JSON.\r\n","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2933/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]