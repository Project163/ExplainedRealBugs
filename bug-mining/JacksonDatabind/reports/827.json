{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/5309","id":3400893943,"node_id":"I_kwDOAC5e2c7KtYX3","number":5309,"title":"Confusing exception for `DoubleNode` to `Integer` conversion in Jackson 3","user":{"login":"caalador","id":2726090,"node_id":"MDQ6VXNlcjI3MjYwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/2726090?v=4","gravatar_id":"","url":"https://api.github.com/users/caalador","html_url":"https://github.com/caalador","followers_url":"https://api.github.com/users/caalador/followers","following_url":"https://api.github.com/users/caalador/following{/other_user}","gists_url":"https://api.github.com/users/caalador/gists{/gist_id}","starred_url":"https://api.github.com/users/caalador/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caalador/subscriptions","organizations_url":"https://api.github.com/users/caalador/orgs","repos_url":"https://api.github.com/users/caalador/repos","events_url":"https://api.github.com/users/caalador/events{/privacy}","received_events_url":"https://api.github.com/users/caalador/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7201103729,"node_id":"LA_kwDOAC5e2c8AAAABrTgfcQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/3.0","name":"3.0","color":"80E086","default":false,"description":"Issue planned for initial 3.0 release"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/191","html_url":"https://github.com/FasterXML/jackson-databind/milestone/191","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/191/labels","id":13642631,"node_id":"MI_kwDOAC5e2c4A0CuH","number":191,"title":"3.0.0-rc10","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2025-09-09T04:17:35Z","updated_at":"2025-10-30T23:28:18Z","due_on":null,"closed_at":"2025-10-30T23:28:18Z"},"comments":4,"created_at":"2025-09-10T04:40:15Z","updated_at":"2025-09-11T17:39:34Z","closed_at":"2025-09-11T17:39:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Search before asking\n\n- [x] I searched in the [issues](https://github.com/FasterXML/jackson-databind/issues) and found nothing similar.\n\n### Describe the bug\n\nWhen having a DoubleNode with decimal value doing a `ObjectMapper.treeToValue(doubleNode, Integer.class)` in 2.x 2.718 results in `2` but in 3.x the fractional part is checked which fails the conversion to Integer.\n\nThe returned exception for the conversion in 3.x is:\n`tools.jackson.core.exc.InputCoercionException: Numeric value (2.718) out of range of `int` (-2147483648 - 2147483647)`\n\nThis was confusing in that the value is easily inside the range and the issue is actually that the value has a fractional part marking the canConvertToInt as false due to it not being able to convertToExactIntegral.\n\nTo lessen the confusion of this conversion error it would be good if the exception would say clearly that it failed due to the fractional value being present and not because the value is out of range.\n\n### Version Information\n\n3.0.0-rc9\n\n### Reproduction\n\n\n```java\n@Test\npublic void double_to_int_conversion_failure {\n    ObjectMapper mapper = new ObjectMapper();\n\n    JsonNode jsonNode = mapper.valueToTree(2.718);\n\n    mapper.treeToValue(jsonNode, Integer.class);\n}\n``` \n\n\n### Expected behavior\n\nThe exception should highlight the actual reason for the failure.\n\n### Additional context\n\n_No response_","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5309/timeline","performed_via_github_app":null,"state_reason":"completed"}