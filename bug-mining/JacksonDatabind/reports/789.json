{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/3343","id":1073784103,"node_id":"I_kwDOAC5e2c5AAKUn","number":3343,"title":"Allow BeanPropertyWriter Sub-classes to Override `get()` (remove `final`)","user":{"login":"alzimmermsft","id":48699787,"node_id":"MDQ6VXNlcjQ4Njk5Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/48699787?v=4","gravatar_id":"","url":"https://api.github.com/users/alzimmermsft","html_url":"https://github.com/alzimmermsft","followers_url":"https://api.github.com/users/alzimmermsft/followers","following_url":"https://api.github.com/users/alzimmermsft/following{/other_user}","gists_url":"https://api.github.com/users/alzimmermsft/gists{/gist_id}","starred_url":"https://api.github.com/users/alzimmermsft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alzimmermsft/subscriptions","organizations_url":"https://api.github.com/users/alzimmermsft/orgs","repos_url":"https://api.github.com/users/alzimmermsft/repos","events_url":"https://api.github.com/users/alzimmermsft/events{/privacy}","received_events_url":"https://api.github.com/users/alzimmermsft/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7098892157,"node_id":"LA_kwDOAC5e2c8AAAABpyB_fQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/2.19","name":"2.19","color":"1D76DB","default":false,"description":"Issues planned at 2.19 or later"}],"state":"closed","locked":false,"assignee":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/170","html_url":"https://github.com/FasterXML/jackson-databind/milestone/170","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/170/labels","id":11662847,"node_id":"MI_kwDOAC5e2c4AsfX_","number":170,"title":"2.19.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":26,"state":"closed","created_at":"2024-10-02T01:26:15Z","updated_at":"2025-10-30T23:29:09Z","due_on":null,"closed_at":"2025-10-30T23:29:09Z"},"comments":4,"created_at":"2021-12-07T21:52:43Z","updated_at":"2025-04-11T21:17:52Z","closed_at":"2025-04-09T20:22:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nIn `BeanPropertyWriter` the `get` method is final and a few of the serialization methods inline the call to get making it much more difficult to create sub-classes of `BeanPropertyWriter` that attempt to optimize the get operation. An example of this can be seen in the Blackbird module which requires the entire `serializeAsField` method to be overloaded (https://github.com/FasterXML/jackson-modules-base/blob/2.14/blackbird/src/main/java/com/fasterxml/jackson/module/blackbird/ser/ObjectPropertyWriter.java#L45) which then enforces additional constraints that the overload needs to handle complete serialization.\r\n\r\n**Describe the solution you'd like**\r\n\r\nI think it would be useful for sub-classes of `BeanPropertyWriter` to be able to override get functionality and allow `BeanPropertyWriter` to handle serialization based on its configuration (if serialization isn't also overridden). This would allow for further enhancements to the Blackbird module where it could become a simple optimized value getter using `MethodHandle` based reflection and pass the retrieved back to the `BeanPropertyWriter`. Overall, this would enable Blackbird to remove its restrictions on which types it is allowed to handle.\r\n\r\n**Usage example**\r\n\r\n_BeanPropertyWriter.java_\r\n\r\n```java\r\npublic void serializeAsField(Object bean, JsonGenerator gen,\r\n        SerializerProvider prov) throws Exception {\r\n    final Object value = getValue(bean);\r\n\r\n    // Null handling is bit different, check that first\r\n    if (value == null) {\r\n        if (_nullSerializer != null) {\r\n            gen.writeFieldName(_name);\r\n            _nullSerializer.serialize(null, gen, prov);\r\n        }\r\n        return;\r\n    }\r\n    // then find serializer to use\r\n    JsonSerializer<Object> ser = _serializer;\r\n    if (ser == null) {\r\n        Class<?> cls = value.getClass();\r\n        PropertySerializerMap m = _dynamicSerializers;\r\n        ser = m.serializerFor(cls);\r\n        if (ser == null) {\r\n            ser = _findAndAddDynamic(m, cls, prov);\r\n        }\r\n    }\r\n    // and then see if we must suppress certain values (default, empty)\r\n    if (_suppressableValue != null) {\r\n        if (MARKER_FOR_EMPTY == _suppressableValue) {\r\n            if (ser.isEmpty(prov, value)) {\r\n                return;\r\n            }\r\n        } else if (_suppressableValue.equals(value)) {\r\n            return;\r\n        }\r\n    }\r\n    // For non-nulls: simple check for direct cycles\r\n    if (value == bean) {\r\n        // four choices: exception; handled by call; pass-through or write null\r\n        if (_handleSelfReference(bean, gen, prov, ser)) {\r\n            return;\r\n        }\r\n    }\r\n    gen.writeFieldName(_name);\r\n    if (_typeSerializer == null) {\r\n        ser.serialize(value, gen, prov);\r\n    } else {\r\n        ser.serializeWithType(value, gen, prov, _typeSerializer);\r\n    }\r\n}\r\n\r\n// Basically the same as the existing get() as this changes the scope from \"public final\" to \"protected\"\r\nprotected Object getValue(Object bean) throws Exception {\r\n    return get(bean);\r\n}\r\n```\r\n\r\n_Blackbird Optimized Getters_\r\n\r\n```java\r\n@Override\r\nprotected Object getValue(Object bean) throws Exception {\r\n  // Insert optimized MethodHandle/Callsite retrieval here\r\n}\r\n```\r\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3343/timeline","performed_via_github_app":null,"state_reason":"completed"}