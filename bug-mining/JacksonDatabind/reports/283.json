{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1605","id":221964373,"node_id":"MDU6SXNzdWUyMjE5NjQzNzM=","number":1605,"title":"Allow serialization of `InetAddress` as simple numeric host address","user":{"login":"2is10","id":647851,"node_id":"MDQ6VXNlcjY0Nzg1MQ==","avatar_url":"https://avatars.githubusercontent.com/u/647851?v=4","gravatar_id":"","url":"https://api.github.com/users/2is10","html_url":"https://github.com/2is10","followers_url":"https://api.github.com/users/2is10/followers","following_url":"https://api.github.com/users/2is10/following{/other_user}","gists_url":"https://api.github.com/users/2is10/gists{/gist_id}","starred_url":"https://api.github.com/users/2is10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/2is10/subscriptions","organizations_url":"https://api.github.com/users/2is10/orgs","repos_url":"https://api.github.com/users/2is10/repos","events_url":"https://api.github.com/users/2is10/events{/privacy}","received_events_url":"https://api.github.com/users/2is10/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/71","html_url":"https://github.com/FasterXML/jackson-databind/milestone/71","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/71/labels","id":2415455,"node_id":"MDk6TWlsZXN0b25lMjQxNTQ1NQ==","number":71,"title":"2.9.0.pr3","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2017-03-28T03:41:41Z","updated_at":"2021-03-04T04:04:29Z","due_on":null,"closed_at":"2021-03-04T04:04:29Z"},"comments":8,"created_at":"2017-04-15T18:22:55Z","updated_at":"2017-04-25T23:25:30Z","closed_at":"2017-04-25T05:25:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"An `InetAddress` is defined this way in [its Javadoc](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html):\r\n\r\n> This class represents an Internet Protocol (IP) address.\r\n> An instance ... consists of an IP address and possibly its corresponding host name.\r\n\r\nThe IP address is central. The hostname is optional, peripheral.\r\n\r\nHowever, Jackson’s [InetAddressSerializer](https://github.com/FasterXML/jackson-databind/blob/2.8/src/main/java/com/fasterxml/jackson/databind/ser/std/InetAddressSerializer.java#L23-L32) just uses the hostname, if present, and discards the IP address. This is critical information loss. A hostname isn’t guaranteed to be resolvable to the same IP address (or at all) where/when deserialized.\r\n\r\nA corresponding issue with [the deserializer](https://github.com/FasterXML/jackson-databind/blob/2.8/src/main/java/com/fasterxml/jackson/databind/deser/std/FromStringDeserializer.java#L254) is that hostname resolution (network access) is attempted for any input string that isn’t a valid IP address. This violates the Principle of Least Astonishment.\r\n\r\nThese seem like important issues to fix, but I’m not sure how to do it in a backwards-compatible way. The JDK’s `InetAddress` is partly to blame, the minefield that it is.\r\n\r\nI suggest taking inspiration from Guava’s [InetAddresses](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/net/InetAddresses.html) and doing some of your own parsing.\r\n\r\nYou’ll need to decide whether to serialize to just the IP address or to try to also preserve the hostname, if present. For what it’s worth, my team’s present use cases only care about the IP address. However, any information loss could be surprising to people who use this library.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1605/timeline","performed_via_github_app":null,"state_reason":"completed"}