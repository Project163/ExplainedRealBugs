{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1001","id":116480743,"node_id":"MDU6SXNzdWUxMTY0ODA3NDM=","number":1001,"title":"Parameter names module gets confused with delegate creator which is a static method","user":{"login":"david-bakin","id":4162948,"node_id":"MDQ6VXNlcjQxNjI5NDg=","avatar_url":"https://avatars.githubusercontent.com/u/4162948?v=4","gravatar_id":"","url":"https://api.github.com/users/david-bakin","html_url":"https://github.com/david-bakin","followers_url":"https://api.github.com/users/david-bakin/followers","following_url":"https://api.github.com/users/david-bakin/following{/other_user}","gists_url":"https://api.github.com/users/david-bakin/gists{/gist_id}","starred_url":"https://api.github.com/users/david-bakin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/david-bakin/subscriptions","organizations_url":"https://api.github.com/users/david-bakin/orgs","repos_url":"https://api.github.com/users/david-bakin/repos","events_url":"https://api.github.com/users/david-bakin/events{/privacy}","received_events_url":"https://api.github.com/users/david-bakin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/64","html_url":"https://github.com/FasterXML/jackson-databind/milestone/64","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/64/labels","id":2027761,"node_id":"MDk6TWlsZXN0b25lMjAyNzc2MQ==","number":64,"title":"2.8.4","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.8.4","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":9,"state":"closed","created_at":"2016-09-26T06:09:27Z","updated_at":"2021-03-04T04:36:37Z","due_on":"2016-10-14T07:00:00Z","closed_at":"2021-03-04T04:36:37Z"},"comments":5,"created_at":"2015-11-12T05:07:16Z","updated_at":"2016-10-05T00:23:48Z","closed_at":"2016-10-05T00:23:48Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Java 8, with -parameters, Jackson 2.6.3, and using the parameter names module:  A deserialization into a pojo that has a single parameter @JsonCreator static method fails because it is apparently looking for a creator property instead of treating it like a delegate creator.\n\nIn this example there is no property with the implied name.  As a gist, see [here](https://gist.github.com/david-bakin/9feb4fdb07c0abc94276), which actually has two problems in it.  This is the problem with class D:\n\n``` java\npackage com.bakin_bits;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport java.io.IOException;\n\nimport org.apache.commons.lang3.builder.EqualsBuilder;\nimport org.apache.commons.lang3.builder.HashCodeBuilder;\nimport org.testng.annotations.Test;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonValue;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\n\npublic class TestJacksonModuleParameterNames\n{\n\n    public static class D\n    {\n        private final String raw1;\n        private final String raw2;\n\n        private D(String raw1, String raw2) {\n            this.raw1 = raw1;\n            this.raw2 = raw2;\n        }\n\n        @JsonCreator\n        public static D make(String value) {\n            String[] split = value.split(\":\");\n            return new D(split[0], split[1]);\n        }\n\n        @JsonValue\n        public String getMyValue() {\n            return raw1 + \":\" + raw2;\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (null == obj)\n                return false;\n            if (this == obj)\n                return true;\n            if (this.getClass() != obj.getClass())\n                return false;\n\n            D rhs = (D) obj;\n            return new EqualsBuilder().append(this.raw1, rhs.raw1).append(this.raw2, rhs.raw2).isEquals();\n        }\n\n        @Override\n        public int hashCode() {\n            return new HashCodeBuilder().append(this.raw1).append(this.raw2).toHashCode();\n        }\n\n        @Override\n        public String toString() {\n            return getMyValue();\n        }\n    }\n\n    @Test(enabled = true)\n    public void D_delegate_based_creator_without_parameter_names_module() throws IOException {\n        // ARRANGE\n        ObjectMapper sut = new ObjectMapper();\n\n        D d = D.make(\"abc:def\");\n\n        // ACT\n        String actualJson = sut.writeValueAsString(d);\n        D actualD = sut.readValue(actualJson, D.class);\n\n        // ASSERT\n        assertThat(actualJson).isEqualTo(\"\\\"abc:def\\\"\");\n        assertThat(actualD).isEqualTo(d);\n    }\n\n    @Test(enabled = true)\n    public void D_delegate_based_creator_with_parameter_names_module() throws IOException {\n        // ARRANGE\n        ObjectMapper sut = new ObjectMapper();\n        sut.registerModule(new ParameterNamesModule());\n\n        D d = D.make(\"abc:def\");\n\n        // ACT\n        String actualJson = sut.writeValueAsString(d);\n        D actualD = sut.readValue(actualJson, D.class);\n\n        // ASSERT\n        assertThat(actualJson).isEqualTo(\"\\\"abc:def\\\"\");\n        assertThat(actualD).isEqualTo(d);\n    }\n}\n```\n\nStack trace looks like this:\n\n``````\nFAILED: D_delegate_based_creator_with_parameter_names_module\ncom.fasterxml.jackson.databind.JsonMappingException: Could not find creator property with name 'value' (in class com.bakins_bits.TestJacksonModuleParameterNames$D)\n at [Source: \"abc:def\"; line: 1, column: 1]\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)\n    at com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:878)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:542)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:229)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:142)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer2(DeserializerCache.java:403)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer(DeserializerCache.java:352)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:264)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCacheValueDeserializer(DeserializerCache.java:244)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache.findValueDeserializer(DeserializerCache.java:142)\n    at com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:461)\n    at com.fasterxml.jackson.databind.ObjectMapper._findRootDeserializer(ObjectMapper.java:3838)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3732)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2726)\n    at com.bakins_bits.TestJacksonModuleParameterNames.D_delegate_based_creator_with_parameter_names_module(TestJacksonModuleParameterNames.java:163)```\n``````\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1001/timeline","performed_via_github_app":null,"state_reason":"completed"}