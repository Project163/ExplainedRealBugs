{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/4603","id":2377985541,"node_id":"I_kwDOAC5e2c6NvS4F","number":4603,"title":"Keep full stacktrace when re-throwing exception with `DatabindException` during deserialization","user":{"login":"pn-santos","id":23340138,"node_id":"MDQ6VXNlcjIzMzQwMTM4","avatar_url":"https://avatars.githubusercontent.com/u/23340138?v=4","gravatar_id":"","url":"https://api.github.com/users/pn-santos","html_url":"https://github.com/pn-santos","followers_url":"https://api.github.com/users/pn-santos/followers","following_url":"https://api.github.com/users/pn-santos/following{/other_user}","gists_url":"https://api.github.com/users/pn-santos/gists{/gist_id}","starred_url":"https://api.github.com/users/pn-santos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pn-santos/subscriptions","organizations_url":"https://api.github.com/users/pn-santos/orgs","repos_url":"https://api.github.com/users/pn-santos/repos","events_url":"https://api.github.com/users/pn-santos/events{/privacy}","received_events_url":"https://api.github.com/users/pn-santos/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7201103729,"node_id":"LA_kwDOAC5e2c8AAAABrTgfcQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/3.0","name":"3.0","color":"80E086","default":false,"description":"Issue planned for initial 3.0 release"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/175","html_url":"https://github.com/FasterXML/jackson-databind/milestone/175","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/175/labels","id":12639494,"node_id":"MI_kwDOAC5e2c4AwN0G","number":175,"title":"3.0.0-rc3","description":null,"creator":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2025-03-30T09:17:30Z","updated_at":"2025-10-30T23:28:57Z","due_on":null,"closed_at":"2025-10-30T23:28:57Z"},"comments":8,"created_at":"2024-06-27T12:09:51Z","updated_at":"2025-04-24T04:10:05Z","closed_at":"2025-04-24T04:10:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Is your feature request related to a problem? Please describe.\n\nI have code that re-throws an exception wrapped in a custom exception during de-serialization via builder setters, e.g.\r\n```java\r\n@JsonProperty\r\nBuilder property(String value) {\r\n    try {\r\n        (...)\r\n    } catch (Exception ex) {\r\n        throw MyCustomException(..., ex);\r\n    }\r\n```\r\n\r\nWhen that happens Jackson will unconditionally wrap the root cause with a `JsonMappingException` in:\r\n```java\r\nprotected IOException _throwAsIOE(JsonParser p, Exception e) throws IOException\r\n{\r\n    ClassUtil.throwIfIOE(e);\r\n    ClassUtil.throwIfRTE(e);\r\n    // let's wrap the innermost problem\r\n    Throwable th = ClassUtil.getRootCause(e);\r\n    throw JsonMappingException.from(p, ClassUtil.exceptionMessage(th), th);\r\n}\r\n```\r\n\r\nThe custom exception is thus \"lost\" from the upstream perspective (i.e. code that triggered de-serialization).\r\n\r\nThis makes it impossible to propagate the custom exception _with_ a cause upstream (it _can_ be propagated but it cannot have a cause set).\n\n### Describe the solution you'd like\n\nBe able to control whether Jackson will wrap the root cause or the outer most exception via object mapper config.\n\n### Usage example\n\n_No response_\n\n### Additional context\n\nIn my particular use case, the idea is that if an exception is thrown by the application, if the custom exception is found in the causal chain, the handling of the exception is different than if it's not. But it's still useful to have the complete stacktrace for logging/debugging purposes.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4603/timeline","performed_via_github_app":null,"state_reason":"completed"}