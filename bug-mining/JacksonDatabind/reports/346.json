{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1673","id":237926023,"node_id":"MDU6SXNzdWUyMzc5MjYwMjM=","number":1673,"title":"Serialising generic value classes via Reference Types (like Optional) fails to include type information","user":{"login":"pwhissell","id":2479197,"node_id":"MDQ6VXNlcjI0NzkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/2479197?v=4","gravatar_id":"","url":"https://api.github.com/users/pwhissell","html_url":"https://github.com/pwhissell","followers_url":"https://api.github.com/users/pwhissell/followers","following_url":"https://api.github.com/users/pwhissell/following{/other_user}","gists_url":"https://api.github.com/users/pwhissell/gists{/gist_id}","starred_url":"https://api.github.com/users/pwhissell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pwhissell/subscriptions","organizations_url":"https://api.github.com/users/pwhissell/orgs","repos_url":"https://api.github.com/users/pwhissell/repos","events_url":"https://api.github.com/users/pwhissell/events{/privacy}","received_events_url":"https://api.github.com/users/pwhissell/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/89","html_url":"https://github.com/FasterXML/jackson-databind/milestone/89","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/89/labels","id":2985209,"node_id":"MDk6TWlsZXN0b25lMjk4NTIwOQ==","number":89,"title":"2.9.4","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9.4\r\n","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2017-12-18T07:10:53Z","updated_at":"2021-03-04T04:47:51Z","due_on":"2018-01-24T08:00:00Z","closed_at":"2021-03-04T04:47:51Z"},"comments":20,"created_at":"2017-06-22T17:59:57Z","updated_at":"2018-01-16T20:00:52Z","closed_at":"2018-01-15T21:22:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"After going through a couple issues, I came to understand that Jackson always uses declared type of value to figure out whether to include type information. This is done to ensure that type settings are identical between serialization and deserialization.\r\n\r\nHowever isn't that statement false for templated class?. This robustness would be better ensured if the type id settings would be bound to declared types for all untemplated classes but were bound to both declaration and component classes for templated classes. This would imply obtaining the type information at runtime, thus serialisation/deserialisation of templated classes would be a little bit less efficient but that drawback would be negligeable at least in my case.\r\n\r\nThis would allow for serialisation/deserialisation of Templated classes who's component class are abstract ex. List<AbstractItem>\r\n\r\n```\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.PROPERTY, property = \"type\")\r\n@JsonSubTypes({\r\n\t@JsonSubTypes.Type(name = \"ItemADto\", value = ItemADto.class)\r\n\t@JsonSubTypes.Type(name = \"ItemBDto\", value = ItemBDto.class)\r\n})\r\npublic abstract class AbstractItemDto {...}\r\n\r\n@JsonTypeName(\"ItemADto\")\r\npublic class ItemADto {...}\r\n\r\n@JsonTypeName(\"ItemBDto\")\r\npublic class ItemBDto {...}\r\n```","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1673/timeline","performed_via_github_app":null,"state_reason":"completed"}