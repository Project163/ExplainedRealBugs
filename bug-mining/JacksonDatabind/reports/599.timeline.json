[{"id":4760629370,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ3NjA2MjkzNzA=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4760629370","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-18T13:18:06Z","label":{"name":"to-evaluate","color":"fbca04"},"performed_via_github_app":null},{"id":4766838461,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ3NjY4Mzg0NjE=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4766838461","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"391c91a9ce1a2d260e5ae26786b63bca285a8bf9","commit_url":"https://api.github.com/repos/aritzbastida/jackson-databind/commits/391c91a9ce1a2d260e5ae26786b63bca285a8bf9","created_at":"2021-05-19T13:41:54Z","performed_via_github_app":null},{"id":4802424046,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MDI0MjQwNDY=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4802424046","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-26T23:28:24Z","label":{"name":"2.13","color":"c2e0c6"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/849186823","html_url":"https://github.com/FasterXML/jackson-databind/issues/3160#issuecomment-849186823","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3160","id":849186823,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTE4NjgyMw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T23:30:20Z","updated_at":"2021-05-26T23:30:20Z","body":"Quick question: is this during serialization (writing)?\r\n\r\nI think I'd need a minimal reproduction: I trust there is an issue, but fixing it requires careful verification as testing of current value stability is bit limited.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/849186823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4802429834,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MDI0Mjk4MzQ=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4802429834","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-26T23:30:31Z","label":{"name":"need-test-case","color":"f9d0c4"},"performed_via_github_app":null},{"id":4802430081,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDgwMjQzMDA4MQ==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4802430081","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-05-26T23:30:36Z","label":{"name":"to-evaluate","color":"fbca04"},"performed_via_github_app":null},{"id":4803901974,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MDM5MDE5NzQ=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4803901974","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"87bd61a7627a85d8b78a89006c815fa31ebbb84e","commit_url":"https://api.github.com/repos/aritzbastida/jackson-databind/commits/87bd61a7627a85d8b78a89006c815fa31ebbb84e","created_at":"2021-05-27T07:36:24Z","performed_via_github_app":null},{"id":4803978764,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MDM5Nzg3NjQ=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4803978764","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a65f1047b5b29b35c0ed2cea67fcdbb39be0f8c8","commit_url":"https://api.github.com/repos/aritzbastida/jackson-databind/commits/a65f1047b5b29b35c0ed2cea67fcdbb39be0f8c8","created_at":"2021-05-27T07:49:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/849439991","html_url":"https://github.com/FasterXML/jackson-databind/issues/3160#issuecomment-849439991","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3160","id":849439991,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTQzOTk5MQ==","user":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-27T08:22:35Z","updated_at":"2021-05-27T08:22:35Z","body":"Thanks for answering!! \r\n\r\nYes, it happens during serialization. In fact, the issue is caused by the change made in `serializeWithType()` (#631). I didn't check whether there is a similar problem during deserialization, though.\r\n\r\nAs for the test case, I extended `testIssue2475` (see below) so that it breaks with the error:  `java.lang.Error: Field 'set', context not that of Item2475 instance`. Once strategy `attribute `is processed, the next attribute (`set`) does no longer refer to the `Item2475 `class. Note that, if we remove @JsonTypeInfo annotation from Strategy, the filter works just OK.\r\n\r\nTo fix this test, we can revert the changes in #631; that is, remove the statement `gen.setCurrentValue(bean);` in `serializeWithType()` method. As a result, we would have a consistent behavior for filters, not depending on @JsonTypeInfo any more. I checked that the whole jackson-databind test suite passes without errors. Note, however, this will break (external) custom serializers which demanded this specific behavior for polymorphic types.\r\n\r\n```java\r\npackage com.fasterxml.jackson.databind.ser;\r\n\r\npublic class TestCustomSerializers extends BaseMapTest\r\n{\r\n\r\n    @JsonFilter(\"myFilter\")\r\n    @JsonPropertyOrder({ \"id\", \"strategy\", \"set\" })\r\n    public static class Item2475 {\r\n    \t\r\n        private Collection<String> set;\r\n        private Strategy strategy;\r\n\t\tprivate String id;\r\n\r\n        public Item2475(Collection<String> set, String id) {\r\n            this.set = set;\r\n            this.strategy = new Foo(42);\r\n            this.id = id;\r\n        }\r\n\r\n        public Collection<String> getSet() {\r\n            return set;\r\n        }\r\n        \r\n        public Strategy getStrategy() {\r\n\t\t\treturn strategy;\r\n\t\t}        \r\n\r\n        public String getId() {\r\n            return id;\r\n        }\r\n    }\r\n      \r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")    \r\n    @JsonSubTypes({ @JsonSubTypes.Type(name = \"Foo\", value = Foo.class) })\r\n    interface Strategy { }\r\n\r\n    static class Foo implements Strategy {\r\n        public int foo;\r\n\r\n        @JsonCreator\r\n        Foo(@JsonProperty(\"foo\") int foo) {\r\n            this.foo = foo;\r\n        }\r\n    }     \r\n\r\n    // [databind#2475]\r\n    public void testIssue2475() throws Exception {\r\n        SimpleFilterProvider provider = new SimpleFilterProvider().addFilter(\"myFilter\", new MyFilter2475());\r\n        ObjectWriter writer = MAPPER.writer(provider);\r\n        \r\n        // contents don't really matter that much as verification within filter but... let's\r\n        // check anyway\r\n        assertEquals(aposToQuotes(\"{'id':'ID-1','strategy':{'type':'Foo','foo':42},'set':[]}\"),\r\n        \t\twriter.writeValueAsString(new Item2475(new ArrayList<String>(), \"ID-1\")));\r\n\r\n        assertEquals(aposToQuotes(\"{'id':'ID-2','strategy':{'type':'Foo','foo':42},'set':[]}\"),\r\n        \t\twriter.writeValueAsString(new Item2475(new HashSet<String>(), \"ID-2\")));\r\n        \r\n    }    \r\n}\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/849439991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4809621004,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDgwOTYyMTAwNA==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4809621004","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-05-28T04:00:50Z","label":{"name":"need-test-case","color":"f9d0c4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/850101613","html_url":"https://github.com/FasterXML/jackson-databind/issues/3160#issuecomment-850101613","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3160","id":850101613,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MDEwMTYxMw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-28T04:08:13Z","updated_at":"2021-05-28T04:08:13Z","body":"Thank you for adding a test case! I'll probably try to trim it down further.\r\n\r\nAs to specific place(s), I'll have to look; but `serializeWithType()` is defined in rather a lot of places.\r\nIn case of, say, `BeanSerializerBase`, I am guessing that just moving setting (which is needed in general, it cannot be just removed) after call to `writeTypePrefix()` might work.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/850101613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/850202973","html_url":"https://github.com/FasterXML/jackson-databind/issues/3160#issuecomment-850202973","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3160","id":850202973,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MDIwMjk3Mw==","user":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-28T07:13:44Z","updated_at":"2021-05-28T07:13:44Z","body":"Exactly, I referred to `BeanSerializerBase`, specifically the lines added as a result of _[databind#631]_.\r\n\r\n```java\r\n    @Override\r\n    public void serializeWithType(Object bean, JsonGenerator gen, SerializerProvider provider, \r\n       TypeSerializer typeSer) throws IOException {\r\n\r\n        if (_objectIdWriter != null) {\r\n            gen.setCurrentValue(bean); // [databind#631]\r\n            _serializeWithObjectId(bean, gen, provider, typeSer);\r\n            return;\r\n        }\r\n        gen.setCurrentValue(bean); // [databind#631]\r\n        ...\r\n    }\r\n```\r\nI look forward to your analysis. Thanks!\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/850202973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aritzbastida","id":2572295,"node_id":"MDQ6VXNlcjI1NzIyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2572295?v=4","gravatar_id":"","url":"https://api.github.com/users/aritzbastida","html_url":"https://github.com/aritzbastida","followers_url":"https://api.github.com/users/aritzbastida/followers","following_url":"https://api.github.com/users/aritzbastida/following{/other_user}","gists_url":"https://api.github.com/users/aritzbastida/gists{/gist_id}","starred_url":"https://api.github.com/users/aritzbastida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aritzbastida/subscriptions","organizations_url":"https://api.github.com/users/aritzbastida/orgs","repos_url":"https://api.github.com/users/aritzbastida/repos","events_url":"https://api.github.com/users/aritzbastida/events{/privacy}","received_events_url":"https://api.github.com/users/aritzbastida/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4997757240,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ5OTc3NTcyNDA=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4997757240","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-07-09T00:36:51Z","milestone":{"title":"2.13.0"},"performed_via_github_app":null},{"id":4997761950,"node_id":"MDExOkNsb3NlZEV2ZW50NDk5Nzc2MTk1MA==","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/4997761950","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b4af86d863376b524d6805d75736623b90f9eec0","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/b4af86d863376b524d6805d75736623b90f9eec0","created_at":"2021-07-09T00:39:03Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/876832063","html_url":"https://github.com/FasterXML/jackson-databind/issues/3160#issuecomment-876832063","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3160","id":876832063,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NjgzMjA2Mw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-09T00:43:25Z","updated_at":"2021-07-09T00:43:25Z","body":"Finally found time to check this and yes, ordering of that call is incorrect -- it needs to occur after START_OBJECT gets called, as that is the context in which current value should be updated. Test verifies this.\r\nWill be included in 2.13.0-rc1.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/876832063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14794525735,"node_id":"REFE_lADOAC5e2c41Twt2zwAAAANx0own","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/14794525735","actor":{"login":"ggrebert","id":1737774,"node_id":"MDQ6VXNlcjE3Mzc3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1737774?v=4","gravatar_id":"","url":"https://api.github.com/users/ggrebert","html_url":"https://github.com/ggrebert","followers_url":"https://api.github.com/users/ggrebert/followers","following_url":"https://api.github.com/users/ggrebert/following{/other_user}","gists_url":"https://api.github.com/users/ggrebert/gists{/gist_id}","starred_url":"https://api.github.com/users/ggrebert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ggrebert/subscriptions","organizations_url":"https://api.github.com/users/ggrebert/orgs","repos_url":"https://api.github.com/users/ggrebert/repos","events_url":"https://api.github.com/users/ggrebert/events{/privacy}","received_events_url":"https://api.github.com/users/ggrebert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b4af86d863376b524d6805d75736623b90f9eec0","commit_url":"https://api.github.com/repos/ggrebert/jackson-databind/commits/b4af86d863376b524d6805d75736623b90f9eec0","created_at":"2024-10-22T23:36:51Z","performed_via_github_app":null}]