{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/2398","id":475970069,"node_id":"MDU6SXNzdWU0NzU5NzAwNjk=","number":2398,"title":"Replace recursion in `TokenBuffer.copyCurrentStructure()` with iteration","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/99","html_url":"https://github.com/FasterXML/jackson-databind/milestone/99","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/99/labels","id":4517307,"node_id":"MDk6TWlsZXN0b25lNDUxNzMwNw==","number":99,"title":"2.10.0.pr2","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2019-07-24T02:39:48Z","updated_at":"2021-03-04T04:02:16Z","due_on":null,"closed_at":"2021-03-04T04:02:16Z"},"comments":0,"created_at":"2019-08-02T02:42:43Z","updated_at":"2019-08-25T01:06:08Z","closed_at":"2019-08-25T01:06:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Implementation of method `copyCurrentStructure` in `TokenBuffer` is reasonable for most content, but possibly problematic for deeply nested structures, and especially for intentionally crafted content for possible DoS.\r\n\r\nIt would be good to address this concern either by converting current recursion-based implementation with iteration and simple stack (since amount of state is trivial relative to stack frames needed for method calls), or by adding suitable nesting limit.\r\n\r\nNote that one possible concern for max-depth approach is that value to needs to be relatively high to cover legit use cases; and although it'd be possible to expose max value as configuration it would not be a good fit for any existing limits.\r\nAnd in fact it would be better to address such limits as part of more general input-content complexity limitation (similar to how Woodstox/Stax has a nice set of maximum limits for lengths of various things, attribute counts, nesting); so for just this purpose it is probably better to try to avoid needing such limits.\r\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/2398/timeline","performed_via_github_app":null,"state_reason":"completed"}