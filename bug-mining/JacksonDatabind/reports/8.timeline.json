[{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18089508","html_url":"https://github.com/FasterXML/jackson-databind/issues/223#issuecomment-18089508","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/223","id":18089508,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDg5NTA4","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-17T22:36:36Z","updated_at":"2013-05-17T22:36:36Z","body":"Good catch. Thank you for doing the detective work -- this does indeed sound like the root cause.\nWill fix it for 2.2.2.\n\nI am also very interested in getting more feedback for serialize-as-array: it is relatively new feature, and not as well tested as more mature ones are (although I thought there was a test for checking this part... apparently not a good test).\nBut I think there is potential benefits for size reduction, performance improvements.\nI mean, when it works fully\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18089508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":49314141,"node_id":"MDExOkNsb3NlZEV2ZW50NDkzMTQxNDE=","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/49314141","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"88f44d87d4c2251d7cf55d9aa9c3452a397ae19b","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/88f44d87d4c2251d7cf55d9aa9c3452a397ae19b","created_at":"2013-05-18T03:05:35Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18096786","html_url":"https://github.com/FasterXML/jackson-databind/issues/223#issuecomment-18096786","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/223","id":18096786,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDk2Nzg2","user":{"login":"lukegh","id":4459159,"node_id":"MDQ6VXNlcjQ0NTkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/4459159?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegh","html_url":"https://github.com/lukegh","followers_url":"https://api.github.com/users/lukegh/followers","following_url":"https://api.github.com/users/lukegh/following{/other_user}","gists_url":"https://api.github.com/users/lukegh/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegh/subscriptions","organizations_url":"https://api.github.com/users/lukegh/orgs","repos_url":"https://api.github.com/users/lukegh/repos","events_url":"https://api.github.com/users/lukegh/events{/privacy}","received_events_url":"https://api.github.com/users/lukegh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-18T07:50:55Z","updated_at":"2013-05-18T07:50:55Z","body":"Thank you for the very quick reply and fix. I'll be watching http://wiki.fasterxml.com/JacksonRelease222 for the release date.\n\nYes, the serialize-as-array feature is <b>very</b> useful for reducing size when dealing with hundreds or thousands of records of data. And having the serialization \"as array\" done in Jackson (e.g. in conjunction with @ResponseBody in Spring MVC) allows the M(odel) part on the server side to be clear and easy to maintain (no need to resort to actual array of arrays with generic values, just keep a hierarchy of objects with typed properties).\n\nActually, I'll use the opportunity :smile: to request an improvement for the serialize-as-array feature. The way we are using this feature is in conjunction with a \"meta-data\" array holding the names of the columns in the \"data\" array. Like:\n\n``` json\n\"array\": {\n    \"cols\": [\"i\", \"mayBeNull\"],\n    \"data\": [[1, \"one\"], [0, null]]\n}\n```\n\nThis allows the JSON response to be self-contained, and the client side code to be more robust.\nCurrently, to ensure consistency in the generated JSON output, we would use @JsonPropertyOrder on the InnerTest class, in conjunction with just a hard-coded matching \"cols\" array. \n\nSo from this standpoint ideally the serialize-as-array feature would incorporate the meta-data array, allowing to specify it in the @JsonFormat(shape = JsonFormat.Shape.ARRAY) annotation perhaps as an optional meta-data array name. Well actually there would be two additional optional properties for shape = ARRAY, one for the meta-data array, and one for the data array... Like:\n\n``` java\n@JsonFormat(shape = JsonFormat.Shape.ARRAY, metaDataArray = \"cols\", dataArray = \"data\")\npublic ArrayList<TestInner> array;\n```\n\nwhich would generate the JSON:\n\n``` json\n\"array\": {\n    \"cols\": [\"i\", \"mayBeNull\"],\n    \"data\": [[1, \"one\"], [0, null]]\n}\n```\n\nThanks for listening and thanks again for the quick fix! Looking forward to release 2.2.2.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18096786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukegh","id":4459159,"node_id":"MDQ6VXNlcjQ0NTkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/4459159?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegh","html_url":"https://github.com/lukegh","followers_url":"https://api.github.com/users/lukegh/followers","following_url":"https://api.github.com/users/lukegh/following{/other_user}","gists_url":"https://api.github.com/users/lukegh/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegh/subscriptions","organizations_url":"https://api.github.com/users/lukegh/orgs","repos_url":"https://api.github.com/users/lukegh/repos","events_url":"https://api.github.com/users/lukegh/events{/privacy}","received_events_url":"https://api.github.com/users/lukegh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18104137","html_url":"https://github.com/FasterXML/jackson-databind/issues/223#issuecomment-18104137","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/223","id":18104137,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTA0MTM3","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-18T16:42:15Z","updated_at":"2013-05-18T16:42:15Z","body":"You are welcome wrt fix. Glad to know feature has proven useful so far.\n\nColumn names as metadata is something people have been doing for a while anyway.\nSupporting that would require quite a bit of work; little bit for annotation (since JsonFormat is a generic annotation,\nthis would need more thought since it should not be something only applicable to POJO/array case, but bit more abstraction),  but mostly with serializers/deserializers.\nAnd since it would need to coordinate handling of all kinds of JSON list structures (arrays, Collections) with POJOs, it'd be a big undertaking; Jackson is designed to maximized modularity and (de)serializers only interact via small set of interfaces (wrt. including type & identity information and such cross-cutting concerns).\nBut then again, it's easier to see simplifications when actually working on implementing something.\n\nCould you file this as a separate request however? This way I can mark particular bug as fixed, and new entry would track this improvement idea.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18104137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18160629","html_url":"https://github.com/FasterXML/jackson-databind/issues/223#issuecomment-18160629","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/223","id":18160629,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTYwNjI5","user":{"login":"lukegh","id":4459159,"node_id":"MDQ6VXNlcjQ0NTkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/4459159?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegh","html_url":"https://github.com/lukegh","followers_url":"https://api.github.com/users/lukegh/followers","following_url":"https://api.github.com/users/lukegh/following{/other_user}","gists_url":"https://api.github.com/users/lukegh/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegh/subscriptions","organizations_url":"https://api.github.com/users/lukegh/orgs","repos_url":"https://api.github.com/users/lukegh/repos","events_url":"https://api.github.com/users/lukegh/events{/privacy}","received_events_url":"https://api.github.com/users/lukegh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-05-20T17:32:49Z","updated_at":"2013-05-20T17:32:49Z","body":"Thanks for the reply. I suspected it would not be trivial to support such an enhancement (I suspect in fact that starting to actually work on implementing something like this would uncover more complications, rather than simplifications :smile:). Also, this extended serialization format is easily obtainable using existing functionality, so it would really just be a \"nice-to-have\".\n\nI filed this enhancement request separately as item https://github.com/FasterXML/jackson-databind/issues/229\nThanks!\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/18160629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukegh","id":4459159,"node_id":"MDQ6VXNlcjQ0NTkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/4459159?v=4","gravatar_id":"","url":"https://api.github.com/users/lukegh","html_url":"https://github.com/lukegh","followers_url":"https://api.github.com/users/lukegh/followers","following_url":"https://api.github.com/users/lukegh/following{/other_user}","gists_url":"https://api.github.com/users/lukegh/gists{/gist_id}","starred_url":"https://api.github.com/users/lukegh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukegh/subscriptions","organizations_url":"https://api.github.com/users/lukegh/orgs","repos_url":"https://api.github.com/users/lukegh/repos","events_url":"https://api.github.com/users/lukegh/events{/privacy}","received_events_url":"https://api.github.com/users/lukegh/received_events","type":"User","user_view_type":"public","site_admin":false}}]