[{"id":9146513625,"node_id":"LE_lADOAC5e2c5k4kKuzwAAAAIhLLjZ","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9146513625","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-02T14:36:23Z","label":{"name":"to-evaluate","color":"fbca04"},"performed_via_github_app":null},{"actor":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T15:05:58Z","updated_at":"2023-05-02T15:05:58Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907/events","html_url":"https://github.com/FasterXML/jackson-databind/pull/3907","id":1692600292,"node_id":"PR_kwDOAC5e2c5PmJlw","number":3907,"title":"add tests for null handling","user":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-02T15:05:37Z","updated_at":"2023-05-03T22:52:21Z","closed_at":"2023-05-03T22:52:21Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls/3907","html_url":"https://github.com/FasterXML/jackson-databind/pull/3907","diff_url":"https://github.com/FasterXML/jackson-databind/pull/3907.diff","patch_url":"https://github.com/FasterXML/jackson-databind/pull/3907.patch","merged_at":"2023-05-03T22:52:21Z"},"body":"There doesn't seem to be coverage for null handling in deserializing of records with default mappers.\r\n\r\nRelates to #3906 ","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3907/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531649486","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1531649486","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1531649486,"node_id":"IC_kwDOAC5e2c5bSx3O","user":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T15:09:24Z","updated_at":"2023-05-02T15:09:24Z","body":"Seems to work if you don't change the mapper visibility setting - see #3907. Would it be possible for you to not set this value?\r\n\r\nThis issue will still be investigated. I'm just making the suggestion above as a workaround. I'm no expert on the benefits of setting the visibility to non-default values.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531649486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531691704","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1531691704","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1531691704,"node_id":"IC_kwDOAC5e2c5bS8K4","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T15:37:21Z","updated_at":"2023-05-02T17:23:33Z","body":"## Fix/workaround\r\nAllow visibility for `PropertyAccessor.CREATOR`:\r\n```\r\nmapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\nmapper.setVisibility(PropertyAccessor.CREATOR, Visibility.ANY);\r\n```\r\n\r\n## Explanation\r\nPreviously, Records deserialization is specially handled, resulting in some behavioural differences (mostly missing behaviours) compared to POJO deserialization.\r\n\r\n#3724 was done to address those differences, to close the gap between Records vs POJO de/serialization:\r\n1. This means now, Jackson looks for deserialization \"creators\" for Records the same way it looks for POJO's.\r\n2. `setVisibility(PropertyAccessor.ALL, Visibility.NONE)` \"hides\" those \"creators\", because `PropertyAccessor.ALL` includes `PropertyAccessor.CREATOR`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531691704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531696030","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1531696030","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1531696030,"node_id":"IC_kwDOAC5e2c5bS9Oe","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T15:40:18Z","updated_at":"2023-05-02T15:40:18Z","body":"(Interesting to see the different config used to utilise Jackson as only a deserializer not serializer: here & #3897 ü§î.)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1531696030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532159726","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532159726","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532159726,"node_id":"IC_kwDOAC5e2c5bUubu","user":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T21:13:19Z","updated_at":"2023-05-02T21:35:49Z","body":"Thanks.\r\n\r\nThis is used both for serialization and deserialization. It was the deserialization that failed - here the \"assert that this will actually work with an empty {} object\" boot-up verification - and it only failed with records.\r\n\r\nI need this config to work both for 2.14.2 and 2.15. Will that new suggested configuration do that just the same? That is: I want ONLY fields evaluated, with any visibility, for both classes and records. No methods whatsoever. These are DTOs, if people slap methods on it, I don't care: I want the _data_ transferred. I guess I found that config somewhere sometime, and it have done exactly what I wanted for at least 6 years (used to be just classes, and then it also worked just as expected with records. Nice.)\r\n\r\n(PS: I cannot really \"test if it works\" with an alternate config, as this is a \"foundation lib\", there are at least 50 different random services that depend on this just working as it always has. I just wanted to upgrade to keep with the times! :-) That bit pretty hard, both this, and the 5M char limit for String: https://github.com/FasterXML/jackson-core/issues/863#issuecomment-1531090338 )\r\n\r\n(PPS: The bullet 2 where _\"setVisibility(PropertyAccessor.ALL, Visibility.NONE) \"hides\" those \"creators\", because PropertyAccessor.ALL includes PropertyAccessor.CREATOR\"_ on the face of it sounds like a clear bug to me. For a record, there is no other proper way to get this thing made, so they should probably not be included? At least not the canonical constructor?)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532159726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532194326","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532194326","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532194326,"node_id":"IC_kwDOAC5e2c5bU24W","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T21:44:04Z","updated_at":"2023-05-02T21:44:04Z","body":"One thing worth noting: Records are technically very different from POJOs/Beans, so there are challenges from Jackson implementation side. Especially regarding access to Record Fields; something that will start failing on newer JDKs. It is not certain handling can be fully unified.\r\n\r\nI agree that it is important to be able to have value types, handling that works for both 2.14 and 2.15. But we really did not realize that there was Record usage that relied on explicit Visibility settings -- there's no testing so one can view at as unsupported use case, technically.\r\nAssumption rather was that usage wrt Records would use default visibility settings.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532194326/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532198124","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532198124","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532198124,"node_id":"IC_kwDOAC5e2c5bU3zs","user":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T21:48:17Z","updated_at":"2023-05-02T21:55:25Z","body":"@cowtowncoder Thanks!\r\n\r\n> Records are technically very different from POJOs/Beans, so there are challenges from Jackson implementation side.\r\n\r\nyes, I agree, which makes me wonder a bit about this plan of jamming records and POJOs into the same regime, as seems suggested by @yihtserns?\r\n\r\n> Assumption rather was that usage wrt Records would use default visibility settings.\r\n\r\nThis is really not the point: The point is that I want to use the same ObjectMapper no matter what my users are choosing: POJOs (as they have for 8 years), or records (the new kid). There is thus a jumble of some POJOs here, and some records there, people now also migrating due to the extreme terse-ness and nice-ness of records. I feel it makes little sense to have to handle this differently? How should I even do that? A POJO could have a record inside it, and other way around.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532198124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9150122084,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhY8hk","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150122084","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-02T21:48:18Z","performed_via_github_app":null},{"id":9150122092,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhY8hs","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150122092","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-02T21:48:18Z","performed_via_github_app":null},{"id":9150157561,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhZFL5","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150157561","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-02T21:55:25Z","performed_via_github_app":null},{"id":9150157566,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhZFL-","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150157566","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-02T21:55:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532327902","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532327902","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532327902,"node_id":"IC_kwDOAC5e2c5bVXfe","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T00:58:41Z","updated_at":"2023-05-03T01:04:31Z","body":"> > Records are technically very different from POJOs/Beans, so there are challenges from Jackson implementation side.\r\n> \r\n> yes, I agree, which makes me wonder a bit about this plan of jamming records and POJOs into the same regime, as seems suggested by @yihtserns?\r\n\r\nRight... and which is why code originally was separate.\r\n\r\nI had plans to rewrite Introspection of POJOs, Records, but didn't have time so others had a chance to try out alternatives here.\r\n\r\n> > Assumption rather was that usage wrt Records would use default visibility settings.\r\n> \r\n> This is really not the point: The point is that I want to use the same ObjectMapper no matter what my users are choosing: POJOs (as they have for 8 years), or records (the new kid). There is thus a jumble of some POJOs here, and some records there, people now also migrating due to the extreme terse-ness and nice-ness of records. I feel it makes little sense to have to handle this differently? How should I even do that? A POJO could have a record inside it, and other way around.\r\n\r\nSorry, I did not mean that as a justification for breaking things: but rather explanation of why this use case was not covered by tests. I understand it was used as a way to unify handling with 2.14 when there was no other way.\r\nI agree in that the same `ObjectMapper` should be usable.\r\n\r\nI'd have to dig up where it was done, but the visibility checker defaults were forked for 2.15 (or was it 2.14 already?) and I think there's a way to change them separately as well. I just do not remember details.\r\n\r\n**EDIT**: I think I got confused with above: visibility checker defaults had to do with different defaults for JDK types, where we do NOT want to detect fields. Records (outside of JDK packages) not affected by that.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532327902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9150863524,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhbxik","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150863524","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-03T00:58:41Z","performed_via_github_app":null},{"id":9150863527,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhbxin","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9150863527","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-03T00:58:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532689113","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532689113","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532689113,"node_id":"IC_kwDOAC5e2c5bWvrZ","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T09:09:28Z","updated_at":"2023-05-03T09:59:44Z","body":"> This is used both for serialization and deserialization. It was the deserialization that failed - here the \"assert that this will actually work with an empty {} object\" boot-up verification - and it only failed with records...\r\n> ...I want ONLY fields evaluated, with any visibility, for both classes and records. No methods whatsoever. These are DTOs, if people slap methods on it, I don't care: I want the data transferred.\r\n\r\nTest result for `setVisibility(PropertyAccessor.ALL, Visibility.NONE)` with `2.14.2`:\r\n\r\n| Mechanism (without annotations) | Serialization | Deserialization with non-empty JSON object | Deserialization with empty JSON object |\r\n|---|---|---|---|\r\n| No-arg constructor with getters & setters | ‚ùå Failed: \"no properties discovered to create BeanSerializer\" | ‚ùå Failed: \"0 known properties\" | ‚úî Successful: created empty instance |\r\n| Constructor creator | ‚ùå Failed: \"no properties discovered to create BeanSerializer\" | ‚ùå Failed: \"no Creators exist\" | ‚ùå Failed: \"no Creators exist\"\r\n| Record class | ‚ùå Empty JSON Object | ‚úî Successful: created instance using the JSON fields | ‚úî Successful: created instance using default values |\r\n\r\nThe only way the failing tests above can work is when `@JsonCreator`/`@ConstructorProperties` & `@JsonProperty` annotations are used on the constructor & fields, respectively.  @stolsvik is that what was done in your codebase?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532689113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9153198390,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhkrk2","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9153198390","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-03T09:09:28Z","performed_via_github_app":null},{"id":9153198403,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhkrlD","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9153198403","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-03T09:09:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532711524","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532711524","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532711524,"node_id":"IC_kwDOAC5e2c5bW1Jk","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T09:26:56Z","updated_at":"2023-05-03T10:20:20Z","body":"> I'd have to dig up where it was done, but the visibility checker defaults were forked for 2.15 (or was it 2.14 already?)...\r\n\r\n[3.x](https://github.com/FasterXML/jackson-databind/blob/930528637b3fdc51ed0499513e9580f21cef5e34/src/main/java/tools/jackson/databind/cfg/MapperConfigBase.java#L617)\r\n\r\n> I think there's a way to change them separately as well...\r\n\r\nThe only way I know is this:\r\n```\r\nobjectMapper.registerModule(new SimpleModule() {\r\n    @Override\r\n    public void setupModule(SetupContext context) {\r\n        super.setupModule(context);\r\n        context.insertAnnotationIntrospector(new NopAnnotationIntrospector() {\r\n            @Override\r\n            public VisibilityChecker<?> findAutoDetectVisibility(AnnotatedClass ac, VisibilityChecker<?> checker) {\r\n                return ac.getType().isRecordType()\r\n                        ? checker.withCreatorVisibility(JsonAutoDetect.Visibility.NON_PRIVATE)\r\n                        : checker;\r\n            }\r\n        });\r\n    }\r\n});\r\n```\r\n### Alternatives\r\n1. Annotate the override directly on the Records:\r\n```\r\n@JsonAutoDetect(creatorVisibility = Visibility.NON_PRIVATE)\r\nrecord RecordTest(String string, int integer) {\r\n}\r\n```\r\n2. Annotate `@JsonCreator` on the canonical compact constructor:\r\n```\r\nrecord RecordTest(String string, int integer) {\r\n    @JsonCreator\r\n    RecordTest {\r\n    }\r\n}\r\n```\r\n\r\n> I want to use the same ObjectMapper no matter what my users are choosing: POJOs (as they have for 8 years), or records (the new kid). There is thus a jumble of some POJOs here, and some records there, people now also migrating due to the extreme terse-ness and nice-ness of records. **I feel it makes little sense to have to handle this differently**? How should I even do that? A POJO could have a record inside it, and other way around.\r\n\r\n...which was the whole point of #3724's \"jamming records and POJOs into the same regime\", so that using Records is no (or not much) different from using POJO - the issue you're facing now is because Records & POJOs are handled similarly...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532711524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532803630","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532803630","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532803630,"node_id":"IC_kwDOAC5e2c5bXLou","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T10:39:00Z","updated_at":"2023-05-03T10:39:34Z","body":">> I'd have to dig up where it was done, but the visibility checker defaults were forked for 2.15 (or was it 2.14 already?)...\r\n\r\n>[3.x](https://github.com/FasterXML/jackson-databind/blob/930528637b3fdc51ed0499513e9580f21cef5e34/src/main/java/tools/jackson/databind/cfg/MapperConfigBase.java#L617)\r\n\r\n@cowtowncoder Do you think we should copy that to `2.15`?  E.g.:\r\n```\r\npublic abstract class MapperConfigBase ... {\r\n    ...\r\n    public final VisibilityChecker<?> getDefaultVisibilityChecker(Class<?> baseType, AnnotatedClass actualClass) {\r\n        ...\r\n        if (ClassUtil.isJDKClass(baseType)) {\r\n            vc = VisibilityChecker.Std.allPublicInstance();\r\n        } else if (baseType.isRecord()) {\r\n            // For Records, ignore any config that hides constructor & factory method creators e.g. via\r\n            // - ObjectMapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE)\r\n            // - ObjectMapper.setVisibility(PropertyAccessor.CREATOR, Visibility.NONE)\r\n            // - ObjectMapper.disable(MapperFeature.AUTO_DETECT_CREATORS)\r\n\r\n            vc = getDefaultVisibilityChecker().withCreatorVisibility(Visibility.NON_PRIVATE);\r\n        } else {\r\n            vc = getDefaultVisibilityChecker();\r\n        }\r\n        ...\r\n    }\r\n}\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532803630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9154029704,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhn2iI","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9154029704","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-03T10:39:13Z","performed_via_github_app":null},{"id":9154029712,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhn2iQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9154029712","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-03T10:39:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532822120","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532822120","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532822120,"node_id":"IC_kwDOAC5e2c5bXQJo","user":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T10:49:52Z","updated_at":"2023-05-03T11:05:55Z","body":"@yihtserns:\r\n> is that what was done in your codebase?\r\n\r\nNo, as I said at top, I have both of:\r\n```java\r\nObjectMapper mapper = new ObjectMapper();\r\nmapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\nmapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\r\n```\r\n\r\nThe full init is:\r\n```java\r\nObjectMapper mapper = new ObjectMapper();\r\n\r\n// Read and write any access modifier fields (e.g. private)\r\nmapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\nmapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\r\n\r\n// Drop nulls\r\nmapper.setSerializationInclusion(Include.NON_NULL);\r\n\r\n// If props are in JSON that aren't in Java DTO, do not fail.\r\nmapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n\r\n// Write e.g. Dates as \"1975-03-11\" instead of timestamp, and instead of array-of-ints [1975, 3, 11].\r\n// Uses ISO8601 with milliseconds and timezone (if present).\r\nmapper.registerModule(new JavaTimeModule());\r\nmapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\n// Handle Optional, OptionalLong, OptionalDouble\r\nmapper.registerModule(new Jdk8Module());\r\n```\r\nIt is here: https://github.com/centiservice/mats3/blob/main/mats-serial-json/src/main/java/io/mats3/serial/json/MatsSerializerJson.java#L120-L152 - now also with the attempt at handling the 5M chars-in-String limit.\r\n\r\n**Note: I had accepted that I always need a no-args constructor** (as opposed to GSON). (Note: If it is possible to support missing no-args constructor for a class, even with Java 17+, that would be *excellent*!)\r\n\r\n> the issue you're facing now is because Records & POJOs are handled similarly...\r\n\r\nExactly. Which is why I said: _\"yes, I agree, which makes me wonder a bit about this plan of jamming records and POJOs into the same regime, as seems suggested by @yihtserns?\"_\r\n\r\nMy point is that the construction of a Record and of a Class, and their population of fields, are rather different, so it sounds .. ambitious .. to do it with the same codebase/flow? Note, I do not try to dictate anything here, it is just an observation. But it would be nice if this - as seen from my side - _regression_ - was not present!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532822120/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9154112656,"node_id":"MEE_lADOAC5e2c5k4kKuzwAAAAIhoKyQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9154112656","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-03T10:49:53Z","performed_via_github_app":null},{"id":9154112669,"node_id":"SE_lADOAC5e2c5k4kKuzwAAAAIhoKyd","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/9154112669","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-03T10:49:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532842582","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532842582","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532842582,"node_id":"IC_kwDOAC5e2c5bXVJW","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T11:07:09Z","updated_at":"2023-05-03T11:07:09Z","body":"> No, as I said at top, I had both of:\r\n> ```\r\n> ObjectMapper mapper = new ObjectMapper();\r\n> mapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\n> mapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\r\n> ```\r\n\r\nOK, was confused because it was commented out in the sample code.\r\n\r\nThat means you might actually have 2 problems:\r\n1. This issue for Records deserialization.\r\n2. #3895 for Records serialization.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532842582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T11:08:46Z","updated_at":"2023-05-03T11:08:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894/events","html_url":"https://github.com/FasterXML/jackson-databind/pull/3894","id":1681019641,"node_id":"PR_kwDOAC5e2c5O_WGu","number":3894,"title":"Only avoid Records fields detection for deserialization","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/152","html_url":"https://github.com/FasterXML/jackson-databind/milestone/152","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/152/labels","id":9358576,"node_id":"MI_kwDOAC5e2c4Ajszw","number":152,"title":"2.15.1","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":4,"state":"closed","created_at":"2023-05-03T22:20:44Z","updated_at":"2025-10-30T23:29:30Z","due_on":null,"closed_at":"2025-10-30T23:29:30Z"},"comments":6,"created_at":"2023-04-24T11:12:26Z","updated_at":"2024-07-17T11:59:20Z","closed_at":"2023-05-03T22:15:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-08T13:34:42Z","pushed_at":"2025-11-07T22:16:42Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83232,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":382,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":382,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls/3894","html_url":"https://github.com/FasterXML/jackson-databind/pull/3894","diff_url":"https://github.com/FasterXML/jackson-databind/pull/3894.diff","patch_url":"https://github.com/FasterXML/jackson-databind/pull/3894.patch","merged_at":"2023-05-03T22:15:46Z"},"body":"Refines #3737 - the reason why the fields are needed is because this kind of config needs it:\r\n```java\r\nnew ObjectMapper()\r\n  .setVisibility(PropertyAccessor.GETTER, Visibility.NONE)\r\n  .setVisibility(PropertyAccessor.FIELD, Visibility.ANY)\r\n```\r\n\r\nAnd currently, we have 3 use cases that uses that config:\r\n| | Who | Why |\r\n|--|--|--|\r\n| 1 | #3628 | Easy way to ignore methods (that looks like a property) that comes from interface(s), and only serializing Record components. |\r\n| 2 | https://github.com/FasterXML/jackson-databind/pull/3724#issuecomment-1520643404 | Easy way (albeit overkill) way to exclude a method (that looks like a property) from being serialized, to avoid making test assertion complicated.\r\n| 3 | #3895, https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532842582 | A way to ignore non-accessor `getXXX` methods. |\r\n\r\nFor the 2nd use case, [there's an alternative solution](https://github.com/FasterXML/jackson-databind/pull/3724#issuecomment-1520643404).  Not so lucky for 1st & 3rd use cases.","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3894/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532846112","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532846112","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532846112,"node_id":"IC_kwDOAC5e2c5bXWAg","user":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T11:09:56Z","updated_at":"2023-05-03T11:09:56Z","body":"Yes, but I tried to mention:\r\n> Note that the commented-out mapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY) is included in my actual code to get intended behaviour (i.e. only fields are serialized and deserialized, no methods involved), but this did not make any to or from for the problem.\r\n\r\nIt was an attempt to reduce the problem to the bare minimum.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532846112/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stolsvik","id":3123344,"node_id":"MDQ6VXNlcjMxMjMzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3123344?v=4","gravatar_id":"","url":"https://api.github.com/users/stolsvik","html_url":"https://github.com/stolsvik","followers_url":"https://api.github.com/users/stolsvik/followers","following_url":"https://api.github.com/users/stolsvik/following{/other_user}","gists_url":"https://api.github.com/users/stolsvik/gists{/gist_id}","starred_url":"https://api.github.com/users/stolsvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stolsvik/subscriptions","organizations_url":"https://api.github.com/users/stolsvik/orgs","repos_url":"https://api.github.com/users/stolsvik/repos","events_url":"https://api.github.com/users/stolsvik/events{/privacy}","received_events_url":"https://api.github.com/users/stolsvik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532863849","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532863849","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532863849,"node_id":"IC_kwDOAC5e2c5bXaVp","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T11:25:59Z","updated_at":"2023-05-03T11:30:55Z","body":"To summarize, there are 2 things broken when using this config:\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nmapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\nmapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\r\n```\r\n\r\n## 1. For Records deserialization\r\nCaused by #3724 to make Records de/serialization behaves just like POJO de/serialization - it sees:\r\n```\r\nrecord RecordTest(String string, int integer) {\r\n}\r\n```\r\n...similarly to:\r\n```\r\npublic class RecordTest {\r\n    private String string;\r\n    private int integer;\r\n\r\n    @ConstructorProperties({\"string\", \"integer\"})\r\n    public RecordTest(String string, int integer) {\r\n        this.string = string;\r\n        this.integer = integer\r\n    }\r\n\r\n    public String getString() {\r\n        return this.string;\r\n    }\r\n\r\n    public String getInteger() {\r\n        return this.integer;\r\n    }\r\n}\r\n```\r\n### Fixes/workarounds\r\n1. Make all classes' constructor/factory method Creators visible:\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nmapper.setVisibility(PropertyAccessor.ALL, Visibility.NONE);\r\nmapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\r\nmapper.setVisibility(PropertyAccessor.CREATOR, Visibility.NON_PRIVATE);\r\n```\r\n2. Make only Records' constructor/factory method Creators visible:\r\n```\r\nobjectMapper.registerModule(new SimpleModule() {\r\n    @Override\r\n    public void setupModule(SetupContext context) {\r\n        super.setupModule(context);\r\n        context.insertAnnotationIntrospector(new NopAnnotationIntrospector() {\r\n            @Override\r\n            public VisibilityChecker<?> findAutoDetectVisibility(AnnotatedClass ac, VisibilityChecker<?> checker) {\r\n                return ac.getType().isRecordType()\r\n                        ? checker.withCreatorVisibility(JsonAutoDetect.Visibility.NON_PRIVATE)\r\n                        : checker;\r\n            }\r\n        });\r\n    }\r\n});\r\n```\r\n3. Override visibility directly on the Record class:\r\n```\r\n@JsonAutoDetect(creatorVisibility = Visibility.NON_PRIVATE)\r\nrecord RecordTest(String string, int integer) {\r\n}\r\n```\r\n4. Override visibility of constructor Creator directly in the Record class:\r\n```\r\nrecord RecordTest(String string, int integer) {\r\n    @JsonCreator\r\n    RecordTest {\r\n    }\r\n}\r\n```\r\n\r\n## 2. For Records serialization\r\nBroken by #3737 - Records serialization will always result in empty JSON hash (i.e. `{}`).\r\n\r\n#3894 to fix that is pending review.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532863849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532869817","html_url":"https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532869817","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/3906","id":1532869817,"node_id":"IC_kwDOAC5e2c5bXby5","user":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T11:31:43Z","updated_at":"2023-05-03T11:32:26Z","body":"As for [changing Jackson to make Records' creators always visibility regardless of config](https://github.com/FasterXML/jackson-databind/issues/3906#issuecomment-1532803630), I can/will create a PR if the core maintainers think that's the way to go.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/1532869817/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yihtserns","id":3615932,"node_id":"MDQ6VXNlcjM2MTU5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/3615932?v=4","gravatar_id":"","url":"https://api.github.com/users/yihtserns","html_url":"https://github.com/yihtserns","followers_url":"https://api.github.com/users/yihtserns/followers","following_url":"https://api.github.com/users/yihtserns/following{/other_user}","gists_url":"https://api.github.com/users/yihtserns/gists{/gist_id}","starred_url":"https://api.github.com/users/yihtserns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihtserns/subscriptions","organizations_url":"https://api.github.com/users/yihtserns/orgs","repos_url":"https://api.github.com/users/yihtserns/repos","events_url":"https://api.github.com/users/yihtserns/events{/privacy}","received_events_url":"https://api.github.com/users/yihtserns/received_events","type":"User","user_view_type":"public","site_admin":false}}]