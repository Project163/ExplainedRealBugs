[{"id":16723471303,"node_id":"RTE_lADOAC5e2c6sztf5zwAAAAPky-vH","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16723471303","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-03-13T01:55:50Z","rename":{"from":"Add 2.x `MapperFeature` to prevent failure of `java.util.Optional` (de)serialization without Java 8 module","to":"Add `MapperFeature.REQUIRE_HANDLERS_FOR_JAVA8_OPTIONALS` to prevent failure of `java.util.Optional` (de)serialization without Java 8 module"},"performed_via_github_app":null},{"id":16723479865,"node_id":"REFE_lADOAC5e2c6sztf5zwAAAAPkzA05","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16723479865","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4c74c8bdc6152af5b36c59461dd723e4153502aa","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/4c74c8bdc6152af5b36c59461dd723e4153502aa","created_at":"2025-03-13T01:56:57Z","performed_via_github_app":null},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-13T02:00:54Z","updated_at":"2025-03-13T02:00:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/4499","id":2264907161,"node_id":"I_kwDOAC5e2c6G_72Z","number":4499,"title":"Serializing Optional not enabled by default since 2.16.0","user":{"login":"cor3000","id":3894309,"node_id":"MDQ6VXNlcjM4OTQzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3894309?v=4","gravatar_id":"","url":"https://api.github.com/users/cor3000","html_url":"https://github.com/cor3000","followers_url":"https://api.github.com/users/cor3000/followers","following_url":"https://api.github.com/users/cor3000/following{/other_user}","gists_url":"https://api.github.com/users/cor3000/gists{/gist_id}","starred_url":"https://api.github.com/users/cor3000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cor3000/subscriptions","organizations_url":"https://api.github.com/users/cor3000/orgs","repos_url":"https://api.github.com/users/cor3000/repos","events_url":"https://api.github.com/users/cor3000/events{/privacy}","received_events_url":"https://api.github.com/users/cor3000/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":26,"created_at":"2024-04-26T03:55:25Z","updated_at":"2025-03-13T22:12:26Z","closed_at":"2024-04-26T04:34:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-10T02:17:47Z","pushed_at":"2025-11-10T02:17:44Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83236,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":383,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":383,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Search before asking\r\n\r\n- [X] I searched in the [issues](https://github.com/FasterXML/jackson-databind/issues) and found nothing similar.\r\n\r\n### Describe the bug\r\n\r\nin version 2.15.4 the following code below succeeded\r\n\r\ngiving the output\r\n\r\n```\r\n{\"test\":{\"empty\":false,\"present\":true}}\r\n{\"test\":{\"empty\":false,\"present\":true}}\r\n```\r\n\r\n(Obviously this value doesn't make sense, but it doesn't fail with a hard exception, breaking existing projects)\r\n\r\nwhen using version a higher version e.g. 2.17.0 the following Exception occurs instead (in both cases the jackson-datatype-jdk8.jar of the same version is on the classpath)\r\n\r\n```\r\nException in thread \"main\" com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 optional type `java.util.Optional` not supported by default: add Module \"com.fasterxml.jackson.datatype:jackson-datatype-jdk8\" to enable handling (through reference chain: java.util.ImmutableCollections$Map1[\"test\"])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1330)\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35)\r\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:808)\r\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeWithoutTypeInfo(MapSerializer.java:764)\r\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:720)\r\n\tat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:35)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:502)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:341)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4799)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:4040)\r\n\tat Jackson2_17_Test_ObjectMapper2.main(Jackson2_17_Test_ObjectMapper2.java:24)\r\n```\r\n\r\nI didn't find this default behavior change in the release notes, so I wonder whether this is an intended change.\r\nAs a workaround I can register the Jdk8Module manually (commented out in the code above), to produce the same results as in 2.15.4\r\n\r\n### Version Information\r\n\r\n2.17.0\r\n\r\n### Reproduction\r\n\r\nRun the example using the maven dependencies\r\n\r\n- com.fasterxml.jackson.core:jackson-databind:2.15.4\r\n- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.15.4\r\n\r\nafter switching to 2.16.0, 2.16.1, 2.17.0 the same code below fails\r\n\r\n- com.fasterxml.jackson.core:jackson-databind:2.17.0\r\n- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.17.0\r\n\r\n```java\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport com.fasterxml.jackson.datatype.jdk8.Jdk8Module;\r\n\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\npublic class Jackson2_17_Test_Optional {\r\n\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n\r\n        Map<String, Optional<String>> object = Map.of(\r\n                \"test\", Optional.of(\"optional value\"));\r\n\r\n        JsonMapper jsonMapper = JsonMapper.builder()\r\n//                .addModule(new Jdk8Module()) // workaround, register jdk8 module manually\r\n                .build();\r\n        String value = jsonMapper.writeValueAsString(object);\r\n        System.out.println(value);\r\n\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n//        objectMapper.registerModule(new Jdk8Module()); // workaround, register jdk8 module manually\r\n        String value2 = objectMapper.writeValueAsString(object);\r\n        System.out.println(value2);\r\n    }\r\n}\r\n``` \r\n\r\n\r\n### Expected behavior\r\n\r\ngiving the output as in 2.15.4, not throwing an exception\r\n\r\n```\r\n{\"test\":{\"empty\":false,\"present\":true}}\r\n{\"test\":{\"empty\":false,\"present\":true}}\r\n```\r\n\r\n### Additional context\r\n\r\neven though we have a manual workaround it's difficult to track and adjust all usages by external libraries.\r\n\r\nmy apologies in case I missed the related documentation and this is the new expected behavior since 2.16.0","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4499/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":16723526746,"node_id":"CE_lADOAC5e2c6sztf5zwAAAAPkzMRa","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16723526746","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"6743f4cea3018ddc336f01cceaa0c8a8381b2c1b","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/6743f4cea3018ddc336f01cceaa0c8a8381b2c1b","created_at":"2025-03-13T02:01:11Z","state_reason":null,"performed_via_github_app":null},{"id":16723641067,"node_id":"REFE_lADOAC5e2c6sztf5zwAAAAPkzoLr","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16723641067","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6743f4cea3018ddc336f01cceaa0c8a8381b2c1b","commit_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits/6743f4cea3018ddc336f01cceaa0c8a8381b2c1b","created_at":"2025-03-13T02:07:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2730464030","html_url":"https://github.com/FasterXML/jackson-databind/issues/5006#issuecomment-2730464030","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5006","id":2730464030,"node_id":"IC_kwDOAC5e2c6iv5Me","user":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-17T18:21:54Z","updated_at":"2025-03-17T18:21:54Z","body":"HI - \n  This is doesn't appear to be working - or at least not as I expected.  While this no longer fails when deserializing an Optional, an Optional serialized in the legacy format { \"value\": \"value\", \"present\": true } is only deserialized back to an empty Optional.  ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2730464030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2730551299","html_url":"https://github.com/FasterXML/jackson-databind/issues/5006#issuecomment-2730551299","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5006","id":2730551299,"node_id":"IC_kwDOAC5e2c6iwOgD","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-17T19:00:59Z","updated_at":"2025-03-17T19:00:59Z","body":"@seadbrane I don't know what would be different there -- new setting simply prevents failure, affecting no other handling. Possibly some other changes, unrelated to this issue -- Property discovery rewrite of 2.18 -- ?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2730551299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16812828633,"node_id":"MEE_lADOAC5e2c6sztf5zwAAAAPqH2fZ","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16812828633","actor":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-17T19:01:00Z","performed_via_github_app":null},{"id":16812828652,"node_id":"SE_lADOAC5e2c6sztf5zwAAAAPqH2fs","url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events/16812828652","actor":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-17T19:01:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2731361402","html_url":"https://github.com/FasterXML/jackson-databind/issues/5006#issuecomment-2731361402","issue_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/5006","id":2731361402,"node_id":"IC_kwDOAC5e2c6izUR6","user":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-18T01:35:42Z","updated_at":"2025-03-18T01:35:42Z","body":"Is there a simpler way to write a deserializer that still supports the old behavior  than the following?    My main concern is whether this covers all use cases, especially since I had to add custom logic to handle collection types.  \n\n```\n    public static class OptionalDeserializer<T> extends StdDeserializer<Optional<T>> implements ContextualDeserializer {\n\n        private JavaType type;\n\n        public OptionalDeserializer() {\n            super(Optional.class);\n        }\n\n        private OptionalDeserializer(final JavaType type) {\n            super(Optional.class);\n            this.type = type;\n        }\n\n        @Override\n        public JsonDeserializer<?> createContextual(final DeserializationContext ctxt, final BeanProperty property) {\n            final JavaType wrapperType = property.getType().containedType(0);\n            return new OptionalDeserializer(wrapperType);\n\n        }\n\n        @Override\n        public Optional<T> deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n            if (p.getCurrentToken() == JsonToken.VALUE_NULL) {\n                return Optional.empty();\n\n            }\n\n            final JsonNode node = p.getCodec().readTree(p);\n            final JsonNode valueNode = node.get(\"value\");\n\n            if (null != valueNode && !valueNode.isNull()) {\n                final JavaType valueType;\n                if (this.type == null) {\n                    valueType = ctxt.getContextualType();\n                } else {\n                    valueType = this.type;\n                }\n                if (valueType.isCollectionLikeType() && valueNode.isArray()) {\n                    // final Class<T> rawClass = (Class<T>) valueType.getRawClass();\n                    final Collection collection = Set.class\n                            .isAssignableFrom(valueType.getRawClass())\n                            ? new HashSet<>()\n                                    : new ArrayList<>();\n\n                    final JavaType elementType = valueType.getBindings().getBoundType(0);\n\n                    for (final JsonNode elementNode : (ArrayNode) valueNode) {\n                        collection.add(createValue(p, elementType, elementNode));\n                    }\n                    return Optional.of((T) collection);\n                }\n                return Optional.ofNullable(createValue(p, valueType, valueNode));\n            }\n            return Optional.empty();\n        }\n\n        private <T> T createValue(JsonParser p, JavaType valueType, JsonNode valueNode) throws JsonProcessingException {\n            final Class<T> rawClass = (Class<T>) valueType.getRawClass();\n            final T value = p.getCodec().treeToValue(valueNode, rawClass);\n            return value;\n        }\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments/2731361402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seadbrane","id":102177461,"node_id":"U_kgDOBhcatQ","avatar_url":"https://avatars.githubusercontent.com/u/102177461?v=4","gravatar_id":"","url":"https://api.github.com/users/seadbrane","html_url":"https://github.com/seadbrane","followers_url":"https://api.github.com/users/seadbrane/followers","following_url":"https://api.github.com/users/seadbrane/following{/other_user}","gists_url":"https://api.github.com/users/seadbrane/gists{/gist_id}","starred_url":"https://api.github.com/users/seadbrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seadbrane/subscriptions","organizations_url":"https://api.github.com/users/seadbrane/orgs","repos_url":"https://api.github.com/users/seadbrane/repos","events_url":"https://api.github.com/users/seadbrane/events{/privacy}","received_events_url":"https://api.github.com/users/seadbrane/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-23T03:23:33Z","updated_at":"2025-04-23T03:23:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/4533","id":2302947472,"node_id":"I_kwDOAC5e2c6JRDCQ","number":4533,"title":"Add `MapperFeature.REQUIRE_HANDLERS_FOR_JAVA8_TIMES` to disable the \"Java 8 date/time XYZ not supported by default\" error","user":{"login":"stickfigure","id":162508,"node_id":"MDQ6VXNlcjE2MjUwOA==","avatar_url":"https://avatars.githubusercontent.com/u/162508?v=4","gravatar_id":"","url":"https://api.github.com/users/stickfigure","html_url":"https://github.com/stickfigure","followers_url":"https://api.github.com/users/stickfigure/followers","following_url":"https://api.github.com/users/stickfigure/following{/other_user}","gists_url":"https://api.github.com/users/stickfigure/gists{/gist_id}","starred_url":"https://api.github.com/users/stickfigure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stickfigure/subscriptions","organizations_url":"https://api.github.com/users/stickfigure/orgs","repos_url":"https://api.github.com/users/stickfigure/repos","events_url":"https://api.github.com/users/stickfigure/events{/privacy}","received_events_url":"https://api.github.com/users/stickfigure/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7098892157,"node_id":"LA_kwDOAC5e2c8AAAABpyB_fQ","url":"https://api.github.com/repos/FasterXML/jackson-databind/labels/2.19","name":"2.19","color":"1D76DB","default":false,"description":"Issues planned at 2.19 or later"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/170","html_url":"https://github.com/FasterXML/jackson-databind/milestone/170","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/170/labels","id":11662847,"node_id":"MI_kwDOAC5e2c4AsfX_","number":170,"title":"2.19.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":26,"state":"closed","created_at":"2024-10-02T01:26:15Z","updated_at":"2025-10-30T23:29:09Z","due_on":null,"closed_at":"2025-10-30T23:29:09Z"},"comments":10,"created_at":"2024-05-17T14:49:28Z","updated_at":"2025-05-18T17:29:20Z","closed_at":"2025-04-24T17:11:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":3038937,"node_id":"MDEwOlJlcG9zaXRvcnkzMDM4OTM3","name":"jackson-databind","full_name":"FasterXML/jackson-databind","private":false,"owner":{"login":"FasterXML","id":382692,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM4MjY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/382692?v=4","gravatar_id":"","url":"https://api.github.com/users/FasterXML","html_url":"https://github.com/FasterXML","followers_url":"https://api.github.com/users/FasterXML/followers","following_url":"https://api.github.com/users/FasterXML/following{/other_user}","gists_url":"https://api.github.com/users/FasterXML/gists{/gist_id}","starred_url":"https://api.github.com/users/FasterXML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FasterXML/subscriptions","organizations_url":"https://api.github.com/users/FasterXML/orgs","repos_url":"https://api.github.com/users/FasterXML/repos","events_url":"https://api.github.com/users/FasterXML/events{/privacy}","received_events_url":"https://api.github.com/users/FasterXML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/FasterXML/jackson-databind","description":"General data-binding package for Jackson (2.x): works on streaming API (core) implementation(s)","fork":false,"url":"https://api.github.com/repos/FasterXML/jackson-databind","forks_url":"https://api.github.com/repos/FasterXML/jackson-databind/forks","keys_url":"https://api.github.com/repos/FasterXML/jackson-databind/keys{/key_id}","collaborators_url":"https://api.github.com/repos/FasterXML/jackson-databind/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/FasterXML/jackson-databind/teams","hooks_url":"https://api.github.com/repos/FasterXML/jackson-databind/hooks","issue_events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/events{/number}","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/events","assignees_url":"https://api.github.com/repos/FasterXML/jackson-databind/assignees{/user}","branches_url":"https://api.github.com/repos/FasterXML/jackson-databind/branches{/branch}","tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/tags","blobs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/refs{/sha}","trees_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/trees{/sha}","statuses_url":"https://api.github.com/repos/FasterXML/jackson-databind/statuses/{sha}","languages_url":"https://api.github.com/repos/FasterXML/jackson-databind/languages","stargazers_url":"https://api.github.com/repos/FasterXML/jackson-databind/stargazers","contributors_url":"https://api.github.com/repos/FasterXML/jackson-databind/contributors","subscribers_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscribers","subscription_url":"https://api.github.com/repos/FasterXML/jackson-databind/subscription","commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/commits{/sha}","git_commits_url":"https://api.github.com/repos/FasterXML/jackson-databind/git/commits{/sha}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/comments{/number}","issue_comment_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/comments{/number}","contents_url":"https://api.github.com/repos/FasterXML/jackson-databind/contents/{+path}","compare_url":"https://api.github.com/repos/FasterXML/jackson-databind/compare/{base}...{head}","merges_url":"https://api.github.com/repos/FasterXML/jackson-databind/merges","archive_url":"https://api.github.com/repos/FasterXML/jackson-databind/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/FasterXML/jackson-databind/downloads","issues_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues{/number}","pulls_url":"https://api.github.com/repos/FasterXML/jackson-databind/pulls{/number}","milestones_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones{/number}","notifications_url":"https://api.github.com/repos/FasterXML/jackson-databind/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/labels{/name}","releases_url":"https://api.github.com/repos/FasterXML/jackson-databind/releases{/id}","deployments_url":"https://api.github.com/repos/FasterXML/jackson-databind/deployments","created_at":"2011-12-23T07:17:41Z","updated_at":"2025-11-10T02:17:47Z","pushed_at":"2025-11-10T02:17:44Z","git_url":"git://github.com/FasterXML/jackson-databind.git","ssh_url":"git@github.com:FasterXML/jackson-databind.git","clone_url":"https://github.com/FasterXML/jackson-databind.git","svn_url":"https://github.com/FasterXML/jackson-databind","homepage":"","size":83236,"stargazers_count":3644,"watchers_count":3644,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":383,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","jackson","jackson-databind","json"],"visibility":"public","forks":1446,"open_issues":383,"watchers":3644,"default_branch":"3.x","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Is your feature request related to a problem? Please describe.\n\nJackson 2.12 introduced the \"always break when trying to serialize java.time objects without the JavaTimeModule` behavior.\r\n\r\nUnfortunately, this breaks our 1M+ line codebase which makes ObjectMappers all over the place. And we have client applications that expect the (terrible) POJO format for some time objects.\r\n\r\nIt looks like you've already thought about this with your comment here:\r\n\r\nhttps://github.com/FasterXML/jackson-databind/blob/e230f61b05f69cba74f933bd74479b7d764fa9d5/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerFactory.java#L885\r\n\r\nWe've pinned jackson to 2.11.4 across the board but this is not a sustainable solution.\n\n### Describe the solution you'd like\n\nIdeally, a system property that restores the old behavior - let java.time.* be serialized as objects. A distant second would be a feature to enable on the objectmapper which restores old behavior. That would require hunting down every possible objectmapper creation in our codebase, which will hurt.\n\n### Usage example\n\n_No response_\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/4533/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]