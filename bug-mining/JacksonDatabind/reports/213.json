{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1315","id":167814563,"node_id":"MDU6SXNzdWUxNjc4MTQ1NjM=","number":1315,"title":"Binding numeric values can BigDecimal lose precision","user":{"login":"asnare","id":401970,"node_id":"MDQ6VXNlcjQwMTk3MA==","avatar_url":"https://avatars.githubusercontent.com/u/401970?v=4","gravatar_id":"","url":"https://api.github.com/users/asnare","html_url":"https://github.com/asnare","followers_url":"https://api.github.com/users/asnare/followers","following_url":"https://api.github.com/users/asnare/following{/other_user}","gists_url":"https://api.github.com/users/asnare/gists{/gist_id}","starred_url":"https://api.github.com/users/asnare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asnare/subscriptions","organizations_url":"https://api.github.com/users/asnare/orgs","repos_url":"https://api.github.com/users/asnare/repos","events_url":"https://api.github.com/users/asnare/events{/privacy}","received_events_url":"https://api.github.com/users/asnare/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/6","html_url":"https://github.com/FasterXML/jackson-databind/milestone/6","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/6/labels","id":397286,"node_id":"MDk6TWlsZXN0b25lMzk3Mjg2","number":6,"title":"2.2","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2013-08-08T05:59:47Z","updated_at":"2021-03-04T04:04:48Z","due_on":null,"closed_at":"2021-03-04T04:04:48Z"},"comments":2,"created_at":"2016-07-27T09:49:54Z","updated_at":"2016-08-22T04:18:54Z","closed_at":"2016-08-22T04:16:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"It looks like commit c809c0cbe75fa24a19430867af8c35d78c6663be (intended to fix #1028) introduced an issue where numeric values lose precision prior to being returned as `BigDecimal` instances. (Feature `USE_BIG_DECIMAL_FOR_FLOATS` enables this; given that it's disabled for performance by default, the reason to enable it is when you specifically want to avoid precision loss.)\n\nThis issue is still present in 2.8.1 (which is where I encountered it).\n\nSome initial discussion took place as [comments on the commit](https://github.com/FasterXML/jackson-databind/commit/c809c0cbe75fa24a19430867af8c35d78c6663be#commitcomment-18364729). I don't know enough about the contracts involved in the parsing state, but some things that caught my eye:\n- Retrieving the parser value as a `Double` is where the precision loss occurs.\n- The fix was intended to deal with returning NaN/Inf, which `BigDecimal` doesn't support. However these aren't legal values in JSON, and there's a `ALLOW_NON_NUMERIC_NUMBERS` feature to allow this as extension. (Maybe the feature-check is somewhere else? I haven't looked.)\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1315/timeline","performed_via_github_app":null,"state_reason":"completed"}