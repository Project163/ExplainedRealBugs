{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1978","id":307394722,"node_id":"MDU6SXNzdWUzMDczOTQ3MjI=","number":1978,"title":"Using @JsonUnwrapped annotation in builderdeserializer hangs in infinite loop","user":{"login":"roeltje25","id":2145138,"node_id":"MDQ6VXNlcjIxNDUxMzg=","avatar_url":"https://avatars.githubusercontent.com/u/2145138?v=4","gravatar_id":"","url":"https://api.github.com/users/roeltje25","html_url":"https://github.com/roeltje25","followers_url":"https://api.github.com/users/roeltje25/followers","following_url":"https://api.github.com/users/roeltje25/following{/other_user}","gists_url":"https://api.github.com/users/roeltje25/gists{/gist_id}","starred_url":"https://api.github.com/users/roeltje25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roeltje25/subscriptions","organizations_url":"https://api.github.com/users/roeltje25/orgs","repos_url":"https://api.github.com/users/roeltje25/repos","events_url":"https://api.github.com/users/roeltje25/events{/privacy}","received_events_url":"https://api.github.com/users/roeltje25/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/90","html_url":"https://github.com/FasterXML/jackson-databind/milestone/90","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/90/labels","id":3067669,"node_id":"MDk6TWlsZXN0b25lMzA2NzY2OQ==","number":90,"title":"2.9.5","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9.5","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":10,"state":"closed","created_at":"2018-01-26T23:59:31Z","updated_at":"2021-03-04T04:08:53Z","due_on":"2018-03-28T07:00:00Z","closed_at":"2021-03-04T04:08:53Z"},"comments":6,"created_at":"2018-03-21T19:52:32Z","updated_at":"2018-03-23T03:32:56Z","closed_at":"2018-03-23T03:32:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We are using a builder to deserialize a bean and one of the properties is annotated with a @JsonUnwrapped annotation. The code hangs in BuilderBasedDeserializer.java in method deserializeWithObject in the loop starting on line 307. The code of that loop differs significantly from the code i see in master where the loop starts on line 340. The 2.9.4 version of the loop that I am using hangs as there seems to be no end token. p.nextToken() returns null indicating the last token was consumed but this value is not checked making the loop stuck for eternity... \r\n\r\nI guess the code in master improves on the behavior in the 2.9 branch. Perhaps this should be merged to 2.9?\r\n\r\nThanks in advance for any fix.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1978/timeline","performed_via_github_app":null,"state_reason":"completed"}