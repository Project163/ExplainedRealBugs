{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799","repository_url":"https://api.github.com/repos/FasterXML/jackson-databind","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799/events","html_url":"https://github.com/FasterXML/jackson-databind/issues/1799","id":266478942,"node_id":"MDU6SXNzdWUyNjY0Nzg5NDI=","number":1799,"title":"Allow creation of custom sub-types of `NullNode`, `BooleanNode`, `MissingNode`","user":{"login":"andylowry","id":108675,"node_id":"MDQ6VXNlcjEwODY3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/108675?v=4","gravatar_id":"","url":"https://api.github.com/users/andylowry","html_url":"https://github.com/andylowry","followers_url":"https://api.github.com/users/andylowry/followers","following_url":"https://api.github.com/users/andylowry/following{/other_user}","gists_url":"https://api.github.com/users/andylowry/gists{/gist_id}","starred_url":"https://api.github.com/users/andylowry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andylowry/subscriptions","organizations_url":"https://api.github.com/users/andylowry/orgs","repos_url":"https://api.github.com/users/andylowry/repos","events_url":"https://api.github.com/users/andylowry/events{/privacy}","received_events_url":"https://api.github.com/users/andylowry/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/86","html_url":"https://github.com/FasterXML/jackson-databind/milestone/86","labels_url":"https://api.github.com/repos/FasterXML/jackson-databind/milestones/86/labels","id":2849363,"node_id":"MDk6TWlsZXN0b25lMjg0OTM2Mw==","number":86,"title":"2.9.3","description":"Release notes: https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9.3","creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":9,"state":"closed","created_at":"2017-10-19T00:13:37Z","updated_at":"2021-03-04T04:48:06Z","due_on":"2017-12-09T08:00:00Z","closed_at":"2021-03-04T04:48:06Z"},"comments":6,"created_at":"2017-10-18T12:44:11Z","updated_at":"2017-11-01T22:44:06Z","closed_at":"2017-11-01T21:17:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The JsonNodeFactory instance always uses canonical instances for certain values of certain node types, including empty arrays, empty objects, ints from -1 to 10, booleans, maybe others.\r\n\r\nI have a use-case where I need to parse a JSON/YAML file to a `JsonNode` tree and use the nodes as keys in an IdentityHashMap. The canonical instances were, naturally, causing problems.\r\n\r\nI've created my own factory and installed it in my mapper instances, and that works great. But I can't currently avoid canonical instances of `BooleanNode`, `NullNode` and `MissingNode`, because none of them have a visible constructor (so I can't call the constructors, and I can't extend the types).\r\n\r\nI don't actually have a need for non-canonical `MissingNode`, and my inability to manufacture non-canonical boolean and null nodes is something I can live with (that prevents an unlikely edge-case for my application from working correctly, but I can document that and leave it as is for now).\r\n\r\nAdding public constructors to these types would make it possible for me to complete my custom factory. Making existing constructors package-visible and adding a `DeserializationFeature` that avoids canonical instances would probably be even better.","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-databind/issues/1799/timeline","performed_via_github_app":null,"state_reason":"completed"}