diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/impl/BeanAsArraySerializer.java b/src/main/java/com/fasterxml/jackson/databind/ser/impl/BeanAsArraySerializer.java
index bc9ebed3b..b27fdc72c 100644
--- a/src/main/java/com/fasterxml/jackson/databind/ser/impl/BeanAsArraySerializer.java
+++ b/src/main/java/com/fasterxml/jackson/databind/ser/impl/BeanAsArraySerializer.java
@@ -119,16 +119,34 @@ public class BeanAsArraySerializer
     /**********************************************************
      */
 
-    // Re-defined from base class...
+    // Re-defined from base class, due to differing prefixes
     @Override
-    public void serializeWithType(Object bean, JsonGenerator jgen,
+    public void serializeWithType(Object bean, JsonGenerator gen,
             SerializerProvider provider, TypeSerializer typeSer)
-        throws IOException, JsonGenerationException
+        throws IOException
     {
-        /* Should not even get here; but let's be nice and re-route
-         * if need be.
+        /* 10-Dec-2014, tatu: Not sure if this can be made to work reliably;
+         *   but for sure delegating to default implementation will not work. So:
          */
-        _defaultSerializer.serializeWithType(bean, jgen, provider, typeSer);
+        
+        if (_objectIdWriter != null) {
+            _serializeWithObjectId(bean, gen, provider, typeSer);
+            return;
+        }
+
+        String typeStr = (_typeId == null) ? null : _customTypeId(bean);
+        if (typeStr == null) {
+            typeSer.writeTypePrefixForArray(bean, gen);
+        } else {
+            typeSer.writeCustomTypePrefixForArray(bean, gen, typeStr);
+        }
+        serializeAsArray(bean, gen, provider);
+        if (typeStr == null) {
+            typeSer.writeTypeSuffixForArray(bean, gen);
+        } else {
+            typeSer.writeCustomTypeSuffixForArray(bean, gen, typeStr);
+        }
+        
     }
     
     /**
@@ -138,7 +156,7 @@ public class BeanAsArraySerializer
      */
     @Override
     public final void serialize(Object bean, JsonGenerator gen, SerializerProvider provider)
-        throws IOException, JsonGenerationException
+        throws IOException
     {
         // [JACKSON-805]
         if (provider.isEnabled(SerializationFeature.WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED)
@@ -195,7 +213,7 @@ public class BeanAsArraySerializer
             }
             // NOTE: any getters can not be supported either
             //if (_anyGetterWriter != null) {
-            //    _anyGetterWriter.getAndSerialize(bean, jgen, provider);
+            //    _anyGetterWriter.getAndSerialize(bean, gen, provider);
             //}
         } catch (Exception e) {
             String name = (i == props.length) ? "[anySetter]" : props[i].getName();
diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java
index 5e9c39b69..85ff64daf 100644
--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java
+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java
@@ -75,7 +75,7 @@ public abstract class BeanSerializerBase
      * reference to that member.
      */
     final protected AnnotatedMember _typeId;
-    
+
     /**
      * If this POJO can be alternatively serialized using just an object id
      * to denote a reference to previously serialized object,
@@ -87,7 +87,7 @@ public abstract class BeanSerializerBase
      * Requested shape from bean class annotations.
      */
     final protected JsonFormat.Shape _serializationShape;
-    
+
     /*
     /**********************************************************
     /* Life-cycle: constructors
@@ -523,34 +523,34 @@ public abstract class BeanSerializerBase
     // Main serialization method left unimplemented
     @Override
     public abstract void serialize(Object bean, JsonGenerator jgen, SerializerProvider provider)
-        throws IOException, JsonGenerationException;
+        throws IOException;
 
     // Type-info-augmented case implemented as it does not usually differ between impls
     @Override
-    public void serializeWithType(Object bean, JsonGenerator jgen,
+    public void serializeWithType(Object bean, JsonGenerator gen,
             SerializerProvider provider, TypeSerializer typeSer)
-        throws IOException, JsonGenerationException
+        throws IOException
     {
         if (_objectIdWriter != null) {
-            _serializeWithObjectId(bean, jgen, provider, typeSer);
+            _serializeWithObjectId(bean, gen, provider, typeSer);
             return;
         }
 
-        String typeStr = (_typeId == null) ? null :_customTypeId(bean);
+        String typeStr = (_typeId == null) ? null : _customTypeId(bean);
         if (typeStr == null) {
-            typeSer.writeTypePrefixForObject(bean, jgen);
+            typeSer.writeTypePrefixForObject(bean, gen);
         } else {
-            typeSer.writeCustomTypePrefixForObject(bean, jgen, typeStr);
+            typeSer.writeCustomTypePrefixForObject(bean, gen, typeStr);
         }
         if (_propertyFilterId != null) {
-            serializeFieldsFiltered(bean, jgen, provider);
+            serializeFieldsFiltered(bean, gen, provider);
         } else {
-            serializeFields(bean, jgen, provider);
+            serializeFields(bean, gen, provider);
         }
         if (typeStr == null) {
-            typeSer.writeTypeSuffixForObject(bean, jgen);
+            typeSer.writeTypeSuffixForObject(bean, gen);
         } else {
-            typeSer.writeCustomTypeSuffixForObject(bean, jgen, typeStr);
+            typeSer.writeCustomTypeSuffixForObject(bean, gen, typeStr);
         }
     }
 
@@ -630,7 +630,7 @@ public abstract class BeanSerializerBase
         }
     }
     
-    private final String _customTypeId(Object bean)
+    protected final String _customTypeId(Object bean)
     {
         final Object typeId = _typeId.getValue(bean);
         if (typeId == null) {
diff --git a/src/test/java/com/fasterxml/jackson/failing/PojoAsArray646Test.java b/src/test/java/com/fasterxml/jackson/databind/struct/PojoAsArray646Test.java
similarity index 50%
rename from src/test/java/com/fasterxml/jackson/failing/PojoAsArray646Test.java
rename to src/test/java/com/fasterxml/jackson/databind/struct/PojoAsArray646Test.java
index f8df243f8..7dd342720 100644
--- a/src/test/java/com/fasterxml/jackson/failing/PojoAsArray646Test.java
+++ b/src/test/java/com/fasterxml/jackson/databind/struct/PojoAsArray646Test.java
@@ -1,17 +1,10 @@
-package com.fasterxml.jackson.failing;
+package com.fasterxml.jackson.databind.struct;
 
 import java.util.*;
 
-import com.fasterxml.jackson.annotation.JsonCreator;
-import com.fasterxml.jackson.annotation.JsonFormat;
-import com.fasterxml.jackson.annotation.JsonInclude;
-import com.fasterxml.jackson.annotation.JsonProperty;
-import com.fasterxml.jackson.annotation.JsonPropertyOrder;
-import com.fasterxml.jackson.annotation.JsonTypeInfo;
+import com.fasterxml.jackson.annotation.*;
+
 import com.fasterxml.jackson.databind.*;
-import com.fasterxml.jackson.databind.annotation.JsonTypeIdResolver;
-import com.fasterxml.jackson.databind.jsontype.TypeIdResolver;
-import com.fasterxml.jackson.databind.type.TypeFactory;
 
 public class PojoAsArray646Test extends BaseMapTest
 {
@@ -25,34 +18,12 @@ public class PojoAsArray646Test extends BaseMapTest
             attributes = new HashMap<String, TheItem>();
         }
 
-        @JsonTypeInfo(use = JsonTypeInfo.Id.CUSTOM, include = JsonTypeInfo.As.WRAPPER_ARRAY)
-        @JsonTypeIdResolver(DmTypeIdResolver.class)
+        @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.WRAPPER_ARRAY)
         public Map<String, TheItem> getAttributes() {
             return attributes;
         }
     }
 
-    @JsonInclude(JsonInclude.Include.NON_NULL)
-    @JsonFormat(shape = JsonFormat.Shape.ARRAY)
-    @JsonPropertyOrder(alphabetic = true)
-    static class TheBean {
-        private List<TheItem> items;
-
-        @JsonCreator
-        public TheBean(@JsonProperty("items") List<TheItem> items) {
-            this.items = items;
-        }
-
-
-        public List<TheItem> getItems() {
-            return items;
-        }
-
-        public void setItems(List<TheItem> items) {
-            this.items = items;
-        }
-    }
-    
     @JsonFormat(shape = JsonFormat.Shape.ARRAY)
     @JsonPropertyOrder(alphabetic = true)
     static class TheItem {
@@ -60,20 +31,12 @@ public class PojoAsArray646Test extends BaseMapTest
         @JsonFormat(shape = JsonFormat.Shape.ARRAY)
         @JsonPropertyOrder(alphabetic = true)
         public static class NestedItem {
-            private String nestedStrValue;
+            public String nestedStrValue;
 
             @JsonCreator
             public NestedItem(@JsonProperty("nestedStrValue") String nestedStrValue) {
                 this.nestedStrValue = nestedStrValue;
             }
-
-            public String getNestedStrValue() {
-                return nestedStrValue;
-            }
-
-            public void setNestedStrValue(String nestedStrValue) {
-                this.nestedStrValue = nestedStrValue;
-            }
         }
 
         private String strValue;
@@ -112,54 +75,12 @@ public class PojoAsArray646Test extends BaseMapTest
         }
     }
 
-    static class DmTypeIdResolver implements TypeIdResolver {
-
-        @Override
-        public void init(JavaType javaType) { }
-
-        @Override
-        public String idFromValue(Object o) {
-            return idFromValueAndType(o, o.getClass());
-        }
-
-        @Override
-        public String idFromValueAndType(Object o, Class<?> aClass) {
-            return o.getClass().getName();
-        }
-
-        @Override
-        public String idFromBaseType() {
-            throw new RuntimeException("Unsupported serialization case");
-        }
-
-        @Override
-        public JavaType typeFromId(String key) {
-            Class<?> clazz ;
-            try {
-                clazz = getClass().getClassLoader().loadClass(key);
-            } catch (ClassNotFoundException e) {
-                throw new RuntimeException(e);
-            }
-            return TypeFactory.defaultInstance().constructType(clazz);
-        }
-
-        @Override
-        public JsonTypeInfo.Id getMechanism() {
-            return JsonTypeInfo.Id.CUSTOM;
-        }
-
-        @Override
-        public JavaType typeFromId(DatabindContext context, String id) {
-            return typeFromId(id);
-        }
-    }
-
     /*
     /**********************************************************
     /* Tests
     /**********************************************************
      */
-    
+
     private final ObjectMapper MAPPER = new ObjectMapper();
 
     public void testWithCustomTypeId() throws Exception {
@@ -172,9 +93,10 @@ public class PojoAsArray646Test extends BaseMapTest
         outer.getAttributes().put(TheItem.class.getName(), item);
 
         String json = MAPPER.writerWithDefaultPrettyPrinter().writeValueAsString(outer);
-        System.out.println(json);
 
         Outer result = MAPPER.readValue(json, Outer.class);
         assertNotNull(result);
+        assertNotNull(result.attributes);
+        assertEquals(1, result.attributes.size());
     }
 }
