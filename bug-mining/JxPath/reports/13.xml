<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:12:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXPATH-89] Cannot compare pointers that do not belong to the same tree</title>
                <link>https://issues.apache.org/jira/browse/JXPATH-89</link>
                <project id="12310480" key="JXPATH">Commons JXPath</project>
                    <description>&lt;p&gt;For XPath &quot;$var | /MAIN/A&quot; exception is thrown:&lt;/p&gt;

&lt;p&gt;org.apache.commons.jxpath.JXPathException: Cannot compare pointers that do not belong to the same tree: &apos;$var&apos; and &apos;&apos;&lt;br/&gt;
	at org.apache.commons.jxpath.ri.model.NodePointer.compareNodePointers(NodePointer.java:665)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.model.NodePointer.compareNodePointers(NodePointer.java:649)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.model.NodePointer.compareNodePointers(NodePointer.java:649)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.model.NodePointer.compareTo(NodePointer.java:639)&lt;br/&gt;
	at java.util.Arrays.mergeSort(Arrays.java:1152)&lt;br/&gt;
	at java.util.Arrays.sort(Arrays.java:1079)&lt;br/&gt;
	at java.util.Collections.sort(Collections.java:113)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.EvalContext.constructIterator(EvalContext.java:176)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.EvalContext.hasNext(EvalContext.java:100)&lt;br/&gt;
	at org.apache.commons.jxpath.JXPathContext.selectNodes(JXPathContext.java:648)&lt;br/&gt;
	at org.apache.commons.jxpath.ri.model.VariablePointerTestCase.testUnionOfVariableAndNode(VariablePointerTestCase.java:76)&lt;/p&gt;</description>
                <environment>&lt;p&gt;codebase: 1.2 or latest version from SVN, JDK 1.4&lt;/p&gt;</environment>
        <key id="12371882">JXPATH-89</key>
            <summary>Cannot compare pointers that do not belong to the same tree</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bsp">Sergey Vladimirov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jun 2007 14:32:01 +0000</created>
                <updated>Wed, 4 Jul 2007 07:11:27 +0000</updated>
                            <resolved>Mon, 2 Jul 2007 20:48:46 +0000</resolved>
                                    <version>1.2 Final</version>
                    <version>Nightly Builds</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12505833" author="bsp" created="Mon, 18 Jun 2007 14:32:22 +0000"  >&lt;p&gt;Test case&lt;/p&gt;</comment>
                            <comment id="12509664" author="mbenson" created="Mon, 2 Jul 2007 20:48:46 +0000"  >&lt;p&gt;fixed in trunk, rev. 552591.  Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="12509751" author="bsp" created="Tue, 3 Jul 2007 05:53:17 +0000"  >&lt;p&gt;Matt,&lt;/p&gt;

&lt;p&gt;Is it possible to fix it without relaxing restriction?&lt;/p&gt;

&lt;p&gt;I.e. is there a mechanism to put some part of tree to variable, and use this variable later as part of the tree, not as part of another tree.&lt;/p&gt;

&lt;p&gt;Removing exceptions looks like just a workaround. Sorting is not working anyway.&lt;/p&gt;</comment>
                            <comment id="12509884" author="mbenson" created="Tue, 3 Jul 2007 14:28:00 +0000"  >&lt;p&gt;Pretending a variable is a child of some random parent seems like the workaround to me.  I removed the exception because I saw the problem differently:  if two nodes have no common parents, then their comparison is undefined and thus irrelevant.  I&apos;m not sure what you&apos;re referring to when you say sorting is not working.  The existing testcases that relied on the sort did not break, so I can only assume you&apos;re talking about sorting things that formerly broke in the manner of your original report.  Can you provide an example and explain what expectations you have that are not being met?&lt;/p&gt;</comment>
                            <comment id="12509956" author="bsp" created="Tue, 3 Jul 2007 17:46:01 +0000"  >&lt;p&gt;Matt,&lt;/p&gt;

&lt;p&gt;The example is in original test case. I extract several variables from original tree and want to select them (and sort) in one XPath expression.&lt;/p&gt;

&lt;p&gt;I can&apos;t do this right now, because variables are from different trees... but is it possible to &quot;remember&quot; that variables are from original tree?&lt;/p&gt;</comment>
                            <comment id="12509960" author="mbenson" created="Tue, 3 Jul 2007 18:00:24 +0000"  >&lt;p&gt;But that&apos;s just the problem:  a variable isn&apos;t part of the object graph represented by the JXPathContext; it exists parallel to that graph.  So how would you expect the results of such a query to sort?&lt;/p&gt;</comment>
                            <comment id="12510059" author="bsp" created="Wed, 4 Jul 2007 04:41:06 +0000"  >&lt;p&gt;For example, Variables interface should allow to return not the object itself, but node pointer, so value will be part of original tree.&lt;/p&gt;

&lt;p&gt;Then at &quot;sorting stage&quot; variable is unpacked and original node pointer (if such exists) is used.&lt;/p&gt;</comment>
                            <comment id="12510064" author="mbenson" created="Wed, 4 Jul 2007 05:23:47 +0000"  >&lt;p&gt;I&apos;m afraid I still don&apos;t follow you.  The variables exist as an externally-injected dataset to use in conjunction with the JXPathContext.  If in your own code you know that the variable&apos;s value is somewhere in the graph accessible from a given parent object, you may be able to do some custom work to search it out.   My current opinion is that the route by which a value is reached &lt;em&gt;defines&lt;/em&gt; its location, because multiple routes may lead to the same object.  This means that a variable rightly has no contextual information by which it can correctly be compared to true path nodes.&lt;/p&gt;</comment>
                            <comment id="12510087" author="bsp" created="Wed, 4 Jul 2007 06:51:44 +0000"  >&lt;p&gt;Let me try to implement my idea and discuss this later &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12510089" author="bsp" created="Wed, 4 Jul 2007 07:08:58 +0000"  >&lt;p&gt;&quot;Hack&quot; patch is included. This patch only illustates the idea, it should not be included in project without validation.&lt;/p&gt;</comment>
                            <comment id="12510091" author="bsp" created="Wed, 4 Jul 2007 07:10:00 +0000"  >&lt;p&gt;Updates test case. See the second testUnionOfVariableByPointerAndNode() test.&lt;/p&gt;

&lt;p&gt;Main idea - to return nodePointer instead of variable value in getVariable() method.&lt;/p&gt;</comment>
                            <comment id="12510095" author="bsp" created="Wed, 4 Jul 2007 07:11:27 +0000"  >&lt;p&gt;Matt,&lt;/p&gt;

&lt;p&gt;please, look at the updated test case testUnionOfVariableByPointerAndNode(). &quot;Hach&quot; patch should be applied to jxpath/src for test case to work.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361124" name="VariablePointerTestCase.java" size="4025" author="bsp" created="Wed, 4 Jul 2007 07:10:00 +0000"/>
                            <attachment id="12360024" name="VariablePointerTestCase.java" size="2618" author="bsp" created="Mon, 18 Jun 2007 14:32:22 +0000"/>
                            <attachment id="12361123" name="hack-patch.txt" size="3511" author="bsp" created="Wed, 4 Jul 2007 07:08:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34018</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xos7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>