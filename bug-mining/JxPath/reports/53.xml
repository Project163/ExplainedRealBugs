<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:13:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXPATH-166] JXPathContextReferenceImpl.addNodePointerFactory not working anymore</title>
                <link>https://issues.apache.org/jira/browse/JXPATH-166</link>
                <project id="12310480" key="JXPATH">Commons JXPath</project>
                    <description>&lt;p&gt;I tried the following in a single test run in isolation:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;JXPathContextReferenceImpl.addNodePointerFactory(new ContainerPointerFactory());&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;and got ExceptionInInitializer, I see a refactoring for  JXPathContext done by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; in last (recent) revision 1523175. Reverting to previous 1234255 fixes the issue. &lt;/p&gt;

&lt;p&gt;The refactoring contains some static-init code in JXPathContext  that creates an instance of a subclass of JXPathContext itself... seems to trigger one of the rare occasions in which a static final field might be null, as happens then in a JXPathContextReferenceImpl constructor where final field &lt;tt&gt;nodeFactories&lt;/tt&gt; is null. My understanding is this: a call to any static method of &lt;tt&gt;JXPathContextReferenceImpl&lt;/tt&gt; triggers load of &lt;tt&gt;JXPathContext&lt;/tt&gt; class that executes static initialization code that creates a new &lt;tt&gt;JXPathContext&lt;/tt&gt; that in turn is an other &lt;tt&gt;JXPathContextReferenceImpl&lt;/tt&gt; with static final field null since the static initializer of its super class must still terminate. See something similar in &lt;a href=&quot;http://stackoverflow.com/a/2547638/1536382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/2547638/1536382&lt;/a&gt; and &lt;a href=&quot;http://stackoverflow.com/questions/2547713/why-static-fields-are-not-initialized-in-time&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/2547713/why-static-fields-are-not-initialized-in-time&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;My fix is either to restore the volatile lazy initializaton just for &lt;tt&gt;compilationContext&lt;/tt&gt; or, perhaps (not sure), just create a new context each time in the &lt;tt&gt;compile(xpath)&lt;/tt&gt; static method.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ExceptionInInitializerError
	at org.apache.commons.jxpath.ri.AddNodePointerFactoryTest.testAddFactory(AddNodePointerFactoryTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.NullPointerException
	at org.apache.commons.jxpath.ri.JXPathContextReferenceImpl.&amp;lt;init&amp;gt;(JXPathContextReferenceImpl.java:191)
	at org.apache.commons.jxpath.ri.JXPathContextReferenceImpl.&amp;lt;init&amp;gt;(JXPathContextReferenceImpl.java:178)
	at org.apache.commons.jxpath.ri.JXPathContextFactoryReferenceImpl.newContext(JXPathContextFactoryReferenceImpl.java:39)
	at org.apache.commons.jxpath.JXPathContext.newContext(JXPathContext.java:425)
	at org.apache.commons.jxpath.JXPathContext.&amp;lt;clinit&amp;gt;(JXPathContext.java:389)
	... 19 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12693042">JXPATH-166</key>
            <summary>JXPathContextReferenceImpl.addNodePointerFactory not working anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="vivodamichele@hotmail.com">Michele Vivoda</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Feb 2014 05:04:55 +0000</created>
                <updated>Thu, 6 Feb 2014 19:22:33 +0000</updated>
                            <resolved>Tue, 4 Feb 2014 16:40:45 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>1.4.0</fixVersion>
                    <fixVersion>Nightly Builds</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13890832" author="garydgregory" created="Tue, 4 Feb 2014 16:40:45 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;revert -N C:/vcs/svn/apache/commons/trunks-proper/jxpath/src/java/org/apache/commons/jxpath/JXPathContext.java
    Reverted C:/vcs/svn/apache/commons/trunks-proper/jxpath/src/java/org/apache/commons/jxpath/JXPathContext.java
diff --summarize --depth=infinity --ignoreAncestry -r 1523175:1523033 https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk
merge --depth=infinity -r1523175:1523174 https://svn.apache.org/repos/asf/commons/proper/jxpath/trunk C:/vcs/svn/apache/commons/trunks-proper/jxpath
    --- Reverse-merging r1523175 through r1523174 into C:/vcs/svn/apache/commons/trunks-proper/jxpath
    U   C:/vcs/svn/apache/commons/trunks-proper/jxpath/src/java/org/apache/commons/jxpath/JXPathContext.java
    Merge info recorded for C:/vcs/svn/apache/commons/trunks-proper/jxpath
     U  C:/vcs/svn/apache/commons/trunks-proper/jxpath
    Merge complete.
    ===== File Statistics: =====
    Updated: 1
    ==== Property Statistics: =====
    Updated: 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12664453">JXPATH-162</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s1p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>