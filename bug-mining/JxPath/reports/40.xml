<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:12:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXPATH-12] Descendant or self axis does not work correctly at root node</title>
                <link>https://issues.apache.org/jira/browse/JXPATH-12</link>
                <project id="12310480" key="JXPATH">Commons JXPath</project>
                    <description>&lt;p&gt;Given the following XML document: &amp;lt;root id=&quot;1234&quot;/&amp;gt;&lt;br/&gt;
and the XPath: //root/@id/text().&lt;/p&gt;

&lt;p&gt;JXPath returns null instead of &quot;1234&quot;.&lt;/p&gt;

&lt;p&gt;JXPathContext context = JXPathContext.newContext(doc);&lt;br/&gt;
assertEquals(value, context.selectSingleNode(&quot;//root/@id/text()&quot;));&lt;/p&gt;

&lt;p&gt;The attached JUnit test highlights the problem. It seems that JXPath does not&lt;br/&gt;
find the root node if it is accessed with the axis descendant-or-self.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342897">JXPATH-12</key>
            <summary>Descendant or self axis does not work correctly at root node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cocoa">Simon Raess</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2006 17:52:53 +0000</created>
                <updated>Thu, 11 Sep 2008 16:19:48 +0000</updated>
                            <resolved>Wed, 10 Jan 2007 18:45:54 +0000</resolved>
                                    <version>1.2 Final</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12411393" author="cocoa" created="Thu, 9 Feb 2006 17:54:26 +0000"  >&lt;p&gt;Created an attachment (id=17625)&lt;br/&gt;
Unit test reproducing the described bug&lt;/p&gt;</comment>
                            <comment id="12411394" author="cocoa" created="Thu, 9 Feb 2006 17:55:29 +0000"  >&lt;p&gt;Note, I reproduced that bug using the JDOM model. I have not checked whether it&lt;br/&gt;
works in other models.&lt;/p&gt;</comment>
                            <comment id="12411395" author="joerg.heinicke@gmx.de" created="Fri, 10 Feb 2006 23:33:11 +0000"  >&lt;p&gt;Just wondering: Does an attribute have a text child node (from a pure XML POV)?&lt;/p&gt;

&lt;p&gt;If yes, from a JXPath POV: Might @id/text() be the problem and not the root node?&lt;/p&gt;</comment>
                            <comment id="12411396" author="cocoa" created="Sun, 12 Feb 2006 06:38:43 +0000"  >&lt;p&gt;Actually, if I&apos;m correct: @id/text() does not make sense from the XML POV. But, the issues is not related to &lt;br/&gt;
that particular XPath. It is sufficient to use //root to reproduce the problem. I&apos;m quite confident that the &lt;br/&gt;
problem is caused by a bug in JXPath (i.e. incorrect handling of // at the root of the document.&lt;/p&gt;</comment>
                            <comment id="12462163" author="sar" created="Thu, 4 Jan 2007 07:57:20 +0000"  >&lt;p&gt;Adding a patch proposition for this bug (patch.jxpath-12.txt). &lt;/p&gt;

&lt;p&gt;As written here before, bug actually appears when xpatch is like &quot;//root&quot;.&lt;br/&gt;
It appears also when a dom is inside any java structure &lt;br/&gt;
For example: map.put(&quot;test&quot;, new Document(new Element(&quot;root&quot;))); xpatch for&lt;br/&gt;
&quot;//root&quot; would return null.&lt;/p&gt;

&lt;p&gt;Exactly the same bug was both for JDom and Dom; both are fixed.&lt;/p&gt;

&lt;p&gt;Modifies 4 files:&lt;br/&gt;
 main:&lt;br/&gt;
   JDOMNodePointer.java&lt;br/&gt;
   DOMNodePointer.java&lt;br/&gt;
 tests:  &lt;br/&gt;
   JDOMModelTest.java&lt;br/&gt;
   DOMModelTest.java&lt;/p&gt;

&lt;p&gt;This patch is to latest version (2.2?), not to version 1.2, reported as affected here.&lt;/p&gt;</comment>
                            <comment id="12462419" author="cocoa" created="Fri, 5 Jan 2007 07:08:55 +0000"  >&lt;p&gt;I&apos;ve just applied your patch to version 1.2. The reported problem is solved now.&lt;/p&gt;</comment>
                            <comment id="12463668" author="mbenson" created="Wed, 10 Jan 2007 18:45:54 +0000"  >&lt;p&gt;committed to SVN HEAD.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12630238" author="mg" created="Thu, 11 Sep 2008 16:15:49 +0000"  >&lt;p&gt;The fix that is in JXPath 1.3 appears to solve only part of the problem. When the context node supplied to JXPath is a Document, the evaluation of the XPath correctly returns the expected data. However, if the context node is an Element, the xpath expression does not evaluate correctly. Specifically, the behavior in JXPath 1.3 does not appear to be consistent with javax.xml.xpath in Java 1.5 as well as the text in XPath 1.0 specification.&lt;/p&gt;

&lt;p&gt;From the Xpath specification at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/xpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/xpath&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;descendant-or-self::para selects the para element descendants of the context node and, if the context node is a para element, the context node as well&lt;/p&gt;

&lt;p&gt;Section &apos;2.5 Abbreviated Syntax&apos; clarifies with an example:&lt;/p&gt;

&lt;p&gt;//para selects all the para descendants of the document root and thus selects all para elements in the same document as the context node&lt;/p&gt;

&lt;p&gt;Please see the attached zip file (xpathEvalBug.zip) containing a package with the JUnit test org.apache.commons.jxpath.test.TestDescOrSelfEval.java that I ran in Java 1.5.&lt;/p&gt;

&lt;p&gt;I have used the same xml fragment used in the bug report:&lt;/p&gt;

&lt;p&gt;&amp;lt;root id=&apos;1234&apos;/&amp;gt;&lt;/p&gt;

&lt;p&gt;The class contains 4 tests:&lt;/p&gt;

&lt;p&gt;1. testJXPathDescOrSelfWithDoc() throws Exception tests JXPath evaluation of a descendant-or-self (&apos;//&apos;) expression on a Document context&lt;/p&gt;

&lt;p&gt;This test returns the expected data in JXPath 1.3 whereas it used to fail in JXPath 1.2.&lt;/p&gt;


&lt;p&gt;2. testJXPathDescOrSelfWithEl() throws Exception tests JXPath evaluation of a descendant-or-self (&apos;//&apos;) expression on an Element context (for &apos;root&apos;)&lt;/p&gt;

&lt;p&gt;This test does not return the expected data in JXPath 1.3. It also used to fail in JXPath 1.2.&lt;/p&gt;

&lt;p&gt;3. testXPathDescOrSelfWithDoc() tests javax.xml.xpath evaluation of a descendant-or-self (&apos;//&apos;) expression on a Document context&lt;/p&gt;

&lt;p&gt;This test returns the expected data.&lt;/p&gt;

&lt;p&gt;4. testXPathDescOrSelfWithEl() tests javax.xml.xpath evaluation of a descendant-or-self (&apos;//&apos;) expression on an Element context (for &apos;root&apos;)&lt;/p&gt;

&lt;p&gt;This test returns the expected data.&lt;/p&gt;

&lt;p&gt;If you run the attached JUnit test in java 1.5, the javax.xml.xpath implementation returns data consistent with the text of the specification. I really want to use JXPath in my project because some tests I ran show it is much faster than javax.xml.xpath. However, this issue is preventing me from migrating to JXPath. Is it possible to fix this issue? If yes, how soon would it be available for download?&lt;/p&gt;


</comment>
                            <comment id="12630240" author="mg" created="Thu, 11 Sep 2008 16:19:48 +0000"  >&lt;p&gt;Attached zip file contains a package with the JUnit test org.apache.commons.jxpath.test.TestDescOrSelfEval.java that I ran in Java 1.5 to demo a bug when an Element node context is passed to evaluate an xpath expression starting with &apos;//&apos;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334020" name="ASF.LICENSE.NOT.GRANTED--DescendantOrSelfTest.java" size="600" author="cocoa" created="Thu, 9 Feb 2006 17:54:26 +0000"/>
                            <attachment id="12348255" name="patch.jxpath-12.txt" size="3066" author="sar" created="Thu, 4 Jan 2007 07:54:26 +0000"/>
                            <attachment id="12389942" name="xpathEvalBug.zip" size="1510" author="mg" created="Thu, 11 Sep 2008 16:19:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>