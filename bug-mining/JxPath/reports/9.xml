<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:12:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXPATH-76] CompiledExpression not completely thread-safe</title>
                <link>https://issues.apache.org/jira/browse/JXPATH-76</link>
                <project id="12310480" key="JXPATH">Commons JXPath</project>
                    <description>&lt;p&gt;Some classes in compiled expressions are not thread-safe, because they lazily initialize some information that should be initialized at object construction. The classes I&apos;ve found are Path and ExpressionPath. I&apos;ve attached a path that fixes the problem. &lt;/p&gt;

&lt;p&gt;When two threads tried to initialize such an object concurrently, it was possible that the expression was evaluated as simple expression when it should have been evaluated as complex expression. See the two stack traces below (using xpath expression //ExternalData/Order/@id). The first stack trace shows the bug in action, the second how it should look:&lt;/p&gt;

&lt;p&gt;caused by java.lang.UnsupportedOperationException: Not supported node test for attributes: node()&lt;br/&gt;
	at org.apache.commons.jxpath.ri.axes.SimplePathInterpreter.getNodeIterator(SimplePathInterpreter.java(Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.axes.SimplePathInterpreter.doStepNoPredicatesStandard(SimplePathInterpreter.java(Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.axes.SimplePathInterpreter.doStep(SimplePathInterpreter.java(Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.axes.SimplePathInterpreter.interpretSimpleLocationPath(SimplePathInterpreter.java(Inlined Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.compiler.Path.getSingleNodePointerForSteps(Path.java(Inlined Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.compiler.LocationPath.computeValue(LocationPath.java(Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.JXPathContextReferenceImpl.getPointer(JXPathContextReferenceImpl.java(Compiled Code))&lt;br/&gt;
	at org.apache.commons.jxpath.ri.JXPathCompiledExpression.selectSingleNode(JXPathCompiledExpression.java(Inlined Compiled Code))&lt;/p&gt;

&lt;p&gt;This replaces the lines starting at Path.getSingleNodePointerForSteps:&lt;/p&gt;

&lt;p&gt;        LocationPath(Path).searchForPath(EvalContext) line: 183	&lt;br/&gt;
        LocationPath(Path).getSingleNodePointerForSteps(EvalContext) line: 159	&lt;/p&gt;</description>
                <environment></environment>
        <key id="12361640">JXPATH-76</key>
            <summary>CompiledExpression not completely thread-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rasss">Simon Raess</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jan 2007 13:17:51 +0000</created>
                <updated>Wed, 31 Jan 2007 19:50:40 +0000</updated>
                            <resolved>Wed, 31 Jan 2007 16:26:25 +0000</resolved>
                                    <version>1.2 Final</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12469027" author="rasss" created="Wed, 31 Jan 2007 13:18:31 +0000"  >&lt;p&gt;patch fixing (some?) multithreading bugs in compiled expressions&lt;/p&gt;</comment>
                            <comment id="12469090" author="mbenson" created="Wed, 31 Jan 2007 16:26:25 +0000"  >&lt;p&gt;It takes less analysis on my part (as a self-appointed, but non-expert, custodian of JXPath) to simply synchronize these methods, which I have done in SVN HEAD.  Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="12469179" author="cocoa" created="Wed, 31 Jan 2007 19:50:40 +0000"  >&lt;p&gt;I&apos;ve thought about that solution too, but the change without synchronized is pretty straightforward. Instead of lazy initialization, the initialization is simply moved to the constructor. There are no side-effects and the need of synchronization is completely removed. The cost of synchronization has to be paid for each expression evaluation. It is needed only on the first time. How else can I convince you? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350023" name="jxpath.patch" size="2725" author="rasss" created="Wed, 31 Jan 2007 13:18:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>146412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xppj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>