<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:13:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXPATH-151] null handling is inconsistent</title>
                <link>https://issues.apache.org/jira/browse/JXPATH-151</link>
                <project id="12310480" key="JXPATH">Commons JXPath</project>
                    <description>&lt;p&gt;Comparing a vaule to null using unequals (&amp;#33;=) yields false!&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        Map&amp;lt;String, Integer&amp;gt; m = new HashMap&amp;lt;String, Integer&amp;gt;();
        m.put(&quot;a&quot;, 1);
        m.put(&quot;b&quot;, null);
        m.put(&quot;c&quot;, 1);
        JXPathContext c = JXPathContext.newContext(m);
        System.out.println(c.getValue(&quot;a != b&quot;) + &quot; should be true&quot;);
        System.out.println(c.getValue(&quot;a != c&quot;) + &quot; should be false&quot;);
        System.out.println(c.getValue(&quot;a = b&quot;) + &quot; should be false&quot;);
        System.out.println(c.getValue(&quot;a = c&quot;) + &quot; should be true&quot;);
        System.out.println(c.getValue(&quot;not(a = b)&quot;) + &quot; should be true&quot;);
        System.out.println(c.getValue(&quot;not(a = c)&quot;) + &quot; should be false&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Output using 1.3:&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt; false should be true&lt;/font&gt;&lt;br/&gt;
false should be false&lt;br/&gt;
false should be false&lt;br/&gt;
true should be true&lt;br/&gt;
true should be true&lt;br/&gt;
false should be false&lt;/p&gt;


&lt;p&gt;In 1.2 it works correctly!&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows oracle jvm 1.6_25&lt;/p&gt;</environment>
        <key id="12509431">JXPATH-151</key>
            <summary>null handling is inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joshi">Johannes Stelzer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jun 2011 10:08:24 +0000</created>
                <updated>Wed, 8 Jun 2011 18:20:06 +0000</updated>
                            <resolved>Wed, 8 Jun 2011 18:20:06 +0000</resolved>
                                    <version>1.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13045451" author="mbenson" created="Tue, 7 Jun 2011 14:29:40 +0000"  >&lt;p&gt;Typically JXPath isn&apos;t expected to work with a &lt;tt&gt;Map&lt;/tt&gt;/&lt;tt&gt;Object[]&lt;/tt&gt;/&lt;tt&gt;Collection&lt;/tt&gt; as its root context object, although I note your comment that this works in 1.2.  Can you try adding your map to a simple object wrapper (e.g. &lt;tt&gt;org.apache.commons.lang.mutable.MutableObject&lt;/tt&gt;) and report back the results of &lt;tt&gt;&quot;value/a != value/b&quot;&lt;/tt&gt;, and &lt;tt&gt;&quot;value[@name=&apos;a&apos;] != value[@name=&apos;b&apos;]&quot;&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="13046117" author="mbenson" created="Wed, 8 Jun 2011 18:16:05 +0000"  >&lt;p&gt;Setting up a similar map to what you have described, and accessing via a bean property I still found the errors you describe.  This issue was fairly difficult to triage, but my final diagnosis is that it is indicative of a bug.  It is interesting to note that the &lt;tt&gt;value[@name=&apos;a&apos;] != value[@name=&apos;b]&lt;/tt&gt; approach succeeded, and of course the two approaches &lt;em&gt;should&lt;/em&gt; yield equivalent results for any key conforming to &lt;tt&gt;QName&lt;/tt&gt; restrictions.  I would still consider it dangerous to depend on &lt;tt&gt;null&lt;/tt&gt; values in JXPath, however.  For example, if you add a mapping of &lt;tt&gt;&quot;d&quot;:0&lt;/tt&gt; to your map, you will find that &lt;tt&gt;value[@name=&apos;d&apos;] = value[@name=&apos;b&apos;]&lt;/tt&gt; because the fact that &lt;tt&gt;d&lt;/tt&gt; refers to a numeric type forces the conversion of &lt;tt&gt;b&lt;/tt&gt;&apos;s &lt;tt&gt;null&lt;/tt&gt; value to a number, &lt;tt&gt;0.0&lt;/tt&gt;.  XPath is tricky this way, and JXPath, dealing with types unknown to the XPath specification, only becomes trickier.&lt;/p&gt;

&lt;p&gt;Having said all that, and to return to the issue at hand, I found that certain existing JXPath tests assert that it should be possible to get a &lt;tt&gt;null&lt;/tt&gt; value from the expression &lt;tt&gt;bean.nullProperty&lt;/tt&gt;, but that iterating pointers from the expression &lt;tt&gt;bean.nullProperty[1]&lt;/tt&gt; should yield no results.  But this assigns a Java-centric meaning to XPath&apos;s &lt;tt&gt;[1]&lt;/tt&gt; test, and it is my judgment that this is overstepping given that Javadoc for relevant methods states that non-Collection items should be treated as having length 1.  Making the conscious decision to &lt;em&gt;change&lt;/em&gt; an existing unit test is not a decision to make lightly, but in this case my opinion is that it is warranted.&lt;/p&gt;</comment>
                            <comment id="13046119" author="mbenson" created="Wed, 8 Jun 2011 18:20:06 +0000"  >&lt;p&gt;Committed revision 1133499.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34015</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xnrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>