{"url":"https://api.github.com/repos/blevesearch/bleve/issues/87","repository_url":"https://api.github.com/repos/blevesearch/bleve","labels_url":"https://api.github.com/repos/blevesearch/bleve/issues/87/labels{/name}","comments_url":"https://api.github.com/repos/blevesearch/bleve/issues/87/comments","events_url":"https://api.github.com/repos/blevesearch/bleve/issues/87/events","html_url":"https://github.com/blevesearch/bleve/issues/87","id":41536401,"node_id":"MDU6SXNzdWU0MTUzNjQwMQ==","number":87,"title":"run tests with race detector, observed apparent deadlock in beer-search","user":{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":93294324,"node_id":"MDU6TGFiZWw5MzI5NDMyNA==","url":"https://api.github.com/repos/blevesearch/bleve/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2014-08-29T20:23:49Z","updated_at":"2014-08-30T18:50:17Z","closed_at":"2014-08-30T18:50:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Attempted to run a term search while initial data was still indexing.\n\n```\n$ ./beer-search \n2014/08/29 16:17:01 Creating new index...\n2014/08/29 16:17:01 Listening on :8094\n2014/08/29 16:17:01 Indexing...\n2014/08/29 16:17:04 Indexed 1000 documents, in 2.96s (average 2.96ms/doc)\n2014/08/29 16:17:09 Indexed 2000 documents, in 7.51s (average 3.75ms/doc)\n2014/08/29 16:17:13 Indexed 3000 documents, in 11.76s (average 3.92ms/doc)\n2014/08/29 16:17:15 request body: {\"size\":10,\"explain\":true,\"highlight\":{},\"query\":{\"term\":\"water\"}}\n2014/08/29 16:17:15 parsed request bleve.SearchRequest{Query:(*bleve.TermQuery)(0xc20888af00), Size:10, From:0, Highlight:(*bleve.HighlightRequest)(0xc20875f060), Fields:[]string(nil), Facets:bleve.FacetsRequest(nil), Explain:true}\n2014/08/29 16:17:16 request body: {\"size\":10,\"explain\":true,\"highlight\":{},\"query\":{\"term\":\"water\"}}\n2014/08/29 16:17:16 parsed request bleve.SearchRequest{Query:(*bleve.TermQuery)(0xc208b0fc80), Size:10, From:0, Highlight:(*bleve.HighlightRequest)(0xc2088873a0), Fields:[]string(nil), Facets:bleve.FacetsRequest(nil), Explain:true}\n^\\SIGQUIT: quit\nPC=0x4045dcb\n\ngoroutine 0 [idle]:\nruntime.mach_semaphore_wait()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/sys_darwin_amd64.s:395 +0xb\nruntime.semasleep(0xffffffffffffffff)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/os_darwin.c:415 +0xa1\nruntime.notesleep(0x473df70)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/lock_sema.c:165 +0xd8\nstopm()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:954 +0xe0\nfindrunnable()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1262 +0x445\nschedule()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1345 +0xe3\npark0(0xc208b44120)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1410 +0xfe\nruntime.mcall(0x4042e47)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/asm_amd64.s:181 +0x4b\n\ngoroutine 16 [IO wait]:\nnet.runtime_pollWait(0x66a9260, 0x72, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc2080b05a0, 0x72, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc2080b05a0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).accept(0xc2080b0540, 0x4562b40, 0x0, 0x66a7450, 0x23)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_unix.go:409 +0x343\nnet.(*TCPListener).AcceptTCP(0xc2080462a0, 0x405d6d3, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/tcpsock_posix.go:234 +0x5d\nnet/http.tcpKeepAliveListener.Accept(0xc2080462a0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1947 +0x4b\nnet/http.(*Server).Serve(0xc208004fc0, 0x66a9310, 0xc2080462a0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1698 +0x91\nnet/http.(*Server).ListenAndServe(0xc208004fc0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1688 +0x14d\nnet/http.ListenAndServe(0x445fbf0, 0x5, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1778 +0x79\nmain.main()\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/examples/beer-search/main.go:74 +0x739\n\ngoroutine 19 [finalizer wait]:\nruntime.park(0x402ccf0, 0x473b368, 0x46f2ae9)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1369 +0x89\nruntime.parkunlock(0x473b368, 0x46f2ae9)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1385 +0x3b\nrunfinq()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/mgc0.c:2644 +0xcf\nruntime.goexit()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1445\n\ngoroutine 17 [syscall]:\nruntime.goexit()\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/proc.c:1445\n\ngoroutine 20 [semacquire]:\nsync.runtime_Semacquire(0xc2080047c8)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/sema.goc:199 +0x30\nsync.(*RWMutex).Lock(0xc2080047c0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/sync/rwmutex.go:83 +0xa3\ngithub.com/blevesearch/bleve.(*indexImpl).Batch(0xc208004780, 0xc20890aff0, 0x0, 0x0)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/index_impl.go:252 +0x5d\nmain.indexBeer(0x66a7b18, 0xc208004780, 0x0, 0x0)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/examples/beer-search/main.go:106 +0x454\nmain.funcÂ·002()\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/examples/beer-search/main.go:48 +0x36\ncreated by main.main\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/examples/beer-search/main.go:52 +0x261\n\ngoroutine 21 [IO wait]:\nnet.runtime_pollWait(0x66a91b0, 0x72, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc208a7e8b0, 0x72, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc208a7e8b0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).Read(0xc208a7e850, 0xc2087ab000, 0x1000, 0x1000, 0x0, 0x66a7450, 0x23)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_unix.go:232 +0x34c\nnet.(*conn).Read(0xc209107d68, 0xc2087ab000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/net.go:122 +0xe7\nnet/http.(*liveSwitchReader).Read(0xc208c89d28, 0xc2087ab000, 0x1000, 0x1000, 0xc208b8b9b0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:206 +0xaf\nio.(*LimitedReader).Read(0xc20903f2e0, 0xc2087ab000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/io/io.go:399 +0xd0\nbufio.(*Reader).fill(0xc2086e9260)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:97 +0x1b3\nbufio.(*Reader).ReadSlice(0xc2086e9260, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:298 +0x22c\nbufio.(*Reader).ReadLine(0xc2086e9260, 0x0, 0x0, 0x0, 0x403ad00, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:326 +0x69\nnet/textproto.(*Reader).readLineSlice(0xc2086e7d40, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:55 +0x9d\nnet/textproto.(*Reader).ReadLine(0xc2086e7d40, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:36 +0x4e\nnet/http.ReadRequest(0xc2086e9260, 0xc208813110, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/request.go:556 +0xc7\nnet/http.(*conn).readRequest(0xc208c89d00, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:577 +0x276\nnet/http.(*conn).serve(0xc208c89d00)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1132 +0x61e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\ngoroutine 22 [semacquire]:\nsync.runtime_Semacquire(0xc2080047cc)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/sema.goc:199 +0x30\nsync.(*RWMutex).RLock(0xc2080047c0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/sync/rwmutex.go:36 +0x5e\ngithub.com/blevesearch/bleve.(*indexImpl).Document(0xc208004780, 0xc20865eb40, 0x2b, 0x0, 0x0, 0x0)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/index_impl.go:276 +0x58\ngithub.com/blevesearch/bleve.(*indexImpl).Search(0xc208004780, 0xc208433770, 0x0, 0x0, 0x0)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/index_impl.go:357 +0xb18\ngithub.com/blevesearch/bleve/http.(*SearchHandler).ServeHTTP(0xc208096d80, 0x71bb2f8, 0xc2090d8140, 0xc208b42750)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/http/search.go:77 +0x80e\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc2080189b0, 0x71bb2f8, 0xc2090d8140, 0xc208b42750)\n    /Users/mschoch/go/src/github.com/gorilla/mux/mux.go:90 +0x28a\nnet/http.(*ServeMux).ServeHTTP(0xc208034b10, 0x71bb2f8, 0xc2090d8140, 0xc208b42750)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1511 +0x1a3\nnet/http.serverHandler.ServeHTTP(0xc208004fc0, 0x71bb2f8, 0xc2090d8140, 0xc208b42750)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1673 +0x19f\nnet/http.(*conn).serve(0xc208c89e00)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1174 +0xa7e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\ngoroutine 23 [IO wait]:\nnet.runtime_pollWait(0x66a9050, 0x72, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc208406140, 0x72, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc208406140, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).Read(0xc2084060e0, 0xc208852000, 0x1000, 0x1000, 0x0, 0x66a7450, 0x23)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_unix.go:232 +0x34c\nnet.(*conn).Read(0xc208f2c010, 0xc208852000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/net.go:122 +0xe7\nnet/http.(*liveSwitchReader).Read(0xc2087262a8, 0xc208852000, 0x1000, 0x1000, 0xc208b8bc80, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:206 +0xaf\nio.(*LimitedReader).Read(0xc208a9e380, 0xc208852000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/io/io.go:399 +0xd0\nbufio.(*Reader).fill(0xc208004840)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:97 +0x1b3\nbufio.(*Reader).ReadSlice(0xc208004840, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:298 +0x22c\nbufio.(*Reader).ReadLine(0xc208004840, 0x0, 0x0, 0x0, 0x403ad00, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:326 +0x69\nnet/textproto.(*Reader).readLineSlice(0xc208b8a030, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:55 +0x9d\nnet/textproto.(*Reader).ReadLine(0xc208b8a030, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:36 +0x4e\nnet/http.ReadRequest(0xc208004840, 0xc2088131e0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/request.go:556 +0xc7\nnet/http.(*conn).readRequest(0xc208726280, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:577 +0x276\nnet/http.(*conn).serve(0xc208726280)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1132 +0x61e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\ngoroutine 24 [IO wait]:\nnet.runtime_pollWait(0x66a8fa0, 0x72, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc2084061b0, 0x72, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc2084061b0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).Read(0xc208406150, 0xc20849e000, 0x1000, 0x1000, 0x0, 0x66a7450, 0x23)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_unix.go:232 +0x34c\nnet.(*conn).Read(0xc208f2c018, 0xc20849e000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/net.go:122 +0xe7\nnet/http.(*liveSwitchReader).Read(0xc208726328, 0xc20849e000, 0x1000, 0x1000, 0xc208a9f6c0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:206 +0xaf\nio.(*LimitedReader).Read(0xc208a9e3a0, 0xc20849e000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/io/io.go:399 +0xd0\nbufio.(*Reader).fill(0xc2083f6b40)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:97 +0x1b3\nbufio.(*Reader).ReadSlice(0xc2083f6b40, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:298 +0x22c\nbufio.(*Reader).ReadLine(0xc2083f6b40, 0x0, 0x0, 0x0, 0x403ad00, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:326 +0x69\nnet/textproto.(*Reader).readLineSlice(0xc208b8a090, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:55 +0x9d\nnet/textproto.(*Reader).ReadLine(0xc208b8a090, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:36 +0x4e\nnet/http.ReadRequest(0xc2083f6b40, 0xc208813040, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/request.go:556 +0xc7\nnet/http.(*conn).readRequest(0xc208726300, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:577 +0x276\nnet/http.(*conn).serve(0xc208726300)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1132 +0x61e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\ngoroutine 25 [IO wait]:\nnet.runtime_pollWait(0x66a8ef0, 0x72, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc208406220, 0x72, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc208406220, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).Read(0xc2084061c0, 0xc2085ca000, 0x1000, 0x1000, 0x0, 0x66a7450, 0x23)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/fd_unix.go:232 +0x34c\nnet.(*conn).Read(0xc208f2c020, 0xc2085ca000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/net.go:122 +0xe7\nnet/http.(*liveSwitchReader).Read(0xc2087263a8, 0xc2085ca000, 0x1000, 0x1000, 0xc208b8bef0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:206 +0xaf\nio.(*LimitedReader).Read(0xc208a9e3c0, 0xc2085ca000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/io/io.go:399 +0xd0\nbufio.(*Reader).fill(0xc20919e000)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:97 +0x1b3\nbufio.(*Reader).ReadSlice(0xc20919e000, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:298 +0x22c\nbufio.(*Reader).ReadLine(0xc20919e000, 0x0, 0x0, 0x0, 0x403ad00, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/bufio/bufio.go:326 +0x69\nnet/textproto.(*Reader).readLineSlice(0xc2086e7c50, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:55 +0x9d\nnet/textproto.(*Reader).ReadLine(0xc2086e7c50, 0x0, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/textproto/reader.go:36 +0x4e\nnet/http.ReadRequest(0xc20919e000, 0xc2088132b0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/request.go:556 +0xc7\nnet/http.(*conn).readRequest(0xc208726380, 0x0, 0x0, 0x0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:577 +0x276\nnet/http.(*conn).serve(0xc208726380)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1132 +0x61e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\ngoroutine 26 [semacquire]:\nsync.runtime_Semacquire(0xc2080047cc)\n    /Users/mschoch/Documents/research/go/go/src/pkg/runtime/sema.goc:199 +0x30\nsync.(*RWMutex).RLock(0xc2080047c0)\n    /Users/mschoch/Documents/research/go/go/src/pkg/sync/rwmutex.go:36 +0x5e\ngithub.com/blevesearch/bleve.(*indexImpl).Search(0xc208004780, 0xc2087ce5f0, 0x0, 0x0, 0x0)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/index_impl.go:297 +0x69\ngithub.com/blevesearch/bleve/http.(*SearchHandler).ServeHTTP(0xc208096d80, 0x71bb2f8, 0xc208ce2780, 0xc2094eeb60)\n    /Users/mschoch/go/src/github.com/blevesearch/bleve/http/search.go:77 +0x80e\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc2080189b0, 0x71bb2f8, 0xc208ce2780, 0xc2094eeb60)\n    /Users/mschoch/go/src/github.com/gorilla/mux/mux.go:90 +0x28a\nnet/http.(*ServeMux).ServeHTTP(0xc208034b10, 0x71bb2f8, 0xc208ce2780, 0xc2094eeb60)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1511 +0x1a3\nnet/http.serverHandler.ServeHTTP(0xc208004fc0, 0x71bb2f8, 0xc208ce2780, 0xc2094eeb60)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1673 +0x19f\nnet/http.(*conn).serve(0xc208726400)\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1174 +0xa7e\ncreated by net/http.(*Server).Serve\n    /Users/mschoch/Documents/research/go/go/src/pkg/net/http/server.go:1721 +0x313\n\nrax     0xe\nrbx     0x473df70\nrcx     0x7fff5fbff4f8\nrdx     0xffffffffffffffff\nrdi     0x1503\nrsi     0x0\nrbp     0x473d1a0\nrsp     0x7fff5fbff4f8\nr8      0x40\nr9      0x7fff5fbfed48\nr10     0x7fff5fbfed60\nr11     0x286\nr12     0x0\nr13     0x1e15f43db030\nr14     0x138efe6319b42e00\nr15     0x1\nrip     0x4045dcb\nrflags  0x286\ncs      0x7\nfs      0x0\ngs      0x8470000\n```\n\nIt appears all go routines are waiting for the lock, but no one has it.\n","closed_by":{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blevesearch/bleve/issues/87/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blevesearch/bleve/issues/87/timeline","performed_via_github_app":null,"state_reason":"completed"}