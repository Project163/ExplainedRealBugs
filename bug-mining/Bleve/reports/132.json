{"url":"https://api.github.com/repos/blevesearch/bleve/issues/906","repository_url":"https://api.github.com/repos/blevesearch/bleve","labels_url":"https://api.github.com/repos/blevesearch/bleve/issues/906/labels{/name}","comments_url":"https://api.github.com/repos/blevesearch/bleve/issues/906/comments","events_url":"https://api.github.com/repos/blevesearch/bleve/issues/906/events","html_url":"https://github.com/blevesearch/bleve/issues/906","id":316438315,"node_id":"MDU6SXNzdWUzMTY0MzgzMTU=","number":906,"title":"scorch docvalues panic in loadDvChunk()","user":{"login":"steveyen","id":30640,"node_id":"MDQ6VXNlcjMwNjQw","avatar_url":"https://avatars.githubusercontent.com/u/30640?v=4","gravatar_id":"","url":"https://api.github.com/users/steveyen","html_url":"https://github.com/steveyen","followers_url":"https://api.github.com/users/steveyen/followers","following_url":"https://api.github.com/users/steveyen/following{/other_user}","gists_url":"https://api.github.com/users/steveyen/gists{/gist_id}","starred_url":"https://api.github.com/users/steveyen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveyen/subscriptions","organizations_url":"https://api.github.com/users/steveyen/orgs","repos_url":"https://api.github.com/users/steveyen/repos","events_url":"https://api.github.com/users/steveyen/events{/privacy}","received_events_url":"https://api.github.com/users/steveyen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-20T23:22:10Z","updated_at":"2018-04-21T20:23:10Z","closed_at":"2018-04-21T20:17:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There was a panic on bleve commit 2d5ae21650, which has now been reverted in https://github.com/blevesearch/bleve/commit/761a2694251bc08e3280dd80403ee4c8434f95d0.\r\n\r\nThe link to the change... https://github.com/blevesearch/bleve/commit/2d5ae21650e05d26a3876b318b860546ab970a9b\r\n\r\nMore info on the panic...\r\n\r\npanic: runtime error: slice bounds out of range\r\n\r\ngoroutine 487 [running]:\r\npanic(0x18c9980, 0x2045020)\r\n    /Users/steveyen/.cbdepscache/exploded/x86_64/go-1.9.3/go/src/runtime/panic.go:540 +0x45e fp=0xc445d1d238 sp=0xc445d1d190 pc=0x102d37e\r\nruntime.panicslice()\r\n    /Users/steveyen/.cbdepscache/exploded/x86_64/go-1.9.3/go/src/runtime/panic.go:35 +0x5e fp=0xc445d1d258 sp=0xc445d1d238 pc=0x102beee\r\ngithub.com/blevesearch/bleve/index/scorch/segment/zap.(*docValueReader).loadDvChunk(0xc431870d80, 0x1, 0xc434889ee0, 0x8, 0x0)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/segment/zap/docvalues.go:149 +0x3d8 fp=0xc445d1d2e0\\\r\n sp=0xc445d1d258 pc=0x11a5578\r\ngithub.com/blevesearch/bleve/index/scorch/segment/zap.(*docValueReader).iterateAllDocValues(0xc431870d80, 0xc434889ee0, 0xc4299a34c0, 0xc427aad8e0, 0xc4\\\r\n2ffee301)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/segment/zap/docvalues.go:157 +0x148 fp=0xc445d1d380\\\r\n sp=0xc445d1d2e0 pc=0x11a5708\r\ngithub.com/blevesearch/bleve/index/scorch/segment/zap.persistMergedRest(0xc43cea1260, 0x2, 0x2, 0xc43cea1250, 0x2, 0x2, 0xc425c38000, 0x42, 0x42, 0xc433\\\r\n2c0c60, ...)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/segment/zap/merge.go:361 +0x2052 fp=0xc445d1d7c0 sp\\\r\n=0xc445d1d380 pc=0x11aaaf2\r\ngithub.com/blevesearch/bleve/index/scorch/segment/zap.MergeToWriter(0xc43cea1260, 0x2, 0x2, 0xc43cea1250, 0x2, 0x2, 0x400, 0xc42c767260, 0xc42082d2c0, 0\\\r\nxc4362cf988, ...)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/segment/zap/merge.go:119 +0x2db fp=0xc445d1d900 sp=\\\r\n0xc445d1d7c0 pc=0x11a845b\r\ngithub.com/blevesearch/bleve/index/scorch/segment/zap.Merge(0xc43cea1240, 0x2, 0x2, 0xc43cea1250, 0x2, 0x2, 0xc42082d2c0, 0x91, 0x400, 0xc420024e50, ...\\\r\n)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/segment/zap/merge.go:65 +0x31a fp=0xc445d1da70 sp=0\\\r\nxc445d1d900 pc=0x11a7caa\r\ngithub.com/blevesearch/bleve/index/scorch.(*Scorch).planMergeAtSnapshot(0xc4204be000, 0xc4201ef4d0, 0xc4206423c0, 0x0, 0x0)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/merge.go:198 +0xd73 fp=0xc445d1de00 sp=0xc445d1da70\\\r\n pc=0x11f2c83\r\ngithub.com/blevesearch/bleve/index/scorch.(*Scorch).mergerLoop(0xc4204be000)\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/merge.go:61 +0x237 fp=0xc445d1dfd8 sp=0xc445d1de00 \\\r\npc=0x11f1887\r\nruntime.goexit()\r\n    /Users/steveyen/.cbdepscache/exploded/x86_64/go-1.9.3/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc445d1dfe0 sp=0xc445d1dfd8 pc=0x105def1\r\ncreated by github.com/blevesearch/bleve/index/scorch.(*Scorch).Open\r\n    /Users/steveyen/dev/couchbase-server.vulcan/godeps/src/github.com/blevesearch/bleve/index/scorch/scorch.go:142 +0x12f\r\n","closed_by":{"login":"steveyen","id":30640,"node_id":"MDQ6VXNlcjMwNjQw","avatar_url":"https://avatars.githubusercontent.com/u/30640?v=4","gravatar_id":"","url":"https://api.github.com/users/steveyen","html_url":"https://github.com/steveyen","followers_url":"https://api.github.com/users/steveyen/followers","following_url":"https://api.github.com/users/steveyen/following{/other_user}","gists_url":"https://api.github.com/users/steveyen/gists{/gist_id}","starred_url":"https://api.github.com/users/steveyen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveyen/subscriptions","organizations_url":"https://api.github.com/users/steveyen/orgs","repos_url":"https://api.github.com/users/steveyen/repos","events_url":"https://api.github.com/users/steveyen/events{/privacy}","received_events_url":"https://api.github.com/users/steveyen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blevesearch/bleve/issues/906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blevesearch/bleve/issues/906/timeline","performed_via_github_app":null,"state_reason":"completed"}