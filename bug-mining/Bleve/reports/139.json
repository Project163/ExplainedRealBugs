{"url":"https://api.github.com/repos/blevesearch/bleve/issues/1336","repository_url":"https://api.github.com/repos/blevesearch/bleve","labels_url":"https://api.github.com/repos/blevesearch/bleve/issues/1336/labels{/name}","comments_url":"https://api.github.com/repos/blevesearch/bleve/issues/1336/comments","events_url":"https://api.github.com/repos/blevesearch/bleve/issues/1336/events","html_url":"https://github.com/blevesearch/bleve/issues/1336","id":564714375,"node_id":"MDU6SXNzdWU1NjQ3MTQzNzU=","number":1336,"title":"runtime.boundsError runtime error: index out of range when having many zap files","user":{"login":"meirwah","id":6059211,"node_id":"MDQ6VXNlcjYwNTkyMTE=","avatar_url":"https://avatars.githubusercontent.com/u/6059211?v=4","gravatar_id":"","url":"https://api.github.com/users/meirwah","html_url":"https://github.com/meirwah","followers_url":"https://api.github.com/users/meirwah/followers","following_url":"https://api.github.com/users/meirwah/following{/other_user}","gists_url":"https://api.github.com/users/meirwah/gists{/gist_id}","starred_url":"https://api.github.com/users/meirwah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meirwah/subscriptions","organizations_url":"https://api.github.com/users/meirwah/orgs","repos_url":"https://api.github.com/users/meirwah/repos","events_url":"https://api.github.com/users/meirwah/events{/privacy}","received_events_url":"https://api.github.com/users/meirwah/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":93294324,"node_id":"MDU6TGFiZWw5MzI5NDMyNA==","url":"https://api.github.com/repos/blevesearch/bleve/labels/bug","name":"bug","color":"fc2929","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-02-13T14:19:31Z","updated_at":"2020-02-17T19:39:54Z","closed_at":"2020-02-17T19:39:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When getting to many zap files (with some of them very big), I'm seeing error:\r\n```\r\n2020-02-13 10:06:11.3391 error runtime.boundsError runtime error: index out of range [-1]\r\n/usr/local/go/src/runtime/panic.go:75 (0x42f703)\r\n\tgoPanicIndex: panic(floatError)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/!roaring!bitmap/roaring@v0.0.0-20190812190320-55181d0095a7/runcontainer.go:1253 (0xe27a57)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/!roaring!bitmap/roaring@v0.0.0-20190812190320-55181d0095a7/roaring.go:263 (0xe13bb3)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/index/scorch/segment/zap/posting.go:665 (0xe62ee7)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/index/scorch/segment/zap/posting.go:530 (0xe6222d)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/index/scorch/segment/zap/posting.go:525 (0xe621a5)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/index/scorch/snapshot_index_tfr.go:149 (0xe9f8a0)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/searcher/search_term.go:105 (0xd5e283)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/searcher/search_disjunction_slice.go:240 (0xd53241)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/searcher/search_conjunction.go:251 (0xd4f26f)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/searcher/search_conjunction.go:198 (0xd4eac2)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/searcher/search_conjunction.go:216 (0xd4ed46)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/search/collector/topn.go:213 (0xea930f)\r\n/home/circleci/.go_workspace/pkg/mod/github.com/blevesearch/bleve@v0.8.2-0.20200122202155-99c4fac3d098/index_impl.go:532 (0xeb104b)\r\n```\r\n\r\nusing bleve version:\r\ngithub.com/blevesearch/bleve v0.8.2-0.20200122202155-99c4fac3d098\r\n\r\nFolder zap files on filesystem:\r\n```\r\ntotal 272G\r\ndrwx------ 2     4.0K Feb 13 10:06 .\r\ndrwx------ 3       42 Feb 12 17:45 ..\r\n-rw------- 1     6.7G Feb 12 18:15 00000000268b.zap\r\n-rw------- 1      26G Feb 12 21:21 000000005db6.zap\r\n-rw------- 1      42G Feb 12 22:22 00000000b5e0.zap\r\n-rw------- 1     3.5G Feb 12 22:28 00000000ca42.zap\r\n-rw------- 1     4.2G Feb 13 03:54 0000000127da.zap\r\n-rw------- 1      20G Feb 13 04:08 000000013874.zap\r\n-rw------- 1      40G Feb 13 04:41 00000001644a.zap\r\n-rw------- 1      15G Feb 13 05:43 00000001b9a1.zap\r\n-rw------- 1      19G Feb 13 06:19 00000001e395.zap\r\n-rw------- 1      54G Feb 13 07:49 000000022b79.zap\r\n-rw------- 1     3.4G Feb 13 07:52 000000023d7e.zap\r\n-rw------- 1      14G Feb 13 08:30 00000002703e.zap\r\n-rw------- 1      22G Feb 13 09:42 000000029ef6.zap\r\n-rw------- 1     358M Feb 13 09:44 00000002a758.zap\r\n-rw------- 1     1.6G Feb 13 09:47 00000002ac81.zap\r\n-rw------- 1     269M Feb 13 09:49 00000002aefb.zap\r\n-rw------- 1     328M Feb 13 09:50 00000002b0fd.zap\r\n-rw------- 1     105M Feb 13 10:03 00000002b34d.zap\r\n-rw------- 1     437M Feb 13 10:04 00000002b425.zap\r\n-rw------- 1     259M Feb 13 10:05 00000002b5d5.zap\r\n-rw------- 1      21M Feb 13 10:05 00000002b602.zap\r\n-rw------- 1      28M Feb 13 10:05 00000002b641.zap\r\n-rw------- 1      14M Feb 13 10:05 00000002b65a.zap\r\n-rw------- 1      36M Feb 13 10:05 00000002b67c.zap\r\n-rw------- 1      19M Feb 13 10:05 00000002b69e.zap\r\n-rw------- 1      23M Feb 13 10:05 00000002b6d8.zap\r\n-rw------- 1      50M Feb 13 10:05 00000002b6ff.zap\r\n-rw------- 1      23M Feb 13 10:05 00000002b723.zap\r\n-rw------- 1      14M Feb 13 10:05 00000002b73f.zap\r\n-rw------- 1     6.6M Feb 13 10:05 00000002b74d.zap\r\n-rw------- 1     2.6M Feb 13 10:05 00000002b753.zap\r\n-rw------- 1     2.1M Feb 13 10:05 00000002b758.zap\r\n-rw------- 1     1.1M Feb 13 10:05 00000002b75b.zap\r\n-rw------- 1     1.1M Feb 13 10:05 00000002b75e.zap\r\n-rw------- 1     646K Feb 13 10:05 00000002b75f.zap\r\n-rw------- 1     2.1G Feb 13 10:06 00000002b760.zap\r\n-rw------- 1      22M Feb 13 10:05 00000002b78c.zap\r\n-rw------- 1      22M Feb 13 10:05 00000002b7b0.zap\r\n-rw------- 1      31M Feb 13 10:06 00000002b7e4.zap\r\n-rw------- 1     8.7M Feb 13 10:06 00000002b7f4.zap\r\n-rw------- 1      22M Feb 13 10:06 00000002b81f.zap\r\n-rw------- 1      30M Feb 13 10:06 00000002b85a.zap\r\n-rw------- 1      21M Feb 13 10:06 00000002b87e.zap\r\n-rw------- 1      31M Feb 13 10:06 00000002b8b1.zap\r\n-rw------- 1     9.3M Feb 13 10:06 00000002b8c1.zap\r\n-rw------- 1      23M Feb 13 10:06 00000002b8ef.zap\r\n-rw------- 1      26M Feb 13 10:06 root.bolt\r\n```","closed_by":{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blevesearch/bleve/issues/1336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blevesearch/bleve/issues/1336/timeline","performed_via_github_app":null,"state_reason":"completed"}