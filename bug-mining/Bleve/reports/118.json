{"url":"https://api.github.com/repos/blevesearch/bleve/issues/453","repository_url":"https://api.github.com/repos/blevesearch/bleve","labels_url":"https://api.github.com/repos/blevesearch/bleve/issues/453/labels{/name}","comments_url":"https://api.github.com/repos/blevesearch/bleve/issues/453/comments","events_url":"https://api.github.com/repos/blevesearch/bleve/issues/453/events","html_url":"https://github.com/blevesearch/bleve/issues/453","id":179733903,"node_id":"MDU6SXNzdWUxNzk3MzM5MDM=","number":453,"title":"panic in collectStoreSlice.Final","user":{"login":"dtylman","id":5237465,"node_id":"MDQ6VXNlcjUyMzc0NjU=","avatar_url":"https://avatars.githubusercontent.com/u/5237465?v=4","gravatar_id":"","url":"https://api.github.com/users/dtylman","html_url":"https://github.com/dtylman","followers_url":"https://api.github.com/users/dtylman/followers","following_url":"https://api.github.com/users/dtylman/following{/other_user}","gists_url":"https://api.github.com/users/dtylman/gists{/gist_id}","starred_url":"https://api.github.com/users/dtylman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtylman/subscriptions","organizations_url":"https://api.github.com/users/dtylman/orgs","repos_url":"https://api.github.com/users/dtylman/repos","events_url":"https://api.github.com/users/dtylman/events{/privacy}","received_events_url":"https://api.github.com/users/dtylman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2016-09-28T10:18:58Z","updated_at":"2016-09-28T12:30:39Z","closed_at":"2016-09-28T12:30:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Used the following code example:\n\n``` go\npackage main\n\nimport (\n    \"fmt\"\n\n    \"github.com/blevesearch/bleve\"\n    \"os\"\n)\n\ntype Person struct {\n    ID   string `json:\"id\"`\n    Name string `json:\"name\"`\n}\n\nfunc worky(from int) error{\n    fileName:=\"/tmp/lala\"\n    idx, err := bleve.New(fileName, bleve.NewIndexMapping())\n    if err != nil {\n        return  err\n    }\n    defer idx.Close()\n    defer os.RemoveAll(fileName)\n\n    for i := 0; i < 10; i++ {\n        p := &Person{ID: fmt.Sprintf(\"%d\", i), Name: \"lala\"}\n        idx.Index(p.ID, p)\n    }\n    sr := bleve.NewSearchRequestOptions(bleve.NewMatchAllQuery(), 10, from, false)\n    sr.Fields = []string{\"*\"}\n    res, err := idx.Search(sr)\n    if err != nil {\n        return err\n    }\n    fmt.Println(res)\n    return nil\n}\n\nfunc main() {\n    err := worky(10)\n    fmt.Println(\"Worky done with: \", err)\n    err = worky(100)\n    fmt.Println(\"Worky done with: \", err)\n}\n```\n\nGot panic:\n\n```\npanic: runtime error: slice bounds out of range\n\ngoroutine 1 [running]:\npanic(0x2ba8a0, 0xc42000c0e0)\n    /usr/local/go/src/runtime/panic.go:500 +0x1a1\ngithub.com/blevesearch/bleve/search/collectors.(*collectStoreSlice).Final(0xc4201decc0, 0x64, 0xc4201deee0, 0xaf57d, 0xecf7d8f98, 0xc42c9e3f1b, 0x4a8620, 0xecf7d8f98)\n    /Users/danny/src/go/src/github.com/blevesearch/bleve/search/collectors/slice.go:55 +0xf1\ngithub.com/blevesearch/bleve/search/collectors.(*TopNCollector).finalizeResults(0xc4200d8240, 0x45b200, 0xc4201ded20, 0x8990, 0x0)\n    /Users/danny/src/go/src/github.com/blevesearch/bleve/search/collectors/topn.go:233 +0x85\ngithub.com/blevesearch/bleve/search/collectors.(*TopNCollector).Collect(0xc4200d8240, 0xe08028, 0xc42000c488, 0x45a480, 0xc4201c5da0, 0x45b200, 0xc4201ded20, 0x0, 0x0)\n    /Users/danny/src/go/src/github.com/blevesearch/bleve/search/collectors/topn.go:132 +0x2a4\ngithub.com/blevesearch/bleve.(*indexImpl).SearchInContext(0xc42013ba40, 0xe08028, 0xc42000c488, 0xc4201daf50, 0x0, 0x0, 0x0)\n    /Users/danny/src/go/src/github.com/blevesearch/bleve/index_impl.go:405 +0x306\ngithub.com/blevesearch/bleve.(*indexImpl).Search(0xc42013ba40, 0xc4201daf50, 0x1, 0x293020, 0xc4201de6e0)\n    /Users/danny/src/go/src/github.com/blevesearch/bleve/index_impl.go:339 +0x75\nmain.worky(0x64, 0x0, 0x0)\n    /Users/danny/src/go/src/github.com/demisto/installer/tester/blevental/mana.go:30 +0x3e0\nmain.main()\n    /Users/danny/src/go/src/github.com/demisto/installer/tester/blevental/mana.go:41 +0x134\nexit status 2\n```\n","closed_by":{"login":"mschoch","id":298143,"node_id":"MDQ6VXNlcjI5ODE0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/298143?v=4","gravatar_id":"","url":"https://api.github.com/users/mschoch","html_url":"https://github.com/mschoch","followers_url":"https://api.github.com/users/mschoch/followers","following_url":"https://api.github.com/users/mschoch/following{/other_user}","gists_url":"https://api.github.com/users/mschoch/gists{/gist_id}","starred_url":"https://api.github.com/users/mschoch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mschoch/subscriptions","organizations_url":"https://api.github.com/users/mschoch/orgs","repos_url":"https://api.github.com/users/mschoch/repos","events_url":"https://api.github.com/users/mschoch/events{/privacy}","received_events_url":"https://api.github.com/users/mschoch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blevesearch/bleve/issues/453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blevesearch/bleve/issues/453/timeline","performed_via_github_app":null,"state_reason":"completed"}