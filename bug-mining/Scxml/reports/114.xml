<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:32:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-251] src attribute is not available for data elements</title>
                <link>https://issues.apache.org/jira/browse/SCXML-251</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The read routine ignores the &quot;src&quot; attribute in &amp;lt;data&amp;gt; elements in the data model.&lt;/p&gt;

&lt;p&gt;The field should be available to allow for users of the library to identify data elements with a src, and process the value of the attribute.&lt;/p&gt;

&lt;p&gt;The Data class itself already has the src member, and the corresponding getters and setters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987500">SCXML-251</key>
            <summary>src attribute is not available for data elements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="tobiasli">Tobias Lippert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2016 14:44:10 +0000</created>
                <updated>Tue, 2 Aug 2016 22:54:15 +0000</updated>
                            <resolved>Tue, 2 Aug 2016 22:54:15 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15366220" author="tobiasli" created="Thu, 7 Jul 2016 14:46:29 +0000"  >&lt;p&gt;Adding the parsed attribute is straightforward, and a one-liner, and I will be happy to provide  patch for it.&lt;/p&gt;

&lt;p&gt;However, it be helpful to know which tests I should add, and where.&lt;/p&gt;

&lt;p&gt;How does the patch submission work? Do I post a patch file here, or should I push it to a git repository? (Is there a wiki page that describes the procedure?)&lt;/p&gt;</comment>
                            <comment id="15366231" author="woon_san" created="Thu, 7 Jul 2016 14:54:14 +0000"  >&lt;p&gt;Hi Tobias,&lt;/p&gt;

&lt;p&gt;The easiest way is, IMO, to fork &lt;a href=&quot;https://github.com/apache/commons-scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml&lt;/a&gt; and create a pull request. Then the pull request will be updated automatically with this jira ticket. Please prefix your pull request name with this jira ticket number. e.g, &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: ...&quot;.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="15401268" author="githubbot" created="Sun, 31 Jul 2016 17:55:27 +0000"  >&lt;p&gt;GitHub user lippertto opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: Parse src attribute of data elements&lt;/p&gt;

&lt;p&gt;    Also: reject data elements which have src and data defined.&lt;br/&gt;
    According to the scxml standard only either src or data are allowed.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/lippertto/commons-scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lippertto/commons-scxml&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6f6f0f698dd81a0220cc74d6c10f545f23374bf4&lt;br/&gt;
Author: Tobias Lippert &amp;lt;lippertto_oss@fastmail.com&amp;gt;&lt;br/&gt;
Date:   2016-07-31T17:41:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: Parse src attribute of data elements&lt;/p&gt;

&lt;p&gt;    Also: reject data elements which have src and data defined.&lt;br/&gt;
    According to the scmxl standard only src or data are allowed.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15402025" author="githubbot" created="Mon, 1 Aug 2016 13:29:49 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/scxml2/io/SCXMLReader.java &amp;#8212;&lt;br/&gt;
    @@ -1094,7 +1094,21 @@ private static void readData(final XMLStreamReader reader, final Configuration c&lt;/p&gt;

&lt;p&gt;             Data datum = new Data();&lt;br/&gt;
             datum.setId(readRequiredAV(reader, ELEM_DATA, ATTR_ID));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;datum.setExpr(readAV(reader, ATTR_EXPR));&lt;br/&gt;
    +        final String expr = readAV(reader, ATTR_EXPR);&lt;br/&gt;
    +        final String src = readAV(reader, ATTR_SRC);&lt;br/&gt;
    +&lt;br/&gt;
    +        if (expr != null &amp;amp;&amp;amp; src != null) {&lt;br/&gt;
    +          LogFactory.getLog(SCXMLReader.class).error(&lt;br/&gt;
    +              &quot;Found src and expr attributes for data node &apos;&quot; + datum.getId() + &quot;&apos;, which is not valid SCXML.&quot;);&lt;br/&gt;
    +          throw new ModelException();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think you should invoke #reportConflictingAttribute(reader, configuration, ...) instead here. That method leaves logs in a consistent manner and can handle strict or non-strict mode properly.&lt;/p&gt;</comment>
                            <comment id="15402026" author="woon_san" created="Mon, 1 Aug 2016 13:30:38 +0000"  >&lt;p&gt;Please see my comment in the PR:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think you should invoke #reportConflictingAttribute(reader, configuration, ...) instead here. That method leaves logs in a consistent manner and can handle strict or non-strict mode properly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="15402029" author="githubbot" created="Mon, 1 Aug 2016 13:32:48 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977815&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977815&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/scxml2/io/SCXMLReader.java &amp;#8212;&lt;br/&gt;
    @@ -1094,7 +1094,21 @@ private static void readData(final XMLStreamReader reader, final Configuration c&lt;/p&gt;

&lt;p&gt;             Data datum = new Data();&lt;br/&gt;
             datum.setId(readRequiredAV(reader, ELEM_DATA, ATTR_ID));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;datum.setExpr(readAV(reader, ATTR_EXPR));&lt;br/&gt;
    +        final String expr = readAV(reader, ATTR_EXPR);&lt;br/&gt;
    +        final String src = readAV(reader, ATTR_SRC);&lt;br/&gt;
    +&lt;br/&gt;
    +        if (expr != null &amp;amp;&amp;amp; src != null) 
{
    +          LogFactory.getLog(SCXMLReader.class).error(
    +              &quot;Found src and expr attributes for data node &apos;&quot; + datum.getId() + &quot;&apos;, which is not valid SCXML.&quot;);
    +          throw new ModelException();
    +        }
&lt;p&gt;    +        if (expr != null) &lt;/p&gt;
{
    +            datum.setExpr(expr);
    +        }
&lt;p&gt;    +        if (src != null) {&lt;br/&gt;
    +          datum.setSrc(src);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    it&apos;s minor, but our indentation rule is 4 spaces. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15402030" author="githubbot" created="Mon, 1 Aug 2016 13:33:34 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/java/org/apache/commons/scxml2/io/SCXMLReaderTest.java &amp;#8212;&lt;br/&gt;
    @@ -278,6 +278,23 @@ public void testSCXMLReaderGroovyClosure() throws Exception &lt;/p&gt;
{
             Assert.assertNotNull(scxml.getGlobalScript());
         }

&lt;p&gt;    +    @Test(expected=org.apache.commons.scxml2.model.ModelException.class)&lt;br/&gt;
    +    public void dataWithSrcAndExprIsRejected() throws Exception &lt;/p&gt;
{
    +      SCXMLTestHelper.parse(&quot;org/apache/commons/scxml2/io/data-with-src-and-expr.xml&quot;);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Test&lt;br/&gt;
    +    public void srcAttributeOfDataIsParsed() throws Exception &lt;/p&gt;
{
    +      SCXML scxml = SCXMLTestHelper.parse(&quot;org/apache/commons/scxml2/io/data-with-src.xml&quot;);
    +      Assert.assertNotNull(scxml);
    +      Assert.assertNotNull(scxml.getDatamodel());
    +      Assert.assertNotNull(scxml.getDatamodel().getData());
    +      Assert.assertEquals(&quot;Exactly one data element parsed.&quot;, 1, scxml.getDatamodel().getData().size());
    +      Data data = scxml.getDatamodel().getData().get(0);
    +      Assert.assertNotNull(data);
    +      Assert.assertEquals(&quot;http://www.w3.org/TR/sxcml&quot;, data.getSrc());
    +    }
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Could you also add a test to read Data#getExpr()?&lt;/p&gt;</comment>
                            <comment id="15402352" author="githubbot" created="Mon, 1 Aug 2016 16:26:38 +0000"  >&lt;p&gt;Github user lippertto commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hello Woonsan,&lt;br/&gt;
    thanks for the review. I added another commit which addresses your comments.&lt;br/&gt;
    Is there anything else?&lt;br/&gt;
    Tobias&lt;/p&gt;</comment>
                            <comment id="15404943" author="githubbot" created="Tue, 2 Aug 2016 22:45:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15404952" author="woon_san" created="Tue, 2 Aug 2016 22:53:59 +0000"  >&lt;p&gt;Thank you very much for the contribution! It&apos;s now merged.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30nlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>