<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:31:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-64] Better error reporting for ignored / misplaced elements by parser</title>
                <link>https://issues.apache.org/jira/browse/SCXML-64</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;    &amp;lt;transition event=&quot;my.event&quot; target=&quot;somewhere&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;datamodel&amp;gt;&lt;br/&gt;
	&amp;lt;data name=&quot;dummy&quot; expr=&quot;somedata&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
      /transition&amp;gt;&lt;/p&gt;

&lt;p&gt;Given the above transition, the first log logs null, send log causes a nullpointerexception.  Acording to the SCXML spec datamodel is not allowed in a transition only globally and at the state level.&lt;/p&gt;</description>
                <environment>&lt;p&gt;win xp, java 1.5&lt;/p&gt;</environment>
        <key id="12385103">SCXML-64</key>
            <summary>Better error reporting for ignored / misplaced elements by parser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ryakulis">Ross Yakulis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Dec 2007 20:29:57 +0000</created>
                <updated>Thu, 17 Jul 2008 17:57:51 +0000</updated>
                            <resolved>Sun, 4 May 2008 02:47:44 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12554031" author="rahul@apache.org" created="Fri, 21 Dec 2007 20:53:16 +0000"  >&lt;p&gt;I don&apos;t think allowing &amp;lt;datamodel&amp;gt; within &amp;lt;transition&amp;gt;s is the issue here. The SCXML parser does not support this (however, there is no usable schema / DTD at this point, so the parser doesn&apos;t complain).&lt;/p&gt;

&lt;p&gt;If there is a NPE that should probably be fixed, but I&apos;d expect a callback to the ErrorReporter, not a NPE. Please reopen if you have a complete JUnit test case, to make it easier for others to reproduce this. Thanks.&lt;/p&gt;</comment>
                            <comment id="12554042" author="ryakulis" created="Fri, 21 Dec 2007 21:45:49 +0000"  >&lt;p&gt;I believe that the bug is allowing datamodel in the transition.  And the&lt;br/&gt;
SCXML schema agrees.  The problem is the way the digester is building&lt;br/&gt;
the rules it uses the same rules for transition and state.&lt;/p&gt;

&lt;p&gt;Ross Yakulis&lt;/p&gt;

&lt;p&gt;-------- FAILS&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;tranbug&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;tranbug&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;log expr=&quot;&apos;Begin transition bug test ...&apos;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;show.bug&quot; target=&quot;end&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;datamodel&amp;gt;&lt;br/&gt;
 			&amp;lt;data name=&quot;dummy&quot; expr=&quot;&apos;somedata&apos;&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;----WORKS&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;tranbug&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;tranbug&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;datamodel&amp;gt;&lt;br/&gt;
 			&amp;lt;data name=&quot;dummy&quot; expr=&quot;&apos;somedata&apos;&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;log expr=&quot;&apos;Begin transition bug test ...&apos;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;show.bug&quot; target=&quot;end&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/scxml&amp;gt; &lt;/p&gt;
</comment>
                            <comment id="12554044" author="ryakulis" created="Fri, 21 Dec 2007 21:48:36 +0000"  >&lt;p&gt;See attached files for a test case work.xml works and fails.xml fails&lt;/p&gt;</comment>
                            <comment id="12555692" author="rahul@apache.org" created="Thu, 3 Jan 2008 22:09:35 +0000"  >&lt;p&gt;Thanks for the tests. I&apos;ve added the tests you suggest in r608646 and added you as a contributor:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The behavior of the tests is as expected. I am not sure why you say the same rules are added for &amp;lt;state&amp;gt; and &amp;lt;transition&amp;gt; (that isn&apos;t true). The &amp;lt;datamodel&amp;gt; in fails.xml is simply ignored.&lt;/p&gt;

&lt;p&gt;As a broader statement, the SCXMLParser needs to be supplied a well-formed and correct SCXML document. If that assumption doesn&apos;t hold, the results are generally not defined. Moreover, the act of creating valid SCXML documents is beyond the scope of the runtime engine (though it should try its best to complain correctly).&lt;/p&gt;

&lt;p&gt;Resolving again as Invalid.&lt;/p&gt;</comment>
                            <comment id="12555722" author="ryakulis" created="Thu, 3 Jan 2008 23:48:39 +0000"  >&lt;p&gt;Sorry, you are correct about the rules.  Not sure what I saw but the&lt;br/&gt;
rules are right, probably&lt;br/&gt;
rushing to wrap things up before the holidays.&lt;/p&gt;

&lt;p&gt;But it seems to me that instead of ignoring the misplaced &amp;lt;datamodel&amp;gt; an&lt;/p&gt;

&lt;p&gt;error should be emitted in the digester as that is invalid.  There&lt;br/&gt;
should probably be &lt;br/&gt;
some schema validation on the scxml document, before (or as) it is&lt;br/&gt;
digested.&lt;/p&gt;

&lt;p&gt;Maybe this will fix things in a future release (from&lt;br/&gt;
SCXMLDIgester.java).&lt;/p&gt;

&lt;p&gt;        //Uncomment next line after SCXML DTD is available&lt;br/&gt;
        //digester.setValidating(true);&lt;/p&gt;

&lt;p&gt;My real complaint is that the out of place &amp;lt;datamodel&amp;gt; element should be&lt;br/&gt;
flagged as invalid when the document is being digested.&lt;/p&gt;

&lt;p&gt;Ross&lt;/p&gt;

</comment>
                            <comment id="12556021" author="rahul@apache.org" created="Fri, 4 Jan 2008 18:58:52 +0000"  >&lt;p&gt;Yes, as you point out in the comment in code, the plan has been to have a validating digester, but the W3C hasn&apos;t provided a useable DTD/schema yet. I do contend that the act of validating SCXML documents is better placed with XML editors / code generators / other authoring tools etc.&lt;/p&gt;</comment>
                            <comment id="12592547" author="rahul@apache.org" created="Sat, 26 Apr 2008 02:05:40 +0000"  >&lt;p&gt;Since it doesn&apos;t look like we will have a validating digester till atleast the next draft, it makes sense to try to improve the error reporting as indicated in the discussion on this issue. I intend to take a stab at that soon.&lt;/p&gt;
</comment>
                            <comment id="12592548" author="rahul@apache.org" created="Sat, 26 Apr 2008 02:07:13 +0000"  >&lt;p&gt;Changing to a more appropriate summary and setting fix version to v0.8.&lt;/p&gt;</comment>
                            <comment id="12594053" author="rahul@apache.org" created="Sun, 4 May 2008 02:47:44 +0000"  >&lt;p&gt;The SCXMLParser class will now produce warnings as it parses misplaced / ignored elements.&lt;/p&gt;

&lt;p&gt;Closing as fixed, to be part of v0.8.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12372110" name="TransitionBugTest.java" size="3049" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                            <attachment id="12372111" name="TransitionBugTestSuite.java" size="802" author="ryakulis" created="Fri, 21 Dec 2007 21:47:29 +0000"/>
                            <attachment id="12372108" name="fails.xml" size="559" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                            <attachment id="12372109" name="works.xml" size="553" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>