<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:31:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-61] Infinite loop if an Invoker fires the done event in invoke method</title>
                <link>https://issues.apache.org/jira/browse/SCXML-61</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;With the following code&lt;/p&gt;

&lt;p&gt;public class HazInvoker implements Invoker&lt;br/&gt;
{&lt;br/&gt;
@Override public void invoke(String source, Map parameters) throws InvokerException&lt;br/&gt;
	{&lt;br/&gt;
		System.out.println(&quot;Invoker invoke source: &quot;&lt;ins&gt;source&lt;/ins&gt;&quot; params: &quot;+parameters);		&lt;br/&gt;
		SCXMLExecutor executor = scInstance.getExecutor();		&lt;br/&gt;
		TriggerEvent event=new TriggerEvent(parentStateId+&quot;.invoker.done&quot;, TriggerEvent.SIGNAL_EVENT); &lt;/p&gt;

&lt;p&gt;		//new AsyncTrigger(executor, event);&lt;br/&gt;
			try&lt;/p&gt;
			{
				executor.triggerEvent(event);
			}
&lt;p&gt;			catch (ModelException ex)&lt;/p&gt;
			{			
				ex.printStackTrace();
			}
&lt;p&gt;	}&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;main&quot; java.lang.StackOverflowError&lt;br/&gt;
	at java.util.Vector.addElement(Vector.java:573)&lt;br/&gt;
	at java.util.Stack.push(Stack.java:50)&lt;br/&gt;
...&lt;br/&gt;
	at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.initiateInvokes(SCXMLSemanticsImpl.java:824)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:142)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvent(SCXMLExecutor.java:160)&lt;br/&gt;
	at com.hazlorealidad.fsm.HazInvoker.invoke(HazInvoker.java:37)&lt;br/&gt;
	at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.initiateInvokes(SCXMLSemanticsImpl.java:824)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:142)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvent(SCXMLExecutor.java:160)&lt;br/&gt;
	at com.hazlorealidad.fsm.HazInvoker.invoke(HazInvoker.java:37)&lt;/p&gt;

&lt;p&gt;The fix is to use the AsyncTrigger but the class is package private, I would be good to change it to public and document the way to write a synchronous invoker in the invoke method. &lt;/p&gt;

&lt;p&gt;Something like:&lt;br/&gt;
&quot;If the Invoker completes its invocation in the invoke method it should signal the completion of the task using an AsyncTrigger, in order to avoid a stack overflow&quot;&lt;/p&gt;

&lt;p&gt;Or maybe there is another solution which would allow the event to be fired in the invoke method.&lt;/p&gt;

&lt;p&gt;Also it would be good to avoid the creation of a thread just for that, maybe an invokeLater method in the executor, like the swing dispatch loop.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all platforms&lt;/p&gt;</environment>
        <key id="12380800">SCXML-61</key>
            <summary>Infinite loop if an Invoker fires the done event in invoke method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hazlorealidad">Andy Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 18:36:35 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:54 +0000</updated>
                            <resolved>Tue, 4 Dec 2007 23:18:36 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12536689" author="rahul@apache.org" created="Mon, 22 Oct 2007 14:43:34 +0000"  >&lt;p&gt;This will be fixed in v0.7 only to the effect of adding explicit Javadoc enhancements as you suggest.&lt;/p&gt;

&lt;p&gt;Invoke has necessarily asynchronous semantics, and tends toward long(er) running interaction semantics. For synchronous interactions, custom actions (executable content) are more appropriate. AsyncTrigger was left out of the public API by design (as you indicate, it may not please everyone).&lt;/p&gt;</comment>
                            <comment id="12548461" author="rahul@apache.org" created="Tue, 4 Dec 2007 23:18:36 +0000"  >&lt;p&gt;Added Javadoc clarification per previous comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zztj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>