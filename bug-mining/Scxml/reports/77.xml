<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:31:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-177] Correct error/warning messages in SCXML reading to be up-to-date</title>
                <link>https://issues.apache.org/jira/browse/SCXML-177</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Some error/warning logs are outdated against the newest spec.&lt;br/&gt;
For example,&lt;/p&gt;

&lt;p&gt;org.apache.commons.scxml2.model.ModelException: No SCXML child state with ID &quot;null&quot; found; illegal initialstate for SCXML document&lt;br/&gt;
	at org.apache.commons.scxml2.io.ModelUpdater.logAndThrowModelError(ModelUpdater.java:297)&lt;/p&gt;

&lt;p&gt;It should inform of &apos;initial&apos;, not &apos;initialstate&apos; and check if it is not set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681684">SCXML-177</key>
            <summary>Correct error/warning messages in SCXML reading to be up-to-date</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Nov 2013 23:25:06 +0000</created>
                <updated>Thu, 5 Dec 2013 13:05:40 +0000</updated>
                            <resolved>Thu, 5 Dec 2013 03:13:57 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13834547" author="woon_san" created="Thu, 28 Nov 2013 06:40:18 +0000"  >&lt;p&gt;Fixed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changed &apos;... initialstate ...&apos; to &apos;... initial state ...&apos; in error message.&lt;/li&gt;
	&lt;li&gt;Also, there will be no logs like &apos;No SCXML child state with ID &quot;null&quot; found&apos;  thanks to the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-178&quot; title=&quot;Initial state ID attribute in SCXML element shouldn&amp;#39;t be mandatory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-178&quot;&gt;&lt;del&gt;SCXML-178&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13836640" author="woon_san" created="Mon, 2 Dec 2013 16:12:16 +0000"  >&lt;p&gt;Reopening this because it doesn&apos;t give a warning or error when there&apos;s a custom action with wrong local name in execution block.&lt;/p&gt;

&lt;p&gt;The SCXMLReader.java currently doesn&apos;t care of the case when no proper custom action is found:&lt;/p&gt;

&lt;p&gt;                        for (CustomAction ca : configuration.customActions) {&lt;br/&gt;
                            if (ca.getNamespaceURI().equals(nsURI) &amp;amp;&amp;amp; ca.getLocalName().equals(name)) &lt;/p&gt;
{
                                readCustomAction(reader, configuration, ca, tt, executable, iff);
                            }
&lt;p&gt;                        }&lt;/p&gt;

&lt;p&gt;It should give a warning for the unknown custom action element at least.&lt;/p&gt;</comment>
                            <comment id="13836990" author="woon_san" created="Mon, 2 Dec 2013 22:23:42 +0000"  >&lt;p&gt;Committed the changes to give a proper warning when there&apos;s no registered custom action in SCXML even in case there&apos;s no custom actions.&lt;br/&gt;
I&apos;ll keep this issue open for the time being in order to fix other possible error/warning logging improvements.&lt;/p&gt;</comment>
                            <comment id="13837507" author="adouma" created="Tue, 3 Dec 2013 09:49:36 +0000"  >&lt;p&gt;I find it odd the SCXMLReader ignores and only warns about unknown custom actions (within a known namespace).&lt;br/&gt;
Seems to me the SCXML document cannot be properly executed then, so why not reporting it as an error?&lt;br/&gt;
Is there anything in the spec saying such errors should be ignored?&lt;br/&gt;
If not, I would suggest hardening the behavior and make it an error instead.&lt;/p&gt;</comment>
                            <comment id="13837770" author="woon_san" created="Tue, 3 Dec 2013 15:01:23 +0000"  >&lt;p&gt;I couldn&apos;t find any statement specifying that. And I agree that it should&apos;ve been logged as ERROR level.&lt;br/&gt;
SCXMLReader invokes #reportIgnoredElement() and it leaves a warning log and invokes XMLReporter#report() in the end.&lt;br/&gt;
The current warnings in #reportIgnoredElement() are logged when there are unexpected or invalid elements inside an SCXML element (e.g, no &apos;data&apos; element inside &apos;datamodel&apos;). So, I think this warning should be logged as ERROR level. In that way, users can be informed of the error more clearly.&lt;/p&gt;</comment>
                            <comment id="13837794" author="adouma" created="Tue, 3 Dec 2013 15:30:47 +0000"  >&lt;p&gt;Logging as ERROR is an improvement, but shouldn&apos;t this better result in a ModelException instead (too)?&lt;br/&gt;
IMO such a SCXML definition cannot be regarded as valid when elements are &apos;dropped&apos; silently.&lt;/p&gt;

&lt;p&gt;From this regard the SCXMLReader#reportIgnoredElement method is questionable itself.&lt;br/&gt;
Maybe we could/should introduce a &apos;strict&apos; SCXMLReader flag, which when true (default) would fail with ModelExceptions in such cases?&lt;br/&gt;
For backwards compatibility this &apos;strict&apos; flag then could be set to false if so desired.&lt;br/&gt;
WDYT?&lt;/p&gt;</comment>
                            <comment id="13837818" author="woon_san" created="Tue, 3 Dec 2013 15:51:47 +0000"  >&lt;p&gt;Sounds like a plan!&lt;br/&gt;
It&apos;s a good idea to have a flag to use &apos;strict&apos; mode in SCXMLReader with keeping the backward compatibility.&lt;/p&gt;</comment>
                            <comment id="13837820" author="rahul@apache.org" created="Tue, 3 Dec 2013 15:52:50 +0000"  >&lt;p&gt;+1 to having a strict and lenient configuration for the SCXMLReader.&lt;/p&gt;

&lt;p&gt;I suggest not changing behavior to throw a ModelException in all cases. Besides the compatibility aspect of doing this, leniency is appropriate or even desired in certain usecases involving compound namespace documents where not all parts of the document may relate to (or be generated for) the purposes of the document controller or state machine.&lt;/p&gt;</comment>
                            <comment id="13837829" author="adouma" created="Tue, 3 Dec 2013 15:58:29 +0000"  >&lt;p&gt;Ah, that makes sense, I agree for some cases it might be needed to support lenient configurations.&lt;br/&gt;
Thanks for chiming in Rahul!&lt;/p&gt;</comment>
                            <comment id="13837906" author="woon_san" created="Tue, 3 Dec 2013 17:08:46 +0000"  >&lt;p&gt;Thanks for the suggestions!&lt;/p&gt;

&lt;p&gt;I&apos;ve looked up how JEXL is doing with that kind of options as an example. It has strict/lenient option to determine whether or not it is an error to throw an exeption, and silent option to determine whether or not it should leave warning logs. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
So, I think we can add the following in SCXMLReader:&lt;br/&gt;
+ boolean isStrict();&lt;br/&gt;
+ void setStrict(boolean strict);&lt;br/&gt;
+ boolean isLenient();&lt;br/&gt;
+ void setLenient(boolean lenient); // &lt;/p&gt;
{ this.strict = !lenient; }
&lt;p&gt;+ boolean isSilent();&lt;br/&gt;
+ void setSilent(boolean silent);&lt;/p&gt;

&lt;p&gt;The default options can be ( !strict &amp;amp;&amp;amp; !silent ), which gives warning logs by default.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl2/JexlEngine.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl2/JexlEngine.html&lt;/a&gt;&lt;br/&gt;
     (The javadoc was not precise about &apos;silent&apos; option. It only determine whether or not the exception should be logged as WARN level. It doesn&apos;t force to throw an exception.)&lt;/p&gt;</comment>
                            <comment id="13838517" author="adouma" created="Wed, 4 Dec 2013 02:28:38 +0000"  >&lt;p&gt;Hi Woonsan,&lt;/p&gt;

&lt;p&gt;I looked into the JexlEngine silent mode and it does make a difference with regards to behavior. &lt;/p&gt;

&lt;p&gt;If (silent==false) (the default) it will throw a JexlException, which then is re-thrown by the (SCXML) JexlEvaluator as SCXMLExpressionException, which is good.&lt;br/&gt;
If (silent==true) Jexl will only log a WARN message and return null (within its invocation context).&lt;br/&gt;
So IMO sticking to the default silent==false for the JexlEngine should be fine, probably without need to also configure/override this through the SCXMLReader.&lt;/p&gt;

&lt;p&gt;The (strict==true) setting for JexlEngine should IMO also be preferred, as default, but has a most important caveat or consequence that  undefined/null variables result in an exception.&lt;br/&gt;
This will thus require somewhat more verbose scripting, e.g. like requiring &apos;!empty(foo) and foo.booleanMethod&apos; instead of more lenient &apos;foo and foo.booleanMethod&apos;.&lt;br/&gt;
Nonetheless, I&apos;d prefer using (strict==true) for both the JexlEngine and SCXMLReader as default, and providing SCXMLReader.setLenient(boolean) method to override this.&lt;/p&gt;</comment>
                            <comment id="13839024" author="woon_san" created="Wed, 4 Dec 2013 15:58:36 +0000"  >&lt;p&gt;Hi Ate,&lt;/p&gt;

&lt;p&gt;The suggested operations for strict/lenient and silent were mainly for SCXMLReader. The options in the context of SCXML reading are not really related to the JEXLEngine options which should play a role in the context of SCXML execution.&lt;br/&gt;
With this issue, I think we&apos;d better focus on strict/lenient and silent options in the SCXMLReader context in order to deal with unexpected / unknown / invalid elements in SCXML model.&lt;br/&gt;
As you&apos;re already aware of it, JexlEvaluator allows to override #createJexlEngine() to give additional options.&lt;/p&gt;

&lt;p&gt;Regarding the default options of JEXL Engine we might have to take in SCXML, I guess it is better to use JEXL Engine without any specific options as we do now. Then it means we&apos;re using the default options of JEXL engine as provided, which seems natural to me for most JEXL script users, IMHO.&lt;br/&gt;
Anyway, this JEXL default options issue can be dealt with a separate issue. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13839752" author="woon_san" created="Thu, 5 Dec 2013 03:13:01 +0000"  >&lt;p&gt;Added &apos;strict&apos; option and &apos;silent&apos; option into SCXMLReader.Configuration:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In strict mode, SCXMLReader throws a ModelException on any invalid/unknown elements in the context;&lt;br/&gt;
  in the default non-strict (lenient) mode, it doesn&apos;t throw a ModelException.&lt;/li&gt;
	&lt;li&gt;In silent mode, SCXMLReader doesn&apos;t leave any warning logs on any invalid/unknown elements in the context;&lt;br/&gt;
  in the default non-silent (verbose) mode, it leave warning logs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So example code can be like the following:&lt;/p&gt;

&lt;p&gt;        configuration = new Configuration(...);&lt;br/&gt;
        configuration.setStrict(false);&lt;br/&gt;
        configuration.setSilent(true);&lt;br/&gt;
        scxml = SCXMLReader.read(scxmlRes, configuration);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;configuration.setStrict(true) turns on the strict mode; configuration.setStrict(false) turns off the strict mode (meaning enabling the default lenient mode).&lt;/li&gt;
	&lt;li&gt;configuration.setSilent(true) turns on the silent mode; configuration.setSilent(false) turns off the silent mode (meaning enabling the default verbose mode).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Just for information, reader operations in SCXMLReader are all static members, so I put the strict and silent options in SCXMLReader.Configuration.&lt;br/&gt;
Also, I think our strict/lenient and silent/verbose options (simple model elements checking) should be much simpler than those in JEXL (more sophisticated handling for null, conditionals, etc.). So, I tried to keep it as simple as possible.&lt;/p&gt;</comment>
                            <comment id="13840061" author="adouma" created="Thu, 5 Dec 2013 13:05:40 +0000"  >&lt;p&gt;Hi Woonsan,&lt;/p&gt;

&lt;p&gt;Nice work!&lt;br/&gt;
I agree managing the JEXL Engine options for silent/strict are a separate issue, and maybe we should stick to the current &apos;lenient&apos; configurations by default for easier backwards compatibility.&lt;/p&gt;

&lt;p&gt;I like to provide an easier way to configure these properties on the JEXL Engine though, currently you have to extend the JEXLEvaluator for this which is less convenient.&lt;br/&gt;
It is trivial to improve though and I&apos;ve created separate issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-183&quot; title=&quot;Expose JexlEngine strict/silent mode settings  through the JexlEvaluator for easier customization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-183&quot;&gt;&lt;del&gt;SCXML-183&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;With these changes as well as &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-180&quot; title=&quot;Prevent NPEs for possible null value returned from Evaluator.eval* methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-180&quot;&gt;&lt;del&gt;SCXML-180&lt;/del&gt;&lt;/a&gt; the error control of SCXML has been greatly improved!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q7z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>