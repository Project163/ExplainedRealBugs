<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:32:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-233] SCInstance becomes not serialzable after triggering event</title>
                <link>https://issues.apache.org/jira/browse/SCXML-233</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Triggering an event on SCXML executor with attached JSEvaluator makes the SCInstance not-serializable. Seems like SCXMLExecutor#.triggerEvent invocation sets a reference to SCXMLExecutor in SCInstance.&lt;/p&gt;

&lt;p&gt;Reproducer: &lt;a href=&quot;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.NotSerializableException: org.apache.commons.scxml2.SCXMLExecutor
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at com.airhacks.stateful.machine.boundary.StateManagerTest.reserialize(StateManagerTest.java:88)
	at com.airhacks.stateful.machine.boundary.StateManagerTest.triggerWithParametersWithDetachment(StateManagerTest.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12841865">SCXML-233</key>
            <summary>SCInstance becomes not serialzable after triggering event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="abien">Adam Bien</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2015 01:23:55 +0000</created>
                <updated>Tue, 21 Jul 2015 13:50:14 +0000</updated>
                            <resolved>Sun, 12 Jul 2015 17:12:09 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14609486" author="woon_san" created="Wed, 1 Jul 2015 02:59:09 +0000"  >&lt;p&gt;I don&apos;t see an attachment or the test class.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Seems like SCXMLExecutor#.triggerEvent invocation sets a reference to SCXMLExecutor in SCInstance&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As far as I know, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adouma&quot; class=&quot;user-hover&quot; rel=&quot;adouma&quot;&gt;adouma&lt;/a&gt; resolved the issue while fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-196&quot; title=&quot;Redefine SCXMLSemantics to align with the Algorithm for SCXML Interpretation as described in the SCXML specification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-196&quot;&gt;&lt;del&gt;SCXML-196&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-197&quot; title=&quot;Better separation of concern between SCXMLExecutor and SCInstance and introducing a new SCXMLExecutionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-197&quot;&gt;&lt;del&gt;SCXML-197&lt;/del&gt;&lt;/a&gt;. So, SCInstance doesn&apos;t have SCXMLExecutor member any more.&lt;/p&gt;</comment>
                            <comment id="14609490" author="abien" created="Wed, 1 Jul 2015 03:06:38 +0000"  >&lt;p&gt;The code was moved to: &lt;a href=&quot;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;It is the ignored test.&lt;/p&gt;

&lt;p&gt;I&apos;m working with 2.0 Snapshots. Also it seems only to happen with JSEvaluator. The serialization of SCInstance#contexts (Map&amp;lt;EnterableState, Context&amp;gt;) fails.&lt;/p&gt;
</comment>
                            <comment id="14616324" author="abien" created="Tue, 7 Jul 2015 07:37:40 +0000"  >&lt;p&gt;Could you reproduce the problem? Is there an easy way to capture the state of the STM without SCInstance? Just the current state would be sufficient.&lt;/p&gt;

&lt;p&gt;thanks in advance,&lt;/p&gt;

&lt;p&gt;&#8212;adam&lt;/p&gt;
</comment>
                            <comment id="14618454" author="woon_san" created="Wed, 8 Jul 2015 11:38:43 +0000"  >&lt;p&gt;Now I see the issue clearly. Thank you very much for reporting this!&lt;br/&gt;
One mistake on your side is that the SCInstance object must be detached before serialization.&lt;/p&gt;

&lt;p&gt;So, you should have done like this for instance:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        reserialized = copy.detachInstance();  &lt;span class=&quot;code-comment&quot;&gt;// detach first!
&lt;/span&gt;        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this wouldn&apos;t solve the serialization problem thoroughly yet. I see some objects are not serializable at all. e.g, org.apache.commons.scxml2.env.javascript.JSFunctions.&lt;br/&gt;
I think we should fix this area and test thoroughly now.. I also found another issue with ECMAScript and filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-234&quot; title=&quot;Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-234&quot;&gt;&lt;del&gt;SCXML-234&lt;/del&gt;&lt;/a&gt; to fix..&lt;/p&gt;</comment>
                            <comment id="14619577" author="adouma" created="Wed, 8 Jul 2015 23:24:35 +0000"  >&lt;p&gt;See my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-234&quot; title=&quot;Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-234&quot;&gt;&lt;del&gt;SCXML-234&lt;/del&gt;&lt;/a&gt;: I think we should upgrade/require Java 8 and replace/re-implement the Javascript support based on the new nashorn engine.&lt;br/&gt;
The current javascript support is not very functional and broken for many of the spec tests. &lt;/p&gt;</comment>
                            <comment id="14623903" author="woon_san" created="Sun, 12 Jul 2015 17:11:43 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=commons-scxml.git;a=commit;h=046f547b562ba2df5bc03f9a5c0125840a39cb2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=commons-scxml.git;a=commit;h=046f547b562ba2df5bc03f9a5c0125840a39cb2f&lt;/a&gt;.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Nashorn JavaScript engine puts &quot;nashorn.global&quot; in JSBindings while evaluating. The globals is not serializable, so it bothers serializing context object.&lt;/li&gt;
	&lt;li&gt;So, putting the global only into Bindings now, which let us not have to serialize it.&lt;/li&gt;
	&lt;li&gt;Also, mark JSFunctions as Serializable.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14623908" author="woon_san" created="Sun, 12 Jul 2015 17:18:43 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abien&quot; class=&quot;user-hover&quot; rel=&quot;abien&quot;&gt;abien&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;It was fixed in master branch now. By the way, Commons SCXML has just moved to GIT, so you should clone it from either github or apache git to build a snapshot version. You will be able to find those URLs here: &lt;a href=&quot;https://git.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git.apache.org&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Regarding your test case failure in StateManager#triggerWithParametersWithDetachment(), it will work if you change the following lines:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;BEFORE
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JsonObject result = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cut.trigger(stateMachineId, event, condition);
        &lt;span class=&quot;code-comment&quot;&gt;//serialization after state change fails
&lt;/span&gt;        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;AFTER
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JsonObject result = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cut.trigger(stateMachineId, event, condition);
        &lt;span class=&quot;code-comment&quot;&gt;//serialization after state change fails
&lt;/span&gt;        reserialized = copy.detachInstance();
        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please note that you should detach the instance by calling SCXMLExecutor#detachInstance() before serializing.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="14624184" author="abien" created="Mon, 13 Jul 2015 04:23:40 +0000"  >&lt;p&gt;Big thanks! I will unit and integration test your fix this week!&lt;/p&gt;

&lt;p&gt;Moving to git is a great idea. &lt;/p&gt;
</comment>
                            <comment id="14630763" author="abien" created="Fri, 17 Jul 2015 04:42:39 +0000"  >&lt;p&gt;I adjusted the test. It still fails with: &lt;/p&gt;

&lt;p&gt;java.io.NotSerializableException: org.apache.commons.scxml2.env.javascript.JSFunctions&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)&lt;br/&gt;
	at java.util.HashMap.writeObject(HashMap.java:1354)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)&lt;br/&gt;
	at java.util.HashMap.writeObject(HashMap.java:1354)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at com.airhacks.stateful.machine.boundary.StateManagerTest.reserialize(StateManagerTest.java:88)&lt;br/&gt;
	at com.airhacks.stateful.machine.boundary.StateManagerTest.triggerWithParametersWithDetachment(StateManagerTest.java:78)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:242)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:137)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)&lt;/p&gt;

&lt;p&gt;Did I picked an old snapshot?&lt;/p&gt;</comment>
                            <comment id="14631234" author="woon_san" created="Fri, 17 Jul 2015 11:58:04 +0000"  >&lt;p&gt;Yes, I think so. JSFunctions was marked as Serializable with my commit:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/commons-scxml/blob/master/src/main/java/org/apache/commons/scxml2/env/javascript/JSFunctions.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/blob/master/src/main/java/org/apache/commons/scxml2/env/javascript/JSFunctions.java&lt;/a&gt;&lt;br/&gt;
Could you try to clone and build/install it locally instead?&lt;br/&gt;
I don&apos;t know if there&apos;s a snapshot repository in ASF side for SCXML. Let me find it out, but it would take time to fix that infra issue if there&apos;s one to update.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14635134" author="abien" created="Tue, 21 Jul 2015 13:50:14 +0000"  >&lt;p&gt;I freshly build scxml from github and it worked. However: the snapshot in the repo is from: commons-scxml2-2.0-20150409 (April). It would be important to push your fixes into the repo. I will raise a separate issue for that.&lt;/p&gt;

&lt;p&gt;Thanks again!,&lt;/p&gt;

&lt;p&gt;adam&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gpsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>