<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:32:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-101] &lt;datamodel&gt; not handled as global</title>
                <link>https://issues.apache.org/jira/browse/SCXML-101</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXML spec says: &quot;Logically, there is a single globally visible data model for the entire state machine. As an authoring convenience, however, we allow &amp;lt;datamodel&amp;gt; as a child of any &amp;lt;state&amp;gt;, thus allowing parts of the data model to be distributed throughout the document closer to the locations where the data will be accessed. However, all instances of the &amp;lt;data&amp;gt; element are created and initialized when the state machine is instantiated and may be accessed from any state at any time.&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;There are two issues:&lt;/p&gt;

&lt;p&gt;1) The current impl of commons-scxml introduced a scoping, such that &amp;lt;data&amp;gt; in &amp;lt;datamodel&amp;gt; elements contained within a &amp;lt;state&amp;gt; are only visible in this state and its children (due to context chain). I.e. the &amp;lt;datamodel&amp;gt; is not entirely global.&lt;/p&gt;

&lt;p&gt;2) Initialization of &amp;lt;datamodel&amp;gt;&apos;s contained in a &amp;lt;state&amp;gt; (i.e. non-root-datamodels) take place while entering the corresponding state for the first time while creating the context (SCXMLInstance#getContext()). But initialization of &amp;lt;data&amp;gt; elements has to take place at state machine initialization time.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/scxml/#datamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#datamodel&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410483">SCXML-101</key>
            <summary>&lt;datamodel&gt; not handled as global</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2008 15:18:09 +0000</created>
                <updated>Sun, 10 Dec 2017 21:41:56 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 21:41:56 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12655694" author="rahul@apache.org" created="Thu, 11 Dec 2008 16:45:13 +0000"  >&lt;p&gt;Setting fix version to v0.10 but some of this actually needs more clarification. Regarding the two issues you mention:&lt;/p&gt;

&lt;p&gt;1) Its fairly easy to produce a flat datamodel actually. The API is designed so that many flavors of flat or heirarchical data modeling in possible with the Commons SCXML library. The default, as you mention, is closer to what you&apos;d expect in procedural languages (equivalent to block scopes where a child has access to the parent&apos;s data space). The place where the decision gets made is in Evaluator#newContext(Context), here it is in the v0.9 Javadoc (long URL):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/scxml/0.9/apidocs/org/apache/commons/scxml/Evaluator.html#newContext(org.apache.commons.scxml.Context&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml/0.9/apidocs/org/apache/commons/scxml/Evaluator.html#newContext(org.apache.commons.scxml.Context&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The evaluator implementations by default return a new context, but if the same context is returned (which is also the root context) one will end up with a flat datamodel.&lt;/p&gt;

&lt;p&gt;2) We should probably revisit the language in the spec. For large statemachines (with many states), the creation of all datamodels at initialization does seem like bloat. Moreover, when we have such state machines, usually any one single execution will only traverse a limited number of states. The JIT (just-in-time) approach Commons SCXML takes is quite effective and efficient in this regard.&lt;/p&gt;

</comment>
                            <comment id="13824710" author="woon_san" created="Sun, 17 Nov 2013 02:10:27 +0000"  >&lt;p&gt;For the record, in the latest version of the spec, the part assisting the first issue seems to have been removed. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
So, I assume the scoping is up to implementations.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2013/WD-scxml-20130801/#datamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2013/WD-scxml-20130801/#datamodel&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14317143" author="adouma" created="Wed, 11 Feb 2015 22:48:20 +0000"  >&lt;p&gt;Some of the W3C specification implementation test &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; actually do check and require a &apos;flat&apos; or global datamodel.&lt;br/&gt;
To allow enforcing and passing these tests, I&apos;ll add an option to SCXMLExecutor to restrict usage of a &apos;single&apos; Context, e.g. scxmlExecutor.setSingleContext(boolean)&lt;br/&gt;
The default of course remains using hierarchical contexts. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/Voice/2013/scxml-irp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/Voice/2013/scxml-irp/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14317153" author="adouma" created="Wed, 11 Feb 2015 22:53:30 +0000"  >&lt;p&gt;The early vs lazy initialization as defined by the specification is not yet covered properly, so I&apos;ll leave this issue open for now to be resolved later.&lt;/p&gt;</comment>
                            <comment id="14317357" author="adouma" created="Thu, 12 Feb 2015 01:34:36 +0000"  >&lt;p&gt;I just noticed the global datamodel (scxml root &amp;lt;datamodel&amp;gt; element) was initialized and stored in the &lt;b&gt;root&lt;/b&gt; context, not the &lt;b&gt;global&lt;/b&gt; context (also and only) used as &lt;b&gt;single&lt;/b&gt; context.&lt;br/&gt;
I&apos;ve updated this to now also (always) use the global context, which broke several unit tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
To still allow and provide access to the initial &amp;lt;datamodel&amp;gt; data, I&apos;ve added access to the global context from the SCXMLExecutor.&lt;/p&gt;

&lt;p&gt;NB: any current (external) usage of Commons SCXML expecting these to still be available from the root context will have to be updated to use this global context instead.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a53b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267291</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>