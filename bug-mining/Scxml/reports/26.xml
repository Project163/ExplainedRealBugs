<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:31:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-67] &lt;state&gt; can&apos;t have &lt;parallel&gt; </title>
                <link>https://issues.apache.org/jira/browse/SCXML-67</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;According to the latest SCXML W/D the &amp;lt;state&amp;gt; can have &amp;lt;parallel&amp;gt; as its child.&lt;br/&gt;
But, Commons SCXML 0.7 doesn&apos;t  seems to support that. &lt;/p&gt;

&lt;p&gt;The  org.apache.commons.scxml.io.SCXMLParser can&apos;t parse this scxml doc. &lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;microwave&quot;&amp;gt; &lt;br/&gt;
  &amp;lt;state id=&quot;microwave&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;initial&amp;gt;&lt;br/&gt;
          &amp;lt;transition  target=&quot;parts&quot;/&amp;gt;	 &lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;parallel id=&quot;parts&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;oven&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;initial&amp;gt;&lt;br/&gt;
               &amp;lt;transition  target=&quot;oven2&quot;/&amp;gt;	 &lt;br/&gt;
          &amp;lt;/initial&amp;gt;&lt;br/&gt;
             &amp;lt;state id= &quot;oven2&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;transition event=&quot;exit&quot;  target=&quot;dest&quot;/&amp;gt;&lt;br/&gt;
             &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;door&quot;&amp;gt;&lt;br/&gt;
             &amp;lt;initial&amp;gt;&lt;br/&gt;
                   &amp;lt;transition  target=&quot;door2&quot;/&amp;gt;	 &lt;br/&gt;
             &amp;lt;/initial&amp;gt;&lt;br/&gt;
              &amp;lt;state id= &quot;door2&quot;&amp;gt;&lt;br/&gt;
	 &amp;lt;transition event=&quot;e&quot; target=&quot;dest&quot;/&amp;gt;&lt;br/&gt;
             &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;/state&amp;gt;&lt;br/&gt;
    &amp;lt;/parallel&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;state id= &quot;dest&quot;  final =&quot;true&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;The SCXML  engine generates the following exception during parsing the scxml doc.&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.ClassCastException: org.apache.commons.scxml.model.Parallel&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateState(ModelUpdater.java:213)&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateSCXML(ModelUpdater.java:78)&lt;br/&gt;
	at org.apache.commons.scxml.io.SCXMLParser.parse(SCXMLParser.java:268)&lt;br/&gt;
	at org.apache.commons.scxml.io.SCXMLParser.parse(SCXMLParser.java:152)&lt;br/&gt;
	at org.apache.commons.scxml.test.StandaloneUtils.execute(StandaloneUtils.java:80)&lt;br/&gt;
	at org.apache.commons.scxml.test.StandaloneJexlExpressions.main(StandaloneJexlExpressions.java:60)&lt;/p&gt;

&lt;p&gt;So, I fixed  the &apos;updateState()&apos; in org.apache.commons.scxml.io.ModelUpdater class like this &lt;br/&gt;
(and also org.apache.commons.scxml.io.SCXMLSerializer.serializeState() )&lt;br/&gt;
        ..........&lt;br/&gt;
        } else {&lt;br/&gt;
            Iterator j = c.keySet().iterator();&lt;br/&gt;
            /* ---- your code  ----&lt;br/&gt;
            while (j.hasNext()) &lt;/p&gt;
{
                updateState((State) c.get(j.next()), targets);
            }
&lt;p&gt;             */&lt;br/&gt;
            /* -------   my fixed code ---------*/&lt;br/&gt;
            while (j.hasNext()) {&lt;br/&gt;
               TransitionTarget tt = (TransitionTarget) c.get(j.next());&lt;br/&gt;
                if (tt instanceof State) &lt;/p&gt;
{
                   updateState((State) tt, targets);
                }
&lt;p&gt; else &lt;/p&gt;
{
                   updateParallel((Parallel) tt, targets);
               }
&lt;p&gt;           }&lt;br/&gt;
          /*  ------------------------------------*/&lt;br/&gt;
        }&lt;br/&gt;
    } /* end of  &apos;updateState()&apos; */&lt;/p&gt;

&lt;p&gt;So, the engine works well. &lt;/p&gt;

&lt;p&gt;I think this is a critical bug. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12387856">SCXML-67</key>
            <summary>&lt;state&gt; can&apos;t have &lt;parallel&gt; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="timecop">Seongsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2008 07:28:38 +0000</created>
                <updated>Thu, 17 Jul 2008 17:57:51 +0000</updated>
                            <resolved>Mon, 5 May 2008 18:41:27 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12566037" author="rahul@apache.org" created="Wed, 6 Feb 2008 06:51:59 +0000"  >&lt;p&gt;Thanks for the test case and the proposed fix. Looks good, except that the else clause might need to be an else if. I am traveling till end of this month, and largely offline, but I will try to find time to get the fix in soon.&lt;/p&gt;</comment>
                            <comment id="12567404" author="rahul@apache.org" created="Sun, 10 Feb 2008 04:29:21 +0000"  >&lt;p&gt;Please try building from trunk, and if possible, let us know how things go (see changes in r620242: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=620242&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=620242&amp;amp;view=rev&lt;/a&gt; ). Leaving issue open for now.&lt;/p&gt;</comment>
                            <comment id="12567501" author="timecop" created="Mon, 11 Feb 2008 01:45:33 +0000"  >&lt;p&gt;Thanks for your fix. I will try to test for it. &lt;/p&gt;</comment>
                            <comment id="12576451" author="rahul@apache.org" created="Sat, 8 Mar 2008 00:00:04 +0000"  >&lt;p&gt;Ported to J5 branch and completed TODOs from r620242.&lt;/p&gt;</comment>
                            <comment id="12592545" author="rahul@apache.org" created="Sat, 26 Apr 2008 01:56:59 +0000"  >&lt;p&gt;I intend to close this issue as fixed in a week&apos;s time. Please post your comments if you&apos;re able to test by then.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>