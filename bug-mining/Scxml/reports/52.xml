<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:31:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SCXML-88] SCXMLSerializer does not serialize custom namespace declarations</title>
                <link>https://issues.apache.org/jira/browse/SCXML-88</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXMLSerializer writes the scxml namespace as the default namespace to the &amp;lt;scxml&amp;gt; root tag and adds a &quot;cs&quot; (&quot;commons-scxml&quot;) namespace by default.&lt;/p&gt;

&lt;p&gt;But it does not take into account that the original scxml document might contain other namespace declarations, e.g. on child tags:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; xmlns:cs=&quot;http://commons.apache.org/scxml&quot; version=&quot;1.0&quot; initial=&quot;S1&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;S1&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;!-- some E4X like condition using XML namespaces --&amp;gt;&lt;br/&gt;
  &amp;lt;!-- redefine default namespace to &quot;foo&quot; and use explicit namespace prefix for scxml:transition tag --&amp;gt;&lt;br/&gt;
  &amp;lt;scxml:transition event=&quot;foo&quot; cond=&quot;a.b.bar::c.* == 3&quot; target=&quot;S2&quot; xmlns=&quot;foo&quot; xmlns:scxml=&quot;http://www.w3.org/2005/07/scxml&quot; xmlns:bar=&quot;bar&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;/transition&amp;gt;&lt;br/&gt;
 &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;S2&quot; final=&quot;true&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;The above SCXML document is parsed properly and namespaces are forwarded to the executor (i.e. it works correct).  But if it comes to serialization the namespaces are not serialized properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408063">SCXML-88</key>
            <summary>SCXMLSerializer does not serialize custom namespace declarations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Nov 2008 11:30:12 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:16 +0000</updated>
                            <resolved>Fri, 21 Nov 2008 21:12:11 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12645975" author="ingmar" created="Sat, 8 Nov 2008 11:38:49 +0000"  >&lt;p&gt;JUnit Testcase for using namespaces in transitions&lt;/p&gt;</comment>
                            <comment id="12646134" author="rahul@apache.org" created="Sun, 9 Nov 2008 23:50:04 +0000"  >&lt;p&gt;Setting fix version to v0.9.&lt;/p&gt;

&lt;p&gt;This is going to be interesting, since we don&apos;t retain namespace prefixes for all elements (only executable content, i.e. actions). I suspect we may have to make some recommendations (or, lay some restrictions, depending how one looks at it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; about this.&lt;/p&gt;</comment>
                            <comment id="12646500" author="ingmar" created="Tue, 11 Nov 2008 07:42:03 +0000"  >&lt;p&gt;And why not retaining namespace prefixes for all elements? This shouldn&apos;t be too much overhead.&lt;/p&gt;</comment>
                            <comment id="12646579" author="rahul@apache.org" created="Tue, 11 Nov 2008 16:04:34 +0000"  >&lt;p&gt;Could be quite significant actually. Maps have high overhead, especially when they are close to empty which these guys are (a map would perhaps be a logical choice, and thats what the digester gives us so its also least effort). I&apos;m leaning towards making some recommendations if folks want to use the serializer. I won&apos;t be able to look at this immediately, but if you (or anyone else) is able to whip up a patch, it can always be sooner. Thanks,&lt;/p&gt;</comment>
                            <comment id="12649796" author="rahul@apache.org" created="Fri, 21 Nov 2008 21:12:11 +0000"  >&lt;p&gt;I&apos;m marking this as fixed since the situation has now improved in the sense that it is possible to get the serializer to write out the custom declarations, but only within certain limitations.&lt;/p&gt;

&lt;p&gt;Those limitations are now clearly specified in the class Javadoc, which I have deployed to the site. See:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/scxml/apidocs/org/apache/commons/scxml/io/SCXMLSerializer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml/apidocs/org/apache/commons/scxml/io/SCXMLSerializer.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In order to not rely on the link above, I&apos;ll reproduce the limitations below:&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;NOTE: This serializer makes the following assumptions about the original SCXML document(s) parsed to create the object model: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The default document namespace is the SCXML namespace: &lt;a href=&quot;http://www.w3.org/2005/07/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/07/scxml&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;The Commons SCXML namespace ( &lt;a href=&quot;http://commons.apache.org/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml&lt;/a&gt; ), if needed, uses the &quot;cs&quot; prefix&lt;/li&gt;
	&lt;li&gt;All namespace prefixes needed throughout the document are declared on the document root element (&amp;lt;scxml&amp;gt;)
&lt;hr /&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Your test case will still not work, unless you move the namespace declarations to the root &amp;lt;scxml&amp;gt; element.&lt;/p&gt;

&lt;p&gt;Ofcourse, ideally it should be possible to accomodate declarations anywhere in the document, but I contend that the focus of this library is the execution of state machines rather than the serialization of its object model. Furthermore, even though I do not intend to spend more time on this at the moment given that a workable solution is available within those limitations, if a patch were to become available that serialized the namespace declarations for transitions, actions etc. and included test cases to demonstrate correctness, we can revisit this.&lt;/p&gt;</comment>
                            <comment id="12652958" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393561" name="NamespacesInTransition_testcase.patch" size="3200" author="ingmar" created="Sat, 8 Nov 2008 11:38:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>