<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:22:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-484] events detection in ODE solvers is too complex and not robust</title>
                <link>https://issues.apache.org/jira/browse/MATH-484</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;All ODE solvers support multiple events detection since a long time. Events are specified by users by implementing the EventHandler interface. Events occur when the g(t, y) function evaluates to 0. When an event occurs, the solver step is shortened to make sure the event is located at the end of the step, and the event is triggered by calling the eventOccurred method in the user defined implementation class. Depending on the return value of this method, integration can continue, it can be stopped, or the state vector can be reset.&lt;/p&gt;

&lt;p&gt;Some ODE solvers are adaptive step size solvers. They can modify step size to match an integration error setting, increasing step size when error is low (thus reducing computing costs) or reducing step size when error is high (thus fulfilling accuracy requirements).&lt;/p&gt;

&lt;p&gt;The step adaptations due to events on one side and due to adaptive step size solvers are quite intricate by now, due to numerous fixes (&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-161&quot; title=&quot;patch for Mantissa&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-161&quot;&gt;&lt;del&gt;MATH-161&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-213&quot; title=&quot;FirstOrderIntegrator.integrate does not give back integration stop time when an event handler stops integration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-213&quot;&gt;&lt;del&gt;MATH-213&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-322&quot; title=&quot;during ODE integration, the last event in a pair of very close event may not be detected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-322&quot;&gt;&lt;del&gt;MATH-322&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-358&quot; title=&quot;ODE integrator goes past specified end of integration range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-358&quot;&gt;&lt;del&gt;MATH-358&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-421&quot; title=&quot;restarting an ODE solver that has been stopped by an event doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-421&quot;&gt;&lt;del&gt;MATH-421&lt;/del&gt;&lt;/a&gt; and also during standard maintenance - see for example r781157). The code is very difficult to maintain. It seems each bug fix introduces new bugs (r781157/&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-322&quot; title=&quot;during ODE integration, the last event in a pair of very close event may not be detected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-322&quot;&gt;&lt;del&gt;MATH-322&lt;/del&gt;&lt;/a&gt;) or tighten the link between adaptive step size and event detection (&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-388&quot; title=&quot;ODE integrator: different size needed for state vector and tolerance error vector dimension&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-388&quot;&gt;&lt;del&gt;MATH-388&lt;/del&gt;&lt;/a&gt;/r927202).&lt;/p&gt;

&lt;p&gt;A new bug discovered recently on an external library using a slightly modified version of this code could not be retroffitted into commons-math, despite the same problem is present. At the beginning of EventState.evaluateStep, the initial step may be exactly 0 thus preventing root solving, but preventing this size to drop to 0 would reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-388&quot; title=&quot;ODE integrator: different size needed for state vector and tolerance error vector dimension&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-388&quot;&gt;&lt;del&gt;MATH-388&lt;/del&gt;&lt;/a&gt;. I could not fix both bugs at the same time.&lt;/p&gt;

&lt;p&gt;So it is now time to untangle events detection and adaptive step size, simplify code, and remove some inefficiency (event root solving is always done twice, once before step truncation and another time after truncation, of course with slightly different results, events shortened steps induce high computation load until the integrator recovers its optimal pace again, steps are rejected even when the event does not requires it ...).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495935">MATH-484</key>
            <summary>events detection in ODE solvers is too complex and not robust</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luc">Luc Maisonobe</assignee>
                                    <reporter username="luc">Luc Maisonobe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jan 2011 20:49:51 +0000</created>
                <updated>Wed, 23 Mar 2011 20:35:01 +0000</updated>
                            <resolved>Mon, 14 Feb 2011 14:20:29 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12984395" author="luc" created="Thu, 20 Jan 2011 20:57:36 +0000"  >&lt;p&gt;fixed in subversion repository as of r1061507 for branch 2.X and as of r1061508 for trunk&lt;/p&gt;</comment>
                            <comment id="12994291" author="luc" created="Mon, 14 Feb 2011 13:39:23 +0000"  >&lt;p&gt;The fix introduced in r1061507 fails in several cases. If several events of the same type occur within a single long step, only the first one is triggered. If several events of different types occur during a backward integration, they are triggered in the wrong order (i.e. they are triggered in forward occurrence time order instead of backward).&lt;/p&gt;</comment>
                            <comment id="12994307" author="luc" created="Mon, 14 Feb 2011 14:20:29 +0000"  >&lt;p&gt;fixed in subversion repository as of r1070498 for branch 2.X and r1070499 for trunk&lt;/p&gt;</comment>
                            <comment id="13010404" author="luc" created="Wed, 23 Mar 2011 20:35:01 +0000"  >&lt;p&gt;Closing issue as it was included in version 2.2, which has been released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ru87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>