<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1302] Rotation constructor with RotationOrder and angles produces wrong rotation</title>
                <link>https://issues.apache.org/jira/browse/MATH-1302</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;Rotation constructor taking (RotationOrder, double, double, double) has the local variable &quot;composed&quot; set to an incorrect rotation because the use of r1 and r3 are swapped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12923303">MATH-1302</key>
            <summary>Rotation constructor with RotationOrder and angles produces wrong rotation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luc">Luc Maisonobe</assignee>
                                    <reporter username="jboyerIST">James Boyer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Dec 2015 20:13:08 +0000</created>
                <updated>Mon, 25 Jan 2016 20:27:55 +0000</updated>
                            <resolved>Sun, 27 Dec 2015 12:12:08 +0000</resolved>
                                    <version>3.5</version>
                                    <fixVersion>3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="10800">3h</timeoriginalestimate>
                            <timeestimate seconds="10800">3h</timeestimate>
                                        <comments>
                            <comment id="15066239" author="luc" created="Mon, 21 Dec 2015 09:22:32 +0000"  >&lt;p&gt;No. The order is the right one.&lt;/p&gt;

&lt;p&gt;What you present is a very well known consequence of a convention that is already explained at length in the Javadoc.&lt;br/&gt;
You can look at the javadoc of the Rotation(Vector axis, double angle) constructor.&lt;br/&gt;
We &lt;b&gt;know&lt;/b&gt; some people do not like this convention.&lt;/p&gt;

&lt;p&gt;The problem is that a rotation can be considered either as a vector operator that moves vectors with respect to a fixed&lt;br/&gt;
reference frame, or it can be seen as a frame conversion operator that moves frames while vectors are kept fixed.&lt;br/&gt;
Suppose that for example we simply state: rotation r is a 90 degrees rotation around the Z axis. Using the first&lt;br/&gt;
convention (fixed frame, moving vectors), the image of vector with coordinates (1, 2, 3) would be vector (-2, 1, 3).&lt;br/&gt;
This means that the vector rotates counterclockwise. Using the second convention (the frames rotates), then&lt;br/&gt;
the image of vector with coordinates (1, 2, 3) would be vector (2, -1, 3) because the frame rotates counterclockwise,&lt;br/&gt;
so the fixed vector appears to rotate in the opposite direction.&lt;/p&gt;

&lt;p&gt;Apache Commons Math uses the first convention, because it is focused on representing a vectorial operator.&lt;/p&gt;

&lt;p&gt;The other convention, which Apache Commons Math does not use, is more often encountered in the following&lt;br/&gt;
fields of applications: frames transforms (typically 3D scenes modelization) or attitude in space flight dynamics.&lt;br/&gt;
When people work in these fields (and in fact I do work in space flight dynamics and attitude), then one as to&lt;br/&gt;
be aware of the different conventions and as to think that the angle alpha that Apache Commons Math expect&lt;br/&gt;
is a perfectly well defined angle that is simply the opposite of the one I have at hand. So when I build my&lt;br/&gt;
rotation, I simply have to pass -alpha, and when I retrieve the angle using getAngle, I have to change its&lt;br/&gt;
sign after retrieval.&lt;/p&gt;

&lt;p&gt;As this topic comes back from time to time, we &lt;b&gt;may&lt;/b&gt; add an enumerate for specifying the convention in the&lt;br/&gt;
two constructors involved (one axis and one angle or one rotation order and three angles) and the symmetrical&lt;br/&gt;
getters. However, simply changing from one convention to the other without any hint for the user to which&lt;br/&gt;
convention is used is not gonna happen. There are no reasons why the other convention is right and the&lt;br/&gt;
current convention is wrong. They are simply that: conventions. They are relevant in different fields of&lt;br/&gt;
applications.&lt;/p&gt;

&lt;p&gt;What would you think about we add an enumerate, which could be for example VECTOR_OPERATOR_CONVENTION&lt;br/&gt;
and FRAMES_CONVERSION_CONVENTION?&lt;/p&gt;</comment>
                            <comment id="15066704" author="jboyerist" created="Mon, 21 Dec 2015 16:58:01 +0000"  >&lt;p&gt;While I like the idea of offering an enumeration that depicts the convention a user may want, a slightly simpler solution using the named constructor idiom might be better. This way, there will be no performance sacrifice while offering the two conventions to users.&lt;/p&gt;

&lt;p&gt;Your comments about the conventions makes sense. Even if you do not decide to provide multiple conventions to users, it would be beneficial to update the documentation for the constructor Rotation(RotationOrder, double, double, double) to mention that convention. It also might help to document the convention in the applyTo and applyInverseTo methods.&lt;/p&gt;</comment>
                            <comment id="15071963" author="luc" created="Sat, 26 Dec 2015 20:33:29 +0000"  >&lt;p&gt;The issue has been fixed in git repository (both MATH_3_X branch and master branch).&lt;/p&gt;

&lt;p&gt;I have kept the enumerate approach. It allows user to select the convention at runtime. It can be used for example in some intermediate libraries that&lt;br/&gt;
cannot know by themselves the conventions the user wants to select.&lt;/p&gt;</comment>
                            <comment id="15072075" author="luc" created="Sun, 27 Dec 2015 07:17:15 +0000"  >&lt;p&gt;The applyTo(Rotation) method should also expose the rotation convention.&lt;/p&gt;

&lt;p&gt;Currently, the method imposes vector operator convention.&lt;/p&gt;</comment>
                            <comment id="15072130" author="luc" created="Sun, 27 Dec 2015 12:12:08 +0000"  >&lt;p&gt;Two methods, compose and composeInverse have been added.&lt;br/&gt;
They both allow specifying rotation convention.&lt;/p&gt;</comment>
                            <comment id="15115944" author="luc" created="Mon, 25 Jan 2016 20:27:55 +0000"  >&lt;p&gt;Closing all resolved issues that were included in 3.6 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q4zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>