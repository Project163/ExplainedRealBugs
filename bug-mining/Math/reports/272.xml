<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:22:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-715] PascalDistribution returns wrong values of mean and variance</title>
                <link>https://issues.apache.org/jira/browse/MATH-715</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;The header of the Javadoc states that the random variable (say X) being represented by this &lt;tt&gt;o.a.c.m.distribution.PascalDistribution&lt;/tt&gt; is the number of &lt;b&gt;failures&lt;/b&gt;. The current Javadoc is slightly confusing, because it refers to the Wikipedia website, where the opposite convention is adopted (X is the number of &lt;b&gt;successes&lt;/b&gt;) : different formulas therefore apply for the mean and variance of X. The javadoc should be made clearer, for example by inclusion of full formulas. Also the parameters differing from the Wikipedia reference should not have the same name&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;p&lt;/tt&gt; is the probability of success in both cases: OK,&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;r&lt;/tt&gt; is the number of failures in Wikipedia, but the number of successes in CM. This could be renamed (say) &lt;tt&gt;s&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Finally, with the current notations of CM, the mean of X is given by &lt;tt&gt;mean(X) = r * (1 - p) / p&lt;/tt&gt;, while the currently implemented formula is &lt;tt&gt;r * p / (1 - p)&lt;/tt&gt;, which is actually the formula corresponding to the Wikipedia convention.&lt;/p&gt;

&lt;p&gt;The following piece of code shows that the current implementation is faulty&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PascalDistributionDemo {
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
       &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; r = 10;
       &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; p = 0.2;
       &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numTerms = 1000;
       &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PascalDistribution distribution = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PascalDistribution(r, p);
       &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; mean = 0.;
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; k = numTerms - 1; k &amp;gt;= 0; k--) {
           mean += k * distribution.probability(k);
       }
       &lt;span class=&quot;code-comment&quot;&gt;// The following prints 40.00000000000012
&lt;/span&gt;       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Estimate of the mean = &quot;&lt;/span&gt; + mean);
       &lt;span class=&quot;code-comment&quot;&gt;// The following prints 2.5
&lt;/span&gt;       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;CM implementation = &quot;&lt;/span&gt; +
                          distribution.getNumericalMean());
       &lt;span class=&quot;code-comment&quot;&gt;// The following prints 2.5
&lt;/span&gt;       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;r * p / (1 - p) = &quot;&lt;/span&gt; + (r * p / (1 - p)));
       &lt;span class=&quot;code-comment&quot;&gt;// The following prints 40.0
&lt;/span&gt;       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;r * (1 - p) / p = &quot;&lt;/span&gt; + (r * (1 - p) / p));
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12533064">MATH-715</key>
            <summary>PascalDistribution returns wrong values of mean and variance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="celestin">Sebastien Brisard</assignee>
                                    <reporter username="celestin">Sebastien Brisard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2011 03:56:11 +0000</created>
                <updated>Sun, 18 Mar 2012 09:26:32 +0000</updated>
                            <resolved>Tue, 6 Dec 2011 08:19:06 +0000</resolved>
                                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13163427" author="celestin" created="Tue, 6 Dec 2011 08:19:06 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;r1210359&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13232229" author="celestin" created="Sun, 18 Mar 2012 09:26:32 +0000"  >&lt;p&gt;Fixed in 3.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aoqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>