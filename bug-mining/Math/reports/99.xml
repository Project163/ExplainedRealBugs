<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:21:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-341] Test for firsst Derivative in PolynomialFunction ERROR</title>
                <link>https://issues.apache.org/jira/browse/MATH-341</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I have written the attached test using our data for generating a curve function&lt;/p&gt;

&lt;p&gt;However the first derivative test fails see: testfirstDerivativeComparisonFullPower&lt;/p&gt;

&lt;p&gt;Either my test is in error or there is a bug in PolynomialFunction class.&lt;/p&gt;


&lt;p&gt;Roger Ball&lt;br/&gt;
Creoss Business Solutions &lt;/p&gt;</description>
                <environment></environment>
        <key id="12455491">MATH-341</key>
            <summary>Test for firsst Derivative in PolynomialFunction ERROR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rfball">Roger Ball</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2010 20:32:59 +0000</created>
                <updated>Tue, 9 Feb 2010 23:21:27 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 20:08:51 +0000</resolved>
                                    <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12830281" author="rfball" created="Fri, 5 Feb 2010 20:34:02 +0000"  >&lt;p&gt;FirstDerivativePolyNomTest.java&lt;/p&gt;</comment>
                            <comment id="12830314" author="luc" created="Fri, 5 Feb 2010 21:50:33 +0000"  >&lt;p&gt;I think there are no bugs here.&lt;br/&gt;
The first part of the test (method testfirstDerivativeComparison) runs without error.&lt;br/&gt;
The second part of the test (method testfirstDerivativeComparisonFullPower) prints coefficients that do not match.&lt;/p&gt;

&lt;p&gt;However, the coefficients computed seem wrong to me because&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the getCoefficients method returns an array in increasing degree order (i.e. coeff&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; is the constant term)&lt;/li&gt;
	&lt;li&gt;the coefficients array length is d+1 when d is the degree&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This implies that the g_coeff array which should contain the coefficients of the derivative must have length myPolyNom.degree() and not myPolyNom.degree()-1 and the following loop should match.  Also the computation of the coefficients of the derivative shoud be:&lt;/p&gt;

&lt;p&gt;  g_coeff&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = f_coeff&lt;span class=&quot;error&quot;&gt;&amp;#91;i+1&amp;#93;&lt;/span&gt; * (i + 1);&lt;/p&gt;

&lt;p&gt;instead of&lt;/p&gt;

&lt;p&gt;  g_coeff&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = f_coeff&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;*(myPolyNom.degree()-i);&lt;/p&gt;

&lt;p&gt;With these changes, the automatic computation of derivative works.&lt;/p&gt;

&lt;p&gt;A first comment on this case is that using polynomial fitting for such functions with large numbers of points shows very large Gibbs oscillations near the interval ends. One way to see this is to draw the curve from the sample points and from evaluation of myPolyNom with x varying from 5 to 30 with a 0.1 step. You will see that the polynomial fits the sample points perfectly, but near interval ends it has HUGE oscillations.&lt;/p&gt;

&lt;p&gt;Another comment is that extracting the coefficients from the lagrangian form should be used with caution. Unfortunately, this is written only in the protected computationCoefficients() method javadoc, not in the public getCoefficients() method javadoc ... The computation is ill-conditioned and in fact the coefficients returned in your case are really bad. This could be seen by evaluating the original lagrangian form polynomial and the one reconstructed from the coefficients. The original does match the expected points, the reconstructed one does not.&lt;/p&gt;

&lt;p&gt;So I think there is only a documentation problem: we should warn the user about extracting coefficients in this implementation.&lt;/p&gt;

&lt;p&gt;Do you agree with this analysis ?&lt;/p&gt;</comment>
                            <comment id="12831561" author="rfball" created="Tue, 9 Feb 2010 17:59:27 +0000"  >&lt;p&gt;Regarding: &lt;br/&gt;
&quot;So I think there is only a documentation problem: we should warn the user about extracting coefficients in this implementation.&lt;/p&gt;

&lt;p&gt;Do you agree with this analysis ?&quot;&lt;/p&gt;

&lt;p&gt;Certainly a documentation problem. However, if the coefficients do not result in a curve expression that is valid of the entire range of values for which the curve expression is derived then the curve expression is not really useful in a practical sense. I also the erractic occillations in curve. These occillations are HUGE when comparred to the data. Therefore the expression is not all together valid.&lt;/p&gt;</comment>
                            <comment id="12831637" author="luc" created="Tue, 9 Feb 2010 20:00:51 +0000"  >&lt;p&gt;I will fix the documentation.&lt;/p&gt;

&lt;p&gt;The coefficients are valid when the number of points is reduced (for example consider only the 8 or 10 last points, it should work). Also note that polynomials in lagrangian form should really stay in this form and should not be converted to the canonical sum of monomials. It IS ill-conditioned so attempting this for high degree is not advised.&lt;/p&gt;

&lt;p&gt;The oscillations you see are not an implementation problem, the mathematical solution is really like this. This is a theoretical problem known as Runge&apos;s phenomenon. See for example &lt;a href=&quot;http://demonstrations.wolfram.com/RungesPhenomenon/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://demonstrations.wolfram.com/RungesPhenomenon/&lt;/a&gt; and especially the high degree versions at the bottom of the page. You will see huge interpolation error at the end of the interval. When using polynomial interpolation, increasing the degree and the number of points but keeping them equidistant does NOT reduce maximal error (in fact for some functions error will tend towards infinity). The expression perfectly fits the sample points you provide but it has no information of what to do between them.&lt;/p&gt;

&lt;p&gt;Polynomial interpolation should really be used with care. If you want smoother behavior, you should use several lower degrees polynomials each covering a subrange of your data.&lt;/p&gt;</comment>
                            <comment id="12831640" author="luc" created="Tue, 9 Feb 2010 20:08:51 +0000"  >&lt;p&gt;added a warning in getCoefficients() method documentation&lt;br/&gt;
fixed in subversion repository as of r908190&lt;br/&gt;
thanks for reporting the problem&lt;/p&gt;</comment>
                            <comment id="12831690" author="rfball" created="Tue, 9 Feb 2010 21:57:31 +0000"  >&lt;p&gt;Looking at &quot;See for example &lt;a href=&quot;http://demonstrations.wolfram.com/RungesPhenomenon/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://demonstrations.wolfram.com/RungesPhenomenon/&lt;/a&gt; &quot; it seems that if you select Chebyshev sample points the error drops dramatically all along the curve. Is this an option in the apache math library?&lt;/p&gt;</comment>
                            <comment id="12831750" author="luc" created="Tue, 9 Feb 2010 23:21:27 +0000"  >&lt;p&gt;You select the points yourself as you provides the x and y arrays, so yes, you can choos points at Chebyshev abscissas.&lt;br/&gt;
The array even don&apos;t need to be sorted. However, you cannot have two points with the same x value.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435005" name="FirstDerivativePolyNomTest.java" size="4387" author="rfball" created="Fri, 5 Feb 2010 20:34:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rv27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>