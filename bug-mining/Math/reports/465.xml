<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:24:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1116] NullPointerException not advertized in Javadoc</title>
                <link>https://issues.apache.org/jira/browse/MATH-1116</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;The following statement produces a NullPointerException:&lt;/p&gt;

&lt;p&gt;new org.apache.commons.math3.optim.nonlinear.vector.jacobian.LevenbergMarquardtOptimizer().getWeight();&lt;/p&gt;

&lt;p&gt;The documentation does not seem to indicate that other data must be set before getWeight is used (at least I could not find that information). In this case, weightMatrix is still null because it has not been initialized.&lt;/p&gt;

&lt;p&gt;This call should probably throw an IllegalStateException, which makes it clear that this API usage is incorrect.&lt;/p&gt;

&lt;p&gt;This test uses LevenbergMarquardtOptimizer but any instantiable subclass of MultivariateVectorOptimizer probably works the same way.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6, 7&lt;/p&gt;</environment>
        <key id="12708179">MATH-1116</key>
            <summary>NullPointerException not advertized in Javadoc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                            <label>javadoc</label>
                    </labels>
                <created>Mon, 14 Apr 2014 02:51:00 +0000</created>
                <updated>Mon, 25 Jan 2016 20:27:57 +0000</updated>
                            <resolved>Tue, 19 May 2015 11:47:22 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13968032" author="telcontar" created="Mon, 14 Apr 2014 02:51:20 +0000"  >&lt;p&gt;JUnit test to reproduce this issue.&lt;/p&gt;</comment>
                            <comment id="13968118" author="telcontar" created="Mon, 14 Apr 2014 06:28:17 +0000"  >&lt;p&gt;getTarget() instead of getWeight() also produces a NPE:&lt;/p&gt;

&lt;p&gt;new org.apache.commons.math3.optim.nonlinear.vector.jacobian.LevenbergMarquardtOptimizer().getTarget();&lt;/p&gt;</comment>
                            <comment id="13968323" author="erans" created="Mon, 14 Apr 2014 13:03:29 +0000"  >&lt;p&gt;This is wrong usage; you cannot get something before your set it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
In this class, those data must be passed as argument to the &quot;optimize&quot; method; the requirements are documented in parent classes, where &quot;optimize&quot; is defined.&lt;br/&gt;
Anyway, this class, and the whole package, is going to be deprecated in release 3.3. The replacement is available in the development version.&lt;/p&gt;</comment>
                            <comment id="13969005" author="telcontar" created="Mon, 14 Apr 2014 23:33:21 +0000"  >&lt;p&gt;Thank you for the quick feedback.&lt;br/&gt;
There are a number of other classes that are not going to be deprecated in 3.3, which have the same issue. For example, there are five cases where I have found a one-liner that shows the problem:&lt;/p&gt;

&lt;p&gt;    new org.apache.commons.math3.random.ValueServer().resetReplayFile();&lt;br/&gt;
    new org.apache.commons.math3.stat.regression.GLSMultipleLinearRegression().estimateErrorVariance();&lt;br/&gt;
    new org.apache.commons.math3.random.EmpiricalDistribution().getGeneratorUpperBounds();&lt;br/&gt;
    new org.apache.commons.math3.stat.regression.OLSMultipleLinearRegression().calculateHat();&lt;br/&gt;
    new org.apache.commons.math3.stat.correlation.PearsonsCorrelation().getCorrelationStandardErrors();&lt;/p&gt;

&lt;p&gt;I can post these in separate bug reports if there is interest, along with a few cases that are multiple lines.&lt;/p&gt;

&lt;p&gt;I think it would be good to do something about these cases:&lt;/p&gt;

&lt;p&gt;(1) Deprecate the constructors that build incomplete instances, or&lt;br/&gt;
(2) throw an IllegalStateException or a NullPointerException with an error message (&quot;xy needs to be set&quot;), or&lt;br/&gt;
(3) make the constructors non-public, or&lt;br/&gt;
(4) add a comment such as in NordSieckStepInterpolator:&lt;br/&gt;
&lt;a href=&quot;http://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/ode/sampling/NordsieckStepInterpolator.html#NordsieckStepInterpolator%28%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/ode/sampling/NordsieckStepInterpolator.html#NordsieckStepInterpolator%28%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That comment clearly puts the blame on the user if a NullPointerException happens. However, it would be nice to have this also in the executable (as an exception message, perhaps).&lt;/p&gt;</comment>
                            <comment id="13969386" author="erans" created="Tue, 15 Apr 2014 09:40:59 +0000"  >&lt;p&gt;I don&apos;t think that it&apos;necessary to open a new report if adding &quot;@throws&quot; tag would fix the issue.&lt;/p&gt;</comment>
                            <comment id="13969404" author="erans" created="Tue, 15 Apr 2014 10:13:26 +0000"  >&lt;p&gt;For those:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;new org.apache.commons.math3.random.ValueServer().resetReplayFile();&lt;br/&gt;
new org.apache.commons.math3.random.EmpiricalDistribution().getGeneratorUpperBounds();&lt;br/&gt;
new org.apache.commons.math3.stat.regression.OLSMultipleLinearRegression().calculateHat();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;NullPointerException is advertized in revision 1587494.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;new org.apache.commons.math3.stat.correlation.PearsonsCorrelation().getCorrelationStandardErrors();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The Javadoc contained a warning for this one.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;new org.apache.commons.math3.stat.regression.GLSMultipleLinearRegression().estimateErrorVariance();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This method is defined in the parent class.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think it would be good to do something about these cases &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree. In fact I don&apos;t see the an advantage in constructing an incomplete instance and having to call afterwards what looks like a constructor (i.e. &quot;newSampleData&quot;) that reallocates and reinitializes everything.&lt;br/&gt;
Perhaps, you could raise this design issue on the &quot;dev&quot; ML.&lt;/p&gt;</comment>
                            <comment id="13970506" author="telcontar" created="Wed, 16 Apr 2014 06:47:03 +0000"  >&lt;p&gt;Two more tests that show a similar issue; one is a one-liner:&lt;/p&gt;

&lt;p&gt;    new org.apache.commons.math3.optim.nonlinear.scalar.noderiv.NelderMeadSimplex(new double[] &lt;/p&gt;
{1.0d, 1.0d}
&lt;p&gt;).getPoint(1);&lt;/p&gt;</comment>
                            <comment id="13970509" author="telcontar" created="Wed, 16 Apr 2014 06:48:50 +0000"  >&lt;p&gt;Thanks. I&apos;ve added another attachment that shows two more similar cases, after removing deprecated classes and trying to simplify the tests. The attachment IllegalStateB.java appears above, along with the one-liner for the shorter of the two tests.&lt;/p&gt;</comment>
                            <comment id="13971619" author="erans" created="Wed, 16 Apr 2014 16:29:32 +0000"  >&lt;p&gt;Actually the whole contents of the &quot;optim&quot; package will be replaced with the approach that has been implemented in package &quot;o.a.c.m.fitting.leastsquares&quot;.&lt;/p&gt;</comment>
                            <comment id="14532119" author="telcontar" created="Thu, 7 May 2015 06:42:20 +0000"  >&lt;p&gt;In general, the need to initialize newly constructed objects with more data is now documented, but we have found two cases where a NullPointerException is thrown because of missing data.&lt;/p&gt;

&lt;p&gt;The documentation should be updated to reflect this. This is similar to issues report in &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-1116&quot; title=&quot;NullPointerException not advertized in Javadoc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-1116&quot;&gt;&lt;del&gt;MATH-1116&lt;/del&gt;&lt;/a&gt; but concerns classes that are not going to be deprecated (as far as we can tell).&lt;/p&gt;

&lt;p&gt;    org.apache.commons.math3.ode.nonstiff.HighamHall54Integrator var1 = new org.apache.commons.math3.ode.nonstiff.HighamHall54Integrator(0.0d, 0.0d, 0.0d, 0.0d);&lt;br/&gt;
    double[] var2 = new double[] &lt;/p&gt;
{ 0.0d }
&lt;p&gt;;&lt;br/&gt;
    var1.computeDerivatives(0.0d, var2, var2); // NPE&lt;/p&gt;

&lt;p&gt;    new org.apache.commons.math3.stat.correlation.SpearmansCorrelation().getCorrelationMatrix(); // NPE&lt;/p&gt;</comment>
                            <comment id="14532120" author="telcontar" created="Thu, 7 May 2015 06:43:18 +0000"  >&lt;p&gt;Self-contained unit test to reproduce NullPointerException on HighamHall54Integrator (the need to initialize it further is not documented yet).&lt;/p&gt;</comment>
                            <comment id="14532121" author="telcontar" created="Thu, 7 May 2015 06:43:42 +0000"  >&lt;p&gt;Self-contained unit test to reproduce NullPointerException on SpearmansCorrelation (the need to initialize it further is not documented yet).&lt;/p&gt;</comment>
                            <comment id="14543081" author="telcontar" created="Thu, 14 May 2015 02:14:50 +0000"  >&lt;p&gt;This particular issue (SpearmansCorrelation) has been fixed upstream, see bug 1224: &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-1224&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MATH-1224&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14550286" author="luc" created="Tue, 19 May 2015 11:47:22 +0000"  >&lt;p&gt;Fixed in git repository for the remaining part (ODE package).&lt;/p&gt;</comment>
                            <comment id="15115950" author="luc" created="Mon, 25 Jan 2016 20:27:57 +0000"  >&lt;p&gt;Closing all resolved issues that were included in 3.6 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12640400" name="IllegalStateB.java" size="884" author="Telcontar" created="Wed, 16 Apr 2014 06:47:03 +0000"/>
                            <attachment id="12640012" name="Report2.java" size="223" author="Telcontar" created="Mon, 14 Apr 2014 02:51:20 +0000"/>
                            <attachment id="12731096" name="Report6.java" size="370" author="Telcontar" created="Thu, 7 May 2015 06:43:18 +0000"/>
                            <attachment id="12731097" name="Report7.java" size="212" author="Telcontar" created="Thu, 7 May 2015 06:43:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ukz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>