<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:22:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-695] Incomplete reinitialization with some events handling</title>
                <link>https://issues.apache.org/jira/browse/MATH-695</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I get a bug with event handling: I track 2 events that occur in the same step, when the first one is accepted, it resets the state but the reinitialization is not complete and the second one becomes unable to find its way.&lt;br/&gt;
I can&apos;t give my context, which is rather large, but I tried a patch that works for me, unfortunately it breaks the unit tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528715">MATH-695</key>
            <summary>Incomplete reinitialization with some events handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luc">Luc Maisonobe</assignee>
                                    <reporter username="pparraud">Pascal Parraud</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 16:52:29 +0000</created>
                <updated>Sat, 24 Mar 2012 16:16:57 +0000</updated>
                            <resolved>Wed, 26 Oct 2011 09:09:54 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13135233" author="pparraud" created="Tue, 25 Oct 2011 16:57:32 +0000"  >&lt;p&gt;this patch resolves my problem but breaks some unit tests.&lt;/p&gt;</comment>
                            <comment id="13135351" author="luc" created="Tue, 25 Oct 2011 19:26:20 +0000"  >&lt;p&gt;As I work with Pascal (we share the same office at work), I have seen how the bug occurs and am trying to set up a simplified test case that reproduces it. It seems that there is a combination of conditions that is not handled properly. We have seen the bug occurring when both following conditions are true:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;there are several events occurring in the same integration step&lt;/li&gt;
	&lt;li&gt;when one of the earliest events occurrence is triggered, it returns RESET_DERIVATIVES&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In this case, the acceptStep method in AbstractIntegrator returns early from inside the while loop and the remaining events that where expected to occur later on are left in an inconsistent state with respect to the integrator. The t0 and g0 fields in the corresponding EventState instance still contain values from the beginning of the step, they do not reflect the fact the event has been triggered. This implies that when next step is started with the updated derivatives, evaluateStep tries to catch up from t0 to current t and calls the g function at times that do not belong to the current step.&lt;/p&gt;

&lt;p&gt;Up to now, I have not been able to set up a simplified test case that exhibits this, but I&apos;m working on it.&lt;/p&gt;</comment>
                            <comment id="13135798" author="luc" created="Wed, 26 Oct 2011 08:24:00 +0000"  >&lt;p&gt;The attached test case reproduces the error.&lt;/p&gt;</comment>
                            <comment id="13135823" author="luc" created="Wed, 26 Oct 2011 09:09:54 +0000"  >&lt;p&gt;Fixed in subversion repository as of r1189086.&lt;/p&gt;

&lt;p&gt;The fix is different from the proposed patch, it directly updates the events when the step truncation occurs, thus preventing even transient inconsistency.&lt;/p&gt;

&lt;p&gt;Thanks for the report and for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500719" name="events.patch" size="1097" author="pparraud" created="Tue, 25 Oct 2011 16:57:32 +0000"/>
                            <attachment id="12500839" name="test-case-MATH-695.patch" size="2977" author="luc" created="Wed, 26 Oct 2011 08:24:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aoun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>