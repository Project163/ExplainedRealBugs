<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:24:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1166] BicubicInterpolation may have a bug</title>
                <link>https://issues.apache.org/jira/browse/MATH-1166</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I plotted a random image with bicubic interpolation hoping to see something like this:&lt;br/&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Bicubic_interpolation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Bicubic_interpolation&lt;/a&gt;&lt;br/&gt;
... but instead I got something weird.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12754541">MATH-1166</key>
            <summary>BicubicInterpolation may have a bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ajo.fod">Ajo Fod</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Nov 2014 18:50:05 +0000</created>
                <updated>Fri, 22 Jul 2022 12:14:11 +0000</updated>
                            <resolved>Tue, 2 Dec 2014 11:12:39 +0000</resolved>
                                                    <fixVersion>3.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14206818" author="ajo.fod" created="Tue, 11 Nov 2014 18:56:47 +0000"  >&lt;p&gt;Notice the edges seem unmatched. Could it be that the interpolation output has its co-ordinates swapped at some point? ... or am I doing something wrong?&lt;/p&gt;</comment>
                            <comment id="14206965" author="erans" created="Tue, 11 Nov 2014 20:06:11 +0000"  >&lt;p&gt;Are you using the latest code from the development version?&lt;br/&gt;
Or the 3.3 release?&lt;/p&gt;</comment>
                            <comment id="14206970" author="ajo.fod@gmail.com" created="Tue, 11 Nov 2014 20:10:40 +0000"  >&lt;p&gt;The 3.3 release.&lt;/p&gt;

&lt;p&gt;-Ajo&lt;/p&gt;

</comment>
                            <comment id="14206977" author="erans" created="Tue, 11 Nov 2014 20:12:33 +0000"  >&lt;p&gt;Actually, please try your code with the new (in the development version)&lt;br/&gt;
&lt;tt&gt;org.apache.commons.math3.analysis.interpolation.PiecewiseBicubicSplineInterpolator&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14207004" author="ajo.fod@gmail.com" created="Tue, 11 Nov 2014 20:34:40 +0000"  >&lt;p&gt;Confirmed that the problem exists with the latest code.&lt;/p&gt;

&lt;p&gt;-Ajo.&lt;/p&gt;

</comment>
                            <comment id="14207005" author="ajo.fod@gmail.com" created="Tue, 11 Nov 2014 20:35:40 +0000"  >&lt;p&gt;BTW, the code is all there ... just give it a run on your machine and point&lt;br/&gt;
the browser at your home directory.&lt;/p&gt;


&lt;p&gt;-Ajo&lt;/p&gt;

</comment>
                            <comment id="14207040" author="ajo.fod" created="Tue, 11 Nov 2014 20:53:14 +0000"  >&lt;p&gt;Piecewise doesn&apos;t have the problem.&lt;/p&gt;</comment>
                            <comment id="14222470" author="erans" created="Sun, 23 Nov 2014 19:19:17 +0000"  >&lt;p&gt;I finally tracked down the bug, thanks to web page that showed a code excerpt from the well-known &quot;reference-that-cannot-be-named&quot;.&lt;/p&gt;

&lt;p&gt;There were actually two bugs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;one was indeed a transposition of the coefficient matrix,&lt;/li&gt;
	&lt;li&gt;the other was that the implementation on Wikipedia was assuming a &lt;em&gt;one&lt;/em&gt;-pixel &quot;delta&quot; between samples.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In the attached patch, I&apos;ve created new classes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;BicubicInterpolatingFunction&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;BicubicInterpolator&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The reason is that the fix entailed the failure of the tests in&lt;br/&gt;
&lt;tt&gt;BicubicInterpolatingFunctionTest&lt;/tt&gt; related to the methods providing the partial derivatives functionality. A solution could have been to remove those but it cannot be done because of backward compatibility.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;TricubicSplineInterpolator&lt;/tt&gt; must be deprecated since it is based on the buggy code, and the implementation requires the partial derivatives...&lt;/p&gt;

&lt;p&gt;A problem remained in that the &lt;tt&gt;BicubicInterpolator&lt;/tt&gt; needs to estimate the derivatives in order to use the &lt;tt&gt;BicubicInterpolatingFunction&lt;/tt&gt;. This entails that, on the border of the sampling range, the interpolation is wrong.  As a workaround, the method &quot;isValidPoint&quot; is overridden, and for the &quot;valid&quot; points, the interpolation is within a reasonable tolerance.&lt;/p&gt;

&lt;p&gt;This is a weak point of the &lt;tt&gt;BicubicInterpolator&lt;/tt&gt;, but in some cases (as in the picture produced by Ajo&apos;s code), there could be less artefacts.&lt;/p&gt;

&lt;p&gt;Is it OK to commit this patch?&lt;br/&gt;
Or do we proceed otherwise?&lt;/p&gt;</comment>
                            <comment id="14222502" author="luc" created="Sun, 23 Nov 2014 21:04:04 +0000"  >&lt;p&gt;If I understand correctly, the former BicubiSplineInterpolatingFunction which was deprecated by Hank would still be deprecated and we would have two different implementation, this new one and the piecewise one?&lt;/p&gt;

&lt;p&gt;I&apos;m fine with this.&lt;/p&gt;</comment>
                            <comment id="14222509" author="erans" created="Sun, 23 Nov 2014 21:26:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;BicubiSplineInterpolatingFunction [...] would still be deprecated&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;two different implementation, this new one and the piecewise one?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;br/&gt;
The new implementation is also &quot;piecewise&quot;.  We should decide whether the names should be changed to something more specific. &lt;/p&gt;

&lt;p&gt;Also, there must be a way to build N-dimensional interpolation schemes, but the current &lt;tt&gt;Tricubic...&lt;/tt&gt; is tied to a buggy implementation, so it&apos;s better to remove it, and perhaps think how a new one can be modular and use the different alternative implementations at runtime...&lt;/p&gt;</comment>
                            <comment id="14231315" author="erans" created="Tue, 2 Dec 2014 11:12:39 +0000"  >&lt;p&gt;&quot;BicubicSplineInterpolator&quot; class is deprecated, replaced by &quot;BicubicInterpolator&quot;.&lt;/p&gt;

&lt;p&gt;Commit: 136bf34297a9ac8049e451800df819ebf092cdf2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12726859">MATH-1138</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13472884">MATH-1648</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12680843" name="Draw.java" size="2842" author="ajo.fod" created="Tue, 11 Nov 2014 18:52:57 +0000"/>
                            <attachment id="12683234" name="MATH-1166.patch" size="40628" author="erans" created="Sun, 23 Nov 2014 19:19:17 +0000"/>
                            <attachment id="12680845" name="myimage.jpg" size="26094" author="ajo.fod" created="Tue, 11 Nov 2014 18:56:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i228vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>