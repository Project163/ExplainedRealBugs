<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:24:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1211] PolyhedronsSet.firstIntersection(Vector3D point, Line line) sometimes reports intersections on wrong end of line</title>
                <link>https://issues.apache.org/jira/browse/MATH-1211</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>
&lt;p&gt;I constructed a PolyhedronsSet from a list of triangular faces representing an icosphere (using the instructions found at &lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/commons-user/201208.mbox/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail-archives.apache.org/mod_mbox/commons-user/201208.mbox/&lt;/a&gt;&amp;lt;5039FE35.2090307@free.fr&amp;gt;).  This seems to produce correct INSIDE/OUTSIDE results for randomly chosen points.  I think my mesh triangles are defined appropriately.&lt;/p&gt;

&lt;p&gt;However, using PolyhedronsSet.firstIntersection(Vector3D point, Line line) to shoot randomly oriented rays from the origin sometimes gives a wrong mesh intersection point &quot;behind&quot; the origin.  The intersection algorithm is sometimes picking up faces of the sphere-shaped mesh on the wrong semi-infinite portion of the line, i.e. meshIntersectionPoint.subtract(point).dotProduct(line.getDirection())&amp;lt;0 where point is the Vector3D at center of the sphere and line extends outward through the mesh.&lt;/p&gt;

&lt;p&gt;I think the dot product above should always be positive. If multiple intersections exist along a &quot;whole&quot; line then the first one in &quot;front&quot; of the line&apos;s origin should be returned. This makes ray tracing with a PolyhedronsSet possible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12819160">MATH-1211</key>
            <summary>PolyhedronsSet.firstIntersection(Vector3D point, Line line) sometimes reports intersections on wrong end of line</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelzimm">Mike Zimmerman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2015 02:25:55 +0000</created>
                <updated>Sat, 18 Apr 2015 09:28:24 +0000</updated>
                            <resolved>Thu, 9 Apr 2015 20:37:36 +0000</resolved>
                                                    <fixVersion>3.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14484606" author="michaelzimm" created="Wed, 8 Apr 2015 02:48:22 +0000"  >&lt;p&gt;It might be enough to incorporate a direction check just after line 365 in the recurseFirstIntersection method of PolyhedronsSet, something like:&lt;/p&gt;

&lt;p&gt;final Vector3D hit3D = plane.intersection(line);&lt;br/&gt;
if (hit3D != null &amp;amp;&amp;amp; hit3D.subtract(point).dotProduct(line.getDirection()&amp;gt;0) {&lt;br/&gt;
  ...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;The problem is that the Plane.intersection method does not check for directionality of the line, thus the PolyhedronsSet.firstIntersection method simply returns the first face that intersects the &quot;whole&quot; line rather than the first face intersecting the semi-infinite &quot;front&quot; of the line.&lt;/p&gt;</comment>
                            <comment id="14484866" author="luc" created="Wed, 8 Apr 2015 07:10:19 +0000"  >&lt;p&gt;Hi Mike,&lt;/p&gt;

&lt;p&gt;Could you attach a self-contained test to reproduce the error?&lt;/p&gt;</comment>
                            <comment id="14485414" author="michaelzimm" created="Wed, 8 Apr 2015 15:46:25 +0000"  >&lt;p&gt;I&apos;m using commons-math-3.4.  The attached code generates a triangulated cube and runs some interior checks and ray intersection tests.  I think the intersection test should always return a face in &quot;front&quot; of the ray but sometimes the PolyhedronsSet.findIntersection method is picking up faces &quot;behind&quot; the ray direction.&lt;/p&gt;</comment>
                            <comment id="14488227" author="luc" created="Thu, 9 Apr 2015 20:37:36 +0000"  >&lt;p&gt;Your analysis was perfectly correct and your solution was good. I only made&lt;br/&gt;
a minor change so it is easier to understand.&lt;/p&gt;

&lt;p&gt;Fixed in git repository. Beware the fix is currently only in the MATH_3_X branch, which is not the master branch. It will be included in the upcoming 3.5 release.&lt;/p&gt;

&lt;p&gt;Thanks for the report and the fix.&lt;/p&gt;</comment>
                            <comment id="14488715" author="michaelzimm" created="Fri, 10 Apr 2015 01:26:40 +0000"  >&lt;p&gt;Hi Luc,&lt;/p&gt;

&lt;p&gt;Sorry if my initial explanation was a bit convoluted.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;But thanks so much for applying the fix, and glad I could help.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Mike&lt;/p&gt;




</comment>
                            <comment id="14501208" author="luc" created="Sat, 18 Apr 2015 09:28:24 +0000"  >&lt;p&gt;Closing resolved issue as 3.5 has been released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723935" name="IntersectionTest.java" size="4431" author="michaelzimm" created="Wed, 8 Apr 2015 15:44:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cy33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>