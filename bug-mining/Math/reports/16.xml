<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:20:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-186] test results depend on java version</title>
                <link>https://issues.apache.org/jira/browse/MATH-186</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;Running the tests with maven and changing the java version used by changing JAVA_HOME in the ~/.mavenrc file, I get different results.&lt;/p&gt;

&lt;p&gt;With the Eclipse compiler set to 1.3 compatibility and with blackdown jvm (1.4), the tests succed.&lt;br/&gt;
With the Sun jvm (1.6), SummaryStatisticsAbstractTest.testEqualsAndHashCode (which is used both by SummaryStatisticsTest and SynchronizedSummaryStatisticsTest) fails.&lt;/p&gt;

&lt;p&gt;The error is related to geometric mean computation, which lead to slightly different results depending on the order of added elements. One instance returns 2.213363839400643 and the other returns 2.2133638394006434. Both results are consistent with IEEE754 arithmetic (they differ in the last two bits).&lt;/p&gt;

&lt;p&gt;Using Sun 1.6.0_03 jvm, the different values induce a test failure when SummaryStatistics.equals() method is called (it checks for exact equality). If this part of the test is commented out, another failure occurs when the SummaryStatistics.hashcode() method is called.&lt;/p&gt;

&lt;p&gt;Changing the equals method would be possible, but would be a change of semantics and would imply choosing some threshold which would never suit everybody needs. Changing the hashcode method simply does not seem realistic to me. So I would like to keep these methods as they are now. So the main conclusion would be that the test is too sensitive to jvm implementation (which are consistent with IEEE754 arithmetic in this case).&lt;/p&gt;

&lt;p&gt;I don&apos;t know what to do about this issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;GNU/Linux (ubuntu Gutsy Gibbon),  java 1.3: eclipse compiler, java 1.4: Blackdown-1.4.2-02, java 1.6:  SUN 1.6.0_03-b05,  AMD athlon XP2000+&lt;/p&gt;</environment>
        <key id="12387752">MATH-186</key>
            <summary>test results depend on java version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="luc">Luc Maisonobe</reporter>
                        <labels>
                    </labels>
                <created>Sun, 3 Feb 2008 22:31:21 +0000</created>
                <updated>Thu, 23 Apr 2009 02:26:17 +0000</updated>
                            <resolved>Sun, 3 Feb 2008 22:47:32 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12565231" author="psteitz" created="Sun, 3 Feb 2008 22:44:06 +0000"  >&lt;p&gt;I think the test should be modified to add data in the same order in each case, which will ensure equals semantics works.  The assumption that arithmetic operations are commutative is not true and the test in its current form depends on that.&lt;/p&gt;</comment>
                            <comment id="12565232" author="luc" created="Sun, 3 Feb 2008 22:47:32 +0000"  >&lt;p&gt;Changed slightly the test to be less sensitive to JVM issues.&lt;br/&gt;
The change was simply to add the points in a different order. So instead of having one instance handling values 2, 1, 3, 4 and the other handling values 4, 2, 3, 1, the second instance now handles 2, 3, 1, 4.&lt;br/&gt;
It works, but it is definitely not a clean solution. The problem may happen again with other jvm implementations.&lt;/p&gt;</comment>
                            <comment id="12565234" author="luc" created="Sun, 3 Feb 2008 22:53:28 +0000"  >&lt;p&gt;Sorry Phil, I did not see your proposal before sending my last comment.&lt;br/&gt;
You are right, I will commit a new fix for this using exactly the same order (2, 1, 3, 4) for both instances. This is a real solution, not a dirty trick like mine.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="12565235" author="psteitz" created="Sun, 3 Feb 2008 22:54:45 +0000"  >&lt;p&gt;For this to happen with other JVM impls with the change just made, the jvm would have to produce different results for the exact same computations, which would be odd.  Equals is strictly defined for this class, which I think is OK and the test is really supposed to just be testing equals and hashcode.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>150409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rvzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>