<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1466] CMAES Optimization Fails to find Actual Optimum if Solution Value is Negative</title>
                <link>https://issues.apache.org/jira/browse/MATH-1466</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;Class CMAESOptimizer (&lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java.lang.Object&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/optim/BaseOptimizer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;org.apache.commons.math3.optim.BaseOptimizer&lt;/a&gt;&amp;lt;PAIR&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/optim/BaseMultivariateOptimizer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;org.apache.commons.math3.optim.BaseMultivariateOptimizer&lt;/a&gt;&amp;lt;&lt;a href=&quot;http://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/optim/PointValuePair.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PointValuePair&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/optim/nonlinear/scalar/MultivariateOptimizer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;org.apache.commons.math3.optim.nonlinear.scalar.MultivariateOptimizer&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;org.apache.commons.math3.optim.nonlinear.scalar.noderiv.CMAESOptimizer)&lt;/p&gt;

&lt;p&gt;I cannot provide code as I work for a private company with IP. However, my tests indicate that if the&#160;we are minimizing a cost function, and the function&apos;s value&#160;is a negative value, the&#160;resulting solution is incorrect.&lt;/p&gt;

&lt;p&gt;For example, say I were minimizing y = x^2 - 100&lt;/p&gt;

&lt;p&gt;The solution should be x = 0, with a value of -100. However, this CMAES optimizer would find random solutions, like x = 3 or x = -2 (with solutions of -91 and -96 respectively).&lt;/p&gt;

&lt;p&gt;I used the BOBYQA solver, and it was able to find the solution of x = 0 with a value of y = -100. I tested y = x^2 + 100 and the CMAES solver was able to find a solution of x = 0, y = 100. I tested y = x^2 and the CMAES the CMAES solver was able to find a solution of x = 0, y = 0. I tested y = x^2 -1 and the CMAES solver was NOT able to find a solution of x = 0, y = -1.&lt;/p&gt;

&lt;p&gt;I know it is highly inconvenient, but if someone wants to take a look at my cost function I can try to get an NDA. I think this bug is reproducible without it. Feel free to contact me at &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:rwolkoff@umich.edu&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;rwolkoff@umich.edu&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;if more info is needed.&lt;/p&gt;

&lt;p&gt;I think it has to do with the following stop criteria, which ends early if the cost is negative:&lt;/p&gt;

&lt;p&gt;if (stopFitness != 0 &amp;amp;&amp;amp; bestFitness &amp;lt; (isMinimize ? stopFitness : -stopFitness)) &lt;/p&gt;
{
 break generationLoop;
}

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181429">MATH-1466</key>
            <summary>CMAES Optimization Fails to find Actual Optimum if Solution Value is Negative</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rwolkoff">Rebecca</reporter>
                        <labels>
                            <label>Optimization</label>
                    </labels>
                <created>Mon, 27 Aug 2018 18:19:34 +0000</created>
                <updated>Sun, 22 Aug 2021 01:34:43 +0000</updated>
                            <resolved>Sun, 22 Aug 2021 01:34:43 +0000</resolved>
                                    <version>3.6.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16595780" author="erans" created="Wed, 29 Aug 2018 00:26:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it has to do with the following stop criteria, which ends early if the cost is negative&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is spot on, indeed.&lt;br/&gt;
But this condition is controlled by the &lt;tt&gt;stopFitness&lt;/tt&gt; argument to the &lt;a href=&quot;http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math4/optim/nonlinear/scalar/noderiv/CMAESOptimizer.html#CMAESOptimizer-int-double-boolean-int-int-org.apache.commons.rng.UniformRandomProvider-boolean-org.apache.commons.math4.optim.ConvergenceChecker-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;constructor&lt;/a&gt;.  Which value do you use?&lt;br/&gt;
I&apos;ve added a &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=commons-math.git;a=commit;h=efb0230063b31d53bd077d9f6a4bb64fcbb9c97f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit test&lt;/a&gt; for &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;f(x) = x^2 - 100&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; that shows that the implementation should also work if the optimum has a negative fitness.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xgyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>