<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1534] GaussianCurveFitter.ParameterGuesser uses supicious halfHeight calculations</title>
                <link>https://issues.apache.org/jira/browse/MATH-1534</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;I&apos;m currently looking into some curve-fitting and have examined the&lt;/p&gt;

&lt;p&gt;basicGuess(WeightedObservedPoint[])&lt;/p&gt;

&lt;p&gt;in GaussianCurveFitter.ParameterGuesser, and there is one thing I don&apos;t really understand.&lt;/p&gt;

&lt;p&gt;in &lt;a href=&quot;https://github.com/apache/commons-math/blob/master/src/main/java/org/apache/commons/math4/fitting/GaussianCurveFitter.java#L301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Line 301&lt;/a&gt; the &quot;halfY&quot; is computed by n (what is the maximal y value of the observation) + half the sum of n+m (where m is the x value of the maximum) applying this to some of my datapoints that fit relatively good as a Gaussian later, it seems that this condition never works (assuming that max X != 0), and the default in the catch clause is used instead. It seems that the optimizer is quite well in fitting the data anyways.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erans&quot; class=&quot;user-hover&quot; rel=&quot;erans&quot;&gt;erans&lt;/a&gt; also suggested on the mailinglist that:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;it seems that the current code could be made more robust by&lt;br/&gt;
shifting the abscissa of the maximum height to 0 before performing&lt;br/&gt;
the rest of the computation&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For my own &quot;guessing&quot; I used the following strategy, I&apos;m not sure if the current code does something similar:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Use p&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and p&lt;span class=&quot;error&quot;&gt;&amp;#91;max&amp;#93;&lt;/span&gt; to form a line, then use PolynomialCurveFitter to  fit the line to all points on the left&lt;/li&gt;
	&lt;li&gt;Use the fitted line to calculate Xleft at Ymax&lt;/li&gt;
	&lt;li&gt;do the same for the rigtht portion&lt;/li&gt;
	&lt;li&gt;Assume fwhm = rightX-leftX&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13307270">MATH-1534</key>
            <summary>GaussianCurveFitter.ParameterGuesser uses supicious halfHeight calculations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="laeubi">Christoph L&#228;ubrich</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 May 2020 17:09:54 +0000</created>
                <updated>Tue, 26 May 2020 06:16:43 +0000</updated>
                                            <version>4.0</version>
                    <version>3.6.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17116308" author="erans" created="Mon, 25 May 2020 23:33:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; my own &quot;guessing&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Would you provide a PR/patch (with unit tests) so that we can compare?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; use PolynomialCurveFitter &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;At first sight, that seems &quot;heavy-weight&quot; since the fitter calls a non-linear least-squares optimizer.  The idea of the &quot;guesser&quot; is that it should be fast.  Then again, I don&apos;t think we ever made any benchmark...&lt;/p&gt;</comment>
                            <comment id="17116451" author="laeubi" created="Tue, 26 May 2020 05:38:40 +0000"  >&lt;p&gt;I&apos;ll try to provide a patch, a SimpleRegression could be enough here I just has used this for a first simple try to play around a little bit with different techniques. It was really fast anyways as I only compute around 1000 fits but I&apos;ll try to recheck with SimpleRegression. I also used Polynomial because I don&apos;t find any dedicated &quot;Line&quot; in common-math but maybe there is already a class for this purpose?&lt;/p&gt;

&lt;p&gt;Maybe it would also be an option to have multiple &quot;guesser&quot; classes?&lt;/p&gt;</comment>
                            <comment id="17116472" author="laeubi" created="Tue, 26 May 2020 06:16:43 +0000"  >&lt;p&gt;SimpleRegression works in my tests quite well, but if speed is concerned (and a relative rough estimate seems to give good results) it might be even enough to simply use my initial guess for the tangent by using P_left, P_max, P_right that would only require a handfull of simple calculations, to protect from outliers maybe an average over a few points would be good enough.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f4zs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>