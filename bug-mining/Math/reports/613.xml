<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1417] weird result in RRQR decomposition.</title>
                <link>https://issues.apache.org/jira/browse/MATH-1417</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;When using RRQRDecomposition on rank deficient matrix, results are wrong.&lt;/p&gt;

&lt;p&gt;double[][] Xi = {&lt;br/&gt;
            &lt;/p&gt;
{0, 0, 0, 0, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 1, 0, 0, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 0, 1, 0, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 0, 1, 0, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 0, 1, 0, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 0, 0, 1, 0, 0, 0, 0, 0},&lt;br/&gt;
            {0, 0, 0, 0, 0, 0, 1, 0, 0},&lt;br/&gt;
            {0, 0, 0, 0, 0, 0, 0, 0, 0}
&lt;p&gt;,};&lt;/p&gt;

&lt;p&gt;With this matrix, i obtain: &lt;/p&gt;

&lt;p&gt;rank 6&lt;/p&gt;

&lt;p&gt;R:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 1,000 1,000 1,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 1,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 1,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Q:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 1,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 1,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 1,000 0,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 1,000 0,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 1,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 1,000 0,000 0,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 1,000 0,000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,000 0,000 0,000 0,000 0,000 0,000 0,000 0,000 1,000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Where Scipy (lapack) or ejml gives me:&lt;br/&gt;
rank 4&lt;br/&gt;
Type = dense real , numRows = 9 , numCols = 8&lt;br/&gt;
-1,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000  -1,000   0,000   0,000  -1,000   0,000  -1,000   0,000  &lt;br/&gt;
 0,000   0,000  -1,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000  -1,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;/p&gt;

&lt;p&gt;Type = dense real , numRows = 9 , numCols = 9&lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   1,000   0,000   0,000  &lt;br/&gt;
-1,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000  -1,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000  -1,000   0,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   1,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   1,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000  -1,000   0,000   0,000   0,000   0,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   1,000   0,000  &lt;br/&gt;
 0,000   0,000   0,000   0,000   0,000   0,000   0,000   0,000   1,000  &lt;/p&gt;

&lt;p&gt;That are the results i expect.&lt;/p&gt;



</description>
                <environment>&lt;p&gt;linux RH6&lt;br/&gt;
netbeans 8.2 &lt;br/&gt;
java 1.8&lt;/p&gt;</environment>
        <key id="13070345">MATH-1417</key>
            <summary>weird result in RRQR decomposition.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lecomtje">Lecomte</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 May 2017 08:56:04 +0000</created>
                <updated>Wed, 10 May 2017 09:54:35 +0000</updated>
                                            <version>3.6.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16002476" author="erans" created="Tue, 9 May 2017 10:52:01 +0000"  >&lt;p&gt;Thanks for the report!&lt;/p&gt;

&lt;p&gt;Are you willing to dig into the code in order to locate the bug?&lt;/p&gt;</comment>
                            <comment id="16002565" author="lecomtje" created="Tue, 9 May 2017 12:00:40 +0000"  >&lt;p&gt;Hi Gilles,&lt;/p&gt;

&lt;p&gt;Why not ? &lt;br/&gt;
Is common math easily compiled once i checked it out  from git ?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Jef&lt;/p&gt;
</comment>
                            <comment id="16002571" author="erans" created="Tue, 9 May 2017 12:06:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is common math easily compiled once i checked it out from git ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Asumimg that you have &quot;maven&quot; installed, it should just be a matter of running this command:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn compile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16002748" author="lecomtje" created="Tue, 9 May 2017 14:15:40 +0000"  >&lt;p&gt;Ok, i got the source.&lt;br/&gt;
I&apos;m not a QR specialist. I took a look at the code and I&apos;ve found what gave me that weird result.&lt;/p&gt;

&lt;p&gt;In performHouseholderReflection:(RRQRDecomposition.java:111), just change&lt;br/&gt;
for (int j = 0; j &amp;lt; qrt&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.length; j++) {&lt;br/&gt;
(Norm is computed against the whole column )&lt;br/&gt;
By&lt;br/&gt;
for (int j = minor; j &amp;lt; qrt&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.length; j++) {&lt;br/&gt;
(Norm is computed under the current pivot )&lt;/p&gt;

&lt;p&gt; In performHouseholderReflection:(QRDecomposition.java:139-143) the norm is calculated again using  the column starting from minor pivot, &lt;br/&gt;
then in my case, I have a column whose values are before the diagonal ( then before the pivot ). This gives a &quot;full norm&quot; that is not null but that is null beside pivot.&lt;br/&gt;
This column is given for computing a reflector but this calculous failed ( a == 0) because &quot;restricted norm&quot; is null.&lt;/p&gt;

&lt;p&gt;If norms are computed always the same manner, the pivoting is ok and the result is ok in my test case.&lt;/p&gt;

&lt;p&gt;Further testing should be done but maybe it can be a quick fix.&lt;/p&gt;

&lt;p&gt;Hope this can help.&lt;/p&gt;

&lt;p&gt;I&apos;m also surprised to see a test (a!=0) in QR Decomposition with double values.&lt;/p&gt;</comment>
                            <comment id="16002798" author="erans" created="Tue, 9 May 2017 14:41:48 +0000"  >&lt;p&gt;Have you checked out the git &quot;master&quot; branch?&lt;br/&gt;
With your example (and no change to the source), I obtain 4 as the rank value.&lt;/p&gt;</comment>
                            <comment id="16002933" author="lecomtje" created="Tue, 9 May 2017 15:56:40 +0000"  >&lt;p&gt;Sorry, but i am searching a nullspace and so i work with Xi transposed, not Xi by itself. And with this transposed matrix I should also obtain rank 4.&lt;br/&gt;
I didn&apos;t test master branch but the code seems the same.&lt;/p&gt;</comment>
                            <comment id="16003376" author="erans" created="Tue, 9 May 2017 19:35:30 +0000"  >&lt;p&gt;Got it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Please check that commit ed1ce82d822ffe185875b7b7d38352f20171c096 fixed the problem.&lt;/p&gt;</comment>
                            <comment id="16004387" author="lecomtje" created="Wed, 10 May 2017 09:32:40 +0000"  >&lt;p&gt;Ok, it&apos;s ok for me.&lt;/p&gt;

&lt;p&gt;I use the current stable release 3.6.1 of apache math in an industrial product.&lt;br/&gt;
How should I proceed to take advantage of this fix ?&lt;/p&gt;</comment>
                            <comment id="16004422" author="erans" created="Wed, 10 May 2017 09:54:35 +0000"  >&lt;p&gt;Side-note: When you add a comment, please disable quoting of previous comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How should I proceed to take advantage of this fix ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It depends on your requirements.&lt;br/&gt;
Best is to start a thread on the &quot;dev&quot; ML.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ep1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>