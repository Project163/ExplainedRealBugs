<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:25:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-1401] Exception at IntervalUtils.getClopperPearsonInterval</title>
                <link>https://issues.apache.org/jira/browse/MATH-1401</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;IntervalUtils.getClopperPearsonInterval throws an exception when number of successes equals to zero or number of successes = number of trials.&lt;/p&gt;

&lt;p&gt;IntervalUtils.getClopperPearsonInterval(1, 0, 0.95) or IntervalUtils.getClopperPearsonInterval(1, 1, 0.95) throws org.apache.commons.math3.exception.NotStrictlyPositiveException despite that its input parameters are valid. &lt;/p&gt;



</description>
                <environment></environment>
        <key id="13037603">MATH-1401</key>
            <summary>Exception at IntervalUtils.getClopperPearsonInterval</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="art.g">Art</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jan 2017 07:38:15 +0000</created>
                <updated>Thu, 18 Apr 2019 15:46:39 +0000</updated>
                            <resolved>Tue, 16 Apr 2019 11:01:27 +0000</resolved>
                                    <version>3.6.1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15848511" author="erans" created="Wed, 1 Feb 2017 15:28:27 +0000"  >&lt;p&gt;I seem to recall that it might be fixed in the current &quot;master&quot; branch.&lt;br/&gt;
Can you try it?  Thanks.&lt;/p&gt;</comment>
                            <comment id="15994384" author="kinow" created="Wed, 3 May 2017 07:11:42 +0000"  >&lt;p&gt;With the latest code from master today (dff1a0953d97d46290750a46d01be1e1519ae698):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ConfidenceInterval ci = IntervalUtils.getClopperPearsonInterval(1, 0, 0.95);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Throws:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.commons.math4.exception.MathIllegalArgumentException: lower bound (0) must be strictly less than upper bound (0)
	at org.apache.commons.math4.stat.interval.ConfidenceInterval.checkParameters(ConfidenceInterval.java:103)
	at org.apache.commons.math4.stat.interval.ConfidenceInterval.&amp;lt;init&amp;gt;(ConfidenceInterval.java:57)
	at org.apache.commons.math4.stat.interval.ClopperPearsonInterval.createInterval(ClopperPearsonInterval.java:56)
	at org.apache.commons.math4.stat.interval.IntervalUtils.getClopperPearsonInterval(IntervalUtils.java:104)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ConfidenceInterval ci = IntervalUtils.getClopperPearsonInterval(1, 1, 0.95);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Throws:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.commons.math4.exception.NotStrictlyPositiveException: degrees of freedom (0)
	at org.apache.commons.math4.distribution.FDistribution.&amp;lt;init&amp;gt;(FDistribution.java:85)
	at org.apache.commons.math4.distribution.FDistribution.&amp;lt;init&amp;gt;(FDistribution.java:63)
	at org.apache.commons.math4.stat.interval.ClopperPearsonInterval.createInterval(ClopperPearsonInterval.java:49)
	at org.apache.commons.math4.stat.interval.IntervalUtils.getClopperPearsonInterval(IntervalUtils.java:104)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15994402" author="kinow" created="Wed, 3 May 2017 07:40:44 +0000"  >&lt;p&gt;And in R, the &lt;a href=&quot;https://artax.karlin.mff.cuni.cz/r-help/library/PropCIs/html/exactci.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PropCIs&lt;/a&gt; library gives:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;library(PropCIs)
exactci(1, 1, 0.95)

data:  

95 percent confidence interval:
 0.025 1.000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But must admit that I&apos;m abstracting away the fact that there are two functions for calculating clopper pearson interval (exactci and midPci). I have some links from the PropCIs R vignette (as tutorials are called in R), a &lt;a href=&quot;https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Clopper-Pearson_interval&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Wikipedia page I found&lt;/a&gt;, and another &lt;a href=&quot;http://www.stat.cmu.edu/~mciollar/resources/clopper-pearson.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;R related web page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The Java code seems to be correctly checking to avoid division by zero and NaN errors. However, looking at the R implementation, it seems that we could simply add an extra case for when the denominator is zero. Though, instead of simply copying the code from other libraries, I intend to read these links before fixing the code, in order to learn what are clopper pearson intervals. If anyone beats me fixing the code, that&apos;ll be all right as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16002447" author="kinow" created="Tue, 9 May 2017 10:27:38 +0000"  >&lt;p&gt;To make it easier, will start naming the two cases we have. Case #1 is the one I had some time to study today, and is when *&lt;b&gt;number of successes is equals zero&lt;/b&gt;*. And Case #2 is where **number of successes is equal to the number of trials&quot;.&lt;/p&gt;

&lt;p&gt;The exception is raised &lt;a href=&quot;https://github.com/apache/commons-math/blob/20403f09bfe6f06626cd1253042b848e38f038fd/src/main/java/org/apache/commons/math4/stat/interval/ConfidenceInterval.java#L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# class: ConfidenceInterval
    /**
     * Verifies that (lower, upper) is a valid non-empty interval and confidence
     * is strictly between 0 and 1.
     *
     * @param lower lower endpoint
     * @param upper upper endpoint
     * @param confidence confidence level
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void checkParameters(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; lower, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; upper, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; confidence) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lower &amp;gt;= upper) { &amp;lt;---------------------- HERE, both are 0 &amp;lt;=&amp;gt; 0
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MathIllegalArgumentException(LocalizedFormats.LOWER_BOUND_NOT_BELOW_UPPER_BOUND, lower, upper);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (confidence &amp;lt;= 0 || confidence &amp;gt;= 1) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MathIllegalArgumentException(LocalizedFormats.OUT_OF_BOUNDS_CONFIDENCE_LEVEL, confidence, 0, 1);
        }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code is checking if the confidence interval lower and upper bounds are different. The &lt;a href=&quot;https://artax.karlin.mff.cuni.cz/r-help/library/PropCIs/html/exactci.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;R code&lt;/a&gt; handles three cases, when the number of successes is zero, when the number of successes and trials is the same, and the case where both previous constraints are not true.&lt;/p&gt;

&lt;p&gt;Our code in ClopperPearsonInterval checks if the number of successes is greater than 0 only. Then returns a ConfidenceInterval object.&lt;/p&gt;

&lt;p&gt;My current guess is that by understanding why the R code is treating these three cases, we may be able to confirm if it makes sense adding some if/else for these constraints in our Java code too.&lt;/p&gt;
</comment>
                            <comment id="16002454" author="kinow" created="Tue, 9 May 2017 10:34:04 +0000"  >&lt;p&gt;Continuing on case #1, &lt;a href=&quot;http://www.lexjansen.com/phuse/2013/sp/SP05.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this PDF&lt;/a&gt; mentions that &quot;The lower bound is set to 0 when x = 0, and the upp&lt;br/&gt;
er bound is set to 1 when x = n. &quot;. These are exact variable names in the R library, and this is exactly what is happening.&lt;/p&gt;

&lt;p&gt;There is still the matter that the calculation is different when x &amp;gt;0 and x != n.&lt;/p&gt;</comment>
                            <comment id="16002481" author="kinow" created="Tue, 9 May 2017 10:53:45 +0000"  >&lt;p&gt;Found a better paper explaining it (A. Boomsma, &quot;Confidence Intervals for a Binomial Proportion&quot; link: &lt;a href=&quot;http://www.ppsw.rug.nl/~boomsma/confbin.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.ppsw.rug.nl/~boomsma/confbin.pdf&lt;/a&gt;).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For x = 0, the lower limit r1 = 0, because the upper limit ru satisfies the equality (1 - ru) ^n = alpha / 2, from which it follows that ru = 1 - (alpha / 2) ^ 1/n.&lt;/p&gt;

&lt;p&gt;For x = n, the upper limit ru = 1, because the lower limit satisfies r = alpha / 2, which makes r = (alpha / 2) ^ 1/n.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Which matches exactly with the R implementation. I will update the code, and run some codes for this Case #1. In case it works, will report back here and focus on Case #2 (which could be automatically fixed by fixing Case#1 I think...).&lt;/p&gt;</comment>
                            <comment id="16002564" author="kinow" created="Tue, 9 May 2017 11:59:45 +0000"  >&lt;p&gt;Here are the results with R PropCIs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;data:  

95 percent confidence interval:
 0.000 0.975

&amp;gt; exactci(n=1, x=0, 0.95)



data:  

95 percent confidence interval:
 0.000 0.975

&amp;gt; exactci(n=1, x=1, 0.95)



data:  

95 percent confidence interval:
 0.025 1.000

&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16817366" author="micdestefano" created="Sun, 14 Apr 2019 17:27:29 +0000"  >&lt;p&gt;Dear all, this issue is still present.&lt;/p&gt;

&lt;p&gt;I&apos;ve found an elegant solution (from another developer) that requires very few modifications.&lt;/p&gt;

&lt;p&gt;Look here: &lt;a href=&quot;https://www.google.com/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=3&amp;amp;cad=rja&amp;amp;uact=8&amp;amp;ved=2ahUKEwigvbLVjNDhAhWOneAKHQ64CFEQFjACegQIBRAB&amp;amp;url=https%3A%2F%2Fgithub.com%2Fkomiya-atsushi%2Fbinomial-proportion-confidence-interval%2Fblob%2Fmaster%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fcommons%2Fmath3%2Fstat%2Finterval%2FModifiedClopperPearsonInterval.java&amp;amp;usg=AOvVaw18pyz4IhNzmgTo1MAH-brE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ModifiedClopperPearsonInterval.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, it is sufficient to set the default for the upper bound to 1, and to perform the computation of the upper bound only when the number of successes is less than the number of trials (this is a check to be added).&lt;/p&gt;

&lt;p&gt;I checked the correctness of the results against the same computation performed by the statsmodels Python package.&lt;/p&gt;</comment>
                            <comment id="16817373" author="erans" created="Sun, 14 Apr 2019 18:12:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve found an elegant solution &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks. Patch welcome (with unit test)!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;(from another developer)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please check possible license issues.&lt;br/&gt;
IIUC, the MIT license would require the addition of an entry in the &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-math.git;a=blob;f=NOTICE.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&quot;NOTICE.txt&quot; file&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16817595" author="micdestefano" created="Mon, 15 Apr 2019 06:43:16 +0000"  >&lt;p&gt;Excuse me ... I am a user of this commons-math library, not the developer. So I think I already did more than what is required from me, because further to reporting the issue, I&apos;ve also suggested its fix (which, I repeat, it&apos;s quite simple if you spend 5 minutes on it).&lt;/p&gt;

&lt;p&gt;If, on the other hand, this library is going to be dismissed (I see that this issue is open since 2017) then please tell it clearly.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Michele&lt;/p&gt;</comment>
                            <comment id="16818905" author="erans" created="Tue, 16 Apr 2019 11:01:27 +0000"  >&lt;p&gt;commit 53d9c7fbfbe9cbd7e11cb872ef87e00462fa3eca&lt;/p&gt;</comment>
                            <comment id="16818911" author="erans" created="Tue, 16 Apr 2019 11:21:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;&#160;I am a user of this commons-math library, not the developer.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &quot;developer&quot; is the community of users.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;[...] please tell it clearly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The list of pending bugs is long; more than 150 issues were &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20MATH%20AND%20fixVersion%20%3D%204.0%20AND%20statusCategory%20%3D%20done&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;fixed since the last release&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16820276" author="micdestefano" created="Wed, 17 Apr 2019 16:30:17 +0000"  >&lt;p&gt;Dear Gilles,&lt;/p&gt;

&lt;p&gt;I&apos;m sorry but actually the issue is not fixed at all.&lt;/p&gt;

&lt;p&gt;Nevertheless, I now have cloned the repo and I have a branch where I have fixed the issue and I have also provided meaningful unit tests. The only issue is that I am not able to push this branch ... I was expecting to be able to push the branch and then perform a pull request (I&apos;m sorry but it is the first time that I try to do something like that).&lt;/p&gt;

&lt;p&gt;Can you tell me what to do? Do you need my user name, in order to grant me the right to push my branch?&lt;/p&gt;</comment>
                            <comment id="16820298" author="erans" created="Wed, 17 Apr 2019 16:57:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;the issue is not fixed&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What happens?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am not able to push this branch&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s expected: There is a process before being granted write access.&lt;br/&gt;
Mainly, it boils down to interacting with regular contributors for some time...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m sorry but it is the first time that I try to do something like that&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No problem.  Thanks a lot for continuing the effort. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you tell me what to do?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Next step would be to &lt;a href=&quot;http://commons.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;subscribe to the &quot;dev&quot; mailing list&lt;/a&gt;.  It&apos;s the place where we discuss general issues.&lt;br/&gt;
It is certainly not necessary to have write access in order to submit a pull request.&lt;/p&gt;

&lt;p&gt;In the meantime, you could attach a &quot;patch&quot; file to this page, so that we can further discuss this particular problem here.&lt;/p&gt;</comment>
                            <comment id="16820531" author="micdestefano" created="Wed, 17 Apr 2019 21:51:21 +0000"  >&lt;p&gt;Dear Gilles,&lt;/p&gt;

&lt;p&gt;I&apos;ve just attached the modified unit test (ClopperPearsonIntervalTest.java) and the modified (now working) code (ClopperPearsonInterval.java).&lt;/p&gt;

&lt;p&gt;Your fix was failing to address the case with number of successes = 0.&lt;/p&gt;

&lt;p&gt;Because I am also a data scientist and I have a lot of experience in Python scientific programming, I generated 3 meaningful test cases with expected results obtained by the same algorithm implemented in a Python package that I use (the package name is statsmodels). I use that package since a while and I trust its results (for our specific case, I&apos;ve also partially verified them theoretically).&lt;/p&gt;

&lt;p&gt;So, in the unit test you will find comments from myself, explaining which was the Python instruction I used to produce the expected numbers (so that anyone that is also able to program in Python can reproduce them).&lt;/p&gt;

&lt;p&gt;I suspect (but I have not verified this) that we have similar issues with the implementation of the other algorithms that produce confidence intervals for the binomial distribution.&lt;/p&gt;

&lt;p&gt;In summary, the 3 cases we need to test for each of these methods are&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;number of successes = 0, number of trials = N&lt;/li&gt;
	&lt;li&gt;number of successes = k, number of trials = N, 0 &amp;lt; k &amp;lt; N&lt;/li&gt;
	&lt;li&gt;number of successes = number of trials = N&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The code I&apos;ve attached now passes all the three of them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Michele&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12966287/12966287_ClopperPearsonIntervalTest.java&quot; title=&quot;ClopperPearsonIntervalTest.java attached to MATH-1401&quot;&gt;ClopperPearsonIntervalTest.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12966288/12966288_ClopperPearsonInterval.java&quot; title=&quot;ClopperPearsonInterval.java attached to MATH-1401&quot;&gt;ClopperPearsonInterval.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16821071" author="erans" created="Thu, 18 Apr 2019 12:58:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;I generated 3 meaningful test cases&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;blockquote&gt;
&lt;ol&gt;
	&lt;li&gt;number of successes = 0, number of trials = N&lt;/li&gt;
	&lt;li&gt;number of successes = k, number of trials = N, 0 &amp;lt; k &amp;lt; N&lt;/li&gt;
	&lt;li&gt;number of successes = number of trials = N&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Quite clear indeed.  And that&apos;s how the unit tests should be designed; hence &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-math.git;a=blob;f=src/test/java/org/apache/commons/math4/stat/interval/ClopperPearsonIntervalTest.java;h=6a06f97df656a45ba69953a94214bada271ca8f7;hb=0df313bef62d5fedc18286b80fc93248b5f180fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the modifications&lt;/a&gt; to the test code which you provided.&lt;br/&gt;
Please have a look.&lt;/p&gt;

&lt;p&gt;Side note: Package &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-math.git;a=tree;f=src/main/java/org/apache/commons/math4/stat/interval&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;org.apache.commons.math4.stat.interval&lt;/tt&gt;&lt;/a&gt; shows its age.  A new &lt;a href=&quot;http://commons.apache.org/proper/commons-statistics/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&quot;Commons Statistics&quot; component&lt;/a&gt; is being developed as an opportunity to fix and modernize the API of the statistical utilities.  You are most welcome to help with the porting work.&lt;/p&gt;</comment>
                            <comment id="16821245" author="micdestefano" created="Thu, 18 Apr 2019 15:46:39 +0000"  >&lt;p&gt;Gilles,&lt;/p&gt;

&lt;p&gt;I&apos;ve seen the new version of the unit test and I completely agree with your modifications. The test is clearer and more effective in the form you propose (I&apos;ll keep in mind for the future ... it&apos;s actually better to encapsulate each test case in a separate method).&lt;/p&gt;

&lt;p&gt;As soon as I can (with the limited time that I have) I will try to do a similar exercise with the other algorithms that produce confidence intervals for the binomial distribution (I can check again with Python results).&lt;/p&gt;

&lt;p&gt;So, if you push the fixed code to the master, to me the issue is fixed.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Michele&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12966288" name="ClopperPearsonInterval.java" size="2817" author="micdestefano" created="Wed, 17 Apr 2019 21:38:02 +0000"/>
                            <attachment id="12966287" name="ClopperPearsonIntervalTest.java" size="4397" author="micdestefano" created="Wed, 17 Apr 2019 21:37:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3965z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>