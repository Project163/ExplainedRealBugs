<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:22:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-692] Cumulative probability and inverse cumulative probability inconsistencies</title>
                <link>https://issues.apache.org/jira/browse/MATH-692</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;There are some inconsistencies in the documentation and implementation of functions regarding cumulative probabilities and inverse cumulative probabilities. More precisely, &apos;&amp;lt;&apos; and &apos;&amp;lt;=&apos; are not used in a consistent way.&lt;/p&gt;

&lt;p&gt;Besides I would move the function inverseCumulativeProbability(double) to the interface Distribution. A true inverse of the distribution function does neither exist for Distribution nor for ContinuosDistribution. Thus we need to define the inverse in terms of quantiles anyway, and this can already be done for Distribution.&lt;/p&gt;

&lt;p&gt;On the whole I would declare the (inverse) cumulative probability functions in the basic distribution interfaces as follows:&lt;/p&gt;

&lt;p&gt;Distribution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cumulativeProbability(double x): returns P(X &amp;lt;= x)&lt;/li&gt;
	&lt;li&gt;cumulativeProbability(double x0, double x1): returns P(x0 &amp;lt; X &amp;lt;= x1) &lt;span class=&quot;error&quot;&gt;&amp;#91;see also 1)&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;inverseCumulativeProbability(double p):&lt;br/&gt;
  returns the quantile function inf
{x in R | P(X&amp;lt;=x) &amp;gt;= p}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;see also 2), 3), and 4)&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;1) An aternative definition could be P(x0 &amp;lt;= X &amp;lt;= x1). But this requires to put the function probability(double x) or another cumulative probability function into the interface Distribution in order be able to calculate P(x0 &amp;lt;= X &amp;lt;= x1) in AbstractDistribution.&lt;br/&gt;
2) This definition is stricter than the definition in ContinuousDistribution, because the definition there does not specify what to do if there are multiple x satisfying P(X&amp;lt;=x) = p.&lt;br/&gt;
3) A modification could be defined for p=0: Returning sup&lt;/p&gt;
{x in R | P(X&amp;lt;=x) = 0}
&lt;p&gt; would yield the infimum of the distribution&apos;s support instead of a mandatory -infinity.&lt;br/&gt;
4) This affects issue &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-540&quot; title=&quot;AbstractIntegerDistribution.inverseCumulativeProbability(...) Bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-540&quot;&gt;&lt;del&gt;MATH-540&lt;/del&gt;&lt;/a&gt;. I&apos;d prefere the definition from above for the following reasons:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;This definition simplifies inverse transform sampling (as mentioned in the other issue).&lt;/li&gt;
	&lt;li&gt;It is the standard textbook definition for the quantile function.&lt;/li&gt;
	&lt;li&gt;For integer distributions it has the advantage that the result doesn&apos;t change when switching to &quot;x in Z&quot;, i.e. the result is independent of considering the intergers as sole set or as part of the reals.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ContinuousDistribution:&lt;br/&gt;
nothing to be added regarding (inverse) cumulative probability functions&lt;/p&gt;

&lt;p&gt;IntegerDistribution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cumulativeProbability(int x): returns P(X &amp;lt;= x)&lt;/li&gt;
	&lt;li&gt;cumulativeProbability(int x0, int x1): returns P(x0 &amp;lt; X &amp;lt;= x1) &lt;span class=&quot;error&quot;&gt;&amp;#91;see also 1) above&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12527632">MATH-692</key>
            <summary>Cumulative probability and inverse cumulative probability inconsistencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cwinter">Christian Winter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2011 18:01:57 +0000</created>
                <updated>Mon, 23 Jul 2012 23:18:14 +0000</updated>
                            <resolved>Thu, 2 Feb 2012 06:45:59 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.1</version>
                    <version>1.2</version>
                    <version>2.0</version>
                    <version>2.1</version>
                    <version>2.2</version>
                    <version>3.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13131245" author="psteitz" created="Thu, 20 Oct 2011 01:13:06 +0000"  >&lt;p&gt;Thanks for raising this issue, Christian - especially now as we finalize the 3.0 API.&lt;/p&gt;

&lt;p&gt;I am +1 for these changes.  I agree that the inf-based definition of inverse cum is more standard and we are in a position now make the change, so I say lets do it.  I am also +1 on the move of this up to the distribution interface.  The reason we did not include it there originally was that we thought we might implement distributions for which we could not define inverses.  That has not happened in the last 8 years, so I think its safe enough to push it up.&lt;/p&gt;

&lt;p&gt;The code, test, user guide and doc changes for this have to be done carefully.  Patches most welcome.&lt;/p&gt;

&lt;p&gt;Is everyone else OK with this change?&lt;/p&gt;</comment>
                            <comment id="13131402" author="celestin" created="Thu, 20 Oct 2011 06:09:32 +0000"  >&lt;p&gt;I have neither used nor developed this part of CM, so my view on this is of but little value. Having said that, anything improving consistency can only be desirable, especially at this stage. So I&apos;m all for it, and will be soon available (when I&apos;m done on SYMMLQ) for an (novice on these issues) help.&lt;/p&gt;

&lt;p&gt;S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13131407" author="mikl" created="Thu, 20 Oct 2011 06:26:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13133440" author="cwinter" created="Sat, 22 Oct 2011 17:10:35 +0000"  >&lt;p&gt;Thanks for the feedback to all. S&#233;bastien, thanks for offering your help. If you like and find time for it, you could implement AbstractDistribution.inverseCumulativeProbability(double p).&lt;/p&gt;

&lt;p&gt;I will provide some patches next week, but adjusting AbstractContinuousDistribution.inverseCumulativeProbability(double p) will take some more time.&lt;/p&gt;

&lt;p&gt;After thinking a little more about the structure of the interfaces, I&apos;d like to put the function probability(double x) to Distribution anyway (independently of the thought in point 1) above).&lt;/p&gt;

&lt;p&gt;Are there any preferences on P(x0 &amp;lt;= X &amp;lt;= x1) or P(x0 &amp;lt; X &amp;lt;= x1) for cumulativeProbability(double x0, double x1)?&lt;/p&gt;</comment>
                            <comment id="13133464" author="psteitz" created="Sat, 22 Oct 2011 20:24:40 +0000"  >&lt;p&gt;I am not sure it is really makes sense to add probability(double x) to the Distribution interface.  It would have to be defined as density (referring to the distribution function) to make sense in the continuous case, since defined as p(X = x) it would in most cases be identically 0 for continuous distributions.&lt;/p&gt;

&lt;p&gt;Regarding the cum definition, I am fine with P(x0 &amp;lt; X &amp;lt;= x1).&lt;/p&gt;</comment>
                            <comment id="13133594" author="celestin" created="Sun, 23 Oct 2011 08:39:52 +0000"  >&lt;p&gt;Happy to help on the inverse cumulative probability. You will have to be patient and forgieving with me, though, as I discover this part of CM.&lt;/p&gt;

&lt;p&gt;As for the definition, I think that one of the bounds should be excluded, so that these cumulative probabilities can be summed&lt;br/&gt;
P(a &amp;lt; X &amp;lt;= c) = P(a &amp;lt; X &amp;lt;= b) + P(b &amp;lt; X &amp;lt;= c),&lt;br/&gt;
even in the case of discrete PDFs.&lt;/p&gt;

&lt;p&gt;Whether the lower or upper bound should be excluded is another matter. I usually work with continuous pdfs, so I don&apos;t know if there is a common practice in the probability community. If there is none, I would tend to chose the following definition&lt;br/&gt;
P(x0 &amp;lt;= X &amp;lt; x1)&lt;br/&gt;
(sorry Phil!), because it would be consistent with the way things are usually indexed in java (a&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.. a&lt;span class=&quot;error&quot;&gt;&amp;#91;a.length-1&amp;#93;&lt;/span&gt;). See also &lt;tt&gt;org.apache.commons.math.util.MultidimensionalCounter&lt;/tt&gt;. Although this type of consistency is not an absolute requirement, I think it is nice for the user to have such simple principle: &quot;lower bound always included, upper bound always excluded&quot;. Appart from this small point, I really have no objection to any choice.&lt;/p&gt;</comment>
                            <comment id="13133665" author="psteitz" created="Sun, 23 Oct 2011 15:22:44 +0000"  >&lt;p&gt;Have a look at the default implementation of cum(x0,x1) now in AbstractDistribution.  I think the incorrectness in the documentation there may have been what triggered Christian to raise this issue.  The equation cum(a,b) = F(b) - F(a) where F is the distribution function is natural and what the impl there is trying to do.  In the discrete case, this equation fails, however, unless you define the cum to exclude the &lt;b&gt;lower&lt;/b&gt; endpoint.  That&apos;s why P(x0 &amp;lt; X &amp;lt;= x1) is a better definition.&lt;/p&gt;</comment>
                            <comment id="13133668" author="celestin" created="Sun, 23 Oct 2011 15:31:27 +0000"  >&lt;p&gt;OK, Phil, it makes perfect sense.&lt;/p&gt;</comment>
                            <comment id="13133718" author="cwinter" created="Sun, 23 Oct 2011 19:57:58 +0000"  >&lt;p&gt;Good, the definition of cum(x0,x1) will be P(x0 &amp;lt; X &amp;lt;= x1). Phil, you are right: cum(x0,x1) in AbstractDistribution was a reason for raising this issue. Another reason was cum(int x0, int x1) in AbstractIntegerDistribution.&lt;/p&gt;

&lt;p&gt;The idea behind probability(double x) is in fact to define it as p(X = x) and to return 0 for continuous distributions. This function would be useful for discrete distributions not inheriting from IntergerDistribution and for distributions being composed of discrete and continuous parts.&lt;/p&gt;</comment>
                            <comment id="13133745" author="psteitz" created="Sun, 23 Oct 2011 20:59:59 +0000"  >&lt;p&gt;I guess I am OK with pushing p&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; up.  See related post to follow in commons-dev. &lt;/p&gt;</comment>
                            <comment id="13136853" author="celestin" created="Thu, 27 Oct 2011 07:07:31 +0000"  >&lt;p&gt;Hi Christian,&lt;br/&gt;
I&apos;ve started looking into this issue. As I said, you will have to be patient with me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
I can see there already is a default implementation of &lt;tt&gt;AbstractContinuousDistribution.inverseCumulativeProbability&lt;/tt&gt;. So what exactly would you like me to do? Is this implementation fragile? Would you like me to improve robustness? Provide full testing?&lt;/p&gt;

&lt;p&gt;I think there might be issues when the PDF falls down to zero in a range (in which case the cum exhibits a plateau). The returned value might differ from the mathematical definition you proposed. Is this what you want me to work on? Have you already identified other issues?&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13138795" author="cwinter" created="Fri, 28 Oct 2011 21:36:45 +0000"  >&lt;p&gt;Hi S&#233;bastien,&lt;/p&gt;

&lt;p&gt;the problem with the plateau is indeed one issue which needs to be solved.&lt;/p&gt;

&lt;p&gt;Additionally, AbstractDistribution will need an implementation of inverseCumulativeProbability. In fact both implementations should be the same except for the solver to be used. Thus inverseCumulativeProbability should be implemented just once in AbstractDistribution, and invoking the solver should be put to a separate procedure so that it can be overridden in AbstractContinuousDistribution.&lt;/p&gt;

&lt;p&gt;A third point is the choice of the solvers. For AbstractDistribution we need a solver which works even for discontinuous cdfs (BisectionSolver can do the job, but maybe the implementations of the faster IllinoisSolver, PegasusSolver, BrentSolver, or another solver can cope with discontinuities, too). For AbstractContinuousDistribution it would be beneficial to use a DifferentiableUnivariateRealSolver. However, the NewtonSolver cannot be used due to uncertainty of convergence and an alternative doesn&apos;t seem to exist by now. So we have to choose one of the other solvers for now.&lt;/p&gt;

&lt;p&gt;As all these points are interdependent, I guess it&apos;s best to solve them as a whole. If you like, you can do this.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
Christian&lt;/p&gt;</comment>
                            <comment id="13138835" author="cwinter" created="Fri, 28 Oct 2011 22:02:18 +0000"  >&lt;p&gt;Another point for discussion:&lt;br/&gt;
I&apos;d like to introduce&lt;br/&gt;
getDomainBracket(double p): returns double[]&lt;br/&gt;
to AbstractDistribution as helper function for inverseCumulativeProbability. This allows to avoid searching a bracket where a bracket can be specified directly.&lt;br/&gt;
The function getDomainBracket could be made abstract (which means to remove getInitialDomain, getDomainLowerBound, and getDomainUpperBound as these functions aren&apos;t needed any more), or it could have a default implementation (according to the corresponding part of the current implementation of inverseCumulativeProbability) which uses getInitialDomain, getDomainLowerBound, and getDomainUpperBound. However, getInitialDomain, getDomainLowerBound, and getDomainUpperBound should not be abstract in the latter case. Otherwise a derived class would be forced to implement something it potentially doesn&apos;t use. Thus the functions getInitialDomain, getDomainLowerBound, and getDomainUpperBound should have default implementations which either return default values (0, -infinity, +infinity) or throw an exception saying something like &quot;has to be implemented&quot;.&lt;/p&gt;</comment>
                            <comment id="13139105" author="celestin" created="Sat, 29 Oct 2011 04:23:08 +0000"  >&lt;p&gt;Hi Christian,&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Hi S&#233;bastien,&lt;/p&gt;

&lt;p&gt;the problem with the plateau is indeed one issue which needs to be solved.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m working on it...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Additionally, AbstractDistribution will need an implementation of inverseCumulativeProbability. In fact both implementations should be the same except for the solver to be used. Thus inverseCumulativeProbability should be implemented just once in AbstractDistribution, and invoking the solver should be put to a separate procedure so that it can be overridden in AbstractContinuousDistribution.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;OK, for now, I&apos;m concentrating on making the current impl in &lt;tt&gt;AbstractContinuousDistribution&lt;/tt&gt; more robust. The other impl should be easier.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A third point is the choice of the solvers. For AbstractDistribution we need a solver which works even for discontinuous cdfs (BisectionSolver can do the job, but maybe the implementations of the faster IllinoisSolver, PegasusSolver, BrentSolver, or another solver can cope with discontinuities, too). For AbstractContinuousDistribution it would be beneficial to use a DifferentiableUnivariateRealSolver. However, the NewtonSolver cannot be used due to uncertainty of convergence and an alternative doesn&apos;t seem to exist by now. So we have to choose one of the other solvers for now.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The current implementation uses a Brent solver. I think the solver itself is only one side of the issue. The other point is the algorithm used to bracket the solution, in order to ensure that the result is consistent with the definition of the cumprob. As for the &lt;tt&gt;DifferentiableUnivariateRealSolver&lt;/tt&gt;, I&apos;m not too sure. I guess it depends on what is meant by &quot;continuous distribution&quot;. For me, it means that the random variable takes values in a continuous set, and possibly its distribution is defined by a density. However, in my view, nothing prevents occurences of Dirac functions, in which case the cum sum is only piecewise C1. It&apos;s all a matter of definition, of course, and I&apos;ll ask the question on the forum to check whether or not people want to allow for such a situation.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;As all these points are interdependent, I guess it&apos;s best to solve them as a whole. If you like, you can do this.&lt;/p&gt;

&lt;p&gt;Best Regards,&lt;br/&gt;
Christian&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, I&apos;m very interested.&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13144630" author="celestin" created="Sat, 5 Nov 2011 08:29:02 +0000"  >&lt;p&gt;Please note that &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-699&quot; title=&quot;inverseCumulativeDistribution fails with cumulative distribution having a plateau&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-699&quot;&gt;&lt;del&gt;MATH-699&lt;/del&gt;&lt;/a&gt; has been created specifically to handle plateaux.&lt;/p&gt;

&lt;p&gt;S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13146535" author="cwinter" created="Tue, 8 Nov 2011 20:28:17 +0000"  >&lt;p&gt;Here is the first patch for this issue (unfortunately with some delay). It adjusts the distributions with real domain to the definitions in this issue, and it mainly changes documentations.&lt;/p&gt;

&lt;p&gt;I could not move inverseCumulativeProbability(double) up to Distribution because there would be a conflict with IntegerDistribution.inverseCumulativeProbability(double): This method returns int. This problem will be removed by solving issue &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-703&quot; title=&quot;Splitting up the distribution hierarchy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-703&quot;&gt;&lt;del&gt;MATH-703&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The implementation of inverseCumulativeProbability(double) is not changed as S&#233;bastien is working on this.&lt;/p&gt;

&lt;p&gt;I will provide the patch for the integer distributions as soon as I have adjusted the test data to the new inequalities and reverified the adjusted test data.&lt;/p&gt;</comment>
                            <comment id="13146823" author="celestin" created="Wed, 9 Nov 2011 07:22:46 +0000"  >&lt;p&gt;All,&lt;br/&gt;
since I&apos;m already working on this package, I&apos;m happy to commit the patch on behalf of Christian. However, since I&apos;m a relatively new committer, I would feel more confident if one of the &quot;old, wise committers&quot; could double check the svn log afterwards.&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13147115" author="psteitz" created="Wed, 9 Nov 2011 15:48:10 +0000"  >&lt;p&gt;Hey, that&apos;s how it always works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;/p&gt;

&lt;p&gt;I don&apos;t know about &quot;wise&quot; but I certainly qualify as &quot;old&quot; by any standard, so will have a look once you have reviewed and committed.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13147514" author="celestin" created="Thu, 10 Nov 2011 06:23:39 +0000"  >&lt;p&gt;Patch &lt;tt&gt;Math-692_realDomain_patch1.patch&lt;/tt&gt; (20111108) applied in rev 1200179, with minor modifications (mostly checkstyle fixes).&lt;br/&gt;
Thanks Christian!&lt;/p&gt;</comment>
                            <comment id="13162487" author="cwinter" created="Sun, 4 Dec 2011 21:02:48 +0000"  >&lt;p&gt;As mentioned by S&#233;bastien in &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-699&quot; title=&quot;inverseCumulativeDistribution fails with cumulative distribution having a plateau&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-699&quot;&gt;&lt;del&gt;MATH-699&lt;/del&gt;&lt;/a&gt;, the implementation of &lt;tt&gt;IntegerDistribution.inverseCumulativeProbability(double p)&lt;/tt&gt; can benefit from the ideas which came up for &lt;tt&gt;RealDistribution.inverseCumulativeProbability(double p)&lt;/tt&gt; in that thread.&lt;/p&gt;

&lt;p&gt;Thus I will remove &lt;tt&gt;getDomainLowerBound(double p)&lt;/tt&gt; and &lt;tt&gt;getDomainUpperBound(double p)&lt;/tt&gt; from the integer distributions. I checked that all current implementations of the lower/upper bound methods provide the whole support of the distribution as starting bracket. This means that using &lt;tt&gt;getSupportLowerBound()&lt;/tt&gt; and &lt;tt&gt;getSupportUpperBound()&lt;/tt&gt; for the starting bracket won&apos;t degrade the performance of the current distribution implementations. However, a user might want the improve the performance of his distribution implementations by providing a more targeted starting bracket for probability &lt;tt&gt;p&lt;/tt&gt;. Thus I will swap the solving step to a protected function &lt;tt&gt;solveInverseCumulativeProbability(double p, int lower, int upper)&lt;/tt&gt;, so that it gets easy to override &lt;tt&gt;inverseCumulativeProbability&lt;/tt&gt; with an implementation which finds a better starting bracket.&lt;/p&gt;

&lt;p&gt;Furthermore, Phil&apos;s idea with Chebyshev&apos;s inequality can be applied to the generic implementation of &lt;tt&gt;inverseCumulativeProbability&lt;/tt&gt; in order to get a better starting bracket.&lt;/p&gt;</comment>
                            <comment id="13162639" author="celestin" created="Mon, 5 Dec 2011 06:51:59 +0000"  >&lt;p&gt;Hi Christian,&lt;br/&gt;
If you agree with that, I suggest that you also take care of &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-718&quot; title=&quot;inverseCumulativeProbability of BinomialDistribution returns wrong value for large trials.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-718&quot;&gt;&lt;del&gt;MATH-718&lt;/del&gt;&lt;/a&gt;, as the two issues seem to be very much connected.&lt;br/&gt;
S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13170588" author="cwinter" created="Thu, 15 Dec 2011 23:44:09 +0000"  >&lt;p&gt;Hi S&#233;bastien,&lt;/p&gt;

&lt;p&gt;my changes in the integer distributions don&apos;t solve &lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-718&quot; title=&quot;inverseCumulativeProbability of BinomialDistribution returns wrong value for large trials.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-718&quot;&gt;&lt;del&gt;MATH-718&lt;/del&gt;&lt;/a&gt;. Instead I found a probably related problem with the Pascal distribution.&lt;/p&gt;

&lt;p&gt;The integer distribution patch for this issue still isn&apos;t ready. I will provide it next week.&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="13172699" author="cwinter" created="Mon, 19 Dec 2011 22:47:34 +0000"  >&lt;p&gt;This is the patch which adjusts the integer distributions to the agreements above.&lt;/p&gt;

&lt;p&gt;The changes to the test cases for the random generators may be unexpected. But these changes initially were triggered by adjusting &lt;tt&gt;RandomDataTest.checkNextPoissonConsistency(double)&lt;/tt&gt; to the new contract for integer distributions. Then some random generator tests failed due to chance. While adjusting their seeds, I found some other tests with a high failure probability. Thus I also set some failure probabilities to 0.01 in order to find suitable seeds more quickly.&lt;/p&gt;

&lt;p&gt;My next task on this issue is to adjust the user guid.&lt;/p&gt;</comment>
                            <comment id="13173481" author="celestin" created="Tue, 20 Dec 2011 20:27:19 +0000"  >&lt;p&gt;Hi Christian,&lt;br/&gt;
thanks for this contribution. I am away for a few days, but am very happy to commit this patch as soon as I am back, if you are not in too much of a hurry.&lt;br/&gt;
Thanks again,&lt;br/&gt;
S&#233;bastien&lt;/p&gt;</comment>
                            <comment id="13177903" author="celestin" created="Sat, 31 Dec 2011 05:25:04 +0000"  >&lt;p&gt;Well, we&apos;ve recently run into some troubles with SVN, but it seems everything is working fine again. Patch &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MATH-692&quot; title=&quot;Cumulative probability and inverse cumulative probability inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MATH-692&quot;&gt;&lt;del&gt;MATH-692&lt;/del&gt;&lt;/a&gt;_integerDomain_patch1.patch&lt;/tt&gt; (with minor checkstyle changes) committed in revision &lt;tt&gt;1226041&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Please do not forget to run &lt;tt&gt;mvn clean; mvn site:site&lt;/tt&gt; and check the reports (in particular, &lt;tt&gt;checkstyle&lt;/tt&gt;) prior to submitting a patch!&lt;/p&gt;

&lt;p&gt;Thanks for this contribution.&lt;/p&gt;</comment>
                            <comment id="13177915" author="celestin" created="Sat, 31 Dec 2011 08:39:23 +0000"  >&lt;p&gt;The committed patch actually causes failure of &lt;tt&gt;Well1024Test&lt;/tt&gt; in &lt;tt&gt;o.a.c.m.random&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13178047" author="cwinter" created="Sat, 31 Dec 2011 17:01:41 +0000"  >&lt;p&gt;Thanks for committing the patch, S&#233;bastien. I see you already changed the seed in &lt;tt&gt;Well1024aTest&lt;/tt&gt;. This hopefully removes the failure.&lt;/p&gt;

&lt;p&gt;I&apos;ll have a look into Maven to prepare a better patch next time. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13178048" author="celestin" created="Sat, 31 Dec 2011 17:11:34 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I see you already changed the seed in Well1024aTest.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes I did, but is this really how we want &lt;tt&gt;Well2004aTest&lt;/tt&gt; to pass?&lt;/p&gt;</comment>
                            <comment id="13178481" author="cwinter" created="Mon, 2 Jan 2012 17:51:59 +0000"  >&lt;p&gt;I guess there is no alternative to this way of making probabilistic test cases pass. However, I understand your bad feeling with this kind of failure fixing. The problem is that probabilistic tests are quiet fuzzy: Neither a passed test nor a failed test provides a clear answer whether something is right or wrong in the implementation. There is just a high chance to pass such a test with a correct implementation. The chance for failure increases with an erroneous implementation due to systematic deviations in the generated data. These chances tell whether it is easy to find a seed which passes the tests or not. Thus difficulties in finding a suitable seed are an indicator for problems in the code.&lt;/p&gt;</comment>
                            <comment id="13178508" author="celestin" created="Mon, 2 Jan 2012 18:53:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Thus difficulties in finding a suitable seed are an indicator for problems in the code.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s exactly the point I&apos;ve raised on the mailing-list: out of three seeds (100, 1000 and 1001), only one works. Of course, I would not dare to call that representative statistics, but I&apos;m wondering whether or not we should be worried...&lt;/p&gt;</comment>
                            <comment id="13198562" author="celestin" created="Thu, 2 Feb 2012 06:45:59 +0000"  >&lt;p&gt;The issue about selection of an appropriate seed has been raised elsewhere. No definitive answer has been provided so far, so I suggest we consider this issue as solved for the time being.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507992" name="MATH-692_integerDomain_patch1.patch" size="56779" author="cwinter" created="Mon, 19 Dec 2011 22:47:34 +0000"/>
                            <attachment id="12502956" name="Math-692_realDomain_patch1.patch" size="26367" author="cwinter" created="Tue, 8 Nov 2011 20:28:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aovb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>