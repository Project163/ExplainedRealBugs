<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:22:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MATH-582] Percentile does not work as described in API</title>
                <link>https://issues.apache.org/jira/browse/MATH-582</link>
                <project id="12310485" key="MATH">Commons Math</project>
                    <description>&lt;p&gt;example call:&lt;/p&gt;

&lt;p&gt;StatUtils.percentile(new double[]&lt;/p&gt;
{0d, 1d}
&lt;p&gt;, 25)   returns 0.0&lt;/p&gt;

&lt;p&gt;The API says that there is a position being computed:  p*(n+1)/100 -&amp;gt; we have p=25 and n=2&lt;br/&gt;
I would expect position 0.75 as result. Next step according to the API is: interpolation between both values at floor(0.25) and at ceil(0.25). Those values are 0d and 1d ... so lower + d * (upper - lower) should give 0d + 0.25*(1d - 0d) = 0.25&lt;/p&gt;

&lt;p&gt;But the above call returns 0 as result. This does not make sense to me.&lt;/p&gt;


&lt;p&gt;another example where I think the result is not correct:&lt;/p&gt;

&lt;p&gt;StatUtils.percentile(new double[]&lt;/p&gt;
{0d, 1d, 1d, 1d}
&lt;p&gt;, 25)   returns 0.25&lt;/p&gt;

&lt;p&gt;we have pos = 25*5/100 = 1.25  ... so d = 0.25&lt;br/&gt;
values at position floor(1.25) and ceil(1.25) are 1d and 1d. How comes that the result is not between 1d?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12508170">MATH-582</key>
            <summary>Percentile does not work as described in API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="moormaster">Andre Herbst</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 May 2011 11:33:34 +0000</created>
                <updated>Sat, 24 Mar 2012 16:16:56 +0000</updated>
                            <resolved>Sat, 11 Jun 2011 22:30:17 +0000</resolved>
                                    <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13046272" author="joubert" created="Wed, 8 Jun 2011 23:07:43 +0000"  >&lt;p&gt;I believe the implementation of percentiles within the library is in accordance with the NIST definition of percentiles.  To address your examples separately:&lt;/p&gt;

&lt;p&gt;1.  What is missing from the API in the description of the implementation is &quot;If pos &amp;lt; 1 then return the smallest element in the array&quot;.  As such, the value of 0.0 returned in your first example is indeed correct for this implementation.&lt;/p&gt;

&lt;p&gt;2.  In this definition of percentiles, the value of pos is a position in the array to be interpolated, but with array indices starting with 1. So with pos = 1.25, the value returned is correctly a quarter between the 1st and 2nd array values.&lt;/p&gt;

&lt;p&gt;Percentiles do not meet intuition well when working with small datasets.  Other definitions, for example one with pos = 1+p*(n-1)/100 (like in MS Excel), may meet your requirement better in the above datasets, but not so well with medium ones.  With large datasets, the two definitions converge.&lt;/p&gt;

&lt;p&gt;Hope this helps,&lt;/p&gt;

&lt;p&gt;Chris N&lt;/p&gt;</comment>
                            <comment id="13047318" author="joubert" created="Fri, 10 Jun 2011 17:45:32 +0000"  >&lt;p&gt;Added a patch for org.apache.commons.math.stat.Percentile documentation in order to better describe the correct implementation of percentiles as recommended by NIST.&lt;/p&gt;</comment>
                            <comment id="13047997" author="psteitz" created="Sat, 11 Jun 2011 22:30:17 +0000"  >&lt;p&gt;Patch applied (with test) in trunk in r1134802.&lt;/p&gt;

&lt;p&gt;Thanks, Andre for the report and thanks, Christopher for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12482081" name="MATH-582.patch" size="1174" author="joubert" created="Fri, 10 Jun 2011 17:45:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rtmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>