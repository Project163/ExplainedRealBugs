[{"id":7868215355,"node_id":"MEE_lADOAF62v85XBM54zwAAAAHU-3A7","url":"https://api.github.com/repos/mockito/mockito/issues/events/7868215355","actor":{"login":"perlun","id":630613,"node_id":"MDQ6VXNlcjYzMDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/630613?v=4","gravatar_id":"","url":"https://api.github.com/users/perlun","html_url":"https://github.com/perlun","followers_url":"https://api.github.com/users/perlun/followers","following_url":"https://api.github.com/users/perlun/following{/other_user}","gists_url":"https://api.github.com/users/perlun/gists{/gist_id}","starred_url":"https://api.github.com/users/perlun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/perlun/subscriptions","organizations_url":"https://api.github.com/users/perlun/orgs","repos_url":"https://api.github.com/users/perlun/repos","events_url":"https://api.github.com/users/perlun/events{/privacy}","received_events_url":"https://api.github.com/users/perlun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-11-22T14:01:29Z","performed_via_github_app":null},{"id":7868215366,"node_id":"SE_lADOAF62v85XBM54zwAAAAHU-3BG","url":"https://api.github.com/repos/mockito/mockito/issues/events/7868215366","actor":{"login":"perlun","id":630613,"node_id":"MDQ6VXNlcjYzMDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/630613?v=4","gravatar_id":"","url":"https://api.github.com/users/perlun","html_url":"https://github.com/perlun","followers_url":"https://api.github.com/users/perlun/followers","following_url":"https://api.github.com/users/perlun/following{/other_user}","gists_url":"https://api.github.com/users/perlun/gists{/gist_id}","starred_url":"https://api.github.com/users/perlun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/perlun/subscriptions","organizations_url":"https://api.github.com/users/perlun/orgs","repos_url":"https://api.github.com/users/perlun/repos","events_url":"https://api.github.com/users/perlun/events{/privacy}","received_events_url":"https://api.github.com/users/perlun/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-11-22T14:01:29Z","performed_via_github_app":null},{"id":7868229855,"node_id":"MEE_lADOAF62v85XBM54zwAAAAHU-6jf","url":"https://api.github.com/repos/mockito/mockito/issues/events/7868229855","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-11-22T14:02:55Z","performed_via_github_app":null},{"id":7868229864,"node_id":"SE_lADOAF62v85XBM54zwAAAAHU-6jo","url":"https://api.github.com/repos/mockito/mockito/issues/events/7868229864","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-11-22T14:02:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1323782099","html_url":"https://github.com/mockito/mockito/issues/2796#issuecomment-1323782099","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2796","id":1323782099,"node_id":"IC_kwDOAF62v85O50_T","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T14:42:39Z","updated_at":"2022-11-23T09:30:56Z","body":"I've done some digging and the reason the above fails is that Mockito is using the last matcher to match all varags parameters.\r\n\r\nLet's simplify the example to make it easier to explain:\r\n\r\nFor example,\r\n\r\nGiven:\r\n\r\n```java\r\n   String varargMethod(int x, String... args);\r\n```\r\n\r\nWith setup:\r\n\r\n```java\r\nwhen(theMock.varargMethod(eq(1), any(String[].class)).thenReturn(\"whatever\");\r\n```\r\n\r\nWhen the mock encounters a call like:\r\n\r\n```java\r\ntheMock.varargMethod(1, \"a\", \"b\");\r\n```\r\n\r\nIt uses the first `eq(1)` matcher to match the first argument, which passes. It then see's there are more parameters to the call than matchers, so it uses the last matcher for any additional arguments, i.e. it tries to match `any(String[].class)` against `\"a\"` and against `\"b\"`. Of course, both of these fail and hence the method returns `null`, not `\"whatever\"`.\r\n\r\nIf the test code is changed to:\r\n\r\n\r\n```java\r\nwhen(theMock.varargMethod(eq(1), any(String.class)).thenReturn(\"whatever\");\r\n```\r\n\r\n...then it works.  Indeed, any of the following work:\r\n\r\n```java\r\n// Matches any call with one _or more_ String parameters\r\nwhen(theMock.varargMethod(eq(1), any(String.class)).thenReturn(\"whatever\");\r\nwhen(theMock.varargMethod(eq(1), any()).thenReturn(\"whatever\");\r\n\r\n// Matches any call with two _or more_ String parameters\r\nwhen(theMock.varargMethod(eq(1), any(String.class), any(String.class)).thenReturn(\"whatever\");\r\nwhen(theMock.varargMethod(eq(1), any(), any()).thenReturn(\"whatever\");\r\n```\r\n\r\n## Conclusion\r\n\r\nThis could be seen as a bug: the code code see that the last parameter is vararg, and effectively treat the `any(String[].class)` as `any(String.class)`.  However, we'd need to thing through the edge cases of this and how such a change would affect existing usages.\r\n\r\nor...\r\n\r\nThis could be seen as intentional behaviour. \r\n\r\n## Releated\r\n\r\nInterestingly, there used to be a [`anyVargs`](https://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Matchers.html#anyVararg%28%29) method, but it was removed.\r\n\r\nThere was also a PRs that got close to merging that might have solved this and other varargs related issues... (https://github.com/mockito/mockito/pull/1224, https://github.com/mockito/mockito/pull/1235, https://github.com/mockito/mockito/pull/1236, https://github.com/mockito/mockito/pull/1461)\r\n\r\nThere are also a whole host of other issues pertaining to issues with varargs, (https://github.com/mockito/mockito/issues/1222, https://github.com/mockito/mockito/issues/584, https://github.com/mockito/mockito/issues/1593)\r\n\r\nUnfortunately, I personally don't have time to sift through them all to distill the underlying issues and a suitable solution...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1323782099/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1324147421","html_url":"https://github.com/mockito/mockito/issues/2796#issuecomment-1324147421","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2796","id":1324147421,"node_id":"IC_kwDOAF62v85O7OLd","user":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T19:31:33Z","updated_at":"2022-11-22T19:31:33Z","body":"Given our shenanigans with var args, I feel link our current solution is the most pragmatic and least-surprising. As you noted, we have had loads of back-and-forths on the issue of varargs, with numerous competing implementations and surprising behavior with each one. Acknowledging that there are still edge cases that are annoying, I think what we have today is the best we got. So therefore I think I would qualify this as\r\n\r\n> This could be seen as intentional behaviour.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1324147421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1324912457","html_url":"https://github.com/mockito/mockito/issues/2796#issuecomment-1324912457","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2796","id":1324912457,"node_id":"IC_kwDOAF62v85O-I9J","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T11:30:39Z","updated_at":"2022-11-23T11:30:39Z","body":"I'd kind of agree, given I don't have time to fix what looks to be a complicated issue, and there are workarounds.\r\n\r\nBut then I got looking into this closely related https://github.com/mockito/mockito/issues/1593, and was thinking about a fix, and I may have a solution.\r\n\r\nI'll throw up a hack PR to see if we think the approach can work.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/1324912457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7876424427,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHVeLLr","url":"https://api.github.com/repos/mockito/mockito/issues/events/7876424427","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4b1d5335de7935ff837d86a6bf407fe2b5fbf657","commit_url":"https://api.github.com/repos/big-andy-coates/mockito/commits/4b1d5335de7935ff837d86a6bf407fe2b5fbf657","created_at":"2022-11-23T11:50:40Z","performed_via_github_app":null},{"actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T11:50:40Z","updated_at":"2022-11-23T11:50:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2797","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2797/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2797/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2797/events","html_url":"https://github.com/mockito/mockito/pull/2797","id":1461615141,"node_id":"PR_kwDOAF62v85DjgVB","number":2797,"title":"Hack about to fix #2796","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-11-23T11:50:40Z","updated_at":"2022-11-28T15:58:10Z","closed_at":"2022-11-28T15:58:09Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/2797","html_url":"https://github.com/mockito/mockito/pull/2797","diff_url":"https://github.com/mockito/mockito/pull/2797.diff","patch_url":"https://github.com/mockito/mockito/pull/2797.patch","merged_at":null},"body":"This PR contains changes NOT intended to be committed 'as-is', but as a showcase for a potential solution to:\r\n\r\n* https://github.com/mockito/mockito/issues/2796\r\n* https://github.com/mockito/mockito/issues/1593\r\n\r\nAnd potentially other vararg related issues.\r\n\r\nThe crux of the issue is that Mockito needs to handle the last matcher passed to a method, when that matcher aligns with a vararg parameter and has the same type as the vararg parameter.\r\n\r\nFor example,\r\n\r\n```java\r\npublic interface Foo {\r\n String m1(String... args);  // Vararg param at index 0 and type String[]\r\n}\r\n\r\n@Test\r\npublic void shouldWork2() throws Exception  {\r\n  // Last matcher at index 0, and with type String[]: needs special handling!\r\n  given(foo.m1(any(String[].class))).willReturn(\"var arg method\");\r\n  ...\r\n}\r\n```\r\n\r\nIn such situations that code needs to match the raw argument, _not_ the current functionality, which is to use the last matcher to match the last _non raw_ argument.\r\n\r\nUnfortunately, I'm not aware of a way to get at the type of the matcher without adding a method to `VarargMatcher` to get this information. This is the downside of this approach.\r\n\r\nThe PR includes the tests suggested in https://github.com/mockito/mockito/pull/1236, though one still fails (and is commented out with explanation).\r\n\r\nCrux of the change is in `MatcherApplicationStrategy`. Obviously, it needs some refactoring. Not sure if you'd want the refactor as a separate PR or as the first commit of the main PR????\r\n\r\nAlternatively, I could resurrect https://github.com/mockito/mockito/pull/1224 and take it through to merging.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2797/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7901741131,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHW-wBL","url":"https://api.github.com/repos/mockito/mockito/issues/events/7901741131","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2c6a3414a3ed9c84609f91eb8d85a7d9ddbf5b36","commit_url":"https://api.github.com/repos/big-andy-coates/mockito/commits/2c6a3414a3ed9c84609f91eb8d85a7d9ddbf5b36","created_at":"2022-11-28T11:00:59Z","performed_via_github_app":null},{"actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T11:01:31Z","updated_at":"2022-11-28T11:01:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2803","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2803/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2803/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2803/events","html_url":"https://github.com/mockito/mockito/pull/2803","id":1466218088,"node_id":"PR_kwDOAF62v85DyrQP","number":2803,"title":"Simplify `MatcherApplicationStrategy`","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-11-28T11:01:30Z","updated_at":"2022-11-28T14:04:56Z","closed_at":"2022-11-28T12:45:37Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/2803","html_url":"https://github.com/mockito/mockito/pull/2803","diff_url":"https://github.com/mockito/mockito/pull/2803.diff","patch_url":"https://github.com/mockito/mockito/pull/2803.patch","merged_at":"2022-11-28T12:45:37Z"},"body":"Prep work for https://github.com/mockito/mockito/issues/2796\r\n\r\nThe class is overly complex, with the precomputed `matchingType` adding no value.\r\n\r\n## Checklist\r\n\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/main/.github/CONTRIBUTING.md)\r\n - [x] PR should be motivated, i.e. what does it fix, why, and if relevant how\r\n - [x] If possible / relevant include an example in the description, that could help all readers\r\n       including project members to get a better picture of the change\r\n - [ ] Avoid other runtime dependencies\r\n - [x] Meaningful commit history ; intention is important please rebase your commit history so that each\r\n       commit is meaningful and help the people that will explore a change in 2 years\r\n - [x] The pull request follows coding style\r\n - [x] Mention `Fixes #<issue number>` in the description _if relevant_\r\n - [x] At least one commit should mention `Fixes #<issue number>` _if relevant_\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2803/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7902585410,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHXB-JC","url":"https://api.github.com/repos/mockito/mockito/issues/events/7902585410","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8f4af189a9f98190c1ead3aff630e05cda721a89","commit_url":"https://api.github.com/repos/mockito/mockito/commits/8f4af189a9f98190c1ead3aff630e05cda721a89","created_at":"2022-11-28T12:45:43Z","performed_via_github_app":null},{"id":7905364074,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHXMkhq","url":"https://api.github.com/repos/mockito/mockito/issues/events/7905364074","actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"48a3014e4c3a364eec3efda0db0fedaf4e01c16e","commit_url":"https://api.github.com/repos/big-andy-coates/mockito/commits/48a3014e4c3a364eec3efda0db0fedaf4e01c16e","created_at":"2022-11-28T17:51:30Z","performed_via_github_app":null},{"actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T17:51:30Z","updated_at":"2022-11-28T17:51:30Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2805","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2805/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2805/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2805/events","html_url":"https://github.com/mockito/mockito/pull/2805","id":1466840235,"node_id":"PR_kwDOAF62v85D0wQp","number":2805,"title":"Improve vararg handling","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-11-28T17:51:30Z","updated_at":"2022-11-30T22:23:34Z","closed_at":"2022-11-30T22:23:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/2805","html_url":"https://github.com/mockito/mockito/pull/2805","diff_url":"https://github.com/mockito/mockito/pull/2805.diff","patch_url":"https://github.com/mockito/mockito/pull/2805.patch","merged_at":null},"body":"Fixes: https://github.com/mockito/mockito/issues/2796\r\n\r\nAn alternative approach is available in https://github.com/mockito/mockito/pull/2807.\r\n\r\nAdd an optional method to `VarargMatcher`, which implementations can choose to override to return the type of object the matcher is matching.\r\n\r\nThis is used by `MatcherApplicationStrategy` to determine if the type of matcher used to match a vararg parameter is of a type compatible with the vararg parameter.\r\n\r\nWhere a vararg compatible matcher is found, the matcher is used to match the _raw_ parameters.\r\n\r\n## Known limitations\r\n\r\nThe main limitation I'm aware of, is not a new limitation. It is that it is not possible to assert only a single parameter is passed to the vararg parameter, when using a `VarargMatcher`. (ref: https://github.com/mockito/mockito/issues/1593). For example:\r\n\r\n```java\r\n// Given method:\r\nint vararg(String... args);\r\n\r\n// I want to mock this invocation:\r\nmock.vararag(\"one param\");\r\n\r\n// ...but not these:\r\nmock.vararg();\r\nmock.vararg(\"more than\", \"one param\");\r\n```\r\n\r\nThere is no current way to do this.  This is because in the following intuitive mocking:\r\n\r\n```java\r\ngiven(mock.vararg(any(String.class))).willReturn(1);\r\n```\r\n\r\n... matches zero or more vararg parameters, as the `any()` method is using `VarargMatcher`.\r\n\r\nIt seems to me that `VarargMatcher` is... a little broken.  This PR leverages `VarargMatcher`... which, if its broken, might not be something we want to do.\r\n\r\n## Checklist\r\n\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/main/.github/CONTRIBUTING.md)\r\n - [x] PR should be motivated, i.e. what does it fix, why, and if relevant how\r\n - [x] If possible / relevant include an example in the description, that could help all readers\r\n       including project members to get a better picture of the change\r\n - [x] Avoid other runtime dependencies\r\n - [x] Meaningful commit history ; intention is important please rebase your commit history so that each\r\n       commit is meaningful and help the people that will explore a change in 2 years\r\n - [x] The pull request follows coding style\r\n - [x] Mention `Fixes #<issue number>` in the description _if relevant_\r\n - [x] At least one commit should mention `Fixes #<issue number>` _if relevant_\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2805/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T19:57:56Z","updated_at":"2022-11-28T19:57:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2807","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2807/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2807/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2807/events","html_url":"https://github.com/mockito/mockito/pull/2807","id":1467009264,"node_id":"PR_kwDOAF62v85D1SmD","number":2807,"title":"Improve vararg handling","user":{"login":"big-andy-coates","id":8012398,"node_id":"MDQ6VXNlcjgwMTIzOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8012398?v=4","gravatar_id":"","url":"https://api.github.com/users/big-andy-coates","html_url":"https://github.com/big-andy-coates","followers_url":"https://api.github.com/users/big-andy-coates/followers","following_url":"https://api.github.com/users/big-andy-coates/following{/other_user}","gists_url":"https://api.github.com/users/big-andy-coates/gists{/gist_id}","starred_url":"https://api.github.com/users/big-andy-coates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-andy-coates/subscriptions","organizations_url":"https://api.github.com/users/big-andy-coates/orgs","repos_url":"https://api.github.com/users/big-andy-coates/repos","events_url":"https://api.github.com/users/big-andy-coates/events{/privacy}","received_events_url":"https://api.github.com/users/big-andy-coates/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2022-11-28T19:57:56Z","updated_at":"2024-09-19T00:36:51Z","closed_at":"2022-12-22T16:04:55Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/2807","html_url":"https://github.com/mockito/mockito/pull/2807","diff_url":"https://github.com/mockito/mockito/pull/2807.diff","patch_url":"https://github.com/mockito/mockito/pull/2807.patch","merged_at":"2022-12-22T16:04:55Z"},"body":"Fixes: https://github.com/mockito/mockito/issues/2796\r\nFixes: https://github.com/mockito/mockito/issues/567\r\nFixes: https://github.com/mockito/mockito/issues/584\r\nFixes: https://github.com/mockito/mockito/issues/1222\r\nFixes: https://github.com/mockito/mockito/issues/1498\r\n\r\nAn alternative approach to https://github.com/mockito/mockito/pull/2805. \r\n\r\n## Key difference:\r\n\r\nThis approach adds the new `type()` method to the main `ArgumentMatcher` interface and leaves the, IMHO broken, `VarargsMatcher` interface alone.  \r\n\r\n## Benefit:\r\n\r\nBecause this approach leaves `VarargsMatcher` untouched, it does not require additional existing matchers to implement `VarargsMatcher` to fix issues such as https://github.com/mockito/mockito/issues/567. Where as the first PR would require `Null` and `NotNull` to be marked `VarargsMatcher`.\r\n\r\nThis PR creates new variants of `isNotNull` and `isNull` to address https://github.com/mockito/mockito/issues/567. \r\nHaving `InstanceOf` override `type()` provides a workable solution to https://github.com/mockito/mockito/issues/1593.\r\nHaving `equals` override `type` addresses https://github.com/mockito/mockito/issues/1222.\r\n\r\nIf we want to go with this approach I'll implement `type()` for all the other existing matchers.\r\n\r\n## Downside\r\n\r\nThe obvious downside is that this changes the public `ArgumentMatcher` interface, though in a backwards compatible way.\r\n\r\nThe default implementation _could_ be dropped in the next major version bump.\r\n\r\n## Known limitation\r\n\r\nThe main limitation I'm aware of, is not a new limitation. It is that it is not possible to assert only a single parameter is passed to the vararg parameter, when using a `VarargMatcher`, e.g. `any()`. (ref: https://github.com/mockito/mockito/issues/1593). For example:\r\n\r\n```java\r\n// Given method:\r\nint vararg(String... args);\r\n\r\n// I want to mock this invocation:\r\nmock.vararag(\"one param\");\r\n\r\n// ...but not these:\r\nmock.vararg();\r\nmock.vararg(\"more than\", \"one param\");\r\n```\r\n\r\nThere is no current way to do this.  This is because in the following intuitive mocking:\r\n\r\n```java\r\ngiven(mock.vararg(any(String.class))).willReturn(1);\r\n```\r\n\r\n... matches zero or more vararg parameters, as the `any()` method is using `VarargMatcher`. It seems to me that `VarargMatcher` is... a little broken!  This is maybe something that should be consider a candiate for fixing in the next major version bump.  \r\n\r\nWhile it is not possible to fix any `VarargMatcher` based matchers in a backwards compatible way, this the approach in this PR it is possible to mock/verify exactly one vararg param using `isA`, rather than `any`:\r\n\r\n```java\r\n    @Test\r\n    public void shouldMatchExactlyOnParam() {\r\n        mock.varargs(\"one param\");\r\n\r\n        verify(mock).varargs(isA(String.class));\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotMatchMoreParams() {\r\n        mock.varargs(\"two\", \"params\");\r\n\r\n        verify(mock, never()).varargs(isA(String.class));\r\n    }\r\n\r\n    @Test\r\n    public void shouldMatchAnyNumberOfParams() {\r\n        mock.varargs(\"two\", \"params\");\r\n\r\n        verify(mock).varargs(isA(String[].class));\r\n    }\r\n\r\n```\r\n\r\n... because `isA` does not implement `VarargsMatcher`, and so can work as expected once it implements `type()`.\r\n\r\n## Checklist\r\n\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/main/.github/CONTRIBUTING.md)\r\n - [x] PR should be motivated, i.e. what does it fix, why, and if relevant how\r\n - [x] If possible / relevant include an example in the description, that could help all readers\r\n       including project members to get a better picture of the change\r\n - [x] Avoid other runtime dependencies\r\n - [x] Meaningful commit history ; intention is important please rebase your commit history so that each\r\n       commit is meaningful and help the people that will explore a change in 2 years\r\n - [x] The pull request follows coding style\r\n - [x] Mention `Fixes #<issue number>` in the description _if relevant_\r\n - [x] At least one commit should mention `Fixes #<issue number>` _if relevant_\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2807/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2807/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8097117871,"node_id":"CE_lADOAF62v85XBM54zwAAAAHioDav","url":"https://api.github.com/repos/mockito/mockito/issues/events/8097117871","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-12-22T16:04:57Z","state_reason":null,"performed_via_github_app":null},{"id":8097118442,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHioDjq","url":"https://api.github.com/repos/mockito/mockito/issues/events/8097118442","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fe1cb2de0923e78bf7d7ae46cbab792dd4e94136","commit_url":"https://api.github.com/repos/mockito/mockito/commits/fe1cb2de0923e78bf7d7ae46cbab792dd4e94136","created_at":"2022-12-22T16:05:01Z","performed_via_github_app":null},{"id":8120943433,"node_id":"REFE_lADOAF62v85XBM54zwAAAAHkC8NJ","url":"https://api.github.com/repos/mockito/mockito/issues/events/8120943433","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"483e15f9f940716a85f2d58f6c28981136790c4e","commit_url":"https://api.github.com/repos/mockito/mockito/commits/483e15f9f940716a85f2d58f6c28981136790c4e","created_at":"2022-12-28T12:49:35Z","performed_via_github_app":null},{"actor":{"login":"DaveTryon","id":45672944,"node_id":"MDQ6VXNlcjQ1NjcyOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/45672944?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveTryon","html_url":"https://github.com/DaveTryon","followers_url":"https://api.github.com/users/DaveTryon/followers","following_url":"https://api.github.com/users/DaveTryon/following{/other_user}","gists_url":"https://api.github.com/users/DaveTryon/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveTryon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveTryon/subscriptions","organizations_url":"https://api.github.com/users/DaveTryon/orgs","repos_url":"https://api.github.com/users/DaveTryon/repos","events_url":"https://api.github.com/users/DaveTryon/events{/privacy}","received_events_url":"https://api.github.com/users/DaveTryon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T23:41:04Z","updated_at":"2023-01-11T23:41:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2860","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2860/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2860/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2860/events","html_url":"https://github.com/mockito/mockito/issues/2860","id":1529874176,"node_id":"I_kwDOAF62v85bMAcA","number":2860,"title":"Regression starting in mockito-inline 4.7.0?","user":{"login":"DaveTryon","id":45672944,"node_id":"MDQ6VXNlcjQ1NjcyOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/45672944?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveTryon","html_url":"https://github.com/DaveTryon","followers_url":"https://api.github.com/users/DaveTryon/followers","following_url":"https://api.github.com/users/DaveTryon/following{/other_user}","gists_url":"https://api.github.com/users/DaveTryon/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveTryon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveTryon/subscriptions","organizations_url":"https://api.github.com/users/DaveTryon/orgs","repos_url":"https://api.github.com/users/DaveTryon/repos","events_url":"https://api.github.com/users/DaveTryon/events{/privacy}","received_events_url":"https://api.github.com/users/DaveTryon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-01-11T23:41:04Z","updated_at":"2023-01-13T18:41:15Z","closed_at":"2023-01-13T18:41:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We use mockito-inline in [this test class](https://github.com/microsoft/accessibility-insights-for-android-service/blob/main/AccessibilityInsightsForAndroidService/app/src/test/java/com/microsoft/accessibilityinsightsforandroidservice/ATFAResultsSerializerTest.java). It works just great with mockito-inline version 4.6.1, but is broken with mockito-inline versions 4.7.0 and above. Specifically, when we try to mock out a method that accepts a gson `ExclusionStrategies`, the following Exception is thrown:\r\n\r\n```\r\nclass [Lcom.google.gson.ExclusionStrategy; cannot be cast to class com.google.gson.ExclusionStrategy ([Lcom.google.gson.ExclusionStrategy; and com.google.gson.ExclusionStrategy are in unnamed module of loader 'app')\r\njava.lang.ClassCastException: class [Lcom.google.gson.ExclusionStrategy; cannot be cast to class com.google.gson.ExclusionStrategy ([Lcom.google.gson.ExclusionStrategy; and com.google.gson.ExclusionStrategy are in unnamed module of loader 'app')\r\n\tat org.mockito.internal.stubbing.answers.AnswerFunctionalInterfaces$1.answer(AnswerFunctionalInterfaces.java:47)\r\n\tat org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:42)\r\n\tat org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:103)\r\n\tat org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)\r\n\tat org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)\r\n\tat org.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)\r\n\tat org.mockito.internal.creation.bytebuddy.MockMethodAdvice.handle(MockMethodAdvice.java:134)\r\n\tat com.google.gson.GsonBuilder.setExclusionStrategies(GsonBuilder.java:431)\r\n\tat com.microsoft.accessibilityinsightsforandroidservice.ATFAResultsSerializer.<init>(ATFAResultsSerializer.java:49)\r\n\tat com.microsoft.accessibilityinsightsforandroidservice.ATFAResultsSerializerTest.prepare(ATFAResultsSerializerTest.java:83)\r\n```\r\n\r\nLooking at the commits that went into version 4.7.0, it seems like #2664 and #2685 are the only commits that would have changed anything related to the stack trace shown above. My guess would be #2664, since the issue it was intended to fix (#2644) reported a stack trace that is almost identical to what we're seeing (even though we aren't using varargs).\r\n\r\nHere's a stripped down class for testing purposes--it works on mockito-inline version 4.6.1, and fails on any version 4.7.0 or above:\r\n\r\n```\r\nimport static org.mockito.ArgumentMatchers.any;\r\nimport static org.mockito.Mockito.doAnswer;\r\nimport static org.mockito.Mockito.when;\r\n\r\nimport com.google.gson.ExclusionStrategy;\r\nimport com.google.gson.FieldAttributes;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.GsonBuilder;\r\n\r\nimport org.junit.Assert;\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.AdditionalAnswers;\r\nimport org.mockito.Mock;\r\nimport org.mockito.junit.MockitoJUnitRunner;\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class DemoTest {\r\n    @Mock GsonBuilder gsonBuilder;\r\n\r\n    @Before\r\n    public void prepare() {\r\n        doAnswer(\r\n                AdditionalAnswers.answer(\r\n                        (ExclusionStrategy strategy) -> {\r\n                            return gsonBuilder;\r\n                        }))\r\n                .when(gsonBuilder)\r\n                .setExclusionStrategies(any());\r\n    }\r\n\r\n    @Test\r\n    public void thisWorksBeforeMockitoFourPointSeven() {\r\n        ExclusionStrategy e = new ExclusionStrategy() {\r\n            @Override\r\n            public boolean shouldSkipField(FieldAttributes f) {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean shouldSkipClass(Class<?> c) {\r\n                return false;\r\n            }\r\n        };\r\n\r\n        GsonBuilder g = gsonBuilder.setExclusionStrategies(e); // Throws if version > 4.6.1\r\n        Assert.assertNotNull(g);\r\n    }\r\n}\r\n```\r\n\r\ncheck that\r\n\r\n - [x] The mockito message in the stacktrace have useful information, but it didn't help\r\n - [x] The problematic code (if that's possible) is copied here;\r\n       Note that some configuration are impossible to mock via Mockito\r\n - [x] Provide versions (mockito / jdk / os / any other relevant information)\r\n - [x] Provide a [Short, Self Contained, Correct (Compilable), Example](http://sscce.org) of the issue\r\n       (same as any question on stackoverflow.com)\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/main/.github/CONTRIBUTING.md)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2860/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]