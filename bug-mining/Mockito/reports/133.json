{"url":"https://api.github.com/repos/mockito/mockito/issues/1067","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/1067/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/1067/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/1067/events","html_url":"https://github.com/mockito/mockito/issues/1067","id":226137068,"node_id":"MDU6SXNzdWUyMjYxMzcwNjg=","number":1067,"title":"Deadlock after upgrading to Mockito 2 and parallel tests execution","user":{"login":"mmlac","id":1031928,"node_id":"MDQ6VXNlcjEwMzE5Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/1031928?v=4","gravatar_id":"","url":"https://api.github.com/users/mmlac","html_url":"https://github.com/mmlac","followers_url":"https://api.github.com/users/mmlac/followers","following_url":"https://api.github.com/users/mmlac/following{/other_user}","gists_url":"https://api.github.com/users/mmlac/gists{/gist_id}","starred_url":"https://api.github.com/users/mmlac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmlac/subscriptions","organizations_url":"https://api.github.com/users/mmlac/orgs","repos_url":"https://api.github.com/users/mmlac/repos","events_url":"https://api.github.com/users/mmlac/events{/privacy}","received_events_url":"https://api.github.com/users/mmlac/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":8,"created_at":"2017-05-03T22:52:41Z","updated_at":"2018-03-15T15:38:03Z","closed_at":"2018-03-15T15:38:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I updated Mockito and ScalaTest today from ScalaTest 2.x and Mockito 1.x and my tests suddenly froze in SBT (not in IntelliJ). After some playing around, I noticed every test class by itself passes and when I disabled running tests in parallel in SBT, the tests would work again.\r\n\r\nI used jstack and came across this deadlock:\r\n```\r\nFound one Java-level deadlock:\r\n=============================\r\n\"pool-9-thread-10-ScalaTest-running-ApiKeyVerificationFilterSpec\":\r\n  waiting to lock monitor 0x00007fea6f039538 (object 0x00000007959e4a78, a sbt.classpath.ClasspathUtilities$$anon$1),\r\n  which is held by \"pool-9-thread-2-ScalaTest-running-BRequestFilterSpec\"\r\n\"pool-9-thread-2-ScalaTest-running-BRequestFilterSpec\":\r\n  waiting to lock monitor 0x00007fea70e95548 (object 0x0000000795a868e8, a sbt.classpath.ClasspathFilter),\r\n  which is held by \"pool-9-thread-10-ScalaTest-running-ApiKeyVerificationFilterSpec\"\r\n\r\nJava stack information for the threads listed above:\r\n===================================================\r\n\"pool-9-thread-10-ScalaTest-running-ApiKeyVerificationFilterSpec\":\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:404)\r\n\t- waiting to lock <0x00000007959e4a78> (a sbt.classpath.ClasspathUtilities$$anon$1)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:411)\r\n\t- locked <0x0000000795a868e8> (a sbt.classpath.ClasspathFilter)\r\n\tat sbt.classpath.ClasspathFilter.loadClass(ClassLoaders.scala:59)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\tat net.bytebuddy.dynamic.loading.MultipleParentClassLoader.loadClass(MultipleParentClassLoader.java:68)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\tat sun.reflect.GeneratedSerializationConstructorAccessor35.newInstance(Unknown Source)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:422)\r\n\tat org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:48)\r\n\tat org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:73)\r\n\tat org.mockito.internal.creation.instance.ObjenesisInstantiator.newInstance(ObjenesisInstantiator.java:18)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:47)\r\n\tat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\r\n\tat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\r\n\tat org.mockito.internal.MockitoCore.mock(MockitoCore.java:63)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1729)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1642)\r\n\tat org.scalatest.mockito.MockitoSugar$class.mock(MockitoSugar.scala:73)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec.mock(ApiKeyVerificationFilterSpec.scala:25)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec$ApiKeyFetchSetup$class.$init$(ApiKeyVerificationFilterSpec.scala:77)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec$$anonfun$15$$anon$11.<init>(ApiKeyVerificationFilterSpec.scala:80)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec$$anonfun$15.apply(ApiKeyVerificationFilterSpec.scala:80)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec$$anonfun$15.apply(ApiKeyVerificationFilterSpec.scala:80)\r\n\tat org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)\r\n\tat org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:22)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:20)\r\n\tat org.scalatest.FunSpecLike$$anon$1.apply(FunSpecLike.scala:454)\r\n\tat org.scalatest.TestSuite$class.withFixture(TestSuite.scala:196)\r\n\tat org.scalatest.FunSpec.withFixture(FunSpec.scala:1630)\r\n\tat org.scalatest.FunSpecLike$class.invokeWithFixture$1(FunSpecLike.scala:451)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:464)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:464)\r\n\tat org.scalatest.SuperEngine.runTestImpl(Engine.scala:289)\r\n\tat org.scalatest.FunSpecLike$class.runTest(FunSpecLike.scala:464)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec.org$scalatest$BeforeAndAfter$$super$runTest(ApiKeyVerificationFilterSpec.scala:25)\r\n\tat org.scalatest.BeforeAndAfter$class.runTest(BeforeAndAfter.scala:203)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec.runTest(ApiKeyVerificationFilterSpec.scala:25)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:497)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:497)\r\n\tat org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:396)\r\n\tat org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:384)\r\n\tat scala.collection.immutable.List.foreach(List.scala:381)\r\n\tat org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:384)\r\n\tat org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:379)\r\n\tat org.scalatest.SuperEngine.runTestsImpl(Engine.scala:461)\r\n\tat org.scalatest.FunSpecLike$class.runTests(FunSpecLike.scala:497)\r\n\tat org.scalatest.FunSpec.runTests(FunSpec.scala:1630)\r\n\tat org.scalatest.Suite$class.run(Suite.scala:1147)\r\n\tat org.scalatest.FunSpec.org$scalatest$FunSpecLike$$super$run(FunSpec.scala:1630)\r\n\tat org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:501)\r\n\tat org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:501)\r\n\tat org.scalatest.SuperEngine.runImpl(Engine.scala:521)\r\n\tat org.scalatest.FunSpecLike$class.run(FunSpecLike.scala:501)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec.org$scalatest$BeforeAndAfter$$super$run(ApiKeyVerificationFilterSpec.scala:25)\r\n\tat org.scalatest.BeforeAndAfter$class.run(BeforeAndAfter.scala:258)\r\n\tat com.b.n.filter.ApiKeyVerificationFilterSpec.run(ApiKeyVerificationFilterSpec.scala:25)\r\n\tat org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:314)\r\n\tat org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:480)\r\n\tat sbt.TestRunner.runTest$1(TestFramework.scala:76)\r\n\tat sbt.TestRunner.run(TestFramework.scala:85)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1$$anonfun$apply$8.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1$$anonfun$apply$8.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:185)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1.apply(TestFramework.scala:202)\r\n\tat sbt.TestFunction.apply(TestFramework.scala:207)\r\n\tat sbt.Tests$$anonfun$9.apply(Tests.scala:216)\r\n\tat sbt.Tests$$anonfun$9.apply(Tests.scala:216)\r\n\tat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\n\tat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\n\tat sbt.std.Transform$$anon$4.work(System.scala:63)\r\n\tat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\n\tat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\n\tat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:17)\r\n\tat sbt.Execute.work(Execute.scala:237)\r\n\tat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\n\tat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\n\tat sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)\r\n\tat sbt.CompletionService$$anon$2.call(CompletionService.scala:28)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\"pool-9-thread-2-ScalaTest-running-BRequestFilterSpec\":\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:404)\r\n\t- waiting to lock <0x0000000795a868e8> (a sbt.classpath.ClasspathFilter)\r\n\tat sbt.classpath.ClasspathFilter.loadClass(ClassLoaders.scala:59)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\tat net.bytebuddy.dynamic.loading.MultipleParentClassLoader.loadClass(MultipleParentClassLoader.java:68)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:760)\r\n\tat sun.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$Direct.defineClass(ClassInjector.java:408)\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.inject(ClassInjector.java:185)\r\n\t- locked <0x0000000781ee0ff0> (a net.bytebuddy.dynamic.loading.MultipleParentClassLoader)\r\n\tat net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:187)\r\n\tat net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:79)\r\n\tat net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:4376)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:94)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:37)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:34)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:138)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:346)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:161)\r\n\t- locked <0x00000007959e4a78> (a sbt.classpath.ClasspathUtilities$$anon$1)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:355)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:32)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:71)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:42)\r\n\tat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\r\n\tat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\r\n\tat org.mockito.internal.MockitoCore.mock(MockitoCore.java:63)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1729)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1642)\r\n\tat org.scalatest.mockito.MockitoSugar$class.mock(MockitoSugar.scala:73)\r\n\tat com.b.n.filter.BRequestFilterSpec.mock(BRequestFilterSpec.scala:18)\r\n\tat com.b.n.filter.BRequestFilterSpec$Base$class.$init$(BRequestFilterSpec.scala:31)\r\n\tat com.b.n.filter.BRequestFilterSpec$$anonfun$7$$anon$10.<init>(BRequestFilterSpec.scala:43)\r\n\tat com.b.n.filter.BRequestFilterSpec$$anonfun$7.apply(BRequestFilterSpec.scala:43)\r\n\tat com.b.n.filter.BRequestFilterSpec$$anonfun$7.apply(BRequestFilterSpec.scala:43)\r\n\tat org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)\r\n\tat org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:22)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:20)\r\n\tat org.scalatest.FunSpecLike$$anon$1.apply(FunSpecLike.scala:454)\r\n\tat org.scalatest.TestSuite$class.withFixture(TestSuite.scala:196)\r\n\tat org.scalatest.FunSpec.withFixture(FunSpec.scala:1630)\r\n\tat org.scalatest.FunSpecLike$class.invokeWithFixture$1(FunSpecLike.scala:451)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:464)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:464)\r\n\tat org.scalatest.SuperEngine.runTestImpl(Engine.scala:289)\r\n\tat org.scalatest.FunSpecLike$class.runTest(FunSpecLike.scala:464)\r\n\tat com.b.n.filter.BRequestFilterSpec.org$scalatest$BeforeAndAfter$$super$runTest(BRequestFilterSpec.scala:18)\r\n\tat org.scalatest.BeforeAndAfter$class.runTest(BeforeAndAfter.scala:203)\r\n\tat com.b.n.filter.BRequestFilterSpec.runTest(BRequestFilterSpec.scala:18)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:497)\r\n\tat org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:497)\r\n\tat org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:396)\r\n\tat org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:384)\r\n\tat scala.collection.immutable.List.foreach(List.scala:381)\r\n\tat org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:384)\r\n\tat org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:379)\r\n\tat org.scalatest.SuperEngine.runTestsImpl(Engine.scala:461)\r\n\tat org.scalatest.FunSpecLike$class.runTests(FunSpecLike.scala:497)\r\n\tat org.scalatest.FunSpec.runTests(FunSpec.scala:1630)\r\n\tat org.scalatest.Suite$class.run(Suite.scala:1147)\r\n\tat org.scalatest.FunSpec.org$scalatest$FunSpecLike$$super$run(FunSpec.scala:1630)\r\n\tat org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:501)\r\n\tat org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:501)\r\n\tat org.scalatest.SuperEngine.runImpl(Engine.scala:521)\r\n\tat org.scalatest.FunSpecLike$class.run(FunSpecLike.scala:501)\r\n\tat com.b.n.filter.BRequestFilterSpec.org$scalatest$BeforeAndAfter$$super$run(BRequestFilterSpec.scala:18)\r\n\tat org.scalatest.BeforeAndAfter$class.run(BeforeAndAfter.scala:258)\r\n\tat com.b.n.filter.BRequestFilterSpec.run(BRequestFilterSpec.scala:18)\r\n\tat org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:314)\r\n\tat org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:480)\r\n\tat sbt.TestRunner.runTest$1(TestFramework.scala:76)\r\n\tat sbt.TestRunner.run(TestFramework.scala:85)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1$$anonfun$apply$8.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1$$anonfun$apply$8.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:185)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1.apply(TestFramework.scala:202)\r\n\tat sbt.TestFramework$$anon$2$$anonfun$$init$$1.apply(TestFramework.scala:202)\r\n\tat sbt.TestFunction.apply(TestFramework.scala:207)\r\n\tat sbt.Tests$$anonfun$9.apply(Tests.scala:216)\r\n\tat sbt.Tests$$anonfun$9.apply(Tests.scala:216)\r\n\tat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\n\tat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\n\tat sbt.std.Transform$$anon$4.work(System.scala:63)\r\n\tat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\n\tat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\n\tat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:17)\r\n\tat sbt.Execute.work(Execute.scala:237)\r\n\tat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\n\tat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\n\tat sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)\r\n\tat sbt.CompletionService$$anon$2.call(CompletionService.scala:28)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\nFound 1 deadlock.\r\n\r\n```\r\n\r\n\r\n\r\nApiKeyVerificationFilter, line 77 is `val apikey = mock[ImmutableMap[String, ChildData]]` and BRequestFilterSpec line 31 is val pmap = mock[ParamMap].\r\n\r\n\r\nsbt prompt looks like this:\r\n```\r\n$ sbt8             \r\nJava HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0\r\nJava HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=512M; support was removed in 8.0\r\n[info] Loading global plugins from /Users/m/.sbt/0.13/plugins\r\n[info] Loading project definition from  ...\r\n[info] Set current project to newton-api (in build file:...)\r\n> test\r\n[info] NServiceModuleSpec:\r\n[info] NServiceModule\r\n[info] - should have a test !!! IGNORED !!!\r\n\r\n-- hangs here --\r\n```\r\n\r\nMac OS 10.11.6\r\njava version \"1.8.0_45\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_45-b14)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)\r\nsbt 0.13.9\r\n\"org.scalatest\"           %%   \"scalatest\"        %   \"3.0.1\"   %   \"test\",\r\n\"org.mockito\"              %   \"mockito-core\"   %   \"2.7.22\"  %   \"test\"\r\n\r\n\r\n`parallelExecution in Test := true` in build.sbt  -  setting this to false circumvents the issue.","closed_by":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/1067/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/1067/timeline","performed_via_github_app":null,"state_reason":"completed"}