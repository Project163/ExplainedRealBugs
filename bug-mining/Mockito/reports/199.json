{"url":"https://api.github.com/repos/mockito/mockito/issues/1846","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/1846/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/1846/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/1846/events","html_url":"https://github.com/mockito/mockito/issues/1846","id":538713612,"node_id":"MDU6SXNzdWU1Mzg3MTM2MTI=","number":1846,"title":"Broken unused stubbing reporting when matching previous stubbed call","user":{"login":"andreisilviudragnea","id":8200650,"node_id":"MDQ6VXNlcjgyMDA2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/8200650?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisilviudragnea","html_url":"https://github.com/andreisilviudragnea","followers_url":"https://api.github.com/users/andreisilviudragnea/followers","following_url":"https://api.github.com/users/andreisilviudragnea/following{/other_user}","gists_url":"https://api.github.com/users/andreisilviudragnea/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisilviudragnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisilviudragnea/subscriptions","organizations_url":"https://api.github.com/users/andreisilviudragnea/orgs","repos_url":"https://api.github.com/users/andreisilviudragnea/repos","events_url":"https://api.github.com/users/andreisilviudragnea/events{/privacy}","received_events_url":"https://api.github.com/users/andreisilviudragnea/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-12-16T22:36:01Z","updated_at":"2020-02-26T21:28:09Z","closed_at":"2019-12-31T03:09:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When stubbing the same method call twice, and the second stub setup matches to first stubbed call, the first stub is not reported as unused, because Mockito detects the next stub setup as a usage of the previous stub setup. This is an example test:\r\n```\r\npublic class UnnecessaryStubbingWithImplicitEqMatchers {\r\n    @Mock IMethods mock;\r\n    MockitoSession mockito = Mockito.mockitoSession().initMocks(this).strictness(Strictness.STRICT_STUBS).startMocking();\r\n\r\n    @After public void after() {\r\n        mockito.finishMocking();\r\n    }\r\n\r\n    @Test public void unnecessary_stubbing() {\r\n        given(mock.simpleMethod(\"1\")).willReturn(\"one\");\r\n        given(mock.simpleMethod(\"2\")).willReturn(\"three\");\r\n        given(mock.simpleMethod(\"1\")).willReturn(\"two\");\r\n        given(mock.simpleMethod(\"1\")).willReturn(\"four\");\r\n\r\n        mock.simpleMethod(\"1\");\r\n        mock.simpleMethod(\"2\");\r\n    }\r\n}\r\n```\r\n\r\nThe test above should fail with `UnnecessaryStubbingException` containing two unused stubs, but it does not.\r\n\r\nMockito version: v3.2.4","closed_by":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/1846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/1846/timeline","performed_via_github_app":null,"state_reason":"completed"}