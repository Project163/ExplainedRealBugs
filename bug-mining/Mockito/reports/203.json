{"url":"https://api.github.com/repos/mockito/mockito/issues/1855","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/1855/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/1855/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/1855/events","html_url":"https://github.com/mockito/mockito/issues/1855","id":546094254,"node_id":"MDU6SXNzdWU1NDYwOTQyNTQ=","number":1855,"title":"javax.tools.ToolProvider could not be found in InlineByteBuddyMockMaker","user":{"login":"nuxzero","id":2638321,"node_id":"MDQ6VXNlcjI2MzgzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/2638321?v=4","gravatar_id":"","url":"https://api.github.com/users/nuxzero","html_url":"https://github.com/nuxzero","followers_url":"https://api.github.com/users/nuxzero/followers","following_url":"https://api.github.com/users/nuxzero/following{/other_user}","gists_url":"https://api.github.com/users/nuxzero/gists{/gist_id}","starred_url":"https://api.github.com/users/nuxzero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nuxzero/subscriptions","organizations_url":"https://api.github.com/users/nuxzero/orgs","repos_url":"https://api.github.com/users/nuxzero/repos","events_url":"https://api.github.com/users/nuxzero/events{/privacy}","received_events_url":"https://api.github.com/users/nuxzero/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":532126464,"node_id":"MDU6TGFiZWw1MzIxMjY0NjQ=","url":"https://api.github.com/repos/mockito/mockito/labels/please%20contribute","name":"please contribute","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-01-07T05:52:55Z","updated_at":"2021-01-07T09:35:40Z","closed_at":"2020-07-18T18:42:23Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi guys\r\n\r\nI'm encountering a crash when I run `AndroidTest` that contain mocking class cause the ByteBuddy didn't found `javax.tools.ToolProvider`. I tried to reinstall JDK 8 but doesn't work. It seems to be `javax.tools.ToolProvider` not existing in it. \r\n\r\nCould you guys help me please?\r\n\r\nCheer,\r\n\r\nNatthawut\r\n\r\n## Environment\r\n------------------------------------------------------------\r\nGradle 5.4.1\r\n------------------------------------------------------------\r\n\r\nBuild time:   2019-04-26 08:14:42 UTC\r\nRevision:     261d171646b36a6a28d5a19a69676cd098a4c19d\r\n\r\nKotlin:       1.3.21\r\nGroovy:       2.5.4\r\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\r\nJVM:          1.8.0_231 (Oracle Corporation 25.231-b11)\r\nOS:           Mac OS X 10.15.2 x86_64\r\n\r\n## Dependencies\r\n\r\n```\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\r\n    implementation 'androidx.appcompat:appcompat:1.1.0'\r\n    implementation 'androidx.core:core-ktx:1.1.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\r\n    testImplementation 'junit:junit:4.12'\r\n    testImplementation 'org.mockito:mockito-core:3.2.4'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\r\n    androidTestImplementation 'org.mockito:mockito-android:3.2.4'\r\n    androidTestImplementation \"io.mockk:mockk-android:1.9.3.kotlin12\"\r\n```\r\n\r\n## Strack trace\r\n\r\n```\r\nE/TestRunner: failed: mockFoo(co.sample.mockitoandroid.MockWithMockitoTest)\r\n    ----- begin exception -----\r\nE/TestRunner: java.lang.IllegalStateException: Could not initialize plugin: interface org.mockito.plugins.MockMaker (alternate: null)\r\n        at org.mockito.internal.configuration.plugins.PluginLoader$1.invoke(PluginLoader.java:74)\r\n        at java.lang.reflect.Proxy.invoke(Proxy.java:1006)\r\n        at $Proxy3.isTypeMockable(Unknown Source)\r\n        at org.mockito.internal.util.MockUtil.typeMockabilityOf(MockUtil.java:29)\r\n        at org.mockito.internal.util.MockCreationValidator.validateType(MockCreationValidator.java:22)\r\n        at org.mockito.internal.creation.MockSettingsImpl.validatedSettings(MockSettingsImpl.java:241)\r\n        at org.mockito.internal.creation.MockSettingsImpl.build(MockSettingsImpl.java:229)\r\n        at org.mockito.internal.MockitoCore.mock(MockitoCore.java:62)\r\n        at org.mockito.Mockito.mock(Mockito.java:1908)\r\n        at org.mockito.Mockito.mock(Mockito.java:1817)\r\n        at co.sample.mockitoandroid.MockWithMockitoTest.<init>(MockWithMockitoTest.kt:17)\r\n        at java.lang.reflect.Constructor.newInstance0(Native Method)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217)\r\n        at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266)\r\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n        at androidx.test.ext.junit.runners.AndroidJUnit4.run(AndroidJUnit4.java:104)\r\n        at org.junit.runners.Suite.runChild(Suite.java:128)\r\n        at org.junit.runners.Suite.runChild(Suite.java:27)\r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:115)\r\n        at androidx.test.internal.runner.TestExecutor.execute(TestExecutor.java:56)\r\n        at androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:392)\r\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2145)\r\n     Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Ljavax/tools/ToolProvider;\r\n        at org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.<init>(InlineByteBuddyMockMaker.java:172)\r\n        at java.lang.Class.newInstance(Native Method)\r\n        at org.mockito.internal.configuration.plugins.PluginInitializer.loadImpl(PluginInitializer.java:49)\r\n        at org.mockito.internal.configuration.plugins.PluginLoader.loadPlugin(PluginLoader.java:57)\r\n        at org.mockito.internal.configuration.plugins.PluginLoader.loadPlugin(PluginLoader.java:44)\r\n        at org.mockito.internal.configuration.plugins.PluginRegistry.<init>(PluginRegistry.java:22)\r\n        at org.mockito.internal.configuration.plugins.Plugins.<clinit>(Plugins.java:19)\r\n        at org.mockito.internal.configuration.plugins.Plugins.getMockMaker(Plugins.java:35)\r\n        at org.mockito.internal.util.MockUtil.<clinit>(MockUtil.java:24)\r\n        at org.mockito.internal.util.MockUtil.typeMockabilityOf(MockUtil.java:29) \r\n        at org.mockito.internal.util.MockCreationValidator.validateType(MockCreationValidator.java:22) \r\n        at org.mockito.internal.creation.MockSettingsImpl.validatedSettings(MockSettingsImpl.java:241) \r\n        at org.mockito.internal.creation.MockSettingsImpl.build(MockSettingsImpl.java:229) \r\n        at org.mockito.internal.MockitoCore.mock(MockitoCore.java:62) \r\n        at org.mockito.Mockito.mock(Mockito.java:1908) \r\n        at org.mockito.Mockito.mock(Mockito.java:1817) \r\n        at co.sample.mockitoandroid.MockWithMockitoTest.<init>(MockWithMockitoTest.kt:17) \r\n        at java.lang.reflect.Constructor.newInstance0(Native Method) \r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:343) \r\n        at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:217) \r\n        at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:266) \r\n        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) \r\n        at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:263) \r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78) \r\n        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57) \r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) \r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) \r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) \r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) \r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) \r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363) \r\n        at androidx.test.ext.junit.runners.AndroidJUnit4.run(AndroidJUnit4.java:104) \r\n        at org.junit.runners.Suite.runChild(Suite.java:128) \r\n        at org.junit.runners.Suite.runChild(Suite.java:27) \r\n        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) \r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) \r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) \r\n        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) \r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) \r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:363) \r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:137) \r\n        at org.junit.runner.JUnitCore.run(JUnitCore.java:115) \r\n        at androidx.test.internal.runner.TestExecutor.execute(TestExecutor.java:56) \r\n        at androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:392) \r\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2145) \r\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"javax.tools.ToolProvider\" on path: DexPathList[[zip file \"/system/framework/android.test.runner.jar\", zip file \"/system/framework/android.test.mock.jar\", zip file \"/data/app/co.sample.mockitoandroid.test-ZJFawUg-\r\n    ----- end exception -----\r\n```\r\n<img width=\"968\" alt=\"Screen Shot 2563-01-07 at 12 45 26\" src=\"https://user-images.githubusercontent.com/2638321/71871412-a93ee100-314b-11ea-9815-31a5d95056d4.png\">\r\n\r\n\r\n[MockitoAndroid.zip](https://github.com/mockito/mockito/files/4029049/MockitoAndroid.zip)\r\n\r\n\r\n\r\n\r\n\r\n","closed_by":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/1855/reactions","total_count":16,"+1":16,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/1855/timeline","performed_via_github_app":null,"state_reason":"completed"}