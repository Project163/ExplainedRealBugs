{"url":"https://api.github.com/repos/mockito/mockito/issues/2984","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2984/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2984/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2984/events","html_url":"https://github.com/mockito/mockito/issues/2984","id":1679304635,"node_id":"I_kwDOAF62v85kGCe7","number":2984,"title":"Deep Stubs Incompatible With Mocking Enum","user":{"login":"SenorPez","id":16673259,"node_id":"MDQ6VXNlcjE2NjczMjU5","avatar_url":"https://avatars.githubusercontent.com/u/16673259?v=4","gravatar_id":"","url":"https://api.github.com/users/SenorPez","html_url":"https://github.com/SenorPez","followers_url":"https://api.github.com/users/SenorPez/followers","following_url":"https://api.github.com/users/SenorPez/following{/other_user}","gists_url":"https://api.github.com/users/SenorPez/gists{/gist_id}","starred_url":"https://api.github.com/users/SenorPez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SenorPez/subscriptions","organizations_url":"https://api.github.com/users/SenorPez/orgs","repos_url":"https://api.github.com/users/SenorPez/repos","events_url":"https://api.github.com/users/SenorPez/events{/privacy}","received_events_url":"https://api.github.com/users/SenorPez/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2023-04-22T03:31:05Z","updated_at":"2023-11-29T09:50:19Z","closed_at":"2023-11-29T09:50:19Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**The following code works:**\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass BoardTest {\r\n    @Mock\r\n    Piece piece;\r\n\r\n    private Board instance;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        instance = new Board(piece, 10);\r\n    }\r\n\r\n    @Test\r\n    void getCostPerSpace() {\r\n        when(piece.getPiece()).thenReturn(PieceType.SQUARE);\r\n        double expected = 2d;\r\n        assertThat(instance.getCostPerSpace()).isEqualTo(expected);\r\n    }\r\n}\r\n```\r\n\r\n**The following code fails:**\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass BoardTest {\r\n    @Mock(answer = RETURNS_DEEP_STUBS)\r\n    Piece piece;\r\n\r\n    private Board instance;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        instance = new Board(piece, 10);\r\n    }\r\n\r\n    @Test\r\n    void getCostPerSpace() {\r\n        when(piece.getPiece().getCostPerPieceSpace()).thenReturn(2.5d);\r\n        double expected = 2d;\r\n        assertThat(instance.getCostPerSpace()).isEqualTo(expected);\r\n    }\r\n}\r\n```\r\n\r\nwith the following error:\r\n\r\n```\r\nYou are seeing this disclaimer because Mockito is configured to create inlined mocks.\r\nYou can learn about inline mocks and their limitations under item #39 of the Mockito class javadoc.\r\n\r\nUnderlying exception : org.mockito.exceptions.base.MockitoException: Unsupported settings with this type 'com.senorpez.game.PieceType'\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class com.senorpez.game.PieceType\r\n\r\nIf you're not sure why you're getting this error, please open an issue on GitHub.\r\n```\r\n\r\n**Mockito Version:** 5.3.0","closed_by":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2984/timeline","performed_via_github_app":null,"state_reason":"completed"}