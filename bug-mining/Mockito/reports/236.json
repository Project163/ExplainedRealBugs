{"url":"https://api.github.com/repos/mockito/mockito/issues/2548","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2548/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2548/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2548/events","html_url":"https://github.com/mockito/mockito/issues/2548","id":1113023530,"node_id":"I_kwDOAF62v85CV2Qq","number":2548,"title":"[PR open] Add feature to verify static methods calls in order","user":{"login":"mirkoalicastro","id":26565895,"node_id":"MDQ6VXNlcjI2NTY1ODk1","avatar_url":"https://avatars.githubusercontent.com/u/26565895?v=4","gravatar_id":"","url":"https://api.github.com/users/mirkoalicastro","html_url":"https://github.com/mirkoalicastro","followers_url":"https://api.github.com/users/mirkoalicastro/followers","following_url":"https://api.github.com/users/mirkoalicastro/following{/other_user}","gists_url":"https://api.github.com/users/mirkoalicastro/gists{/gist_id}","starred_url":"https://api.github.com/users/mirkoalicastro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirkoalicastro/subscriptions","organizations_url":"https://api.github.com/users/mirkoalicastro/orgs","repos_url":"https://api.github.com/users/mirkoalicastro/repos","events_url":"https://api.github.com/users/mirkoalicastro/events{/privacy}","received_events_url":"https://api.github.com/users/mirkoalicastro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-01-24T18:59:51Z","updated_at":"2022-02-16T21:32:57Z","closed_at":"2022-02-16T21:32:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**TL;DR** Mockito doesn't allow verifying static methods calls in order. I have implemented this feature here: https://github.com/mockito/mockito/pull/2549. If possible, I'd like to contribute; or discuss other ways to achieve the same.\r\n\r\n---\r\n\r\nHey Mockito team.\r\n\r\nThis discussion relates to: https://groups.google.com/g/mockito/c/wjd9jIj_oBs. Since I'm not sure that the Google group is active, I'm posting it here for now.\r\n\r\nThis issue is about verifying static methods calls in order. I'm aware of the InOrder class, but we can't pass a MockedStatic instance. I had a closer look, and we can pass to it a Class instance. But the InOrder interface is not powerful enough to verify that a static method has been called:\r\n```\r\npublic interface InOrder {\r\n  <T> T verify(T mock);\r\n  <T> T verify(T mock, VerificationMode mode);\r\n  void verifyNoMoreInteractions();\r\n}\r\n```\r\n\r\nTo verify static calls, using method references and lambdas, we likely need two more methods in the InOrder interface, with signatures similar to MockedStatic#verify:\r\n```\r\npublic interface MockedStatic<T> extends ScopedMock {\r\n  void verify(Verification verification)\r\n  void verify(Verification verification, VerificationMode mode);\r\n  ...\r\n}\r\n```\r\n\r\nWhat do you think of the InOrder interface exposing two methods to deal with the MockedStatic objects that accept both the MockedStatic and the Verification instances to use? Like the following:\r\n```\r\nvoid verify(MockedStatic<?> mockedStatic, MockedStatic.Verification verification);\r\nvoid verify(MockedStatic<?> mockedStatic, MockedStatic.Verification verification, VerificationMode mode);\r\n```\r\n\r\nI made the above changes, and we can verify static methods, together with instance methods too. I have updated the tests as well in my PR.\r\n\r\nLet me know if you are aware of other ways to achieve the same. If it is not doable, then please share your thoughts about the above, and if I can contribute in case.","closed_by":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2548/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":2,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2548/timeline","performed_via_github_app":null,"state_reason":"completed"}