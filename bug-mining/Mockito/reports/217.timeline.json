[{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/804828239","html_url":"https://github.com/mockito/mockito/issues/2238#issuecomment-804828239","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2238","id":804828239,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNDgyODIzOQ==","user":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T11:31:12Z","updated_at":"2021-03-23T11:31:12Z","body":"Thanks for reporting this issue! We would welcome a patch + regression test for this issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/804828239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4495571426,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0OTU1NzE0MjY=","url":"https://api.github.com/repos/mockito/mockito/issues/events/4495571426","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-23T11:31:17Z","label":{"name":"please contribute","color":"0e8a16"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/805080647","html_url":"https://github.com/mockito/mockito/issues/2238#issuecomment-805080647","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2238","id":805080647,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTA4MDY0Nw==","user":{"login":"spannm","id":1314640,"node_id":"MDQ6VXNlcjEzMTQ2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1314640?v=4","gravatar_id":"","url":"https://api.github.com/users/spannm","html_url":"https://github.com/spannm","followers_url":"https://api.github.com/users/spannm/followers","following_url":"https://api.github.com/users/spannm/following{/other_user}","gists_url":"https://api.github.com/users/spannm/gists{/gist_id}","starred_url":"https://api.github.com/users/spannm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spannm/subscriptions","organizations_url":"https://api.github.com/users/spannm/orgs","repos_url":"https://api.github.com/users/spannm/repos","events_url":"https://api.github.com/users/spannm/events{/privacy}","received_events_url":"https://api.github.com/users/spannm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T17:16:01Z","updated_at":"2021-03-23T17:16:01Z","body":"Thanks for your great work on Mockito and the contribution to open source it continues to make.\r\n\r\nI've come across the very same behavior under a similar setup.\r\nI must agree with the OP, this appears to be a bug, and it would be great to see it fixed.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/805080647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"spannm","id":1314640,"node_id":"MDQ6VXNlcjEzMTQ2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1314640?v=4","gravatar_id":"","url":"https://api.github.com/users/spannm","html_url":"https://github.com/spannm","followers_url":"https://api.github.com/users/spannm/followers","following_url":"https://api.github.com/users/spannm/following{/other_user}","gists_url":"https://api.github.com/users/spannm/gists{/gist_id}","starred_url":"https://api.github.com/users/spannm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spannm/subscriptions","organizations_url":"https://api.github.com/users/spannm/orgs","repos_url":"https://api.github.com/users/spannm/repos","events_url":"https://api.github.com/users/spannm/events{/privacy}","received_events_url":"https://api.github.com/users/spannm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"hypfvieh","id":4946099,"node_id":"MDQ6VXNlcjQ5NDYwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/4946099?v=4","gravatar_id":"","url":"https://api.github.com/users/hypfvieh","html_url":"https://github.com/hypfvieh","followers_url":"https://api.github.com/users/hypfvieh/followers","following_url":"https://api.github.com/users/hypfvieh/following{/other_user}","gists_url":"https://api.github.com/users/hypfvieh/gists{/gist_id}","starred_url":"https://api.github.com/users/hypfvieh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hypfvieh/subscriptions","organizations_url":"https://api.github.com/users/hypfvieh/orgs","repos_url":"https://api.github.com/users/hypfvieh/repos","events_url":"https://api.github.com/users/hypfvieh/events{/privacy}","received_events_url":"https://api.github.com/users/hypfvieh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T11:57:45Z","updated_at":"2021-03-25T11:57:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2241","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2241/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2241/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2241/events","html_url":"https://github.com/mockito/mockito/pull/2241","id":840855583,"node_id":"MDExOlB1bGxSZXF1ZXN0NjAwNjc2NjY5","number":2241,"title":"Fixes #2238: Do not omit stack frames of causing class","user":{"login":"hypfvieh","id":4946099,"node_id":"MDQ6VXNlcjQ5NDYwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/4946099?v=4","gravatar_id":"","url":"https://api.github.com/users/hypfvieh","html_url":"https://github.com/hypfvieh","followers_url":"https://api.github.com/users/hypfvieh/followers","following_url":"https://api.github.com/users/hypfvieh/following{/other_user}","gists_url":"https://api.github.com/users/hypfvieh/gists{/gist_id}","starred_url":"https://api.github.com/users/hypfvieh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hypfvieh/subscriptions","organizations_url":"https://api.github.com/users/hypfvieh/orgs","repos_url":"https://api.github.com/users/hypfvieh/repos","events_url":"https://api.github.com/users/hypfvieh/events{/privacy}","received_events_url":"https://api.github.com/users/hypfvieh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-25T11:57:45Z","updated_at":"2021-03-25T15:00:36Z","closed_at":"2021-03-25T15:00:36Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/2241","html_url":"https://github.com/mockito/mockito/pull/2241","diff_url":"https://github.com/mockito/mockito/pull/2241.diff","patch_url":"https://github.com/mockito/mockito/pull/2241.patch","merged_at":"2021-03-25T15:00:36Z"},"body":"This PR will fix this problems described in #2238. \r\n\r\nThe main cause wasn't the `hideRecursiveCall` method but `tryInvoke` method.\r\nIn `tryInvoke` the original stacktrace will be passed through the configured filter after it has been modified by `hideRecursiveCall`.\r\n\r\nWhen calling `hideRecursiveCall` the second argument (`current`) is set the the length of the stack trace of the causing exception.\r\nThis will omit too much stack frames, ultimately skipping the lines containing of the root exception cause.\r\n\r\nIn this patch, `tryInvoke` will try to find a better starting frame when an exception is caught.\r\nIt will do this by investigating the created stack trace and look for the first entry matching the class name of the `instance` object given to `tryInvoke`. This offset will then be given to `hideRecursiveCall` as `current` argument instead of using the stack trace length.\r\nIf there is no `instance` object (`null`), the length of the stack trace is used (like before). ","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2241/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4508378347,"node_id":"MDExOkNsb3NlZEV2ZW50NDUwODM3ODM0Nw==","url":"https://api.github.com/repos/mockito/mockito/issues/events/4508378347","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f5b9975e9305f596e208d840ea90c483193aadd3","commit_url":"https://api.github.com/repos/mockito/mockito/commits/f5b9975e9305f596e208d840ea90c483193aadd3","created_at":"2021-03-25T15:00:39Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"holubec-petr","id":10357929,"node_id":"MDQ6VXNlcjEwMzU3OTI5","avatar_url":"https://avatars.githubusercontent.com/u/10357929?v=4","gravatar_id":"","url":"https://api.github.com/users/holubec-petr","html_url":"https://github.com/holubec-petr","followers_url":"https://api.github.com/users/holubec-petr/followers","following_url":"https://api.github.com/users/holubec-petr/following{/other_user}","gists_url":"https://api.github.com/users/holubec-petr/gists{/gist_id}","starred_url":"https://api.github.com/users/holubec-petr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holubec-petr/subscriptions","organizations_url":"https://api.github.com/users/holubec-petr/orgs","repos_url":"https://api.github.com/users/holubec-petr/repos","events_url":"https://api.github.com/users/holubec-petr/events{/privacy}","received_events_url":"https://api.github.com/users/holubec-petr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T12:15:18Z","updated_at":"2021-11-26T12:15:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/1490","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/1490/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/1490/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/1490/events","html_url":"https://github.com/mockito/mockito/issues/1490","id":359060448,"node_id":"MDU6SXNzdWUzNTkwNjA0NDg=","number":1490,"title":"Misleading stack trace when spying","user":{"login":"TWiStErRob","id":2906988,"node_id":"MDQ6VXNlcjI5MDY5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/2906988?v=4","gravatar_id":"","url":"https://api.github.com/users/TWiStErRob","html_url":"https://github.com/TWiStErRob","followers_url":"https://api.github.com/users/TWiStErRob/followers","following_url":"https://api.github.com/users/TWiStErRob/following{/other_user}","gists_url":"https://api.github.com/users/TWiStErRob/gists{/gist_id}","starred_url":"https://api.github.com/users/TWiStErRob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TWiStErRob/subscriptions","organizations_url":"https://api.github.com/users/TWiStErRob/orgs","repos_url":"https://api.github.com/users/TWiStErRob/repos","events_url":"https://api.github.com/users/TWiStErRob/events{/privacy}","received_events_url":"https://api.github.com/users/TWiStErRob/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-09-11T13:58:17Z","updated_at":"2023-07-08T20:08:45Z","closed_at":"2023-07-08T20:08:45Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Mockito Version: 2.22.0\r\nJava: 1.7 (compiled with Android Studio / Gradle)\r\nAndroid Studio 3.1.4\r\nBuild #AI-173.4907809, built on July 23, 2018\r\nJRE: 1.8.0_152-release-1024-b02 amd64\r\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\r\nWindows 10 10.0\r\n\r\nOriginally the issue was discovered with Kotlin, https://github.com/nhaarman/mockito-kotlin and Inline MockMaker in the mix, but even after removing all those from the SSCCE, the issue still persisted.\r\n\r\nConsider the following production code:\r\n```java\r\ninterface Collaborator {\r\n    String getSomething();\r\n}\r\n\r\nclass SUT {\r\n    private final Collaborator collaborator;\r\n\r\n    SUT(Collaborator collaborator) {\r\n        this.collaborator = collaborator;\r\n    }\r\n    void delegating(String arg) {\r\n        delegatee(arg);\r\n    }\r\n    void delegatee(String arg) { // private on this fixes the issue\r\n        stubbed(arg + \"x\"); // NPE stack trace shows this\r\n    }\r\n    void stubbed(String toBeCaptured) {\r\n        //noinspection RedundantStringToString,ResultOfMethodCallIgnored\r\n        collaborator\r\n                .getSomething()\r\n                .toString() // NPE happens on this member access\r\n        ;\r\n    }\r\n}\r\n```\r\nand assume I want to test that calling `delegating` ends up in `stubbed` with a transformed argument, but I don't want to test what's inside `stubbed` (hence `spy`).\r\nLet's imagine that I made a mistake while writing this test as outlined in the comments: I forgot to add the `doNothing()` stub, which means that the production code of the method I don't want to call is called.\r\n\r\nHere's how I would translate this to a JUnit Mockito test:\r\n```java\r\nimport org.junit.Assert;\r\nimport org.junit.Test;\r\nimport org.mockito.ArgumentCaptor;\r\nimport org.mockito.Mockito;\r\n\r\npublic class SUTTest {\r\n    @Test public void testDelegatingFlowsDataToStubbed() {\r\n        SUT sut = Mockito.spy(new SUT(Mockito.mock(Collaborator.class))); // removing spy fixes the issue\r\n        // suppose I forgot to add\r\n        // Mockito.doNothing().when(sut).stubbed(Mockito.<String>any());\r\n        // if doNothing() was there, there would be no need to stub the collaborator\r\n        // but because doNothing() is missing it'll interact with the collaborator and\r\n        // it'll return the default null from getSomething() and crash (this works as expected)\r\n\r\n        sut.delegating(\"hello\"); // calling delegatee directly fixes the issue\r\n\r\n        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);\r\n        Mockito.verify(sut).stubbed(captor.capture());\r\n        Assert.assertEquals(\"hellox\", captor.getValue());\r\n    }\r\n}\r\n```\r\nNote: for a quick repro you can drop all the above code (prod + test) into the same file.\r\n\r\nAdding the `doNothing()` will make the test pass, but without the test errors. This error is the subject of this report as it is misleading and makes it hard to fix the test/production code after getting the error.\r\n\r\nWhen running the above code I get the following stack trace:\r\n```ruby\r\njava.lang.NullPointerException\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat x.SUTTest.testDelegatingFlowsDataToStubbed(SUTTest.java:40)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\r\n```\r\nActual stack trace (the relevant bits):\r\n```ruby\r\njava.lang.NullPointerException\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat x.SUTTest.testDelegatingFlowsDataToStubbed(SUTTest.java:40)\r\n```\r\nExpected stack trace (the relevant bits):\r\n```ruby\r\njava.lang.NullPointerException\r\n\tat x.SUT.stubbed(SUTTest.java:28)\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat x.SUT.delegatee(SUTTest.java:22)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat x.SUT.delegating(SUTTest.java:19)\r\n\tat x.SUTTest.testDelegatingFlowsDataToStubbed(SUTTest.java:40)\r\n```\r\nNote: the duplicate stacks are ok, I don't care, but the exception source must be correctly identified. I just spent 3 hours trying to figure out why it was crashing on a line where nothing could be `null` leading to this SSCCE.\r\n\r\ncheck that\r\n\r\n - [x] The mockito message in the stacktrace have useful information, but it didn't help\r\n - [x] The problematic code (if that's possible) is copied here;\r\n       Note that some configuration are impossible to mock via Mockito\r\n - [x] Provide versions (mockito / jdk / os / any other relevant information)\r\n - [x] Provide a [Short, Self Contained, Correct (Compilable), Example](http://sscce.org) of the issue\r\n       (same as any question on stackoverflow.com)\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/master/.github/CONTRIBUTING.md)","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/1490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/1490/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/979968759","html_url":"https://github.com/mockito/mockito/issues/2238#issuecomment-979968759","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2238","id":979968759,"node_id":"IC_kwDOAF62v846aSL3","user":{"login":"holubec-petr","id":10357929,"node_id":"MDQ6VXNlcjEwMzU3OTI5","avatar_url":"https://avatars.githubusercontent.com/u/10357929?v=4","gravatar_id":"","url":"https://api.github.com/users/holubec-petr","html_url":"https://github.com/holubec-petr","followers_url":"https://api.github.com/users/holubec-petr/followers","following_url":"https://api.github.com/users/holubec-petr/following{/other_user}","gists_url":"https://api.github.com/users/holubec-petr/gists{/gist_id}","starred_url":"https://api.github.com/users/holubec-petr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holubec-petr/subscriptions","organizations_url":"https://api.github.com/users/holubec-petr/orgs","repos_url":"https://api.github.com/users/holubec-petr/repos","events_url":"https://api.github.com/users/holubec-petr/events{/privacy}","received_events_url":"https://api.github.com/users/holubec-petr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T13:12:01Z","updated_at":"2021-11-26T13:12:01Z","body":"Unfortunately, this fix broke one of my tests.\r\n\r\nThe fixed code hides much more stack trace elements than before which breaks my production logic due to missing some important frames.\r\n\r\nThe exception is thrown by `GroovyIcm.getDirectory`.\r\n\r\nMy original stack trace (shortened):\r\n```\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm$getDirectory$1.invoke(GroovyIcm.kt:34)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm$getDirectory$1.invoke(GroovyIcm.kt:34)\r\nmy.company.engine.processors.scripting.groovy.GroovyExceptionUtil$Companion.throwOnNull(GroovyExceptionUtil.kt:34)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm.getDirectory(GroovyIcm.kt:34)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\njava.base/java.lang.reflect.Method.invoke(Method.java:566)\r\norg.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.tryInvoke(MockMethodAdvice.java:333)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.access$500(MockMethodAdvice.java:60)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice$RealMethodCall.invoke(MockMethodAdvice.java:253)\r\norg.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)\r\norg.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)\r\norg.mockito.Answers.answer(Answers.java:90)\r\norg.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)\r\norg.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)\r\norg.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)\r\norg.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.handle(MockMethodAdvice.java:151)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm.getDirectory(GroovyIcm.kt:34)\r\nmy.company.scripting.groovy.api.definitions.icm.IcmApi$getDirectory.call(Unknown Source)\r\norg.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\norg.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\norg.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\r\nScript_df5730203a3340a9757f6622995e3fd5.run(Script_df5730203a3340a9757f6622995e3fd5.groovy:1)\r\nmy.company.scripting.groovy.GroovyInterpreter.execute(GroovyInterpreter.kt:26)\r\nmy.company.engine.processors.scripting.groovy.GroovyScriptProcessor.execute(GroovyScriptProcessor.kt:65)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\njava.base/java.lang.reflect.Method.invoke(Method.java:566)\r\norg.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.tryInvoke(MockMethodAdvice.java:333)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.access$500(MockMethodAdvice.java:60)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice$RealMethodCall.invoke(MockMethodAdvice.java:253)\r\norg.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)\r\norg.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)\r\norg.mockito.Answers.answer(Answers.java:90)\r\norg.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)\r\norg.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)\r\norg.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)\r\norg.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.handle(MockMethodAdvice.java:151)\r\nmy.company.engine.processors.scripting.groovy.GroovyScriptProcessor.execute(GroovyScriptProcessor.kt:55)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcmApiTest.get fails job if path do not exist(GroovyIcmApiTest.kt:127)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n...\r\n```\r\n\r\nMy stack trace after processing (complete):\r\n```\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm$getDirectory$1.invoke(GroovyIcm.kt:34)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm$getDirectory$1.invoke(GroovyIcm.kt:34)\r\nmy.company.engine.processors.scripting.groovy.GroovyExceptionUtil$Companion.throwOnNull(GroovyExceptionUtil.kt:34)\r\nmy.company.engine.processors.scripting.api_impl.groovy.GroovyIcm.getDirectory(GroovyIcm.kt:34)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\njava.base/java.lang.reflect.Method.invoke(Method.java:566)\r\norg.mockito.internal.util.reflection.ReflectionMemberAccessor.invoke(ReflectionMemberAccessor.java:48)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.tryInvoke(MockMethodAdvice.java:333)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.access$500(MockMethodAdvice.java:60)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice$RealMethodCall.invoke(MockMethodAdvice.java:253)\r\norg.mockito.internal.invocation.InterceptedInvocation.callRealMethod(InterceptedInvocation.java:142)\r\norg.mockito.internal.stubbing.answers.CallsRealMethods.answer(CallsRealMethods.java:45)\r\norg.mockito.Answers.answer(Answers.java:90)\r\norg.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:110)\r\norg.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)\r\norg.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:34)\r\norg.mockito.internal.creation.bytebuddy.MockMethodInterceptor.doIntercept(MockMethodInterceptor.java:82)\r\norg.mockito.internal.creation.bytebuddy.MockMethodAdvice.handle(MockMethodAdvice.java:151)\r\nworker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n```\r\n\r\nNotice that `Script_df5730203a3340a9757f6622995e3fd5.run(...)` is missing in the processed stack trace.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/979968759/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"holubec-petr","id":10357929,"node_id":"MDQ6VXNlcjEwMzU3OTI5","avatar_url":"https://avatars.githubusercontent.com/u/10357929?v=4","gravatar_id":"","url":"https://api.github.com/users/holubec-petr","html_url":"https://github.com/holubec-petr","followers_url":"https://api.github.com/users/holubec-petr/followers","following_url":"https://api.github.com/users/holubec-petr/following{/other_user}","gists_url":"https://api.github.com/users/holubec-petr/gists{/gist_id}","starred_url":"https://api.github.com/users/holubec-petr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holubec-petr/subscriptions","organizations_url":"https://api.github.com/users/holubec-petr/orgs","repos_url":"https://api.github.com/users/holubec-petr/repos","events_url":"https://api.github.com/users/holubec-petr/events{/privacy}","received_events_url":"https://api.github.com/users/holubec-petr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"holubec-petr","id":10357929,"node_id":"MDQ6VXNlcjEwMzU3OTI5","avatar_url":"https://avatars.githubusercontent.com/u/10357929?v=4","gravatar_id":"","url":"https://api.github.com/users/holubec-petr","html_url":"https://github.com/holubec-petr","followers_url":"https://api.github.com/users/holubec-petr/followers","following_url":"https://api.github.com/users/holubec-petr/following{/other_user}","gists_url":"https://api.github.com/users/holubec-petr/gists{/gist_id}","starred_url":"https://api.github.com/users/holubec-petr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holubec-petr/subscriptions","organizations_url":"https://api.github.com/users/holubec-petr/orgs","repos_url":"https://api.github.com/users/holubec-petr/repos","events_url":"https://api.github.com/users/holubec-petr/events{/privacy}","received_events_url":"https://api.github.com/users/holubec-petr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T14:28:05Z","updated_at":"2021-11-26T14:28:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/2489","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2489/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2489/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2489/events","html_url":"https://github.com/mockito/mockito/issues/2489","id":1064535873,"node_id":"I_kwDOAF62v84_c4dB","number":2489,"title":"Incomplete stack trace returned from spy inside another spy","user":{"login":"holubec-petr","id":10357929,"node_id":"MDQ6VXNlcjEwMzU3OTI5","avatar_url":"https://avatars.githubusercontent.com/u/10357929?v=4","gravatar_id":"","url":"https://api.github.com/users/holubec-petr","html_url":"https://github.com/holubec-petr","followers_url":"https://api.github.com/users/holubec-petr/followers","following_url":"https://api.github.com/users/holubec-petr/following{/other_user}","gists_url":"https://api.github.com/users/holubec-petr/gists{/gist_id}","starred_url":"https://api.github.com/users/holubec-petr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holubec-petr/subscriptions","organizations_url":"https://api.github.com/users/holubec-petr/orgs","repos_url":"https://api.github.com/users/holubec-petr/repos","events_url":"https://api.github.com/users/holubec-petr/events{/privacy}","received_events_url":"https://api.github.com/users/holubec-petr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":532126464,"node_id":"MDU6TGFiZWw1MzIxMjY0NjQ=","url":"https://api.github.com/repos/mockito/mockito/labels/please%20contribute","name":"please contribute","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-11-26T14:28:05Z","updated_at":"2022-01-22T09:19:14Z","closed_at":"2022-01-22T09:19:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-08T18:47:09Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15309,"watchers_count":15309,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2641,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2641,"open_issues":476,"watchers":15309,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi,\r\n\r\ndue to the fix of issue #2238, the returned stack trace is not complete when an exception is thrown from a spy inside another spy.\r\nThe problem appeared in released version 3.9.0 (specifically 3.8.14) and still exists in 4.1.0.\r\n\r\nI wrote a unit test simulating this behavior:\r\nhttps://github.com/holubec-petr/mockito/blob/stack_trace_clean_up/src/test/java/org/mockito/internal/creation/bytebuddy/InlineDelegateByteBuddyMockMakerTest.java#L272\r\n\r\nProblem is that the method `MockMethodAdvice.hideRecursiveCall()` is too aggressive when removing stack trace frames.\r\n\r\nCheck that\r\n - [x] The mockito message in the stacktrace have useful information, but it didn't help\r\n - [x] The problematic code (if that's possible) is copied here;\r\n       Note that some configuration are impossible to mock via Mockito\r\n - [x] Provide versions (mockito / jdk / os / any other relevant information)\r\n - [x] Provide a [Short, Self Contained, Correct (Compilable), Example](http://sscce.org) of the issue\r\n       (same as any question on stackoverflow.com)\r\n - [x] Read the [contributing guide](https://github.com/mockito/mockito/blob/main/.github/CONTRIBUTING.md)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2489/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":19075086939,"node_id":"REFE_lADOAF62v84x-nxuzwAAAARw9rpb","url":"https://api.github.com/repos/mockito/mockito/issues/events/19075086939","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f5b9975e9305f596e208d840ea90c483193aadd3","commit_url":"https://api.github.com/repos/mureinik/mockito/commits/f5b9975e9305f596e208d840ea90c483193aadd3","created_at":"2025-08-10T09:13:01Z","performed_via_github_app":null}]