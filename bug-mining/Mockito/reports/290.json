{"url":"https://api.github.com/repos/mockito/mockito/issues/2915","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/2915/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/2915/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/2915/events","html_url":"https://github.com/mockito/mockito/issues/2915","id":1589526888,"node_id":"I_kwDOAF62v85evkFo","number":2915,"title":"Verify on Spy Interface incorrect count of actual invocation","user":{"login":"bmaggi","id":1917056,"node_id":"MDQ6VXNlcjE5MTcwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/1917056?v=4","gravatar_id":"","url":"https://api.github.com/users/bmaggi","html_url":"https://github.com/bmaggi","followers_url":"https://api.github.com/users/bmaggi/followers","following_url":"https://api.github.com/users/bmaggi/following{/other_user}","gists_url":"https://api.github.com/users/bmaggi/gists{/gist_id}","starred_url":"https://api.github.com/users/bmaggi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmaggi/subscriptions","organizations_url":"https://api.github.com/users/bmaggi/orgs","repos_url":"https://api.github.com/users/bmaggi/repos","events_url":"https://api.github.com/users/bmaggi/events{/privacy}","received_events_url":"https://api.github.com/users/bmaggi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":532126464,"node_id":"MDU6TGFiZWw1MzIxMjY0NjQ=","url":"https://api.github.com/repos/mockito/mockito/labels/please%20contribute","name":"please contribute","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-02-17T15:21:23Z","updated_at":"2023-05-03T07:44:22Z","closed_at":"2023-05-03T07:44:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nAt first, thanks for this awesome library. \r\n\r\nDuring a migration from mockito 4.4.0 to mockito 5.1.1 one of my test began to fail. \r\nIt reported that the spied mock has 2 call one a method instead of one. \r\n\r\nI figured that  it has something to do with the new default [mockmaker](https://github.com/mockito/mockito/releases/tag/v5.0.0) since it's working with mockito-subclass.\r\n\r\nStill, the message is misleading : it's suggesting that there is an error while the code works as expected.\r\nEither there is a bug in the spy count , either the message should be changed to reflect that verify/spy on interface is impossible. \r\n(I may also have missed something :p ) \r\n\r\n\r\nShort failing example  java 11/ junit 5/ mockito 5.1.1\r\n\r\n```java\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport static org.mockito.Mockito.*;\r\n\r\nclass MyTest {\r\n\r\n    @Test\r\n    void testSpyMockInterfaceMockito5() {\r\n        MInterface spiedInterface = spy(mock(MInterface.class));\r\n        spiedInterface.add(0);\r\n        verify(spiedInterface).add(0);\r\n    }\r\n}\r\n\r\ninterface MInterface {\r\n\r\n    void add(Integer i);\r\n}\r\n\r\n/*\r\n## Mockito 5.1.1 \r\norg.mockito.exceptions.verification.TooManyActualInvocations:\r\nmInterface$MockitoMock$b85WZhRq.add(0);\r\nWanted 1 time:\r\n-> at MyTest.testSpyMockInterfaceMockito5(MyTest.java:21)\r\nBut was 2 times:\r\n-> at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n-> at MyTest.testSpyMockInterfaceMockito5(MyTest.java:18)\r\n\r\n## mockito 4.4.0 ok\r\n## mockito-subclass 5.1.1 ok\r\n */\r\n```","closed_by":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/2915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/2915/timeline","performed_via_github_app":null,"state_reason":"completed"}