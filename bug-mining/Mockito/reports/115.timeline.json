[{"id":986970645,"node_id":"MDEyOkxhYmVsZWRFdmVudDk4Njk3MDY0NQ==","url":"https://api.github.com/repos/mockito/mockito/issues/events/986970645","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-03-05T23:33:16Z","label":{"name":"enhancement","color":"207de5"},"performed_via_github_app":null},{"id":986970646,"node_id":"MDEyOkxhYmVsZWRFdmVudDk4Njk3MDY0Ng==","url":"https://api.github.com/repos/mockito/mockito/issues/events/986970646","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-03-05T23:33:16Z","label":{"name":"please-contribute","color":"d4c5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284273051","html_url":"https://github.com/mockito/mockito/issues/976#issuecomment-284273051","issue_url":"https://api.github.com/repos/mockito/mockito/issues/976","id":284273051,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDI3MzA1MQ==","user":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-05T23:34:02Z","updated_at":"2017-03-05T23:34:02Z","body":"@mureinik, do you want to take a stab at this one? :)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284273051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":986970928,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTg2OTcwOTI4","url":"https://api.github.com/repos/mockito/mockito/issues/events/986970928","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-05T23:34:02Z","performed_via_github_app":null},{"id":986970929,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk4Njk3MDkyOQ==","url":"https://api.github.com/repos/mockito/mockito/issues/events/986970929","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-05T23:34:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284554121","html_url":"https://github.com/mockito/mockito/issues/976#issuecomment-284554121","issue_url":"https://api.github.com/repos/mockito/mockito/issues/976","id":284554121,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU1NDEyMQ==","user":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T22:25:31Z","updated_at":"2017-03-06T22:27:18Z","body":"@szczepiq sure, I'll take a crack at it, but let's first decide what exactly we want to do. \r\n\r\nFirst, a note - `mock(Foo, withSettings().useConstructor(new A()));` most definitely works with the current implementation, contrary to the comment in the above snippet.\r\n\r\nI propose the following definition, which is pretty much what the compiler does when facing a call like `new Foo(new B())`:\r\n- An argument will be called _better matching_ parameter X over parameter Y if the argument can be applied to either parameter X or parameter Y and X is a more specific type than Y.<br/>\r\nFor completeness' sake: An argument will be called _worse matching_ parameter X over parameter Y if it is _better matching_ parameter Y over X; An argument will be called _equally matching_ parameter X over parameter Y if it is neither _better matching_ or _worse matching_ parameter X over parameter Y.\r\n\r\n- An argument list will be called _better matching_ a constructor's parameters list X over Y if one or more of the arguments are _better matching_ their respective parameters and the rest are _equally matching_ their respective parameters.<br/>\r\nNote that if the argument list is larger than one argument, this is not a total order. If constructor X is _better matching_ an argument list than constructor Z and constructor Y is _better matching_ the same argument list than constructor Z, nothing can be said about the relationship between X and Y.\r\n\r\nUsing these definitions, we can implement the following behavior:\r\n- If no constructor matches the argument list, an exception is thrown (as it is with the current implementation).\r\n- If a single constructor matches the argument list, it's used (as it is with the current implementation).\r\n- If multiple constructors match the argument list, and one is _better matching_ than any other constructor, it is used (new behavior).\r\n- If multiple constructors match the argument list, and there isn't one that is _better matching_ than all the  the other constructors, an exception is thrown (similar to the current implementation, although the error message may be more precise - see below).\r\n\r\nI'll attempt to clarify this with an example.\r\n\r\nConsider the following:\r\n\r\n```java\r\nclass A {}\r\nclass B extends A {}\r\nclass C extends B {}\r\n\r\nclass Foo {\r\n  Foo(A x, A y) {}\r\n  Foo(A x, B y) {}\r\n  Foo(B x, A y) {}\r\n}\r\n\r\nA a = new A();\r\nB b = new B();\r\nC c = new C();\r\n\r\n// Works, Foo(A, A) is called, obviously.\r\nmock(Foo.class, withSettings().useConstructor(a, a)); \r\n\r\n// Works, Foo(A, B) is called.\r\n// Since B is more specific than A, Foo(A, B) is better matching than Foor(A, A).\r\nmock(Foo.class, withSettings().useConstructor(a, b)); \r\n\r\n// Works, Foo(B, A) is called, following the same logic as above\r\nmock(Foo.class, withSettings().useConstructor(b, a)); \r\n\r\n// Works, Foo(B, A) is called, following the same logic as above\r\nmock(Foo.class, withSettings().useConstructor(a, c)); \r\n\r\n// Does not work, as we can't decide between Foo(A, B) and Foo(B, A)\r\nmock(Foo.class, withSettings().useConstructor(b, b)); \r\n```\r\n\r\nIf this approach makes sense, I'll cook up a patch that implements it, so we have something concrete to discuss.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284554121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":988607141,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTg4NjA3MTQx","url":"https://api.github.com/repos/mockito/mockito/issues/events/988607141","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-06T22:25:31Z","performed_via_github_app":null},{"id":988607142,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk4ODYwNzE0Mg==","url":"https://api.github.com/repos/mockito/mockito/issues/events/988607142","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-06T22:25:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284627279","html_url":"https://github.com/mockito/mockito/issues/976#issuecomment-284627279","issue_url":"https://api.github.com/repos/mockito/mockito/issues/976","id":284627279,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDYyNzI3OQ==","user":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T05:39:59Z","updated_at":"2017-03-07T05:39:59Z","body":"@szczepiq feel free to assign this issue to me. I don't think I have the permissions to do so myself.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/284627279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":988996686,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTg4OTk2Njg2","url":"https://api.github.com/repos/mockito/mockito/issues/events/988996686","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-07T05:39:59Z","performed_via_github_app":null},{"id":988996688,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk4ODk5NjY4OA==","url":"https://api.github.com/repos/mockito/mockito/issues/events/988996688","actor":{"login":"mockitoguy","id":24743,"node_id":"MDQ6VXNlcjI0NzQz","avatar_url":"https://avatars.githubusercontent.com/u/24743?v=4","gravatar_id":"","url":"https://api.github.com/users/mockitoguy","html_url":"https://github.com/mockitoguy","followers_url":"https://api.github.com/users/mockitoguy/followers","following_url":"https://api.github.com/users/mockitoguy/following{/other_user}","gists_url":"https://api.github.com/users/mockitoguy/gists{/gist_id}","starred_url":"https://api.github.com/users/mockitoguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockitoguy/subscriptions","organizations_url":"https://api.github.com/users/mockitoguy/orgs","repos_url":"https://api.github.com/users/mockitoguy/repos","events_url":"https://api.github.com/users/mockitoguy/events{/privacy}","received_events_url":"https://api.github.com/users/mockitoguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-07T05:39:59Z","performed_via_github_app":null},{"id":989265437,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDk4OTI2NTQzNw==","url":"https://api.github.com/repos/mockito/mockito/issues/events/989265437","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"37d58a5c8cb92bee3f906605b99d75e8dae92c59","commit_url":"https://api.github.com/repos/mureinik/mockito/commits/37d58a5c8cb92bee3f906605b99d75e8dae92c59","created_at":"2017-03-07T09:56:54Z","performed_via_github_app":null},{"actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T10:02:15Z","updated_at":"2017-03-07T10:02:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockito/mockito/issues/980","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/980/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/980/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/980/events","html_url":"https://github.com/mockito/mockito/pull/980","id":212383787,"node_id":"MDExOlB1bGxSZXF1ZXN0MTA5NDQzNjU0","number":980,"title":"Fixes #976: Resolve ambiguous constructors","user":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-03-07T10:02:15Z","updated_at":"2017-03-19T14:03:29Z","closed_at":"2017-03-19T14:03:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":6207167,"node_id":"MDEwOlJlcG9zaXRvcnk2MjA3MTY3","name":"mockito","full_name":"mockito/mockito","private":false,"owner":{"login":"mockito","id":2054056,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNTQwNTY=","avatar_url":"https://avatars.githubusercontent.com/u/2054056?v=4","gravatar_id":"","url":"https://api.github.com/users/mockito","html_url":"https://github.com/mockito","followers_url":"https://api.github.com/users/mockito/followers","following_url":"https://api.github.com/users/mockito/following{/other_user}","gists_url":"https://api.github.com/users/mockito/gists{/gist_id}","starred_url":"https://api.github.com/users/mockito/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockito/subscriptions","organizations_url":"https://api.github.com/users/mockito/orgs","repos_url":"https://api.github.com/users/mockito/repos","events_url":"https://api.github.com/users/mockito/events{/privacy}","received_events_url":"https://api.github.com/users/mockito/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockito/mockito","description":"Most popular Mocking framework for unit tests written in Java","fork":false,"url":"https://api.github.com/repos/mockito/mockito","forks_url":"https://api.github.com/repos/mockito/mockito/forks","keys_url":"https://api.github.com/repos/mockito/mockito/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockito/mockito/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockito/mockito/teams","hooks_url":"https://api.github.com/repos/mockito/mockito/hooks","issue_events_url":"https://api.github.com/repos/mockito/mockito/issues/events{/number}","events_url":"https://api.github.com/repos/mockito/mockito/events","assignees_url":"https://api.github.com/repos/mockito/mockito/assignees{/user}","branches_url":"https://api.github.com/repos/mockito/mockito/branches{/branch}","tags_url":"https://api.github.com/repos/mockito/mockito/tags","blobs_url":"https://api.github.com/repos/mockito/mockito/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockito/mockito/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockito/mockito/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockito/mockito/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockito/mockito/statuses/{sha}","languages_url":"https://api.github.com/repos/mockito/mockito/languages","stargazers_url":"https://api.github.com/repos/mockito/mockito/stargazers","contributors_url":"https://api.github.com/repos/mockito/mockito/contributors","subscribers_url":"https://api.github.com/repos/mockito/mockito/subscribers","subscription_url":"https://api.github.com/repos/mockito/mockito/subscription","commits_url":"https://api.github.com/repos/mockito/mockito/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockito/mockito/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockito/mockito/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockito/mockito/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockito/mockito/contents/{+path}","compare_url":"https://api.github.com/repos/mockito/mockito/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockito/mockito/merges","archive_url":"https://api.github.com/repos/mockito/mockito/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockito/mockito/downloads","issues_url":"https://api.github.com/repos/mockito/mockito/issues{/number}","pulls_url":"https://api.github.com/repos/mockito/mockito/pulls{/number}","milestones_url":"https://api.github.com/repos/mockito/mockito/milestones{/number}","notifications_url":"https://api.github.com/repos/mockito/mockito/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockito/mockito/labels{/name}","releases_url":"https://api.github.com/repos/mockito/mockito/releases{/id}","deployments_url":"https://api.github.com/repos/mockito/mockito/deployments","created_at":"2012-10-13T20:27:12Z","updated_at":"2025-11-09T13:17:53Z","pushed_at":"2025-10-31T15:40:36Z","git_url":"git://github.com/mockito/mockito.git","ssh_url":"git@github.com:mockito/mockito.git","clone_url":"https://github.com/mockito/mockito.git","svn_url":"https://github.com/mockito/mockito","homepage":"http://mockito.org","size":49566,"stargazers_count":15310,"watchers_count":15310,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2642,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":476,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java","java-library","mock","mock-library","mocking","mocking-framework","mockito","mocks","test-automation","test-driven-development","testing","testing-tools"],"visibility":"public","forks":2642,"open_issues":476,"watchers":15310,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/mockito/mockito/pulls/980","html_url":"https://github.com/mockito/mockito/pull/980","diff_url":"https://github.com/mockito/mockito/pull/980.diff","patch_url":"https://github.com/mockito/mockito/pull/980.patch","merged_at":"2017-03-19T14:03:28Z"},"body":"With the current code (introduced in Mockito 2.7.14 by commit 6a82c03), calling `MockSettings.useConstructor` with an argument list that would be applicable to more than one constructor would fail with an `org.mockito.internal.creation.instance.InstantiationException`.\r\n\r\nThis behavior, however, is suboptimal, as described in issue #976, as it makes `useConstructor` less robust than the Java compiler, which is able to resolve such ambiguities.\r\nWith this patch, Mockito will attempt to match the constructor with the most specific parameter types. A constructor X is considered more specific than a constructor Y if:\r\n\r\n1. They are both applicable to the given argument list\r\n2. Constructor X has at least one parameter which is a further specialization of the corresponding parameter of constructor Y (i.e. `paramX.isAssignableFrom(paramY)`).\r\n3. Constructor Y has no parameter which is a further specialization of the corresponding parameter of constructor X, as defined above.\r\n\r\nE.g., consider the following class:\r\n\r\n    public class SomeClass {\r\n        SomeClass(Object o) {}\r\n        SomeClass(String s) {}\r\n    }\r\n\r\nWithout this patch, calling\r\n\r\n    mock(SomeClass.class, withSettings().useConstructor(\"string!\"))\r\n\r\nwould fail. With this patch, such a call would invoke the `SomeClass(String)` constructor.\r\n\r\n\r\nAs noted above, this PR fixes issue #976.","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/980/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1004381302,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEwMDQzODEzMDI=","url":"https://api.github.com/repos/mockito/mockito/issues/events/1004381302","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9d93aa70f42201017ebcffdee487c0a0f6a95aa4","commit_url":"https://api.github.com/repos/mureinik/mockito/commits/9d93aa70f42201017ebcffdee487c0a0f6a95aa4","created_at":"2017-03-17T12:40:27Z","performed_via_github_app":null},{"id":1005777469,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEwMDU3Nzc0Njk=","url":"https://api.github.com/repos/mockito/mockito/issues/events/1005777469","actor":{"login":"mureinik","id":4173849,"node_id":"MDQ6VXNlcjQxNzM4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4173849?v=4","gravatar_id":"","url":"https://api.github.com/users/mureinik","html_url":"https://github.com/mureinik","followers_url":"https://api.github.com/users/mureinik/followers","following_url":"https://api.github.com/users/mureinik/following{/other_user}","gists_url":"https://api.github.com/users/mureinik/gists{/gist_id}","starred_url":"https://api.github.com/users/mureinik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mureinik/subscriptions","organizations_url":"https://api.github.com/users/mureinik/orgs","repos_url":"https://api.github.com/users/mureinik/repos","events_url":"https://api.github.com/users/mureinik/events{/privacy}","received_events_url":"https://api.github.com/users/mureinik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3382a38755e199c75da37f3520dd4478bb59f53a","commit_url":"https://api.github.com/repos/mureinik/mockito/commits/3382a38755e199c75da37f3520dd4478bb59f53a","created_at":"2017-03-19T08:13:28Z","performed_via_github_app":null},{"id":1005858584,"node_id":"MDExOkNsb3NlZEV2ZW50MTAwNTg1ODU4NA==","url":"https://api.github.com/repos/mockito/mockito/issues/events/1005858584","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"9888504f277d525b3c3c262e234a74a5a8fc637f","commit_url":"https://api.github.com/repos/mockito/mockito/commits/9888504f277d525b3c3c262e234a74a5a8fc637f","created_at":"2017-03-19T14:03:31Z","state_reason":null,"performed_via_github_app":null}]