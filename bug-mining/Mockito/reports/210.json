{"url":"https://api.github.com/repos/mockito/mockito/issues/1712","repository_url":"https://api.github.com/repos/mockito/mockito","labels_url":"https://api.github.com/repos/mockito/mockito/issues/1712/labels{/name}","comments_url":"https://api.github.com/repos/mockito/mockito/issues/1712/comments","events_url":"https://api.github.com/repos/mockito/mockito/issues/1712/events","html_url":"https://github.com/mockito/mockito/issues/1712","id":445662265,"node_id":"MDU6SXNzdWU0NDU2NjIyNjU=","number":1712,"title":"\"description\" not printing when verify args don't match","user":{"login":"tir38","id":1980553,"node_id":"MDQ6VXNlcjE5ODA1NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1980553?v=4","gravatar_id":"","url":"https://api.github.com/users/tir38","html_url":"https://github.com/tir38","followers_url":"https://api.github.com/users/tir38/followers","following_url":"https://api.github.com/users/tir38/following{/other_user}","gists_url":"https://api.github.com/users/tir38/gists{/gist_id}","starred_url":"https://api.github.com/users/tir38/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tir38/subscriptions","organizations_url":"https://api.github.com/users/tir38/orgs","repos_url":"https://api.github.com/users/tir38/repos","events_url":"https://api.github.com/users/tir38/events{/privacy}","received_events_url":"https://api.github.com/users/tir38/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-05-18T00:57:54Z","updated_at":"2020-06-20T16:54:38Z","closed_at":"2020-06-20T16:54:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Mockito version 2.27.0\r\n\r\nI have a test that uses `description` inside a `verify` method. The `description` is correctly printing when the test fails because we don't interact with the mock\r\n\r\n```\r\nimport static org.mockito.Mockito.description;\r\nimport static org.mockito.Mockito.spy;\r\nimport static org.mockito.Mockito.verify;\r\n\r\nimport org.junit.Test;\r\n\r\npublic class ExampleTest {\r\n    @Test\r\n    public void shouldFailWithDescription() {\r\n        Dependency dependency = spy(Dependency.class);\r\n        SystemUnderTest systemUnderTest = new SystemUnderTest();\r\n        systemUnderTest.doSomething(dependency);\r\n        verify(dependency, description(\"Failed to call doSomethingElse\")).doSomethingElse(false);\r\n    }\r\n\r\n    static class SystemUnderTest {\r\n        void doSomething(Dependency dependency) {\r\n            // dependency.doSomethingElse(true); // <---- TEST FAILS BECAUSE WE DON'T INTERACT WITH MOCK\r\n        }\r\n    }\r\n\r\n    static class Dependency {\r\n        void doSomethingElse(boolean value) {\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResults in this failure message:\r\n\r\n```\r\norg.mockito.exceptions.base.MockitoAssertionError: Failed to call doSomethingElse <---- SEE OUR DESCRIPTION\r\n\r\nWanted but not invoked:\r\ndependency.doSomethingElse(false);\r\n-> at com.example.ExampleTest$Dependency.doSomethingElse(ExampleTest.java:28)\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\nIn this case the test failed because there were no interactions with this mock. However if we update the SUT so that it calls the method with the wrong argument:\r\n\r\n```\r\npublic class ExampleTest {\r\n    @Test\r\n    public void shouldFailWithDescription() {\r\n        Dependency dependency = spy(Dependency.class);\r\n        SystemUnderTest systemUnderTest = new SystemUnderTest();\r\n        systemUnderTest.doSomething(dependency);\r\n        verify(dependency, description(\"Failed to call doSomethingElse\")).doSomethingElse(false);\r\n    }\r\n\r\n    static class SystemUnderTest {\r\n        void doSomething(Dependency dependency) {\r\n             dependency.doSomethingElse(true);  // <---- TEST FAILS BECAUSE WE PASS WRONG ARGS\r\n        }\r\n    }\r\n\r\n    static class Dependency {\r\n        void doSomethingElse(boolean value) {\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe test still fails. But this time it **does not include the description**:\r\n\r\n```\r\nArgument(s) are different! Wanted: <----- WE SHOULD SEE DESCRIPTION\r\ndependency.doSomethingElse(false);\r\n-> at com.example.ExampleTest$Dependency.doSomethingElse(ExampleTest.java:28)\r\nActual invocation has different arguments:\r\ndependency.doSomethingElse(true);\r\n-> at com.example.ExampleTest$SystemUnderTest.doSomething(ExampleTest.java:21)\r\n\r\nComparison Failure: \r\nExpected :dependency.doSomethingElse(false);\r\nActual   :dependency.doSomethingElse(true);\r\n```","closed_by":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/1712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockito/mockito/issues/1712/timeline","performed_via_github_app":null,"state_reason":"completed"}