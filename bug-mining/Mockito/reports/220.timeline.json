[{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691571491","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691571491","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691571491,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTU3MTQ5MQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-12T23:25:50Z","updated_at":"2020-09-12T23:27:35Z","body":"This seems to work with slightly older versions of mockito-inline, e.g. 3.4.2. I'll try a bisect and see what commit may have broken it.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691571491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691572945","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691572945","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691572945,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTU3Mjk0NQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-12T23:36:00Z","updated_at":"2020-09-12T23:36:44Z","body":"I did a bisect and this seems to have started failing in 47ef05814784183cd5c1d297078e2ad7e31cce34, `Adds support for creating spies from within a mock instance's constructor, thus avoiding reflection on final fields.`\r\n\r\nThe workaround is to use mockito-inline < 3.5.0 I believe.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691572945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3760326376,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQzNzYwMzI2Mzc2","url":"https://api.github.com/repos/mockito/mockito/issues/events/3760326376","actor":{"login":"TimvdLippe","id":5948271,"node_id":"MDQ6VXNlcjU5NDgyNzE=","avatar_url":"https://avatars.githubusercontent.com/u/5948271?v=4","gravatar_id":"","url":"https://api.github.com/users/TimvdLippe","html_url":"https://github.com/TimvdLippe","followers_url":"https://api.github.com/users/TimvdLippe/followers","following_url":"https://api.github.com/users/TimvdLippe/following{/other_user}","gists_url":"https://api.github.com/users/TimvdLippe/gists{/gist_id}","starred_url":"https://api.github.com/users/TimvdLippe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TimvdLippe/subscriptions","organizations_url":"https://api.github.com/users/TimvdLippe/orgs","repos_url":"https://api.github.com/users/TimvdLippe/repos","events_url":"https://api.github.com/users/TimvdLippe/events{/privacy}","received_events_url":"https://api.github.com/users/TimvdLippe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2020-09-13T10:41:43Z","assignee":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691713534","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691713534","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691713534,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTcxMzUzNA==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-13T19:24:34Z","updated_at":"2020-09-13T19:24:34Z","body":"I just had a look and the problem is likely with Robolectric. Maybe they can have a look at the problem?\r\nMockito simply invokes the constructor chain and per class and within the constructor, it copies all values field by field. I am wondering if Robolectric does some explicit initialization where this approach now fails.\r\n\r\nI am to foreign to both Android and Robolectric to really understand why this no longer works but it likely is related to the timing of the field copy.\r\n\r\nWorst case, we need to offer a switch to create spies using reflection if required but if we can get a hint why this timing is a problem, we might be able to address this.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691713534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691724859","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691724859","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691724859,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTcyNDg1OQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-13T21:01:53Z","updated_at":"2020-09-13T21:20:04Z","body":"Thanks for the initial investigation @raphw, I am one of the Robolectric maintainers and can try investigating this. It's odd that on Java 11 this occasionally works (but it is flaky according to robolectric/robolectric#5916), but on Java 8 it seems to always fail.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691724859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3760798767,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc2MDc5ODc2Nw==","url":"https://api.github.com/repos/mockito/mockito/issues/events/3760798767","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-13T21:01:53Z","performed_via_github_app":null},{"id":3760798768,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3NjA3OTg3Njg=","url":"https://api.github.com/repos/mockito/mockito/issues/events/3760798768","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-13T21:01:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691726465","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691726465","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691726465,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTcyNjQ2NQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-13T21:14:45Z","updated_at":"2020-09-13T21:14:45Z","body":"I'd like to understand in what field value the two objects differ to produce this result. They should be identical unless some field is not discoverable.\r\n\r\nIf you could check what state difference is responsible, I can probably find out how it occurred. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691726465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691816504","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691816504","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691816504,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTgxNjUwNA==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T05:17:56Z","updated_at":"2020-09-14T05:17:56Z","body":"Out of curiosity is there some kind of helper/debug util in Mockito to dump an object to a String? In the meantime I'll try to just serialize it to a json-type format.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691816504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691837649","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691837649","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691837649,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTgzNzY0OQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T06:16:15Z","updated_at":"2020-09-14T06:16:15Z","body":"No, we can dump class files but you could likely use a serializer such as Jackson for this?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691837649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691846248","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691846248","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691846248,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTg0NjI0OA==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T06:35:03Z","updated_at":"2020-09-14T06:35:24Z","body":"Weird, out of 269 fields, the only difference is a field called 'mBase'. On the spy object it is null.\r\n\r\n```diff\r\n132c132\r\n< class android.content.ContextWrapper:mBase: android.app.ContextImpl@6d340ec8\r\n---\r\n> class android.content.ContextWrapper:mBase: null\r\n269a270\r\n>\r\n```\r\nMainActivity: https://gist.github.com/hoisie/5a7b93acc90a68917fc97de1c8364fc5\r\nSpyActivity:  https://gist.github.com/hoisie/76bbd478520f0bd7ec6f89fe74c0e163\r\n\r\nIs there a way to turn on debug logs during this field copy to see how 'mBase' is being copied?\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691846248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691849994","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-691849994","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":691849994,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTg0OTk5NA==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T06:42:20Z","updated_at":"2020-09-14T06:42:32Z","body":"This is the class that contains the 'mBase' field:\r\nhttp://androidxref.com/9.0.0_r3/xref/frameworks/base/core/java/android/content/ContextWrapper.java\r\n\r\nFWIW, it's a long class hierarchy, `MainActivity > AppCompatActivity > FragmentActivity > ComponentActivity > Activity > ContextThemeWrapper > ContextWrapper > Context`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/691849994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692134631","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692134631","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692134631,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjEzNDYzMQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T15:30:23Z","updated_at":"2020-09-14T15:31:27Z","body":"I just noticed [ContextThemeWrapper](http://androidxref.com/9.0.0_r3/xref/frameworks/base/core/java/android/view/ContextThemeWrapper.java), which is the parent of ContextWrapper, calls the ContextWrapper(null) constructor, which could be setting mBase to null in ContextWrapper:\r\n```\r\n    public ContextThemeWrapper() {\r\n        super(null);\r\n    }\r\n```\r\n\r\n\r\n```\r\n    public ContextWrapper(Context base) {\r\n        mBase = base;\r\n    }\r\n```\r\n\r\n\r\nCould this be causing `mBase` to be set to null?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692134631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692173893","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692173893","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692173893,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjE3Mzg5Mw==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T16:37:40Z","updated_at":"2020-09-14T16:37:40Z","body":"How does one dump the class bytecode of the transient spy class created? I am curious what that looks like.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692173893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692190431","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692190431","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692190431,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjE5MDQzMQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T17:07:53Z","updated_at":"2020-09-14T17:07:53Z","body":"-Dnet.bytebuddy.dump=/some/folder","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692190431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692209413","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692209413","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692209413,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjIwOTQxMw==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T17:43:53Z","updated_at":"2020-09-14T17:43:53Z","body":"> Mockito simply invokes the constructor chain and per class and within the constructor, it copies all values field by field.\r\n\r\nFor some reason, when I do `spy(object)`, I am not seeing the constructors being invoked. What constructors does mockito invoke? Are there some new/hidden constructors being generated?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692209413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692214679","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692214679","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692214679,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjIxNDY3OQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T17:53:28Z","updated_at":"2020-09-14T18:56:26Z","body":"No, the constructors are prefixed and then the original chain is shortcut. Basically:\r\n\r\n```java\r\npublic MyClass { MyClass() {\r\n  // some code\r\n} }\r\n```\r\n\r\nIs turned into:\r\n\r\n```java\r\npublic MyClass { MyClass() {\r\n  if (Mockito.isMockConstruction()) {\r\n    // Mockito stuff, basically copy all fields of the spied at object\r\n    return;\r\n  }\r\n  // some code\r\n} }\r\n```\r\n\r\nAs a consequence, you cannot set a constructor breakpoint. I had a look at the field state and for both *activity* and *mockActivity*, `ContextWrapper.mBase` is set to the same instance but only *activity* returns the field's value.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692214679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692343467","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692343467","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692343467,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjM0MzQ2Nw==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T22:18:34Z","updated_at":"2020-09-15T05:49:20Z","body":"Out of curiosity how do you inject print statements to the field copy ByteBuddy logic? I wanted to add some print statements to verify that the 'mBase' before/after values are the same.\r\n\r\n> I had a look at the field state and for both activity and mockActivity, ContextWrapper.mBase is set to the same instance but only activity returns the field's value.\r\n\r\nHow can you tell that? From what I see, it seems like 'mBase' is null for the spy activity:\r\n\r\n![image](https://user-images.githubusercontent.com/125547/93143770-6f8c8580-f69d-11ea-9a48-29c7ac4fbc33.png)\r\n\r\nDo you think it's initially non-null and then gets set to null?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692343467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692529496","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692529496","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692529496,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjUyOTQ5Ng==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T07:40:05Z","updated_at":"2020-09-15T07:40:05Z","body":"You are right, I did not debug properly (IntelliJ refuses to run the sample project for me, I am back on the command line).\r\n\r\nWhen I inspect the transformed `ContextWrapper` constructor, I do however see that the field is copied within it:\r\n\r\n```\r\n        69: getfield      #40                 // Field mBase:Landroid/content/Context;\r\n        72: aload_0\r\n        73: dup_x1\r\n        74: pop\r\n        75: putfield      #40                 // Field mBase:Landroid/content/Context;\r\n```\r\n\r\nWhen is the `mBase` field populated? Is this something done after object construction?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692529496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692553663","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692553663","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692553663,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU1MzY2Mw==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T08:24:38Z","updated_at":"2020-09-15T08:24:38Z","body":"I created a special debug build (*println-constructor*, you can run it by using your local Maven repo and the *publishToMavenLocal* task of Mockito) which shows what is happening by printing all field assignments. It follows the pattern\r\n\r\n```\r\n<class name> // for each in hierarchy\r\n<mock object>\r\n<field name> // for each field\r\n<spied field value>\r\n<mock field value after setting>\r\n```\r\n\r\nThis verifies that the field is actually set. It's very strange that the field is null again once it is used. Since this problem occurs only with Robolectric, there must be some mechanism where the value disappears.\r\n\r\nI also added a statement for the spy when it is constructed in its entirety and the field seems to be set correctly:\r\n\r\n```\r\n    DEBUG ROBOLECTICS: android.app.ContextImpl@51ad277e - original android.app.ContextImpl@51ad277e\r\n```\r\n\r\n```\r\n    class android.content.Context\r\n    com.example.myapplication.MainActivity@6219c42b\r\n    public java.lang.Object android.content.Context.__robo_data__\r\n    null\r\n    null\r\n    class android.content.ContextWrapper\r\n    com.example.myapplication.MainActivity@6219c42b\r\n    public java.lang.Object android.content.ContextWrapper.__robo_data__\r\n    null\r\n    null\r\n    android.content.Context android.content.ContextWrapper.mBase\r\n    android.app.ContextImpl@51ad277e\r\n    android.app.ContextImpl@51ad277e\r\n    ....\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692553663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692556119","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692556119","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692556119,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU1NjExOQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T08:28:49Z","updated_at":"2020-09-15T08:29:05Z","body":"It's very strange, I optimized the example for output now and the fields seem to be set now that I changed the code:\r\n\r\n```java\r\n        Field field = Class.forName(\"android.content.ContextWrapper\").getDeclaredField(\"mBase\");\r\n        field.setAccessible(true);\r\n\r\n        MainActivity activity = Robolectric.buildActivity(MainActivity.class).setup().get();\r\n        Object fieldBefore = field.get(activity);\r\n        Object methodBefore = activity.getBaseContext();\r\n\r\n        MainActivity spyActivity = Mockito.spy(activity);\r\n\r\n        throw new AssertionError(\"activity field: \" + field.get(activity)\r\n                        + \" - mock activity field: \" + field.get(spyActivity)\r\n                        + \" - activity getter: \" + activity.getBaseContext()\r\n                        + \" - mock activity getter: \" + spyActivity.getBaseContext()\r\n                        + \" - activity field before: \" + fieldBefore\r\n                        + \" - activity getter before: \" + methodBefore\r\n                        + \" - original: \" + activity\r\n                        + \" - mock: \" + spyActivity);\r\n```\r\n\r\nMy gutt fealing is that that's some sort of initialization issue for the original object that is triggered later then Mockito expects it.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692556119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692562578","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692562578","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692562578,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU2MjU3OA==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T08:39:50Z","updated_at":"2020-09-15T08:39:50Z","body":"Maybe I turned blind but simply running:\r\n\r\n```java\r\nMainActivity activity = Robolectric.buildActivity(MainActivity.class).setup().get();\r\nMainActivity spyActivity = Mockito.spy(activity);\r\nthrow new AssertionError(activity.getBaseContext() + \" - \" + spyActivity.getBaseContext());\r\n```\r\n\r\nof the current *release/3.x* branch yields both fields being set correctly. Maybe this is something we already fixed in Mockito by accident?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692562578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692568504","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692568504","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692568504,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU2ODUwNA==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T08:49:39Z","updated_at":"2020-09-15T08:53:15Z","body":"Okay, I verified that Mockito creates the spy correctly in any case. But something happens to the object if passed through Robolectics's runner logic.\r\n\r\nThis test will function correctly:\r\n\r\n```\r\n@Test\r\npublic void test1() {\r\n  MainActivity activity = Robolectric.buildActivity(MainActivity.class).setup().get();\r\n  MainActivity mockActivity = spy(activity);\r\n  assertEquals(\"compare base context between activity and mockActivity\",\r\n     activity.getBaseContext(),\r\n     mockActivity.getBaseContext());\r\n    }\r\n```\r\n\r\nWhile this test will yield yield an empty spy:\r\n\r\n```java\r\nprivate MainActivity activity;\r\nprivate MainActivity mockActivity;\r\n\r\n@Before\r\npublic void setup() {\r\n   activity = Robolectric.buildActivity(MainActivity.class).setup().get();\r\n   mockActivity = spy(activity);\r\n}\r\n\r\n@Test\r\npublic void test1() {\r\n assertEquals(\"compare base context between activity and mockActivity\",\r\n   activity.getBaseContext(),    \r\n   mockActivity.getBaseContext());\r\n}\r\n```\r\n\r\nHow can that be?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692568504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692596904","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692596904","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692596904,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU5NjkwNA==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T09:35:52Z","updated_at":"2020-09-15T09:35:52Z","body":"Comparing the output of the println branch: if the mock is created in the `@Before` method, the `ContextWrapper` constructor is never invoked what seems dubious. Something must be done differently here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692596904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692836119","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692836119","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692836119,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjgzNjExOQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T16:42:07Z","updated_at":"2020-09-15T16:42:20Z","body":"I added a simpler test case to the Robolectric tree (currently `@Ignored`).\r\n\r\nhttps://github.com/robolectric/robolectric/blob/master/integration_tests/mockito-experimental/src/test/java/org/robolectric/integrationtests/mockito/experimental/MockitoSpyTest.java\r\n\r\nIt is very strange, I've also seen situations where the test starts passing randomly, and I usually have to do a `clean` to get it to start failing again. It seems to fail more consistently when running through Gradle vs. running through intellij. This sometimes indicates a classpath issue.\r\n\r\nThanks for all your investigation and putting up that println branch, I'll try some print debugging as well.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692836119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3769332209,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc2OTMzMjIwOQ==","url":"https://api.github.com/repos/mockito/mockito/issues/events/3769332209","actor":{"login":"ignored","id":10168916,"node_id":"MDQ6VXNlcjEwMTY4OTE2","avatar_url":"https://avatars.githubusercontent.com/u/10168916?v=4","gravatar_id":"","url":"https://api.github.com/users/ignored","html_url":"https://github.com/ignored","followers_url":"https://api.github.com/users/ignored/followers","following_url":"https://api.github.com/users/ignored/following{/other_user}","gists_url":"https://api.github.com/users/ignored/gists{/gist_id}","starred_url":"https://api.github.com/users/ignored/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ignored/subscriptions","organizations_url":"https://api.github.com/users/ignored/orgs","repos_url":"https://api.github.com/users/ignored/repos","events_url":"https://api.github.com/users/ignored/events{/privacy}","received_events_url":"https://api.github.com/users/ignored/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-15T16:42:07Z","performed_via_github_app":null},{"id":3769332214,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3NjkzMzIyMTQ=","url":"https://api.github.com/repos/mockito/mockito/issues/events/3769332214","actor":{"login":"ignored","id":10168916,"node_id":"MDQ6VXNlcjEwMTY4OTE2","avatar_url":"https://avatars.githubusercontent.com/u/10168916?v=4","gravatar_id":"","url":"https://api.github.com/users/ignored","html_url":"https://github.com/ignored","followers_url":"https://api.github.com/users/ignored/followers","following_url":"https://api.github.com/users/ignored/following{/other_user}","gists_url":"https://api.github.com/users/ignored/gists{/gist_id}","starred_url":"https://api.github.com/users/ignored/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ignored/subscriptions","organizations_url":"https://api.github.com/users/ignored/orgs","repos_url":"https://api.github.com/users/ignored/repos","events_url":"https://api.github.com/users/ignored/events{/privacy}","received_events_url":"https://api.github.com/users/ignored/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-15T16:42:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692917921","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692917921","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692917921,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjkxNzkyMQ==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T19:05:42Z","updated_at":"2020-09-15T19:05:42Z","body":"After adding some additional debug statements, it seems like the mockito instrumentation for `ContextWrapper` constructor is skipped So `ContextThemeWrapper` tries to call the  `ContextWrapper` constructor, but it calls a non-instrumented one. \r\nMaybe the default empty constructor is private?\r\n\r\n```\r\nStart of constructor for 'class android.app.Activity'\r\nInvoking super constructor 'class android.app.Activity' -> 'android/view/ContextThemeWrapper'\r\nStart of constructor for 'class android.view.ContextThemeWrapper'\r\nInvoking super constructor 'class android.view.ContextThemeWrapper' -> 'android/content/ContextWrapper'\r\nStart of constructor for 'class android.content.Context'\r\nInvoking super constructor 'class android.content.Context' -> 'java/lang/Object'\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692917921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692924578","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692924578","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692924578,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjkyNDU3OA==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T19:18:33Z","updated_at":"2020-09-15T19:18:33Z","body":"From looking at the bytecode, I see that ContextThemeWrapper calls ContextWrapper():\r\n\r\n```\r\n  public android.view.ContextThemeWrapper();\r\n      ...\r\n      31: invokespecial #317                // Method android/content/ContextWrapper.\"<init>\":()V\r\n```\r\n\r\nHowever, in ContextWrapper, the no-arg constructor is not insrumented:\r\n\r\n```\r\n  public android.content.ContextWrapper();\r\n    Code:\r\n       0: aload_0\r\n       1: invokespecial #816                // Method android/content/Context.\"<init>\":()V\r\n       4: aload_0\r\n       5: invokevirtual #819                // Method $$robo$init:()V\r\n       8: return\r\n```\r\n\r\nThe one-arg ContextWrapper constructor is instrumented. though:\r\n```\r\n  public android.content.ContextWrapper(android.content.Context);\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692924578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692928008","html_url":"https://github.com/mockito/mockito/issues/2040#issuecomment-692928008","issue_url":"https://api.github.com/repos/mockito/mockito/issues/2040","id":692928008,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjkyODAwOA==","user":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T19:25:39Z","updated_at":"2020-09-15T20:41:14Z","body":"This seems to be a simpler repro of the issue (non-Robolectric):\r\n\r\n** EDIT **\r\n\r\nNVM, still looking into a non-Robolectric repro:\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/692928008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoisie","id":125547,"node_id":"MDQ6VXNlcjEyNTU0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/125547?v=4","gravatar_id":"","url":"https://api.github.com/users/hoisie","html_url":"https://github.com/hoisie","followers_url":"https://api.github.com/users/hoisie/followers","following_url":"https://api.github.com/users/hoisie/following{/other_user}","gists_url":"https://api.github.com/users/hoisie/gists{/gist_id}","starred_url":"https://api.github.com/users/hoisie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoisie/subscriptions","organizations_url":"https://api.github.com/users/hoisie/orgs","repos_url":"https://api.github.com/users/hoisie/repos","events_url":"https://api.github.com/users/hoisie/events{/privacy}","received_events_url":"https://api.github.com/users/hoisie/received_events","type":"User","user_view_type":"public","site_admin":false}}]