[{"id":862832825,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODYyODMyODI1","url":"https://api.github.com/repos/mockito/mockito/issues/events/862832825","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-11-17T14:02:48Z","performed_via_github_app":null},{"id":862832826,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg2MjgzMjgyNg==","url":"https://api.github.com/repos/mockito/mockito/issues/events/862832826","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-11-17T14:02:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261269126","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261269126","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261269126,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTEyNg==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T15:00:20Z","updated_at":"2016-11-17T15:00:20Z","body":"Oh no, I even added a specific test case for retaining the parameters. This is very strange as the test case works. I will have a look!\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261269126/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261279513","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261279513","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261279513,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3OTUxMw==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T15:36:20Z","updated_at":"2016-11-17T15:36:20Z","body":"So, the interesting thing is that the problem looks like this right now:\n\n``` java\nclass Foo {\n  public Foo(String x) { }\n  void qux(String x) { }\n}\n\nSystem.out.println(Foo.class.getDeclaredConstructor(String.class).getParameters()[0].getName());\nSystem.out.println(Foo.class.getDeclaredMethod(\"qux\", String.class).getParameters()[0].getName());\n\nFoo foo = mock(Foo.class);\n\nSystem.out.println(Foo.class.getDeclaredConstructor(String.class).getParameters()[0].getName());\nSystem.out.println(Foo.class.getDeclaredMethod(\"qux\", String.class).getParameters()[0].getName());\n```\n\nThis will only retain parameters for the constructor. It looks like the sometimes-buggy instrumentation API sometimes does retain parameter names and writing them twice is then causing the parameter name to be suppressed.\n\nI need to solve this properly. I will probably add some convenience to Byte Buddy and solve it there. Give me a few days, thanks for the report!\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261279513/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261314356","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261314356","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261314356,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTMxNDM1Ng==","user":{"login":"Stephan202","id":513280,"node_id":"MDQ6VXNlcjUxMzI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/513280?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan202","html_url":"https://github.com/Stephan202","followers_url":"https://api.github.com/users/Stephan202/followers","following_url":"https://api.github.com/users/Stephan202/following{/other_user}","gists_url":"https://api.github.com/users/Stephan202/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan202/subscriptions","organizations_url":"https://api.github.com/users/Stephan202/orgs","repos_url":"https://api.github.com/users/Stephan202/repos","events_url":"https://api.github.com/users/Stephan202/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan202/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T17:36:54Z","updated_at":"2016-11-17T17:36:54Z","body":"Cool, no worries! Version 2.2.16 works just fine for us, so there's no hurry.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261314356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stephan202","id":513280,"node_id":"MDQ6VXNlcjUxMzI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/513280?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan202","html_url":"https://github.com/Stephan202","followers_url":"https://api.github.com/users/Stephan202/followers","following_url":"https://api.github.com/users/Stephan202/following{/other_user}","gists_url":"https://api.github.com/users/Stephan202/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan202/subscriptions","organizations_url":"https://api.github.com/users/Stephan202/orgs","repos_url":"https://api.github.com/users/Stephan202/repos","events_url":"https://api.github.com/users/Stephan202/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan202/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":864038932,"node_id":"MDExOkNsb3NlZEV2ZW50ODY0MDM4OTMy","url":"https://api.github.com/repos/mockito/mockito/issues/events/864038932","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"76ac001f56e5e718fb668ed8a4f1a5a00d2dae9c","commit_url":"https://api.github.com/repos/mockito/mockito/commits/76ac001f56e5e718fb668ed8a4f1a5a00d2dae9c","created_at":"2016-11-18T08:47:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261678018","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261678018","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261678018,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTY3ODAxOA==","user":{"login":"Godin","id":138671,"node_id":"MDQ6VXNlcjEzODY3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/138671?v=4","gravatar_id":"","url":"https://api.github.com/users/Godin","html_url":"https://github.com/Godin","followers_url":"https://api.github.com/users/Godin/followers","following_url":"https://api.github.com/users/Godin/following{/other_user}","gists_url":"https://api.github.com/users/Godin/gists{/gist_id}","starred_url":"https://api.github.com/users/Godin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Godin/subscriptions","organizations_url":"https://api.github.com/users/Godin/orgs","repos_url":"https://api.github.com/users/Godin/repos","events_url":"https://api.github.com/users/Godin/events{/privacy}","received_events_url":"https://api.github.com/users/Godin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-19T00:38:13Z","updated_at":"2016-11-19T00:38:13Z","body":"@raphw out of curiosity - do I understand correctly from this thread that \nhttp://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8168623 is not always happening?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261678018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Godin","id":138671,"node_id":"MDQ6VXNlcjEzODY3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/138671?v=4","gravatar_id":"","url":"https://api.github.com/users/Godin","html_url":"https://github.com/Godin","followers_url":"https://api.github.com/users/Godin/followers","following_url":"https://api.github.com/users/Godin/following{/other_user}","gists_url":"https://api.github.com/users/Godin/gists{/gist_id}","starred_url":"https://api.github.com/users/Godin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Godin/subscriptions","organizations_url":"https://api.github.com/users/Godin/orgs","repos_url":"https://api.github.com/users/Godin/repos","events_url":"https://api.github.com/users/Godin/events{/privacy}","received_events_url":"https://api.github.com/users/Godin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":865166500,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODY1MTY2NTAw","url":"https://api.github.com/repos/mockito/mockito/issues/events/865166500","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-11-19T00:38:13Z","performed_via_github_app":null},{"id":865166501,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg2NTE2NjUwMQ==","url":"https://api.github.com/repos/mockito/mockito/issues/events/865166501","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-11-19T00:38:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261781103","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261781103","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261781103,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc4MTEwMw==","user":{"login":"Stephan202","id":513280,"node_id":"MDQ6VXNlcjUxMzI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/513280?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan202","html_url":"https://github.com/Stephan202","followers_url":"https://api.github.com/users/Stephan202/followers","following_url":"https://api.github.com/users/Stephan202/following{/other_user}","gists_url":"https://api.github.com/users/Stephan202/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan202/subscriptions","organizations_url":"https://api.github.com/users/Stephan202/orgs","repos_url":"https://api.github.com/users/Stephan202/repos","events_url":"https://api.github.com/users/Stephan202/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan202/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T14:20:54Z","updated_at":"2016-11-20T14:20:54Z","body":"Just upgraded to Mockito 2.2.21 and can confirm the fix works for us. Thanks @raphw!\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261781103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stephan202","id":513280,"node_id":"MDQ6VXNlcjUxMzI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/513280?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan202","html_url":"https://github.com/Stephan202","followers_url":"https://api.github.com/users/Stephan202/followers","following_url":"https://api.github.com/users/Stephan202/following{/other_user}","gists_url":"https://api.github.com/users/Stephan202/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan202/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan202/subscriptions","organizations_url":"https://api.github.com/users/Stephan202/orgs","repos_url":"https://api.github.com/users/Stephan202/repos","events_url":"https://api.github.com/users/Stephan202/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan202/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":865619652,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODY1NjE5NjUy","url":"https://api.github.com/repos/mockito/mockito/issues/events/865619652","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-11-20T14:20:54Z","performed_via_github_app":null},{"id":865619653,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg2NTYxOTY1Mw==","url":"https://api.github.com/repos/mockito/mockito/issues/events/865619653","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-11-20T14:20:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261781911","html_url":"https://github.com/mockito/mockito/issues/764#issuecomment-261781911","issue_url":"https://api.github.com/repos/mockito/mockito/issues/764","id":261781911,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc4MTkxMQ==","user":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T14:36:16Z","updated_at":"2016-11-20T14:36:16Z","body":"Great, I figured out why it worked sometimes. Byte Buddy automatically fixed the parameters for non-intercepted metgods, i.e.constructor as it read them from the loaded original class. Outsmarted myself there.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/mockito/mockito/issues/comments/261781911/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"raphw","id":4489328,"node_id":"MDQ6VXNlcjQ0ODkzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4489328?v=4","gravatar_id":"","url":"https://api.github.com/users/raphw","html_url":"https://github.com/raphw","followers_url":"https://api.github.com/users/raphw/followers","following_url":"https://api.github.com/users/raphw/following{/other_user}","gists_url":"https://api.github.com/users/raphw/gists{/gist_id}","starred_url":"https://api.github.com/users/raphw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raphw/subscriptions","organizations_url":"https://api.github.com/users/raphw/orgs","repos_url":"https://api.github.com/users/raphw/repos","events_url":"https://api.github.com/users/raphw/events{/privacy}","received_events_url":"https://api.github.com/users/raphw/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"TarodBOFH","id":17745030,"node_id":"MDQ6VXNlcjE3NzQ1MDMw","avatar_url":"https://avatars.githubusercontent.com/u/17745030?v=4","gravatar_id":"","url":"https://api.github.com/users/TarodBOFH","html_url":"https://github.com/TarodBOFH","followers_url":"https://api.github.com/users/TarodBOFH/followers","following_url":"https://api.github.com/users/TarodBOFH/following{/other_user}","gists_url":"https://api.github.com/users/TarodBOFH/gists{/gist_id}","starred_url":"https://api.github.com/users/TarodBOFH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TarodBOFH/subscriptions","organizations_url":"https://api.github.com/users/TarodBOFH/orgs","repos_url":"https://api.github.com/users/TarodBOFH/repos","events_url":"https://api.github.com/users/TarodBOFH/events{/privacy}","received_events_url":"https://api.github.com/users/TarodBOFH/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-31T08:34:31Z","updated_at":"2018-08-31T08:34:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mockk/mockk/issues/129","repository_url":"https://api.github.com/repos/mockk/mockk","labels_url":"https://api.github.com/repos/mockk/mockk/issues/129/labels{/name}","comments_url":"https://api.github.com/repos/mockk/mockk/issues/129/comments","events_url":"https://api.github.com/repos/mockk/mockk/issues/129/events","html_url":"https://github.com/mockk/mockk/issues/129","id":353707086,"node_id":"MDU6SXNzdWUzNTM3MDcwODY=","number":129,"title":"After invoking mockk; the mocked ::class.java constructor is overriden in the JVM","user":{"login":"TarodBOFH","id":17745030,"node_id":"MDQ6VXNlcjE3NzQ1MDMw","avatar_url":"https://avatars.githubusercontent.com/u/17745030?v=4","gravatar_id":"","url":"https://api.github.com/users/TarodBOFH","html_url":"https://github.com/TarodBOFH","followers_url":"https://api.github.com/users/TarodBOFH/followers","following_url":"https://api.github.com/users/TarodBOFH/following{/other_user}","gists_url":"https://api.github.com/users/TarodBOFH/gists{/gist_id}","starred_url":"https://api.github.com/users/TarodBOFH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TarodBOFH/subscriptions","organizations_url":"https://api.github.com/users/TarodBOFH/orgs","repos_url":"https://api.github.com/users/TarodBOFH/repos","events_url":"https://api.github.com/users/TarodBOFH/events{/privacy}","received_events_url":"https://api.github.com/users/TarodBOFH/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":723011116,"node_id":"MDU6TGFiZWw3MjMwMTExMTY=","url":"https://api.github.com/repos/mockk/mockk/labels/bug","name":"bug","color":"ee0701","default":true,"description":null},{"id":980116530,"node_id":"MDU6TGFiZWw5ODAxMTY1MzA=","url":"https://api.github.com/repos/mockk/mockk/labels/fixed","name":"fixed","color":"0e8a16","default":false,"description":"fixed in master"},{"id":1014285342,"node_id":"MDU6TGFiZWwxMDE0Mjg1MzQy","url":"https://api.github.com/repos/mockk/mockk/labels/released","name":"released","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-08-24T09:17:39Z","updated_at":"2018-09-06T15:14:33Z","closed_at":"2018-09-03T10:54:59Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":107331132,"node_id":"MDEwOlJlcG9zaXRvcnkxMDczMzExMzI=","name":"mockk","full_name":"mockk/mockk","private":false,"owner":{"login":"mockk","id":34787540,"node_id":"MDEyOk9yZ2FuaXphdGlvbjM0Nzg3NTQw","avatar_url":"https://avatars.githubusercontent.com/u/34787540?v=4","gravatar_id":"","url":"https://api.github.com/users/mockk","html_url":"https://github.com/mockk","followers_url":"https://api.github.com/users/mockk/followers","following_url":"https://api.github.com/users/mockk/following{/other_user}","gists_url":"https://api.github.com/users/mockk/gists{/gist_id}","starred_url":"https://api.github.com/users/mockk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockk/subscriptions","organizations_url":"https://api.github.com/users/mockk/orgs","repos_url":"https://api.github.com/users/mockk/repos","events_url":"https://api.github.com/users/mockk/events{/privacy}","received_events_url":"https://api.github.com/users/mockk/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mockk/mockk","description":"mocking library for Kotlin","fork":false,"url":"https://api.github.com/repos/mockk/mockk","forks_url":"https://api.github.com/repos/mockk/mockk/forks","keys_url":"https://api.github.com/repos/mockk/mockk/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mockk/mockk/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mockk/mockk/teams","hooks_url":"https://api.github.com/repos/mockk/mockk/hooks","issue_events_url":"https://api.github.com/repos/mockk/mockk/issues/events{/number}","events_url":"https://api.github.com/repos/mockk/mockk/events","assignees_url":"https://api.github.com/repos/mockk/mockk/assignees{/user}","branches_url":"https://api.github.com/repos/mockk/mockk/branches{/branch}","tags_url":"https://api.github.com/repos/mockk/mockk/tags","blobs_url":"https://api.github.com/repos/mockk/mockk/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mockk/mockk/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mockk/mockk/git/refs{/sha}","trees_url":"https://api.github.com/repos/mockk/mockk/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mockk/mockk/statuses/{sha}","languages_url":"https://api.github.com/repos/mockk/mockk/languages","stargazers_url":"https://api.github.com/repos/mockk/mockk/stargazers","contributors_url":"https://api.github.com/repos/mockk/mockk/contributors","subscribers_url":"https://api.github.com/repos/mockk/mockk/subscribers","subscription_url":"https://api.github.com/repos/mockk/mockk/subscription","commits_url":"https://api.github.com/repos/mockk/mockk/commits{/sha}","git_commits_url":"https://api.github.com/repos/mockk/mockk/git/commits{/sha}","comments_url":"https://api.github.com/repos/mockk/mockk/comments{/number}","issue_comment_url":"https://api.github.com/repos/mockk/mockk/issues/comments{/number}","contents_url":"https://api.github.com/repos/mockk/mockk/contents/{+path}","compare_url":"https://api.github.com/repos/mockk/mockk/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mockk/mockk/merges","archive_url":"https://api.github.com/repos/mockk/mockk/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mockk/mockk/downloads","issues_url":"https://api.github.com/repos/mockk/mockk/issues{/number}","pulls_url":"https://api.github.com/repos/mockk/mockk/pulls{/number}","milestones_url":"https://api.github.com/repos/mockk/mockk/milestones{/number}","notifications_url":"https://api.github.com/repos/mockk/mockk/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mockk/mockk/labels{/name}","releases_url":"https://api.github.com/repos/mockk/mockk/releases{/id}","deployments_url":"https://api.github.com/repos/mockk/mockk/deployments","created_at":"2017-10-17T22:31:23Z","updated_at":"2025-11-08T10:21:26Z","pushed_at":"2025-11-08T09:19:14Z","git_url":"git://github.com/mockk/mockk.git","ssh_url":"git@github.com:mockk/mockk.git","clone_url":"https://github.com/mockk/mockk.git","svn_url":"https://github.com/mockk/mockk","homepage":"https://mockk.io","size":14618,"stargazers_count":5669,"watchers_count":5669,"language":"Kotlin","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":387,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":301,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["argument-matchers","chain-calls","hacktoberfest","kotlin","matcher","mock","mocking-framework","tdd","testing","verification"],"visibility":"public","forks":387,"open_issues":301,"watchers":5669,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"- [X] I am running the latest version (1.8.6)\r\n- [X] I checked the documentation and found no answer\r\n- [X] I checked to make sure that this issue has not already been filed (but looks similar to https://github.com/mockk/mockk/issues/126 )\r\n\r\n### Expected Behavior\r\n\r\nAfter invoking mockk() to mock an object (not a class!); the constructor parameters of the mocked class (not the object) are the same than before calling mockk();\r\n\r\n### Current Behavior\r\n\r\nAfter invoking mockk() the JVM constructor is replaced and the parameters, even if they keep order and type, do not keep the names (they change to arg0, arg1, arg2... etc.)\r\n\r\n### Failure Information (for bugs)\r\n\r\nSee the attached gist.\r\n\r\nThis might be caused by some external tool using older class version or different target implementations when generating code (see https://stackoverflow.com/questions/21455403/how-to-get-method-parameter-names-in-java-8-using-reflection/21455958#21455958 for reference). The parameter names are part of JDK 8 and JVM dependent. I don't know why mocking a specific object requires to alter the constructor of the class and if this should be the expected behavior\r\n\r\n#### Steps to Reproduce\r\n\r\nGist attached:\r\nhttps://gist.github.com/TarodBOFH/fd3c61fdac611fad9678f1d981419cf7 (test)\r\nhttps://gist.github.com/TarodBOFH/5bbb1d1907f2a0e4c7ce58e0fa3560de (.gradle)\r\n \r\nDue to the imposibility of JUnit 5 (yet) to specify the test order two tests have been provided. Run them separately; once a call has been made to mockk() the tests fill fail.\r\n\r\n#### Context\r\n\r\nI was writing a test for a module and suddenly other test suites started to fail. Digging deeper it turned that jooq was not able to retrieve the parameter names of a constructor after any instance of that class had been mocked using mockk(). I dug in the code and I was able to isolate the problem to the constructor being changed after mocking.\r\n\r\n* MockK version: 1.8.6\r\n* OS: Windows 10; MacOS 10.13.6; docker alpine 3.7\r\n* Kotlin version: 1.2,59\r\n* JDK version: 8\r\n* Type of test: Unit Test\r\n* Gradle Version: 4.8.1\r\n\r\n#### Minimal reproducible code (the gist of this issue)\r\n\r\n```kotlin\r\n// -----------------------[ GRADLE DEFINITIONS ] -----------------------\r\nrepositories {\r\n    jcenter()\r\n    mavenCentral()\r\n}\r\n\r\nbuildscript {\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n\r\n     dependencies {\r\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.51\"\r\n    }\r\n}\r\n\r\ngroup 'org.tarodbofh.medium'\r\nversion '1.0-SNAPSHOT'\r\n\r\napply plugin: 'kotlin'\r\n\r\ndependencies {\r\n    testCompile \"io.mockk:mockk:1.8.5\"\r\n    testCompile \"org.junit.jupiter:junit-jupiter-api:5.2.0\"\r\n    testRuntime \"org.junit.jupiter:junit-jupiter-engine:5.2.0\"\r\n}\r\n\r\ncompileKotlin {\r\n    kotlinOptions.jvmTarget = \"1.8\"\r\n}\r\ncompileTestKotlin {\r\n    kotlinOptions.jvmTarget = \"1.8\"\r\n}\r\n\r\ntest {\r\n    testLogging {\r\n        exceptionFormat = 'full'\r\n    }\r\n\r\n    useJUnitPlatform {\r\n    }\r\n\r\n    systemProperties = [\r\n            'org.junit.platform.console.options.Details': 'tree',\r\n            'spring.profiles.active': 'local-test'\r\n    ]\r\n}\r\n\r\n[compileKotlin, compileTestKotlin]*.kotlinOptions*.javaParameters   = true\r\n\r\n// -----------------------[ YOUR CODE STARTS HERE ] -----------------------\r\npackage org.tarodbofh.medium.mockk\r\n\r\nimport io.mockk.clearMocks\r\nimport io.mockk.mockk\r\nimport io.mockk.unmockkAll\r\nimport org.junit.jupiter.api.Test\r\n\r\ninternal class MockkMessingNativeJVM {\r\n    @Test\r\n    fun testConstructorGetParametersMocked() {\r\n        var parameters = DataClass::class.java.constructors[0].parameters\r\n\r\n        assert(parameters.map { it.name }.contains(\"name\"))\r\n        assert(parameters.map { it.name }.contains(\"age\"))\r\n\r\n        // inject a mockk object to alter native constructor.getParameters\r\n        val instance: DataClass = mockk()\r\n\r\n        clearMocks()\r\n        unmockkAll()\r\n\r\n        parameters = DataClass::class.java.constructors[0].parameters\r\n\r\n        assert(parameters.map { it.name }.contains(\"name\"))\r\n        assert(parameters.map { it.name }.contains(\"age\"))\r\n    }\r\n\r\n    @Test\r\n    fun testConstructorEqualityAfterClearMocks() {\r\n        val javaClass = DataClass::class.java\r\n\r\n        val constructor = DataClass::class.java.constructors[0]\r\n\r\n        assert(javaClass.constructors.size == 1)\r\n\r\n        // inject a mockk object to alter native constructor.getParameters\r\n        val instance: DataClass = mockk()\r\n\r\n        clearMocks()\r\n        unmockkAll()\r\n\r\n        assert(javaClass === DataClass::class.java)\r\n        assert(constructor.parameterCount == DataClass::class.java.constructors[0].parameterCount)\r\n        assert(constructor === DataClass::class.java.constructors[0])\r\n    }\r\n\r\n}\r\n\r\ndata class DataClass(val name: String, val age: Int)\r\n\r\n// -----------------------[ YOUR CODE ENDS HERE ] -----------------------\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/mockk/mockk/issues/129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mockk/mockk/issues/129/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]