diff --git a/gradle/root/coverage.gradle b/gradle/root/coverage.gradle
index bb846c4fb..03ec3883e 100644
--- a/gradle/root/coverage.gradle
+++ b/gradle/root/coverage.gradle
@@ -22,29 +22,27 @@ task mockitoCoverage(type: JacocoReport) {
                 if (currentProject != rootProject) {   //already automatically enhanced in mockito main project as "java" plugin was applied before
                     applyTo test
                 }
+                test.jacoco.destinationFile = file("${currentProject.buildDir}/jacoco/test.exec")
             }
 
-            currentProject.tasks.withType(Test) { testTask ->
-                mockitoCoverage.dependsOn testTask
-            }
+            mockitoCoverage.executionData(files(test.jacoco.destinationFile).builtBy(test))
         }
     }
 
-    executionData(file("$buildDir/jacoco/test.exec"))
-
     reports {
         xml.enabled true
         html.enabled true
         html.destination file("${buildDir}/jacocoHtml")
     }
 
-    afterEvaluate {
-      classDirectories = files(classDirectories.files.collect {
-        fileTree(
-          dir: it,
-          exclude: ['**/org/mockito/internal/util/concurrent/**']
-        )
-      })
+    doFirst {
+        classDirectories.from = classDirectories.files.collect {
+            fileTree(
+                dir: it,
+                exclude: ['**/org/mockito/internal/util/concurrent/**']
+            )
+        }
+        executionData.from = executionData.files.findAll { it.exists() }
     }
 
     doLast {
