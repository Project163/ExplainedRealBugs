diff --git a/gradle/test-launcher.gradle b/gradle/test-launcher.gradle
index be08cede5..23ab2eb73 100644
--- a/gradle/test-launcher.gradle
+++ b/gradle/test-launcher.gradle
@@ -1,4 +1,4 @@
-tasks.withType(Test) {
+tasks.withType(Test).configureEach {
     javaLauncher = javaToolchains.launcherFor {
         languageVersion = providers
             .gradleProperty("mockito.test.java")
diff --git a/subprojects/errorprone/errorprone.gradle b/subprojects/errorprone/errorprone.gradle
index 470dd9087..73c762ccc 100644
--- a/subprojects/errorprone/errorprone.gradle
+++ b/subprojects/errorprone/errorprone.gradle
@@ -28,12 +28,12 @@ test {
     jvmArgs += "--add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED"
 }
 
-tasks.withType(JavaCompile) {
+tasks.withType(JavaCompile).configureEach {
     options.compilerArgs << "--add-exports=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED"
     options.compilerArgs << "--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED"
     options.compilerArgs << "--add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED"
 }
 
-tasks.withType(Javadoc) {
+tasks.withType(Javadoc).configureEach {
     options.addBooleanOption("-add-exports=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED", true)
 }
diff --git a/subprojects/extTest/extTest.gradle b/subprojects/extTest/extTest.gradle
index c680f419e..526b0a785 100644
--- a/subprojects/extTest/extTest.gradle
+++ b/subprojects/extTest/extTest.gradle
@@ -15,11 +15,11 @@ dependencies {
     testRuntimeOnly libraries.junitPlatformLauncher
 }
 
-tasks.withType(Test) {
+tasks.withType(Test).configureEach {
     useJUnitPlatform()
 }
 
-configurations.all {
+configurations.configureEach {
     //TODO SF enable when #154 is implemented
     //let's make those tests not use hamcrest
     //exclude group: 'org.hamcrest', module: 'hamcrest-core'
diff --git a/subprojects/junit-jupiter/junit-jupiter.gradle b/subprojects/junit-jupiter/junit-jupiter.gradle
index ea9116335..013f2ff10 100644
--- a/subprojects/junit-jupiter/junit-jupiter.gradle
+++ b/subprojects/junit-jupiter/junit-jupiter.gradle
@@ -19,7 +19,7 @@ dependencies {
     testRuntimeOnly libraries.junitJupiterEngine
 }
 
-tasks.withType(Test) {
+tasks.withType(Test).configureEach {
     useJUnitPlatform()
 }
 
diff --git a/subprojects/osgi-test/osgi-test-bundles.gradle b/subprojects/osgi-test/osgi-test-bundles.gradle
index 4fead8969..8f568978e 100644
--- a/subprojects/osgi-test/osgi-test-bundles.gradle
+++ b/subprojects/osgi-test/osgi-test-bundles.gradle
@@ -26,11 +26,11 @@ task testBundle(type: Bundle) {
     from sourceSets.testBundle.output
 }
 
-task otherBundle(type: Bundle) {
+tasks.register('otherBundle', Bundle) {
     from sourceSets.otherBundle.output
 }
 
-tasks.withType(Bundle) {
+tasks.withType(Bundle).configureEach {
     archiveAppendix = name
     bundle { // this: BundleTaskExtension
         bnd = """
