diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
index 58cb41b62..0c57e5908 100644
--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -30,7 +30,12 @@ jobs:
     strategy:
       matrix:
         java: [11, 17]
-        mock-maker: ['mock-maker-default', 'mock-maker-inline', 'mock-maker-subclass']
+        entry:
+          - { mock-maker: 'mock-maker-default', member-accessor: 'member-accessor-default' }
+          - { mock-maker: 'mock-maker-inline', member-accessor: 'member-accessor-module' }
+          - { mock-maker: 'mock-maker-subclass', member-accessor: 'member-accessor-module' }
+          - { mock-maker: 'mock-maker-subclass', member-accessor: 'member-accessor-reflection' }
+          - { mock-maker: 'mock-maker-inline', member-accessor: 'member-accessor-reflection' }
 
     # All build steps
     # SINGLE-MATRIX-JOB means that the step does not need to be executed on every job in the matrix
@@ -48,21 +53,22 @@ jobs:
         java-version: ${{ matrix.java }}
 
     - name: 3. Validate Gradle wrapper
-      if: matrix.java == 11 && matrix.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
+      if: matrix.java == 11 && matrix.entry.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
       uses: gradle/wrapper-validation-action@v1.0.5 # https://github.com/gradle/wrapper-validation-action
 
     - name: 4. Build and check reproducibility of artifacts (single job only)
-      if: matrix.java == 11 && matrix.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
+      if: matrix.java == 11 && matrix.entry.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
       run: ./check_reproducibility.sh
 
     - name: 5. Spotless check (single job only). Run './gradlew spotlessApply' locally if this job fails.
-      if: matrix.java == 11 && matrix.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
+      if: matrix.java == 11 && matrix.entry.mock-maker == 'mock-maker-default' # SINGLE-MATRIX-JOB
       run: ./gradlew spotlessCheck
 
-    - name: 6. Build on Java ${{ matrix.java }} with ${{ matrix.mock-maker }}
+    - name: 6. Build on Java ${{ matrix.java }} with ${{ matrix.entry.mock-maker }} and ${{ matrix.entry.member-accessor }} 
       run: ./gradlew build idea --scan
       env:
-        MOCK_MAKER: ${{ matrix.mock-maker }}
+        MOCK_MAKER: ${{ matrix.entry.mock-maker }}
+        MEMBER_ACCESSOR: ${{ matrix.entry.member-accessor }}
 
     - name: 7. Upload coverage report
       run: |
diff --git a/gradle/mockito-core/testing.gradle b/gradle/mockito-core/testing.gradle
index a7c14c1f6..79e2996b6 100644
--- a/gradle/mockito-core/testing.gradle
+++ b/gradle/mockito-core/testing.gradle
@@ -6,24 +6,43 @@ if (java11 != null) {
     }
 }
 
-task(createTestResources).doLast {
-    def mockMakerFile = new File("$projectDir/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker")
-    if (System.env.MOCK_MAKER != null) {
-        logger.info("Using MockMaker ${System.env.MOCK_MAKER}")
-        mockMakerFile.parentFile.mkdirs()
-        mockMakerFile.createNewFile()
-        mockMakerFile.write(System.env.MOCK_MAKER)
-    } else {
-        logger.info("Using default MockMaker")
+task(createTestResources) {
+    doLast {
+        // Configure MockMaker from environment (if specified), otherwise use default
+        def mockMakerFile = new File("$sourceSets.test.output.resourcesDir/mockito-extensions/org.mockito.plugins.MockMaker")
+        if (System.env.MOCK_MAKER != null && !System.env.MOCK_MAKER.endsWith("default")) {
+            logger.info("Using MockMaker ${System.env.MOCK_MAKER}")
+            mockMakerFile.parentFile.mkdirs()
+            mockMakerFile.createNewFile()
+            mockMakerFile.write(System.env.MOCK_MAKER)
+        } else {
+            logger.info("Using default MockMaker")
+        }
+
+        // Configure MemberAccessor from environment (if specified), otherwise use default
+        def memberAccessorFile = new File("$sourceSets.test.output.resourcesDir/mockito-extensions/org.mockito.plugins.MemberAccessor")
+        if (System.env.MEMBER_ACCESSOR != null  && !System.env.MEMBER_ACCESSOR.endsWith("default")) {
+            logger.info("Using MemberAccessor ${System.env.MEMBER_ACCESSOR}")
+            memberAccessorFile.parentFile.mkdirs()
+            memberAccessorFile.createNewFile()
+            memberAccessorFile.write(System.env.MEMBER_ACCESSOR)
+        } else {
+            logger.info("Using default MemberAccessor")
+        }
     }
 }
 
 task(removeTestResources).doLast {
-    def mockMakerFile = new File("$projectDir/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker")
+    def mockMakerFile = new File("$sourceSets.test.output.resourcesDir/mockito-extensions/org.mockito.plugins.MockMaker")
     if (mockMakerFile.exists()) {
         mockMakerFile.delete()
     }
+
+    def memberAccessorFile = new File("$sourceSets.test.output.resourcesDir/mockito-extensions/org.mockito.plugins.MemberAccessor")
+    if (memberAccessorFile.exists()) {
+        memberAccessorFile.delete()
+    }
 }
 
-compileTestJava.dependsOn createTestResources
-compileTestJava.finalizedBy removeTestResources
+processTestResources.finalizedBy(createTestResources)
+test.finalizedBy(removeTestResources)
diff --git a/src/main/java/org/mockito/internal/configuration/plugins/DefaultMockitoPlugins.java b/src/main/java/org/mockito/internal/configuration/plugins/DefaultMockitoPlugins.java
index 780742c64..365c350e9 100644
--- a/src/main/java/org/mockito/internal/configuration/plugins/DefaultMockitoPlugins.java
+++ b/src/main/java/org/mockito/internal/configuration/plugins/DefaultMockitoPlugins.java
@@ -29,6 +29,7 @@ public class DefaultMockitoPlugins implements MockitoPlugins {
     public static final Set<String> MOCK_MAKER_ALIASES = new HashSet<>();
     static final String MODULE_ALIAS = "member-accessor-module";
     static final String REFLECTION_ALIAS = "member-accessor-reflection";
+    public static final Set<String> MEMBER_ACCESSOR_ALIASES = new HashSet<>();
 
     static {
         // Keep the mapping: plugin interface name -> plugin implementation class name
@@ -66,6 +67,9 @@ public class DefaultMockitoPlugins implements MockitoPlugins {
         MOCK_MAKER_ALIASES.add(INLINE_ALIAS);
         MOCK_MAKER_ALIASES.add(PROXY_ALIAS);
         MOCK_MAKER_ALIASES.add(SUBCLASS_ALIAS);
+
+        MEMBER_ACCESSOR_ALIASES.add(MODULE_ALIAS);
+        MEMBER_ACCESSOR_ALIASES.add(REFLECTION_ALIAS);
     }
 
     @Override
diff --git a/src/main/java/org/mockito/internal/configuration/plugins/PluginRegistry.java b/src/main/java/org/mockito/internal/configuration/plugins/PluginRegistry.java
index 6abaedbae..72f5d8e7d 100644
--- a/src/main/java/org/mockito/internal/configuration/plugins/PluginRegistry.java
+++ b/src/main/java/org/mockito/internal/configuration/plugins/PluginRegistry.java
@@ -27,7 +27,9 @@ class PluginRegistry {
                     .loadPlugin(MockMaker.class);
 
     private final MemberAccessor memberAccessor =
-            new PluginLoader(pluginSwitch, DefaultMockitoPlugins.MODULE_ALIAS)
+            new PluginLoader(
+                            pluginSwitch,
+                            DefaultMockitoPlugins.MEMBER_ACCESSOR_ALIASES.toArray(new String[0]))
                     .loadPlugin(MemberAccessor.class);
 
     private final StackTraceCleanerProvider stackTraceCleanerProvider =
diff --git a/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java b/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
index c71386346..48ba77510 100644
--- a/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
+++ b/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
@@ -10,6 +10,7 @@ import java.io.Serializable;
 import java.util.Collection;
 import java.util.LinkedList;
 import java.util.List;
+import java.util.Objects;
 
 import org.mockito.internal.exceptions.Reporter;
 import org.mockito.internal.stubbing.UnusedStubbingReporting;
@@ -68,17 +69,15 @@ class DefaultStubbingLookupListener implements StubbingLookupListener, Serializa
         List<Invocation> matchingStubbings = new LinkedList<>();
         for (Stubbing s : stubbings) {
             if (UnusedStubbingReporting.shouldBeReported(s)
-                    && s.getInvocation()
-                            .getMethod()
-                            .getName()
-                            .equals(invocation.getMethod().getName())
+                    && Objects.equals(
+                            s.getInvocation().getMethod().getName(),
+                            invocation.getMethod().getName())
                     // If stubbing and invocation are in the same source file we assume they are in
                     // the test code,
                     // and we don't flag it as mismatch:
-                    && !s.getInvocation()
-                            .getLocation()
-                            .getSourceFile()
-                            .equals(invocation.getLocation().getSourceFile())) {
+                    && !Objects.equals(
+                            s.getInvocation().getLocation().getSourceFile(),
+                            invocation.getLocation().getSourceFile())) {
                 matchingStubbings.add(s.getInvocation());
             }
         }
diff --git a/src/test/java/org/mockito/MockitoEnvTest.java b/src/test/java/org/mockito/MockitoEnvTest.java
new file mode 100644
index 000000000..1a162e939
--- /dev/null
+++ b/src/test/java/org/mockito/MockitoEnvTest.java
@@ -0,0 +1,59 @@
+/*
+ * Copyright (c) 2021 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito;
+
+import static org.assertj.core.api.Assertions.assertThat;
+import static org.hamcrest.CoreMatchers.endsWith;
+import static org.hamcrest.CoreMatchers.not;
+import static org.hamcrest.CoreMatchers.nullValue;
+
+import org.junit.Assume;
+import org.junit.Test;
+import org.mockito.internal.configuration.plugins.DefaultMockitoPlugins;
+import org.mockito.internal.configuration.plugins.Plugins;
+import org.mockito.plugins.MemberAccessor;
+import org.mockito.plugins.MockMaker;
+
+public class MockitoEnvTest {
+    @Test
+    public void uses_default_mock_maker_from_env() {
+        final String mockMaker = System.getenv("MOCK_MAKER");
+        Assume.assumeThat(mockMaker, not(nullValue()));
+        Assume.assumeThat(mockMaker, endsWith("default"));
+
+        assertThat(DefaultMockitoPlugins.getDefaultPluginClass(MockMaker.class.getName()))
+                .isEqualTo(Plugins.getMockMaker().getClass().getName());
+    }
+
+    @Test
+    public void uses_mock_maker_from_env() {
+        final String mockMaker = System.getenv("MOCK_MAKER");
+        Assume.assumeThat(mockMaker, not(nullValue()));
+        Assume.assumeThat(mockMaker, not(endsWith("default")));
+
+        assertThat(DefaultMockitoPlugins.getDefaultPluginClass(mockMaker))
+                .isEqualTo(Plugins.getMockMaker().getClass().getName());
+    }
+
+    @Test
+    public void uses_default_member_accessor_from_env() {
+        final String memberAccessor = System.getenv("MEMBER_ACCESSOR");
+        Assume.assumeThat(memberAccessor, not(nullValue()));
+        Assume.assumeThat(memberAccessor, endsWith("default"));
+
+        assertThat(DefaultMockitoPlugins.getDefaultPluginClass(MemberAccessor.class.getName()))
+                .isEqualTo(Plugins.getMemberAccessor().getClass().getName());
+    }
+
+    @Test
+    public void uses_member_accessor_from_env() {
+        final String memberAccessor = System.getenv("MEMBER_ACCESSOR");
+        Assume.assumeThat(memberAccessor, not(nullValue()));
+        Assume.assumeThat(memberAccessor, not(endsWith("default")));
+
+        assertThat(DefaultMockitoPlugins.getDefaultPluginClass(memberAccessor))
+                .isEqualTo(Plugins.getMemberAccessor().getClass().getName());
+    }
+}
diff --git a/src/test/java/org/mockitousage/spies/PartialMockingWithSpiesTest.java b/src/test/java/org/mockitousage/spies/PartialMockingWithSpiesTest.java
index bf616f8d9..4efcb2b27 100644
--- a/src/test/java/org/mockitousage/spies/PartialMockingWithSpiesTest.java
+++ b/src/test/java/org/mockitousage/spies/PartialMockingWithSpiesTest.java
@@ -4,6 +4,8 @@
  */
 package org.mockitousage.spies;
 
+import static org.hamcrest.CoreMatchers.instanceOf;
+import static org.hamcrest.CoreMatchers.not;
 import static org.junit.Assert.assertEquals;
 import static org.junit.Assert.fail;
 import static org.mockito.Mockito.doThrow;
@@ -13,8 +15,12 @@ import static org.mockito.Mockito.when;
 import static org.mockitoutil.Conditions.methodsInStackTrace;
 
 import org.assertj.core.api.Assertions;
+import org.junit.Assume;
 import org.junit.Before;
 import org.junit.Test;
+import org.mockito.internal.configuration.plugins.Plugins;
+import org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker;
+import org.mockito.internal.util.reflection.ReflectionMemberAccessor;
 import org.mockitoutil.TestBase;
 
 @SuppressWarnings("unchecked")
@@ -104,6 +110,9 @@ public class PartialMockingWithSpiesTest extends TestBase {
 
     @Test
     public void shouldStackTraceGetFilteredOnUserExceptions() {
+        Assume.assumeThat(
+                Plugins.getMemberAccessor(), not(instanceOf(ReflectionMemberAccessor.class)));
+
         try {
             // when
             spy.getNameButDelegateToMethodThatThrows();
@@ -119,6 +128,30 @@ public class PartialMockingWithSpiesTest extends TestBase {
         }
     }
 
+    @Test
+    public void shouldStackTraceGetFilteredOnUserExceptionsReflection() {
+        Assume.assumeThat(Plugins.getMockMaker(), instanceOf(InlineByteBuddyMockMaker.class));
+        Assume.assumeThat(Plugins.getMemberAccessor(), instanceOf(ReflectionMemberAccessor.class));
+
+        try {
+            // when
+            spy.getNameButDelegateToMethodThatThrows();
+            fail();
+        } catch (Throwable t) {
+            // then
+            Assertions.assertThat(t)
+                    .has(
+                            methodsInStackTrace(
+                                    "throwSomeException",
+                                    "invoke0",
+                                    "invoke",
+                                    "invoke",
+                                    "invoke",
+                                    "getNameButDelegateToMethodThatThrows",
+                                    "shouldStackTraceGetFilteredOnUserExceptionsReflection"));
+        }
+    }
+
     //    @Test //manual verification
     public void verifyTheStackTrace() {
         spy.getNameButDelegateToMethodThatThrows();
diff --git a/subprojects/extTest/src/test/java/org/mockitousage/plugins/switcher/MyPluginSwitch.java b/subprojects/extTest/src/test/java/org/mockitousage/plugins/switcher/MyPluginSwitch.java
index eb4423f36..cf60ee63e 100644
--- a/subprojects/extTest/src/test/java/org/mockitousage/plugins/switcher/MyPluginSwitch.java
+++ b/subprojects/extTest/src/test/java/org/mockitousage/plugins/switcher/MyPluginSwitch.java
@@ -14,6 +14,10 @@ public class MyPluginSwitch implements PluginSwitch {
     static List<String> invokedFor = new LinkedList<String>();
 
     public boolean isEnabled(String pluginClassName) {
+        if (!pluginClassName.startsWith("org.mockitousage")) {
+            return false;
+        }
+
         invokedFor.add(pluginClassName);
         return true;
     }
