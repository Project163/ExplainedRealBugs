diff --git a/build.gradle b/build.gradle
index 064717921..c4728a739 100644
--- a/build.gradle
+++ b/build.gradle
@@ -55,7 +55,7 @@ test {
 }
 
 dependencies {
-    compile 'net.bytebuddy:byte-buddy:1.4.8'
+    compile 'net.bytebuddy:byte-buddy:1.4.16'
 
     provided "junit:junit:4.12", "org.hamcrest:hamcrest-core:1.3"
     compile "org.objenesis:objenesis:2.4"
diff --git a/src/main/java/org/mockito/internal/creation/bytebuddy/MockBytecodeGenerator.java b/src/main/java/org/mockito/internal/creation/bytebuddy/MockBytecodeGenerator.java
index c91b3e4fa..e9746faf5 100644
--- a/src/main/java/org/mockito/internal/creation/bytebuddy/MockBytecodeGenerator.java
+++ b/src/main/java/org/mockito/internal/creation/bytebuddy/MockBytecodeGenerator.java
@@ -65,7 +65,8 @@ class MockBytecodeGenerator {
                               .append(MockAccess.class, DispatcherDefaultingToRealMethod.class)
                               .append(MockMethodInterceptor.class,
                                       MockMethodInterceptor.ForHashCode.class,
-                                      MockMethodInterceptor.ForEquals.class).build(), ClassLoadingStrategy.Default.INJECTION)
+                                      MockMethodInterceptor.ForEquals.class).build(),
+                              ClassLoadingStrategy.Default.INJECTION.with(features.mockedType.getProtectionDomain()))
                       .getLoaded();
     }
 
