diff --git a/gradle/dependencies.gradle b/gradle/dependencies.gradle
index cebf8058c..aaab89dbb 100644
--- a/gradle/dependencies.gradle
+++ b/gradle/dependencies.gradle
@@ -30,6 +30,10 @@ libraries.objenesis = 'org.objenesis:objenesis:2.6'
 
 libraries.asm = 'org.ow2.asm:asm:7.0'
 
+libraries.osgi = 'org.osgi:osgi.core:7.0.0'
+libraries.equinox = 'org.eclipse.platform:org.eclipse.osgi:3.15.0'
+libraries.bndGradle =  'biz.aQute.bnd:biz.aQute.bnd.gradle:4.3.1'
+
 def kotlinVersion = '1.2.10'
 def kotlinVersion_1_3 = '1.3.0-rc-57'
 libraries.kotlin = [
diff --git a/settings.gradle.kts b/settings.gradle.kts
index dc31ca1f3..fdd9f374f 100644
--- a/settings.gradle.kts
+++ b/settings.gradle.kts
@@ -9,7 +9,8 @@ include("deprecatedPluginsTest",
     "module-test",
     "memory-test",
     "errorprone",
-    "junitJupiterParallelTest")
+    "junitJupiterParallelTest",
+    "osgi-test")
 
 rootProject.name = "mockito"
 
diff --git a/subprojects/osgi-test/osgi-test-bundles.gradle b/subprojects/osgi-test/osgi-test-bundles.gradle
new file mode 100644
index 000000000..a2b9feac8
--- /dev/null
+++ b/subprojects/osgi-test/osgi-test-bundles.gradle
@@ -0,0 +1,41 @@
+buildscript {
+    repositories {
+        jcenter()
+    }
+    dependencies {
+        classpath libraries.bndGradle
+    }
+}
+
+apply from: "$rootDir/gradle/dependencies.gradle"
+
+description = "Test bundles for OSGi tests"
+
+sourceSets {
+    testBundle
+    otherBundle
+}
+
+dependencies {
+    testBundleCompile project.rootProject
+    testBundleCompile libraries.junit4
+    testBundleCompile sourceSets.otherBundle.output
+}
+
+import aQute.bnd.gradle.Bundle
+
+task testBundle(type: Bundle) {
+    from sourceSets.testBundle.output
+}
+
+task otherBundle(type: Bundle) {
+    from sourceSets.otherBundle.output
+}
+
+tasks.withType(Bundle) {
+    archiveAppendix = name
+    bnd = """
+Bundle-SymbolicName: $name
+-exportcontents: *
+"""
+}
diff --git a/subprojects/osgi-test/osgi-test.gradle b/subprojects/osgi-test/osgi-test.gradle
new file mode 100644
index 000000000..8ebcc042f
--- /dev/null
+++ b/subprojects/osgi-test/osgi-test.gradle
@@ -0,0 +1,38 @@
+plugins {
+    id 'java'
+}
+
+apply from: "$rootDir/gradle/dependencies.gradle"
+apply from: "osgi-test-bundles.gradle"
+
+description = "Test suite for OSGi framework with Mockito"
+
+dependencies {
+    testCompile libraries.junit4
+    testCompile libraries.osgi
+
+    testRuntime libraries.equinox
+}
+
+tasks.javadoc.enabled = false
+
+configurations {
+    testRuntimeBundles
+}
+
+dependencies {
+    testRuntimeBundles project.rootProject
+    testRuntimeBundles libraries.bytebuddy
+    testRuntimeBundles libraries.objenesis
+    testRuntimeBundles tasks.testBundle.outputs.files
+    testRuntimeBundles tasks.otherBundle.outputs.files
+}
+
+test {
+    dependsOn configurations.testRuntimeBundles
+    inputs.files(sourceSets.testBundle.allSource)
+    inputs.files(sourceSets.otherBundle.allSource)
+    systemProperty 'testRuntimeBundles', configurations.testRuntimeBundles.asPath
+    useJUnit()
+}
+
diff --git a/subprojects/osgi-test/src/otherBundle/java/org/mockito/osgitest/otherbundle/Methods.java b/subprojects/osgi-test/src/otherBundle/java/org/mockito/osgitest/otherbundle/Methods.java
new file mode 100644
index 000000000..361948eca
--- /dev/null
+++ b/subprojects/osgi-test/src/otherBundle/java/org/mockito/osgitest/otherbundle/Methods.java
@@ -0,0 +1,12 @@
+/*
+ * Copyright (c) 2019 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito.osgitest.otherbundle;
+
+public class Methods {
+
+    public int intReturningMethod() {
+        return 0;
+    }
+}
diff --git a/subprojects/osgi-test/src/test/java/org/mockito/osgitest/OsgiTest.java b/subprojects/osgi-test/src/test/java/org/mockito/osgitest/OsgiTest.java
new file mode 100644
index 000000000..296e6cfd7
--- /dev/null
+++ b/subprojects/osgi-test/src/test/java/org/mockito/osgitest/OsgiTest.java
@@ -0,0 +1,129 @@
+/*
+ * Copyright (c) 2019 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito.osgitest;
+
+import org.junit.runner.RunWith;
+import org.junit.runners.Suite;
+import org.junit.runners.model.RunnerBuilder;
+import org.osgi.framework.Bundle;
+import org.osgi.framework.BundleContext;
+import org.osgi.framework.BundleException;
+import org.osgi.framework.Constants;
+import org.osgi.framework.launch.Framework;
+import org.osgi.framework.launch.FrameworkFactory;
+
+import java.io.File;
+import java.io.IOException;
+import java.nio.file.*;
+import java.nio.file.attribute.BasicFileAttributes;
+import java.util.*;
+import java.util.regex.Pattern;
+import java.util.stream.Collectors;
+import java.util.stream.Stream;
+import org.junit.AfterClass;
+
+import static org.junit.Assert.fail;
+
+@RunWith(OsgiTest.class)
+public class OsgiTest extends Suite {
+
+    private static final FrameworkFactory frameworkFactory = ServiceLoader.load(FrameworkFactory.class).iterator().next();
+    private static final String STORAGE_TEMPDIR_NAME = "osgi-test-storage";
+    private static final List<String> EXTRA_SYSTEMPACKAGES = Arrays.asList("org.junit", "sun.misc", "sun.reflect");
+
+    private static final List<Path> TEST_RUNTIME_BUNDLES = splitPaths(System.getProperty("testRuntimeBundles"));
+    private static final String TEST_BUNDLE_SYMBOLIC_NAME = "testBundle";
+
+    private static final long STOP_TIMEOUT_MS = 10000;
+
+    private static Path frameworkStorage;
+    private static Framework framework;
+    private static Bundle testBundle;
+
+    public OsgiTest(Class<?> osgiTestClass, RunnerBuilder builder) throws Exception {
+        super(builder, osgiTestClass, setUpClasses());
+    }
+
+    private static Class<?>[] setUpClasses() throws Exception {
+        frameworkStorage = Files.createTempDirectory(STORAGE_TEMPDIR_NAME);
+        Map<String, String> configuration = new HashMap<>();
+        configuration.put(Constants.FRAMEWORK_STORAGE, frameworkStorage.toString());
+        configuration.put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA, String.join(",", EXTRA_SYSTEMPACKAGES));
+        framework = frameworkFactory.newFramework(configuration);
+        framework.init();
+        BundleContext bundleContext = framework.getBundleContext();
+        for (Path dependencyPath : TEST_RUNTIME_BUNDLES) {
+            Bundle installedBundle;
+            try {
+                installedBundle = bundleContext.installBundle(dependencyPath.toUri().toString());
+            } catch (BundleException e) {
+                throw new IllegalStateException("Failed to install bundle: " + dependencyPath.getFileName(), e);
+            }
+            if (TEST_BUNDLE_SYMBOLIC_NAME.equals(installedBundle.getSymbolicName())) {
+                testBundle = installedBundle;
+            }
+        }
+        if (testBundle == null) {
+            fail("Test bundle not found.");
+        }
+        framework.start();
+        try {
+            // Manual start to get a better exception if the bundle cannot be resolved
+            testBundle.start();
+        } catch (BundleException e) {
+            throw new IllegalStateException("Failed to start test bundle.", e);
+        }
+        return getTestClasses();
+    }
+
+    private static Class<?>[] getTestClasses() throws Exception {
+        return new Class<?>[] {
+            loadTestClass("SimpleMockTest"),
+            loadTestClass("MockNonPublicClassFailsTest"),
+            loadTestClass("MockClassInOtherBundleTest")
+        };
+    }
+
+    @AfterClass
+    public static void tearDown() throws Exception {
+        try {
+            if (framework != null) {
+                framework.stop();
+                framework.waitForStop(STOP_TIMEOUT_MS);
+            }
+        } finally {
+            if (frameworkStorage != null) {
+                deleteRecursively(frameworkStorage);
+            }
+        }
+    }
+
+    private static Class<?> loadTestClass(String className) throws Exception {
+        return testBundle.loadClass("org.mockito.osgitest.testbundle." + className);
+    }
+
+    private static List<Path> splitPaths(String paths) {
+        return Stream.of(paths.split(Pattern.quote(File.pathSeparator)))
+            .map(p -> Paths.get(p))
+            .collect(Collectors.toList());
+    }
+
+    private static void deleteRecursively(Path pathToDelete) throws IOException {
+        Files.walkFileTree(pathToDelete,
+            new SimpleFileVisitor<Path>() {
+                @Override
+                public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {
+                    Files.delete(dir);
+                    return FileVisitResult.CONTINUE;
+                }
+
+                @Override
+                public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
+                    Files.delete(file);
+                    return FileVisitResult.CONTINUE;
+                }
+            });
+    }
+}
diff --git a/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockClassInOtherBundleTest.java b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockClassInOtherBundleTest.java
new file mode 100644
index 000000000..c1ce63ba3
--- /dev/null
+++ b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockClassInOtherBundleTest.java
@@ -0,0 +1,22 @@
+/*
+ * Copyright (c) 2019 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito.osgitest.testbundle;
+
+import org.junit.Test;
+import org.mockito.osgitest.otherbundle.Methods;
+
+import static org.junit.Assert.assertEquals;
+import static org.mockito.Mockito.mock;
+import static org.mockito.Mockito.when;
+
+public class MockClassInOtherBundleTest {
+
+    @Test
+    public void test() {
+        Methods methods = mock(Methods.class);
+        when(methods.intReturningMethod()).thenReturn(42);
+        assertEquals(42, methods.intReturningMethod());
+    }
+}
diff --git a/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockNonPublicClassFailsTest.java b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockNonPublicClassFailsTest.java
new file mode 100644
index 000000000..c61806060
--- /dev/null
+++ b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/MockNonPublicClassFailsTest.java
@@ -0,0 +1,21 @@
+/*
+ * Copyright (c) 2019 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito.osgitest.testbundle;
+
+import org.junit.Test;
+import org.mockito.exceptions.base.MockitoException;
+
+import static org.mockito.Mockito.mock;
+
+public class MockNonPublicClassFailsTest {
+
+    static class NonPublicClass {}
+
+    @Test(expected = MockitoException.class)
+    public void test() {
+            // Expected: The type is not public and its mock class is loaded by a different class loader.
+            NonPublicClass nonPublicClass = mock(NonPublicClass.class);
+    }
+}
diff --git a/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/SimpleMockTest.java b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/SimpleMockTest.java
new file mode 100644
index 000000000..3367398d8
--- /dev/null
+++ b/subprojects/osgi-test/src/testBundle/java/org/mockito/osgitest/testbundle/SimpleMockTest.java
@@ -0,0 +1,23 @@
+/*
+ * Copyright (c) 2019 Mockito contributors
+ * This program is made available under the terms of the MIT License.
+ */
+package org.mockito.osgitest.testbundle;
+
+import org.junit.Test;
+
+import java.util.List;
+
+import static org.junit.Assert.assertEquals;
+import static org.mockito.Mockito.mock;
+import static org.mockito.Mockito.when;
+
+public class SimpleMockTest {
+
+    @Test
+    public void test() {
+        List list = mock(List.class);
+        when(list.get(0)).thenReturn("a");
+        assertEquals("a", list.get(0));
+    }
+}
