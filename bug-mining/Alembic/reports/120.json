{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671","repository_url":"https://api.github.com/repos/sqlalchemy/alembic","labels_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671/comments","events_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671/events","html_url":"https://github.com/sqlalchemy/alembic/issues/1671","id":3125809350,"node_id":"I_kwDOCX47u866UBDG","number":1671,"title":"dialect_kwargs are not supported for foreign key creation","user":{"login":"jrmalin","id":14236403,"node_id":"MDQ6VXNlcjE0MjM2NDAz","avatar_url":"https://avatars.githubusercontent.com/u/14236403?v=4","gravatar_id":"","url":"https://api.github.com/users/jrmalin","html_url":"https://github.com/jrmalin","followers_url":"https://api.github.com/users/jrmalin/followers","following_url":"https://api.github.com/users/jrmalin/following{/other_user}","gists_url":"https://api.github.com/users/jrmalin/gists{/gist_id}","starred_url":"https://api.github.com/users/jrmalin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrmalin/subscriptions","organizations_url":"https://api.github.com/users/jrmalin/orgs","repos_url":"https://api.github.com/users/jrmalin/repos","events_url":"https://api.github.com/users/jrmalin/events{/privacy}","received_events_url":"https://api.github.com/users/jrmalin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141243519,"node_id":"MDU6TGFiZWwxMTQxMjQzNTE5","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/autogenerate%20-%20rendering","name":"autogenerate - rendering","color":"00B0E0","default":false,"description":null},{"id":1388914604,"node_id":"MDU6TGFiZWwxMzg4OTE0NjA0","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/use%20case","name":"use case","color":"f28b2b","default":false,"description":"not quite a feature and not quite a bug, something we just didn't think of"},{"id":1526268200,"node_id":"MDU6TGFiZWwxNTI2MjY4MjAw","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/3rd%20part%20autogen%20option%20rendering","name":"3rd part autogen option rendering","color":"3388af","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-06-06T20:34:34Z","updated_at":"2025-06-16T16:20:06Z","closed_at":"2025-06-16T16:20:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the use case**\n<!-- A clear and concise description of what the SQL or database capability is. -->\nSqlAlchemy supports adding dialect kwargs for foreign keys, as does `op.create_foreign_key()`, but the renderer for `ops.CreateForeignKeyOp` does not pass through `dialect_kwargs`. An example of this is `postgresql_not_valid`.\n\n**Databases / Backends / Drivers targeted**\n\n<!-- what database(s) is this for?  What drivers? -->\npostgres\n\n**Example Use**\n<!-- provide a clear example of what the SQL looks like, or what the DBAPI code looks like -->\n`ALTER TABLE t1 ADD CONSTRAINT i FOREIGN KEY(c1) REFERENCES t2 (c2) NOT VALID;`\n\n**Additional context**\n<!-- Add any other context about the problem here. -->\nThis was quite confusing, as it is documented as if it is handled, and it `dialect_kwargs` seem to be passed through for other constraints, just not for foreign keys. **I have already begun working on the solution here.**\n\n**Have a nice day!**\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/1671/timeline","performed_via_github_app":null,"state_reason":"completed"}