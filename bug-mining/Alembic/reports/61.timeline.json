[{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884958","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884958","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884958,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk1OA==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-23T23:47:14Z","updated_at":"2018-11-27T03:15:38Z","body":"**Michael Bayer ([@zzzeek](https://github.com/zzzeek)) wrote:**\n\n- Added support for \"alembic stamp\" to work when given \"heads\" as an\nargument, when multiple heads are present.\nfixes #267\n\n\nâ†’ 56d56f55bde1\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884966","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884966","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884966,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2Ng==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-23T23:47:14Z","updated_at":"2018-11-27T03:15:39Z","body":"**Changes by Michael Bayer ([@zzzeek](https://github.com/zzzeek)):**\n\n* changed **status** to closed\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884959","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884959","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884959,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk1OQ==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-24T01:05:48Z","updated_at":"2018-11-27T03:15:38Z","body":"**Michael Bayer ([@zzzeek](https://github.com/zzzeek)) wrote:**\n\nso I sort of left this off at first because stamp was so difficult to get it working in the first place, I didn't feel like pushing it.  But as you can see this was a simple change.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884960","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884960","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884960,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2MA==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-24T02:11:15Z","updated_at":"2018-11-27T03:15:38Z","body":"**MichaelE ([@miracle2k](https://github.com/miracle2k)) wrote:**\n\nJust amazing, thanks.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884961","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884961","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884961,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2MQ==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-07T10:41:54Z","updated_at":"2018-11-27T03:15:38Z","body":"**MichaelE ([@miracle2k](https://github.com/miracle2k)) wrote:**\n\nI have run into a problem trying to use this, which is that \n\n\n```\n\"stamp foo@heads\"\n```\n\nis idempotent, but \n\n\n```\nstamp heads\n```\n\nfails when there a branch doesn't need to be stamped:\n\n\n```\n  File \"<string>\", line 7, in run_migrations\n  File \"/Users/michael/.virtualenvs/cms26/lib/python2.6/site-packages/alembic/environment.py\", line 742, in run_migrations\n    self.get_context().run_migrations(**kw)\n  File \"/Users/michael/.virtualenvs/cms26/lib/python2.6/site-packages/alembic/migration.py\", line 316, in run_migrations\n    head_maintainer.update_to_step(step)\n  File \"/Users/michael/.virtualenvs/cms26/lib/python2.6/site-packages/alembic/migration.py\", line 475, in update_to_step\n    self._insert_version(vers)\n  File \"/Users/michael/.virtualenvs/cms26/lib/python2.6/site-packages/alembic/migration.py\", line 424, in _insert_version\n    assert version not in self.heads\nAssertionError\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884962","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884962","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884962,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2Mg==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-07T15:13:51Z","updated_at":"2018-11-27T03:15:38Z","body":"**Michael Bayer ([@zzzeek](https://github.com/zzzeek)) wrote:**\n\nstamp was really hard to write.... :)   ok\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884964","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884964","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884964,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2NA==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-07T15:14:11Z","updated_at":"2018-11-27T03:15:38Z","body":"**Michael Bayer ([@zzzeek](https://github.com/zzzeek)) wrote:**\n\nfix one remaining aspect\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884967","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884967","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884967,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2Nw==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-07T15:14:11Z","updated_at":"2018-11-27T03:15:39Z","body":"**Changes by Michael Bayer ([@zzzeek](https://github.com/zzzeek)):**\n\n* changed **status** to reopened\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884965","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884965","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884965,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2NQ==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-09T00:29:13Z","updated_at":"2018-11-27T03:15:39Z","body":"**Michael Bayer ([@zzzeek](https://github.com/zzzeek)) wrote:**\n\n- additional fix which impacts #267.  fix filtered_heads() to accommodate\nbeing given \"heads\" as the target so that it will in fact match when all heads\nare given.  fixes #267\n\n\nâ†’ e8a0c740b171\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884968","html_url":"https://github.com/sqlalchemy/alembic/issues/267#issuecomment-441884968","issue_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/267","id":441884968,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg4NDk2OA==","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-02-09T00:29:13Z","updated_at":"2018-11-27T03:15:39Z","body":"**Changes by Michael Bayer ([@zzzeek](https://github.com/zzzeek)):**\n\n* changed **status** to closed\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments/441884968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1988455738,"node_id":"MDExOkNsb3NlZEV2ZW50MTk4ODQ1NTczOA==","url":"https://api.github.com/repos/sqlalchemy/alembic/issues/events/1988455738","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-02-09T00:29:13Z","state_reason":null,"performed_via_github_app":null},{"id":1988455736,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5ODg0NTU3MzY=","url":"https://api.github.com/repos/sqlalchemy/alembic/issues/events/1988455736","actor":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-27T03:15:38Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"actor":{"login":"zzzeek","id":128223,"node_id":"MDQ6VXNlcjEyODIyMw==","avatar_url":"https://avatars.githubusercontent.com/u/128223?v=4","gravatar_id":"","url":"https://api.github.com/users/zzzeek","html_url":"https://github.com/zzzeek","followers_url":"https://api.github.com/users/zzzeek/followers","following_url":"https://api.github.com/users/zzzeek/following{/other_user}","gists_url":"https://api.github.com/users/zzzeek/gists{/gist_id}","starred_url":"https://api.github.com/users/zzzeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzzeek/subscriptions","organizations_url":"https://api.github.com/users/zzzeek/orgs","repos_url":"https://api.github.com/users/zzzeek/repos","events_url":"https://api.github.com/users/zzzeek/events{/privacy}","received_events_url":"https://api.github.com/users/zzzeek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T20:27:57Z","updated_at":"2020-05-29T20:27:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701","repository_url":"https://api.github.com/repos/sqlalchemy/alembic","labels_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701/comments","events_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701/events","html_url":"https://github.com/sqlalchemy/alembic/issues/701","id":627504196,"node_id":"MDU6SXNzdWU2Mjc1MDQxOTY=","number":701,"title":"Can't use unicode in script.py.mako","user":{"login":"retnikt","id":24581770,"node_id":"MDQ6VXNlcjI0NTgxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/24581770?v=4","gravatar_id":"","url":"https://api.github.com/users/retnikt","html_url":"https://github.com/retnikt","followers_url":"https://api.github.com/users/retnikt/followers","following_url":"https://api.github.com/users/retnikt/following{/other_user}","gists_url":"https://api.github.com/users/retnikt/gists{/gist_id}","starred_url":"https://api.github.com/users/retnikt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/retnikt/subscriptions","organizations_url":"https://api.github.com/users/retnikt/orgs","repos_url":"https://api.github.com/users/retnikt/repos","events_url":"https://api.github.com/users/retnikt/events{/privacy}","received_events_url":"https://api.github.com/users/retnikt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141241832,"node_id":"MDU6TGFiZWwxMTQxMjQxODMy","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/question","name":"question","color":"d876e3","default":true,"description":"usage and API questions"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-05-29T19:54:44Z","updated_at":"2020-05-29T20:27:58Z","closed_at":"2020-05-29T20:27:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":159267771,"node_id":"MDEwOlJlcG9zaXRvcnkxNTkyNjc3NzE=","name":"alembic","full_name":"sqlalchemy/alembic","private":false,"owner":{"login":"sqlalchemy","id":6043126,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwNDMxMjY=","avatar_url":"https://avatars.githubusercontent.com/u/6043126?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy","html_url":"https://github.com/sqlalchemy","followers_url":"https://api.github.com/users/sqlalchemy/followers","following_url":"https://api.github.com/users/sqlalchemy/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy/orgs","repos_url":"https://api.github.com/users/sqlalchemy/repos","events_url":"https://api.github.com/users/sqlalchemy/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/sqlalchemy/alembic","description":"A database migrations tool for SQLAlchemy.","fork":false,"url":"https://api.github.com/repos/sqlalchemy/alembic","forks_url":"https://api.github.com/repos/sqlalchemy/alembic/forks","keys_url":"https://api.github.com/repos/sqlalchemy/alembic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sqlalchemy/alembic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sqlalchemy/alembic/teams","hooks_url":"https://api.github.com/repos/sqlalchemy/alembic/hooks","issue_events_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/events{/number}","events_url":"https://api.github.com/repos/sqlalchemy/alembic/events","assignees_url":"https://api.github.com/repos/sqlalchemy/alembic/assignees{/user}","branches_url":"https://api.github.com/repos/sqlalchemy/alembic/branches{/branch}","tags_url":"https://api.github.com/repos/sqlalchemy/alembic/tags","blobs_url":"https://api.github.com/repos/sqlalchemy/alembic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sqlalchemy/alembic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sqlalchemy/alembic/git/refs{/sha}","trees_url":"https://api.github.com/repos/sqlalchemy/alembic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sqlalchemy/alembic/statuses/{sha}","languages_url":"https://api.github.com/repos/sqlalchemy/alembic/languages","stargazers_url":"https://api.github.com/repos/sqlalchemy/alembic/stargazers","contributors_url":"https://api.github.com/repos/sqlalchemy/alembic/contributors","subscribers_url":"https://api.github.com/repos/sqlalchemy/alembic/subscribers","subscription_url":"https://api.github.com/repos/sqlalchemy/alembic/subscription","commits_url":"https://api.github.com/repos/sqlalchemy/alembic/commits{/sha}","git_commits_url":"https://api.github.com/repos/sqlalchemy/alembic/git/commits{/sha}","comments_url":"https://api.github.com/repos/sqlalchemy/alembic/comments{/number}","issue_comment_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/comments{/number}","contents_url":"https://api.github.com/repos/sqlalchemy/alembic/contents/{+path}","compare_url":"https://api.github.com/repos/sqlalchemy/alembic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sqlalchemy/alembic/merges","archive_url":"https://api.github.com/repos/sqlalchemy/alembic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sqlalchemy/alembic/downloads","issues_url":"https://api.github.com/repos/sqlalchemy/alembic/issues{/number}","pulls_url":"https://api.github.com/repos/sqlalchemy/alembic/pulls{/number}","milestones_url":"https://api.github.com/repos/sqlalchemy/alembic/milestones{/number}","notifications_url":"https://api.github.com/repos/sqlalchemy/alembic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sqlalchemy/alembic/labels{/name}","releases_url":"https://api.github.com/repos/sqlalchemy/alembic/releases{/id}","deployments_url":"https://api.github.com/repos/sqlalchemy/alembic/deployments","created_at":"2018-11-27T03:02:53Z","updated_at":"2025-11-10T06:17:20Z","pushed_at":"2025-11-05T15:38:15Z","git_url":"git://github.com/sqlalchemy/alembic.git","ssh_url":"git@github.com:sqlalchemy/alembic.git","clone_url":"https://github.com/sqlalchemy/alembic.git","svn_url":"https://github.com/sqlalchemy/alembic","homepage":"","size":4779,"stargazers_count":3747,"watchers_count":3747,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":299,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":116,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["python","sql","sqlalchemy"],"visibility":"public","forks":299,"open_issues":116,"watchers":3747,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Describe the bug**\r\nWhen creating a revision where the `script.py.mako` file contains unicode characters that are not decodeable with ASCII, an exception is produced\r\n\r\n**Expected behavior**\r\nThe unicode characters are copied correctly into the generated revision file.\r\n\r\n**To Reproduce**\r\nPlease try to provide a [Minimal, Complete, and Verifiable](http://stackoverflow.com/help/mcve) example, with the migration script and/or the SQLAlchemy tables or models involved.\r\nSee also [Reporting Bugs](https://www.sqlalchemy.org/participate.html#bugs) on the website.\r\n\r\n`script.py.mako`:\r\n```mako\r\n\"\"\"${message}\r\n\r\nRevision ID: ${up_revision}\r\nRevises: ${down_revision | comma,n}\r\nCreate Date: ${create_date}\r\nSome unicode here: Â© Ãª ðŸ˜Ž\r\n\"\"\"\r\nfrom alembic import op\r\nimport sqlalchemy as sa\r\n${imports if imports else \"\"}\r\n\r\n# revision identifiers, used by Alembic.\r\nrevision = ${repr(up_revision)}\r\ndown_revision = ${repr(down_revision)}\r\nbranch_labels = ${repr(branch_labels)}\r\ndepends_on = ${repr(depends_on)}\r\n\r\ndef upgrade():\r\n    ${upgrades if upgrades else \"pass\"}\r\n\r\n\r\ndef downgrade():\r\n    ${downgrades if downgrades else \"pass\"}\r\n\r\n```\r\nthen run\r\n```sh\r\nalembic revision -m \"foobar\"\r\n```\r\n\r\n**Error**\r\n\r\n```pytb\r\nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\r\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\r\n  Generating ...alembic/versions/90c07ba1d524_foobar.py ...  FAILED\r\nTraceback (most recent call last):\r\n  File \"...python3.8/site-packages/mako/lexer.py\", line 229, in decode_raw_stream\r\n    text = text.decode(parsed_encoding)\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 118: ordinal not in range(128)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"...bin/alembic\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"...python3.8/site-packages/alembic/config.py\", line 577, in main\r\n    CommandLine(prog=prog).main(argv=argv)\r\n  File \"...python3.8/site-packages/alembic/config.py\", line 571, in main\r\n    self.run_cmd(cfg, options)\r\n  File \"...python3.8/site-packages/alembic/config.py\", line 548, in run_cmd\r\n    fn(\r\n  File \"...python3.8/site-packages/alembic/command.py\", line 221, in revision\r\n    scripts = [script for script in revision_context.generate_scripts()]\r\n  File \"...python3.8/site-packages/alembic/command.py\", line 221, in <listcomp>\r\n    scripts = [script for script in revision_context.generate_scripts()]\r\n  File \"...python3.8/site-packages/alembic/autogenerate/api.py\", line 513, in generate_scripts\r\n    yield self._to_script(generated_revision)\r\n  File \"...python3.8/site-packages/alembic/autogenerate/api.py\", line 429, in _to_script\r\n    return self.script_directory.generate_revision(\r\n  File \"...python3.8/site-packages/alembic/script/base.py\", line 640, in generate_revision\r\n    self._generate_template(\r\n  File \"...python3.8/site-packages/alembic/script/base.py\", line 496, in _generate_template\r\n    util.status(\r\n  File \"...python3.8/site-packages/alembic/util/messaging.py\", line 52, in status\r\n    ret = fn(*arg, **kw)\r\n  File \"...python3.8/site-packages/alembic/util/pyfiles.py\", line 17, in template_to_file\r\n    template = Template(filename=template_file)\r\n  File \"...python3.8/site-packages/mako/template.py\", line 348, in __init__\r\n    module = self._compile_from_file(path, filename)\r\n  File \"...python3.8/site-packages/mako/template.py\", line 430, in _compile_from_file\r\n    code, module = _compile_text(self, data, filename)\r\n  File \"...python3.8/site-packages/mako/template.py\", line 733, in _compile_text\r\n    source, lexer = _compile(\r\n  File \"...python3.8/site-packages/mako/template.py\", line 712, in _compile\r\n    node = lexer.parse()\r\n  File \"...python3.8/site-packages/mako/lexer.py\", line 243, in parse\r\n    self.encoding, self.text = self.decode_raw_stream(\r\n  File \"...python3.8/site-packages/mako/lexer.py\", line 231, in decode_raw_stream\r\n    raise exceptions.CompileException(\r\nmako.exceptions.CompileException: Unicode decode operation of encoding 'ascii' failed in file 'alembic/script.py.mako' at line: 0 char: 0\r\n```\r\n\r\n**Versions.**\r\n - OS: Linux\r\n - Python: 3.8.3\r\n - Alembic: 1.4.2\r\n - SQLAlchemy: 1.3.17\r\n - Database: PostgreSQL 12\r\n - DBAPI: psycopg2 2.8.5\r\n\r\n**Additional context**\r\nIt seems you need to pass `input_encoding='utf-8'` and `output_encoding='utf-8'` when loading the template. ([source](https://stackoverflow.com/questions/4497515/unicodeencodeerror-in-mako-template))\r\n\r\n**Have a nice day!**\r\n","reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/701/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]