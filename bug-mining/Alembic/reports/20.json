{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201","repository_url":"https://api.github.com/repos/sqlalchemy/alembic","labels_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201/labels{/name}","comments_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201/comments","events_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201/events","html_url":"https://github.com/sqlalchemy/alembic/issues/201","id":384601491,"node_id":"MDU6SXNzdWUzODQ2MDE0OTE=","number":201,"title":"transaction-dependent migrations / \"pending trigger events\" error with Postgresql","user":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141241826,"node_id":"MDU6TGFiZWwxMTQxMjQxODI2","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1141243076,"node_id":"MDU6TGFiZWwxMTQxMjQzMDc2","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/high%20priority","name":"high priority","color":"8030B0","default":false,"description":null},{"id":1141243801,"node_id":"MDU6TGFiZWwxMTQxMjQzODAx","url":"https://api.github.com/repos/sqlalchemy/alembic/labels/execution%20model","name":"execution model","color":"10D040","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2014-05-02T02:23:33Z","updated_at":"2016-02-10T23:23:26Z","closed_at":"2014-05-02T19:46:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Migrated issue, originally created by Jack Zhou ([@univerio](https://github.com/univerio))**\n\nIt seems by default alembic runs a sequence of migrations in a single transaction. However, this causes problems in e.g. PostgreSQL where certain queries cannot run together in the same transaction and fail with an error like:\n\n```\n#!\n\nsqlalchemy.exc.OperationalError: (OperationalError) cannot ALTER TABLE \"some_table\" because it has pending trigger events\n```\n\nBecause of this, upgrading a database from `None` to `head` all at once might fail while upgrading one `None` to `<intermediate_revision>` and then from `<intermediate_revision>` to `head` would succeed.\n\nIt would be helpful to have the option of running each migration in its own transaction (which means alembic would stop at the first failed migration without rolling back all the previous migrations).\n\n----------------------------------------\nAttachments: [201.patch](../wiki/imported_issue_attachments/201/201.patch)\n\n","closed_by":{"login":"sqlalchemy-bot","id":36047385,"node_id":"MDQ6VXNlcjM2MDQ3Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/36047385?v=4","gravatar_id":"","url":"https://api.github.com/users/sqlalchemy-bot","html_url":"https://github.com/sqlalchemy-bot","followers_url":"https://api.github.com/users/sqlalchemy-bot/followers","following_url":"https://api.github.com/users/sqlalchemy-bot/following{/other_user}","gists_url":"https://api.github.com/users/sqlalchemy-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/sqlalchemy-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sqlalchemy-bot/subscriptions","organizations_url":"https://api.github.com/users/sqlalchemy-bot/orgs","repos_url":"https://api.github.com/users/sqlalchemy-bot/repos","events_url":"https://api.github.com/users/sqlalchemy-bot/events{/privacy}","received_events_url":"https://api.github.com/users/sqlalchemy-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sqlalchemy/alembic/issues/201/timeline","performed_via_github_app":null,"state_reason":"completed"}