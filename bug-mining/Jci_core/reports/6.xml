<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sun Nov 09 05:55:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCI-59] Eclipse compiler is unable to compile additional top-level classes</title>
                <link>https://issues.apache.org/jira/browse/JCI-59</link>
                <project id="12310650" key="JCI">Commons JCI</project>
                    <description>&lt;p&gt;When using the Eclipse compiler, I am unable to compile additional top-level classes. For example,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; jci;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Simple {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Simple&quot;&lt;/span&gt;;
     }
}
 &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AdditionalTopLevel {
       &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;AdditionalTopLevel&quot;&lt;/span&gt;;
       }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Causes the compile &lt;del&gt;error&lt;/del&gt; warning: The type AdditionalTopLevel collides with a package.&lt;/p&gt;

&lt;p&gt;This works fine with the Javac compiler and the Janino compiler.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12412218">JCI-59</key>
            <summary>Eclipse compiler is unable to compile additional top-level classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tcurdt">Torsten Curdt</assignee>
                                    <reporter username="jly">Jingkei Ly</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Jan 2009 18:28:36 +0000</created>
                <updated>Tue, 8 Oct 2013 10:36:24 +0000</updated>
                                            <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>compiler eclipse</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12663033" author="jly" created="Mon, 12 Jan 2009 18:34:19 +0000"  >&lt;p&gt;I&apos;ve attached a test case that demonstrates this problem (in the form of a patch to the existing AbstractCompilerTestCase, let me know if you want me to split it out).&lt;/p&gt;</comment>
                            <comment id="13032902" author="tcurdt" created="Fri, 13 May 2011 08:20:51 +0000"  >&lt;p&gt;Thanks for the test case&lt;/p&gt;</comment>
                            <comment id="13691567" author="sebb@apache.org" created="Sun, 23 Jun 2013 19:34:11 +0000"  >&lt;p&gt;The code snippet compiles OK for me in the Eclipse IDE; perhaps the compiler bug has been fixed.&lt;/p&gt;</comment>
                            <comment id="13691601" author="ebourg" created="Sun, 23 Jun 2013 21:03:06 +0000"  >&lt;p&gt;I updated the dependency on ecj to 4.2.2 and the test still fails.&lt;/p&gt;</comment>
                            <comment id="13743281" author="sebb@apache.org" created="Sun, 18 Aug 2013 17:04:04 +0000"  >&lt;p&gt;The code also compiles OK with command line ecj and with the class&lt;br/&gt;
org.eclipse.jdt.core.compiler.batch.BatchCompiler&lt;/p&gt;

&lt;p&gt;Note that the test failure is a compiler warning, not an error - the compiler actually generates code for the two classes.&lt;/p&gt;</comment>
                            <comment id="13743362" author="sebb@apache.org" created="Sun, 18 Aug 2013 20:31:27 +0000"  >&lt;p&gt;I think I&apos;ve discovered the cause of the problem.&lt;/p&gt;

&lt;p&gt;The method INameEnvironment#isPackage(char[][], char[]) in the class EclipseJavaCompiler is returning true for the entry (jci, AdditionalTopLevel) - however of course it is not a package.&lt;/p&gt;

&lt;p&gt;It returns true because the code checks to see whether the it can find either the class file or the source file.&lt;br/&gt;
If it finds neither, it assumes that the item is a package, which of course is not the case here.&lt;/p&gt;

&lt;p&gt;I don&apos;t (yet) know how to fix this. Perhaps there is a simple way to keep track of packages?&lt;/p&gt;</comment>
                            <comment id="13745879" author="sebb@apache.org" created="Wed, 21 Aug 2013 08:52:59 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1516115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1516115&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/JCI-59&quot; title=&quot;Eclipse compiler is unable to compile additional top-level classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCI-59&quot;&gt;JCI-59&lt;/a&gt; Allow the tests to complete without completely ignoring the failure, which still needs to be fixed.&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/jci/trunk/compilers/eclipse/src/test/java/org/apache/commons/jci/compilers/EclipseJavaCompilerTestCase.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397703" name="JCI-59-testcase-1.patch" size="2310" author="jly" created="Mon, 12 Jan 2009 18:34:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>141819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a36v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>266983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>