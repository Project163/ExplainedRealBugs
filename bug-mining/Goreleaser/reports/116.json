{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194/events","html_url":"https://github.com/goreleaser/goreleaser/issues/2194","id":872545863,"node_id":"MDU6SXNzdWU4NzI1NDU4NjM=","number":2194,"title":"Don't fail if snapcraft requires manual review of snaps","user":{"login":"Envek","id":264400,"node_id":"MDQ6VXNlcjI2NDQwMA==","avatar_url":"https://avatars.githubusercontent.com/u/264400?v=4","gravatar_id":"","url":"https://api.github.com/users/Envek","html_url":"https://github.com/Envek","followers_url":"https://api.github.com/users/Envek/followers","following_url":"https://api.github.com/users/Envek/following{/other_user}","gists_url":"https://api.github.com/users/Envek/gists{/gist_id}","starred_url":"https://api.github.com/users/Envek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Envek/subscriptions","organizations_url":"https://api.github.com/users/Envek/orgs","repos_url":"https://api.github.com/users/Envek/repos","events_url":"https://api.github.com/users/Envek/events{/privacy}","received_events_url":"https://api.github.com/users/Envek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976497,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTc=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-30T13:49:46Z","updated_at":"2021-06-20T03:04:35Z","closed_at":"2021-05-21T02:53:43Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nI had to switch to classic confinement in snap packaging as our [users were complaining that our tool isn't working if installed from Snap store](https://github.com/evilmartians/lefthook/issues/161), but when I tried to release the first release with that change release failed:\r\n\r\n```\r\n   • publishing\r\n      • snapcraft packages\r\n         • pushing snap              snap=lefthook_0.7.4_linux_amd64.snap\r\n         • pushing snap              snap=lefthook_0.7.4_linux_386.snap\r\n         • pushing snap              snap=lefthook_0.7.4_linux_arm64.snap\r\n         • Waiting for previous upload(s) to complete their review process. snap=lefthook_0.7.4_linux_amd64.snap\r\n         • Waiting for previous upload(s) to complete their review process. snap=lefthook_0.7.4_linux_386.snap\r\n   ⨯ release failed after 18.48s error=snapcraft packages: failed to publish artifacts: failed to push dist/lefthook_0.7.4_linux_arm64.snap package: DEPRECATED: Use 'push' instead of 'upload'\r\nPushing lefthook_0.7.4_linux_arm64.snap\r\nAfter pushing, an attempt will be made to release to 'stable'\r\nPreparing to push '/home/envek/Code/lefthook/dist/lefthook_0.7.4_linux_arm64.snap' to the store.\r\nPushing lefthook_0.7.4_linux_arm64.snap [================================] 100%\r\nProcessing...|                                                                 \r\nWill need manual review...\r\nThe Store automatic review failed.\r\nA human will soon review your snap, but if you can't wait please write in the snapcraft forum asking for the manual review explicitly.\r\nIf you need to disable confinement, please consider using devmode, but note that devmode revision will only be allowed to be released in edge and beta channels.\r\nPlease check the errors and some hints below:\r\n  - (NEEDS REVIEW) confinement 'classic' not allowed. If your snap needs classic confinement to function, please make a request for this snap to use classic by creating a new topic in the forum using the 'store-requests' category and detail the technical reasons why classic is required.\r\n```\r\n\r\nHowever, snaps were successfully uploaded and now just waiting for approval by Snap store moderators:\r\n![image](https://user-images.githubusercontent.com/264400/116703888-74573d00-a9d3-11eb-98e7-0639fd360f62.png)\r\n\r\nSo I believe that there is no sense to fail and abort the whole releasing process.\r\n\r\n**To Reproduce**\r\n\r\n```yaml\r\nsnapcrafts:\r\n  -\r\n    summary: …\r\n    description: …\r\n    grade: stable\r\n    confinement: classic # ← THIS (was strict)\r\n    publish: true\r\n    license: MIT\r\n```\r\nFull config can be found here: https://github.com/evilmartians/lefthook/blob/2e6bfe9c2d57d72ed4e8f8972d8a38567fe7ac96/.goreleaser.yml\r\n\r\n**Expected behavior**\r\n\r\nSnaps are uploaded with warning and releasing is continued.\r\n\r\n**Environment:**\r\n\r\n- OS: Linux\r\n- OS version: `Linux Envek-XPS 5.4.0-72-generic #80~18.04.1-Ubuntu SMP Mon Apr 12 23:26:25 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux`\r\n- GoReleaser version: `goreleaser version dev\r\nmodule version: v0.164.0, checksum: h1:w0zTtZSg9exA+eUoaFuZiJ5UuHaMom/TgXQvySAEJiY=`\r\n\r\n**Additional context**\r\n\r\nSomewhat similar issue I found is https://github.com/goreleaser/goreleaser/issues/1066 and fixing it PR is https://github.com/goreleaser/goreleaser/pull/1070 (hope it helps)\r\n\r\nAnd thank you for GoReleaser as it really automates a lot of things!","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/2194/timeline","performed_via_github_app":null,"state_reason":"completed"}