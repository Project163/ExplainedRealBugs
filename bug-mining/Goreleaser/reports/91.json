{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967/events","html_url":"https://github.com/goreleaser/goreleaser/issues/967","id":414242545,"node_id":"MDU6SXNzdWU0MTQyNDI1NDU=","number":967,"title":"private homebrew taps reporting uninitialized constant GitHubPrivateRepositoryReleaseDownloadStrategy","user":{"login":"wayneashleyberry","id":727262,"node_id":"MDQ6VXNlcjcyNzI2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/727262?v=4","gravatar_id":"","url":"https://api.github.com/users/wayneashleyberry","html_url":"https://github.com/wayneashleyberry","followers_url":"https://api.github.com/users/wayneashleyberry/followers","following_url":"https://api.github.com/users/wayneashleyberry/following{/other_user}","gists_url":"https://api.github.com/users/wayneashleyberry/gists{/gist_id}","starred_url":"https://api.github.com/users/wayneashleyberry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wayneashleyberry/subscriptions","organizations_url":"https://api.github.com/users/wayneashleyberry/orgs","repos_url":"https://api.github.com/users/wayneashleyberry/repos","events_url":"https://api.github.com/users/wayneashleyberry/events{/privacy}","received_events_url":"https://api.github.com/users/wayneashleyberry/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2019-02-25T18:26:00Z","updated_at":"2020-11-18T22:13:34Z","closed_at":"2019-08-31T13:33:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nThe code generated for a homebrew formula does not seem to be working.\r\n\r\nThe formula is successfully published to a `homebrew-tap` repo:\r\n\r\n```ruby\r\n# This file was generated by GoReleaser. DO NOT EDIT.\r\nclass PrivateRepo < Formula\r\n  desc \"\"\r\n  homepage \"https://github.com/wayneashleyberry/private-repo\"\r\n  url \"https://github.com/wayneashleyberry/private-repo/releases/download/v2.5.7/private-repo_2.5.7_darwin_amd64.tar.gz\", :using => GitHubPrivateRepositoryReleaseDownloadStrategy\r\n  version \"2.5.7\"\r\n  sha256 \"825e071979d2ec25ef9f5dc533556991822816510e2c3abbbbc099fa53f2a3a9\"\r\n\r\n  def install\r\n    bin.install \"foo\"\r\n  end\r\n\r\n  test do\r\n    system \"#{bin}/foo version\"\r\n  end\r\nend\r\n```\r\n\r\nI try and tap, but get the following error:\r\n\r\n```\r\nprivate-repo: uninitialized constant #<Class:0x00007fa86027a348>::GitHubPrivateRepositoryReleaseDownloadStrategy\r\n```\r\n\r\nFull snippet:\r\n\r\n```sh\r\nbash-5.0$ brew tap wayneashleyberry/homebrew-tap\r\nUpdating Homebrew...\r\n==> Tapping wayneashleyberry/tap\r\nCloning into '/usr/local/Homebrew/Library/Taps/wayneashleyberry/homebrew-tap'...\r\nremote: Enumerating objects: 4, done.\r\nremote: Counting objects: 100% (4/4), done.\r\nremote: Compressing objects: 100% (2/2), done.\r\nremote: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0\r\nReceiving objects: 100% (4/4), done.\r\nError: Invalid formula: /usr/local/Homebrew/Library/Taps/wayneashleyberry/homebrew-tap/Formula/private-repo.rb\r\nprivate-repo: uninitialized constant #<Class:0x00007fa86027a348>::GitHubPrivateRepositoryReleaseDownloadStrategy\r\nError: Cannot tap wayneashleyberry/tap: invalid syntax in tap!\r\nbash-5.0$\r\n```\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\n\r\n```yaml\r\n# This is an example goreleaser.yaml file with some sane defaults.\r\n# Make sure to check the documentation at http://goreleaser.com\r\nbefore:\r\n  hooks:\r\n    - rm -fr dist\r\n    - packr2 clean\r\n    - golangci-lint run\r\n    - go test\r\n    - go mod download\r\n    - packr2\r\n\r\nbuilds:\r\n  -\r\n    main: main.go\r\n    binary: foo\r\n    hooks:\r\n      post: packr2 clean\r\n\r\nbrew:\r\n  github:\r\n    owner: wayneashleyberry\r\n    name: homebrew-tap\r\n\r\n  # Allows you to set a custom download strategy.\r\n  download_strategy: GitHubPrivateRepositoryReleaseDownloadStrategy\r\n\r\n  # Folder inside the repository to put the formula.\r\n  folder: Formula\r\n\r\n  # Your app's homepage.\r\n  homepage: \"https://github.com/wayneashleyberry/private-repo\"\r\n\r\n  # So you can `brew test` your formula.\r\n  test: |\r\n    system \"#{bin}/foo version\"\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI should be able to `brew tap` and `brew install` my binary.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- OS: macOS\r\n- OS version: `Darwin Your-Mother.local 18.2.0 Darwin Kernel Version 18.2.0: Thu Dec 20 20:46:53 PST 2018; root:xnu-4903.241.1~1/RELEASE_X86_64 x86_64`\r\n- GoReleaser Version [`0.101.0, commit none, built at unknown`]\r\n- Homebrew\r\n```\r\nHomebrew 2.0.2\r\nHomebrew/homebrew-core (git revision da385; last commit 2019-02-25)\r\nHomebrew/homebrew-cask (git revision b01f6; last commit 2019-02-25)\r\n```","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/967/timeline","performed_via_github_app":null,"state_reason":"completed"}