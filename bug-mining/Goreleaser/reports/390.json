{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865/events","html_url":"https://github.com/goreleaser/goreleaser/issues/5865","id":3189456125,"node_id":"I_kwDOBJgEXs6-Gzz9","number":5865,"title":"Combining MUSL/GNU rust targets in single builder on same platform causes archive step to fail in CI","user":{"login":"andriygm","id":7087461,"node_id":"MDQ6VXNlcjcwODc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/7087461?v=4","gravatar_id":"","url":"https://api.github.com/users/andriygm","html_url":"https://github.com/andriygm","followers_url":"https://api.github.com/users/andriygm/followers","following_url":"https://api.github.com/users/andriygm/following{/other_user}","gists_url":"https://api.github.com/users/andriygm/gists{/gist_id}","starred_url":"https://api.github.com/users/andriygm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andriygm/subscriptions","organizations_url":"https://api.github.com/users/andriygm/orgs","repos_url":"https://api.github.com/users/andriygm/repos","events_url":"https://api.github.com/users/andriygm/events{/privacy}","received_events_url":"https://api.github.com/users/andriygm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976497,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTc=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"},{"id":7846251421,"node_id":"LA_kwDOBJgEXs8AAAAB06xLnQ","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/eco/rust","name":"eco/rust","color":"DFDFA1","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2025-06-30T18:25:34Z","updated_at":"2025-07-01T02:32:30Z","closed_at":"2025-07-01T02:32:30Z","author_association":"NONE","type":{"id":5584132,"node_id":"IT_kwDOAXjZGM4AVTUE","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-30T07:57:26Z","updated_at":"2024-07-26T11:30:17Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Opening this issue as a result of the discussion here: https://discord.com/channels/890434333251362866/890434334803247126/1389307061380055231\n\nCurrently, combining MUSL/GNU rust targets in a single builder on the same platform causes the archive step to fail due to multiple binaries moving to the same path. It looks like archive step is per OS/arch combo instead of per target.\n\nIn CI, get an error like:\n```\n  • archives\n    • will not set artifact-related template fields  reason=archive contains more than 1 binary\n    • archiving                                      name=dist/linux/archive-bug-mre_Linux_x86_64.tar.gz\n  ⨯ release failed after 1m14s               error=failed to add: 'dist/linux/archive-bug-mre_x86_64-unknown-linux-musl/archive-bug-mre' -> 'archive-bug-mre': add archive-bug-mre: file already exists\n```\n\nMinimum reproducible example: https://github.com/andriygm/archive-bug-mre/actions/runs/15980219055/job/45072648326\n","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5865/timeline","performed_via_github_app":null,"state_reason":"completed"}