{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951/events","html_url":"https://github.com/goreleaser/goreleaser/issues/3951","id":1680075305,"node_id":"I_kwDOBJgEXs5kI-op","number":3951,"title":"Support Matrix Parameters for Artifactory Uploads","user":{"login":"mbamber","id":11615823,"node_id":"MDQ6VXNlcjExNjE1ODIz","avatar_url":"https://avatars.githubusercontent.com/u/11615823?v=4","gravatar_id":"","url":"https://api.github.com/users/mbamber","html_url":"https://github.com/mbamber","followers_url":"https://api.github.com/users/mbamber/followers","following_url":"https://api.github.com/users/mbamber/following{/other_user}","gists_url":"https://api.github.com/users/mbamber/gists{/gist_id}","starred_url":"https://api.github.com/users/mbamber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbamber/subscriptions","organizations_url":"https://api.github.com/users/mbamber/orgs","repos_url":"https://api.github.com/users/mbamber/repos","events_url":"https://api.github.com/users/mbamber/events{/privacy}","received_events_url":"https://api.github.com/users/mbamber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976499,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTk=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-04-23T15:59:06Z","updated_at":"2023-06-06T03:46:54Z","closed_at":"2023-04-23T17:22:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Is your feature request related to a problem? Please describe.\n\nArtifactory supports [matrix parameters](https://jfrog.com/help/r/jfrog-artifactory-documentation/using-properties-in-deployment-and-resolution) to add properties to artifacts upon deployment. It does not appear that these matrix parameters are handled correctly due to goreleaser automatically adding the artifact name to the end of the deployment URL e.g.\r\n\r\nWith a configuration snippet as follows:\r\n```yaml\r\nartifactories:\r\n  -\r\n    name: default\r\n    exts:\r\n      - deb\r\n    target: my.jfrog.io/artifactory/repo/pool;deb.component=impish\r\n```\r\n\r\nThe generated upload url (from `goreleaser release --debug`) is `https://my.jfrog.io/artifactory/repo/pool;deb.component=impish/artifact.deb` which results in my artifact being uploaded incorrectly, as the `deb.component` property is set to `impish/artifact.deb` \n\n### Describe the solution you'd like\n\nI would like to be able to specify matrix parameters as part of the config file:\r\n```yaml\r\nartifactories:\r\n  -\r\n    name: default\r\n    exts:\r\n      - deb\r\n    target: my.jfrog.io/artifactory/repo/pool\r\n    parameters:\r\n      \"deb.component\": impish\r\n      \"another_parameter\": somethingElse\r\n```\r\n\r\nNote, parameter names must be able to contain a dot (`.`).\n\n### Describe alternatives you've considered\n\nI have tried placing these matrix parameters at various places within the `target` parameter (as the Artifactory docs seem to suggest this should be possible), but none of these seem to work. In any case, it would be much more simple and far more readable for the parameters to be defined separately.\n\n### Search\n\n- [X] I did search for other open and closed issues before opening this.\n\n### Code of Conduct\n\n- [X] I agree to follow this project's Code of Conduct\n\n### Additional context\n\n_No response_","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/3951/timeline","performed_via_github_app":null,"state_reason":"completed"}