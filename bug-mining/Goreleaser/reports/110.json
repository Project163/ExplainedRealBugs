{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855/events","html_url":"https://github.com/goreleaser/goreleaser/issues/1855","id":720798945,"node_id":"MDU6SXNzdWU3MjA3OTg5NDU=","number":1855,"title":"Support option to allow archive with different binary count for a given platform","user":{"login":"ChrisRx","id":1930145,"node_id":"MDQ6VXNlcjE5MzAxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1930145?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisRx","html_url":"https://github.com/ChrisRx","followers_url":"https://api.github.com/users/ChrisRx/followers","following_url":"https://api.github.com/users/ChrisRx/following{/other_user}","gists_url":"https://api.github.com/users/ChrisRx/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisRx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisRx/subscriptions","organizations_url":"https://api.github.com/users/ChrisRx/orgs","repos_url":"https://api.github.com/users/ChrisRx/repos","events_url":"https://api.github.com/users/ChrisRx/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisRx/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976499,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTk=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-10-13T20:33:29Z","updated_at":"2020-11-18T18:31:42Z","closed_at":"2020-10-13T20:57:09Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nA change in behavior was introduced recently (in #1841, proposed as a solution to #1780), that causes goreleaser to error when the count of binaries does not match for each platform within an archive.  In situations where this is expressly desired, there is no way to circumvent this check.\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior can be found in the following goreleaser config:\r\n\r\nhttps://github.com/criticalstack/crit/blob/a8ec49adbc86e953b6e89634a01cd9873c29d102/.goreleaser.yml\r\n\r\nwhere two binaries are defined within a build and the `goarch` is different between the two binaries.  Here the second binary does not specify additional architectures, causing the count of binaries per platform to be different.\r\n\r\n**Expected behavior**\r\n\r\nAs a user of goreleaser I want the option to disable this check when it is expressly not wanted/needed.  In situations like with this project:  https://github.com/criticalstack/crit there are two binaries in a given archive, one a Kubernetes bootstrapping tool, the other binary a [kind-like](https://kind.sigs.k8s.io/) container-in-container tool only for testing/local development.  The bootstrapping tool can run on multiple architectures like arm64, while the testing tool does not at this time.  It is nice with installer scripts like [this](https://github.com/criticalstack/crit/blob/main/scripts/install.sh) to simply install the contents of a given archive if it is supported (which also omits them when they are not).","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/1855/timeline","performed_via_github_app":null,"state_reason":"completed"}