[{"id":13630931560,"node_id":"LE_lADOBJgEXs6QsvahzwAAAAMsd4Jo","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13630931560","actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-24T13:48:44Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"id":13630931568,"node_id":"LE_lADOBJgEXs6QsvahzwAAAAMsd4Jw","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13630931568","actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-24T13:48:44Z","label":{"name":"triage","color":"F3079A"},"performed_via_github_app":null},{"id":13630931597,"node_id":"AE_lADOBJgEXs6QsvahzwAAAAMsd4KN","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13630931597","actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-07-24T13:48:44Z","assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":13631115801,"node_id":"UNLE_lADOBJgEXs6QsvahzwAAAAMselIZ","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13631115801","actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-07-24T14:00:55Z","label":{"name":"triage","color":"F3079A"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248049782","html_url":"https://github.com/goreleaser/goreleaser/issues/5023#issuecomment-2248049782","issue_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5023","id":2248049782,"node_id":"IC_kwDOBJgEXs6F_oR2","user":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T14:01:14Z","updated_at":"2024-07-24T14:01:14Z","body":"it is how it worked since forever, but I guess we can change it","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248049782/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248060441","html_url":"https://github.com/goreleaser/goreleaser/issues/5023#issuecomment-2248060441","issue_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5023","id":2248060441,"node_id":"IC_kwDOBJgEXs6F_q4Z","user":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T14:05:04Z","updated_at":"2024-07-24T14:05:04Z","body":"I know this _bug_ report is borderline bug because I also never noticed it until I forgot recently to add the dist directory and started to see this error on a release (non snapshot) build. First I got very confused (due to using --clean and thus expecting dist/ not to be a problem). Then I realized what is happening.\r\n\r\nI appreciate that you consider this a \"problem\" enough to want to change it. Cheers!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248060441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248458771","html_url":"https://github.com/goreleaser/goreleaser/issues/5023#issuecomment-2248458771","issue_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5023","id":2248458771,"node_id":"IC_kwDOBJgEXs6GBMIT","user":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T16:37:12Z","updated_at":"2024-07-24T22:32:10Z","body":"If you agree with fixing this, I'm willing to help implementing it. üëç \r\n\r\nEDIT: I got some time and looked into this. The following diff seems to do the trick and the tests are all still passing:\r\n```diff\r\ndiff --git a/internal/pipeline/pipeline.go b/internal/pipeline/pipeline.go\r\nindex fb30e415..7ea1ad1b 100644\r\n--- a/internal/pipeline/pipeline.go\r\n+++ b/internal/pipeline/pipeline.go\r\n@@ -56,20 +56,20 @@ type Piper interface {\r\n var BuildPipeline = []Piper{\r\n \t// load and validate environment variables\r\n \tenv.Pipe{},\r\n+\t// load default configs\r\n+\tdefaults.Pipe{},\r\n+\t// ensure ./dist is clean\r\n+\tdist.Pipe{},\r\n \t// get and validate git repo state\r\n \tgit.Pipe{},\r\n \t// parse current tag to a semver\r\n \tsemver.Pipe{},\r\n-\t// load default configs\r\n-\tdefaults.Pipe{},\r\n \t// setup things for partial builds/releases\r\n \tpartial.Pipe{},\r\n \t// snapshot version handling\r\n \tsnapshot.Pipe{},\r\n \t// run global hooks before build\r\n \tbefore.Pipe{},\r\n-\t// ensure ./dist is clean\r\n-\tdist.Pipe{},\r\n \t// setup metadata options\r\n \tmetadata.Pipe{},\r\n \t// creates a metadta.json files in the dist directory\r\n```\r\n\r\nAdded bonus is that GoReleaser fails faster if the dist directory is present and `--clean` was not passed.\r\nLet me know if you are happy with this change and I can submit it as a PR.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments/2248458771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13795281476,"node_id":"REFE_lADOBJgEXs6QsvahzwAAAAM2Q0pE","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13795281476","actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9332754c788c1d92780948b91397d2ba1bdc177a","commit_url":"https://api.github.com/repos/goreleaser/goreleaser/commits/9332754c788c1d92780948b91397d2ba1bdc177a","created_at":"2024-08-07T16:51:47Z","performed_via_github_app":null},{"actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-07T16:52:15Z","updated_at":"2024-08-07T16:52:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057/events","html_url":"https://github.com/goreleaser/goreleaser/pull/5057","id":2453920884,"node_id":"PR_kwDOBJgEXs53vI41","number":5057,"title":"feat: when --clean, remove dist before checking git state","user":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976499,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTk=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"},{"id":2081259334,"node_id":"MDU6TGFiZWwyMDgxMjU5MzM0","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/size/M","name":"size/M","color":"eebb00","default":false,"description":"Denotes a PR that changes 30-99 lines, ignoring generated files."}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2024-08-07T16:52:14Z","updated_at":"2024-08-08T13:14:32Z","closed_at":"2024-08-08T13:14:30Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":77071454,"node_id":"MDEwOlJlcG9zaXRvcnk3NzA3MTQ1NA==","name":"goreleaser","full_name":"goreleaser/goreleaser","private":false,"owner":{"login":"goreleaser","id":24697112,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0Njk3MTEy","avatar_url":"https://avatars.githubusercontent.com/u/24697112?v=4","gravatar_id":"","url":"https://api.github.com/users/goreleaser","html_url":"https://github.com/goreleaser","followers_url":"https://api.github.com/users/goreleaser/followers","following_url":"https://api.github.com/users/goreleaser/following{/other_user}","gists_url":"https://api.github.com/users/goreleaser/gists{/gist_id}","starred_url":"https://api.github.com/users/goreleaser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goreleaser/subscriptions","organizations_url":"https://api.github.com/users/goreleaser/orgs","repos_url":"https://api.github.com/users/goreleaser/repos","events_url":"https://api.github.com/users/goreleaser/events{/privacy}","received_events_url":"https://api.github.com/users/goreleaser/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/goreleaser/goreleaser","description":"Release engineering, simplified","fork":false,"url":"https://api.github.com/repos/goreleaser/goreleaser","forks_url":"https://api.github.com/repos/goreleaser/goreleaser/forks","keys_url":"https://api.github.com/repos/goreleaser/goreleaser/keys{/key_id}","collaborators_url":"https://api.github.com/repos/goreleaser/goreleaser/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/goreleaser/goreleaser/teams","hooks_url":"https://api.github.com/repos/goreleaser/goreleaser/hooks","issue_events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events{/number}","events_url":"https://api.github.com/repos/goreleaser/goreleaser/events","assignees_url":"https://api.github.com/repos/goreleaser/goreleaser/assignees{/user}","branches_url":"https://api.github.com/repos/goreleaser/goreleaser/branches{/branch}","tags_url":"https://api.github.com/repos/goreleaser/goreleaser/tags","blobs_url":"https://api.github.com/repos/goreleaser/goreleaser/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/goreleaser/goreleaser/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/goreleaser/goreleaser/git/refs{/sha}","trees_url":"https://api.github.com/repos/goreleaser/goreleaser/git/trees{/sha}","statuses_url":"https://api.github.com/repos/goreleaser/goreleaser/statuses/{sha}","languages_url":"https://api.github.com/repos/goreleaser/goreleaser/languages","stargazers_url":"https://api.github.com/repos/goreleaser/goreleaser/stargazers","contributors_url":"https://api.github.com/repos/goreleaser/goreleaser/contributors","subscribers_url":"https://api.github.com/repos/goreleaser/goreleaser/subscribers","subscription_url":"https://api.github.com/repos/goreleaser/goreleaser/subscription","commits_url":"https://api.github.com/repos/goreleaser/goreleaser/commits{/sha}","git_commits_url":"https://api.github.com/repos/goreleaser/goreleaser/git/commits{/sha}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/comments{/number}","issue_comment_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments{/number}","contents_url":"https://api.github.com/repos/goreleaser/goreleaser/contents/{+path}","compare_url":"https://api.github.com/repos/goreleaser/goreleaser/compare/{base}...{head}","merges_url":"https://api.github.com/repos/goreleaser/goreleaser/merges","archive_url":"https://api.github.com/repos/goreleaser/goreleaser/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/goreleaser/goreleaser/downloads","issues_url":"https://api.github.com/repos/goreleaser/goreleaser/issues{/number}","pulls_url":"https://api.github.com/repos/goreleaser/goreleaser/pulls{/number}","milestones_url":"https://api.github.com/repos/goreleaser/goreleaser/milestones{/number}","notifications_url":"https://api.github.com/repos/goreleaser/goreleaser/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/labels{/name}","releases_url":"https://api.github.com/repos/goreleaser/goreleaser/releases{/id}","deployments_url":"https://api.github.com/repos/goreleaser/goreleaser/deployments","created_at":"2016-12-21T17:13:39Z","updated_at":"2025-11-10T08:11:52Z","pushed_at":"2025-11-10T08:11:48Z","git_url":"git://github.com/goreleaser/goreleaser.git","ssh_url":"git@github.com:goreleaser/goreleaser.git","clone_url":"https://github.com/goreleaser/goreleaser.git","svn_url":"https://github.com/goreleaser/goreleaser","homepage":"https://goreleaser.com","size":25141,"stargazers_count":15265,"watchers_count":15265,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1030,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":32,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["announcements","github-actions","hacktoberfest","package","release-automation","release-engineering"],"visibility":"public","forks":1030,"open_issues":32,"watchers":15265,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/goreleaser/goreleaser/pulls/5057","html_url":"https://github.com/goreleaser/goreleaser/pull/5057","diff_url":"https://github.com/goreleaser/goreleaser/pull/5057.diff","patch_url":"https://github.com/goreleaser/goreleaser/pull/5057.patch","merged_at":"2024-08-08T13:14:29Z"},"body":"closes #5023\r\ncloses #5046\r\n","reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5057/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13806781841,"node_id":"CE_lADOBJgEXs6QsvahzwAAAAM28sWR","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13806781841","actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-08-08T13:14:31Z","state_reason":null,"performed_via_github_app":null},{"id":13806781886,"node_id":"REFE_lADOBJgEXs6QsvahzwAAAAM28sW-","url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events/13806781886","actor":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b6f9c8b9ca520d7fa6f01a087a1534e01f0bb032","commit_url":"https://api.github.com/repos/goreleaser/goreleaser/commits/b6f9c8b9ca520d7fa6f01a087a1534e01f0bb032","created_at":"2024-08-08T13:14:31Z","performed_via_github_app":null},{"actor":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-23T12:38:49Z","updated_at":"2024-08-23T12:38:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024/events","html_url":"https://github.com/goreleaser/goreleaser/issues/5024","id":2428029303,"node_id":"I_kwDOBJgEXs6QuMl3","number":5024,"title":"[build] add command-line flag for setting `builds.no_unique_dist_dir`","user":{"login":"hhromic","id":5802993,"node_id":"MDQ6VXNlcjU4MDI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5802993?v=4","gravatar_id":"","url":"https://api.github.com/users/hhromic","html_url":"https://github.com/hhromic","followers_url":"https://api.github.com/users/hhromic/followers","following_url":"https://api.github.com/users/hhromic/following{/other_user}","gists_url":"https://api.github.com/users/hhromic/gists{/gist_id}","starred_url":"https://api.github.com/users/hhromic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhromic/subscriptions","organizations_url":"https://api.github.com/users/hhromic/orgs","repos_url":"https://api.github.com/users/hhromic/repos","events_url":"https://api.github.com/users/hhromic/events{/privacy}","received_events_url":"https://api.github.com/users/hhromic/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976499,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTk=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"},{"id":3668917352,"node_id":"LA_kwDOBJgEXs7arzxo","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/triage","name":"triage","color":"F3079A","default":false,"description":"Issue pending triage by one of the maintainers"}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":8,"created_at":"2024-07-24T16:36:33Z","updated_at":"2024-09-07T14:20:19Z","closed_at":"2024-09-07T14:09:07Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":77071454,"node_id":"MDEwOlJlcG9zaXRvcnk3NzA3MTQ1NA==","name":"goreleaser","full_name":"goreleaser/goreleaser","private":false,"owner":{"login":"goreleaser","id":24697112,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0Njk3MTEy","avatar_url":"https://avatars.githubusercontent.com/u/24697112?v=4","gravatar_id":"","url":"https://api.github.com/users/goreleaser","html_url":"https://github.com/goreleaser","followers_url":"https://api.github.com/users/goreleaser/followers","following_url":"https://api.github.com/users/goreleaser/following{/other_user}","gists_url":"https://api.github.com/users/goreleaser/gists{/gist_id}","starred_url":"https://api.github.com/users/goreleaser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goreleaser/subscriptions","organizations_url":"https://api.github.com/users/goreleaser/orgs","repos_url":"https://api.github.com/users/goreleaser/repos","events_url":"https://api.github.com/users/goreleaser/events{/privacy}","received_events_url":"https://api.github.com/users/goreleaser/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/goreleaser/goreleaser","description":"Release engineering, simplified","fork":false,"url":"https://api.github.com/repos/goreleaser/goreleaser","forks_url":"https://api.github.com/repos/goreleaser/goreleaser/forks","keys_url":"https://api.github.com/repos/goreleaser/goreleaser/keys{/key_id}","collaborators_url":"https://api.github.com/repos/goreleaser/goreleaser/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/goreleaser/goreleaser/teams","hooks_url":"https://api.github.com/repos/goreleaser/goreleaser/hooks","issue_events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/events{/number}","events_url":"https://api.github.com/repos/goreleaser/goreleaser/events","assignees_url":"https://api.github.com/repos/goreleaser/goreleaser/assignees{/user}","branches_url":"https://api.github.com/repos/goreleaser/goreleaser/branches{/branch}","tags_url":"https://api.github.com/repos/goreleaser/goreleaser/tags","blobs_url":"https://api.github.com/repos/goreleaser/goreleaser/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/goreleaser/goreleaser/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/goreleaser/goreleaser/git/refs{/sha}","trees_url":"https://api.github.com/repos/goreleaser/goreleaser/git/trees{/sha}","statuses_url":"https://api.github.com/repos/goreleaser/goreleaser/statuses/{sha}","languages_url":"https://api.github.com/repos/goreleaser/goreleaser/languages","stargazers_url":"https://api.github.com/repos/goreleaser/goreleaser/stargazers","contributors_url":"https://api.github.com/repos/goreleaser/goreleaser/contributors","subscribers_url":"https://api.github.com/repos/goreleaser/goreleaser/subscribers","subscription_url":"https://api.github.com/repos/goreleaser/goreleaser/subscription","commits_url":"https://api.github.com/repos/goreleaser/goreleaser/commits{/sha}","git_commits_url":"https://api.github.com/repos/goreleaser/goreleaser/git/commits{/sha}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/comments{/number}","issue_comment_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/comments{/number}","contents_url":"https://api.github.com/repos/goreleaser/goreleaser/contents/{+path}","compare_url":"https://api.github.com/repos/goreleaser/goreleaser/compare/{base}...{head}","merges_url":"https://api.github.com/repos/goreleaser/goreleaser/merges","archive_url":"https://api.github.com/repos/goreleaser/goreleaser/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/goreleaser/goreleaser/downloads","issues_url":"https://api.github.com/repos/goreleaser/goreleaser/issues{/number}","pulls_url":"https://api.github.com/repos/goreleaser/goreleaser/pulls{/number}","milestones_url":"https://api.github.com/repos/goreleaser/goreleaser/milestones{/number}","notifications_url":"https://api.github.com/repos/goreleaser/goreleaser/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/labels{/name}","releases_url":"https://api.github.com/repos/goreleaser/goreleaser/releases{/id}","deployments_url":"https://api.github.com/repos/goreleaser/goreleaser/deployments","created_at":"2016-12-21T17:13:39Z","updated_at":"2025-11-10T08:11:52Z","pushed_at":"2025-11-10T08:11:48Z","git_url":"git://github.com/goreleaser/goreleaser.git","ssh_url":"git@github.com:goreleaser/goreleaser.git","clone_url":"https://github.com/goreleaser/goreleaser.git","svn_url":"https://github.com/goreleaser/goreleaser","homepage":"https://goreleaser.com","size":25141,"stargazers_count":15265,"watchers_count":15265,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1030,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":32,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["announcements","github-actions","hacktoberfest","package","release-automation","release-engineering"],"visibility":"public","forks":1030,"open_issues":32,"watchers":15265,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Is your feature request related to a problem? Please describe.\n\nThe `builds.no_unique_dist_dir` configuration is very handy for more advanced use-cases, however it would be nice if it could be provided on-the-fly via a command-line flag such as `--no-unique-dist-dir`.\r\n\r\nWe use GoReleaser inside of Dockerfiles to build our Go applications.\r\nTo explain the feature request, consider the following example snippet of a GoReleaser config file:\r\n```yaml\r\nbuilds:\r\n  - id: binary1\r\n    main: ./cmd/binary1\r\n    binary: binary1\r\n  - id: binary2\r\n    main: ./cmd/binary2\r\n    binary: binary2\r\n```\r\nAnd the following example snippet of a Dockerfile:\r\n```Dockerfile\r\nFROM golang AS builder\r\nWORKDIR /build\r\nCOPY . .\r\nRUN goreleaser build --clean --single-target\r\n\r\nFROM cgr.dev/chainguard/static:latest AS final\r\nCOPY --from=builder /build/dist/binary1_*/binary1 /binary1\r\nCOPY --from=builder /build/dist/binary2_*/binary2 /binary2\r\n```\r\nThe usage of wildcards there is not ideal and not very robust/reliable.\r\n\r\nTo improve on this, we can use the `builds.no_unique_dist_dir` configuration to generate predictable binary names:\r\n```yaml\r\nbuilds:\r\n  - id: binary1\r\n    main: ./cmd/binary1\r\n    binary: binary1\r\n    no_unique_dist_dir: true\r\n  - id: binary2\r\n    main: ./cmd/binary2\r\n    binary: binary2\r\n    no_unique_dist_dir: true\r\n```\r\n```Dockerfile\r\nFROM cgr.dev/chainguard/static:latest AS final\r\nCOPY --from=builder /build/dist/binary1 /binary1\r\nCOPY --from=builder /build/dist/binary2 /binary2\r\n```\r\n\r\nThe problem is that we don't want to hard-code `builds.no_unique_dist_dir` because it will not work for developers that want to build for multiple targets, that is, users that do not use `--single-target` for building. Using `builds.no_unique_dist_dir` creates a restriction that requires documenting details on how to build the application.\r\n\n\n### Describe the solution you'd like\n\nInstead of hard-coding the `builds.no_unique_dist_dir` option in the config file itself which creates restrictions in our case, we would like to be able to tell GoReleaser to enable this option on demand via the command-line, to be used together with `--single-target` for example.\r\n\r\nIn this way, users calling GoReleaser with all targets or single-target can both use the same config file:\r\n```\r\n# users can build with multi-target with no problem\r\n$ goreleaser build --clean --snapshot  \r\n\r\n# in Dockerfile we can use `--no-unique-dist-dir` with `--single-target` to have predictable binary names\r\n$ goreleaser build --clean --single-target --no-unique-dist-dir\r\n```\r\nTo keep it simple, this option would be applied globally to all the configured binaries in the build.\n\n### Describe alternatives you've considered\n\nThere are no direct alternatives at the moment.\r\nWhat we are doing for the moment is what was described in the first section, copying binaries using wildcards.\n\n### Search\n\n- [X] I did search for other open and closed issues before opening this\n\n### Supporter\n\n- [ ] I am a [sponsor](https://github.com/sponsors/caarlos0/) or a [Pro](https://goreleaser.com/pro) customer\n\n### Code of Conduct\n\n- [X] I agree to follow this project's Code of Conduct\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/5024/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]