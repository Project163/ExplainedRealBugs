{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437/events","html_url":"https://github.com/goreleaser/goreleaser/issues/4437","id":2004594151,"node_id":"I_kwDOBJgEXs53e63n","number":4437,"title":"single-target cannot find build","user":{"login":"till","id":27003,"node_id":"MDQ6VXNlcjI3MDAz","avatar_url":"https://avatars.githubusercontent.com/u/27003?v=4","gravatar_id":"","url":"https://api.github.com/users/till","html_url":"https://github.com/till","followers_url":"https://api.github.com/users/till/followers","following_url":"https://api.github.com/users/till/following{/other_user}","gists_url":"https://api.github.com/users/till/gists{/gist_id}","starred_url":"https://api.github.com/users/till/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/till/subscriptions","organizations_url":"https://api.github.com/users/till/orgs","repos_url":"https://api.github.com/users/till/repos","events_url":"https://api.github.com/users/till/events{/privacy}","received_events_url":"https://api.github.com/users/till/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976497,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTc=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/goreleaser/goreleaser/milestones/26","html_url":"https://github.com/goreleaser/goreleaser/milestone/26","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/milestones/26/labels","id":10155097,"node_id":"MI_kwDOBJgEXs4AmvRZ","number":26,"title":"v1.23.0","description":"","creator":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":72,"state":"closed","created_at":"2023-11-07T11:41:28Z","updated_at":"2024-02-02T12:50:38Z","due_on":null,"closed_at":"2024-02-02T12:50:38Z"},"comments":5,"created_at":"2023-11-21T15:46:20Z","updated_at":"2023-12-06T11:49:18Z","closed_at":"2023-11-27T21:29:52Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We got this error with `1.22.1`:\r\n\r\n```\r\n /opt/hostedtoolcache/goreleaser-action/1.22.1/x64/goreleaser build --snapshot --rm-dist --single-target\r\n  • starting build...\r\n  • loading                                          path=.goreleaser.yaml\r\n  • DEPRECATED: --rm-dist was deprecated in favor of --clean, check https://goreleaser.com/deprecations#-rm-dist for more details\r\n  • building only for linux/amd64                    reason=single target is enabled\r\n  ⨯ build failed after 0s                    error=no builds matching --single-target linux/amd64\r\nError: The process '/opt/hostedtoolcache/goreleaser-action/1.22.1/x64/goreleaser' failed with exit code 1\r\n```\r\n\r\n_Originally posted by @till in https://github.com/goreleaser/goreleaser/issues/4411#issuecomment-1821034379_\r\n\r\nMy goreleaser config is very simple:\r\n\r\n\r\n```yaml\r\nbefore:\r\n  hooks:\r\n    - go mod tidy\r\nbuilds:\r\n  - env:\r\n      - CGO_ENABLED=0\r\n    ldflags:\r\n      -  -s -w -X main.Version={{.Version}}\r\n    main: ./cmd/foo\r\n    goos:\r\n      - linux\r\n      - windows\r\n      - darwin\r\narchives:\r\n  - name_template: >-\r\n      {{ .ProjectName }}_\r\n      {{- title .Os }}_\r\n      {{- if eq .Arch \"darwin\" }}Darwin\r\n      {{- else if eq .Arch \"linux\" }}Linux\r\n      {{- else if eq .Arch \"386\" }}i386\r\n      {{- else if eq .Arch \"amd64\" }}x86_64\r\n      {{- else }}{{ .Arch }}{{ end }}\r\n    wrap_in_directory: true\r\n    format_overrides:\r\n      - goos: windows\r\n        format: zip\r\n    files: # don't add README/LICENSE files\r\n      - none*\r\n```\r\n\r\nThere's more, but it's docker and docker manifests.\r\n\r\nMy guess is, that the `--single-target` cannot match because we are not explicitly defining amd64, arm64 (aka `goarch`), etc. in the `builds:`?\r\n\r\nAt least, that's my guess. We downgraded the build on that one project for the time being. We usually just build `amd64` and `--single-target` works there, but this project _needs_ everything.","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4437/timeline","performed_via_github_app":null,"state_reason":"completed"}