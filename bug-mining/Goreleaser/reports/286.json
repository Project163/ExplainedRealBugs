{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402/events","html_url":"https://github.com/goreleaser/goreleaser/issues/4402","id":1975145861,"node_id":"I_kwDOBJgEXs51ulWF","number":4402,"title":"Config schema invalid","user":{"login":"adrianrudnik","id":681514,"node_id":"MDQ6VXNlcjY4MTUxNA==","avatar_url":"https://avatars.githubusercontent.com/u/681514?v=4","gravatar_id":"","url":"https://api.github.com/users/adrianrudnik","html_url":"https://github.com/adrianrudnik","followers_url":"https://api.github.com/users/adrianrudnik/followers","following_url":"https://api.github.com/users/adrianrudnik/following{/other_user}","gists_url":"https://api.github.com/users/adrianrudnik/gists{/gist_id}","starred_url":"https://api.github.com/users/adrianrudnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrianrudnik/subscriptions","organizations_url":"https://api.github.com/users/adrianrudnik/orgs","repos_url":"https://api.github.com/users/adrianrudnik/repos","events_url":"https://api.github.com/users/adrianrudnik/events{/privacy}","received_events_url":"https://api.github.com/users/adrianrudnik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976497,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTc=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-11-02T22:33:51Z","updated_at":"2023-11-04T00:37:40Z","closed_at":"2023-11-04T00:37:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What happened?\n\nI installed Webstorm new and got the default configs, opened up my existing project and my `.golreleaser.yaml` got yellowed hard.\r\n\r\n![image](https://github.com/goreleaser/goreleaser/assets/681514/a169e2a9-ba81-4983-a663-e1b9b43bab6a)\r\n\r\nYet adding that field, nets me an error when running the app:\r\n\r\n```\r\nline 9: field version not found in type config.Project\r\n```\r\n\r\nThe schema file at https://goreleaser.com/static/schema.json references `#/$defs/Project`. That leads to\r\n\r\n```json\r\n{\r\n  \"version\": {\r\n    \"type\": \"integer\",\r\n    \"enum\": [\r\n      1\r\n    ],\r\n    \"default\": 1\r\n}\r\n```\r\n\r\nwhich means 1 is required to be set. As statet in https://json-schema.org/understanding-json-schema/reference/annotations\r\n\r\n> The default keyword specifies a default value. This value is not used to fill in missing values during the validation process. Non-validation tools such as documentation generators or form generators may use this value to give hints to users about how to use a value. However, default is typically used to express that if a value is missing, then the value is semantically the same as if the value was present with the default value. The value of default should validate against the schema in which it resides, but that isn't required.\r\n\r\nThere a several problems with this:\r\n\r\n- `default` is not used for validation purposes, so the validator must mark it.\r\n- The application will fail with a `default` value of `1`, the schema defines it as mandatory (either by hand or fallback) but the programm itself will fail currently.\r\n- The default value of the keyword must still work, but `goreleaser check` without it does not fail, but the app fails.\r\n\r\nNot sure what happend with the `version` attribute.\n\n### How can we reproduce this?\n\nNot much to reproduce, maybe run it against a validator. They must ignore default values by definition.\n\n### goreleaser version\n\n```bash\nGitVersion:    1.21.2\r\nGitCommit:     26fed97a0defe4e73e3094cb903225d5445e5f0d\r\nGitTreeState:  false\r\nBuildDate:     2023-09-26T11:20:15Z\r\nBuiltBy:       goreleaser\r\nGoVersion:     go1.21.1\r\nCompiler:      gc\r\nModuleSum:     h1:dgYtIS7aZlQuRMUMLCjDCOs4lWss85Oh60RDSO0rbWU=\r\nPlatform:      linux/amd64\n```\n\n\n### GoReleaser Check\n\n- [X] goreleaser check shows no errors\n\n### Search\n\n- [X] I did search for other open and closed issues before opening this\n\n### Supporter\n\n- [ ] I am a [sponsor](https://github.com/sponsors/caarlos0/) or a [Pro](https://goreleaser.com/pro) customer\n\n### Code of Conduct\n\n- [X] I agree to follow this project's Code of Conduct\n\n### Additional context\n\n_No response_","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4402/timeline","performed_via_github_app":null,"state_reason":"completed"}