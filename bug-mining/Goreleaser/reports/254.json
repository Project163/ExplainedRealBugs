{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021","repository_url":"https://api.github.com/repos/goreleaser/goreleaser","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021/labels{/name}","comments_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021/comments","events_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021/events","html_url":"https://github.com/goreleaser/goreleaser/issues/4021","id":1715679718,"node_id":"I_kwDOBJgEXs5mQzHm","number":4021,"title":"Announce telegram failed (Bad Request: can't parse entities: Character '.' )","user":{"login":"jidckii","id":6608896,"node_id":"MDQ6VXNlcjY2MDg4OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6608896?v=4","gravatar_id":"","url":"https://api.github.com/users/jidckii","html_url":"https://github.com/jidckii","followers_url":"https://api.github.com/users/jidckii/followers","following_url":"https://api.github.com/users/jidckii/following{/other_user}","gists_url":"https://api.github.com/users/jidckii/gists{/gist_id}","starred_url":"https://api.github.com/users/jidckii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jidckii/subscriptions","organizations_url":"https://api.github.com/users/jidckii/orgs","repos_url":"https://api.github.com/users/jidckii/repos","events_url":"https://api.github.com/users/jidckii/events{/privacy}","received_events_url":"https://api.github.com/users/jidckii/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":504976497,"node_id":"MDU6TGFiZWw1MDQ5NzY0OTc=","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"},{"id":1980618944,"node_id":"MDU6TGFiZWwxOTgwNjE4OTQ0","url":"https://api.github.com/repos/goreleaser/goreleaser/labels/good-first-issue","name":"good-first-issue","color":"0a8757","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/goreleaser/goreleaser/milestones/21","html_url":"https://github.com/goreleaser/goreleaser/milestone/21","labels_url":"https://api.github.com/repos/goreleaser/goreleaser/milestones/21/labels","id":9366179,"node_id":"MI_kwDOBJgEXs4Ajuqj","number":21,"title":"v1.19.0","description":"","creator":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":128,"state":"closed","created_at":"2023-05-05T16:38:26Z","updated_at":"2023-06-29T16:32:54Z","due_on":null,"closed_at":"2023-06-29T03:19:49Z"},"comments":2,"created_at":"2023-05-18T13:53:22Z","updated_at":"2023-05-27T03:17:04Z","closed_at":"2023-05-27T03:17:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What happened?\n\nI'm trying to send an announce to telegram, but I'm getting an error.\r\nThis is due to the fact that in the text there are not escaped characters that I cannot escape, because got them from variables.\r\n\r\n```sh\r\n    â€¢ telegram\r\n      â€¢ posting: 'ðŸš€ New release 0.9.0-rc4'\r\n  â€¢ skipped twitter\r\n  â€¢ skipped webhook\r\n  â¨¯ announce failed after 0s                 error=failed to announce release: 1 error occurred:\r\n\t* telegram: Bad Request: can't parse entities: Character '.' is reserved and must be escaped with the preceding '\\'\r\n```\n\n### How can we reproduce this?\n\nI have a simgle config\r\n\r\n```yaml\r\nannounce:\r\n  telegram:\r\n    enabled: true\r\n    chat_id: \"{{ .Env.TELEGRAM_CHAT_ID }}\"\r\n    message_template: |-\r\n      ðŸš€ New release  {{.ProjectName}} {{.Version}}\r\n```\r\nalso you can test with `curl`\r\n```sh\r\ncurl -X POST \\\r\n     -H 'Content-Type: application/json' \\\r\n     -d '{\"chat_id\": \"1234\", \"text\": \"ðŸš€ New release 0.9.0-rc4\", \"disable_notification\": false, \"parse_mode\": \"MarkdownV2\"}' \\\r\n     https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\r\n{\"ok\":false,\"error_code\":400,\"description\":\"Bad Request: can't parse entities: Character '.' is reserved and must be escaped with the preceding '\\\\'\"}\r\n```\r\n\r\nIf escaped dot '.' this OK\r\n\r\n```\r\n\r\ncurl -X POST \\\r\n     -H 'Content-Type: application/json' \\\r\n     -d '{\"chat_id\": \"1234\", \"text\": \"ðŸš€ New release 0\\.9\\.0-rc4, \"disable_notification\": false, \"parse_mode\": \"MarkdownV2\"}' \\\r\n     https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage\r\n{\"ok\":true,\"result\":{\"message_id\":812,\"from\":{\"id\":1234,\"is_bot\":true,\"first_name\":\"qwe qwe \\ud83e\\udd4b\",\"username\":\"qwe_Bot\"},\"chat\":{\"id\":1234,\"first_name\":\"qwe\",\"last_name\":\"qwe\",\"username\":\"qwe\",\"type\":\"private\"},\"date\":1684417056,\"text\":\"\\ud83d\\ude80 New release 0.9.0-rc4,\"}}\r\n```\r\n\n\n### goreleaser version\n\n```bash\n1.18.2-pro\n```\n\n\n### GoReleaser Check\n\n- [X] goreleaser check shows no errors\n\n### Search\n\n- [X] I did search for other open and closed issues before opening this.\n\n### Code of Conduct\n\n- [X] I agree to follow this project's Code of Conduct\n\n### Additional context\n\nMaybe also add `parse_mode` as a option in telegram config \r\n\r\n```yaml\r\nannounce:\r\n  telegram:\r\n    enabled: true\r\n    parse_mode: MarkdownV2 | HTML\r\n```","closed_by":{"login":"caarlos0","id":245435,"node_id":"MDQ6VXNlcjI0NTQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/245435?v=4","gravatar_id":"","url":"https://api.github.com/users/caarlos0","html_url":"https://github.com/caarlos0","followers_url":"https://api.github.com/users/caarlos0/followers","following_url":"https://api.github.com/users/caarlos0/following{/other_user}","gists_url":"https://api.github.com/users/caarlos0/gists{/gist_id}","starred_url":"https://api.github.com/users/caarlos0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caarlos0/subscriptions","organizations_url":"https://api.github.com/users/caarlos0/orgs","repos_url":"https://api.github.com/users/caarlos0/repos","events_url":"https://api.github.com/users/caarlos0/events{/privacy}","received_events_url":"https://api.github.com/users/caarlos0/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/goreleaser/goreleaser/issues/4021/timeline","performed_via_github_app":null,"state_reason":"completed"}