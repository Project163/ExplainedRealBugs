{"url":"https://api.github.com/repos/SFML/SFML/issues/3578","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/3578/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/3578/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/3578/events","html_url":"https://github.com/SFML/SFML/issues/3578","id":3445837301,"node_id":"I_kwDOABdDzM7NY031","number":3578,"title":"Unsupported audio files (ogg/wav)","user":{"login":"Legulysse","id":21276690,"node_id":"MDQ6VXNlcjIxMjc2Njkw","avatar_url":"https://avatars.githubusercontent.com/u/21276690?v=4","gravatar_id":"","url":"https://api.github.com/users/Legulysse","html_url":"https://github.com/Legulysse","followers_url":"https://api.github.com/users/Legulysse/followers","following_url":"https://api.github.com/users/Legulysse/following{/other_user}","gists_url":"https://api.github.com/users/Legulysse/gists{/gist_id}","starred_url":"https://api.github.com/users/Legulysse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Legulysse/subscriptions","organizations_url":"https://api.github.com/users/Legulysse/orgs","repos_url":"https://api.github.com/users/Legulysse/repos","events_url":"https://api.github.com/users/Legulysse/events{/privacy}","received_events_url":"https://api.github.com/users/Legulysse/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85858,"node_id":"MDU6TGFiZWw4NTg1OA==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-audio","name":"m:sfml-audio","color":"cccccc","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/SFML/SFML/milestones/19","html_url":"https://github.com/SFML/SFML/milestone/19","labels_url":"https://api.github.com/repos/SFML/SFML/milestones/19/labels","id":8122307,"node_id":"MI_kwDOABdDzM4Ae-_D","number":19,"title":"3.1","description":"Non API breaking features after SFML 3.0\n\nPrimary focus: Unicode","creator":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":14,"closed_issues":125,"state":"open","created_at":"2022-06-23T17:30:47Z","updated_at":"2025-11-10T06:58:16Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2025-09-23T15:51:51Z","updated_at":"2025-10-14T16:12:19Z","closed_at":"2025-10-01T21:19:44Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Prerequisite Checklist\n\n- [x] I searched for [existing issues](https://github.com/search?q=repo%3ASFML%2FSFML&type=issues) to prevent duplicates\n- [x] I searched for [existing discussions on the forum](https://www.google.com/search?q=site%3Ahttps%3A%2F%2Fen.sfml-dev.org) to prevent duplicates\n- [x] I am here to report an issue and not to just ask a question or look for help (use the [forum](https://en.sfml-dev.org/forums/index.php#c3) or [Discord](https://discord.gg/nr4X7Fh) instead)\n\n### Describe your issue here\n\nWhile working on my game project, the sound designers I work with provided me with newly created audiofiles that could not be load in memory by sfml.\nAfter some time spent debugging, it seems that those files contain valid data, but through special cases explicitely refused by sfml.\nI am wondering if those cases should be properly handled, or if new error messages should be provided, or at least some additional warnings in the documentation for things to watch out for in audio files.\nThe software they use is wavelab pro 12 (not sure if there are additional exporter or converter softwares involved).\n\nI will share 4 files with this issue :\n- Sample_32bits_fmt3.wav\n- Sample_24bits_fmt1.wav\n- Sample_Ogg_NotWorking.ogg\n- Sample_Ogg_Working.ogg\n\nThe difference between the 2 wav files at export was the 24bits/32bits selector which implicitly changed the \"fmt\" value in the file.\nThe difference between the 2 ogg files comes from different converters used (one from wavelab, the other from FileConverter), both files were converted from the same wav file.\n\nMore specifically concerning the ogg file (Sample_Ogg_NotWorking.ogg) :\n- SoundFileReaderOgg::open calls ov_info and ov_pcm_total and obtains a sampleCount of XX.\n- SoundFileReaderOgg::read calls ov_read in a loop, and returns 0 (EOF) when trying to parse the last expected chunk, and returns with a readCount < sampleCount.\n- From there, the calling methods assume the file read failed and abort everything.\n- If I force SoundFileReaderOgg::read to return the sampleCount value instead of the count of read samples (making it believe everything was read as expected), this allows the file to be played properly.\n- Maybe there are cases where the actual number of samples is inferior to the samplecount, and should be considered valid ?\n- I added several checks on the return value of ov_read (OV_HOLE, OV_EBADLINK, OV_EINVAL), but it specifically returns a proper and valid size of zero (EOF).\n\nMore specifically concerning the wav file (Sample_32bits_fmt3.wav) :\n- The 32bits file they provided was flagged with a \"fmt\" value of 3 (Microsoft IEEE float) instead of 1 (Microsoft PCM uncompressed), which is explicitely refused in SoundFileReaderWav::parseHeader.\n- If I add this \"fmt\" value in the list of accepted formats, the load continues properly, since 32bits wave files are supported.\n- When generating a 24bits version of the file, their software switched back to a \"fmt\" value of 1 (Microsoft PCM uncompressed) and the file could be used properly.\n\nAssociated references : \n- ogg ov_read : https://www.xiph.org/vorbis/doc/vorbisfile/ov_read.html\n- wav format : https://www.recordingblogs.com/wiki/format-chunk-of-a-wave-file\n\n[audio-test-files.zip](https://github.com/user-attachments/files/22497429/audio-test-files.zip)\n\n### Your Environment\n\n- OS / distro / window manager: Windows 10\n- SFML version: 2.6.2 and 3.0.0\n- Compiler / toolchain: visual studio 2019\n- Special compiler / CMake flags: standard build using premake\n\n\n### Steps to reproduce\n\n```cpp\n#include <SFML/Audio.hpp>\n\nint main()\n{\n    std::string path_32bits_fmt3 = \"audio-test-files/Sample_32bits_fmt3.wav\";\n    std::string path_24bits_fmt1 = \"audio-test-files/Sample_24bits_fmt1.wav\";\n    std::string path_Ogg_NotWorking = \"audio-test-files/Sample_Ogg_NotWorking.ogg\";\n    std::string path_Ogg_Working = \"audio-test-files/Sample_Ogg_Working.ogg\";\n\n    sf::SoundBuffer buffer_32bits_fmt3;\n    sf::SoundBuffer buffer_24bits_fmt1;\n    sf::SoundBuffer buffer_Ogg_NotWorking;\n    sf::SoundBuffer buffer_Ogg_Working;\n\n    bool result_32bits_fmt3 = buffer_32bits_fmt3.loadFromFile(path_32bits_fmt3);\n    bool result_24bits_fmt1 = buffer_24bits_fmt1.loadFromFile(path_24bits_fmt1);\n    bool result_Ogg_NotWorking = buffer_Ogg_NotWorking.loadFromFile(path_Ogg_NotWorking);\n    bool result_Ogg_Working = buffer_Ogg_Working.loadFromFile(path_Ogg_Working);\n}\n```\n\n\n### Expected behavior\n\nAll files are properly loaded.\n\n### Actual behavior\n\n2 files out of 4 are not loaded (result_32bits_fmt3 and result_Ogg_NotWorking are false).","closed_by":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/3578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/3578/timeline","performed_via_github_app":null,"state_reason":"completed"}