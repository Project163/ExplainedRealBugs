{"url":"https://api.github.com/repos/SFML/SFML/issues/86","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/86/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/86/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/86/events","html_url":"https://github.com/SFML/SFML/issues/86","id":1403153,"node_id":"MDU6SXNzdWUxNDAzMTUz","number":86,"title":"sf::Window::Create and rendering are buggy on Mac OS X","user":{"login":"mantognini","id":693483,"node_id":"MDQ6VXNlcjY5MzQ4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/693483?v=4","gravatar_id":"","url":"https://api.github.com/users/mantognini","html_url":"https://github.com/mantognini","followers_url":"https://api.github.com/users/mantognini/followers","following_url":"https://api.github.com/users/mantognini/following{/other_user}","gists_url":"https://api.github.com/users/mantognini/gists{/gist_id}","starred_url":"https://api.github.com/users/mantognini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mantognini/subscriptions","organizations_url":"https://api.github.com/users/mantognini/orgs","repos_url":"https://api.github.com/users/mantognini/repos","events_url":"https://api.github.com/users/mantognini/events{/privacy}","received_events_url":"https://api.github.com/users/mantognini/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85855,"node_id":"MDU6TGFiZWw4NTg1NQ==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-window","name":"m:sfml-window","color":"cccccc","default":false,"description":null},{"id":85879,"node_id":"MDU6TGFiZWw4NTg3OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/p:macos","name":"p:macos","color":"888888","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/SFML/SFML/milestones/5","html_url":"https://github.com/SFML/SFML/milestone/5","labels_url":"https://api.github.com/repos/SFML/SFML/milestones/5/labels","id":357,"node_id":"MDk6TWlsZXN0b25lMzU3","number":5,"title":"2.0","description":"First public release of SFML 2.","creator":{"login":"LaurentGomila","id":245489,"node_id":"MDQ6VXNlcjI0NTQ4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/245489?v=4","gravatar_id":"","url":"https://api.github.com/users/LaurentGomila","html_url":"https://github.com/LaurentGomila","followers_url":"https://api.github.com/users/LaurentGomila/followers","following_url":"https://api.github.com/users/LaurentGomila/following{/other_user}","gists_url":"https://api.github.com/users/LaurentGomila/gists{/gist_id}","starred_url":"https://api.github.com/users/LaurentGomila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LaurentGomila/subscriptions","organizations_url":"https://api.github.com/users/LaurentGomila/orgs","repos_url":"https://api.github.com/users/LaurentGomila/repos","events_url":"https://api.github.com/users/LaurentGomila/events{/privacy}","received_events_url":"https://api.github.com/users/LaurentGomila/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":77,"state":"closed","created_at":"2011-04-10T07:08:15Z","updated_at":"2014-04-13T19:33:52Z","due_on":null,"closed_at":"2013-04-20T06:56:27Z"},"comments":2,"created_at":"2011-08-14T13:53:36Z","updated_at":"2015-04-30T17:23:47Z","closed_at":"2011-09-05T16:57:31Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The first time a window is created there is no rendering issue but when `Create` is called again (with any parameters) the window is unable to render its graphics content correctly. Then if `Create` is called again everything works fine.\n\nApparently, this issue appears only on Mac OS X (Leopard and Snow Leopard are concerned but not Lion). I didn't test this on Leopard but I suspect that the problem is also present. I tested also on Ubuntu 11.04 in a virtual box without encountering any trouble, however, I haven't tested it on Windows – I guess the problem would have been found by now as there are many SFML/Windows users.\n\nHere's a minimal code that reproduces the error :\n\n```\n#include <SFML/Graphics.hpp>\n\nint main (int argc, const char * argv[])\n{\n    // Create the main window\n    sf::RenderWindow window(sf::VideoMode(800, 600), \"SFML window\");\n\n    sf::Shape s = sf::Shape::Rectangle(0, 0, 100, 100, sf::Color::Blue);\n\n    // Start the game loop\n    while (window.IsOpened())\n    {\n        // Process events\n        sf::Event event;\n        while (window.PollEvent(event))\n        {\n            // Close window : exit\n            if (event.Type == sf::Event::Closed)\n                window.Close();\n\n\n            if (event.Type == sf::Event::KeyPressed)\n                if (event.Key.Code == sf::Keyboard::Escape)\n                    window.Close();\n                else\n                    window.Create(sf::VideoMode(800, 600), \"SFML window\");\n        }\n\n        // Clear screen\n        window.Clear();\n\n        s.Rotate(30.0);\n\n        window.Draw(s);\n\n        // Update the window\n        window.Display();\n    }\n\n    return EXIT_SUCCESS;\n}\n```\n\nStrangely enough, the following code works fine :\n\n```\n#include <SFML/Graphics.hpp>\n\nint main (int argc, const char * argv[])\n{\n    // Create the main window\n    sf::RenderWindow* window = new sf::RenderWindow(sf::VideoMode(800, 600), \"SFML window\");\n\n    sf::Shape s = sf::Shape::Rectangle(0, 0, 100, 100, sf::Color::Blue);\n\n    // Start the game loop\n    while (window->IsOpened())\n    {\n        // Process events\n        sf::Event event;\n        while (window->PollEvent(event))\n        {\n            // Close window : exit\n            if (event.Type == sf::Event::Closed)\n                window->Close();\n\n\n            if (event.Type == sf::Event::KeyPressed)\n                if (event.Key.Code == sf::Keyboard::Escape)\n                    window->Close();\n                else {\n                    delete window;\n                    window = new sf::RenderWindow(sf::VideoMode(800, 600), \"SFML window\");\n                }\n\n        }\n\n        // Clear screen\n        window->Clear();\n\n        s.Rotate(30.0);\n\n        window->Draw(s);\n\n        // Update the window\n        window->Display();\n    }\n\n    delete window;\n\n    return EXIT_SUCCESS;\n}\n```\n\nThe only difference between the two code is the use of dynamically allocated memory for the window in the second version instead of classic memory management in the first one.\n\nWhat is very disturbing is that both code should have exactly the same effect because of `sf::Window` (thus `sf::RenderWIndow`) internal behavior. `Create` method calls `Close` first and then do it's dedicated work (it creats a new OS-specific window object allocated dynamically) and `delete` + `new` call `Close` (in `sf::Window` dtor) and then `Create` (in `sf::Window` ctor) – it really should do the same work!\n","closed_by":{"login":"mantognini","id":693483,"node_id":"MDQ6VXNlcjY5MzQ4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/693483?v=4","gravatar_id":"","url":"https://api.github.com/users/mantognini","html_url":"https://github.com/mantognini","followers_url":"https://api.github.com/users/mantognini/followers","following_url":"https://api.github.com/users/mantognini/following{/other_user}","gists_url":"https://api.github.com/users/mantognini/gists{/gist_id}","starred_url":"https://api.github.com/users/mantognini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mantognini/subscriptions","organizations_url":"https://api.github.com/users/mantognini/orgs","repos_url":"https://api.github.com/users/mantognini/repos","events_url":"https://api.github.com/users/mantognini/events{/privacy}","received_events_url":"https://api.github.com/users/mantognini/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/86/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/86/timeline","performed_via_github_app":null,"state_reason":"completed"}