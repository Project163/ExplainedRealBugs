{"url":"https://api.github.com/repos/SFML/SFML/issues/1165","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/1165/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/1165/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/1165/events","html_url":"https://github.com/SFML/SFML/issues/1165","id":185810076,"node_id":"MDU6SXNzdWUxODU4MTAwNzY=","number":1165,"title":"TransientContextLock program hang","user":{"login":"DedMorozCodes","id":16481743,"node_id":"MDQ6VXNlcjE2NDgxNzQz","avatar_url":"https://avatars.githubusercontent.com/u/16481743?v=4","gravatar_id":"","url":"https://api.github.com/users/DedMorozCodes","html_url":"https://github.com/DedMorozCodes","followers_url":"https://api.github.com/users/DedMorozCodes/followers","following_url":"https://api.github.com/users/DedMorozCodes/following{/other_user}","gists_url":"https://api.github.com/users/DedMorozCodes/gists{/gist_id}","starred_url":"https://api.github.com/users/DedMorozCodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DedMorozCodes/subscriptions","organizations_url":"https://api.github.com/users/DedMorozCodes/orgs","repos_url":"https://api.github.com/users/DedMorozCodes/repos","events_url":"https://api.github.com/users/DedMorozCodes/events{/privacy}","received_events_url":"https://api.github.com/users/DedMorozCodes/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85855,"node_id":"MDU6TGFiZWw4NTg1NQ==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-window","name":"m:sfml-window","color":"cccccc","default":false,"description":null},{"id":105019936,"node_id":"MDU6TGFiZWwxMDUwMTk5MzY=","url":"https://api.github.com/repos/SFML/SFML/labels/s:superseded","name":"s:superseded","color":"151B8D","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/SFML/SFML/milestones/16","html_url":"https://github.com/SFML/SFML/milestone/16","labels_url":"https://api.github.com/repos/SFML/SFML/milestones/16/labels","id":2130925,"node_id":"MDk6TWlsZXN0b25lMjEzMDkyNQ==","number":16,"title":"2.4.2","description":"","creator":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":9,"state":"closed","created_at":"2016-11-12T11:34:41Z","updated_at":"2017-02-20T15:17:44Z","due_on":null,"closed_at":"2017-02-20T15:17:44Z"},"comments":12,"created_at":"2016-10-28T00:06:10Z","updated_at":"2016-12-06T11:26:09Z","closed_at":"2016-12-05T16:22:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"First of all, I'm sorry for not being able to provide a minimal code example. I've tried to reduce my code down to the essentials, but I think I just can't reproduce the timing of the issue right. Hopefully the rest of my information will be sufficient.\n\nMachine specifics: Intel Core i5, 4GB RAM, AMD Mobility Radeon HD 5600 graphics card.\nPlatform specifics: Windows 7 (64-bit), Visual Studio 2015 SP1, SFML 2.4.x & 2.4.x_alt.\n\nThis seems to somehow be related to #989, although it's no longer a stack overflow. After upgrading to the latest revisions of both 2.4.x and 2.4.x_alt branches (latest I've tried was Oct-26-2016), the stack overflow was fixed, but the program hangs in the exact same spot. The setup is as follows:\n- The main thread performs the window clearing, drawing, and other usual tasks.\n- Another thread is then used to load certain resources. This thread often invokes .loadFromFile on textures.\n- Once this thread is created and it hits the point where .loadFromFile is called, the window freezes (console still works fine). When the program is paused, the stack is as follows:\n\n```\ntest.exe!sf::priv::MutexImpl::lock() Line 52    C++\ntest.exe!sf::Mutex::lock() Line 57  C++\ntest.exe!sf::Lock::Lock(sf::Mutex & mutex) Line 39  C++\ntest.exe!sf::GlResource::TransientContextLock::TransientContextLock() Line 79   C++\ntest.exe!sf::Texture::bind(const sf::Texture * texture, sf::Texture::CoordinateType coordinateType) Line 619    C++\ntest.exe!sf::RenderTarget::applyTexture(const sf::Texture * texture) Line 492   C++\n>test.exe!sf::RenderTarget::clear(const sf::Color & color) Line 106 C++\ntest.exe!Window::BeginDraw() Line 33    C++\ntest.exe!Game::Render() Line 57 C++\ntest.exe!main(int argc, void * * * argv) Line 10    C++\n```\n- The > highlighted line is as simple .clear call of sf::RenderWindow:\n\n`void Window::BeginDraw() { m_window.clear(sf::Color::Black); }`\n- The stack of the other thread that invokes .loadFromFile on a texture is as follows:\n\n```\ntest.exe!sf::priv::MutexImpl::lock() Line 52    C++\ntest.exe!sf::Mutex::lock() Line 57  C++\ntest.exe!sf::priv::GlContext::acquireTransientContext() Line 251    C++\ntest.exe!sf::GlResource::TransientContextLock::TransientContextLock() Line 88   C++\ntest.exe!sf::Texture::getValidSize(unsigned int size) Line 722  C++\ntest.exe!sf::Texture::create(unsigned int width, unsigned int height) Line 120  C++\ntest.exe!sf::Texture::loadFromImage(const sf::Image & image, const sf::Rect<int> & area) Line 244   C++\ntest.exe!sf::Texture::loadFromFile(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & filename, const sf::Rect<int> & area) Line 212  C++\n>test.exe!TextureManager::Load(sf::Texture * l_resource, const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & l_path) Line 11   C++\n```\n- The texture manager method that \"crashes\" simply invokes the .loadFromFile like so:\n\n```\nbool Load(sf::Texture* l_resource, const std::string& l_path) {\n    return l_resource->loadFromFile(Utils::GetWorkingDirectory() + l_path);\n}\n```\n\nAs I mentioned before, for some reason the problem didn't persist when reduced to basic code. Sorry if I didn't explain it thoroughly enough, and let me know if there's anything else I can provide.\n","closed_by":{"login":"DedMorozCodes","id":16481743,"node_id":"MDQ6VXNlcjE2NDgxNzQz","avatar_url":"https://avatars.githubusercontent.com/u/16481743?v=4","gravatar_id":"","url":"https://api.github.com/users/DedMorozCodes","html_url":"https://github.com/DedMorozCodes","followers_url":"https://api.github.com/users/DedMorozCodes/followers","following_url":"https://api.github.com/users/DedMorozCodes/following{/other_user}","gists_url":"https://api.github.com/users/DedMorozCodes/gists{/gist_id}","starred_url":"https://api.github.com/users/DedMorozCodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DedMorozCodes/subscriptions","organizations_url":"https://api.github.com/users/DedMorozCodes/orgs","repos_url":"https://api.github.com/users/DedMorozCodes/repos","events_url":"https://api.github.com/users/DedMorozCodes/events{/privacy}","received_events_url":"https://api.github.com/users/DedMorozCodes/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/1165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/1165/timeline","performed_via_github_app":null,"state_reason":"completed"}