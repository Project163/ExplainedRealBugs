[{"id":3905749845,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzkwNTc0OTg0NQ==","url":"https://api.github.com/repos/SFML/SFML/issues/events/3905749845","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2020-10-21T20:06:58Z","rename":{"from":"Image loading race condition","to":"Image loading race condition when image failed to load"},"performed_via_github_app":null},{"id":3906014748,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5MDYwMTQ3NDg=","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906014748","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T21:21:52Z","label":{"name":"bug","color":"ff4242"},"performed_via_github_app":null},{"id":3906014750,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5MDYwMTQ3NTA=","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906014750","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T21:21:52Z","label":{"name":"m:sfml-graphics","color":"cccccc"},"performed_via_github_app":null},{"id":3906014753,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5MDYwMTQ3NTM=","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906014753","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T21:21:52Z","label":{"name":"s:undecided","color":"ffe20a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713894071","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713894071","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713894071,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzg5NDA3MQ==","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T21:42:28Z","updated_at":"2020-10-21T21:42:44Z","body":"Good catch and thanks for the detailed description!\r\n\r\nSTB claims that their function [`stbi_failure_reason()` is thread-safe](https://github.com/nothings/stb/blob/master/stb_image.h#L455-L457), which I would interpret that also the writing part should be. In the sense that there should be no race condition _on the failure string itself_. Even then, it's still possible that this sequence happens:\r\n\r\n1. thread A: `stbi_load()`\r\n1. thread B: `stbi_load()`\r\n1. thread A: `stbi_failure_reason()` -> returns error of image B\r\n\r\nSo I wonder why it crashes. Maybe we use an older STB version, it's not actually thread-safe, or there's another problem.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713894071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713895593","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713895593","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713895593,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzg5NTU5Mw==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T21:46:01Z","updated_at":"2020-10-21T22:20:23Z","body":"It looks like that code you linked to is thread safe but not the version that sfml uses (see: https://github.com/SFML/SFML/blob/master/extlibs/headers/stb_image/stb_image.h#L410). I guess sfml just needs to update stb_image.h to fix the crash. From the change log:\r\n`2.24  (2020-02-02) fix warnings; thread-local failure_reason and flip_vertically`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713895593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3906168040,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM5MDYxNjgwNDA=","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906168040","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"53ee8d39aacc19be1557215e4ccedfb4141c79f3","commit_url":"https://api.github.com/repos/SFML/SFML/commits/53ee8d39aacc19be1557215e4ccedfb4141c79f3","created_at":"2020-10-21T22:12:07Z","performed_via_github_app":null},{"actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T22:19:29Z","updated_at":"2020-10-21T22:19:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/SFML/SFML/issues/1712","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/1712/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/1712/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/1712/events","html_url":"https://github.com/SFML/SFML/pull/1712","id":726902507,"node_id":"MDExOlB1bGxSZXF1ZXN0NTA3ODk2MzI5","number":1712,"title":"Update stb_image (2.16 -> 2.26) and stb_image_write (1.07 -> 1.15)","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85850,"node_id":"MDU6TGFiZWw4NTg1MA==","url":"https://api.github.com/repos/SFML/SFML/labels/feature","name":"feature","color":"23BA35","default":false,"description":null},{"id":85856,"node_id":"MDU6TGFiZWw4NTg1Ng==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-graphics","name":"m:sfml-graphics","color":"cccccc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/SFML/SFML/milestones/17","html_url":"https://github.com/SFML/SFML/milestone/17","labels_url":"https://api.github.com/repos/SFML/SFML/milestones/17/labels","id":3063354,"node_id":"MDk6TWlsZXN0b25lMzA2MzM1NA==","number":17,"title":"2.6","description":"","creator":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":290,"state":"closed","created_at":"2018-01-25T09:14:12Z","updated_at":"2025-07-17T21:59:51Z","due_on":null,"closed_at":"2023-06-22T20:47:36Z"},"comments":4,"created_at":"2020-10-21T22:19:28Z","updated_at":"2021-05-11T11:18:28Z","closed_at":"2020-12-06T12:35:01Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":1524684,"node_id":"MDEwOlJlcG9zaXRvcnkxNTI0Njg0","name":"SFML","full_name":"SFML/SFML","private":false,"owner":{"login":"SFML","id":4226899,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjY4OTk=","avatar_url":"https://avatars.githubusercontent.com/u/4226899?v=4","gravatar_id":"","url":"https://api.github.com/users/SFML","html_url":"https://github.com/SFML","followers_url":"https://api.github.com/users/SFML/followers","following_url":"https://api.github.com/users/SFML/following{/other_user}","gists_url":"https://api.github.com/users/SFML/gists{/gist_id}","starred_url":"https://api.github.com/users/SFML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SFML/subscriptions","organizations_url":"https://api.github.com/users/SFML/orgs","repos_url":"https://api.github.com/users/SFML/repos","events_url":"https://api.github.com/users/SFML/events{/privacy}","received_events_url":"https://api.github.com/users/SFML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/SFML/SFML","description":"Simple and Fast Multimedia Library","fork":false,"url":"https://api.github.com/repos/SFML/SFML","forks_url":"https://api.github.com/repos/SFML/SFML/forks","keys_url":"https://api.github.com/repos/SFML/SFML/keys{/key_id}","collaborators_url":"https://api.github.com/repos/SFML/SFML/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/SFML/SFML/teams","hooks_url":"https://api.github.com/repos/SFML/SFML/hooks","issue_events_url":"https://api.github.com/repos/SFML/SFML/issues/events{/number}","events_url":"https://api.github.com/repos/SFML/SFML/events","assignees_url":"https://api.github.com/repos/SFML/SFML/assignees{/user}","branches_url":"https://api.github.com/repos/SFML/SFML/branches{/branch}","tags_url":"https://api.github.com/repos/SFML/SFML/tags","blobs_url":"https://api.github.com/repos/SFML/SFML/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/SFML/SFML/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/SFML/SFML/git/refs{/sha}","trees_url":"https://api.github.com/repos/SFML/SFML/git/trees{/sha}","statuses_url":"https://api.github.com/repos/SFML/SFML/statuses/{sha}","languages_url":"https://api.github.com/repos/SFML/SFML/languages","stargazers_url":"https://api.github.com/repos/SFML/SFML/stargazers","contributors_url":"https://api.github.com/repos/SFML/SFML/contributors","subscribers_url":"https://api.github.com/repos/SFML/SFML/subscribers","subscription_url":"https://api.github.com/repos/SFML/SFML/subscription","commits_url":"https://api.github.com/repos/SFML/SFML/commits{/sha}","git_commits_url":"https://api.github.com/repos/SFML/SFML/git/commits{/sha}","comments_url":"https://api.github.com/repos/SFML/SFML/comments{/number}","issue_comment_url":"https://api.github.com/repos/SFML/SFML/issues/comments{/number}","contents_url":"https://api.github.com/repos/SFML/SFML/contents/{+path}","compare_url":"https://api.github.com/repos/SFML/SFML/compare/{base}...{head}","merges_url":"https://api.github.com/repos/SFML/SFML/merges","archive_url":"https://api.github.com/repos/SFML/SFML/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/SFML/SFML/downloads","issues_url":"https://api.github.com/repos/SFML/SFML/issues{/number}","pulls_url":"https://api.github.com/repos/SFML/SFML/pulls{/number}","milestones_url":"https://api.github.com/repos/SFML/SFML/milestones{/number}","notifications_url":"https://api.github.com/repos/SFML/SFML/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/SFML/SFML/labels{/name}","releases_url":"https://api.github.com/repos/SFML/SFML/releases{/id}","deployments_url":"https://api.github.com/repos/SFML/SFML/deployments","created_at":"2011-03-25T08:05:25Z","updated_at":"2025-11-10T06:58:23Z","pushed_at":"2025-11-10T06:58:17Z","git_url":"git://github.com/SFML/SFML.git","ssh_url":"git@github.com:SFML/SFML.git","clone_url":"https://github.com/SFML/SFML.git","svn_url":"https://github.com/SFML/SFML","homepage":"https://www.sfml-dev.org/","size":112700,"stargazers_count":11425,"watchers_count":11425,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":1873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":162,"license":{"key":"zlib","name":"zlib License","spdx_id":"Zlib","url":"https://api.github.com/licenses/zlib","node_id":"MDc6TGljZW5zZTI3"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["audio","c-plus-plus","cross-platform","games","graphics","hacktoberfest","multimedia","opengl","sdk","sfml"],"visibility":"public","forks":1873,"open_issues":162,"watchers":11425,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/SFML/SFML/pulls/1712","html_url":"https://github.com/SFML/SFML/pull/1712","diff_url":"https://github.com/SFML/SFML/pull/1712.diff","patch_url":"https://github.com/SFML/SFML/pull/1712.patch","merged_at":"2020-12-06T12:35:01Z"},"body":"Should fix #1711 - race condition on `stbi_failure_reason()`\r\n\r\nThis does not only avoid the race condition on the failure string itself, but also makes failure state thread-local, meaning that each string will be correctly associated with the last image it failed to load.\r\n\r\nI haven't had the chance to test it yet. A it's quite a big library update, we should probably wait a bit before merging.","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/1712/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/1712/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713910293","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713910293","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713910293,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzkxMDI5Mw==","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T22:21:07Z","updated_at":"2020-10-21T22:21:07Z","body":"I updated STB to the latest versions, could you check if the branch in pull request https://github.com/SFML/SFML/pull/1712 does not crash anymore?\r\n\r\nEven then, we will probably need some more testing, as it's quite a big version bump.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713910293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3906195165,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MzkwNjE5NTE2NQ==","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906195165","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T22:21:59Z","label":{"name":"s:undecided","color":"ffe20a"},"performed_via_github_app":null},{"id":3906195167,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5MDYxOTUxNjc=","url":"https://api.github.com/repos/SFML/SFML/issues/events/3906195167","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-21T22:21:59Z","label":{"name":"s:accepted","color":"207de5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713911014","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713911014","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713911014,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzkxMTAxNA==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T22:23:03Z","updated_at":"2020-10-21T22:23:03Z","body":"Sure. The crash doesn't happen all the time so i'll keep the code running for 1 day or so and see if it crashes","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713911014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713912418","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713912418","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713912418,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzkxMjQxOA==","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T22:26:55Z","updated_at":"2020-10-21T22:26:55Z","body":"Maybe we can also try to design a small application which makes it much more likely to happen.\r\nE.g. two threads, each of which loads an image in a loop, and loading deliberately fails each time.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713912418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713945954","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713945954","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713945954,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzk0NTk1NA==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T23:10:04Z","updated_at":"2020-10-22T00:52:00Z","body":"I created a small program to do that now:\r\n[sfml-crash.tar.gz](https://github.com/SFML/SFML/files/5419377/sfml-crash.tar.gz)\r\nand compiled with g++ main.cpp -o test-sfml-crash -pthread /usr/local/lib/libsfml-graphics-d.so.2.5\r\nand same place with printing error still crashes, but this time its another issue that seems to be related to sf::Err?\r\n```\r\n[1] from 0x00007ffff7e629a1 in std::char_traits<char>::copy(char*, char const*, unsigned long)+25 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/char_traits.h:395\r\n[2] from 0x00007ffff7e629a1 in std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long)+81 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/streambuf.tcc:90\r\n[3] from 0x00007ffff7e53da4 in std::basic_streambuf<char, std::char_traits<char> >::sputn(char const*, long)+13 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/streambuf:457\r\n[4] from 0x00007ffff7e53da4 in std::__ostream_write<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)+20 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/ostream_insert.h:50\r\n[5] from 0x00007ffff7e53da4 in std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)+340 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/ostream_insert.h:101\r\n[6] from 0x00007ffff7e5415e in std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)+46 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/char_traits.h:357\r\n[7] from 0x00007ffff7f7c470 in sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&)+288 at /home/dec05eba/git/SFML/src/SFML/Graphics/ImageLoader.cpp:127\r\n[8] from 0x00007ffff7f5ab4a in sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)+54 at /home/dec05eba/git/SFML/src/SFML/Graphics/Image.cpp:125\r\n```\r\nvalgrind complains about:\r\n```\r\n 189 ==923743== Possible data race during read of size 8 at 0x4ED5D40 by thread #3\r\n 190 ==923743== Locks held: none\r\n 191 ==923743==    at 0x4A40D9E: sputn (streambuf:458)\r\n 192 ==923743==    by 0x4A40D9E: __ostream_write<char, std::char_traits<char> > (ostream_insert.h:50)\r\n 193 ==923743==    by 0x4A40D9E: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (ostream_insert.h:101)\r\n 194 ==923743==    by 0x4A4115D: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (ostream:611)\r\n 195 ==923743==    by 0x48C746F: sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&) (ImageLoader.cpp:127)\r\n 196 ==923743==    by 0x48A5B49: sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (Image.cpp:125)\r\n 197 ==923743==    by 0x109293: main::{lambda()#1}::operator()() const (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 198 ==923743==    by 0x1098FB: void std::__invoke_impl<void, main::{lambda()#1}>(std::__invoke_other, main::{lambda()#1}&&) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 199 ==923743==    by 0x1098B0: std::__invoke_result<main::{lambda()#1}>::type std::__invoke<main::{lambda()#1}>(std::__invoke_result&&, (main::{lambda()#1}&&)...) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 200 ==923743==    by 0x10985D: void std::thread::_Invoker<std::tuple<main::{lambda()#1}> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 201 ==923743==    by 0x109831: std::thread::_Invoker<std::tuple<main::{lambda()#1}> >::operator()() (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 202 ==923743==    by 0x109815: std::thread::_State_impl<std::thread::_Invoker<std::tuple<main::{lambda()#1}> > >::_M_run() (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 203 ==923743==    by 0x49E2C23: execute_native_thread_routine (thread.cc:80)\r\n 204 ==923743==    by 0x4841886: mythread_wrapper (hg_intercepts.c:387)\r\n 205 ==923743==\r\n 206 ==923743== This conflicts with a previous write of size 8 by thread #2\r\n 207 ==923743== Locks held: none\r\n 208 ==923743==    at 0x4A500FB: std::basic_streambuf<char, std::char_traits<char> >::basic_streambuf() (streambuf:473)\r\n 209 ==923743==    by 0x4EC5BA8: (anonymous namespace)::DefaultErrStreamBuf::DefaultErrStreamBuf() (Err.cpp:42)\r\n 210 ==923743==    by 0x4EC5E39: sf::err() (Err.cpp:103)\r\n 211 ==923743==    by 0x48C7460: sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&) (ImageLoader.cpp:127)\r\n 212 ==923743==    by 0x48A5B49: sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (Image.cpp:125)\r\n 213 ==923743==    by 0x109293: main::{lambda()#1}::operator()() const (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 214 ==923743==    by 0x1098FB: void std::__invoke_impl<void, main::{lambda()#1}>(std::__invoke_other, main::{lambda()#1}&&) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 215 ==923743==    by 0x1098B0: std::__invoke_result<main::{lambda()#1}>::type std::__invoke<main::{lambda()#1}>(std::__invoke_result&&, (main::{lambda()#1}&&)...) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 216 ==923743==  Address 0x4ed5d40 is 0 bytes inside data symbol \"_ZZN2sf3errEvE6buffer\"\r\n```\r\nBut looking at the code, it might be a false positive?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713945954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713965480","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-713965480","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":713965480,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzk2NTQ4MA==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T23:22:00Z","updated_at":"2020-10-21T23:31:54Z","body":"I tested changing sf::err to use thread_local variables instead of static and it doesn't crash anymore (with your branch). And actually, doing this change alone without updating stb_image.h also prevents the program from crashing (probably because word sized variables are already atomic on x86)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/713965480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/714280932","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-714280932","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":714280932,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDI4MDkzMg==","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T07:07:26Z","updated_at":"2020-10-22T07:09:26Z","body":"Nice debugging!\r\n\r\nI assume you replaced `static` with `thread_local` for [these two statements](https://github.com/SFML/SFML/blob/master/src/SFML/System/Err.cpp#L103-L104)?\r\n```cpp\r\n    thread_local DefaultErrStreamBuf buffer;\r\n    thread_local std::ostream stream(&buffer);\r\n```\r\n(according to C++ standard, `thread_local` implies `thread_local static`)\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/714280932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/714287827","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-714287827","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":714287827,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDI4NzgyNw==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T07:20:17Z","updated_at":"2020-10-22T07:20:17Z","body":"that is right","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/714287827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4076562715,"node_id":"MDExOkNsb3NlZEV2ZW50NDA3NjU2MjcxNQ==","url":"https://api.github.com/repos/SFML/SFML/issues/events/4076562715","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-12-06T12:35:01Z","state_reason":null,"performed_via_github_app":null},{"id":4076562761,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNzY1NjI3NjE=","url":"https://api.github.com/repos/SFML/SFML/issues/events/4076562761","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ea7408e1eefa6197c8c3a3cdbaabfa0e9c59b4f9","commit_url":"https://api.github.com/repos/SFML/SFML/commits/ea7408e1eefa6197c8c3a3cdbaabfa0e9c59b4f9","created_at":"2020-12-06T12:35:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739508860","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-739508860","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":739508860,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTUwODg2MA==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-06T14:16:33Z","updated_at":"2020-12-06T14:16:33Z","body":"This shouldn't be closed yet, #1712 doesn't fully fix this. thread_local needs to be added in sf::err as described above.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739508860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-06T17:10:20Z","updated_at":"2020-12-06T17:10:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/SFML/SFML/issues/1724","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/1724/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/1724/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/1724/events","html_url":"https://github.com/SFML/SFML/pull/1724","id":757974425,"node_id":"MDExOlB1bGxSZXF1ZXN0NTMzMjMxOTg4","number":1724,"title":"Thread-safe sf::err()","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85854,"node_id":"MDU6TGFiZWw4NTg1NA==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-system","name":"m:sfml-system","color":"cccccc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2020-12-06T17:10:19Z","updated_at":"2025-06-10T13:53:53Z","closed_at":"2025-06-10T13:53:53Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":true,"repository":{"id":1524684,"node_id":"MDEwOlJlcG9zaXRvcnkxNTI0Njg0","name":"SFML","full_name":"SFML/SFML","private":false,"owner":{"login":"SFML","id":4226899,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjY4OTk=","avatar_url":"https://avatars.githubusercontent.com/u/4226899?v=4","gravatar_id":"","url":"https://api.github.com/users/SFML","html_url":"https://github.com/SFML","followers_url":"https://api.github.com/users/SFML/followers","following_url":"https://api.github.com/users/SFML/following{/other_user}","gists_url":"https://api.github.com/users/SFML/gists{/gist_id}","starred_url":"https://api.github.com/users/SFML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SFML/subscriptions","organizations_url":"https://api.github.com/users/SFML/orgs","repos_url":"https://api.github.com/users/SFML/repos","events_url":"https://api.github.com/users/SFML/events{/privacy}","received_events_url":"https://api.github.com/users/SFML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/SFML/SFML","description":"Simple and Fast Multimedia Library","fork":false,"url":"https://api.github.com/repos/SFML/SFML","forks_url":"https://api.github.com/repos/SFML/SFML/forks","keys_url":"https://api.github.com/repos/SFML/SFML/keys{/key_id}","collaborators_url":"https://api.github.com/repos/SFML/SFML/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/SFML/SFML/teams","hooks_url":"https://api.github.com/repos/SFML/SFML/hooks","issue_events_url":"https://api.github.com/repos/SFML/SFML/issues/events{/number}","events_url":"https://api.github.com/repos/SFML/SFML/events","assignees_url":"https://api.github.com/repos/SFML/SFML/assignees{/user}","branches_url":"https://api.github.com/repos/SFML/SFML/branches{/branch}","tags_url":"https://api.github.com/repos/SFML/SFML/tags","blobs_url":"https://api.github.com/repos/SFML/SFML/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/SFML/SFML/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/SFML/SFML/git/refs{/sha}","trees_url":"https://api.github.com/repos/SFML/SFML/git/trees{/sha}","statuses_url":"https://api.github.com/repos/SFML/SFML/statuses/{sha}","languages_url":"https://api.github.com/repos/SFML/SFML/languages","stargazers_url":"https://api.github.com/repos/SFML/SFML/stargazers","contributors_url":"https://api.github.com/repos/SFML/SFML/contributors","subscribers_url":"https://api.github.com/repos/SFML/SFML/subscribers","subscription_url":"https://api.github.com/repos/SFML/SFML/subscription","commits_url":"https://api.github.com/repos/SFML/SFML/commits{/sha}","git_commits_url":"https://api.github.com/repos/SFML/SFML/git/commits{/sha}","comments_url":"https://api.github.com/repos/SFML/SFML/comments{/number}","issue_comment_url":"https://api.github.com/repos/SFML/SFML/issues/comments{/number}","contents_url":"https://api.github.com/repos/SFML/SFML/contents/{+path}","compare_url":"https://api.github.com/repos/SFML/SFML/compare/{base}...{head}","merges_url":"https://api.github.com/repos/SFML/SFML/merges","archive_url":"https://api.github.com/repos/SFML/SFML/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/SFML/SFML/downloads","issues_url":"https://api.github.com/repos/SFML/SFML/issues{/number}","pulls_url":"https://api.github.com/repos/SFML/SFML/pulls{/number}","milestones_url":"https://api.github.com/repos/SFML/SFML/milestones{/number}","notifications_url":"https://api.github.com/repos/SFML/SFML/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/SFML/SFML/labels{/name}","releases_url":"https://api.github.com/repos/SFML/SFML/releases{/id}","deployments_url":"https://api.github.com/repos/SFML/SFML/deployments","created_at":"2011-03-25T08:05:25Z","updated_at":"2025-11-10T06:58:23Z","pushed_at":"2025-11-10T06:58:17Z","git_url":"git://github.com/SFML/SFML.git","ssh_url":"git@github.com:SFML/SFML.git","clone_url":"https://github.com/SFML/SFML.git","svn_url":"https://github.com/SFML/SFML","homepage":"https://www.sfml-dev.org/","size":112700,"stargazers_count":11425,"watchers_count":11425,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":1873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":162,"license":{"key":"zlib","name":"zlib License","spdx_id":"Zlib","url":"https://api.github.com/licenses/zlib","node_id":"MDc6TGljZW5zZTI3"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["audio","c-plus-plus","cross-platform","games","graphics","hacktoberfest","multimedia","opengl","sdk","sfml"],"visibility":"public","forks":1873,"open_issues":162,"watchers":11425,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/SFML/SFML/pulls/1724","html_url":"https://github.com/SFML/SFML/pull/1724","diff_url":"https://github.com/SFML/SFML/pull/1724.diff","patch_url":"https://github.com/SFML/SFML/pull/1724.patch","merged_at":null},"body":"Very naive approach for fixing second problem in #1711.\r\n\r\n`sf::Err` is not thread-safe, and since it's used as a global logger across many different classes, this can quickly lead to problems when the user doesn't have a single-threaded SFML application.\r\n\r\nThis implementation is not ready for merging, we need to discuss at least:\r\n* how `sf::ThreadLocalPtr` should be used properly\r\n* how to clean up (currently, there is a memory leak for each thread)","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/1724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/1724/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739532854","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-739532854","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":739532854,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTUzMjg1NA==","user":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-06T17:11:29Z","updated_at":"2020-12-06T17:11:29Z","body":"So basically, `sf::Err` is not thread-safe. `thread_local` (or SFML's C++98 `sf::ThreadLocalPtr` equivalent) will make sure there's no race on the `DefaultErrStreamBuf` itself, but not on the underlying `stderr` object.\r\n\r\nIf I'm not mistaken, C++11 guarantees thread safety for `stdout`, `stderr`, etc. in the sense that no corruption will occur due to multi-threaded access. However, it's still possible that unbuffered characters are interleaved from two places. In C++98, there was no threading model, so I guess no guarantees (might still work in practice).\r\n\r\nI referenced a PR which is still incomplete, let's continue the discussion there. Unfortunately, pre-C++11 we cannot use `thread_local`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739532854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bromeon","id":708488,"node_id":"MDQ6VXNlcjcwODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/708488?v=4","gravatar_id":"","url":"https://api.github.com/users/Bromeon","html_url":"https://github.com/Bromeon","followers_url":"https://api.github.com/users/Bromeon/followers","following_url":"https://api.github.com/users/Bromeon/following{/other_user}","gists_url":"https://api.github.com/users/Bromeon/gists{/gist_id}","starred_url":"https://api.github.com/users/Bromeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bromeon/subscriptions","organizations_url":"https://api.github.com/users/Bromeon/orgs","repos_url":"https://api.github.com/users/Bromeon/repos","events_url":"https://api.github.com/users/Bromeon/events{/privacy}","received_events_url":"https://api.github.com/users/Bromeon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739533791","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-739533791","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":739533791,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTUzMzc5MQ==","user":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-06T17:18:28Z","updated_at":"2020-12-06T17:18:45Z","body":">If I'm not mistaken, C++11 guarantees thread safety for stdout, stderr, etc. in the sense that no corruption will occur due to multi-threaded access. However, it's still possible that unbuffered characters are interleaved from two places\r\n\r\nThats right, stderr is thread-safe and at least on gnu/linux, also unbuffered. Not sure if stderr being unbuffered is part of the standard though.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/739533791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dec05eba","id":66856951,"node_id":"MDQ6VXNlcjY2ODU2OTUx","avatar_url":"https://avatars.githubusercontent.com/u/66856951?v=4","gravatar_id":"","url":"https://api.github.com/users/dec05eba","html_url":"https://github.com/dec05eba","followers_url":"https://api.github.com/users/dec05eba/followers","following_url":"https://api.github.com/users/dec05eba/following{/other_user}","gists_url":"https://api.github.com/users/dec05eba/gists{/gist_id}","starred_url":"https://api.github.com/users/dec05eba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dec05eba/subscriptions","organizations_url":"https://api.github.com/users/dec05eba/orgs","repos_url":"https://api.github.com/users/dec05eba/repos","events_url":"https://api.github.com/users/dec05eba/events{/privacy}","received_events_url":"https://api.github.com/users/dec05eba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/838297547","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-838297547","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":838297547,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODI5NzU0Nw==","user":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T11:19:23Z","updated_at":"2021-05-11T11:19:23Z","body":"Only part of the issue has been resolved, see the PR draft #1724","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/838297547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4726319135,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ0NzI2MzE5MTM1","url":"https://api.github.com/repos/SFML/SFML/issues/events/4726319135","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2021-05-11T11:19:23Z","state_reason":null,"performed_via_github_app":null},{"id":8798915786,"node_id":"UNLE_lADOABdDzM4rUnTYzwAAAAIMdMzK","url":"https://api.github.com/repos/SFML/SFML/issues/events/8798915786","actor":{"login":"ChrisThrasher","id":39244355,"node_id":"MDQ6VXNlcjM5MjQ0MzU1","avatar_url":"https://avatars.githubusercontent.com/u/39244355?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisThrasher","html_url":"https://github.com/ChrisThrasher","followers_url":"https://api.github.com/users/ChrisThrasher/followers","following_url":"https://api.github.com/users/ChrisThrasher/following{/other_user}","gists_url":"https://api.github.com/users/ChrisThrasher/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisThrasher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisThrasher/subscriptions","organizations_url":"https://api.github.com/users/ChrisThrasher/orgs","repos_url":"https://api.github.com/users/ChrisThrasher/repos","events_url":"https://api.github.com/users/ChrisThrasher/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisThrasher/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2023-03-20T20:26:06Z","label":{"name":"s:accepted","color":"207de5"},"performed_via_github_app":null},{"actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T12:36:31Z","updated_at":"2024-05-14T12:36:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/SFML/SFML/issues/3003","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/3003/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/3003/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/3003/events","html_url":"https://github.com/SFML/SFML/issues/3003","id":2295318999,"node_id":"I_kwDOABdDzM6Iz8nX","number":3003,"title":"`sf::err()` is not thread-safe","user":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85854,"node_id":"MDU6TGFiZWw4NTg1NA==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-system","name":"m:sfml-system","color":"cccccc","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-14T12:34:53Z","updated_at":"2025-06-19T12:17:57Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1524684,"node_id":"MDEwOlJlcG9zaXRvcnkxNTI0Njg0","name":"SFML","full_name":"SFML/SFML","private":false,"owner":{"login":"SFML","id":4226899,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjY4OTk=","avatar_url":"https://avatars.githubusercontent.com/u/4226899?v=4","gravatar_id":"","url":"https://api.github.com/users/SFML","html_url":"https://github.com/SFML","followers_url":"https://api.github.com/users/SFML/followers","following_url":"https://api.github.com/users/SFML/following{/other_user}","gists_url":"https://api.github.com/users/SFML/gists{/gist_id}","starred_url":"https://api.github.com/users/SFML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SFML/subscriptions","organizations_url":"https://api.github.com/users/SFML/orgs","repos_url":"https://api.github.com/users/SFML/repos","events_url":"https://api.github.com/users/SFML/events{/privacy}","received_events_url":"https://api.github.com/users/SFML/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/SFML/SFML","description":"Simple and Fast Multimedia Library","fork":false,"url":"https://api.github.com/repos/SFML/SFML","forks_url":"https://api.github.com/repos/SFML/SFML/forks","keys_url":"https://api.github.com/repos/SFML/SFML/keys{/key_id}","collaborators_url":"https://api.github.com/repos/SFML/SFML/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/SFML/SFML/teams","hooks_url":"https://api.github.com/repos/SFML/SFML/hooks","issue_events_url":"https://api.github.com/repos/SFML/SFML/issues/events{/number}","events_url":"https://api.github.com/repos/SFML/SFML/events","assignees_url":"https://api.github.com/repos/SFML/SFML/assignees{/user}","branches_url":"https://api.github.com/repos/SFML/SFML/branches{/branch}","tags_url":"https://api.github.com/repos/SFML/SFML/tags","blobs_url":"https://api.github.com/repos/SFML/SFML/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/SFML/SFML/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/SFML/SFML/git/refs{/sha}","trees_url":"https://api.github.com/repos/SFML/SFML/git/trees{/sha}","statuses_url":"https://api.github.com/repos/SFML/SFML/statuses/{sha}","languages_url":"https://api.github.com/repos/SFML/SFML/languages","stargazers_url":"https://api.github.com/repos/SFML/SFML/stargazers","contributors_url":"https://api.github.com/repos/SFML/SFML/contributors","subscribers_url":"https://api.github.com/repos/SFML/SFML/subscribers","subscription_url":"https://api.github.com/repos/SFML/SFML/subscription","commits_url":"https://api.github.com/repos/SFML/SFML/commits{/sha}","git_commits_url":"https://api.github.com/repos/SFML/SFML/git/commits{/sha}","comments_url":"https://api.github.com/repos/SFML/SFML/comments{/number}","issue_comment_url":"https://api.github.com/repos/SFML/SFML/issues/comments{/number}","contents_url":"https://api.github.com/repos/SFML/SFML/contents/{+path}","compare_url":"https://api.github.com/repos/SFML/SFML/compare/{base}...{head}","merges_url":"https://api.github.com/repos/SFML/SFML/merges","archive_url":"https://api.github.com/repos/SFML/SFML/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/SFML/SFML/downloads","issues_url":"https://api.github.com/repos/SFML/SFML/issues{/number}","pulls_url":"https://api.github.com/repos/SFML/SFML/pulls{/number}","milestones_url":"https://api.github.com/repos/SFML/SFML/milestones{/number}","notifications_url":"https://api.github.com/repos/SFML/SFML/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/SFML/SFML/labels{/name}","releases_url":"https://api.github.com/repos/SFML/SFML/releases{/id}","deployments_url":"https://api.github.com/repos/SFML/SFML/deployments","created_at":"2011-03-25T08:05:25Z","updated_at":"2025-11-10T06:58:23Z","pushed_at":"2025-11-10T06:58:17Z","git_url":"git://github.com/SFML/SFML.git","ssh_url":"git@github.com:SFML/SFML.git","clone_url":"https://github.com/SFML/SFML.git","svn_url":"https://github.com/SFML/SFML","homepage":"https://www.sfml-dev.org/","size":112700,"stargazers_count":11425,"watchers_count":11425,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":1873,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":162,"license":{"key":"zlib","name":"zlib License","spdx_id":"Zlib","url":"https://api.github.com/licenses/zlib","node_id":"MDc6TGljZW5zZTI3"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["audio","c-plus-plus","cross-platform","games","graphics","hacktoberfest","multimedia","opengl","sdk","sfml"],"visibility":"public","forks":1873,"open_issues":162,"watchers":11425,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Description\r\n\r\nSo basically, `sf::Err` is not thread-safe. `thread_local` (or SFML's C++98 `sf::ThreadLocalPtr` equivalent) will make sure there's no race on the `DefaultErrStreamBuf` itself, but not on the underlying `stderr` object.\r\n\r\nIf I'm not mistaken, C++11 guarantees thread safety for `stdout`, `stderr`, etc. in the sense that no corruption will occur due to multi-threaded access. However, it's still possible that unbuffered characters are interleaved from two places. In C++98, there was no threading model, so I guess no guarantees (might still work in practice).\r\n\r\nI referenced a PR which is still incomplete, let's continue the discussion there. Unfortunately, pre-C++11 we cannot use `thread_local`.\r\n\r\nThis was original discussed and reported in #1711  \r\nDraft PR: #1724 \r\n\r\n### Steps to reproduce\r\n\r\n```cpp\r\n#include <SFML/Graphics/Image.hpp>\r\n#include <thread>\r\n\r\nconst int num_images = 3;\r\nstatic std::string image_paths[3] = { \"working-image.png\", \"non-existing-image.png\", \"main.cpp\" };\r\n\r\nint main()\r\n{\r\n    const int num_threads = 4;\r\n    std::thread threads[num_threads];\r\n\r\n    for(int i = 0; i < num_threads; ++i) {\r\n        threads[i] = std::thread([]() {\r\n            while(true) {\r\n                for(int i = 0; i < num_images; ++i) {\r\n                    sf::Image image;\r\n                    image.loadFromFile(image_paths[i]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    std::this_thread::sleep_for(std::chrono::seconds(10000000));\r\n}\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nApplication runs through without issues\r\n\r\n### Actual behavior\r\n\r\nYou can run into crashes:\r\n\r\n```\r\n[1] from 0x00007ffff7e629a1 in std::char_traits<char>::copy(char*, char const*, unsigned long)+25 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/char_traits.h:395\r\n[2] from 0x00007ffff7e629a1 in std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long)+81 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/streambuf.tcc:90\r\n[3] from 0x00007ffff7e53da4 in std::basic_streambuf<char, std::char_traits<char> >::sputn(char const*, long)+13 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/streambuf:457\r\n[4] from 0x00007ffff7e53da4 in std::__ostream_write<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)+20 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/ostream_insert.h:50\r\n[5] from 0x00007ffff7e53da4 in std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)+340 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/ostream_insert.h:101\r\n[6] from 0x00007ffff7e5415e in std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)+46 at /build/gcc/src/gcc-build/x86_64-pc-linux-gnu/libstdc++-v3/include/bits/char_traits.h:357\r\n[7] from 0x00007ffff7f7c470 in sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&)+288 at /home/dec05eba/git/SFML/src/SFML/Graphics/ImageLoader.cpp:127\r\n[8] from 0x00007ffff7f5ab4a in sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)+54 at /home/dec05eba/git/SFML/src/SFML/Graphics/Image.cpp:125\r\n```\r\n\r\nValgrid report:\r\n```\r\n 189 ==923743== Possible data race during read of size 8 at 0x4ED5D40 by thread #3\r\n 190 ==923743== Locks held: none\r\n 191 ==923743==    at 0x4A40D9E: sputn (streambuf:458)\r\n 192 ==923743==    by 0x4A40D9E: __ostream_write<char, std::char_traits<char> > (ostream_insert.h:50)\r\n 193 ==923743==    by 0x4A40D9E: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (ostream_insert.h:101)\r\n 194 ==923743==    by 0x4A4115D: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (ostream:611)\r\n 195 ==923743==    by 0x48C746F: sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&) (ImageLoader.cpp:127)\r\n 196 ==923743==    by 0x48A5B49: sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (Image.cpp:125)\r\n 197 ==923743==    by 0x109293: main::{lambda()#1}::operator()() const (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 198 ==923743==    by 0x1098FB: void std::__invoke_impl<void, main::{lambda()#1}>(std::__invoke_other, main::{lambda()#1}&&) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 199 ==923743==    by 0x1098B0: std::__invoke_result<main::{lambda()#1}>::type std::__invoke<main::{lambda()#1}>(std::__invoke_result&&, (main::{lambda()#1}&&)...) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 200 ==923743==    by 0x10985D: void std::thread::_Invoker<std::tuple<main::{lambda()#1}> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 201 ==923743==    by 0x109831: std::thread::_Invoker<std::tuple<main::{lambda()#1}> >::operator()() (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 202 ==923743==    by 0x109815: std::thread::_State_impl<std::thread::_Invoker<std::tuple<main::{lambda()#1}> > >::_M_run() (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 203 ==923743==    by 0x49E2C23: execute_native_thread_routine (thread.cc:80)\r\n 204 ==923743==    by 0x4841886: mythread_wrapper (hg_intercepts.c:387)\r\n 205 ==923743==\r\n 206 ==923743== This conflicts with a previous write of size 8 by thread #2\r\n 207 ==923743== Locks held: none\r\n 208 ==923743==    at 0x4A500FB: std::basic_streambuf<char, std::char_traits<char> >::basic_streambuf() (streambuf:473)\r\n 209 ==923743==    by 0x4EC5BA8: (anonymous namespace)::DefaultErrStreamBuf::DefaultErrStreamBuf() (Err.cpp:42)\r\n 210 ==923743==    by 0x4EC5E39: sf::err() (Err.cpp:103)\r\n 211 ==923743==    by 0x48C7460: sf::priv::ImageLoader::loadImageFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&, sf::Vector2<unsigned int>&) (ImageLoader.cpp:127)\r\n 212 ==923743==    by 0x48A5B49: sf::Image::loadFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (Image.cpp:125)\r\n 213 ==923743==    by 0x109293: main::{lambda()#1}::operator()() const (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 214 ==923743==    by 0x1098FB: void std::__invoke_impl<void, main::{lambda()#1}>(std::__invoke_other, main::{lambda()#1}&&) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 215 ==923743==    by 0x1098B0: std::__invoke_result<main::{lambda()#1}>::type std::__invoke<main::{lambda()#1}>(std::__invoke_result&&, (main::{lambda()#1}&&)...) (in /home/dec05eba/sfml-crash/test-sfml-crash)\r\n 216 ==923743==  Address 0x4ed5d40 is 0 bytes inside data symbol \"_ZZN2sf3errEvE6buffer\"\r\n ```","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/3003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/3003/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/2110112779","html_url":"https://github.com/SFML/SFML/issues/1711#issuecomment-2110112779","issue_url":"https://api.github.com/repos/SFML/SFML/issues/1711","id":2110112779,"node_id":"IC_kwDOABdDzM59xcQL","user":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T12:37:41Z","updated_at":"2024-05-14T12:37:41Z","body":"As the title is confusing and primary reported issue has been fixed, I've created a separate issue to track the `sf:err()` issue: #3003 \r\n\r\nAs such, I'm closing this one here again","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/comments/2110112779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12801527778,"node_id":"CE_lADOABdDzM4rUnTYzwAAAAL7B8_i","url":"https://api.github.com/repos/SFML/SFML/issues/events/12801527778","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-05-14T12:37:42Z","state_reason":null,"performed_via_github_app":null},{"id":12801534315,"node_id":"MIE_lADOABdDzM4rUnTYzwAAAAL7B-lr","url":"https://api.github.com/repos/SFML/SFML/issues/events/12801534315","actor":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-05-14T12:38:04Z","milestone":{"title":"2.6"},"performed_via_github_app":null}]