{"url":"https://api.github.com/repos/SFML/SFML/issues/1533","repository_url":"https://api.github.com/repos/SFML/SFML","labels_url":"https://api.github.com/repos/SFML/SFML/issues/1533/labels{/name}","comments_url":"https://api.github.com/repos/SFML/SFML/issues/1533/comments","events_url":"https://api.github.com/repos/SFML/SFML/issues/1533/events","html_url":"https://github.com/SFML/SFML/issues/1533","id":394892513,"node_id":"MDU6SXNzdWUzOTQ4OTI1MTM=","number":1533,"title":"EGL Context antialiasing bug ","user":{"login":"DanielDorn","id":9455880,"node_id":"MDQ6VXNlcjk0NTU4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/9455880?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielDorn","html_url":"https://github.com/DanielDorn","followers_url":"https://api.github.com/users/DanielDorn/followers","following_url":"https://api.github.com/users/DanielDorn/following{/other_user}","gists_url":"https://api.github.com/users/DanielDorn/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielDorn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielDorn/subscriptions","organizations_url":"https://api.github.com/users/DanielDorn/orgs","repos_url":"https://api.github.com/users/DanielDorn/repos","events_url":"https://api.github.com/users/DanielDorn/events{/privacy}","received_events_url":"https://api.github.com/users/DanielDorn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":85849,"node_id":"MDU6TGFiZWw4NTg0OQ==","url":"https://api.github.com/repos/SFML/SFML/labels/bug","name":"bug","color":"ff4242","default":true,"description":null},{"id":85855,"node_id":"MDU6TGFiZWw4NTg1NQ==","url":"https://api.github.com/repos/SFML/SFML/labels/m:sfml-window","name":"m:sfml-window","color":"cccccc","default":false,"description":null},{"id":100769616,"node_id":"MDU6TGFiZWwxMDA3Njk2MTY=","url":"https://api.github.com/repos/SFML/SFML/labels/p:android","name":"p:android","color":"888888","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"binary1248","id":949359,"node_id":"MDQ6VXNlcjk0OTM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/949359?v=4","gravatar_id":"","url":"https://api.github.com/users/binary1248","html_url":"https://github.com/binary1248","followers_url":"https://api.github.com/users/binary1248/followers","following_url":"https://api.github.com/users/binary1248/following{/other_user}","gists_url":"https://api.github.com/users/binary1248/gists{/gist_id}","starred_url":"https://api.github.com/users/binary1248/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binary1248/subscriptions","organizations_url":"https://api.github.com/users/binary1248/orgs","repos_url":"https://api.github.com/users/binary1248/repos","events_url":"https://api.github.com/users/binary1248/events{/privacy}","received_events_url":"https://api.github.com/users/binary1248/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/SFML/SFML/milestones/17","html_url":"https://github.com/SFML/SFML/milestone/17","labels_url":"https://api.github.com/repos/SFML/SFML/milestones/17/labels","id":3063354,"node_id":"MDk6TWlsZXN0b25lMzA2MzM1NA==","number":17,"title":"2.6","description":"","creator":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":290,"state":"closed","created_at":"2018-01-25T09:14:12Z","updated_at":"2025-07-17T21:59:51Z","due_on":null,"closed_at":"2023-06-22T20:47:36Z"},"comments":1,"created_at":"2018-12-30T18:37:16Z","updated_at":"2019-01-04T23:55:52Z","closed_at":"2019-01-04T23:55:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Once again a bug in the EGL Context class now effecting antialiasing \r\n\r\nThis bug effects all versions of SFML supporting android,\r\n\r\nto recreate this bug simply use the following code with the current version of sfml\r\n\r\n\tint main(int argc, char* argv[])\r\n\t{\r\n\t\t::tiny::RenderWindow window(::tiny::VideoMode(200, 200), \"tiny works!\", ::tiny::Style::Default, ::tiny::ContextSettings{ 32, 0, 4, 1, 1, ::tiny::ContextSettings::Default, false });\r\n\t\twindow.setActive(true);\r\n\t\t::tiny::CircleShape shape(100.f);\r\n\t\tshape.setFillColor(::tiny::Color::Green);\r\n\t\tbool isDone = false;\r\n\t\t\r\n\t\t\r\n\t\twhile(isDone == false)\r\n\t\t{\r\n\t\t\t::tiny::Event event;\r\n\t\t\twhile (window.pollEvent(event))\r\n\t\t\t{\r\n\t\t\t\tif (event.type == ::tiny::Event::Closed)\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.close();\r\n\t\t\t\t\tisDone = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(event.type == ::tiny::Event::GainedFocus)\r\n\t\t\t\t\t::tiny::err() << \"Gained Focus\" << ::std::endl;\r\n\t\t\t}\r\n\r\n\t\t\twindow.clear();\r\n\t\t\twindow.draw(shape);\r\n\t\t\twindow.display();\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\nBecause we have set the antialiasing level to 4 it will draw nothing to the screen because of the following lines of bugged code in EglContext.cpp\r\n\r\n\tEGLConfig EglContext::getBestConfig(EGLDisplay display, unsigned int bitsPerPixel, const ContextSettings& settings)\r\n\t{\r\n\t\t// Set our video settings constraint\r\n\t\tconst EGLint attributes[] = {\r\n\t\t\tEGL_BUFFER_SIZE, static_cast<EGLint>(bitsPerPixel),\r\n\t\t\tEGL_DEPTH_SIZE, static_cast<EGLint>(settings.depthBits),\r\n\t\t\tEGL_STENCIL_SIZE, static_cast<EGLint>(settings.stencilBits),\r\n\t\t\tEGL_SAMPLE_BUFFERS, static_cast<EGLint>(settings.antialiasingLevel),\r\n\t\t\tEGL_SURFACE_TYPE, EGL_WINDOW_BIT | EGL_PBUFFER_BIT,\r\n\t\t\tEGL_RENDERABLE_TYPE, EGL_OPENGL_ES_BIT,\r\n\t\t\tEGL_NONE\r\n\t\t};\r\n\r\n\t\tEGLint configCount;\r\n\t\tEGLConfig configs[1];\r\n\r\n\t\t// Ask EGL for the best config matching our video settings\r\n\t\teglCheck(eglChooseConfig(display, attributes, configs, 1, &configCount));\r\n\r\n\t\t// TODO: This should check EGL_CONFORMANT and pick the first conformant configuration.\r\n\r\n\t\treturn configs[0];\r\n\t}\r\n\r\nthe bug coming from the getBestConfig function is caused because of incorrectly set attributes, EGL_SAMPLE_BUFFERS is not where we set the multisamples but rather the number of buffers for multisampling, currently EGL only support a value between 0 and 1, anything more then 1 will caused undefined behavior,\r\n\r\npatch \r\n\r\n\tEGLConfig EglContext::getBestConfig(EGLDisplay display, unsigned int bitsPerPixel, const ContextSettings& settings)\r\n\t{\r\n\t\tEGLint multiSamplesBuffer = 0;\r\n\r\n\t\tif(settings.antialiasingLevel > 0)\r\n\t\t\tmultiSamplesBuffer = 1;\r\n\t\t\t\r\n\t\t// Set our video settings constraint\r\n\t\tconst EGLint attributes[] = {\r\n\t\t\tEGL_BUFFER_SIZE, static_cast<EGLint>(bitsPerPixel),\r\n\t\t\tEGL_DEPTH_SIZE, static_cast<EGLint>(settings.depthBits),\r\n\t\t\tEGL_STENCIL_SIZE, static_cast<EGLint>(settings.stencilBits),\r\n\t\t\tEGL_SAMPLE_BUFFERS, multiSamplesBuffer,\r\n\t\t\tEGL_SAMPLES, static_cast<EGLint>(settings.antialiasingLevel),\r\n\t\t\tEGL_SURFACE_TYPE, EGL_WINDOW_BIT | EGL_PBUFFER_BIT,\r\n\t\t\tEGL_RENDERABLE_TYPE, EGL_OPENGL_ES_BIT,\r\n\t\t\tEGL_NONE\r\n\t\t};\r\n\r\n\t\tEGLint configCount;\r\n\t\tEGLConfig configs[1];\r\n\r\n\t\t// Ask EGL for the best config matching our video settings\r\n\t\teglCheck(eglChooseConfig(display, attributes, configs, 1, &configCount));\r\n\r\n\t\t// TODO: This should check EGL_CONFORMANT and pick the first conformant configuration.\r\n\r\n\t\treturn configs[0];\r\n\t}\r\n\r\nthis patch simply checks if antialiasing is enabled and sets a the samples buffer on or off accordingly, hope this helps anyone with this issue, cheers (= ","closed_by":{"login":"eXpl0it3r","id":920861,"node_id":"MDQ6VXNlcjkyMDg2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/920861?v=4","gravatar_id":"","url":"https://api.github.com/users/eXpl0it3r","html_url":"https://github.com/eXpl0it3r","followers_url":"https://api.github.com/users/eXpl0it3r/followers","following_url":"https://api.github.com/users/eXpl0it3r/following{/other_user}","gists_url":"https://api.github.com/users/eXpl0it3r/gists{/gist_id}","starred_url":"https://api.github.com/users/eXpl0it3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eXpl0it3r/subscriptions","organizations_url":"https://api.github.com/users/eXpl0it3r/orgs","repos_url":"https://api.github.com/users/eXpl0it3r/repos","events_url":"https://api.github.com/users/eXpl0it3r/events{/privacy}","received_events_url":"https://api.github.com/users/eXpl0it3r/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/SFML/SFML/issues/1533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/SFML/SFML/issues/1533/timeline","performed_via_github_app":null,"state_reason":"completed"}