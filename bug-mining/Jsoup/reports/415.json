{"url":"https://api.github.com/repos/jhy/jsoup/issues/1883","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1883/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1883/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1883/events","html_url":"https://github.com/jhy/jsoup/issues/1883","id":1530870713,"node_id":"I_kwDOAAbAPs5bPzu5","number":1883,"title":"Timeout is effectively half of what it should be","user":{"login":"kyz","id":530810,"node_id":"MDQ6VXNlcjUzMDgxMA==","avatar_url":"https://avatars.githubusercontent.com/u/530810?v=4","gravatar_id":"","url":"https://api.github.com/users/kyz","html_url":"https://github.com/kyz","followers_url":"https://api.github.com/users/kyz/followers","following_url":"https://api.github.com/users/kyz/following{/other_user}","gists_url":"https://api.github.com/users/kyz/gists{/gist_id}","starred_url":"https://api.github.com/users/kyz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyz/subscriptions","organizations_url":"https://api.github.com/users/kyz/orgs","repos_url":"https://api.github.com/users/kyz/repos","events_url":"https://api.github.com/users/kyz/events{/privacy}","received_events_url":"https://api.github.com/users/kyz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-01-12T15:04:47Z","updated_at":"2025-06-22T01:52:52Z","closed_at":"2025-06-22T01:48:01Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"If I create a connection with a 30s timeout (e.g. `Jsoup.connect().timeout(30000)`), this allows:\r\n\r\n1. the initial connection to the web server to take up to 30s\r\n2. web server sending first byte of response to take up to 15s (half!)\r\n3. web server sending entire response to take up to 30s\r\n\r\nAll three should allow up to 30s.\r\n\r\nThe 15s anomaly is due to [`conn.setReadTimeout(req.timeout() / 2);`](https://github.com/jhy/jsoup/blob/e57c7e557ae9de25f9f6aea9d64bc80b7042bc7c/src/main/java/org/jsoup/helper/HttpConnection.java#L1025)\r\n\r\nI understand that if you did `conn.setConnectTimeout(30000)` and `conn.setReadTimeout(30000)`, then it might be 60s before the request completes, provided the webserver deliberately waited 29.999s before allowing the connection to open... but this is not fixed by halving the initial read timeout, it just reduces it to 45s (15s over the configured timeout).\r\n\r\nI'd say it was much more common that connection is established quickly, then the web server takes its time servicing the request, only starting its response after several seconds of work. I'd like to say `conn.timeout(30000)` to allow the webserver 30s of time to do something with my request before giving any response. I don't want it to have a timeout after 15s (after the connection was established in 0.001s)","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1883/timeline","performed_via_github_app":null,"state_reason":"completed"}