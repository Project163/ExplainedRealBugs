[{"id":1339237706,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTMzOTIzNzcwNg==","url":"https://api.github.com/repos/jhy/jsoup/issues/events/1339237706","actor":{"login":"baka-kaba","id":6281947,"node_id":"MDQ6VXNlcjYyODE5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/6281947?v=4","gravatar_id":"","url":"https://api.github.com/users/baka-kaba","html_url":"https://github.com/baka-kaba","followers_url":"https://api.github.com/users/baka-kaba/followers","following_url":"https://api.github.com/users/baka-kaba/following{/other_user}","gists_url":"https://api.github.com/users/baka-kaba/gists{/gist_id}","starred_url":"https://api.github.com/users/baka-kaba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baka-kaba/subscriptions","organizations_url":"https://api.github.com/users/baka-kaba/orgs","repos_url":"https://api.github.com/users/baka-kaba/repos","events_url":"https://api.github.com/users/baka-kaba/events{/privacy}","received_events_url":"https://api.github.com/users/baka-kaba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2017-11-13T17:47:27Z","rename":{"from":"Entities.canEncode() with non-fast-path encoding is not thread safe on Android","to":"Entities.canEncode() with non-fast-path encoding is not thread safe on Android (jsoup 1.11.1)"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344053263","html_url":"https://github.com/jhy/jsoup/issues/970#issuecomment-344053263","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/970","id":344053263,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDA1MzI2Mw==","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-13T20:49:38Z","updated_at":"2017-11-13T20:49:38Z","body":"Thanks. The solution is probably to put the encoder (which is present in the document and created on the html visit) into a ThreadLocal. I didn't consider that users would be serializing the same document concurrently.\r\n\r\nAs a workaround you should be able to do a document.clone() before serializing.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344053263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1339569282,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzMzk1NjkyODI=","url":"https://api.github.com/repos/jhy/jsoup/issues/events/1339569282","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-11-13T20:49:43Z","label":{"name":"bug","color":"e10c02"},"performed_via_github_app":null},{"id":1339569328,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEzMzk1NjkzMjg=","url":"https://api.github.com/repos/jhy/jsoup/issues/events/1339569328","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2017-11-13T20:49:45Z","milestone":{"title":"1.11.2"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344382849","html_url":"https://github.com/jhy/jsoup/issues/970#issuecomment-344382849","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/970","id":344382849,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDM4Mjg0OQ==","user":{"login":"baka-kaba","id":6281947,"node_id":"MDQ6VXNlcjYyODE5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/6281947?v=4","gravatar_id":"","url":"https://api.github.com/users/baka-kaba","html_url":"https://github.com/baka-kaba","followers_url":"https://api.github.com/users/baka-kaba/followers","following_url":"https://api.github.com/users/baka-kaba/following{/other_user}","gists_url":"https://api.github.com/users/baka-kaba/gists{/gist_id}","starred_url":"https://api.github.com/users/baka-kaba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baka-kaba/subscriptions","organizations_url":"https://api.github.com/users/baka-kaba/orgs","repos_url":"https://api.github.com/users/baka-kaba/repos","events_url":"https://api.github.com/users/baka-kaba/events{/privacy}","received_events_url":"https://api.github.com/users/baka-kaba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T20:11:03Z","updated_at":"2017-11-14T20:11:03Z","body":"I actually started parallelising it because I was profiling an app, and I saw the ``html()`` calls were taking a long time, so I wanted to try and reduce the delay the users are seeing when fetching and parsing a page. Now I've dug through the jsoup code, it's obviously the encoding that's the real problem (non-utf-8 so it's taking the slow path), but yeah - that was the motivation\r\n\r\nI've tried your multiple Document approach and that works out, still a 2-3x speedup over single-threaded, thanks!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344382849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"baka-kaba","id":6281947,"node_id":"MDQ6VXNlcjYyODE5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/6281947?v=4","gravatar_id":"","url":"https://api.github.com/users/baka-kaba","html_url":"https://github.com/baka-kaba","followers_url":"https://api.github.com/users/baka-kaba/followers","following_url":"https://api.github.com/users/baka-kaba/following{/other_user}","gists_url":"https://api.github.com/users/baka-kaba/gists{/gist_id}","starred_url":"https://api.github.com/users/baka-kaba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baka-kaba/subscriptions","organizations_url":"https://api.github.com/users/baka-kaba/orgs","repos_url":"https://api.github.com/users/baka-kaba/repos","events_url":"https://api.github.com/users/baka-kaba/events{/privacy}","received_events_url":"https://api.github.com/users/baka-kaba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344472879","html_url":"https://github.com/jhy/jsoup/issues/970#issuecomment-344472879","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/970","id":344472879,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDQ3Mjg3OQ==","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T03:11:59Z","updated_at":"2017-11-15T03:11:59Z","body":"https://encoding.spec.whatwg.org/#names-and-labels defines that iso-8859-1 is an alias for Windows-1252 (because historically so many authors used the former when they meant the latter, I guess.) Should update jsoup to apply that alias, as well.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344472879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344488205","html_url":"https://github.com/jhy/jsoup/issues/970#issuecomment-344488205","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/970","id":344488205,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDQ4ODIwNQ==","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T05:15:22Z","updated_at":"2017-11-15T05:15:22Z","body":"(Just to confirm I can replicate the issue on Android on this site.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344488205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1342330676,"node_id":"MDExOkNsb3NlZEV2ZW50MTM0MjMzMDY3Ng==","url":"https://api.github.com/repos/jhy/jsoup/issues/events/1342330676","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"e38af6a351cef738885cb61fed828d9c9f6ec5a1","commit_url":"https://api.github.com/repos/jhy/jsoup/commits/e38af6a351cef738885cb61fed828d9c9f6ec5a1","created_at":"2017-11-15T05:38:52Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344491810","html_url":"https://github.com/jhy/jsoup/issues/970#issuecomment-344491810","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/970","id":344491810,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDQ5MTgxMA==","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T05:41:58Z","updated_at":"2017-11-15T05:41:58Z","body":"OK, this is fixed now.\r\n\r\nIt would be good to add 1252 to the fast encode path. Need to work out the relevant unicode ranges from http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT and implement a can encode for them.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/344491810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12942219870,"node_id":"REFE_lADOAAbAPs4QTYvUzwAAAAMDappe","url":"https://api.github.com/repos/jhy/jsoup/issues/events/12942219870","actor":{"login":"winning1120xx","id":6879244,"node_id":"MDQ6VXNlcjY4NzkyNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6879244?v=4","gravatar_id":"","url":"https://api.github.com/users/winning1120xx","html_url":"https://github.com/winning1120xx","followers_url":"https://api.github.com/users/winning1120xx/followers","following_url":"https://api.github.com/users/winning1120xx/following{/other_user}","gists_url":"https://api.github.com/users/winning1120xx/gists{/gist_id}","starred_url":"https://api.github.com/users/winning1120xx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/winning1120xx/subscriptions","organizations_url":"https://api.github.com/users/winning1120xx/orgs","repos_url":"https://api.github.com/users/winning1120xx/repos","events_url":"https://api.github.com/users/winning1120xx/events{/privacy}","received_events_url":"https://api.github.com/users/winning1120xx/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e38af6a351cef738885cb61fed828d9c9f6ec5a1","commit_url":"https://api.github.com/repos/winning1120xx/jsoup/commits/e38af6a351cef738885cb61fed828d9c9f6ec5a1","created_at":"2024-05-27T08:08:03Z","performed_via_github_app":null}]