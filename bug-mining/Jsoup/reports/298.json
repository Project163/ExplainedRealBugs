{"url":"https://api.github.com/repos/jhy/jsoup/issues/1926","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1926/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1926/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1926/events","html_url":"https://github.com/jhy/jsoup/issues/1926","id":1643680054,"node_id":"I_kwDOAAbAPs5h-JE2","number":1926,"title":"Difference of block element handling in jsoup version 15.4 to previous version ","user":{"login":"AnanasPizza","id":48493592,"node_id":"MDQ6VXNlcjQ4NDkzNTky","avatar_url":"https://avatars.githubusercontent.com/u/48493592?v=4","gravatar_id":"","url":"https://api.github.com/users/AnanasPizza","html_url":"https://github.com/AnanasPizza","followers_url":"https://api.github.com/users/AnanasPizza/followers","following_url":"https://api.github.com/users/AnanasPizza/following{/other_user}","gists_url":"https://api.github.com/users/AnanasPizza/gists{/gist_id}","starred_url":"https://api.github.com/users/AnanasPizza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnanasPizza/subscriptions","organizations_url":"https://api.github.com/users/AnanasPizza/orgs","repos_url":"https://api.github.com/users/AnanasPizza/repos","events_url":"https://api.github.com/users/AnanasPizza/events{/privacy}","received_events_url":"https://api.github.com/users/AnanasPizza/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":22026,"node_id":"MDU6TGFiZWwyMjAyNg==","url":"https://api.github.com/repos/jhy/jsoup/labels/bug","name":"bug","color":"D13131","default":true,"description":"A confirmed bug, that we should fix"}],"state":"closed","locked":false,"assignee":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/jhy/jsoup/milestones/25","html_url":"https://github.com/jhy/jsoup/milestone/25","labels_url":"https://api.github.com/repos/jhy/jsoup/milestones/25/labels","id":8941164,"node_id":"MI_kwDOAAbAPs4AiG5s","number":25,"title":"1.16.1","description":"","creator":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2023-01-18T23:14:56Z","updated_at":"2023-05-06T02:28:37Z","due_on":"2023-04-23T07:00:00Z","closed_at":"2023-05-06T02:27:02Z"},"comments":1,"created_at":"2023-03-28T10:46:30Z","updated_at":"2023-04-29T02:28:34Z","closed_at":"2023-04-29T02:25:15Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi, we noticed a change in the parser behavior regarding newlines/whitespaces between inline/block elements when using Jsoup to create a document from html:\r\n\r\nSo here is a minimal testcase:\r\nInput html: \r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n        <body>\r\n            <table>\r\n                <tr>\r\n                    <td>\r\n                        <p style=\"display:inline;\">A</p>\r\n                        <p style=\"display:inline;\">B</p>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </body>\r\n    </html>\r\n\r\nTestcode:\r\n```\r\n\r\nDocument document = Jsoup.parse(html);\r\nString result = document.toString();\r\n```\r\n\r\nThis is the result for < 15.4:\r\n\r\n    <!doctype html>\r\n    <html>\r\n        <head></head>\r\n        <body>\r\n            <table>\r\n                <tbody>\r\n                    <tr>\r\n                        <td><p style=\"display:inline;\">A</p> <p style=\"display:inline;\">B</p></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </body>\r\n    </html>\r\n\r\nThis is the result for 15.4:\r\n\r\n    <!doctype html>\r\n    <html>\r\n        <head></head>\r\n        <body>\r\n            <table>\r\n                <tbody>\r\n                    <tr>\r\n                        <td><p style=\"display:inline;\">A</p><p style=\"display:inline;\">B</p></td>\r\n                    </tr>\r\n             </tbody>\r\n            </table>\r\n        </body>\r\n    </html>\r\n\r\nSo you see the difference is what's happening between the two p-tags. In previous versions, they would be collapsed and there would be a whitespace between them. Now that whitespace is removed. We noticed this change of behavior inside table cells, but there might be more places where this now happens.\r\n\r\nWhy do we think the previous behavior was better: \r\nThe additional whitespace between actual block-elements did not hurt. And as the Tag#isBlock method does not handle the display:inline styling, it can't be sure this really is a block element and it would be better to let the browser handle it. \r\n\r\nThe normal browser behavior is, if there are two block-elements after another, the browser will put these in new lines. No matter if there is no whitespace, a single whitespace or a linebreak between them in the raw html.\r\nIf there are two inline-elements, the browser will put them in the same line, no difference if there is a whitespace between them or a linebreak. But it does make a difference if there is no whitespace at all between them, because then it will not add a single whitespace, it will print the text in the spans directly next to each other.\r\n\r\nSo if one pastes the resulting html from above in to a html file and opens it in the browser, there is a difference, because the browser now sees two inline elements without a whitespace or linebreak between them and prints them just like that, while behavior with the original html would be that there is a whitespace between them.\r\n\r\nOriginal in browser:\r\n![image](https://user-images.githubusercontent.com/48493592/228187440-dc0b6cf9-5c2f-42c0-bce0-cee2a7e0ff29.png)\r\n\r\nParsed with version <15.4:\r\n![image](https://user-images.githubusercontent.com/48493592/228184819-26932d5f-f5e8-4b7c-a6c7-60f4f1bf1961.png)\r\n\r\nParsed with version 15.4:\r\n![image](https://user-images.githubusercontent.com/48493592/228184687-83fefb82-b7ec-47d0-bda7-0e2d6753d823.png)\r\n","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1926/timeline","performed_via_github_app":null,"state_reason":"completed"}