{"url":"https://api.github.com/repos/jhy/jsoup/issues/1998","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/events","html_url":"https://github.com/jhy/jsoup/issues/1998","id":1896177631,"node_id":"I_kwDOAAbAPs5xBV_f","number":1998,"title":"Bug: Vertical Bar Character as class name throws an Exception","user":{"login":"m-heider","id":145003048,"node_id":"U_kgDOCKSSKA","avatar_url":"https://avatars.githubusercontent.com/u/145003048?v=4","gravatar_id":"","url":"https://api.github.com/users/m-heider","html_url":"https://github.com/m-heider","followers_url":"https://api.github.com/users/m-heider/followers","following_url":"https://api.github.com/users/m-heider/following{/other_user}","gists_url":"https://api.github.com/users/m-heider/gists{/gist_id}","starred_url":"https://api.github.com/users/m-heider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m-heider/subscriptions","organizations_url":"https://api.github.com/users/m-heider/orgs","repos_url":"https://api.github.com/users/m-heider/repos","events_url":"https://api.github.com/users/m-heider/events{/privacy}","received_events_url":"https://api.github.com/users/m-heider/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":623963149,"node_id":"MDU6TGFiZWw2MjM5NjMxNDk=","url":"https://api.github.com/repos/jhy/jsoup/labels/fixed","name":"fixed","color":"7BE482","default":false,"description":"An {bug|improvement} that has been {fixed|implemented}"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-14T09:44:27Z","updated_at":"2024-08-27T10:15:11Z","closed_at":"2024-08-27T10:14:10Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Consider the following HTML:\r\n\r\n```\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head><title>Title</title></head>\r\n<body> \r\n   <button class=\"|\">Button</button>\r\n</body>\r\n</html>\r\n```\r\nThis HTML is valid according to [https://validator.w3.org/nu/#textarea](https://validator.w3.org/nu/#textarea)\r\n\r\nIf I try to get the CSS selector of the button, a SelectorParseException is being thrown:\r\n\r\n```\r\nDocument doc = Jsoup.parse(\"<!DOCTYPE html>\\n\" +\r\n                           \"<html lang=\\\"en\\\">\\n\" +\r\n                           \"<head><title>Title</title></head>\\n\" +\r\n                           \"<body> \\n\" +\r\n                           \"  <button class=\\\"|\\\">Button</button>\\n\" +\r\n                           \"</body>\\n\" +\r\n                           \"</html>\");\r\nElements elements = doc.select(\"button\");\r\nString selector = elements.get(0).cssSelector();\r\n```\r\n\r\nStacktrace (Jsoup latest stable version 1.16.1):\r\n```\r\norg.jsoup.select.Selector$SelectorParseException: String must not be empty\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:47)\r\n\tat org.jsoup.select.QueryParser.combinator(QueryParser.java:90)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:60)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.Selector.select(Selector.java:98)\r\n\tat org.jsoup.nodes.Element.select(Element.java:418)\r\n\tat org.jsoup.nodes.Element.cssSelector(Element.java:858)\r\n```\r\n\r\nA real-world example where a class name is being used that consists only of a vertical bar character can be found here: [https://www.mueller.at/](https://www.mueller.at/) (Search for `.\\|` in the browser DevTools to find an example node)\r\n\r\nIf the vertical bar character appears inside a class name (e.g. `a|b`) a different error is thrown:\r\n\r\n```\r\norg.jsoup.select.Selector$SelectorParseException: Could not parse query 'button.a|b': unexpected token at '|b'\r\n\tat org.jsoup.select.QueryParser.findElements(QueryParser.java:226)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:74)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.QueryParser.combinator(QueryParser.java:90)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:60)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.Selector.select(Selector.java:98)\r\n\tat org.jsoup.nodes.Element.select(Element.java:418)\r\n\tat org.jsoup.nodes.Element.cssSelector(Element.java:858)\r\n```","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/timeline","performed_via_github_app":null,"state_reason":"completed"}