[{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282064913","html_url":"https://github.com/jhy/jsoup/issues/838#issuecomment-282064913","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/838","id":282064913,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjA2NDkxMw==","user":{"login":"krystiangorecki","id":10375973,"node_id":"MDQ6VXNlcjEwMzc1OTcz","avatar_url":"https://avatars.githubusercontent.com/u/10375973?v=4","gravatar_id":"","url":"https://api.github.com/users/krystiangorecki","html_url":"https://github.com/krystiangorecki","followers_url":"https://api.github.com/users/krystiangorecki/followers","following_url":"https://api.github.com/users/krystiangorecki/following{/other_user}","gists_url":"https://api.github.com/users/krystiangorecki/gists{/gist_id}","starred_url":"https://api.github.com/users/krystiangorecki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krystiangorecki/subscriptions","organizations_url":"https://api.github.com/users/krystiangorecki/orgs","repos_url":"https://api.github.com/users/krystiangorecki/repos","events_url":"https://api.github.com/users/krystiangorecki/events{/privacy}","received_events_url":"https://api.github.com/users/krystiangorecki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-23T17:40:55Z","updated_at":"2017-02-24T00:01:51Z","body":"It's not about a hyphen. Slashes cause this exception. You need a correct css selector.\r\nYour selector is invalid because slash is being consumed as a part of id, but slashes are not allowed in ids.\r\nhttps://www.w3.org/TR/CSS2/syndata.html#value-def-identifier\r\n> In CSS, identifiers (including element names, classes, and IDs in selectors) can contain only the characters [a-zA-Z0-9] and ISO 10646 characters U+00A0 and higher, plus the hyphen (-) and the underscore (_); they cannot start with a digit, two hyphens, or a hyphen followed by a digit. Identifiers can also contain escaped characters and any ISO 10646 character as a numeric code (see next item). For instance, the identifier \"B&W?\" may be written as \"B\\&W\\?\" or \"B\\26 W\\3F\".\r\n\r\nUsing getElementById() works just by chance because it doesn't check correctness of argument.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282064913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"krystiangorecki","id":10375973,"node_id":"MDQ6VXNlcjEwMzc1OTcz","avatar_url":"https://avatars.githubusercontent.com/u/10375973?v=4","gravatar_id":"","url":"https://api.github.com/users/krystiangorecki","html_url":"https://github.com/krystiangorecki","followers_url":"https://api.github.com/users/krystiangorecki/followers","following_url":"https://api.github.com/users/krystiangorecki/following{/other_user}","gists_url":"https://api.github.com/users/krystiangorecki/gists{/gist_id}","starred_url":"https://api.github.com/users/krystiangorecki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krystiangorecki/subscriptions","organizations_url":"https://api.github.com/users/krystiangorecki/orgs","repos_url":"https://api.github.com/users/krystiangorecki/repos","events_url":"https://api.github.com/users/krystiangorecki/events{/privacy}","received_events_url":"https://api.github.com/users/krystiangorecki/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282208604","html_url":"https://github.com/jhy/jsoup/issues/838#issuecomment-282208604","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/838","id":282208604,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjIwODYwNA==","user":{"login":"hoogenbj","id":4488721,"node_id":"MDQ6VXNlcjQ0ODg3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/4488721?v=4","gravatar_id":"","url":"https://api.github.com/users/hoogenbj","html_url":"https://github.com/hoogenbj","followers_url":"https://api.github.com/users/hoogenbj/followers","following_url":"https://api.github.com/users/hoogenbj/following{/other_user}","gists_url":"https://api.github.com/users/hoogenbj/gists{/gist_id}","starred_url":"https://api.github.com/users/hoogenbj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoogenbj/subscriptions","organizations_url":"https://api.github.com/users/hoogenbj/orgs","repos_url":"https://api.github.com/users/hoogenbj/repos","events_url":"https://api.github.com/users/hoogenbj/events{/privacy}","received_events_url":"https://api.github.com/users/hoogenbj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-24T05:34:56Z","updated_at":"2017-02-24T05:34:56Z","body":"Thanks for your reply. Its not xpath, its just an actual id in the \ndocument that I have to process. Escaping doesn't work either. I'll have \nto go the document's author and see if they can change the ids...\n\n\nOn 23/02/2017 19:41, krystiangor wrote:\n>\n> It's not about a hyphen. Slashes cause this exception. You need a \n> correct css selector expression, not xpath. If you're sure your \n> expression is correct try to escape slashes.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://github.com/jhy/jsoup/issues/838#issuecomment-282064913>, or \n> mute the thread \n> <https://github.com/notifications/unsubscribe-auth/AER-EZuUzlVvCtKN2a2Cy1GBjK1kGZB_ks5rfcSugaJpZM4MJ5td>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282208604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hoogenbj","id":4488721,"node_id":"MDQ6VXNlcjQ0ODg3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/4488721?v=4","gravatar_id":"","url":"https://api.github.com/users/hoogenbj","html_url":"https://github.com/hoogenbj","followers_url":"https://api.github.com/users/hoogenbj/followers","following_url":"https://api.github.com/users/hoogenbj/following{/other_user}","gists_url":"https://api.github.com/users/hoogenbj/gists{/gist_id}","starred_url":"https://api.github.com/users/hoogenbj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoogenbj/subscriptions","organizations_url":"https://api.github.com/users/hoogenbj/orgs","repos_url":"https://api.github.com/users/hoogenbj/repos","events_url":"https://api.github.com/users/hoogenbj/events{/privacy}","received_events_url":"https://api.github.com/users/hoogenbj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282214588","html_url":"https://github.com/jhy/jsoup/issues/838#issuecomment-282214588","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/838","id":282214588,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjIxNDU4OA==","user":{"login":"cketti","id":218061,"node_id":"MDQ6VXNlcjIxODA2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/218061?v=4","gravatar_id":"","url":"https://api.github.com/users/cketti","html_url":"https://github.com/cketti","followers_url":"https://api.github.com/users/cketti/followers","following_url":"https://api.github.com/users/cketti/following{/other_user}","gists_url":"https://api.github.com/users/cketti/gists{/gist_id}","starred_url":"https://api.github.com/users/cketti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cketti/subscriptions","organizations_url":"https://api.github.com/users/cketti/orgs","repos_url":"https://api.github.com/users/cketti/repos","events_url":"https://api.github.com/users/cketti/events{/privacy}","received_events_url":"https://api.github.com/users/cketti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-24T06:23:05Z","updated_at":"2017-02-24T06:23:05Z","body":"Looks like the method to parse CSS identifiers is incomplete.\r\nhttps://github.com/jhy/jsoup/blob/f28c024ba127fd701f0d195a359afbabff04d7a1/src/main/java/org/jsoup/parser/TokenQueue.java#L365-L376\r\n\r\nThe linked version of the CSS specification (CSS2) contains this:\r\n> In CSS, identifiers (including element names, classes, and IDs in selectors) can contain only the characters [a-zA-Z0-9] and ISO 10646 characters U+00A0 and higher, plus the hyphen (-) and the underscore (_); they cannot start with a digit, two hyphens, or a hyphen followed by a digit. Identifiers can also contain escaped characters and any ISO 10646 character as a numeric code (see next item). For instance, the identifier \"B&W?\" may be written as \"B\\&W\\?\" or \"B\\26 W\\3F\".\r\n> Note that Unicode is code-by-code equivalent to ISO 10646 (see [UNICODE] and [ISO10646]).\r\n\r\nSo the `/` character needs to be escaped in CSS identifiers. Unfortunately, the current code doesn't support that.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/282214588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cketti","id":218061,"node_id":"MDQ6VXNlcjIxODA2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/218061?v=4","gravatar_id":"","url":"https://api.github.com/users/cketti","html_url":"https://github.com/cketti","followers_url":"https://api.github.com/users/cketti/followers","following_url":"https://api.github.com/users/cketti/following{/other_user}","gists_url":"https://api.github.com/users/cketti/gists{/gist_id}","starred_url":"https://api.github.com/users/cketti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cketti/subscriptions","organizations_url":"https://api.github.com/users/cketti/orgs","repos_url":"https://api.github.com/users/cketti/repos","events_url":"https://api.github.com/users/cketti/events{/privacy}","received_events_url":"https://api.github.com/users/cketti/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/379153219","html_url":"https://github.com/jhy/jsoup/issues/838#issuecomment-379153219","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/838","id":379153219,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTE1MzIxOQ==","user":{"login":"DulithaRanatunga","id":4442932,"node_id":"MDQ6VXNlcjQ0NDI5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/4442932?v=4","gravatar_id":"","url":"https://api.github.com/users/DulithaRanatunga","html_url":"https://github.com/DulithaRanatunga","followers_url":"https://api.github.com/users/DulithaRanatunga/followers","following_url":"https://api.github.com/users/DulithaRanatunga/following{/other_user}","gists_url":"https://api.github.com/users/DulithaRanatunga/gists{/gist_id}","starred_url":"https://api.github.com/users/DulithaRanatunga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DulithaRanatunga/subscriptions","organizations_url":"https://api.github.com/users/DulithaRanatunga/orgs","repos_url":"https://api.github.com/users/DulithaRanatunga/repos","events_url":"https://api.github.com/users/DulithaRanatunga/events{/privacy}","received_events_url":"https://api.github.com/users/DulithaRanatunga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T05:37:12Z","updated_at":"2018-04-06T05:37:12Z","body":"I'm not sure if it should be its own issue or not, but the incompleteness of `consumeCssIdentifier()` also causes `Element.cssSelector()` to fail if any ancestor nodes have an escaped or unicode character. For example: \r\n```\r\nString html = \"<html><body><div class=\\\"B\\\\&W\\\\?\\\"><div class=\\\"test\\\">Parsed HTML into a doc.</div></div></body></html>\";\r\nJsoup.parse(html).select(\".test\").get(0).cssSelector();\r\n```\r\n\r\nThrows `Exception in thread \"main\" org.jsoup.select.Selector$SelectorParseException: Could not parse query 'div.B\\&W\\?': unexpected token at '\\&W\\?'`\r\n\r\nBecause the .cssSelector just creates invalid selectors in its chain and executes them:\r\nhttps://github.com/jhy/jsoup/blob/f28c024ba127fd701f0d195a359afbabff04d7a1/src/main/java/org/jsoup/nodes/Element.java#L532-L534","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/379153219/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DulithaRanatunga","id":4442932,"node_id":"MDQ6VXNlcjQ0NDI5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/4442932?v=4","gravatar_id":"","url":"https://api.github.com/users/DulithaRanatunga","html_url":"https://github.com/DulithaRanatunga","followers_url":"https://api.github.com/users/DulithaRanatunga/followers","following_url":"https://api.github.com/users/DulithaRanatunga/following{/other_user}","gists_url":"https://api.github.com/users/DulithaRanatunga/gists{/gist_id}","starred_url":"https://api.github.com/users/DulithaRanatunga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DulithaRanatunga/subscriptions","organizations_url":"https://api.github.com/users/DulithaRanatunga/orgs","repos_url":"https://api.github.com/users/DulithaRanatunga/repos","events_url":"https://api.github.com/users/DulithaRanatunga/events{/privacy}","received_events_url":"https://api.github.com/users/DulithaRanatunga/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5833579779,"node_id":"RTE_lADOAAbAPs4MgHvbzwAAAAFbtV0D","url":"https://api.github.com/repos/jhy/jsoup/issues/events/5833579779","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-01-03T04:29:27Z","rename":{"from":"jsoup again unable to parse an id with a hyphen in it","to":"CSS identifier escapes are not supported"},"performed_via_github_app":null},{"id":8307537722,"node_id":"CE_lADOAAbAPs4MgHvbzwAAAAHvKvc6","url":"https://api.github.com/repos/jhy/jsoup/issues/events/8307537722","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"e61f688b75f8b80f871d199ea4ad67bbf28c97ce","commit_url":"https://api.github.com/repos/jhy/jsoup/commits/e61f688b75f8b80f871d199ea4ad67bbf28c97ce","created_at":"2023-01-19T01:45:29Z","state_reason":null,"performed_via_github_app":null},{"id":8307540244,"node_id":"AE_lADOAAbAPs4MgHvbzwAAAAHvKwEU","url":"https://api.github.com/repos/jhy/jsoup/issues/events/8307540244","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-01-19T01:46:11Z","assignee":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":8307540635,"node_id":"LE_lADOAAbAPs4MgHvbzwAAAAHvKwKb","url":"https://api.github.com/repos/jhy/jsoup/issues/events/8307540635","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-01-19T01:46:17Z","label":{"name":"improvement","color":"4bfa82"},"performed_via_github_app":null},{"id":8307540890,"node_id":"MIE_lADOAAbAPs4MgHvbzwAAAAHvKwOa","url":"https://api.github.com/repos/jhy/jsoup/issues/events/8307540890","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-01-19T01:46:20Z","milestone":{"title":"1.15.4"},"performed_via_github_app":null},{"id":8308103321,"node_id":"REFE_lADOAAbAPs4MgHvbzwAAAAHvM5iZ","url":"https://api.github.com/repos/jhy/jsoup/issues/events/8308103321","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bc2181dd4be4e702d54edba8b498e64fc568cf96","commit_url":"https://api.github.com/repos/jhy/jsoup/commits/bc2181dd4be4e702d54edba8b498e64fc568cf96","created_at":"2023-01-19T04:25:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/1396424450","html_url":"https://github.com/jhy/jsoup/issues/838#issuecomment-1396424450","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/838","id":1396424450,"node_id":"IC_kwDOAAbAPs5TO78C","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T04:27:10Z","updated_at":"2023-01-19T04:27:10Z","body":"> I'm not sure if it should be its own issue or not, but the incompleteness of `consumeCssIdentifier()` also causes `Element.cssSelector()` to fail if any ancestor nodes have an escaped or unicode character.\r\n\r\nThis works now with bc2181dd4be4e702d54edba8b498e64fc568cf96 and preceding commit. Thanks!","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/1396424450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"PeichengLiu","id":18645975,"node_id":"MDQ6VXNlcjE4NjQ1OTc1","avatar_url":"https://avatars.githubusercontent.com/u/18645975?v=4","gravatar_id":"","url":"https://api.github.com/users/PeichengLiu","html_url":"https://github.com/PeichengLiu","followers_url":"https://api.github.com/users/PeichengLiu/followers","following_url":"https://api.github.com/users/PeichengLiu/following{/other_user}","gists_url":"https://api.github.com/users/PeichengLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/PeichengLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PeichengLiu/subscriptions","organizations_url":"https://api.github.com/users/PeichengLiu/orgs","repos_url":"https://api.github.com/users/PeichengLiu/repos","events_url":"https://api.github.com/users/PeichengLiu/events{/privacy}","received_events_url":"https://api.github.com/users/PeichengLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-03T16:48:26Z","updated_at":"2023-10-03T16:48:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1998","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/events","html_url":"https://github.com/jhy/jsoup/issues/1998","id":1896177631,"node_id":"I_kwDOAAbAPs5xBV_f","number":1998,"title":"Bug: Vertical Bar Character as class name throws an Exception","user":{"login":"m-heider","id":145003048,"node_id":"U_kgDOCKSSKA","avatar_url":"https://avatars.githubusercontent.com/u/145003048?v=4","gravatar_id":"","url":"https://api.github.com/users/m-heider","html_url":"https://github.com/m-heider","followers_url":"https://api.github.com/users/m-heider/followers","following_url":"https://api.github.com/users/m-heider/following{/other_user}","gists_url":"https://api.github.com/users/m-heider/gists{/gist_id}","starred_url":"https://api.github.com/users/m-heider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m-heider/subscriptions","organizations_url":"https://api.github.com/users/m-heider/orgs","repos_url":"https://api.github.com/users/m-heider/repos","events_url":"https://api.github.com/users/m-heider/events{/privacy}","received_events_url":"https://api.github.com/users/m-heider/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":623963149,"node_id":"MDU6TGFiZWw2MjM5NjMxNDk=","url":"https://api.github.com/repos/jhy/jsoup/labels/fixed","name":"fixed","color":"7BE482","default":false,"description":"An {bug|improvement} that has been {fixed|implemented}"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-14T09:44:27Z","updated_at":"2024-08-27T10:15:11Z","closed_at":"2024-08-27T10:14:10Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":442430,"node_id":"MDEwOlJlcG9zaXRvcnk0NDI0MzA=","name":"jsoup","full_name":"jhy/jsoup","private":false,"owner":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jhy/jsoup","description":"jsoup: the Java HTML parser, built for HTML editing, cleaning, scraping, and XSS safety.","fork":false,"url":"https://api.github.com/repos/jhy/jsoup","forks_url":"https://api.github.com/repos/jhy/jsoup/forks","keys_url":"https://api.github.com/repos/jhy/jsoup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jhy/jsoup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jhy/jsoup/teams","hooks_url":"https://api.github.com/repos/jhy/jsoup/hooks","issue_events_url":"https://api.github.com/repos/jhy/jsoup/issues/events{/number}","events_url":"https://api.github.com/repos/jhy/jsoup/events","assignees_url":"https://api.github.com/repos/jhy/jsoup/assignees{/user}","branches_url":"https://api.github.com/repos/jhy/jsoup/branches{/branch}","tags_url":"https://api.github.com/repos/jhy/jsoup/tags","blobs_url":"https://api.github.com/repos/jhy/jsoup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jhy/jsoup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jhy/jsoup/git/refs{/sha}","trees_url":"https://api.github.com/repos/jhy/jsoup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jhy/jsoup/statuses/{sha}","languages_url":"https://api.github.com/repos/jhy/jsoup/languages","stargazers_url":"https://api.github.com/repos/jhy/jsoup/stargazers","contributors_url":"https://api.github.com/repos/jhy/jsoup/contributors","subscribers_url":"https://api.github.com/repos/jhy/jsoup/subscribers","subscription_url":"https://api.github.com/repos/jhy/jsoup/subscription","commits_url":"https://api.github.com/repos/jhy/jsoup/commits{/sha}","git_commits_url":"https://api.github.com/repos/jhy/jsoup/git/commits{/sha}","comments_url":"https://api.github.com/repos/jhy/jsoup/comments{/number}","issue_comment_url":"https://api.github.com/repos/jhy/jsoup/issues/comments{/number}","contents_url":"https://api.github.com/repos/jhy/jsoup/contents/{+path}","compare_url":"https://api.github.com/repos/jhy/jsoup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jhy/jsoup/merges","archive_url":"https://api.github.com/repos/jhy/jsoup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jhy/jsoup/downloads","issues_url":"https://api.github.com/repos/jhy/jsoup/issues{/number}","pulls_url":"https://api.github.com/repos/jhy/jsoup/pulls{/number}","milestones_url":"https://api.github.com/repos/jhy/jsoup/milestones{/number}","notifications_url":"https://api.github.com/repos/jhy/jsoup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jhy/jsoup/labels{/name}","releases_url":"https://api.github.com/repos/jhy/jsoup/releases{/id}","deployments_url":"https://api.github.com/repos/jhy/jsoup/deployments","created_at":"2009-12-19T01:29:58Z","updated_at":"2025-11-08T13:24:44Z","pushed_at":"2025-11-03T23:01:11Z","git_url":"git://github.com/jhy/jsoup.git","ssh_url":"git@github.com:jhy/jsoup.git","clone_url":"https://github.com/jhy/jsoup.git","svn_url":"https://github.com/jhy/jsoup","homepage":"https://jsoup.org","size":6573,"stargazers_count":11274,"watchers_count":11274,"language":"Java","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2265,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":11,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["css","css-selectors","dom","html","java","java-html-parser","jsoup","parser","xml","xpath"],"visibility":"public","forks":2265,"open_issues":11,"watchers":11274,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Consider the following HTML:\r\n\r\n```\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head><title>Title</title></head>\r\n<body> \r\n   <button class=\"|\">Button</button>\r\n</body>\r\n</html>\r\n```\r\nThis HTML is valid according to [https://validator.w3.org/nu/#textarea](https://validator.w3.org/nu/#textarea)\r\n\r\nIf I try to get the CSS selector of the button, a SelectorParseException is being thrown:\r\n\r\n```\r\nDocument doc = Jsoup.parse(\"<!DOCTYPE html>\\n\" +\r\n                           \"<html lang=\\\"en\\\">\\n\" +\r\n                           \"<head><title>Title</title></head>\\n\" +\r\n                           \"<body> \\n\" +\r\n                           \"  <button class=\\\"|\\\">Button</button>\\n\" +\r\n                           \"</body>\\n\" +\r\n                           \"</html>\");\r\nElements elements = doc.select(\"button\");\r\nString selector = elements.get(0).cssSelector();\r\n```\r\n\r\nStacktrace (Jsoup latest stable version 1.16.1):\r\n```\r\norg.jsoup.select.Selector$SelectorParseException: String must not be empty\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:47)\r\n\tat org.jsoup.select.QueryParser.combinator(QueryParser.java:90)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:60)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.Selector.select(Selector.java:98)\r\n\tat org.jsoup.nodes.Element.select(Element.java:418)\r\n\tat org.jsoup.nodes.Element.cssSelector(Element.java:858)\r\n```\r\n\r\nA real-world example where a class name is being used that consists only of a vertical bar character can be found here: [https://www.mueller.at/](https://www.mueller.at/) (Search for `.\\|` in the browser DevTools to find an example node)\r\n\r\nIf the vertical bar character appears inside a class name (e.g. `a|b`) a different error is thrown:\r\n\r\n```\r\norg.jsoup.select.Selector$SelectorParseException: Could not parse query 'button.a|b': unexpected token at '|b'\r\n\tat org.jsoup.select.QueryParser.findElements(QueryParser.java:226)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:74)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.QueryParser.combinator(QueryParser.java:90)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:60)\r\n\tat org.jsoup.select.QueryParser.parse(QueryParser.java:45)\r\n\tat org.jsoup.select.Selector.select(Selector.java:98)\r\n\tat org.jsoup.nodes.Element.select(Element.java:418)\r\n\tat org.jsoup.nodes.Element.cssSelector(Element.java:858)\r\n```","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1998/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":12850920979,"node_id":"REFE_lADOAAbAPs4MgHvbzwAAAAL9-X4T","url":"https://api.github.com/repos/jhy/jsoup/issues/events/12850920979","actor":{"login":"royt93","id":13247132,"node_id":"MDQ6VXNlcjEzMjQ3MTMy","avatar_url":"https://avatars.githubusercontent.com/u/13247132?v=4","gravatar_id":"","url":"https://api.github.com/users/royt93","html_url":"https://github.com/royt93","followers_url":"https://api.github.com/users/royt93/followers","following_url":"https://api.github.com/users/royt93/following{/other_user}","gists_url":"https://api.github.com/users/royt93/gists{/gist_id}","starred_url":"https://api.github.com/users/royt93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/royt93/subscriptions","organizations_url":"https://api.github.com/users/royt93/orgs","repos_url":"https://api.github.com/users/royt93/repos","events_url":"https://api.github.com/users/royt93/events{/privacy}","received_events_url":"https://api.github.com/users/royt93/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e61f688b75f8b80f871d199ea4ad67bbf28c97ce","commit_url":"https://api.github.com/repos/royt93/lib_jsoup/commits/e61f688b75f8b80f871d199ea4ad67bbf28c97ce","created_at":"2024-05-17T16:29:34Z","performed_via_github_app":null}]