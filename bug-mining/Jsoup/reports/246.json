{"url":"https://api.github.com/repos/jhy/jsoup/issues/1616","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1616/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1616/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1616/events","html_url":"https://github.com/jhy/jsoup/issues/1616","id":978346444,"node_id":"MDU6SXNzdWU5NzgzNDY0NDQ=","number":1616,"title":"OSGi import of javax.annotation and javax.annotation.meta is broken in 1.14.2","user":{"login":"steinarb","id":691728,"node_id":"MDQ6VXNlcjY5MTcyOA==","avatar_url":"https://avatars.githubusercontent.com/u/691728?v=4","gravatar_id":"","url":"https://api.github.com/users/steinarb","html_url":"https://github.com/steinarb","followers_url":"https://api.github.com/users/steinarb/followers","following_url":"https://api.github.com/users/steinarb/following{/other_user}","gists_url":"https://api.github.com/users/steinarb/gists{/gist_id}","starred_url":"https://api.github.com/users/steinarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steinarb/subscriptions","organizations_url":"https://api.github.com/users/steinarb/orgs","repos_url":"https://api.github.com/users/steinarb/repos","events_url":"https://api.github.com/users/steinarb/events{/privacy}","received_events_url":"https://api.github.com/users/steinarb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":623963149,"node_id":"MDU6TGFiZWw2MjM5NjMxNDk=","url":"https://api.github.com/repos/jhy/jsoup/labels/fixed","name":"fixed","color":"7BE482","default":false,"description":"An {bug|improvement} that has been {fixed|implemented}"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/jhy/jsoup/milestones/21","html_url":"https://github.com/jhy/jsoup/milestone/21","labels_url":"https://api.github.com/repos/jhy/jsoup/milestones/21/labels","id":7084734,"node_id":"MI_kwDOAAbAPs4AbBq-","number":21,"title":"1.14.3","description":"","creator":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2021-08-24T05:20:35Z","updated_at":"2021-10-06T10:52:56Z","due_on":null,"closed_at":"2021-10-06T10:52:56Z"},"comments":22,"created_at":"2021-08-24T17:55:54Z","updated_at":"2021-11-03T06:31:27Z","closed_at":"2021-08-25T02:25:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"In jsoup version 1.14.2, the OSGi import of the package javax.annotation is imported with a version >= 3.0 and < 4.0.\r\n\r\nThis makes the jsoup 1.14.2 bundle fail to load on [apache karaf](https://karaf.apache.org) which provides version 1.3.0 of the package (from the apache felix runtime).\r\n\r\nPossible fixes:\r\n \r\n1. Check if the import is actually sed at runtime, and remove the import of javax.annotation, if it isn't actually needed (earlier versions of jsoup does not have this import)\r\n2. Remove the versioning of the import (the actual content of the javax.annotation package has AFAIK not changed since, like, forever)\r\n3. Expand the version range on the javax.annotation import, from [3.0, 4) to [1.0, 4)\r\n\r\nNot sure where the 3.0 version of the import comes from...?\r\nI have googled, and think, maybe from this 2011 vintage, org.glassfish rebundling of javax.annotation? https://mvnrepository.com/artifact/org.glassfish/javax.annotation\r\n\r\nThe javax.annotation.meta package will probably also have to be handled in the same way?\r\nFrom the MANIFEST.MF of jsoup 1.14.2:\r\n```\r\nImport-Package: javax.annotation;version=\"[3.0,4)\",javax.annotation.meta\r\n ;version=\"[3.0,4)\",javax.net.ssl,javax.xml.parsers,javax.xml.transform,\r\n javax.xml.transform.dom,javax.xml.transform.stream,org.jsoup;version=\"[\r\n 1.14,2)\",org.jsoup.helper;version=\"[1.14,2)\",org.jsoup.internal;version\r\n =\"[1.14,2)\",org.jsoup.nodes;version=\"[1.14,2)\",org.jsoup.parser;version\r\n =\"[1.14,2)\",org.jsoup.safety;version=\"[1.14,2)\",org.jsoup.select;versio\r\n n=\"[1.14,2)\",org.w3c.dom\r\n```\r\n","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1616/timeline","performed_via_github_app":null,"state_reason":"completed"}