{"url":"https://api.github.com/repos/jhy/jsoup/issues/1987","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1987/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1987/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1987/events","html_url":"https://github.com/jhy/jsoup/issues/1987","id":1825901422,"node_id":"I_kwDOAAbAPs5s1Qtu","number":1987,"title":"No tracking of closing header tags","user":{"login":"glaforge","id":47907,"node_id":"MDQ6VXNlcjQ3OTA3","avatar_url":"https://avatars.githubusercontent.com/u/47907?v=4","gravatar_id":"","url":"https://api.github.com/users/glaforge","html_url":"https://github.com/glaforge","followers_url":"https://api.github.com/users/glaforge/followers","following_url":"https://api.github.com/users/glaforge/following{/other_user}","gists_url":"https://api.github.com/users/glaforge/gists{/gist_id}","starred_url":"https://api.github.com/users/glaforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glaforge/subscriptions","organizations_url":"https://api.github.com/users/glaforge/orgs","repos_url":"https://api.github.com/users/glaforge/repos","events_url":"https://api.github.com/users/glaforge/events{/privacy}","received_events_url":"https://api.github.com/users/glaforge/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":22026,"node_id":"MDU6TGFiZWwyMjAyNg==","url":"https://api.github.com/repos/jhy/jsoup/labels/bug","name":"bug","color":"D13131","default":true,"description":"A confirmed bug, that we should fix"},{"id":623963149,"node_id":"MDU6TGFiZWw2MjM5NjMxNDk=","url":"https://api.github.com/repos/jhy/jsoup/labels/fixed","name":"fixed","color":"7BE482","default":false,"description":"An {bug|improvement} that has been {fixed|implemented}"}],"state":"closed","locked":false,"assignee":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/jhy/jsoup/milestones/26","html_url":"https://github.com/jhy/jsoup/milestone/26","labels_url":"https://api.github.com/repos/jhy/jsoup/milestones/26/labels","id":9367142,"node_id":"MI_kwDOAAbAPs4Aju5m","number":26,"title":"1.16.2","description":"","creator":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":20,"state":"closed","created_at":"2023-05-06T02:28:21Z","updated_at":"2025-02-25T20:02:57Z","due_on":null,"closed_at":"2023-10-24T04:45:28Z"},"comments":1,"created_at":"2023-07-28T07:53:12Z","updated_at":"2023-09-08T03:54:37Z","closed_at":"2023-09-08T03:54:13Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have a use case where I want to cut a long HTML document into sections, following the header tags h1, h2, etc...\r\nI'm trying to use position tracking to find the beginning and the end of the headers, but it seems only the opening tag is tracked, but the closing tag is not tracked... except for non-official header tags (ie. h1 to h6 are official HTML header tags, but my document also has h7 and h8 which are not part of the HTML specification.\r\n\r\nLet's take a concrete example, let's say you have the following snippet:\r\n\r\n```html\r\n<h1>title</h1>\r\n<h2 id=\"abc\">abc</h2>\r\n<p>hello</p>\r\n<h5 id=\"bcd\">bcd</h5>\r\n<p>thanks</p>\r\n<h3 id=\"cde\">cde</h3>\r\n<p>hello</p>\r\n<h7 id=\"def\">def</h7>\r\n<p>thanks</p>\r\n<h3 id=\"efg\">efg</h3>\r\n<p>hello</p>\r\n<h8 id=\"fgh\">fgh</h8>\r\n<p>hello</p>\r\n```\r\n\r\nI'm then setting the flag to track the position with, and selecting the headers:\r\n\r\n```java;\r\nvar doc = Parser.htmlParser().setTrackPosition(true).parseInput(htmlDoc, uri)\r\nvar headers = doc.select(\"h1, h2, h3, h4, h5, h6, h7, h8, h9\");\r\n```\r\n\r\nWhen I print the element's `.sourceRange().start() / end()` and `.endSourceRange().start() / end()`, I get the following output:\r\n\r\n```\r\nStart: 1,1:0 End: 1,5:4 <-> Start: -1,-1:-1 End: -1,-1:-1 — h1 — title\r\nStart: 2,1:15 End: 2,14:28 <-> Start: -1,-1:-1 End: -1,-1:-1 — h2 — abc\r\nStart: 4,1:50 End: 4,14:63 <-> Start: -1,-1:-1 End: -1,-1:-1 — h5 — bcd thanks\r\nStart: 6,1:86 End: 6,14:99 <-> Start: -1,-1:-1 End: -1,-1:-1 — h3 — cde\r\nStart: 8,1:121 End: 8,14:134 <-> Start: 8,17:137 End: 8,22:142 — h7 — def\r\nStart: 10,1:157 End: 10,14:170 <-> Start: -1,-1:-1 End: -1,-1:-1 — h3 — efg\r\nStart: 12,1:192 End: 12,14:205 <-> Start: 12,17:208 End: 12,22:213 — h8 — fgh\r\n```\r\n\r\nThe opening header tags have correct start/end positions for the opening tag.\r\nBut all the closing header tags (except the non-standard ones like h7 and h8) have -1 values, as if it wasn't tracked, or that there was no closing tag at all.\r\n\r\nShouldn't the `endSourceRange()` return non -1 positions?\r\n","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1987/timeline","performed_via_github_app":null,"state_reason":"completed"}