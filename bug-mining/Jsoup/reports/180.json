{"url":"https://api.github.com/repos/jhy/jsoup/issues/995","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/995/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/995/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/995/events","html_url":"https://github.com/jhy/jsoup/issues/995","id":283695304,"node_id":"MDU6SXNzdWUyODM2OTUzMDQ=","number":995,"title":"Parsing bug in HttpConnection::get and HttpConnection.Response::parse","user":{"login":"marvk","id":6569856,"node_id":"MDQ6VXNlcjY1Njk4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/6569856?v=4","gravatar_id":"","url":"https://api.github.com/users/marvk","html_url":"https://github.com/marvk","followers_url":"https://api.github.com/users/marvk/followers","following_url":"https://api.github.com/users/marvk/following{/other_user}","gists_url":"https://api.github.com/users/marvk/gists{/gist_id}","starred_url":"https://api.github.com/users/marvk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marvk/subscriptions","organizations_url":"https://api.github.com/users/marvk/orgs","repos_url":"https://api.github.com/users/marvk/repos","events_url":"https://api.github.com/users/marvk/events{/privacy}","received_events_url":"https://api.github.com/users/marvk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":22026,"node_id":"MDU6TGFiZWwyMjAyNg==","url":"https://api.github.com/repos/jhy/jsoup/labels/bug","name":"bug","color":"D13131","default":true,"description":"A confirmed bug, that we should fix"}],"state":"closed","locked":false,"assignee":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/jhy/jsoup/milestones/14","html_url":"https://github.com/jhy/jsoup/milestone/14","labels_url":"https://api.github.com/repos/jhy/jsoup/milestones/14/labels","id":2954323,"node_id":"MDk6TWlsZXN0b25lMjk1NDMyMw==","number":14,"title":"1.11.3","description":"","creator":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":19,"state":"closed","created_at":"2017-12-03T21:06:09Z","updated_at":"2018-04-15T23:38:06Z","due_on":"2018-04-15T07:00:00Z","closed_at":"2018-04-15T23:38:06Z"},"comments":7,"created_at":"2017-12-20T21:07:29Z","updated_at":"2018-01-19T19:27:00Z","closed_at":"2017-12-24T01:40:33Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"While working on an application that downloads and parses RSS files from [packetstormsecurity.com](https://packetstormsecurity.com/) I've found a strange behaviour: Sometimes when selecting a `pubDate` entity from an `item` entity, Jsoup would continue parsing past the closing `pubDate` tag and into the next entity.\r\n\r\nThis seems to be caused by the above mentioned methods introducing the html character codes for `<` and `>` (`&lt;` and `&gt;` respectively) while parsing the string `</pubDate>`, resulting in a pubDate entity looking like this `<pubDate>Tue, 06 Jun 2017 14:06:27 GMT&lt;/pubDate&gt;`, causing the parser to overshoot.\r\n\r\nThe bug only happens on very rare occasion for the above mentioned website, I'd guess about one to five in one thousand pages.\r\n\r\nSince the above mentioned website is posting new items multiple times per day and thus the affected pages change, the code contains a method to find bad pages. When a bad page is found, the code will download and parse it thrice, once for each of the affected methods and once with a workaround, which uses `Jsoup::parse` and passes the body of the `HttpConnection.Response` object obtained from `Connection::execute`.\r\n\r\n[I've created a repo](https://github.com/marvk/JsoupParseBug) that contains a [MCVE](https://stackoverflow.com/help/mcve) to reproduce the probable bug. Here is some example output from the program:\r\n\r\n    Malformed output via Jsoup.connect(url).get():\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT</pubDate> Gentoo Linux Security Advisory 201706-5 - Multiple vulnerabilities in D-Bus might allow an attacker to overwrite files with a fixed filename in arbitrary directories or conduct a symlink attack. Versions less than 1.10.18 are affected.\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n\r\n\r\n    Malformed output via Jsoup.connect(url).execute().parse():\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT</pubDate> Gentoo Linux Security Advisory 201706-5 - Multiple vulnerabilities in D-Bus might allow an attacker to overwrite files with a fixed filename in arbitrary directories or conduct a symlink attack. Versions less than 1.10.18 are affected.\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n\r\n\r\n    Well-formed output via Jsoup.parse(Jsoup.connect(url).execute().body()):\r\n    Wed, 07 Jun 2017 14:22:24 GMT\r\n    Wed, 07 Jun 2017 14:21:31 GMT\r\n    Wed, 07 Jun 2017 14:19:11 GMT\r\n    Wed, 07 Jun 2017 14:19:03 GMT\r\n    Wed, 07 Jun 2017 14:18:54 GMT\r\n    Wed, 07 Jun 2017 14:18:49 GMT\r\n    Wed, 07 Jun 2017 14:18:44 GMT\r\n    Wed, 07 Jun 2017 14:18:38 GMT\r\n    Wed, 07 Jun 2017 14:18:30 GMT\r\n    Wed, 07 Jun 2017 14:18:23 GMT\r\n    Wed, 07 Jun 2017 14:18:17 GMT\r\n    Wed, 07 Jun 2017 14:18:12 GMT\r\n    Wed, 07 Jun 2017 14:15:55 GMT\r\n    Wed, 07 Jun 2017 13:47:58 GMT\r\n    Wed, 07 Jun 2017 10:11:11 GMT\r\n    Tue, 06 Jun 2017 23:26:00 GMT\r\n    Tue, 06 Jun 2017 23:25:00 GMT\r\n    Tue, 06 Jun 2017 23:24:00 GMT\r\n    Tue, 06 Jun 2017 23:23:00 GMT\r\n    Tue, 06 Jun 2017 14:06:27 GMT\r\n    Tue, 06 Jun 2017 14:06:16 GMT\r\n    Tue, 06 Jun 2017 14:06:02 GMT\r\n    Tue, 06 Jun 2017 14:05:53 GMT\r\n    Tue, 06 Jun 2017 14:05:45 GMT\r\n    Tue, 06 Jun 2017 14:05:34 GMT\r\n    \r\nTested on Jsoup 1.11.2","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/995/timeline","performed_via_github_app":null,"state_reason":"completed"}