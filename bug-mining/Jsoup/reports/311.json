{"url":"https://api.github.com/repos/jhy/jsoup/issues/2018","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/2018/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/2018/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/2018/events","html_url":"https://github.com/jhy/jsoup/issues/2018","id":1958883019,"node_id":"I_kwDOAAbAPs50wi7L","number":2018,"title":"Changed selection behaviour after upgrading  1.6.1 -> 1.6.2 (Bug?)","user":{"login":"tom-mayer","id":2562379,"node_id":"MDQ6VXNlcjI1NjIzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/2562379?v=4","gravatar_id":"","url":"https://api.github.com/users/tom-mayer","html_url":"https://github.com/tom-mayer","followers_url":"https://api.github.com/users/tom-mayer/followers","following_url":"https://api.github.com/users/tom-mayer/following{/other_user}","gists_url":"https://api.github.com/users/tom-mayer/gists{/gist_id}","starred_url":"https://api.github.com/users/tom-mayer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tom-mayer/subscriptions","organizations_url":"https://api.github.com/users/tom-mayer/orgs","repos_url":"https://api.github.com/users/tom-mayer/repos","events_url":"https://api.github.com/users/tom-mayer/events{/privacy}","received_events_url":"https://api.github.com/users/tom-mayer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":22026,"node_id":"MDU6TGFiZWwyMjAyNg==","url":"https://api.github.com/repos/jhy/jsoup/labels/bug","name":"bug","color":"D13131","default":true,"description":"A confirmed bug, that we should fix"},{"id":623963149,"node_id":"MDU6TGFiZWw2MjM5NjMxNDk=","url":"https://api.github.com/repos/jhy/jsoup/labels/fixed","name":"fixed","color":"7BE482","default":false,"description":"An {bug|improvement} that has been {fixed|implemented}"}],"state":"closed","locked":false,"assignee":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/jhy/jsoup/milestones/27","html_url":"https://github.com/jhy/jsoup/milestone/27","labels_url":"https://api.github.com/repos/jhy/jsoup/milestones/27/labels","id":10097981,"node_id":"MI_kwDOAAbAPs4AmhU9","number":27,"title":"1.17.1","description":"","creator":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":27,"state":"closed","created_at":"2023-10-24T04:45:53Z","updated_at":"2023-11-27T09:00:22Z","due_on":null,"closed_at":"2023-11-27T09:00:22Z"},"comments":2,"created_at":"2023-10-24T09:42:26Z","updated_at":"2023-10-25T09:05:06Z","closed_at":"2023-10-24T23:54:39Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Reproduction case:\r\nWe have a  nested list that looks a bit like this:\r\n```\r\n<ul>\r\n    <li> foo </li>\r\n    <li> bar\r\n        <ul>\r\n            <li>baz</li>\r\n            <li>blah</li>\r\n        </ul>\r\n    </li>\r\n</ul>\r\n```\r\n\r\n```java\r\n var listRoot = // this is an element containing the top level <ul>\r\nassertThat(listRoot).isNotNull();\r\nassertThat(listRoot.select(\"> li\"))\r\n  .isNotNull()\r\n  .hasSize(2);\r\n\r\nvar li1 = listRoot.selectFirst(\"> li:nth-child(1)\");\r\nvar li1ul = Objects.requireNonNull(li1).select(\"ul\");\r\n// as expected the first li does not have a ul so this is empty\r\nassertThat(li1ul).isEmpty();\r\n\r\nvar li2 = listRoot.selectFirst(\"> li:nth-child(2)\");\r\n// the second li should have one ul with two nested li\r\nvar li2ulLi = Objects.requireNonNull(li2).select(\"ul > li\");\r\n// this fails because the actual size is 3\r\n// it contains the two sub li plus the parent li2 on which the selection is done\r\nassertThat(li2ulLi).hasSize(2);\r\n```\r\n\r\n### Observed behaviour: \r\nWhen selecting the `ul > li` children of of li2, li2 is contained in the result set additionally to the two sub li. Technically the selector `ul > li` also matches li2 but only if starting from the root of the document. Changing the selector for the sub li to `> ul > li` works and only the two sub li are selected. \r\n\r\n### Expeced behaviour:\r\nDoing a `(li2).select(\"ul > li\")` should start with li2 as the root element so the selection should not consider the parent of li2 for selection.\r\n\r\n","closed_by":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/2018/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/2018/timeline","performed_via_github_app":null,"state_reason":"completed"}