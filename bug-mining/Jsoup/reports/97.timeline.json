[{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/28674425","html_url":"https://github.com/jhy/jsoup/issues/348#issuecomment-28674425","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/348","id":28674425,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njc0NDI1","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-11-18T04:12:44Z","updated_at":"2013-11-18T04:12:44Z","body":"That took me a while to figure out. There's a BOM at the start of the doc which jsoup isn't handling correctly. Grr arg! It's 65279\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/28674425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/28674553","html_url":"https://github.com/jhy/jsoup/issues/348#issuecomment-28674553","issue_url":"https://api.github.com/repos/jhy/jsoup/issues/348","id":28674553,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njc0NTUz","user":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-11-18T04:19:04Z","updated_at":"2013-11-18T04:19:04Z","body":"Specifically, the character is not recognized as a BOM but as a regular character, to it moves the parser state into body mode\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/comments/28674553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":76468442,"node_id":"MDExOkNsb3NlZEV2ZW50NzY0Njg0NDI=","url":"https://api.github.com/repos/jhy/jsoup/issues/events/76468442","actor":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"3f9f33d88355f22aefc7ea402da09fd1950289ce","commit_url":"https://api.github.com/repos/jhy/jsoup/commits/3f9f33d88355f22aefc7ea402da09fd1950289ce","created_at":"2013-11-18T05:13:01Z","state_reason":null,"performed_via_github_app":null},{"id":93975294,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDkzOTc1Mjk0","url":"https://api.github.com/repos/jhy/jsoup/issues/events/93975294","actor":{"login":"amorgner","id":291266,"node_id":"MDQ6VXNlcjI5MTI2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/291266?v=4","gravatar_id":"","url":"https://api.github.com/users/amorgner","html_url":"https://github.com/amorgner","followers_url":"https://api.github.com/users/amorgner/followers","following_url":"https://api.github.com/users/amorgner/following{/other_user}","gists_url":"https://api.github.com/users/amorgner/gists{/gist_id}","starred_url":"https://api.github.com/users/amorgner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amorgner/subscriptions","organizations_url":"https://api.github.com/users/amorgner/orgs","repos_url":"https://api.github.com/users/amorgner/repos","events_url":"https://api.github.com/users/amorgner/events{/privacy}","received_events_url":"https://api.github.com/users/amorgner/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4d2912d2aada0fb2d8dc30acf8bade3cc46f76be","commit_url":"https://api.github.com/repos/structr/structr/commits/4d2912d2aada0fb2d8dc30acf8bade3cc46f76be","created_at":"2014-02-16T10:09:03Z","performed_via_github_app":null},{"id":436375540,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNjM3NTU0MA==","url":"https://api.github.com/repos/jhy/jsoup/issues/events/436375540","actor":{"login":"boferri","id":281172,"node_id":"MDQ6VXNlcjI4MTE3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/281172?v=4","gravatar_id":"","url":"https://api.github.com/users/boferri","html_url":"https://github.com/boferri","followers_url":"https://api.github.com/users/boferri/followers","following_url":"https://api.github.com/users/boferri/following{/other_user}","gists_url":"https://api.github.com/users/boferri/gists{/gist_id}","starred_url":"https://api.github.com/users/boferri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boferri/subscriptions","organizations_url":"https://api.github.com/users/boferri/orgs","repos_url":"https://api.github.com/users/boferri/repos","events_url":"https://api.github.com/users/boferri/events{/privacy}","received_events_url":"https://api.github.com/users/boferri/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cad795a5c65f6c9ca5b397c9ce6dde8a61252185","commit_url":"https://api.github.com/repos/dswarm/jsoup/commits/cad795a5c65f6c9ca5b397c9ce6dde8a61252185","created_at":"2015-10-15T13:25:36Z","performed_via_github_app":null},{"actor":{"login":"zuozhiw","id":12578068,"node_id":"MDQ6VXNlcjEyNTc4MDY4","avatar_url":"https://avatars.githubusercontent.com/u/12578068?v=4","gravatar_id":"","url":"https://api.github.com/users/zuozhiw","html_url":"https://github.com/zuozhiw","followers_url":"https://api.github.com/users/zuozhiw/followers","following_url":"https://api.github.com/users/zuozhiw/following{/other_user}","gists_url":"https://api.github.com/users/zuozhiw/gists{/gist_id}","starred_url":"https://api.github.com/users/zuozhiw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuozhiw/subscriptions","organizations_url":"https://api.github.com/users/zuozhiw/orgs","repos_url":"https://api.github.com/users/zuozhiw/repos","events_url":"https://api.github.com/users/zuozhiw/events{/privacy}","received_events_url":"https://api.github.com/users/zuozhiw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-12T21:01:34Z","updated_at":"2018-06-12T21:01:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1073","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1073/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1073/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1073/events","html_url":"https://github.com/jhy/jsoup/pull/1073","id":331752056,"node_id":"MDExOlB1bGxSZXF1ZXN0MTk0NDA2NzA0","number":1073,"title":"[Fix Issue #1070] Jsoup parse string not skipping BOM character correctly","user":{"login":"zuozhiw","id":12578068,"node_id":"MDQ6VXNlcjEyNTc4MDY4","avatar_url":"https://avatars.githubusercontent.com/u/12578068?v=4","gravatar_id":"","url":"https://api.github.com/users/zuozhiw","html_url":"https://github.com/zuozhiw","followers_url":"https://api.github.com/users/zuozhiw/followers","following_url":"https://api.github.com/users/zuozhiw/following{/other_user}","gists_url":"https://api.github.com/users/zuozhiw/gists{/gist_id}","starred_url":"https://api.github.com/users/zuozhiw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuozhiw/subscriptions","organizations_url":"https://api.github.com/users/zuozhiw/orgs","repos_url":"https://api.github.com/users/zuozhiw/repos","events_url":"https://api.github.com/users/zuozhiw/events{/privacy}","received_events_url":"https://api.github.com/users/zuozhiw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-06-12T21:01:33Z","updated_at":"2024-12-14T04:55:13Z","closed_at":"2024-12-14T04:55:12Z","author_association":"NONE","active_lock_reason":null,"draft":false,"repository":{"id":442430,"node_id":"MDEwOlJlcG9zaXRvcnk0NDI0MzA=","name":"jsoup","full_name":"jhy/jsoup","private":false,"owner":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jhy/jsoup","description":"jsoup: the Java HTML parser, built for HTML editing, cleaning, scraping, and XSS safety.","fork":false,"url":"https://api.github.com/repos/jhy/jsoup","forks_url":"https://api.github.com/repos/jhy/jsoup/forks","keys_url":"https://api.github.com/repos/jhy/jsoup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jhy/jsoup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jhy/jsoup/teams","hooks_url":"https://api.github.com/repos/jhy/jsoup/hooks","issue_events_url":"https://api.github.com/repos/jhy/jsoup/issues/events{/number}","events_url":"https://api.github.com/repos/jhy/jsoup/events","assignees_url":"https://api.github.com/repos/jhy/jsoup/assignees{/user}","branches_url":"https://api.github.com/repos/jhy/jsoup/branches{/branch}","tags_url":"https://api.github.com/repos/jhy/jsoup/tags","blobs_url":"https://api.github.com/repos/jhy/jsoup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jhy/jsoup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jhy/jsoup/git/refs{/sha}","trees_url":"https://api.github.com/repos/jhy/jsoup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jhy/jsoup/statuses/{sha}","languages_url":"https://api.github.com/repos/jhy/jsoup/languages","stargazers_url":"https://api.github.com/repos/jhy/jsoup/stargazers","contributors_url":"https://api.github.com/repos/jhy/jsoup/contributors","subscribers_url":"https://api.github.com/repos/jhy/jsoup/subscribers","subscription_url":"https://api.github.com/repos/jhy/jsoup/subscription","commits_url":"https://api.github.com/repos/jhy/jsoup/commits{/sha}","git_commits_url":"https://api.github.com/repos/jhy/jsoup/git/commits{/sha}","comments_url":"https://api.github.com/repos/jhy/jsoup/comments{/number}","issue_comment_url":"https://api.github.com/repos/jhy/jsoup/issues/comments{/number}","contents_url":"https://api.github.com/repos/jhy/jsoup/contents/{+path}","compare_url":"https://api.github.com/repos/jhy/jsoup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jhy/jsoup/merges","archive_url":"https://api.github.com/repos/jhy/jsoup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jhy/jsoup/downloads","issues_url":"https://api.github.com/repos/jhy/jsoup/issues{/number}","pulls_url":"https://api.github.com/repos/jhy/jsoup/pulls{/number}","milestones_url":"https://api.github.com/repos/jhy/jsoup/milestones{/number}","notifications_url":"https://api.github.com/repos/jhy/jsoup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jhy/jsoup/labels{/name}","releases_url":"https://api.github.com/repos/jhy/jsoup/releases{/id}","deployments_url":"https://api.github.com/repos/jhy/jsoup/deployments","created_at":"2009-12-19T01:29:58Z","updated_at":"2025-11-10T13:45:05Z","pushed_at":"2025-11-03T23:01:11Z","git_url":"git://github.com/jhy/jsoup.git","ssh_url":"git@github.com:jhy/jsoup.git","clone_url":"https://github.com/jhy/jsoup.git","svn_url":"https://github.com/jhy/jsoup","homepage":"https://jsoup.org","size":6573,"stargazers_count":11275,"watchers_count":11275,"language":"Java","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2266,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":11,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["css","css-selectors","dom","html","java","java-html-parser","jsoup","parser","xml","xpath"],"visibility":"public","forks":2266,"open_issues":11,"watchers":11275,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/jhy/jsoup/pulls/1073","html_url":"https://github.com/jhy/jsoup/pull/1073","diff_url":"https://github.com/jhy/jsoup/pull/1073.diff","patch_url":"https://github.com/jhy/jsoup/pull/1073.patch","merged_at":null},"body":"Issue #1070 shows a case where Jsoup not parsing an HTML page correctly and putting all the <meta> information in the body instead of head. The problem can be reproducible only if use `Jsoup.parse(response.body())`. Using another method `Jsoup.connect(url).get()` won't reproduce the same problem.\r\n\r\nAfter digging around for a while, it turns out that the HTML page has the BOM character `65279` in its first character. The reason that the second method, `Jsoup.connect(url).get()`, internally uses `DataUtil.parseInputStream()`, which handles the BOM character correctly. However, `Jsoup.parse(string)` constructs a `HTMLTreeBuilder` to parse the document directly, therefore the BOM handling process is not there.\r\n\r\nThis PR fixes this issue by introducing the same handling process in `TreeBuilder` constructor. Before it passes the input reader to the tokenizer, it reuses the same helper function `DataUtil.detectCharsetFromBom` to detect the BOM character, and skip the BOM character if needed.\r\n\r\nThis PR also adds a new test case in `DataUtilTest` to test if `Jsoup.parse(string)` can work correctly with BOM. After adding the fix, the problem in issue #1070 can produce the correct result.\r\n\r\nThere are already several efforts to fix the problem caused by the BOM character:\r\nIssue #348 is the first issue mentioning the problem, and it is fixed in commit https://github.com/jhy/jsoup/commit/3f9f33d88355f22aefc7ea402da09fd1950289ce , this commit only fixes the issue in `parseByteData` (which later becomes `parseInputStream`).\r\n\r\nLater there are several commits to refactor the BOM handling code, such as https://github.com/jhy/jsoup/commit/c3cbe1b64e7f66ff9f9b53f1388eb135e6693187 , https://github.com/jhy/jsoup/commit/4eb4f2b2e88a2f9e6c5c1e8d0477060954f24218\r\n\r\nThe latest issue mentioning the problem is Issue #1003, and the corresponding fix is in https://github.com/jhy/jsoup/commit/0f7e0cc373aced32629f5321c9521f81d8248647 , however, this commit still only fixes the function `parseInputStream`, which is not used by `Jsoup.parse(string)`.\r\n\r\n@jhy I'm not sure if `TreeBuilder` class is the best place to put in the fix code. I am willing to devote more efforts to improve it if you could give some more advice. Thanks :)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1073/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1073/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"zuozhiw","id":12578068,"node_id":"MDQ6VXNlcjEyNTc4MDY4","avatar_url":"https://avatars.githubusercontent.com/u/12578068?v=4","gravatar_id":"","url":"https://api.github.com/users/zuozhiw","html_url":"https://github.com/zuozhiw","followers_url":"https://api.github.com/users/zuozhiw/followers","following_url":"https://api.github.com/users/zuozhiw/following{/other_user}","gists_url":"https://api.github.com/users/zuozhiw/gists{/gist_id}","starred_url":"https://api.github.com/users/zuozhiw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuozhiw/subscriptions","organizations_url":"https://api.github.com/users/zuozhiw/orgs","repos_url":"https://api.github.com/users/zuozhiw/repos","events_url":"https://api.github.com/users/zuozhiw/events{/privacy}","received_events_url":"https://api.github.com/users/zuozhiw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-06-12T21:10:44Z","updated_at":"2018-06-12T21:10:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1070","repository_url":"https://api.github.com/repos/jhy/jsoup","labels_url":"https://api.github.com/repos/jhy/jsoup/issues/1070/labels{/name}","comments_url":"https://api.github.com/repos/jhy/jsoup/issues/1070/comments","events_url":"https://api.github.com/repos/jhy/jsoup/issues/1070/events","html_url":"https://github.com/jhy/jsoup/issues/1070","id":327873843,"node_id":"MDU6SXNzdWUzMjc4NzM4NDM=","number":1070,"title":"BOM character is not eaten in Jsoup.parse(String)","user":{"login":"amal","id":423417,"node_id":"MDQ6VXNlcjQyMzQxNw==","avatar_url":"https://avatars.githubusercontent.com/u/423417?v=4","gravatar_id":"","url":"https://api.github.com/users/amal","html_url":"https://github.com/amal","followers_url":"https://api.github.com/users/amal/followers","following_url":"https://api.github.com/users/amal/following{/other_user}","gists_url":"https://api.github.com/users/amal/gists{/gist_id}","starred_url":"https://api.github.com/users/amal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amal/subscriptions","organizations_url":"https://api.github.com/users/amal/orgs","repos_url":"https://api.github.com/users/amal/repos","events_url":"https://api.github.com/users/amal/events{/privacy}","received_events_url":"https://api.github.com/users/amal/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-30T19:48:27Z","updated_at":"2024-12-14T04:58:57Z","closed_at":"2024-12-14T04:58:57Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":442430,"node_id":"MDEwOlJlcG9zaXRvcnk0NDI0MzA=","name":"jsoup","full_name":"jhy/jsoup","private":false,"owner":{"login":"jhy","id":76934,"node_id":"MDQ6VXNlcjc2OTM0","avatar_url":"https://avatars.githubusercontent.com/u/76934?v=4","gravatar_id":"","url":"https://api.github.com/users/jhy","html_url":"https://github.com/jhy","followers_url":"https://api.github.com/users/jhy/followers","following_url":"https://api.github.com/users/jhy/following{/other_user}","gists_url":"https://api.github.com/users/jhy/gists{/gist_id}","starred_url":"https://api.github.com/users/jhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhy/subscriptions","organizations_url":"https://api.github.com/users/jhy/orgs","repos_url":"https://api.github.com/users/jhy/repos","events_url":"https://api.github.com/users/jhy/events{/privacy}","received_events_url":"https://api.github.com/users/jhy/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jhy/jsoup","description":"jsoup: the Java HTML parser, built for HTML editing, cleaning, scraping, and XSS safety.","fork":false,"url":"https://api.github.com/repos/jhy/jsoup","forks_url":"https://api.github.com/repos/jhy/jsoup/forks","keys_url":"https://api.github.com/repos/jhy/jsoup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jhy/jsoup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jhy/jsoup/teams","hooks_url":"https://api.github.com/repos/jhy/jsoup/hooks","issue_events_url":"https://api.github.com/repos/jhy/jsoup/issues/events{/number}","events_url":"https://api.github.com/repos/jhy/jsoup/events","assignees_url":"https://api.github.com/repos/jhy/jsoup/assignees{/user}","branches_url":"https://api.github.com/repos/jhy/jsoup/branches{/branch}","tags_url":"https://api.github.com/repos/jhy/jsoup/tags","blobs_url":"https://api.github.com/repos/jhy/jsoup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jhy/jsoup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jhy/jsoup/git/refs{/sha}","trees_url":"https://api.github.com/repos/jhy/jsoup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jhy/jsoup/statuses/{sha}","languages_url":"https://api.github.com/repos/jhy/jsoup/languages","stargazers_url":"https://api.github.com/repos/jhy/jsoup/stargazers","contributors_url":"https://api.github.com/repos/jhy/jsoup/contributors","subscribers_url":"https://api.github.com/repos/jhy/jsoup/subscribers","subscription_url":"https://api.github.com/repos/jhy/jsoup/subscription","commits_url":"https://api.github.com/repos/jhy/jsoup/commits{/sha}","git_commits_url":"https://api.github.com/repos/jhy/jsoup/git/commits{/sha}","comments_url":"https://api.github.com/repos/jhy/jsoup/comments{/number}","issue_comment_url":"https://api.github.com/repos/jhy/jsoup/issues/comments{/number}","contents_url":"https://api.github.com/repos/jhy/jsoup/contents/{+path}","compare_url":"https://api.github.com/repos/jhy/jsoup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jhy/jsoup/merges","archive_url":"https://api.github.com/repos/jhy/jsoup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jhy/jsoup/downloads","issues_url":"https://api.github.com/repos/jhy/jsoup/issues{/number}","pulls_url":"https://api.github.com/repos/jhy/jsoup/pulls{/number}","milestones_url":"https://api.github.com/repos/jhy/jsoup/milestones{/number}","notifications_url":"https://api.github.com/repos/jhy/jsoup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jhy/jsoup/labels{/name}","releases_url":"https://api.github.com/repos/jhy/jsoup/releases{/id}","deployments_url":"https://api.github.com/repos/jhy/jsoup/deployments","created_at":"2009-12-19T01:29:58Z","updated_at":"2025-11-10T13:45:05Z","pushed_at":"2025-11-03T23:01:11Z","git_url":"git://github.com/jhy/jsoup.git","ssh_url":"git@github.com:jhy/jsoup.git","clone_url":"https://github.com/jhy/jsoup.git","svn_url":"https://github.com/jhy/jsoup","homepage":"https://jsoup.org","size":6573,"stargazers_count":11275,"watchers_count":11275,"language":"Java","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2266,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":11,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["css","css-selectors","dom","html","java","java-html-parser","jsoup","parser","xml","xpath"],"visibility":"public","forks":2266,"open_issues":11,"watchers":11275,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Last versions of Jsoup parse some pages with broken DOM as a result.\r\n\r\nHere is an example of such html code:\r\nhttps://gist.github.com/amal/8d489507c25a329df22a4a0d806aff0b\r\n\r\nAs a result contents of the `<head>` is not valid, all head tags are in body instead of head:\r\n```html\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n <head></head>\r\n <body>\r\n  ï»¿   \r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0 maximum-scale=1.0, minimal-ui\"> \r\n  <!-- header tags --> \r\n  <meta name=\"guid\" content=\"150305195222805\">\r\n  <title>ISIL fighters bulldoze ancient Assyrian palace in Iraq | Iraq News | Al Jazeera</title>\r\n  <meta name=\"title\" content=\"ISIL fighters bulldoze ancient Assyrian palace in Iraq\">\r\n  <meta name=\"channel\" content=\"\">\r\n  <meta name=\"author\" content=\"\">\r\n\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/jhy/jsoup/issues/1070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jhy/jsoup/issues/1070/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"}]