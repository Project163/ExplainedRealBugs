diff --git a/CHANGES b/CHANGES
index bf87eca7..608258d4 100644
--- a/CHANGES
+++ b/CHANGES
@@ -23,7 +23,9 @@ jsoup changelog
 
  * Support node.outerHtml() method when node has no parent.
 
- * Fixed support for HTML entities with numbers in name (e.g. &frac34, &sup1)
+ * Fixed support for HTML entities with numbers in name (e.g. &frac34, &sup1).
+
+ * Fixed absolute URL generation from relative URLs which are only query strings.
 
 *** Release 1.3.3 [2010-Sep-19]
  * Implemented Elements.empty() and Elements.remove(). This allows easy element removal, like:
diff --git a/src/main/java/org/jsoup/nodes/Node.java b/src/main/java/org/jsoup/nodes/Node.java
index 4cfa82bf..513c0ee8 100644
--- a/src/main/java/org/jsoup/nodes/Node.java
+++ b/src/main/java/org/jsoup/nodes/Node.java
@@ -169,6 +169,9 @@ public abstract class Node implements Cloneable {
                     URL abs = new URL(relUrl);
                     return abs.toExternalForm();
                 }
+                // workaround: java resolves '//path/file + ?foo' to '//path/?foo', not '//path/file?foo' as desired
+                if (relUrl.startsWith("?"))
+                    relUrl = base.getPath() + relUrl;
                 URL abs = new URL(base, relUrl);
                 return abs.toExternalForm();
             } catch (MalformedURLException e) {
diff --git a/src/test/java/org/jsoup/nodes/NodeTest.java b/src/test/java/org/jsoup/nodes/NodeTest.java
index 33912ebd..e81d3ee4 100644
--- a/src/test/java/org/jsoup/nodes/NodeTest.java
+++ b/src/test/java/org/jsoup/nodes/NodeTest.java
@@ -38,6 +38,19 @@ public class NodeTest {
         assertEquals("http://jsoup.org/foo", a.attr("abs:href"));
         assertFalse(a.hasAttr("abs:href")); // only realised on the get method, not in has or iterator
     }
+
+    /*
+    Test for an issue with Java's abs URL handler.
+     */
+    @Test public void absHandlesRelativeQuery() {
+        Document doc = Jsoup.parse("<a href='?foo'>One</a> <a href='bar.html?foo'>Two</a>", "http://jsoup.org/path/file?bar");
+
+        Element a1 = doc.select("a").first();
+        assertEquals("http://jsoup.org/path/file?foo", a1.absUrl("href"));
+
+        Element a2 = doc.select("a").get(1);
+        assertEquals("http://jsoup.org/path/bar.html?foo", a2.absUrl("href"));
+    }
     
     @Test public void testRemove() {
         Document doc = Jsoup.parse("<p>One <span>two</span> three</p>");
