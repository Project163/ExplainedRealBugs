diff --git a/CHANGES b/CHANGES
index de2b50af..1da06cb4 100644
--- a/CHANGES
+++ b/CHANGES
@@ -7,6 +7,10 @@ jsoup changelog
  * Fixed an issue where created XML documents would have an incorrect prolog.
    <https://github.com/jhy/jsoup/issues/652>
 
+ * Fixed an issue where you could not use an attribute selector to find values containing unbalanced braces or
+   parentheses.
+   <https://github.com/jhy/jsoup/issues/611>
+
  * Fixed an issue where namespaced tags (like <fb:comment>) would cause Element.cssSelector() to fail.
    <https://github.com/jhy/jsoup/pull/677>
 
diff --git a/src/main/java/org/jsoup/parser/TokenQueue.java b/src/main/java/org/jsoup/parser/TokenQueue.java
index 034a9fa1..47947fa5 100644
--- a/src/main/java/org/jsoup/parser/TokenQueue.java
+++ b/src/main/java/org/jsoup/parser/TokenQueue.java
@@ -250,7 +250,7 @@ public class TokenQueue {
 
     /**
      * Pulls a balanced string off the queue. E.g. if queue is "(one (two) three) four", (,) will return "one (two) three",
-     * and leave " four" on the queue. Unbalanced openers and closers can be escaped (with \). Those escapes will be left
+     * and leave " four" on the queue. Unbalanced openers and closers can quoted (with ' or ") or escaped (with \). Those escapes will be left
      * in the returned string, which is suitable for regexes (where we need to preserve the escape), but unsuitable for
      * contains text strings; use unescape for that.
      * @param open opener
@@ -262,11 +262,16 @@ public class TokenQueue {
         int end = -1;
         int depth = 0;
         char last = 0;
+        boolean inQuote = false;
 
         do {
             if (isEmpty()) break;
             Character c = consume();
             if (last == 0 || last != ESC) {
+                if (c.equals('\'') || c.equals('"') && c != open)
+                    inQuote = !inQuote;
+                if (inQuote)
+                    continue;
                 if (c.equals(open)) {
                     depth++;
                     if (start == -1)
diff --git a/src/test/java/org/jsoup/select/SelectorTest.java b/src/test/java/org/jsoup/select/SelectorTest.java
index 82921427..c687b797 100644
--- a/src/test/java/org/jsoup/select/SelectorTest.java
+++ b/src/test/java/org/jsoup/select/SelectorTest.java
@@ -661,4 +661,11 @@ public class SelectorTest {
         Elements subSelect = els.select(":contains(one)");
         assertEquals(2, subSelect.size());
     }
+
+    @Test public void attributeWithBrackets() {
+        String html = "<div data='End]'>One</div> <div data='[Another)]]'>Two</div>";
+        Document doc = Jsoup.parse(html);
+        assertEquals("One", doc.select("div[data='End]'").first().text());
+        assertEquals("Two", doc.select("div[data='[Another)]]'").first().text());
+    }
 }
