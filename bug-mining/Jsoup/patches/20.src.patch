diff --git a/CHANGES b/CHANGES
index 622c2293..61f02fc8 100644
--- a/CHANGES
+++ b/CHANGES
@@ -11,11 +11,13 @@ jsoup changelog
  
  * Added full support for all new HTML5 tags.
 
- * Changed DT & DD tags to block-mode tags, to follow practise over spec
+ * Changed DT & DD tags to block-mode tags, to follow practice over spec
  
  * Improved implicit table element handling (particularly around thead, tbody, and tfoot).
  
  * Added support for namespaced elements (<fb:name>) and selectors (fb|name)
+ 
+ * Improved HTML output format for empty elements and auto-detected self closing tags
 
 *** Release 1.2.2 [2010-Jul-11]
  
diff --git a/src/main/java/org/jsoup/nodes/Element.java b/src/main/java/org/jsoup/nodes/Element.java
index 2f06ddb1..e7f30d39 100644
--- a/src/main/java/org/jsoup/nodes/Element.java
+++ b/src/main/java/org/jsoup/nodes/Element.java
@@ -903,15 +903,16 @@ public class Element extends Node {
                 .append(tagName())
                 .append(attributes.html());
 
-        if (childNodes.isEmpty() && tag.isEmpty())
+        if (childNodes.isEmpty() && tag.isSelfClosing())
             accum.append(" />");
         else
             accum.append(">");
     }
 
     void outerHtmlTail(StringBuilder accum, int depth) {
-        if (!tag.isEmpty()) {
-            if (tag.canContainBlock()) indent(accum, depth);
+        if (!(childNodes.isEmpty() && tag.isSelfClosing())) {
+            if (!childNodes.isEmpty() && tag.canContainBlock())
+                indent(accum, depth);
             accum.append("</").append(tagName()).append(">");
         }
     }
diff --git a/src/main/java/org/jsoup/parser/Parser.java b/src/main/java/org/jsoup/parser/Parser.java
index e4e560d5..3d937803 100644
--- a/src/main/java/org/jsoup/parser/Parser.java
+++ b/src/main/java/org/jsoup/parser/Parser.java
@@ -150,6 +150,8 @@ public class Parser {
         boolean isEmptyElement = tag.isEmpty(); // empty element if empty tag (e.g. img) or self-closed el (<div/>
         if (tq.matchChomp("/>")) { // close empty element or tag
             isEmptyElement = true;
+            if (!tag.isKnownTag()) // if unknown and a self closed, allow it to be self closed on output. this doesn't force all instances to be empty
+                tag.setSelfClosing();
         } else {
             tq.matchChomp(">");
         }
diff --git a/src/main/java/org/jsoup/parser/Tag.java b/src/main/java/org/jsoup/parser/Tag.java
index 285690b5..fe1b368e 100644
--- a/src/main/java/org/jsoup/parser/Tag.java
+++ b/src/main/java/org/jsoup/parser/Tag.java
@@ -18,11 +18,13 @@ public class Tag {
     }
 
     private String tagName;
+    private boolean knownTag = false; // if pre-defined or auto-created
     private boolean isBlock = true; // block or inline
     private boolean canContainBlock = true; // Can this tag hold block level tags?
     private boolean canContainInline = true; // only pcdata if not
     private boolean optionalClosing = false; // If tag is open, and another seen, close previous tag
     private boolean empty = false; // can hold nothing; e.g. img
+    private boolean selfClosing = false; // can self close (<foo />). used for unknown tags that self close, without forcing them as empty.
     private boolean preserveWhitespace = false; // for pre, textarea, script etc
     private List<Tag> ancestors; // elements must be a descendant of one of these ancestors
     private List<Tag> excludes = Collections.emptyList(); // cannot contain these tags
@@ -146,6 +148,22 @@ public class Tag {
     public boolean isEmpty() {
         return empty;
     }
+    
+    /**
+     * Get if this tag is self closing.
+     * @return if this tag should be output as self closing.
+     */
+    public boolean isSelfClosing() {
+        return empty || selfClosing;
+    }
+    
+    /**
+     * Get if this is a pre-defined tag, or was auto created on parsing.
+     * @return if a known tag
+     */
+    public boolean isKnownTag() {
+        return knownTag;
+    }
 
     /**
      Get if this tag should preserve whitespace within child text nodes.
@@ -376,6 +394,7 @@ public class Tag {
 
     private static Tag register(Tag tag) {
         tag.setAncestor(defaultAncestor.tagName);
+        tag.setKnownTag();
         synchronized (tags) {
             tags.put(tag.tagName, tag);
         }
@@ -446,4 +465,14 @@ public class Tag {
         limitChildren = true;
         return this;
     }
+    
+    Tag setSelfClosing() {
+        selfClosing = true;
+        return this;
+    }
+    
+    private Tag setKnownTag() {
+        knownTag = true;
+        return this;
+    }
 }
diff --git a/src/test/java/org/jsoup/nodes/ElementTest.java b/src/test/java/org/jsoup/nodes/ElementTest.java
index f6d3e910..a5b5553e 100644
--- a/src/test/java/org/jsoup/nodes/ElementTest.java
+++ b/src/test/java/org/jsoup/nodes/ElementTest.java
@@ -197,7 +197,13 @@ public class ElementTest {
 
     @Test public void testFormatHtml() {
         Document doc = Jsoup.parse("<div><p>Hello</p></div>");
-        assertEquals("<html>\n <head>\n </head>\n <body>\n  <div>\n   <p>Hello</p>\n  </div>\n </body>\n</html>", doc.html());
+        assertEquals("<html>\n <head></head>\n <body>\n  <div>\n   <p>Hello</p>\n  </div>\n </body>\n</html>", doc.html());
+    }
+    
+    @Test public void testEmptyElementFormatHtml() {
+        // don't put newlines into empty blocks
+        Document doc = Jsoup.parse("<section><div></div></section>");
+        assertEquals("\n<section>\n <div></div>\n</section>", doc.select("section").first().outerHtml());
     }
 
     @Test public void testSetText() {
diff --git a/src/test/java/org/jsoup/parser/ParserTest.java b/src/test/java/org/jsoup/parser/ParserTest.java
index 2f2cce62..9fd3b191 100644
--- a/src/test/java/org/jsoup/parser/ParserTest.java
+++ b/src/test/java/org/jsoup/parser/ParserTest.java
@@ -255,9 +255,9 @@ public class ParserTest {
     }
     
     @Test public void handlesUnknownNamespaceTags() {
-        String h = "<foo:bar/><abc:def id=1>Foo<p>Hello</abc:def>";
+        String h = "<foo:bar id=1/><abc:def id=2>Foo<p>Hello</abc:def><foo:bar>There</foo:bar>";
         Document doc = Jsoup.parse(h);
-        assertEquals("<foo:bar></foo:bar><abc:def id=\"1\">Foo<p>Hello</p></abc:def>", TextUtil.stripNewlines(doc.body().html()));
+        assertEquals("<foo:bar id=\"1\" /><abc:def id=\"2\">Foo<p>Hello</p></abc:def><foo:bar>There</foo:bar>", TextUtil.stripNewlines(doc.body().html()));
     }
     
     @Test public void handlesEmptyBlocks() {
