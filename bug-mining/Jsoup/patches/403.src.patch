diff --git a/CHANGES.md b/CHANGES.md
index d0ed7b14..35e2499c 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -15,6 +15,9 @@
   normalized. [#1496].(https://github.com/jhy/jsoup/issues/1496)
 * When serializing to XML, characters that are invalid in XML 1.0 should be removed (not
   encoded). [#1743](https://github.com/jhy/jsoup/issues/1743).
+* When converting a Document to the W3C DOM in `W3CDom`, an element with an attribute in an undeclared namespace now
+  gets a declaration of `xmlns:prefix="undefined"`. This allows subsequent serializations to XML via `W3CDom.asString()`
+  to succeed. [#2087](https://github.com/jhy/jsoup/issues/2087).
 
 ## 1.19.1 (2025-03-04)
 
diff --git a/src/main/java/org/jsoup/helper/W3CDom.java b/src/main/java/org/jsoup/helper/W3CDom.java
index bfb573cb..e472e0f3 100644
--- a/src/main/java/org/jsoup/helper/W3CDom.java
+++ b/src/main/java/org/jsoup/helper/W3CDom.java
@@ -330,7 +330,8 @@ public class W3CDom {
     }
 
     /**
-     * Serialize a W3C document to a String. The output format will be XML or HTML depending on the content of the doc.
+     * Serialize a W3C document that was created by {@link #fromJsoup(org.jsoup.nodes.Element)} to a String.
+     * The output format will be XML or HTML depending on the content of the doc.
      *
      * @param doc Document
      * @return Document as string
@@ -423,21 +424,42 @@ public class W3CDom {
 
         private void copyAttributes(org.jsoup.nodes.Node source, Element el) {
             for (Attribute attribute : source.attributes()) {
-                // the W3C DOM has a different allowed set of characters than HTML5 (that Attribute.getValidKey return, partic does not allow ';'). So if we except when using HTML, go to more restricted XML
                 try {
                     String key = Attribute.getValidKey(attribute.getKey(), syntax);
-                    if (key != null) // null if couldn't be coerced to validity
+                    if (key != null) {
                         el.setAttribute(key, attribute.getValue());
+                        addUndeclaredAttrNs(key, el);
+                    }
                 } catch (DOMException e) {
                     if (syntax != Syntax.xml) {
                         String key = Attribute.getValidKey(attribute.getKey(), Syntax.xml);
-                        if (key != null)
-                            el.setAttribute(key, attribute.getValue()); // otherwise, will skip attribute
+                        if (key != null) {
+                            el.setAttribute(key, attribute.getValue());
+                            addUndeclaredAttrNs(key, el);
+                        }
                     }
                 }
             }
         }
 
+        /**
+         Add a namespace declaration for an attribute with a prefix if it is not already present. Ensures that attributes
+         with prefixes have the corresponding namespace declared, E.g. attribute "v-bind:foo" gets another attribute
+         "xmlns:v-bind='undefined'. So that the asString() transformation pass is valid.
+         */
+        private void addUndeclaredAttrNs(String attrKey, Element wEl) {
+            if (!namespaceAware) return;
+            int pos = attrKey.indexOf(':');
+            if (pos > 0) {
+                String prefix = attrKey.substring(0, pos);
+                if (!namespacesStack.peek().containsKey(prefix)) {
+                    wEl.setAttribute("xmlns:" + prefix, undefinedNs);
+                    namespacesStack.peek().put(prefix, undefinedNs);
+                }
+            }
+        }
+        private static final String undefinedNs = "undefined";
+
         /**
          * Finds any namespaces defined in this element. Returns any tag prefix.
          */
diff --git a/src/test/java/org/jsoup/helper/W3CDomTest.java b/src/test/java/org/jsoup/helper/W3CDomTest.java
index e2ba5ffa..da24d7f0 100644
--- a/src/test/java/org/jsoup/helper/W3CDomTest.java
+++ b/src/test/java/org/jsoup/helper/W3CDomTest.java
@@ -488,6 +488,37 @@ public class W3CDomTest {
         assertTrue(string.contains("&amp;lol1;"));
     }
 
+    @Test void undeclaredAttrNamespaceAsString() {
+        // https://github.com/jhy/jsoup/issues/2087
+        W3CDom w3CDom = new W3CDom();
+        String html = "<html><body><div v-bind:class='test'></div></body></html>";
+        org.jsoup.nodes.Document jdoc = Jsoup.parse(html);
+        org.w3c.dom.Document w3CDoc = w3CDom.fromJsoup(jdoc);
+
+        String xml = w3CDom.asString(w3CDoc);
+        assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\"?><html xmlns=\"http://www.w3.org/1999/xhtml\"><head/><body><div xmlns:v-bind=\"undefined\" v-bind:class=\"test\"/></body></html>", xml);
+    }
+
+    @Test void declaredNamespaceIsUsed() {
+        W3CDom w3CDom = new W3CDom();
+        String html = "<html xmlns:v-bind=\"http://example.com\"><body><div v-bind:class='test'></div></body></html>";
+        org.jsoup.nodes.Document jdoc = Jsoup.parse(html);
+        org.w3c.dom.Document w3CDoc = w3CDom.fromJsoup(jdoc);
+
+        String xml = w3CDom.asString(w3CDoc);
+        assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\"?><html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v-bind=\"http://example.com\"><head/><body><div v-bind:class=\"test\"/></body></html>", xml);
+    }
+
+    @Test void nestedElementsWithUndeclaredNamespace() {
+        W3CDom w3CDom = new W3CDom();
+        String html = "<html><body><div v-bind:class='test'><span v-bind:style='color:red'></span></div></body></html>";
+        org.jsoup.nodes.Document jdoc = Jsoup.parse(html);
+        org.w3c.dom.Document w3CDoc = w3CDom.fromJsoup(jdoc);
+
+        String xml = w3CDom.asString(w3CDoc);
+        assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\"?><html xmlns=\"http://www.w3.org/1999/xhtml\"><head/><body><div xmlns:v-bind=\"undefined\" v-bind:class=\"test\"><span v-bind:style=\"color:red\"/></div></body></html>", xml);
+    }
+
     private static Stream<Arguments> parserProvider() {
         return Stream.of(
             Arguments.of(Parser.htmlParser()),
