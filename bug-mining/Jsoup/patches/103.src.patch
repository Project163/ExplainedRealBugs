diff --git a/CHANGES b/CHANGES
index 498c6691..6bde8695 100644
--- a/CHANGES
+++ b/CHANGES
@@ -18,6 +18,11 @@ jsoup changelog
  * Fixed an issue where a table nested within a TH cell would parse to an incorrect tree.
    <https://github.com/jhy/jsoup/issues/575>
 
+ * When serializing a document using the XHTML encoding entities, if the character set did not support &nbsp; chars
+   (such as Shit_JIS), the character would be skipped. For visibility, will now always output &xa0; when using XHTML
+   encoding entities (as &nbsp; is not defined), regardless of the output character set.
+   <https://github.com/jhy/jsoup/issues/523>
+
 *** Release 1.8.2 [2015-Apr-13]
  * Performance improvements for parsing HTML on Android, of 1.5x to 1.9x, with larger parses getting a bigger
    speed increase. For non-Android JREs, around 1.1x to 1.2x.
diff --git a/src/main/java/org/jsoup/nodes/Entities.java b/src/main/java/org/jsoup/nodes/Entities.java
index 6ccb84ed..ad80489e 100644
--- a/src/main/java/org/jsoup/nodes/Entities.java
+++ b/src/main/java/org/jsoup/nodes/Entities.java
@@ -115,7 +115,7 @@ public class Entities {
                         if (escapeMode != EscapeMode.xhtml)
                             accum.append("&nbsp;");
                         else
-                            accum.append(c);
+                            accum.append("&#xa0;");
                         break;
                     case '<':
                         if (!inAttribute)
diff --git a/src/test/java/org/jsoup/nodes/DocumentTest.java b/src/test/java/org/jsoup/nodes/DocumentTest.java
index 4eb72cc1..4ed2b362 100644
--- a/src/test/java/org/jsoup/nodes/DocumentTest.java
+++ b/src/test/java/org/jsoup/nodes/DocumentTest.java
@@ -1,7 +1,9 @@
 package org.jsoup.nodes;
 
+import java.io.ByteArrayInputStream;
 import java.io.File;
 import java.io.IOException;
+import java.io.InputStream;
 import java.nio.charset.Charset;
 import org.jsoup.Jsoup;
 import org.jsoup.TextUtil;
@@ -382,4 +384,27 @@ public class DocumentTest {
         
         return doc;
     }
+
+    @Test
+    public void testShiftJisRoundtrip() throws Exception {
+        String input =
+                "<html>"
+                        +   "<head>"
+                        +     "<meta http-equiv=\"content-type\" content=\"text/html; charset=Shift_JIS\" />"
+                        +   "</head>"
+                        +   "<body>"
+                        +     "before&nbsp;after"
+                        +   "</body>"
+                        + "</html>";
+        InputStream is = new ByteArrayInputStream(input.getBytes(Charset.forName("ASCII")));
+
+        Document doc = Jsoup.parse(is, null, "http://example.com");
+        doc.outputSettings().escapeMode(Entities.EscapeMode.xhtml);
+
+        String output = new String(doc.html().getBytes(doc.outputSettings().charset()), doc.outputSettings().charset());
+
+        assertFalse("Should not have contained a '?'.", output.contains("?"));
+        assertTrue("Should have contained a '&#xa0;' or a '&nbsp;'.",
+                output.contains("&#xa0;") || output.contains("&nbsp;"));
+    }
 }
