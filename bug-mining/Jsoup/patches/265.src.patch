diff --git a/src/main/java/org/jsoup/nodes/Attribute.java b/src/main/java/org/jsoup/nodes/Attribute.java
index fa1331a4..1991847f 100644
--- a/src/main/java/org/jsoup/nodes/Attribute.java
+++ b/src/main/java/org/jsoup/nodes/Attribute.java
@@ -171,6 +171,7 @@ public class Attribute implements Map.Entry<String, String>, Cloneable  {
         return shouldCollapseAttribute(key, val, out);
     }
 
+    // collapse unknown foo=null, known checked=null, checked="", checked=checked; write out others
     protected static boolean shouldCollapseAttribute(final String key, @Nullable final String val, final Document.OutputSettings out) {
         return (
             out.syntax() == Document.OutputSettings.Syntax.html &&
diff --git a/src/main/java/org/jsoup/nodes/Attributes.java b/src/main/java/org/jsoup/nodes/Attributes.java
index 6e0d7898..2301d818 100644
--- a/src/main/java/org/jsoup/nodes/Attributes.java
+++ b/src/main/java/org/jsoup/nodes/Attributes.java
@@ -127,7 +127,7 @@ public class Attributes implements Iterable<Attribute>, Cloneable {
      * @param value attribute value (may be null, to set a boolean attribute)
      * @return these attributes, for chaining
      */
-    public Attributes put(String key, String value) {
+    public Attributes put(String key, @Nullable String value) {
         Validate.notNull(key);
         int i = indexOfKey(key);
         if (i != NotFound)
diff --git a/src/test/java/org/jsoup/nodes/AttributesTest.java b/src/test/java/org/jsoup/nodes/AttributesTest.java
index d2f986b0..51bde984 100644
--- a/src/test/java/org/jsoup/nodes/AttributesTest.java
+++ b/src/test/java/org/jsoup/nodes/AttributesTest.java
@@ -1,5 +1,6 @@
 package org.jsoup.nodes;
 
+import org.jsoup.Jsoup;
 import org.junit.jupiter.api.Test;
 
 import java.util.Iterator;
@@ -231,4 +232,39 @@ public class AttributesTest {
         assertEquals(4, a.size());
         assertEquals(2, a.asList().size()); // excluded from lists
     }
+
+    @Test public void testBooleans() {
+        // want unknown=null, and known like async=null, async="", and async=async to collapse
+        String html = "<a foo bar=\"\" async=async qux=qux defer=deferring ismap inert=\"\">";
+        Element el = Jsoup.parse(html).selectFirst("a");
+        assertEquals(" foo bar=\"\" async qux=\"qux\" defer=\"deferring\" ismap inert", el.attributes().html());
+
+    }
+
+    @Test public void booleanNullAttributesConsistent() {
+        Attributes attributes = new Attributes();
+        attributes.put("key", null);
+        Attribute attribute = attributes.iterator().next();
+
+        assertEquals("key", attribute.html());
+        assertEquals(" key", attributes.html());
+    }
+
+    @Test public void booleanEmptyString() {
+        Attributes attributes = new Attributes();
+        attributes.put("checked", "");
+        Attribute attribute = attributes.iterator().next();
+
+        assertEquals("checked", attribute.html());
+        assertEquals(" checked", attributes.html());
+    }
+
+    @Test public void booleanCaseInsensitive() {
+        Attributes attributes = new Attributes();
+        attributes.put("checked", "CHECKED");
+        Attribute attribute = attributes.iterator().next();
+
+        assertEquals("checked", attribute.html());
+        assertEquals(" checked", attributes.html());
+    }
 }
