diff --git a/src/core/vdom/modules/ref.js b/src/core/vdom/modules/ref.js
index 9d6628b7..51f9191e 100644
--- a/src/core/vdom/modules/ref.js
+++ b/src/core/vdom/modules/ref.js
@@ -17,7 +17,7 @@ export default {
   }
 }
 
-function registerRef (vnode: VNodeWithData, isRemoval: ?boolean) {
+export function registerRef (vnode: VNodeWithData, isRemoval: ?boolean) {
   const key = vnode.data.ref
   if (!key) return
 
diff --git a/src/core/vdom/patch.js b/src/core/vdom/patch.js
index a90bb6ff..9f20dbba 100644
--- a/src/core/vdom/patch.js
+++ b/src/core/vdom/patch.js
@@ -11,6 +11,7 @@ import config from '../config'
 import VNode from './vnode'
 import { isPrimitive, _toString, warn } from '../util/index'
 import { activeInstance } from '../instance/lifecycle'
+import { registerRef } from './modules/ref'
 
 const emptyData = {}
 const emptyNode = new VNode('', emptyData, [])
@@ -156,6 +157,10 @@ export function createPatchFunction (backend) {
       invokeCreateHooks(vnode, insertedVnodeQueue)
       setScope(vnode)
     } else {
+      // empty component root.
+      // skip all element-related modules except for ref (#3455)
+      registerRef(vnode)
+      // make sure to invoke the insert hook
       insertedVnodeQueue.push(vnode)
     }
   }
diff --git a/test/unit/features/ref.spec.js b/test/unit/features/ref.spec.js
index 61acd06a..c5c930eb 100644
--- a/test/unit/features/ref.spec.js
+++ b/test/unit/features/ref.spec.js
@@ -145,4 +145,16 @@ describe('ref', () => {
       expect(vm.$refs.list.every((comp, i) => comp.$el.textContent === String(i + 1))).toBe(true)
     }
   })
+
+  it('should register on component with empty roots', () => {
+    const vm = new Vue({
+      template: '<child ref="test"></child>',
+      components: {
+        child: {
+          template: '<div v-if="false"></div>'
+        }
+      }
+    }).$mount()
+    expect(vm.$refs.test).toBe(vm.$children[0])
+  })
 })
