diff --git a/src/compiler/optimizer.js b/src/compiler/optimizer.js
index ba4288cb..45ebb3fe 100644
--- a/src/compiler/optimizer.js
+++ b/src/compiler/optimizer.js
@@ -75,6 +75,20 @@ function isStatic (node: ASTNode): boolean {
     !node.if && !node.for && // not v-if or v-for or v-else
     !isBuiltInTag(node.tag) && // not a built-in
     isPlatformReservedTag(node.tag) && // not a component
+    !isDirectChildOfTemplateFor(node) &&
     Object.keys(node).every(isStaticKey)
   ))
 }
+
+function isDirectChildOfTemplateFor (node: ASTElement): boolean {
+  while (node.parent) {
+    node = node.parent
+    if (node.tag !== 'template') {
+      return false
+    }
+    if (node.for) {
+      return true
+    }
+  }
+  return false
+}
diff --git a/src/core/vdom/helpers/normalize-children.js b/src/core/vdom/helpers/normalize-children.js
index 4c95399e..207ddbfd 100644
--- a/src/core/vdom/helpers/normalize-children.js
+++ b/src/core/vdom/helpers/normalize-children.js
@@ -6,7 +6,7 @@ import VNode from 'core/vdom/vnode'
 export function normalizeChildren (
   children: any,
   ns: string | void,
-  nestedIndex: number | void
+  nestedIndex: string | void
 ): Array<VNode> | void {
   if (isPrimitive(children)) {
     return [createTextVNode(children)]
@@ -18,7 +18,7 @@ export function normalizeChildren (
       const last = res[res.length - 1]
       //  nested
       if (Array.isArray(c)) {
-        res.push.apply(res, normalizeChildren(c, ns, i))
+        res.push.apply(res, normalizeChildren(c, ns, `${nestedIndex || ''}_${i}`))
       } else if (isPrimitive(c)) {
         if (last && last.text) {
           last.text += String(c)
@@ -36,7 +36,7 @@ export function normalizeChildren (
           }
           // default key for nested array children (likely generated by v-for)
           if (c.tag && c.key == null && nestedIndex != null) {
-            c.key = `__vlist_${nestedIndex}_${i}__`
+            c.key = `__vlist${nestedIndex}_${i}__`
           }
           res.push(c)
         }
