{"url":"https://api.github.com/repos/vuejs/vue/issues/4236","repository_url":"https://api.github.com/repos/vuejs/vue","labels_url":"https://api.github.com/repos/vuejs/vue/issues/4236/labels{/name}","comments_url":"https://api.github.com/repos/vuejs/vue/issues/4236/comments","events_url":"https://api.github.com/repos/vuejs/vue/issues/4236/events","html_url":"https://github.com/vuejs/vue/issues/4236","id":190108501,"node_id":"MDU6SXNzdWUxOTAxMDg1MDE=","number":4236,"title":"Watch triggered on unchanged NaN value","user":{"login":"amichair","id":1410200,"node_id":"MDQ6VXNlcjE0MTAyMDA=","avatar_url":"https://avatars.githubusercontent.com/u/1410200?v=4","gravatar_id":"","url":"https://api.github.com/users/amichair","html_url":"https://github.com/amichair","followers_url":"https://api.github.com/users/amichair/followers","following_url":"https://api.github.com/users/amichair/following{/other_user}","gists_url":"https://api.github.com/users/amichair/gists{/gist_id}","starred_url":"https://api.github.com/users/amichair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amichair/subscriptions","organizations_url":"https://api.github.com/users/amichair/orgs","repos_url":"https://api.github.com/users/amichair/repos","events_url":"https://api.github.com/users/amichair/events{/privacy}","received_events_url":"https://api.github.com/users/amichair/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-11-17T17:16:15Z","updated_at":"2022-11-09T14:46:47Z","closed_at":"2016-11-18T16:47:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When a watched object's property has a NaN value and is then set again to NaN, the watch callback is incorrectly triggered. In my application this results in an infinite loop (the watch callback does some calculations on the object, which sets the NaN back to NaN).\r\n\r\nThe issue is with the reactive setter comparison of old and new value, since one of the many JS quirks is that NaN === NaN is always false. changing\r\n`if (newVal === value) {`\r\nto\r\n`if (newVal === value || newVal !== newVal && value !== value) { // accounts for NaN quirks`\r\nsolves the issue.\r\n","closed_by":{"login":"yyx990803","id":499550,"node_id":"MDQ6VXNlcjQ5OTU1MA==","avatar_url":"https://avatars.githubusercontent.com/u/499550?v=4","gravatar_id":"","url":"https://api.github.com/users/yyx990803","html_url":"https://github.com/yyx990803","followers_url":"https://api.github.com/users/yyx990803/followers","following_url":"https://api.github.com/users/yyx990803/following{/other_user}","gists_url":"https://api.github.com/users/yyx990803/gists{/gist_id}","starred_url":"https://api.github.com/users/yyx990803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyx990803/subscriptions","organizations_url":"https://api.github.com/users/yyx990803/orgs","repos_url":"https://api.github.com/users/yyx990803/repos","events_url":"https://api.github.com/users/yyx990803/events{/privacy}","received_events_url":"https://api.github.com/users/yyx990803/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/4236/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vuejs/vue/issues/4236/timeline","performed_via_github_app":null,"state_reason":"completed"}