[{"id":899634566,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50ODk5NjM0NTY2","url":"https://api.github.com/repos/vuejs/vue/issues/events/899634566","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2016-12-20T05:28:57Z","rename":{"from":"checkbox can not be selected if it's in a node with @click listener?","to":"checkbox can not be selected if it's in a element with @click listener?"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268164933","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-268164933","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":268164933,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODE2NDkzMw==","user":{"login":"Marshane","id":718848,"node_id":"MDQ6VXNlcjcxODg0OA==","avatar_url":"https://avatars.githubusercontent.com/u/718848?v=4","gravatar_id":"","url":"https://api.github.com/users/Marshane","html_url":"https://github.com/Marshane","followers_url":"https://api.github.com/users/Marshane/followers","following_url":"https://api.github.com/users/Marshane/following{/other_user}","gists_url":"https://api.github.com/users/Marshane/gists{/gist_id}","starred_url":"https://api.github.com/users/Marshane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marshane/subscriptions","organizations_url":"https://api.github.com/users/Marshane/orgs","repos_url":"https://api.github.com/users/Marshane/repos","events_url":"https://api.github.com/users/Marshane/events{/privacy}","received_events_url":"https://api.github.com/users/Marshane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-20T06:20:25Z","updated_at":"2016-12-20T06:20:25Z","body":"<input type=\"checkbox\" v-model=\"checked\">\r\nv-model ?!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268164933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Marshane","id":718848,"node_id":"MDQ6VXNlcjcxODg0OA==","avatar_url":"https://avatars.githubusercontent.com/u/718848?v=4","gravatar_id":"","url":"https://api.github.com/users/Marshane","html_url":"https://github.com/Marshane","followers_url":"https://api.github.com/users/Marshane/followers","following_url":"https://api.github.com/users/Marshane/following{/other_user}","gists_url":"https://api.github.com/users/Marshane/gists{/gist_id}","starred_url":"https://api.github.com/users/Marshane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marshane/subscriptions","organizations_url":"https://api.github.com/users/Marshane/orgs","repos_url":"https://api.github.com/users/Marshane/repos","events_url":"https://api.github.com/users/Marshane/events{/privacy}","received_events_url":"https://api.github.com/users/Marshane/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268171961","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-268171961","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":268171961,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODE3MTk2MQ==","user":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-20T07:13:41Z","updated_at":"2016-12-20T11:41:57Z","body":"@Marshare I do not think you understand my problemã€‚","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268171961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268184976","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-268184976","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":268184976,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODE4NDk3Ng==","user":{"login":"Yunkou","id":1266952,"node_id":"MDQ6VXNlcjEyNjY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1266952?v=4","gravatar_id":"","url":"https://api.github.com/users/Yunkou","html_url":"https://github.com/Yunkou","followers_url":"https://api.github.com/users/Yunkou/followers","following_url":"https://api.github.com/users/Yunkou/following{/other_user}","gists_url":"https://api.github.com/users/Yunkou/gists{/gist_id}","starred_url":"https://api.github.com/users/Yunkou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yunkou/subscriptions","organizations_url":"https://api.github.com/users/Yunkou/orgs","repos_url":"https://api.github.com/users/Yunkou/repos","events_url":"https://api.github.com/users/Yunkou/events{/privacy}","received_events_url":"https://api.github.com/users/Yunkou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-20T08:33:41Z","updated_at":"2016-12-20T08:33:41Z","body":"@qbaty  `@click.self=\"add\" `","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268184976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Yunkou","id":1266952,"node_id":"MDQ6VXNlcjEyNjY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1266952?v=4","gravatar_id":"","url":"https://api.github.com/users/Yunkou","html_url":"https://github.com/Yunkou","followers_url":"https://api.github.com/users/Yunkou/followers","following_url":"https://api.github.com/users/Yunkou/following{/other_user}","gists_url":"https://api.github.com/users/Yunkou/gists{/gist_id}","starred_url":"https://api.github.com/users/Yunkou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yunkou/subscriptions","organizations_url":"https://api.github.com/users/Yunkou/orgs","repos_url":"https://api.github.com/users/Yunkou/repos","events_url":"https://api.github.com/users/Yunkou/events{/privacy}","received_events_url":"https://api.github.com/users/Yunkou/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":899772176,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODk5NzcyMTc2","url":"https://api.github.com/repos/vuejs/vue/issues/events/899772176","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:33:41Z","performed_via_github_app":null},{"id":899772177,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg5OTc3MjE3Nw==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899772177","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:33:41Z","performed_via_github_app":null},{"id":899776132,"node_id":"MDEyOkxhYmVsZWRFdmVudDg5OTc3NjEzMg==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899776132","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:37:35Z","label":{"name":"2.1","color":"e99695"},"performed_via_github_app":null},{"id":899776134,"node_id":"MDEyOkxhYmVsZWRFdmVudDg5OTc3NjEzNA==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899776134","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:37:35Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268185877","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-268185877","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":268185877,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODE4NTg3Nw==","user":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-20T08:38:16Z","updated_at":"2016-12-20T08:38:16Z","body":"@qbaty Thanks for rteporting this, looks like a bug indeed!\r\n\r\nI took the freedom to correct the Vue version in your OP, as you use 2.1.6, noch 2.0.3","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268185877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":899776795,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODk5Nzc2Nzk1","url":"https://api.github.com/repos/vuejs/vue/issues/events/899776795","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:38:16Z","performed_via_github_app":null},{"id":899776796,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg5OTc3Njc5Ng==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899776796","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-20T08:38:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268203661","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-268203661","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":268203661,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODIwMzY2MQ==","user":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-20T10:05:06Z","updated_at":"2016-12-20T10:05:06Z","body":"@LinusBorg Okey first I met this bug when I am using vue 2.0.3,and I try to update vue to the lastest version. this bug still exsit, so ... version should be 2.x","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/268203661/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"qbaty","id":190570,"node_id":"MDQ6VXNlcjE5MDU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/190570?v=4","gravatar_id":"","url":"https://api.github.com/users/qbaty","html_url":"https://github.com/qbaty","followers_url":"https://api.github.com/users/qbaty/followers","following_url":"https://api.github.com/users/qbaty/following{/other_user}","gists_url":"https://api.github.com/users/qbaty/gists{/gist_id}","starred_url":"https://api.github.com/users/qbaty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qbaty/subscriptions","organizations_url":"https://api.github.com/users/qbaty/orgs","repos_url":"https://api.github.com/users/qbaty/repos","events_url":"https://api.github.com/users/qbaty/events{/privacy}","received_events_url":"https://api.github.com/users/qbaty/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":899878153,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50ODk5ODc4MTUz","url":"https://api.github.com/repos/vuejs/vue/issues/events/899878153","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-20T10:05:06Z","performed_via_github_app":null},{"id":899878154,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDg5OTg3ODE1NA==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899878154","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-20T10:05:06Z","performed_via_github_app":null},{"id":899903345,"node_id":"MDEyOkxhYmVsZWRFdmVudDg5OTkwMzM0NQ==","url":"https://api.github.com/repos/vuejs/vue/issues/events/899903345","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-20T10:25:03Z","label":{"name":"2.x","color":"c2e0c6"},"performed_via_github_app":null},{"id":899903347,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50ODk5OTAzMzQ3","url":"https://api.github.com/repos/vuejs/vue/issues/events/899903347","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2016-12-20T10:25:03Z","label":{"name":"2.1","color":"e99695"},"performed_via_github_app":null},{"id":902499569,"node_id":"MDExOkNsb3NlZEV2ZW50OTAyNDk5NTY5","url":"https://api.github.com/repos/vuejs/vue/issues/events/902499569","actor":{"login":"yyx990803","id":499550,"node_id":"MDQ6VXNlcjQ5OTU1MA==","avatar_url":"https://avatars.githubusercontent.com/u/499550?v=4","gravatar_id":"","url":"https://api.github.com/users/yyx990803","html_url":"https://github.com/yyx990803","followers_url":"https://api.github.com/users/yyx990803/followers","following_url":"https://api.github.com/users/yyx990803/following{/other_user}","gists_url":"https://api.github.com/users/yyx990803/gists{/gist_id}","starred_url":"https://api.github.com/users/yyx990803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyx990803/subscriptions","organizations_url":"https://api.github.com/users/yyx990803/orgs","repos_url":"https://api.github.com/users/yyx990803/repos","events_url":"https://api.github.com/users/yyx990803/events{/privacy}","received_events_url":"https://api.github.com/users/yyx990803/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"36193183e124f0f1a054170d2cefd335d45135b8","commit_url":"https://api.github.com/repos/vuejs/vue/commits/36193183e124f0f1a054170d2cefd335d45135b8","created_at":"2016-12-22T03:35:31Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"defcc","id":2603918,"node_id":"MDQ6VXNlcjI2MDM5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/2603918?v=4","gravatar_id":"","url":"https://api.github.com/users/defcc","html_url":"https://github.com/defcc","followers_url":"https://api.github.com/users/defcc/followers","following_url":"https://api.github.com/users/defcc/following{/other_user}","gists_url":"https://api.github.com/users/defcc/gists{/gist_id}","starred_url":"https://api.github.com/users/defcc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/defcc/subscriptions","organizations_url":"https://api.github.com/users/defcc/orgs","repos_url":"https://api.github.com/users/defcc/repos","events_url":"https://api.github.com/users/defcc/events{/privacy}","received_events_url":"https://api.github.com/users/defcc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-03T17:25:23Z","updated_at":"2017-01-03T17:25:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/vuejs/vue/issues/4639","repository_url":"https://api.github.com/repos/vuejs/vue","labels_url":"https://api.github.com/repos/vuejs/vue/issues/4639/labels{/name}","comments_url":"https://api.github.com/repos/vuejs/vue/issues/4639/comments","events_url":"https://api.github.com/repos/vuejs/vue/issues/4639/events","html_url":"https://github.com/vuejs/vue/pull/4639","id":198524712,"node_id":"MDExOlB1bGxSZXF1ZXN0OTk5OTAwMDk=","number":4639,"title":"Use 'click' event for checkbox and radio (fix #4620)","user":{"login":"defcc","id":2603918,"node_id":"MDQ6VXNlcjI2MDM5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/2603918?v=4","gravatar_id":"","url":"https://api.github.com/users/defcc","html_url":"https://github.com/defcc","followers_url":"https://api.github.com/users/defcc/followers","following_url":"https://api.github.com/users/defcc/following{/other_user}","gists_url":"https://api.github.com/users/defcc/gists{/gist_id}","starred_url":"https://api.github.com/users/defcc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/defcc/subscriptions","organizations_url":"https://api.github.com/users/defcc/orgs","repos_url":"https://api.github.com/users/defcc/repos","events_url":"https://api.github.com/users/defcc/events{/privacy}","received_events_url":"https://api.github.com/users/defcc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-01-03T17:25:23Z","updated_at":"2017-01-05T03:38:43Z","closed_at":"2017-01-04T19:43:53Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":11730342,"node_id":"MDEwOlJlcG9zaXRvcnkxMTczMDM0Mg==","name":"vue","full_name":"vuejs/vue","private":false,"owner":{"login":"vuejs","id":6128107,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxMjgxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/6128107?v=4","gravatar_id":"","url":"https://api.github.com/users/vuejs","html_url":"https://github.com/vuejs","followers_url":"https://api.github.com/users/vuejs/followers","following_url":"https://api.github.com/users/vuejs/following{/other_user}","gists_url":"https://api.github.com/users/vuejs/gists{/gist_id}","starred_url":"https://api.github.com/users/vuejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vuejs/subscriptions","organizations_url":"https://api.github.com/users/vuejs/orgs","repos_url":"https://api.github.com/users/vuejs/repos","events_url":"https://api.github.com/users/vuejs/events{/privacy}","received_events_url":"https://api.github.com/users/vuejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/vuejs/vue","description":"This is the repo for Vue 2. For Vue 3, go to https://github.com/vuejs/core","fork":false,"url":"https://api.github.com/repos/vuejs/vue","forks_url":"https://api.github.com/repos/vuejs/vue/forks","keys_url":"https://api.github.com/repos/vuejs/vue/keys{/key_id}","collaborators_url":"https://api.github.com/repos/vuejs/vue/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/vuejs/vue/teams","hooks_url":"https://api.github.com/repos/vuejs/vue/hooks","issue_events_url":"https://api.github.com/repos/vuejs/vue/issues/events{/number}","events_url":"https://api.github.com/repos/vuejs/vue/events","assignees_url":"https://api.github.com/repos/vuejs/vue/assignees{/user}","branches_url":"https://api.github.com/repos/vuejs/vue/branches{/branch}","tags_url":"https://api.github.com/repos/vuejs/vue/tags","blobs_url":"https://api.github.com/repos/vuejs/vue/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/vuejs/vue/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/vuejs/vue/git/refs{/sha}","trees_url":"https://api.github.com/repos/vuejs/vue/git/trees{/sha}","statuses_url":"https://api.github.com/repos/vuejs/vue/statuses/{sha}","languages_url":"https://api.github.com/repos/vuejs/vue/languages","stargazers_url":"https://api.github.com/repos/vuejs/vue/stargazers","contributors_url":"https://api.github.com/repos/vuejs/vue/contributors","subscribers_url":"https://api.github.com/repos/vuejs/vue/subscribers","subscription_url":"https://api.github.com/repos/vuejs/vue/subscription","commits_url":"https://api.github.com/repos/vuejs/vue/commits{/sha}","git_commits_url":"https://api.github.com/repos/vuejs/vue/git/commits{/sha}","comments_url":"https://api.github.com/repos/vuejs/vue/comments{/number}","issue_comment_url":"https://api.github.com/repos/vuejs/vue/issues/comments{/number}","contents_url":"https://api.github.com/repos/vuejs/vue/contents/{+path}","compare_url":"https://api.github.com/repos/vuejs/vue/compare/{base}...{head}","merges_url":"https://api.github.com/repos/vuejs/vue/merges","archive_url":"https://api.github.com/repos/vuejs/vue/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/vuejs/vue/downloads","issues_url":"https://api.github.com/repos/vuejs/vue/issues{/number}","pulls_url":"https://api.github.com/repos/vuejs/vue/pulls{/number}","milestones_url":"https://api.github.com/repos/vuejs/vue/milestones{/number}","notifications_url":"https://api.github.com/repos/vuejs/vue/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/vuejs/vue/labels{/name}","releases_url":"https://api.github.com/repos/vuejs/vue/releases{/id}","deployments_url":"https://api.github.com/repos/vuejs/vue/deployments","created_at":"2013-07-29T03:24:51Z","updated_at":"2025-11-09T17:23:38Z","pushed_at":"2024-10-10T07:24:15Z","git_url":"git://github.com/vuejs/vue.git","ssh_url":"git@github.com:vuejs/vue.git","clone_url":"https://github.com/vuejs/vue.git","svn_url":"https://github.com/vuejs/vue","homepage":"http://v2.vuejs.org","size":32152,"stargazers_count":209671,"watchers_count":209671,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":33803,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":612,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","frontend","javascript","vue"],"visibility":"public","forks":33803,"open_issues":612,"watchers":209671,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/vuejs/vue/pulls/4639","html_url":"https://github.com/vuejs/vue/pull/4639","diff_url":"https://github.com/vuejs/vue/pull/4639.diff","patch_url":"https://github.com/vuejs/vue/pull/4639.patch","merged_at":"2017-01-04T19:43:53Z"},"body":"fix #4620 \r\n\r\n1. use *click* event instead of *change* event.\r\n2. add test case for #4521 ","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/4639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vuejs/vue/issues/4639/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/272304548","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-272304548","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":272304548,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMwNDU0OA==","user":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:29:53Z","updated_at":"2017-01-12T22:29:53Z","body":"Seems fixing this bug created a new bug for :checked=\"\" binding when using in combination with vuex states for maintaining checkbox states.\r\n\r\n```javascript\r\n<template>\r\n\t<ul>\r\n\t\t<li v-for=\"option in visibleOptions\" :key=\"option.value\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t:name=\"filter.key\"\r\n\t\t\t\t:value=\"option.value\"\r\n\t\t\t\t:checked=\"inArray(option.value, filter.active)\"\r\n\t\t\t\t@change=\"updateFilter\">\r\n\t\t</li>\r\n\t</ul>\r\n</template>\r\n```\r\nIn this code example is :checked set to true or false whenever it's in the active filter array.\r\nIt seems when this component is updated (via vuex) the :checked stated doesn't get's updated like in 2.1.6. In my application is the state managed _almost_ totally by Vuex. \r\n\r\n### Vue.js version\r\n2.1.7+\r\n\r\n### Reproduction Link\r\nhttp://vroom.automotivated.nl/\r\n\r\n### Howto reproduce\r\nWhen selecting several checkboxes (like brands) and use your **browser back button** to fallback to previous states. (it's managed by the popstate event)\r\n\r\n### What is expected\r\nThe checkbox will go on or off depending on the previous action.\r\n\r\n### What is actually happening?\r\nEverything get's correctly updated (value wise), except the checkbox isn't honored to update (checked true/false). It keeps in a previous state. When selecting multiple after eachother and navigating back and forward is looks like is off a beat and missing the last changed checkbox.\r\n\r\nCode that goes with it:\r\nhttps://github.com/Automotivated/vroom/blob/master/src/views/elements/filters/Multiple.vue\r\n\r\nWhile reading the [docs](https://vuex.vuejs.org/en/forms.html) in Vuex, it seems to be best practise to do it like I did. \r\n\r\n### When did it work\r\nIt worked like a charm in 2.1.6. Seems really that fixing this bug triggered this bug to be created.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/272304548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/272306700","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-272306700","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":272306700,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMwNjcwMA==","user":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:39:24Z","updated_at":"2017-01-12T22:39:24Z","body":"@FKobus Please open a new issue instead of adding to the bottom of closed ones. Thanks!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/272306700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"LinusBorg","id":1444526,"node_id":"MDQ6VXNlcjE0NDQ1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1444526?v=4","gravatar_id":"","url":"https://api.github.com/users/LinusBorg","html_url":"https://github.com/LinusBorg","followers_url":"https://api.github.com/users/LinusBorg/followers","following_url":"https://api.github.com/users/LinusBorg/following{/other_user}","gists_url":"https://api.github.com/users/LinusBorg/gists{/gist_id}","starred_url":"https://api.github.com/users/LinusBorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LinusBorg/subscriptions","organizations_url":"https://api.github.com/users/LinusBorg/orgs","repos_url":"https://api.github.com/users/LinusBorg/repos","events_url":"https://api.github.com/users/LinusBorg/events{/privacy}","received_events_url":"https://api.github.com/users/LinusBorg/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":921503888,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTIxNTAzODg4","url":"https://api.github.com/repos/vuejs/vue/issues/events/921503888","actor":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-12T22:39:24Z","performed_via_github_app":null},{"id":921503889,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyMTUwMzg4OQ==","url":"https://api.github.com/repos/vuejs/vue/issues/events/921503889","actor":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-12T22:39:24Z","performed_via_github_app":null},{"actor":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:48:20Z","updated_at":"2017-01-12T22:48:20Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/vuejs/vue/issues/4704","repository_url":"https://api.github.com/repos/vuejs/vue","labels_url":"https://api.github.com/repos/vuejs/vue/issues/4704/labels{/name}","comments_url":"https://api.github.com/repos/vuejs/vue/issues/4704/comments","events_url":"https://api.github.com/repos/vuejs/vue/issues/4704/events","html_url":"https://github.com/vuejs/vue/issues/4704","id":200502073,"node_id":"MDU6SXNzdWUyMDA1MDIwNzM=","number":4704,"title":"Checked state bugged in 2.1.7+ when using checkbox :checked=\"true/false\" state with Vuex","user":{"login":"FKobus","id":2457243,"node_id":"MDQ6VXNlcjI0NTcyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/2457243?v=4","gravatar_id":"","url":"https://api.github.com/users/FKobus","html_url":"https://github.com/FKobus","followers_url":"https://api.github.com/users/FKobus/followers","following_url":"https://api.github.com/users/FKobus/following{/other_user}","gists_url":"https://api.github.com/users/FKobus/gists{/gist_id}","starred_url":"https://api.github.com/users/FKobus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FKobus/subscriptions","organizations_url":"https://api.github.com/users/FKobus/orgs","repos_url":"https://api.github.com/users/FKobus/repos","events_url":"https://api.github.com/users/FKobus/events{/privacy}","received_events_url":"https://api.github.com/users/FKobus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-01-12T22:48:20Z","updated_at":"2017-09-17T15:15:20Z","closed_at":"2017-01-12T23:27:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":11730342,"node_id":"MDEwOlJlcG9zaXRvcnkxMTczMDM0Mg==","name":"vue","full_name":"vuejs/vue","private":false,"owner":{"login":"vuejs","id":6128107,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxMjgxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/6128107?v=4","gravatar_id":"","url":"https://api.github.com/users/vuejs","html_url":"https://github.com/vuejs","followers_url":"https://api.github.com/users/vuejs/followers","following_url":"https://api.github.com/users/vuejs/following{/other_user}","gists_url":"https://api.github.com/users/vuejs/gists{/gist_id}","starred_url":"https://api.github.com/users/vuejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vuejs/subscriptions","organizations_url":"https://api.github.com/users/vuejs/orgs","repos_url":"https://api.github.com/users/vuejs/repos","events_url":"https://api.github.com/users/vuejs/events{/privacy}","received_events_url":"https://api.github.com/users/vuejs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/vuejs/vue","description":"This is the repo for Vue 2. For Vue 3, go to https://github.com/vuejs/core","fork":false,"url":"https://api.github.com/repos/vuejs/vue","forks_url":"https://api.github.com/repos/vuejs/vue/forks","keys_url":"https://api.github.com/repos/vuejs/vue/keys{/key_id}","collaborators_url":"https://api.github.com/repos/vuejs/vue/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/vuejs/vue/teams","hooks_url":"https://api.github.com/repos/vuejs/vue/hooks","issue_events_url":"https://api.github.com/repos/vuejs/vue/issues/events{/number}","events_url":"https://api.github.com/repos/vuejs/vue/events","assignees_url":"https://api.github.com/repos/vuejs/vue/assignees{/user}","branches_url":"https://api.github.com/repos/vuejs/vue/branches{/branch}","tags_url":"https://api.github.com/repos/vuejs/vue/tags","blobs_url":"https://api.github.com/repos/vuejs/vue/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/vuejs/vue/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/vuejs/vue/git/refs{/sha}","trees_url":"https://api.github.com/repos/vuejs/vue/git/trees{/sha}","statuses_url":"https://api.github.com/repos/vuejs/vue/statuses/{sha}","languages_url":"https://api.github.com/repos/vuejs/vue/languages","stargazers_url":"https://api.github.com/repos/vuejs/vue/stargazers","contributors_url":"https://api.github.com/repos/vuejs/vue/contributors","subscribers_url":"https://api.github.com/repos/vuejs/vue/subscribers","subscription_url":"https://api.github.com/repos/vuejs/vue/subscription","commits_url":"https://api.github.com/repos/vuejs/vue/commits{/sha}","git_commits_url":"https://api.github.com/repos/vuejs/vue/git/commits{/sha}","comments_url":"https://api.github.com/repos/vuejs/vue/comments{/number}","issue_comment_url":"https://api.github.com/repos/vuejs/vue/issues/comments{/number}","contents_url":"https://api.github.com/repos/vuejs/vue/contents/{+path}","compare_url":"https://api.github.com/repos/vuejs/vue/compare/{base}...{head}","merges_url":"https://api.github.com/repos/vuejs/vue/merges","archive_url":"https://api.github.com/repos/vuejs/vue/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/vuejs/vue/downloads","issues_url":"https://api.github.com/repos/vuejs/vue/issues{/number}","pulls_url":"https://api.github.com/repos/vuejs/vue/pulls{/number}","milestones_url":"https://api.github.com/repos/vuejs/vue/milestones{/number}","notifications_url":"https://api.github.com/repos/vuejs/vue/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/vuejs/vue/labels{/name}","releases_url":"https://api.github.com/repos/vuejs/vue/releases{/id}","deployments_url":"https://api.github.com/repos/vuejs/vue/deployments","created_at":"2013-07-29T03:24:51Z","updated_at":"2025-11-09T17:23:38Z","pushed_at":"2024-10-10T07:24:15Z","git_url":"git://github.com/vuejs/vue.git","ssh_url":"git@github.com:vuejs/vue.git","clone_url":"https://github.com/vuejs/vue.git","svn_url":"https://github.com/vuejs/vue","homepage":"http://v2.vuejs.org","size":32152,"stargazers_count":209671,"watchers_count":209671,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":33803,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":612,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["framework","frontend","javascript","vue"],"visibility":"public","forks":33803,"open_issues":612,"watchers":209671,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Seems fixing the bug from #4521 created a new bug for :checked=\"\" binding when using in combination with vuex states for maintaining checkbox states.\r\n\r\n```javascript\r\n<template>\r\n\t<ul>\r\n\t\t<li v-for=\"option in visibleOptions\" :key=\"option.value\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t:name=\"filter.key\"\r\n\t\t\t\t:value=\"option.value\"\r\n\t\t\t\t:checked=\"inArray(option.value, filter.active)\"\r\n\t\t\t\t@change=\"updateFilter\">\r\n\t\t</li>\r\n\t</ul>\r\n</template>\r\n```\r\nIn this code example is :checked set to true or false whenever it's in the active filter array.\r\nIt seems when this component is updated (via vuex) the :checked stated doesn't get's updated like in 2.1.6. In my application is the state managed _almost_ totally by Vuex. \r\n\r\n### Vue.js version\r\n2.1.7+\r\n\r\n### Reproduction Link\r\nhttp://vroom.automotivated.nl/\r\n\r\n### Howto reproduce\r\nWhen selecting several checkboxes (like brands) and use your **browser back button** to fallback to previous states. (it's managed by the popstate event and uses vuex actions to update actively the new state)\r\n\r\n### What is expected\r\nThe checkbox should go on or off depending on the previous action or new current state.\r\n\r\n### What is actually happening?\r\nEverything get's correctly updated (value wise), except the checkbox isn't honored to update (checked true/false). It keeps in a previous state. When selecting multiple after eachother and navigating back and forward is looks like is off a beat and missing the last changed checkbox.\r\n\r\nCode that goes with it:\r\nhttps://github.com/Automotivated/vroom/blob/master/src/views/elements/filters/Multiple.vue\r\nFull github repo:\r\nhttps://github.com/Automotivated/vroom/\r\n\r\nWhile reading the [docs](https://vuex.vuejs.org/en/forms.html) in Vuex, it seems to be best practise to do it like I did. \r\n\r\n### When did it work\r\nIt worked like a charm in 2.1.6. Seems really that fixing this bug triggered this bug to be created.","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/4704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vuejs/vue/issues/4704/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"ustbhuangyi","id":5359011,"node_id":"MDQ6VXNlcjUzNTkwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5359011?v=4","gravatar_id":"","url":"https://api.github.com/users/ustbhuangyi","html_url":"https://github.com/ustbhuangyi","followers_url":"https://api.github.com/users/ustbhuangyi/followers","following_url":"https://api.github.com/users/ustbhuangyi/following{/other_user}","gists_url":"https://api.github.com/users/ustbhuangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ustbhuangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ustbhuangyi/subscriptions","organizations_url":"https://api.github.com/users/ustbhuangyi/orgs","repos_url":"https://api.github.com/users/ustbhuangyi/repos","events_url":"https://api.github.com/users/ustbhuangyi/events{/privacy}","received_events_url":"https://api.github.com/users/ustbhuangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T17:44:11Z","updated_at":"2017-11-27T17:44:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24","repository_url":"https://api.github.com/repos/DDFE/DDFE-blog","labels_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24/comments","events_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24/events","html_url":"https://github.com/DDFE/DDFE-blog/issues/24","id":277107874,"node_id":"MDU6SXNzdWUyNzcxMDc4NzQ=","number":24,"title":"Vue.js å‡çº§è¸©å‘å°è®°","user":{"login":"ustbhuangyi","id":5359011,"node_id":"MDQ6VXNlcjUzNTkwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5359011?v=4","gravatar_id":"","url":"https://api.github.com/users/ustbhuangyi","html_url":"https://github.com/ustbhuangyi","followers_url":"https://api.github.com/users/ustbhuangyi/followers","following_url":"https://api.github.com/users/ustbhuangyi/following{/other_user}","gists_url":"https://api.github.com/users/ustbhuangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/ustbhuangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ustbhuangyi/subscriptions","organizations_url":"https://api.github.com/users/ustbhuangyi/orgs","repos_url":"https://api.github.com/users/ustbhuangyi/repos","events_url":"https://api.github.com/users/ustbhuangyi/events{/privacy}","received_events_url":"https://api.github.com/users/ustbhuangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-11-27T17:44:11Z","updated_at":"2020-09-28T04:56:10Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":63568049,"node_id":"MDEwOlJlcG9zaXRvcnk2MzU2ODA0OQ==","name":"DDFE-blog","full_name":"DDFE/DDFE-blog","private":false,"owner":{"login":"DDFE","id":13447209,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzNDQ3MjA5","avatar_url":"https://avatars.githubusercontent.com/u/13447209?v=4","gravatar_id":"","url":"https://api.github.com/users/DDFE","html_url":"https://github.com/DDFE","followers_url":"https://api.github.com/users/DDFE/followers","following_url":"https://api.github.com/users/DDFE/following{/other_user}","gists_url":"https://api.github.com/users/DDFE/gists{/gist_id}","starred_url":"https://api.github.com/users/DDFE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DDFE/subscriptions","organizations_url":"https://api.github.com/users/DDFE/orgs","repos_url":"https://api.github.com/users/DDFE/repos","events_url":"https://api.github.com/users/DDFE/events{/privacy}","received_events_url":"https://api.github.com/users/DDFE/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/DDFE/DDFE-blog","description":":clap: welcome to DDFE's blog","fork":false,"url":"https://api.github.com/repos/DDFE/DDFE-blog","forks_url":"https://api.github.com/repos/DDFE/DDFE-blog/forks","keys_url":"https://api.github.com/repos/DDFE/DDFE-blog/keys{/key_id}","collaborators_url":"https://api.github.com/repos/DDFE/DDFE-blog/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/DDFE/DDFE-blog/teams","hooks_url":"https://api.github.com/repos/DDFE/DDFE-blog/hooks","issue_events_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/events{/number}","events_url":"https://api.github.com/repos/DDFE/DDFE-blog/events","assignees_url":"https://api.github.com/repos/DDFE/DDFE-blog/assignees{/user}","branches_url":"https://api.github.com/repos/DDFE/DDFE-blog/branches{/branch}","tags_url":"https://api.github.com/repos/DDFE/DDFE-blog/tags","blobs_url":"https://api.github.com/repos/DDFE/DDFE-blog/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/DDFE/DDFE-blog/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/DDFE/DDFE-blog/git/refs{/sha}","trees_url":"https://api.github.com/repos/DDFE/DDFE-blog/git/trees{/sha}","statuses_url":"https://api.github.com/repos/DDFE/DDFE-blog/statuses/{sha}","languages_url":"https://api.github.com/repos/DDFE/DDFE-blog/languages","stargazers_url":"https://api.github.com/repos/DDFE/DDFE-blog/stargazers","contributors_url":"https://api.github.com/repos/DDFE/DDFE-blog/contributors","subscribers_url":"https://api.github.com/repos/DDFE/DDFE-blog/subscribers","subscription_url":"https://api.github.com/repos/DDFE/DDFE-blog/subscription","commits_url":"https://api.github.com/repos/DDFE/DDFE-blog/commits{/sha}","git_commits_url":"https://api.github.com/repos/DDFE/DDFE-blog/git/commits{/sha}","comments_url":"https://api.github.com/repos/DDFE/DDFE-blog/comments{/number}","issue_comment_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/comments{/number}","contents_url":"https://api.github.com/repos/DDFE/DDFE-blog/contents/{+path}","compare_url":"https://api.github.com/repos/DDFE/DDFE-blog/compare/{base}...{head}","merges_url":"https://api.github.com/repos/DDFE/DDFE-blog/merges","archive_url":"https://api.github.com/repos/DDFE/DDFE-blog/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/DDFE/DDFE-blog/downloads","issues_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues{/number}","pulls_url":"https://api.github.com/repos/DDFE/DDFE-blog/pulls{/number}","milestones_url":"https://api.github.com/repos/DDFE/DDFE-blog/milestones{/number}","notifications_url":"https://api.github.com/repos/DDFE/DDFE-blog/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/DDFE/DDFE-blog/labels{/name}","releases_url":"https://api.github.com/repos/DDFE/DDFE-blog/releases{/id}","deployments_url":"https://api.github.com/repos/DDFE/DDFE-blog/deployments","created_at":"2016-07-18T03:41:14Z","updated_at":"2025-10-13T08:28:40Z","pushed_at":"2021-01-19T07:04:57Z","git_url":"git://github.com/DDFE/DDFE-blog.git","ssh_url":"git@github.com:DDFE/DDFE-blog.git","clone_url":"https://github.com/DDFE/DDFE-blog.git","svn_url":"https://github.com/DDFE/DDFE-blog","homepage":"","size":41,"stargazers_count":3964,"watchers_count":3964,"language":null,"has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":471,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":471,"open_issues":40,"watchers":3964,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"æœ¬æ–‡å¹¶ä¸æ˜¯ä»€ä¹ˆé«˜æ·±çš„æŠ€æœ¯æ–‡ç« ï¼Œåªæ˜¯è®°å½•æˆ‘æœ€è¿‘é‡åˆ°ä¸€ä¸ªå› ä¸º Vue å‡çº§å¯¼è‡´æˆ‘çš„ä¸€ä¸ªé¡¹ç›®è¸©å‘ä»¥åŠæˆ‘è§£å†³é—®é¢˜çš„è¿‡ç¨‹ã€‚æ–‡ç« è™½é•¿ä½†ä¸æ°´ï¼Œå†™ä¸‹æ¥çš„ç›®çš„æ˜¯æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘é‡åˆ°é—®é¢˜æ—¶å€™ä¸€ä¸ªæ€è€ƒçš„æ–¹æ³•å’Œæ€åº¦ã€‚\r\n\r\n> èƒŒæ™¯ï¼šåŽ»å¹´æˆ‘åœ¨æ…•è¯¾ç½‘æŽ¨å‡ºäº†ä¸€é—¨ Vue.js çš„å…¥é—¨å®žæˆ˜è¯¾ç¨‹â€”â€”[Vue.js é«˜ä»¿é¥¿äº†ä¹ˆå¤–å– App](http://coding.imooc.com/class/74.html) ï¼Œè¿™é—¨è¯¾ç¨‹æ”¶åˆ°äº†éžå¸¸ä¸é”™çš„åå“ï¼ŒäºŽæ˜¯ä»Šå¹´åˆåœ¨æ…•è¯¾ç½‘ä¸Šç»§ç»­æŽ¨å‡ºäº† Vue.js çš„é«˜çº§è¿›é˜¶å®žæˆ˜è¯¾ç¨‹â€”â€”[Vue.js éŸ³ä¹ App](http://coding.imooc.com/class/107.html)ï¼ŒåŒæ ·åé¦ˆä¸é”™ã€‚æ¯å¤©æ™šä¸Šä¸‹ç­å›žå®¶ï¼Œæˆ‘ä¼šåŽ»é—®ç­”åŒºçœ‹ä¸€ä¸‹å­¦ç”Ÿä»¬çš„é—®é¢˜ï¼Œå‘çŽ°è¿‘æœŸæœ‰ä¸å°‘åŒå­¦åé¦ˆäº†åŒæ ·çš„é—®é¢˜ï¼ŒiOS å¾®ä¿¡é‡Œç‚¹å‡»ä¸èƒ½æ’­æ”¾æ­Œæ›²äº†ï¼ŒPC å¯ä»¥ã€‚é€šå¸¸é‡åˆ°è¿™ç§é—®é¢˜æˆ‘ä¼šè®©å­¦ç”Ÿå…ˆåŽ»è®¿é—®æˆ‘çš„é¡¹ç›®çš„[çº¿ä¸Šåœ°å€](http://ustbhuangyi.com/music/)ï¼Œçœ‹çœ‹æˆ‘çš„ä»£ç ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Œå¾—åˆ°çš„ç»“è®ºæ˜¯æˆ‘çš„çº¿ä¸Šä»£ç æ²¡é—®é¢˜ï¼Œä½†ä»–ä»¬è‡ªå·±å†™å°±ä¸è¡Œï¼Œå¹¶ä¸”è¯´å·²ç»å®Œå…¨å’Œæˆ‘çš„ä»£ç åšäº†å¯¹æ¯”ï¼Œè¿™å°±è®©æˆ‘è§‰å¾—ååˆ†è¯¡å¼‚ã€‚æ²¡è¿‡å¤šä¹…ï¼Œæœ‰äº›å­¦ç”Ÿå°±æƒ³å‡ºäº†ä¸€ä¸ªåŠžæ³•ï¼Œåœ¨å…¨å±€ document ç»‘å®šä¸€ä¸ªåŒæ­¥çš„ click äº‹ä»¶ï¼Œåœ¨ click äº‹ä»¶çš„å›žè°ƒå‡½æ•°ä¸­åŒæ­¥è§¦å‘ä¸€æ¬¡ audio çš„ play æ–¹æ³•ï¼Œä¼¼ä¹Žè§£å†³äº†é—®é¢˜ï¼Œä¹Ÿå¾—åˆ°äº†ä¸€äº›åŒå­¦çš„é‡‡çº³ï¼Œä½†æ˜¯æˆ‘çœ‹åˆ°ä»¥åŽçš„ç¬¬ä¸€ååº”æ˜¯ä¸èƒ½ç”¨è¿™ç§å¤ª hack çš„æ–¹å¼åŽ»è§£å†³é—®é¢˜ï¼Œå¿…é¡»æ‰¾åˆ°é—®é¢˜çš„æœ¬è´¨ï¼ŒäºŽæ˜¯ä¹Žæˆ‘å¼€å§‹äº†ä¸€æ®µå¾ˆæœ‰æ„æ€çš„æ‰¾é—®é¢˜çš„è¿‡ç¨‹ã€‚\r\n\r\n## å®šä½é—®é¢˜\r\n\r\nå…ˆçœ‹çŽ°è±¡ï¼šåŒå­¦ä»¬å†™çš„ä»£ç åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨ä¸‹ä¸èƒ½æ’­æ”¾ï¼ŒPC æ˜¯å¯ä»¥çš„ï¼›æˆ‘çº¿ä¸Šçš„ä»£ç æ˜¯éƒ½å¯ä»¥ã€‚äº†è§£çŽ°è±¡åŽæˆ‘å¼€å§‹æŽ’æŸ¥é—®é¢˜ï¼š\r\n\r\n- åŒå­¦ä»¬çš„ä»£ç å†™çš„æœ‰é—®é¢˜ï¼Ÿ\r\nè™½ç„¶ä¼šæœ‰è¿™ç§å¯èƒ½æ€§ï¼Œä½†ä»Ž 2 ä¸ªç»´åº¦è¢«æˆ‘å¦å†³äº†ï¼š1. åŒå­¦ä»¬ä¹Ÿéƒ½å¯¹æ¯”è¿‡æˆ‘çš„æºç çš„ï¼Œè€Œä¸”å‡ºé—®é¢˜çš„åŒå­¦ä¹Ÿä¸æ˜¯ä¸ªåˆ«çŽ°è±¡ï¼›2. å¦‚æžœæ˜¯ä»£ç é—®é¢˜ï¼Œé‚£ä¹ˆå¤§å¤šå¯èƒ½æ€§æ˜¯ PC å’Œç§»åŠ¨ç«¯éƒ½ä¸èƒ½æ’­æ”¾ã€‚\r\n\r\n- æ‰¾ä¸åŒï¼Ÿ\r\nè¿™ä¸ªé—®é¢˜æ˜¯æœ€æ–°æ‰å‡ºçŽ°çš„ï¼ŒåŒå­¦ä»¬å¼€å§‹å­¦ä¹ ç¼–å†™è¯¾ç¨‹ä»£ç éƒ½ä¹Ÿæ˜¯é€šè¿‡ vue-cli è„šæ‰‹æž¶å…ˆåˆå§‹åŒ–ä»£ç ã€‚æŽ¥ç€æˆ‘å¤§æ¦‚çœ‹äº†ä¸€ä¸‹æ–°ç‰ˆçš„è„šæ‰‹æž¶åˆå§‹åŒ–çš„ä»£ç ï¼Œæžœç„¶æ˜¯å¤§ä¸åŒï¼Œwebpack å‡çº§åˆ° 3+ï¼Œé…ç½®å‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ã€‚ä¸è¿‡ä¾æ®æˆ‘çš„ç»éªŒï¼Œæž„å»ºå·¥å…·çš„å‡çº§æ˜¯ä¸ä¼šå½±å“ä¸šåŠ¡ä»£ç çš„ï¼Œä¸€å®šè¿˜æœ‰åˆ«çš„åŽŸå› ã€‚\r\n\r\n- Vue.js å‡çº§ï¼Ÿ\r\né™¤äº† webpack é…ç½®çš„ä¸åŒï¼Œæœ€æ–°è„šæ‰‹æž¶åˆå§‹åŒ–çš„ä»£ç ç”¨çš„ Vue.js ç‰ˆæœ¬æ˜¯ 2.5+ï¼Œè€Œæˆ‘çº¿ä¸Šä»£ç çš„ Vue.js ç‰ˆæœ¬æ˜¯ 2.3+ï¼Œéš¾é“æ˜¯ Vue.js å¯¼è‡´çš„é—®é¢˜å—ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®æˆ‘åŽ»ç¿»é˜…äº† Vue.js çš„ [release log](https://github.com/vuejs/vue/releases)ï¼Œå‘çŽ° Vue.js å¤§å¤§å°å°ç‰ˆæœ¬å‘å¸ƒäº†åå‡ æ¬¡ã€‚å¦‚æžœæ¯ä¸ªéƒ½ä»”ç»†æŸ¥çœ‹ä¹Ÿä¼šå¾ˆè€—æ—¶ï¼ŒäºŽæ˜¯æˆ‘é‡‡ç”¨äº†ä¸€ä¸ªç»å…¸çš„ 2 åˆ†æ³•çš„æ€è·¯åŽ»å®šä½ï¼Œæˆ‘å…ˆæŠŠ Vue.js å‡çº§åˆ° 2.4.0ï¼Œå‘çŽ°ç«Ÿç„¶å®‰è£…ä¸äº†ï¼ˆè¿™æ˜¯ Vue.js åˆšå‡åˆ° 2.4 npm å‘å¸ƒçš„ bugï¼‰ï¼ŒäºŽæ˜¯åˆå‡çº§åˆ° 2.4.1ï¼Œç„¶åŽæ‹¿æˆ‘çš„æ‰‹æœºè¯•äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯å¯ä»¥æ’­æ”¾çš„ã€‚æŽ¥ç€æˆ‘æŠŠ Vue.js å‡çº§åˆ° 2.5.0ï¼Œæ‰‹æœºä¸€è¯•æžœç„¶ä¸èƒ½æ’­æ”¾äº†ï¼Œï¼ˆæ“¦ã€‚ã€‚ï¼‰æˆ‘å¿ƒé‡Œé»˜å¿µä¸€å¥ï¼Œæ€»ç®—æ‰¾åˆ°é—®é¢˜æ‰€åœ¨äº†ã€‚\r\n\r\n## é—®é¢˜çš„æœ¬è´¨\r\n\r\nä»¥ä¸Šå®šä½åˆ°é—®é¢˜å¤§æ¦‚èŠ±äº†æˆ‘åŠå°æ—¶æ—¶é—´ï¼Œä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°é—®é¢˜çš„æ ¹æœ¬åŽŸå› ï¼ŒäºŽæ˜¯æˆ‘ç¿»é˜…äº† Vue.js 2.5 çš„ [release log](https://github.com/vuejs/vue/releases/tag/v2.5.0)ï¼Œç”±äºŽå¾ˆé•¿å°±ä¸åˆ—äº†ã€‚Vue.js æ¯æ¬¡å‡çº§ä¸»è¦åˆ†æˆ 2 å¤§ç±»ï¼ŒFeatures & Improvements å’Œ Bug Fixesã€‚æˆ‘ä»Žä¸Šå¾€ä¸‹ä¾æ¬¡æ‰«äº†ä¸€éï¼ŒæŠŠä¸€äº›å…³äºŽå®ƒæ ¸å¿ƒçš„æ”¹åŠ¨éƒ½ç‚¹è¿›åŽ»çœ‹äº†ä¸€ä¸‹ä»£ç çš„ä¿®æ”¹ï¼Œæœ€ç»ˆé”å®šäº†è¿™ä¸€æ¡ï¼š\r\n\r\n> use MessageChannel for nextTick 6e41679, closes #6566 #6690\r\n\r\næŽ¥ç€æˆ‘ç‚¹è¿›åŽ»çœ‹äº†ä¸€ä¸‹[æ”¹åŠ¨](https://github.com/vuejs/vue/commit/6e41679a96582da3e0a60bdbf123c33ba0e86b31)ï¼Œæˆ‘æ»´å¤©ï¼Œæ”¹åŠ¨å¾ˆå¤§å‘€ï¼ŒnextTick çš„æ ¸å¿ƒå®žçŽ°å˜äº†ï¼ŒMutationObserver ä¸è§äº†ï¼Œæ”¹æˆäº† MessageChannel çš„å®žçŽ°ã€‚ç­‰ç­‰ï¼Œæœ‰äº›åŒå­¦çœ‹åˆ°è¿™é‡Œï¼Œå¯èƒ½ä¼šæ‡µï¼Œè¿™éƒ½æ˜¯äº›å•¥å‘€ã€‚ä¸æ€¥ï¼Œæˆ‘å…ˆç®€å•è§£é‡Šä¸€ä¸‹ Vue çš„ nextTickã€‚\r\n\r\n### nextTick\r\n\r\nä»‹ç» Vue çš„ nextTick ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ JS çš„è¿è¡Œæœºåˆ¶ï¼šJS æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼Œå®ƒæ˜¯åŸºäºŽäº‹ä»¶å¾ªçŽ¯çš„ã€‚å¯¹äºŽäº‹ä»¶å¾ªçŽ¯çš„ç†è§£ï¼Œé˜®è€å¸ˆæœ‰[ä¸€ç¯‡æ–‡ç« ](http://www.ruanyifeng.com/blog/2014/10/event-loop.html)å†™çš„å¾ˆæ¸…æ¥šï¼Œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\r\n\r\nï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚\r\n\r\nï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª\"ä»»åŠ¡é˜Ÿåˆ—\"ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æžœï¼Œå°±åœ¨\"ä»»åŠ¡é˜Ÿåˆ—\"ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚\r\n\r\nï¼ˆ3ï¼‰ä¸€æ—¦\"æ‰§è¡Œæ ˆ\"ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–\"ä»»åŠ¡é˜Ÿåˆ—\"ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒäºŽæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚\r\n\r\nï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚\r\n\r\nä¸»çº¿ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ª tickï¼Œè€Œæ‰€æœ‰çš„å¼‚æ­¥ç»“æžœéƒ½æ˜¯é€šè¿‡ â€œä»»åŠ¡é˜Ÿåˆ—â€ æ¥è°ƒåº¦è¢«è°ƒåº¦ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ä¸­å­˜æ”¾çš„æ˜¯ä¸€ä¸ªä¸ªçš„ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚ è§„èŒƒä¸­è§„å®š task åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯ macro task å’Œ micro taskï¼Œå¹¶ä¸”æ¯ä¸ª macro task ç»“æŸåŽï¼Œéƒ½è¦æ¸…ç©ºæ‰€æœ‰çš„ micro taskã€‚\r\n\r\nå…³äºŽ macro task å’Œ micro task çš„æ¦‚å¿µï¼Œè¿™é‡Œä¸ä¼šç»†è®²ï¼Œç®€å•é€šè¿‡ä¸€æ®µä»£ç æ¼”ç¤ºä»–ä»¬çš„æ‰§è¡Œé¡ºåºï¼š\r\n\r\n```js\r\nfor (macroTask of macroTaskQueue) {\r\n    // 1. Handle current MACRO-TASK\r\n    handleMacroTask();\r\n      \r\n    // 2. Handle all MICRO-TASK\r\n    for (microTask of microTaskQueue) {\r\n        handleMicroTask(microTask);\r\n    }\r\n}\r\n```\r\nåœ¨æµè§ˆå™¨çŽ¯å¢ƒä¸­ï¼Œå¸¸è§çš„ macro task æœ‰ setTimeoutã€MessageChannelã€postMessageã€setImmediateï¼›å¸¸è§çš„ micro task æœ‰ MutationObsever å’Œ Promise.thenã€‚å¯¹äºŽå®ƒä»¬æ›´å¤šçš„äº†è§£ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹[è¿™ç¯‡æ–‡ç« ](https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/)ã€‚\r\n\r\nå›žåˆ° Vue çš„ nextTickï¼ŒnextTick é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸‹ä¸€ä¸ª tickï¼ŒVue å†…éƒ¨å®žçŽ°äº† nextTickï¼Œå¹¶æŠŠå®ƒä½œä¸ºä¸€ä¸ªå…¨å±€ API æš´éœ²å‡ºæ¥ï¼Œå®ƒæ”¯æŒä¼ å…¥ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œä¿è¯å›žè°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸‹ä¸€ä¸ª tickã€‚å®˜ç½‘æ–‡æ¡£ä»‹ç»äº† Vue.nextTick çš„ä½¿ç”¨åœºæ™¯ï¼š\r\n\r\n> Usage: Defer the callback to be executed after the next DOM update cycle. Use it immediately after youâ€™ve changed some data to wait for the DOM update.\r\nä½¿ç”¨ï¼šåœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªçŽ¯ç»“æŸä¹‹åŽæ‰§è¡Œå»¶è¿Ÿå›žè°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åŽç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒèŽ·å–æ›´æ–°åŽçš„ DOMã€‚\r\n\r\nåœ¨ Vue.js é‡Œæ˜¯æ•°æ®é©±åŠ¨è§†å›¾å˜åŒ–ï¼Œç”±äºŽ JS æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨ä¸€ä¸ª tick çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒå¯èƒ½ä¼šå¤šæ¬¡ä¿®æ”¹æ•°æ®ï¼Œä½† Vue.js å¹¶ä¸ä¼šå‚»åˆ°æ¯ä¿®æ”¹ä¸€æ¬¡æ•°æ®å°±åŽ»é©±åŠ¨ä¸€æ¬¡è§†å›¾å˜åŒ–ï¼Œå®ƒä¼šæŠŠè¿™äº›æ•°æ®çš„ä¿®æ”¹å…¨éƒ¨ push åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œç„¶åŽå†…éƒ¨è°ƒç”¨ ä¸€æ¬¡ nextTick åŽ»æ›´æ–°è§†å›¾ï¼Œæ‰€ä»¥æ•°æ®åˆ° DOM è§†å›¾çš„å˜åŒ–æ˜¯éœ€è¦åœ¨ä¸‹ä¸€ä¸ª tick æ‰èƒ½å®Œæˆã€‚\r\n\r\næŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Vue çš„ nextTick çš„å®žçŽ°ï¼Œåœ¨ Vue.js 2.5+ çš„ç‰ˆæœ¬ï¼ŒæŠ½å‡ºæ¥ä¸€ä¸ªå•ç‹¬çš„ [next-tick.js](https://github.com/vuejs/vue/blob/dev/src/core/util/next-tick.js) æ–‡ä»¶åŽ»å®žçŽ°å®ƒï¼Œ\r\n\r\n``` js\r\n/* @flow */\r\n/* globals MessageChannel */\r\n\r\nimport { noop } from 'shared/util'\r\nimport { handleError } from './error'\r\nimport { isIOS, isNative } from './env'\r\n\r\nconst callbacks = []\r\nlet pending = false\r\n\r\nfunction flushCallbacks () {\r\n  pending = false\r\n  const copies = callbacks.slice(0)\r\n  callbacks.length = 0\r\n  for (let i = 0; i < copies.length; i++) {\r\n    copies[i]()\r\n  }\r\n}\r\n\r\n// Here we have async deferring wrappers using both micro and macro tasks.\r\n// In < 2.4 we used micro tasks everywhere, but there are some scenarios where\r\n// micro tasks have too high a priority and fires in between supposedly\r\n// sequential events (e.g. #4521, #6690) or even between bubbling of the same\r\n// event (#6566). However, using macro tasks everywhere also has subtle problems\r\n// when state is changed right before repaint (e.g. #6813, out-in transitions).\r\n// Here we use micro task by default, but expose a way to force macro task when\r\n// needed (e.g. in event handlers attached by v-on).\r\nlet microTimerFunc\r\nlet macroTimerFunc\r\nlet useMacroTask = false\r\n\r\n// Determine (macro) Task defer implementation.\r\n// Technically setImmediate should be the ideal choice, but it's only available\r\n// in IE. The only polyfill that consistently queues the callback after all DOM\r\n// events triggered in the same loop is by using MessageChannel.\r\n/* istanbul ignore if */\r\nif (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\r\n  macroTimerFunc = () => {\r\n    setImmediate(flushCallbacks)\r\n  }\r\n} else if (typeof MessageChannel !== 'undefined' && (\r\n  isNative(MessageChannel) ||\r\n  // PhantomJS\r\n  MessageChannel.toString() === '[object MessageChannelConstructor]'\r\n)) {\r\n  const channel = new MessageChannel()\r\n  const port = channel.port2\r\n  channel.port1.onmessage = flushCallbacks\r\n  macroTimerFunc = () => {\r\n    port.postMessage(1)\r\n  }\r\n} else {\r\n  /* istanbul ignore next */\r\n  macroTimerFunc = () => {\r\n    setTimeout(flushCallbacks, 0)\r\n  }\r\n}\r\n\r\n// Determine MicroTask defer implementation.\r\n/* istanbul ignore next, $flow-disable-line */\r\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\r\n  const p = Promise.resolve()\r\n  microTimerFunc = () => {\r\n    p.then(flushCallbacks)\r\n    // in problematic UIWebViews, Promise.then doesn't completely break, but\r\n    // it can get stuck in a weird state where callbacks are pushed into the\r\n    // microtask queue but the queue isn't being flushed, until the browser\r\n    // needs to do some other work, e.g. handle a timer. Therefore we can\r\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\r\n    if (isIOS) setTimeout(noop)\r\n  }\r\n} else {\r\n  // fallback to macro\r\n  microTimerFunc = macroTimerFunc\r\n}\r\n\r\n/**\r\n * Wrap a function so that if any code inside triggers state change,\r\n * the changes are queued using a Task instead of a MicroTask.\r\n */\r\nexport function withMacroTask (fn: Function): Function {\r\n  return fn._withTask || (fn._withTask = function () {\r\n    useMacroTask = true\r\n    const res = fn.apply(null, arguments)\r\n    useMacroTask = false\r\n    return res\r\n  })\r\n}\r\n\r\nexport function nextTick (cb?: Function, ctx?: Object) {\r\n  let _resolve\r\n  callbacks.push(() => {\r\n    if (cb) {\r\n      try {\r\n        cb.call(ctx)\r\n      } catch (e) {\r\n        handleError(e, ctx, 'nextTick')\r\n      }\r\n    } else if (_resolve) {\r\n      _resolve(ctx)\r\n    }\r\n  })\r\n  if (!pending) {\r\n    pending = true\r\n    if (useMacroTask) {\r\n      macroTimerFunc()\r\n    } else {\r\n      microTimerFunc()\r\n    }\r\n  }\r\n  // $flow-disable-line\r\n  if (!cb && typeof Promise !== 'undefined') {\r\n    return new Promise(resolve => {\r\n      _resolve = resolve\r\n    })\r\n  }\r\n}\r\n\r\n```\r\næˆ‘ä»¬åœ¨æœ‰ä¹‹å‰çš„çŸ¥è¯†èƒŒæ™¯ï¼Œå†ç†è§£ nextTick çš„å®žçŽ°å°±ä¸éš¾äº†ï¼Œè¿™é‡Œæœ‰ä¸€æ®µå¾ˆå…³é”®çš„æ³¨é‡Šï¼šåœ¨ Vue 2.4 ä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒnextTick å‡ ä¹Žéƒ½æ˜¯åŸºäºŽ micro task å®žçŽ°çš„ï¼Œä½†ç”±äºŽ  micro task çš„æ‰§è¡Œä¼˜å…ˆçº§éžå¸¸é«˜ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å®ƒç”šè‡³è¦æ¯”äº‹ä»¶å†’æ³¡è¿˜è¦å¿«ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›è¯¡å¼‚çš„é—®é¢˜ï¼Œå¦‚ issue [#4521](https://github.com/vuejs/vue/issues/4521)ã€[#6690](https://github.com/vuejs/vue/issues/6690)ã€[#6566](https://github.com/vuejs/vue/issues/6566)ï¼›ä½†æ˜¯å¦‚æžœå…¨éƒ¨éƒ½æ”¹æˆ macro taskï¼Œå¯¹ä¸€äº›æœ‰é‡ç»˜å’ŒåŠ¨ç”»çš„åœºæ™¯ä¹Ÿä¼šæœ‰æ€§èƒ½å½±å“ï¼Œå¦‚ issue [#6813](https://github.com/vuejs/vue/issues/6813)ã€‚æ‰€ä»¥æœ€ç»ˆ nextTick é‡‡å–çš„ç­–ç•¥æ˜¯é»˜è®¤èµ° micro taskï¼Œå¯¹äºŽä¸€äº› DOM äº¤äº’äº‹ä»¶ï¼Œå¦‚ v-on ç»‘å®šçš„äº‹ä»¶å›žè°ƒå‡½æ•°çš„å¤„ç†ï¼Œä¼šå¼ºåˆ¶èµ° macro taskã€‚\r\n\r\nè¿™ä¸ªå¼ºåˆ¶æ˜¯æ€Žä¹ˆåšçš„å‘¢ï¼ŒåŽŸæ¥åœ¨ Vue.js åœ¨ç»‘å®š DOM äº‹ä»¶çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šç»™å›žè°ƒçš„ `handler` å‡½æ•°è°ƒç”¨ `withMacroTask` æ–¹æ³•åšä¸€å±‚åŒ…è£…ï¼Œå®ƒä¿è¯æ•´ä¸ªå›žè°ƒå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æ•°æ®çŠ¶æ€çš„æ”¹å˜ï¼Œè¿™äº›æ”¹å˜éƒ½ä¼šè¢«æŽ¨åˆ° macro task ä¸­ã€‚\r\n\r\nå¯¹äºŽ macro task çš„æ‰§è¡Œï¼ŒVue.js ä¼˜å…ˆæ£€æµ‹æ˜¯å¦æ”¯æŒåŽŸç”Ÿ `setImmediate`ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜ç‰ˆæœ¬ IE å’Œ Edge æ‰æ”¯æŒçš„ç‰¹æ€§ï¼Œä¸æ”¯æŒçš„è¯å†åŽ»æ£€æµ‹æ˜¯å¦æ”¯æŒåŽŸç”Ÿçš„ `MessageChannel`ï¼Œå¦‚æžœä¹Ÿä¸æ”¯æŒçš„è¯å°±ä¼šé™çº§ä¸º `setTimeout 0`ã€‚\r\n\r\n## nextTick å¯¹ audio æ’­æ”¾çš„å½±å“\r\n\r\nå›žåˆ°æˆ‘ä»¬çš„é—®é¢˜ï¼ŒiOS å¾®ä¿¡æµè§ˆå™¨ä¸èƒ½æ’­æ”¾æ­Œæ›²å’Œ nextTick æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå…ˆæ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ­Œæ›²æ’­æ”¾è¿™ä¸ªåŠŸèƒ½çš„å®žçŽ°æ–¹æ³•ã€‚\r\n\r\næˆ‘ä»¬çš„ä»£ç ä¼šæœ‰ä¸€ä¸ªæ’­æ”¾å™¨ç»„ä»¶ player.vueï¼Œåœ¨è¿™ä¸ªç»„ä»¶ä¸­æˆ‘ä»¬ä¼šæŒæœ‰ä¸€ä¸ª html5 çš„ audio æ ‡ç­¾ã€‚ç”±äºŽå¯è°ƒç”¨æ’­æ”¾çš„åœ°æ–¹å¾ˆå¤šï¼Œæ¯”å¦‚åœ¨æ­Œæ›²åˆ—è¡¨ç»„ä»¶ã€æ¦œå•ç»„ä»¶ã€æœç´¢ç»“æžœç»„ä»¶ç­‰ç­‰ï¼Œå› æ­¤æˆ‘ä»¬ç”¨ vuex å¯¹æ’­æ”¾ç›¸å…³çš„æ•°æ®è¿›è¡Œç®¡ç†ã€‚æˆ‘ä»¬æŠŠæ­£åœ¨æ’­æ”¾çš„åˆ—è¡¨ `playlist` å’Œå½“å‰æ’­æ”¾ç´¢å¼• `currentIndex` ç”¨ state ç»´æŠ¤ï¼Œå½“å‰æ’­æ”¾çš„æ­Œæ›² `currentSong` é€šè¿‡å®ƒä»¬è®¡ç®—è€Œæ¥ï¼š\r\n\r\n``` js\r\n// state.js\r\nconst state = {\r\n  playlist: [],\r\n  currentIndex:0\r\n}\r\n// getters.js\r\nexport const currentSong = (state) => {\r\n  return state.playlist[state.currentIndex] || {}\r\n}\r\n```\r\nç„¶åŽæˆ‘ä»¬åœ¨ player.vue ç»„ä»¶é‡Œ watch `currentSong` çš„å˜åŒ–åŽ»æ’­æ”¾æ­Œæ›²ï¼š\r\n\r\n``` js\r\n// player.vue\r\nwatch : {\r\n   currentSong(newSong,oldSong) {\r\n      if (!newSong.id || !newSong.url || newSong.id === oldSong.id) {\r\n          return\r\n       }\r\n       this.$refs.audio.src = newSong.url\r\n       this.$refs.audio.play()\r\n   }\r\n}\r\n```\r\n\r\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­æäº¤å¯¹ `playlist` å’Œ `currentIndex` çš„ä¿®æ”¹æ¥è¾¾åˆ°æ’­æ”¾ä¸åŒæ­Œæ›²çš„ç›®çš„ã€‚é‚£ä¹ˆè¿™ä¹ˆå†™å’Œ nextTick æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ\r\n\r\nå› ä¸ºåœ¨ Vue.js ä¸­ï¼Œwatcher çš„å›žè°ƒå‡½æ•°æ‰§è¡Œé»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼Œå½“æˆ‘ä»¬æäº¤å¯¹ `playlist` æˆ–è€… `currenIndex` çš„ä¿®æ”¹ï¼Œéƒ½ä¼šè§¦å‘ `currentSong` çš„å˜åŒ–ï¼Œä½†æ˜¯ç”±äºŽæ˜¯å¼‚æ­¥ï¼Œå¹¶ä¸ä¼šç«‹åˆ»æ‰§è¡Œ watcher çš„å›žè°ƒå‡½æ•°ï¼Œè€Œä¼šåœ¨ nextTick åŽæ‰§è¡Œã€‚æ‰€ä»¥å½“æˆ‘ä»¬ç‚¹å‡»æ­Œæ›²åˆ—è¡¨ä¸­çš„æ­Œæ›²åŽï¼Œåœ¨ click çš„äº‹ä»¶å›žè°ƒå‡½æ•°ä¸­ä¼šæäº¤å¯¹ `playlist` å’Œ `currentIndex` çš„ä¿®æ”¹ï¼Œ ç»è¿‡ä¸€ç³»åˆ—åŒæ­¥çš„é€»è¾‘æ‰§è¡Œï¼Œæœ€ç»ˆæ˜¯åœ¨ nextTick åŽæ‰ä¼šæ‰§è¡Œ wathcer çš„å›žè°ƒï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ audio çš„ playã€‚\r\n\r\næ‰€ä»¥æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ç”¨æˆ·ç‚¹å‡»åˆ° audio çš„ play å¹¶ä¸æ˜¯åœ¨ä¸€ä¸ª tick ä¸­å®Œæˆï¼Œå¹¶ä¸”å‰é¢æåˆ° Vue.js ä¸­å¯¹ v-on ç»‘å®šäº‹ä»¶æ‰§è¡Œçš„ nextTick è¿‡ç¨‹ä¼šå¼ºåˆ¶ä½¿ç”¨ macro taskã€‚é‚£ä¹ˆåˆ°åº•æ˜¯ä¸æ˜¯ç”±äºŽ nextTick å½±å“äº† audio åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨ä¸­çš„æ’­æ”¾å‘¢ï¼Œ\r\næˆ‘ä»¬å°±æ¥æŠŠåŒ–ç¹ä¸ºç®€ï¼Œå†™ä¸€ä¸ªç®€å• demo æ¥éªŒè¯è¿™ä¸ªé—®é¢˜ï¼Œç”¨çš„ Vue.js ç‰ˆæœ¬æ˜¯ 2.5+ çš„ã€‚\r\n\r\n```\r\n<template>\r\n\t<div id=\"app\">\r\n\t\t<audio ref=\"audio\"></audio>\r\n\t    <button @click=\"changeUrl\">click me</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\tconst musicList = [\r\n    'http://ws.stream.qqmusic.qq.com/108756223.m4a?fromtag=46',\r\n    'http://ws.stream.qqmusic.qq.com/101787871.m4a?fromtag=46',\r\n    'http://ws.stream.qqmusic.qq.com/718475.m4a?fromtag=46'\r\n  ]\r\n\r\n  export default {\r\n    name: 'app',\r\n    data() {\r\n      return {\r\n        index: 0,\r\n        url: ''\r\n      }\r\n    },\r\n    methods: {\r\n      changeUrl() {\r\n        this.index = (this.index + 1) % musicList.length\r\n        this.url = musicList[this.index]\r\n      }\r\n    },\r\n    watch: {\r\n      url(newUrl) {\r\n        this.$refs.audio.src = newUrl\r\n        this.$refs.audio.play()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n```\r\nè¿™æ®µä»£ç çš„é€»è¾‘éžå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä¼šæ·»åŠ ä¸€ä¸ª watcher ç›‘å¬ `url` å˜åŒ–ï¼Œå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ `changeUrl` æ–¹æ³•ï¼Œä¿®æ”¹ `url`ï¼Œç„¶åŽ watcher çš„å›žè°ƒå‡½æ•°æ‰§è¡Œï¼Œå¹¶è°ƒç”¨ audio çš„ play æ–¹æ³•ã€‚è¿™æ®µä»£ç åœ¨ PC æµè§ˆå™¨æ˜¯å¯ä»¥æ­£å¸¸æ’­æ”¾æ­Œæ›²çš„ï¼Œä½†æ˜¯åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨é‡Œå´ä¸èƒ½æ’­æ”¾ï¼Œè¿™å°±è¯å®žäº†æˆ‘ä»¬ä¹‹å‰çš„çŒœæƒ³â€”â€”åœ¨ç”¨æˆ·ç‚¹å‡»äº‹ä»¶çš„å›žè°ƒå‡½æ•°åˆ° audio çš„æ’­æ”¾å¦‚æžœç»åŽ†äº† nextTick åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨ä¸‹ä¸èƒ½æ’­æ”¾ã€‚\r\n\r\n## macro task çš„é”…ï¼Ÿ\r\n\r\næœ‰äº›åŒå­¦å¯èƒ½ä¼šè®¤ä¸ºï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®åˆ°æ’­æ”¾çš„è¿‡ç¨‹åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨æˆ–è€…æ˜¯ iOS safari æµè§ˆå™¨åº”è¯¥éœ€è¦åœ¨åŒä¸€ä¸ª tick æ‰èƒ½æ‰§è¡Œï¼ŒæžœçœŸéœ€è¦è¿™æ ·å—ï¼Ÿæˆ‘ä»¬æŠŠä¸Šè¿°ä»£ç åšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼š\r\n\r\n``` js\r\nchangeUrl() {\r\n  this.index = (this.index + 1) % musicList.length\r\n  this.url = musicList[this.index]\r\n  \r\n  setTimeout(()=>{\r\n    this.$refs.audio.src = this.url\r\n    this.$refs.audio.play()\r\n  }, 0)\r\n}\r\n```\r\næˆ‘ä»¬çŽ°åœ¨ä¸åˆ©ç”¨ Vue.js çš„ nextTick äº†ï¼Œç›´æŽ¥æ¥æ¨¡æ‹Ÿ nextTick çš„è¿‡ç¨‹ï¼Œå‘çŽ°ä½¿ç”¨ `setTimeout 0` æ˜¯å¯ä»¥åœ¨ iOS å¾®ä¿¡æµè§ˆå™¨å™¨ã€åŒ…æ‹¬ iOS safari ä¸‹æ’­æ”¾çš„ï¼Œç„¶è€Œå®žé™…ä¸Šæˆ‘ä»¬åªè¦åœ¨ 1000ms å†…çš„å»¶æ—¶æ—¶é—´æ’­æ”¾éƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è¶…è¿‡ 1000msï¼Œæ¯”å¦‚ `setTimeout 1001` åˆä¸èƒ½æ’­æ”¾äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è¯•è¯•ï¼Œè¿™ä¸ªçŽ°è±¡çš„ç†è®ºä¾æ®æˆ‘è¿˜æ²¡æ‰¾åˆ°ï¼Œå¦‚æžœçŸ¥é“ç†è®ºçš„åŒå­¦ä¹Ÿéžå¸¸æ¬¢è¿Žç•™è¨€å‘Šè¯‰æˆ‘ã€‚\r\n\r\næ‰€ä»¥é€šè¿‡ä¸Šè¿°çš„å®žéªŒï¼Œæˆ‘ä»¬å‘çŽ°å¹¶ä¸ä¸€å®šè¦åœ¨åŒä¸€ä¸ª tick æ‰§è¡Œæ’­æ”¾ï¼Œé‚£ä¹ˆä¸ºå•¥ Vue.js çš„ nextTick æ˜¯ä¸å¯ä»¥çš„å‘¢ï¼Ÿå›žåˆ° nextTick çš„ macro task çš„å®žçŽ°ï¼Œå®ƒä¼˜å…ˆ `setImmediate`ã€ç„¶åŽ `MessageChannel`ï¼Œæœ€åŽæ‰æ˜¯ `setTimeout 0`ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œé™¤äº†é«˜ç‰ˆæœ¬ IE å’Œ Edgeï¼Œ`setImmediate` æ˜¯æ²¡æœ‰åŽŸç”Ÿæ”¯æŒçš„ï¼Œé™¤éžä¸€äº›å·¥å…·å¯¹å®ƒè¿›è¡Œäº†é‡æ–°æ”¹å†™ã€‚è€Œ `MessageChannel` çš„æµè§ˆå™¨æ”¯æŒç¨‹åº¦è¿˜æ˜¯éžå¸¸é«˜çš„ï¼Œé‚£ä¹ˆæˆ‘æŠŠè¿™æ®µ demo çš„å¼‚æ­¥è¿‡ç¨‹æ”¹æˆç”¨ `MessageChannel` å®žçŽ°ã€‚\r\n\r\n``` js\r\nchangeUrl() {\r\n  this.index = (this.index + 1) % musicList.length\r\n  this.url = musicList[this.index]\r\n  \r\n  let channel = new MessageChannel()\r\n  let port = channel.port2\r\n  channel.port1.onmessage = () => {\r\n    this.$refs.audio.src = this.url\r\n    this.$refs.audio.play()\r\n  }\r\n  port.postMessage(1)\r\n}\r\n```\r\nè¿™æ®µä»£ç åœ¨ PC æµè§ˆå™¨æ˜¯å¯ä»¥æ’­æ”¾çš„ï¼Œè€Œåœ¨ iOS å¾®ä¿¡æµè§ˆå™¨åˆä¸èƒ½æ’­æ”¾äº†ï¼Œè°ƒè¯•åŽå‘çŽ° `this.$refs.audio.play()` çš„é€»è¾‘ä¹Ÿæ˜¯å¯ä»¥æ‰§è¡Œåˆ°çš„ï¼Œä½†æ˜¯æ­Œæ›²å¹¶ä¸èƒ½æ’­æ”¾ï¼Œåº”è¯¥æ˜¯æµè§ˆå™¨å¯¹ audio æ’­æ”¾åœ¨ä½¿ç”¨ MessageChannel åšå¼‚æ­¥çš„ä¸€ç§é™åˆ¶ã€‚\r\n\r\nå‰é¢æåˆ°å®žçŽ° macro task è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨ postMessageï¼Œå®ƒçš„æµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¹Ÿå¾ˆå¥½ï¼Œæˆ‘ä»¬æ¥æŠŠ demo æ”¹æˆåˆ©ç”¨å®ƒæ¥å®žçŽ°ã€‚\r\n\r\n``` js\r\nchangeUrl() {\r\n  this.index = (this.index + 1) % musicList.length\r\n  this.url = musicList[this.index]\r\n\r\n  addEventListener('message', () => {\r\n    this.$refs.audio.src = this.url\r\n    this.$refs.audio.play()\r\n  }, false);\r\n  postMessage(1, '*')\r\n}\r\n```\r\nè¿™æ®µä»£ç åœ¨ PC æµè§ˆå™¨å’Œ iOS å¾®ä¿¡æµè§ˆå™¨ä»¥åŠ iOS safari éƒ½å¯ä»¥æ’­æ”¾çš„ï¼Œè¯´æ˜Žå¹¶ä¸æ˜¯ macro task çš„é”…ï¼Œè€Œæ˜¯ MessageChannel çš„é”…ã€‚å…¶å®ž macro task è¿˜æœ‰å¾ˆå¤šå®žçŽ°æ–¹å¼ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ core-js ä¸­å¯¹äºŽ macro task çš„å‡ ç§[å®žçŽ°æ–¹å¼](https://github.com/zloirock/core-js/blob/master/modules/_task.js#L28-L80)ã€‚\r\n\r\n## å¦‚ä½•è§£å†³ï¼Ÿ\r\n\r\nçŽ°åœ¨æˆ‘ä»¬å®šä½åˆ°é—®é¢˜çš„æœ¬è´¨æ˜¯å› ä¸º Vue.js çš„ nextTick ä¸­ä¼˜å…ˆä½¿ç”¨äº† MessageChannelï¼Œå®ƒä¼šå½±å“ iOS å¾®ä¿¡æµè§ˆå™¨çš„æ’­æ”¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç”¨æœ€å°æˆæœ¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\r\n\r\n### Vue.js çš„ç‰ˆæœ¬é™çº§\r\n\r\nå¦‚æžœæ˜¯çœŸå®žè¿è¡Œåœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­çš„é¡¹ç›®ï¼Œæ¯«æ— ç–‘é—®è¿™è‚¯å®šæ˜¯ä¼˜å…ˆè§£å†³é—®é¢˜çš„é¦–é€‰ï¼Œå› ä¸ºç¡®å®žä¹Ÿæ˜¯å› ä¸º Vue.js çš„å‡çº§æ‰é€ æˆè¿™ä¸ª bug çš„ã€‚åœ¨æˆ‘ä»¬çš„å®žé™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯é”æ­»æŸä¸ª Vue.js çš„ç‰ˆæœ¬çš„ï¼Œé™¤éžæˆ‘ä»¬æƒ³ä½¿ç”¨æŸä¸ª Vue.js æ–°ç‰ˆçš„ feature æˆ–è€…æ˜¯å½“å‰ç‰ˆæœ¬é‡åˆ°äº†ä¸€ä¸ªä¸¥é‡ bug è€Œæ–°ç‰ˆå·²ç»ä¿®å¤çš„æƒ…å†µï¼Œæˆ‘ä»¬æ‰ä¼šè€ƒè™‘å‡çº§ Vue.jsï¼Œå¹¶ä¸”æ¯æ¬¡å‡çº§éƒ½éœ€è¦ç»è¿‡å®Œæ•´çš„åŠŸèƒ½æµ‹è¯•ã€‚\r\n\r\nä¸ºä½•æŠŠ Vue.js é™çº§åˆ° 2.4+ å°±æ²¡é—®é¢˜å‘¢ï¼Œå› ä¸º Vue.js 2.5 ä¹‹å‰çš„ nextTick éƒ½æ˜¯ä¼˜å…ˆä½¿ç”¨ microtask çš„ï¼Œé‚£ä¹ˆ audio æ’­æ”¾çš„æ—¶æœºå®žé™…ä¸Šè¿˜æ˜¯åœ¨å½“å‰ tickï¼Œæ‰€ä»¥å½“ç„¶ä¸ä¼šæœ‰é—®é¢˜ã€‚\r\n\r\nè¯´åˆ°ç‰ˆæœ¬é—®é¢˜ï¼Œå…¶å®žè¿™ä¹Ÿæ˜¯ Vue.js çš„ä¸€ç‚¹ç‘•ç–µå§ï¼Œå‡ç‰ˆæœ¬çš„æ—¶å€™æœ‰æ—¶å€™æ”¹åŠ¨è¿‡äºŽæ¿€è¿›äº†ï¼Œæ¯”å¦‚è¿™æ¬¡å…³äºŽ nextTick çš„å‡çº§ï¼Œå®ƒå…¶å®žæ˜¯ Vue.js ä¸€ä¸ªéžå¸¸æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒåªæœ‰å•å…ƒæµ‹è¯•ï¼Œå¹¶æ²¡æœ‰å¤§é‡çš„åŠŸèƒ½æµ‹è¯• case è¦†ç›–ï¼Œä¹Ÿåªèƒ½é€šè¿‡ç¤¾åŒºå¸®åŠ©åé¦ˆé—®é¢˜åšæ”¹è¿›äº†ã€‚\r\n\r\n### åŒæ­¥çš„ watcher\r\n\r\nVue.js çš„ watcher é»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼Œå½“ç„¶å®ƒä¹Ÿæä¾›äº†åŒæ­¥çš„ watcherï¼Œè¿™æ · watcher çš„å›žè°ƒå‡½æ•°æ‰§è¡Œå°±ä¸éœ€è¦ç»åŽ†äº† nextTickï¼Œè¿™æ ·ç¡®å®žå¯ä»¥ä¿®å¤è¿™ä¸ª bugï¼Œä½†åˆä¼šå¼•èµ·åˆ«çš„é—®é¢˜ã€‚å› ä¸ºæˆ‘ä»¬çš„éŸ³ä¹æ’­æ”¾å™¨æœ‰ä¸€ä¸ª feature æ˜¯å¯ä»¥åœ¨æ’­æ”¾çš„è¿‡ç¨‹ä¸­åˆ‡æ¢æ’­æ”¾æ¨¡å¼ï¼Œæˆ‘ä»¬æ”¯æŒé¡ºåºæ’­æ”¾ã€éšæœºæ’­æ”¾ã€å•æ›²å¾ªçŽ¯ä¸‰ç§æ’­æ”¾æ¨¡å¼ï¼Œå½“æˆ‘ä»¬ä»Žé¡ºåºæ’­æ”¾åˆ‡åˆ°éšæœºæ’­æ”¾æ¨¡å¼çš„æ—¶å€™ï¼Œå®žé™…ä¸Šæ˜¯å¯¹æ’­æ”¾åˆ—è¡¨ `playlist` åšäº†ä¿®æ”¹ï¼ŒåŒæ—¶ä¹Ÿä¿®æ”¹äº† `currentIndex`ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æˆ‘ä»¬åœ¨åˆ‡æ¢æ¨¡å¼çš„æ—¶å€™å¹¶ä¸ä¼šä¿®æ”¹å½“å‰æ­Œæ›²ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç”±äºŽ `currentSong` æ˜¯ç”± `playlist` å’Œ `currentIndex` è®¡ç®—è€Œæ¥çš„ï¼Œå¯¹å®ƒä»¬ä»»ä½•ä¸€ä¸ªä¿®æ”¹ï¼Œéƒ½ä¼šè§¦å‘ `currentSong` çš„å˜åŒ–ï¼Œç”±äºŽæˆ‘ä»¬çŽ°åœ¨æ”¹æˆåŒæ­¥çš„ watcherï¼Œé‚£ä¹ˆ currentSong çš„å›žè°ƒä¼šæ‰§è¡Œ 2 æ¬¡ï¼Œè¿™æ ·ç¬¬ä¸€æ¬¡çš„ä¿®æ”¹å¯¼è‡´è®¡ç®—å‡ºæ¥çš„æ­Œæ›²å°±å˜æˆäº†å¦å¤–ä¸€é¦–äº†ï¼Œè¿™ä¸ªæ˜¾ç„¶ä¹Ÿä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ã€‚æ‰€ä»¥åŒæ­¥ watcher ä¹Ÿæ˜¯ä¸å¯è¡Œçš„ã€‚\r\n\r\n### å…¶å®ƒæ–¹å¼\r\n\r\nå…¶å®žè¿˜æœ‰å¾ˆå¤šæ–¹å¼éƒ½èƒ½â€œä¿®å¤â€è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸é€šè¿‡ watcherï¼Œæ”¹æˆæ¯æ¬¡ç‚¹å‡»é€šè¿‡ event bus åŽ»é€šçŸ¥ï¼›æ¯”å¦‚ä»ç„¶ä½¿ç”¨åŒæ­¥ watcherï¼Œä½† currentSong ä¸é€šè¿‡è®¡ç®—ï¼Œç›´æŽ¥ç”¨ state ä¿ç•™ï¼›æ¯”å¦‚æ¯æ¬¡ç‚¹å‡»äº‹ä»¶ä¸é€šè¿‡  v-on ç»‘å®šï¼Œæˆ‘ä»¬ç›´æŽ¥åœ¨ mounted çš„é’©å­å‡½æ•°é‡Œåˆ©ç”¨åŽŸç”Ÿçš„ addEventListener åŽ»ç»‘å®š click äº‹ä»¶ã€‚\r\n\r\nå½“ç„¶ï¼Œä¸Šè¿°å‡ ä¸ªæ–¹å¼éƒ½æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸æŽ¨èè¿™ä¹ˆåŽ»æ”¹ï¼Œå› ä¸ºè¿™æ ·å¯¹ä¸šåŠ¡ä»£ç çš„æ”¹åŠ¨å®žåœ¨å¤ªå¤§äº†ï¼Œå¦‚æžœæˆ‘ä»¬æœ¬èº«çš„å†™æ³•å¦‚æžœæ˜¯åˆç†çš„ï¼Œå´è¦å¼ºè¡Œæ”¹æˆè¿™äº›æ–¹å¼ï¼Œå°±å¥½åƒæ˜¯ï¼šæˆ‘çŸ¥é“äº†æ¡†æž¶çš„æŸä¸€ä¸ªå‘ï¼Œæˆ‘ç”¨ä¸€äº›å¥‡æŠ€æ·«å·§ç»•è¿‡äº†è¿™äº›å‘ï¼Œè¿™æ ·åšä¹Ÿæ˜¯ä¸åˆç†çš„ã€‚\r\n\r\næ¡†æž¶äº§ç”Ÿçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼šåˆ¶å®šä¸€ç§å‹å¥½çš„å¼€å‘è§„èŒƒï¼Œæå‡å¼€å‘æ•ˆçŽ‡ï¼Œè®©å¼€å‘äººå‘˜æ›´åŠ ä¸“æ³¨ä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚æ‰€ä»¥ä¼˜ç§€çš„æ¡†æž¶ä¸åº”è¯¥é™åˆ¶å¼€å‘äººå‘˜å¯¹äºŽä¸€äº›åœºæ™¯ä¸‹åŠŸèƒ½çš„å®žçŽ°æ–¹å¼ï¼Œä»…ä»…æ˜¯å› ä¸ºè¿™ç§å®žçŽ°æ–¹å¼è™½ç„¶æœ¬èº«åˆç†ä½†å¯èƒ½ä¼šè§¦å‘æ¡†æž¶æŸä¸ªå‘ã€‚\r\n\r\n### ä¸´æ—¶çš„ hack æ–¹æ³•\r\n\r\nç”±äºŽä¸æƒ³åŠ¨ä¸šåŠ¡ä»£ç ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³äº†ä¸€äº›æ¯”è¾ƒ hack çš„åŠžæ³•ï¼Œå› ä¸ºæ˜¯ MessageChannel çš„é”…ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨ Vue.js çš„åˆå§‹åŒ–å‰ï¼Œå¼•å…¥äº†ä¸€æ®µ hack.js\r\n\r\n``` js \r\n// hack for global nextTick\r\nfunction noop() {\r\n}\r\n\r\nwindow.MessageChannel = noop\r\nwindow.setImmediate = noop\r\n```\r\nè¿™æ ·çš„è¯ Vue.js åœ¨åˆå§‹åŒ– nextTick çš„æ—¶å€™ï¼Œå‘çŽ°å…¨å±€çš„ `setImmediate` å’Œ `MessageChannel` è¢«æ”¹å†™äº†ï¼Œå°±è‡ªåŠ¨é™çº§ä¸º `setTimeout 0` çš„å®žçŽ°ï¼Œè¿™æ ·å°±å¯ä»¥è§„é¿æŽ‰æˆ‘ä»¬çš„é—®é¢˜äº†ã€‚å½“ç„¶ï¼Œè¿™ç§ hack æ–¹å¼ç®—æ˜¯æ²¡æœ‰åŠžæ³•çš„åŠžæ³•äº†ï¼Œæˆ‘å¹¶ä¸æŽ¨èã€‚\r\n\r\n### ç»™ Vue.js æ issue\r\n\r\næ‰€ä»¥è¿™ç§æƒ…å†µæœ€åˆç†çš„å°±æ˜¯ç»™ Vue.js æ issueï¼Œæˆ‘ç¡®å®žä¹Ÿæ˜¯è¿™ä¹ˆåšäº†ï¼ŒåŽ» Github ä¸Šæäº†ä¸€ä¸ª [issue](https://github.com/vuejs/vue/issues/7109)ï¼Œç¬¬ä¸€æ¬¡ç»™ Vue.js æ issueï¼Œå‘çŽ° Vue å®˜æ–¹è¿™å—åšçš„è¿˜æ˜¯è›®äººæ€§åŒ–çš„ï¼Œç›´æŽ¥ç»™ä¸€ä¸ªæ issue çš„[é“¾æŽ¥](https://new-issue.vuejs.org/)ï¼Œé€šè¿‡å¡«å†™ä¸€äº›è¡¨å•æ¥æè¿°è¿™ä¸ª issueï¼Œå¹¶ä¸”æŽ¨èäº†ä¸€ä¸ªå¾ˆå¥½çš„å¤çŽ°é—®é¢˜çš„å·¥å…· [CodeSandbox](https://codesandbox.io/s/vue) ã€‚è¿™ä¸ª issue å½“å¤©å°±æ”¶åˆ°äº†å°¤å¤§çš„å›žå¤ï¼Œä»–è¡¨ç¤º Vue.js çš„ nextTick ç¡®å®žä¼šé€ æˆè¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘åº”è¯¥åœ¨åŒä¸€ä¸ª tick å®Œæˆæ­Œæ›²çš„æ’­æ”¾ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨ watcherï¼ŒæŽ¥ç€å°± close äº† issueã€‚å› ä¸ºæˆ‘æ issue ä¸ºäº†æ›´ç›´è§‚çš„æ¼”ç¤ºæ ¸å¿ƒé—®é¢˜ï¼Œç”¨çš„å°±æ˜¯ä¸Šé¢æåˆ°çš„éžå¸¸ç®€å•çš„ demoï¼Œæ‰€ä»¥åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œä»–è¯´çš„ä¹Ÿæ²¡é—®é¢˜ï¼Œç¡®å®žæ²¡æœ‰å¿…è¦ä½¿ç”¨ watcherï¼ŒäºŽæ˜¯æˆ‘èµ¶ç´§åˆå›žå¤äº† issueï¼Œè¯´æ˜Žäº†ä¸€ä¸‹æˆ‘çš„çœŸå®žä½¿ç”¨åœºæ™¯ï¼Œå¹¶è¡¨æ˜Žå¸Œæœ›ä»Ž Vue.js å†…æ ¸åŽ»ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚å¯æƒœçš„æ˜¯ï¼Œå°¤å¤§ç›®å‰ä¹Ÿå¹¶æ²¡æœ‰å†å›žå¤è¿™ä¸ª issueã€‚\r\n\r\n## æ€»ç»“\r\n\r\né€šè¿‡è®°å½•æˆ‘è¿™ä¸€æ¬¡å‘çŽ°é—®é¢˜â€”â€”å®šä½é—®é¢˜â€”â€”è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼Œæˆ‘æƒ³ç»™åŒå­¦å¸¦æ¥çš„æ€è€ƒä¸ä»…ä»…æ˜¯è¿™ä¸ªé—®é¢˜æœ¬èº«ï¼Œè¿˜æœ‰æˆ‘ä»¬é‡åˆ°é—®é¢˜åŽçš„ä¸€äº›æ€åº¦ã€‚å‘çŽ°é—®é¢˜å¹¶ä¸éš¾ï¼Œå¾ˆå¤šäººåœ¨å†™ä»£ç ä¸­éƒ½ä¼šå‘çŽ°é—®é¢˜ï¼Œé‚£ä¹ˆå‘çŽ°é—®é¢˜åŽä½ çš„ç¬¬ä¸€ååº”æ˜¯å°è¯•è‡ªå·±è§£å†³ï¼Œè¿˜æ˜¯åŽ»æ±‚åŠ©ï¼Œæˆ‘ç›¸ä¿¡å‰è€…è‚¯å®šæ›´å¥½ã€‚é‚£ä¹ˆåœ¨è§£å†³ä¹‹å‰éœ€è¦å®šä½é—®é¢˜ï¼Œè¿™é‡Œæˆ‘è¦æåˆ°ä¸€ä¸ªè¯ï¼Œå«â€œé¢å‘å·§åˆç¼–ç¨‹â€ï¼Œå¾ˆå¤šäººé‡åˆ°é—®é¢˜åŽä¼šä¸æ–­å°è¯•è¿™ç§åŠžæ³•ï¼Œå¾ˆå¯èƒ½æŸä¸ªåŠžæ³•å°±ä»Žè¡¨è±¡ä¸Šâ€œè§£å†³â€äº†è¿™ä¸ªé—®é¢˜ï¼Œå´ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¿™ç§è§£å†³é—®é¢˜çš„æ–¹å¼æ˜¯å¾ˆä¸é è°±çš„ï¼Œä½ å¯èƒ½å¹¶æ²¡æœ‰æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œåˆå¯èƒ½è§£å†³äº†è¿™ä¸ªé—®é¢˜å´åˆå¼•å‘å¦ä¸€ä¸ªé—®é¢˜ã€‚æ‰€ä»¥å®šä½é—®é¢˜çš„æœ¬è´¨å°±éžå¸¸å…³é”®äº†ï¼Œå…¶å®žè¿™æ˜¯ä¸€ä¸ªèƒ½åŠ›ï¼Œä¸€ä¸ªå¥½çš„å·¥ç¨‹å¸ˆä¸ä»…ä¼šå†™ä»£ç ï¼Œä¹Ÿè¦ä¼šæŸ¥é—®é¢˜ï¼Œèƒ½å¿«é€Ÿå®šä½åˆ°é—®é¢˜çš„æœ¬è´¨ï¼Œæ˜¯ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹å¸ˆçš„å¿…è¦æ¡ä»¶ï¼Œè¿™ä¸€ç‚¹ä¸å®¹æ˜“ï¼Œéœ€è¦å¹³æ—¶ä¸æ–­åœ°çš„ç§¯ç´¯ã€‚åœ¨å®šä½åˆ°é—®é¢˜çš„æœ¬è´¨åŽï¼Œå°±è¦è§£å†³é—®é¢˜äº†ï¼Œä¸€é“é¢˜å¾€å¾€æœ‰å¤šè§£ï¼Œä½†æ¯ç§è§£æ³•æ˜¯å¦åˆç†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦æ€è€ƒçš„è¿‡ç¨‹ï¼Œå¤šå’Œä¸€äº›æ¯”ä½ åŽ‰å®³çš„äººäº¤æµï¼Œå¤šç§¯æ”’ä¸€äº›è¿™æ–¹é¢çš„ç»éªŒï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªç§¯ç´¯çš„è¿‡ç¨‹ã€‚å¦‚æžœä»¥åŽä½ å†é‡åˆ°é—®é¢˜ï¼Œä¹Ÿç”¨è¿™æ ·çš„æ€åº¦åŽ»é¢å¯¹çš„é—®é¢˜ï¼Œé‚£ä¹ˆä½ ä¹Ÿä¼šå¾ˆå¿«çš„æˆé•¿ã€‚\r\n\r\nå¾ˆå¤šåŒå­¦å­¦ä¹ æˆ‘çš„éŸ³ä¹è¯¾ç¨‹åŽï¼Œä¼šé—®ï¼šâ€œé»„è€å¸ˆï¼Œä½ ä»€ä¹ˆæ—¶å€™å†å‡ºæ–°è§†é¢‘å‘€ï¼Ÿâ€ï¼Œå…¶å®žæˆ‘æƒ³è¯´è¿™é—¨è¯¾ç¨‹ä½ çœŸçš„å­¦å®Œäº†å—ï¼Ÿå› ä¸ºå®ƒçš„å®šä½æ˜¯ä¸€é—¨ Vue.js çš„è¿›é˜¶è¯¾ç¨‹ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºè¯¾ç¨‹çš„é¡¹ç›®æœ¬èº«æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”é¡¹ç›®ä¸­å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½å¯ä»¥åšå»¶ä¼¸çš„å­¦ä¹ ï¼Œå¦å¤–é¡¹ç›®éš¾å…ä¼šæœ‰ä¸€äº›å° bug å’Œä¸€äº›ç”±äºŽæŽ¥å£æ”¹åŠ¨å¼•å‘çš„åŠŸèƒ½ä¸å¯ç”¨çš„æƒ…å†µï¼Œé‡åˆ°è¿™äº›é—®é¢˜é™¤äº†ç»™æˆ‘æ issueï¼Œå°è¯•è‡ªå·±åŽ»è§£å†³ç„¶åŽç»™æˆ‘æ pull request çš„æ–¹å¼æ˜¯ä¸æ˜¯å¯¹è‡ªå·±çš„æå‡æ›´å¤§å‘¢ï¼Ÿæ‰€ä»¥è¿™é—¨è¯¾ç¨‹è¿˜æ˜¯å€¼å¾—å¤šåŽ»æŒ–æŽ˜çš„ï¼Œå¦‚æžœçœŸæ­£æ¦¨å¹²äº†è¿™é—¨è¯¾çš„ä»·å€¼å†æ¥é—®æˆ‘ä¹Ÿä¸è¿Ÿï¼Œå½“ç„¶æˆ‘ä¹Ÿä¼šç»™ä½ ä»¬å¸¦æ¥æ›´å¤šå¹²è´§çš„è¯¾ç¨‹ã€‚\r\n\r\næœ€åŽä¹Ÿæ¥å°å°å®‰åˆ©æˆ‘çš„è¿™é—¨ Vue.js è¿›é˜¶è¯¾ç¨‹å§ï¼ˆ[æ…•è¯¾ç½‘åœ°å€](http://coding.imooc.com/class/107.html)ï¼‰ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹è¿›åŽ»çœ‹çœ‹è¯¾ç¨‹ä»‹ç»ã€‚è¯¾ç¨‹çš„é¡¹ç›®æ˜¯æ‰˜ç®¡åœ¨æˆ‘çš„ Github ç§æœçš„ï¼Œå¹¶ä¸å¼€æºï¼Œæ‰€ä»¥å¤–é¢çš„ä¸€åˆ‡å’Œè¿™ä¸ªè¯¾ç¨‹ç›¸å…³çš„ä»£ç éƒ½æ˜¯ç›—ç‰ˆçš„ã€‚è¿™ä¸ªæºç æˆ‘æ˜¯ä¸€ç›´ç»´æŠ¤çš„ï¼ŒåŒ…æ‹¬æœ€è¿‘ Vue.js çš„è„šæ‰‹æž¶çš„å‡çº§ï¼Œä»¥åŠä¾èµ–æ–¹æŽ¥å£çš„ä¸€äº›æ”¹é€ é€ æˆçš„åŠŸèƒ½ä¸å¯ç”¨é—®é¢˜ï¼Œéƒ½å·²ç»å¾—åˆ°äº†è§£å†³ã€‚ç®€å•åœ°æˆªå‡ å¼ æˆªå›¾ï¼š\r\n\r\n![vue-music-issue](http://webapp.didistatic.com/static/webapp/shield/vue-music-issue.png)\r\n\r\nè¿™ä¸€å¼ æ˜¯å¯¹ issue çš„å¤„ç†ï¼Œæˆ‘ä»¬åœ¨è¯¾ç¨‹æŽ¨å‡ºæ¥åŽè§£å†³äº†å‡ åä¸ª issueï¼Œå¦‚æžœæœ‰åŒå­¦åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜å»ºè®®åŽ»ç¿»é˜… issue å¯»æ‰¾ç­”æ¡ˆã€‚æœ‰ä¸€äº›ç‰ˆæœ¬çš„å‡çº§çš„ issue æˆ‘ä¸ä¼šå…³ï¼Œä¸ºäº†è®©åŒå­¦ä»¬å¯ä»¥æ›´æ–¹ä¾¿çš„æ‰¾åˆ°ã€‚\r\n\r\n![vue-music-contribute](http://webapp.didistatic.com/static/webapp/shield/vue-music-contribute.jpg)\r\n\r\nè¿™ä¸€å¼ æ˜¯ä»£ç æäº¤è®°å½•ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†æˆ‘è¿˜æ˜¯æœ‰ä¸€äº›å¾ˆä¸é”™çš„åŒå­¦åœ¨ä¸€èµ·ç»´æŠ¤è¿™ä¸ªé¡¹ç›®ï¼Œè¿™å…¶ä¸­æœ‰ä¸€ä¸ªåŒå­¦å­¦ä¹ éžå¸¸ä¸»åŠ¨ï¼Œè‡ªé©±åŠ›å¾ˆå¼ºï¼Œå¸¸ä¸Žæˆ‘æŽ¢è®¨æŠ€æœ¯é—®é¢˜ï¼Œæœ€è¿‘ä»–ä¹ŸåŠ å…¥äº†æ»´æ»´ï¼Œåœ¨æˆ‘ä»¬éƒ¨é—¨åšäº†å¾ˆå¤šçš„äº§å‡ºã€‚\r\n\r\næ›´ç›´è§‚çš„æ„Ÿå—è¿™ä¸ªé¡¹ç›®ï¼Œå¯ä»¥æ‰«æä¸‹æ–¹çš„äºŒç»´ç ï¼Œä½“éªŒä¸€ä¸‹æŽ¥è¿‘åŽŸç”Ÿ App çš„æ„Ÿè§‰ï¼š\r\n\r\n![äºŒç»´ç ](http://qr.api.cli.im/qr?data=http%253A%252F%252Fustbhuangyi.com%252Fmusic&level=H&transparent=false&bgcolor=%23ffffff&forecolor=%23000000&blockpixel=12&marginblock=1&logourl=&size=280&kid=cliim&key=ab1f62311bfc4de5bc301283707c0328)\r\n\r\næˆ‘ä»¬æœ‰ä¸€ä¸ªå®˜æ–¹çš„è¯¾ç¨‹äº¤æµç¾¤ï¼Œå¦‚æžœè´­ä¹°äº†è¿™é—¨è¯¾ç¨‹ï¼Œæ¬¢è¿Žä¸Žå…¶å®ƒåŒå­¦ä¸€èµ·äº¤æµå­¦ä¹ ï¼Œä¹Ÿå¯ä»¥åŠ æˆ‘çš„ qq å’Œå¾®ä¿¡ï¼Œäº¤æµæŠ€æœ¯é—®é—®é¢˜éƒ½å¯ä»¥ï¼Œä¸è¿‡æˆ‘ä¸€èˆ¬ç™½å¤©å¾ˆå¿™ï¼Œæ™šä¸Šæ‰æœ‰æ—¶é—´ã€‚\r\n\r\nå½“ç„¶ï¼Œæƒ³å…³æ³¨æˆ‘çš„ä¸€äº›åŠ¨æ€ï¼Œä¹Ÿæ¬¢è¿Ž follow æˆ‘çš„ [Github](https://github.com/ustbhuangyi)ã€‚\r\n\r\nå¸Œæœ›åŒå­¦ä»¬ä¸€èµ·æ¥æ”¯æŒæ­£ç‰ˆï¼ŒæŠµåˆ¶ç›—ç‰ˆï¼Œæˆ‘ä¼šä¸ºå¤§å®¶å¸¦æ¥æ›´å¤šä¼˜è´¨çš„è¯¾ç¨‹ä»¥åŠå…¶å®ƒçš„ä¸€äº›å½¢å¼çš„æŠ€æœ¯æ–¹å‘çš„åˆ†äº«ã€‚\r\n\r\næœ¬æ–‡å‚è€ƒçš„ä¸€äº›å€¼å¾—å»¶ä¼¸å­¦ä¹ çš„æ–‡ç« ï¼š\r\n\r\n[JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop](http://www.ruanyifeng.com/blog/2014/10/event-loop.html)\r\n\r\n[Tasks, microtasks, queues and schedules](https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/)","reactions":{"url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24/reactions","total_count":15,"+1":15,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DDFE/DDFE-blog/issues/24/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"Jmingzi","id":9743418,"node_id":"MDQ6VXNlcjk3NDM0MTg=","avatar_url":"https://avatars.githubusercontent.com/u/9743418?v=4","gravatar_id":"","url":"https://api.github.com/users/Jmingzi","html_url":"https://github.com/Jmingzi","followers_url":"https://api.github.com/users/Jmingzi/followers","following_url":"https://api.github.com/users/Jmingzi/following{/other_user}","gists_url":"https://api.github.com/users/Jmingzi/gists{/gist_id}","starred_url":"https://api.github.com/users/Jmingzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jmingzi/subscriptions","organizations_url":"https://api.github.com/users/Jmingzi/orgs","repos_url":"https://api.github.com/users/Jmingzi/repos","events_url":"https://api.github.com/users/Jmingzi/events{/privacy}","received_events_url":"https://api.github.com/users/Jmingzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-02T09:51:55Z","updated_at":"2018-04-02T09:51:55Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Jmingzi/blog/issues/27","repository_url":"https://api.github.com/repos/Jmingzi/blog","labels_url":"https://api.github.com/repos/Jmingzi/blog/issues/27/labels{/name}","comments_url":"https://api.github.com/repos/Jmingzi/blog/issues/27/comments","events_url":"https://api.github.com/repos/Jmingzi/blog/issues/27/events","html_url":"https://github.com/Jmingzi/blog/issues/27","id":310436259,"node_id":"MDU6SXNzdWUzMTA0MzYyNTk=","number":27,"title":"Vue nextTickçš„å®žçŽ°","user":{"login":"Jmingzi","id":9743418,"node_id":"MDQ6VXNlcjk3NDM0MTg=","avatar_url":"https://avatars.githubusercontent.com/u/9743418?v=4","gravatar_id":"","url":"https://api.github.com/users/Jmingzi","html_url":"https://github.com/Jmingzi","followers_url":"https://api.github.com/users/Jmingzi/followers","following_url":"https://api.github.com/users/Jmingzi/following{/other_user}","gists_url":"https://api.github.com/users/Jmingzi/gists{/gist_id}","starred_url":"https://api.github.com/users/Jmingzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jmingzi/subscriptions","organizations_url":"https://api.github.com/users/Jmingzi/orgs","repos_url":"https://api.github.com/users/Jmingzi/repos","events_url":"https://api.github.com/users/Jmingzi/events{/privacy}","received_events_url":"https://api.github.com/users/Jmingzi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-04-02T09:11:41Z","updated_at":"2018-04-03T02:30:21Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":77671748,"node_id":"MDEwOlJlcG9zaXRvcnk3NzY3MTc0OA==","name":"blog","full_name":"Jmingzi/blog","private":false,"owner":{"login":"Jmingzi","id":9743418,"node_id":"MDQ6VXNlcjk3NDM0MTg=","avatar_url":"https://avatars.githubusercontent.com/u/9743418?v=4","gravatar_id":"","url":"https://api.github.com/users/Jmingzi","html_url":"https://github.com/Jmingzi","followers_url":"https://api.github.com/users/Jmingzi/followers","following_url":"https://api.github.com/users/Jmingzi/following{/other_user}","gists_url":"https://api.github.com/users/Jmingzi/gists{/gist_id}","starred_url":"https://api.github.com/users/Jmingzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jmingzi/subscriptions","organizations_url":"https://api.github.com/users/Jmingzi/orgs","repos_url":"https://api.github.com/users/Jmingzi/repos","events_url":"https://api.github.com/users/Jmingzi/events{/privacy}","received_events_url":"https://api.github.com/users/Jmingzi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Jmingzi/blog","description":"æ¸©æ•…è€ŒçŸ¥æ–°","fork":false,"url":"https://api.github.com/repos/Jmingzi/blog","forks_url":"https://api.github.com/repos/Jmingzi/blog/forks","keys_url":"https://api.github.com/repos/Jmingzi/blog/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Jmingzi/blog/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Jmingzi/blog/teams","hooks_url":"https://api.github.com/repos/Jmingzi/blog/hooks","issue_events_url":"https://api.github.com/repos/Jmingzi/blog/issues/events{/number}","events_url":"https://api.github.com/repos/Jmingzi/blog/events","assignees_url":"https://api.github.com/repos/Jmingzi/blog/assignees{/user}","branches_url":"https://api.github.com/repos/Jmingzi/blog/branches{/branch}","tags_url":"https://api.github.com/repos/Jmingzi/blog/tags","blobs_url":"https://api.github.com/repos/Jmingzi/blog/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Jmingzi/blog/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Jmingzi/blog/git/refs{/sha}","trees_url":"https://api.github.com/repos/Jmingzi/blog/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Jmingzi/blog/statuses/{sha}","languages_url":"https://api.github.com/repos/Jmingzi/blog/languages","stargazers_url":"https://api.github.com/repos/Jmingzi/blog/stargazers","contributors_url":"https://api.github.com/repos/Jmingzi/blog/contributors","subscribers_url":"https://api.github.com/repos/Jmingzi/blog/subscribers","subscription_url":"https://api.github.com/repos/Jmingzi/blog/subscription","commits_url":"https://api.github.com/repos/Jmingzi/blog/commits{/sha}","git_commits_url":"https://api.github.com/repos/Jmingzi/blog/git/commits{/sha}","comments_url":"https://api.github.com/repos/Jmingzi/blog/comments{/number}","issue_comment_url":"https://api.github.com/repos/Jmingzi/blog/issues/comments{/number}","contents_url":"https://api.github.com/repos/Jmingzi/blog/contents/{+path}","compare_url":"https://api.github.com/repos/Jmingzi/blog/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Jmingzi/blog/merges","archive_url":"https://api.github.com/repos/Jmingzi/blog/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Jmingzi/blog/downloads","issues_url":"https://api.github.com/repos/Jmingzi/blog/issues{/number}","pulls_url":"https://api.github.com/repos/Jmingzi/blog/pulls{/number}","milestones_url":"https://api.github.com/repos/Jmingzi/blog/milestones{/number}","notifications_url":"https://api.github.com/repos/Jmingzi/blog/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Jmingzi/blog/labels{/name}","releases_url":"https://api.github.com/repos/Jmingzi/blog/releases{/id}","deployments_url":"https://api.github.com/repos/Jmingzi/blog/deployments","created_at":"2016-12-30T08:08:55Z","updated_at":"2023-03-07T03:19:46Z","pushed_at":"2022-01-22T03:45:16Z","git_url":"git://github.com/Jmingzi/blog.git","ssh_url":"git@github.com:Jmingzi/blog.git","clone_url":"https://github.com/Jmingzi/blog.git","svn_url":"https://github.com/Jmingzi/blog","homepage":"","size":511,"stargazers_count":14,"watchers_count":14,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":1,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":37,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1,"open_issues":37,"watchers":14,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"nextTickçš„å®žçŽ°æœ¬è´¨æ˜¯é‡‡ç”¨äº†[js Event Loop](https://github.com/Jmingzi/blog/issues/2)çš„çŸ¥è¯†å®žçŽ°ã€‚\r\n\r\nå…¶ä½¿ç”¨åœºæ™¯åœ¨èµ‹å€¼stateåŽä½¿ç”¨ï¼Œç›®çš„æ˜¯ç­‰å¾…watcherè§¦å‘æ›´æ–°ç•Œé¢åŽè°ƒç”¨å›žè°ƒã€‚æœ¬æ–‡æ—¨åœ¨ç†è§£Event Loopçš„åŸºç¡€ä¸ŠæŸ¥çœ‹vue nextTickçš„å®žçŽ°ï¼Œä»¥ä¾¿äºŽåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ›´å¥½çš„è§£å†³é—®é¢˜ã€‚\r\n\r\nnextTick ä¼ªä»£ç \r\n\r\n```js\r\nfunction nextTick(cb, context) {\r\n  // å¤„ç†cb\r\n  callbacks.push(() => {\r\n     if (cb) {\r\n       // å›žè°ƒæ¨¡å¼\r\n       cb.call(context)\r\n     } else {\r\n       // ä¸ä¼ cbæ—¶ï¼Œä¸ºpromiseå½¢å¼\r\n       _resolve()\r\n     }\r\n  })\r\n\r\n  // ä¿è¯åªæœ‰ä¸€æ¬¡è°ƒç”¨\r\n  if (!pending) {\r\n    pending = true\r\n    // å½“å‰äº‹ä»¶é˜Ÿåˆ—ç»“æŸåŽ, è§¦å‘å›žè°ƒæ•°ç»„\r\n    // æ­¤å¤„æ¶‰åŠäº‹ä»¶é˜Ÿåˆ—çŸ¥è¯†ï¼Œè¯·æˆ³https://github.com/Jmingzi/blog/issues/2\r\n    // è‡³äºŽä¸ºä½•è¦ç”¨microtaskså’Œtasksï¼Œæ³¨é‡Šè¯´æ˜Ž\r\n    // åœ¨vue2.4ä»¥ä¸‹éƒ½åªç”¨microtasksï¼Œä½†æ˜¯åŽæ¥å‘çŽ°åœ¨è¿žç»­çš„äº‹ä»¶æˆ–åŒä¸€äº‹ä»¶çš„å†’æ³¡ä¸­ï¼Œä¼šæœ‰é—®é¢˜\r\n    // å› ä¸ºmicrotasksçš„ä¼˜å…ˆçº§å§‹ç»ˆæ˜¯æœ€é«˜çš„ã€‚é»˜è®¤ä½¿ç”¨microtasks\r\n    // ä½•æ—¶ç”¨tasksï¼Ÿ\r\n    // å½“ç»„ä»¶å†…éƒ¨çš„å˜åŒ–å¯¼è‡´stateå˜åŒ–æ—¶ï¼Œå°±ä¼šä½¿ç”¨tasks\r\n    if (useMacroTask) {\r\n      macroTimerFunc()\r\n    } else {\r\n      microTimerFunc()\r\n    }\r\n  }\r\n\r\n  // å¦‚æžœæ²¡ä¼ cbï¼Œåˆ™è¿”å›žä¸€ä¸ªpromiseå¯¹è±¡\r\n  if (!cb) {\r\n    return new Promise(resolve => {\r\n      _resolve = resolve\r\n    })\r\n  }\r\n}\r\n```\r\n\r\nç„¶åŽå†å°±æ˜¯å®šä¹‰macroTimerFuncå’ŒmicroTimerFuncæ—¶æ‰€æ¶‰åŠçš„ç‚¹\r\n\r\n- å®šä¹‰macroTimerFunc\r\nåœ¨ieä¸­æ”¯æŒsetImmediateï¼Œéžieä¸­ï¼Œéƒ½æ˜¯ä½¿ç”¨`MessageChanel`å‘é€æ¶ˆæ¯æ¥ä¿æŒcallbackå§‹ç»ˆä»¥é˜Ÿåˆ—çš„å½¢å¼è°ƒç”¨çš„ã€‚é™¤éžäºŒè€…ä¸æ”¯æŒï¼Œæœ€åŽæ‰ç”¨çš„setTimeoutä¿åº•ã€‚\r\n```js\r\nif (setImmediate) {\r\n  setImmediate(flushCallbacks)\r\n} else if (MessageChanel) {\r\n  // å…³äºŽMessageChanelï¼Œè¯·æˆ³\r\n  // http://www.zhangxinxu.com/study/201202/web-messing-channel-messaging-two-iframe.html\r\n  const channel = new MessageChannel()\r\n  const port = channel.port2\r\n  channel.port1.onmessage = flushCallbacks\r\n  macroTimerFunc = () => {\r\n    port.postMessage(1)\r\n  }\r\n} else {\r\n  setTimeout(() => {\r\n    flushCallbacks()\r\n  }, 0)\r\n}\r\n```\r\n\r\n- å®šä¹‰microTimerFunc\r\nç”¨Promiseæ¨¡æ‹Ÿçš„ï¼Œä½†æ˜¯åœ¨iOS UIWebViewsä¸­æœ‰ä¸ªbugï¼ŒPromise.thenå¹¶ä¸ä¼šè¢«è§¦å‘ï¼Œé™¤éžæµè§ˆå™¨ä¸­æœ‰å…¶ä»–äº‹ä»¶è§¦å‘ï¼Œä¾‹å¦‚å¤„ç†setTimeoutã€‚æ‰€ä»¥æ‰‹åŠ¨åŠ äº†ä¸ªç©ºçš„setTimeout\r\n\r\nå¦‚æžœPromiseéƒ½ä¸æ”¯æŒï¼Œé‚£microTimerFunc = macroTimerFunc\r\n```js\r\n  const p = Promise.resolve()\r\n  microTimerFunc = () => {\r\n    p.then(flushCallbacks)\r\n    // in problematic UIWebViews, Promise.then doesn't completely break, but\r\n    // it can get stuck in a weird state where callbacks are pushed into the\r\n    // microtask queue but the queue isn't being flushed, until the browser\r\n    // needs to do some other work, e.g. handle a timer. Therefore we can\r\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\r\n    if (isIOS) setTimeout(noop)\r\n  }\r\n```\r\nç–‘é—®\r\n- å…³äºŽvueå®žä¾‹ä¸­ä½¿ç”¨microTaskä¸Žtaskçš„åŒºåˆ«ï¼ˆä¹Ÿå°±æ˜¯æ³¨é‡Šä¸­çš„é—®é¢˜æè¿°ï¼‰\r\n- ä¸ºä½•è¦ä½¿ç”¨MessageChanelæ¥æ¨¡æ‹Ÿtaskï¼Œè€Œä¸æ˜¯ç›´æŽ¥ä½¿ç”¨setTimeout\r\n  w3c htmlè§„èŒƒä¸­å®šä¹‰äº†setTimeoutçš„é»˜è®¤æœ€å°æ—¶é—´ä¸º4msï¼Œè€ŒåµŒå¥—çš„timeoutè¡¨çŽ°ä¸º10msï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿ä½ èµ‹å€¼0ï¼Œè€Œå®žé™…å´ä¸æ˜¯ã€‚å†ç”±äºŽï¼ŒsetTimeoutçš„æ—¶é—´ï¼Œä¼šå—åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„å½±å“ï¼ˆæˆ–å…¶å®ƒåŽŸå› ï¼Ÿï¼‰å…¶å®žé™…æ—¶é—´è¿œå¤§äºŽ10msï¼Œè¿™æˆ–è®¸å°±æ˜¯vueä¸ä¼˜å…ˆä½¿ç”¨setTimeoutçš„åŽŸå› å§ã€‚\r\næ­¤å¤„å‚è€ƒ\r\n  - [What is minimum millisecond value of setTimeout?\r\n](https://stackoverflow.com/questions/9647215/what-is-minimum-millisecond-value-of-settimeout)\r\n  - [setTimeoutåˆæŽ¢(ä¸€)ï¼š4msçš„çœŸä¼ª](https://blog.csdn.net/yiifaa/article/details/52046333)\r\n- ä½•æ—¶ç”¨taskï¼Œä½•æ—¶ç”¨microTask\r\n   vueå†…ç½®äº†ä¸€ä¸ªå‡½æ•°withMacroTaskï¼Œå½“ç»„ä»¶çš„stateå˜åŒ–æ—¶ï¼Œå°±ä¼šä½¿ç”¨taskï¼Œå…¶å®ƒé»˜è®¤éƒ½æ˜¯microTask\r\n\r\næŽ¨èé˜…è¯»    \r\n\r\n[Tasks, microtasks, queues and schedules](https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/)\r\n\r\næœ€åŽï¼Œæ³¨é‡Šä¸­çš„2ä¸ªé—®é¢˜[#4521](https://github.com/vuejs/vue/issues/4521), [#6690](https://github.com/vuejs/vue/issues/6690)ï¼Œæ¬¢è¿Žä¸€èµ·è®¨è®ºã€‚\r\n","reactions":{"url":"https://api.github.com/repos/Jmingzi/blog/issues/27/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Jmingzi/blog/issues/27/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/472252750","html_url":"https://github.com/vuejs/vue/issues/4521#issuecomment-472252750","issue_url":"https://api.github.com/repos/vuejs/vue/issues/4521","id":472252750,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjI1Mjc1MA==","user":{"login":"fengjinlong","id":19486973,"node_id":"MDQ6VXNlcjE5NDg2OTcz","avatar_url":"https://avatars.githubusercontent.com/u/19486973?v=4","gravatar_id":"","url":"https://api.github.com/users/fengjinlong","html_url":"https://github.com/fengjinlong","followers_url":"https://api.github.com/users/fengjinlong/followers","following_url":"https://api.github.com/users/fengjinlong/following{/other_user}","gists_url":"https://api.github.com/users/fengjinlong/gists{/gist_id}","starred_url":"https://api.github.com/users/fengjinlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fengjinlong/subscriptions","organizations_url":"https://api.github.com/users/fengjinlong/orgs","repos_url":"https://api.github.com/users/fengjinlong/repos","events_url":"https://api.github.com/users/fengjinlong/events{/privacy}","received_events_url":"https://api.github.com/users/fengjinlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T02:17:37Z","updated_at":"2019-03-13T02:17:37Z","body":"å¹²å¾—æ¼‚äº®","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/comments/472252750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fengjinlong","id":19486973,"node_id":"MDQ6VXNlcjE5NDg2OTcz","avatar_url":"https://avatars.githubusercontent.com/u/19486973?v=4","gravatar_id":"","url":"https://api.github.com/users/fengjinlong","html_url":"https://github.com/fengjinlong","followers_url":"https://api.github.com/users/fengjinlong/followers","following_url":"https://api.github.com/users/fengjinlong/following{/other_user}","gists_url":"https://api.github.com/users/fengjinlong/gists{/gist_id}","starred_url":"https://api.github.com/users/fengjinlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fengjinlong/subscriptions","organizations_url":"https://api.github.com/users/fengjinlong/orgs","repos_url":"https://api.github.com/users/fengjinlong/repos","events_url":"https://api.github.com/users/fengjinlong/events{/privacy}","received_events_url":"https://api.github.com/users/fengjinlong/received_events","type":"User","user_view_type":"public","site_admin":false}}]