{"url":"https://api.github.com/repos/vuejs/vue/issues/9114","repository_url":"https://api.github.com/repos/vuejs/vue","labels_url":"https://api.github.com/repos/vuejs/vue/issues/9114/labels{/name}","comments_url":"https://api.github.com/repos/vuejs/vue/issues/9114/comments","events_url":"https://api.github.com/repos/vuejs/vue/issues/9114/events","html_url":"https://github.com/vuejs/vue/issues/9114","id":384838253,"node_id":"MDU6SXNzdWUzODQ4MzgyNTM=","number":9114,"title":"Incorrect compiled code when usinig multiline v-if on template element as a slot renderer","user":{"login":"maguszoldik","id":8247909,"node_id":"MDQ6VXNlcjgyNDc5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/8247909?v=4","gravatar_id":"","url":"https://api.github.com/users/maguszoldik","html_url":"https://github.com/maguszoldik","followers_url":"https://api.github.com/users/maguszoldik/followers","following_url":"https://api.github.com/users/maguszoldik/following{/other_user}","gists_url":"https://api.github.com/users/maguszoldik/gists{/gist_id}","starred_url":"https://api.github.com/users/maguszoldik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maguszoldik/subscriptions","organizations_url":"https://api.github.com/users/maguszoldik/orgs","repos_url":"https://api.github.com/users/maguszoldik/repos","events_url":"https://api.github.com/users/maguszoldik/events{/privacy}","received_events_url":"https://api.github.com/users/maguszoldik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":316936443,"node_id":"MDU6TGFiZWwzMTY5MzY0NDM=","url":"https://api.github.com/repos/vuejs/vue/labels/improvement","name":"improvement","color":"c7def8","default":false,"description":null},{"id":601343890,"node_id":"MDU6TGFiZWw2MDEzNDM4OTA=","url":"https://api.github.com/repos/vuejs/vue/labels/good%20first%20issue","name":"good first issue","color":"6f4fff","default":true,"description":null},{"id":971479363,"node_id":"MDU6TGFiZWw5NzE0NzkzNjM=","url":"https://api.github.com/repos/vuejs/vue/labels/has%20workaround","name":"has workaround","color":"ccf4ff","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-11-27T15:04:39Z","updated_at":"2018-12-01T05:34:00Z","closed_at":"2018-12-01T05:34:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://template-explorer.vuejs.org/#%3Cdiv%3E%0A%20%20%20%20%3Ctemplate%0A%20%20%20%20%20%20slot%3D%22row_expander%22%0A%20%20%20%20%20%20slot-scope%3D%22%7B%0A%20%20%20%20%20%20%20%20row%0A%20%20%20%20%20%20%7D%22%0A%20%20%20%20%20%20v-if%3D%22%0A%20%20%20%20%20%20%20%20longCondition1%20%26%26%0A%20%20%20%20%20%20%20%20anotherLongCondition%20%3D%3D%3D%20'my%20awesome%20result'%20%26%26%0A%20%20%20%20%20%20%20%20anotherWhichBreakTheLineLength%0A%20%20%20%20%20%20%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Csomething%20%2F%3E%20%3Csomething%20%2F%3E%0A%20%20%20%20%3C%2Ftemplate%3E%0A%20%3C%2Fdiv%3E](https://template-explorer.vuejs.org/#%3Cdiv%3E%0A%20%20%20%20%3Ctemplate%0A%20%20%20%20%20%20slot%3D%22row_expander%22%0A%20%20%20%20%20%20slot-scope%3D%22%7B%0A%20%20%20%20%20%20%20%20row%0A%20%20%20%20%20%20%7D%22%0A%20%20%20%20%20%20v-if%3D%22%0A%20%20%20%20%20%20%20%20longCondition1%20%26%26%0A%20%20%20%20%20%20%20%20anotherLongCondition%20%3D%3D%3D%20'my%20awesome%20result'%20%26%26%0A%20%20%20%20%20%20%20%20anotherWhichBreakTheLineLength%0A%20%20%20%20%20%20%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Csomething%20%2F%3E%20%3Csomething%20%2F%3E%0A%20%20%20%20%3C%2Ftemplate%3E%0A%20%3C%2Fdiv%3E)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nWhen using a `v-if` which match these 3 conditions:\r\n- written on multiple line (first condition on next line)\r\n- defined on a `template` element\r\n- the template use the `slot` property\r\n\r\nâ€¦then the template compiler does not encapsulate the code in parenthesis, leading to improper condition.\r\n\r\nSee the provided Vue Template Explorer for the following code:\r\n```jsx\r\n<div>\r\n    <template\r\n      slot=\"row_expander\"\r\n      slot-scope=\"{\r\n        row\r\n      }\"\r\n      v-if=\"\r\n        longCondition1 &&\r\n        anotherLongCondition === 'my awesome result' &&\r\n        anotherWhichBreakTheLineLength\r\n      \"\r\n    >\r\n      <something /> <something />\r\n    </template>\r\n </div>\r\n```\r\n\r\n### What is expected?\r\nThe return of scopedSlots.fn must encapsulate the condition inside parenthesis.\r\n\r\n```jsx\r\nfunction render() {\r\n  with(this) {\r\n    return _c('div', {\r\n      scopedSlots: _u([{\r\n        key: \"row_expander\",\r\n        fn: function ({\r\n          row\r\n        }) {\r\n          return (\r\n            longCondition1 &&\r\n            anotherLongCondition === 'my awesome result' &&\r\n            anotherWhichBreakTheLineLength\r\n           ) ? [_c('something'), _c('something')] : undefined\r\n        }\r\n      }])\r\n    })\r\n  }\r\n}\r\n```\r\n\r\n### What is actually happening?\r\nThe return statement is incorrect.\r\n\r\n```jsx\r\nfunction render() {\r\n  with(this) {\r\n    return _c('div', {\r\n      scopedSlots: _u([{\r\n        key: \"row_expander\",\r\n        fn: function ({\r\n          row\r\n        }) {\r\n          return\r\n          longCondition1 &&\r\n            anotherLongCondition === 'my awesome result' &&\r\n            anotherWhichBreakTheLineLength ?\r\n            [_c('something'), _c('something')] : undefined\r\n        }\r\n      }])\r\n    })\r\n  }\r\n}\r\n```\r\n\r\n---\r\nThis is related to the usage of Prettier which automatically break on multiple lines the condition if it is too long (see https://github.com/prettier/prettier/issues/5561)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->","closed_by":{"login":"yyx990803","id":499550,"node_id":"MDQ6VXNlcjQ5OTU1MA==","avatar_url":"https://avatars.githubusercontent.com/u/499550?v=4","gravatar_id":"","url":"https://api.github.com/users/yyx990803","html_url":"https://github.com/yyx990803","followers_url":"https://api.github.com/users/yyx990803/followers","following_url":"https://api.github.com/users/yyx990803/following{/other_user}","gists_url":"https://api.github.com/users/yyx990803/gists{/gist_id}","starred_url":"https://api.github.com/users/yyx990803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyx990803/subscriptions","organizations_url":"https://api.github.com/users/yyx990803/orgs","repos_url":"https://api.github.com/users/yyx990803/repos","events_url":"https://api.github.com/users/yyx990803/events{/privacy}","received_events_url":"https://api.github.com/users/yyx990803/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/vuejs/vue/issues/9114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vuejs/vue/issues/9114/timeline","performed_via_github_app":null,"state_reason":"completed"}