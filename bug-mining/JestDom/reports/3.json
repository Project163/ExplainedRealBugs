{"url":"https://api.github.com/repos/testing-library/jest-dom/issues/60","repository_url":"https://api.github.com/repos/testing-library/jest-dom","labels_url":"https://api.github.com/repos/testing-library/jest-dom/issues/60/labels{/name}","comments_url":"https://api.github.com/repos/testing-library/jest-dom/issues/60/comments","events_url":"https://api.github.com/repos/testing-library/jest-dom/issues/60/events","html_url":"https://github.com/testing-library/jest-dom/issues/60","id":366521941,"node_id":"MDU6SXNzdWUzNjY1MjE5NDE=","number":60,"title":"Descriptively assert that a form input/select/textarea has a given value","user":{"login":"gnapse","id":15199,"node_id":"MDQ6VXNlcjE1MTk5","avatar_url":"https://avatars.githubusercontent.com/u/15199?v=4","gravatar_id":"","url":"https://api.github.com/users/gnapse","html_url":"https://github.com/gnapse","followers_url":"https://api.github.com/users/gnapse/followers","following_url":"https://api.github.com/users/gnapse/following{/other_user}","gists_url":"https://api.github.com/users/gnapse/gists{/gist_id}","starred_url":"https://api.github.com/users/gnapse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gnapse/subscriptions","organizations_url":"https://api.github.com/users/gnapse/orgs","repos_url":"https://api.github.com/users/gnapse/repos","events_url":"https://api.github.com/users/gnapse/events{/privacy}","received_events_url":"https://api.github.com/users/gnapse/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":895678637,"node_id":"MDU6TGFiZWw4OTU2Nzg2Mzc=","url":"https://api.github.com/repos/testing-library/jest-dom/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"},{"id":898463104,"node_id":"MDU6TGFiZWw4OTg0NjMxMDQ=","url":"https://api.github.com/repos/testing-library/jest-dom/labels/needs%20discussion","name":"needs discussion","color":"cc0ac8","default":false,"description":"We need to discuss this to come up with a good solution"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-10-03T20:48:28Z","updated_at":"2018-10-13T21:13:21Z","closed_at":"2018-10-13T21:10:09Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### The problem\r\n\r\n`<select>` elements, unlike `input` elements, do not have a `value` attribute. So there's easy no natural way to assert that a select element has a certain option selected. One would have to traverse through the options to see which one is `selected`.\r\n\r\nTo make it even worse, React makes it look like so, to the point that I got confused myself recently, when I spent more minutes that I would've liked trying to figure out why the following test (using react-testing-library) did not pass:\r\n\r\n```jsx\r\nconst { getByTitle } = render(\r\n  <select title=\"Client status\" value=\"archived\">\r\n    <option value=\"active\">Active</option>\r\n    <option value=\"archived\">Archived</option>\r\n    <option value=\"pending\">Pending</option>\r\n  </select>\r\n);\r\n\r\nexpect(getByTitle('Client status')).toHaveAttribute('value', 'archived')\r\n```\r\n\r\nAnd to continue to make it even worse, the overall task may become more complex if using options grouped in `<optgroup>`s, or with multi-select elements.\r\n\r\n### Describe the feature you'd like\r\n\r\nI started this issue thinking of suggesting a specific matcher to check a selected option in select elements. But while describing all of the above, I realize that it may be better to provide some generic way to check the value of form elements, regardless of them being `input`s, `textarea`s or `select`s (are there any other ones?).\r\n\r\n### Suggested implementation:\r\n\r\nIt could be providing assertions to work at the actual form input element level:\r\n\r\n```js\r\nexpect(userInputElement).toHaveValue('janedoe');\r\nexpect(passwordInputElement).toHaveValue('12345678');\r\n```\r\n\r\nor even at the form element level (identifying an input/select/textarea element by its `name` attribute):\r\n\r\n```js\r\nexpect(formElement).toHaveValue('username', 'janedoe');\r\nexpect(formElement).toHaveValue('password', '12345678');\r\n```\r\n\r\nIt could be both use cases with the same matcher! And it could be created so that it would understand inputs, selects and textures (which are also different, their value is their child text content).\r\n\r\nIt could even be so that `<select multiple>` elements' values are arrays, and users could check at once the entire multiple selection (and maybe even part of it too??)\r\n\r\n### Describe alternatives you've considered:\r\n\r\n`select` elements probably have some property at the dom level to check their value, instead of it being an attribute. I did not google for it, and do not have it at the top of my head, but if so, then `expect(selectElement.value).toEqual(...)` could help, but still it's not a generic solution for all kinds of form elements (or is it?)\r\n\r\n`dom-testing-library` recently added the ability to `getBySelectText`, that allows users to select a `select` (pun not intended) by the text content of the option element within that select that is currently selected. This certainly helps, but it still leaves a weird not-so-expressive way to assert that a given select has a certain value selected:\r\n\r\n```js\r\nexpect(getByLabel('Client status')).toBe(getBySelectText('Archived'))\r\n```\r\n\r\nAnd even then, what happens if there are two selects that happen to have an option selected, both with the same text `\"Archived\"`?\r\n\r\nAnd still this only addresses the problem with select elements.\r\n\r\nThoughts?","closed_by":{"login":"gnapse","id":15199,"node_id":"MDQ6VXNlcjE1MTk5","avatar_url":"https://avatars.githubusercontent.com/u/15199?v=4","gravatar_id":"","url":"https://api.github.com/users/gnapse","html_url":"https://github.com/gnapse","followers_url":"https://api.github.com/users/gnapse/followers","following_url":"https://api.github.com/users/gnapse/following{/other_user}","gists_url":"https://api.github.com/users/gnapse/gists{/gist_id}","starred_url":"https://api.github.com/users/gnapse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gnapse/subscriptions","organizations_url":"https://api.github.com/users/gnapse/orgs","repos_url":"https://api.github.com/users/gnapse/repos","events_url":"https://api.github.com/users/gnapse/events{/privacy}","received_events_url":"https://api.github.com/users/gnapse/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/testing-library/jest-dom/issues/60/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/testing-library/jest-dom/issues/60/timeline","performed_via_github_app":null,"state_reason":"completed"}