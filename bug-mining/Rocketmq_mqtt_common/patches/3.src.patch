diff --git a/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Message.java b/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Message.java
index 563401c..8543592 100644
--- a/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Message.java
+++ b/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Message.java
@@ -189,10 +189,7 @@ public class Message {
     }
 
     public boolean isP2P() {
-        if (TopicUtils.isP2P(TopicUtils.decode(firstTopic).getSecondTopic())) {
-            return true;
-        }
-        return false;
+        return TopicUtils.isP2P(TopicUtils.decode(firstTopic).getSecondTopic());
     }
 
     @Override
diff --git a/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Subscription.java b/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Subscription.java
index 18fb317..21cabb5 100644
--- a/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Subscription.java
+++ b/mqtt-common/src/main/java/org/apache/rocketmq/mqtt/common/model/Subscription.java
@@ -36,11 +36,6 @@ public class Subscription {
         this.qos = qos;
     }
 
-    public boolean isWildCard() {
-        return topicFilter != null &&
-                (topicFilter.contains(Constants.NUMBER_SIGN) || topicFilter.contains(Constants.PLUS_SIGN));
-    }
-
     public String toFirstTopic() {
         return TopicUtils.decode(topicFilter).getFirstTopic();
     }
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestAbstractUpstreamHook.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestAbstractUpstreamHook.java
new file mode 100644
index 0000000..2cc6186
--- /dev/null
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestAbstractUpstreamHook.java
@@ -0,0 +1,64 @@
+/*
+ *
+ *  * Licensed to the Apache Software Foundation (ASF) under one or more
+ *  * contributor license agreements.  See the NOTICE file distributed with
+ *  * this work for additional information regarding copyright ownership.
+ *  * The ASF licenses this file to You under the Apache License, Version 2.0
+ *  * (the "License"); you may not use this file except in compliance with
+ *  * the License.  You may obtain a copy of the License at
+ *  *
+ *  *     http://www.apache.org/licenses/LICENSE-2.0
+ *  *
+ *  * Unless required by applicable law or agreed to in writing, software
+ *  * distributed under the License is distributed on an "AS IS" BASIS,
+ *  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ *  * See the License for the specific language governing permissions and
+ *  * limitations under the License.
+ *
+ */
+
+package org.apache.rocketmq.mqtt.common.test.hook;
+
+import io.netty.handler.codec.mqtt.MqttMessage;
+import org.apache.rocketmq.mqtt.common.hook.AbstractUpstreamHook;
+import org.apache.rocketmq.mqtt.common.hook.HookResult;
+import org.apache.rocketmq.mqtt.common.model.MqttMessageUpContext;
+import org.apache.rocketmq.mqtt.common.model.Remark;
+import org.junit.Test;
+import org.junit.runner.RunWith;
+import org.mockito.Mock;
+import org.mockito.junit.MockitoJUnitRunner;
+
+import java.util.concurrent.CompletableFuture;
+import java.util.concurrent.ExecutionException;
+
+import static org.junit.Assert.assertEquals;
+
+@RunWith(MockitoJUnitRunner.class)
+public class TestAbstractUpstreamHook {
+    private final int code = -200;
+    private final String remark = Remark.FAIL;
+
+    @Mock
+    private MqttMessageUpContext context;
+
+    @Mock
+    private MqttMessage mqttMessage;
+
+    private AbstractUpstreamHook upstreamHook = new AbstractUpstreamHook() {
+        @Override
+        public void register() {}
+
+        @Override
+        public CompletableFuture<HookResult> processMqttMessage(MqttMessageUpContext context, MqttMessage message) {
+            return HookResult.newHookResult(code, remark, null);
+        }
+    };
+
+    @Test
+    public void test() throws ExecutionException, InterruptedException {
+        CompletableFuture<HookResult> future = upstreamHook.doHook(context, mqttMessage);
+        assertEquals(code, future.get().getCode());
+    }
+
+}
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestHookResult.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestHookResult.java
new file mode 100644
index 0000000..395aac6
--- /dev/null
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/hook/TestHookResult.java
@@ -0,0 +1,48 @@
+/*
+ *
+ *  * Licensed to the Apache Software Foundation (ASF) under one or more
+ *  * contributor license agreements.  See the NOTICE file distributed with
+ *  * this work for additional information regarding copyright ownership.
+ *  * The ASF licenses this file to You under the Apache License, Version 2.0
+ *  * (the "License"); you may not use this file except in compliance with
+ *  * the License.  You may obtain a copy of the License at
+ *  *
+ *  *     http://www.apache.org/licenses/LICENSE-2.0
+ *  *
+ *  * Unless required by applicable law or agreed to in writing, software
+ *  * distributed under the License is distributed on an "AS IS" BASIS,
+ *  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ *  * See the License for the specific language governing permissions and
+ *  * limitations under the License.
+ *
+ */
+
+package org.apache.rocketmq.mqtt.common.test.hook;
+
+import org.apache.rocketmq.mqtt.common.hook.HookResult;
+import org.junit.Test;
+
+import java.util.concurrent.CompletableFuture;
+import java.util.concurrent.ExecutionException;
+
+import static org.junit.Assert.assertEquals;
+import static org.junit.Assert.assertTrue;
+
+public class TestHookResult {
+    private final int code = 200;
+    private final int subCode = 200;
+    private final String remark = "test";
+
+    @Test
+    public void test() throws ExecutionException, InterruptedException {
+        HookResult hookResult = new HookResult(code, remark, null);
+        CompletableFuture<HookResult> future = HookResult.newHookResult(code, remark, null);
+        assertEquals(hookResult, future.get());
+        assertTrue(future.isDone());
+
+        hookResult = new HookResult(code, subCode, remark, null);
+        future = HookResult.newHookResult(code, subCode, remark, null);
+        assertEquals(hookResult, future.get());
+        assertTrue(future.isDone());
+    }
+}
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestMessage.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestMessage.java
new file mode 100644
index 0000000..5e11fa7
--- /dev/null
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestMessage.java
@@ -0,0 +1,69 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.rocketmq.mqtt.common.test.model;
+
+import org.apache.rocketmq.mqtt.common.model.Message;
+import org.junit.Assert;
+import org.junit.Test;
+
+import java.nio.charset.StandardCharsets;
+
+public class TestMessage {
+
+    String msgId = "testMsgCopy";
+    String firstTopic = "first";
+    String originTopic = "origin";
+    long offset = 0;
+    long nextOffset = 1;
+    int retry = 3;
+    byte[] payload = "testMsgCopy".getBytes(StandardCharsets.UTF_8);
+    long bornTimestamp = 100;
+    long storeTimestamp = 120;
+    int extPropertyQoS = 2;
+
+    @Test
+    public void testMessageCopy() {
+        Message message = new Message();
+        message.setMsgId(msgId);
+        message.setFirstTopic(firstTopic);
+        message.setOriginTopic(originTopic);
+        message.setOffset(offset);
+        message.setNextOffset(nextOffset);
+        message.setRetry(retry);
+        message.setPayload(payload);
+        message.setBornTimestamp(bornTimestamp);
+        message.setStoreTimestamp(storeTimestamp);
+        message.putUserProperty(Message.extPropertyQoS, String.valueOf(extPropertyQoS));
+
+        Message copyMsg = message.copy();
+
+        Assert.assertEquals(msgId, copyMsg.getMsgId());
+        Assert.assertEquals(firstTopic, copyMsg.getFirstTopic());
+        Assert.assertEquals(originTopic, copyMsg.getOriginTopic());
+        Assert.assertEquals(offset, copyMsg.getOffset());
+        Assert.assertEquals(nextOffset, copyMsg.getNextOffset());
+        Assert.assertEquals(retry, copyMsg.getRetry());
+        Assert.assertEquals(payload, copyMsg.getPayload());
+        Assert.assertEquals(bornTimestamp, copyMsg.getBornTimestamp());
+        Assert.assertEquals(storeTimestamp, copyMsg.getStoreTimestamp());
+        Assert.assertEquals(String.valueOf(extPropertyQoS), copyMsg.getUserProperty(Message.extPropertyQoS));
+        Assert.assertNull(copyMsg.getUserProperty(Message.propertyMsgId));
+        copyMsg.clearUserProperty(Message.extPropertyQoS);
+        Assert.assertNull(copyMsg.getUserProperty(Message.extPropertyQoS));
+    }
+}
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestQueueOffset.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestQueueOffset.java
new file mode 100644
index 0000000..b93d82d
--- /dev/null
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestQueueOffset.java
@@ -0,0 +1,38 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.rocketmq.mqtt.common.test.model;
+
+import org.apache.rocketmq.mqtt.common.model.QueueOffset;
+import org.junit.Assert;
+import org.junit.Test;
+
+public class TestQueueOffset {
+
+    final long offset = 666;
+
+    @Test
+    public void test() {
+        QueueOffset queueOffset = new QueueOffset();
+        Assert.assertFalse(queueOffset.isInitializing());
+        queueOffset.setInitializing();
+        Assert.assertTrue(queueOffset.isInitializing());
+
+        queueOffset.setOffset(offset);
+        Assert.assertTrue(queueOffset.isInitialized());
+    }
+}
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestSubscription.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestSubscription.java
new file mode 100644
index 0000000..2c5e847
--- /dev/null
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestSubscription.java
@@ -0,0 +1,47 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.rocketmq.mqtt.common.test.model;
+
+import org.apache.rocketmq.mqtt.common.model.Constants;
+import org.apache.rocketmq.mqtt.common.model.Subscription;
+import org.junit.Assert;
+import org.junit.Test;
+
+public class TestSubscription {
+
+    final String firstTopic = "t1";
+    final String topicFilter = firstTopic + "/t2/";
+    final int qos = 1;
+    final String clientId = "testSub";
+    final String p2pTopic = Constants.P2P + clientId + Constants.MQTT_TOPIC_DELIMITER;
+    final String retryTopic = Constants.RETRY + clientId + Constants.MQTT_TOPIC_DELIMITER;
+
+    @Test
+    public void test() {
+        Subscription subscription = new Subscription(topicFilter, qos);
+        Assert.assertEquals(firstTopic, subscription.toFirstTopic());
+        Assert.assertEquals(topicFilter, subscription.toQueueName());
+        Assert.assertEquals(qos, subscription.getQos());
+
+        Assert.assertEquals(p2pTopic, Subscription.newP2pSubscription(clientId).getTopicFilter());
+        Assert.assertFalse(new Subscription().isP2p());
+
+        Assert.assertEquals(retryTopic, Subscription.newRetrySubscription(clientId).getTopicFilter());
+        Assert.assertTrue(new Subscription(retryTopic).isRetry());
+    }
+}
diff --git a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/TestTrie.java b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestTrie.java
similarity index 98%
rename from mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/TestTrie.java
rename to mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestTrie.java
index d009a88..8296658 100644
--- a/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/TestTrie.java
+++ b/mqtt-common/src/test/java/org/apache/rocketmq/mqtt/common/test/model/TestTrie.java
@@ -17,7 +17,7 @@
  *
  */
 
-package org.apache.rocketmq.mqtt.common.test;
+package org.apache.rocketmq.mqtt.common.test.model;
 
 import org.apache.commons.collections.CollectionUtils;
 import org.apache.commons.collections.MapUtils;
