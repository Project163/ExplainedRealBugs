diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AbstractMarkupSourcingStrategy.java b/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AbstractMarkupSourcingStrategy.java
index e60eaa3f35..27407cf773 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AbstractMarkupSourcingStrategy.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AbstractMarkupSourcingStrategy.java
@@ -67,6 +67,13 @@ public abstract class AbstractMarkupSourcingStrategy implements IMarkupSourcingS
 			@Override
 			public void component(MarkupContainer resolvingContainer, IVisit<IMarkupFragment> visit)
 			{
+				//prevents possible searching loops
+				if (child == resolvingContainer) 
+				{
+					visit.dontGoDeeper();
+					return;
+				}
+				
 				if (resolvingContainer instanceof IComponentResolver)
 				{
 					visit.dontGoDeeper();
@@ -92,7 +99,7 @@ public abstract class AbstractMarkupSourcingStrategy implements IMarkupSourcingS
 							visit.stop(childMarkup);
 						}
 					}
-				}
+				}				
 			}
 		});
 	}
diff --git a/wicket-core/src/test/java/org/apache/wicket/queueing/transparentresolvers/TestWicket5898.java b/wicket-core/src/test/java/org/apache/wicket/queueing/transparentresolvers/TestWicket5898.java
index f154948622..453e297e31 100644
--- a/wicket-core/src/test/java/org/apache/wicket/queueing/transparentresolvers/TestWicket5898.java
+++ b/wicket-core/src/test/java/org/apache/wicket/queueing/transparentresolvers/TestWicket5898.java
@@ -18,7 +18,6 @@ package org.apache.wicket.queueing.transparentresolvers;
 
 import org.apache.wicket.util.tester.WicketTester;
 import org.junit.Before;
-import org.junit.Ignore;
 import org.junit.Test;
 
 /**
@@ -69,7 +68,7 @@ public class TestWicket5898
 	 * that might need rewriting.
 	 */
 	@Test
-	@Ignore("This test fails, should be enabled to trigger WICKET-5898")
+	//@Ignore("This test fails, should be enabled to trigger WICKET-5898")
 	public void ajaxRequestForComponentInTransparentWebMarkupContainerShouldntCauseStackOverflow()
 	{
 		tester.startPage(Wicket5898Page.class);
@@ -89,7 +88,7 @@ public class TestWicket5898
 	 * outer TWMC.
 	 */
 	@Test
-	@Ignore("This test fails, should be enabled to trigger WICKET-5898")
+	//@Ignore("This test fails, should be enabled to trigger WICKET-5898")
 	public void ajaxRequestForComponentInTransparentWebMarkupContainerShouldntCauseStackOverflow2()
 	{
 		tester.startPage(Wicket5898Page2.class);
