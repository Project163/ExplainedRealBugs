diff --git a/wicket-core/src/main/java/org/apache/wicket/Component.java b/wicket-core/src/main/java/org/apache/wicket/Component.java
index a803c519b0..6ef93df803 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Component.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Component.java
@@ -198,8 +198,8 @@ import org.slf4j.LoggerFactory;
  * {@link Component#info(Serializable)}, {@link Component#warn(Serializable)},
  * {@link Component#error(java.io.Serializable)} and {@link Component#fatal(Serializable)} methods
  * associate feedback messages with a Component. It is generally not necessary to use these methods
- * directly since Wicket validators automatically register feedback messages on Components. 
- * Feedback message for a given Component can be retrieved with {@link Component#getFeedbackMessages}.
+ * directly since Wicket validators automatically register feedback messages on Components. Feedback
+ * message for a given Component can be retrieved with {@link Component#getFeedbackMessages}.
  * 
  * <li><b>Versioning </b>- Pages are the unit of versioning in Wicket, but fine-grained control of
  * which Components should participate in versioning is possible via the
@@ -2715,12 +2715,13 @@ public abstract class Component
 			// Allow component to contribute
 			if (response.wasRendered(this) == false)
 			{
-				// Let the component contribute something to the header
-				renderHead(this, response);
-
-				// Make sure the markup source strategy has been considered as well.
+				// Make sure the markup source strategy contributes to the header first
+				// to be backward compatible. WICKET-3761
 				getMarkupSourcingStrategy().renderHead(this, container);
 
+				// Then let the component itself to contribute to the header
+				renderHead(this, response);
+
 				response.markRendered(this);
 			}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstPage.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstPage.html
new file mode 100644
index 0000000000..53e2011cba
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstPage.html
@@ -0,0 +1,2 @@
+<html><head><script type="text/javascript" src="../../markup.js"></script><script type="text/javascript" src="../../java.js"></script>
+</head><body><div wicket:id="panel"><wicket:panel>content for MyPanel goes here</wicket:panel></div></body></html>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstTest.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstTest.java
new file mode 100644
index 0000000000..fe6a867c49
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/MarkupHeadFirstTest.java
@@ -0,0 +1,83 @@
+package org.apache.wicket.markup.html;
+
+import org.apache.wicket.Component;
+import org.apache.wicket.MarkupContainer;
+import org.apache.wicket.WicketTestCase;
+import org.apache.wicket.markup.IMarkupResourceStreamProvider;
+import org.apache.wicket.markup.html.panel.Panel;
+import org.apache.wicket.util.resource.IResourceStream;
+import org.apache.wicket.util.resource.StringResourceStream;
+
+/**
+ * <a href="https://issues.apache.org/jira/browse/WICKET-3761">WICKET-3761</a>
+ */
+public class MarkupHeadFirstTest extends WicketTestCase
+{
+
+	/**
+	 * <a href="https://issues.apache.org/jira/browse/WICKET-3761">WICKET-3761</a>
+	 * 
+	 * <p>
+	 * Tests that header contribution provided by <wicket:head> is contributed before the header
+	 * contribution from {@link Component#renderHead(IHeaderResponse)}
+	 * </p>
+	 * 
+	 * @throws Exception
+	 */
+	public void testRenderMyPage() throws Exception
+	{
+		executeTest(MarkupHeadFirstPage.class, "MarkupHeadFirstPage.html");
+	}
+
+	/**
+	 * A test page
+	 */
+	public static class MarkupHeadFirstPage extends WebPage
+		implements
+			IMarkupResourceStreamProvider
+	{
+		private static final long serialVersionUID = 1L;
+
+		/**
+		 * Construct.
+		 */
+		public MarkupHeadFirstPage()
+		{
+			add(new MarkupHeadFirstPanel("panel"));
+		}
+
+		public IResourceStream getMarkupResourceStream(MarkupContainer container,
+			Class<?> containerClass)
+		{
+			return new StringResourceStream(
+				"<html><body><div wicket:id=\"panel\"></div></body></html>");
+		}
+	}
+
+	private static class MarkupHeadFirstPanel extends Panel
+		implements
+			IMarkupResourceStreamProvider
+	{
+
+		private static final long serialVersionUID = 1L;
+
+		public MarkupHeadFirstPanel(String id)
+		{
+			super(id);
+		}
+
+		@Override
+		public void renderHead(IHeaderResponse response)
+		{
+			response.renderJavaScriptReference("java.js");
+			super.renderHead(response);
+		}
+
+		public IResourceStream getMarkupResourceStream(MarkupContainer container,
+			Class<?> containerClass)
+		{
+			return new StringResourceStream(
+				"<wicket:head><script type=\"text/javascript\" src=\"markup.js\"></script></wicket:head><wicket:panel>content for MyPanel goes here</wicket:panel>");
+		}
+	}
+}
