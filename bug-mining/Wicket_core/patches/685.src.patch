diff --git a/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java b/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
index 91a9732c47..a4f953a9b3 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
@@ -331,4 +331,61 @@ public class UrlRendererTest extends Assert
 
 		assertEquals("../../b;jsessionid=123456", encodedRelativeUrl);
 	}
+
+	@Test
+	public void renderFullUrlAsRelativeToBaseUrlWithFirstSegmentsEqualToTheContextPath()
+	{
+		// base url without context path and filter path
+		// 'contextPath' here is a normal segment with the same value
+		Url baseUrl = Url.parse("contextPath/a/b/c/d");
+
+		// here 'contextPath' is the actual context path and should be ignored
+		Url encodedFullUrl = Url.parse("http://host:8080/contextPath/a/b;jsessionid=123456");
+
+		MockWebRequest request = new MockWebRequest(baseUrl);
+		request.setContextPath("contextPath");
+		request.setFilterPath("filterPath");
+		UrlRenderer renderer = new UrlRenderer(request);
+		String encodedRelativeUrl = renderer.renderRelativeUrl(encodedFullUrl);
+
+		assertEquals("../../../../a/b;jsessionid=123456", encodedRelativeUrl);
+	}
+
+	@Test
+	public void renderFullUrlAsRelativeToBaseUrlWithFirstSegmentsEqualToTheContextAndFilterPaths()
+	{
+		// base url without context path and filter path
+		// 'filterPath' here is a normal segment with the same value
+		Url baseUrl = Url.parse("filterPath/a/b/c/d");
+
+		// here 'contextPath' is the actual context path and should be ignored
+		Url encodedFullUrl = Url.parse("http://host:8080/contextPath/filterPath/a/b;jsessionid=123456");
+
+		MockWebRequest request = new MockWebRequest(baseUrl);
+		request.setContextPath("contextPath");
+		request.setFilterPath("filterPath");
+		UrlRenderer renderer = new UrlRenderer(request);
+		String encodedRelativeUrl = renderer.renderRelativeUrl(encodedFullUrl);
+
+		assertEquals("../../../../a/b;jsessionid=123456", encodedRelativeUrl);
+	}
+
+	@Test
+	public void renderFullUrlAsRelativeToBaseUrlWithFirstSegmentsEqualToTheFilterPath()
+	{
+		// base url without context path and filter path
+		// 'filterPath' here is a normal segment with the same value
+		Url baseUrl = Url.parse("filterPath/a/b/c/d");
+
+		// here 'contextPath' is the actual context path and should be ignored
+		Url encodedFullUrl = Url.parse("http://host:8080/filterPath/a/b;jsessionid=123456");
+
+		MockWebRequest request = new MockWebRequest(baseUrl);
+		request.setContextPath("contextPath");
+		request.setFilterPath("filterPath");
+		UrlRenderer renderer = new UrlRenderer(request);
+		String encodedRelativeUrl = renderer.renderRelativeUrl(encodedFullUrl);
+
+		assertEquals("../../../../a/b;jsessionid=123456", encodedRelativeUrl);
+	}
 }
