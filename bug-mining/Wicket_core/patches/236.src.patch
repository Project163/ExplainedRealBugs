diff --git a/wicket-core/src/main/java/org/apache/wicket/Session.java b/wicket-core/src/main/java/org/apache/wicket/Session.java
index 2b3ee1c7df..9d2c632776 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Session.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Session.java
@@ -372,8 +372,11 @@ public abstract class Session implements IClusterable, IEventSink
 	{
 		if (id == null)
 		{
-			id = getSessionStore().getSessionId(RequestCycle.get().getRequest(), false);
-
+			RequestCycle requestCycle = RequestCycle.get();
+			if (requestCycle != null)
+			{
+				id = getSessionStore().getSessionId(requestCycle.getRequest(), false);
+			}
 			// we have one?
 			if (id != null)
 			{
