diff --git a/wicket-core/src/test/java/org/apache/wicket/core/request/handler/PageAndComponentProviderTest.java b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/PageAndComponentProviderTest.java
new file mode 100644
index 0000000000..27e67937b9
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/PageAndComponentProviderTest.java
@@ -0,0 +1,36 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.core.request.handler;
+
+import org.apache.wicket.core.request.handler.StatelessPageWithQueuedComponents.CustomLabel;
+import org.apache.wicket.util.tester.WicketTestCase;
+import org.junit.Test;
+
+public class PageAndComponentProviderTest extends WicketTestCase
+{
+	
+	@Test
+	public void statelessComponentQueued() throws Exception
+	{	
+		PageAndComponentProvider provider = new PageAndComponentProvider(StatelessPageWithQueuedComponents.class, "container:label");
+		
+		CustomLabel component = (CustomLabel)provider.getComponent();
+		
+		assertFalse(component.hasBeenConfigured());
+					
+	}
+}
diff --git a/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.html b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.html
new file mode 100644
index 0000000000..4e6bf9fd9d
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.html
@@ -0,0 +1,14 @@
+<!DOCTYPE html>
+<html xmlns:wicket="http://wicket.apache.org">
+	<head>
+		<meta charset="utf-8" />
+		<title>Apache Wicket Quickstart</title>
+		<link href='https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:regular,bold' rel='stylesheet' type='text/css' />
+		<link rel="stylesheet" href="style.css" type="text/css" media="screen" title="Stylesheet" />
+	</head>
+	<body>
+		<div wicket:id="container">
+			<span wicket:id="label"></span>
+		</div>
+	</body>
+</html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.java b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.java
new file mode 100644
index 0000000000..e1faccaa1f
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/core/request/handler/StatelessPageWithQueuedComponents.java
@@ -0,0 +1,58 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.core.request.handler;
+
+import org.apache.wicket.markup.html.WebMarkupContainer;
+import org.apache.wicket.markup.html.WebPage;
+import org.apache.wicket.markup.html.basic.Label;
+import org.apache.wicket.request.mapper.parameter.PageParameters;
+
+public class StatelessPageWithQueuedComponents extends WebPage {
+	private static final long serialVersionUID = 1L;
+
+	public StatelessPageWithQueuedComponents(final PageParameters parameters) {
+		super(parameters);
+		
+		setStatelessHint(true);
+		setVersioned(false);
+		
+		WebMarkupContainer container = new WebMarkupContainer("container");		
+		container.queue(new CustomLabel("label"));
+		
+		add(container);
+	}
+	
+	public static class CustomLabel extends Label
+	{
+
+		/**
+		 * @param id
+		 */
+		public CustomLabel(String id)
+		{
+			super(id);
+		}
+		
+		/**
+		 * 
+		 */
+		public boolean hasBeenConfigured()
+		{
+			return getRequestFlag((short)0x10);
+		}
+	}
+}
