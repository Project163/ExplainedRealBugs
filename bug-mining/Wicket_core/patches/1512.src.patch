diff --git a/wicket-core/src/test/java/org/apache/wicket/MarkupContainerTest.java b/wicket-core/src/test/java/org/apache/wicket/MarkupContainerTest.java
index a8d917839d..6d8cea30b5 100644
--- a/wicket-core/src/test/java/org/apache/wicket/MarkupContainerTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/MarkupContainerTest.java
@@ -30,6 +30,7 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Optional;
 import java.util.Random;
+import java.util.stream.Collectors;
 
 import org.apache.commons.collections4.map.LinkedMap;
 import org.apache.wicket.core.util.lang.WicketObjects;
@@ -1265,6 +1266,20 @@ class MarkupContainerTest extends WicketTestCase
 			.isPresent());
 	}
 
+	// https://issues.apache.org/jira/browse/WICKET-6754
+	@Test
+	void streamChildrenNestedContainer() {
+		WebMarkupContainer wmc = new WebMarkupContainer("parent");
+		WebMarkupContainer wmc1 = new WebMarkupContainer("wmc1");
+		wmc.add(wmc1);
+		WebMarkupContainer wmc1_2= new WebMarkupContainer("wmc1_2");
+		wmc1.add(wmc1_2);
+		Label lbl2 = new Label("lbl2");
+		wmc.add(lbl2);
+		List l = wmc.streamChildren().map(Component::getId).collect(Collectors.toList());
+		assertEquals("[wmc1, wmc1_2, lbl2]", l.toString());
+	}
+
 	private static class HierarchyChangePage extends WebPage
 		implements
 			IMarkupResourceStreamProvider
