diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
index 44fb6c50cc..fa46f1c42f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
@@ -450,6 +450,7 @@
 							return Wicket.$$(attributes.c);
 						}
 					}
+					return true;
 				}];
 
 			if (Wicket.Focus.lastFocusId) {
@@ -1389,6 +1390,9 @@
 			 * if the argument is not element, function returns true
 			 */
 			inDoc: function (element) {
+				if (element === window) {
+					return true;
+				}
 				if (typeof(element) === "string") {
 					element = Wicket.$(element);
 				}
diff --git a/wicket-core/src/test/js/ajax.js b/wicket-core/src/test/js/ajax.js
index 0f5246126c..1558735593 100644
--- a/wicket-core/src/test/js/ajax.js
+++ b/wicket-core/src/test/js/ajax.js
@@ -551,14 +551,11 @@ jQuery(document).ready(function() {
 				.append($indicator)
 				.append($el);
 
-			// counts how many complete handlers have been executed
-			var calls = 0;
-
 			// returns the number of 'shows' of the indicator
 			var getCurrentCount = function () {
 				var count = $indicator.attr('showIncrementallyCount');
 				return count ? parseInt(count, 10) : 0;
-			}
+			};
 
 			// called as 'success' for requestOne and as 'failure' for requestTwo
 			var successFailureHandler = function () {
@@ -566,15 +563,6 @@ jQuery(document).ready(function() {
 				ok(count === 1 || count === 2, "'showIncrementallyCount' must be 1 or 2. Value is: " + count);
 			};
 
-			// notifies when the last (second) complete handler is done
-			var deferred = jQuery.Deferred();
-
-			var completeHandler = function () {
-				if (++calls === 2) {
-					deferred.resolve();
-				}
-			};
-
 			var attrs = {
 				u: 'data/ajax/nonWicketResponse.json',
 				e: 'event1',
@@ -583,7 +571,6 @@ jQuery(document).ready(function() {
 				dt: 'json', // datatype
 				sh: [ successFailureHandler ],
 				fh: [ successFailureHandler ],
-				coh: [ completeHandler ],
 				wr: false // not Wicket's <ajax-response>
 			};
 
@@ -599,7 +586,14 @@ jQuery(document).ready(function() {
 			var attrsThree = jQuery.extend({}, attrs, {
 				pre: [
 					function () {
+						start();
 						ok(true, 'Request 3: Precondition called.')
+
+						var count = getCurrentCount();
+						equal(0, count, "'showIncrementallyCount' must be 0 after the executions but is: " + count);
+						$indicator.remove();
+						$el.off().remove();
+
 						return false;
 					}
 				]
@@ -607,16 +601,6 @@ jQuery(document).ready(function() {
 			// binds requestThree - not executed due to precondition
 			Wicket.Ajax.ajax(attrsThree);
 
-			// executed when the last request is in its 'onComplete' phase.
-			jQuery.when(deferred)
-				.done(function () {
-					start();
-					var count = getCurrentCount();
-					equal(0, count, "'showIncrementallyCount' must be 0 after the executions but is: " + count);
-					$indicator.remove();
-					$el.off().remove();
-				});
-
 			// fire all requests
 			$el.triggerHandler("event1");
 		});
diff --git a/wicket-core/src/test/js/all.html b/wicket-core/src/test/js/all.html
index caecb949e1..71ae31cf07 100644
--- a/wicket-core/src/test/js/all.html
+++ b/wicket-core/src/test/js/all.html
@@ -39,6 +39,10 @@
 			AJAX
 		-->
 
+		<div id="evaluationId"></div>
+		<div id="priorityEvaluationId"></div>
+		<div id="evaluationIdentifierAndCodeId"></div>
+
 		<div id="componentToReplace">old body</div>
 
 		<textarea id="componentId"><ajax-response><component id="componentToReplace"><![CDATA[<span id="componentToReplace">new body</span>]]></component></ajax-response></textarea>
diff --git a/wicket-core/src/test/js/dom.js b/wicket-core/src/test/js/dom.js
index be8e20b775..daa9c95d53 100644
--- a/wicket-core/src/test/js/dom.js
+++ b/wicket-core/src/test/js/dom.js
@@ -48,7 +48,11 @@ jQuery(document).ready(function() {
 	});
 
 	test("Wicket.$$ looks for non existing element", function() {
-		equal( Wicket.$$(nonExistingId), true, "Wicket.$$ should return true for non existing elements." );
+		equal( Wicket.$$(nonExistingId), false, "Wicket.$$ should return 'false' for non existing elements." );
+	});
+
+	test("Wicket.$$ looks for 'window'", function() {
+		equal( Wicket.$$(window), true, "Wicket.$$ should return 'true' for 'window'." );
 	});
 
 	test("Wicket.$$ looks for element in iframe", function() {
