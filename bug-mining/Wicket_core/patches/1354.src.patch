diff --git a/wicket-core/src/main/java/org/apache/wicket/Component.java b/wicket-core/src/main/java/org/apache/wicket/Component.java
index ed2c22faae..97262ed669 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Component.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Component.java
@@ -83,7 +83,6 @@ import org.apache.wicket.util.convert.IConverter;
 import org.apache.wicket.util.io.IClusterable;
 import org.apache.wicket.util.lang.Args;
 import org.apache.wicket.util.lang.Classes;
-import org.apache.wicket.util.lang.Objects;
 import org.apache.wicket.util.string.PrependingStringBuffer;
 import org.apache.wicket.util.string.Strings;
 import org.apache.wicket.util.value.ValueMap;
@@ -727,7 +726,7 @@ public abstract class Component
 	public IMarkupFragment getMarkup()
 	{
 		// Markup already determined or preset?
-		if (markup != null && markupHasCurrentVariation())
+		if (markup != null)
 		{
 			return markup;
 		}
@@ -758,18 +757,6 @@ public abstract class Component
 		return markup;
 	}
 
-	/**
-	 * Check if the loaded markup has the current 
-	 * variation.
-	 * 
-	 * @return true if the markup has the current variation
-	 */
-	private boolean markupHasCurrentVariation()
-	{
-		return Objects.equal(getVariation(), 
-			markup.getMarkupResourceStream().getVariation());
-	}
-
 	/**
 	 * @return The 'id' attribute from the associated markup tag
 	 */
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AssociatedMarkupSourcingStrategy.java b/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AssociatedMarkupSourcingStrategy.java
index 5f547ac9fe..572bfcce4d 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AssociatedMarkupSourcingStrategy.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/html/panel/AssociatedMarkupSourcingStrategy.java
@@ -106,11 +106,14 @@ public abstract class AssociatedMarkupSourcingStrategy extends AbstractMarkupSou
 			throw new MarkupNotFoundException("Expected to find <wicket:" + tagName +
 				"> in associated markup file. Markup: " + associatedMarkup.toString());
 		}
-
+		
 		// If child == null, than return the markup fragment starting with <wicket:panel>
 		if (child == null)
 		{
-			return markup;
+			//clean any markup previously loaded for children
+			clearChildrenMarkup(parent);
+			
+			return markup;			
 		}
 
 		// Find the markup for the child component
@@ -129,6 +132,19 @@ public abstract class AssociatedMarkupSourcingStrategy extends AbstractMarkupSou
 		return findMarkupInAssociatedFileHeader(parent, child);
 	}
 
+	/**
+	 * Iterate on parent's children and set their markup to null.
+	 * 
+	 * @param parent
+	 */
+	private void clearChildrenMarkup(MarkupContainer parent) 
+	{
+		for (Component child : parent) 
+		{
+			child.setMarkup(null);
+		}
+	}
+
 	/**
 	 * Search the child's markup in the header section of the markup
 	 * 
