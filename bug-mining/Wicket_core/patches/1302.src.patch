diff --git a/wicket-core/src/main/java/org/apache/wicket/page/PartialPageUpdate.java b/wicket-core/src/main/java/org/apache/wicket/page/PartialPageUpdate.java
index 9efcafbcd8..2bef5e2d1c 100644
--- a/wicket-core/src/main/java/org/apache/wicket/page/PartialPageUpdate.java
+++ b/wicket-core/src/main/java/org/apache/wicket/page/PartialPageUpdate.java
@@ -113,6 +113,8 @@ public abstract class PartialPageUpdate
 	protected final ResponseBuffer headerBuffer;
 
 	protected HtmlHeaderContainer header = null;
+	
+	private Component originalHeaderContainer  = null;
 
 	// whether a header contribution is being rendered
 	private boolean headerRendering = false;
@@ -123,7 +125,7 @@ public abstract class PartialPageUpdate
 	 * The page which components are being updated.
 	 */
 	private final Page page;
-
+	
 	/**
 	 * Constructor.
 	 *
@@ -133,7 +135,8 @@ public abstract class PartialPageUpdate
 	public PartialPageUpdate(final Page page)
 	{
 		this.page = page;
-
+		this.originalHeaderContainer = page.get(HtmlHeaderSectionHandler.HEADER_ID);
+		
 		WebResponse response = (WebResponse) page.getResponse();
 		bodyBuffer = new ResponseBuffer(response);
 		headerBuffer = new ResponseBuffer(response);
@@ -172,9 +175,9 @@ public abstract class PartialPageUpdate
 
 			writeFooter(response, encoding);
 		} finally {
-			if (header != null) {
+			if (header != null && originalHeaderContainer!= null) {
 				// restore a normal header
-				page.replace(new HtmlHeaderContainer(HtmlHeaderSectionHandler.HEADER_ID));
+				page.replace(originalHeaderContainer);
 				header = null;
 			}
 		}
diff --git a/wicket-core/src/test/java/org/apache/wicket/page/XmlPartialPageUpdateTest.java b/wicket-core/src/test/java/org/apache/wicket/page/XmlPartialPageUpdateTest.java
index 7725f267b2..301094567e 100644
--- a/wicket-core/src/test/java/org/apache/wicket/page/XmlPartialPageUpdateTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/page/XmlPartialPageUpdateTest.java
@@ -16,6 +16,8 @@
  */
 package org.apache.wicket.page;
 
+import org.apache.wicket.Component;
+import org.apache.wicket.markup.parser.filter.HtmlHeaderSectionHandler;
 import org.apache.wicket.mock.MockWebResponse;
 import org.apache.wicket.util.tester.WicketTestCase;
 import org.junit.Test;
@@ -23,13 +25,15 @@ import org.junit.Test;
 /**
  * Test for {@link XmlPartialPageUpdate}.
  */
-public class XmlPartialPageUpdateTest extends WicketTestCase {
+public class XmlPartialPageUpdateTest extends WicketTestCase 
+{
 
 	/**
 	 * CData start "]]>" has to be encoded in "]]]]><![CDATA[>".
 	 */
 	@Test
-	public void encodeCdataEnd() {
+	public void encodeCdataEnd() 
+	{
 		PageForPartialUpdate page = new PageForPartialUpdate();
 		
 		XmlPartialPageUpdate update = new XmlPartialPageUpdate(page);
@@ -48,4 +52,27 @@ public class XmlPartialPageUpdateTest extends WicketTestCase {
 				"</head>]]></header-contribution></ajax-response>";
 		assertEquals(expected, response.getTextResponse().toString());
 	}
+	/**
+	 * 
+	 * see https://issues.apache.org/jira/browse/WICKET-6162
+	 */
+	@Test
+	public void keepTheSameHeaderContainer() throws Exception
+	{
+		PageForPartialUpdate page = new PageForPartialUpdate();
+		
+		tester.startPage(page);
+		
+		Component originalHeader = page.get(HtmlHeaderSectionHandler.HEADER_ID);
+		
+		XmlPartialPageUpdate update = new XmlPartialPageUpdate(page);		
+		
+		update.add(page.container, page.container.getMarkupId());
+		
+		MockWebResponse response = new MockWebResponse();
+		
+		update.writeTo(response, "UTF-8");
+		
+		assertEquals(originalHeader, page.get(HtmlHeaderSectionHandler.HEADER_ID));
+	}
 }
