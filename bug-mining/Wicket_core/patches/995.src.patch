diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/RenderPageRequestHandler.java b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/RenderPageRequestHandler.java
index 94dec229fd..3cceadda81 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/RenderPageRequestHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/RenderPageRequestHandler.java
@@ -17,6 +17,8 @@
 package org.apache.wicket.core.request.handler;
 
 import org.apache.wicket.Application;
+import org.apache.wicket.Page;
+import org.apache.wicket.Session;
 import org.apache.wicket.core.request.handler.logger.PageLogData;
 import org.apache.wicket.request.ILoggableRequestHandler;
 import org.apache.wicket.request.IRequestCycle;
@@ -102,6 +104,21 @@ public class RenderPageRequestHandler
 
 		this.redirectPolicy = redirectPolicy;
 		this.pageProvider = pageProvider;
+
+		if (pageProvider.hasPageInstance())
+		{
+			IRequestablePage page = pageProvider.getPageInstance();
+			if (page instanceof Page)
+			{
+				((Page) page).setStatelessHint(false);
+			}
+
+			if (Session.exists())
+			{
+				// WICKET-5499
+				Session.get().getPageManager().touchPage(page);
+			}
+		}
 	}
 
 	/**
diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebSession.java b/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebSession.java
index 1f50560ce7..590c31ed66 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebSession.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/http/WebSession.java
@@ -101,7 +101,6 @@ public class WebSession extends Session
 					setMetaData(BROWSER_WAS_POLLED_KEY, Boolean.TRUE);
 
 					WebPage browserInfoPage = newBrowserInfoPage();
-					getPageManager().touchPage(browserInfoPage);
 					throw new RestartResponseAtInterceptPageException(browserInfoPage);
 				}
 				// if we get here, the redirect already has been done; clear
@@ -125,4 +124,4 @@ public class WebSession extends Session
 	{
 		return new BrowserInfoPage();
 	}
-}
\ No newline at end of file
+}
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
index 97e0ebf060..ba9de5c53d 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
@@ -659,14 +659,6 @@ public class RequestCycle implements IRequestCycle, IEventSink
 	 */
 	public void setResponsePage(IRequestablePage page)
 	{
-		if (page instanceof Page)
-		{
-			((Page) page).setStatelessHint(false);
-		}
-
-		// make sure the page will be available on following request
-		Session.get().getPageManager().touchPage(page);
-
 		scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(new PageProvider(page),
 			RenderPageRequestHandler.RedirectPolicy.AUTO_REDIRECT));
 	}
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
index 382611c3ea..2ad7536684 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
@@ -1,8 +1,5 @@
 <html xmlns:wicket>
 <body>
-  <wicket:enclosure child="input">
-    <input wicket:id="input" type="checkbox" name="input"/>
-    <span wicket:id="label"></span>
-  </wicket:enclosure>
+  
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
index 382611c3ea..6f82c85338 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
@@ -2,7 +2,7 @@
 <body>
   <wicket:enclosure child="input">
     <input wicket:id="input" type="checkbox" name="input"/>
-    <span wicket:id="label"></span>
+    
   </wicket:enclosure>
 </body>
 </html>
