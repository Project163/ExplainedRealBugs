diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
index f239c4dea3..50402f65ee 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
@@ -294,18 +294,22 @@ public class PageProvider implements IPageProvider
 	private IRequestablePage getStoredPage(final int pageId)
 	{
 		IRequestablePage storedPageInstance = getPageSource().getPageInstance(pageId);
-		if (storedPageInstance != null &&
-			(pageClass == null || pageClass.equals(storedPageInstance.getClass())))
+		if (storedPageInstance != null)
 		{
-			pageInstance = storedPageInstance;
-			pageInstanceIsFresh = false;
-			if (pageInstance != null)
+			if (pageClass == null || pageClass.equals(storedPageInstance.getClass()))
 			{
+				pageInstance = storedPageInstance;
+				pageInstanceIsFresh = false;
 				if (renderCount != null && pageInstance.getRenderCount() != renderCount)
 				{
 					throw new StalePageException(pageInstance);
 				}
 			}
+			else
+			{
+				// the found page class doesn't match the requested one
+				storedPageInstance = null;
+			}
 		}
 		return storedPageInstance;
 	}
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java b/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
index 178339a918..fc22a5837f 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
@@ -21,6 +21,7 @@ import java.text.ParseException;
 
 import org.apache.wicket.MarkupContainer;
 import org.apache.wicket.MockPage;
+import org.apache.wicket.MockPageWithLink;
 import org.apache.wicket.Page;
 import org.apache.wicket.RestartResponseAtInterceptPageException;
 import org.apache.wicket.WicketTestCase;
@@ -227,6 +228,30 @@ public class PageProviderTest extends WicketTestCase
 		assertFalse(provider.isPageInstanceFresh());
 	}
 
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-4488
+	 *
+	 * There is a stored page with id = 0 and class Page1.
+	 * A following request to page2?0 should not use the stored page with id=0 because
+	 * the requested and the found page classes do not match.
+	 */
+	@Test
+	public void ignorePageFoundByIdIfItsClassDoesntMatch()
+	{
+		TestMapperContext mapperContext = new TestMapperContext();
+		Page page = new TestPage();
+		mapperContext.getPageManager().touchPage(page);
+		mapperContext.getPageManager().commitRequest();
+
+		// by cleaning session cache we make sure of not being testing the same in-memory instance
+		mapperContext.cleanSessionCache();
+
+		PageProvider provider = new PageProvider(page.getPageId(), MockPageWithLink.class, 0);
+		assertFalse(provider.hasPageInstance());
+		assertEquals(MockPageWithLink.class, provider.getPageInstance().getClass());
+		assertTrue(provider.isPageInstanceFresh());
+	}
+
 	/** */
 	public static class TestPage extends WebPage implements IMarkupResourceStreamProvider
 	{
