diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java b/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java
index 55ce2da7cd..3099c39cc8 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/EnclosureHandler.java
@@ -132,26 +132,29 @@ public final class EnclosureHandler extends AbstractMarkupFilter implements ICom
 			}
 		}
 		// Are we inside a wicket:enclosure tag?
-		else if ((tag.getId() != null) && (isWicketTag == false) && (stack != null) &&
-			(!tag.isAutoComponentTag()))
+		else if (stack != null)
 		{
 			ComponentTag lastEnclosure = stack.lastElement();
 
 			// If the enclosure tag has NO child attribute, then ...
 			if (lastEnclosure.getAttribute(CHILD_ATTRIBUTE) == null)
 			{
-				// We encountered more than one child component inside
-				// the enclosure and are not able to automatically
-				// determine the child component to delegate the
-				// isVisible() to => Exception
-				if (childId != null)
+				String id = tag.getAttribute(getWicketNamespace() + ":id");
+				if (id != null)
 				{
-					throw new WicketParseException(
-						"Use <wicket:enclosure child='xxx'> to name the child component:", tag);
+					// We encountered more than one child component inside
+					// the enclosure and are not able to automatically
+					// determine the child component to delegate the
+					// isVisible() to => Exception
+					if (childId != null)
+					{
+						throw new WicketParseException("Use <" + getWicketNamespace() +
+							":enclosure child='xxx'> to name the child component:", tag);
+					}
+					// Remember the child id. The open tag will be updated
+					// once the close tag is found. See above.
+					childId = id;
 				}
-				// Remember the child id. The open tag will be updated
-				// once the close tag is found. See above.
-				childId = tag.getId();
 			}
 		}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_1.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_1.html
index 1d9b795b15..0982d7ae99 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_1.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_1.html
@@ -26,5 +26,10 @@
   <wicket:enclosure child="label9">
     <span wicket:id="label9">Test Label 2</span><p>
   </wicket:enclosure>
+
+  <wicket:enclosure child="label10">
+    <wicket:container wicket:id="label10">Test Label 3</wicket:container>
+  </wicket:enclosure>
+
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.html
index 77fe67f475..bff0679e42 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.html
@@ -28,5 +28,10 @@
   <wicket:enclosure>
     <span wicket:id="label9">Test</span><p>
   </wicket:enclosure>
+
+  <wicket:enclosure>
+    <wicket:container wicket:id="label10">Test</wicket:container>
+  </wicket:enclosure>
+
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.java
index 1fa0f43a37..650bdbf0e6 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.java
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePage_1.java
@@ -46,5 +46,6 @@ public class EnclosurePage_1 extends WebPage
 		add(container);
 		container.add(new Label("label8", "Test Label 2"));
 		add(new Label("label9", "Test Label 2"));
+		add(new Label("label10", "Test Label 3"));
 	}
 }
