diff --git a/wicket-core/src/main/java/org/apache/wicket/Session.java b/wicket-core/src/main/java/org/apache/wicket/Session.java
index 9d76c97c47..76f339cb4f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Session.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Session.java
@@ -557,24 +557,7 @@ public abstract class Session implements IClusterable, IEventSink, IMetadataCont
 	 */
 	public final boolean isSessionInvalidated()
 	{
-		RequestCycle requestCycle = RequestCycle.get();
-		return isSessionInvalidated(requestCycle);
-	}
-
-	/**
-	 * Whether the session is invalid now, or will be invalidated by the end of the request. Clients
-	 * should rarely need to use this method if ever.
-	 * 
-	 * @param requestCycle
-	 *            The current request cycle
-	 * @return Whether the session is invalid when the current request is done
-	 * 
-	 * @see #invalidate()
-	 * @see #invalidateNow()
-	 */
-	public static boolean isSessionInvalidated(RequestCycle requestCycle)
-	{
-		return Boolean.TRUE.equals(requestCycle.getMetaData(SESSION_INVALIDATED));
+		return Boolean.TRUE.equals(RequestCycle.get().getMetaData(SESSION_INVALIDATED));
 	}
 
 	/**
@@ -686,16 +669,9 @@ public abstract class Session implements IClusterable, IEventSink, IMetadataCont
 	}
 
 	/**
-	 * Any detach logic for session subclasses. This is called on the end of handling a request,
-	 * when the RequestCycle is about to be detached from the current thread.
+	 * End the current request.
 	 */
-	public void detach()
-	{
-		detachFeedback();
-
-		pageAccessSynchronizer.get().unlockAllPages();
-		RequestCycle.get().setMetaData(PAGES_UNLOCKED, true);
-
+	public void endRequest() {
 		if (isSessionInvalidated())
 		{
 			invalidateNow();
@@ -706,6 +682,18 @@ public abstract class Session implements IClusterable, IEventSink, IMetadataCont
 			updateId();
 		}
 	}
+	
+	/**
+	 * Any detach logic for session subclasses. This is called on the end of handling a request,
+	 * when the RequestCycle is about to be detached from the current thread.
+	 */
+	public void detach()
+	{
+		detachFeedback();
+
+		pageAccessSynchronizer.get().unlockAllPages();
+		RequestCycle.get().setMetaData(PAGES_UNLOCKED, true);
+	}
 
 	private void detachFeedback()
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java b/wicket-core/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java
index c6faaad681..71f9d93f09 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/http/WicketFilter.java
@@ -272,13 +272,11 @@ public class WicketFilter implements Filter
 		final FilterChain chain) throws IOException, ServletException
 	{
 		boolean reqProcessed;
-		boolean respFlushed = false;
 		try
 		{
 			reqProcessed = requestCycle.processRequest();
-			if (reqProcessed && !Session.isSessionInvalidated(requestCycle))
+			if (reqProcessed)
 			{
-				respFlushed = true;
 				webResponse.flush();
 			}
 		}
@@ -295,10 +293,6 @@ public class WicketFilter implements Filter
 				chain.doFilter(httpServletRequest, httpServletResponse);
 			}
 		}
-		else if (!respFlushed)
-		{
-			webResponse.flush();
-		}
 		return reqProcessed;
 	}
 
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
index d913a926e4..2c0a8c78c3 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
@@ -785,6 +785,10 @@ public class RequestCycle implements IRequestCycle, IEventSink, IMetadataContext
 	 */
 	protected void onEndRequest()
 	{
+		if (Session.exists())
+		{
+			Session.get().endRequest();
+		}
 	}
 
 	/**
diff --git a/wicket-core/src/test/java/org/apache/wicket/protocol/http/SessionDestroyTest.java b/wicket-core/src/test/java/org/apache/wicket/protocol/http/SessionDestroyTest.java
index 0eee65cbd3..608b145422 100644
--- a/wicket-core/src/test/java/org/apache/wicket/protocol/http/SessionDestroyTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/protocol/http/SessionDestroyTest.java
@@ -60,17 +60,17 @@ class SessionDestroyTest extends WicketTestCase
 		verify(session, never()).invalidateNow();
 		assertEquals(true, session.isSessionInvalidated());
 
-		session.detach();
+		session.endRequest();
 
-		// the session has been detached so #destroy() has been called and 'sessionInvalidated' is reset
+		// the session has ended the request so #destroy() has been called and 'sessionInvalidated' is reset
 		verify(session, times(1)).invalidateNow();
 		assertEquals(false, session.isSessionInvalidated());
 
-		// no matter how many times #detach() is called #destroy() should not be called
-		session.detach();
+		// no matter how many times #endRequest() is called #destroy() should not be called
+		session.endRequest();
 		verify(session, times(1)).invalidateNow();
-		session.detach();
-		session.detach();
+		session.endRequest();
+		session.endRequest();
 		verify(session, times(1)).invalidateNow();
 		assertEquals(false, session.isSessionInvalidated());
 
