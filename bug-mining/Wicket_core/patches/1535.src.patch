diff --git a/wicket-core/src/main/java/org/apache/wicket/Application.java b/wicket-core/src/main/java/org/apache/wicket/Application.java
index 78fd57f99e..fa4ce29461 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Application.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Application.java
@@ -1566,6 +1566,12 @@ public abstract class Application implements UnboundListener, IEventSink, IMetad
 		requestCycle.getListeners().add(requestCycleListeners);
 		requestCycle.getListeners().add(new IRequestCycleListener()
 		{
+			@Override
+			public void onEndRequest(RequestCycle cycle)
+			{
+				internalGetPageManager().end();
+			}
+			
 			@Override
 			public void onDetach(final RequestCycle requestCycle)
 			{
diff --git a/wicket-core/src/main/java/org/apache/wicket/page/IPageManager.java b/wicket-core/src/main/java/org/apache/wicket/page/IPageManager.java
index c675cd93d2..ef6094a981 100644
--- a/wicket-core/src/main/java/org/apache/wicket/page/IPageManager.java
+++ b/wicket-core/src/main/java/org/apache/wicket/page/IPageManager.java
@@ -72,6 +72,12 @@ public interface IPageManager
 	 */
 	void clear();
 
+	/**
+	 * End the request.
+	 */
+	default void end() {
+	}
+	
 	/**
 	 * Detach at end of request.
 	 */
diff --git a/wicket-core/src/main/java/org/apache/wicket/page/PageManager.java b/wicket-core/src/main/java/org/apache/wicket/page/PageManager.java
index 642b3c1178..02bf13cc92 100644
--- a/wicket-core/src/main/java/org/apache/wicket/page/PageManager.java
+++ b/wicket-core/src/main/java/org/apache/wicket/page/PageManager.java
@@ -79,6 +79,12 @@ public class PageManager implements IPageManager
 		store.revertPage(createPageContext(), page);
 	}
 	
+	@Override
+	public void end()
+	{
+		store.end(createPageContext());
+	}
+	
 	@Override
 	public void detach()
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/pageStore/DelegatingPageStore.java b/wicket-core/src/main/java/org/apache/wicket/pageStore/DelegatingPageStore.java
index 5ec3a79768..3402b2c300 100644
--- a/wicket-core/src/main/java/org/apache/wicket/pageStore/DelegatingPageStore.java
+++ b/wicket-core/src/main/java/org/apache/wicket/pageStore/DelegatingPageStore.java
@@ -75,6 +75,12 @@ public abstract class DelegatingPageStore implements IPageStore
 		delegate.revertPage(context, page);
 	}
 	
+	@Override
+	public void end(IPageContext context)
+	{
+		delegate.end(context);
+	}
+	
 	@Override
 	public void detach(IPageContext context)
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/pageStore/IPageStore.java b/wicket-core/src/main/java/org/apache/wicket/pageStore/IPageStore.java
index 3872c8a0ea..19f4079d9e 100644
--- a/wicket-core/src/main/java/org/apache/wicket/pageStore/IPageStore.java
+++ b/wicket-core/src/main/java/org/apache/wicket/pageStore/IPageStore.java
@@ -93,6 +93,15 @@ public interface IPageStore
 	 */
 	IManageablePage getPage(IPageContext context, int id);
 
+	/**
+	 * End the current context.
+	 * 
+	 * @param context
+	 */
+	default void end(IPageContext context)
+	{
+	}
+
 	/**
 	 * Detach from the current context.
 	 * 
diff --git a/wicket-core/src/main/java/org/apache/wicket/pageStore/RequestPageStore.java b/wicket-core/src/main/java/org/apache/wicket/pageStore/RequestPageStore.java
index 54dc9da343..d5c4d786e5 100644
--- a/wicket-core/src/main/java/org/apache/wicket/pageStore/RequestPageStore.java
+++ b/wicket-core/src/main/java/org/apache/wicket/pageStore/RequestPageStore.java
@@ -59,11 +59,6 @@ public class RequestPageStore extends DelegatingPageStore
 	@Override
 	public void addPage(IPageContext context, IManageablePage page)
 	{
-		// make sure an HTTP session is bound before committing the response
-		if (isPageStateless(page) == false)
-		{
-			context.getSessionId(true);
-		}
 		getRequestData(context).add(page);
 	}
 
@@ -91,6 +86,20 @@ public class RequestPageStore extends DelegatingPageStore
 		getDelegate().revertPage(context, page);
 	}
 	
+	@Override
+	public void end(IPageContext context)
+	{
+		RequestData requestData = getRequestData(context);
+		for (IManageablePage page : requestData.pages())
+		{
+			if (isPageStateless(page) == false)
+			{
+				// last opportunity to create a session
+				context.getSessionId(true);
+			}
+		}
+	}
+	
 	@Override
 	public void detach(IPageContext context)
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
index b9f9841bae..d913a926e4 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
@@ -261,6 +261,16 @@ public class RequestCycle implements IRequestCycle, IEventSink, IMetadataContext
 		}
 		finally
 		{
+			try
+			{
+				onEndRequest();
+				listeners.onEndRequest(this);
+			}
+			catch (RuntimeException e)
+			{
+				log.error("Exception occurred during onEndRequest", e);
+			}
+
 			set(null);
 		}
 
@@ -646,16 +656,6 @@ public class RequestCycle implements IRequestCycle, IEventSink, IMetadataContext
 	 */
 	public void onDetach()
 	{
-		try
-		{
-			onEndRequest();
-			listeners.onEndRequest(this);
-		}
-		catch (RuntimeException e)
-		{
-			log.error("Exception occurred during onEndRequest", e);
-		}
-
 		try
 		{
 			requestHandlerExecutor.detach();
