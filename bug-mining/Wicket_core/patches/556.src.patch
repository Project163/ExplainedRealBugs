diff --git a/wicket-core/src/main/java/org/apache/wicket/request/resource/ContextRelativeResource.java b/wicket-core/src/main/java/org/apache/wicket/request/resource/ContextRelativeResource.java
index 753caf098d..8b3e87bdd9 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/resource/ContextRelativeResource.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/resource/ContextRelativeResource.java
@@ -82,42 +82,39 @@ public class ContextRelativeResource extends AbstractResource implements IStatic
 	{
 		final ResourceResponse resourceResponse = new ResourceResponse();
 
-		if (resourceResponse.dataNeedsToBeWritten(attributes))
+		final WebExternalResourceStream webExternalResourceStream =
+			new WebExternalResourceStream(path);
+		resourceResponse.setContentType(webExternalResourceStream.getContentType());
+		resourceResponse.setLastModified(webExternalResourceStream.lastModifiedTime());
+		resourceResponse.setFileName(path);
+		resourceResponse.setWriteCallback(new WriteCallback()
 		{
-			final WebExternalResourceStream webExternalResourceStream = 
-				new WebExternalResourceStream(path);
-			resourceResponse.setContentType(webExternalResourceStream.getContentType());
-			resourceResponse.setLastModified(webExternalResourceStream.lastModifiedTime());
-			resourceResponse.setFileName(path);
-			resourceResponse.setWriteCallback(new WriteCallback()
+			@Override
+			public void writeData(final Attributes attributes)
 			{
-				@Override
-				public void writeData(final Attributes attributes)
+				InputStream inputStream = null;
+				ByteArrayOutputStream baos = new ByteArrayOutputStream();
+				try
 				{
-					InputStream inputStream = null;
-					ByteArrayOutputStream baos = new ByteArrayOutputStream();
-					try
-					{
-						inputStream = webExternalResourceStream.getInputStream();
-						Streams.copy(inputStream, baos);
-						attributes.getResponse().write(baos.toByteArray());
-					}
-					catch (ResourceStreamNotFoundException rsnfx)
-					{
-						throw new WicketRuntimeException(rsnfx);
-					}
-					catch (IOException iox)
-					{
-						throw new WicketRuntimeException(iox);
-					}
-					finally
-					{
-						IOUtils.closeQuietly(inputStream);
-						IOUtils.closeQuietly(baos);
-					}
+					inputStream = webExternalResourceStream.getInputStream();
+					Streams.copy(inputStream, baos);
+					attributes.getResponse().write(baos.toByteArray());
 				}
-			});
-		}
+				catch (ResourceStreamNotFoundException rsnfx)
+				{
+					throw new WicketRuntimeException(rsnfx);
+				}
+				catch (IOException iox)
+				{
+					throw new WicketRuntimeException(iox);
+				}
+				finally
+				{
+					IOUtils.closeQuietly(inputStream);
+					IOUtils.closeQuietly(baos);
+				}
+			}
+		});
 
 		return resourceResponse;
 	}
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java b/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java
index 46dcb7a9c8..640639b9fc 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/resource/PackageResource.java
@@ -217,16 +217,22 @@ public class PackageResource extends AbstractResource implements IStaticCacheabl
 	{
 		final ResourceResponse resourceResponse = new ResourceResponse();
 
-		if (resourceResponse.dataNeedsToBeWritten(attributes))
-		{
-			// get resource stream
-			final IResourceStream resourceStream = getResourceStream();
+		final IResourceStream resourceStream = getResourceStream();
 
-			// bail out if resource stream could not be found
-			if (resourceStream == null)
-				return sendResourceError(resourceResponse, HttpServletResponse.SC_NOT_FOUND,
+		// bail out if resource stream could not be found
+		if (resourceStream == null)
+		{
+			return sendResourceError(resourceResponse, HttpServletResponse.SC_NOT_FOUND,
 					"Unable to find resource");
+		}
+
+		// add Last-Modified header (to support HEAD requests and If-Modified-Since)
+		final Time lastModified = resourceStream.lastModifiedTime();
 
+		resourceResponse.setLastModified(lastModified);
+
+		if (resourceResponse.dataNeedsToBeWritten(attributes))
+		{
 			String contentType = resourceStream.getContentType();
 
 			if (contentType == null && Application.exists())
@@ -237,12 +243,6 @@ public class PackageResource extends AbstractResource implements IStaticCacheabl
 			// set Content-Type (may be null)
 			resourceResponse.setContentType(contentType);
 
-			// add Last-Modified header (to support HEAD requests and If-Modified-Since)
-			final Time lastModified = resourceStream.lastModifiedTime();
-
-			if (lastModified != null)
-				resourceResponse.setLastModified(lastModified);
-
 			try
 			{
 				// read resource data
