diff --git a/wicket-core/src/main/java/org/apache/wicket/Localizer.java b/wicket-core/src/main/java/org/apache/wicket/Localizer.java
index d6228a2403..fb908a18bc 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Localizer.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Localizer.java
@@ -26,6 +26,7 @@ import java.util.concurrent.ConcurrentMap;
 import java.util.concurrent.atomic.AtomicLong;
 
 import org.apache.wicket.markup.html.list.LoopItem;
+import org.apache.wicket.markup.repeater.AbstractRepeater;
 import org.apache.wicket.model.IModel;
 import org.apache.wicket.resource.loader.IStringResourceLoader;
 import org.apache.wicket.settings.IResourceSettings;
@@ -488,14 +489,15 @@ public class Localizer
 				 * are irrelevant when generating resource cache keys (b) they cause a lot of
 				 * redundant keys to be generated
 				 */
-				final boolean skip = cursor instanceof LoopItem;
+				final Component parent = cursor.getParent();
+				final boolean skip = parent instanceof AbstractRepeater;
 
 				if (skip == false)
 				{
 					buffer.append(':').append(cursor.getId());
 				}
 
-				cursor = cursor.getParent();
+				cursor = parent;
 			}
 
 			buffer.append('-').append(locale);
diff --git a/wicket-core/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java b/wicket-core/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java
index 7cad28a4e2..a497d5cf13 100644
--- a/wicket-core/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java
+++ b/wicket-core/src/main/java/org/apache/wicket/resource/loader/ComponentStringResourceLoader.java
@@ -27,7 +27,7 @@ import org.apache.wicket.Page;
 import org.apache.wicket.markup.html.WebComponent;
 import org.apache.wicket.markup.html.WebMarkupContainer;
 import org.apache.wicket.markup.html.WebPage;
-import org.apache.wicket.markup.html.list.LoopItem;
+import org.apache.wicket.markup.repeater.AbstractRepeater;
 import org.apache.wicket.resource.IPropertiesFactory;
 import org.apache.wicket.resource.Properties;
 import org.apache.wicket.util.lang.Args;
@@ -283,7 +283,7 @@ public class ComponentStringResourceLoader implements IStringResourceLoader
 		
 		while (current.getParent() != null)
 		{
-			final boolean skip = current instanceof LoopItem;
+			final boolean skip = current.getParent() instanceof AbstractRepeater;
 
 			if (skip == false)
 			{
