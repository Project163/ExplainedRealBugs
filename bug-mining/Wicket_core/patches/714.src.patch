diff --git a/wicket-core/src/main/java/org/apache/wicket/core/util/string/JavaScriptUtils.java b/wicket-core/src/main/java/org/apache/wicket/core/util/string/JavaScriptUtils.java
index f07d5151f1..42d9274b8b 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/util/string/JavaScriptUtils.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/util/string/JavaScriptUtils.java
@@ -143,7 +143,7 @@ public class JavaScriptUtils
 			response.write("charset=\"" + Strings.escapeMarkup(charset) + "\" ");
 		}
 		response.write("src=\"");
-		response.write(Strings.escapeMarkup(url));
+		response.write(url);
 		response.write("\"></script>");
 		response.write("\n");
 	}
@@ -201,7 +201,7 @@ public class JavaScriptUtils
 		response.write("<script type=\"text/javascript\" ");
 		if (id != null)
 		{
-			response.write("id=\"" + id + "\"");
+			response.write("id=\"" + Strings.escapeMarkup(id) + "\"");
 		}
 		response.write(">");
 		response.write(SCRIPT_CONTENT_PREFIX);
diff --git a/wicket-core/src/test/java/org/apache/wicket/core/util/string/JavaScriptUtilsTest.java b/wicket-core/src/test/java/org/apache/wicket/core/util/string/JavaScriptUtilsTest.java
index 5fe9ae00b6..c984a0cfd2 100644
--- a/wicket-core/src/test/java/org/apache/wicket/core/util/string/JavaScriptUtilsTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/core/util/string/JavaScriptUtilsTest.java
@@ -39,6 +39,6 @@ public class JavaScriptUtilsTest extends Assert
 		String charset = "some&bad%%charset";
 		JavaScriptUtils.writeJavaScriptUrl(response, url, id, defer, charset);
 
-		assertEquals("<script type=\"text/javascript\" id=\"some&amp;bad%id\" defer=\"defer\" charset=\"some&amp;bad%%charset\" src=\"some/url;jsessionid=1234?p1=v1&amp;p2=v2\"></script>\n", response.toString());
+		assertEquals("<script type=\"text/javascript\" id=\"some&amp;bad%id\" defer=\"defer\" charset=\"some&amp;bad%%charset\" src=\"some/url;jsessionid=1234?p1=v1&p2=v2\"></script>\n", response.toString());
 	}
 }
