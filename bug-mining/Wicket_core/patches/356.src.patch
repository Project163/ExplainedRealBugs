diff --git a/wicket-core/src/main/java/org/apache/wicket/Component.java b/wicket-core/src/main/java/org/apache/wicket/Component.java
index d551ea131d..7dd2c9e217 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Component.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Component.java
@@ -3286,17 +3286,14 @@ public abstract class Component
 	{
 		int id = getBehaviorId(behaviour);
 		Page page = getPage();
+		PageAndComponentProvider provider = new PageAndComponentProvider(page, this);
 		IRequestHandler handler;
 		if (page.isPageStateless())
 		{
-			PageAndComponentProvider provider = new PageAndComponentProvider(page.getPageId(),
-				page.getPageClass(), page.getPageParameters(), page.getRenderCount(),
-				getPageRelativePath());
 			handler = new BookmarkableListenerInterfaceRequestHandler(provider, listener, id);
 		}
 		else
 		{
-			PageAndComponentProvider provider = new PageAndComponentProvider(page, this);
 			handler = new ListenerInterfaceRequestHandler(provider, listener, id);
 		}
 		return getRequestCycle().urlFor(handler);
@@ -3329,17 +3326,14 @@ public abstract class Component
 	public final CharSequence urlFor(final RequestListenerInterface listener)
 	{
 		Page page = getPage();
+		PageAndComponentProvider provider = new PageAndComponentProvider(page, this);
 		IRequestHandler handler;
 		if (page.isPageStateless())
 		{
-			PageAndComponentProvider provider = new PageAndComponentProvider(page.getPageId(),
-				page.getPageClass(), page.getPageParameters(), page.getRenderCount(),
-				getPageRelativePath());
 			handler = new BookmarkableListenerInterfaceRequestHandler(provider, listener);
 		}
 		else
 		{
-			PageAndComponentProvider provider = new PageAndComponentProvider(page, this);
 			handler = new ListenerInterfaceRequestHandler(provider, listener);
 		}
 		return getRequestCycle().urlFor(handler);
diff --git a/wicket-core/src/main/java/org/apache/wicket/mock/MockPageManager.java b/wicket-core/src/main/java/org/apache/wicket/mock/MockPageManager.java
index cf18216620..1d0f665fa1 100644
--- a/wicket-core/src/main/java/org/apache/wicket/mock/MockPageManager.java
+++ b/wicket-core/src/main/java/org/apache/wicket/mock/MockPageManager.java
@@ -78,7 +78,7 @@ public class MockPageManager implements IPageManager
 
 	public void touchPage(IManageablePage page)
 	{
-		if (page.isPageStateless() == false)
+		if (true || page.isPageStateless() == false)
 		{
 			pages.put(page.getPageId(), page);
 		}
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
index d432afd9b7..61cb02f95f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/cycle/RequestCycle.java
@@ -556,6 +556,10 @@ public class RequestCycle implements IRequestCycle, IEventSink
 	 */
 	public void setResponsePage(IRequestablePage page)
 	{
+		if (page instanceof Page)
+		{
+			((Page)page).setStatelessHint(false);
+		}
 		scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(new PageProvider(page),
 			RenderPageRequestHandler.RedirectPolicy.AUTO_REDIRECT));
 	}
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/handler/ListenerInterfaceRequestHandler.java b/wicket-core/src/main/java/org/apache/wicket/request/handler/ListenerInterfaceRequestHandler.java
index 4db9c1e6d0..de801efa5e 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/handler/ListenerInterfaceRequestHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/handler/ListenerInterfaceRequestHandler.java
@@ -153,22 +153,11 @@ public class ListenerInterfaceRequestHandler
 			if (isAjax == false && listenerInterface.isRenderPageAfterInvocation())
 			{
 				// schedule page render after current request handler is done. this can be
-				// overridden
-				// during invocation of listener
+				// overridden during invocation of listener
 				// method (i.e. by calling RequestCycle#setResponsePage)
-				final IPageProvider pageProvider;
-				final RedirectPolicy policy;
-				if (page.isPageStateless())
-				{
-					policy = RedirectPolicy.NEVER_REDIRECT;
-					pageProvider = new PageProvider(page.getPageId(), page.getClass(),
-						page.getPageParameters(), page.getRenderCount());
-				}
-				else
-				{
-					policy = RedirectPolicy.AUTO_REDIRECT;
-					pageProvider = new PageProvider(page);
-				}
+				final IPageProvider pageProvider = new PageProvider(page);
+				final RedirectPolicy policy = page.isPageStateless()
+					? RedirectPolicy.NEVER_REDIRECT : RedirectPolicy.AUTO_REDIRECT;
 
 				requestCycle.scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(
 					pageProvider, policy));
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/handler/PageProvider.java b/wicket-core/src/main/java/org/apache/wicket/request/handler/PageProvider.java
index a573d17aa7..1383c6a487 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/handler/PageProvider.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/handler/PageProvider.java
@@ -17,7 +17,6 @@
 package org.apache.wicket.request.handler;
 
 import org.apache.wicket.Application;
-import org.apache.wicket.Page;
 import org.apache.wicket.Session;
 import org.apache.wicket.page.IPageManager;
 import org.apache.wicket.protocol.http.PageExpiredException;
@@ -151,10 +150,6 @@ public class PageProvider implements IPageProvider
 		pageInstance = page;
 		pageId = page.getPageId();
 		renderCount = page.getRenderCount();
-		if (pageInstance instanceof Page)
-		{
-			((Page)pageInstance).setStatelessHint(false);
-		}
 	}
 
 	/**
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
index 2ad7536684..382611c3ea 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-2.html
@@ -1,5 +1,8 @@
 <html xmlns:wicket>
 <body>
-  
+  <wicket:enclosure child="input">
+    <input wicket:id="input" type="checkbox" name="input"/>
+    <span wicket:id="label"></span>
+  </wicket:enclosure>
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
index 6f82c85338..382611c3ea 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/EnclosurePageExpectedResult_10-3.html
@@ -2,7 +2,7 @@
 <body>
   <wicket:enclosure child="input">
     <input wicket:id="input" type="checkbox" name="input"/>
-    
+    <span wicket:id="label"></span>
   </wicket:enclosure>
 </body>
 </html>
