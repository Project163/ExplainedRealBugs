diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/HtmlHeaderSectionHandler.java b/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/HtmlHeaderSectionHandler.java
index 5b79f80d43..b695713a89 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/HtmlHeaderSectionHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/parser/filter/HtmlHeaderSectionHandler.java
@@ -31,6 +31,7 @@ import org.apache.wicket.markup.html.internal.HtmlHeaderItemsContainer;
 import org.apache.wicket.markup.parser.AbstractMarkupFilter;
 import org.apache.wicket.markup.parser.XmlTag.TagType;
 import org.apache.wicket.markup.resolver.HtmlHeaderResolver;
+import org.apache.wicket.util.tester.BaseWicketTester;
 
 
 /**
@@ -172,7 +173,7 @@ public final class HtmlHeaderSectionHandler extends AbstractMarkupFilter
 	 */
 	private void handleHeaderItemsTag(ComponentTag tag)
 	{
-		if (foundHeaderItemsTag)
+		if ((tag.isOpen() || tag.isOpenClose()) && foundHeaderItemsTag)
 		{
 			throw new MarkupException(new MarkupStream(markup),
 					"More than one <wicket:header-items/> detected in the <head> element. Only one is allowed.");
diff --git a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
index 155f10af34..fcfdb56580 100644
--- a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
+++ b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
@@ -1441,7 +1441,9 @@ public class BaseWicketTester
 			}
 			catch (Exception e)
 			{
-				fail("Error while parsing the markup for the autogenerated page: " + e.getMessage());
+				String errorMessage = "Error while parsing the markup for the autogenerated page: " + e.getMessage();
+				log.error(errorMessage, e);
+				fail(errorMessage);
 			}
 		}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.html
new file mode 100644
index 0000000000..4ae92c59a5
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.html
@@ -0,0 +1,13 @@
+<!DOCTYPE html>
+<html xmlns:wicket="http://wicket.apache.org">
+<head>
+    <meta charset="utf-8" />
+    <title>Apache Wicket Quickstart</title>
+    <wicket:header-items/>
+    <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:regular,bold' rel='stylesheet' type='text/css' />
+    <link rel="stylesheet" href="style.css" type="text/css" media="screen" title="Stylesheet" />
+</head>
+<body>
+    <wicket:child/>
+</body>
+</html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.java
new file mode 100644
index 0000000000..5b26b3bc82
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/BasePageWithHeaderItems.java
@@ -0,0 +1,33 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.markup.html.internal.headeritems;
+
+import org.apache.wicket.markup.html.WebPage;
+import org.apache.wicket.request.mapper.parameter.PageParameters;
+
+/**
+ * https://issues.apache.org/jira/browse/WICKET-5989
+ */
+public class BasePageWithHeaderItems extends WebPage
+{
+	private static final long serialVersionUID = 1L;
+
+	public BasePageWithHeaderItems(final PageParameters parameters) {
+		super(parameters);
+	}
+}
+
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/HtmlHeaderItemsContainerTest.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/HtmlHeaderItemsContainerTest.java
index df889e58a4..514159087c 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/HtmlHeaderItemsContainerTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/HtmlHeaderItemsContainerTest.java
@@ -20,6 +20,10 @@ import static org.hamcrest.number.OrderingComparison.lessThan;
 
 import org.apache.wicket.markup.MarkupException;
 import org.apache.wicket.util.tester.WicketTestCase;
+import org.apache.wicket.Page;
+import org.apache.wicket.request.mapper.parameter.PageParameters;
+import org.apache.wicket.util.tester.DummyPanelPage;
+import org.apache.wicket.util.tester.WicketTester;
 import org.junit.Test;
 
 /**
@@ -197,4 +201,35 @@ public class HtmlHeaderItemsContainerTest extends WicketTestCase
 			assertEquals(idxMetaFromSubPage, lastIdxMetaFromSubPage);
 		}
 	}
+
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-5989
+	 */
+	@Test
+	public void pageWithBasePageWithHeaderItems() {
+		WicketTesterForBasePageWithHeaderItems tester = new WicketTesterForBasePageWithHeaderItems();
+		try
+		{
+			tester.startComponentInPage(new PanelA(DummyPanelPage.TEST_PANEL_ID));
+		}
+		finally
+		{
+			tester.destroy();
+		}
+	}
+
+	private static class WicketTesterForBasePageWithHeaderItems extends WicketTester
+	{
+		@Override
+		protected Page createPage() {
+			return new PageExtendingBasePageWithHeaderItems(new PageParameters());
+		}
+
+
+		@Override
+		protected String createPageMarkup(final String componentId) {
+			return new PageExtendingBasePageWithHeaderItems(new PageParameters()).getMarkup().toString(true);
+		}
+
+	}
 }
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.html b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.html
new file mode 100644
index 0000000000..32e8b21377
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.html
@@ -0,0 +1,5 @@
+<html xmlns:wicket="http://wicket.apache.org">
+<wicket:extend>
+    <span wicket:id="panel"> [... replace by testing panel ...] </span>
+</wicket:extend>
+</html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.java
new file mode 100644
index 0000000000..54df07ffdf
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/internal/headeritems/PageExtendingBasePageWithHeaderItems.java
@@ -0,0 +1,30 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.markup.html.internal.headeritems;
+
+import org.apache.wicket.request.mapper.parameter.PageParameters;
+
+/**
+ * https://issues.apache.org/jira/browse/WICKET-5989
+ */
+public class PageExtendingBasePageWithHeaderItems extends BasePageWithHeaderItems
+{
+	public PageExtendingBasePageWithHeaderItems(PageParameters parameters) {
+		super(parameters);
+	}
+}
+
