diff --git a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
index dd0addd956..1196208ee2 100644
--- a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
+++ b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
@@ -617,7 +617,7 @@ public class BaseWicketTester
 			{
 				if (Strings.isEmpty(entry.getKey()) == false)
 				{
-					request.addHeader(entry.getKey(), entry.getValue());
+					request.setHeader(entry.getKey(), entry.getValue());
 				}
 			}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/XmlDeclResponseTest.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/XmlDeclResponseTest.java
index 3925aa5f07..3b4b79f783 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/XmlDeclResponseTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/XmlDeclResponseTest.java
@@ -33,6 +33,7 @@ public class XmlDeclResponseTest extends WicketTestCase
 	private static final String markupWithout = "<html><body></body></html>";
 
 	private static final String acceptString = "text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
+	public static final String ACCEPT = "Accept";
 
 	private int insertXmlDecl = 0;
 
@@ -75,22 +76,22 @@ public class XmlDeclResponseTest extends WicketTestCase
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
@@ -110,22 +111,22 @@ public class XmlDeclResponseTest extends WicketTestCase
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
@@ -145,22 +146,22 @@ public class XmlDeclResponseTest extends WicketTestCase
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", acceptString);
+		tester.addRequestHeader(ACCEPT, acceptString);
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWith, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.HTML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
 
-		tester.addRequestHeader("HTTP_ACCEPT", "xx");
+		tester.addRequestHeader(ACCEPT, "xx");
 		tester.startPage(new SimplePage(MarkupType.XML_MIME));
 		doc = tester.getLastResponseAsString();
 		assertEquals(markupWithout, doc);
