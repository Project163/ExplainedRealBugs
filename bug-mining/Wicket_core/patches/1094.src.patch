diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
index 64900b2486..c0f3c347d1 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
@@ -497,7 +497,7 @@ public abstract class AbstractAjaxResponse
 	{
 		private static final long serialVersionUID = 1L;
 
-		private final transient AbstractAjaxResponse ajaxResponse;
+		private transient AbstractAjaxResponse ajaxResponse;
 
 		/**
 		 * Constructor.
@@ -518,7 +518,19 @@ public abstract class AbstractAjaxResponse
 		@Override
 		protected IHeaderResponse newHeaderResponse()
 		{
-			return ajaxResponse.getHeaderResponse();
+		    if (ajaxResponse != null)
+            {
+		        return ajaxResponse.getHeaderResponse();
+            }
+		    
+		    return super.newHeaderResponse();
+		}
+		
+		@Override
+		protected void onDetach()
+		{
+		    super.onDetach();
+		    ajaxResponse = null;
 		}
 	}
 
