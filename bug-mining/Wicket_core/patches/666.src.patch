diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxTimerBehaviorTest.java b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxTimerBehaviorTest.java
index 951761e1f2..351c1492fe 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxTimerBehaviorTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxTimerBehaviorTest.java
@@ -217,16 +217,16 @@ public class AjaxTimerBehaviorTest extends WicketTestCase
 		}
 		else
 		{
+			updateScript = updateScript.replaceAll("]", "]^");
 			validateTimerScript(document, updateScript);
 		}
 
-
 		tester.executeBehavior(timer);
 
-
 		if (inBodyOnLoad)
 		{
 			updateScript = timer.getUpdateScript();
+			updateScript = updateScript.replaceAll("]", "]^");
 		}
 
 		// Validate the document
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
index 109a66cde5..b58a5fcadc 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
@@ -12,4 +12,9 @@ Wicket.Ajax.DebugWindow.enabled=true;
 Wicket.Ajax.baseUrl="wicket/page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1";
 /*]^]^>*/
 </script>
-</head>]]></header-contribution><evaluate><![CDATA[Wicket.timerHandle_linja11 = setTimeout('Wicket.Ajax.ajax({\"u\":\"./page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000)]]></evaluate></ajax-response>
\ No newline at end of file
+<script type="text/javascript" id="AbstractAjaxTimerBehavior-timers">
+/*<![CDATA[*/
+if (typeof(Wicket.TimerHandles) === 'undefined') {Wicket.TimerHandles = {}}
+/*]^]^>*/
+</script>
+</head>]]></header-contribution><evaluate encoding="wicket1"><![CDATA[Wicket.TimerHandles['linja11']^ = setTimeout('Wicket.Ajax.ajax({\"u\":\"./page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000)]]></evaluate></ajax-response>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult.html b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult.html
index 549de322cb..ca4677c44a 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult.html
@@ -12,13 +12,18 @@ Wicket.Ajax.DebugWindow.enabled=true;
 /*<![CDATA[*/
 Wicket.Ajax.baseUrl="wicket/bookmarkable/org.apache.wicket.ajax.markup.html.componentMap.SimpleTestPage?0";
 /*]]>*/
+</script>
+<script type="text/javascript" id="AbstractAjaxTimerBehavior-timers">
+/*<![CDATA[*/
+if (typeof(Wicket.TimerHandles) === 'undefined') {Wicket.TimerHandles = {}}
+/*]]>*/
 </script>
 
   <title>ajax-test</title>
 <script type="text/javascript" >
 /*<![CDATA[*/
 Wicket.Event.add(window, "load", function(event) { 
-Wicket.timerHandle_linja11 = setTimeout('Wicket.Ajax.ajax({\"u\":\"../page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000);
+Wicket.TimerHandles['linja11'] = setTimeout('Wicket.Ajax.ajax({\"u\":\"../page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000);
 ;});
 /*]]>*/
 </script>
