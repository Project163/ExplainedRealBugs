diff --git a/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java b/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
index e2cc83cd29..c6818f6787 100644
--- a/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
+++ b/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
@@ -24,6 +24,7 @@ import java.util.regex.Pattern;
 import org.apache.wicket.WicketRuntimeException;
 import org.apache.wicket.markup.parser.XmlPullParser;
 import org.apache.wicket.markup.parser.XmlTag;
+import org.apache.wicket.markup.parser.filter.HtmlHandler;
 import org.apache.wicket.util.lang.Args;
 import org.apache.wicket.util.string.Strings;
 import org.apache.wicket.util.value.IValueMap;
@@ -671,7 +672,7 @@ public class TagTester
 						openTag = null;
 						closeTag = null;
 					}
-					else if (openTag != null)
+					else if (openTag != null && !HtmlHandler.requiresCloseTag(openTag.getName()))
 					{
 						TagTester tester = new TagTester(parser, openTag, openTag);
 						testers.add(tester);
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java b/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
index 9a60a8845e..e7863a8349 100644
--- a/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
@@ -21,11 +21,11 @@ import static org.hamcrest.Matchers.equalTo;
 import static org.hamcrest.Matchers.is;
 import static org.hamcrest.Matchers.notNullValue;
 
+import java.util.List;
+
 import org.junit.Assert;
 import org.junit.Test;
 
-import java.util.List;
-
 /**
  * Test of TagTester
  */
@@ -330,4 +330,14 @@ public class TagTesterTest extends Assert
 		TagTester tagTester2 = TagTester.createTagByAttribute(MARKUP_1, "id", "test");
 		assertEquals(tagTester.getMarkup(), tagTester2.getValue());
 	}
+	
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-6173
+	 */
+	@Test
+	public void valueFromTagsByAttribute()
+	{
+		TagTester tagTester = TagTester.createTagsByAttribute(MARKUP_1, "id", "test2");
+		assertEquals("mock", tagTester.getValue());
+	}
 }
