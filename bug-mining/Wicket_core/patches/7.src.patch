diff --git a/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractResourceReferenceMapper.java b/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractResourceReferenceMapper.java
index b0b40ecbac..ce4896c5d6 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractResourceReferenceMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractResourceReferenceMapper.java
@@ -47,14 +47,22 @@ public abstract class AbstractResourceReferenceMapper extends AbstractComponentM
 			{
 				res.append(attributes.getLocale().toString());
 			}
-			if (!Strings.isEmpty(attributes.getStyle()))
+			boolean styleEmpty = Strings.isEmpty(attributes.getStyle());
+			if (!styleEmpty)
 			{
-				res.append("-");
+				res.append('-');
 				res.append(attributes.getStyle());
 			}
 			if (!Strings.isEmpty(attributes.getVariation()))
 			{
-				res.append("-");
+				if (styleEmpty)
+				{
+					res.append("--");
+				}
+				else
+				{
+					res.append('-');
+				}
 				res.append(attributes.getVariation());
 			}
 			return res.toString();
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java b/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
index 7cc704a2fa..28c6043943 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
@@ -422,6 +422,18 @@ public class BasicResourceReferenceMapperTest extends AbstractResourceReferenceM
 			url.toString());
 	}
 
+	/**
+	 * Tests request to url encoding when style is null but variation is not
+	 */
+	public void testEncode9()
+	{
+		ResourceReferenceRequestHandler handler = new ResourceReferenceRequestHandler(reference5,
+			null);
+
+		Url url = encoder.mapHandler(handler);
+		assertEquals("wicket/resource/" + CLASS_NAME + "/reference5?en--variation", url.toString());
+	}
+
 	public void testLastModifiedTimestampIsPartOfUrl()
 	{
 		long millis = 12345678L;
