diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
index b660edcd7c..b7c51dec8f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractAjaxResponse.java
@@ -539,7 +539,7 @@ public abstract class AbstractAjaxResponse
 			{
 				if (!wasItemRendered(item))
 				{
-					AbstractAjaxResponse.this.appendJavaScript(((OnEventHeaderItem) item).getJavaScript());
+					AbstractAjaxResponse.this.appendJavaScript(((OnEventHeaderItem) item).getCompleteJavaScript());
 					markItemRendered(item);
 				}
 			}
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
index ed651005e0..f6b8b91f49 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
@@ -95,8 +95,23 @@ public class OnEventHeaderItem extends HeaderItem
 	@Override
 	public void render(Response response)
 	{
-		JavaScriptUtils.writeJavaScript(response, "Wicket.Event.add(" + getTarget() + ", \"" +
-			getEvent() + "\", function(event) { " + getJavaScript() + ";});");
+		JavaScriptUtils.writeJavaScript(response, getCompleteJavaScript());
+	}
+
+	/**
+	 * @return The JavaScript that registers the event handler.
+	 */
+	public CharSequence getCompleteJavaScript()
+	{
+		StringBuilder result = new StringBuilder();
+		result.append("Wicket.Event.add(")
+				.append(getTarget())
+				.append(", \"")
+				.append(getEvent())
+				.append("\", function(event) { ")
+				.append(getJavaScript())
+				.append(";});");
+		return result;
 	}
 
 	@Override
