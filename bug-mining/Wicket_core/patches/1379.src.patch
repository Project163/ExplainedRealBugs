diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/AbstractJavaScriptReferenceHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/AbstractJavaScriptReferenceHeaderItem.java
index 06f898d6a3..de85ad89e5 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/AbstractJavaScriptReferenceHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/AbstractJavaScriptReferenceHeaderItem.java
@@ -16,6 +16,8 @@
  */
 package org.apache.wicket.markup.head;
 
+import java.util.Objects;
+
 /**
  * A {@link org.apache.wicket.markup.head.HeaderItem} that supports <em>async</em>,
  * <em>defer</em> and <em>charset</em> attributes
@@ -86,4 +88,21 @@ public abstract class AbstractJavaScriptReferenceHeaderItem extends JavaScriptHe
 		this.charset = charset;
 		return this;
 	}
+
+	@Override
+	public boolean equals(Object o)
+	{
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		AbstractJavaScriptReferenceHeaderItem that = (AbstractJavaScriptReferenceHeaderItem) o;
+		return async == that.async &&
+				defer == that.defer &&
+				Objects.equals(charset, that.charset);
+	}
+
+	@Override
+	public int hashCode()
+	{
+		return Objects.hash(async, defer, charset);
+	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssContentHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssContentHeaderItem.java
index 80c36099c6..0367f8d158 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssContentHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssContentHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.Arrays;
 import java.util.Collections;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 import org.apache.wicket.core.util.string.CssUtils;
@@ -90,16 +91,17 @@ public class CssContentHeaderItem extends CssHeaderItem
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getCss().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		CssContentHeaderItem that = (CssContentHeaderItem) o;
+		return Objects.equals(css, that.css);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof CssContentHeaderItem)
-			return ((CssContentHeaderItem)obj).getCss().equals(getCss());
-		return false;
+		return Objects.hash(css);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssHeaderItem.java
index aab17c9eee..d2f05efe5f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssHeaderItem.java
@@ -16,6 +16,8 @@
  */
 package org.apache.wicket.markup.head;
 
+import java.util.Objects;
+
 import org.apache.wicket.core.request.handler.IPartialPageRequestHandler;
 import org.apache.wicket.core.util.string.CssUtils;
 import org.apache.wicket.request.Response;
@@ -296,4 +298,20 @@ public abstract class CssHeaderItem extends HeaderItem
 		}
 		response.write("\n");
 	}
+
+	@Override
+	public boolean equals(Object o)
+	{
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		CssHeaderItem that = (CssHeaderItem) o;
+		return Objects.equals(condition, that.condition) &&
+				Objects.equals(markupId, that.markupId);
+	}
+
+	@Override
+	public int hashCode()
+	{
+		return Objects.hash(condition, markupId);
+	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssReferenceHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssReferenceHeaderItem.java
index ee23131468..0e0c1ce11b 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssReferenceHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssReferenceHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.Arrays;
 import java.util.List;
+import java.util.Objects;
 
 import org.apache.wicket.request.IRequestHandler;
 import org.apache.wicket.request.Response;
@@ -128,14 +129,18 @@ public class CssReferenceHeaderItem extends CssHeaderItem implements IReferenceH
 	@Override
 	public int hashCode()
 	{
-		return getReference().hashCode();
+		return Objects.hash(super.hashCode(), reference, media, pageParameters);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof CssReferenceHeaderItem)
-			return ((CssReferenceHeaderItem)obj).getReference().equals(getReference());
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		if (!super.equals(o)) return false;
+		CssReferenceHeaderItem that = (CssReferenceHeaderItem) o;
+		return Objects.equals(reference, that.reference) &&
+				Objects.equals(media, that.media) &&
+				Objects.equals(pageParameters, that.pageParameters);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssUrlReferenceHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssUrlReferenceHeaderItem.java
index 04216686eb..386fa659b8 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/CssUrlReferenceHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/CssUrlReferenceHeaderItem.java
@@ -17,6 +17,7 @@
 package org.apache.wicket.markup.head;
 
 import java.util.Arrays;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 import org.apache.wicket.request.UrlUtils;
@@ -90,14 +91,17 @@ public class CssUrlReferenceHeaderItem extends CssHeaderItem
 	@Override
 	public int hashCode()
 	{
-		return getUrl().hashCode();
+		return Objects.hash(super.hashCode(), url, media);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof CssUrlReferenceHeaderItem)
-			return ((CssUrlReferenceHeaderItem)obj).getUrl().equals(getUrl());
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		if (!super.equals(o)) return false;
+		CssUrlReferenceHeaderItem that = (CssUrlReferenceHeaderItem) o;
+		return Objects.equals(url, that.url) &&
+				Objects.equals(media, that.media);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptContentHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptContentHeaderItem.java
index a514e188e1..2b3f8d56c5 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptContentHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptContentHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.Arrays;
 import java.util.Collections;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 import org.apache.wicket.core.util.string.JavaScriptUtils;
@@ -91,16 +92,18 @@ public class JavaScriptContentHeaderItem extends JavaScriptHeaderItem
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getJavaScript().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		if (!super.equals(o)) return false;
+		JavaScriptContentHeaderItem that = (JavaScriptContentHeaderItem) o;
+		return Objects.equals(javaScript, that.javaScript);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof JavaScriptContentHeaderItem)
-			return ((JavaScriptContentHeaderItem)obj).getJavaScript().equals(getJavaScript());
-		return false;
+		return Objects.hash(super.hashCode(), javaScript);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptHeaderItem.java
index 920ba5df55..0b43443bb3 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptHeaderItem.java
@@ -16,6 +16,8 @@
  */
 package org.apache.wicket.markup.head;
 
+import java.util.Objects;
+
 import org.apache.wicket.core.request.handler.IPartialPageRequestHandler;
 import org.apache.wicket.core.util.string.JavaScriptUtils;
 import org.apache.wicket.request.Response;
@@ -371,4 +373,20 @@ public abstract class JavaScriptHeaderItem extends HeaderItem
 			response.write("<![endif]-->\n");
 		}
 	}
+
+	@Override
+	public boolean equals(Object o)
+	{
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		JavaScriptHeaderItem that = (JavaScriptHeaderItem) o;
+		return Objects.equals(condition, that.condition) &&
+				Objects.equals(markupId, that.markupId);
+	}
+
+	@Override
+	public int hashCode()
+	{
+		return Objects.hash(condition, markupId);
+	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptReferenceHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptReferenceHeaderItem.java
index f130149d3d..ca52cfb4c1 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptReferenceHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptReferenceHeaderItem.java
@@ -20,6 +20,7 @@ import java.util.Arrays;
 import java.util.Collections;
 import java.util.List;
 
+import org.apache.wicket.core.util.lang.WicketObjects;
 import org.apache.wicket.request.IRequestHandler;
 import org.apache.wicket.request.Response;
 import org.apache.wicket.request.cycle.RequestCycle;
@@ -28,6 +29,7 @@ import org.apache.wicket.request.mapper.parameter.PageParameters;
 import org.apache.wicket.request.resource.ResourceReference;
 import org.apache.wicket.resource.bundles.IResourceBundle;
 import org.apache.wicket.util.lang.Args;
+import org.apache.wicket.util.lang.Objects;
 import org.apache.wicket.util.string.Strings;
 
 /**
@@ -133,14 +135,17 @@ public class JavaScriptReferenceHeaderItem extends AbstractJavaScriptReferenceHe
 	@Override
 	public int hashCode()
 	{
-		return getReference().hashCode();
+		return java.util.Objects.hash(super.hashCode(), reference, pageParameters);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof JavaScriptReferenceHeaderItem)
-			return ((JavaScriptReferenceHeaderItem)obj).getReference().equals(getReference());
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		if (!super.equals(o)) return false;
+		JavaScriptReferenceHeaderItem that = (JavaScriptReferenceHeaderItem) o;
+		return java.util.Objects.equals(reference, that.reference) &&
+				java.util.Objects.equals(pageParameters, that.pageParameters);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptUrlReferenceHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptUrlReferenceHeaderItem.java
index fb4caf9132..9c7bdbff20 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptUrlReferenceHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/JavaScriptUrlReferenceHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.Arrays;
 import java.util.Collections;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 import org.apache.wicket.request.UrlUtils;
@@ -91,16 +92,18 @@ public class JavaScriptUrlReferenceHeaderItem extends AbstractJavaScriptReferenc
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getUrl().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		if (!super.equals(o)) return false;
+		JavaScriptUrlReferenceHeaderItem that = (JavaScriptUrlReferenceHeaderItem) o;
+		return Objects.equals(url, that.url);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof JavaScriptUrlReferenceHeaderItem)
-			return ((JavaScriptUrlReferenceHeaderItem)obj).getUrl().equals(getUrl());
-		return false;
+		return Objects.hash(super.hashCode(), url);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/MetaDataHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/MetaDataHeaderItem.java
index 35b3cbd3e5..1835a752ff 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/MetaDataHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/MetaDataHeaderItem.java
@@ -20,6 +20,7 @@ import java.util.ArrayList;
 import java.util.Collections;
 import java.util.List;
 import java.util.Map;
+import java.util.Objects;
 
 import org.apache.wicket.model.IModel;
 import org.apache.wicket.model.Model;
@@ -29,7 +30,7 @@ import org.apache.wicket.util.string.Strings;
 import org.apache.wicket.util.value.ValueMap;
 
 /**
- * {@link HeaderItem} for meta informations such as &lt;meta&gt; tags or 
+ * {@link HeaderItem} for meta information such as &lt;meta&gt; tags or
  * canonical &lt;link&gt;
  * 
  * @author andrea del bene
@@ -219,16 +220,21 @@ public class MetaDataHeaderItem extends HeaderItem
 
 		return headerItem;
 	}
-	
+
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		return obj instanceof MetaDataHeaderItem && ((MetaDataHeaderItem) obj).generateString().equals(generateString());
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		MetaDataHeaderItem that = (MetaDataHeaderItem) o;
+		return Objects.equals(tagAttributes, that.tagAttributes) &&
+				Objects.equals(tagMinimizedAttributes, that.tagMinimizedAttributes) &&
+				Objects.equals(tagName, that.tagName);
 	}
 
 	@Override
 	public int hashCode()
 	{
-		return generateString().hashCode();
+		return Objects.hash(tagAttributes, tagMinimizedAttributes, tagName);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnDomReadyHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnDomReadyHeaderItem.java
index 9d3d5d8aa0..45ec472665 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnDomReadyHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnDomReadyHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.Collections;
 import java.util.List;
+import java.util.Objects;
 
 import org.apache.wicket.Application;
 import org.apache.wicket.request.Response;
@@ -103,15 +104,16 @@ public class OnDomReadyHeaderItem extends HeaderItem
 	@Override
 	public int hashCode()
 	{
-		return getJavaScript().hashCode();
+		return Objects.hash(javaScript);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof OnDomReadyHeaderItem)
-			return ((OnDomReadyHeaderItem)obj).getJavaScript().equals(getJavaScript());
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		OnDomReadyHeaderItem that = (OnDomReadyHeaderItem) o;
+		return Objects.equals(javaScript, that.javaScript);
 	}
 
 	@Override
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
index b171616f93..b69e7a487d 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnEventHeaderItem.java
@@ -19,6 +19,7 @@ package org.apache.wicket.markup.head;
 import java.util.Collections;
 import java.util.List;
 import java.util.Locale;
+import java.util.Objects;
 
 import org.apache.wicket.Application;
 import org.apache.wicket.core.util.string.JavaScriptUtils;
@@ -161,19 +162,18 @@ public class OnEventHeaderItem extends HeaderItem
 	@Override
 	public int hashCode()
 	{
-		return getTarget().hashCode() ^ getEvent().hashCode() ^ getJavaScript().hashCode();
+		return Objects.hash(target, event, javaScript);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof OnEventHeaderItem)
-		{
-			OnEventHeaderItem other = (OnEventHeaderItem)obj;
-			return other.getTarget().equals(getTarget()) && other.getEvent().equals(getEvent()) &&
-				other.getJavaScript().equals(getJavaScript());
-		}
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		OnEventHeaderItem that = (OnEventHeaderItem) o;
+		return Objects.equals(target, that.target) &&
+				Objects.equals(event, that.event) &&
+				Objects.equals(javaScript, that.javaScript);
 	}
 
 	@Override
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnLoadHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnLoadHeaderItem.java
index 76e45c06ad..51e34bf467 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/OnLoadHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/OnLoadHeaderItem.java
@@ -18,13 +18,13 @@ package org.apache.wicket.markup.head;
 
 import java.util.Collections;
 import java.util.List;
+import java.util.Objects;
 
 import org.apache.wicket.Application;
 import org.apache.wicket.core.util.string.JavaScriptUtils;
 import org.apache.wicket.request.Response;
 import org.apache.wicket.request.resource.ResourceReference;
 import org.apache.wicket.settings.JavaScriptLibrarySettings;
-import org.apache.wicket.util.lang.Args;
 import org.apache.wicket.util.string.Strings;
 
 /**
@@ -102,17 +102,18 @@ public class OnLoadHeaderItem extends HeaderItem
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getJavaScript().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		OnLoadHeaderItem that = (OnLoadHeaderItem) o;
+		return Objects.equals(javaScript, that.javaScript);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof OnLoadHeaderItem)
-			return ((OnLoadHeaderItem)obj).getJavaScript().equals(getJavaScript());
-		return false;
+		return Objects.hash(javaScript);
 	}
 
 	@Override
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/PriorityHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/PriorityHeaderItem.java
index 70a72dca1b..93813e0c92 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/PriorityHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/PriorityHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head;
 
 import java.util.ArrayList;
 import java.util.List;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 
@@ -90,19 +91,18 @@ public class PriorityHeaderItem extends HeaderItem implements IWrappedHeaderItem
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getWrapped().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		PriorityHeaderItem that = (PriorityHeaderItem) o;
+		return Objects.equals(wrapped, that.wrapped);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof PriorityHeaderItem)
-		{
-			return ((PriorityHeaderItem)obj).getWrapped().equals(getWrapped());
-		}
-		return false;
+		return Objects.hash(wrapped);
 	}
 
 	@Override
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/StringHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/StringHeaderItem.java
index 7d7426ff96..c1502ff350 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/StringHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/StringHeaderItem.java
@@ -17,6 +17,7 @@
 package org.apache.wicket.markup.head;
 
 import java.util.Collections;
+import java.util.Objects;
 
 import org.apache.wicket.request.Response;
 import org.apache.wicket.util.lang.Args;
@@ -80,16 +81,17 @@ public class StringHeaderItem extends HeaderItem
 	}
 
 	@Override
-	public int hashCode()
+	public boolean equals(Object o)
 	{
-		return getString().hashCode();
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		StringHeaderItem that = (StringHeaderItem) o;
+		return Objects.equals(string, that.string);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public int hashCode()
 	{
-		if (obj instanceof StringHeaderItem)
-			return ((StringHeaderItem)obj).getString().equals(getString());
-		return false;
+		return Objects.hash(string);
 	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/head/filter/FilteredHeaderItem.java b/wicket-core/src/main/java/org/apache/wicket/markup/head/filter/FilteredHeaderItem.java
index 120f41de27..18745a27df 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/head/filter/FilteredHeaderItem.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/head/filter/FilteredHeaderItem.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.head.filter;
 
 import java.util.ArrayList;
 import java.util.List;
+import java.util.Objects;
 
 import org.apache.wicket.markup.head.HeaderItem;
 import org.apache.wicket.markup.head.IWrappedHeaderItem;
@@ -109,17 +110,17 @@ public class FilteredHeaderItem extends HeaderItem implements IWrappedHeaderItem
 	@Override
 	public int hashCode()
 	{
-		return getWrapped().hashCode();
+		return Objects.hash(wrapped, filterName);
 	}
 
 	@Override
-	public boolean equals(Object obj)
+	public boolean equals(Object o)
 	{
-		if (obj instanceof FilteredHeaderItem)
-		{
-			return ((FilteredHeaderItem)obj).getWrapped().equals(getWrapped());
-		}
-		return false;
+		if (this == o) return true;
+		if (o == null || getClass() != o.getClass()) return false;
+		FilteredHeaderItem that = (FilteredHeaderItem) o;
+		return Objects.equals(wrapped, that.wrapped) &&
+				Objects.equals(filterName, that.filterName);
 	}
 
 	@Override
