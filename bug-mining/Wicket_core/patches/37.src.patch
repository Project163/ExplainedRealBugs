diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/https/SwitchProtocolRequestHandler.java b/wicket-core/src/main/java/org/apache/wicket/protocol/https/SwitchProtocolRequestHandler.java
index 12247d3ab9..39a83a87fe 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/https/SwitchProtocolRequestHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/https/SwitchProtocolRequestHandler.java
@@ -21,6 +21,7 @@ import javax.servlet.http.HttpServletRequest;
 import org.apache.wicket.protocol.http.servlet.ServletWebRequest;
 import org.apache.wicket.request.IRequestCycle;
 import org.apache.wicket.request.IRequestHandler;
+import org.apache.wicket.request.IRequestHandlerDelegate;
 import org.apache.wicket.request.cycle.RequestCycle;
 import org.apache.wicket.request.http.WebRequest;
 import org.apache.wicket.request.http.WebResponse;
@@ -29,7 +30,7 @@ import org.apache.wicket.util.lang.Args;
 /**
  * Request handler that performs redirects across http and https
  */
-class SwitchProtocolRequestHandler implements IRequestHandler
+class SwitchProtocolRequestHandler implements IRequestHandlerDelegate
 {
 
 	/**
@@ -208,4 +209,9 @@ class SwitchProtocolRequestHandler implements IRequestHandler
 	{
 	}
 
+	/** {@inheritDoc} */
+	public IRequestHandler getDelegateHandler()
+	{
+		return handler;
+	}
 }
diff --git a/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractBookmarkableMapper.java b/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractBookmarkableMapper.java
index 58b9c99818..fdc008dfcd 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractBookmarkableMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/mapper/AbstractBookmarkableMapper.java
@@ -19,6 +19,7 @@ package org.apache.wicket.request.mapper;
 import org.apache.wicket.RequestListenerInterface;
 import org.apache.wicket.request.IRequestHandler;
 import org.apache.wicket.request.IRequestMapper;
+import org.apache.wicket.request.IRequestHandlerDelegate;
 import org.apache.wicket.request.Request;
 import org.apache.wicket.request.Url;
 import org.apache.wicket.request.component.IRequestablePage;
@@ -245,10 +246,15 @@ public abstract class AbstractBookmarkableMapper extends AbstractComponentMapper
 	}
 
 	/**
-	 * @see org.apache.wicket.request.IRequestMapper#mapHandler(org.apache.org.apache.wicket.request.IRequestHandler)
+	 * {@inheritDoc}
 	 */
-	public Url mapHandler(final IRequestHandler requestHandler)
+	public Url mapHandler(IRequestHandler requestHandler)
 	{
+		if (requestHandler instanceof IRequestHandlerDelegate)
+		{
+			requestHandler = ((IRequestHandlerDelegate)requestHandler).getDelegateHandler();
+		}
+
 		if (requestHandler instanceof BookmarkablePageRequestHandler)
 		{
 			// simple bookmarkable URL with no page instance information
