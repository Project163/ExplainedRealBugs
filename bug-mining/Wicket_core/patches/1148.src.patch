diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/html/WebPage.java b/wicket-core/src/main/java/org/apache/wicket/markup/html/WebPage.java
index d1aeea2062..05feebb649 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/html/WebPage.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/html/WebPage.java
@@ -19,6 +19,7 @@ package org.apache.wicket.markup.html;
 import org.apache.wicket.Component;
 import org.apache.wicket.Page;
 import org.apache.wicket.markup.MarkupType;
+import org.apache.wicket.markup.head.IHeaderResponse;
 import org.apache.wicket.markup.html.internal.HtmlHeaderContainer;
 import org.apache.wicket.markup.html.link.BookmarkablePageLink;
 import org.apache.wicket.markup.parser.filter.HtmlHeaderSectionHandler;
@@ -264,24 +265,22 @@ public class WebPage extends Page
 			header = new HtmlHeaderContainer(HtmlHeaderSectionHandler.HEADER_ID);
 			add(header);
 
-			Response orgResponse = getRequestCycle().getResponse();
+			RequestCycle requestCycle = getRequestCycle();
+			Response orgResponse = requestCycle.getResponse();
 			try
 			{
-				final StringResponse response = new StringResponse();
-				getRequestCycle().setResponse(response);
+				StringResponse tempResponse = new StringResponse();
+				requestCycle.setResponse(tempResponse);
 
 				// Render all header sections of all components on the page
 				AbstractHeaderRenderStrategy.get().renderHeader(header, null, getPage());
-				response.close();
 
-				if (response.getBuffer().length() > 0)
+				IHeaderResponse headerResponse = header.getHeaderResponse();
+				headerResponse.close();
+				CharSequence collectedHeaderOutput = tempResponse.getBuffer();
+				if (collectedHeaderOutput.length() > 0)
 				{
-					// @TODO it is not yet working properly. JDo to fix it
-					log.error("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
-					log.error("You probably forgot to add a <body> or <head> tag to your markup since no Header Container was \n" +
-						"found but components were found which want to write to the <head> section.\n" +
-						response.getBuffer());
-					log.error("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
+					reportMissingHead(collectedHeaderOutput);
 				}
 			}
 			catch (Exception e)
@@ -292,11 +291,28 @@ public class WebPage extends Page
 			finally
 			{
 				this.remove(header);
-				getRequestCycle().setResponse(orgResponse);
+				requestCycle.setResponse(orgResponse);
 			}
 		}
 	}
 
+	/**
+	 * Reports an error that there is no &lt;head&gt; and/or &lt;body&gt; in the page and
+	 * there is no where to write the header response.
+	 * 
+	 * @param collectedHeaderOutput
+	 *          The collected response that should have been written to the &lt;head&gt;
+	 * @see #validateHeaders()
+	 */
+	protected void reportMissingHead(final CharSequence collectedHeaderOutput)
+	{
+		log.error("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
+		log.error("You probably forgot to add a <body> or <head> tag to your markup since no Header Container was \n" +
+				"found but components were found which want to write to the <head> section.\n" +
+				collectedHeaderOutput);
+		log.error("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
+	}
+
 	/**
 	 * Creates and returns a bookmarkable link to this application's home page.
 	 * 
