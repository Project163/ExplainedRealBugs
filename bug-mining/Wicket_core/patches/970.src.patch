diff --git a/wicket-core/src/main/java/org/apache/wicket/Component.java b/wicket-core/src/main/java/org/apache/wicket/Component.java
index 62f1eba75c..e139f997ae 100644
--- a/wicket-core/src/main/java/org/apache/wicket/Component.java
+++ b/wicket-core/src/main/java/org/apache/wicket/Component.java
@@ -4200,15 +4200,10 @@ public abstract class Component
 	 */
 	void internalMarkRendering(boolean setRenderingFlag)
 	{
-		if (setRenderingFlag)
-		{
-			setFlag(FLAG_PREPARED_FOR_RENDER, false);
-			setFlag(FLAG_RENDERING, true);
-		}
-		else
-		{
-			setFlag(FLAG_RENDERING, false);
-		}
+		// WICKET-5460 no longer prepared for render
+		setFlag(FLAG_PREPARED_FOR_RENDER, false);
+
+		setFlag(FLAG_RENDERING, setRenderingFlag);
 	}
 
 	/**
diff --git a/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessDynmicLinksTest.java b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessDynmicLinksTest.java
new file mode 100644
index 0000000000..b39d3d6a50
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessDynmicLinksTest.java
@@ -0,0 +1,51 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.stateless;
+
+import org.apache.wicket.WicketTestCase;
+import org.apache.wicket.request.Url;
+import org.junit.Test;
+
+/**
+ * @author svenmeier
+ */
+public class StatelessDynmicLinksTest extends WicketTestCase
+{
+	/**
+	 * WICKET-5460
+	 */
+	@Test
+	public void foo() throws Exception
+	{
+		tester.getApplication().mountPage("/stateless", StatelessPageWithDynamicLinks.class);
+
+		tester.startPage(StatelessPageWithDynamicLinks.class);
+		assertTrue(tester.getLastResponseAsString().contains("LINK-1"));
+
+		tester.getRequest().setUrl(Url.parse("stateless?-0.ILinkListener-links:1"));
+		tester.processRequest();
+		assertTrue(tester.getLastResponseAsString().contains("LINK-2"));
+
+		tester.getRequest().setUrl(Url.parse("stateless?-0.ILinkListener-links:2"));
+		tester.processRequest();
+		assertTrue(tester.getLastResponseAsString().contains("LINK-3"));
+
+		tester.getRequest().setUrl(Url.parse("stateless?-0.ILinkListener-links:3"));
+		tester.processRequest();
+		assertTrue(tester.getLastResponseAsString().contains("LINK-4"));
+	}
+}
diff --git a/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.html b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.html
new file mode 100644
index 0000000000..70a07dc65c
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.html
@@ -0,0 +1,7 @@
+<html>
+<body>
+	<a wicket:id="links">
+	
+	</a>
+</body>
+</html>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.java b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.java
new file mode 100644
index 0000000000..866ae59bd9
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/stateless/StatelessPageWithDynamicLinks.java
@@ -0,0 +1,74 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.stateless;
+
+import org.apache.wicket.markup.ComponentTag;
+import org.apache.wicket.markup.MarkupStream;
+import org.apache.wicket.markup.html.WebPage;
+import org.apache.wicket.markup.html.link.StatelessLink;
+import org.apache.wicket.markup.repeater.RepeatingView;
+import org.apache.wicket.request.mapper.parameter.PageParameters;
+
+/**
+ * @author svenmeier
+ */
+public class StatelessPageWithDynamicLinks extends WebPage
+{
+	private static final long serialVersionUID = 1L;
+
+	private static int count = 1;
+
+	/**
+	 * Construct.
+	 * 
+	 * @param parameters
+	 */
+	public StatelessPageWithDynamicLinks(PageParameters parameters)
+	{
+		super(parameters);
+
+		setStatelessHint(true);
+
+		add(new RepeatingView("links")
+		{
+			@Override
+			protected void onPopulate()
+			{
+				removeAll();
+
+				for (int c = 0; c < count; c++)
+				{
+					add(new StatelessLink<Void>(newChildId())
+					{
+						@Override
+						public void onComponentTagBody(MarkupStream markupStream,
+							ComponentTag openTag)
+						{
+							super.replaceComponentTagBody(markupStream, openTag, "LINK-" + getId());
+						}
+
+						@Override
+						public void onClick()
+						{
+							count++;
+						}
+					});
+				}
+			}
+		});
+	}
+}
\ No newline at end of file
