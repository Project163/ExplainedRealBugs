diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/parser/TagAttributes.java b/wicket-core/src/main/java/org/apache/wicket/markup/parser/TagAttributes.java
index e10e73c11b..7c5a016afa 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/parser/TagAttributes.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/parser/TagAttributes.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.parser;
 
 import java.util.Map;
 
+import org.apache.wicket.util.string.Strings;
 import org.apache.wicket.util.value.IValueMap;
 import org.apache.wicket.util.value.ValueMap;
 import org.slf4j.Logger;
@@ -57,7 +58,7 @@ public class TagAttributes extends ValueMap
 	public final Object put(String key, Object value)
 	{
 		checkIdAttribute(key);
-		return super.put(key, value);
+		return putInternal(key, value);
 	}
 
 	/**
@@ -81,7 +82,7 @@ public class TagAttributes extends ValueMap
 	 */
 	public final Object putInternal(String key, Object value)
 	{
-		return super.put(key, value);
+		return super.put(key, unescapeHtml(value));
 	}
 
 	@Override
@@ -95,4 +96,24 @@ public class TagAttributes extends ValueMap
 
 		super.putAll(map);
 	}
+
+	/**
+	 * Unescapes the HTML entities from the <code>value</code> if it is a {@link CharSequence} and
+	 * there are any
+	 * 
+	 * @param value
+	 *            the attribute value
+	 * @return the HTML unescaped value or the non-modified input
+	 */
+	private static final Object unescapeHtml(Object value)
+	{
+		if (value instanceof CharSequence)
+		{
+			return Strings.unescapeMarkup(value.toString());
+		}
+		else
+		{
+			return value;
+		}
+	}
 }
\ No newline at end of file
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/parser/XmlTag.java b/wicket-core/src/main/java/org/apache/wicket/markup/parser/XmlTag.java
index ad64f6c204..40e32b9e3e 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/parser/XmlTag.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/parser/XmlTag.java
@@ -25,7 +25,6 @@ import org.apache.wicket.util.string.AppendingStringBuffer;
 import org.apache.wicket.util.string.StringValue;
 import org.apache.wicket.util.string.Strings;
 import org.apache.wicket.util.value.IValueMap;
-import org.apache.wicket.util.value.ValueMap;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
@@ -354,7 +353,7 @@ public class XmlTag
 		dest.copyOf = copyOf;
 		if (attributes != null)
 		{
-			dest.attributes = new ValueMap(attributes);
+			dest.attributes = new TagAttributes(attributes);
 		}
 	}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/ComponentTagAttributeEscapingTest.java b/wicket-core/src/test/java/org/apache/wicket/markup/ComponentTagAttributeEscapingTest.java
new file mode 100644
index 0000000000..b8b156a572
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/ComponentTagAttributeEscapingTest.java
@@ -0,0 +1,98 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.markup;
+
+import junit.framework.TestCase;
+
+import org.apache.wicket.MarkupContainer;
+import org.apache.wicket.markup.html.WebPage;
+import org.apache.wicket.markup.html.form.Button;
+import org.apache.wicket.markup.html.link.Link;
+import org.apache.wicket.util.resource.IResourceStream;
+import org.apache.wicket.util.resource.StringResourceStream;
+import org.apache.wicket.util.tester.WicketTester;
+
+/**
+ * @author Pedro Santos
+ */
+public class ComponentTagAttributeEscapingTest extends TestCase
+{
+
+	/**
+	 * @throws Exception
+	 */
+	public void testComponentAttributesNotDoubleEscaped() throws Exception
+	{
+		WicketTester tester = new WicketTester();
+		tester.startPage(ButtonValuePage.class);
+		String response = tester.getLastResponseAsString();
+		System.out.println(response);
+		assertTrue("One of the pound entity representations is missing: &pound; or &#163;",
+			response.contains("££"));
+		assertTrue("must not be double escaped", response.contains("Watch escaped value: &gt;&gt;"));
+		assertTrue("following the last assert logic, this one would true",
+			response.contains("alerting: &amp;"));
+		assertTrue("not double escape manually add attributes",
+			response.contains("some_attribute=\"&amp;\""));
+	}
+
+	/**
+	 * Just two distinct components with escaped characters in markup attribute.
+	 * */
+	public static class ButtonValuePage extends WebPage implements IMarkupResourceStreamProvider
+	{
+		/** */
+		private static final long serialVersionUID = 1L;
+
+		/**
+		 * Construct.
+		 */
+		public ButtonValuePage()
+		{
+			add(new Button("button"));
+			add(new Link<Void>("link")
+			{
+				/** */
+				private static final long serialVersionUID = 1L;
+
+				@Override
+				public void onClick()
+				{
+				}
+
+				@Override
+				protected void onComponentTag(ComponentTag tag)
+				{
+					super.onComponentTag(tag);
+					tag.put("some_attribute", "&amp;");
+				}
+			});
+		}
+
+		public IResourceStream getMarkupResourceStream(MarkupContainer container,
+			Class<?> containerClass)
+		{
+			return new StringResourceStream(
+				"<html>"//
+					+ "<body>"//
+					+ "<a wicket:id=\"link\" onclick=\"alert('alerting: &amp; &pound;&#163; ')\">link</a>"//
+					+ "<input type=\"submit\" wicket:id=\"button\" value=\"Watch escaped value: &gt;&gt;\"/>"//
+					+ "</body>" + //
+					"</html>");
+		}
+	}
+}
\ No newline at end of file
