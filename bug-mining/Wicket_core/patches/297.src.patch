diff --git a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
index ebbe98fa58..17f43d72da 100644
--- a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
+++ b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
@@ -1811,15 +1811,12 @@ public abstract class MarkupContainer extends Component implements Iterable<Comp
 	protected void onAfterRenderChildren()
 	{
 		// Loop through child components
-		final Iterator<? extends Component> iter = iterator();
-		while (iter.hasNext())
+		for (Component child : this)
 		{
-			// Get next child
-			final Component child = iter.next();
-
 			// Call end request on the child
 			child.afterRender();
 		}
+
 		super.onAfterRenderChildren();
 	}
 
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java b/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java
index 95cd456c1d..9e26187f23 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java
@@ -45,6 +45,9 @@ public class MarkupResourceStream implements IResourceStream, IFixedLocationReso
 
 	private static final Logger log = LoggerFactory.getLogger(MarkupResourceStream.class);
 
+	/** */
+	public static final String WICKET_XHTML_DTD = "http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd";
+
 	private static final Pattern DOCTYPE_REGEX = Pattern.compile("!DOCTYPE\\s+(.*)\\s*");
 
 	/** The associated markup resource stream */
@@ -68,10 +71,7 @@ public class MarkupResourceStream implements IResourceStream, IFixedLocationReso
 	/** The encoding as found in <?xml ... encoding="" ?>. Null, else */
 	private String encoding;
 
-	/**
-	 * Wicket namespace: <html
-	 * xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd>
-	 */
+	/** Wicket namespace: see WICKET_XHTML_DTD */
 	private String wicketNamespace;
 
 	/** == wicket namespace name + ":id" */
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java
index 0e82dc3d30..be0490b983 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java
@@ -19,7 +19,6 @@ package org.apache.wicket.markup.transformer;
 import org.apache.wicket.Component;
 import org.apache.wicket.WicketRuntimeException;
 import org.apache.wicket.behavior.Behavior;
-import org.apache.wicket.markup.ComponentTag;
 import org.apache.wicket.protocol.http.BufferedWebResponse;
 import org.apache.wicket.request.cycle.RequestCycle;
 import org.apache.wicket.request.http.WebResponse;
@@ -58,12 +57,6 @@ public abstract class AbstractTransformerBehavior extends Behavior implements IT
 		return new BufferedWebResponse(originalResponse);
 	}
 
-	@Override
-	public void onComponentTag(final Component component, final ComponentTag tag)
-	{
-		tag.put("xmlns:wicket", "http://wicket.apache.org");
-	}
-
 	@Override
 	public void beforeRender(Component component)
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java
index 873c47652e..d09c100d56 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java
@@ -18,6 +18,7 @@ package org.apache.wicket.markup.transformer;
 
 import org.apache.wicket.AttributeModifier;
 import org.apache.wicket.Component;
+import org.apache.wicket.markup.MarkupResourceStream;
 import org.apache.wicket.markup.MarkupType;
 import org.apache.wicket.model.IModel;
 import org.apache.wicket.model.Model;
@@ -74,7 +75,7 @@ public class XsltOutputTransformerContainer extends AbstractOutputTransformerCon
 		// Make the XSLT processor happy and allow him to handle the wicket
 		// tags and attributes which are in the wicket namespace
 		add(AttributeModifier.replace("xmlns:wicket",
-			Model.of("http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd")));
+			Model.of(MarkupResourceStream.WICKET_XHTML_DTD)));
 	}
 
 	/**
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java
index 97a16808dd..d1c3efabd4 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java
@@ -20,6 +20,7 @@ import org.apache.wicket.Component;
 import org.apache.wicket.Page;
 import org.apache.wicket.WicketRuntimeException;
 import org.apache.wicket.markup.ComponentTag;
+import org.apache.wicket.markup.MarkupResourceStream;
 
 /**
  * An IBehavior which can be added to any component except ListView. It allows to post-process
@@ -69,10 +70,10 @@ public class XsltTransformerBehavior extends AbstractTransformerBehavior
 	@Override
 	public void onComponentTag(final Component component, final ComponentTag tag)
 	{
-		tag.put("xmlns:wicket", "http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd");
-
 		// Make the XSLT processor happy and allow it to handle the wicket tags
 		// and attributes that are in the wicket namespace
+		tag.put("xmlns:wicket", MarkupResourceStream.WICKET_XHTML_DTD);
+
 		super.onComponentTag(component, tag);
 	}
 
diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java b/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java
index 6ab2ef81b3..1fa461c32c 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/http/BufferedWebResponse.java
@@ -132,7 +132,6 @@ public class BufferedWebResponse extends WebResponse implements IMetaDataBufferi
 		@Override
 		protected void invoke(WebResponse response)
 		{
-
 			AppendingStringBuffer responseBuffer = new AppendingStringBuffer(builder);
 
 			List<IResponseFilter> responseFilters = Application.get()
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_1.html b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_1.html
index 59f93a49f3..ecf5cbd180 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_1.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_1.html
@@ -13,7 +13,7 @@
   <span wicket:id="test">body<span wicket:id="myLabel2">Test Label2</span></span>
   <span wicket:id="test2">Whatever</span>
   <span wicket:id="test3"><WICKET:BORDER>BEFORE BODY - <WICKET:BODY>BORDER</WICKET:BODY> - AFTER BODY</WICKET:BORDER></span>
-  <span xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd" wicket:id="test4"><span wicket:id="myBorder2" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span></span>
-  <span xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd" wicket:id="test5"><span wicket:id="myBorder3" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span></span>
+  <span xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd" wicket:id="test4"><span wicket:id="myBorder2" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span></span>
+  <span xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd" wicket:id="test5"><span wicket:id="myBorder3" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span></span>
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_2.html b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_2.html
index 8ed081fb51..d1932d627e 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_2.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/PageExpectedResult_2.html
@@ -5,7 +5,7 @@
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
 <html 
-    xmlns:wicket="http://wicket.apache.org" 
+    xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd" 
     xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 
 <body>
@@ -13,6 +13,6 @@
   <span wicket:id="test">body<span wicket:id="myLabel2">Test Label2</span></span>
   <span wicket:id="test2">Whatever</span>
   <span wicket:id="test3"><WICKET:BORDER>BEFORE BODY - <WICKET:BODY>BORDER</WICKET:BODY> - AFTER BODY</WICKET:BORDER></span>
-  <span xmlns:wicket="http://wicket.apache.org" wicket:id="myBorder2" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span>
+  <span xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd" wicket:id="myBorder2" testAttr="myValue"><wicket:border>before body - <wicket:body>border</wicket:body> - after body</wicket:border></span>
 </body>
 </html>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/Page_2.html b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/Page_2.html
index 7c35a71ad7..2335b22244 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/Page_2.html
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/Page_2.html
@@ -5,7 +5,7 @@
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
 <html 
-    xmlns:wicket="http://wicket.apache.org" 
+    xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd" 
     xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 
 <body>
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/myBorder2.xsl b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/myBorder2.xsl
index 3e4325eb4d..6831cd7325 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/myBorder2.xsl
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/outputTransformer/myBorder2.xsl
@@ -2,7 +2,7 @@
 
 <xsl:stylesheet version="1.0" 
 	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
-	xmlns:wicket="http://wicket.sourceforge.net"
+	xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd"
 	exclude-result-prefixes="wicket">
 	
 <xsl:output method="xml" omit-xml-declaration="yes"/>
