diff --git a/wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java b/wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java
index fe74c2fb7f..573a162375 100644
--- a/wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java
+++ b/wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java
@@ -232,6 +232,15 @@ public class StringResourceModel extends LoadableDetachableModel<String>
 			StringResourceModel.this.detach();
 		}
 
+		@Override
+		protected void onDetach()
+		{
+			if (StringResourceModel.this.component == null)
+			{
+				StringResourceModel.this.onDetach();
+			}
+		}
+
 		@Override
 		protected String load()
 		{
@@ -582,6 +591,8 @@ public class StringResourceModel extends LoadableDetachableModel<String>
 	@Override
 	protected final void onDetach()
 	{
+		super.onDetach();
+
 		// detach any model
 		if (model != null)
 		{
diff --git a/wicket-core/src/test/java/org/apache/wicket/model/StringResourceModelTest.java b/wicket-core/src/test/java/org/apache/wicket/model/StringResourceModelTest.java
index 5ca9dd75f0..15e9dd7e05 100644
--- a/wicket-core/src/test/java/org/apache/wicket/model/StringResourceModelTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/model/StringResourceModelTest.java
@@ -213,6 +213,40 @@ public class StringResourceModelTest extends WicketTestCase
 		model.detach();
 	}
 
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-4323
+	 */
+	@Test
+	public void detachSubstituteModelFromAssignmentWrapper()
+	{
+		IModel<WeatherStation> nullOnDetachModel = new Model<WeatherStation>()
+		{
+			private static final long serialVersionUID = 1L;
+
+			@Override
+			public void detach()
+			{
+				setObject(null);
+			}
+		};
+
+		nullOnDetachModel.setObject(ws);
+		Label label1 = new Label("resourceModelWithComponent", new StringResourceModel(
+			"wrappedOnAssignment.text", page, nullOnDetachModel));
+		page.add(label1);
+		label1.getDefaultModelObject();
+		label1.detach();
+		Assert.assertNull(nullOnDetachModel.getObject());
+
+		nullOnDetachModel.setObject(ws);
+		Label label2 = new Label("resourceModelWithoutComponent", new StringResourceModel(
+			"wrappedOnAssignment.text", nullOnDetachModel));
+		page.add(label2);
+		label2.getDefaultModelObject();
+		label2.detach();
+		Assert.assertNull(nullOnDetachModel.getObject());
+	}
+
 	/**
 	 * Inner class used for testing.
 	 */
