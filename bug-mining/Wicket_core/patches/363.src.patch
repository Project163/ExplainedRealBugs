diff --git a/wicket-core/src/main/java/org/apache/wicket/request/mapper/ResourceMapper.java b/wicket-core/src/main/java/org/apache/wicket/request/mapper/ResourceMapper.java
index 9e15ba48c5..bc39efb028 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/mapper/ResourceMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/mapper/ResourceMapper.java
@@ -237,11 +237,23 @@ public class ResourceMapper extends AbstractMapper implements IRequestMapper
 
 		if (segments.isEmpty() == false)
 		{
+			// get filename (the last segment)
 			final int lastSegmentAt = segments.size() - 1;
-			final ResourceUrl resourceUrl = new ResourceUrl(segments.get(lastSegmentAt), parameters);
+			String filename = segments.get(lastSegmentAt);
+			
+			// ignore requests with empty filename
+			if(Strings.isEmpty(filename))
+			{
+				return;
+			}
+			
+			// create resource url from filename and query parameters
+			final ResourceUrl resourceUrl = new ResourceUrl(filename, parameters);
 
+			// remove caching information from request
 			getCachingStrategy().undecorateUrl(resourceUrl);
 			
+			// check for broken caching strategy (this must never happen)
 			if (Strings.isEmpty(resourceUrl.getFileName()))
 			{
 				throw new IllegalStateException("caching strategy returned empty name for " + resourceUrl);
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java b/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
index 992187ff3e..ef47275f47 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/mapper/BasicResourceReferenceMapperTest.java
@@ -20,6 +20,7 @@ import java.io.Serializable;
 import java.util.Locale;
 
 import org.apache.wicket.request.IRequestHandler;
+import org.apache.wicket.request.Request;
 import org.apache.wicket.request.Url;
 import org.apache.wicket.request.handler.resource.ResourceReferenceRequestHandler;
 import org.apache.wicket.request.mapper.parameter.INamedParameters;
@@ -37,6 +38,7 @@ import org.apache.wicket.util.IProvider;
 import org.apache.wicket.util.ValueProvider;
 import org.apache.wicket.util.resource.IResourceStream;
 import org.apache.wicket.util.resource.StringResourceStream;
+import org.junit.Test;
 
 /**
  * @author Matej Knopp
@@ -515,6 +517,13 @@ public class BasicResourceReferenceMapperTest extends AbstractResourceReferenceM
 		assertEquals("test-version-1.0.4-beta.txt", url.getFileName());
 	}
 
+	public void testRequestWithEmptyFilename()
+	{
+		Url url = Url.parse("wicket/resource/" + CLASS_NAME + "/");
+		IRequestHandler handler = encoder.mapRequest(getRequest(url));
+		assertNull(handler);
+	}
+
 	/**
 	 * Tests <a href="https://issues.apache.org/jira/browse/WICKET-3918">WICKET-3918</a>.
 	 */
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/mapper/ResourceMapperTest.java b/wicket-core/src/test/java/org/apache/wicket/request/mapper/ResourceMapperTest.java
index 3da8e1f1ad..74200c0993 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/mapper/ResourceMapperTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/mapper/ResourceMapperTest.java
@@ -247,6 +247,16 @@ public class ResourceMapperTest extends WicketTestCase
 		assertEquals("123", params.get("val").toString());
 	}
 
+	@Test
+	public void requestWithEmptyFilename()
+	{
+		// request invalid path with empty filename
+		// this must not return a handler  
+		Request request = createRequest("test2/image/");
+		IRequestHandler handler = mapperWithPlaceholder.mapRequest(request);
+		assertNull(handler);
+	}
+
 	private static class TestResource implements IResource
 	{
 		private static final long serialVersionUID = -3130204487473856574L;
