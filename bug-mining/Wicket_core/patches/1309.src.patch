diff --git a/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java b/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
index b5aac3ece9..e2cc83cd29 100644
--- a/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
+++ b/wicket-core/src/main/java/org/apache/wicket/util/tester/TagTester.java
@@ -614,7 +614,7 @@ public class TagTester
 				XmlPullParser parser = new XmlPullParser();
 				parser.parse(markup);
 
-				XmlTag elm = null;
+				XmlTag elm;
 				XmlTag openTag = null;
 				XmlTag closeTag = null;
 				int level = 0;
@@ -671,6 +671,13 @@ public class TagTester
 						openTag = null;
 						closeTag = null;
 					}
+					else if (openTag != null)
+					{
+						TagTester tester = new TagTester(parser, openTag, openTag);
+						testers.add(tester);
+						openTag = null;
+						closeTag = null;
+					}
 
 					if (stopAfterFirst && (closeTag != null))
 					{
@@ -680,7 +687,6 @@ public class TagTester
 			}
 			catch (Exception e)
 			{
-				// NOTE: IllegalStateException(Throwable) only exists since Java 1.5
 				throw new WicketRuntimeException(e);
 			}
 		}
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java b/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
index f604739936..9a60a8845e 100644
--- a/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/util/tester/TagTesterTest.java
@@ -24,6 +24,8 @@ import static org.hamcrest.Matchers.notNullValue;
 import org.junit.Assert;
 import org.junit.Test;
 
+import java.util.List;
+
 /**
  * Test of TagTester
  */
@@ -42,7 +44,7 @@ public class TagTesterTest extends Assert
 	 * https://issues.apache.org/jira/browse/WICKET-5874
 	 */
 	@Test
-	public void getTagTestedForNonClosedTag()
+	public void getTagTesterForNonClosedTag()
 	{
 		TagTester tester = TagTester.createTagByAttribute(NON_CLOSED_INPUT, "wicket:id", "wicketId");
 		assertThat(tester, is(notNullValue()));
@@ -51,6 +53,20 @@ public class TagTesterTest extends Assert
 		assertThat(type, is(equalTo("text")));
 	}
 
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-6172
+	 */
+	@Test
+	public void getTagTestersForNonClosedTag()
+	{
+		List<TagTester> testers = TagTester.createTagsByAttribute(NON_CLOSED_INPUT, "wicket:id", "wicketId", false);
+		assertThat(testers, is(notNullValue()));
+		assertThat(testers.size(), is(1));
+
+		String type = testers.get(0).getAttribute("type");
+		assertThat(type, is(equalTo("text")));
+	}
+
 	/**
 	 * https://issues.apache.org/jira/browse/WICKET-5137
 	 */
