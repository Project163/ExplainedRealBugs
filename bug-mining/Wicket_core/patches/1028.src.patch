diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
index ad15d6d2e1..2037356c10 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
@@ -225,7 +225,13 @@ public class PackageMapper extends AbstractBookmarkableMapper
 	@Override
 	public int getCompatibilityScore(Request request)
 	{
-		// always return 0 here so that the mounts have higher priority
-		return 0;
+		if (urlStartsWith(request.getUrl(), mountSegments))
+		{
+		    return mountSegments.length;
+		}
+		else
+		{
+		    return 0;
+		}
 	}
 }
diff --git a/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/PackageMapperTest.java b/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/PackageMapperTest.java
index 06660619db..d79b685deb 100644
--- a/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/PackageMapperTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/PackageMapperTest.java
@@ -29,6 +29,7 @@ import org.apache.wicket.core.request.handler.PageProvider;
 import org.apache.wicket.core.request.handler.RenderPageRequestHandler;
 import org.apache.wicket.core.request.mapper.PackageMapperTest.OuterPage.InnerPage;
 import org.apache.wicket.markup.html.link.ILinkListener;
+import org.apache.wicket.mock.MockWebRequest;
 import org.apache.wicket.request.IRequestHandler;
 import org.apache.wicket.request.Url;
 import org.apache.wicket.request.component.IRequestableComponent;
@@ -643,4 +644,23 @@ public class PackageMapperTest extends AbstractMapperTest
 		checkPage(page, 15);
 		assertEquals(PAGE_CLASS_NAME, page.getClass().getSimpleName());
 	}
+	
+	/**
+	 * https://issues.apache.org/jira/browse/WICKET-5565
+	 */
+	@Test
+	public void testGetCompatibilityScore()
+	{
+	    Url url = Url.parse(MOUNT_PATH + '/' + "MyPage");
+	    MockWebRequest request = new MockWebRequest(url);
+	    int score = encoder.getCompatibilityScore(request);
+	    
+	    assertEquals(2, score);
+	    
+	    url = Url.parse(MOUNT_PATH + "/foo/bar/" + "MyPage");
+	    request = new MockWebRequest(url);
+	    score = namedParametersEncoder.getCompatibilityScore(request);
+	    
+	    assertEquals(4, score);
+	}
 }
