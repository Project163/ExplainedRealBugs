diff --git a/wicket-core/src/main/java/org/apache/wicket/request/handler/resource/ResourceStreamRequestHandler.java b/wicket-core/src/main/java/org/apache/wicket/request/handler/resource/ResourceStreamRequestHandler.java
index 52ab80c6da..e710c197ef 100644
--- a/wicket-core/src/main/java/org/apache/wicket/request/handler/resource/ResourceStreamRequestHandler.java
+++ b/wicket-core/src/main/java/org/apache/wicket/request/handler/resource/ResourceStreamRequestHandler.java
@@ -16,10 +16,10 @@
  */
 package org.apache.wicket.request.handler.resource;
 
+import org.apache.wicket.core.request.handler.logger.ResourceStreamLogData;
 import org.apache.wicket.request.ILoggableRequestHandler;
 import org.apache.wicket.request.IRequestCycle;
 import org.apache.wicket.request.IRequestHandler;
-import org.apache.wicket.core.request.handler.logger.ResourceStreamLogData;
 import org.apache.wicket.request.resource.ContentDisposition;
 import org.apache.wicket.request.resource.IResource.Attributes;
 import org.apache.wicket.request.resource.ResourceStreamResource;
@@ -133,6 +133,20 @@ public class ResourceStreamRequestHandler implements IRequestHandler, ILoggableR
 			requestCycle.getResponse());
 
 		ResourceStreamResource resource = new ResourceStreamResource(resourceStream);
+
+		configure(resource);
+
+		resource.respond(attributes);
+	}
+
+	/**
+	 * Configures the ResourceStreamResource used by this request handler
+	 *
+	 * @param resource
+	 *          the resource to configure
+	 */
+	protected void configure(ResourceStreamResource resource)
+	{
 		resource.setFileName(fileName);
 		if (contentDisposition != null)
 		{
@@ -141,7 +155,7 @@ public class ResourceStreamRequestHandler implements IRequestHandler, ILoggableR
 		else
 		{
 			resource.setContentDisposition(Strings.isEmpty(fileName) ? ContentDisposition.INLINE
-				: ContentDisposition.ATTACHMENT);
+					: ContentDisposition.ATTACHMENT);
 		}
 
 		final Duration cacheDuration = getCacheDuration();
@@ -149,8 +163,6 @@ public class ResourceStreamRequestHandler implements IRequestHandler, ILoggableR
 		{
 			resource.setCacheDuration(cacheDuration);
 		}
-
-		resource.respond(attributes);
 	}
 
 	@Override
