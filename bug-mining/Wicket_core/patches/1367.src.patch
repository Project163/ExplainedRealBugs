diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery-debug.js b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery-debug.js
index 4287410dd3..58425c3300 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery-debug.js
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery-debug.js
@@ -90,8 +90,9 @@
 			msg = msg.replace(/</g, "&lt;");
 			msg = msg.replace(/>/g, "&gt;");
 			msg = msg.replace(/\n/g, "<br/>");
-			msg = msg.replace(/ /g, "&nbsp;");
-			msg = msg.replace(/\t/g, "&nbsp;&nbsp;&nbsp;&nbsp;");
+			// WICKET-6340 do not use nbsp, it may not be defined in XHTML markup
+			msg = msg.replace(/ /g, "&#160;");
+			msg = msg.replace(/\t/g, "&#160;&#160;&#160;&#160;");
 
 			if (typeof(label) !== "undefined") {
 				msg = "<b>" + label + "</b>" + msg;
diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
index f0c5c12fdd..0f25238a8f 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
@@ -68,8 +68,9 @@
 	 * @param iframeName {String} the value of the iframe's name attribute
 	 */
 	createIFrame = function (iframeName) {
+		// WICKET-6340 properly close tag for XHTML markup
 		var $iframe = jQuery('<iframe name="'+iframeName+'" id="'+iframeName+
-			'" src="about:blank" style="position: absolute; top: -9999px; left: -9999px;">');
+			'" src="about:blank" style="position: absolute; top: -9999px; left: -9999px;"></iframe>');
 		return $iframe[0];
 	};
 
