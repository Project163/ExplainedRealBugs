diff --git a/wicket-core/src/main/java/org/apache/wicket/core/util/resource/locator/ResourceStreamLocator.java b/wicket-core/src/main/java/org/apache/wicket/core/util/resource/locator/ResourceStreamLocator.java
index 1fa1f0eb87..b78cc6742b 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/util/resource/locator/ResourceStreamLocator.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/util/resource/locator/ResourceStreamLocator.java
@@ -195,7 +195,8 @@ public class ResourceStreamLocator implements IResourceStreamLocator
 	 * @param path
 	 * @return resource stream
 	 */
-	private IResourceStream getResourceStream(final ClassLoader classLoader, final String path)
+	/* package private for testing */IResourceStream getResourceStream(
+		final ClassLoader classLoader, final String path)
 	{
 		if (classLoader == null)
 		{
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/PathTest.java b/wicket-core/src/test/java/org/apache/wicket/util/resource/PathTest.java
new file mode 100644
index 0000000000..e3ba41e4e1
--- /dev/null
+++ b/wicket-core/src/test/java/org/apache/wicket/util/resource/PathTest.java
@@ -0,0 +1,55 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.wicket.util.resource;
+
+import static org.apache.wicket.util.resource.ResourceStreamLocatorTest.*;
+
+import java.io.File;
+
+import org.apache.wicket.WicketTestCase;
+import org.apache.wicket.util.file.Path;
+import org.junit.Test;
+
+public class PathTest extends WicketTestCase
+{
+	private static final String PACKAGE_PATH = PathTest.class.getPackage()
+		.getName()
+		.replace('.', File.separatorChar);
+	private static final String CLASSPATH_ROOT = PathTest.class.getResource("/").getFile();
+
+	private static final String FILENAME = ResourceStreamLocatorTest.class.getSimpleName() + ".txt";
+
+	@Test
+	public void loadFromRootUsingSubpathInFilename() throws Exception
+	{
+		Path path = new Path();
+		path.add(CLASSPATH_ROOT);
+		IResourceStream rs = path.find(PathTest.class, PACKAGE_PATH + File.separatorChar + FILENAME);
+		assertNotNull(rs);
+		assertEquals(FILENAME, getFilename(rs));
+	}
+
+	@Test
+	public void loadFilenameFromPath() throws Exception
+	{
+		Path path = new Path();
+		path.add(CLASSPATH_ROOT + File.separatorChar + PACKAGE_PATH);
+		IResourceStream rs = path.find(PathTest.class, FILENAME);
+		assertNotNull(rs);
+		assertEquals(FILENAME, getFilename(rs));
+	}
+}
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest.java b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest.java
similarity index 85%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest.java
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest.java
index 3737bdcfea..3e9d2f3d6f 100644
--- a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest.java
@@ -17,6 +17,7 @@
 package org.apache.wicket.util.resource;
 
 import java.io.File;
+import java.io.IOException;
 import java.net.URI;
 import java.net.URISyntaxException;
 import java.net.URL;
@@ -26,18 +27,17 @@ import org.apache.wicket.WicketTestCase;
 import org.apache.wicket.core.util.resource.UrlResourceStream;
 import org.apache.wicket.core.util.resource.locator.IResourceStreamLocator;
 import org.apache.wicket.core.util.resource.locator.ResourceStreamLocator;
-import org.apache.wicket.util.file.Folder;
 import org.apache.wicket.util.file.Path;
 import org.apache.wicket.util.string.Strings;
 import org.junit.Test;
 
 
 /**
- * Resources test.
+ * ResourceStreamLocator test. Tests construction of resource names with 
  * 
  * @author Juergen Donnerstag
  */
-public class ResourceTest extends WicketTestCase
+public class ResourceStreamLocatorTest extends WicketTestCase
 {
 	private final Locale locale_de = new Locale("de");
 	private final Locale locale_de_DE = new Locale("de", "DE");
@@ -111,7 +111,7 @@ public class ResourceTest extends WicketTestCase
 	 * Test locating a resource.
 	 */
 	@Test
-	public void locate()
+	public void locateInClasspath()
 	{
 		// Execute without source path
 		executeMultiple(new Path());
@@ -122,9 +122,6 @@ public class ResourceTest extends WicketTestCase
 			this.getClass().getName().replace('.', '/'), null, null, null, "txt", false);
 		String path = getPath(resource);
 		path = Strings.beforeLastPathComponent(path, '/') + "/sourcePath";
-
-		// and execute
-		executeMultiple(new Path(new Folder(path)));
 	}
 
 	/**
@@ -156,18 +153,41 @@ public class ResourceTest extends WicketTestCase
 	 *            the resource
 	 * @return the path of the resource as a string
 	 */
-	private String getPath(IResourceStream resource)
+	public static String getPath(IResourceStream resource)
 	{
-		try
+		if (resource instanceof UrlResourceStream)
+		{
+			try
+			{
+				URL url = ((UrlResourceStream)resource).getURL();
+				CharSequence path = new File(new URI(url.toString())).getPath();
+				path = Strings.replaceAll(path, "\\", "/");
+				return path.toString();
+			}
+			catch (URISyntaxException e)
+			{
+				throw new RuntimeException(e);
+			}
+		}
+		else if (resource instanceof FileResourceStream)
 		{
-			URL url = ((UrlResourceStream)resource).getURL();
-			CharSequence path = new File(new URI(url.toString())).getPath();
-			path = Strings.replaceAll(path, "\\", "/");
-			return path.toString();
+			try
+			{
+				return ((FileResourceStream)resource).getFile().getCanonicalPath();
+			}
+			catch (IOException e)
+			{
+				throw new RuntimeException(e);
+			}
 		}
-		catch (URISyntaxException e)
+		else
 		{
-			throw new RuntimeException(e);
+			return null;
 		}
 	}
+
+	public static String getFilename(IResourceStream resource)
+	{
+		return Strings.afterLast(getPath(resource), File.separatorChar);
+	}
 }
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de_DE.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de_DE.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de_DE.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de_DE.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de_DE_POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de_DE_POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de_DE_POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de_DE_POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de__POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de__POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_de__POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_de__POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_fr.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_fr.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_fr.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_fr.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de_DE.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de_DE.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de_DE.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de_DE.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de_DE_POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de_DE_POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de_DE_POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de_DE_POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de__POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de__POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceTest_style_de__POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/ResourceStreamLocatorTest_style_de__POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de_DE.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de_DE.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de_DE.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de_DE.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de_DE_POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de_DE_POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de_DE_POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de_DE_POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de__POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de__POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_de__POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_de__POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de_DE.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de_DE.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de_DE.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de_DE.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de_DE_POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de_DE_POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de_DE_POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de_DE_POSIX.txt
diff --git a/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de__POSIX.txt b/wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de__POSIX.txt
similarity index 100%
rename from wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceTest_style_de__POSIX.txt
rename to wicket-core/src/test/java/org/apache/wicket/util/resource/sourcePath/ResourceStreamLocatorTest_style_de__POSIX.txt
