diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageAndComponentProvider.java b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageAndComponentProvider.java
index f0b24e646e..8bdfa93822 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageAndComponentProvider.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageAndComponentProvider.java
@@ -148,16 +148,13 @@ public class PageAndComponentProvider extends PageProvider implements IPageAndCo
 		}
 	}
 
-	/**
-	 * @see org.apache.wicket.core.request.handler.IPageAndComponentProvider#getComponent()
-	 */
 	@Override
 	public IRequestableComponent getComponent()
 	{
 		if (component == null)
 		{
 			IRequestablePage page = getPageInstance();
-			component = page.get(componentPath);
+			component = page != null ? page.get(componentPath) : null;
 			if (component == null)
 			{
 
diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
index 088f520a2b..4079eb75ea 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/handler/PageProvider.java
@@ -244,10 +244,12 @@ public class PageProvider implements IPageProvider, IClusterable
 		{
 			return pageClass;
 		}
-		else
+		else if (hasPageInstance())
 		{
 			return getPageInstance().getClass();
 		}
+
+		return null;
 	}
 
 	protected IPageSource getPageSource()
diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
index 6205e78867..6ab9274f37 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/PackageMapper.java
@@ -239,6 +239,10 @@ public class PackageMapper extends AbstractBookmarkableMapper
 	@Override
 	protected boolean checkPageClass(Class<? extends IRequestablePage> pageClass)
 	{
+		if (pageClass == null)
+		{
+			return false;
+		}
 		PackageName pageClassPackageName = PackageName.forClass(pageClass);
 		return packageName.equals(pageClassPackageName);
 	}
diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/html/link/InlineFrame.java b/wicket-core/src/main/java/org/apache/wicket/markup/html/link/InlineFrame.java
index a7fb228a69..61b6b77d81 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/html/link/InlineFrame.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/html/link/InlineFrame.java
@@ -152,10 +152,7 @@ public class InlineFrame extends WebMarkupContainer implements IRequestListener
 	{
 		return false;
 	}
-	
-	/**
-	 * @see org.apache.wicket.markup.html.link.ILinkListener#onLinkClicked()
-	 */
+
 	@Override
 	public final void onRequest()
 	{
diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/https/HttpsMapper.java b/wicket-core/src/main/java/org/apache/wicket/protocol/https/HttpsMapper.java
index b9ef466d14..411b5e9afc 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/https/HttpsMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/https/HttpsMapper.java
@@ -234,6 +234,11 @@ public class HttpsMapper implements IRequestMapperDelegate
 	 */
 	protected Scheme getDesiredSchemeFor(Class<? extends IRequestablePage> pageClass)
 	{
+		if (pageClass == null)
+		{
+			return Scheme.ANY;
+		}
+
 		Scheme SCHEME = cache.get(pageClass);
 		if (SCHEME == null)
 		{
diff --git a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
index f912a1fbde..d83595d28e 100644
--- a/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
+++ b/wicket-core/src/main/java/org/apache/wicket/util/tester/BaseWicketTester.java
@@ -2788,7 +2788,7 @@ public class BaseWicketTester
 					if (handler.getPageProvider().hasPageInstance())
 					{
 						Page renderedPage = (Page)handler.getPageProvider().getPageInstance();
-						if (componentInPage != null && lastPage != null
+						if (componentInPage != null && lastPage != null && renderedPage != null
 							&& lastPage.getPageClass() != renderedPage.getPageClass())
 						{
 							// WICKET-3913: reset startComponent if a new page
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java b/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
index 622b48b079..3f87b08121 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/handler/PageProviderTest.java
@@ -243,7 +243,7 @@ public class PageProviderTest extends WicketTestCase
 
 		PageProvider provider = new PageProvider(page.getPageId(), MockPageWithLink.class, 0);
 		assertFalse(provider.hasPageInstance());
-		assertEquals(MockPageWithLink.class, provider.getPageInstance().getClass());
+		assertEquals(MockPageWithLink.class, provider.getPageClass());
 		assertTrue(provider.doesProvideNewPage());
 	}
 
