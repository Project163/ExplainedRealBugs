diff --git a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
index c2d5042432..5baac8b97e 100644
--- a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
+++ b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java
@@ -2032,19 +2032,19 @@ public abstract class MarkupContainer extends Component implements Iterable<Comp
 		
 		if (childType == ChildToDequeueType.BORDER) 
 		{
-			Border childContainer = (Border)child;
-			// propagate dequeuing to border's body
+            Border childContainer = (Border)child;
+            // propagate dequeuing to border's body
             MarkupContainer body = childContainer.getBodyContainer();
-			
-			dequeueChildrenContainer(dequeue, body);
+
+            dequeueChildrenContainer(dequeue, body);
 		}
 		
 		if (childType == ChildToDequeueType.MARKUP_CONTAINER)
 		{
-			// propagate dequeuing to containers
-			MarkupContainer childContainer = (MarkupContainer)child;
-			
-			dequeueChildrenContainer(dequeue, childContainer);			
+            // propagate dequeuing to containers
+            MarkupContainer childContainer = (MarkupContainer)child;
+
+            dequeueChildrenContainer(dequeue, childContainer);			
 		}
 		
 		if (childType == ChildToDequeueType.NULL || 
@@ -2066,12 +2066,12 @@ public abstract class MarkupContainer extends Component implements Iterable<Comp
 		throw new IllegalStateException(String.format("Could not find the closing tag for '%s'", tag));
 	}
 
-	private void dequeueChildrenContainer(DequeueContext dequeue, MarkupContainer child) 
-	{
-		dequeue.pushContainer(child);
-		child.dequeue(dequeue);
-		dequeue.popContainer();
-	}
+    private void dequeueChildrenContainer(DequeueContext dequeue, MarkupContainer child)
+    {
+        dequeue.pushContainer(child);
+        child.dequeue(dequeue);
+        dequeue.popContainer();
+    }
 
     /** @see IQueueRegion#newDequeueContext() */
 	public DequeueContext newDequeueContext()
diff --git a/wicket-core/src/test/java/org/apache/wicket/markup/html/border/BorderWithNestedBodyPage.java b/wicket-core/src/test/java/org/apache/wicket/markup/html/border/BorderWithNestedBodyPage.java
index 411b3fec81..abcce2f12d 100644
--- a/wicket-core/src/test/java/org/apache/wicket/markup/html/border/BorderWithNestedBodyPage.java
+++ b/wicket-core/src/test/java/org/apache/wicket/markup/html/border/BorderWithNestedBodyPage.java
@@ -19,6 +19,7 @@ package org.apache.wicket.markup.html.border;
 import org.apache.wicket.ajax.AjaxRequestTarget;
 import org.apache.wicket.ajax.markup.html.AjaxLink;
 import org.apache.wicket.markup.html.WebPage;
+import org.apache.wicket.markup.html.internal.HtmlHeaderContainer;
 
 public class BorderWithNestedBodyPage extends WebPage 
 {
@@ -35,18 +36,19 @@ public class BorderWithNestedBodyPage extends WebPage
 	{
 		super.onInitialize();
 		BorderWithNestedBody border = new BorderWithNestedBody("outerBorder");
-		border.add(new AjaxLink<Void>("ajaxClick") 
-		{
+        border.add(new AjaxLink<Void>("ajaxClick")
+        {
             @Override
-            protected void onBeforeRender() 
+            public void internalRenderHead(HtmlHeaderContainer container)
+            {
+                super.internalRenderHead(container);
+                behaviorRendered = true;
+            }
+
+            @Override
+            public void onClick(AjaxRequestTarget target)
             {
-            	super.onBeforeRender();
-            	behaviorRendered = true;
             }
-            
-			@Override
-			public void onClick(AjaxRequestTarget target) 
-			{}
 		});
 		
 		add(border);
