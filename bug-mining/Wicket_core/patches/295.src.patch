diff --git a/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java b/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java
index 3b90a525e5..33651292f8 100644
--- a/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/protocol/http/StoredResponsesMapTest.java
@@ -127,7 +127,9 @@ public class StoredResponsesMapTest
 					keys.add(key);
 					map.put(key, new BufferedWebResponse(null));
 
-					String key2 = keys.get(rnd.nextInt(keys.size() - 1));
+					int randomMax = keys.size() - 1;
+					int toRemove = randomMax == 0 ? 0 : rnd.nextInt(randomMax);
+					String key2 = keys.get(toRemove);
 					map.remove(key2);
 				}
 				endLatch.countDown();
