diff --git a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/MountedMapper.java b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/MountedMapper.java
index 12f8985e43..c55222e9c8 100644
--- a/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/MountedMapper.java
+++ b/wicket-core/src/main/java/org/apache/wicket/core/request/mapper/MountedMapper.java
@@ -424,6 +424,11 @@ public class MountedMapper extends AbstractBookmarkableMapper
 			String optionalPlaceholder = getOptionalPlaceholder(mountSegments[i]);
 			if (placeholder != null)
 			{
+				if (!copy.getNamedKeys().contains(placeholder))
+				{
+					// no value for placeholder - cannot mount
+					return null;
+				}
 				url.getSegments().set(i - dropped, copy.get(placeholder).toString(""));
 				copy.remove(placeholder);
 			}
diff --git a/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/MountedMapperTest.java b/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/MountedMapperTest.java
index d8cccb5d73..555bf33390 100644
--- a/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/MountedMapperTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/core/request/mapper/MountedMapperTest.java
@@ -680,6 +680,26 @@ public class MountedMapperTest extends AbstractMapperTest
 		assertEquals("some/p1/path/p2/i1/i2?1&a=b&b=c", url.toString());
 	}
 
+	/**
+	 * WICKET-5247 page instantiated without required parameters won't be mapped
+	 */
+	@Test
+	public void placeholderEncode4()
+	{
+		PageProvider provider = new PageProvider(new MockPage())
+		{
+			@Override
+			public boolean isNewPageInstance()
+			{
+				return false;
+			}
+		};
+		provider.setPageSource(context);
+		IRequestHandler handler = new RenderPageRequestHandler(provider);
+		Url url = placeholderEncoder.mapHandler(handler);
+		assertNull(url);
+	}
+
 	/** */
 	@Test
 	public void optionPlaceholderDecode1()
