diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/wicket-ajax-debug.js b/wicket-core/src/main/java/org/apache/wicket/ajax/wicket-ajax-debug.js
index f64013a56e..5a53ab33d3 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/wicket-ajax-debug.js
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/wicket-ajax-debug.js
@@ -61,7 +61,7 @@ var WicketAjaxDebug = {
 		if (typeof(label) != "undefined")
 			msg = "<b>" + label + "</b>" + msg;
 		          
-        c.innerHTML = msg;
+        WicketAjaxDebug.doInnerHTML(c, msg);
         c.setAttribute("style","font-size: 82%; margin: 0px; padding:0px");        
         d.appendChild(c);
         
@@ -221,7 +221,40 @@ var WicketAjaxDebug = {
 		} else { 
    			return false; 
 		} 
-	}
+	},
+	
+	/**
+	 * A XHTML Strict safe function to set HTMLElement's innerHTML.
+	 * WICKET-3023
+	 */
+	doInnerHTML: function(elem, html) {
+ 
+        try {
+            var children = elem.childNodes;
+ 
+            for (var i = 0; i < children.length; i++) {
+                elem.removeChild(children[i]);
+            }
+ 
+            var nodes = new DOMParser().parseFromString(html, 'text/xml');
+            var range = document.createRange();
+            range.selectNodeContents(elem);
+            range.deleteContents();
+ 
+            for (var i = 0; i < nodes.childNodes.length; i++) {
+                elem.appendChild(nodes.childNodes[i]);
+            }
+            return true;
+        } catch (e) {
+            try {
+                elem.innerHTML = html;
+                return true;
+            }
+            catch(ee) {
+                return false;
+            }
+        }
+    }
 };
 
 WicketAjaxDebug.addEvent(window, "load", WicketAjaxDebug.init);
\ No newline at end of file
