diff --git a/wicket-core/src/main/java/org/apache/wicket/mock/MockWebRequest.java b/wicket-core/src/main/java/org/apache/wicket/mock/MockWebRequest.java
index 61e95c93b3..ffbbd6f908 100644
--- a/wicket-core/src/main/java/org/apache/wicket/mock/MockWebRequest.java
+++ b/wicket-core/src/main/java/org/apache/wicket/mock/MockWebRequest.java
@@ -281,7 +281,9 @@ public class MockWebRequest extends WebRequest
 	@Override
 	public Url getClientUrl()
 	{
-		return new Url(url.getSegments(), Collections.<QueryParameter> emptyList());
+		Url baseUrl = new Url(url.getSegments(), Collections.<QueryParameter> emptyList());
+		baseUrl.setContextRelative(url.isContextRelative());
+		return baseUrl;
 	}
 
 	@Override
diff --git a/wicket-core/src/main/java/org/apache/wicket/protocol/http/servlet/ServletWebRequest.java b/wicket-core/src/main/java/org/apache/wicket/protocol/http/servlet/ServletWebRequest.java
index c668cdf69e..45b0544bbd 100644
--- a/wicket-core/src/main/java/org/apache/wicket/protocol/http/servlet/ServletWebRequest.java
+++ b/wicket-core/src/main/java/org/apache/wicket/protocol/http/servlet/ServletWebRequest.java
@@ -132,13 +132,13 @@ public class ServletWebRequest extends WebRequest
 	{
 		if (errorAttributes != null && !Strings.isEmpty(errorAttributes.getRequestUri()))
 		{
-			String problematicURI = Url.parse(errorAttributes.getRequestUri(), getCharset())
+			String problematicURI = Url.parse(errorAttributes.getRequestUri(), getCharset(), false)
 				.toString();
 			return getContextRelativeUrl(problematicURI, filterPrefix);
 		}
 		else if (forwardAttributes != null && !Strings.isEmpty(forwardAttributes.getRequestUri()))
 		{
-			String forwardURI = Url.parse(forwardAttributes.getRequestUri(), getCharset())
+			String forwardURI = Url.parse(forwardAttributes.getRequestUri(), getCharset(), false)
 				.toString();
 			return getContextRelativeUrl(forwardURI, filterPrefix);
 		}
@@ -170,6 +170,7 @@ public class ServletWebRequest extends WebRequest
 		url.setPort(httpServletRequest.getServerPort());
 		url.setHost(httpServletRequest.getServerName());
 		url.setProtocol(httpServletRequest.getScheme());
+		url.setContextRelative(true);
 		return url;
 	}
 
diff --git a/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java b/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
index b294b4fda1..a64ae6161e 100644
--- a/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
+++ b/wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
@@ -16,6 +16,9 @@
  */
 package org.apache.wicket.request.cycle;
 
+import static java.util.Arrays.asList;
+import static org.hamcrest.CoreMatchers.is;
+
 import java.util.Arrays;
 
 import org.apache.wicket.mock.MockWebRequest;
@@ -29,6 +32,7 @@ import org.junit.Test;
  */
 public class UrlRendererTest extends Assert
 {
+
 	/**
 	 * 
 	 */
@@ -188,6 +192,20 @@ public class UrlRendererTest extends Assert
 			r1.renderRelativeUrl(Url.parse("http://localhost:8080/;jsessionid=1p87c5424zjuvd57kljcu2bwa?0-1.IBehaviorListener.1-component")));
 	}
 
+	@Test
+	public void rendersRelativeUrl()
+	{
+		Url contextRelativeUrl = new Url();
+		contextRelativeUrl.setProtocol("http");
+		contextRelativeUrl.setHost("localshot");
+		contextRelativeUrl.setPort(8080);
+		contextRelativeUrl.setContextRelative(true);
+		contextRelativeUrl.getSegments().addAll(asList("", ""));
+
+		UrlRenderer r1 = new UrlRenderer(new MockWebRequest(contextRelativeUrl));
+		assertThat(r1.renderRelativeUrl(Url.parse("foo")), is("../foo"));
+	}
+
 	/**
 	 * WICKET-4935 prevent another double slash
 	 */
