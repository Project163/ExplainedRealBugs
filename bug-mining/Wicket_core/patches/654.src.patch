diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
index 71a77f7fc5..77102ea5a6 100644
--- a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js
@@ -805,16 +805,16 @@
 			// remove the event
 			jQuery(iframe).off("load.handleMultipartComplete");
 
-			context.steps.push(function(notify) {
+			context.steps.push(jQuery.proxy(function(notify) {
 				// remove the iframe and button elements
 				jQuery('#'+iframe.id + '-btn').remove();
 				jQuery(iframe).remove();
-			});
+
+				this.done();
+			}, this));
 
 			var executer = new FunctionsExecuter(context.steps);
 			executer.start();
-
-			this.done();
 		},
 
 		// Processes the response
@@ -878,7 +878,7 @@
 				this.success(context);
 
 			} catch (exception) {
-				this.failure(context, null, exception);
+				this.failure(context, null, exception, null);
 			}
 		},
 
diff --git a/wicket-core/src/test/js/ajax.js b/wicket-core/src/test/js/ajax.js
index 320cdcd811..164ccdfcf5 100644
--- a/wicket-core/src/test/js/ajax.js
+++ b/wicket-core/src/test/js/ajax.js
@@ -905,5 +905,29 @@ jQuery(document).ready(function() {
 
 			target.off("event1");
 		});
+
+		/**
+		 * Submits a nested multipart form (represented with <div>).
+		 * The submit uses <iframe>.
+		 *
+		 * https://issues.apache.org/jira/browse/WICKET-4673
+		 */
+		asyncTest('Submit nested form.', function () {
+
+			expect(1);
+
+			var attrs = {
+				f:  "innerForm", // the id of the form to submit
+				mp: true,  // multipart
+				u:  "data/ajax/submitNestedForm.xml", // the mock response
+				e:  "nestedFormSubmit", // the event
+				c:  "innerSubmitButton", // the component that submits the form
+				m:  "POST" // submit method
+			};
+
+			Wicket.Ajax.ajax(attrs);
+
+			jQuery('#'+ attrs.c).triggerHandler(attrs.e);
+		});
 	}
 });
diff --git a/wicket-core/src/test/js/all.html b/wicket-core/src/test/js/all.html
index e9c0c693cd..37b83af5d6 100644
--- a/wicket-core/src/test/js/all.html
+++ b/wicket-core/src/test/js/all.html
@@ -1,5 +1,5 @@
 <!DOCTYPE html>
-<html>
+<html xmlns:wicket="http://wicket.apache.org">
 
 <head>
 	<title id="titleId">All tests</title>
@@ -151,6 +151,15 @@
 
 		</form>
 
+		<!-- WICKET-4673 Ajax submit of nested form -->
+		<form id="outerForm" >
+			<button type="submit" id="submitButton">Outer Submit</button>
+			<div id="innerForm">
+				<input type="file" id="file"/>
+				<button type="submit" id="innerSubmitButton">Inner Submit</button>
+			</div>
+		</form>
+
 	</div>
 </body>
 </html>
diff --git a/wicket-core/src/test/js/data/ajax/submitNestedForm.xml b/wicket-core/src/test/js/data/ajax/submitNestedForm.xml
new file mode 100644
index 0000000000..98c4d168ab
--- /dev/null
+++ b/wicket-core/src/test/js/data/ajax/submitNestedForm.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the "License"); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+        http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an "AS IS" BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+-->
+<ajax-response><evaluate>start(); ok(true, 'Nested form has been submitted!');</evaluate></ajax-response>
\ No newline at end of file
