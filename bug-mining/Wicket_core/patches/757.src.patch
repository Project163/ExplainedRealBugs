diff --git a/wicket-core/src/test/java/org/apache/wicket/TestDetachPageAjaxResult.html b/wicket-core/src/test/java/org/apache/wicket/TestDetachPageAjaxResult.html
index 447b4cfa1d..daae08d064 100644
--- a/wicket-core/src/test/java/org/apache/wicket/TestDetachPageAjaxResult.html
+++ b/wicket-core/src/test/java/org/apache/wicket/TestDetachPageAjaxResult.html
@@ -12,4 +12,4 @@ Wicket.Ajax.DebugWindow.enabled=true;
 Wicket.Ajax.baseUrl="wicket/page?0-1.IBehaviorListener.0-comp";
 /*]^]^>*/
 </script>
-</head>]]></header-contribution><evaluate><![CDATA[Wicket.Ajax.ajax({"u":"./page?0-1.IBehaviorListener.0-comp","e":"click","c":"comp1"});]]></evaluate></ajax-response>
\ No newline at end of file
+</head>]]></header-contribution><evaluate><![CDATA[(function(){Wicket.Ajax.ajax({"u":"./page?0-1.IBehaviorListener.0-comp","e":"click","c":"comp1"});})();]]></evaluate></ajax-response>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage2_ajax_expected.html b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage2_ajax_expected.html
index a2d2af0e52..7f571f8d67 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage2_ajax_expected.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage2_ajax_expected.html
@@ -18,4 +18,4 @@ test
 
 <link href="../test2"/>
 <script type="text/javascript" src="../javascripturlB"></script>
-</head>]]></header-contribution><priority-evaluate><![CDATA[prepend();]]></priority-evaluate><evaluate><![CDATA[domReady();]]></evaluate><evaluate><![CDATA[domReadyB();]]></evaluate><evaluate><![CDATA[append();]]></evaluate><evaluate><![CDATA[onLoad();]]></evaluate><evaluate><![CDATA[onLoadB();]]></evaluate></ajax-response>
\ No newline at end of file
+</head>]]></header-contribution><priority-evaluate><![CDATA[(function(){prepend();})();]]></priority-evaluate><evaluate><![CDATA[(function(){domReady();})();(function(){domReadyB();})();(function(){append();})();(function(){onLoad();})();(function(){onLoadB();})();]]></evaluate></ajax-response>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage_ajax_expected.html b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage_ajax_expected.html
index 2e16f769c8..04b0d578a8 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage_ajax_expected.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/AjaxHeaderContributionPage_ajax_expected.html
@@ -9,4 +9,4 @@ test
 <script type="text/javascript" src="../javascripturl"></script>
 <script type="text/javascript" src="./resource/org.apache.wicket.resource.JQueryResourceReference/jquery/jquery.js"></script>
 <script type="text/javascript" src="./resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-event-jquery.js"></script>
-</head>]]></header-contribution><priority-evaluate><![CDATA[prepend();]]></priority-evaluate><evaluate><![CDATA[domReady();]]></evaluate><evaluate><![CDATA[append();]]></evaluate><evaluate><![CDATA[onLoad();]]></evaluate></ajax-response>
\ No newline at end of file
+</head>]]></header-contribution><priority-evaluate><![CDATA[(function(){prepend();})();]]></priority-evaluate><evaluate><![CDATA[(function(){domReady();})();(function(){append();})();(function(){onLoad();})();]]></evaluate></ajax-response>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/DomReadyOrderPage_ajax_expected.html b/wicket-core/src/test/java/org/apache/wicket/ajax/DomReadyOrderPage_ajax_expected.html
index 4c6836aaf9..a35bf0e9b4 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/DomReadyOrderPage_ajax_expected.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/DomReadyOrderPage_ajax_expected.html
@@ -12,4 +12,4 @@ Wicket.Ajax.DebugWindow.enabled=true;
 Wicket.Ajax.baseUrl="wicket/page?0-1.IBehaviorListener.0-test";
 /*]^]^>*/
 </script>
-</head>]]></header-contribution><evaluate><![CDATA[test1();]]></evaluate><evaluate><![CDATA[test2();]]></evaluate><evaluate><![CDATA[Wicket.Ajax.ajax({"u":"./page?0-1.IBehaviorListener.0-test","e":"click","c":"test1"});]]></evaluate></ajax-response>
\ No newline at end of file
+</head>]]></header-contribution><evaluate><![CDATA[(function(){test1();})();(function(){test2();})();(function(){Wicket.Ajax.ajax({"u":"./page?0-1.IBehaviorListener.0-test","e":"click","c":"test1"});})();]]></evaluate></ajax-response>
\ No newline at end of file
diff --git a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
index b58a5fcadc..da1dbd3c76 100644
--- a/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
+++ b/wicket-core/src/test/java/org/apache/wicket/ajax/markup/html/componentMap/SimpleTestPageExpectedResult-1.html
@@ -17,4 +17,4 @@ Wicket.Ajax.baseUrl="wicket/page?0-1.IBehaviorListener.0-testPanel-baseSpan-linj
 if (typeof(Wicket.TimerHandles) === 'undefined') {Wicket.TimerHandles = {}}
 /*]^]^>*/
 </script>
-</head>]]></header-contribution><evaluate encoding="wicket1"><![CDATA[Wicket.TimerHandles['linja11']^ = setTimeout('Wicket.Ajax.ajax({\"u\":\"./page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000)]]></evaluate></ajax-response>
\ No newline at end of file
+</head>]]></header-contribution><evaluate encoding="wicket1"><![CDATA[(function(){Wicket.TimerHandles['linja11']^ = setTimeout('Wicket.Ajax.ajax({\"u\":\"./page?0-1.IBehaviorListener.0-testPanel-baseSpan-linja1\",\"c\":\"linja11\"});', 2000)})();]]></evaluate></ajax-response>
\ No newline at end of file
