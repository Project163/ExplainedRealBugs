<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4570] Shared Behavior&apos;s renderHead method called only for one component, not for all of them</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4570</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When using a shared behavior among many components, its renderHead method is called only once. The reason is at the end of the Component.renderHead(HtmlHeaderContainer) method:&lt;/p&gt;

&lt;p&gt;               for (Behavior behavior : getBehaviors())&lt;br/&gt;
               {&lt;br/&gt;
                    if (isBehaviorAccepted(behavior))&lt;br/&gt;
                    {&lt;br/&gt;
                         if (response.wasRendered(behavior) == false) // &amp;lt;---- check whether the behavior has been marked as rendered&lt;/p&gt;
                         {
                              behavior.renderHead(this, response);
                              response.markRendered(behavior); // &amp;lt;---- behavior marked as rendered
                         }
&lt;p&gt;                    }&lt;br/&gt;
               }&lt;/p&gt;

&lt;p&gt;When calling this method of the first component, which contains given Behavior, the Behavior is added to the set of the already-rendered elements. This means, its renderHead method is never called for the rest of the components, which contain it.&lt;/p&gt;

&lt;p&gt;From documentation I suggest:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Behaviors can be shared among more components (if they are not &quot;attached&quot; in bind() method), as written in Behavior class javadoc: &quot;They can be bound to a concrete component (...), but they don&apos;t need to.&quot;&lt;/li&gt;
	&lt;li&gt;A Behavior method should behave the same way, as the same code placed directly in the component (in the corresponding method)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Moreover, in the documentation of the Behavior.renderHead is written: &quot;Render to the web response whatever the component wants to contribute to the head section.&quot; So as I understand it, the information about component should also be the &quot;key&quot; whether to mark the Behavior rendered or not. More precisely, the proposed solution should be something like the following (Couple means something like a class with two fields - Behavior and Component):&lt;/p&gt;

&lt;p&gt;               for (Behavior behavior : getBehaviors())&lt;br/&gt;
               {&lt;br/&gt;
                    if (isBehaviorAccepted(behavior))&lt;br/&gt;
                    {&lt;br/&gt;
                         Couple c = new Couple(behavior, this); // &amp;lt;---- create couple&lt;br/&gt;
                         if (response.wasRendered(c) == false) // &amp;lt;---- check the couple&lt;/p&gt;
                         {
                              behavior.renderHead(this, response);
                              response.markRendered(c); // &amp;lt;---- mark the couple as rendered
                         }
&lt;p&gt;                    }&lt;br/&gt;
               }&lt;/p&gt;


&lt;p&gt;Maybe this is not a bug, but a feature. In case of the feature I think, that it requires at least a clarification in the documentation. In (probably) all other usage of shared Behavior, the Behavior does not cause any troubles and it behaves as expected from the documentation. But this method has quite inconsistent effect, comparing to the other ones.&lt;/p&gt;


&lt;p&gt;If an example is needed:&lt;/p&gt;

&lt;p&gt;I need a Behavior to attach all components, which have to automatically contribute to HTML head a JavaScript and CSS file with the same name as the component. The Behavior does not hold any data (no fields, empty bind method), so I would like to make it singleton (or not directly pattern Singleton as such - for example let it overridable, but provide a default instance). Because creating new instances does not have much sense in this case and it brings many unnecessary objects on the heap.&lt;/p&gt;

&lt;p&gt;Using of new instance per component works fine, of course, but the issue is in the situation, if I need the shared instance across the application.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558037">WICKET-4570</key>
            <summary>Shared Behavior&apos;s renderHead method called only for one component, not for all of them</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="otah">Ota Hauptmann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 May 2012 05:48:33 +0000</created>
                <updated>Wed, 20 Apr 2022 10:57:52 +0000</updated>
                            <resolved>Sun, 3 Jun 2012 04:21:02 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                    <version>1.5.2</version>
                    <version>1.5.3</version>
                    <version>1.5.4</version>
                    <version>1.5.5</version>
                    <version>1.5.6</version>
                    <version>6.0.0-beta1</version>
                                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>6.0.0-beta3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13440659">WICKET-6975</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116202</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>