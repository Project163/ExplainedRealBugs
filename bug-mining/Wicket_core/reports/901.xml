<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5263] FilenameWithVersionResourceCachingStrategy breaks silently when the versionPrefix is contained in the original filename</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5263</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;If a resource name contains the character used as version prefix then FilenameWithVersionResourceCachingStrategy#undecorateUrl() will split the decorated filename wrongly and the resource response will return 404 (Not found).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12655973">WICKET-5263</key>
            <summary>FilenameWithVersionResourceCachingStrategy breaks silently when the versionPrefix is contained in the original filename</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mgrigorov">Martin Tzvetanov Grigorov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jul 2013 06:58:14 +0000</created>
                <updated>Mon, 16 Dec 2013 13:30:35 +0000</updated>
                            <resolved>Wed, 3 Jul 2013 07:14:35 +0000</resolved>
                                    <version>6.9.0</version>
                                    <fixVersion>6.10.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13846285" author="sfussenegger" created="Thu, 12 Dec 2013 12:48:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martin-g&quot; class=&quot;user-hover&quot; rel=&quot;martin-g&quot;&gt;martin-g&lt;/a&gt; I wouldn&apos;t consider adding a log message a good enough fix for this issue. I think it would be better to patch &lt;tt&gt;undecorateUrl(..)&lt;/tt&gt; to check the validity of the version it tries to strip:&lt;/p&gt;

&lt;p&gt;Current&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// get position of version string
&lt;/span&gt;pos = fullname.lastIndexOf(versionPrefix);

&lt;span class=&quot;code-comment&quot;&gt;// remove version string &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it exists
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pos != -1)
{
  &lt;span class=&quot;code-comment&quot;&gt;// SNIP
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Patched&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// get position of version string
&lt;/span&gt;pos = fullname.lastIndexOf(versionPrefix);

&lt;span class=&quot;code-comment&quot;&gt;// remove version string &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it exists
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pos != -1 &amp;amp;&amp;amp; isVersion(fullname.substring(pos + versionPrefix.length()))
{
  &lt;span class=&quot;code-comment&quot;&gt;// SNIP
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The implementation of &lt;tt&gt;isVersion(..)&lt;/tt&gt; isn&apos;t obvious as there naturally is one problem: The version depends on the resource and the resource isn&apos;t known without properly stripping the version from the URL. I&apos;d therefore suggest to the method &lt;tt&gt;getVersionPattern()&lt;/tt&gt; to &lt;tt&gt;IResourceVersion&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The implementations for all current implementations would be trivial:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;LastModifiedResourceVersion&lt;/tt&gt;: &quot;[0-9]&amp;#43;&quot; = timestamp in ms&lt;br/&gt;
&lt;tt&gt;MessageDigestResourceVersion&lt;/tt&gt;: &quot;[0-9A-F]&amp;#43;&quot; = hex value (uppercase)&lt;br/&gt;
&lt;tt&gt;StaticResourceVersion&lt;/tt&gt;: &lt;tt&gt;Pattern.quote(version)&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;CachingResourceVersion&lt;/tt&gt; and &lt;tt&gt;RequestCycleCachedResourceVersion&lt;/tt&gt;: &lt;tt&gt;delegate.getVersionPattern()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Making this pattern optional (i.e. return null) would retain the current behavior. Sure, it&apos;s still prone to errors (e.g. if version prefix is &apos;-&apos; and the resource is foo-1.png -&amp;gt; foo.png) but at least it avoids some (or probably most) errors (e.g. foo-bar1.png).&lt;/p&gt;</comment>
                            <comment id="13846305" author="sfussenegger" created="Thu, 12 Dec 2013 13:42:39 +0000"  >&lt;p&gt;I&apos;ve submitted &lt;a href=&quot;https://github.com/apache/wicket/pull/66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request #66 on github&lt;/a&gt; according to my comment above.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12684950">WICKET-5446</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m00f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>