<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5202] Page redirects can fail when using url encoding</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5202</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When url encoding is used instead of cookies for session management, some redirections do not work in Wicket 6.8.0. The problem appears to be in UrlRenderer.renderRelativeUrl, which returns the (invalid) relative URL:&lt;/p&gt;

&lt;p&gt;&quot;..//demo/app;jsessionid=0BFE4703434CFF7BEBAE5CBF6C60B15F&quot; &lt;/p&gt;

&lt;p&gt;when passed the URL:&lt;/p&gt;

&lt;p&gt;&quot;http://localhost:8080/demo/app;jsessionid=0BFE4703434CFF7BEBAE5CBF6C60B15F&quot;&lt;/p&gt;

&lt;p&gt;and when the UrlRenderer&apos;s base URL is: &lt;/p&gt;

&lt;p&gt;&quot;wicket/page?1-1.ILinkListener-link&quot;&lt;/p&gt;

&lt;p&gt;This is because the removeCommonPrefixes method tries to compare segments between the encoded target URL and a URL parsed from &lt;/p&gt;

&lt;p&gt;(URLRenderer line 319):&lt;br/&gt;
Url commonPrefix = Url.parse(request.getContextPath() + request.getFilterPath());&lt;/p&gt;

&lt;p&gt;This second URL does not contain the ;jsessionid=... suffix and the removeCommonPrefixes method doesn&apos;t remove prefixes properly. The problem doesn&apos;t occur when using cookies for session management, of course.&lt;/p&gt;

&lt;p&gt;This issue is new between Wicket version 6.2.0 and 6.8.0. When deployed into a servlet container using url-encoding for session management, the following app works under Wicket 6.2.0 but fails (because of redirecting to an invalid URL) under Wicket 6.8.0:&lt;/p&gt;

&lt;p&gt;// ------------------------&lt;br/&gt;
// App.java&lt;br/&gt;
import org.apache.wicket.protocol.http.WebApplication;&lt;br/&gt;
import org.apache.wicket.Page;&lt;/p&gt;

&lt;p&gt;public class App extends WebApplication {&lt;br/&gt;
    @Override&lt;br/&gt;
    public Class&amp;lt;? extends Page&amp;gt; getHomePage() &lt;/p&gt;
{
        return A.class;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;// ------------------------&lt;br/&gt;
// A.java&lt;br/&gt;
import org.apache.wicket.markup.html.WebPage;&lt;br/&gt;
import org.apache.wicket.markup.html.link.Link;&lt;/p&gt;

&lt;p&gt;public class A extends WebPage {&lt;br/&gt;
    public A() {&lt;br/&gt;
        add(new Link&amp;lt;Object&amp;gt;(&quot;link&quot;) {&lt;br/&gt;
            @Override&lt;br/&gt;
            public void onClick() &lt;/p&gt;
{
                setResponsePage(B.class);
            }
&lt;p&gt;        });&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;// ------------------------&lt;br/&gt;
// B.java&lt;br/&gt;
import org.apache.wicket.markup.html.WebPage;&lt;br/&gt;
import org.apache.wicket.markup.html.link.Link;&lt;/p&gt;

&lt;p&gt;public class B extends WebPage {&lt;br/&gt;
    public B() {&lt;br/&gt;
        add(new Link&amp;lt;Object&amp;gt;(&quot;link&quot;) {&lt;br/&gt;
            @Override&lt;br/&gt;
            public void onClick() &lt;/p&gt;
{
                setResponsePage(A.class);
            }
&lt;p&gt;        });&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;// ------------------------&lt;/p&gt;

&lt;p&gt;Clicking the link on the home page A will successfully navigate to page B. Clicking the link on page B should navigate to page A. Under Wicket 6.2.0, or Wicket 6.8.0 with cookies, it works. With Wicket 6.8.0 and url-encoding, it tries to redirect to an incorrect URL like &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8080/demo/app//demo/app;jsessionid=0BFE4703434CFF7BEBAE5CBF6C60B15F&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/demo/app//demo/app;jsessionid=0BFE4703434CFF7BEBAE5CBF6C60B15F&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which fails (note the double slash and repeated context/filter in the URL). &lt;/p&gt;

&lt;p&gt;It is possible to configure Tomcat to use url encoding instead of cookies for session management by editing the conf/context.xml file within the Tomcat installation and making the root element of that file read:&lt;/p&gt;

&lt;p&gt; &amp;lt;Context cookies=&quot;false&quot;&amp;gt;&lt;/p&gt;
</description>
                <environment>Linux, Tomcat 7.0.39, JDK 1.7.0</environment>
        <key id="12649315">WICKET-5202</key>
            <summary>Page redirects can fail when using url encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="jamesgifford">James Gifford</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 May 2013 12:36:16 +0000</created>
                <updated>Mon, 27 May 2013 15:24:39 +0000</updated>
                            <resolved>Mon, 27 May 2013 13:42:34 +0000</resolved>
                                    <version>6.8.0</version>
                                    <fixVersion>6.9.0</fixVersion>
                    <fixVersion>1.5.11</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13667662" author="mgrigorov" created="Mon, 27 May 2013 09:35:16 +0000"  >&lt;p&gt;Please package the code snippets in a quickstart application that reproduces the described problem.&lt;br/&gt;
You can setup Jetty in Wicket Quickstart archetype (Start.java) to use url encoding with:&lt;/p&gt;

&lt;p&gt;// uncomment next line if you want to test with JSESSIONID encoded in the urls&lt;br/&gt;
		// ((AbstractSessionManager) bb.getSessionHandler().getSessionManager()).setUsingCookies(false);&lt;/p&gt;

&lt;p&gt;But you can also provide app that shows the problem on Tomcat.&lt;/p&gt;</comment>
                            <comment id="13667691" author="jamesgifford" created="Mon, 27 May 2013 10:53:47 +0000"  >&lt;p&gt;I&apos;ve tweaked the Start class in the attached Quickstart app to configure Jetty to use url encoding. Running the Start class, hitting &lt;a href=&quot;http://localhost:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080&lt;/a&gt; and clicking the links three times exhibits the problem. &lt;/p&gt;

&lt;p&gt;Note that running Jetty via &quot;mvn jetty:run&quot; doesn&apos;t use the Start class and hence doesn&apos;t exhibit the problem. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12648521">WICKET-5193</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12584916" name="jira5202.tgz" size="6479" author="jamesgifford" created="Mon, 27 May 2013 10:53:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kve7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>