<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4126] Automatic Image Linking broken for images in base packages</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4126</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Automatic linking seems to be broken when used in conjunction with base classes and referencing relative images located in a different package.&lt;/p&gt;

&lt;p&gt;The attached quickstart application contains a base page wicket.bugs.autolink.page.base.BasePage whose HTML references an image located at &amp;lt;BasePage Package&amp;gt;/theme/logo.png: &amp;lt;img src=&quot;theme/logo.png&quot; ...&amp;gt;&lt;br/&gt;
When accessing this page via &lt;a href=&quot;http://localhost:8080/base&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/base&lt;/a&gt; the image is rendered as expected.&lt;/p&gt;

&lt;p&gt;The application contains a second page wicket.bugs.autolink.page.home.HomePage extending the BasePage and that adds a second reference to this image via &amp;lt;img src=&quot;../base/theme/logo.png&quot; ...&amp;gt;  =&amp;gt; this kind of references used to work in Wicket 1.4&lt;br/&gt;
When accessing this page via &lt;a href=&quot;http://localhost:8080/home&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/home&lt;/a&gt; none of the two images (the one inherited from the base page and the one added) is displayed.&lt;/p&gt;

&lt;p&gt;The inherited image reference is rendered as:&lt;br/&gt;
   &amp;lt;img src=&quot;theme/logo.png&quot; border=&quot;1&quot; onclick=&quot;window.location.href=&amp;#039;theme/logo.png&amp;#039;;return false;&quot;/&amp;gt;&lt;br/&gt;
  =&amp;gt; theme/logo.png seems not to be an auto link&lt;br/&gt;
  =&amp;gt; I have no idea why an onclick event is rendered by Wicket&lt;/p&gt;

&lt;p&gt;and the explicitly added image reference is rendered as&lt;br/&gt;
   &amp;lt;img src=&quot;wicket/resource/wicket.bugs.autolink.page.home.HomePage/../base/theme/logo-ver-1318516450215.png&quot; /&amp;gt;&lt;br/&gt;
  =&amp;gt; accessing the URL &lt;a href=&quot;http://localhot:8080/wicket/resource/wicket.bugs.autolink.page.home.HomePage/../base/theme/logo-ver-1318516450215.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhot:8080/wicket/resource/wicket.bugs.autolink.page.home.HomePage/../base/theme/logo-ver-1318516450215.png&lt;/a&gt; results in:&lt;/p&gt;

&lt;p&gt;WARN  - WicketObjects              - Could not resolve class &lt;span class=&quot;error&quot;&gt;&amp;#91;base&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.ClassNotFoundException: base&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:251)&lt;br/&gt;
	at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:424)&lt;br/&gt;
	at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)&lt;br/&gt;
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)&lt;br/&gt;
	at java.lang.Class.forName0(Native Method)&lt;br/&gt;
	at java.lang.Class.forName(Class.java:242)&lt;br/&gt;
	at org.apache.wicket.application.AbstractClassResolver.resolveClass(AbstractClassResolver.java:110)&lt;br/&gt;
	at org.apache.wicket.util.lang.WicketObjects.resolveClass(WicketObjects.java:68)&lt;br/&gt;
	at org.apache.wicket.request.mapper.BasicResourceReferenceMapper.resolveClass(BasicResourceReferenceMapper.java:143)&lt;br/&gt;
	at org.apache.wicket.request.mapper.BasicResourceReferenceMapper.mapRequest(BasicResourceReferenceMapper.java:120)&lt;br/&gt;
	at org.apache.wicket.request.mapper.ParentPathReferenceRewriter.mapRequest(ParentPathReferenceRewriter.java:83)&lt;br/&gt;
	at org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:130)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:179)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:204)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:251)&lt;br/&gt;
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:162)&lt;br/&gt;
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:218)&lt;/p&gt;</description>
                <environment>Windows XP, Eclipse 3.7, Oracle JDK 6</environment>
        <key id="12527032">WICKET-4126</key>
            <summary>Automatic Image Linking broken for images in base packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivaynberg">Igor Vaynberg</assignee>
                                    <reporter username="johan1">Johan Stenberg</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2011 14:50:57 +0000</created>
                <updated>Wed, 19 Oct 2011 13:20:29 +0000</updated>
                            <resolved>Wed, 19 Oct 2011 06:41:50 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                                    <fixVersion>1.5.2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13127718" author="johan1" created="Fri, 14 Oct 2011 17:31:36 +0000"  >&lt;p&gt;This bug prevents us from migrating to wicket 1.5.x as it breaks all our pages.&lt;/p&gt;</comment>
                            <comment id="13128445" author="bitstorm" created="Sun, 16 Oct 2011 17:07:14 +0000"  >&lt;p&gt;The first part of the issue (inherited image not displayed) happens inside  AutoLinkResolver.AbstractAutolinkResolverDelegate.newPackageResourceReferenceAutoComponent&lt;br/&gt;
Here we build a new MarkupStream but  we don&apos;t set it to the right index (it starts from index 0). Hence the following if condition always fails:&lt;/p&gt;

&lt;p&gt;// However if the markup stream is a merged markup stream (inheritance), than we&lt;br/&gt;
				// need the class of the markup file which contained the tag.&lt;br/&gt;
				if ((markupStream.get() instanceof ComponentTag) &amp;amp;&amp;amp;&lt;br/&gt;
					(markupStream.getTag().getMarkupClass() != null))&lt;/p&gt;
				{
					clazz = markupStream.getTag().getMarkupClass();
				}


&lt;p&gt;This didn&apos;t happen with Wicket 1.4 because we used the component stream (&apos;container.getMarkupStream()&apos;)  without recreating a new one. I think we should pass the right index or the stream used by AutoLinkResolver.resolve, but I don&apos;t know how to do it in right way.&lt;/p&gt;

&lt;p&gt;The patch I&apos;ve attached is just a workaround for development purpose.&lt;/p&gt;
</comment>
                            <comment id="13128798" author="bitstorm" created="Mon, 17 Oct 2011 11:32:14 +0000"  >&lt;p&gt;@Johan&lt;br/&gt;
Regarding the second part of the issue (parent image not displayed), you have to specify in your application class what character sequence to use as parent folder placeholder:&lt;/p&gt;

&lt;p&gt;getResourceSettings().setParentFolderPlaceholder(&quot;../&quot;);&lt;/p&gt;

&lt;p&gt;You have to do this  also with Wicket 1.4 starting from version 1.4.18. The fact that you didn&apos;t need this code for earlier versions is actually a bug: &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3650&quot; title=&quot;parentFolderPlaceholder default value in Settings implementation is inconsistent with the javadoc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3650&quot;&gt;&lt;del&gt;WICKET-3650&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13129019" author="johan1" created="Mon, 17 Oct 2011 17:26:28 +0000"  >&lt;p&gt;Andrea,&lt;/p&gt;

&lt;p&gt;getResourceSettings().setParentFolderPlaceholder(&quot;../&quot;) did the trick for the second issue.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13129771" author="johan1" created="Tue, 18 Oct 2011 14:51:28 +0000"  >&lt;p&gt;Instead of generating a non-working URL for the referenced image resource Wicket should throw a meaningful exception if the parentFolderPlaceholder is not set.&lt;/p&gt;</comment>
                            <comment id="13129942" author="bitstorm" created="Tue, 18 Oct 2011 18:55:47 +0000"  >&lt;p&gt;I think you are right, we should at least write a log message. I got nothing against throwing an exception, but I&apos;d like to have some feedback from other developers. In the meantime I&apos;m preparing a patch for this.&lt;/p&gt;</comment>
                            <comment id="13130394" author="ivaynberg" created="Wed, 19 Oct 2011 06:41:50 +0000"  >&lt;p&gt;the img link in the base page should not be displayed - that is not a bug. the img tag does not have wicket:link around it so the relative image in the url is not made to be package-relative.&lt;/p&gt;</comment>
                            <comment id="13130455" author="bitstorm" created="Wed, 19 Oct 2011 08:54:34 +0000"  >&lt;p&gt;@Igor&lt;/p&gt;

&lt;p&gt;But in our application class we setted automatic link to true ( getMarkupSettings().setAutomaticLinking(true); ) so img links are considered as  autolink. See  method WicketLinkTagHandler.onComponentTag:&lt;/p&gt;


&lt;p&gt;                // Only xml tags not already identified as Wicket components will be&lt;br/&gt;
		// considered for autolinking. This is because it is assumed that Wicket&lt;br/&gt;
		// components like images or all other kind of Wicket Links will handle&lt;br/&gt;
		// it themselves.&lt;br/&gt;
		// Subclass analyzeAutolinkCondition() to implement your own&lt;br/&gt;
		// implementation and register the new tag handler with the markup&lt;br/&gt;
		// parser through Application.newMarkupParser().&lt;br/&gt;
		if ((autolinking == true) &amp;amp;&amp;amp; (analyzeAutolinkCondition(tag) == true))&lt;/p&gt;
		{
			// Mark it as autolink enabled
			tag.enableAutolink(true);

			// Just a dummy name. The ComponentTag will not be forwarded.
			tag.setId(AUTOLINK_ID);
			tag.setAutoComponentTag(true);
			tag.setModified(true);
			return tag;
		}


&lt;p&gt;Furthermore the parent image is still rendered as a Link with an onclick event, and this should be a bug.   &lt;/p&gt;</comment>
                            <comment id="13130572" author="johan1" created="Wed, 19 Oct 2011 13:00:17 +0000"  >&lt;p&gt;I created a separate JIRA with a modified quick start app describing the inherited image reference problem &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4141&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-4141&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13130587" author="johan1" created="Wed, 19 Oct 2011 13:20:29 +0000"  >&lt;p&gt;I also created a second JIRA requesting the throwing of a IllegalStateException if automatic linking to base page resources is used but the parentFolderPlaceholder is not specified &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4143&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-4143&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499210" name="WICKET-4126(silly version).patch" size="4351" author="bitstorm" created="Sun, 16 Oct 2011 17:08:41 +0000"/>
                            <attachment id="12498886" name="autolink-bug.zip" size="46741" author="johan1" created="Thu, 13 Oct 2011 14:52:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k987:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>