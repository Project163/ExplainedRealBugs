<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4665] Add a new AjaxChannel that discards any Ajax requests if there is a running request in the same channel</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4665</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The schedule JavaScript function of the ajax channel uses a BUSY flag and a request queue in a callbacks array.&lt;/p&gt;

&lt;p&gt;If the channel is marked as busy because there is a request currently being executed, the second part of the function is executed and for channel type DROP, the newly scheduled request is put into the callbacks queue.&lt;/p&gt;

&lt;p&gt;Using this approach, the dropping channel type actually allows 2 requests in the &quot;total queue&quot;.&lt;br/&gt;
The one that triggers the busy = true which is still running and the one that is stored into the callbacks array.&lt;/p&gt;

&lt;p&gt;Reading the documentation of AjaxChannel.DROP says:&lt;/p&gt;

&lt;p&gt;dropping - only the last Ajax request is processed, the others are discarded&lt;/p&gt;

&lt;p&gt;		schedule: function (callback) {&lt;br/&gt;
			if (this.busy === false) {&lt;br/&gt;
				this.busy = true;&lt;br/&gt;
				try &lt;/p&gt;
{
					return callback();
				}
&lt;p&gt; catch (exception) &lt;/p&gt;
{
					this.busy = false;
					Wicket.Log.error(&quot;An error occurred while executing Ajax request:&quot; + exception);
				}
&lt;p&gt;			} else {&lt;br/&gt;
				Wicket.Log.info(&quot;Channel busy - postponing...&quot;);&lt;br/&gt;
				if (this.type === &apos;s&apos;) &lt;/p&gt;
{ // stack
					this.callbacks.push(callback);
				}
&lt;p&gt;				else &lt;/p&gt;
{ /* drop */
					this.callbacks = [];
					//  THIS IS WRONG   this.callbacks[0] = callback;
				}
&lt;p&gt;				return null;&lt;br/&gt;
			}&lt;br/&gt;
		},&lt;/p&gt;

&lt;p&gt;To make it work, the dropping channel should NOT store the currently scheduled request, but simply clear the callbacks array.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599602">WICKET-4665</key>
            <summary>Add a new AjaxChannel that discards any Ajax requests if there is a running request in the same channel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="coldiges">Christian Oldiges</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jul 2012 10:12:20 +0000</created>
                <updated>Mon, 23 Jul 2012 13:25:55 +0000</updated>
                            <resolved>Mon, 23 Jul 2012 13:25:55 +0000</resolved>
                                    <version>6.0.0-beta3</version>
                                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>6.0.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13419201" author="svenmeier" created="Fri, 20 Jul 2012 15:06:36 +0000"  >&lt;p&gt;I don&apos;t know why this implementation keeps one additional callback in the queue, but it has been this way in 1.5.x too (didn&apos;t check 1.4.x).&lt;/p&gt;

&lt;p&gt;IMHO it would make sense to let the channel drop &lt;b&gt;all&lt;/b&gt; successive callbacks while busy, as you suggested. But I would like to hear the opinion other developers.&lt;/p&gt;

&lt;p&gt;@Igor, @Martin ? &lt;/p&gt;</comment>
                            <comment id="13420308" author="mgrigorov" created="Sun, 22 Jul 2012 20:07:39 +0000"  >&lt;p&gt;I think Matej have implemented this functionality and I didn&apos;t have the chance someone to explain it to me. So this is how I understood it by reading its JSDoc and follow the logic in the code: &lt;br/&gt;
the already fired request doesn&apos;t count, only the requests in the queue count. That is, the already fired request should not be stopped (this will lead to &quot;the client aborted the connection&quot; exceptions), the &quot;busy&quot; flag is there to prevent more than one Ajax requests on the same channel to be fired in the same time. &lt;br/&gt;
DROP and QUEUE affect only the queue of waiting requests.&lt;/p&gt;

&lt;p&gt;If DROP was supposed to drop all requests but the one that is currently being executed then the JSDoc would say that it allows only the &lt;b&gt;first&lt;/b&gt; request, not the &lt;b&gt;last&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;We may add a third value for AjaxChannel.Type for this new behavior though.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12540223">WICKET-4366</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12548089">WICKET-4470</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>