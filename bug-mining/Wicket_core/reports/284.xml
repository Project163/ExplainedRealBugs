<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:18:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3846] in environments without reliable timestamps (e.g. some clusters) resource caching is useless</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3846</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;As mentioned already in the wicket userlist &lt;b&gt;iirc&lt;/b&gt; wicket&apos;s default resource caching strategy using resource file timestamps will not work in some cluster environments. Cluster deployers seem to be quite dumb and not preserve the &apos;lastModified&apos; file attribute. So depending on the server instance the resource is delivered from it will contain multiple timestamps for the same resource. Apparently timestamps seem to be unsuitable for the purpose of caching in that environment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512226">WICKET-3846</key>
            <summary>in environments without reliable timestamps (e.g. some clusters) resource caching is useless</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pete">Peter Ertl</assignee>
                                    <reporter username="pete">Peter Ertl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2011 14:55:42 +0000</created>
                <updated>Thu, 30 Jun 2011 11:20:55 +0000</updated>
                            <resolved>Wed, 29 Jun 2011 15:57:24 +0000</resolved>
                                    <version>1.5-RC5.1</version>
                                    <fixVersion>1.5-RC6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13057287" author="pete" created="Wed, 29 Jun 2011 15:04:29 +0000"  >&lt;p&gt;I added another caching strategy so people can choose some static version string to attach to all resource files.&lt;/p&gt;

&lt;p&gt;For example&lt;/p&gt;

&lt;p&gt;  getResourceSettings().setCacheStrategy(new FilenameWithFixedVersionResourceCachingStrategy(&quot;myversion123&quot;))&lt;/p&gt;

&lt;p&gt;will change resource&lt;/p&gt;

&lt;p&gt;  scripts.js&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;   scripts-ver_myversion123.js&lt;/p&gt;

&lt;p&gt;So you can choose to use wicket&apos;s default caching strategy based on timestamps for development (which is convenient) and use a static version for deployment on a cluster (which is not convenient but works).&lt;/p&gt;

&lt;p&gt;You have to change the version string when rolling out another version of your application.&lt;/p&gt;

&lt;p&gt;This could either be done manually (hardcoded string) or with the help of your build tool. For example let maven create a properties file with the current version and read it dynamically on application startup.&lt;/p&gt;</comment>
                            <comment id="13057314" author="pete" created="Wed, 29 Jun 2011 15:57:09 +0000"  >&lt;p&gt;patch applied to trunk&lt;/p&gt;</comment>
                            <comment id="13057344" author="ivaynberg" created="Wed, 29 Jun 2011 16:53:29 +0000"  >&lt;p&gt;at deployment time to we disable the caching strategy? so it is not broken by default in clusters?&lt;/p&gt;</comment>
                            <comment id="13057368" author="pete" created="Wed, 29 Jun 2011 17:57:18 +0000"  >&lt;p&gt;@igor: then we would have to choose between&lt;/p&gt;

&lt;p&gt;(a) disabling caching for resources completely which will be &lt;em&gt;very&lt;/em&gt; bad for performance&lt;br/&gt;
(b) use a short-lived caching period (like 1 hour) which will cause stale cache entries when updating the deployed application&lt;/p&gt;

&lt;p&gt;Basically we have to choose between broken behavior in some cluster implementations and bad application upgrade behavior. Which pill do you want to swallow? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13057372" author="ivaynberg" created="Wed, 29 Jun 2011 18:01:25 +0000"  >&lt;p&gt;how about a map&amp;lt;resourcename,date&amp;gt; in session? this will get synced across the cluster.&lt;/p&gt;</comment>
                            <comment id="13057523" author="pete" created="Wed, 29 Jun 2011 22:30:58 +0000"  >&lt;p&gt;The final solution is as follows:&lt;/p&gt;

&lt;p&gt;In development mode:&lt;/p&gt;

&lt;p&gt;  version-string = last-modified timestamp converted to milliseconds as a string&lt;br/&gt;
  cache-scope = version-string will be cached for the lifetime of the current request cycle&lt;/p&gt;

&lt;p&gt;In deployment mode:&lt;/p&gt;

&lt;p&gt;  version-string = md5 hash value of the package resource data as a hexadecimal string&lt;br/&gt;
  cache-scope = version-string will be cached for the lifetime of the wicket application&lt;/p&gt;


&lt;p&gt;the resource filenames will be decorated like that:&lt;/p&gt;

&lt;p&gt;  decorated_resource_filename := base_filename + &quot;&lt;del&gt;ver&lt;/del&gt;&quot; + version-string &quot;.&quot; + file_extension&lt;/p&gt;

&lt;p&gt;all this behavior is just a default and can be changed to your needs.&lt;/p&gt;</comment>
                            <comment id="13057726" author="pete" created="Thu, 30 Jun 2011 09:49:35 +0000"  >&lt;p&gt;the code changes for this issue include a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3848&quot; title=&quot;resource caching is not working for localized package resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3848&quot;&gt;&lt;del&gt;WICKET-3848&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13057761" author="pete" created="Thu, 30 Jun 2011 11:20:55 +0000"  >&lt;p&gt;Should be working + fixed, leaving this ticket open for a while. Your feedback on tests is welcome!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12484649" name="cache.patch" size="13367" author="pete" created="Wed, 29 Jun 2011 15:05:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a57z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57119</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>