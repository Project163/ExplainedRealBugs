<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4959] Notify behaviors when a component is removed from the tree</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4959</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I use a AjaxTabbedPanel on my page and run into the following problem:&lt;/p&gt;

&lt;p&gt;If there is an Behavior (AjaxSelfUpdatingTimer or AbstractAjaxTimerBehavior) attached to one of the panels and the panel is replaced by another panel, the AjaxBehavior is not properly removed and deactivated. After the idle-duration the JS calls in and Wicket throws an exception due to the missing behavior.&lt;/p&gt;

&lt;p&gt;Stacktrace:&lt;br/&gt;
ERROR - DefaultExceptionMapper     - Unexpected error occurred&lt;br/&gt;
org.apache.wicket.behavior.InvalidBehaviorIdException: Cannot find behavior with id &apos;0&apos; on component &apos;org.apache.wicket.markup.html.panel.EmptyPanel:tabs:panel&apos; in page &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;Page class = com.wicket.HomePage, id = 0, render count = 4&amp;#93;&lt;/span&gt;&apos;. Perhaps the behavior did not properly implement getStatelessHint() and returned &apos;true&apos; to indicate that it is stateless instead of returning &apos;false&apos; to indicate that it is stateful.&lt;br/&gt;
	at org.apache.wicket.Behaviors.getBehaviorById(Behaviors.java:303)&lt;br/&gt;
	at org.apache.wicket.Component.getBehaviorById(Component.java:4483)&lt;br/&gt;
	at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:246)&lt;br/&gt;
	at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:226)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;I attached a quickstart showing the problem. Simply take a look at second tab and then go back to the first tab and you run into this problem. &lt;/p&gt;

&lt;p&gt;There is a workaround for this: If you attach the behavior to a component of the panel (i.e. the clock) this error doesn&apos;t occur.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12626744">WICKET-4959</key>
            <summary>Notify behaviors when a component is removed from the tree</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="paul ms">Paul</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jan 2013 10:51:58 +0000</created>
                <updated>Tue, 23 Jan 2018 20:10:36 +0000</updated>
                            <resolved>Fri, 18 Jan 2013 08:04:27 +0000</resolved>
                                    <version>6.4.0</version>
                                    <fixVersion>6.5.0</fixVersion>
                                    <component>wicket-extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13548462" author="svenmeier" created="Wed, 9 Jan 2013 12:38:45 +0000"  >&lt;p&gt;Problem is that MarkupContainer#replace() (#742) copies the markupId from the panel with the behavior (ClockPanel) onto the panel without (EmptyPanel):&lt;/p&gt;

&lt;p&gt;	// The generated markup id remains the same&lt;br/&gt;
	child.setMarkupId(replaced);&lt;/p&gt;

&lt;p&gt;Thus the next pending Ajax request comes through, since wicket-ajax&apos;s defaultPrecondition sees the markupId still present in the dom.&lt;/p&gt;</comment>
                            <comment id="13548475" author="mgrigorov" created="Wed, 9 Jan 2013 13:05:38 +0000"  >&lt;p&gt;I think since ClockPanel is removed from the component tree its timer behavior should be stopped.&lt;/p&gt;</comment>
                            <comment id="13548693" author="svenmeier" created="Wed, 9 Jan 2013 17:20:24 +0000"  >&lt;p&gt;Even if is was stopped on the server, there&apos;s still a javascript timeout lurking around, which will trigger an additional request.&lt;/p&gt;</comment>
                            <comment id="13548731" author="mgrigorov" created="Wed, 9 Jan 2013 17:46:59 +0000"  >&lt;p&gt;org.apache.wicket.ajax.AbstractAjaxTimerBehavior#stop() contributes JS that stops the client side timeout.&lt;br/&gt;
I think we can check whether this is an Ajax call in AbstractAjaxTimerBehavior#onDetach() and call #stop(target).&lt;/p&gt;</comment>
                            <comment id="13556003" author="mgrigorov" created="Thu, 17 Jan 2013 09:20:41 +0000"  >&lt;p&gt;The Ajax timer behavior is stopped now when its related component is removed from the tree in Ajax request.&lt;/p&gt;</comment>
                            <comment id="13556066" author="mgrigorov" created="Thu, 17 Jan 2013 11:09:38 +0000"  >&lt;p&gt;A patch that introduces Behavior#onRemove(Component) - a callback that is called when a host component is removed from its parent.&lt;/p&gt;</comment>
                            <comment id="13557035" author="mgrigorov" created="Fri, 18 Jan 2013 08:04:27 +0000"  >&lt;p&gt;The Ajax timer behavior will stop if the component it is attached to is removed from its parent.&lt;br/&gt;
There is still chance that a scheduled timer will fire on the client side before the stop. To prevent this you need explicitly to use AjaxChannel.Type.ACTIVE for the timer behavior. Override #updateAjaxAttributes() and do attributes.setAjaxChannel(&quot;someName&quot;, Type.Active);&lt;/p&gt;</comment>
                            <comment id="13924391" author="karthur" created="Fri, 7 Mar 2014 22:08:04 +0000"  >&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;I have exactly the same problem with Wicket 1.5.x, Unfortunately we are stuck to this version for now. Do you have any recommended fix to stop the JavaScript Keep polling on client side when the Behavior has been removed from the component on server of if it has been replaced in the meantime? Appreciate any help!&lt;/p&gt;

&lt;p&gt;Regards, &lt;br/&gt;
Arthur&lt;/p&gt;</comment>
                            <comment id="13925544" author="mgrigorov" created="Mon, 10 Mar 2014 08:15:28 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Unfortunately I don&apos;t see a way how you can workaround this in 1.5.x.&lt;br/&gt;
Even if you copy the behavior from 6.x the new method won&apos;t be called because there is a change in Component.java too.&lt;br/&gt;
You can check the changes made in 6.x and port them to 1.5.x. If this fixes the problem then attach the patch and we will apply it for the next release of 1.5.x.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12687673">WICKET-5464</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13133063">WICKET-6523</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12637461">WICKET-5104</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12565308" name="WICKET-4959.patch" size="2702" author="mgrigorov" created="Thu, 17 Jan 2013 11:09:38 +0000"/>
                            <attachment id="12563927" name="quickstart.zip" size="10027" author="paul ms" created="Wed, 9 Jan 2013 10:52:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>303361</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17ap3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>