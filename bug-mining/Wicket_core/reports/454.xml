<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4138] BookmarkablePageLinks not working on a forwarded page</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4138</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;While migrating our app from 1.4 to 1.5 we have discovered a problem with how BookmarkablePageLinks are rendered.&lt;/p&gt;

&lt;p&gt;The attached quickstart demonstrates the problem:&lt;/p&gt;

&lt;p&gt;Two pages: HomePage and OtherPage mounted at: /content/home and /content/other respectively.&lt;/p&gt;

&lt;p&gt;These are mounted using the encoder UrlPathPageParametersEncoder for backwards compatibility with existing 1.4 style URLs.&lt;/p&gt;

&lt;p&gt;A filter has been established in web.xml to forward requests to root (eg., localhost) to localhost/content/home&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Note: I have left out the port :8080 part from all URL references so please insert when testing&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Point browser to &lt;a href=&quot;http://localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost&lt;/a&gt; and the page is forwarded to &lt;a href=&quot;http://localhost/content/home&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/content/home&lt;/a&gt; and displays correctly (browser URL still shows &lt;a href=&quot;http://localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost&lt;/a&gt; as desired) but the links do not work because they remove the &apos;content&apos; segment of the URL:&lt;/p&gt;

&lt;p&gt;eg., Home link -&amp;gt; &lt;a href=&quot;http://localhost/home&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/home&lt;/a&gt; - fails - should have been &lt;a href=&quot;http://localhost/content/home&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/content/home&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you type in the full URL: &lt;a href=&quot;http://localhost/content/home&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/content/home&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;then the home page displays and the links work correctly.&lt;/p&gt;

&lt;p&gt;A similar page set  up works fine in 1.4.&lt;/p&gt;</description>
                <environment>Windows XP, Quad Core Intel, 2GB RAM</environment>
        <key id="12527392">WICKET-4138</key>
            <summary>BookmarkablePageLinks not working on a forwarded page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="chrisc">Chris Colman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2011 05:13:33 +0000</created>
                <updated>Mon, 31 Oct 2011 15:16:59 +0000</updated>
                            <resolved>Mon, 31 Oct 2011 15:16:59 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                    <version>1.5.2</version>
                                    <fixVersion>1.5.3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13128672" author="chrisc" created="Mon, 17 Oct 2011 05:14:28 +0000"  >&lt;p&gt;This quickstart demonstrates the bug.&lt;/p&gt;</comment>
                            <comment id="13129291" author="chrisc" created="Mon, 17 Oct 2011 22:41:15 +0000"  >&lt;p&gt;If I get Wicket to handle the &quot;/&quot; mount path and not the separate filter then it seems to work. Hopefully I will be able to refactor for 1.5 so that the separate filter ignores the &quot;/&quot; mount path and leaves it up to Wicket to handle.&lt;/p&gt;

&lt;p&gt;The reason the separate filter is currently handling the &quot;/&quot; mount path is that the app is multi tenanted and supports many virtual hosts. It uses a URL parameter strategy where the value is an organization ID like /o/123 to specify the organization ID to display. An incoming request for www.abc.com is forwarded to www.abc.com/content/home/o/123 but we should be able to determine the org ID from the domain name and let wicket perform its natural rendering of the page returned by getHomePage().&lt;/p&gt;

&lt;p&gt;If this works out then this issue will no longer be an issue for us.&lt;/p&gt;</comment>
                            <comment id="13130538" author="mgrigorov" created="Wed, 19 Oct 2011 12:31:30 +0000"  >&lt;p&gt;Here is a minimal patch that fixes the problem.&lt;/p&gt;</comment>
                            <comment id="13130545" author="mgrigorov" created="Wed, 19 Oct 2011 12:35:31 +0000"  >&lt;p&gt;Igor,&lt;/p&gt;

&lt;p&gt;Can you take a look?&lt;br/&gt;
Do we need ForwardAttributes (like ErrorAttributes) ?&lt;br/&gt;
My investigation shows that UrlRenderer#getBaseUrl() should not always take into account javax.servlet.forward.request_uri. Only renderRelativeXYZ() may use it otherwise infinite redirects happen.&lt;/p&gt;

&lt;p&gt;Additionally  should we make org.apache.wicket.protocol.http.servlet.ServletWebRequest.shouldPreserveClientUrl() aware of forward attributes ? I&apos;m not sure.&lt;/p&gt;</comment>
                            <comment id="13130933" author="chrisc" created="Wed, 19 Oct 2011 20:01:55 +0000"  >&lt;p&gt;You added ForwardAttributes but I can&apos;t see any reference to that in the code base or the patch. How is it used?&lt;/p&gt;</comment>
                            <comment id="13130937" author="ivaynberg" created="Wed, 19 Oct 2011 20:04:29 +0000"  >&lt;p&gt;its not used yet, it was just an idea he prototyped...&lt;/p&gt;</comment>
                            <comment id="13131179" author="chrisc" created="Wed, 19 Oct 2011 23:56:33 +0000"  >&lt;p&gt;I applied the patch and now the above mentioned links in our app works fine under Wicket 1.5. Great work!&lt;/p&gt;

&lt;p&gt;When will this patch be committed to the trunk?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499673" name="ForwardAttributes.java" size="4098" author="mgrigorov" created="Wed, 19 Oct 2011 12:36:16 +0000"/>
                            <attachment id="12499256" name="ForwardingFromRoot.zip" size="49393" author="chrisc" created="Mon, 17 Oct 2011 05:14:28 +0000"/>
                            <attachment id="12499669" name="WICKET-4138.patch" size="3481" author="mgrigorov" created="Wed, 19 Oct 2011 12:31:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>87568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k973:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116307</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>