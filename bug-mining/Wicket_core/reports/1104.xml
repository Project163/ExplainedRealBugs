<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5772] LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5772</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;If you have a LoadableDetachableModel whose load() operation fails at an instance, the LoadableDetachableModel will cache null value because &lt;/p&gt;

&lt;p&gt;getObject() method sets attached = true; before load() invocation has returned.&lt;/p&gt;

&lt;p&gt;This results in methods trusting LoadableDetachableModel using the null value for their operations which is logically incorrect as null might not be a legal value at all. Such behavior would result in unexpected difficult-to-debug behavior in depending components.&lt;/p&gt;

&lt;p&gt;Easy fix:&lt;br/&gt;
Move:&lt;br/&gt;
attached = true;&lt;br/&gt;
after line:&lt;br/&gt;
transientModelObject = load();&lt;/p&gt;

&lt;p&gt;Test case:&lt;/p&gt;


&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;LoadableDetachableModel must not return null as an attached value if load()&lt;/li&gt;
	&lt;li&gt;fails.&lt;br/&gt;
   */&lt;br/&gt;
  public void testWhenLoadFails() {&lt;br/&gt;
    final LoadableDetachableModel&amp;lt;Void&amp;gt; loadableDetachableModel = new LoadableDetachableModel&amp;lt;Void&amp;gt;() {&lt;br/&gt;
      /**&lt;/li&gt;
	&lt;li&gt;@see org.apache.wicket.model.LoadableDetachableModel#load()&lt;br/&gt;
       */&lt;br/&gt;
      @Override&lt;br/&gt;
      protected Void load() 
{
        throw new UnsupportedOperationException(&quot;Let&apos;s assume this fails for some reason.&quot;);
      }
&lt;p&gt;    };&lt;br/&gt;
    try &lt;/p&gt;
{
      loadableDetachableModel.getObject();
      fail(UnsupportedOperationException.class + &quot; expected.&quot;);
    }
&lt;p&gt; catch (final UnsupportedOperationException e) &lt;/p&gt;
{
      LoggerFactory.getLogger(LoadableDetachableModel.class).debug(&quot;Expected behavior due to &quot; + UnsupportedOperationException.class);
    }&lt;br/&gt;
&lt;br/&gt;
    try {
      assertNotSame(LoadableDetachableModel.class + &quot; should not return null if it&apos;s load() has failed\n&quot;, null,
          loadableDetachableModel.getObject());
    } catch (final UnsupportedOperationException e) {      LoggerFactory.getLogger(LoadableDetachableModel.class).debug(&quot;Expected behavior due to &quot; + UnsupportedOperationException.class);    }
&lt;p&gt;  }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12757132">WICKET-5772</key>
            <summary>LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="mmakundi">Martin Terra</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>easytest</label>
                            <label>patch</label>
                    </labels>
                <created>Sat, 22 Nov 2014 01:23:28 +0000</created>
                <updated>Fri, 29 May 2015 17:06:36 +0000</updated>
                            <resolved>Mon, 24 Nov 2014 20:10:38 +0000</resolved>
                                    <version>1.4.23</version>
                    <version>6.18.0</version>
                    <version>7.0.0-M4</version>
                                    <fixVersion>7.0.0-M5</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="14223089" author="jira-bot" created="Mon, 24 Nov 2014 16:08:40 +0000"  >&lt;p&gt;Commit 61d6264b2bfa1a68b18a1c223945ad1cd9a3b8de in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=61d6264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=61d6264&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5772&quot; title=&quot;LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5772&quot;&gt;&lt;del&gt;WICKET-5772&lt;/del&gt;&lt;/a&gt; set attached after load, so failuer of load() will not keep null value&lt;/p&gt;</comment>
                            <comment id="14223094" author="svenmeier" created="Mon, 24 Nov 2014 16:11:15 +0000"  >&lt;p&gt;The fix is trivial indeed.&lt;/p&gt;

&lt;p&gt;@devs: any objections against this change on 6.x? Although unlikely, even such a small change could break existing applications.&lt;/p&gt;</comment>
                            <comment id="14223098" author="mgrigorov" created="Mon, 24 Nov 2014 16:15:31 +0000"  >&lt;p&gt;Looks like a safe change to me.&lt;br/&gt;
The only negative effect I see is that it may make second/third/... attempt to load the model object in case it fails and the impl of #load() handles this explicitly.&lt;/p&gt;</comment>
                            <comment id="14223440" author="jira-bot" created="Mon, 24 Nov 2014 20:08:23 +0000"  >&lt;p&gt;Commit fd3de0085e1f9f0dc98dbf456106d38a4b779f9e in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fd3de00&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fd3de00&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5772&quot; title=&quot;LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5772&quot;&gt;&lt;del&gt;WICKET-5772&lt;/del&gt;&lt;/a&gt; set attached after load, so failuer of load() will not keep null value&lt;/p&gt;</comment>
                            <comment id="14223444" author="svenmeier" created="Mon, 24 Nov 2014 20:10:38 +0000"  >&lt;p&gt;#attached is now set after calling #load(), as suggested.&lt;/p&gt;

&lt;p&gt;Thanks Martin!&lt;/p&gt;</comment>
                            <comment id="14226144" author="jira-bot" created="Wed, 26 Nov 2014 12:54:43 +0000"  >&lt;p&gt;Commit 1c1c151da0636d4c433e198de97c84ca63f885a8 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1c1c151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1c1c151&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5772&quot; title=&quot;LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5772&quot;&gt;&lt;del&gt;WICKET-5772&lt;/del&gt;&lt;/a&gt; set attached after load, so failuer of load() will not keep null value&quot;&lt;/p&gt;

&lt;p&gt;This reverts commit fd3de0085e1f9f0dc98dbf456106d38a4b779f9e.&lt;/p&gt;</comment>
                            <comment id="14226145" author="jira-bot" created="Wed, 26 Nov 2014 12:54:47 +0000"  >&lt;p&gt;Commit ae76a350f2646e5246bebc3b38ea938ebba9fd43 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ae76a35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ae76a35&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5772&quot; title=&quot;LoadableDetachableModel caches null value if load() fails, bug in getObject() {attached = true;}&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5772&quot;&gt;&lt;del&gt;WICKET-5772&lt;/del&gt;&lt;/a&gt; added javadoc&lt;/p&gt;</comment>
                            <comment id="14226147" author="svenmeier" created="Wed, 26 Nov 2014 12:55:56 +0000"  >&lt;p&gt;This is improved in 7.x only. To prevent regressions in existing projects, the fix is not applied to 6.x.&lt;/p&gt;</comment>
                            <comment id="14226148" author="mgrigorov" created="Wed, 26 Nov 2014 13:02:10 +0000"  >&lt;p&gt;Linked to &lt;a href=&quot;http://markmail.org/message/wc2b4wwcyduuqkzl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/wc2b4wwcyduuqkzl&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12833838">WICKET-5916</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ofb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>