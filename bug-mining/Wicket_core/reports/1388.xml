<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6393] NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6393</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The NestedStringResourceLoader ignores hard-coded default values and throws a MissingResourceException.&lt;/p&gt;

&lt;p&gt;Consider FormComponen.getString()&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;		private String getString(Localizer localizer, String key, Component component)
		{
			triedKeys.add(key);

			// Note: It is important that the default value of &quot;&quot; is
			// provided to getString() not to throw a MissingResourceException or to
			// return a default string like &quot;[Warning: String ...&quot;
			return localizer.getString(key, component, &quot;&quot;);
		}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The default value provided here actually gets lost in the call hierarchy in `Localizer.getString()` (line 232). That seems to be ok because the code there seems to expect that any code it calls will not take into account the `ThrowExceptionOnMissingResource` setting (at least that is what I infer from the method name `getStringIgnoreSettings`. However, again further down the hierarchy, `NestedStringResourceLoader.handleMissingKey()` (line 166) is called which throws a MissingResourceException and defies the default-value handling code in `Localizer.getString()`.&lt;/p&gt;

&lt;p&gt;Here is a stack trace:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;NestedStringResourceLoader.handleMissingKey(String, Locale, String, Component, String) line: 186	
NestedStringResourceLoader.loadNestedStringResource(Object, String, Locale, String, String) line: 130	
NestedStringResourceLoader.loadStringResource(Component, String, Locale, String, String) line: 79	
Localizer.getStringIgnoreSettings(String, Component, IModel&amp;lt;?&amp;gt;, Locale, String, String) line: 397	
Localizer.getString(String, Component, IModel&amp;lt;?&amp;gt;, Locale, String, IModel&amp;lt;String&amp;gt;) line: 232	
Localizer.getString(String, Component, IModel&amp;lt;?&amp;gt;, Locale, String, String) line: 201	
Localizer.getString(String, Component, String) line: 150	
FormComponent$MessageSource.getString(Localizer, String, Component) line: 201	
FormComponent$MessageSource.getMessage(String, Map&amp;lt;String,Object&amp;gt;) line: 138	
ValidationError.getErrorMessage(IErrorMessageSource) line: 230	
TextField&amp;lt;T&amp;gt;(FormComponent&amp;lt;T&amp;gt;).error(IValidationError) line: 657	
TextField&amp;lt;T&amp;gt;(FormComponent&amp;lt;T&amp;gt;).reportRequiredError() line: 1488	
TextField&amp;lt;T&amp;gt;(FormComponent&amp;lt;T&amp;gt;).validateRequired() line: 1479	
TextField&amp;lt;T&amp;gt;(FormComponent&amp;lt;T&amp;gt;).validate() line: 1127	
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13077672">WICKET-6393</key>
            <summary>NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="rec">Richard Eckart de Castilho</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jun 2017 13:22:55 +0000</created>
                <updated>Tue, 13 Jun 2017 19:36:01 +0000</updated>
                            <resolved>Tue, 13 Jun 2017 19:36:01 +0000</resolved>
                                    <version>7.7.0</version>
                                    <fixVersion>7.8.0</fixVersion>
                    <fixVersion>8.0.0-M7</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16048271" author="mgrigorov" created="Tue, 13 Jun 2017 19:15:54 +0000"  >&lt;p&gt;The only way to fix this is to change the API of org.apache.wicket.resource.loader.IStringResourceLoader#loadStringResource(org.apache.wicket.Component, java.lang.String, java.util.Locale, java.lang.String, java.lang.String) in Wicket 8.x. We should add IModel&amp;lt;String&amp;gt; for the default value.&lt;br/&gt;
Maybe even to both methods in this class.&lt;/p&gt;

&lt;p&gt;@devs: What do you think ? &lt;/p&gt;</comment>
                            <comment id="16048273" author="rec" created="Tue, 13 Jun 2017 19:20:06 +0000"  >&lt;p&gt;It wouldn&apos;t be an option to catch the exception in getStringIgnoreSettings and return null?&lt;/p&gt;</comment>
                            <comment id="16048285" author="mgrigorov" created="Tue, 13 Jun 2017 19:26:07 +0000"  >&lt;p&gt;We can remove `handleMissingKey()` altogether and return `null` but then the end result would be something like `Some text #(missingKey)`. Only NestedStringResourceLoader knows how to deal with the placeholders.&lt;/p&gt;</comment>
                            <comment id="16048287" author="mgrigorov" created="Tue, 13 Jun 2017 19:27:48 +0000"  >&lt;p&gt;Actually you may be right!&lt;br/&gt;
If any key is missing then return `null` and let the default value be used.&lt;br/&gt;
This sounds good! &lt;/p&gt;</comment>
                            <comment id="16048293" author="jira-bot" created="Tue, 13 Jun 2017 19:35:38 +0000"  >&lt;p&gt;Commit 28d4a4bbbca60d2b3011cb61475af863613d62ba in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=28d4a4b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=28d4a4b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6393&quot; title=&quot;NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6393&quot;&gt;&lt;del&gt;WICKET-6393&lt;/del&gt;&lt;/a&gt; NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException&lt;/p&gt;

&lt;p&gt;Return null is any of the placeholders cannot resolve its value. This way the provided defaultValue will be used.&lt;/p&gt;</comment>
                            <comment id="16048294" author="jira-bot" created="Tue, 13 Jun 2017 19:35:54 +0000"  >&lt;p&gt;Commit 820431ecd7ac6a21dcfef32ffb1f322bfb42902b in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=820431e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=820431e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6393&quot; title=&quot;NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6393&quot;&gt;&lt;del&gt;WICKET-6393&lt;/del&gt;&lt;/a&gt; NestedStringResourceLoader ignores hard-coded default values and throws MissingResourceException&lt;/p&gt;

&lt;p&gt;Return null is any of the placeholders cannot resolve its value. This way the provided defaultValue will be used.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 28d4a4bbbca60d2b3011cb61475af863613d62ba)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fxev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>