<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6860] ConcatBundleResource double scope processing when CssUrlReplacer is used</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6860</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;There is &quot;double scope processing&quot; of a url in a PackageResource when the CssCompressor set on the Application ResourceSettings implements .IScopeAwareTextResourceProcessor.&lt;/p&gt;

&lt;p&gt;The CssUrlReplacer (for example) makes the urls relative during the PackageResource.compressResponse call.&#160; The compressResponse ends up being called in ConcatBundleResource.readAllResources as part of `IOUtils.copy(curStream.getInputStream(), output)` and then ConcatBundleResource calls CssUrlReplacer.process again.&#160;&#160;&lt;br/&gt;
 &#160;&lt;br/&gt;
 &lt;a href=&quot;https://github.com/apache/wicket/commit/e2a11151e2bc55ae3a637efd88b1202582461780/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/commit/e2a11151e2bc55ae3a637efd88b1202582461780/&lt;/a&gt; causes a &quot;double scope processing&quot; of a url in a PackageResource.&#160; The second application of the CssCompressor happens here&#160;&lt;a href=&quot;https://github.com/apache/wicket/commit/e2a11151e2bc55ae3a637efd88b1202582461780/#diff-b394ae1f7fce412b517619f435cf3f7035be89e283cd541c90975a70b7afd9caR194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/commit/e2a11151e2bc55ae3a637efd88b1202582461780/#diff-b394ae1f7fce4...&lt;/a&gt;&lt;br/&gt;
 &#160;&lt;/p&gt;

&lt;p&gt;Set the CssCompressor on the Application.&#160; Something like this in the Application `init` for example:&lt;br/&gt;
 &#160;&lt;br/&gt;
 this.getResourceSettings().setCssCompressor(new CssUrlReplacer())&lt;br/&gt;
 &#160;&lt;br/&gt;
 The CssUrlReplacer gets set on both the PackageResource&#160;and ConcatBundleResource as the Compressor.&lt;br/&gt;
 &#160;&lt;br/&gt;
 &#160;&lt;br/&gt;
 So, given this in the PackageResource css:&lt;br/&gt;
 background: url(&apos;../img/header_logo_r.png&apos;);&lt;br/&gt;
 &#160;&lt;br/&gt;
 this bad url gets inserted into the combined css file:&lt;br/&gt;
 background (generated in 8.5.0+): url(&apos;../com.foo.pages.SomePage/stylesheet/com.foo.pages.SomePage/img/header_logo_r-ver-1.4.0-ver-1.4.0.png&apos;)&lt;br/&gt;
 &#160;&lt;br/&gt;
 whereas this is the correct ScopeAware path (which is generated in &amp;lt;8.5.0):&lt;br/&gt;
 background: url(&apos;../com.foo.pages.SomePage/img/header_logo_r-ver-1.4.0.png&apos;)&lt;br/&gt;
 &#160;&lt;br/&gt;
 &#160;&lt;br/&gt;
 &#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13352148">WICKET-6860</key>
            <summary>ConcatBundleResource double scope processing when CssUrlReplacer is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="headw01">William Headrick</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2021 05:05:18 +0000</created>
                <updated>Fri, 19 Mar 2021 14:24:08 +0000</updated>
                            <resolved>Fri, 19 Mar 2021 14:24:08 +0000</resolved>
                                    <version>8.5.0</version>
                                    <fixVersion>9.3.0</fixVersion>
                    <fixVersion>8.12.0</fixVersion>
                                    <component>wicket-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17264599" author="headw01" created="Thu, 14 Jan 2021 05:07:05 +0000"  >&lt;p&gt;Change to ConcatBundleResource during the &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6669&quot; title=&quot;CSS Resource Bundling throws exception when used with CssUrlReplacer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6669&quot;&gt;&lt;del&gt;WICKET-6669&lt;/del&gt;&lt;/a&gt; change broke CSS PackageResource with relative URL when CssUrlReplacer CssCompressor is used.&lt;/p&gt;</comment>
                            <comment id="17264677" author="mgrigorov" created="Thu, 14 Jan 2021 08:06:16 +0000"  >&lt;p&gt;Please attach a demo application (&lt;a href=&quot;https://wicket.apache.org/start/quickstart.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wicket.apache.org/start/quickstart.html&lt;/a&gt;). Thanks!&lt;/p&gt;</comment>
                            <comment id="17265115" author="headw01" created="Thu, 14 Jan 2021 18:29:03 +0000"  >&lt;p&gt;See attached Zip with demo application.&lt;/p&gt;

&lt;p&gt;There should be a link with the &lt;a href=&quot;https://wicket.apache.org/img/logo-apachewicket.svg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wicket.apache.org/img/logo-apachewicket.svg&lt;/a&gt; image (copied into the project) displayed.&lt;/p&gt;

&lt;p&gt;Switch between Wicket 8.5.0 and 8.4.0 in pom.xml to see difference.&#160; 8.5.0 will not show image.&#160; 8.4.0 will show image.&lt;/p&gt;</comment>
                            <comment id="17267305" author="mgrigorov" created="Mon, 18 Jan 2021 14:10:50 +0000"  >&lt;p&gt;The pom.xml file is missing in the provided demo app...&lt;/p&gt;</comment>
                            <comment id="17267411" author="headw01" created="Mon, 18 Jan 2021 16:39:21 +0000"  >&lt;p&gt;Oops, I deleted the wrong file when cleaning up before zipping.&#160; Reattached with the pom.xml restored.&lt;/p&gt;</comment>
                            <comment id="17304939" author="jira-bot" created="Fri, 19 Mar 2021 14:22:34 +0000"  >&lt;p&gt;Commit 5625fd993e6dcb3745eb6879bce2e8a3f3933737 in wicket&apos;s branch refs/heads/master from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=5625fd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=5625fd9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6860&quot; title=&quot;ConcatBundleResource double scope processing when CssUrlReplacer is used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6860&quot;&gt;&lt;del&gt;WICKET-6860&lt;/del&gt;&lt;/a&gt; ConcatBundleResource double scope processing when CssUrlReplacer is used&lt;/p&gt;

&lt;p&gt;ConcatBundleResource should not process the resources. They are already processed. It should only concatenate them!&lt;/p&gt;</comment>
                            <comment id="17304940" author="jira-bot" created="Fri, 19 Mar 2021 14:24:06 +0000"  >&lt;p&gt;Commit 0f2eaf763cceee16c618c96475b8934e9641cc61 in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=0f2eaf7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=0f2eaf7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6860&quot; title=&quot;ConcatBundleResource double scope processing when CssUrlReplacer is used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6860&quot;&gt;&lt;del&gt;WICKET-6860&lt;/del&gt;&lt;/a&gt; ConcatBundleResource double scope processing when CssUrlReplacer is used&lt;/p&gt;

&lt;p&gt;ConcatBundleResource should not process the resources. They are already processed. It should only concatenate them!&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5625fd993e6dcb3745eb6879bce2e8a3f3933737)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13234921">WICKET-6669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13018968" name="demo_6860.zip" size="30385" author="headw01" created="Mon, 18 Jan 2021 16:38:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mkhc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>