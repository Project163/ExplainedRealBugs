<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5704] IllegalArgument exception with wicket:child in ajaxrequest</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5704</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;We have a page in our application with a DataView.&lt;br/&gt;
In this DataView we have an anonymous inner class of a component which has a wicket:child-tag.&lt;br/&gt;
When there is ajaxrequest, in our case because we want to go to the next page in our dataview, an exception is thrown.&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Argument &apos;streamOffset&apos; must have a value within &lt;span class=&quot;error&quot;&gt;&amp;#91;0,0&amp;#93;&lt;/span&gt;, but was 1&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.util.lang.Args.withinRange(Args.java:120)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.markup.AbstractMarkupFragment.find(AbstractMarkupFragment.java:43)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.markup.MarkupFragment.find(MarkupFragment.java:150)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:94)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:451)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:72)&lt;/p&gt;

&lt;p&gt;                at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)&lt;/p&gt;

&lt;p&gt;I have the feeling that is caused by the fix in the following jira-issue&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5580&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-5580&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When we remove the wicket:child-tag completely, there is no problem.&lt;br/&gt;
When we change the anonymous inner class, to a nested class and give it an html-file with wicket:extend-tags without anything between them, it also works.&lt;/p&gt;

&lt;p&gt;I believe that the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5580&quot; title=&quot;Allow markup to find child fragments when wicket:child is inside a component tag&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5580&quot;&gt;&lt;del&gt;WICKET-5580&lt;/del&gt;&lt;/a&gt;, failed to take in account subclasses of components that don&apos;t need to add markup and therefor don&apos;t have their own HTML-file.&lt;/p&gt;

&lt;p&gt;I hope I can get around to making a quickstart testcase for this in the next couple of days&lt;/p&gt;</description>
                <environment></environment>
        <key id="12742728">WICKET-5704</key>
            <summary>IllegalArgument exception with wicket:child in ajaxrequest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jesselong">Jesse Long</assignee>
                                    <reporter username="roeloffzen">Ted Roeloffzen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Sep 2014 13:42:14 +0000</created>
                <updated>Thu, 2 Oct 2014 09:10:26 +0000</updated>
                            <resolved>Wed, 1 Oct 2014 09:05:57 +0000</resolved>
                                    <version>6.16.0</version>
                    <version>6.17.0</version>
                                    <fixVersion>6.18.0</fixVersion>
                    <fixVersion>7.0.0-M4</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14142996" author="mgrigorov" created="Mon, 22 Sep 2014 07:48:21 +0000"  >&lt;p&gt;Thanks for the report!&lt;br/&gt;
A quickstart would help a lot!&lt;br/&gt;
It seems the initialization of org.apache.wicket.markup.MarkupFragment#size is wrong for some reason.&lt;/p&gt;</comment>
                            <comment id="14149577" author="jesselong" created="Fri, 26 Sep 2014 15:54:33 +0000"  >&lt;p&gt;Short version:&lt;br/&gt;
Problem is we are trying to find from element 1 in a MarkupFragment with size 0.&lt;/p&gt;

&lt;p&gt;It is theoretically possible for MarkupFragment to have size of 0, so MarkupFragment#find() should probably have this at the beginning:&lt;/p&gt;

&lt;p&gt;if (size &amp;lt; 2){&lt;br/&gt;
    return null;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;That will fix the problem.&lt;/p&gt;

&lt;p&gt;Long version:&lt;br/&gt;
I cant seem to find a way to create a MarkupFragment with size 0, I would be very interested to find out how that could happen. MarkupFragment constructor seems to expect size to be 0 some times.&lt;/p&gt;

&lt;p&gt;This is being triggered by an attempt to render a component, which is inside some sort of component resolver, to an Ajax response. This usage in itself is not a problem, it is fine, and usually works 100%.&lt;/p&gt;

&lt;p&gt;The component causing the problem may be entirely unrelated to the component being rendered.&lt;/p&gt;

&lt;p&gt;When rendering a component to an ajax response, Wicket must find markup for component. The default strategy if to find the component tag with the same id as the child that is a direct child of the component tag of the child&apos;s Java parent.&lt;/p&gt;

&lt;p&gt;If the component tag for the child is not an immediate child of the Java parent&apos;s component tag, there is some component resolving going on. The markup sourcing strategy (default, associated) works down the component tree from looking for MarkupContainers that are also IComponentResolvers. The idea is that the sought component tag could be a child of the component tag for any of these component resolving markup containers.&lt;/p&gt;

&lt;p&gt;If there is more than one such component resolving markup container, all are visited until the child markup is found. This is why I say the component with the problem could be unrelated to the component being rendered. It could be some other component resolving markup container that is just being checked.&lt;/p&gt;

&lt;p&gt;For each component resolving markup container descendant, we try find the markup for the component being rendered, ultimately calling find() on that markup containers MarkupFragment. It is on one of these that size == 0, but we start looking from index 1.&lt;/p&gt;

&lt;p&gt;I cant seem to reproduce this problem with anonymous inner classes or non-inherited wicket:child tags. I would be interested to see that if you can easily create a quickstart.&lt;/p&gt;</comment>
                            <comment id="14150360" author="jira-bot" created="Sat, 27 Sep 2014 03:09:49 +0000"  >&lt;p&gt;Commit 572df1583add7b8e34aa412e9e554031a74231f0 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesselong&quot; class=&quot;user-hover&quot; rel=&quot;jesselong&quot;&gt;jesselong&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=572df15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=572df15&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5704&quot; title=&quot;IllegalArgument exception with wicket:child in ajaxrequest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5704&quot;&gt;&lt;del&gt;WICKET-5704&lt;/del&gt;&lt;/a&gt; IllegalArgument exception with wicket:child in ajaxrequest&lt;/p&gt;</comment>
                            <comment id="14150361" author="jira-bot" created="Sat, 27 Sep 2014 03:10:31 +0000"  >&lt;p&gt;Commit c728d8953d34b7bf34d86a8625dcb6e1109602cf in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesselong&quot; class=&quot;user-hover&quot; rel=&quot;jesselong&quot;&gt;jesselong&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c728d89&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c728d89&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5704&quot; title=&quot;IllegalArgument exception with wicket:child in ajaxrequest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5704&quot;&gt;&lt;del&gt;WICKET-5704&lt;/del&gt;&lt;/a&gt; IllegalArgument exception with wicket:child in ajaxrequest&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 572df1583add7b8e34aa412e9e554031a74231f0)&lt;/p&gt;</comment>
                            <comment id="14154588" author="mgrigorov" created="Wed, 1 Oct 2014 09:05:57 +0000"  >&lt;p&gt;Closing the ticket as &quot;Fixed&quot;.&lt;br/&gt;
Jesse added code to protected from this error. If there is still a problem please attach a quickstart and we will reopen the ticket.&lt;/p&gt;</comment>
                            <comment id="14156247" author="roeloffzen" created="Thu, 2 Oct 2014 09:05:11 +0000"  >&lt;p&gt;Just tested the fix with Wicket 6.18.0-SNAPSHOT and the fix works&lt;/p&gt;</comment>
                            <comment id="14156248" author="roeloffzen" created="Thu, 2 Oct 2014 09:05:27 +0000"  >&lt;p&gt;see previous comment&lt;/p&gt;</comment>
                            <comment id="14156251" author="mgrigorov" created="Thu, 2 Oct 2014 09:10:26 +0000"  >&lt;p&gt;Thanks for verifying!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12712552">WICKET-5580</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2097r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>