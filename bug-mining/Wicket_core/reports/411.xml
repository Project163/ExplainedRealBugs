<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4112] WicketTester#startComponentInPage and WicketTester#assertModelValue have inconsistent behavior.</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4112</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I try the following (in Pseudocode):&lt;/p&gt;

&lt;p&gt;tester = new WicketTester();&lt;br/&gt;
tester.startComponentInPage(new Label(&quot;test&quot;,&quot;hello&quot;);&lt;br/&gt;
tester.assertModelValue(&quot;test&quot;,&quot;hello&quot;); --&amp;gt; throws&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Component is not a container and so does not contain the path test.&lt;/p&gt;

&lt;p&gt;Funny as it is, to make this work, you have to do the following assertion:&lt;/p&gt;

&lt;p&gt;tester.assertModelValue(&quot;&quot;, &quot;hello&quot;);&lt;/p&gt;

&lt;p&gt;The error lies in&lt;br/&gt;
public Component getComponentFromLastRenderedPage(String path,&lt;br/&gt;
                final boolean wantVisibleInHierarchy)&lt;br/&gt;
in Line: path = startComponent.getId() + &quot;:&quot; + path; &lt;/p&gt;

&lt;p&gt;I will provide a patch this evening.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526011">WICKET-4112</key>
            <summary>WicketTester#startComponentInPage and WicketTester#assertModelValue have inconsistent behavior.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="splitshade">Martin Dilger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Oct 2011 07:54:35 +0000</created>
                <updated>Mon, 10 Oct 2011 12:27:20 +0000</updated>
                            <resolved>Mon, 10 Oct 2011 12:27:20 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                                    <fixVersion>1.5.2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13121783" author="splitshade" created="Thu, 6 Oct 2011 07:54:59 +0000"  >&lt;p&gt;Quickstart with a failing test&lt;/p&gt;</comment>
                            <comment id="13122052" author="bitstorm" created="Thu, 6 Oct 2011 16:26:36 +0000"  >&lt;p&gt;IMHO we should consider to remove the following code&lt;/p&gt;

&lt;p&gt;if (startComponent != null)&lt;/p&gt;
		{
			path = startComponent.getId() + &quot;:&quot; + path;
		}




&lt;p&gt;inside BaseWicketTester.getComponentFromLastRenderedPage(String path,final boolean wantVisibleInHierarchy). This method shou&#242;d use an absolute path to retrieve component from page.&lt;/p&gt;</comment>
                            <comment id="13122059" author="splitshade" created="Thu, 6 Oct 2011 16:42:20 +0000"  >&lt;p&gt;I agree, this conflicts and was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-1214&quot; title=&quot;WicketTester#startPanel does not work (correctly)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-1214&quot;&gt;&lt;del&gt;WICKET-1214&lt;/del&gt;&lt;/a&gt;, but I think, it could be safe to remove since&lt;br/&gt;
now we can use startComponentInPage which removes the indirection with ITestPanelSource, I will inspect on this.&lt;br/&gt;
Any recommendations?&lt;/p&gt;</comment>
                            <comment id="13122313" author="splitshade" created="Thu, 6 Oct 2011 21:26:53 +0000"  >&lt;p&gt;I spent some minutes to play around. I would be possible to reference tested components with their absolute paths (see the provided patch), but this would possibly break a whole lot of tests, that users just have fixed migrating to 1.5.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure, what would be a good / better way to fix that.&lt;/p&gt;</comment>
                            <comment id="13122351" author="bitstorm" created="Thu, 6 Oct 2011 22:09:27 +0000"  >&lt;p&gt;Well, we could expand method &apos;startComponentInPage( component, pageMarkup)&apos; adding a string parameter with the start component path. This parameter can be saved and used instead of &apos;startComponent&apos;. Method &apos;startPanel&apos; will pass panel id as start component path, while method &apos;startComponentInPage&apos; will pass a null.&lt;br/&gt;
See provided patch (I didn&apos;t tested yet!).&lt;/p&gt;</comment>
                            <comment id="13122573" author="splitshade" created="Fri, 7 Oct 2011 06:49:48 +0000"  >&lt;p&gt;Well, could work (I did not investigate further), but it &quot;feels&quot; like a workaround. I&#180;m not sure, whether this is a good idea. Other opinions?&lt;/p&gt;</comment>
                            <comment id="13122594" author="bitstorm" created="Fri, 7 Oct 2011 07:40:55 +0000"  >&lt;p&gt;I don&apos;t see it as a workaround, rather we are simply giving to method &apos;startComponentInPage&apos; more informations. This kind of solution wouldn&apos;t break &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-1214&quot; title=&quot;WicketTester#startPanel does not work (correctly)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-1214&quot;&gt;&lt;del&gt;WICKET-1214&lt;/del&gt;&lt;/a&gt; (no need to fix &apos;testLabel&apos; assertions).  &lt;br/&gt;
Anyway there could be better solutions...&lt;/p&gt;</comment>
                            <comment id="13123533" author="bitstorm" created="Sat, 8 Oct 2011 17:11:49 +0000"  >&lt;p&gt;Improved patch. All tests went fine.&lt;/p&gt;</comment>
                            <comment id="13123995" author="mgrigorov" created="Mon, 10 Oct 2011 10:52:53 +0000"  >&lt;p&gt;The problem is not completely solved.&lt;br/&gt;
org.apache.wicket.util.tester.BaseWicketTester.startComponentInPage(Class&amp;lt;C&amp;gt;, IMarkupFragment) uses the artificial &quot;testObject&quot; as id for the Component that will be instantiated from the passed Class.&lt;/p&gt;

&lt;p&gt;I.e. if you do: startComponentInPage(MyPanel.class) then Wicket wont be aware how to find the components inside the Panel.&lt;/p&gt;</comment>
                            <comment id="13124037" author="mgrigorov" created="Mon, 10 Oct 2011 12:27:20 +0000"  >&lt;p&gt;Improved with r1180916.&lt;/p&gt;

&lt;p&gt;Now BaseWicketTester keeps meta data about the started component like a flag that indicates whether the component is instantiated by Wicket or not and uses it internally to decide how to construct the component path.&lt;br/&gt;
It is transparent to the user - she always has to assert with: tester.assertXYZ(&quot;herComponentId&quot;, ...). &lt;/p&gt;

&lt;p&gt;@Andrea: thanks for your work on this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498073" name="0001-WICKET-4122-WicketTester-uses-absolute-Path-to-refer.patch" size="2969" author="splitshade" created="Thu, 6 Oct 2011 21:30:51 +0000"/>
                            <attachment id="12498319" name="WICKET-4112.patch" size="5773" author="bitstorm" created="Sat, 8 Oct 2011 17:08:58 +0000"/>
                            <attachment id="12497959" name="wicket.zip" size="31330" author="splitshade" created="Thu, 6 Oct 2011 07:54:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k99j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>