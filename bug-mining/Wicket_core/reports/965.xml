<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5429] ResourceReference&apos;s properties are not preserved when using reference replacement</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5429</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Media property of link (css) is not set if addResourceReplacement is set on WebApplication.init : &lt;/p&gt;

&lt;p&gt;I set a css file on page via renderHead(IHeaderResponse response) with screen media :&lt;/p&gt;

&lt;p&gt;@Override&lt;br/&gt;
public void renderHead(IHeaderResponse response) {&lt;br/&gt;
  response.render(CssHeaderItem.forReference(OriginalResourceReference.get(), &quot;screen&quot;));&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;and after if I defined a resourceReplacement on application init :&lt;/p&gt;

&lt;p&gt;@Override&lt;br/&gt;
public void init() {&lt;br/&gt;
  super.init();&lt;br/&gt;
  addResourceReplacement(OriginalResourceReference.get(), new CssResourceReference(OriginalResourceReference.class, &quot;overwrite.css&quot;));&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I don&apos;t have the property media=&quot;screen&quot; when wicket generated page.&lt;/p&gt;

&lt;p&gt;Duto &lt;/p&gt;</description>
                <environment></environment>
        <key id="12681273">WICKET-5429</key>
            <summary>ResourceReference&apos;s properties are not preserved when using reference replacement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="dutrieux">Duto</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Nov 2013 15:19:42 +0000</created>
                <updated>Tue, 17 Dec 2013 10:28:57 +0000</updated>
                            <resolved>Tue, 17 Dec 2013 10:28:57 +0000</resolved>
                                    <version>6.12.0</version>
                                    <fixVersion>6.13.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13836554" author="cedricgatay" created="Mon, 2 Dec 2013 14:42:34 +0000"  >&lt;p&gt;Patch for the described use case. I did not find a better way than double checking if we are manipulating CssReferenceHeaderItems to copy the media / pageParameters / condition to the replacement bundle.&lt;/p&gt;

&lt;p&gt;The patch was made against wicket-6.x branch.&lt;/p&gt;</comment>
                            <comment id="13837724" author="mgrigorov" created="Tue, 3 Dec 2013 14:21:12 +0000"  >&lt;p&gt;Attaching an extended version of Cedric&apos;s patch.&lt;/p&gt;

&lt;p&gt;There were few problems with his version:&lt;/p&gt;

&lt;p&gt;1) it was fixing only the case with CSS resources, but not for JS ones&lt;/p&gt;

&lt;p&gt;2) his code was used for normal resource bundles too. I.e. the bundle will be recreated with the details of each of its resources and it will use the ones from the last resource reference.&lt;br/&gt;
I&apos;ve added a special ReplacementResourceBundleReference to be able to decide when to preserve the details and when not.&lt;/p&gt;</comment>
                            <comment id="13837727" author="mgrigorov" created="Tue, 3 Dec 2013 14:21:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=papegaaij&quot; class=&quot;user-hover&quot; rel=&quot;papegaaij&quot;&gt;papegaaij&lt;/a&gt; Do you have a better solution for this problem ?&lt;/p&gt;</comment>
                            <comment id="13837735" author="papegaaij" created="Tue, 3 Dec 2013 14:32:19 +0000"  >&lt;p&gt;addResourceReplacement is a shortcut for registering a bundle with only 1 item. The 3 lines of code can also be executed manually, with a minor change to the last line (creating the item for the css reference). I don&apos;t think we need to extend the api for a usecase that&apos;s rarely used and can be solved with 3 lines of code already.&lt;/p&gt;</comment>
                            <comment id="13837744" author="mgrigorov" created="Tue, 3 Dec 2013 14:40:58 +0000"  >&lt;p&gt;The problem is:&lt;/p&gt;

&lt;p&gt;1) it is not automatic. &lt;br/&gt;
the developer will have to do this manually by copy/paste-ing code from Wicket&lt;/p&gt;

&lt;p&gt;2) the developer will duplicate the details once where the original header item is created and second time where the replacement header item is declared. It will be very easy to forget to update any of them&lt;/p&gt;

&lt;p&gt;I&apos;m also not happy with the new ReplacementResourceBundleReference but I see no other way how to differentiate whether the current case is a replacement or a &quot;normal&quot; bundle.&lt;br/&gt;
Another way is to add #isReplacement to ResourceBundleReference - not better :-/&lt;/p&gt;</comment>
                            <comment id="13837760" author="cedricgatay" created="Tue, 3 Dec 2013 14:51:47 +0000"  >&lt;p&gt;That&apos;s the reason why I made the change only for the use case described in this Jira issue. It however lacks the ability to tell if the resource really needs to be recreated as Martin stated in his first answer.&lt;/p&gt;</comment>
                            <comment id="13837780" author="papegaaij" created="Tue, 3 Dec 2013 15:14:34 +0000"  >&lt;p&gt;Ok, I see the problem now. I think this should be solved with a dedicated HeaderItemWrapper. Bundles are rewrapped prior being rendered. This should allow copying the properties without explicit class checks. I&apos;ll see if I can create a patch on my way home (in an hour).&lt;/p&gt;</comment>
                            <comment id="13837896" author="papegaaij" created="Tue, 3 Dec 2013 16:55:03 +0000"  >&lt;p&gt;I&apos;ve looked at it some more, and bundles are rewrapped, but that&apos;s not going to help, because the wrap method is invoked on the original item, not on the bundle. We could do another interface check, but I don&apos;t think the result will be any better than your patch. So, you can apply your patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615845" name="Sample.zip" size="24163" author="dutrieux" created="Tue, 26 Nov 2013 15:21:39 +0000"/>
                            <attachment id="12616783" name="WICKET-5429-RRBR.patch" size="8894" author="mgrigorov" created="Tue, 3 Dec 2013 14:21:12 +0000"/>
                            <attachment id="12616554" name="fix-WICKET-5429.patch" size="1108" author="cedricgatay" created="Mon, 2 Dec 2013 14:42:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q5gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>