<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5486] WebPageRenderer should honor RedirectPolicy.ALWAYS_REDIRECT more consistently</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5486</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In WebPageRenderer shouldPreserveClientUrl() currently has precedence over RedirectPolicy.ALWAYS_REDIRECT.&lt;/p&gt;

&lt;p&gt;This can lead to confusion or unexpected behavior when RedirectPolicy.ALWAYS_REDIRECT is explicitely set, but for some reason shouldPreserveClientUrl() returns true and thus no redirect is performed due to the logic in WebPageRenderer.&lt;/p&gt;

&lt;p&gt;A fix for this particular problem could be implemented in &lt;br/&gt;
WebPageRenderer as of Wicket 6.12.0 by changing line 211 to:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; (shouldPreserveClientUrl &amp;amp;&amp;amp; getRedirectPolicy() != RedirectPolicy.ALWAYS_REDIRECT)) //&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;Note that this problem is slightly related to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5484&quot; title=&quot;WebPageRenderer must not render full page in Ajax requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5484&quot;&gt;&lt;del&gt;WICKET-5484&lt;/del&gt;&lt;/a&gt;. Both fixes combined the line could look like this:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; (shouldPreserveClientUrl &amp;amp;&amp;amp; !isAjax &amp;amp;&amp;amp; getRedirectPolicy() != RedirectPolicy.ALWAYS_REDIRECT)) //&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12690775">WICKET-5486</key>
            <summary>WebPageRenderer should honor RedirectPolicy.ALWAYS_REDIRECT more consistently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="sludwig">Sven Ludwig</reporter>
                        <labels>
                            <label>contract</label>
                            <label>unexpected</label>
                    </labels>
                <created>Thu, 23 Jan 2014 14:33:25 +0000</created>
                <updated>Mon, 24 Feb 2014 14:46:59 +0000</updated>
                            <resolved>Mon, 24 Feb 2014 14:46:59 +0000</resolved>
                                    <version>6.13.0</version>
                    <version>7.0.0-M1</version>
                                    <fixVersion>6.14.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13879970" author="sludwig" created="Thu, 23 Jan 2014 14:52:09 +0000"  >&lt;p&gt;Here is an example case regarding shouldPreserveClientUrl() vs. RedirectPolicy.ALWAYS_REDIRECT. A developer would perhaps write:&lt;/p&gt;

&lt;p&gt;        getRequestCycle().scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(new PageProvider(page),&lt;br/&gt;
                RenderPageRequestHandler.RedirectPolicy.ALWAYS_REDIRECT));&lt;/p&gt;

&lt;p&gt;When a bit later the logic in WebPageRenderer is executed, it is possible (due to whatever reason) that the request has traversed at least one server-internal forward. In such a case, ServletWebRequest usually has forward attributes, in particular the Request URI. Therefore, ServletWebRequest.shouldPreserveClientUrl() returns true.&lt;/p&gt;

&lt;p&gt;Due to the logic in WebPageRenderer, where shouldPreserveClientUrl() has precedence over RedirectPolicy.ALWAYS_REDIRECT, the result may be that no redirect is performed.&lt;/p&gt;</comment>
                            <comment id="13879997" author="sludwig" created="Thu, 23 Jan 2014 15:44:25 +0000"  >&lt;p&gt;Patch to be considered for Wicket 7.0.0 to make RedirectPolicy.ALWAYS_REDIRECT overrule specializations of WebRequest.shouldPreserveClientUrl().&lt;/p&gt;</comment>
                            <comment id="13880088" author="sludwig" created="Thu, 23 Jan 2014 17:08:17 +0000"  >&lt;p&gt;same patch for Wicket 6.x&lt;/p&gt;</comment>
                            <comment id="13886572" author="mgrigorov" created="Thu, 30 Jan 2014 13:32:26 +0000"  >&lt;p&gt;I was not able to break it in 7.x.&lt;br/&gt;
I&apos;ve changed &apos;shouldPreserveClientUrl&apos; to true in org.apache.wicket.request.handler.render.WebPageRendererTest#testRedirectPolicyAlways() but it doesn&apos;t break.&lt;br/&gt;
So I applied only the patch for 6.x.&lt;/p&gt;

&lt;p&gt;Please report back if you are able to break it in master branch with a new test.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13889544" author="sludwig" created="Mon, 3 Feb 2014 15:12:55 +0000"  >&lt;p&gt;Patch for Wicket 7.x with a new test case in WebPageRendererTest that breaks if shouldPreserveClientUrl is not overruled by ALWAYS_REDIRECT.&lt;/p&gt;

&lt;p&gt;This patch also includes the change to WebPageRenderer contained in isolated form in fix-&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5486&quot; title=&quot;WebPageRenderer should honor RedirectPolicy.ALWAYS_REDIRECT more consistently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5486&quot;&gt;&lt;del&gt;WICKET-5486&lt;/del&gt;&lt;/a&gt;-Wicket_7-shouldPreserveClientUrl_only.patch attachment.&lt;/p&gt;

&lt;p&gt;In this patch here I also adjusted the expected outcomes in WebPageRendererTest.testShouldRenderPageAndWriteResponseVariation(). Thereby I looked closely at each variation for which I had to adjust its expected outcome to validate the proposed change.&lt;/p&gt;

&lt;p&gt;Please consider that the setResponsePage(Class) and setResponsePage(Class, PageParameters) convenience methods in the Wicket API (in RequestCycle and Component) internally use RedirectPolicy.ALWAYS_REDIRECT. I currently do not see a problem here with respect to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3551&quot; title=&quot;Using web.xml &amp;lt;error-page&amp;gt; to render error pages via Wicket yields undesired behavior in Wicket 1.5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3551&quot;&gt;&lt;del&gt;WICKET-3551&lt;/del&gt;&lt;/a&gt; since the forward to a web.xml error page would be performed by the container and not via setResponsePage.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12502211">WICKET-3551</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624828" name="fix-WICKET-5486-Wicket_6-regarding_shouldPreserveClientUrl_only.patch" size="777" author="sludwig" created="Thu, 23 Jan 2014 17:08:17 +0000"/>
                            <attachment id="12626659" name="fix-WICKET-5486-Wicket_7-shouldPreserveClientUrl_now_overruled_by_ALWAYS_REDIRECT.patch" size="2969" author="sludwig" created="Mon, 3 Feb 2014 15:12:55 +0000"/>
                            <attachment id="12624812" name="fix-WICKET-5486-Wicket_7-shouldPreserveClientUrl_only.patch" size="949" author="sludwig" created="Thu, 23 Jan 2014 15:44:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rosf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>