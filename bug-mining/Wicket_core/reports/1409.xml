<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6440] SecuredRemoteAddressRequestWrapperFactory doesn&apos;t make request secure</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6440</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I&apos;m using SecuredRemoteAddressRequestWrapperFactory and what I get is:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-08-08 09:07:53.460 DEBUG 3851 --- [nio-8080-exec-3] ecuredRemoteAddressRequestWrapperFactory : Incoming request uri=/id/cari-wanita/di/Kota%20Malang,%20Jawa%20Timur,%20Republic%20of%20Indonesia with originalSecure=&apos;false&apos;, remoteAddr=&apos;127.0.0.1&apos; will be seen with newSecure=&apos;false&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since remoteAddr is 127.* then it should be treated as secure, per documentation.&lt;/p&gt;

&lt;p&gt;This code in SecuredRemoteAddressRequestWrapperFactory is probably buggy: (i.e. need to remove &lt;tt&gt;==false&lt;/tt&gt;)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; needsWrapper(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpServletRequest request)
	{
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; !request.isSecure() &amp;amp;&amp;amp;
			matchesOne(request.getRemoteAddr(), config.securedRemoteAddresses) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally, newSecure = should be &lt;tt&gt;xRequest.isSecure()&lt;/tt&gt; :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;		HttpServletRequest xRequest = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getWrapper(request);

		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (log.isDebugEnabled())
		{
			log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Incoming request uri=&quot;&lt;/span&gt; + request.getRequestURI() + &lt;span class=&quot;code-quote&quot;&gt;&quot; with originalSecure=&apos;&quot;&lt;/span&gt; +
				request.isSecure() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;, remoteAddr=&apos;&lt;/span&gt;&quot;&lt;/span&gt; + request.getRemoteAddr() +
				&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos; will be seen with newSecure=&apos;&lt;/span&gt;&quot;&lt;/span&gt; + request.isSecure() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;);
		}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Related to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3015&quot; title=&quot;add (even more) support for front-end proxies (schema, client ip, ...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3015&quot;&gt;&lt;del&gt;WICKET-3015&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Tag &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdonnerstag&quot; class=&quot;user-hover&quot; rel=&quot;jdonnerstag&quot;&gt;jdonnerstag&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pete&quot; class=&quot;user-hover&quot; rel=&quot;pete&quot;&gt;pete&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13093099">WICKET-6440</key>
            <summary>SecuredRemoteAddressRequestWrapperFactory doesn&apos;t make request secure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ceefour">Hendy Irawan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Aug 2017 09:14:10 +0000</created>
                <updated>Fri, 22 Sep 2017 17:22:41 +0000</updated>
                                            <version>7.8.0</version>
                                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16124885" author="mgrigorov" created="Sun, 13 Aug 2017 11:24:10 +0000"  >&lt;p&gt;Any chance for a quickstart app ?&lt;/p&gt;</comment>
                            <comment id="16124887" author="ceefour" created="Sun, 13 Aug 2017 11:27:12 +0000"  >&lt;p&gt;Not really, but I&apos;ve confirmed in my own app that making the changes I described does result in expected behavior.&lt;/p&gt;

&lt;p&gt;This bug is most likely a couple of unintentional typos.&lt;/p&gt;</comment>
                            <comment id="16152952" author="mgrigorov" created="Mon, 4 Sep 2017 21:31:00 +0000"  >&lt;p&gt;Why do you think that `== false` should be removed ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; !request.isSecure() &amp;amp;&amp;amp;
			matchesOne(request.getRemoteAddr(), config.securedRemoteAddresses) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I read it as: if the request is not secure and doesn&apos;t match any of the secured addresses then it needs a wrapper.&lt;/p&gt;</comment>
                            <comment id="16152953" author="jira-bot" created="Mon, 4 Sep 2017 21:33:03 +0000"  >&lt;p&gt;Commit 18a1c2f9ea793a6707b30644f14a63a5edafcbc4 in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=18a1c2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=18a1c2f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6440&quot; title=&quot;SecuredRemoteAddressRequestWrapperFactory doesn&amp;#39;t make request secure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6440&quot;&gt;WICKET-6440&lt;/a&gt; SecuredRemoteAddressRequestWrapperFactory doesn&apos;t make request secure&lt;/p&gt;

&lt;p&gt;Use the wrapped request in the logging of the new secure state&lt;/p&gt;</comment>
                            <comment id="16152954" author="jira-bot" created="Mon, 4 Sep 2017 21:33:16 +0000"  >&lt;p&gt;Commit 48f45809154558c1a6edba35f7211a0fd3f196ac in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=48f4580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=48f4580&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6440&quot; title=&quot;SecuredRemoteAddressRequestWrapperFactory doesn&amp;#39;t make request secure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6440&quot;&gt;WICKET-6440&lt;/a&gt; SecuredRemoteAddressRequestWrapperFactory doesn&apos;t make request secure&lt;/p&gt;

&lt;p&gt;Use the wrapped request in the logging of the new secure state&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 18a1c2f9ea793a6707b30644f14a63a5edafcbc4)&lt;/p&gt;</comment>
                            <comment id="16153024" author="ceefour" created="Tue, 5 Sep 2017 01:52:30 +0000"  >&lt;p&gt;yes you read that same as me.&lt;/p&gt;

&lt;p&gt;when == false is removed that becomes:&lt;/p&gt;

&lt;p&gt;if the request is not secure and &lt;b&gt;matches&lt;/b&gt; any of the secured addresses then it needs a wrapper.&lt;/p&gt;

&lt;p&gt;seems straightforward to me.&lt;/p&gt;</comment>
                            <comment id="16176758" author="jira-bot" created="Fri, 22 Sep 2017 17:22:41 +0000"  >&lt;p&gt;Commit 48f45809154558c1a6edba35f7211a0fd3f196ac in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6105&quot; title=&quot;Decommission wicket-datetime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6105&quot;&gt;&lt;del&gt;WICKET-6105&lt;/del&gt;&lt;/a&gt;-java.time from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=48f4580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=48f4580&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6440&quot; title=&quot;SecuredRemoteAddressRequestWrapperFactory doesn&amp;#39;t make request secure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6440&quot;&gt;WICKET-6440&lt;/a&gt; SecuredRemoteAddressRequestWrapperFactory doesn&apos;t make request secure&lt;/p&gt;

&lt;p&gt;Use the wrapped request in the logging of the new secure state&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 18a1c2f9ea793a6707b30644f14a63a5edafcbc4)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ij1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>