<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6546] CssContentHeaderItem comments CSS code with HTML comments</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6546</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;CssContentHeaderItem wraps the passed CSS in HTML comments thus rendering invalid markup.&lt;/p&gt;

&lt;p&gt;Example code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void renderHead(Component component, IHeaderResponse response) {
&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.renderHead(component, response);
&#160;&#160; response.render(CssContentHeaderItem.forCSS(&lt;span class=&quot;code-quote&quot;&gt;&quot;.select2-container--open {z-index: 100000;}&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;select2-mod&quot;&lt;/span&gt;, &quot;&quot;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Renders:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;style type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/css&quot;&lt;/span&gt; id=&lt;span class=&quot;code-quote&quot;&gt;&quot;select2-mod&quot;&lt;/span&gt;&amp;gt;
&amp;lt;!-- .select2-container--open {z-index: 100000;}--&amp;gt;
&amp;lt;/style&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The HTML comments in the CSS make the response invalid and in the browser you get a XML Parsing Error - Not Well Formed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It should not render this invalid html comments in CSS.&lt;/p&gt;

&lt;p&gt;Looking at the source code i think the error is in the CssUtils class: &lt;a href=&quot;https://github.com/apache/wicket/blob/wicket-6.x/wicket-core/src/main/java/org/apache/wicket/core/util/string/CssUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/blob/wicket-6.x/wicket-core/src/main/java/org/apache/wicket/core/util/string/CssUtils.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148553">WICKET-6546</key>
            <summary>CssContentHeaderItem comments CSS code with HTML comments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="solomax">Maxim Solodovnik</assignee>
                                    <reporter username="rniestroj">Robert Niestroj</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2018 12:08:48 +0000</created>
                <updated>Thu, 5 Apr 2018 16:24:47 +0000</updated>
                            <resolved>Thu, 5 Apr 2018 16:24:47 +0000</resolved>
                                    <version>6.24.0</version>
                    <version>6.29.0</version>
                                    <fixVersion>8.0.0</fixVersion>
                    <fixVersion>7.11.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16417568" author="solomax" created="Wed, 28 Mar 2018 15:38:08 +0000"  >&lt;p&gt;Works as expected on &lt;tt&gt;static&lt;/tt&gt; html page&lt;/p&gt;

&lt;p&gt;Will try to check with quick-start&lt;/p&gt;</comment>
                            <comment id="16417613" author="solomax" created="Wed, 28 Mar 2018 15:56:28 +0000"  >&lt;p&gt;Works for me as expected &lt;a href=&quot;https://github.com/solomax/ajax-download&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/solomax/ajax-download&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you please provide quickstart demonstrating this issue?&lt;/p&gt;</comment>
                            <comment id="16417991" author="rniestroj" created="Wed, 28 Mar 2018 19:37:07 +0000"  >&lt;p&gt;Quickstart attached. The page works here, but the comments in the CSS is also there.&lt;/p&gt;</comment>
                            <comment id="16418361" author="solomax" created="Thu, 29 Mar 2018 03:00:37 +0000"  >&lt;p&gt;Your quick-start is same as mine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;(10 times bigger ...)&lt;/p&gt;

&lt;p&gt;I can see no errors in browser console&lt;/p&gt;

&lt;p&gt;no errors in CSS interpreting, what is the issue ?&lt;/p&gt;</comment>
                            <comment id="16418515" author="rniestroj" created="Thu, 29 Mar 2018 06:55:40 +0000"  >&lt;p&gt;CSS comments should be /* */ and not &amp;lt;!-- --&amp;gt; as per &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/Comments#Notes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/CSS/Comments#Notes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also the added CSS should not be commented at all. I just want it to be.&lt;/p&gt;

&lt;p&gt;Attached another QS with the error visible in browser console. Click the AjaxLink. Tested on recent Firefox Developer and Chrome Stable. In chrome the logged error is:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
wicket-ajax-jquery-debug-ver-1518883664000.js:131 Wicket.Ajax:&#160; Error in parsing: This page contains the following errors:error on line 2 at column 19: &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; hyphen within comment: &amp;lt;!--
 .select2-container
 Below is a rendering of the page up to the first error.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Found two answers for this on SE: [https://www.google.pl/search?q=Double+hyphen+within+comment&lt;br/&gt;
]&lt;/p&gt;

&lt;p&gt;The problem seems to be the conjunction with the Select2 class name:&lt;br/&gt;
select2-container--open&lt;/p&gt;</comment>
                            <comment id="16418666" author="solomax" created="Thu, 29 Mar 2018 09:41:44 +0000"  >&lt;p&gt;I can see the issue now&lt;/p&gt;

&lt;p&gt;This&#160;comments are described&lt;/p&gt;

&lt;p&gt;here: &lt;a href=&quot;https://www.w3.org/TR/html401/present/styles.html#hiding&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/html401/present/styles.html#hiding&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and here: &lt;a href=&quot;https://www.w3.org/TR/html5/document-metadata.html#the-style-element&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/html5/document-metadata.html#the-style-element&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I believe it should be safe to remove this HTML comments&lt;/p&gt;</comment>
                            <comment id="16422688" author="solomax" created="Mon, 2 Apr 2018 16:11:03 +0000"  >&lt;p&gt;White writing unit-test for this issue I find out the root cause is in this &lt;tt&gt;select2-container--open&lt;/tt&gt; class name ...&lt;br/&gt;
with following &lt;tt&gt;select2-container-open&lt;/tt&gt; name everything works as expected ... &lt;/p&gt;</comment>
                            <comment id="16423381" author="solomax" created="Tue, 3 Apr 2018 02:06:12 +0000"  >&lt;p&gt;The further investigation shows these HTML comments were added to CSS to prevent CSS from being validated by XML processor&lt;br/&gt;
&lt;a href=&quot;https://www.w3.org/International/questions/qa-escapes#styleattr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/International/questions/qa-escapes#styleattr&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;right now I see no other way to do it&lt;br/&gt;
Maybe someone can propose better way?&lt;/p&gt;</comment>
                            <comment id="16423584" author="svenmeier" created="Tue, 3 Apr 2018 07:25:17 +0000"  >&lt;p&gt;Actually these comments are written to hide the contents from ancient browses, that do not understand the &amp;lt;style&amp;gt; tag (and would display the CSS rules as text instead).&lt;/p&gt;</comment>
                            <comment id="16424092" author="jira-bot" created="Tue, 3 Apr 2018 14:24:12 +0000"  >&lt;p&gt;Commit 976f28de7a890a5827ef8c160e74a40df2c87709 in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt;-no-css-comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=976f28d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=976f28d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt; HTML comments are removed from inline CSS&lt;/p&gt;</comment>
                            <comment id="16424093" author="githubbot" created="Tue, 3 Apr 2018 14:24:50 +0000"  >&lt;p&gt;GitHub user solomax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/274&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt; HTML comments are removed from inline CSS&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt;-no-css-comments&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/274.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/274.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #274&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 976f28de7a890a5827ef8c160e74a40df2c87709&lt;br/&gt;
Author: Maxim Solodovnik &amp;lt;solomax666@...&amp;gt;&lt;br/&gt;
Date:   2018-04-03T14:23:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt; HTML comments are removed from inline CSS&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16424629" author="rniestroj" created="Tue, 3 Apr 2018 21:23:51 +0000"  >&lt;p&gt;Can you merge this also to Wicket 7 and 8 if the issue is there as well?&lt;/p&gt;</comment>
                            <comment id="16426201" author="svenmeier" created="Wed, 4 Apr 2018 21:31:08 +0000"  >&lt;p&gt;I&apos;d prefer if we applied the change to Wicket 7 and 8 only.&lt;/p&gt;

&lt;p&gt;There are really old Wicket 6 projects out there that might not work with this change. This issue isn&apos;t so important that we should take any risk.&lt;/p&gt;</comment>
                            <comment id="16427195" author="jira-bot" created="Thu, 5 Apr 2018 16:22:00 +0000"  >&lt;p&gt;Commit 976f28de7a890a5827ef8c160e74a40df2c87709 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=976f28d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=976f28d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt; HTML comments are removed from inline CSS&lt;/p&gt;</comment>
                            <comment id="16427196" author="githubbot" created="Thu, 5 Apr 2018 16:22:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/274&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16427202" author="jira-bot" created="Thu, 5 Apr 2018 16:23:50 +0000"  >&lt;p&gt;Commit ebc97e31d09dba1b5a1e01c730831a40405f3deb in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ebc97e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ebc97e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6546&quot; title=&quot;CssContentHeaderItem comments CSS code with HTML comments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6546&quot;&gt;&lt;del&gt;WICKET-6546&lt;/del&gt;&lt;/a&gt; HTML comments are removed from inline CSS&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12916754" name="wicket6546 (2).zip" size="24473" author="rniestroj" created="Thu, 29 Mar 2018 06:53:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rvzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>