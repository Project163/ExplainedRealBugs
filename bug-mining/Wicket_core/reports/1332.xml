<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:24:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6041] Nested forms / parent FormComponents do not reflect updated model when nested form submitted</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6041</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
as discussed in user-list, here the ticket and quickstart attached.&lt;/p&gt;

&lt;p&gt;I guess the quickstart looks quite unusual, because it is reduced to its minimum to show what happens.&lt;/p&gt;

&lt;p&gt;The use-case of such an nested form component tree is more clearer when considering the usage in wizards, which holds its own form to be able to do step-transitions.&lt;/p&gt;

&lt;p&gt;In combination with dialogs (e.g. wicket-jquery-ui / greetings to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebfz1&quot; class=&quot;user-hover&quot; rel=&quot;sebfz1&quot;&gt;sebfz1&lt;/a&gt; by the way), which also needed a form to work, you will get such a nested form situation.&lt;/p&gt;

&lt;p&gt;kind regards&lt;br/&gt;
Patrick&lt;/p&gt;</description>
                <environment></environment>
        <key id="12914889">WICKET-6041</key>
            <summary>Nested forms / parent FormComponents do not reflect updated model when nested form submitted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="bitstorm">Andrea Del Bene</assignee>
                                    <reporter username="patrick1701">Patrick Davids</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2015 16:03:23 +0000</created>
                <updated>Fri, 13 Oct 2017 14:40:27 +0000</updated>
                            <resolved>Fri, 13 Oct 2017 14:40:27 +0000</resolved>
                                    <version>6.21.0</version>
                    <version>7.1.0</version>
                                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15018208" author="patrick1701" created="Fri, 20 Nov 2015 16:07:18 +0000"  >&lt;p&gt;Addition...&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In combination with dialogs...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The dialog does the ajax-refresh of the underlying components on wizard step.&lt;/p&gt;</comment>
                            <comment id="15028831" author="bitstorm" created="Thu, 26 Nov 2015 14:09:14 +0000"  >&lt;p&gt;As we said on the users list (&lt;a href=&quot;http://apache-wicket.1842946.n4.nabble.com/Quetsion-to-nesting-Forms-and-reflecting-states-of-FormComponents-after-ajax-refreshs-td4672670.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-wicket.1842946.n4.nabble.com/Quetsion-to-nesting-Forms-and-reflecting-states-of-FormComponents-after-ajax-refreshs-td4672670.html&lt;/a&gt;) I would solve this issue removing getRootForm from AjaxFormSubmitBehavior#onEvent:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;getForm().getRootForm().onFormSubmitted(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AjaxFormSubmitter(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, target)); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15029200" author="svenmeier" created="Thu, 26 Nov 2015 19:11:00 +0000"  >&lt;p&gt;I&apos;m against this change:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;raw input of the surrounding form is lost on re-render of the whole page after submit&lt;/li&gt;
	&lt;li&gt;non-Ajax buttons will still submit the whole form&lt;/li&gt;
	&lt;li&gt;this breaks forms with #wantSubmitOnNestedFormSubmit() returning true, since the raw input is not read into the form components&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Wicket&apos;s form processing is a delicate beast and we should think twice before changing anything about it.&lt;/p&gt;

&lt;p&gt;BTW Patrick could just override #wantSubmitOnNestedFormSubmit() and the raw input of the outer would disappear.&lt;/p&gt;</comment>
                            <comment id="15030041" author="bitstorm" created="Fri, 27 Nov 2015 16:45:32 +0000"  >&lt;p&gt;I&apos;m also ok with the current behavior of form processing, but as Martin also said, I&apos;d also like to have a more consistent code and behavior.  Starting from the fact that by default  a nested form doesn&apos;t submit any parent one, I would say that :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it&apos;s correct if raw input of the surrounding form is lost since by default it&apos;s not submitted.&lt;/li&gt;
	&lt;li&gt;the proposed change doesn&apos;t break #wantSubmitOnNestedFormSubmit(). If an outer form overrides this method returning true it will be submitted instead of the nested one (see Form#findFormToProcess).&lt;/li&gt;
	&lt;li&gt;non-Ajax buttons should not be affected by the proposed change as they are not AJAX-based.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Am I correct?&lt;/p&gt;</comment>
                            <comment id="15030061" author="svenmeier" created="Fri, 27 Nov 2015 17:10:15 +0000"  >&lt;p&gt;&amp;gt; non-Ajax buttons should not be affected by the proposed change as they are not AJAX-based.&lt;/p&gt;

&lt;p&gt;Depending on Ajax or non-Ajax request the form will be processed differently. I don&apos;t call this consistent, just think what that means for AjaxFallbackButton.&lt;/p&gt;</comment>
                            <comment id="15032066" author="yrodiere" created="Mon, 30 Nov 2015 16:52:49 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;From a user point of view, I must tell that the fact that the whole root form is submitted when using AjaxFormSubmitBehavior seems like an implementation detail, and isSubmitted() returning true on the root form was very surprising.&lt;br/&gt;
I think this is at the very least misleading. If it must stay that way, users would benefit from being warned in the documentation of isSubmitted() (something like &quot;caution : a form that has been submitted may not have been processed, because...&quot;). And having a isProcessed() method (mentioned in the isSubmitted() doc) would probably be even better.&lt;/p&gt;

&lt;p&gt;I&apos;d just like to add that this behavior caused me to run into an issue when trying to convert one of my project to Wicket 7. With wantSubmitOnNestedFormSubmit() now being protected, and with isSubmitted not being reliable, it is now really not obvious to determine which Form has been submitted (or, more exactly, which Form has been processed). This can be an issue when migrating from Wicket 6 ; see this email for more details : &lt;a href=&quot;http://apache-wicket.1842946.n4.nabble.com/Detecting-which-nested-form-was-submitted-through-AjaxFormSubmitBehavior-td4672755.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-wicket.1842946.n4.nabble.com/Detecting-which-nested-form-was-submitted-through-AjaxFormSubmitBehavior-td4672755.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fortunately, as mentioned by Sven in the same conversation, there is a workaround in order to determine whether a form has been processed or not : using a IFormValidator that does nothing but memorizing whether the validate() method has been called (for instance with a MetaDataKey), plus some listener that will clean up the MetadataKey after a request. Seems a bit complicated compared to what it does, but hey, it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Yoann&lt;/p&gt;</comment>
                            <comment id="15052904" author="bitstorm" created="Fri, 11 Dec 2015 15:30:06 +0000"  >&lt;p&gt;I think Yoann got the point. AFAIK form submitting also includes form processing. If this assumption is true a possible simple fix could be moving markFormsSubmitted at the bottom of Form#onFormSubmitted(IFormSubmitter), after we have invoked formToProcess.process(submitter);&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;....
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
{
	&lt;span class=&quot;code-comment&quot;&gt;// the submit request might be &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; one of the nested forms, so let&apos;s
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// find the right one:
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Form&amp;lt;?&amp;gt; formToProcess = findFormToProcess(submitter);
	
	&lt;span class=&quot;code-comment&quot;&gt;// process the form &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; request
&lt;/span&gt;	formToProcess.process(submitter);

	&lt;span class=&quot;code-comment&quot;&gt;//mark form as submitted
&lt;/span&gt;	formToProcess.markFormsSubmitted();					
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This solution would preserve the current behavior with not submitted forms and would make the overall form behavior more consistent.&lt;/p&gt;</comment>
                            <comment id="15191785" author="bitstorm" created="Sat, 12 Mar 2016 19:00:33 +0000"  >&lt;p&gt;We might reconsider it in future.&lt;/p&gt;</comment>
                            <comment id="15192846" author="patrick1701" created="Mon, 14 Mar 2016 07:19:01 +0000"  >&lt;p&gt;Hi all,&lt;br/&gt;
I suggest to plan it, e.g. for wicket8 maybe, so no one can forget?&lt;/p&gt;

&lt;p&gt;best regards&lt;br/&gt;
Patrick&lt;/p&gt;</comment>
                            <comment id="15216001" author="bitstorm" created="Tue, 29 Mar 2016 13:33:11 +0000"  >&lt;p&gt;ok, I will reopen it and set for 8&lt;/p&gt;</comment>
                            <comment id="15428250" author="jira-bot" created="Fri, 19 Aug 2016 14:18:00 +0000"  >&lt;p&gt;Commit ece7575f5ea74ec27f88618fd287e4348aa9cc35 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ece7575&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ece7575&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6041&quot; title=&quot;Nested forms / parent FormComponents do not reflect updated model when nested form submitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6041&quot;&gt;&lt;del&gt;WICKET-6041&lt;/del&gt;&lt;/a&gt; Nested forms / parent FormComponents do not reflect updated&lt;br/&gt;
model when nested form submitted&lt;/p&gt;</comment>
                            <comment id="15428482" author="bitstorm" created="Fri, 19 Aug 2016 17:19:41 +0000"  >&lt;p&gt;I&apos;ve changed Form#onFormSubmitted(IFormSubmitter) to find the actual submitted form  and use it to perform the required actions.&lt;/p&gt;</comment>
                            <comment id="15428795" author="svenmeier" created="Fri, 19 Aug 2016 20:55:57 +0000"  >&lt;p&gt;Hi Andrea,&lt;/p&gt;

&lt;p&gt;I didn&apos;t try it by myself, but it seems you haven&apos;t addressed my objection to this change:&lt;/p&gt;

&lt;p&gt;&quot;raw input of the surrounding form is lost on re-render of the whole page after submit&quot;&lt;/p&gt;</comment>
                            <comment id="15429320" author="bitstorm" created="Sat, 20 Aug 2016 10:25:09 +0000"  >&lt;p&gt;Yes, sorry. Inputchange should be called on the outer form. I&apos;m commiting the change.&lt;/p&gt;</comment>
                            <comment id="15429321" author="jira-bot" created="Sat, 20 Aug 2016 10:26:13 +0000"  >&lt;p&gt;Commit ba393ffa2bf6480d4981e4b48c7aa6a19bd5b9c6 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ba393ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ba393ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6041&quot; title=&quot;Nested forms / parent FormComponents do not reflect updated model when nested form submitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6041&quot;&gt;&lt;del&gt;WICKET-6041&lt;/del&gt;&lt;/a&gt; InputChange called on the outer form to keep raw values&lt;/p&gt;</comment>
                            <comment id="15430823" author="svenmeier" created="Mon, 22 Aug 2016 14:08:51 +0000"  >&lt;p&gt;Hi Andrea,&lt;/p&gt;

&lt;p&gt;now I&apos;m confused &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Doesn&apos;t calling inputChanged() on the outer form reintroduce the original complaint of this issue, i.e. parent FormComponents will not reflect updated model values?&lt;/p&gt;</comment>
                            <comment id="15431339" author="bitstorm" created="Mon, 22 Aug 2016 18:16:33 +0000"  >&lt;p&gt;My bad, I had to reopen the issue but I forgot. But honestly I&apos;ve run out of good ideas. &lt;/p&gt;</comment>
                            <comment id="15725490" author="jira-bot" created="Tue, 6 Dec 2016 13:30:13 +0000"  >&lt;p&gt;Commit 3824853be87af927dcde0b9cc6761f59738051a9 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3824853&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3824853&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6292&quot; title=&quot;Button.onSubmit not called for multipart requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6292&quot;&gt;&lt;del&gt;WICKET-6292&lt;/del&gt;&lt;/a&gt; revert &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6041&quot; title=&quot;Nested forms / parent FormComponents do not reflect updated model when nested form submitted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6041&quot;&gt;&lt;del&gt;WICKET-6041&lt;/del&gt;&lt;/a&gt; - should not access parameters before handling multipart&lt;/p&gt;

&lt;p&gt;This reverts commit ba393ffa2bf6480d4981e4b48c7aa6a19bd5b9c6.&lt;br/&gt;
This reverts commit ece7575f5ea74ec27f88618fd287e4348aa9cc35.&lt;/p&gt;</comment>
                            <comment id="16203648" author="bitstorm" created="Fri, 13 Oct 2017 14:40:27 +0000"  >&lt;p&gt;It&apos;s silent since a long time and I have no more ideas about it&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13025380">WICKET-6292</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12773535" name="NonReflectingFormComponent.zip" size="47432" author="patrick1701" created="Fri, 20 Nov 2015 16:03:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2opmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>