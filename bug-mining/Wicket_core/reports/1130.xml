<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5843] CryptoMapper doesn&apos;t work with context relative UrlResourceReferences</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5843</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Adding a CryptoMapper to the application causes context relative URL&apos;s to be rendered twice, causing them to stop working.&lt;/p&gt;

&lt;p&gt;For example a webjar resource is rendered as:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;page&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;rendered url&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;/&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;./webjars/jquery/1.11.2/jquery.js&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;/admin&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;./webjars/jquery/1.11.2/jquery.js&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;/admin/configuration&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;../../webjars/jquery/1.11.2/jquery.js&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;/admin/configuration/&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;../../../../webjars/jquery/1.11.2/jquery.js&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The last two urls won&apos;t work as they point to urls outside the context root.&lt;/p&gt;

&lt;p&gt;The reason this happens is because UrlResourceReference#getUrl returns a UrlResourceReference$CalculatedUrl, which is normally skipped by UrlRenderer#renderRelativeUrl.&lt;br/&gt;
But in the case of CryptoMapper, this CalculatedUrl is converted to a normal Url (in CryptoMapper#encryptRequestListenerParameter) which isn&apos;t skipped.&lt;/p&gt;

&lt;p&gt;So, when you have a CryptoMapper all context relative urls are converted twice: once by UrlRenderer#renderContextRelativeUrl and again by UrlRenderer#renderRelativeUrl.&lt;/p&gt;

&lt;p&gt;A quick fix would be to ignore all url&apos;s of type IUrlRenderer in CrytoMapper&apos;s mapHandler, but I don&apos;t know it this the wanted solution. It seems pretty weird to me that conversion is done twice at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12779078">WICKET-5843</key>
            <summary>CryptoMapper doesn&apos;t work with context relative UrlResourceReferences</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="ntkoopman">Tim Koopman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2015 14:09:53 +0000</created>
                <updated>Fri, 27 Mar 2015 21:17:07 +0000</updated>
                            <resolved>Fri, 27 Mar 2015 21:17:07 +0000</resolved>
                                    <version>6.19.0</version>
                                    <fixVersion>6.20.0</fixVersion>
                    <fixVersion>7.0.0-M6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14353532" author="bitstorm" created="Mon, 9 Mar 2015 20:27:42 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;could you provide a quickstart to reproduce the problem?&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="14384686" author="jira-bot" created="Fri, 27 Mar 2015 21:16:09 +0000"  >&lt;p&gt;Commit 55f164e4bc20ef4d54aaafbfbc79ffeb58f37caa in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=55f164e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=55f164e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5843&quot; title=&quot;CryptoMapper doesn&amp;#39;t work with context relative UrlResourceReferences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5843&quot;&gt;&lt;del&gt;WICKET-5843&lt;/del&gt;&lt;/a&gt; CryptoMapper doesn&apos;t work with context relative UrlResourceReferences&lt;/p&gt;

&lt;p&gt;Return the original Url if there was no encryption.&lt;/p&gt;</comment>
                            <comment id="14384687" author="jira-bot" created="Fri, 27 Mar 2015 21:16:23 +0000"  >&lt;p&gt;Commit 03d94aae2d56d6d15787e470f39372256b122e56 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=03d94aa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=03d94aa&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5843&quot; title=&quot;CryptoMapper doesn&amp;#39;t work with context relative UrlResourceReferences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5843&quot;&gt;&lt;del&gt;WICKET-5843&lt;/del&gt;&lt;/a&gt; CryptoMapper doesn&apos;t work with context relative UrlResourceReferences&lt;/p&gt;

&lt;p&gt;Return the original Url if there was no encryption.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 55f164e4bc20ef4d54aaafbfbc79ffeb58f37caa)&lt;/p&gt;</comment>
                            <comment id="14384689" author="mgrigorov" created="Fri, 27 Mar 2015 21:17:07 +0000"  >&lt;p&gt;Fixed by returning the original Url in case there was no encryption of any parameter.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12779079">WICKET-5844</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26am7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>