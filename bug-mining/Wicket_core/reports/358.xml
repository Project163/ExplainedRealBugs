<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:18:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4004] PageExpiredException still thrown after handled by IRequestCycleListener</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4004</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In the attached quickstart, a simple AJAX form expires.&lt;br/&gt;
After expiry, the user clicks a button and a PageExpiredException is thrown.&lt;/p&gt;

&lt;p&gt;onException() of an IRequestCycleListener handles it, but the framework still throws it so the handling of it does not work.&lt;/p&gt;

&lt;p&gt;It appears this is caused by getRequestLoggerSettings().setRequestLoggerEnabled(true); but I am not sure.&lt;/p&gt;

&lt;p&gt;This works fine in 1.4&lt;/p&gt;</description>
                <environment>Wicket version: 1.5-RC7&lt;br/&gt;
java version &amp;quot;1.6.0_25&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_25-b06)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 20.0-b11, mixed mode, sharing)&lt;br/&gt;
</environment>
        <key id="12520681">WICKET-4004</key>
            <summary>PageExpiredException still thrown after handled by IRequestCycleListener</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="bht@actrix.gen.nz">bernard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 04:00:13 +0000</created>
                <updated>Tue, 13 Sep 2011 08:25:34 +0000</updated>
                            <resolved>Wed, 31 Aug 2011 12:15:56 +0000</resolved>
                                    <version>1.5-RC7</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13093423" author="bht@actrix.gen.nz" created="Tue, 30 Aug 2011 04:01:04 +0000"  >&lt;p&gt;Testcase&lt;/p&gt;</comment>
                            <comment id="13093768" author="mgrigorov" created="Tue, 30 Aug 2011 14:27:33 +0000"  >&lt;p&gt;It is still possible.&lt;br/&gt;
The problem is that you use RequestLogger. It is executed at the end of the request and it tries to extract the page information, particularly its class, while having just its id, so it throws a new PageExpiredException which is too late to be handled.&lt;/p&gt;</comment>
                            <comment id="13093944" author="bht@actrix.gen.nz" created="Tue, 30 Aug 2011 17:59:04 +0000"  >&lt;p&gt;Hi Martin, thanks for evaluating.&lt;/p&gt;

&lt;p&gt;Why is using RequestLogger a problem since 1.5? It wasn&apos;t in 1.4.&lt;/p&gt;

&lt;p&gt;Why is this issue considered not a problem? For me it is. Page expiry is a big issue for users who are logged in invisibly by remember-me cookie. I really need to trace this, and in development mode, I have RequestLogger on all the time so I see things in context.&lt;/p&gt;

&lt;p&gt;Can RequestLogger be fixed to handle the PageExpiredException? That would sound logical to me.&lt;/p&gt;</comment>
                            <comment id="13094034" author="mgrigorov" created="Tue, 30 Aug 2011 19:54:29 +0000"  >&lt;p&gt;What is the behavior of RequestLogger with PageExpiredException in 1.4 ? What does it logs for this request ?&lt;br/&gt;
Please attach similar quickstart for 1.4 so I can see what is the difference.&lt;/p&gt;

&lt;p&gt;RequestLogger runs at the very end of the request cycle processing. The best we can do is to try/catch the request logger. It shouldn&apos;t break the request processing.&lt;/p&gt;</comment>
                            <comment id="13094105" author="bht@actrix.gen.nz" created="Tue, 30 Aug 2011 21:13:03 +0000"  >&lt;p&gt;Added a testcase for 1.4. RequestLogger entry is:&lt;/p&gt;

&lt;p&gt;INFO: time=11562,event=null,response=PageRequest&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.markup.html.pages.PageExpiredErrorPage(0)&amp;#93;&lt;/span&gt;,sessionid=null,sessionsize=1086,activerequests=0,maxmem=518M,total=179M,used=93M&lt;/p&gt;

&lt;p&gt;I think the reason for the difference could be that I found it easier in 1.4 to intercept PageExpiredException in WebRequestCycleProcessor#resolve(...).&lt;/p&gt;

&lt;p&gt;Is that possible in 1.5, too?&lt;/p&gt;

&lt;p&gt;Many thanks.&lt;/p&gt;</comment>
                            <comment id="13094161" author="svenmeier" created="Tue, 30 Aug 2011 22:27:53 +0000"  >&lt;p&gt;Maybe I didn&apos;t understand the problem correctly, but isn&apos;t this just a matter of catching PageExpiredException in RequestLogger#getListenerString) ?&lt;/p&gt;</comment>
                            <comment id="13094464" author="mgrigorov" created="Wed, 31 Aug 2011 12:15:56 +0000"  >&lt;p&gt;try/catch the logger message generation, log a warning if there a problem and return &quot;UNKNOWN&quot; as result.&lt;br/&gt;
Example: event=&lt;/p&gt;
{handler=ListenerInterfaceRequestHandler,pageClass=UNKNOWN}</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492197" name="quickstart.zip" size="10174" author="bht@actrix.gen.nz" created="Tue, 30 Aug 2011 04:01:04 +0000"/>
                            <attachment id="12492368" name="testcase1.4.zip" size="8529" author="bht@actrix.gen.nz" created="Tue, 30 Aug 2011 21:13:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k9j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116361</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>