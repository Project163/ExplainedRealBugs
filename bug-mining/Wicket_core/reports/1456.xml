<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6568] Wicket fails / does not encode request header values in AjaxCalls</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6568</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Looking at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js?source&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js?source&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Wicket just sets the Wicket-FocusedElementId header to the id of the element.&lt;br/&gt;
However according to:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://w3c.github.io/html/single-page.html#element-attrdef-global-id&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://w3c.github.io/html/single-page.html#element-attrdef-global-id&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The id must not contain a space, other UTF-8 characters are allowed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;When specified on HTML elements, the id attribute value must be unique amongst all the IDs in the element&#8217;s tree and must contain at least one character. The value must not contain any space characters.&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;We got UTF-8 characters in our ids - now wicket fails to make Ajax calls with e.g. this error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR: Wicket.Ajax.Call.failure: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; parsing response: TypeError: Cannot convert string to ByteString because the character at index 64 has value 328 which is greater than 255.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because the Header value set in the code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Wicket.Focus.lastFocusId) {
    headers[&lt;span class=&quot;code-quote&quot;&gt;&quot;Wicket-FocusedElementId&quot;&lt;/span&gt;] = Wicket.Focus.lastFocusId;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;has to be encoded and decoded on the backend (either base64, url encoding or something else which is allowed to be in a header).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13173138">WICKET-6568</key>
            <summary>Wicket fails / does not encode request header values in AjaxCalls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="tkrah">Torsten Krah</reporter>
                        <labels>
                            <label>UTF-8</label>
                            <label>ajax</label>
                            <label>encode</label>
                            <label>header</label>
                    </labels>
                <created>Thu, 19 Jul 2018 08:45:35 +0000</created>
                <updated>Mon, 23 Jul 2018 19:24:33 +0000</updated>
                            <resolved>Sun, 22 Jul 2018 16:46:22 +0000</resolved>
                                    <version>7.7.0</version>
                                    <fixVersion>7.11.0</fixVersion>
                    <fixVersion>8.1.0</fixVersion>
                    <fixVersion>9.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16549734" author="jira-bot" created="Thu, 19 Jul 2018 19:31:34 +0000"  >&lt;p&gt;Commit ac85c32f4c001b3c4c06a5d94bd1ff6ab8d4acae in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ac85c32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ac85c32&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; escape header &quot;Wicket-FocusedElementId&quot;&lt;/p&gt;

&lt;p&gt;it might contain non-ASCII&lt;/p&gt;</comment>
                            <comment id="16549737" author="svenmeier" created="Thu, 19 Jul 2018 19:33:04 +0000"  >&lt;p&gt;Thanks Torsten, could you try out the change I pushed just now? Works fine here with url encoding.&lt;/p&gt;</comment>
                            <comment id="16550841" author="tkrah" created="Fri, 20 Jul 2018 14:49:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt; tested it with 7.11.0-SNAPSHOT, fix works fine here. Thanks for the fast support.&lt;/p&gt;</comment>
                            <comment id="16552071" author="jira-bot" created="Sun, 22 Jul 2018 16:42:49 +0000"  >&lt;p&gt;Commit f6a195d346758ceed155ffc87074780b48d3dfbe in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6563&quot; title=&quot;Rework page and data storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6563&quot;&gt;&lt;del&gt;WICKET-6563&lt;/del&gt;&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6a195d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f6a195d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; escape header &quot;Wicket-FocusedElementId&quot;&lt;/p&gt;

&lt;p&gt;it might contain non-ASCII&lt;/p&gt;</comment>
                            <comment id="16552072" author="jira-bot" created="Sun, 22 Jul 2018 16:42:50 +0000"  >&lt;p&gt;Commit 409cef886cfd5ae70261dfcbb369038796a9767a in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6563&quot; title=&quot;Rework page and data storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6563&quot;&gt;&lt;del&gt;WICKET-6563&lt;/del&gt;&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=409cef8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=409cef8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; added test&lt;/p&gt;</comment>
                            <comment id="16552073" author="jira-bot" created="Sun, 22 Jul 2018 16:43:16 +0000"  >&lt;p&gt;Commit 9bea1621e88d32c0d2f35d0d6efb484ecc56145e in wicket&apos;s branch refs/heads/wicket-8.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9bea162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9bea162&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; escape header &quot;Wicket-FocusedElementId&quot;&lt;/p&gt;

&lt;p&gt;it might contain non-ASCII&lt;/p&gt;</comment>
                            <comment id="16552074" author="jira-bot" created="Sun, 22 Jul 2018 16:43:17 +0000"  >&lt;p&gt;Commit b02a5afe8ec65b5ed5c36f61fc180b329b47d9ce in wicket&apos;s branch refs/heads/wicket-8.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b02a5af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b02a5af&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; added test&lt;/p&gt;</comment>
                            <comment id="16552075" author="jira-bot" created="Sun, 22 Jul 2018 16:43:40 +0000"  >&lt;p&gt;Commit ec433e6a313676db5f302563a20c533813c1070a in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ec433e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ec433e6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; added test&lt;/p&gt;</comment>
                            <comment id="16552077" author="svenmeier" created="Sun, 22 Jul 2018 16:46:22 +0000"  >&lt;p&gt;We might decide to decode all header values later. But for now only &quot;Wicket-FocusedElementId&quot;&#160; is decoded, since we know wicket-ajax-jquery encodes it before setting the header.&lt;/p&gt;

&lt;p&gt;Thanks Torsten!&lt;/p&gt;</comment>
                            <comment id="16553292" author="jira-bot" created="Mon, 23 Jul 2018 19:24:32 +0000"  >&lt;p&gt;Commit acb9785052c971a11bf898762afa2855cbdad2bf in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=acb9785&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=acb9785&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; escape header &quot;Wicket-FocusedElementId&quot;&lt;/p&gt;

&lt;p&gt;it might contain non-ASCII&lt;/p&gt;</comment>
                            <comment id="16553293" author="jira-bot" created="Mon, 23 Jul 2018 19:24:33 +0000"  >&lt;p&gt;Commit 8bd43a4c11fe826a4fe257feb312967415801c37 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8bd43a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8bd43a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6568&quot; title=&quot;Wicket fails / does not encode request header values in AjaxCalls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6568&quot;&gt;&lt;del&gt;WICKET-6568&lt;/del&gt;&lt;/a&gt; added test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w25z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>