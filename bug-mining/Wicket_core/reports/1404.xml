<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6432] SignInPanel causes infinite redirect loop if session id is suppressed in URL</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6432</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The attached, very simple quickstart causes an infinite redirection loop. It consists of a &lt;em&gt;AuthenticatedPage&lt;/em&gt;, which is annotated by &lt;em&gt;@AuthorizeInstantiation&lt;/em&gt;, and a &lt;em&gt;LoginPage&lt;/em&gt;, using a SingInPanel, which is set up as home page.&lt;br/&gt;
The trouble begins if one opens the HTTP URL after signing in with HTTPS.&lt;br/&gt;
It happens only if Jetty is forced to suppress the session id as URL parameter (see &lt;a href=&quot;http://www.eclipse.org/jetty/documentation/9.2.22.v20170531/session-management.html#setting-session-characteristics&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jetty 9.2.X documentation&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    WebAppContext bb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WebAppContext();

    &lt;span class=&quot;code-comment&quot;&gt;// The following line causes the trouble
&lt;/span&gt;    bb.setInitParameter(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.eclipse.jetty.servlet.SessionIdPathParameterName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;none&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Start the application in test/java/quickstart/Start&lt;/li&gt;
	&lt;li&gt;Open &lt;a href=&quot;https://localhost:8443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:8443&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Sign in using &quot;user&quot; and &quot;password&quot;&lt;/li&gt;
	&lt;li&gt;After redirected to the AuthenticatedPage, open &lt;a href=&quot;http://localhost:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13091920">WICKET-6432</key>
            <summary>SignInPanel causes infinite redirect loop if session id is suppressed in URL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="simon.erhardt">Simon Erhardt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Aug 2017 15:13:59 +0000</created>
                <updated>Wed, 7 Aug 2019 08:13:06 +0000</updated>
                            <resolved>Wed, 7 Aug 2019 08:13:06 +0000</resolved>
                                    <version>7.8.0</version>
                                                    <component>wicket-auth-roles</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16112401" author="simon.erhardt" created="Thu, 3 Aug 2017 08:20:14 +0000"  >&lt;p&gt;Also reproducable with latest Jetty version 9.4.6.v20170531&lt;/p&gt;</comment>
                            <comment id="16115681" author="jira-bot" created="Sun, 6 Aug 2017 07:25:13 +0000"  >&lt;p&gt;Commit f9a9bf9c3fb0b1390b6600d027bb64ae7e4f3c03 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f9a9bf9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f9a9bf9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6432&quot; title=&quot;SignInPanel causes infinite redirect loop if session id is suppressed in URL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6432&quot;&gt;&lt;del&gt;WICKET-6432&lt;/del&gt;&lt;/a&gt; added factory method for non-model targetChainingModel logs warning now if target is not serializable&lt;/p&gt;</comment>
                            <comment id="16115757" author="mgrigorov" created="Sun, 6 Aug 2017 10:49:12 +0000"  >&lt;p&gt;The commit above references this ticket by mistake. &lt;br/&gt;
It was about &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6436&quot; title=&quot;Please add CompoundPropertyModel.of(T object) method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6436&quot;&gt;&lt;del&gt;WICKET-6436&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16115771" author="mgrigorov" created="Sun, 6 Aug 2017 11:33:04 +0000"  >&lt;p&gt;For some reason I am not able to open the HTTPS page at all. &lt;br/&gt;
The console says:&lt;br/&gt;
GET &lt;a href=&quot;https://localhost:8443/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost:8443/&lt;/a&gt; net::ERR_EMPTY_RESPONSE&lt;/p&gt;</comment>
                            <comment id="16115776" author="mgrigorov" created="Sun, 6 Aug 2017 11:42:30 +0000"  >&lt;p&gt;http works fine but I am not able to load the page with https neither in Chrome 59.0.3071.115, nor in Firefox 54.0&lt;/p&gt;</comment>
                            <comment id="16115779" author="jira-bot" created="Sun, 6 Aug 2017 11:51:38 +0000"  >&lt;p&gt;Commit e1aa1a1cd3340ce71a0c1dea28a11d1738c73ffa in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e1aa1a1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e1aa1a1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6432&quot; title=&quot;SignInPanel causes infinite redirect loop if session id is suppressed in URL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6432&quot;&gt;&lt;del&gt;WICKET-6432&lt;/del&gt;&lt;/a&gt; added factory method for non-model targetChainingModel logs warning now if target is not serializable&lt;/p&gt;</comment>
                            <comment id="16115784" author="jira-bot" created="Sun, 6 Aug 2017 11:58:49 +0000"  >&lt;p&gt;Commit 2472fa08f39ec4607e6d69ca3677a3dded368e12 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2472fa0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2472fa0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6432&quot; title=&quot;SignInPanel causes infinite redirect loop if session id is suppressed in URL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6432&quot;&gt;&lt;del&gt;WICKET-6432&lt;/del&gt;&lt;/a&gt; added factory method for non-model targetChainingModel logs warning now if target is not serializable&lt;/p&gt;</comment>
                            <comment id="16115786" author="jira-bot" created="Sun, 6 Aug 2017 12:05:45 +0000"  >&lt;p&gt;Commit a0d20c9282be25937e4ff8f9c7c171a056ec0ff4 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a0d20c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a0d20c9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6432&quot; title=&quot;SignInPanel causes infinite redirect loop if session id is suppressed in URL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6432&quot;&gt;&lt;del&gt;WICKET-6432&lt;/del&gt;&lt;/a&gt; added factory method for non-model targetChainingModel logs warning now if target is not serializable&lt;/p&gt;</comment>
                            <comment id="16115798" author="svenmeier" created="Sun, 6 Aug 2017 12:58:18 +0000"  >&lt;p&gt;Sorry for the wrong issue in the commit message - I was working on both issues at a time :/.&lt;/p&gt;</comment>
                            <comment id="16115806" author="svenmeier" created="Sun, 6 Aug 2017 13:22:14 +0000"  >&lt;p&gt;HTTPS works fine here.&lt;/p&gt;

&lt;p&gt;This issue is caused by two factors actually:&lt;/p&gt;

&lt;p&gt;Firstly SignInPanel#onConfigure() uses the authentication strategy to automatically sign the user. Jetty does not accept the cookie on non-HTTPS request (see next comment), so the application goes into a redirect loop.&lt;/p&gt;

&lt;p&gt;This can remedied by disabling remember-me getSecuritySettings().setAuthenticationStrategy(new NoOpAuthenticationStrategy()).&lt;/p&gt;

&lt;p&gt;Instead of a redirect-loop, the user will now have to sign in twice for HTTP and HTTPS respectively.&lt;/p&gt;</comment>
                            <comment id="16115839" author="svenmeier" created="Sun, 6 Aug 2017 15:46:57 +0000"  >&lt;p&gt;With remember-me out of the way we come to the core of the problem (and It doesn&apos;t depend whether you have set &quot;org.eclipse.jetty.servlet.SessionIdPathParameterName&quot; or not):&lt;/p&gt;

&lt;p&gt;Jetty restricts the session cookie to HTTPS requests only. Any further request via HTTP has to include another Session cookie &lt;b&gt;in&lt;/b&gt; the URL.&lt;/p&gt;

&lt;p&gt;These are measures by Jetty to limit access to a session cookie to secure connections. I don&apos;t see what Wicket can do about this. Suggestions are welcomed.&lt;/p&gt;</comment>
                            <comment id="16118308" author="mgrigorov" created="Tue, 8 Aug 2017 13:04:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;has to include another Session cookie in the URL&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is incorrect statement. There is no way to include a cookie in the url. The cookies are in the headers.&lt;/p&gt;


&lt;p&gt;Sessions created in HTTPS requests are visible only in any following HTTPS requests.&lt;br/&gt;
If a cookie is used for tracking then it has &quot;secure=true&quot; and is not read by the browser.&lt;br/&gt;
If url re-writing is used then the servlet container won&apos;t encode it in the urls for HTTP requests.&lt;/p&gt;

&lt;p&gt;Session created in HTTP request is visible to both HTTP and HTTPS requests.&lt;/p&gt;

&lt;p&gt;Since I cannot reproduce the problem here - what exactly is the observed behavior ?  &lt;/p&gt;</comment>
                            <comment id="16118376" author="svenmeier" created="Tue, 8 Aug 2017 14:20:58 +0000"  >&lt;p&gt;Jetty decides to encode the http session id in the URL, instead of using a cookie.&lt;/p&gt;

&lt;p&gt;I&apos;ll have to verify, but it seems Jetty is using two different sessions for Http and HTTPS respectively.&lt;/p&gt;</comment>
                            <comment id="16124879" author="mgrigorov" created="Sun, 13 Aug 2017 11:11:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ll have to verify, but it seems Jetty is using two different sessions for Http and HTTPS respectively.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, this is expected! &lt;br/&gt;
If the first session is created in HTTPS request then this session cannot be shared with HTTP requests and a new http session is created for them.&lt;/p&gt;</comment>
                            <comment id="16894489" author="bitstorm" created="Sat, 27 Jul 2019 16:35:07 +0000"  >&lt;p&gt;Shall we close this issue? It doesn&apos;t seem a problem with Wicket, does it?&lt;/p&gt;</comment>
                            <comment id="16900766" author="mgrigorov" created="Tue, 6 Aug 2019 08:30:17 +0000"  >&lt;p&gt;Let&apos;s close!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12880060" name="redirect-loop.zip" size="26635" author="simon.erhardt" created="Wed, 2 Aug 2017 15:13:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ibuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>