<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5466] ListenerInterfaceRequestHandler#respond throws ComponentNotFoundException as a side-effect</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5466</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The following exception occurs instead of a generic WicketRuntimeException:&lt;/p&gt;

&lt;p&gt;16:27:56.181 WARN  (RequestCycle.java:343) Handling the following exception &lt;span class=&quot;error&quot;&gt;&amp;#91;qtp9826071-207&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.wicket.core.request.handler.ComponentNotFoundException: Could not find component &apos;xyz&apos; on page &apos;class MyPage&#8217;&lt;br/&gt;
       at org.apache.wicket.core.request.handler.PageAndComponentProvider.getComponent(PageAndComponentProvider.java:182) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.getComponent(ListenerInterfaceRequestHandler.java:90) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:231) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:861) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.request_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:261) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:218) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:289) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
       at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:259) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.wicket.core_6.12.0.jar:6.12.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;in fact, this is a side effect, if you look at the code:&lt;/p&gt;

&lt;p&gt;       @Override&lt;br/&gt;
       public void respond(final IRequestCycle requestCycle)&lt;br/&gt;
       {&lt;br/&gt;
             final IRequestablePage page = getPage();&lt;br/&gt;
             final boolean freshPage = pageComponentProvider.isPageInstanceFresh();&lt;br/&gt;
             final boolean isAjax = ((WebRequest)requestCycle.getRequest()).isAjax();&lt;br/&gt;
             IRequestableComponent component = null;&lt;br/&gt;
             try&lt;/p&gt;
             {
                    component = getComponent();
             }
&lt;p&gt;             catch (ComponentNotFoundException e)&lt;/p&gt;
             {
                    // either the page is stateless and the component we are looking for is not added in the
                    // constructor
                    // or the page is stateful+stale and a new instances was created by pageprovider
                    // we denote this by setting component to null
                    component = null;
             }
&lt;p&gt;             if ((component == null &amp;amp;&amp;amp; freshPage) ||&lt;/p&gt;

&lt;p&gt;                    (component != null &amp;amp;&amp;amp; getComponent().getPage() == page))&lt;/p&gt;

             {
             [....]
             }

&lt;p&gt;             else&lt;/p&gt;

             {

                    throw new WicketRuntimeException(&quot;Component &quot; + getComponent() +

                          &quot; has been removed from page.&quot;);

             }

&lt;p&gt;       }&lt;/p&gt;

&lt;p&gt;You see that getComponent() is called twice.&lt;/p&gt;

&lt;p&gt;1) Once guarded by a catch &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;and -&lt;br/&gt;
2) once unguarded&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So if the component can&apos;t be found AND freshPage is false, as a sideeffect instead of the WicketRuntimeException with the removed message a componentnotfound exception is raised as a side effect.&lt;/p&gt;

&lt;p&gt;I see two possible solutions for this&lt;/p&gt;

&lt;p&gt;a) either it is intentional that a ComponentNotFoundException is thrown, then it should be thrown from the catch block like&lt;/p&gt;

&lt;p&gt;             catch (ComponentNotFoundException e)&lt;br/&gt;
             {&lt;br/&gt;
                    if (!freshPage) &lt;/p&gt;
{
                       throw e;
                    }
&lt;p&gt;             }&lt;/p&gt;

&lt;p&gt;b) if it is unintentionall in the else case ther should be a simple check like this&lt;/p&gt;

&lt;p&gt; if (component == null) &lt;/p&gt;
{
                        throw new WicketRuntimeException(&quot;Component for path &quot; + getPath() +
                          &quot; and page &quot;+page.getClass().getName()+&quot; has been removed from page.&quot;);
                    }
&lt;p&gt; else &lt;/p&gt;
{
                       throw new WicketRuntimeException(&quot;Component &quot; + component +
                          &quot; has been removed from page.&quot;);
                    }


&lt;p&gt;Beside this: it would be a good idea to mention at least the page class in either case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687922">WICKET-5466</key>
            <summary>ListenerInterfaceRequestHandler#respond throws ComponentNotFoundException as a side-effect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="laeubi">Christoph L&#228;ubrich</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 19:25:14 +0000</created>
                <updated>Tue, 14 Jan 2014 16:01:38 +0000</updated>
                            <resolved>Tue, 14 Jan 2014 16:01:38 +0000</resolved>
                                    <version>6.12.0</version>
                                    <fixVersion>6.14.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13866576" author="laeubi" created="Thu, 9 Jan 2014 11:53:23 +0000"  >&lt;p&gt;Maybe variant b is more usefull since there might be other pathes where it passes by with no component avaiable.&lt;/p&gt;</comment>
                            <comment id="13870842" author="svenmeier" created="Tue, 14 Jan 2014 16:01:38 +0000"  >&lt;p&gt;The component path is now used to report the missing component.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r8yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>