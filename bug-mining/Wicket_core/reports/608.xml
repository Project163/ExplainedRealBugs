<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4594] Do not use the parsed PageParameters when re-creating an expired page</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4594</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4014&quot; title=&quot;Wicket 1.5 Form Post Action and Link Get discard Page Class Information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4014&quot;&gt;&lt;del&gt;WICKET-4014&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4290&quot; title=&quot;Confusion between a form component&amp;#39;s wicket:id and a PageParameter in Wicket 1.5.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4290&quot;&gt;&lt;del&gt;WICKET-4290&lt;/del&gt;&lt;/a&gt; provided functionality to re-create an expired page if there is a mount path in the current request&apos;s url.&lt;br/&gt;
There is a minor problem with that because the page parameters are passed to the freshly created page. I.e. parameters for a callback behavior are now set as page construction parameters.&lt;br/&gt;
Since the execution of the behavior is ignored for the recreated page these parameters should be ignored too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12559688">WICKET-4594</key>
            <summary>Do not use the parsed PageParameters when re-creating an expired page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mgrigorov">Martin Tzvetanov Grigorov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jun 2012 13:04:56 +0000</created>
                <updated>Thu, 20 Mar 2014 22:31:06 +0000</updated>
                            <resolved>Wed, 25 Jul 2012 11:36:19 +0000</resolved>
                                    <version>1.5.7</version>
                                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>6.0.0-beta3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                                                            <comments>
                            <comment id="13416742" author="shadowdz" created="Wed, 18 Jul 2012 00:03:42 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;this feature make it impossible to use AJAX calls on stateless pages if the AJAX call uses ExtraParameters for restoring the page state.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;	protected void updateAjaxAttributes(final AjaxRequestAttributes attributes) &lt;/p&gt;
{
		super.updateAjaxAttributes(attributes);
		attributes.getExtraParameters().put(&quot;customerId, customer.getId());
	}

&lt;p&gt;This will produce the correct PageParameters but they will be just ignored by your fix.&lt;/p&gt;


&lt;p&gt;Perhaps I have just missed something? &lt;/p&gt;

&lt;p&gt;I have attached a fix which works for me.&lt;/p&gt;

&lt;p&gt;Kindest regards,&lt;br/&gt;
Daniel&lt;/p&gt;</comment>
                            <comment id="13416745" author="shadowdz" created="Wed, 18 Jul 2012 00:05:29 +0000"  >&lt;p&gt;P.S.: The patch will just replace the PageParameters if the page is not stateless&lt;/p&gt;</comment>
                            <comment id="13419761" author="vineetsemwal" created="Sat, 21 Jul 2012 08:14:00 +0000"  >&lt;p&gt;@Daniel:you can  retrieve customerid from requestparameters on ajax request in your case&lt;/p&gt;</comment>
                            <comment id="13419921" author="mgrigorov" created="Sat, 21 Jul 2012 20:02:36 +0000"  >&lt;p&gt;@Daniel: can you please attach a quickstart that demonstrates the problem ? &lt;/p&gt;</comment>
                            <comment id="13419959" author="shadowdz" created="Sat, 21 Jul 2012 22:10:22 +0000"  >&lt;p&gt;@Martin: I have attached a smale example. The refresh button on second page should work and refresh just the page. But it will miss and redirect to index. &lt;/p&gt;</comment>
                            <comment id="13420131" author="vineetsemwal" created="Sun, 22 Jul 2012 09:24:31 +0000"  >&lt;p&gt; currently callback url parameters are not passed to new page instance (even in case of stateless) in beta3 though i don&apos;t know how this (4594) change did it before it used to in beta2 ..&lt;br/&gt;
 however i believe pageparameters are ones which gets used up when page is constructed ,extraparameters or any callback url parameters which are added to callback url are different they are not meant to be passed as pageparameters(even in case of stateless),  they can be retrieved from request parameters on the request in onEvent so say in the quickstart provided,the value associated with key can be retrieved in onEvent by  requestcycle.getRequest().getRequestParameters().getParameterValue(&quot;ye&quot;) and then value can be used for label.&lt;br/&gt;
i know this is not the way people currently do with stateless ajax but this appears to me the most correct way.&lt;/p&gt;</comment>
                            <comment id="13420820" author="shadowdz" created="Mon, 23 Jul 2012 17:54:08 +0000"  >&lt;p&gt;Ok, I will try the onEvent version. But I have one question about stateless AjaxEventBehaviors. I don&apos;t understand why they send a pageId? They are stateless and shouldn&apos;t send a padeId? If the pageId is null the parsed PageParameters will reach the page constructer. &lt;/p&gt;</comment>
                            <comment id="13420997" author="vineetsemwal" created="Mon, 23 Jul 2012 22:23:34 +0000"  >&lt;p&gt;i said do it in onEvent because i was working with some example and doing that in onevent &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ,you can retrieve it anywhere on request,it&apos;s just a request attribute/parameter..&lt;/p&gt;</comment>
                            <comment id="13421378" author="mgrigorov" created="Tue, 24 Jul 2012 13:02:08 +0000"  >&lt;p&gt;1) Wicket do not support stateless pages that use Ajax components/behaviors. If there is an Ajax behavior in the page then it is stateful.&lt;/p&gt;

&lt;p&gt;2) Clicking on a link in an expired page will not execute the link&apos;s onClick() method, no matter whether the link is Ajax or normal. Wicket detects that the page is expired, creates a new one by using the mount path from the request url and renders a new page instance ignoring the action phase (i.e. wont execute onClick, onSubmit, onXYX(), ...) because Wicket cannot be sure that the component which callback method the user wanted to execute is even available/visible in the initial state of the page.&lt;/p&gt;

&lt;p&gt;Please use the mailing lists for further discussions. &lt;/p&gt;</comment>
                            <comment id="13421547" author="wk" created="Tue, 24 Jul 2012 17:09:16 +0000"  >&lt;p&gt;Added &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4594&quot; title=&quot;Do not use the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4594&quot;&gt;&lt;del&gt;WICKET-4594&lt;/del&gt;&lt;/a&gt;_bug.zip&lt;/p&gt;

&lt;p&gt;Example quickstart for my problem. Open with URL &lt;a href=&quot;http://localhost:8080/?test=test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/?test=test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On a page with a stateless form this change causes an error. The unit test succeeds because MockPageManager does not store pages in the same way as RequestAdapter does (it only stores pages that are really stateful after being rendered, in commitRequest())&lt;/p&gt;

&lt;p&gt;Open the quickstart and try submitting the form, the PageParameters will be gone even though they are in the URL submitted.&lt;/p&gt;</comment>
                            <comment id="13421591" author="shadowdz" created="Tue, 24 Jul 2012 18:00:20 +0000"  >&lt;p&gt;@Martin:&lt;/p&gt;

&lt;p&gt;1) If this is true, why I am able to overwrite Behavior.getStatelessHint(final Component component)? This shouldn&apos;t be possible.&lt;/p&gt;

&lt;p&gt;2) Clicking a link on a expired page will create a new empty PageParameter and will not create a new page if this page requieres path parameter. This is the problem i came along after updating to beta3!&lt;/p&gt;</comment>
                            <comment id="13422168" author="mgrigorov" created="Wed, 25 Jul 2012 11:36:19 +0000"  >&lt;p&gt;An improvement is added with &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4672&quot; title=&quot;Do not render pageId for the action links for stateless pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4672&quot;&gt;&lt;del&gt;WICKET-4672&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Now stateless pages do not render pageId in the urls and later PageProvider can recognize expired stateful page from stateless page.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12702749">WICKET-5539</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12536923" name="WICKET-4594.patch.diff" size="910" author="shadowdz" created="Wed, 18 Jul 2012 00:04:17 +0000"/>
                            <attachment id="12537709" name="WICKET-4594_bug.zip" size="25166" author="wk" created="Tue, 24 Jul 2012 17:09:16 +0000"/>
                            <attachment id="12537468" name="example.tar.gz" size="28111" author="shadowdz" created="Sat, 21 Jul 2012 22:09:45 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12600148">WICKET-4672</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116191</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>