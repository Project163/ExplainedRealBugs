<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:17:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3469] Referrer Leaking with ExternalLink</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3469</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When Cookies are turned off, the jsessionid is included in the URL of the wicket application, e.g. &lt;a href=&quot;http://localhost:8080/wicket-app/;jsessionid=03A529631FB1B9BA35556EA02519DF99?x=cOa8p3ycZvK*eAoEOzxHjg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/wicket-app/;jsessionid=03A529631FB1B9BA35556EA02519DF99?x=cOa8p3ycZvK*eAoEOzxHjg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ExternalLink renders links like &amp;lt;a href=&quot;http://www.google.de/&quot;&amp;gt;Google&amp;lt;/a&amp;gt; &lt;/p&gt;

&lt;p&gt;When the user clicks on such an external link, the browser puts the current URL (including the session id) into the Referrer HTTP header. This is an security issue. Instead, the ExternalLink should use a redirect to open the external url.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12499408">WICKET-3469</key>
            <summary>Referrer Leaking with ExternalLink</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="hjaekel">Holger Jaekel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Feb 2011 21:26:16 +0000</created>
                <updated>Sun, 27 Feb 2011 10:13:32 +0000</updated>
                            <resolved>Sun, 27 Feb 2011 10:13:32 +0000</resolved>
                                    <version>1.4.15</version>
                                    <fixVersion>1.4.17</fixVersion>
                    <fixVersion>1.5-RC3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12998050" author="dashorst" created="Tue, 22 Feb 2011 21:43:50 +0000"  >&lt;p&gt;If you need a redirect, use a normal Link component instead. ExternalLink does exactly what it is designed to do: render a &amp;lt;a href=&quot;&quot;&amp;gt; for a normal URL.&lt;/p&gt;

&lt;p&gt;You could add a attributemodifier to add a noreferrer tag to the link. See &lt;a href=&quot;http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-noreferrer&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-noreferrer&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12998051" author="pedrosans" created="Tue, 22 Feb 2011 21:52:53 +0000"  >&lt;p&gt;I know that it is not up to the framework to strip that encoded session id, but would be nice if it is possible, reopening just to attach the quickstart I used to understand the issue&lt;/p&gt;</comment>
                            <comment id="12998061" author="ivaynberg" created="Tue, 22 Feb 2011 22:15:27 +0000"  >&lt;p&gt;i dont see how this can happen at all. the url given to the link is not rewritten anywhere using HttpServletResponse#encodeURL, it is rendered raw. so what appends the jsessionid to it? at least in the quickstart pedro attached this is not reproduced...&lt;/p&gt;</comment>
                            <comment id="12998062" author="ivaynberg" created="Tue, 22 Feb 2011 22:18:21 +0000"  >&lt;p&gt;nevermind, i see. i think martijn is correct, if you do not want to show the referer - which will contain jsessiond, use a normal link and redirect to the external url.&lt;/p&gt;</comment>
                            <comment id="12998064" author="jthomerson" created="Tue, 22 Feb 2011 22:25:51 +0000"  >&lt;p&gt;jsessionid is appended by the container - we can&apos;t control it&lt;/p&gt;</comment>
                            <comment id="12998071" author="hjaekel" created="Tue, 22 Feb 2011 22:38:49 +0000"  >&lt;p&gt;If you see ExternalLink just as a class for rendering a simple anchor link, you are correct. ExternalLink does exactly what it is supposed to do.&lt;/p&gt;

&lt;p&gt;I was thinking of ExternalLink as the recommended way of including links to external URLs into an application. The compnent reference says: &quot;External links take you outside the scope of Wicket. They can come in handy when you keep your links e.g. in a database.&quot; But the usage of ExternalLink for external links cannot be recommendet because it is possible that the jsessionid is leaked to the external site. So maybe wicket should offer a secure way of including external links into an application. Using normal Links and creating the redirects in the application code is just a workaround. Using noreferrer is HTML5, which is still a draft.&lt;/p&gt;</comment>
                            <comment id="12998223" author="mgrigorov" created="Wed, 23 Feb 2011 08:07:26 +0000"  >&lt;p&gt;I tend to agree with Holger.&lt;br/&gt;
With the current impl of ExternalLink Wicket provides a component which is vulnerable (session hijacking thru referer) in certain circumstances (disabled cookies).&lt;br/&gt;
A real fix would be to reimplement ExternalLink to normal Link which redirects in its onClick(). If this is not acceptable then we can at least mention this possible problem in the javadoc and add &apos;rel=&quot;noreferrer&quot;&apos; attribute so at least new browsers can help preventing this security hole.&lt;/p&gt;</comment>
                            <comment id="12998224" author="mgrigorov" created="Wed, 23 Feb 2011 08:07:58 +0000"  >&lt;p&gt;Reopening to add javadoc at least.&lt;/p&gt;</comment>
                            <comment id="12998239" author="dashorst" created="Wed, 23 Feb 2011 08:40:49 +0000"  >&lt;p&gt;-1 to serverside events with this component. That would break so many applications that would not be funny.&lt;/p&gt;

&lt;p&gt;External link is nothing more than providing your markup with URLs from Java code. Similar to just having a &amp;lt;a href=&quot;http://google.com&quot;&amp;gt; in your markup. We are not going to fix those as well, nor webmarkupcontainers that have an attribute modifier to provide a href attribute, nor webmarkupcontainers that override onComponentTag and put a href attribute.&lt;/p&gt;
</comment>
                            <comment id="12998247" author="mgrigorov" created="Wed, 23 Feb 2011 08:48:37 +0000"  >&lt;p&gt;Javadoc explaining the possible problem and solution is added with r1073642 (1.4.x) and r1073641 (trunk).&lt;br/&gt;
rel=&quot;noreferrer&quot; attribute is not added by default. It can be provided by the user application at any time.&lt;/p&gt;</comment>
                            <comment id="12998432" author="ivaynberg" created="Wed, 23 Feb 2011 16:27:18 +0000"  >&lt;p&gt;fwiw this is not going to work either:&lt;/p&gt;

&lt;p&gt; &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &amp;lt;strong&amp;gt;Note&amp;lt;/strong&amp;gt;: in the case when the support for cookies in the browser is disabled the&lt;br/&gt;
+ * user&apos;s jsessionid will leak in the &apos;Referrer&apos; header after clicking this link. If this is a&lt;br/&gt;
+ * problem for the application then better use &lt;/p&gt;
{@link Link}
&lt;p&gt; which redirects to the new URL using&lt;br/&gt;
+ * &lt;/p&gt;
{@link RedirectToUrlException}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;the referer will then have the ;jsessionid=ABCD/?wicket:interface=.... url&lt;/p&gt;

&lt;p&gt;in order to truly fix this one would have to redirect to a shared stateless resource that performs the redirect to the link url&lt;/p&gt;

&lt;p&gt;so a link has to redirect to /wicket/resource/my-redirect-resource?url=my-final-destination&lt;br/&gt;
letting the resource there perform the final redirect and making sure that the above url does not have jsessionid in it by either building the url to it manually or not passing it through response.encodeurl() method.&lt;/p&gt;

&lt;p&gt;this is not trivial, but its also not unique to wicket. all java applications have to do this dance if they dont want jsessionid in their urls.&lt;/p&gt;</comment>
                            <comment id="12998450" author="mgrigorov" created="Wed, 23 Feb 2011 16:59:23 +0000"  >&lt;p&gt;Reopen to update the javadoc&lt;/p&gt;</comment>
                            <comment id="12999919" author="mgrigorov" created="Sun, 27 Feb 2011 10:13:32 +0000"  >&lt;p&gt;The javadoc is updated with Igor&apos;s comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12471664" name="WICKET-3469.zip" size="21481" author="pedrosans" created="Tue, 22 Feb 2011 21:54:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204254</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kavz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>