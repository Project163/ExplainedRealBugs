<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4353] Choice is not rendered as selected on different instances semantically equal</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4353</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;With 1.5.4 there was a change in org.apache.wicket.markup.html.form.AbstractSingleSelectChoice.java&lt;br/&gt;
Sven stated in list that: &quot;Igor&apos;s commit statements says &quot;improved inconsistency handling in choice components&quot;.&lt;br/&gt;
This change prevents IChoiceRenderer#getIdValue() being called with -1 as the index argument. &quot;.&lt;br/&gt;
It is defenitly a comprehensible change. But the effect is (for me) quite heavy.&lt;br/&gt;
If you don&apos;t overwrite equals in selectable objects then two semantically equal instances will not be rendered as &lt;br/&gt;
selected because of the different physical instances. But it worked in 1.5.3.&lt;/p&gt;</description>
                <environment>windows, jdk1.6</environment>
        <key id="12539599">WICKET-4353</key>
            <summary>Choice is not rendered as selected on different instances semantically equal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="newgro">Per Newgro</reporter>
                        <labels>
                            <label>DropDownChoice</label>
                    </labels>
                <created>Tue, 24 Jan 2012 11:50:40 +0000</created>
                <updated>Mon, 4 Jun 2012 20:57:39 +0000</updated>
                            <resolved>Thu, 24 May 2012 06:01:55 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.5.7</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13192077" author="newgro" created="Tue, 24 Jan 2012 11:51:53 +0000"  >&lt;p&gt;Simple test for reproducing the behavior&lt;/p&gt;</comment>
                            <comment id="13192159" author="svenmeier" created="Tue, 24 Jan 2012 13:56:37 +0000"  >&lt;p&gt;There are several solutions how to detect the selected choice:&lt;br/&gt;
1) use a custom ChoiceRenderer (no longer available with 1.5.4)&lt;br/&gt;
2) override AbstractSingleSelectChoice#getModelValue()&lt;br/&gt;
3) make sure the selected choice is the identical object contained in the choices list (e.g. via OpenSessionInView)&lt;/p&gt;

&lt;p&gt;I think 1) was a nice and easy solution so far.&lt;/p&gt;

&lt;p&gt;@Igor:&lt;br/&gt;
You&apos;ve implemented a different solution in 92dec6995318444eb831c49b350a6b03b89e0962, utiliizing the choiceRenderer and #isSelected(). Why did you revert this change?&lt;/p&gt;</comment>
                            <comment id="13192249" author="ivaynberg" created="Tue, 24 Jan 2012 16:17:38 +0000"  >&lt;p&gt;because it did not work when the index of the choice was used instead of an explicit id.&lt;/p&gt;

&lt;p&gt;we should remove the option of using the index in ddcs and everything will work much better...&lt;/p&gt;</comment>
                            <comment id="13193126" author="svenmeier" created="Wed, 25 Jan 2012 17:12:07 +0000"  >&lt;p&gt;Ok, I understand now. We could change the ChoiceRenderer interface for Wicket 6, although it would be nice if a default implementation still would support index-based ids.&lt;/p&gt;

&lt;p&gt;But for 1.5.x I&apos;d prefer the previous behavior to be restored.&lt;/p&gt;</comment>
                            <comment id="13196091" author="svenmeier" created="Mon, 30 Jan 2012 12:47:54 +0000"  >&lt;p&gt;@Igor: What do you think? Can we remove the new check for 1.5.x?&lt;/p&gt;</comment>
                            <comment id="13276600" author="gad" created="Wed, 16 May 2012 08:41:27 +0000"  >&lt;p&gt;I&apos;ve found similar problem. &lt;/p&gt;

&lt;p&gt;It solves by just overriding the equals value in de options. But sometimes this is not easy. For me it happens that the code that goes into the dropdown is an autogenerated one with the XCF framework. It&apos;s the output of a Webservice and makes it difficult to use. &lt;/p&gt;

&lt;p&gt;I had to use a proxy class between dropdown and output. or override the getModelValue function, what is not a good idea. &lt;/p&gt;

&lt;p&gt;It should not use indexof. It should just compare choice renderer ids.&lt;/p&gt;</comment>
                            <comment id="13281505" author="gad" created="Wed, 23 May 2012 10:20:54 +0000"  >&lt;p&gt;Sorry I&apos;m wrong. &lt;/p&gt;

&lt;p&gt;This problem cannot be solved by just overriding the equals function in the options. Since getIndexOf will not return the element if the memory address is not the same. &lt;/p&gt;

&lt;p&gt;I&apos;m having big troubles with this. &lt;/p&gt;

&lt;p&gt;Someone can explain how this should work correctly?&lt;/p&gt;</comment>
                            <comment id="13282217" author="svenmeier" created="Thu, 24 May 2012 06:01:55 +0000"  >&lt;p&gt;I reverted the new index check. Otherwise it&apos;s not possible to utilize the renderer&apos;s id for semantic equality, which is a valid usecase.&lt;/p&gt;</comment>
                            <comment id="13288898" author="svenmeier" created="Mon, 4 Jun 2012 20:57:39 +0000"  >&lt;p&gt;I&apos;ve tried out an IChoiceRenderer without index parameter, see diff.&lt;/p&gt;

&lt;p&gt;Still supports index-based values for options (although slower), works out nicely for the Palette component &lt;b&gt;but&lt;/b&gt; might still not be worth it.&lt;/p&gt;

&lt;p&gt;@Igor WDYT?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530856" name="WICKET-4353-IChoiceRenderer-Without-Index.diff" size="55394" author="svenmeier" created="Mon, 4 Jun 2012 20:57:39 +0000"/>
                            <attachment id="12511659" name="ddcbug.zip" size="5009" author="newgro" created="Tue, 24 Jan 2012 11:51:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>