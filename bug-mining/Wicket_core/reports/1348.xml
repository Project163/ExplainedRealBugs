<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6277] Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6277</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Whenever is the servlet container (Tomcat in my case) turned off it closes all established ws connections. Wicket reacts to that by broadcasting a &lt;tt&gt;ClosedMessage&lt;/tt&gt; to a &lt;tt&gt;Page&lt;/tt&gt; bounded to that connection. And that is a problem since before that, &lt;tt&gt;org.apache.wicket.protocol.http.WicketFilter#destroy()&lt;/tt&gt; is called and (among others) the &lt;tt&gt;IPageManager&lt;/tt&gt; is destroyed.&lt;/p&gt;

&lt;p&gt;It leads to a NPE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.wicket.page.PageStoreManager$SessionEntry.getPage(PageStoreManager.java:203)
	at org.apache.wicket.page.PageStoreManager$PersistentRequestAdapter.getPage(PageStoreManager.java:357)
	at org.apache.wicket.page.AbstractPageManager.getPage(AbstractPageManager.java:82)
	at org.apache.wicket.page.PageManagerDecorator.getPage(PageManagerDecorator.java:50)
	at org.apache.wicket.page.PageAccessSynchronizer$2.getPage(PageAccessSynchronizer.java:246)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.getPage(AbstractWebSocketProcessor.java:315)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.broadcastMessage(AbstractWebSocketProcessor.java:243)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.onClose(AbstractWebSocketProcessor.java:182)
	at org.apache.wicket.protocol.ws.javax.WicketEndpoint.onClose(WicketEndpoint.java:71)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:541)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:490)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:454)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:926)
	at org.apache.tomcat.websocket.server.WsServerContainer.destroy(WsServerContainer.java:285)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4856)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5474)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:224)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1424)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1413)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it would be good idea to NOT broadcast &lt;tt&gt;ClosedMessage&lt;/tt&gt; when the Application is already destroyed.&lt;/p&gt;</description>
                <environment>Windows 10, Tomcat 8.0.33, JDK 1.8.0_91</environment>
        <key id="13020840">WICKET-6277</key>
            <summary>Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="jan-krakora">Jan Krakora</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Nov 2016 16:26:38 +0000</created>
                <updated>Wed, 16 Nov 2016 09:51:44 +0000</updated>
                            <resolved>Tue, 15 Nov 2016 20:53:46 +0000</resolved>
                                    <version>7.4.0</version>
                                    <fixVersion>7.6.0</fixVersion>
                    <fixVersion>8.0.0-M3</fixVersion>
                                    <component>wicket-native-websocket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15668246" author="jira-bot" created="Tue, 15 Nov 2016 20:43:39 +0000"  >&lt;p&gt;Commit 21837bcccd78bb529c2f33fbcd947ff5b9732739 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=21837bc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=21837bc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6277&quot; title=&quot;Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6277&quot;&gt;&lt;del&gt;WICKET-6277&lt;/del&gt;&lt;/a&gt; Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off&lt;/p&gt;

&lt;p&gt;Do not notify the websocket behaviors/resources when the application is already destroyed.&lt;br/&gt;
Add non-null checks for IPageStore in PageStoreManager.&lt;/p&gt;</comment>
                            <comment id="15668248" author="jira-bot" created="Tue, 15 Nov 2016 20:44:30 +0000"  >&lt;p&gt;Commit bcd212963eadfb4cb68773f6761724d55a2c230d in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bcd2129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bcd2129&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6277&quot; title=&quot;Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6277&quot;&gt;&lt;del&gt;WICKET-6277&lt;/del&gt;&lt;/a&gt; Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off&lt;/p&gt;

&lt;p&gt;Do not notify the websocket behaviors/resources when the application is already destroyed.&lt;br/&gt;
Add non-null checks for IPageStore in PageStoreManager.&lt;/p&gt;</comment>
                            <comment id="15668285" author="mgrigorov" created="Tue, 15 Nov 2016 20:53:47 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15669988" author="jan-krakora" created="Wed, 16 Nov 2016 09:51:44 +0000"  >&lt;p&gt;Good job, as always. Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36cjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>