<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:17:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3669] &lt;script&gt; element in Ajax requests is executed twice in Opera 11</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3669</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I have component with behavior which adds &amp;lt;script&amp;gt; element in Behavior.onComponentRendered() to respons. This javascript is to be processed in browser when component is rendered. This works pretty well when component is rendered during standard HTTP request. But when the same code is called from Ajax request, this script runs on browser two times! &lt;/p&gt;

&lt;p&gt;There is some magic in Ajax request processing in wicket-ajax.js: only for Opera and IE these &amp;lt;script&amp;gt; elements from responses are added to HTML and page &amp;lt;header&amp;gt; element as well. Comment says that this is workaround for these browsers, maybe in older versions of Opera dynamically adding element into HTML doesn&apos;t run &amp;lt;script&amp;gt; elements within, but now could be obsolete. &lt;/p&gt;</description>
                <environment>Opera 11.10, Linux Ubuntu 10.10</environment>
        <key id="12506269">WICKET-3669</key>
            <summary>&lt;script&gt; element in Ajax requests is executed twice in Opera 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mschayna">Martin Schayna</reporter>
                        <labels>
                            <label>ajax</label>
                            <label>javascript</label>
                            <label>opera</label>
                            <label>rendering</label>
                    </labels>
                <created>Thu, 5 May 2011 10:31:04 +0000</created>
                <updated>Tue, 20 Dec 2011 13:29:08 +0000</updated>
                            <resolved>Tue, 20 Dec 2011 13:29:08 +0000</resolved>
                                    <version>1.4.17</version>
                                    <fixVersion>1.5-RC5</fixVersion>
                    <fixVersion>6.0.0-beta1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13029269" author="mschayna" created="Thu, 5 May 2011 10:37:23 +0000"  >&lt;p&gt;quickstart for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3669&quot; title=&quot;&amp;lt;script&amp;gt; element in Ajax requests is executed twice in Opera 11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3669&quot;&gt;&lt;del&gt;WICKET-3669&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Opera 11 shows alerts two times with same number&lt;/p&gt;</comment>
                            <comment id="13031222" author="mgrigorov" created="Tue, 10 May 2011 14:48:07 +0000"  >&lt;p&gt;Fixed.&lt;br/&gt;
Tested on FF4, Chrome 12, IE8 and Opera 11&lt;/p&gt;</comment>
                            <comment id="13064628" author="mschayna" created="Wed, 13 Jul 2011 15:22:26 +0000"  >&lt;p&gt;I&apos;m afraid this ticket must be reopened.&lt;/p&gt;

&lt;p&gt;Fix works only for components which has &amp;lt;script&amp;gt; element on its first level (as seen in first test case). When component with script behavior is added to another component (Panel e.g.) and this parent component is changed in AJAX request, script is executed twice in browser again. See my second test case.&lt;/p&gt;

&lt;p&gt;I have tried this simple solution: in replaceOuterHtml() method in wicket-ajax.js comment out test for Opera browser, so in this case is executed same code as in Gecko browsers. It works for me in all of my real cases (pretty large application which heavily uses Wicket). It seems like modern Opera versions are more compatible with Gecko than older versions.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Wicket.Browser.isIE()) {  &lt;span class=&quot;code-comment&quot;&gt;//-- don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Opera  || Wicket.Browser.isOpera()) {		
&lt;/span&gt;    	Wicket.replaceOuterHtmlIE(element, text);				
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Wicket.Browser.isSafari() ) {
    	Wicket.replaceOuterHtmlSafari(element, text);    	
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;/* GECKO */&lt;/span&gt; {
       ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13064632" author="mgrigorov" created="Wed, 13 Jul 2011 15:28:37 +0000"  >&lt;p&gt;Which second case you mean ?&lt;/p&gt;

&lt;p&gt;We know that Opera 11 is not Opera 9. The same is valid for Safari 5 which is treated as Safari 3.&lt;br/&gt;
If we do your &quot;fix&quot; then some user of Opera 9/10 may complain that it doesn&apos;t work ...&lt;br/&gt;
We have plans to use JQuery for the functionality needed by wicket-ajax.js so hopefully this will solve all such issues. But this is planned for Wicket 1.6/1.7. &lt;/p&gt;</comment>
                            <comment id="13064638" author="mschayna" created="Wed, 13 Jul 2011 15:33:39 +0000"  >&lt;p&gt;Second test case, where first fix won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="13064640" author="mschayna" created="Wed, 13 Jul 2011 15:39:14 +0000"  >&lt;p&gt;OK, I see that my simple &quot;fix&quot; doesn&apos;t work in Opeara 9, hm. &lt;/p&gt;

&lt;p&gt;I upload second test case right now, it demonstrates where your first fix failed. I hope it should be resolved in Wicket 1.4. Thanks for your support.&lt;/p&gt;</comment>
                            <comment id="13109574" author="mschayna" created="Wed, 21 Sep 2011 15:26:07 +0000"  >&lt;p&gt;There are no solution out there. Maybe fix for 1.4.x can be unnecessary, but the same fix for 1.5 doesn&apos;t work...&lt;/p&gt;</comment>
                            <comment id="13173182" author="mgrigorov" created="Tue, 20 Dec 2011 13:29:08 +0000"  >&lt;p&gt;Fixed with the usage of JQuery to replace the DOM.&lt;br/&gt;
Tested with Opera 11.60 on Ubuntu.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486323" name="testcase-WICKET-3669-second.tar.gz" size="8265" author="mschayna" created="Wed, 13 Jul 2011 15:33:39 +0000"/>
                            <attachment id="12478262" name="testcase-WICKET-3669.tar.gz" size="7821" author="mschayna" created="Thu, 5 May 2011 10:37:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kabz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>