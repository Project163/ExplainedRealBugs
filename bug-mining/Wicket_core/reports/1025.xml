<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5546] Adding behavior in component instantiation listener causes Page.onInitialize() being called even if constructor throws an exception</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5546</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Page.onInitialize() will be called even if constructor throws an exception&lt;br/&gt;
in case below code is added in wicket WebApplication.init():&lt;br/&gt;
getComponentInstantiationListeners().add(new IComponentInstantiationListener() {&lt;br/&gt;
              @Override&lt;br/&gt;
              public void onInstantiation(Component component) {&lt;br/&gt;
                  component.add(new Behavior() {&lt;/p&gt;

&lt;p&gt;                  });&lt;br/&gt;
              }&lt;/p&gt;

&lt;p&gt;          });&lt;/p&gt;

&lt;p&gt;It seems that the instantiation listener adds the behavior to the page at very start of the page constructor, and then the page is marked as dirty to cause onInitialize() being called afterwards.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12704206">WICKET-5546</key>
            <summary>Adding behavior in component instantiation listener causes Page.onInitialize() being called even if constructor throws an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="robinshine">Robin Shine</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Mar 2014 09:20:01 +0000</created>
                <updated>Fri, 4 Apr 2014 06:26:51 +0000</updated>
                            <resolved>Fri, 4 Apr 2014 06:26:50 +0000</resolved>
                                    <version>6.13.0</version>
                    <version>6.14.0</version>
                                    <fixVersion>7.0.0-M1</fixVersion>
                    <fixVersion>6.15.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13950526" author="robinshine" created="Fri, 28 Mar 2014 09:22:59 +0000"  >&lt;p&gt;To reproduce the issue, extract attached file to a directory, and run &quot;mvn jetty:run&quot; inside extracted directory. Then visit &lt;a href=&quot;http://localhost:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080&lt;/a&gt;. The page will throw an exception in constructor intentionally. Now check the console the &quot;onInitialize&quot; text will be printed indicating that Page.onInitialize has been called.&lt;/p&gt;</comment>
                            <comment id="13950528" author="robinshine" created="Fri, 28 Mar 2014 09:24:45 +0000"  >&lt;p&gt;This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5387&quot; title=&quot;Page#onInitialize called after an exception in the constructor of Page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5387&quot;&gt;&lt;del&gt;WICKET-5387&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13951819" author="svenmeier" created="Sat, 29 Mar 2014 09:47:13 +0000"  >&lt;p&gt;Interestingly adding a behavior in the page&apos;s constructor does not expose this issue.&lt;/p&gt;

&lt;p&gt;Reason:&lt;br/&gt;
Page&apos;s constructor calls #init(), which calls dirty(true). This leads to the page being marked dirty &lt;b&gt;without&lt;/b&gt; calling pageManager#touchPage()&lt;br/&gt;
If a behavior is added afterwards, the page is already marked dirty.&lt;/p&gt;

&lt;p&gt;But if the behavior is added from an instantiationListener, the constructor and #init() has not been called yet - thus the page is marked dirty &lt;b&gt;and&lt;/b&gt; touched :/.&lt;/p&gt;</comment>
                            <comment id="13951875" author="svenmeier" created="Sat, 29 Mar 2014 12:43:24 +0000"  >&lt;p&gt;Possible solution:&lt;/p&gt;

&lt;p&gt;allow Page to #init() before doing anything else.&lt;/p&gt;</comment>
                            <comment id="13958641" author="mgrigorov" created="Thu, 3 Apr 2014 08:49:39 +0000"  >&lt;p&gt;The patch looks OK to me.&lt;/p&gt;</comment>
                            <comment id="13959683" author="svenmeier" created="Fri, 4 Apr 2014 06:26:51 +0000"  >&lt;p&gt;Page&apos;s #init() is called first now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12637625" name="WICKET-5546.patch" size="1329" author="svenmeier" created="Sat, 29 Mar 2014 12:43:24 +0000"/>
                            <attachment id="12637619" name="WICKET-5546.zip" size="22543" author="svenmeier" created="Sat, 29 Mar 2014 09:47:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1twl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>