<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6630] FileUpload.writeToTempFile() fails with commons-fileupload 1.4</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6630</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&lt;/p&gt;

&lt;p&gt;As of commons-fileupload 1.4, writing the uploaded file to a temp file with &lt;tt&gt;fileUpload.writeToTempFile()&lt;/tt&gt; fails with the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.io.FileExistsException: Destination &apos;/var/folders/4y/_1z4yp3d7jv553km1yqc5v2r0000gn/T/null_15476330054763883202739767876103field&apos; already exists
at org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2986)
at org.apache.commons.fileupload.disk.DiskFileItem.write(DiskFileItem.java:405)
at org.apache.wicket.markup.html.form.upload.FileUload.wripteTo(FileUpload.java:234)
at org.apache.wicket.markup.html.form.upload.FileUpload.writeToTempFile(FileUpload.java:254)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This only happens when the file is larger than the size threshold of 10 kB (by default). In that case the uploaded content is already in a temp file and will be moved to the newly created temp file. Commons-fileupload 1.3.3 used &lt;tt&gt;File.rename()&lt;/tt&gt; for this; in 1.4 the implementation has been changed to &lt;tt&gt;FileUtils.moveFile()&lt;/tt&gt;, which does not allow the destination to be present.&lt;/p&gt;

&lt;p&gt;To be functionally compatible with the old situation, &lt;tt&gt;FileUload.writeTo()&lt;/tt&gt; should delete the provided file, if present, before writing.&lt;/p&gt;

&lt;p&gt;See the provided test case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13209906">WICKET-6630</key>
            <summary>FileUpload.writeToTempFile() fails with commons-fileupload 1.4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="laurenshop">Laurens Hop</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jan 2019 13:41:05 +0000</created>
                <updated>Thu, 17 Jan 2019 12:30:23 +0000</updated>
                            <resolved>Thu, 17 Jan 2019 12:30:23 +0000</resolved>
                                    <version>8.2.0</version>
                    <version>8.3.0</version>
                                    <fixVersion>8.3.0</fixVersion>
                    <fixVersion>9.0.0-M1</fixVersion>
                    <fixVersion>7.12.0</fixVersion>
                                    <component>wicket-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16744210" author="laurenshop" created="Wed, 16 Jan 2019 16:15:28 +0000"  >&lt;p&gt;Provided a testcase for 8.3-SNAPSHOT (&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12955112/12955112_uploadtest-8.3-SNAPSHOT.zip&quot; title=&quot;uploadtest-8.3-SNAPSHOT.zip attached to WICKET-6630&quot;&gt;uploadtest-8.3-SNAPSHOT.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;) and a PR with a possible solution (&lt;a href=&quot;https://github.com/apache/wicket/pull/346&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/346&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16744977" author="jira-bot" created="Thu, 17 Jan 2019 12:19:58 +0000"  >&lt;p&gt;Commit d66a7c361f726ee43d249145329fbe986c02d7d9 in wicket&apos;s branch refs/heads/wicket-8.x from Laurens Hop&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=d66a7c3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=d66a7c3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;As of commons-fileupload 1.4, FileUtils.moveFile() is used to write the uploaded contents to the provided file. This implementation does not allow the destination to be present.&lt;/p&gt;</comment>
                            <comment id="16744978" author="jira-bot" created="Thu, 17 Jan 2019 12:19:59 +0000"  >&lt;p&gt;Commit 8e170dce9ae76cac91de1b1bd05d3e839bde179e in wicket&apos;s branch refs/heads/wicket-8.x from Martin Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=8e170dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=8e170dc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #346 from laurenshop/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;</comment>
                            <comment id="16744979" author="jira-bot" created="Thu, 17 Jan 2019 12:19:59 +0000"  >&lt;p&gt;Commit 8e170dce9ae76cac91de1b1bd05d3e839bde179e in wicket&apos;s branch refs/heads/wicket-8.x from Martin Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=8e170dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=8e170dc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #346 from laurenshop/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;</comment>
                            <comment id="16744984" author="jira-bot" created="Thu, 17 Jan 2019 12:23:52 +0000"  >&lt;p&gt;Commit cd7b54e7aad062a18fb9cd7723668e178f28e1cb in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=cd7b54e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=cd7b54e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;Use wicket-util Files to remove the file. It checks whether it is an existing file and retries on error&lt;/p&gt;</comment>
                            <comment id="16744985" author="jira-bot" created="Thu, 17 Jan 2019 12:24:53 +0000"  >&lt;p&gt;Commit bbabd992795dfb143b9f376e455dfcb7743a99ac in wicket&apos;s branch refs/heads/master from Laurens Hop&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=bbabd99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=bbabd99&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;As of commons-fileupload 1.4, FileUtils.moveFile() is used to write the uploaded contents to the provided file. This implementation does not allow the destination to be present.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d66a7c361f726ee43d249145329fbe986c02d7d9)&lt;/p&gt;</comment>
                            <comment id="16744986" author="jira-bot" created="Thu, 17 Jan 2019 12:24:54 +0000"  >&lt;p&gt;Commit a2386f00762824bbd572fcf264cf162a360a51c8 in wicket&apos;s branch refs/heads/master from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=a2386f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=a2386f0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;Use wicket-util Files to remove the file. It checks whether it is an existing file and retries on error&lt;/p&gt;

&lt;p&gt;(cherry picked from commit cd7b54e7aad062a18fb9cd7723668e178f28e1cb)&lt;/p&gt;</comment>
                            <comment id="16744988" author="jira-bot" created="Thu, 17 Jan 2019 12:25:26 +0000"  >&lt;p&gt;Commit 50e2ef20760b2cad542602245d8e613fd3503b44 in wicket&apos;s branch refs/heads/wicket-7.x from Laurens Hop&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=50e2ef2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=50e2ef2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;As of commons-fileupload 1.4, FileUtils.moveFile() is used to write the uploaded contents to the provided file. This implementation does not allow the destination to be present.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d66a7c361f726ee43d249145329fbe986c02d7d9)&lt;/p&gt;</comment>
                            <comment id="16744989" author="jira-bot" created="Thu, 17 Jan 2019 12:25:27 +0000"  >&lt;p&gt;Commit 03082b53736f0089d3ab0b073ab0b88d09ddb646 in wicket&apos;s branch refs/heads/wicket-7.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=03082b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=03082b5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6630&quot; title=&quot;FileUpload.writeToTempFile() fails with commons-fileupload 1.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6630&quot;&gt;&lt;del&gt;WICKET-6630&lt;/del&gt;&lt;/a&gt; Delete (temp) file before writing to it&lt;/p&gt;

&lt;p&gt;Use wicket-util Files to remove the file. It checks whether it is an existing file and retries on error&lt;/p&gt;

&lt;p&gt;(cherry picked from commit cd7b54e7aad062a18fb9cd7723668e178f28e1cb)&lt;/p&gt;</comment>
                            <comment id="16744993" author="mgrigorov" created="Thu, 17 Jan 2019 12:30:23 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=laurenshop&quot; class=&quot;user-hover&quot; rel=&quot;laurenshop&quot;&gt;laurenshop&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12955112" name="uploadtest-8.3-SNAPSHOT.zip" size="10353" author="laurenshop" created="Wed, 16 Jan 2019 16:13:36 +0000"/>
                            <attachment id="12955096" name="uploadtest.zip" size="10396" author="laurenshop" created="Wed, 16 Jan 2019 13:40:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|y002k0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>