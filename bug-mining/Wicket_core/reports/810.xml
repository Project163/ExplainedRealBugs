<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5082] Ajax update renders parent/child JS in different order than initial Page render</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5082</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;See attached quickstart.  On initial page load, the child Javascripts are rendered and executed first, followed by the parent&apos;s JS - in this case a Datatables.net JS. Everything works fine.&lt;/p&gt;

&lt;p&gt;However, if you click on a link in the DefaultDataTable, we trigger a DDT refresh via Ajax, and then you can see that the parent&apos;s JS is executed first, before the child JS - this causes a problem since the parent JS modifies the visible rows in the table and Wicket can no longer find some of the child rows.&lt;/p&gt;

&lt;p&gt;I expected the order of JS contributions to be the same for initial page render and any Ajax updates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635631">WICKET-5082</key>
            <summary>Ajax update renders parent/child JS in different order than initial Page render</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="nickpratt">Nick Pratt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Mar 2013 18:46:15 +0000</created>
                <updated>Thu, 7 Mar 2013 19:44:28 +0000</updated>
                            <resolved>Thu, 7 Mar 2013 19:44:28 +0000</resolved>
                                    <version>6.6.0</version>
                                    <fixVersion>6.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13595022" author="nickpratt" created="Wed, 6 Mar 2013 19:38:24 +0000"  >&lt;p&gt;So normal page rendering uses a ChildFirstHeaderRenderStrategy (since 1.5), but the Ajax header writing doesnt seem to follow that strategy and writes parent first then children (AbstractAjaxResponse.writeHeaderContribution() )is there a reason we couldnt render both normal and ajax updates with the same order?&lt;/p&gt;</comment>
                            <comment id="13595076" author="nickpratt" created="Wed, 6 Mar 2013 20:39:02 +0000"  >&lt;p&gt;I dug around, and here&apos;s what&apos;s happening:&lt;br/&gt;
In normal rendering, all the items go in to the on dom ready, all appended to the same list in the Response.  In an Ajax response, the Wicket added JS for the click handlers get stored in the response.appendJavaScripts, and then, even though the parent was visited last (I replaced the AbstractAjaxResponse.writeHeaderContributor with the same code from ChildFirstHeaderRenderStrategy), the parent&apos;s JS was going in to the domReadyJavaScripts - which ultimately are added to the page before the child JS (stored in appendJavaScripts).&lt;/p&gt;

&lt;p&gt;While I have a workaround (an explicit check to see if we are in an AjaxRequest, and then adding to the appendJavaScripts in that case, and the modification of the wicket-core AbstractAjaxResponse to do a ChildFirst traverse), it seems a bit of a hack - I think the order of rendering and JS appends should be the same in both the non-Ajax and Ajax cases.&lt;/p&gt;

&lt;p&gt;See attached patch file for changes needed in AbstractAjaxResponse in order to allow the workaround to work - without this change, I dont see a workaround.&lt;/p&gt;</comment>
                            <comment id="13595187" author="svenmeier" created="Wed, 6 Mar 2013 22:19:37 +0000"  >&lt;p&gt;Could you try wicket-5082.patch :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it reuses the current IHeaderRenderStrategy to get the same ordering as on non-ajax request&lt;/li&gt;
	&lt;li&gt;It changes AjaxEventBehavior to always render an OnDomReadyHeaderItem, the destinction betwenn Ajax and non-Ajax is superfluous actually.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Note that there are unit test failing with this change though.&lt;/p&gt;</comment>
                            <comment id="13595320" author="nickpratt" created="Thu, 7 Mar 2013 00:08:12 +0000"  >&lt;p&gt;Thanks Sven - your patch is simpler and works in my test cases and my application.  I noticed the two new tests failing - domReadyOrder and domReadyOrder2, although I dont know if the expected values are meaningful beyond just being a base for a string comparison.&lt;/p&gt;</comment>
                            <comment id="13596267" author="svenmeier" created="Thu, 7 Mar 2013 19:44:28 +0000"  >&lt;p&gt;The JavaScript ordering should now be consistent.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12572395" name="Change_order_of_Ajax_child_visitation.patch" size="3835" author="nickpratt" created="Wed, 6 Mar 2013 21:05:45 +0000"/>
                            <attachment id="12572365" name="quickstart.tar.gz" size="97483" author="nickpratt" created="Wed, 6 Mar 2013 18:46:55 +0000"/>
                            <attachment id="12572414" name="wicket-5082.patch" size="3711" author="svenmeier" created="Wed, 6 Mar 2013 22:19:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ijsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>