<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4290] Confusion between a form component&apos;s wicket:id and a PageParameter in Wicket 1.5.x</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4290</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;A Form has a strange behavior when a component has the same wicket:id than a page parameter.&lt;/p&gt;

&lt;p&gt;To create a Bookmarkable link after a form is submited, setResponsePage is called, and a PageParameter object is given as a parameter : &lt;br/&gt;
			PageParameters params = new PageParameters();&lt;br/&gt;
			params.add(&quot;searchString&quot;, searchField.getValue());&lt;br/&gt;
			setResponsePage(SomePage.class, params);&lt;/p&gt;

&lt;p&gt;In Wicket 1.5, if &quot;searchString&quot; is also a form-component&apos;s wicket:id, the form will only be submitted once : &lt;br/&gt;
searchField.getValue() will always return the first value entered by the user.&lt;/p&gt;


&lt;p&gt;Here&apos;s an example : &lt;/p&gt;

&lt;p&gt;public class SearchPanel extends Panel {&lt;/p&gt;

&lt;p&gt;	public SearchPanel(String id) &lt;/p&gt;
{
		super(id);
		add(new SearchForm(&quot;searchForm&quot;));
	}

&lt;p&gt;	private class SearchForm extends Form&amp;lt;String&amp;gt; {&lt;/p&gt;

&lt;p&gt;		private static final long serialVersionUID = 1L;&lt;br/&gt;
		private TextField&amp;lt;String&amp;gt; searchField;&lt;/p&gt;

&lt;p&gt;		public SearchForm(String id) &lt;/p&gt;
{
			super(id);
			searchField = new TextField&amp;lt;String&amp;gt;(&quot;searchString&quot;, new Model&amp;lt;String&amp;gt;(&quot;&quot;));
			add(searchField);
		}

&lt;p&gt;		@Override&lt;br/&gt;
		public void onSubmit() &lt;/p&gt;
{
			PageParameters params = new PageParameters();
			params.add(&quot;searchString&quot;, searchField.getValue());
			setResponsePage(ListContactsPage.class, params);
		}
&lt;p&gt;	}&lt;br/&gt;
}&lt;/p&gt;


&lt;p&gt;I tested the same application with Wicket 1.4.17 and it was fine. I only had this problem in Wicket 1.5.2 and 1.5.3.&lt;/p&gt;</description>
                <environment>OS Linux Mint&lt;br/&gt;
Java 1.6</environment>
        <key id="12534810">WICKET-4290</key>
            <summary>Confusion between a form component&apos;s wicket:id and a PageParameter in Wicket 1.5.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="papegaaij">Emond Papegaaij</assignee>
                                    <reporter username="vmontaner">Victor MONTANER</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2011 17:19:39 +0000</created>
                <updated>Wed, 4 Jan 2012 19:07:07 +0000</updated>
                            <resolved>Wed, 4 Jan 2012 19:07:07 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.5.1</version>
                    <version>1.5.2</version>
                    <version>1.5.3</version>
                                    <fixVersion>1.5.4</fixVersion>
                    <fixVersion>6.0.0-beta1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13167616" author="mgrigorov" created="Mon, 12 Dec 2011 17:51:29 +0000"  >&lt;p&gt;Put the example in a quickstart application, please.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13168146" author="svenmeier" created="Tue, 13 Dec 2011 05:47:52 +0000"  >&lt;p&gt;page parameter is rendered in form action&lt;/p&gt;</comment>
                            <comment id="13168409" author="vmontaner" created="Tue, 13 Dec 2011 14:32:33 +0000"  >&lt;p&gt;I just attached a simple, mavenized web project : Zencontact.tar.gz&lt;/p&gt;

&lt;p&gt;I just noticed something : the bug only appears in the home page. &lt;br/&gt;
If you change getHomePage (in the WebApplication class), to return HomePage.class, the problem will not appear. &lt;/p&gt;</comment>
                            <comment id="13177237" author="papegaaij" created="Thu, 29 Dec 2011 16:02:13 +0000"  >&lt;p&gt;The problem is that Form removes the page parameters from the page that is processing the incoming request and then renders a new page using the original page parameters. This causes the request parameters to be rendered in the action url of the form.&lt;/p&gt;

&lt;p&gt;This patch moves the code responsible for removing the conflicting page parameters to onBeforeRender. However, it loses some code that was added for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3438&quot; title=&quot;2xStatelessForm growing url when there is error validation &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3438&quot;&gt;&lt;del&gt;WICKET-3438&lt;/del&gt;&lt;/a&gt; (commented lines in the patch). The quickstart that comes with that bug still works correctly though.&lt;/p&gt;</comment>
                            <comment id="13178327" author="mgrigorov" created="Mon, 2 Jan 2012 09:07:44 +0000"  >&lt;p&gt;I think the problem lies somewhere else.&lt;br/&gt;
org.apache.wicket.Component#urlFor(RequestListenerInterface) and org.apache.wicket.Component#urlFor(Behavior, RequestListenerInterface) pass PageProvider with a Page instance to IRequestMapper and this way page&apos;s parameters are encoded in the url.&lt;br/&gt;
Page&apos;s parameters are the parameters in the request when the page is constructed. They are available in any version of the page lifecycle with page.getPageParameters(). I think they shouldn&apos;t be encoded in every Link&apos;s href, or Form&apos;s action, ...&lt;/p&gt;

&lt;p&gt;I think we should change the API for the two methods above to accept PageParameters explicitly. This way the user can decide what parameter to encode in the url.&lt;/p&gt;

&lt;p&gt;In 1.5 the old methods will delegate to the new version and will be deprecated. In 6.0 change the API.&lt;/p&gt;</comment>
                            <comment id="13178656" author="papegaaij" created="Tue, 3 Jan 2012 07:51:44 +0000"  >&lt;p&gt;Patch that tries to fix this issue as described by Martin&lt;/p&gt;</comment>
                            <comment id="13179762" author="papegaaij" created="Wed, 4 Jan 2012 19:07:07 +0000"  >&lt;p&gt;A slightly modified version of the patch is applied. PageParameters are no longer rendered in urls for stateful components. StatelessForm and StatelessLink do add the parameters.&lt;/p&gt;

&lt;p&gt;In Wicket 6.0, the old urlFor methods are removed from Component. In 1.5.x they stay, but marked deprecated. Wicket itself no longer uses them.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12534734">WICKET-4287</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12509179" name="0001-WICKET-4290-Do-not-render-page-parameters-for-statef.patch" size="24171" author="papegaaij" created="Tue, 3 Jan 2012 07:51:43 +0000"/>
                            <attachment id="12508852" name="0001-WICKET-4290-remove-page-parameters-in-onBeforeRender.patch" size="19995" author="papegaaij" created="Thu, 29 Dec 2011 16:02:13 +0000"/>
                            <attachment id="12507186" name="Zencontact.tar.gz" size="25561" author="vmontaner" created="Tue, 13 Dec 2011 14:30:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00w8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>