<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4954] Issue with file upload with progress bar via AJAX and Firefox</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4954</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Firefox has a strange problem when used with a form that is set to multipart/form-data&#8206; and submitted via AJAX. It seems like it&apos;s still waiting for the response to finish even after the AJAX response has terminated.&lt;br/&gt;
You can see this issue in the example here: &lt;a href=&quot;http://www.wicket-library.com/wicket-examples-6.0.x/ajax/upload?0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.wicket-library.com/wicket-examples-6.0.x/ajax/upload?0&lt;/a&gt;.&lt;br/&gt;
The upload works fine but after it has completed Firefox displays the &quot;Stop&quot; button instad of &quot;Reload&quot;. Moreover, if you try to upload a file bigger then the limit (1 M), the upload bar enters into a loop where it continues to read the upload status.&lt;br/&gt;
Everything works fine with Chrome.&lt;/p&gt;</description>
                <environment>Firefox 17.0.1</environment>
        <key id="12626356">WICKET-4954</key>
            <summary>Issue with file upload with progress bar via AJAX and Firefox</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="bitstorm">Andrea Del Bene</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jan 2013 14:50:47 +0000</created>
                <updated>Tue, 8 Jan 2013 14:13:07 +0000</updated>
                            <resolved>Tue, 8 Jan 2013 14:13:07 +0000</resolved>
                                                    <fixVersion>6.5.0</fixVersion>
                    <fixVersion>1.5.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13545935" author="bitstorm" created="Mon, 7 Jan 2013 14:57:52 +0000"  >&lt;p&gt;Some additional informations:&lt;br/&gt;
-the issue is not present with version 1.5.x&lt;br/&gt;
-to reproduce the issue you just need to set your form to multipart and submit it via AJAX. No file upload is required.&lt;/p&gt;</comment>
                            <comment id="13545953" author="mgrigorov" created="Mon, 7 Jan 2013 15:15:20 +0000"  >&lt;p&gt;I think the problem is related to ProgressBar. Firebug shows that GET requests to the UploadProgressBar resource are keep done. All of them at 0%.&lt;/p&gt;</comment>
                            <comment id="13546753" author="bitstorm" created="Tue, 8 Jan 2013 10:20:12 +0000"  >&lt;p&gt;Ok, now I&apos;ve got the whole picture. The problem with progress bar can be solved handling FileUploadException inside MultipartServletWebRequestImpl.java:&lt;/p&gt;

&lt;p&gt;try&lt;/p&gt;
   {
    items = fileUpload.parseRequest(ctx);
  }
&lt;p&gt; catch (FileUploadException e)&lt;/p&gt;
 {
 throw e;
 }
&lt;p&gt;finally&lt;br/&gt;
{&lt;br/&gt;
 onUploadCompleted();&lt;br/&gt;
}&lt;/p&gt;


&lt;p&gt;but I still have a problem with Firefox. If I try to upload a huge file it keeps ajax channel busy and I can&apos;t upload any other file.&lt;/p&gt;</comment>
                            <comment id="13546769" author="mgrigorov" created="Tue, 8 Jan 2013 10:35:28 +0000"  >&lt;p&gt;This is how Ajax upload works - it uses XmlHttpRequest to make a request to an iframe.&lt;br/&gt;
This XHR will keep the channel busy until it is closed, i.e. the upload finishes.&lt;br/&gt;
And unfortunately the web container consumes the whole body of the file upload. We cannot tell it to stop when we see that the file size is too big.&lt;/p&gt;

&lt;p&gt;About the Ajax channel - we can add a new type, ALWAYS, that will fire a new Ajax call no matter what. But it will only work when you use file upload based on IResource (&lt;a href=&quot;http://wicketinaction.com/2012/11/uploading-files-to-wicket-iresource/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wicketinaction.com/2012/11/uploading-files-to-wicket-iresource/&lt;/a&gt;) because otherwise the second request will hit the server side synchronization on the page instance.&lt;/p&gt;</comment>
                            <comment id="13546855" author="bitstorm" created="Tue, 8 Jan 2013 13:08:06 +0000"  >&lt;p&gt;IMHO it&apos;s not worthwhile to implement a new channel type. I&apos;d rather implement a solution for HTML5 which allows to know the file size before starting the upload.&lt;br/&gt;
I&apos;ve attached the patch for the progress bar.&lt;/p&gt;</comment>
                            <comment id="13546861" author="mgrigorov" created="Tue, 8 Jan 2013 13:12:09 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://github.com/wicketstuff/core/tree/master/jdk-1.6-parent/wicket-html5-parent/wicket-html5/src/main/java/org/wicketstuff/html5/fileapi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wicketstuff/core/tree/master/jdk-1.6-parent/wicket-html5-parent/wicket-html5/src/main/java/org/wicketstuff/html5/fileapi&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13546870" author="mgrigorov" created="Tue, 8 Jan 2013 13:16:35 +0000"  >&lt;p&gt;The patch is applied to 6.x and 1.5.x.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;Is there anything else we need to do in this ticket ?&lt;/p&gt;</comment>
                            <comment id="13546893" author="bitstorm" created="Tue, 8 Jan 2013 13:51:25 +0000"  >&lt;p&gt;no, I think it&apos;s ok, thank you&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12563748" name="WICKET-4954.patch" size="824" author="bitstorm" created="Tue, 8 Jan 2013 13:08:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i176pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250055</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>