<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5790] VariableInterpolator &amp; #getThrowExceptionOnMissingResource</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5790</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;This ticket is a 2 in 1 issue:&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;%23getThrowExceptionOnMissingResource%28%29isgivenasVariableInterpolatorctorarg.&quot;&gt;&lt;/a&gt;#getThrowExceptionOnMissingResource() is given as VariableInterpolator ctor arg.&lt;/h4&gt;

&lt;p&gt;When you want to raise a validation error like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            ValidationError error = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ValidationError();
            error.addKey(&lt;span class=&quot;code-quote&quot;&gt;&quot;MyComponent.ConversionError&quot;&lt;/span&gt;);
            error.setVariable(&lt;span class=&quot;code-quote&quot;&gt;&quot;myvar&quot;&lt;/span&gt;, myvalue);

            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.error(error);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A call is made to FormComponent.MessageSource.substitute which returns &lt;tt&gt;new VariableInterpolator(...).toString()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The second arg to VariableInterpolator is meant for &quot;exceptionOnNullVarValue&quot; but what is supplied in #substitute() is &lt;tt&gt;Application.get().getResourceSettings().getThrowExceptionOnMissingResource().&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;That&apos;s where it looks strange because #getThrowExceptionOnMissingResource() represents a flag about missing resources (like &lt;em&gt;MyComponent.properties&lt;/em&gt;) and has nothing related to null values in my understanding.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;%24isnotreplacedincaseofnullvalue%28andnullisallowed%29&quot;&gt;&lt;/a&gt;${var} is not replaced in case of null value (and null is allowed)&lt;/h4&gt;
&lt;p&gt;In the previous example, if &lt;b&gt;#getThrowExceptionOnMissingResource()&lt;/b&gt; return &lt;b&gt;false&lt;/b&gt; (meaning &lt;b&gt;exceptionOnNullVarValue&lt;/b&gt; is &lt;b&gt;false&lt;/b&gt;) and &lt;b&gt;myvalue&lt;/b&gt; is &lt;b&gt;null&lt;/b&gt;, the validation error message gives something of the form &quot;value of myvar: ${myvar}&quot; instead of &quot;value of myvar: null&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12762543">WICKET-5790</key>
            <summary>VariableInterpolator &amp; #getThrowExceptionOnMissingResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bitstorm">Andrea Del Bene</assignee>
                                    <reporter username="sebfz1">Sebastien Briquet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Dec 2014 12:06:32 +0000</created>
                <updated>Sat, 7 Feb 2015 17:08:41 +0000</updated>
                            <resolved>Sat, 7 Feb 2015 15:28:54 +0000</resolved>
                                    <version>6.18.0</version>
                    <version>7.0.0-M4</version>
                                    <fixVersion>6.20.0</fixVersion>
                    <fixVersion>7.0.0-M6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14251576" author="sebfz1" created="Thu, 18 Dec 2014 12:08:03 +0000"  >&lt;p&gt;Attached quickstart&lt;/p&gt;</comment>
                            <comment id="14251610" author="sebfz1" created="Thu, 18 Dec 2014 12:52:54 +0000"  >&lt;p&gt;About point 2/ (variable patten not replaced). It seems to have been done intentionally in VariableInterpolator&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/wicket/blob/master/wicket-util/src/main/java/org/apache/wicket/util/string/interpolator/VariableInterpolator.java#L163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/blob/master/wicket-util/src/main/java/org/apache/wicket/util/string/interpolator/VariableInterpolator.java#L163&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But, as #substitute is private and there is no factory method for creating the VariableInterpolator, I think we can change in #substitute&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java#L218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/markup/html/form/FormComponent.java#L218&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
{
	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
{
	&lt;span class=&quot;code-comment&quot;&gt;// small optimization - no need to bother with conversion
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; vars, e.g. {label}
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)value;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;by&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || value &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
{
	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(value);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14309036" author="bitstorm" created="Fri, 6 Feb 2015 11:56:22 +0000"  >&lt;p&gt;Honestly I don&apos;t have any idea about point 1 :-/. But I agree with the proposed improvement for point 2.&lt;/p&gt;</comment>
                            <comment id="14310745" author="jira-bot" created="Sat, 7 Feb 2015 14:28:26 +0000"  >&lt;p&gt;Commit 1ddb483f0338b41f9b89909f167ce7cb463d2fc8 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1ddb483&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1ddb483&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5790&quot; title=&quot;VariableInterpolator &amp;amp; #getThrowExceptionOnMissingResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5790&quot;&gt;&lt;del&gt;WICKET-5790&lt;/del&gt;&lt;/a&gt; VariableInterpolator &amp;amp; #getThrowExceptionOnMissingResource&lt;/p&gt;</comment>
                            <comment id="14310774" author="jira-bot" created="Sat, 7 Feb 2015 15:28:19 +0000"  >&lt;p&gt;Commit 0f18f9340aafda92603193d77d9a865f3ff61f31 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0f18f93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0f18f93&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5790&quot; title=&quot;VariableInterpolator &amp;amp; #getThrowExceptionOnMissingResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5790&quot;&gt;&lt;del&gt;WICKET-5790&lt;/del&gt;&lt;/a&gt; VariableInterpolator &amp;amp; #getThrowExceptionOnMissingResource&lt;/p&gt;</comment>
                            <comment id="14310787" author="sebfz1" created="Sat, 7 Feb 2015 15:55:11 +0000"  >&lt;p&gt;Hi Andrea,&lt;/p&gt;

&lt;p&gt;Thank you very much for the fix. &lt;/p&gt;

&lt;p&gt;I saw you marked this ticket as resolved. Sorry to not have replied earlier but I have still some concerns about point 1/.&lt;br/&gt;
&quot;Missing Resource&quot; and &quot;null var value&quot; have different meaning to me.&lt;br/&gt;
But I would see 2 (or 3) ways of solving this, either:&lt;/p&gt;

&lt;p&gt;a/ Adding a new ResourceSettings properties that will replace #getThrowExceptionOnMissingResource call in VariableInterpolator call (something like getThrowExceptionOnNullVarValue)&lt;br/&gt;
b/ Having a factory method: FormComponent#newVariableInterpolator(String string, boolean throwExceptionOnMissingResource). This way the user can override it to call super just changing the boolean value&lt;br/&gt;
c/ A mix of a/ and b/, giving FormComponent#newVariableInterpolator(String string, boolean throwExceptionOnNullVarValue). But maybe is it a little bit overkill...&lt;/p&gt;

&lt;p&gt;The cons of a/ is that it might induce a silent api break, except if default value returns #getThrowExceptionOnMissingResource. Furthermore adding a new ResourceSettings properties leads to a little bit more of complicity in term of settings configuration, and finally we should ensure that it is used where it is suppose to be (I&apos;ve quickly checked and I do not see other potential usage other than VariableInterpolator call yet)&lt;/p&gt;

&lt;p&gt;My 2 cents! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; best regards,&lt;br/&gt;
Sebastien&lt;/p&gt;
</comment>
                            <comment id="14310797" author="bitstorm" created="Sat, 7 Feb 2015 16:28:01 +0000"  >&lt;p&gt;You&apos;re welcome!&lt;/p&gt;

&lt;p&gt;IMHO the best solution would be a/. This would solve any ambiguity with API methods name. Strictly speaking introducing a new setting flag is not an API break for Wicket 7 as it doesn&apos;t cause any compilation problem for code written before this change. On the contrary this is not acceptable for 6.x as it uses an interface for settings (IResourceSettings). Personally I would apply a/ to 7 and leave 6.x as it is, but we&apos;d better ask dev list for more opinions.   &lt;/p&gt;</comment>
                            <comment id="14310820" author="sebfz1" created="Sat, 7 Feb 2015 17:08:41 +0000"  >&lt;p&gt;Hi Andrea,&lt;/p&gt;

&lt;p&gt;&amp;gt; Strictly speaking introducing a new setting flag is not an API break for Wicket 7 as it doesn&apos;t cause any compilation problem&lt;/p&gt;

&lt;p&gt;Right, that&apos;s the reason why I call this a &quot;silent api break&quot;: it does not cause any compilation problem but it silently breaks the functionality. (in this case, except if #getThrowExceptionOnMissingResource is returned as a default value, to be discussed). It was just to be clear on the semantic (a quick Google search indicates that this term seems to be widely used.... by 3 or 4 people in the world!.. :s)&lt;/p&gt;

&lt;p&gt;I agree with you for opting for a/. That&apos;s the cleanest way IMHO... I will vote in that sense.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; talk to you soon,&lt;br/&gt;
Sebastien&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12688021" name="WICKET-5790.zip" size="28369" author="sebfz1" created="Thu, 18 Dec 2014 12:08:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23kj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>