<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6340] The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6340</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;My web pages are delivered as XHTML5 (&lt;tt&gt;response.setContentType(&quot;application/xhtml+xml&quot;);&lt;/tt&gt;). When I add a multipart form and submit a file, I get strange JavaScript errors about invalid or illegal strings.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Wicket.Ajax:  An error occurred while executing Ajax request:SyntaxError: An invalid or illegal string was specified &lt;br/&gt;
XML Parsing Error: mismatched tag. Expected: &amp;lt;/iframe&amp;gt;.&lt;br/&gt;
Address: &lt;br/&gt;
Row Nr. 1, Column 202:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I found out that Wicket&#8217;s Ajax code is responsible for those problems.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;wicket-ajax-jquery.js, row 70&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;createIFrame = function (iframeName) {
  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; $iframe = jQuery(&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;iframe name=&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;+iframeName+&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; id=&quot;&apos;&lt;/span&gt;+iframeName+
    &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-quote&quot;&gt;&quot; src=&quot;&lt;/span&gt;about:blank&lt;span class=&quot;code-quote&quot;&gt;&quot; style=&quot;&lt;/span&gt;position: absolute; top: -9999px; left: -9999px;&quot;&amp;gt;&apos;&lt;/span&gt;);
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; $iframe[0];
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The iframe tag isn&#8217;t closed. This is fine for HTML5, but not for XHTML5.&lt;/p&gt;

&lt;p&gt;I have attached a quite minimal Wicket project were the problems can be examined:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mkdir wicket-ajax-jquery-iframe
mv wicket-ajax-jquery-iframe.zip wicket-ajax-jquery-iframe
cd wicket-ajax-jquery-iframe
unzip wicket-ajax-jquery-iframe.zip
mvn &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
mvn jetty:run-war
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open your browser&#8217;s console and upload any file on localhost:8080.&lt;/p&gt;

&lt;p&gt;A patch which fixes this issued is attached. Thanks for your help.&lt;/p&gt;</description>
                <environment>Jetty 9, Fedora 25</environment>
        <key id="13057054">WICKET-6340</key>
            <summary>The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="mhusar">Marcus</reporter>
                        <labels>
                            <label>patch</label>
                            <label>triaged</label>
                    </labels>
                <created>Fri, 17 Mar 2017 16:09:05 +0000</created>
                <updated>Tue, 21 Mar 2017 22:23:58 +0000</updated>
                            <resolved>Fri, 17 Mar 2017 20:37:42 +0000</resolved>
                                    <version>7.6.0</version>
                    <version>6.26.0</version>
                                    <fixVersion>6.27.0</fixVersion>
                    <fixVersion>7.7.0</fixVersion>
                    <fixVersion>8.0.0-M5</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15930650" author="jira-bot" created="Fri, 17 Mar 2017 20:25:07 +0000"  >&lt;p&gt;Commit 1421ea2dc9207143cdadb735f3c79421674d924d in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1421ea2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1421ea2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15930652" author="jira-bot" created="Fri, 17 Mar 2017 20:25:24 +0000"  >&lt;p&gt;Commit 94b07c6c1070ea88bba0c269e2f5fe4d80ebea05 in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=94b07c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=94b07c6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15930672" author="svenmeier" created="Fri, 17 Mar 2017 20:34:12 +0000"  >&lt;p&gt;The problem shows up with content type &quot;application/xhtml+xml&quot; - a XHTML doctype in the markup is not enough to trigger it.&lt;/p&gt;

&lt;p&gt;Note: To change the content type it&apos;s easier to just override #getMarkupType() in your page:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MarkupType getMarkupType()
	{
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MarkupType(&lt;span class=&quot;code-quote&quot;&gt;&quot;html&quot;&lt;/span&gt;, MarkupType.XML_MIME);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15930676" author="jira-bot" created="Fri, 17 Mar 2017 20:35:27 +0000"  >&lt;p&gt;Commit 1b6ab749a79e9a921f50c296ab48a06cef43f3f1 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1b6ab74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1b6ab74&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15930681" author="svenmeier" created="Fri, 17 Mar 2017 20:37:42 +0000"  >&lt;p&gt;Generating the &amp;lt;iframe&amp;gt; is done XHTML conform now. Additionally I&apos;ve replaced &amp;nbsp; in wicket-ajax-debug with &amp;#160; since these lead to further errors on the console.&lt;/p&gt;</comment>
                            <comment id="15932972" author="jira-bot" created="Mon, 20 Mar 2017 16:28:40 +0000"  >&lt;p&gt;Commit 7f646712c9b1c0ca5817d7a3a4badec1da087a22 in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6286&quot; title=&quot;Would be good to have AjaxDownload available out of the box &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6286&quot;&gt;&lt;del&gt;WICKET-6286&lt;/del&gt;&lt;/a&gt;-ajax-download from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7f64671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7f64671&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6286&quot; title=&quot;Would be good to have AjaxDownload available out of the box &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6286&quot;&gt;&lt;del&gt;WICKET-6286&lt;/del&gt;&lt;/a&gt; Add support for success callback to &apos;NewWindow&apos; location&lt;/p&gt;

&lt;p&gt;Add &apos;onDownloadCompleted()&apos; callback that is executed after any success or failure callback. Like in jQuery - do something in all cases.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; Use XHTML friendly markup when creating the iframe&lt;/p&gt;</comment>
                            <comment id="15933541" author="jira-bot" created="Mon, 20 Mar 2017 20:59:05 +0000"  >&lt;p&gt;Commit 89e509f1992a4d5c8c2e8d7700106b2ff389ce6d in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=89e509f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=89e509f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15935261" author="jira-bot" created="Tue, 21 Mar 2017 20:27:49 +0000"  >&lt;p&gt;Commit 84d557ab14c4e06352d937f786b0d97b6194e187 in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=84d557a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=84d557a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15935263" author="jira-bot" created="Tue, 21 Mar 2017 20:28:04 +0000"  >&lt;p&gt;Commit fd6befd0201070bb024fbbb37595463ea22c9413 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fd6befd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fd6befd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; improve support for XHTML markup&lt;/p&gt;</comment>
                            <comment id="15935460" author="jira-bot" created="Tue, 21 Mar 2017 22:23:58 +0000"  >&lt;p&gt;Commit a7c01094b369c95316ee103f364f04f57cbba1ad in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a7c0109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a7c0109&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6286&quot; title=&quot;Would be good to have AjaxDownload available out of the box &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6286&quot;&gt;&lt;del&gt;WICKET-6286&lt;/del&gt;&lt;/a&gt; Add support for success callback to &apos;NewWindow&apos; location&lt;/p&gt;

&lt;p&gt;Add &apos;onDownloadCompleted()&apos; callback that is executed after any success or failure callback. Like in jQuery - do something in all cases.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6340&quot; title=&quot;The Ajax reponse of an AjaxSubmitButton creates invalid XHTML markup for multipart forms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6340&quot;&gt;&lt;del&gt;WICKET-6340&lt;/del&gt;&lt;/a&gt; Use XHTML friendly markup when creating the iframe&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12859312" name="wicket-ajax-jquery-iframe.zip" size="21936" author="mhusar" created="Fri, 17 Mar 2017 16:09:05 +0000"/>
                            <attachment id="12859313" name="wicket-ajax-jquery.patch" size="717" author="mhusar" created="Fri, 17 Mar 2017 16:09:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cfnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>