<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5284] Too deep recursion in AbstractHierarchyIterator</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5284</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In application we have code as follows:&lt;/p&gt;

&lt;p&gt;        MarkupContainer mc = ...;&lt;br/&gt;
        ComponentHierarchyIterator iter = mc.visitChildren(FormComponent.class);&lt;br/&gt;
        for (Component c : iter) &lt;/p&gt;
{
           ...
        }

&lt;p&gt;However, when run, on many pages this causes java.lang.StackOverflowError, with lots of the stacktrace filled with lines like this:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveUp(AbstractHierarchyIterator.java:302)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveUp(AbstractHierarchyIterator.java:302)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:259)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveDown(AbstractHierarchyIterator.java:170)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:236)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveUp(AbstractHierarchyIterator.java:297)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:259)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveDown(AbstractHierarchyIterator.java:170)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:236)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveDown(AbstractHierarchyIterator.java:170)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:236)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveDown(AbstractHierarchyIterator.java:170)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:236)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveDown(AbstractHierarchyIterator.java:170)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:236)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveUp(AbstractHierarchyIterator.java:297)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.moveUp(AbstractHierarchyIterator.java:302)&lt;br/&gt;
	org.apache.wicket.util.iterator.AbstractHierarchyIterator.nextNode(AbstractHierarchyIterator.java:259)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;It seems that the search for next component in the iteration produces too deep recursion here (not infinite, but too deep for processing a typical page with relatively lots of components) and I suspect that the length of the stack used by the iterator is proportional to the total number of components in the page.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659556">WICKET-5284</key>
            <summary>Too deep recursion in AbstractHierarchyIterator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mpl">Martin Petricek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jul 2013 12:39:43 +0000</created>
                <updated>Tue, 18 Mar 2014 13:00:24 +0000</updated>
                            <resolved>Tue, 18 Mar 2014 13:00:24 +0000</resolved>
                                    <version>6.9.1</version>
                                    <fixVersion>7.0.0-M1</fixVersion>
                    <fixVersion>6.15.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13718325" author="mgrigorov" created="Wed, 24 Jul 2013 12:44:26 +0000"  >&lt;p&gt;HierarchyIterator classes are kind of experimental.&lt;br/&gt;
They were supposed to replace the visitor based component tree traversal but haven&apos;t been tested well enough.&lt;/p&gt;

&lt;p&gt;Please provide a quickstart app that shows the problem and we will investigate the problem.&lt;br/&gt;
In the meantime you can use org.apache.wicket.MarkupContainer#visitChildren(IVisitor&amp;lt;Component, R&amp;gt; visitor) method.&lt;/p&gt;</comment>
                            <comment id="13722331" author="mgrigorov" created="Mon, 29 Jul 2013 10:28:56 +0000"  >&lt;p&gt;Did you try with MarkupContainer#visitChildren(IVisitor&amp;lt;Component, R&amp;gt; visitor) ?&lt;br/&gt;
Do you see the same problem with IVisitor with the same page where AbstractHierarchyIterator fails ?&lt;/p&gt;</comment>
                            <comment id="13723543" author="mpl" created="Tue, 30 Jul 2013 08:09:41 +0000"  >&lt;p&gt;I replaced the ComponentHierarchyIterator with this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mc.visitChildren(FormComponent.class, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IVisitor&amp;lt;FormComponent, FormComponent&amp;gt;() {
  @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void component(FormComponent c, IVisit&amp;lt;FormComponent&amp;gt; visit) {
    ...
    }
  });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and it works without crashing as expected. So the visitor based component traversal works fine.&lt;/p&gt;</comment>
                            <comment id="13723546" author="mgrigorov" created="Tue, 30 Jul 2013 08:11:21 +0000"  >&lt;p&gt;Thanks for confirming !&lt;/p&gt;</comment>
                            <comment id="13939151" author="mgrigorov" created="Tue, 18 Mar 2014 13:00:24 +0000"  >&lt;p&gt;Component hierarchy iterators have been marked deprecated and will be removed in Wicket 8.0.&lt;br/&gt;
Applications are recommended to use IVisitor based methods. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12510098">WICKET-3789</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mlk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>