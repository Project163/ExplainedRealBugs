<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6921] MultipartFormComponentListener breaks on hidden components</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6921</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;MultipartFormComponentListener does not seem to handle hidden components, or components included in an hidden container.&lt;/p&gt;

&lt;p&gt;Currently, javascript errors in browser console appear when rendering any component while forms are included inside unrelated hidden containers.&lt;/p&gt;

&lt;p&gt;This problem first appeared in Wicket 9.5.0.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Uncaught TypeError: Cannot read properties of null (reading &apos;form&apos;)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This appears to be caused because the component cannot be found in the DOM.&lt;br/&gt;
&lt;tt&gt;Wicket.$(&apos;fileUpload9&apos;).form.enctype=&apos;application/x-www-form-urlencoded&apos;&lt;/tt&gt;} &lt;/p&gt;

&lt;p&gt;This unhandled error stops further evaluation of javascript statements.&lt;/p&gt;

&lt;p&gt;This regression appears to be caused by the MultipartFormComponentListener that was recently added while fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6914&quot; title=&quot;Visibility change of &amp;quot;File Upload&amp;quot; via ajax causes &amp;quot;missing&amp;quot; form-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6914&quot;&gt;&lt;del&gt;WICKET-6914&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Generally, form components and forms can be included in an hidden container without problem.&lt;/p&gt;

&lt;p&gt;Furthermore, the MultipartFormComponentListener stops after handling the first component of a multipart form. A single page could container multiple forms and the other forms would not have the right encoding-type set.&lt;/p&gt;

&lt;p&gt;Attached is the democase for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6914&quot; title=&quot;Visibility change of &amp;quot;File Upload&amp;quot; via ajax causes &amp;quot;missing&amp;quot; form-data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6914&quot;&gt;&lt;del&gt;WICKET-6914&lt;/del&gt;&lt;/a&gt;, edited to demonstrate the problems caused by the regression.&lt;br/&gt;
I also added a test case and modified the code to satisfy the new requirements.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13402301">WICKET-6921</key>
            <summary>MultipartFormComponentListener breaks on hidden components</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mat128">Mathieu Mitchell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Sep 2021 19:14:48 +0000</created>
                <updated>Tue, 19 Oct 2021 18:19:10 +0000</updated>
                            <resolved>Tue, 21 Sep 2021 14:03:39 +0000</resolved>
                                    <version>9.5.0</version>
                                    <fixVersion>10.0.0-M1</fixVersion>
                    <fixVersion>9.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17417926" author="mgrigorov" created="Tue, 21 Sep 2021 06:13:02 +0000"  >&lt;p&gt;Thank you for the analysis and the patch!&lt;/p&gt;

&lt;p&gt;If you have a GitHub account then you could open a Pull Request and take your credit for the git commit. Otherwise I will apply your patch.&lt;/p&gt;

&lt;p&gt;As a workaround until 9.6.0 is released you could remove the new listener in YourApplication#init().&lt;/p&gt;</comment>
                            <comment id="17418105" author="githubbot" created="Tue, 21 Sep 2021 12:59:44 +0000"  >&lt;p&gt;mat128 opened a new pull request #478:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/wicket/pull/478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/478&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Currently, MultipartFormComponentListener ensures form enctype is&lt;br/&gt;
   correct on the client-side when visibility for multipart-enabling&lt;br/&gt;
   components is toggled. It does so by visiting all form components,&lt;br/&gt;
   detecting multipart-enabling components and emitting javascript code&lt;br/&gt;
   to refresh the encoding type on the client-side.&lt;/p&gt;

&lt;p&gt;   There are a few issues solved by this commit:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The identified form component could be part of a hidden hierarchy.&lt;br/&gt;
     This prevents finding it in the DOM, and using it&apos;s form attribute&lt;br/&gt;
     to set the form enctype.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There could be more than one form with multipart-enabling components&lt;br/&gt;
     which would require an enctype refresh on the client-side.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   This commit modifies MultipartFormComponentListener to find all forms,&lt;br/&gt;
   ensure they are visible in the hierarchy, then visiting all form&lt;br/&gt;
   components to find multipart-enabling. A single statement is emitted&lt;br/&gt;
   per form.&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@wicket.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17418106" author="mat128" created="Tue, 21 Sep 2021 13:01:18 +0000"  >&lt;p&gt;Thank you for your time.&lt;br/&gt;
I just opened a PR: &lt;a href=&quot;https://github.com/apache/wicket/pull/478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/478&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17418134" author="jira-bot" created="Tue, 21 Sep 2021 14:02:29 +0000"  >&lt;p&gt;Commit 9bfb7794d18ff441590ff86ae0e0dc35d9f2048f in wicket&apos;s branch refs/heads/master from Mathieu Mitchell&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=9bfb779&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=9bfb779&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6921&quot; title=&quot;MultipartFormComponentListener breaks on hidden components&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6921&quot;&gt;&lt;del&gt;WICKET-6921&lt;/del&gt;&lt;/a&gt; Avoid updating hidden forms (#478)&lt;/p&gt;

&lt;p&gt;Currently, MultipartFormComponentListener ensures form enctype is&lt;br/&gt;
correct on the client-side when visibility for multipart-enabling&lt;br/&gt;
components is toggled. It does so by visiting all form components,&lt;br/&gt;
detecting multipart-enabling components and emitting javascript code&lt;br/&gt;
to refresh the encoding type on the client-side.&lt;/p&gt;

&lt;p&gt;There are a few issues solved by this commit:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The identified form component could be part of a hidden hierarchy.&lt;br/&gt;
  This prevents finding it in the DOM, and using it&apos;s form attribute&lt;br/&gt;
  to set the form enctype.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There could be more than one form with multipart-enabling components&lt;br/&gt;
  which would require an enctype refresh on the client-side.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This commit modifies MultipartFormComponentListener to find all forms,&lt;br/&gt;
ensure they are visible in the hierarchy, then visiting all form&lt;br/&gt;
components to find multipart-enabling. A single statement is emitted&lt;br/&gt;
per form.&lt;/p&gt;</comment>
                            <comment id="17418135" author="githubbot" created="Tue, 21 Sep 2021 14:02:47 +0000"  >&lt;p&gt;martin-g merged pull request #478:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/wicket/pull/478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/478&lt;/a&gt;&lt;/p&gt;





&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@wicket.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17418136" author="jira-bot" created="Tue, 21 Sep 2021 14:03:07 +0000"  >&lt;p&gt;Commit e77bfa21dfb774db6d895c13bb19d9552449d00d in wicket&apos;s branch refs/heads/wicket-9.x from Mathieu Mitchell&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e77bfa2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e77bfa2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6921&quot; title=&quot;MultipartFormComponentListener breaks on hidden components&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6921&quot;&gt;&lt;del&gt;WICKET-6921&lt;/del&gt;&lt;/a&gt; Avoid updating hidden forms (#478)&lt;/p&gt;

&lt;p&gt;Currently, MultipartFormComponentListener ensures form enctype is&lt;br/&gt;
correct on the client-side when visibility for multipart-enabling&lt;br/&gt;
components is toggled. It does so by visiting all form components,&lt;br/&gt;
detecting multipart-enabling components and emitting javascript code&lt;br/&gt;
to refresh the encoding type on the client-side.&lt;/p&gt;

&lt;p&gt;There are a few issues solved by this commit:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The identified form component could be part of a hidden hierarchy.&lt;br/&gt;
  This prevents finding it in the DOM, and using it&apos;s form attribute&lt;br/&gt;
  to set the form enctype.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There could be more than one form with multipart-enabling components&lt;br/&gt;
  which would require an enctype refresh on the client-side.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This commit modifies MultipartFormComponentListener to find all forms,&lt;br/&gt;
ensure they are visible in the hierarchy, then visiting all form&lt;br/&gt;
components to find multipart-enabling. A single statement is emitted&lt;br/&gt;
per form.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 9bfb7794d18ff441590ff86ae0e0dc35d9f2048f)&lt;/p&gt;</comment>
                            <comment id="17418137" author="githubbot" created="Tue, 21 Sep 2021 14:03:41 +0000"  >&lt;p&gt;martin-g commented on pull request #478:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/wicket/pull/478#issuecomment-924021309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/478#issuecomment-924021309&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thank you, @mat128 !&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@wicket.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13407321">WICKET-6926</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13394173">WICKET-6914</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13033928" name="WICKET-6914-demo.zip" size="63654" author="mat128" created="Mon, 20 Sep 2021 19:14:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0v46w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>