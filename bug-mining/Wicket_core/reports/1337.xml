<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:24:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6165] Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6165</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hasMore: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; currentIndex &amp;lt; markup.size();
next:    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (++currentIndex &amp;lt; markup.size()) {...}
me:      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (markupStream.hasMore()) {...}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get a null element within the while loop which I wouldn&apos;t expect to get. markup.size() is 73, currentIndex 72, so &quot;hasMore&quot; returns true, while &quot;next&quot; returns null, because it already advanced the index during its check. &quot;hasMore&quot; saying &quot;yes&quot; while &quot;next&quot; saying &quot;no&quot; seems inconsistent to me, even though one can check the return value of &quot;next&quot; against &quot;null&quot;.&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t &quot;next&quot; use&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (currentIndex++ &amp;lt; markup.size()) {...}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to be in line with &quot;hasMore&quot;? Or more better directly call &quot;hasMore&quot; for the check itself to have only one single consistent implementation of the check?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969849">WICKET-6165</key>
            <summary>Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pedrosans">Pedro Santos</assignee>
                                    <reporter username="tschoening">Thorsten Sch&#246;ning</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 May 2016 18:18:28 +0000</created>
                <updated>Fri, 3 Feb 2017 02:54:35 +0000</updated>
                            <resolved>Fri, 3 Feb 2017 02:54:35 +0000</resolved>
                                    <version>7.3.0</version>
                                    <fixVersion>6.27.0</fixVersion>
                    <fixVersion>7.7.0</fixVersion>
                    <fixVersion>8.0.0-M4</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15283916" author="tschoening" created="Sun, 15 May 2016 18:41:07 +0000"  >&lt;p&gt;The attached patch implements the checks how I would understand the API, but a lot of tests fail in this case with missing elements in the markup stream. If hasMore is left unchanged instead, out of bounds excpetions occur, which make sense because markup.size() is most likely not a max index, but a number of elements and next checked that properly.&lt;/p&gt;

&lt;p&gt;So this looks like hasMore is wrong, idx vs. nr of elements, and a lot of code is relying on this behavior now? If that&apos;s the case, this should be documented in my opinion, maybe even deprecated?&lt;/p&gt;

&lt;p&gt;Or I&apos;m totally misunderstanding things here...&lt;/p&gt;</comment>
                            <comment id="15284387" author="tschoening" created="Mon, 16 May 2016 11:03:45 +0000"  >&lt;p&gt;Attaching another version of MarkupStream where I tried to fix the problems with the tests. After reviewing the code, I found some implementations where &quot;hasMore&quot; is used as loop head, while in the loop the current element is checked first and &quot;next&quot; used afterwards. In most of the other implementations I&apos;ve seen &quot;hasMore&quot; is really used to detect if there is a next element, not a current one, so I changed all those places I found in the file to something I find easier to understand even if &quot;hasMore&quot; is not changed.&lt;/p&gt;

&lt;p&gt;In the end, I think it should made more clearly using the docs what the purpose of &quot;hasMore&quot; really is: Should it tell about a current available element or if there&apos;s a next one, so calling &quot;next&quot; always succeeds? I understand the name und docs as the latter.&lt;/p&gt;</comment>
                            <comment id="15284389" author="tschoening" created="Mon, 16 May 2016 11:06:52 +0000"  >&lt;p&gt;Debugging for HtmlHandler.postProcess&lt;/p&gt;</comment>
                            <comment id="15464099" author="jira-bot" created="Mon, 5 Sep 2016 05:01:49 +0000"  >&lt;p&gt;Commit e3e09fd002452c8d2ea4be18f2733cffda78fc10 in wicket&apos;s branch refs/heads/master from Pedro Henrique Oliveira dos Santos&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e3e09fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e3e09fd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6165&quot; title=&quot;Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6165&quot;&gt;&lt;del&gt;WICKET-6165&lt;/del&gt;&lt;/a&gt; renaming MarkupStream#hasMore to MarkupStream#isCurrentIndexInsideTheStream&lt;/p&gt;</comment>
                            <comment id="15464111" author="pedrosans" created="Mon, 5 Sep 2016 05:08:39 +0000"  >&lt;p&gt;Hi Thorsen, thank you for reporting the error and the patches.&lt;/p&gt;

&lt;p&gt;As most of wicket-core is built on top of the iteration style: read, move, do it again if current index is inside the stream; it&apos;s better to simple fix the name.&lt;/p&gt;</comment>
                            <comment id="15479075" author="jira-bot" created="Sat, 10 Sep 2016 03:50:29 +0000"  >&lt;p&gt;Commit 2c8fd45c8f3287d39daf1413b582608620db0639 in wicket&apos;s branch refs/heads/stream-api-improvement from Pedro Henrique Oliveira dos Santos&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2c8fd45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2c8fd45&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6165&quot; title=&quot;Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6165&quot;&gt;&lt;del&gt;WICKET-6165&lt;/del&gt;&lt;/a&gt; addind and using MarkupStream#isCurrentIndexInsideTheStream instead of MarkupStream#hasMore&lt;/p&gt;</comment>
                            <comment id="15847476" author="mgrigorov" created="Tue, 31 Jan 2017 20:41:26 +0000"  >&lt;p&gt;I&apos;ve set the &quot;Fix Version&quot; to 8.0.0 so we don&apos;t forget to finish this ticket before the final release. &lt;/p&gt;</comment>
                            <comment id="15850973" author="jira-bot" created="Fri, 3 Feb 2017 02:49:18 +0000"  >&lt;p&gt;Commit c21b09bc83e31311f06e23d4871f48f19c57a7e0 in wicket&apos;s branch refs/heads/wicket-7.x from Pedro Henrique Oliveira dos Santos&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c21b09b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c21b09b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6165&quot; title=&quot;Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6165&quot;&gt;&lt;del&gt;WICKET-6165&lt;/del&gt;&lt;/a&gt; addind and using MarkupStream#isCurrentIndexInsideTheStream instead of MarkupStream#hasMore&lt;/p&gt;</comment>
                            <comment id="15850980" author="jira-bot" created="Fri, 3 Feb 2017 02:54:04 +0000"  >&lt;p&gt;Commit 3ac7cfcc9842c80caf9683a02efafd8a2732ec4b in wicket&apos;s branch refs/heads/wicket-6.x from Pedro Henrique Oliveira dos Santos&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3ac7cfc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3ac7cfc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6165&quot; title=&quot;Inconsistent behavior of Markupstream.hasMore vs. MarkupStream.next.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6165&quot;&gt;&lt;del&gt;WICKET-6165&lt;/del&gt;&lt;/a&gt; addind and using MarkupStream#isCurrentIndexInsideTheStream instead of MarkupStream#hasMore&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804153" name="HtmlHandler.java.patch" size="1914" author="tschoening" created="Mon, 16 May 2016 11:06:52 +0000"/>
                            <attachment id="12804152" name="MarkupStream.java.patch" size="8019" author="tschoening" created="Mon, 16 May 2016 11:03:45 +0000"/>
                            <attachment id="12804073" name="MarkupStream.java.patch" size="3912" author="tschoening" created="Sun, 15 May 2016 18:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xzn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>