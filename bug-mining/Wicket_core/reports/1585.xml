<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-7075] ServletWebResponse allows writing headers to committed HttpServletResponse</title>
                <link>https://issues.apache.org/jira/browse/WICKET-7075</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;h2&gt;&lt;a name=&quot;Background&quot;&gt;&lt;/a&gt;Background&lt;/h2&gt;

&lt;p&gt;I&apos;m in the progress of migrating a number of Wicket projects to Jakarta namespaced libraries. Due to dependencies outside of Wicket requiring Servlet API version 6, I ended up using Jetty 12 as a servlet container.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;

&lt;p&gt;When running on Jetty 12, &lt;tt&gt;CrossOriginOpenerPolicyRequestCycleListener&lt;/tt&gt; attempts to set headers on a response that has already been committed, resulting in an &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This does not appear to affect the application&apos;s basic operation, other than polluting the logs with stacktraces.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Proposedsolution&quot;&gt;&lt;/a&gt;Proposed solution&lt;/h2&gt;

&lt;p&gt;The current implementation of &lt;tt&gt;CrossOriginOpenerPolicyRequestCycleListener&lt;/tt&gt; already checks the &lt;tt&gt;WebResponse&lt;/tt&gt;&apos;s &lt;tt&gt;isHeaderSupported&lt;/tt&gt; method to see if headers can be set, but the implementation of &lt;tt&gt;ServletWebResponse&lt;/tt&gt; always returns true. By modifying this implementation to check the underlying &lt;tt&gt;HttpServletResponse&lt;/tt&gt; if the response has been committed we can make this check work as intended.&lt;/p&gt;

&lt;p&gt;I have submitted a &lt;a href=&quot;https://github.com/apache/wicket/pull/652&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; for this solution.&lt;/p&gt;</description>
                <environment>Jetty 12</environment>
        <key id="13551222">WICKET-7075</key>
            <summary>ServletWebResponse allows writing headers to committed HttpServletResponse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="jeroenfm">Jeroen Steenbeeke</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2023 11:56:45 +0000</created>
                <updated>Tue, 23 Jan 2024 09:04:53 +0000</updated>
                            <resolved>Wed, 20 Sep 2023 07:11:37 +0000</resolved>
                                    <version>10.0.0-M1</version>
                                    <fixVersion>10.0.0-M2</fixVersion>
                                    <component>wicket-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17767027" author="jira-bot" created="Wed, 20 Sep 2023 07:10:51 +0000"  >&lt;p&gt;Commit de89eb6a2db7fd25ca164e383daee38fa1053448 in wicket&apos;s branch refs/heads/master from Jeroen Steenbeeke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=de89eb6a2d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=de89eb6a2d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-7075&quot; title=&quot;ServletWebResponse allows writing headers to committed HttpServletResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-7075&quot;&gt;&lt;del&gt;WICKET-7075&lt;/del&gt;&lt;/a&gt;: Headers require uncommitted response (#652)&lt;/p&gt;

&lt;p&gt;CrossOriginOpenerPolicyRequestCycleListener attempts to write headers to&lt;br/&gt;
a response that is already committed. It contains logic to prevent&lt;br/&gt;
setting of headers when a response does not support them, but the&lt;br/&gt;
implementation for ServletWebResponse always returns true.&lt;/p&gt;

&lt;p&gt;This commit modifies ServletWebResponse to check if the underlying&lt;br/&gt;
HttpServletResponse has already been committed.&lt;/p&gt;</comment>
                            <comment id="17809817" author="jira-bot" created="Tue, 23 Jan 2024 09:04:20 +0000"  >&lt;p&gt;Commit 24906d3496cfe8258d34232c8380e5c4bce881ad in wicket&apos;s branch refs/heads/wicket-9.x from Jeroen Steenbeeke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=24906d3496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=24906d3496&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-7075&quot; title=&quot;ServletWebResponse allows writing headers to committed HttpServletResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-7075&quot;&gt;&lt;del&gt;WICKET-7075&lt;/del&gt;&lt;/a&gt;: Headers require uncommitted response (#652)&lt;/p&gt;

&lt;p&gt;CrossOriginOpenerPolicyRequestCycleListener attempts to write headers to&lt;br/&gt;
a response that is already committed. It contains logic to prevent&lt;br/&gt;
setting of headers when a response does not support them, but the&lt;br/&gt;
implementation for ServletWebResponse always returns true.&lt;/p&gt;

&lt;p&gt;This commit modifies ServletWebResponse to check if the underlying&lt;br/&gt;
HttpServletResponse has already been committed.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit de89eb6a2db7fd25ca164e383daee38fa1053448)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310460">
                    <name>Child-Issue</name>
                                            <outwardlinks description="is a parent of">
                                        <issuelink>
            <issuekey id="13565673">WICKET-7097</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kgao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>