<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4278] Performance regression in Component.configure() in 1.5 </title>
                <link>https://issues.apache.org/jira/browse/WICKET-4278</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Wicket 1.5 is slower than 1.4 in rendering deep component trees.&lt;br/&gt;
See the attached application that adds recursively components with specified depth. In 1.5 it is several times slower than 1.4.&lt;/p&gt;

&lt;p&gt;I found several problems:&lt;/p&gt;

&lt;p&gt;1) org.apache.wicket.Component.configure() calls org.apache.wicket.Component.setRenderAllowed()&lt;br/&gt;
The problems is that configure() is called for each component in the hierarchy and  setRenderAllowed() is overwritten in MarkupContainer to visit all children and call it for them. And the final result is that setRenderAllowed() is called for the parent and all its children, then for the first child and all its children again, and so on...&lt;/p&gt;

&lt;p&gt;The solution is to completely remove org.apache.wicket.MarkupContainer.setRenderAllowed()&lt;/p&gt;

&lt;p&gt;2) If you increase the number of components to &amp;gt; 1000 in 1.5 we hit StackOverflowError in &lt;br/&gt;
2.1) org.apache.wicket.MarkupContainer.getMarkupType()&lt;br/&gt;
2.2) org.apache.wicket.Component.getLocale()&lt;br/&gt;
2.3) org.apache.wicket.MarkupContainer.internalMarkRendering(boolean)&lt;/p&gt;

&lt;p&gt;For 2.1 and 2.2 I suggest to add transient fields which will cache the calculated value after the first call of the get method.&lt;br/&gt;
For 2.3 I don&apos;t see a solution for now&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533786">WICKET-4278</key>
            <summary>Performance regression in Component.configure() in 1.5 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="mgrigorov">Martin Tzvetanov Grigorov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Dec 2011 15:19:37 +0000</created>
                <updated>Thu, 15 Dec 2011 14:30:39 +0000</updated>
                            <resolved>Thu, 15 Dec 2011 14:30:39 +0000</resolved>
                                    <version>1.5.3</version>
                                    <fixVersion>1.5.4</fixVersion>
                    <fixVersion>6.0.0-beta1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13162415" author="mgrigorov" created="Sun, 4 Dec 2011 16:20:24 +0000"  >&lt;p&gt;The optimization for the locale breaks WicketTester tests but this is completely problem in MockPageManager because it doesn&apos;t serialize the pages and the transient field is not cleaned.&lt;br/&gt;
Removing this optimization for now...&lt;/p&gt;</comment>
                            <comment id="13162737" author="mgrigorov" created="Mon, 5 Dec 2011 12:11:41 +0000"  >&lt;p&gt;Actually the caching of the locale can be applied. We can null-ify it in Component#onDetach().&lt;/p&gt;</comment>
                            <comment id="13162763" author="svenmeier" created="Mon, 5 Dec 2011 13:09:47 +0000"  >&lt;p&gt;setRenderAllowed() was under suspicion already, but I didn&apos;t assume that this code could simply be removed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Together with caching of locale and markupType we&apos;re now down to 15% performance degradation.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to profile another hot-spot.&lt;/p&gt;</comment>
                            <comment id="13165055" author="svenmeier" created="Thu, 8 Dec 2011 07:22:40 +0000"  >&lt;p&gt;As powwowed, I removed MarkupContainer#setRenderAllowed()&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506044" name="WICKET-4278.patch" size="1523" author="mgrigorov" created="Sun, 4 Dec 2011 16:20:24 +0000"/>
                            <attachment id="12506043" name="WICKET-4278.patch" size="2316" author="mgrigorov" created="Sun, 4 Dec 2011 15:23:23 +0000"/>
                            <attachment id="12506041" name="myproject-1.4.tgz" size="5021" author="mgrigorov" created="Sun, 4 Dec 2011 15:20:05 +0000"/>
                            <attachment id="12506042" name="myproject-1.5.tgz" size="20783" author="mgrigorov" created="Sun, 4 Dec 2011 15:20:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116252</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>