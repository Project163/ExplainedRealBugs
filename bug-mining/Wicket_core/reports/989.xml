<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5473] Wicket does not handle non in-memory Httpsessions correctly</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5473</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;There are two issues (related to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5390&quot; title=&quot;Session management doesn&amp;#39;t work with Jetty&amp;#39;s JDBCSessionManager &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5390&quot;&gt;&lt;del&gt;WICKET-5390&lt;/del&gt;&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;1) The &quot;Wicket-Session&quot; (as well as WebSession) has internal state that is not reflected inside equals comparison (e.g. page id counter) since it does not override equals. This can leads in de/serialization szenarios to render two (Web)Sessions as unequal even if they are in fact the same.&lt;/p&gt;

&lt;p&gt;2) The &quot;Wicket-Session&quot; object is stored inside the HttpSession object only once via setAttribute. This might be persisted. In successive calls the internal state is changed (especially the page id counter) but the object is not &quot;updated&quot; via setAttribute. This leads to the problem, that the HttpSession implementation never knows something has changed and might miss to persist the change!&lt;/p&gt;

&lt;p&gt;This leads to duplicate and wrong assigned page ids and confussing errors.&lt;/p&gt;

&lt;p&gt;So the Wicket-(Web)Session should be changed in a way, that:&lt;br/&gt;
a) every internal (non transient) state is used in equals comparisons&lt;br/&gt;
b) each change to any (non transient) internal state causes a setAttribute to the underlying storage so it is notified about the change.&lt;/p&gt;

&lt;p&gt;We are hitting this problem with very obscure error messages, so I mark this as a blocker since it produces hard to track problems and currently holds us down to use Wicket with a persitent (clustered) session model.&lt;/p&gt;

&lt;p&gt;In &quot;standard&quot; configuration you very likely never hit this problem since the default PageStore implementation modifies the session so implicitly it gets its changes persited. But with alternative PageStore or stateless pages you still can hit the problem (and get really confused).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689333">WICKET-5473</key>
            <summary>Wicket does not handle non in-memory Httpsessions correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="laeubi">Christoph L&#228;ubrich</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 19:35:21 +0000</created>
                <updated>Thu, 30 Jan 2014 08:43:02 +0000</updated>
                            <resolved>Thu, 30 Jan 2014 08:43:02 +0000</resolved>
                                    <version>6.12.0</version>
                                    <fixVersion>6.14.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13873824" author="laeubi" created="Thu, 16 Jan 2014 19:36:15 +0000"  >&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5390&quot; title=&quot;Session management doesn&amp;#39;t work with Jetty&amp;#39;s JDBCSessionManager &quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5390&quot;&gt;&lt;del&gt;WICKET-5390&lt;/del&gt;&lt;/a&gt; wich was not a complete fix for session issues in presence with a non memmory-session managment. Since I can&apos;t reopen the issue for some reason, and there are other issues not only with jettys JDBCSessionmanager but &lt;b&gt;any&lt;/b&gt; sessionmanager that might persist and restore session data later.&lt;/p&gt;</comment>
                            <comment id="13873833" author="mgrigorov" created="Thu, 16 Jan 2014 19:44:42 +0000"  >&lt;p&gt;Can you provide a quickstart that demonstrates the problem ?&lt;/p&gt;</comment>
                            <comment id="13873848" author="laeubi" created="Thu, 16 Jan 2014 19:57:13 +0000"  >&lt;p&gt;Maybe the following would work&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;custom wicket with log output in setIntegerId (not 100% sure how the mehtod is called....)&lt;/li&gt;
	&lt;li&gt;Wicket with two pages each with a link to the other via a dynamic link&lt;/li&gt;
	&lt;li&gt;create a custom pagestore that do not use the session (e.g. just a simple Hashmap in memory)&lt;/li&gt;
	&lt;li&gt;jetty 8 with JDBC Session store and default settings&lt;/li&gt;
	&lt;li&gt;enable log output for JDBC sessionmanager&lt;/li&gt;
	&lt;li&gt;open page one&lt;/li&gt;
	&lt;li&gt;open page two&lt;/li&gt;
	&lt;li&gt;close one of them and reopen it...&lt;/li&gt;
	&lt;li&gt;you would see log output with pageid 1 + 2&lt;/li&gt;
	&lt;li&gt;repeat untill you are at page id 10 or something&lt;/li&gt;
	&lt;li&gt;wait until JDBC manager reloads the session from db&lt;/li&gt;
	&lt;li&gt;you will see old page ID assigned and due to a bug (see &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=425930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=425930&lt;/a&gt;) since session is reloaded on each request.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It is rather complex to setup (and debug!) since you need the following to be true:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;have a Pagemanager/Store that do not alter the session&lt;/li&gt;
	&lt;li&gt;have a HttpSession that uses serialization and reloads data from serilized form (e.g. on  a regular basis or on restart)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13873861" author="mgrigorov" created="Thu, 16 Jan 2014 20:02:27 +0000"  >&lt;p&gt;Without a quickstart and steps to reproduce it will be hard to improve it.&lt;br/&gt;
Please take some time to prove that it is broken.&lt;/p&gt;</comment>
                            <comment id="13873873" author="laeubi" created="Thu, 16 Jan 2014 20:11:20 +0000"  >&lt;p&gt;I&apos;ll try but fear it will take some time, maybe tomorrow.&lt;br/&gt;
Maybe you nevertheless want to take a look at (Wicket)Session and add these simple log statements:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;one logging setAttribute&lt;/li&gt;
	&lt;li&gt;one logging getAttribute&lt;/li&gt;
	&lt;li&gt;one on nextPageID&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;then use an arbitrary Wicket app, open some pages. And then look at the sequence generated under the assumption that all state that is changed without &quot;setAttribute&quot; is called will be lost. It should be perfectly clear than that there is an issue.&lt;/p&gt;</comment>
                            <comment id="13873889" author="mgrigorov" created="Thu, 16 Jan 2014 20:25:27 +0000"  >&lt;p&gt;Wicket&apos;s Session#setAttribute() just delegates to ISessionStore#setAttribute(). Nothing more.&lt;/p&gt;

&lt;p&gt;The (Wicket)Session object is stored in the ISessionStore (i.e. in HttpSessionStore -&amp;gt; HttpSession) by org.apache.wicket.Session#internalDetach() that calls getSessionStore().flushSession(request, this); when the Session is marked as dirty. &lt;/p&gt;</comment>
                            <comment id="13874533" author="mgrigorov" created="Fri, 17 Jan 2014 07:32:45 +0000"  >&lt;p&gt;Reducing the Priotity to Major because it seems you have a workaround: override #equals() in YourSession and call session.dirty() when needed.&lt;/p&gt;</comment>
                            <comment id="13874694" author="laeubi" created="Fri, 17 Jan 2014 11:36:27 +0000"  >&lt;p&gt;I was able to reduce the problem significantly by emulating a persitent session via the ISessionStore.&lt;/p&gt;

&lt;p&gt;You can find a quickstart here: &lt;a href=&quot;https://github.com/laeubi/quickstart/tree/master/WICKET5473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/laeubi/quickstart/tree/master/WICKET5473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;start quickstart&lt;/li&gt;
	&lt;li&gt;open homepage (page id will be shown as 0, instance as 0)&lt;/li&gt;
	&lt;li&gt;click the link (page id will be shwon as 1, instance as 1)&lt;/li&gt;
	&lt;li&gt;click the link again (page id will be shown as 1 instance as 1)&lt;/li&gt;
	&lt;li&gt;click the link again (page id will be shown as 1 instance as 1)&lt;/li&gt;
	&lt;li&gt;click the link again (page id will be shown as 1 instance as 2)&lt;/li&gt;
	&lt;li&gt;repeat as you like&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So what do you see: Two pages getting the same page id repeatedly, in the log you will see that only one call to setValue(wicket:wicket.WICKET5473:session) is performed and after then only getValue is called resulting in getting the state back from the first call.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Example Output&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Create Page 1
setValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@15f1f9c
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@13a34af
setValue(wicket:wicket.WICKET5473:wicket:persistentPageManagerData - wicket.WICKET5473) := org.apache.wicket.page.PageStoreManager$SessionEntry@20c906
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@b914b3
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@fdfc58
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@1904e0d
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@178920a
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@bbfa5c
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@131de9b
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@f42160
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@1bb326c
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@eb7331
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@7ff5b6
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@dc9065
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@8beff2
getValue(wicket:wicket.WICKET5473:wicket:persistentPageManagerData - wicket.WICKET5473) := org.apache.wicket.page.PageStoreManager$SessionEntry@1362a63
onClick Page 1
getValue(wicket:wicket.WICKET5473:wicket:persistentPageManagerData - wicket.WICKET5473) := org.apache.wicket.page.PageStoreManager$SessionEntry@57ae58
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@813bc1
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@7a36a2
Create Page 2
getValue(wicket:wicket.WICKET5473:wicket:persistentPageManagerData - wicket.WICKET5473) := org.apache.wicket.page.PageStoreManager$SessionEntry@1b5c22f
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@cd4544
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@7e75d2
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@694f12
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@345b43
getValue(wicket:wicket.WICKET5473:session) := org.apache.wicket.protocol.http.WebSession@153b2cb
getValue(wicket:wicket.WICKET5473:wicket:persistentPageManagerData - wicket.WICKET5473) := org.apache.wicket.page.PageStoreManager$SessionEntry@1ff2e1b
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can now change &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;bugs.WicketApplication.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isPersitent = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; in WicketApplication to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;bugs.WicketApplication.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isPersitent = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; rerun the code and you&apos;ll see that page ids are incremented on each click since the default in-memory model is used.&lt;/p&gt;

&lt;p&gt;Let me know if you need any further details.&lt;/p&gt;</comment>
                            <comment id="13874695" author="laeubi" created="Fri, 17 Jan 2014 11:37:21 +0000"  >&lt;p&gt;The only Workaround is to change the session on every call what is more a hack and requires code changes all over the code. (note this is also just a sideeffect that it works, if a SessionManager would decide to store not the whole session but individual attributes (as in this quickstart) it would not help...)&lt;/p&gt;</comment>
                            <comment id="13882233" author="laeubi" created="Sun, 26 Jan 2014 08:42:28 +0000"  >&lt;p&gt;I hope it is okay to change this to even &apos;critical&apos; since this can cause data to be lost.&lt;/p&gt;

&lt;p&gt;From taking a look at the Code of Session, it seems these both field values have the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sequence = 1;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pageId = 0;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;All other modification methods set the dirty flag, but these do not:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; nextSequenceValue() {
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; sequence++;
	}

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; nextPageId() {
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pageId++;
	}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I would suggest to instead use field values, simply use SessionAttributes via get/setAttribute or mark session dirty after each call.&lt;br/&gt;
Maybe it would also be a good idea to switch to AtomicInteger and remove the need to syncronize here also.&lt;/p&gt;

&lt;p&gt;PLEASE NOTE: PageStoreManager has also an issue, since it does not mark the session dirty due to change &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5380&quot; title=&quot;Wicket rebinds the SessionEntry session attribute and this causes problems in Glassfish&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5380&quot;&gt;&lt;del&gt;WICKET-5380&lt;/del&gt;&lt;/a&gt; this would be neccesary now!&lt;/p&gt;

&lt;p&gt;Is there any plan when this might be fixed and released? This currently require us to do a lot more requests than neccessary (and that leads to some unwanted DB access in the end) to prevent it. This leads to performance problem and thus is rather critical for us.&lt;/p&gt;</comment>
                            <comment id="13883947" author="mgrigorov" created="Tue, 28 Jan 2014 09:48:51 +0000"  >&lt;p&gt;&amp;gt; PLEASE NOTE: PageStoreManager has also an issue, since it does not mark the session dirty due to change &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5380&quot; title=&quot;Wicket rebinds the SessionEntry session attribute and this causes problems in Glassfish&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5380&quot;&gt;&lt;del&gt;WICKET-5380&lt;/del&gt;&lt;/a&gt; this would be neccesary now!&lt;/p&gt;

&lt;p&gt;Can you please give more details ?&lt;br/&gt;
By adding calls to dirty() in org.apache.wicket.Session#nextSequenceValue() and org.apache.wicket.Session#nextPageId() your quickstart starts to behave as expected.&lt;br/&gt;
Is there something more to be done ?&lt;br/&gt;
You know sending us patches or pull requests is not forbidden &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13883948" author="mgrigorov" created="Tue, 28 Jan 2014 09:52:11 +0000"  >&lt;p&gt;Adding calls to dirty causes a major problem - the session is being bound even for stateless applications.&lt;br/&gt;
org.apache.wicket.session.BindSessionOnRedirectTest#bindSessionWhenThereAreFeedbackMessages() shows the problem.&lt;/p&gt;</comment>
                            <comment id="13883952" author="mgrigorov" created="Tue, 28 Jan 2014 09:57:16 +0000"  >&lt;p&gt;This patch seems to do the job.&lt;/p&gt;</comment>
                            <comment id="13883953" author="laeubi" created="Tue, 28 Jan 2014 10:03:09 +0000"  >&lt;p&gt;&amp;gt; Can you please give more details ?&lt;br/&gt;
Prior to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5380&quot; title=&quot;Wicket rebinds the SessionEntry session attribute and this causes problems in Glassfish&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5380&quot;&gt;&lt;del&gt;WICKET-5380&lt;/del&gt;&lt;/a&gt; setAttribute was called for each request, now it is only called once and the session is never marked as &quot;dirty&quot; even if the object has changed. So a similar issue might happen there, maybe it is okay if the session cache is lost under some circumstance.&lt;/p&gt;

&lt;p&gt;&amp;gt; You know sending us patches or pull requests is not forbidden&lt;br/&gt;
Yes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But in that very central case I think it is better to let it do someone with a more wicket-internal-view, so I hope its okay to just suggest what might be changed.&lt;/p&gt;

&lt;p&gt;&amp;gt; Adding calls to dirty causes a major problem - the session is being bound even for stateless applications&lt;br/&gt;
Well... if they depend on a state (page-id counter) how can they be stateless? I&apos;m not sure how Wicket handles/detecct this case, but maybe it would be suitable in such a case to not call the Session but a gobal static &quot;getTempPageID&quot; (AtomicInteger).&lt;br/&gt;
Or, maybe only call dirty if the session is not temporary?&lt;/p&gt;</comment>
                            <comment id="13883957" author="mgrigorov" created="Tue, 28 Jan 2014 10:09:54 +0000"  >&lt;p&gt;I&apos;ve linked this ticket to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-2782&quot; title=&quot;Don&amp;#39;t increment the Session.pageIdCounter for stateless pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-2782&quot;&gt;WICKET-2782&lt;/a&gt; for the problem with stateless.&lt;br/&gt;
But the patch seems to overcome this problem.&lt;/p&gt;

&lt;p&gt;Can you check your main application with the suggested patch applied ?&lt;br/&gt;
I think there are no more changes needed. If the session is marked dirty then it is saved as an attribute in the http session at the end of the request.&lt;/p&gt;</comment>
                            <comment id="13883981" author="laeubi" created="Tue, 28 Jan 2014 10:38:21 +0000"  >&lt;p&gt;Thanks for your investigation and the patch, I&apos;ll try this tomorrow!&lt;br/&gt;
Can you tell (if the patch works) how long it normally takes untill it will find its way into an offical release?&lt;/p&gt;</comment>
                            <comment id="13883988" author="mgrigorov" created="Tue, 28 Jan 2014 10:42:41 +0000"  >&lt;p&gt;If there are no issues found then it will be in 6.14.0.&lt;br/&gt;
We try to release a new minor version every month.&lt;br/&gt;
6.13.0 has been released in the beginning of this month so there are around a week or two until 6.14.0.&lt;/p&gt;

&lt;p&gt;But you can put &lt;br/&gt;
public synchronized int nextSequenceValue()&lt;br/&gt;
	{&lt;br/&gt;
		if (isTemporary() == false)&lt;/p&gt;
		{
			dirty();
		}&lt;br/&gt;
		return super.nextSequenceValue();&lt;br/&gt;
	}&lt;br/&gt;
&lt;br/&gt;
	/**&lt;br/&gt;
	 * &lt;br/&gt;
	 * @return the next page id&lt;br/&gt;
	 */&lt;br/&gt;
	public synchronized int nextPageId()&lt;br/&gt;
	{&lt;br/&gt;
		if (isTemporary() == false)&lt;br/&gt;
		{			dirty();		}
&lt;p&gt;		return super.nextPageId();&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;in YourSession.java and use it until 6.14.0 is out.&lt;/p&gt;</comment>
                            <comment id="13885605" author="laeubi" created="Wed, 29 Jan 2014 18:13:29 +0000"  >&lt;p&gt;I tried this patch and it solves the issue seen before.&lt;/p&gt;</comment>
                            <comment id="13886413" author="mgrigorov" created="Thu, 30 Jan 2014 08:43:02 +0000"  >&lt;p&gt;Thanks for your help!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12459038">WICKET-2782</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12671341">WICKET-5380</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12674512">WICKET-5390</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12625555" name="WICKET-5473.patch" size="726" author="mgrigorov" created="Tue, 28 Jan 2014 09:57:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rhbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>