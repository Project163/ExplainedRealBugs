<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5924] FileUploadField does not work with Servlet 3.0 multipart config</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5924</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;quickstart: &lt;a href=&quot;https://github.com/krasa/krasa-wicket-spring-boot-quickstart&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krasa/krasa-wicket-spring-boot-quickstart&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;run: krasa.wicket.Start&lt;/li&gt;
	&lt;li&gt;go to: &lt;a href=&quot;http://localhost:8080/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;upload a file&lt;/li&gt;
	&lt;li&gt;FileUploadField#getFileUploads will be empty&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have tried the same with normal quickstart and the same Jetty version,  it worked.&lt;/p&gt;</description>
                <environment>Win 7, Chrome, Firefox, Jetty 9.2, Spring Boot</environment>
        <key id="12837815">WICKET-5924</key>
            <summary>FileUploadField does not work with Servlet 3.0 multipart config</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="meo">Vojt&#283;ch Kr&#225;sa</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 11:52:35 +0000</created>
                <updated>Fri, 16 Oct 2015 11:25:47 +0000</updated>
                            <resolved>Sun, 28 Jun 2015 20:09:11 +0000</resolved>
                                    <version>7.0.0-M5</version>
                                    <fixVersion>7.0.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14585886" author="mgrigorov" created="Mon, 15 Jun 2015 12:59:49 +0000"  >&lt;p&gt;If it works without Spring Boot then why the issue is reported here and not in Spring Boot&apos;s issue tracker?&lt;br/&gt;
My guess is that SB configures Jetty in a such a way that something happens with the binary request parameters... I have no idea what exactly goes wrong though.&lt;/p&gt;</comment>
                            <comment id="14585948" author="meo" created="Mon, 15 Jun 2015 13:44:54 +0000"  >&lt;p&gt;Seems like Wicket specific problem to me, as I have found nothing relevant about such problem with Spring Boot. &lt;br/&gt;
I debugged it a little bit and it seems to be caused by configured javax.servlet.MultipartConfigElement which is then passed in &lt;br/&gt;
org.eclipse.jetty.servlet.ServletHolder#prepare and because of that the logic goes through different places...&lt;/p&gt;</comment>
                            <comment id="14586051" author="meo" created="Mon, 15 Jun 2015 13:49:16 +0000"  >&lt;p&gt;I found a workaround:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@EnableAutoConfiguration(exclude = {MultipartAutoConfiguration.class})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multipart.enabled=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14586054" author="mgrigorov" created="Mon, 15 Jun 2015 13:52:24 +0000"  >&lt;p&gt;Where is that MultipartConfigElement configured?&lt;br/&gt;
Wicket uses standard Servlet APIs to read the uploaded data.&lt;/p&gt;

&lt;p&gt;In my eyes if the application works fine in plain container and fails in &quot;modified&quot; container then the problem is not in a library.&lt;br/&gt;
AFAIK you can use Spring Boot either with Jetty or with Tomcat. Is it easy for you to try SB with embedded Tomcat?&lt;/p&gt;</comment>
                            <comment id="14586059" author="mgrigorov" created="Mon, 15 Jun 2015 13:53:33 +0000"  >&lt;p&gt;This workaround says is pretty clearly that the problem is in Spring Boot code, not in Wicket&apos;s.&lt;/p&gt;</comment>
                            <comment id="14586083" author="meo" created="Mon, 15 Jun 2015 14:10:22 +0000"  >&lt;p&gt;It is configured in org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration with some default values.&lt;/p&gt;

&lt;p&gt;It behaves the same on Tomcat.&lt;/p&gt;</comment>
                            <comment id="14587546" author="mgrigorov" created="Tue, 16 Jun 2015 06:37:32 +0000"  >&lt;p&gt;My guess is that when this config is enabled it consumes the request body before Wicket.&lt;br/&gt;
At &lt;a href=&quot;https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/multipart/support/StandardServletMultipartResolver.java#L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/multipart/support/StandardServletMultipartResolver.java#L86&lt;/a&gt; I see that it actually deletes the Part&apos;s at some point (to be compatible with Resin...).&lt;/p&gt;</comment>
                            <comment id="14588176" author="meo" created="Tue, 16 Jun 2015 15:15:29 +0000"  >&lt;p&gt;I debugged that and it is never called. &lt;/p&gt;

&lt;p&gt;In my understanding, by default, there is a DispatcherServlet configured on the root path (DispatcherServletAutoConfiguration), which uses configuration from MultipartAutoConfiguration. &lt;/p&gt;

&lt;p&gt;On top of that, I have added a WicketFilter. &lt;/p&gt;

&lt;p&gt;When the app-server processes a request, it takes the multipart configuration from a servlet, which in my case was DispatcherServlet, in a normal situation, there would be no servlet on the WicketFilter&apos;s path, so the app-server would take the configuration from a default servlet, which is created without us knowing - e.g. org.eclipse.jetty.servlet.DefaultServlet and which do not have multipart configured. &lt;/p&gt;

&lt;p&gt;Unfortunately Wicket is not compatible with that multipart config, I have no idea whether it is ok or not. &lt;/p&gt;

&lt;p&gt;So that&apos;s about it, Spring Boot magic breaking things &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14588203" author="mgrigorov" created="Tue, 16 Jun 2015 15:22:44 +0000"  >&lt;p&gt;Wicket uses Apache commons-fileupload for reading the request body. If Wicket is not compatible then many other apps are not compatible as well.&lt;br/&gt;
I suggest to ask in SB forums for help/more details.&lt;/p&gt;</comment>
                            <comment id="14588299" author="meo" created="Tue, 16 Jun 2015 16:14:32 +0000"  >&lt;p&gt;That would be probably reasonable. &lt;/p&gt;

&lt;p&gt;Meanwhile I attached a quickstart without SB, the multipart-config on the underlaying servlet is the problem indeed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&amp;lt;servlet&amp;gt;
	    &amp;lt;servlet-name&amp;gt;RootServlet&amp;lt;/servlet-name&amp;gt;
	    &amp;lt;servlet-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;org.eclipse.jetty.servlet.DefaultServlet&amp;lt;/servlet-&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;gt;\
		&amp;lt;!-- multipart-config breaks file upload --&amp;gt;
	    &amp;lt;multipart-config&amp;gt;
	        &amp;lt;max-file-size&amp;gt;10485760&amp;lt;/max-file-size&amp;gt;
	        &amp;lt;max-request-size&amp;gt;20971520&amp;lt;/max-request-size&amp;gt;
	        &amp;lt;file-size-threshold&amp;gt;5242880&amp;lt;/file-size-threshold&amp;gt;
	    &amp;lt;/multipart-config&amp;gt;
	&amp;lt;/servlet&amp;gt;
	&amp;lt;servlet-mapping&amp;gt;
	    &amp;lt;servlet-name&amp;gt;RootServlet&amp;lt;/servlet-name&amp;gt;
	    &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
	&amp;lt;/servlet-mapping&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14588307" author="meo" created="Tue, 16 Jun 2015 16:17:03 +0000"  >&lt;p&gt;Hmm, Apache commons-fileupload is not compatible with multipart config &lt;a href=&quot;http://stackoverflow.com/a/14457148/685796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/14457148/685796&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14588700" author="mgrigorov" created="Tue, 16 Jun 2015 20:23:27 +0000"  >&lt;p&gt;Now everything is clear! Thanks for the link!&lt;/p&gt;

&lt;p&gt;I&apos;ve tried once to use these Servlet 3 APIs (&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5192&quot; title=&quot;Get rid of commons-fileupload classes and use javax.servlet.http.HttpServletRequest#getPart() instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5192&quot;&gt;&lt;del&gt;WICKET-5192&lt;/del&gt;&lt;/a&gt;) but there were some limitations...&lt;/p&gt;</comment>
                            <comment id="14602734" author="jira-bot" created="Fri, 26 Jun 2015 11:41:45 +0000"  >&lt;p&gt;Commit e27588e9e8d1cce0cb355a3629d927ed7e039c4a in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt;-fallback-to-servlet-parts from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e27588e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e27588e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt; FileUploadField does not work with Spring Boot&lt;/p&gt;

&lt;p&gt;Add support for reading file uploads from Servlet request&apos;s parts&lt;/p&gt;</comment>
                            <comment id="14604867" author="jira-bot" created="Sun, 28 Jun 2015 20:02:52 +0000"  >&lt;p&gt;Commit 8b9c87ac745654757c63d9aafa67d2e594f1e43f in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b9c87a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b9c87a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt; FileUploadField does not work with Spring Boot&lt;/p&gt;

&lt;p&gt;Add support for reading file uploads from Servlet request&apos;s parts&lt;/p&gt;</comment>
                            <comment id="14604868" author="jira-bot" created="Sun, 28 Jun 2015 20:02:53 +0000"  >&lt;p&gt;Commit ccfcf28d7ba9888869ed553265950a881d8e371c in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ccfcf28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ccfcf28&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt; FileUploadField does not work with Spring Boot&lt;/p&gt;

&lt;p&gt;Extract ServletPartFileItem as a separate class&lt;/p&gt;</comment>
                            <comment id="14604869" author="jira-bot" created="Sun, 28 Jun 2015 20:02:54 +0000"  >&lt;p&gt;Commit a6988b0681932917753016ffd9d83412889ec2b3 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a6988b0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a6988b0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt; FileUploadField does not work with Spring Boot&lt;/p&gt;

&lt;p&gt;Add WicketTester support for Servlet 3.0 multipart uploads&lt;/p&gt;</comment>
                            <comment id="14604870" author="jira-bot" created="Sun, 28 Jun 2015 20:02:54 +0000"  >&lt;p&gt;Commit 07f4872d848d06d29ff82554bd0dfdae59c7a7f7 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=07f4872&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=07f4872&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5924&quot; title=&quot;FileUploadField does not work with Servlet 3.0 multipart config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5924&quot;&gt;&lt;del&gt;WICKET-5924&lt;/del&gt;&lt;/a&gt; FileUploadField does not work with Spring Boot&lt;/p&gt;

&lt;p&gt;Add some documentation&lt;/p&gt;</comment>
                            <comment id="14604879" author="mgrigorov" created="Sun, 28 Jun 2015 20:09:11 +0000"  >&lt;p&gt;The quickstart now works with 7.0.0-SNAPSHOT.&lt;br/&gt;
Please test it with Spring Boot.&lt;br/&gt;
Thank you!&lt;/p&gt;</comment>
                            <comment id="14614397" author="meo" created="Sun, 5 Jul 2015 20:58:32 +0000"  >&lt;p&gt;Thanks, it seems to work.&lt;/p&gt;

&lt;p&gt;But not sure if this behaviour is intended - when the file is too big, it fails on this ugly error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Unexpected RuntimeException

Last cause: Multipart Mime part fileInput exceeds max filesize

Stacktrace

Root cause:

java.lang.IllegalStateException: Multipart Mime part fileInput exceeds max filesize
     at org.eclipse.jetty.util.MultiPartInputStreamParser$MultiPart.write(MultiPartInputStreamParser.java:111)
     at org.eclipse.jetty.util.MultiPartInputStreamParser.parse(MultiPartInputStreamParser.java:681)
     at org.eclipse.jetty.util.MultiPartInputStreamParser.getParts(MultiPartInputStreamParser.java:400)
     at org.eclipse.jetty.server.Request.getParts(Request.java:2139)
     at org.eclipse.jetty.server.Request.extractMultipartParameters(Request.java:385)
     at org.eclipse.jetty.server.Request.extractContentParameters(Request.java:308)
     at org.eclipse.jetty.server.Request.extractParameters(Request.java:256)
     at org.eclipse.jetty.server.Request.getParameterMap(Request.java:839)
     at org.apache.wicket.protocol.http.servlet.ServletWebRequest.generatePostParameters(ServletWebRequest.java:286)
     at org.apache.wicket.protocol.http.servlet.ServletWebRequest.getPostRequestParameters(ServletWebRequest.java:336)
     at org.apache.wicket.protocol.http.servlet.ServletWebRequest.access$000(ServletWebRequest.java:59)
     at org.apache.wicket.protocol.http.servlet.ServletWebRequest$1.getParameterValue(ServletWebRequest.java:364)
     at org.apache.wicket.request.parameter.CombinedRequestParametersAdapter.getParameterValue(CombinedRequestParametersAdapter.java:70)
     at org.apache.wicket.request.http.WebRequest.isAjax(WebRequest.java:117)
     at org.apache.wicket.protocol.http.servlet.ServletWebRequest.getClientUrl(ServletWebRequest.java:145)
     at org.apache.wicket.core.request.mapper.BookmarkableMapper.matches(BookmarkableMapper.java:195)
     at org.apache.wicket.core.request.mapper.BookmarkableMapper.getCompatibilityScore(BookmarkableMapper.java:184)
     at org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:136)
     at org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:189)
     at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:219)
     at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293)
     at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:261)
     at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284)
     at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)
     at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)
     at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
     at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)
     at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)
     at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
     at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
     at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
     at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
     at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
     at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
     at org.eclipse.jetty.server.Server.handle(Server.java:499)
     at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)
     at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)
     at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
     at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
     at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
     at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14615621" author="mgrigorov" created="Mon, 6 Jul 2015 20:45:59 +0000"  >&lt;p&gt;Yes, indeed it is ugly.&lt;br/&gt;
Apache Commons FileUpload has org.apache.commons.fileupload.FileUploadException, which Wicket handles at org.apache.wicket.markup.html.form.Form#handleMultiPart.&lt;br/&gt;
But Jetty throws IllegalStateException ... It is too broad exception type :-/ It may throw it for many other reasons. We cannot use the exception message because it will be different in Tomcat, WildFly, WebLogic, ...&lt;br/&gt;
Using Servlet 3.x Part really leads to regressions, as explained at &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5192&quot; title=&quot;Get rid of commons-fileupload classes and use javax.servlet.http.HttpServletRequest#getPart() instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5192&quot;&gt;&lt;del&gt;WICKET-5192&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12647953">WICKET-5192</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12905491">WICKET-6002</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12739885" name="quickstartWithoutSpringBoot_WICKET-5924.rar" size="24326" author="meo" created="Tue, 16 Jun 2015 16:08:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g1lr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>