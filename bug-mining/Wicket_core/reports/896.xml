<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5247] Broken Link in Tomcat because of Page Mount</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5247</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I post this message on the user mailing List (&lt;a href=&quot;http://apache-wicket.1842946.n4.nabble.com/Broken-Link-in-Tomcat-because-of-Page-Mount-tt4659663.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-wicket.1842946.n4.nabble.com/Broken-Link-in-Tomcat-because-of-Page-Mount-tt4659663.html&lt;/a&gt;) and Martin Grigorov asked me, to create a ticket on Jira.&lt;/p&gt;

&lt;p&gt;Broken Link in Tomcat because of Page Mount&lt;/p&gt;

&lt;p&gt;Following situation:&lt;br/&gt;
-I have a Wicket Application(6.8.0) which runs under the context &quot;webapp&quot; on a Tomcat 7.0.41&lt;br/&gt;
-I mount a Page with two parameters (this is important) in the WicketApplication.&lt;br/&gt;
	mountPage(&quot;/mount/${parameter1}/${parameter2}&quot;, MountedPage.class);&lt;br/&gt;
-The mounted Page(MountedPage.class) has only a simple Link&lt;br/&gt;
-There are two links on the HomePage to the mounted Page.&lt;br/&gt;
 They are declared as follows:&lt;/p&gt;

&lt;p&gt;	add(new Link&amp;lt;Void&amp;gt;(&quot;link&quot;) {&lt;br/&gt;
			@Override&lt;br/&gt;
			public void onClick() &lt;/p&gt;
{
				setResponsePage(MountedPage.class, linkParameters);
			}
&lt;p&gt;	});&lt;/p&gt;

&lt;p&gt;	add(new Link&amp;lt;Void&amp;gt;(&quot;brokenLink&quot;) {&lt;br/&gt;
			@Override&lt;br/&gt;
			public void onClick() &lt;/p&gt;
{
				setResponsePage(new MountedPage(linkParameters));
			}
&lt;p&gt;	});&lt;/p&gt;

&lt;p&gt;I deploy this Application as a war file on a Tomcat under the context &quot;webapp&quot;.&lt;br/&gt;
When I call the first Link on the HomePage and then the Link on the mounted Page, everything works fine.&lt;/p&gt;

&lt;p&gt;But if I call the second Link and then the Link on the mounted Page, the link is broken.&lt;br/&gt;
The context is missing in the generated link&lt;br/&gt;
	&lt;a href=&quot;http://localhost:8080/wicket/bookmarkable/com.mycompany.LinkedPage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/wicket/bookmarkable/com.mycompany.LinkedPage&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Does anyone have an idea, why the second link does not work on Tomcat?&lt;/p&gt;

&lt;p&gt;I add a Quickstart and the war file as attachment.&lt;/p&gt;

&lt;p&gt;Ps: Both links works fine in Jetty. &lt;br/&gt;
Pss:If I remove the mount command, both links will work in  Tomcat too.&lt;/p&gt;</description>
                <environment>Tomcat 7.0.41</environment>
        <key id="12654128">WICKET-5247</key>
            <summary>Broken Link in Tomcat because of Page Mount</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="martin wischnewski">Martin Wischnewski</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Jun 2013 11:43:38 +0000</created>
                <updated>Tue, 7 Feb 2017 22:25:09 +0000</updated>
                            <resolved>Fri, 21 Jun 2013 12:58:46 +0000</resolved>
                                    <version>6.8.0</version>
                                    <fixVersion>6.9.0</fixVersion>
                    <fixVersion>1.5.11</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket-quickstart</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13690221" author="svenmeier" created="Fri, 21 Jun 2013 12:20:23 +0000"  >&lt;p&gt;As a quick fix you can pass the PageParameters to the super constructor:&lt;/p&gt;

&lt;p&gt;	public MountedPage(PageParameters parameters) &lt;/p&gt;
{
		super(parameters);

		...
	}

&lt;p&gt;Otherwise there is no way for Wicket to know and use them in the generation of the mounted url.&lt;/p&gt;

&lt;p&gt;I will commit a fix that improves handling of this coding error.&lt;/p&gt;</comment>
                            <comment id="13690246" author="svenmeier" created="Fri, 21 Jun 2013 12:58:46 +0000"  >&lt;p&gt;the handler is no longer mapped by MountedMapper when the value for a required placeholder is&lt;br/&gt;
missing&lt;/p&gt;</comment>
                            <comment id="13690268" author="mgrigorov" created="Fri, 21 Jun 2013 13:25:55 +0000"  >&lt;p&gt;Sven,&lt;/p&gt;

&lt;p&gt;I see commits only in 6.x and master.&lt;br/&gt;
Did you forget to push to 1.5.x ? 1.5.11 is in &quot;Fix Version&quot;&lt;/p&gt;</comment>
                            <comment id="13690270" author="svenmeier" created="Fri, 21 Jun 2013 13:31:46 +0000"  >&lt;p&gt;Should have checked the console output - fatal: Authentication failed&lt;/p&gt;</comment>
                            <comment id="13690296" author="martin wischnewski" created="Fri, 21 Jun 2013 14:00:13 +0000"  >&lt;p&gt;Thanks for the quick fix!&lt;/p&gt;</comment>
                            <comment id="15856928" author="githubbot" created="Tue, 7 Feb 2017 22:25:09 +0000"  >&lt;p&gt;Github user martin-g commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/210#discussion_r99945970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/210#discussion_r99945970&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/core/request/mapper/MountedMapperTest.java &amp;#8212;&lt;br/&gt;
    @@ -714,7 +714,7 @@ public boolean isNewPageInstance()&lt;br/&gt;
     	@Test&lt;br/&gt;
     	public void placeholderEncode4()&lt;br/&gt;
     	{&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PageProvider provider = new PageProvider(new MockPage())&lt;br/&gt;
    +		PageProvider provider = new PageProvider(MockPage.class)
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I didn&apos;t understand you.&lt;br/&gt;
    ```java&lt;br/&gt;
    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5247&quot; title=&quot;Broken Link in Tomcat because of Page Mount&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5247&quot;&gt;&lt;del&gt;WICKET-5247&lt;/del&gt;&lt;/a&gt; page instantiated without required parameters won&apos;t be mapped&lt;br/&gt;
    	 */&lt;br/&gt;
    	@Test&lt;br/&gt;
    	public void placeholderEncode4()&lt;br/&gt;
    	{&lt;br/&gt;
    		PageProvider provider = new PageProvider(new MockPage())&lt;br/&gt;
    		
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {    			@Override    			public boolean isNewPageInstance()    			{
    				return false;
    			}    		}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;;&lt;br/&gt;
    		provider.setPageSource(context);&lt;br/&gt;
    		IRequestHandler handler = new RenderPageRequestHandler(provider);&lt;br/&gt;
    		Url url = placeholderEncoder.mapHandler(handler);&lt;br/&gt;
    		assertNull(url);&lt;br/&gt;
    	}&lt;br/&gt;
    ```&lt;br/&gt;
    The test setups a PageProvider and uses it. There is no replacement after.&lt;br/&gt;
    By making this change I think we don&apos;t test the same as what broke in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5247&quot; title=&quot;Broken Link in Tomcat because of Page Mount&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5247&quot;&gt;&lt;del&gt;WICKET-5247&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589048" name="quickstart.zip" size="26747" author="martin wischnewski" created="Fri, 21 Jun 2013 11:46:46 +0000"/>
                            <attachment id="12589049" name="webapp.war" size="2652628" author="martin wischnewski" created="Fri, 21 Jun 2013 11:46:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lop3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>