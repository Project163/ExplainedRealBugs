<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5560] A 404 error occurs when using a CryptoMapper</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5560</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Under certain prerequisites a 404 error occurs.&lt;/p&gt;

&lt;p&gt;The prerequisites are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A &lt;em&gt;CryptoMapper&lt;/em&gt; is used as &lt;em&gt;RequestMapper&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;&lt;em&gt;SecuritySettings.enforceMounts&lt;/em&gt; is set to true&lt;/li&gt;
	&lt;li&gt;Class &lt;em&gt;SomePage&lt;/em&gt; is &lt;b&gt;not&lt;/b&gt; annotated with &lt;em&gt;@MountPath&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Reason:&lt;br/&gt;
In &lt;em&gt;BookmarkableMapper.parseRequest&lt;/em&gt; (called indirectly by &lt;em&gt;CryptoMapper.mapRequest&lt;/em&gt;) the method &lt;em&gt;matches&lt;/em&gt; returns &lt;em&gt;false&lt;/em&gt;,&lt;br/&gt;
as &lt;em&gt;reverseUrl&lt;/em&gt; is the &lt;b&gt;encrypted URL&lt;/b&gt; (&lt;em&gt;rootRequestMapper&lt;/em&gt; is a &lt;em&gt;CryptoMapper&lt;/em&gt;) but &lt;em&gt;BookmarkableMapper.matches&lt;/em&gt; expects a &lt;b&gt;decrypted URL&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;BookmarkableMapper&lt;/em&gt; - lines 132 ff.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Url reverseUrl = application.getRootRequestMapper().mapHandler(
	&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RenderPageRequestHandler(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PageProvider(pageClass)));
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!matches(request.cloneWithUrl(reverseUrl)))
{
	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a result &lt;em&gt;BookmarkableMapper.mapRequest&lt;/em&gt; and hence &lt;em&gt;CryptoMapper.mapRequest&lt;/em&gt; returns &lt;em&gt;null&lt;/em&gt; resulting in a 404 error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12708825">WICKET-5560</key>
            <summary>A 404 error occurs when using a CryptoMapper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="papegaaij">Emond Papegaaij</assignee>
                                    <reporter username="dirk.reichelt">Dirk Reichelt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Apr 2014 16:33:58 +0000</created>
                <updated>Tue, 30 Sep 2014 16:11:16 +0000</updated>
                            <resolved>Mon, 5 May 2014 17:36:28 +0000</resolved>
                                    <version>6.14.0</version>
                    <version>7.0.0-M1</version>
                                    <fixVersion>6.16.0</fixVersion>
                    <fixVersion>7.0.0-M2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13972371" author="mgrigorov" created="Thu, 17 Apr 2014 07:49:00 +0000"  >&lt;p&gt;Please provide a quickstart application that shows the issue (&lt;a href=&quot;http://wicket.apache.org/start/quickstart.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wicket.apache.org/start/quickstart.html&lt;/a&gt;).&lt;br/&gt;
Please try to create it without @MountPath because this is not part of Wicket distro and thus is not officially supported by us.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13972860" author="dirk.reichelt" created="Thu, 17 Apr 2014 12:02:07 +0000"  >&lt;p&gt;Attachment wicket5560.zip contains a quickstart app showing the bug.&lt;br/&gt;
(click on &quot;Click here&quot; in the HomePage to trigger the 404 error)&lt;br/&gt;
TestHomePage contains a test that fails due to the bug.&lt;/p&gt;</comment>
                            <comment id="13982399" author="bitstorm" created="Sun, 27 Apr 2014 17:27:02 +0000"  >&lt;p&gt;A possible solution could be to use method checkPageClass of AbstractBookmarkableMapper to see if the page class is mounted. See patch (for branch master!).&lt;/p&gt;</comment>
                            <comment id="13988765" author="bitstorm" created="Sat, 3 May 2014 17:39:03 +0000"  >&lt;p&gt;I&apos;ve improved my patch and I&apos;ve added Sven to this issue since he solved &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5094&quot; title=&quot;ISecuritySettings#getEnforceMounts(true) prevents access to *all* non-mounted bookmarkable pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5094&quot;&gt;&lt;del&gt;WICKET-5094&lt;/del&gt;&lt;/a&gt;. Please review my solution.&lt;/p&gt;</comment>
                            <comment id="13989305" author="svenmeier" created="Mon, 5 May 2014 06:09:09 +0000"  >&lt;p&gt;My &apos;fix&apos; to &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5094&quot; title=&quot;ISecuritySettings#getEnforceMounts(true) prevents access to *all* non-mounted bookmarkable pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5094&quot;&gt;&lt;del&gt;WICKET-5094&lt;/del&gt;&lt;/a&gt; does not work here - my bad :/,&lt;/p&gt;

&lt;p&gt;Thanks for the patch, it looks good to me.&lt;br/&gt;
I don&apos;t like the method name #isMapperMounted() though. Couldn&apos;t we just test whether any other non-BookmarkableMapper accepts the pageClass:&lt;/p&gt;

&lt;p&gt;  if (requestMapper instanceof AbstractBookmarkableMapper &amp;amp;&amp;amp; requestMapper != this)&lt;br/&gt;
  {&lt;br/&gt;
    AbstractBookmarkableMapper mapper = (AbstractBookmarkableMapper) requestMapper;  &lt;br/&gt;
    if(mapper.checkPageClass(pageClass))&lt;/p&gt;
    {
      return true;
    }
&lt;p&gt;  }&lt;/p&gt;</comment>
                            <comment id="13989472" author="bitstorm" created="Mon, 5 May 2014 12:46:59 +0000"  >&lt;p&gt;Yes, I guess we can keep it simpler with your suggestion. I will try to commit a fix with a test as soon as possible. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12744984">WICKET-5712</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643218" name="wicket5560.patch" size="8728" author="bitstorm" created="Sat, 3 May 2014 17:42:30 +0000"/>
                            <attachment id="12640618" name="wicket5560.zip" size="23318" author="dirk.reichelt" created="Thu, 17 Apr 2014 11:58:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uoy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>