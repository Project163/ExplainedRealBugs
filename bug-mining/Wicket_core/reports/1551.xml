<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6902] Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6902</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In wicket 8 it was possible to call AjaxRequestTarget.prependJavaScript from within IListener.onAfterRespond. &lt;/p&gt;

&lt;p&gt;A change in:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/wicket/commit/b7f62a6591ea3e98374079555c877ba70ba30286#diff-d78837c7a0946ee5118aea1054d96c774a7d381d16dc5374ea87e7f018c6be94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/commit/b7f62a6591ea3e98374079555c877ba70ba30286#diff-d78837c7a0946ee5118aea1054d96c774a7d381d16dc5374ea87e7f018c6be94&lt;/a&gt;&lt;br/&gt;
was made, that switched the order of writePriorityEvaluations and onAfterRespond calls.&lt;/p&gt;

&lt;p&gt;The javadoc of IListener.onAfterRespond states:&lt;br/&gt;
&quot;NOTE: During this stage of processing any calls to target that manipulate the response (adding components, javascript) will have no effect&quot;&lt;br/&gt;
This statement is problematic, because it has not been correct in wicket 8. There it was possible to prepend and append javascripts to the current AjaxRequestTarget at that stage. Now it is no longer possible to prepend javascripts, but still possible to append them.&lt;br/&gt;
In AjaxRequestHandler (line 148) there is a comment: &quot;create response that will be used by listeners to append javascript&quot;. This implies, that it should be possible to add javascripts somehow.&lt;/p&gt;

&lt;p&gt;Clarification needed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Why has the order been changed in the first place? Was it related to a fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6703&quot; title=&quot;Eliminate window.eval from wicket-ajax-jquery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6703&quot;&gt;&lt;del&gt;WICKET-6703&lt;/del&gt;&lt;/a&gt;?&lt;/li&gt;
	&lt;li&gt;Is the javadoc correct? When why can javascripts still be appended?&lt;/li&gt;
	&lt;li&gt;Can the PartialPageUpdate use Freezing to throw Exceptions whenever things are added too late and are already written? Like in AjaxRequestHandler.listenersFrozen. The current behavior (simply ignoring scripts) is error prone and made our application fail silently at runtime.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13389842">WICKET-6902</key>
            <summary>Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="tobiashaupt">Tobias Haupt</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jul 2021 13:07:07 +0000</created>
                <updated>Fri, 23 Jul 2021 15:40:04 +0000</updated>
                            <resolved>Tue, 20 Jul 2021 11:02:58 +0000</resolved>
                                    <version>9.3.0</version>
                                    <fixVersion>10.0.0-M1</fixVersion>
                    <fixVersion>9.5.0</fixVersion>
                                    <component>wicket-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17382590" author="jira-bot" created="Sat, 17 Jul 2021 15:29:55 +0000"  >&lt;p&gt;Commit 1f2064274c8c5385e66a71ff3445bdf84871561a in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt;-js-after-components from Sven Meier&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=1f20642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=1f20642&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt; allow prepend and append&lt;/p&gt;

&lt;p&gt;up-to including #onAfterRespond()&lt;/p&gt;</comment>
                            <comment id="17382600" author="svenmeier" created="Sat, 17 Jul 2021 15:47:22 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tobiashaupt&quot; class=&quot;user-hover&quot; rel=&quot;tobiashaupt&quot;&gt;tobiashaupt&lt;/a&gt; you&apos;re right. Apparently the documentation was out of sync of the actual implementation.&lt;/p&gt;

&lt;p&gt;I don&apos;t see a reason why we should limit the possibilities to append or prepend JavaScript, as I have done inadvertently in Wicket 9.x.&lt;br/&gt;
Thus I reverted the offending code location on branch &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt;-js-after-components, including fixes to the documentation. I&apos;ve deprecated AjaxRequestTarget.IJavaScriptResponse, since we can just pass the AjaxRequestTarget to AjaxRequestTarget.IListener.onAfterRespond instead, since both appendJavaScript() and prependJavaScript() can be used (as you did it)..&lt;/p&gt;</comment>
                            <comment id="17383035" author="tobiashaupt" created="Mon, 19 Jul 2021 06:27:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt; Thanks for the clarification and fix. I looked over the code changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt;-js-after-components and can see that I can revert the fix I added to our application when this will be released. Thank you.&lt;/p&gt;</comment>
                            <comment id="17383886" author="jira-bot" created="Tue, 20 Jul 2021 08:34:30 +0000"  >&lt;p&gt;Commit 23c1584636d374ee380a8f5b9fb25aef969ee3f8 in wicket&apos;s branch refs/heads/wicket-9.x from Sven Meier&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=23c1584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=23c1584&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt; allow prepend and append&lt;/p&gt;

&lt;p&gt;up-to including #onAfterRespond()&lt;/p&gt;</comment>
                            <comment id="17383903" author="jira-bot" created="Tue, 20 Jul 2021 08:51:17 +0000"  >&lt;p&gt;Commit fa65fd754ca9345dd966d04204521d7edbe645ec in wicket&apos;s branch refs/heads/master from Sven Meier&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=fa65fd7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=fa65fd7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt; allow prepend and append&lt;/p&gt;

&lt;p&gt;up-to including #onAfterRespond()&lt;/p&gt;</comment>
                            <comment id="17384079" author="svenmeier" created="Tue, 20 Jul 2021 11:02:58 +0000"  >&lt;p&gt;Many thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tobiashaupt&quot; class=&quot;user-hover&quot; rel=&quot;tobiashaupt&quot;&gt;tobiashaupt&lt;/a&gt; for reporting, these details matter.&lt;/p&gt;</comment>
                            <comment id="17386321" author="jira-bot" created="Fri, 23 Jul 2021 15:40:04 +0000"  >&lt;p&gt;Commit fa65fd754ca9345dd966d04204521d7edbe645ec in wicket&apos;s branch refs/heads/remove-queuing from Sven Meier&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=fa65fd7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=fa65fd7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6902&quot; title=&quot;Change of PartialPageUpdate order of onAfterResponse and writePriorityEvaluations makes IListener.onAfterResponde ignore prepended javascripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6902&quot;&gt;&lt;del&gt;WICKET-6902&lt;/del&gt;&lt;/a&gt; allow prepend and append&lt;/p&gt;

&lt;p&gt;up-to including #onAfterRespond()&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13030669" name="prependjs-quickstart.zip" size="44640" author="tobiashaupt" created="Thu, 15 Jul 2021 13:04:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0szbs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>