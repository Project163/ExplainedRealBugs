<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:26:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6877] Removing component&apos;s MetaData during detach phase from within a Behavior causes issue</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6877</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When removing a component&apos;s MetaData entry from within a Behavior&apos;s &lt;tt&gt;detach(Component component)&lt;/tt&gt; method, Wicket can run into issues due to a loop index being out of sync with the array it is iterating over.&lt;/p&gt;

&lt;p&gt;The attached quickstart shows the problem in the log when the HomePage is opened.&lt;/p&gt;

&lt;p&gt;Explanation:&lt;br/&gt;
The included VisibilityBehavior class adds a MetaData entry to the component it is attached to. Upon detaching the Behavior this MetaData entry is set to null again. Setting a MetaData entry to null removes it from the component&apos;s data array, moving all elements following it further up in the array.&lt;/p&gt;

&lt;p&gt;State captured in &lt;tt&gt;org.apache.wicket.Behaviors.detach(Component)&lt;/tt&gt;:&lt;/p&gt;

&lt;p&gt;Right before detaching the Behavior:&lt;br/&gt;
 Loop index &quot;i&quot; = 2&lt;br/&gt;
 Content of the component&apos;s &quot;data&quot; array:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; the component&apos;s Model&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; the MetaDataEntry belonging to the described Behavior&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; the Behavior itself&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; an AttributeModifier with a StringResourceModel&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Start of next iteration after the Behavior was detached&lt;br/&gt;
 Loop index &quot;i&quot; = 3&lt;br/&gt;
 Content of the component&apos;s &quot;data&quot; array:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; the component&apos;s Model&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; the Behavior itself&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; an AttributeModifier with a StringResourceModel&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Result:&lt;br/&gt;
 The AttributeModifier is skipped and doesn&apos;t get detached, resulting in the NotDetachedModelChecker reporting a not detached model in the AttributeModifier, when the HomePage gets opened.&lt;/p&gt;

&lt;p&gt;This might be fixable with the suggested separation of Models, Behaviors and MetaData from &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6774&quot; title=&quot;Separate model, behaviors and metadata into separate fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6774&quot;&gt;WICKET-6774&lt;/a&gt;. Alternatively Wicket could maybe raise an exception or log a warning if the size of the data field changed during detaching.&lt;/p&gt;

&lt;p&gt;The problem was first discovered in 8.10.0 and reproduced with 9.3.0 in the quickstart.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13372109">WICKET-6877</key>
            <summary>Removing component&apos;s MetaData during detach phase from within a Behavior causes issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="DRaduenz">Daniel Rad&#252;nz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2021 19:05:13 +0000</created>
                <updated>Tue, 20 Apr 2021 12:25:22 +0000</updated>
                            <resolved>Mon, 19 Apr 2021 13:44:08 +0000</resolved>
                                    <version>9.3.0</version>
                    <version>8.12.0</version>
                                    <fixVersion>9.4.0</fixVersion>
                    <fixVersion>8.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17325035" author="jira-bot" created="Mon, 19 Apr 2021 13:34:53 +0000"  >&lt;p&gt;Commit e11bc07c1b147c55766638ecaba899956505857b in wicket&apos;s branch refs/heads/master from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e11bc07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e11bc07&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Removing component&apos;s MetaData during detach phase from within a Behavior causes issue&lt;/p&gt;

&lt;p&gt;Reset the iteration index and upper bound while detaching Component&apos;s behaviors if the Behavior modifies the Component&apos;s data anyhow&lt;/p&gt;</comment>
                            <comment id="17325041" author="jira-bot" created="Mon, 19 Apr 2021 13:43:08 +0000"  >&lt;p&gt;Commit c8637e62bc385069b3e0fbbc45c2d2b797bedf6f in wicket&apos;s branch refs/heads/master from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=c8637e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=c8637e6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Fix few typos&lt;/p&gt;</comment>
                            <comment id="17325043" author="jira-bot" created="Mon, 19 Apr 2021 13:43:57 +0000"  >&lt;p&gt;Commit 2c46ad329e25056a32fb765e642457fa176f82c5 in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=2c46ad3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=2c46ad3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Removing component&apos;s MetaData during detach phase from within a Behavior causes issue&lt;/p&gt;

&lt;p&gt;Reset the iteration index and upper bound while detaching Component&apos;s behaviors if the Behavior modifies the Component&apos;s data anyhow&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e11bc07c1b147c55766638ecaba899956505857b)&lt;/p&gt;</comment>
                            <comment id="17325044" author="jira-bot" created="Mon, 19 Apr 2021 13:43:59 +0000"  >&lt;p&gt;Commit f4e22406b6a8467c57ea0c253e9cf350db8f91e3 in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=f4e2240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=f4e2240&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Fix few typos&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c8637e62bc385069b3e0fbbc45c2d2b797bedf6f)&lt;/p&gt;</comment>
                            <comment id="17325748" author="jira-bot" created="Tue, 20 Apr 2021 12:25:20 +0000"  >&lt;p&gt;Commit e11bc07c1b147c55766638ecaba899956505857b in wicket&apos;s branch refs/heads/wicket-9.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e11bc07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=e11bc07&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Removing component&apos;s MetaData during detach phase from within a Behavior causes issue&lt;/p&gt;

&lt;p&gt;Reset the iteration index and upper bound while detaching Component&apos;s behaviors if the Behavior modifies the Component&apos;s data anyhow&lt;/p&gt;</comment>
                            <comment id="17325749" author="jira-bot" created="Tue, 20 Apr 2021 12:25:22 +0000"  >&lt;p&gt;Commit c8637e62bc385069b3e0fbbc45c2d2b797bedf6f in wicket&apos;s branch refs/heads/wicket-9.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=wicket.git;h=c8637e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=wicket.git;h=c8637e6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6877&quot; title=&quot;Removing component&amp;#39;s MetaData during detach phase from within a Behavior causes issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6877&quot;&gt;&lt;del&gt;WICKET-6877&lt;/del&gt;&lt;/a&gt; Fix few typos&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13023798" name="quickstart.zip" size="26335" author="DRaduenz" created="Tue, 13 Apr 2021 19:00:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0py40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>