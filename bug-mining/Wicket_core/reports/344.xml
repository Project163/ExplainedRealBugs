<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:18:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3919] RequestLogger generates log entries that are not parsable</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3919</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The current (default) request logger generates logs that are not parsable by automated tools. The identifiers and values give many collisions with keywords, making it impossible to create an efficient ANTLR parser/lexer for it.&lt;/p&gt;

&lt;p&gt;A couple of observations:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the log is not parsable due to inconsistent logging of log parts. For example [ResourceStreamRequestTarget[[]] generates an unbalanced number of brackets&lt;/li&gt;
	&lt;li&gt;some parts are joined by &apos;,&apos; and others are joined by &apos;, &apos; (notice the extra whitespace)&lt;/li&gt;
	&lt;li&gt;it is not possible to retrieve parts of the logs because keywords, identifiers and values share the same namespace. A page parameter with name &apos;event&apos; would choke a LL&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; parser since the lexer will render a keyword instead of a value&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Possible solutions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix the current format to become consistent and parsable, by surrounding identifiers and values with single quotes and escaping single quotes inside the identifiers and values, and fixing other issues&lt;/li&gt;
	&lt;li&gt;render JSON instead of the current format (in my opinion best done in a separate JSonRequestLogger)&lt;/li&gt;
	&lt;li&gt;???&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12514592">WICKET-3919</key>
            <summary>RequestLogger generates log entries that are not parsable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="dashorst">Martijn Dashorst</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2011 13:48:39 +0000</created>
                <updated>Thu, 11 Aug 2011 15:11:21 +0000</updated>
                            <resolved>Thu, 11 Aug 2011 15:11:21 +0000</resolved>
                                    <version>1.5-RC5.1</version>
                                    <fixVersion>1.5-RC6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13068684" author="bitstorm" created="Wed, 20 Jul 2011 22:43:55 +0000"  >&lt;p&gt;Adopting JSON format is a good idea. Do you think we should create also an &quot;AbstractRequestLogger&quot; with common utility methods (like copyRequestsInOrder, objectCreated and so on)?&lt;/p&gt;

&lt;p&gt;Since there&apos;s no test  for RequestLogger, I&apos;ve created  a basic test case which can  be used to test logs generation. I&apos;ve attached it to issue.&lt;/p&gt;</comment>
                            <comment id="13070852" author="dashorst" created="Mon, 25 Jul 2011 23:10:12 +0000"  >&lt;p&gt;Run the patch against wicket-core, not tested yet.&lt;/p&gt;</comment>
                            <comment id="13071714" author="bitstorm" created="Wed, 27 Jul 2011 13:25:45 +0000"  >&lt;p&gt;I&apos;m starting now writing some tests. I will post the test case as soon as possible (probably tomorrow)&lt;/p&gt;</comment>
                            <comment id="13071727" author="mgrigorov" created="Wed, 27 Jul 2011 13:42:44 +0000"  >&lt;p&gt;Since Martijn is in vacation it will be good if Emond (Martijn&apos;s colleague) also add some feedback about their experience so far.&lt;/p&gt;</comment>
                            <comment id="13072227" author="papegaaij" created="Thu, 28 Jul 2011 07:23:31 +0000"  >&lt;p&gt;Unfortunately, I don&apos;t have the time at the moment to test the code. But in my opinion this is not the way to go. This approach has several major problems. First of all, writing loggers for different formatters is a lot of work, with lots of code duplication. Imagine you have to do this for other formats, such as XML or serialised objects as well. Second, it is very error prone. Escaping the strings for different formats is not a easy as it seems, and with formats like JSON you really have to watch things like commas. However, my major concern is that the logger has to know about every request handler that will ever be written.&lt;/p&gt;

&lt;p&gt;I think the relation between the handlers and logger should be reversed. The handler should be responsible for providing the logger with information. This information should be structured in POJOs rather than flat strings. The logger is responsible for writing these objects to a stream in whatever format you like. You could even use Java Serialization.&lt;/p&gt;

&lt;p&gt;I know it is too late for such a change to go in IRequestHandler in Wicket 1.5, therefore I propose the following solution:&lt;br/&gt;
For now, we fine tune these patches, and have them go in Wicket 1.5.&lt;br/&gt;
At some point in the near future (still 1.5, but probably after .0), we introduce a ILoggableRequestHandler and let all request handlers implement this interface. The current IRequestLogger infrastructure can still be used for this, especially with Martijn&apos;s patches, because they give access to the handlers themselves, rather than the logged strings.&lt;/p&gt;</comment>
                            <comment id="13072288" author="bitstorm" created="Thu, 28 Jul 2011 10:30:30 +0000"  >&lt;p&gt;I&apos;m quite agree with you Emond, but I also think that this patch must be somehow tested with a test case which checks the generated logs. &lt;/p&gt;

&lt;p&gt;Since Wicket makes an heavy use of slf4j I&apos;m trying to understand how to use a custom Logger to keep track of generated logs and test them against expected string format.&lt;br/&gt;
Has anyone experience of using custom slf4j Logger? &lt;/p&gt;</comment>
                            <comment id="13072299" author="mgrigorov" created="Thu, 28 Jul 2011 11:10:51 +0000"  >&lt;p&gt;wicket-core tests use slf4j-log4j12 so you can rely on log4j for this test.&lt;br/&gt;
It will be tricky to include a second slfj4 impl. slf4j binds very early against the impl and even shows errors in the logs if you have more than one impl in the classpath.&lt;/p&gt;

&lt;p&gt;But Emond&apos;s idea is to save the data in a POJO and then different IRequestLogger impls will pass that data to different serializers (JSON, XML, ...), and then the produced output will be either passed to slf4j or saved in a separate file (why not one per session?!). So testing the serialization is enough, no need to test saving in files, writing to stdout or anything like that. &lt;/p&gt;</comment>
                            <comment id="13072330" author="bitstorm" created="Thu, 28 Jul 2011 13:11:12 +0000"  >&lt;p&gt;Sorry, I didn&apos;t specify that the test I meant is about Martijn&apos;s patch (file JsonAndImprovedRequestLogger.txt), if we decide to release it with Wicket 1.5. &lt;/p&gt;</comment>
                            <comment id="13081868" author="ivaynberg" created="Tue, 9 Aug 2011 19:40:35 +0000"  >&lt;p&gt;lets not let this hold up the release. since request loggers are pluggable as long as the current impl has no major problems lets release it as is and later add the json one.&lt;/p&gt;</comment>
                            <comment id="13083152" author="mgrigorov" created="Thu, 11 Aug 2011 15:08:34 +0000"  >&lt;p&gt;Attaching the updated request logger that logs the collected data in JSON format.&lt;br/&gt;
It hasn&apos;t been included in Wicket core until we decide how actually to log the data.  &lt;/p&gt;</comment>
                            <comment id="13083153" author="mgrigorov" created="Thu, 11 Aug 2011 15:11:21 +0000"  >&lt;p&gt;With r1156643 I committed the patch provided by Martijn Dashorst with minor fixes and without JSON based request logger.&lt;br/&gt;
The updated JSON based logger is attached to the ticket and can be used by any user application. It wont be included in the distribution until we decide what will be the architecture. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12487773" name="JsonAndImprovedRequestLogger.txt" size="53745" author="dashorst" created="Mon, 25 Jul 2011 23:10:12 +0000"/>
                            <attachment id="12490120" name="JsonRequestLogger.java" size="10755" author="mgrigorov" created="Thu, 11 Aug 2011 15:08:34 +0000"/>
                            <attachment id="12487228" name="RequestLoggerTest.java" size="3481" author="bitstorm" created="Wed, 20 Jul 2011 22:44:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k9pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>