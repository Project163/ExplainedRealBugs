<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6403] DropDownChoice ignores OnChangeAjaxBehavior while setting null value when required is true</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6403</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I have a simple DropDown with OnChangeAjaxBehavior:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; choices = Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;three&quot;&lt;/span&gt;);
IModel&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; wicketModel = Model.of();
DropDownChoice&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; wicketDropDown = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DropDownChoice&amp;lt;&amp;gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;wicketDropDown&quot;&lt;/span&gt;,wicketModel , ListModel.of(choices));
wicketDropDown.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OnChangeAjaxBehavior() {
	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void onUpdate(AjaxRequestTarget target) {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Wicket change: &quot;&lt;/span&gt;+wicketModel.getObject());
	}
});
add(wicketDropDown);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;onUpdate is called everytime I change the value &lt;b&gt;even if this value is &quot;null value&quot;&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Now when instead of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;add(wicketDropDown);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;add(wicketDropDown.setRequired(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;onUpdate works on selecting values but &lt;b&gt;does not work when selecting &quot;null value&quot;&lt;/b&gt; which is wrong. &lt;br/&gt;
One of the use cases why it is wrong: I have two dropdowns. First dropdown selects &lt;em&gt;Group&lt;/em&gt; and second selects &lt;em&gt;Subgroup&lt;/em&gt;. &lt;em&gt;Subgroup&lt;/em&gt; can not be selected if &lt;em&gt;Group&lt;/em&gt; is null, though if I select &lt;em&gt;Group&lt;/em&gt;, then I select &lt;em&gt;Subgroup&lt;/em&gt; and then clear the &lt;em&gt;Group&lt;/em&gt; - &lt;em&gt;Subgroup&lt;/em&gt; should be cleared as well (but I&apos;m not able to do that because onUpdate is not being called).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080833">WICKET-6403</key>
            <summary>DropDownChoice ignores OnChangeAjaxBehavior while setting null value when required is true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="eximius">Kamil</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2017 13:33:46 +0000</created>
                <updated>Wed, 21 Jun 2017 17:36:27 +0000</updated>
                            <resolved>Wed, 21 Jun 2017 17:36:27 +0000</resolved>
                                    <version>8.0.0-M6</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16054010" author="mgrigorov" created="Mon, 19 Jun 2017 13:41:24 +0000"  >&lt;p&gt;Is JavaScript &apos;change&apos; event called on the &amp;lt;select&amp;gt; when you select the null value ?&lt;br/&gt;
If the JS event is not triggered by the browser then Wicket won&apos;t be notified to make its Ajax call with the update.&lt;/p&gt;</comment>
                            <comment id="16054249" author="svenmeier" created="Mon, 19 Jun 2017 15:59:28 +0000"  >&lt;p&gt;I would expect #onError() to be called, have you checked this?&lt;/p&gt;</comment>
                            <comment id="16055922" author="eximius" created="Tue, 20 Jun 2017 15:17:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt; as I said - all events work fine when &quot;setRequired(true)&quot; is not set and I believe that this property is not propagated to HTML, so it is something in wicket&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt; yes, OnChangeAjaxBehavior#onError is being called, but this should not be an &quot;error&quot; since &lt;b&gt;value in dropdown has been changed&lt;/b&gt; causing inconsistency (because value in Model stays old but user thinks that he changed the value. This could be ok if JS on the client side would prevent dropdown to change)&lt;/p&gt;

&lt;p&gt;In my opinion setting &quot;null value&quot; should update the model and call &quot;onUpdate&quot; because update on the user side has been allowed and done. If user hits save while the value is null - It will just not pass validation error, but this is perfectly valid scenario.&lt;/p&gt;</comment>
                            <comment id="16055931" author="mgrigorov" created="Tue, 20 Jun 2017 15:24:18 +0000"  >&lt;p&gt;As Sven suggested - this is by design.&lt;br/&gt;
With &quot;setRequired(true)&quot; you say &quot;null is not a valid value&quot;. So onError() is called.&lt;br/&gt;
For your use case you may need to introduce a custom NullObject for your domain.&lt;/p&gt;</comment>
                            <comment id="16056113" author="svenmeier" created="Tue, 20 Jun 2017 17:16:44 +0000"  >&lt;p&gt;This is the same for any other illegal value entered into a TextField:&lt;/p&gt;

&lt;p&gt;The FormComponent keeps its old model object.&lt;/p&gt;

&lt;p&gt;What&apos;s your problem you&apos;re trying to solve?&lt;/p&gt;</comment>
                            <comment id="16057349" author="eximius" created="Wed, 21 Jun 2017 11:33:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt; I&apos;m trying to make Wicket better. Sometimes, when you are new to the project, but have expertise in different field, you can spot things that are weird or unnatural. In my opinion - this is one of this things.&lt;/p&gt;
</comment>
                            <comment id="16057425" author="eximius" created="Wed, 21 Jun 2017 12:58:19 +0000"  >&lt;p&gt;Maybe we could put this case in documentation&lt;/p&gt;</comment>
                            <comment id="16057890" author="jira-bot" created="Wed, 21 Jun 2017 17:35:39 +0000"  >&lt;p&gt;Commit eeb0c6de3f335073816f6cf0d30925b8d7f333ad in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=eeb0c6d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=eeb0c6d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6403&quot; title=&quot;DropDownChoice ignores OnChangeAjaxBehavior while setting null value when required is true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6403&quot;&gt;&lt;del&gt;WICKET-6403&lt;/del&gt;&lt;/a&gt; add reference to onError on onUpdate&lt;/p&gt;</comment>
                            <comment id="16057893" author="svenmeier" created="Wed, 21 Jun 2017 17:36:27 +0000"  >&lt;p&gt;I&apos;ve added some javadoc to #onUpdate.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gg1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>