<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5291] Dependencies of Resource Bundle References are ignored</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5291</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When several resource references are bundled, the bundle inherits the dependencies of all included resource references. Those dependencies are not evaluated when a header item is created from an included reference and rendered to the response (in ResourceAggregator). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12660034">WICKET-5291</key>
            <summary>Dependencies of Resource Bundle References are ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="papegaaij">Emond Papegaaij</assignee>
                                    <reporter username="tobiashaupt">Tobias Haupt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jul 2013 11:50:44 +0000</created>
                <updated>Tue, 24 Sep 2013 08:28:52 +0000</updated>
                            <resolved>Mon, 29 Jul 2013 10:28:47 +0000</resolved>
                                    <version>6.9.1</version>
                                    <fixVersion>6.10.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13720706" author="tobiashaupt" created="Fri, 26 Jul 2013 11:53:59 +0000"  >&lt;p&gt;The quickstart shows a page with 2 components on it. Each of the component references a css resource which itself has a dependency to an aditional css resource (that allways should be rendered first). If both divs (one for each panel) are rendered GREEN, the dependencies are in the correct order. If one is rendered RED, the order is not as defined.&lt;br/&gt;
A resource bundle is created in the web application that concats the two primary css resources into one file. If the bundle is not registered, everything works fine.&lt;/p&gt;</comment>
                            <comment id="13720711" author="tobiashaupt" created="Fri, 26 Jul 2013 12:01:52 +0000"  >&lt;p&gt;In ResourceAggregator every recorded item will be rendered in the specified order (child first, filtering etc.). When an item is recorded, the dependencies are recorded first.&lt;/p&gt;

&lt;p&gt;The bundle resolving is triggered later, when all recorded items will be rendered to the real response. In getItemToBeRendered(HeaderItem item) items that belong to a bundle are replaced with that bundle. This may result in a bundle beeing rendered before all dependencies of the inculded items are rendered. &lt;/p&gt;

&lt;p&gt;Bundles should be searched for at recording time, not at real rendering time.&lt;/p&gt;</comment>
                            <comment id="13722330" author="papegaaij" created="Mon, 29 Jul 2013 10:28:47 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                            <comment id="13774668" author="mgrigorov" created="Mon, 23 Sep 2013 16:04:17 +0000"  >&lt;p&gt;This fix seems to break a use case - org.apache.wicket.markup.head.ResourceAggregator#getItemToBeRendered may return a bundle for a HeaderItem, but if the header item is PriorityHeaderItem then the bundle looses the priority status and later org.apache.wicket.markup.head.PriorityFirstComparator#compare has no information about the priority and doesn&apos;t sort properly.&lt;/p&gt;

&lt;p&gt;I have to create a proper unit test but the following change seems to fix the problem with our app:&lt;/p&gt;

&lt;p&gt;&amp;#8212; i/wicket-core/src/main/java/org/apache/wicket/markup/head/ResourceAggregator.java&lt;br/&gt;
+++ w/wicket-core/src/main/java/org/apache/wicket/markup/head/ResourceAggregator.java&lt;br/&gt;
@@ -400,6 +400,19 @@ public class ResourceAggregator extends DecoratingHeaderResponse&lt;br/&gt;
                }&lt;/p&gt;

&lt;p&gt;                HeaderItem bundle = Application.get().getResourceBundles().findBundle(innerItem);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return bundle == null ? item : bundle;&lt;br/&gt;
+               HeaderItem itemToBeRendered;&lt;br/&gt;
+               if (bundle == null)&lt;br/&gt;
+               
{
+                       itemToBeRendered = item;
+               }
&lt;p&gt;+               else if (item instanceof PriorityHeaderItem)&lt;br/&gt;
+               &lt;/p&gt;
{
+                       itemToBeRendered = new PriorityHeaderItem(bundle);
+               }
&lt;p&gt;+               else&lt;br/&gt;
+               &lt;/p&gt;
{
+                       itemToBeRendered = bundle;
+               }
&lt;p&gt;+               return itemToBeRendered;&lt;br/&gt;
        }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12670229">WICKET-5366</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12594376" name="quickstart_bundle.zip" size="34653" author="tobiashaupt" created="Fri, 26 Jul 2013 11:53:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mohz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>