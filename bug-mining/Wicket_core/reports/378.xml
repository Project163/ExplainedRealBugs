<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4030] HeaderResponse.renderCSSReference does not render context path relative url, but wicket filter url-pattern relative url</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4030</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In an application with a wicket filter url-pattern different than /*, if you use HeaderResponse.renderCSSReference(String url), where url is a context-path-relative url (css/main.css, for example), the generated css link is not context relative, but wicket url-pattern relative.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521434">WICKET-4030</key>
            <summary>HeaderResponse.renderCSSReference does not render context path relative url, but wicket filter url-pattern relative url</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivaynberg">Igor Vaynberg</assignee>
                                    <reporter username="msotil">Matteo Sotil</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2011 10:29:39 +0000</created>
                <updated>Tue, 13 Sep 2011 21:04:04 +0000</updated>
                            <resolved>Tue, 13 Sep 2011 21:04:04 +0000</resolved>
                                    <version>1.5-RC7</version>
                                    <fixVersion>1.5.1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13097876" author="msotil" created="Tue, 6 Sep 2011 10:33:02 +0000"  >&lt;p&gt;Quickstart of the issue. Execute Start, go to &lt;a href=&quot;http://localhost:8080/contextPath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/contextPath&lt;/a&gt;. If renderCSSReference worked properly, background color should be red (that means css is loaded correctly), but it is not.&lt;/p&gt;</comment>
                            <comment id="13098144" author="pete" created="Tue, 6 Sep 2011 16:34:12 +0000"  >&lt;p&gt;The problem is:&lt;/p&gt;

&lt;p&gt;response.renderCSSReference(path) expects a context-relative&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; path (see javadoc). This is not to be confused with the effective path that get&apos;s rendered.&lt;/p&gt;

&lt;p&gt;basically what you did wrong is call&lt;/p&gt;

&lt;p&gt;  response.renderCSSReference(&quot;../css/main.css&quot;) &lt;/p&gt;

&lt;p&gt;when instead you should use the &lt;em&gt;context-relative&lt;/em&gt; path (relative to &quot;/contextPath&quot; in your sample).&lt;/p&gt;

&lt;p&gt;So the correct method call is&lt;/p&gt;

&lt;p&gt;  response.renderCSSReference(&quot;css/main.css&quot;) &lt;/p&gt;

&lt;p&gt;It will work no matter how you mount your home page or if you mount it at all. In any case wicket will generate the required number of &quot;..&quot; in the path.&lt;/p&gt;</comment>
                            <comment id="13098651" author="msotil" created="Wed, 7 Sep 2011 06:38:48 +0000"  >&lt;p&gt;In fact, response.renderCSSReference(&quot;css/main.css&quot;)  was the first thing I tried, but it did&apos;nt work.&lt;/p&gt;

&lt;p&gt;Now I see that the real condition to reproduce the issue is using a wicket filter url pattern different than /*. I&apos;ve updated issue summary, description and quickstart to reflect it. In quickstart, I changed wicket filter mapping like this:&lt;/p&gt;

&lt;p&gt;        &amp;lt;filter-mapping&amp;gt;&lt;br/&gt;
		&amp;lt;filter-name&amp;gt;wicket.myproject&amp;lt;/filter-name&amp;gt;&lt;br/&gt;
		&amp;lt;url-pattern&amp;gt;/wicket/*&amp;lt;/url-pattern&amp;gt;&lt;br/&gt;
	&amp;lt;/filter-mapping&amp;gt;&lt;/p&gt;

&lt;p&gt;Now context path is /*, HomePage is not mounted, so application url is &lt;a href=&quot;http://localhost:8080/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/wicket&lt;/a&gt;.&lt;br/&gt;
Now I use response.renderCSSReference(&quot;css/main.css&quot;) as should be. &lt;/p&gt;

&lt;p&gt;You will see that generated href is css/main.css, wich points to &lt;a href=&quot;http://localhost:8080/wicket/css/main.css&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/wicket/css/main.css&lt;/a&gt;, when it should be ../css/main.css to point to &lt;a href=&quot;http://localhost:8080/css/main.css&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/css/main.css&lt;/a&gt;, because css path passed to renderCSSReference should be &lt;em&gt;context-relative&lt;/em&gt; path, and not wicket-filter-url-pattern relative, isn&apos;t it?.&lt;/p&gt;</comment>
                            <comment id="13098654" author="msotil" created="Wed, 7 Sep 2011 06:44:04 +0000"  >&lt;p&gt;I update quickstart to reflect new conditions required to reproduce the issue.&lt;br/&gt;
Execute Start, go to &lt;a href=&quot;http://localhost:8080/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/wicket&lt;/a&gt;. If renderCSSReference worked properly, background color should be red (that means css is loaded correctly), but it is not. &lt;/p&gt;</comment>
                            <comment id="13098877" author="pete" created="Wed, 7 Sep 2011 12:22:25 +0000"  >&lt;p&gt;@Matteo: Indeed the current javadoc is wrong. The rendering happens relative to wicket filter root both in current wicket release 1.4.18 and 1.5.0. I sent a mail to the developer mailing list to clarify that issue. Currently the solution will be to properly escape the filter path with &apos;..&apos; to access context relative resources.&lt;/p&gt;</comment>
                            <comment id="13098898" author="pete" created="Wed, 7 Sep 2011 12:43:47 +0000"  >&lt;p&gt;added patch in case we want to fix this...&lt;/p&gt;</comment>
                            <comment id="13102711" author="mgrigorov" created="Mon, 12 Sep 2011 14:56:26 +0000"  >&lt;p&gt;@Igor: do you know what is the expected behavior of this method ?&lt;/p&gt;</comment>
                            <comment id="13103984" author="ivaynberg" created="Tue, 13 Sep 2011 21:04:04 +0000"  >&lt;p&gt;resourcereference urls should be filter relative. raw urls given by the user should be context-relative.&lt;/p&gt;

&lt;p&gt;the patch was bad because it made all urls context-relative - which broke resource refrence urls.&lt;/p&gt;

&lt;p&gt;headerresponse already had a relative() function which shouldve taken care of the conversion but was probably not rewritten correctly when we switched it to use url renderer.&lt;/p&gt;

&lt;p&gt;fixed, thanks for reporting.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12493284" name="quickstart.zip" size="20855" author="msotil" created="Wed, 7 Sep 2011 07:05:36 +0000"/>
                            <attachment id="12493308" name="relative-url.patch" size="3761" author="pete" created="Wed, 7 Sep 2011 12:43:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k9gv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>