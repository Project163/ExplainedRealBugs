<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4766] multiple &lt;style&gt; tags in header are rendered incorrectly</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4766</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I created a small quickstart. &lt;br/&gt;
The BasePage has some multiple &amp;lt;style&amp;gt; tags. Only he first one is rendered correctly, all following render the tag body only, the surrounding &amp;lt;style&amp;gt;&amp;lt;/style&amp;gt; is missing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608029">WICKET-4766</key>
            <summary>multiple &lt;style&gt; tags in header are rendered incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="papegaaij">Emond Papegaaij</assignee>
                                    <reporter username="marie">Marieke Vandamme</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Sep 2012 08:32:04 +0000</created>
                <updated>Fri, 21 Sep 2012 20:11:09 +0000</updated>
                            <resolved>Fri, 21 Sep 2012 20:11:09 +0000</resolved>
                                    <version>6.0.0</version>
                                    <fixVersion>6.1.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13457693" author="marie" created="Tue, 18 Sep 2012 08:32:44 +0000"  >&lt;p&gt;small quickstart that simulates the problem.&lt;/p&gt;</comment>
                            <comment id="13458816" author="svenmeier" created="Wed, 19 Sep 2012 16:30:13 +0000"  >&lt;p&gt;Which browser are you using?&lt;/p&gt;

&lt;p&gt;When I check the response in Firefox&apos; Net console, the generated markup looks fine. It seems that Firefox doesn&apos;t like @import inside the commented/CDATA style tags.&lt;/p&gt;

&lt;p&gt;BTW moving the markup from BasePage to Homepage (i.e. no markup inheritance) the outcome is the same.&lt;/p&gt;</comment>
                            <comment id="13459363" author="marie" created="Thu, 20 Sep 2012 05:48:36 +0000"  >&lt;p&gt;I&apos;m also using Firefox, but testing the same in Internet Explorer, gives the same output. &lt;br/&gt;
I think it has nothing to do with the browser. &lt;br/&gt;
The html that wicket generates isn&apos;t correct. Before printing &amp;lt; sty le type=&quot;text/css&quot; media=&quot;print&quot; &amp;gt;, there is no closing tag (&amp;lt; / sty le&amp;gt;). &lt;br/&gt;
Also the same worked perfectly with wicket 1.5.7, also in Firefox. &lt;/p&gt;</comment>
                            <comment id="13459461" author="svenmeier" created="Thu, 20 Sep 2012 08:57:00 +0000"  >&lt;p&gt;Sorry, I&apos;ve misread the html output.&lt;/p&gt;

&lt;p&gt;The problem is that HtmlHeaderContainer#renderNext() splits &amp;lt;style&amp;gt;, body and &amp;lt;/style&amp;gt; each in its own PageHeaderItem. Since duplicate header items are filtered from output, successive style tags are missing from the generated HTML.&lt;/p&gt;

&lt;p&gt;As a workaround I&apos;d suggest using a single &amp;lt;style&amp;gt; tag &lt;b&gt;or&lt;/b&gt; to wrap the &amp;lt;style&amp;gt; tags in a &amp;lt;wicket:link&amp;gt; tag.&lt;/p&gt;
</comment>
                            <comment id="13459532" author="marie" created="Thu, 20 Sep 2012 11:46:32 +0000"  >&lt;p&gt;Hi Sven, Is this something you can fix or can you assign somebody else to this issue?&lt;/p&gt;

&lt;p&gt;The problem is that I can&apos;t use a workaround. The template is generated by our drupal website,&lt;br/&gt;
and we don&apos;t have any control over it. &lt;/p&gt;</comment>
                            <comment id="13460574" author="svenmeier" created="Fri, 21 Sep 2012 15:45:24 +0000"  >&lt;p&gt;Modified test classes for HeaderResponseTest showing the problem.&lt;/p&gt;</comment>
                            <comment id="13460605" author="svenmeier" created="Fri, 21 Sep 2012 16:37:06 +0000"  >&lt;p&gt;changed markup to show the problem and one additional one:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;second &amp;lt;style&amp;gt; tags in page markup is rendered without tags&lt;/li&gt;
	&lt;li&gt;js header contribution from panel duplicates js header contribution from page&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460609" author="svenmeier" created="Fri, 21 Sep 2012 16:40:49 +0000"  >&lt;p&gt;Sorry that I don&apos;t have a solution currently. I&apos;ll have to dig deeper into the new HeaderItem stuff to be able to sort out the problem. Perhaps Edmond can spot the problem right away.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand why the header in the page&apos;s markup should be handled differently than the header in panels. But this is the case currently:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the page&apos;s header is sliced into too much HeaderItems&lt;/li&gt;
	&lt;li&gt;the panel&apos;s header is handled as a block, thus possibly resulting in duplicated js contribution.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460732" author="papegaaij" created="Fri, 21 Sep 2012 19:16:43 +0000"  >&lt;p&gt;I think this problem is manifold. First of all, I&apos;ve discovered that HtmlHeaderContainer renders a StringHeaderItem at line 230. This should be a PageHeaderItem. Secondly, I suspect that StringHeaderItem and PageHeaderItem should not override equals and hashcode. The argumentation for this would be that these are free-form and therefore no assumptions can be made about the semantics of the contents. With duplicate JS or CSS references, it is clear that duplicates should not be rendered, but as can be seen in this case, duplication has no meaning for StringHeaderItem. Finally, it seems that HtmlHeaderContainer.renderNext is not needed at all. This is the method that splits the headers into many small parts.&lt;/p&gt;

&lt;p&gt;The first observation should be fixed, because it is a bug.&lt;/p&gt;

&lt;p&gt;Removing the method that splits the header items, fixes this ticket. It breaks 2 others, but only because some whitespace in the header changes.&lt;/p&gt;

&lt;p&gt;Changing the second observation fixes this bug, but breaks a testcase: HeaderSectionTest.renderHomePage_20(). This testcase renders a StringHeaderItem in a component that is added twice. Changing the equals causes the item to be rendered twice. Perhaps StringHeaderItem should be rendered once per component class, but the HeaderItem does not know the class of the component. In all, changing this right now probably breaks applications, so we should probably opt for the other solution and leave this as is.&lt;/p&gt;</comment>
                            <comment id="13460746" author="papegaaij" created="Fri, 21 Sep 2012 19:27:03 +0000"  >&lt;p&gt;I&apos;ve also found a problem in your proposed testcase. By including a.js in both the panel and the page, via head, Wicket will not be able to filter duplicates, therefore a.js will be included twice in the output. Your testcase includes a.js only once in the output, is this intentional? If so, how do you suggest Wicket filters these duplicate references?&lt;/p&gt;</comment>
                            <comment id="13460792" author="papegaaij" created="Fri, 21 Sep 2012 20:11:09 +0000"  >&lt;p&gt;I&apos;m closing this ticket, because this issue is now fixed. If anyone finds the comments about StringHeaderItem.equals or the filtering of duplicate references in head-sections still relevant, I think opening a new ticket would be best.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12546061" name="WICKET-4766-testcase.patch" size="3253" author="svenmeier" created="Fri, 21 Sep 2012 16:37:06 +0000"/>
                            <attachment id="12545540" name="myproject.zip" size="21651" author="marie" created="Tue, 18 Sep 2012 08:32:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0cuwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>