<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4511] Stack overflow when render malformed html.</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4511</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Stack overflow when render malformed html.&lt;/p&gt;

&lt;p&gt;Please, note that &amp;lt;/HEAD&amp;gt; element is inserted after &amp;lt;/body&amp;gt;.&lt;/p&gt;

&lt;p&gt;HTML:&lt;br/&gt;
&amp;lt;html&amp;gt;&lt;br/&gt;
&amp;lt;head&amp;gt;&lt;br/&gt;
&amp;lt;body&amp;gt;&lt;br/&gt;
Malformed HTML&lt;br/&gt;
&amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/head&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;/p&gt;

&lt;p&gt;Java:&lt;br/&gt;
package com.mycompany;&lt;/p&gt;

&lt;p&gt;import org.apache.wicket.markup.html.WebPage;&lt;br/&gt;
public class Test1 extends WebPage &lt;/p&gt;
{
	private static final long serialVersionUID = -4267477971499123852L;

}


&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment>windows, ubuntu. java 7, jetty 6.1.26</environment>
        <key id="12552234">WICKET-4511</key>
            <summary>Stack overflow when render malformed html.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="inaiat">Inaiat Henrique de Moraes</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2012 02:58:42 +0000</created>
                <updated>Fri, 27 Apr 2012 12:26:24 +0000</updated>
                            <resolved>Fri, 27 Apr 2012 12:26:24 +0000</resolved>
                                    <version>1.5.5</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>6.0.0-beta2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13260183" author="inaiat" created="Tue, 24 Apr 2012 03:48:14 +0000"  >&lt;p&gt;Console output.&lt;/p&gt;</comment>
                            <comment id="13262630" author="bitstorm" created="Thu, 26 Apr 2012 14:01:17 +0000"  >&lt;p&gt;The problem is due to HtmlHeaderSectionHandler which does not identify &amp;lt;head&amp;gt; tag properly. If you look at method onComponentTag you see that variable foundHead is set to true only when closing tag &amp;lt;/head&amp;gt; is encountered and not when we find the opening one.&lt;br/&gt;
I&apos;ve attached a patch which slightly changes the behavior of  HtmlHeaderSectionHandler and solve the issue. I&apos;ve tested it with all test cases without any problem. &lt;/p&gt;</comment>
                            <comment id="13262645" author="mgrigorov" created="Thu, 26 Apr 2012 14:43:04 +0000"  >&lt;p&gt;Thanks for the investigation and the patch, Andrea!&lt;/p&gt;

&lt;p&gt;I think we should extend HtmlHeaderSectionHandler to throw an exception if it sees &amp;lt;head&amp;gt; and &amp;lt;body&amp;gt; without &amp;lt;/head&amp;gt; in between.&lt;br/&gt;
Now the attached quickstart fails with StackOverflowError - not good at all but the developer goes to find what is wrong and fixes his code. &lt;br/&gt;
With your fix Wicket behaves better and the developer is not notified about this problem.&lt;br/&gt;
Wicket is not HTML validator but since &amp;lt;head&amp;gt; and &amp;lt;wicket:head&amp;gt; are more special I think we can add some more &apos;if&apos;s in this code to prevent such problem.&lt;/p&gt;

&lt;p&gt;Do you want to implement it and add a test ? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;   &lt;/p&gt;</comment>
                            <comment id="13262679" author="bitstorm" created="Thu, 26 Apr 2012 15:39:48 +0000"  >&lt;p&gt;Yes, of course! I think should be ready by tomorrow.&lt;br/&gt;
PS: Soon or later I will use IRC to speed up communication &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13263172" author="bitstorm" created="Thu, 26 Apr 2012 21:51:36 +0000"  >&lt;p&gt;Here it is. Now HtmlHeaderSectionHandler throws a MarkupException if it finds a &amp;lt;body&amp;gt; inside &amp;lt;head&amp;gt;. I&apos;ve also added a test case for this issue.&lt;/p&gt;</comment>
                            <comment id="13263601" author="mgrigorov" created="Fri, 27 Apr 2012 12:26:24 +0000"  >&lt;p&gt;Thanks again, Andrea!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12524773" name="WICKET-4511.patch" size="4528" author="bitstorm" created="Thu, 26 Apr 2012 21:49:51 +0000"/>
                            <attachment id="12523915" name="console-output.txt" size="89466" author="inaiat" created="Tue, 24 Apr 2012 03:48:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>