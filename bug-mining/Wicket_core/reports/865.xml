<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5178] StopPropagation functionality on link is broken</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5178</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;In the quickstart I&apos;ll add the following is illustrated:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;simple table with AjaxLink on tr&lt;/li&gt;
	&lt;li&gt;on that tr there&apos;s another AjaxLink with should not propagate the onclick to the tr&lt;/li&gt;
	&lt;li&gt;So when clicking the &quot;here&quot; link, on the server logging only the following should appear:&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;onclick LNK&lt;br/&gt;
 but also the logging from the tr link is printed:&lt;/li&gt;
	&lt;li&gt;onclick LNK&lt;/li&gt;
	&lt;li&gt;onclick TR&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In wicket 6.6 this works. &lt;/p&gt;

&lt;p&gt;Thanks in advance ! Kind regards, Marieke&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645936">WICKET-5178</key>
            <summary>StopPropagation functionality on link is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="marie">Marieke Vandamme</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 May 2013 08:56:26 +0000</created>
                <updated>Tue, 21 May 2013 12:56:08 +0000</updated>
                            <resolved>Mon, 13 May 2013 13:11:01 +0000</resolved>
                                    <version>6.7.0</version>
                                    <fixVersion>6.8.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13648275" author="mgrigorov" created="Fri, 3 May 2013 09:08:30 +0000"  >&lt;p&gt;The change for 6.7 was intentional - &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5093&quot; title=&quot;The event listener in Wicket.Ajax.ajax() should not return the value of attrs.ad (allowDefault)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5093&quot;&gt;&lt;del&gt;WICKET-5093&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
AjaxRequestAttributes has a setting &quot;allowDefault&quot; which managed both JS event&apos;s &quot;preventDefault&quot; and &quot;stopPropagation&quot;. It was a bug that it handled &quot;stopPropagation&quot;.&lt;/p&gt;

&lt;p&gt;Maybe we should add a separate setting for stop propagation in AjaxRequestAttributes.&lt;/p&gt;</comment>
                            <comment id="13648282" author="svenmeier" created="Fri, 3 May 2013 09:23:24 +0000"  >&lt;p&gt;An additional setting for &quot;stop propagation&quot; would be nice, Java devs don&apos;t want to write &quot;Wicket.Event.stop(attrs.event)&quot;.&lt;br/&gt;
We could make that setting true by default, to make this change compatible with the previous behavior.&lt;/p&gt;</comment>
                            <comment id="13648284" author="mgrigorov" created="Fri, 3 May 2013 09:25:00 +0000"  >&lt;p&gt;Agree.&lt;/p&gt;</comment>
                            <comment id="13651774" author="buurmansven" created="Wed, 8 May 2013 10:42:27 +0000"  >&lt;p&gt;Seconded. Please fix asap. This broke functionality in an important page for us and we would not like to have to revert to wicket 6.6 for production.&lt;/p&gt;</comment>
                            <comment id="13651791" author="mgrigorov" created="Wed, 8 May 2013 11:08:35 +0000"  >&lt;p&gt;It will be improved in 6.8.0.&lt;br/&gt;
There is no need to revert to 6.6.0 for just this. There is explanation in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5093&quot; title=&quot;The event listener in Wicket.Ajax.ajax() should not return the value of attrs.ad (allowDefault)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5093&quot;&gt;&lt;del&gt;WICKET-5093&lt;/del&gt;&lt;/a&gt; how this can be handled.&lt;/p&gt;</comment>
                            <comment id="13651853" author="mgrigorov" created="Wed, 8 May 2013 12:39:41 +0000"  >&lt;p&gt;The new setting for AjaxRequestAttributes is added in master branch.&lt;br/&gt;
Please have a look and let me know whether it fixes your problems.&lt;br/&gt;
I&apos;ll test soon the attached quickstart with 6.x branch and backport the fix.&lt;/p&gt;</comment>
                            <comment id="13651878" author="svenmeier" created="Wed, 8 May 2013 13:29:15 +0000"  >&lt;p&gt;Hi Martin,&lt;/p&gt;

&lt;p&gt;now allowDefault and stopPropagation are coupled once again, since you return false from the function:&lt;/p&gt;

&lt;p&gt;				var handleStopPropagation = function (attributes) {&lt;br/&gt;
					var result = false;&lt;br/&gt;
					var evt = attributes.event;&lt;br/&gt;
					if (attributes.sp === &quot;stop&quot;) &lt;/p&gt;
{
						Wicket.Event.stop(evt);
					}
&lt;p&gt; else if (attributes.sp === &quot;stopImmediate&quot;) &lt;/p&gt;
{
						Wicket.Event.stop(evt, true);
					}
&lt;p&gt; else &lt;/p&gt;
{
						result = true;
					}
&lt;p&gt;					return result;&lt;br/&gt;
				};&lt;/p&gt;

&lt;p&gt;Is that you intention?&lt;/p&gt;</comment>
                            <comment id="13651884" author="mgrigorov" created="Wed, 8 May 2013 13:31:41 +0000"  >&lt;p&gt;I just improved it.&lt;br/&gt;
Now they are separated.&lt;/p&gt;</comment>
                            <comment id="13651898" author="svenmeier" created="Wed, 8 May 2013 13:50:44 +0000"  >&lt;p&gt;Separated but still not a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5093&quot; title=&quot;The event listener in Wicket.Ajax.ajax() should not return the value of attrs.ad (allowDefault)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5093&quot;&gt;&lt;del&gt;WICKET-5093&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;A delayed ajax call will call _handleEventCancelation() too late to have any effect on the browser&apos;s event processing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13651902" author="mgrigorov" created="Wed, 8 May 2013 13:57:39 +0000"  >&lt;p&gt;OK, I&apos;ll move back the W.E.stop() call in Wicket.Ajax.ajax(), without the &quot;return&quot; which messes with #preventDefault().&lt;br/&gt;
I don&apos;t have time now to properly test your quickstart but I think it is possible to solve the problem with the new setting.&lt;/p&gt;</comment>
                            <comment id="13651933" author="svenmeier" created="Wed, 8 May 2013 14:30:04 +0000"  >&lt;p&gt;Both preventDefault and stopPropagation have to be handled in Wicket.Ajax.ajax() before the call is possibly queued by the channel. Why not call _handleEventCancelation() from there?&lt;/p&gt;</comment>
                            <comment id="13652000" author="ivaynberg" created="Wed, 8 May 2013 15:46:02 +0000"  >&lt;p&gt;on a side note please rename StopPropagation to Propagation &lt;/p&gt;
{BUBBLE, STOP, STOP_IMMEDIATELY}
&lt;p&gt;. reading StopPropagation.NO makes my head assplode &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13655933" author="svenmeier" created="Mon, 13 May 2013 12:43:57 +0000"  >&lt;p&gt;The fix works fine for me, thanks!&lt;/p&gt;

&lt;p&gt;A minor nitpick:&lt;br/&gt;
Even if an event is throttled, _handleEventCancelation() should be called nevertheless. Otherwise an event might trigger the default or bubble up because the throttled execution is delayed.&lt;/p&gt;

&lt;p&gt;&amp;#8212; a/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js&lt;br/&gt;
+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js&lt;br/&gt;
@@ -1797,13 +1797,12 @@&lt;br/&gt;
 							throttler.throttle(throttlingSettings.id, throttlingSettings.d,&lt;br/&gt;
 								Wicket.bind(function () &lt;/p&gt;
{
 									call.ajax(attributes);
-									Wicket.Ajax._handleEventCancelation(attributes);
 								}
&lt;p&gt;, this));&lt;br/&gt;
 						}&lt;br/&gt;
 						else &lt;/p&gt;
{
 							call.ajax(attributes);
-							Wicket.Ajax._handleEventCancelation(attributes);
 						}
&lt;p&gt;+						Wicket.Ajax._handleEventCancelation(attributes);&lt;br/&gt;
 					});&lt;br/&gt;
 				});&lt;br/&gt;
 			},&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12648573">WICKET-5194</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12636366">WICKET-5093</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12581676" name="myproject.zip" size="21040" author="marie" created="Fri, 3 May 2013 08:57:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kajj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>