<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4260] UrlRenderer renders invalid relative URLs if first segment contains colon</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4260</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Seen on Wicket 1.5.3.&lt;/p&gt;

&lt;p&gt;If a relative url of a link starts with a path segment containing a colon then the whole uri will be regarded as absolute uri, so typically browsers will complain that there is no handle for the protocol foo in foo:bar/dee/per.&lt;/p&gt;

&lt;p&gt;See also the attached quickstart. The start page contains three links, one relative with colon, one absolute and one to a mounted page without colon for comparison.&lt;br/&gt;
The application also has a static switch to add an extended urlrenderer, prepending &quot;./&quot; if needed. This fix is merely a quick shot and there might be better alternatives.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532707">WICKET-4260</key>
            <summary>UrlRenderer renders invalid relative URLs if first segment contains colon</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="andi5">Andreas K&#246;hler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2011 12:07:24 +0000</created>
                <updated>Mon, 7 Mar 2016 15:44:53 +0000</updated>
                            <resolved>Sat, 7 Apr 2012 06:20:21 +0000</resolved>
                                    <version>1.5.3</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>6.0.0-beta2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13157117" author="andi5" created="Fri, 25 Nov 2011 12:08:09 +0000"  >&lt;p&gt;Quickstart&lt;/p&gt;</comment>
                            <comment id="13158780" author="pedrosans" created="Mon, 28 Nov 2011 21:15:32 +0000"  >&lt;p&gt;Hi Andreas, it&apos;s weird to have the URL renderer behavior differently because of the first segment content. IMO it would be better if we start to always render relative to the base URLs to have the dot slash prepended.&lt;br/&gt;
I&apos;m sending your patch back (MyUrlRenderer) with this improvement.&lt;br/&gt;
I&apos;m 1+ for this change, if the team agree we can already start to change tests expectations.&lt;/p&gt;</comment>
                            <comment id="13158805" author="ivaynberg" created="Mon, 28 Nov 2011 21:36:47 +0000"  >&lt;p&gt;be careful to make sure that it doesnt break anything, in the past it has caused us headaches..&lt;/p&gt;

&lt;p&gt;things like&lt;/p&gt;

&lt;p&gt;does ./foo resolve to /foo when on &quot;/&quot; and /bar/foo when on &quot;/bar&quot; in all browsers. etc.&lt;/p&gt;</comment>
                            <comment id="13158888" author="andi5" created="Mon, 28 Nov 2011 22:46:19 +0000"  >&lt;p&gt;Yes, I would prefer not to break everything else &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  But feel free to patch as you like.&lt;br/&gt;
Still, this bug needs fixing, of course, as right now those links do not work at all.&lt;/p&gt;

&lt;p&gt;BTW, should not ./foo resolve to /foo when on /bar?&lt;/p&gt;</comment>
                            <comment id="13159015" author="ivaynberg" created="Tue, 29 Nov 2011 01:24:05 +0000"  >&lt;p&gt;yes, shouldve been /bar/baz &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13159272" author="pedrosans" created="Tue, 29 Nov 2011 13:54:25 +0000"  >&lt;p&gt;Quoting the RFC 2396 at &lt;a href=&quot;http://www.ietf.org/rfc/rfc2396.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.ietf.org/rfc/rfc2396.txt&lt;/a&gt;&lt;br/&gt;
&quot;  Authors should be aware that a path segment which contains a colon&lt;br/&gt;
   character cannot be used as the first segment of a relative URI path&lt;br/&gt;
   (e.g., &quot;this:that&quot;), because it would be mistaken for a scheme name.&quot;&lt;/p&gt;

&lt;p&gt;Sounds like it would make sense if we improve the UrlRenderer#shouldRenderAsFull method to return true if the first segment has a colon. Fix this ticket but may break some apps because users may have code expecting relative URLs.&lt;/p&gt;</comment>
                            <comment id="13225066" author="svenmeier" created="Thu, 8 Mar 2012 07:27:42 +0000"  >&lt;p&gt;Alternative patch.&lt;/p&gt;</comment>
                            <comment id="13225073" author="mgrigorov" created="Thu, 8 Mar 2012 07:37:58 +0000"  >&lt;p&gt;The patch looks quite simple. I&apos;m +1 to commit it in 1.5.x/master once 1.5.5 is out so we can have enough time to test it in different browsers before 1.5.6 is out.&lt;/p&gt;</comment>
                            <comment id="13229033" author="svenmeier" created="Wed, 14 Mar 2012 06:51:22 +0000"  >&lt;p&gt;All relative urls are now explicitely relative, i.e. start with a dot or dot-dot.&lt;/p&gt;

&lt;p&gt;Tested with IE, Firefox and Chrome and everything worked as expected (e.g. &quot;./foo&quot; when on &quot;/&quot;).&lt;/p&gt;</comment>
                            <comment id="13229117" author="svenmeier" created="Wed, 14 Mar 2012 10:17:56 +0000"  >&lt;p&gt;Just tested with Safari, works too.&lt;/p&gt;</comment>
                            <comment id="13246198" author="chrisc" created="Wed, 4 Apr 2012 12:15:09 +0000"  >&lt;p&gt;Quickstart that shows IE problem with extra ./ inserted before path when /landing page is redirected to /logon page if not authenticated.&lt;/p&gt;

&lt;p&gt;Happens on IE 8 (and possibly other IE versions)&lt;br/&gt;
Does not happen on FireFox nor Chrome.&lt;/p&gt;

&lt;p&gt;Does not happen when running on Jetty &lt;/p&gt;

&lt;p&gt;Happens on Tomcat BUT only when app is installed as a virtual host - it does not happen when the app is installed as a servlet in the root context/host.&lt;/p&gt;

&lt;p&gt;Using the quickstart create a .war using mvn war:war&lt;/p&gt;

&lt;p&gt;Create an entry in your hosts file:&lt;/p&gt;

&lt;p&gt;127.0.0.1             thingy.com.au&lt;/p&gt;

&lt;p&gt;Rename the .war to ROOT.war and place under:&lt;br/&gt;
&amp;lt;tomcat&amp;gt;/virtualhosts/thingy&lt;/p&gt;

&lt;p&gt;Add new host element to server.xml:&lt;/p&gt;

&lt;p&gt;&amp;lt;Host name=&quot;thingy.com.au&quot; debug=&quot;0&quot; appBase=&quot;virtualhosts/thingy&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; 				xmlNamespaceAware=&quot;false&quot;&amp;gt;&lt;/p&gt;


&lt;p&gt;	&amp;lt;Valve className=&quot;org.apache.catalina.valves.FastCommonAccessLogValve&quot;&lt;br/&gt;
			directory=&quot;logs&quot;  prefix=&quot;thing_access_log.&quot; suffix=&quot;.txt&quot;&lt;br/&gt;
			pattern=&quot;common&quot; resolveHosts=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;		&amp;lt;Context path=&quot;/manager&quot; debug=&quot;5&quot; docBase=&quot;/servers/tomcat/webapps/manager&quot; privileged=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/Host&amp;gt;&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;p&gt;Point your IE browser to:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://thingy.com.au/landing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thingy.com.au/landing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this will attempt a redirect to thingy.com.au/logon&lt;br/&gt;
which should display the error.&lt;/p&gt;

&lt;p&gt;Hit refresh and the logon page will display. Click on Logon link and problem should display again. Hit refresh and landing page will now display properly.&lt;/p&gt;</comment>
                            <comment id="13246201" author="svenmeier" created="Wed, 4 Apr 2012 12:23:50 +0000"  >&lt;p&gt;need to invesigate IE8 issue&lt;/p&gt;</comment>
                            <comment id="13246203" author="mgrigorov" created="Wed, 4 Apr 2012 12:30:12 +0000"  >&lt;p&gt;This change also exposed a bug in Jetty 7.6.2 and earlier: &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=374475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=374475&lt;/a&gt;&lt;br/&gt;
Basically the redirect will fail if it contains non-ASCII chars.&lt;br/&gt;
The fix will be in Jetty 7.6.3.&lt;/p&gt;</comment>
                            <comment id="13246320" author="chrisc" created="Wed, 4 Apr 2012 14:56:33 +0000"  >&lt;p&gt;I&apos;m not sure how many web apps have a colon in the paths but I know (unfortunately) that a lot of corporates are locked into IE and this fix breaks IE under the conditions I outlined above which means some of our significant corporate customers now have a broken app - they need to hit Refresh after logging in to get &apos;over&apos; the error page.&lt;/p&gt;

&lt;p&gt;Is is possible to make this &lt;b&gt;fix&lt;/b&gt; a configurable one so that those sites that don&apos;t have colons in their path can disable the addition of the &apos;./&apos; prefix? Or better still, make that the default and sites that want to use a colon in the paths need to explicitly turn it on.&lt;/p&gt;</comment>
                            <comment id="13246328" author="svenmeier" created="Wed, 4 Apr 2012 15:00:40 +0000"  >&lt;p&gt;I don&apos;t have an IE at hand at the moment, but I tested the ieDotSlashBug application on Tomcat with root context (Root.war).&lt;/p&gt;

&lt;p&gt;A redirect to &quot;./logon&quot; was handled differently on Jetty and Tomcat:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jetty redirects to &quot;http://localhost:8080/logon&quot;, as org.eclipse.jetty.server.Response#sendRedirect() uses a canonical path (i.e. all &quot;.&quot; and &quot;..&quot; factored out)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Tomcat redirects to &quot;http://localhost:8080/./logon&quot;, obviously leaving the dot in Wicket&apos;s relative url as is.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For reference an excerpt of HttpServletResponse#sendRedirect()&apos;s javadoc:&lt;/p&gt;

&lt;p&gt;&quot;... This method can accept relative URLs; the servlet container must convert the relative URL to an absolute URL before sending the response to the client...&quot;&lt;/p&gt;</comment>
                            <comment id="13246332" author="svenmeier" created="Wed, 4 Apr 2012 15:04:37 +0000"  >&lt;p&gt;&amp;gt;Is is possible to make this &lt;b&gt;fix&lt;/b&gt; a configurable one&lt;/p&gt;

&lt;p&gt;I&apos;d rather not make this configurable.&lt;/p&gt;

&lt;p&gt;I&apos;ll investigate whether this is a known issue for Tomcat. If there&apos;s no fix, we can remove a leading &quot;./&quot; from the url before passing it to HttpServletResponse#sendRedirect().&lt;/p&gt;</comment>
                            <comment id="13246356" author="chrisc" created="Wed, 4 Apr 2012 15:21:55 +0000"  >&lt;p&gt;Some observations:&lt;/p&gt;

&lt;p&gt;Here&apos;s the requests that the server sees - both get redirects to the logon page which is correct because the user is not yet authenticated&lt;/p&gt;

&lt;p&gt;IE browser requesting /landing&lt;/p&gt;

&lt;p&gt;127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;05/Apr/2012:01:16:13 +1000&amp;#93;&lt;/span&gt; &quot;GET /landing HTTP/1.1&quot; 302 -&lt;br/&gt;
127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;05/Apr/2012:01:16:13 +1000&amp;#93;&lt;/span&gt; &quot;GET /./logon?3 HTTP/1.1&quot; 404 976&lt;/p&gt;

&lt;p&gt;FireFox browser requesting /landing&lt;/p&gt;

&lt;p&gt;127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;05/Apr/2012:01:18:12 +1000&amp;#93;&lt;/span&gt; &quot;GET /landing HTTP/1.1&quot; 302 -&lt;br/&gt;
127.0.0.1 - - &lt;span class=&quot;error&quot;&gt;&amp;#91;05/Apr/2012:01:18:12 +1000&amp;#93;&lt;/span&gt; &quot;GET /logon?2 HTTP/1.1&quot; 200 1619&lt;/p&gt;

&lt;p&gt;This makes me believe that it may not be a Tomcat bug because it works correctly for FireFox and Chrome. It may be that these browsers can handle the ./ and automatically remove it possibly?&lt;/p&gt;</comment>
                            <comment id="13246403" author="svenmeier" created="Wed, 4 Apr 2012 16:04:22 +0000"  >&lt;p&gt;Could you test whether it works when you mount LandingPage on &quot;nested/landing&quot;? &lt;/p&gt;

&lt;p&gt;It seems Tomcat happily redirects to &quot;http://localhost:8080/../logon&quot; - I&apos;d be interested whether IE can handle that.&lt;/p&gt;</comment>
                            <comment id="13246679" author="chrisc" created="Wed, 4 Apr 2012 20:08:48 +0000"  >&lt;p&gt;I&apos;ve just tested it and found IE works fine with &quot;nested/landing&quot;&lt;/p&gt;</comment>
                            <comment id="13247675" author="chrisc" created="Thu, 5 Apr 2012 21:09:57 +0000"  >&lt;p&gt;Seems weird that IE handles &quot;../&quot; but not &quot;./&quot; though it is IE afterall so &apos;weird&apos; becomes the expectation &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Do you have any ideas on the best approach for fixing this? We have temporarily reverted to 1.5.5 to get our site working for IE customers again but obviously some day soon we&apos;ll need to be able to upgrade to 1.5.6 or a snapshot.&lt;/p&gt;</comment>
                            <comment id="13247750" author="svenmeier" created="Thu, 5 Apr 2012 22:04:40 +0000"  >&lt;p&gt;&amp;gt;IE handles &quot;../&quot; but not &quot;./&quot; ... Do you have any ideas on the best approach for fixing this?&lt;/p&gt;

&lt;p&gt;Strange, yes.&lt;/p&gt;

&lt;p&gt;I&apos;d say we keep this ticket as it is now (i.e. all relative urls prefixed with &quot;./&quot; or &quot;../&quot;). &lt;br/&gt;
But we&apos;ll let ServletWebResponse remove a leading &quot;./&quot; before passing the url to HttpServletRequest#sendRedirect().&lt;br/&gt;
This does no harm and as you stated is essential as a workaround for the Tomcat/IE combination.&lt;/p&gt;</comment>
                            <comment id="13247924" author="chrisc" created="Fri, 6 Apr 2012 00:59:34 +0000"  >&lt;p&gt;Sounds like a good solution. If you add a patch to 1.5.x in the git repository I can pull it and test it on both my quickstart and the real app whenever you&apos;re ready.&lt;/p&gt;</comment>
                            <comment id="13248381" author="svenmeier" created="Fri, 6 Apr 2012 14:00:21 +0000"  >&lt;p&gt;&amp;gt;I can pull it and test it &lt;/p&gt;

&lt;p&gt;Please do so, thanks.&lt;/p&gt;</comment>
                            <comment id="13249135" author="chrisc" created="Sat, 7 Apr 2012 02:30:07 +0000"  >&lt;p&gt;Yep, works fine now. Thanks!&lt;/p&gt;</comment>
                            <comment id="13249196" author="svenmeier" created="Sat, 7 Apr 2012 06:20:22 +0000"  >&lt;p&gt;Now working with sendRedirect() for Tomcat+IE too.&lt;/p&gt;</comment>
                            <comment id="13251581" author="mgrigorov" created="Wed, 11 Apr 2012 13:59:55 +0000"  >&lt;p&gt;Filed a bug at Tomcat issue tracker for this problem: &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=53062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=53062&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12545545">WICKET-4442</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12947702">WICKET-6111</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12623359">WICKET-4920</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12517535" name="WICKET-4260.diff" size="4106" author="svenmeier" created="Thu, 8 Mar 2012 07:27:41 +0000"/>
                            <attachment id="12505395" name="WICKET-4260.path" size="1365" author="pedrosans" created="Mon, 28 Nov 2011 21:15:32 +0000"/>
                            <attachment id="12521305" name="ieDotSlashBug.zip" size="25346" author="chrisc" created="Wed, 4 Apr 2012 12:15:09 +0000"/>
                            <attachment id="12505103" name="wicket-4260.tar.bz2" size="21696" author="andi5" created="Fri, 25 Nov 2011 12:08:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>