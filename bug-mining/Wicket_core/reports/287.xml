<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:18:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3841] Redirecting to the home page after binding the session leads to Wicket creating an invalid URL</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3841</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;This issue is demonstrated in the attached quickstart.&lt;/p&gt;

&lt;p&gt;Consider a stateless page that contains a form. When the user loads this page, a servlet session does not yet exist.&lt;/p&gt;

&lt;p&gt;Now, in the onSubmit() of the form, call Session.get().bind(). This forces a servlet session to be created. The response to the form submission will thus contain a session cookie, and if a redirect is performed the URL will be rewritten to include a jsessionid.&lt;/p&gt;

&lt;p&gt;A problem occurs when a redirect to the home page is performed in this scenario. Wicket responds with a Location header that looks like this:&lt;/p&gt;

&lt;p&gt;Location: &lt;a href=&quot;http://localhost:8080;jsessionid=cck8jr4b1vdtd5h7a17qv9bn&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080;jsessionid=cck8jr4b1vdtd5h7a17qv9bn&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If I&apos;m not mistaken this is an invalid URL. There should be a forward-slash between 8080 and ;jsessionid.&lt;/p&gt;

&lt;p&gt;Safari on the Mac reports the following error:&lt;/p&gt;

&lt;p&gt;&quot;Safari can&apos;t open the page &quot;http://localhost:8080;jsessionid=cck8jr4b1vdtd5h7a17qv9bn/&quot; because Safari can&apos;t connect to the server &quot;localhost&quot;.&lt;/p&gt;

&lt;p&gt;If you then press the reload button in Safari, the error changes to:&lt;/p&gt;

&lt;p&gt;&quot;Safari can&apos;t open the page &quot;http://localhost:8080;jsessionid=cck8jr4b1vdtd5h7a17qv9bn/&quot; because the page&apos;s address isn&apos;t valid.&quot;&lt;/p&gt;

&lt;p&gt;Other browsers, like Firefox 5.0, seem to automatically correct Wicket&apos;s mistake and do not report an error.&lt;/p&gt;</description>
                <environment>Mac Safari 5.0.5</environment>
        <key id="12512153">WICKET-3841</key>
            <summary>Redirecting to the home page after binding the session leads to Wicket creating an invalid URL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pete">Peter Ertl</assignee>
                                    <reporter username="mbrictson">Matt Brictson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2011 01:08:43 +0000</created>
                <updated>Tue, 5 Jul 2011 14:56:42 +0000</updated>
                            <resolved>Thu, 30 Jun 2011 15:40:05 +0000</resolved>
                                    <version>1.5-RC5.1</version>
                                    <fixVersion>1.5-RC6</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13057035" author="mgrigorov" created="Wed, 29 Jun 2011 06:48:36 +0000"  >&lt;p&gt;jsessionid is set by the web container with HttpServletResponse#encodeURL().&lt;br/&gt;
Which web container do you use ?&lt;/p&gt;</comment>
                            <comment id="13057044" author="ivaynberg" created="Wed, 29 Jun 2011 07:16:13 +0000"  >&lt;p&gt;did we tack on the / to the end though? if it was us, the code responsible needs to be more careful about jsessionid in the url&lt;/p&gt;</comment>
                            <comment id="13057116" author="mgrigorov" created="Wed, 29 Jun 2011 09:23:55 +0000"  >&lt;p&gt;The quickstart works OK here on Chrome 14.x, FF5, Opera 11.50. I have no Mac/Safari.&lt;/p&gt;

&lt;p&gt;At org.apache.wicket.protocol.http.servlet.ServletWebResponse.sendRedirect(String) Wicket produces &quot;http://localhost:8080&quot; then it passes it to HttpServletResponse.encodeURL() which returns &quot;http://localhost:8080;jsessionid=t1qm9o128635l3olsv7fix4l&quot;.&lt;br/&gt;
This is Jetty 7.3.0 from the quickstart.&lt;/p&gt;</comment>
                            <comment id="13057126" author="mgrigorov" created="Wed, 29 Jun 2011 09:36:04 +0000"  >&lt;p&gt;Tomcat 7.0.12 does the same.&lt;/p&gt;</comment>
                            <comment id="13057323" author="mbrictson" created="Wed, 29 Jun 2011 16:23:20 +0000"  >&lt;p&gt;To answer Martin&apos;s question: I was using the jetty:run with the quickstart, which is version 7.3.0.v20110203. The problem also occurs with jetty:run version 6.1.26.&lt;/p&gt;

&lt;p&gt;This defect also affects Mobile Safari. Using Safari on an iPhone 4 with iOS 4.2.8: &quot;Safari cannot open the page because the server cannot be found.&quot; The same error also appears on iPad with iOS 4.3.3.&lt;/p&gt;</comment>
                            <comment id="13057864" author="pete" created="Thu, 30 Jun 2011 15:01:26 +0000"  >&lt;p&gt;(Got an mac with OS X and could reproduce the problem)&lt;/p&gt;

&lt;p&gt;the ;jsessionid is appended by &lt;/p&gt;

&lt;p&gt;   HttpServletResponse#encodeRedirectURL(url).&lt;/p&gt;

&lt;p&gt;I guess the problem is that in an url like&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;http://localhost;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the ;jsessionid is placed right after the hostname without an explicit path. So webkit seems to take the ;jsessionid part for the path of the page&lt;/p&gt;

&lt;p&gt;try&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://localhost;x&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost;x&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and get the same error as mentioned by Matt.&lt;/p&gt;

&lt;p&gt;However once we have an query string&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://localhost?foo=bar;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost?foo=bar;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;webkit does not complain.&lt;/p&gt;</comment>
                            <comment id="13057870" author="mgrigorov" created="Thu, 30 Jun 2011 15:08:11 +0000"  >&lt;p&gt;&amp;gt;  &lt;a href=&quot;http://localhost?foo=bar;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost?foo=bar;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&lt;/a&gt; &lt;br/&gt;
is not valid in this case.&lt;br/&gt;
; can be used as replacement of &amp;amp; as a separator for the key/values&lt;/p&gt;

&lt;p&gt;to be proper it should look like:   &lt;a href=&quot;http://localhost/;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax?foo=bar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax?foo=bar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems to be a problem in the web containers (Tomcat and Jetty are tested). The browsers try to fix it: &lt;a href=&quot;http://localhost:8080/;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/;jsessionid=1drwhjjzkfl9w1e8i5fwpwx6ax&lt;/a&gt; &lt;br/&gt;
i.e. move ;jsessionid=.. after &apos;/&apos;&lt;/p&gt;</comment>
                            <comment id="13057876" author="pete" created="Thu, 30 Jun 2011 15:17:39 +0000"  >&lt;p&gt;@Martin: You are right, actually the url looks like&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;http://localhost/;jsessionid=a95s72vg5h4fiyqauh8sj1al?bla=123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/;jsessionid=a95s72vg5h4fiyqauh8sj1al?bla=123&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; did not verify it before &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So Webkit only fails to fix the url in the case we redirect to &apos;.&apos; without query string&lt;/p&gt;</comment>
                            <comment id="13057882" author="pete" created="Thu, 30 Jun 2011 15:27:10 +0000"  >&lt;p&gt;patch comittted ... please confirm it&apos;s working or broken ...&lt;/p&gt;</comment>
                            <comment id="13057885" author="pete" created="Thu, 30 Jun 2011 15:36:09 +0000"  >&lt;p&gt;these browsers work for me on OS X 10.6.8:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Safari 5.0.5&lt;/li&gt;
	&lt;li&gt;Chrome 12.0.742.112&lt;/li&gt;
	&lt;li&gt;Firefox 4.0.1&lt;/li&gt;
	&lt;li&gt;Firefox 5.0&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13057888" author="pete" created="Thu, 30 Jun 2011 15:39:55 +0000"  >&lt;p&gt;test seem to be ok so far, closing the ticket&lt;/p&gt;</comment>
                            <comment id="13059937" author="mgrigorov" created="Tue, 5 Jul 2011 14:56:42 +0000"  >&lt;p&gt;Tomcat 7 will be improved for 7.0.18. See &lt;a href=&quot;http://marc.info/?t=130934589600002&amp;amp;r=1&amp;amp;w=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://marc.info/?t=130934589600002&amp;amp;r=1&amp;amp;w=2&lt;/a&gt; for the discussion.&lt;br/&gt;
Jetty 7 bug report at: &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=351199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=351199&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12484585" name="WICKET-3841-quickstart.tgz" size="17677" author="mbrictson" created="Wed, 29 Jun 2011 01:09:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a573:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57115</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>