<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6603] WicketTester.destroy sometimes hangs</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6603</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;I&apos;m experiencing some jetty-shutdown problems after upgrading from 7.9 to&lt;br/&gt;
 8.1. See the stacktrace below.&lt;/p&gt;

&lt;p&gt;Is there a simple remedy for this? (or a known cause?) It is annoying&lt;br/&gt;
 because this error prevents Jetty from shutting down, and I use this in my&lt;br/&gt;
 tests, so my tests never end... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Btw. I&apos;m on java 10.0.2 and jetty version 9.2.5.v20141112&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-10-12 11:24:25,738 ERROR - AsynchronousDataStore      -
java.lang.InterruptedException
        at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1259)
        at java.base/java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:317)
        at
java.base/java.util.concurrent.LinkedBlockingQueue.offer(LinkedBlockingQueue.java:373)
        at
org.apache.wicket.pageStore.AsynchronousDataStore.storeData(AsynchronousDataStore.java:207)
        at
org.apache.wicket.pageStore.AbstractPageStore.storePageData(AbstractPageStore.java:119)
        at
org.apache.wicket.pageStore.DefaultPageStore.storePage(DefaultPageStore.java:66)
        at
org.apache.wicket.pageStore.AsynchronousPageStore$PageSavingRunnable.run(AsynchronousPageStore.java:225)
        at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:844)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13193778">WICKET-6603</key>
            <summary>WicketTester.destroy sometimes hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="solomax">Maxim Solodovnik</assignee>
                                    <reporter username="solomax">Maxim Solodovnik</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2018 07:48:50 +0000</created>
                <updated>Tue, 30 Oct 2018 12:58:45 +0000</updated>
                            <resolved>Fri, 26 Oct 2018 15:56:49 +0000</resolved>
                                    <version>8.1.0</version>
                                    <fixVersion>8.2.0</fixVersion>
                    <fixVersion>9.0.0-M1</fixVersion>
                                    <component>wicket-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16661885" author="jira-bot" created="Wed, 24 Oct 2018 07:51:45 +0000"  >&lt;p&gt;Commit 1a558850ff4cd4bb56c4f32a613f116dde7ea617 in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt;-wickettester-hang from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a55885&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a55885&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;</comment>
                            <comment id="16661886" author="githubbot" created="Wed, 24 Oct 2018 07:52:25 +0000"  >&lt;p&gt;GitHub user solomax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt;-wickettester-hang&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #300&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1a558850ff4cd4bb56c4f32a613f116dde7ea617&lt;br/&gt;
Author: Maxim Solodovnik &amp;lt;solomax666@...&amp;gt;&lt;br/&gt;
Date:   2018-10-24T07:51:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16663834" author="githubbot" created="Thu, 25 Oct 2018 14:46:38 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    nice catch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
    I&apos;ll update PR, thanks!&lt;/p&gt;</comment>
                            <comment id="16663836" author="githubbot" created="Thu, 25 Oct 2018 14:49:51 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It would be impossible to call `pageSavingThread.join();` to ensure Thread is stopped&lt;br/&gt;
    Would it be OK?&lt;/p&gt;</comment>
                            <comment id="16663971" author="githubbot" created="Thu, 25 Oct 2018 16:29:16 +0000"  >&lt;p&gt;Github user svenmeier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I like to minimize the count of member variables:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    @Override&lt;br/&gt;
    public void destroy()&lt;br/&gt;
    {&lt;br/&gt;
    	final Thread pageSavingThread = this.pageSavingThread;&lt;br/&gt;
    	this.pageSavingThread = null;&lt;br/&gt;
    	if (pageSavingThread.isAlive())&lt;br/&gt;
    	{&lt;br/&gt;
    		try&lt;br/&gt;
    		{&lt;br/&gt;
    			pageSavingThread.join();&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public void storePage(String sessionId, IManageablePage page)&lt;br/&gt;
    {&lt;br/&gt;
    	if (pageSavingThread == null)&lt;/p&gt;
    	{
    		return;
    	}
&lt;p&gt;    ```&lt;/p&gt;

&lt;p&gt;    Your boolean works fine too.&lt;/p&gt;</comment>
                            <comment id="16664817" author="jira-bot" created="Fri, 26 Oct 2018 07:43:01 +0000"  >&lt;p&gt;Commit fc8a5ab4d6299815cd9f0f26e0eae60e605a065f in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt;-wickettester-hang from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fc8a5ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fc8a5ab&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Refactored to minimize the count of member variable&lt;/p&gt;</comment>
                            <comment id="16665331" author="jira-bot" created="Fri, 26 Oct 2018 15:51:22 +0000"  >&lt;p&gt;Commit 1a558850ff4cd4bb56c4f32a613f116dde7ea617 in wicket&apos;s branch refs/heads/wicket-8.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a55885&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a55885&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;</comment>
                            <comment id="16665332" author="jira-bot" created="Fri, 26 Oct 2018 15:51:23 +0000"  >&lt;p&gt;Commit fc8a5ab4d6299815cd9f0f26e0eae60e605a065f in wicket&apos;s branch refs/heads/wicket-8.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fc8a5ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fc8a5ab&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Refactored to minimize the count of member variable&lt;/p&gt;</comment>
                            <comment id="16665333" author="githubbot" created="Fri, 26 Oct 2018 15:51:35 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/300&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/300&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16665338" author="jira-bot" created="Fri, 26 Oct 2018 15:56:15 +0000"  >&lt;p&gt;Commit 3398764a77a6bb92d4a8859c49280b8ede77a708 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3398764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3398764&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;</comment>
                            <comment id="16668667" author="jira-bot" created="Tue, 30 Oct 2018 12:58:45 +0000"  >&lt;p&gt;Commit 3398764a77a6bb92d4a8859c49280b8ede77a708 in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6563&quot; title=&quot;Rework page and data storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6563&quot;&gt;&lt;del&gt;WICKET-6563&lt;/del&gt;&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3398764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3398764&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6603&quot; title=&quot;WicketTester.destroy sometimes hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6603&quot;&gt;&lt;del&gt;WICKET-6603&lt;/del&gt;&lt;/a&gt; Asypc page/data store destroyed without hanging&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zkl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>