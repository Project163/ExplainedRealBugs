<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6350] setRequired checks for primitive type only when the FormComponent is NOT required</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6350</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I was tinkering around with Kotlin and Wicket and had the following snippet:&lt;/p&gt;

&lt;p&gt;    val housenumbervalue: Int?  = null&lt;br/&gt;
    val housenumberModel: IModel&amp;lt;Int&amp;gt; = Model&amp;lt;Int&amp;gt;()&lt;br/&gt;
    val housenumber = TextField&amp;lt;Int&amp;gt;(&quot;housenumberModel&quot;, housenumberModel, Int::class.java)&lt;/p&gt;

&lt;p&gt;    val form: Form&amp;lt;Unit&amp;gt; = object : Form&amp;lt;Unit&amp;gt;(&quot;adressForm&quot;) {}&lt;/p&gt;

&lt;p&gt;    override fun onInitialize() {&lt;br/&gt;
        super.onInitialize()&lt;/p&gt;

&lt;p&gt;        form.add(housenumber.setRequired(false))&lt;br/&gt;
        form.add(object : SubmitLink(&quot;submit&quot;) {&lt;br/&gt;
            override fun onSubmit() &lt;/p&gt;
{
                super.onSubmit()
                println(housenumberModel.`object`)
            }

&lt;p&gt;        })&lt;br/&gt;
        add(form)&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;This code resulted in &lt;/p&gt;

&lt;p&gt;org.apache.wicket.WicketRuntimeException: FormComponent can&apos;t be required when the type is primitive class: [TextField &lt;span class=&quot;error&quot;&gt;&amp;#91;Component id = housenumberModel&amp;#93;&lt;/span&gt;]&lt;br/&gt;
     at org.apache.wicket.markup.html.form.FormComponent.setRequired(FormComponent.java:1052)&lt;br/&gt;
     at com.mycompany.test.web.pages.Test.onInitialize(Test.kt:28)&lt;/p&gt;

&lt;p&gt;Turns out that setRequired was checking only if the FormComponent was &lt;b&gt;not&lt;/b&gt; required. It should be the other way round. I opened a pull request.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060101">WICKET-6350</key>
            <summary>setRequired checks for primitive type only when the FormComponent is NOT required</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="joachimrohde">Joachim Rohde</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Mar 2017 18:15:07 +0000</created>
                <updated>Tue, 4 Apr 2017 19:34:40 +0000</updated>
                            <resolved>Thu, 30 Mar 2017 12:46:39 +0000</resolved>
                                    <version>8.0.0-M4</version>
                                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15947630" author="githubbot" created="Wed, 29 Mar 2017 18:15:38 +0000"  >&lt;p&gt;GitHub user JoachimRohde opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/217&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;Fix&amp;#93;&lt;/span&gt; setRequired checked for primitive type only when the FormCompon&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ent was NOT required&lt;br/&gt;
    See &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6350&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-6350&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/JoachimRohde/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/JoachimRohde/wicket&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/217.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/217.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #217&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e0805a6e4c413875409e0301811e5097714be5ad&lt;br/&gt;
Author: JoachimRohde &amp;lt;webmaster@joachimrohde.com&amp;gt;&lt;br/&gt;
Date:   2017-03-29T16:17:52Z&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;Fix&amp;#93;&lt;/span&gt; setRequired checked for primitive type only when the FormComponent was NOT required&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15947668" author="svenmeier" created="Wed, 29 Mar 2017 18:37:30 +0000"  >&lt;p&gt;Correct me if I&apos;m wrong, but you have a model of a primitive int. In that case your formComponent &lt;b&gt;has&lt;/b&gt; to be required.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!required &amp;amp;&amp;amp; getType() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; getType().isPrimitive())
{
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WicketRuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;FormComponent can&apos;t be required when the type is primitive class: &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IMHO the condition is correct; but the exception message is wrong, it should be &quot;FormComponent has to be required when the type is primitive class: &quot;.&lt;/p&gt;</comment>
                            <comment id="15947795" author="joachimrohde" created="Wed, 29 Mar 2017 19:59:08 +0000"  >&lt;p&gt;Seems like today is not my day. You are right that it would make more sense to make the FormComponent required if it is a primitive class. Especially since the message originally used double negation before it was changed with &lt;a href=&quot;https://github.com/apache/wicket/commit/3c15f4be7ea4ac1e421453e840501fe40a033866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/commit/3c15f4be7ea4ac1e421453e840501fe40a033866&lt;/a&gt;&lt;br/&gt;
But then I&apos;m questioning the whole check. Since a FormComponent is as default not required the check is only executed if I explicitly call setRequired(false) which would result in a WicketRuntimeException. If I omit the call I would have the same behaviour (a non-required FormComponent), except that it would not result in a WicketRuntimeException and I would get the default value for the provided primitive type. That is not consistent.&lt;br/&gt;
At the moment I would say the complete check can be deleted.&lt;/p&gt;</comment>
                            <comment id="15947801" author="mgrigorov" created="Wed, 29 Mar 2017 20:02:15 +0000"  >&lt;p&gt;Oh, so I actually broke it by fixing the strange wording &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Apologies!&lt;/p&gt;</comment>
                            <comment id="15947808" author="joachimrohde" created="Wed, 29 Mar 2017 20:08:07 +0000"  >&lt;p&gt;Apologies accepted &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But the question remains: is this check really needed?&lt;/p&gt;</comment>
                            <comment id="15947834" author="svenmeier" created="Wed, 29 Mar 2017 20:30:10 +0000"  >&lt;p&gt;An empty input will be converted to null, which cannot be set into a primitive int. So required makes sense in this case, does it not?&lt;/p&gt;</comment>
                            <comment id="15948522" author="jira-bot" created="Thu, 30 Mar 2017 07:04:38 +0000"  >&lt;p&gt;Commit 16c0520c0e99ee4af16e93013d67ae55569332e2 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=16c0520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=16c0520&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6350&quot; title=&quot;setRequired checks for primitive type only when the FormComponent is NOT required&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6350&quot;&gt;&lt;del&gt;WICKET-6350&lt;/del&gt;&lt;/a&gt; corrected error message&lt;/p&gt;</comment>
                            <comment id="15948531" author="jira-bot" created="Thu, 30 Mar 2017 07:10:49 +0000"  >&lt;p&gt;Commit ef6288641971e5bc346e5515c67b57fb4fee3772 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ef62886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ef62886&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6350&quot; title=&quot;setRequired checks for primitive type only when the FormComponent is NOT required&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6350&quot;&gt;&lt;del&gt;WICKET-6350&lt;/del&gt;&lt;/a&gt; corrected error message&lt;/p&gt;</comment>
                            <comment id="15948970" author="joachimrohde" created="Thu, 30 Mar 2017 12:34:02 +0000"  >&lt;p&gt;I guess this issue can be closed then.&lt;/p&gt;</comment>
                            <comment id="15948971" author="githubbot" created="Thu, 30 Mar 2017 12:34:14 +0000"  >&lt;p&gt;Github user JoachimRohde closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/217&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15948984" author="svenmeier" created="Thu, 30 Mar 2017 12:46:39 +0000"  >&lt;p&gt;The exception message is corrected now, but generally handling of required and primitives is fine.&lt;/p&gt;</comment>
                            <comment id="15949112" author="mgrigorov" created="Thu, 30 Mar 2017 14:03:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt; I didn&apos;t see a commit for wicket-7.x.&lt;/p&gt;</comment>
                            <comment id="15955677" author="jira-bot" created="Tue, 4 Apr 2017 19:34:40 +0000"  >&lt;p&gt;Commit c3e475e2e813165968c42f7f71969ba459e6740d in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c3e475e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c3e475e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6350&quot; title=&quot;setRequired checks for primitive type only when the FormComponent is NOT required&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6350&quot;&gt;&lt;del&gt;WICKET-6350&lt;/del&gt;&lt;/a&gt; corrected error message&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cygf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>