<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4168] Error page resource relative urls are wrong</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4168</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The wicket page exposed as 404 error page has wrong links to resources. The sample project is attached.&lt;/p&gt;

&lt;p&gt;Run the project with &quot;mvn jetty:run&quot; and go to url &quot;http://localhost:8080/bug/404&quot; - it&apos;s mapped wicket page, works perfect. But if you type any wrong url such as &quot;http://localhost:8080/bug/aaaaaa&quot; the page doesn&apos;t have styles and images.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528672">WICKET-4168</key>
            <summary>Error page resource relative urls are wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pedrosans">Pedro Santos</assignee>
                                    <reporter username="kan.izh">Anatoly Kupriyanov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 13:23:23 +0000</created>
                <updated>Sat, 29 Oct 2011 03:03:56 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 21:10:34 +0000</resolved>
                                    <version>1.5.2</version>
                                    <fixVersion>1.5.3</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13135039" author="kan.izh" created="Tue, 25 Oct 2011 13:25:12 +0000"  >&lt;p&gt;Sample project based on quickstart maven project.&lt;/p&gt;</comment>
                            <comment id="13135511" author="pedrosans" created="Tue, 25 Oct 2011 22:41:25 +0000"  >&lt;p&gt;The problem is that ServletWebRequest#getClientUrl method is returning a client URL that includes the context path. When responding it uses the errorAttributes.getRequestUri() URL to create the client one.&lt;/p&gt;</comment>
                            <comment id="13135991" author="pedrosans" created="Wed, 26 Oct 2011 13:59:11 +0000"  >&lt;p&gt;I don&apos;t know why ServletWebRequest#getClientUrl is testing error attributes in request and using the error URI, it is the address of the resource causing problems, but getClientUrl is designed to to return only the base URL without context or filter mapping.&lt;/p&gt;

&lt;p&gt;Simply remove the test for error attributes an its logic fix this BUG and have no impact at &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3599&quot; title=&quot;When resource responds with 404 custom error page rendering fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3599&quot;&gt;&lt;del&gt;WICKET-3599&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3551&quot; title=&quot;Using web.xml &amp;lt;error-page&amp;gt; to render error pages via Wicket yields undesired behavior in Wicket 1.5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3551&quot;&gt;&lt;del&gt;WICKET-3551&lt;/del&gt;&lt;/a&gt; but breaks some test expectations.&lt;/p&gt;</comment>
                            <comment id="13136005" author="kan.izh" created="Wed, 26 Oct 2011 14:13:10 +0000"  >&lt;p&gt;I think it should use error URI, because actual page could be on different level, not in root as /404. A test case for the fix should include urls like &quot;&quot;http://localhost:8080/bug/aaaaaa/bbbb/cccc&quot;. Also to check if it works after moving the &quot;/404&quot; mapping to somewhere else, e.g. &quot;/error/http/404&quot;.&lt;/p&gt;</comment>
                            <comment id="13137154" author="mgrigorov" created="Thu, 27 Oct 2011 13:54:34 +0000"  >&lt;p&gt;I can add that the attached quickstart works fine when started with Start.java.&lt;br/&gt;
It seems Jetty acts differently when started with &apos;mvn jetty:run&apos; and embedded.&lt;br/&gt;
Going to test with Tomcat7.&lt;/p&gt;</comment>
                            <comment id="13137160" author="mgrigorov" created="Thu, 27 Oct 2011 13:58:41 +0000"  >&lt;p&gt;The application works fine when deployed at Tomcat 7.0.21 at context path /4168.&lt;br/&gt;
Both /4168/404 and /4168/fasdshshds  show the error page.&lt;br/&gt;
I would blame maven-jetty-plugin or the config in this project&apos;s pom.xml&lt;/p&gt;</comment>
                            <comment id="13137175" author="kan.izh" created="Thu, 27 Oct 2011 14:24:57 +0000"  >&lt;p&gt;Are you sure? Just tried it with JBossAS7 and Tomcat 7.0.22. Fails everywhere. I suspect you have deployed it on ROOT once, and &quot;../../&quot; works.&lt;/p&gt;

&lt;p&gt;As I see, the problem is in the getClientUrl method. If it&apos;s normal page it uses the private method &quot;getUrl&quot;, and it does remove context and filter paths, but for an error page it doesn&apos;t. Hence all resource relative urls have extra 2 levels up &quot;../../&quot;.&lt;/p&gt;</comment>
                            <comment id="13137177" author="mgrigorov" created="Thu, 27 Oct 2011 14:31:49 +0000"  >&lt;p&gt;I did: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mvn package&lt;/li&gt;
	&lt;li&gt;cp target/*.war $TC7/webapps/4168.war&lt;/li&gt;
	&lt;li&gt;start TC7&lt;/li&gt;
	&lt;li&gt;open &lt;a href=&quot;http://localhost:8080/4168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/4168&lt;/a&gt; (home page)&lt;/li&gt;
	&lt;li&gt;open &lt;a href=&quot;http://localhost:8080/4168/gfshhffdhdhdh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/4168/gfshhffdhdhdh&lt;/a&gt; (the error page)&lt;/li&gt;
	&lt;li&gt;open &lt;a href=&quot;http://localhost:8080/4168/404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/4168/404&lt;/a&gt; (the error page)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13137186" author="kan.izh" created="Thu, 27 Oct 2011 14:51:45 +0000"  >&lt;p&gt;Fix added&lt;/p&gt;</comment>
                            <comment id="13137187" author="kan.izh" created="Thu, 27 Oct 2011 14:57:21 +0000"  >&lt;p&gt;I do exactly the same! And it fails for me.&lt;br/&gt;
Could you show content of the page? It should contain &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;img src=&amp;quot;logo.png&amp;quot; width..../&amp;gt;&amp;#93;&lt;/span&gt;, but I have &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;img src=&amp;quot;../../logo.png&amp;quot; width.../&amp;gt;&amp;#93;&lt;/span&gt;. Also could you try &quot;http://localhost:8080/4168/gf/s/h/h/f/fdhdhdh&quot; please?&lt;/p&gt;</comment>
                            <comment id="13137254" author="pedrosans" created="Thu, 27 Oct 2011 16:28:03 +0000"  >&lt;p&gt;Hi, in order to simulate the bug here using Firefox I have to clean the browser cache each time I go to the problematic URL.&lt;/p&gt;</comment>
                            <comment id="13138710" author="pedrosans" created="Fri, 28 Oct 2011 20:13:58 +0000"  >&lt;p&gt;Oh, also the the context path can&apos;t be empty. I&apos;m using here &lt;br/&gt;
class Start{&lt;br/&gt;
...&lt;br/&gt;
  bb.setContextPath(&quot;/bug&quot;);&lt;br/&gt;
...&lt;br/&gt;
}&lt;/p&gt;</comment>
                            <comment id="13138802" author="kan.izh" created="Fri, 28 Oct 2011 21:44:23 +0000"  >&lt;p&gt;Sorry. Are you sure it&apos;s fixed in 1.5.2??&lt;/p&gt;</comment>
                            <comment id="13138821" author="kan.izh" created="Fri, 28 Oct 2011 21:51:40 +0000"  >&lt;p&gt;Also, the fix r1190596 invokes setParameters twice for error urls - from getContextRelativeUrl and after it.&lt;/p&gt;</comment>
                            <comment id="13139059" author="pedrosans" created="Sat, 29 Oct 2011 02:38:39 +0000"  >&lt;p&gt;Why are you asking?&lt;br/&gt;
OK, I will double check the setParameters usage.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12502211">WICKET-3551</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12503513">WICKET-3599</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12501098" name="fix-WICKET-4168.patch" size="1415" author="kan.izh" created="Thu, 27 Oct 2011 14:51:45 +0000"/>
                            <attachment id="12500672" name="myproject.zip" size="37117" author="kan.izh" created="Tue, 25 Oct 2011 13:25:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k947:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>