<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:17:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3514] SimpleTree example not working with CryptoMapper</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3514</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Adding the following lines to WicketExampleApplication.java causes the SimpleTree example to break. There are no expand icons anymore and there is no way to expand the tree. Even the expand link will not work.&lt;/p&gt;

&lt;p&gt;Add to WicketExampleApplication.java &lt;/p&gt;

&lt;p&gt;IRequestMapper cryptoMapper = new CryptoMapper(getRootRequestMapper(), this);&lt;br/&gt;
setRootRequestMapper(cryptoMapper);&lt;/p&gt;


&lt;p&gt;Comment out in WicketExampleApplication.java &lt;/p&gt;

&lt;p&gt;//getSecuritySettings().setCryptFactory(new ClassCryptFactory(NoCrypt.class, ISecuritySettings.DEFAULT_ENCRYPTION_KEY));&lt;/p&gt;

&lt;p&gt;Without the CryptoMapper everythings works fine.&lt;/p&gt;

</description>
                <environment>Ubuntu 10.04 and Wicket 1.5 latest trunk</environment>
        <key id="12500626">WICKET-3514</key>
            <summary>SimpleTree example not working with CryptoMapper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="linuxluigi">Ludger Kluitmann</reporter>
                        <labels>
                            <label>wicket</label>
                    </labels>
                <created>Mon, 7 Mar 2011 13:42:34 +0000</created>
                <updated>Wed, 27 Jul 2011 12:02:46 +0000</updated>
                            <resolved>Wed, 27 Jul 2011 12:02:46 +0000</resolved>
                                    <version>1.5-RC2</version>
                                    <fixVersion>1.5-RC5</fixVersion>
                                    <component>wicket</component>
                    <component>wicket-examples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13003538" author="mgrigorov" created="Mon, 7 Mar 2011 19:43:01 +0000"  >&lt;p&gt;The problem is that CryptoMapper is configured as root mapper in the base application (WicketExampleApplication) and then AjaxApplication (the child application) adds several MountedMappers and thus makes CryptoMapper no more root one.&lt;/p&gt;</comment>
                            <comment id="13003558" author="mgrigorov" created="Mon, 7 Mar 2011 20:11:13 +0000"  >&lt;p&gt;The problem with the missing image is the following:&lt;br/&gt;
without cryptomapper the url looks like: /ajax/tree/simple?0. The image is loaded from .css with: url(some.png), so it is resolved to: /ajax/tree/some.png.&lt;/p&gt;

&lt;p&gt;with cryptomapper the url is: /ajax/?wicket=zxcvbnm, so the image url is resolved to: /ajax/some.png and cannot be found. &lt;/p&gt;</comment>
                            <comment id="13003853" author="linuxluigi" created="Tue, 8 Mar 2011 08:20:34 +0000"  >&lt;p&gt;When placing the CryptoMapper code in the AjaxApplication (the child application) the error occurs as well except that the expand, collapse and switch links are working. I used the CryptoMapper Revision 1078894. &lt;/p&gt;</comment>
                            <comment id="13004115" author="mgrigorov" created="Tue, 8 Mar 2011 18:28:18 +0000"  >&lt;p&gt;What error occurs ?&lt;br/&gt;
The only problem I see is that the image sprite can not be loaded and thus switch links have no image (+/-).&lt;/p&gt;</comment>
                            <comment id="13004399" author="linuxluigi" created="Wed, 9 Mar 2011 07:08:41 +0000"  >&lt;p&gt;Yes, you are right. But are there any chances/workaround to solve the icon problem or is it impossible because its url is defined in the css?&lt;/p&gt;</comment>
                            <comment id="13004409" author="ivaynberg" created="Wed, 9 Mar 2011 08:17:43 +0000"  >&lt;p&gt;we should see if we can tweak the mapper to keep the mount in the url, this way relative links will be preserved.&lt;/p&gt;</comment>
                            <comment id="13006270" author="mgrigorov" created="Sun, 13 Mar 2011 20:17:26 +0000"  >&lt;p&gt;The &quot;tweak&quot; here is easy:&lt;/p&gt;

&lt;p&gt;Index: wicket-core/src/main/java/org/apache/wicket/request/mapper/CryptoMapper.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; wicket-core/src/main/java/org/apache/wicket/request/mapper/CryptoMapper.java	(revision 1081145)&lt;br/&gt;
+++ wicket-core/src/main/java/org/apache/wicket/request/mapper/CryptoMapper.java	(working copy)&lt;br/&gt;
@@ -90,6 +90,7 @@&lt;br/&gt;
 		Url encrypted = new Url();&lt;br/&gt;
 		String encryptedUrlString = getCrypt().encryptUrlSafe(url.toString());&lt;br/&gt;
 		encrypted.addQueryParameter(getCryptParameterName(), encryptedUrlString);&lt;br/&gt;
+		encrypted.getSegments().addAll(url.getSegments());&lt;br/&gt;
 		return encrypted;&lt;br/&gt;
 	}&lt;/p&gt;

&lt;p&gt;but this way the whole point of encrypting is lost.&lt;br/&gt;
I can&apos;t see this working without some processing of the .css itself.&lt;/p&gt;</comment>
                            <comment id="13015486" author="jesselong" created="Mon, 4 Apr 2011 16:27:13 +0000"  >&lt;p&gt;This might help: &lt;a href=&quot;https://bitbucket.org/jesselong/wicketstuff/src/tip/src/main/java/org/bitbucket/jesselong/wicketstuff/request/mapper/PatialCryptoRequestMapper.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bitbucket.org/jesselong/wicketstuff/src/tip/src/main/java/org/bitbucket/jesselong/wicketstuff/request/mapper/PatialCryptoRequestMapper.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13041180" author="mgrigorov" created="Mon, 30 May 2011 16:08:44 +0000"  >&lt;p&gt;Re-worked CryptoMapper with the code from Jesse Long&apos;s Mercurial repo.&lt;/p&gt;</comment>
                            <comment id="13071377" author="svenmeier" created="Tue, 26 Jul 2011 21:51:29 +0000"  >&lt;p&gt;Seems no longer to work with latest changes.&lt;/p&gt;</comment>
                            <comment id="13071380" author="svenmeier" created="Tue, 26 Jul 2011 21:58:51 +0000"  >&lt;p&gt;Added test showing problem with image loaded relative to css and possible fix in CryptoMapper.&lt;br/&gt;
Note that I removed the additional path segment added for URLs without segments. Admittedly I don&apos;t know what this is good for, but it seems to work fine without.&lt;/p&gt;

&lt;p&gt;Martin, could you take a look at this?&lt;/p&gt;</comment>
                            <comment id="13071574" author="mgrigorov" created="Wed, 27 Jul 2011 07:16:25 +0000"  >&lt;p&gt;Thanks, Sven!&lt;br/&gt;
I applied your improvements and test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12487901" name="crypto.diff" size="3749" author="svenmeier" created="Tue, 26 Jul 2011 21:58:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kaq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>