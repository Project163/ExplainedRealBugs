<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5068] PageParameters missing from re-created Page</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5068</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4594&quot; title=&quot;Do not use the parsed PageParameters when re-creating an expired page&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4594&quot;&gt;&lt;del&gt;WICKET-4594&lt;/del&gt;&lt;/a&gt; removes existing PageParameters when re-creating an expired page.&lt;/p&gt;

&lt;p&gt;It does this under the assumption that the parameters are not needed for callback behavior that must not be executed after expiry.&lt;/p&gt;

&lt;p&gt;However PageParameters are needed even without execution of callback behavior.&lt;/p&gt;

&lt;p&gt;In trivial cases, a page cannot be re-constructed successfully without PageParameters e.g. a view page for a customer order needs the order ID from its PageParameters.&lt;/p&gt;

&lt;p&gt;There is a bit of an irony about this. To improve the recovery behavior, i.e. to avoid the dreaded PageExpiryException, one needs to create some client state which is then lost on re-creation after expiry.&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="12634683">WICKET-5068</key>
            <summary>PageParameters missing from re-created Page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="bht@actrix.gen.nz">bernard</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Feb 2013 21:09:35 +0000</created>
                <updated>Mon, 11 Aug 2014 11:19:21 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 10:56:47 +0000</resolved>
                                    <version>6.4.0</version>
                                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13590888" author="svenmeier" created="Fri, 1 Mar 2013 19:54:39 +0000"  >&lt;p&gt;keep original page parameters separate in encoded parameter&lt;/p&gt;</comment>
                            <comment id="13590890" author="svenmeier" created="Fri, 1 Mar 2013 19:56:24 +0000"  >&lt;p&gt;We could keep the original parameter in a special parameter, so PageProvider is able to recreate an expired page with the same parameters, see attached rudimentary patch.&lt;/p&gt;</comment>
                            <comment id="13744813" author="bht@actrix.gen.nz" created="Tue, 20 Aug 2013 09:31:40 +0000"  >&lt;p&gt;I am proposing that the very useful concept of the setting org.apache.wicket.settings.IPageSettings#getRecreateMountedPagesAfterExpiry() is extended to a finer grained component level, covering PageParameters.&lt;/p&gt;

&lt;p&gt;More specifically, the default on page level should be inherited from the global setting above to be effective. This should be overridable on component level. In the case of a boolean true value, this means that a stateful page, e.g. stateful because of some trivial AJAX behavior like an auto-complete field, can be recreated as required unless the page class overrides this default with false.&lt;/p&gt;

&lt;p&gt;Then it gets more interesting:&lt;/p&gt;

&lt;p&gt;Descending the component hierarchy below Page level the default for behavior invocation should be false, but each component should be able to choose whether to override this with true, whether it is stateless or not. Components below page level that are target of such parameters would by default not receive them unless they choose to do so.&lt;/p&gt;

&lt;p&gt;I am proposing a method name&lt;/p&gt;

&lt;p&gt;public boolean canBehaveAfterExpiry()&lt;/p&gt;

&lt;p&gt;The return value is NOT propagated down the component hierarchy.&lt;/p&gt;

&lt;p&gt;I think that this scheme simplifies things quite a bit. In the most trivial case, it would allow a logout link on a stateful page to execute its behavior. Which is currently prevented even for a stateless link in ListenerInterfaceRequestHandler#respond() because it makes a very expensive effort to search all components in the page to find stateful ones and if it does then it skips execution. This goes as far as invoking any of the page life cycle methods e.g. onBeforeRender() to detect stateful components added to the page late.&lt;/p&gt;

&lt;p&gt;The new proposed scheme from my limited perspective seems to be logically clean because it works on component level. Its aim is to preserve both constructor parameters and event listener parameters because for successful execution of an event after expiry all parameters must be available, perhaps in the same way as for a stateless page.&lt;/p&gt;

&lt;p&gt;I have had to code some messy page constructors that detect the expiry situation and do not add the AJAX components to the page at all just to get the link behaviors executed by fooling ListenerInterfaceRequestHandler#respond(). With this I want to say that sometimes Wicket tries to protect us from things that we know will never happen - in this case the page does not even need to be rendered.&lt;/p&gt;</comment>
                            <comment id="13870584" author="mgrigorov" created="Tue, 14 Jan 2014 09:55:29 +0000"  >&lt;p&gt;In branch &apos;sandbox/preserve-page-parameters-and-execute-listener-interface-after-expiration&apos; (Wicket 7) I&apos;ve added logic to use the request parameters as PageParaemeters for the recreated page.&lt;br/&gt;
Additionally a new setting org.apache.wicket.settings.PageSettings#canCallListenerInterfaceAfterExpiry() is introduced to decide whether to call the listener interface methods (e.g. onClick, onSubmit, ...) on a recreated page.&lt;/p&gt;

&lt;p&gt;My investigation has shown that the page parameters from the construction of the page are encoded in the links&apos; href, forms&apos; action, so they are available for the reconstruction.&lt;br/&gt;
Any extra parameters, for example parameters added dynamically with JavaScript for Ajax requests, will be also passed as page parameters for such reconstructed page. I see no way to filter them out without duplicating the initial page parameters in the url as Sven did in his patch. I also find them useful because the application can read them in Ajax callback methods (e.g. onEvent(AjaxRequestTarget) &lt;/p&gt;
{allParameters = getRequest().getRequestParameters()}
&lt;p&gt;).&lt;/p&gt;

&lt;p&gt;Any feedback and additional use cases are welcome!&lt;br/&gt;
I will close and link all other tickets that are related to this improvement and link them to this ticket.&lt;/p&gt;</comment>
                            <comment id="13871669" author="bht@actrix.gen.nz" created="Wed, 15 Jan 2014 05:33:55 +0000"  >&lt;p&gt;Many thanks. It is fantastic to get this addressed. I like that org.apache.wicket.Component#canCallListenerInterfaceAfterExpiry() overrides PageSettings#setCanCallListenerInterfaceAfterExpiry()&lt;/p&gt;</comment>
                            <comment id="13871767" author="mgrigorov" created="Wed, 15 Jan 2014 07:33:52 +0000"  >&lt;p&gt;Please test all your tickets related to this functionality.&lt;br/&gt;
We need more use cases to be sure everything is covered.&lt;/p&gt;</comment>
                            <comment id="13871823" author="svenmeier" created="Wed, 15 Jan 2014 09:04:15 +0000"  >&lt;p&gt;#canCallListenerInterfaceAfterExpiry() should be #getCanCallListenerInterfaceAfterExpiry().&lt;/p&gt;

&lt;p&gt;Or simpler use #setCallListenerInterfaceAfterExpiry() and #getCallListenerInterfaceAfterExpiry()?&lt;/p&gt;</comment>
                            <comment id="13871828" author="mgrigorov" created="Wed, 15 Jan 2014 09:08:02 +0000"  >&lt;p&gt;The other thing that bothers me is that this method is related to Component but I use PageSettings.&lt;br/&gt;
I see no better XysSettings class for this.&lt;/p&gt;</comment>
                            <comment id="13871832" author="svenmeier" created="Wed, 15 Jan 2014 09:12:40 +0000"  >&lt;p&gt;Well, it&apos;s related to the expiry of pages.&lt;/p&gt;</comment>
                            <comment id="13872076" author="mgrigorov" created="Wed, 15 Jan 2014 13:50:32 +0000"  >&lt;p&gt;#canCallListenerInterfaceAfterExpiry() is named so to be close to the already existing org.apache.wicket.Component#canCallListenerInterface(Method)&lt;br/&gt;
I don&apos;t mind to rename it to #getCallListenerInterfaceAfterExpiry(). I just like the current one better. It doesn&apos;t follow the Java bean naming conventions but sounds/reads better this way.&lt;/p&gt;</comment>
                            <comment id="13873143" author="svenmeier" created="Thu, 16 Jan 2014 08:07:22 +0000"  >&lt;p&gt;All&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; settings follow the JavaBeans naming convention, so this one should too IMHO.&lt;/p&gt;</comment>
                            <comment id="13873264" author="mgrigorov" created="Thu, 16 Jan 2014 10:56:47 +0000"  >&lt;p&gt;The setting is renamed as suggested.&lt;br/&gt;
The branch is merged to master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12629337">WICKET-5008</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12628818">WICKET-5001</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12702749">WICKET-5539</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12634700">WICKET-5070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12571639" name="wicket-5068.patch" size="3636" author="svenmeier" created="Fri, 1 Mar 2013 19:54:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315176</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1idyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>