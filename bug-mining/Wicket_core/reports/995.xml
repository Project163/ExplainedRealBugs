<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5499] Page is not touched during initialization</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5499</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;After migration from 6.12.0 to 6.13.0 our app stopped working.&lt;br/&gt;
I figured out that there is a new condition in Page#dirty(final boolean isInitialization) on line 288:&lt;/p&gt;

&lt;p&gt;if (isInitialization == false)&lt;br/&gt;
{&lt;br/&gt;
	pageManager.touchPage(this);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;That means that nely constructed page does not get touched thus is not stored in page store.&lt;br/&gt;
The problem is that when I do something like this&lt;/p&gt;

&lt;p&gt;printPage = new PrintPage(event.getFormId(), event.getFormData());&lt;br/&gt;
PageProvider pp = new PageProvider(printPage);&lt;br/&gt;
RenderPageRequestHandler rh = new RenderPageRequestHandler(pp);&lt;br/&gt;
CharSequence url = RequestCycle.get().urlFor(rh);&lt;/p&gt;

&lt;p&gt;I get an URL pointing to page with id X - but that page is not found because it was not stored and I ends with nonsense PageExpired exception.&lt;/p&gt;

&lt;p&gt;I notice that 6.13.0 version fixed some bugs with stateless / statefull pages, etc. so that may be the cause. Nevertheless I think it&apos;s a bug.&lt;br/&gt;
If you do not want to touch page during creation, then it must get touched whenever it is involved in some request handler.&lt;/p&gt;
</description>
                <environment>Windows 7 64-bit&lt;br/&gt;
JDK/JRE 1.6.0_29</environment>
        <key id="12693334">WICKET-5499</key>
            <summary>Page is not touched during initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="davesman">David Rain</reporter>
                        <labels>
                            <label>dirty</label>
                            <label>expired</label>
                            <label>page</label>
                            <label>touch</label>
                            <label>wicket</label>
                    </labels>
                <created>Wed, 5 Feb 2014 12:40:11 +0000</created>
                <updated>Tue, 11 Feb 2014 19:35:00 +0000</updated>
                            <resolved>Tue, 11 Feb 2014 19:35:00 +0000</resolved>
                                    <version>6.13.0</version>
                                    <fixVersion>6.14.0</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13892059" author="mgrigorov" created="Wed, 5 Feb 2014 12:46:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5471&quot; title=&quot;Store the page if it is known that it will be used in a following request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5471&quot;&gt;&lt;del&gt;WICKET-5471&lt;/del&gt;&lt;/a&gt; addresses this issue but maybe it doesn&apos;t cover your use case.&lt;/p&gt;</comment>
                            <comment id="13892064" author="davesman" created="Wed, 5 Feb 2014 12:54:04 +0000"  >&lt;p&gt;I think that it may solve our issue. We could even use your workaround - but on many places. So it is better to stay on 6.12.0 until it is fixed.&lt;br/&gt;
Could you tell me how this will be fixed? Will you revert to touch during init or touch the page when it gets referenced by some handler, etc....&lt;/p&gt;</comment>
                            <comment id="13892065" author="mgrigorov" created="Wed, 5 Feb 2014 12:55:37 +0000"  >&lt;p&gt;Touch the page when it is passed to PageProvider(Page) constructor&lt;/p&gt;</comment>
                            <comment id="13892066" author="svenmeier" created="Wed, 5 Feb 2014 12:55:39 +0000"  >&lt;p&gt;We can probably just move the following line from #setResponsePage() to somewhere in RenderPageRequestHandler:&lt;/p&gt;

&lt;p&gt;		Session.get().getPageManager().touchPage(page);&lt;/p&gt;</comment>
                            <comment id="13892089" author="davesman" created="Wed, 5 Feb 2014 13:30:00 +0000"  >&lt;p&gt;OK, thanks for info... I&apos;ll watch this issue a come back to it when 6.14.0 is released.&lt;/p&gt;</comment>
                            <comment id="13897819" author="mgrigorov" created="Tue, 11 Feb 2014 12:54:38 +0000"  >&lt;p&gt;Touching the page in PageProvider(Page) constructor causes a lot of failing tests...&lt;/p&gt;</comment>
                            <comment id="13897957" author="svenmeier" created="Tue, 11 Feb 2014 16:01:06 +0000"  >&lt;p&gt;Many tests don&apos;t have a session attached to the thread.&lt;/p&gt;</comment>
                            <comment id="13897984" author="mgrigorov" created="Tue, 11 Feb 2014 16:25:38 +0000"  >&lt;p&gt;Here is more complete patch.&lt;br/&gt;
Should we apply it before Martijn cut the release tonight ?&lt;/p&gt;</comment>
                            <comment id="13898192" author="svenmeier" created="Tue, 11 Feb 2014 19:27:57 +0000"  >&lt;p&gt;Patch looks very good, thanks Martin!&lt;/p&gt;

&lt;p&gt;+1 on applying it today.&lt;/p&gt;</comment>
                            <comment id="13898201" author="mgrigorov" created="Tue, 11 Feb 2014 19:35:00 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12688850">WICKET-5471</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12628247" name="WICKET-5499-2.patch" size="4339" author="mgrigorov" created="Tue, 11 Feb 2014 16:25:38 +0000"/>
                            <attachment id="12628242" name="WICKET-5499.patch" size="1055" author="svenmeier" created="Tue, 11 Feb 2014 16:01:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s3hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>