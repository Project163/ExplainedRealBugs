<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:23:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5265] FencedFeedbackPanel is broken with RefreshingView(and it&apos;s implementations)</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5265</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;FencedFeedbackPanel doesn&apos;t work correctly if inner form(s) are in RefreshingView(or it&apos;s implementations)..&lt;br/&gt;
in this case outerform feedbackpanel just starts including messages meant for inner feedbackpanel.&lt;br/&gt;
with ListView FencedFeedbackPanel works correctly..&lt;br/&gt;
actually one user(Mike Dundee) created this issue in quickview &lt;a href=&quot;https://github.com/vineetsemwal/quickview/issues/19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vineetsemwal/quickview/issues/19&lt;/a&gt;&lt;br/&gt;
 so in that link he has described his problem and pasted the code you can use to reproduce ...&lt;br/&gt;
there i have also explained why it&apos;s broken with RefreshingView and it&apos;s implementations currently(it&apos;s a little complex so i am trying to avoid explaining all again ,also english is not my first language &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) &lt;/p&gt;

&lt;p&gt;thank you !&lt;/p&gt;</description>
                <environment></environment>
        <key id="12656448">WICKET-5265</key>
            <summary>FencedFeedbackPanel is broken with RefreshingView(and it&apos;s implementations)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmenzel">Carl-Eric Menzel</assignee>
                                    <reporter username="vineetsemwal">vineet semwal</reporter>
                        <labels>
                            <label>DataView</label>
                            <label>FencedFeedbackPanel</label>
                            <label>RefreshingView</label>
                    </labels>
                <created>Sat, 6 Jul 2013 10:33:11 +0000</created>
                <updated>Tue, 14 Oct 2014 08:04:30 +0000</updated>
                            <resolved>Tue, 14 Oct 2014 08:04:30 +0000</resolved>
                                                    <fixVersion>6.18.0</fixVersion>
                    <fixVersion>7.0.0-M4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13701568" author="vineetsemwal" created="Sun, 7 Jul 2013 13:20:04 +0000"  >&lt;p&gt;in short it&apos;s broken when  child (inner FencedFeedbackPanel) is removed and then added back later and this is the reason it&apos;s broken with RefreshingView  ..&lt;/p&gt;</comment>
                            <comment id="13701662" author="vineetsemwal" created="Sun, 7 Jul 2013 20:38:15 +0000"  >&lt;p&gt;i have provided the patch that fixes the problem ,all current tests pass and i added one more case for current problem,&lt;br/&gt;
 i have also posted code in gist in case if someone just wants to review  FencedFeedbackPanel &lt;br/&gt;
&lt;a href=&quot;https://gist.github.com/vineetsemwal/5944773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/vineetsemwal/5944773&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13701993" author="svenmeier" created="Mon, 8 Jul 2013 13:29:16 +0000"  >&lt;p&gt;With your patch it is no longer possible to use multiple feedbacks for the same fence, right?&lt;/p&gt;</comment>
                            <comment id="13702205" author="vineetsemwal" created="Mon, 8 Jul 2013 18:12:20 +0000"  >&lt;p&gt;if those multiple feedbacks for same fence are on same level then it will work ,say 2 inner feedbacks on same fence ,then some outer feedback  will find one or the other from metadata when it will try to recurse into component.. is this the case you are asking?&lt;/p&gt;</comment>
                            <comment id="13703070" author="vineetsemwal" created="Tue, 9 Jul 2013 08:54:59 +0000"  >&lt;p&gt;i have tried another approach and uploaded (second.patch ) .this keeps set of fencedfeedbacks for same fence as metadata  so the set is iterated and if any one  is found then false is returned ie. (it tells do not recurse into component) else true. &lt;/p&gt;

</comment>
                            <comment id="13765738" author="svenmeier" created="Thu, 12 Sep 2013 18:27:39 +0000"  >&lt;p&gt;The problem I see with both of your patches is that you&apos;re introducing a possible memory leak: If FencedFeedbackPanels are removed, a component might still keep a reference to it in its metaData.&lt;br/&gt;
If we follow that path, we might equally well keep the current solution with a counter and just remove #onRemove(), so users will have to do the housekeeping by themselves.&lt;/p&gt;</comment>
                            <comment id="13766441" author="vineetsemwal" created="Fri, 13 Sep 2013 12:37:53 +0000"  >&lt;p&gt;i was thinking of using weakreference/weakhashmap when i created those patches,are you ok if those are used now?&lt;br/&gt;
if you are ok with that,i will create one more patch (will improve second patch) .. &lt;br/&gt;
i have no problem with your suggested solution too in fact that was the first thing i did when i noticed this bug...&lt;/p&gt;</comment>
                            <comment id="14096880" author="cmenzel" created="Thu, 14 Aug 2014 11:41:38 +0000"  >&lt;p&gt;We encountered the same problem, except rather than with RefreshingView, we saw it with Wizard components. The underlying issue is the same: In onRemove the FencedFeedbackPanel removes the fence mark from its fence component, but if the FFP is added back later, the fence mark is not restored.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a much simpler patch that simply verifies whether the fence mark is still there and recreates it if necessary. All tests run, including one checking for the bad behavior.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svenmeier&quot; class=&quot;user-hover&quot; rel=&quot;svenmeier&quot;&gt;svenmeier&lt;/a&gt;, if you have no objections to this patch, I&apos;ll commit it for 6.x and 7.&lt;/p&gt;</comment>
                            <comment id="14096887" author="cmenzel" created="Thu, 14 Aug 2014 11:45:16 +0000"  >&lt;p&gt;A simpler fix.&lt;/p&gt;</comment>
                            <comment id="14096893" author="mgrigorov" created="Thu, 14 Aug 2014 11:58:57 +0000"  >&lt;p&gt;Looks good to me!&lt;/p&gt;</comment>
                            <comment id="14098524" author="cmenzel" created="Fri, 15 Aug 2014 13:00:11 +0000"  >&lt;p&gt;It fixes the easy case, but in our application I&apos;m still seeing an issue when using FencedFeedbackPanels together with Wizards. It seems that the onbeforerender/onconfigure thing of the FencedFeedbackPanel inside the WizardStep comes too late in restoring its fence. By that time the outer one in the Wizard itself has already grabbed all the messages.&lt;/p&gt;

&lt;p&gt;I&apos;m investigating this. Unfortunately we do not have an onAdd like we have an onRemove. I&apos;m not certain yet, but I have a feeling that I&apos;ll need an onAdd to fix this (and onAdd might be useful in general). I&apos;ll update here once I have found out more.&lt;/p&gt;</comment>
                            <comment id="14098526" author="mgrigorov" created="Fri, 15 Aug 2014 13:04:29 +0000"  >&lt;p&gt;Can you use onInitialize() ?&lt;br/&gt;
The idea is almost the same.&lt;br/&gt;
It should be called really soon if the container/parent has a ref to the page.&lt;/p&gt;</comment>
                            <comment id="14098828" author="cmenzel" created="Fri, 15 Aug 2014 17:53:57 +0000"  >&lt;p&gt;Not really. onInitialize is a very different thing. It&apos;s only called exactly once and is basically a delayed constructor. I need something that will be called whenever a component is added &lt;b&gt;or re-added&lt;/b&gt; to the page component tree. onRemove is called on the entire tree that is removed, we have no complement for that when something is added back.&lt;/p&gt;

&lt;p&gt;I&apos;ve tried it, and it fixed the problem in this ticket. I&apos;ll clean it up a little and push it in a branch so you can have a look at it.&lt;/p&gt;</comment>
                            <comment id="14099131" author="cmenzel" created="Fri, 15 Aug 2014 21:00:07 +0000"  >&lt;p&gt;The problem in the Wizard is when you go one step forward by calling next() and then come back with previous(). next() causes onRemove() in the WizardStep and all its children, so the FencedFeedbackPanel clears the fence marker. When you come back to that WizardStep with previous() it is re-added to the page but obviously not re-initialized. The component has no way of knowing that this happened, so it can&apos;t reliably recreate the fence.&lt;/p&gt;

&lt;p&gt;I have a quickstart for this that I&apos;ll upload, to illustrate.&lt;/p&gt;</comment>
                            <comment id="14100364" author="mgrigorov" created="Mon, 18 Aug 2014 07:09:58 +0000"  >&lt;p&gt;I remember there was onAdd() in 1.2.x but it has been removed for some reason. Ask in dev@ and hopefully someone from the other devs will give more details.&lt;/p&gt;

&lt;p&gt;I think having onInitialize() and onAdd() will lead to more confusion.&lt;br/&gt;
You can think of onInitialize() as a delayed constructor but I see it as a callback method which is called when the component has access to bot its parent and its markup. The extra bonus is that you can call overridable methods there, like AjaxLink&apos;s newAjaxEventBehavior(String event) and be sure that the AjaxLink component is fully initialized.&lt;/p&gt;

&lt;p&gt;By having onAdd() additionally the application developer will be confused because it won&apos;t be clear which callback is called first and which second and what semantics they provide.&lt;/p&gt;

&lt;p&gt;Better ask in dev@. Very few devs are subscribed to JIRA notifications.&lt;/p&gt;</comment>
                            <comment id="14100436" author="cmenzel" created="Mon, 18 Aug 2014 08:40:44 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5677&quot; title=&quot;Components should have onAdd to complement onRemove&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5677&quot;&gt;&lt;del&gt;WICKET-5677&lt;/del&gt;&lt;/a&gt; to track the improvement I think we need for this.&lt;/p&gt;</comment>
                            <comment id="14100449" author="cmenzel" created="Mon, 18 Aug 2014 08:58:30 +0000"  >&lt;p&gt;A quickstart that demonstrates the problem. A single info message is generated and should be shown only in the &quot;container feedback&quot; panel. After using &quot;next&quot; and &quot;previous&quot; to step backwards and forwards, the message shows up twice - once where it is supposed to be, and once in the FFP used by the wizard.&lt;/p&gt;</comment>
                            <comment id="14100570" author="jira-bot" created="Mon, 18 Aug 2014 12:09:37 +0000"  >&lt;p&gt;Commit 30a2849ed6276ac9eb91287a467a77cc0e36dc80 in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmenzel&quot; class=&quot;user-hover&quot; rel=&quot;cmenzel&quot;&gt;cmenzel&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=30a2849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=30a2849&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5677&quot; title=&quot;Components should have onAdd to complement onRemove&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5677&quot;&gt;&lt;del&gt;WICKET-5677&lt;/del&gt;&lt;/a&gt;&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14100571" author="jira-bot" created="Mon, 18 Aug 2014 12:09:38 +0000"  >&lt;p&gt;Commit 19af28e9c506433316500a0d56151bc49551acfa in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmenzel&quot; class=&quot;user-hover&quot; rel=&quot;cmenzel&quot;&gt;cmenzel&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=19af28e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=19af28e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt; FencedFeedbackPanel uses onReAdd to recreate fence mark&lt;/p&gt;</comment>
                            <comment id="14100572" author="cmenzel" created="Mon, 18 Aug 2014 12:11:15 +0000"  >&lt;p&gt;I pushed branch &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt;&quot; with a fix based on &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5677&quot; title=&quot;Components should have onAdd to complement onRemove&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5677&quot;&gt;&lt;del&gt;WICKET-5677&lt;/del&gt;&lt;/a&gt;. (if nobody objects in the next couple days, i will do a squash merge to have one clean commit in the main branch later, including issue number, of course.)&lt;/p&gt;</comment>
                            <comment id="14151586" author="jira-bot" created="Mon, 29 Sep 2014 11:06:31 +0000"  >&lt;p&gt;Commit 0eb596df3003006cb3d99988fc2e1f65e16c14cb in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmenzel&quot; class=&quot;user-hover&quot; rel=&quot;cmenzel&quot;&gt;cmenzel&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0eb596d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0eb596d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt; recreate fence mark when removing and readding a fencedfeedbackpanel&lt;/p&gt;</comment>
                            <comment id="14151591" author="jira-bot" created="Mon, 29 Sep 2014 11:15:21 +0000"  >&lt;p&gt;Commit 734ecfbe1bec8436d31248612aa1bfe868e32342 in wicket&apos;s branch refs/heads/wicket-6.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmenzel&quot; class=&quot;user-hover&quot; rel=&quot;cmenzel&quot;&gt;cmenzel&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=734ecfb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=734ecfb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5265&quot; title=&quot;FencedFeedbackPanel is broken with RefreshingView(and it&amp;#39;s implementations)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-5265&quot;&gt;&lt;del&gt;WICKET-5265&lt;/del&gt;&lt;/a&gt; recreate fence mark when removing and readding a fencedfeedbackpanel&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12734716">WICKET-5677</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12661699" name="0001-WICKET-5265-recreate-fence-mark-when-needed.patch" size="16112" author="cmenzel" created="Thu, 14 Aug 2014 11:45:15 +0000"/>
                            <attachment id="12591141" name="WICKET-5265.patch" size="4915" author="vineetsemwal" created="Sun, 7 Jul 2013 20:13:37 +0000"/>
                            <attachment id="12662457" name="fencedfeedbacktest.tar.gz" size="21278" author="cmenzel" created="Mon, 18 Aug 2014 08:58:30 +0000"/>
                            <attachment id="12591399" name="second.patch" size="5611" author="vineetsemwal" created="Tue, 9 Jul 2013 08:52:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m2lz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>