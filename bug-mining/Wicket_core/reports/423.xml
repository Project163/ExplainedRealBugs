<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4139] Encoding problem in CryptoMapper</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4139</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;CryptoMapper throws the following exception (see attached QuickStart):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR - AbstractCrypt              - Error decoding text: style.css
java.lang.RuntimeException: Unable to decrypt the text &lt;span class=&quot;code-quote&quot;&gt;&apos;&#65533;&#1829;y&#65533;,&apos;&lt;/span&gt;
	at org.apache.wicket.util.crypt.AbstractCrypt.decryptByteArray(AbstractCrypt.java:150)
	at org.apache.wicket.util.crypt.AbstractCrypt.decryptUrlSafe(AbstractCrypt.java:66)
	at org.apache.wicket.request.mapper.CryptoMapper.decryptUrl(CryptoMapper.java:159)
	at org.apache.wicket.request.mapper.CryptoMapper.mapRequest(CryptoMapper.java:102)
	at org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:130)
	at org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:179)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:204)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:251)
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:162)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:218)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1326)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:479)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:940)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:874)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
	at org.eclipse.jetty.server.Server.handle(Server.java:349)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:904)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:565)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:50)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:245)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:680)
Caused by: javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher
	at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
	at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
	at com.sun.crypto.provider.SunJCE_ab.b(DashoA13*..)
	at com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(DashoA13*..)
	at javax.crypto.Cipher.doFinal(DashoA13*..)
	at org.apache.wicket.util.crypt.SunJceCrypt.crypt(SunJceCrypt.java:94)
	at org.apache.wicket.util.crypt.AbstractCrypt.decryptByteArray(AbstractCrypt.java:146)
	... 30 more
ERROR - CryptoMapper               - Error decrypting URL
java.lang.IllegalArgumentException: Argument &lt;span class=&quot;code-quote&quot;&gt;&apos;url&apos;&lt;/span&gt; may not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
	at org.apache.wicket.util.lang.Args.notNull(Args.java:39)
	at org.apache.wicket.request.Url.parse(Url.java:127)
	at org.apache.wicket.request.mapper.CryptoMapper.decryptUrl(CryptoMapper.java:160)
	at org.apache.wicket.request.mapper.CryptoMapper.mapRequest(CryptoMapper.java:102)
	at org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:130)
	at org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:179)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:204)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:251)
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:162)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:218)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1326)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:479)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:940)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:874)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
	at org.eclipse.jetty.server.Server.handle(Server.java:349)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:904)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:565)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:50)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:245)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:680)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Mac OSX 10.7.2&lt;br/&gt;
java version &amp;quot;1.6.0_26&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_26-b03-383-11A511)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02-383, mixed mode)&lt;br/&gt;
</environment>
        <key id="12527491">WICKET-4139</key>
            <summary>Encoding problem in CryptoMapper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="thomas.goetz">Tom G&#246;tz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2011 20:41:14 +0000</created>
                <updated>Tue, 18 Oct 2011 15:28:42 +0000</updated>
                            <resolved>Tue, 18 Oct 2011 15:28:42 +0000</resolved>
                                    <version>1.5.1</version>
                                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13129554" author="thomas.goetz" created="Tue, 18 Oct 2011 06:59:56 +0000"  >&lt;p&gt;I debugged this a bit: the exception is thrown in org.apache.wicket.util.crypt.SunJceCrypt, line 94 (Wicket 1.5.1).&lt;/p&gt;</comment>
                            <comment id="13129558" author="thomas.goetz" created="Tue, 18 Oct 2011 07:11:55 +0000"  >&lt;p&gt;Very easy to test:&lt;/p&gt;

&lt;p&gt;SunJceCrypt crypt = new SunJceCrypt();&lt;br/&gt;
String s1 = crypt.decryptUrlSafe(&quot;fJYHb5uKsGk&quot;);   // segment generated by CrytoMapper &lt;br/&gt;
assertNotNull(s1);&lt;br/&gt;
String s2 = crypt.decryptUrlSafe(&quot;Home&quot;);&lt;br/&gt;
assertNotNull(s2); &lt;/p&gt;</comment>
                            <comment id="13129590" author="svenmeier" created="Tue, 18 Oct 2011 08:18:49 +0000"  >&lt;p&gt;Note that the default key of SunJceCrypt (&quot;WiCkEt-CrYpT&quot;) is different from that used when Wicket is started (&quot;WiCkEt-FRAMEwork&quot;). This is why s1 is null in your test.&lt;/p&gt;</comment>
                            <comment id="13129591" author="thomas.goetz" created="Tue, 18 Oct 2011 08:22:13 +0000"  >&lt;p&gt;Ok, but this is not yet the cause of the exception beeing thrown, is it?&lt;/p&gt;</comment>
                            <comment id="13129593" author="svenmeier" created="Tue, 18 Oct 2011 08:29:51 +0000"  >&lt;p&gt;Note that these exceptions are catched and &lt;b&gt;logged&lt;/b&gt; in CryptoMapper. Are you complaining about excessive logging or an actual defect? Thanks.&lt;/p&gt;</comment>
                            <comment id="13129594" author="thomas.goetz" created="Tue, 18 Oct 2011 08:34:59 +0000"  >&lt;p&gt;The defect in my opinion is (as already stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4140&quot; title=&quot;Make CryptoMapper easier to extend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4140&quot;&gt;&lt;del&gt;WICKET-4140&lt;/del&gt;&lt;/a&gt;): when using CryptoMapper it is no longer possible to access mounted pages by the URL.&lt;/p&gt;

&lt;p&gt;In Application#init():&lt;/p&gt;

&lt;p&gt;mountPage(&quot;Home&quot;, HomePage.class);&lt;br/&gt;
setRootRequestMapper(new CryptoMapper(getRootRequestMapper(), this));&lt;/p&gt;

&lt;p&gt;Now try to access localhost:8080/Home ---&amp;gt; 404 and exceptions beeing thrown.&lt;/p&gt;</comment>
                            <comment id="13129600" author="thomas.goetz" created="Tue, 18 Oct 2011 08:51:24 +0000"  >&lt;p&gt;I have the feeling that this error occures because CryptoMapper tries to decrypt &quot;Home&quot;, which he shouldn&apos;t ... (not debugged yet, just a gut feeling).&lt;/p&gt;</comment>
                            <comment id="13129617" author="mgrigorov" created="Tue, 18 Oct 2011 09:39:39 +0000"  >&lt;p&gt;I think you should mount &quot;Home&quot; after the setup of CryptoMapper. This way it will be used as entry point to your application.&lt;br/&gt;
Most of the time this is &apos;/&apos; (the default home mount point) but since you want different mount point for your home page then you need to make it available (not encrypted).&lt;/p&gt;</comment>
                            <comment id="13129624" author="thomas.goetz" created="Tue, 18 Oct 2011 09:50:13 +0000"  >&lt;p&gt;But as stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4140&quot; title=&quot;Make CryptoMapper easier to extend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4140&quot;&gt;&lt;del&gt;WICKET-4140&lt;/del&gt;&lt;/a&gt;, when &quot;Home&quot; is mounted after the CryptoMapper, then AJAX links eg in AjaxTabbedPanel are not encrypted on that page, so for me this is a lose-lose situation currently. I need all links (also AJAX) encrypted (customer demand) which blocks me from upgrading to 1.5.x currently ...&lt;/p&gt;</comment>
                            <comment id="13129799" author="svenmeier" created="Tue, 18 Oct 2011 15:28:42 +0000"  >&lt;p&gt;See further investigation in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4140&quot; title=&quot;Make CryptoMapper easier to extend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4140&quot;&gt;&lt;del&gt;WICKET-4140&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12527499">WICKET-4140</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12499428" name="QuickStart.zip" size="22067" author="thomas.goetz" created="Mon, 17 Oct 2011 20:41:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17fq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>