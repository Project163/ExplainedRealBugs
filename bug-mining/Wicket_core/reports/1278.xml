<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:24:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6109] Enclosure - &quot;IllegalArgumentException: Argument &apos;markup&apos; may not be null&quot; after app restart</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6109</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I&apos;ve debugged it a bit and this is what happens:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Open some page with enclosure&lt;/li&gt;
	&lt;li&gt;Markup is parsed - &lt;tt&gt;ComponentTag&lt;/tt&gt; of enclosure gets id: &lt;tt&gt;wicket_enclosure1011&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;Enclosure&lt;/tt&gt; component is created and gets id from &lt;tt&gt;ComponentTag&lt;/tt&gt;: &lt;tt&gt;wicket_enclosure1011&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Page is rendered in browser - everything ok sofar&lt;/li&gt;
	&lt;li&gt;Restart server&lt;/li&gt;
	&lt;li&gt;Hit F5 in browser&lt;/li&gt;
	&lt;li&gt;Markup is parsed - &lt;tt&gt;ComponentTag&lt;/tt&gt; of enclosure gets different id than in the first request: &lt;tt&gt;wicket_enclosure112113&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;Enclosure&lt;/tt&gt; component is not created again (it is taken from page map??) - but this component has id from first request: &lt;tt&gt;wicket_enclosure1011&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;Enclosure.getMarkup()&lt;/tt&gt; is called which delegates search to &lt;tt&gt;AssociatedMarkupSourcingStrategy.getMarkup()&lt;/tt&gt; and here on line 117 it tries to find markup of enclosure by wrong id.&lt;/li&gt;
	&lt;li&gt;This obviously fails and markup is not found which results in this exception&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: Argument &lt;span class=&quot;code-quote&quot;&gt;&apos;markup&apos;&lt;/span&gt; may not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
	at org.apache.wicket.util.lang.Args.notNull(Args.java:41) ~[wicket-util-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.MarkupStream.&amp;lt;init&amp;gt;(MarkupStream.java:65) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:136) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.html.internal.Enclosure.onConfigure(Enclosure.java:178) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.configure(Component.java:1055) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.internalBeforeRender(Component.java:940) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.beforeRender(Component.java:1017) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1831) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	... 55 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will try to create a quickstart, but I don&apos;t know if I will be able to simulate this on simple page. Id of the enclosure is created by &lt;tt&gt;AbstractMarkupFilter.getRequestUniqueId()&lt;/tt&gt; so the only way the id could be different is that another components call &lt;tt&gt;getRequestUniqueId()&lt;/tt&gt; in different order each time. (or maybe I&apos;am wrong.. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT:&lt;/b&gt;&lt;br/&gt;
Please see the attached quickstart. Steps to reproduce:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Start quickstart&lt;/li&gt;
	&lt;li&gt;Go to &lt;tt&gt;localhost:8888&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Click on Go to page 2&lt;/li&gt;
	&lt;li&gt;Restart the server&lt;/li&gt;
	&lt;li&gt;Hit F5 in the browser&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Note that session persistance is enabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946101">WICKET-6109</key>
            <summary>Enclosure - &quot;IllegalArgumentException: Argument &apos;markup&apos; may not be null&quot; after app restart</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bitstorm">Andrea Del Bene</assignee>
                                    <reporter username="vlastimil.dolejs">Vlastimil</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 09:41:41 +0000</created>
                <updated>Fri, 25 Mar 2016 13:15:50 +0000</updated>
                            <resolved>Sat, 12 Mar 2016 19:17:23 +0000</resolved>
                                    <version>7.2.0</version>
                                    <fixVersion>7.3.0</fixVersion>
                    <fixVersion>8.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15191344" author="jira-bot" created="Fri, 11 Mar 2016 18:33:35 +0000"  >&lt;p&gt;Commit b42edb02cb98d9cbe9e9278a0ba0923a66c0311d in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b42edb0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b42edb0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6109&quot; title=&quot;Enclosure - &amp;quot;IllegalArgumentException: Argument &amp;#39;markup&amp;#39; may not be null&amp;quot; after app restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6109&quot;&gt;&lt;del&gt;WICKET-6109&lt;/del&gt;&lt;/a&gt; Enclosure - &quot;IllegalArgumentException: Argument &apos;markup&apos; may not be null&quot; after app restart&lt;/p&gt;</comment>
                            <comment id="15191476" author="jira-bot" created="Fri, 11 Mar 2016 20:37:05 +0000"  >&lt;p&gt;Commit 5a7a089d57f022467cdea8b2fae531729a6dcb4d in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5a7a089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5a7a089&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6109&quot; title=&quot;Enclosure - &amp;quot;IllegalArgumentException: Argument &amp;#39;markup&amp;#39; may not be null&amp;quot; after app restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6109&quot;&gt;&lt;del&gt;WICKET-6109&lt;/del&gt;&lt;/a&gt; Enclosure - &quot;IllegalArgumentException: Argument &apos;markup&apos; may not be null&quot; after app restart&lt;/p&gt;</comment>
                            <comment id="15192288" author="aaime" created="Sun, 13 Mar 2016 10:42:35 +0000"  >&lt;p&gt;Hi, I&apos;m tracking an issue found in Wicket 7.2 and stumbled upon this change... wondering if it&apos;s a different symptom of the same problem. &lt;br/&gt;
Basically I have a base page with a &amp;lt;message&amp;gt; tag, with multiple subpages also using &amp;lt;message&amp;gt; tags. The first subpage gets instantiated and this message tag gets a id like &quot;wicket_message33&quot;, then another sub-page gets instantiated, a new counter gets built to generate the ids, and one of its message tags (in the subpage) also gets &quot;wicket_message33&quot; as its id, and then we get an exception from Page complaining the same component has been rendered twice.&lt;/p&gt;

&lt;p&gt;Andrea, looking at your change it might seem that it would fix the above issue too.&lt;/p&gt;</comment>
                            <comment id="15192326" author="mgrigorov" created="Sun, 13 Mar 2016 12:13:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aaime&quot; class=&quot;user-hover&quot; rel=&quot;aaime&quot;&gt;aaime&lt;/a&gt; Please test with 7.3.0-SNAPSHOT if you can before we release it.&lt;/p&gt;</comment>
                            <comment id="15195769" author="tschoening" created="Tue, 15 Mar 2016 17:43:41 +0000"  >&lt;p&gt;A current 7.3.0-SNAPSHOT fixes the IllegalArgumentException in my quickstart and the stackoverflow of my main app as well. Thanks!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/&lt;/a&gt;&amp;lt;1676919581.20160311194546%40am-soft.de&amp;gt;&lt;/p&gt;</comment>
                            <comment id="15197086" author="jira-bot" created="Wed, 16 Mar 2016 09:31:48 +0000"  >&lt;p&gt;Commit 1a6594b1c724a0d4f235ed63b83dc458ffc51d3c in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a6594b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a6594b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6109&quot; title=&quot;Enclosure - &amp;quot;IllegalArgumentException: Argument &amp;#39;markup&amp;#39; may not be null&amp;quot; after app restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6109&quot;&gt;&lt;del&gt;WICKET-6109&lt;/del&gt;&lt;/a&gt; Enclosure - &quot;IllegalArgumentException: Argument &apos;markup&apos; may not be null&quot; after app restart&lt;/p&gt;

&lt;p&gt; Set locale as Locale.US for InlineEnclosureWithWicketMessagePage so that the tests which use it pass also on systems with different locales&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12938027">WICKET-6093</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12790913" name="enclosure-id-quickstart.zip" size="28883" author="vlastimil.dolejs" created="Wed, 2 Mar 2016 11:36:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u0t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>