<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:22:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5504] AjaxRequestTarget.append/prependJavaScript cannot handle scripts with new-lines anymore</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5504</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Previously (version &amp;lt;= 6.0.8, but I suspect &amp;lt;= 6.0.11) , code like the following worked:&lt;/p&gt;

&lt;p&gt;public void onSomething(AjaxRequestTarget target) {&lt;br/&gt;
target.prependJavaScript(&lt;br/&gt;
   &quot;notify|jQuery(&apos;#someSelector&apos;).slideUp({\n&quot; +&lt;br/&gt;
      &quot;   complete: function() &lt;/p&gt;
{\n&quot; +
      &quot;        doSomething();\n&quot; +
      &quot;        notify();\n&quot; +
      &quot;   }
&lt;p&gt;\n&quot; +&lt;br/&gt;
      &quot;});&quot;&lt;br/&gt;
);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Note two things about this code:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;it uses the &quot;notify|....&quot; method to delay execution of other scripts until the animation is complete;&lt;/li&gt;
	&lt;li&gt;it contains some new line characters.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In Wicket 6.0.12 (and 6.0.13) this script fails silently: the slideUp doesn&apos;t get executed.&lt;/p&gt;

&lt;p&gt;When I remove the new-line-characters &quot;\n&quot; from the script, it works again.&lt;/p&gt;

&lt;p&gt;Cause: line 1075 of wicket-ajax-jquery.js states:&lt;/p&gt;

&lt;p&gt;var scriptSplitterR = new RegExp(&quot;\\(function\\(\\)&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
{.*?}
&lt;p&gt;\\)\\(&lt;br class=&quot;atl-forced-newline&quot; /&gt;);&quot;, &apos;gi&apos;);&lt;/p&gt;

&lt;p&gt;This regular expression does NOT match my script, while it should. This is caused by the the dot not matching the new line character.&lt;/p&gt;

&lt;p&gt;A solution (according to various sources) could be the following, as &lt;span class=&quot;error&quot;&gt;&amp;#91;\S\s&amp;#93;&lt;/span&gt; matches any character (including new line characters):&lt;/p&gt;

&lt;p&gt;var scriptSplitterR = new RegExp(&quot;\\(function\\(\\)&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
{[\s\S]*?}
&lt;p&gt;\\)\\(&lt;br class=&quot;atl-forced-newline&quot; /&gt;);&quot;, &apos;gi&apos;);&lt;/p&gt;

&lt;p&gt;Additional info: on github, I see the following lines in wicket-ajax-jquery.js have changed between 6.0.11 and 6.0.12:&lt;/p&gt;

&lt;p&gt;var scripts = cleanArray(text.split(scriptSplitterR));&lt;/p&gt;

&lt;p&gt;has become:&lt;/p&gt;

&lt;p&gt;var scripts = [];&lt;br/&gt;
var scr;&lt;br/&gt;
while ( (scr = scriptSplitterR.exec(text) ) != null ) {&lt;br/&gt;
    scripts.push(scr&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I suspect this change now causes my little problem.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12694331">WICKET-5504</key>
            <summary>AjaxRequestTarget.append/prependJavaScript cannot handle scripts with new-lines anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="p.huijnen">Paul Huijnen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Feb 2014 19:42:27 +0000</created>
                <updated>Mon, 17 Feb 2014 20:18:53 +0000</updated>
                            <resolved>Mon, 17 Feb 2014 20:18:53 +0000</resolved>
                                    <version>6.12.0</version>
                    <version>6.13.0</version>
                                    <fixVersion>7.0.0-M1</fixVersion>
                    <fixVersion>6.15.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13896917" author="p.huijnen" created="Mon, 10 Feb 2014 19:45:19 +0000"  >&lt;p&gt;This is my first bug report for Wicket: how do I get some nice code formatting in the description? I am used to JIRA using the Confluence wiki markup language.&lt;/p&gt;</comment>
                            <comment id="13896923" author="mgrigorov" created="Mon, 10 Feb 2014 19:52:08 +0000"  >&lt;p&gt;A simple quickstart would help to resolve this ticket faster.&lt;br/&gt;
Thanks!&lt;/p&gt;

&lt;p&gt;About code formatting: Apache sysadmins switched off this functionality long time ago.&lt;/p&gt;</comment>
                            <comment id="13896943" author="p.huijnen" created="Mon, 10 Feb 2014 20:03:39 +0000"  >&lt;p&gt;OK, I will see if I can find that extra half an hour to do that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s94n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>