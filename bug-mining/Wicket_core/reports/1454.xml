<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6544] Chrome and Firefox on iOS detected as Safari - removed UserAgent</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6544</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;The UserAgent detection on iOS for browsers other than Safari does not work correctly.&lt;/p&gt;

&lt;p&gt;E.g. Chrome 64 has UserAgent&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Mozilla/5.0 (iPhone; CPU iPhone OS 11_2_6 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) CriOS/64.0.3282.112 Mobile/15D100 Safari/604.1&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;which is recognized by classes &lt;tt&gt;UserAgent&lt;/tt&gt; and &lt;tt&gt;WebClientInfo&lt;/tt&gt; as&#160;Safari with no version (-1). The problem is that the UserAgent does not contain &quot;Chrome&quot; as required by &lt;tt&gt;UserAgent.CHROME&lt;/tt&gt;, but instead &quot;CriOS&quot;. So it is recognized as Safari, but since it does not contain &quot;version/&quot;, no version is set.&lt;/p&gt;

&lt;p&gt;A similar problem exists for Firefox on iOS where the UserAgent contains &quot;FxiOS&quot; instead of &quot;Firefox&quot;:&lt;br/&gt;
 &lt;cite&gt;Mozilla/5.0 (iPhone; CPU iPhone OS 11_2_6 like Mac OS X) AppleWebKit/604.5.6 (KHTML, like Gecko) FxiOS/10.6b8836 Mobile/15D100 Safari/604.5.6&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;In our application this causes some unwanted redirects to legacy pages because we think it is an old Safari browser with no support for some features our pages need. But of course the Chrome und Firefox versions above support all that.&lt;/p&gt;

&lt;p&gt;see also &lt;a href=&quot;https://developer.chrome.com/multidevice/user-agent#chrome_for_ios_user_agent,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.chrome.com/multidevice/user-agent#chrome_for_ios_user_agent&lt;/a&gt;&#160;and&#160;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox#Firefox_for_iOS&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox#Firefox_for_iOS&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks for looking into it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145311">WICKET-6544</key>
            <summary>Chrome and Firefox on iOS detected as Safari - removed UserAgent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="svenackermann">Sven Ackermann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2018 09:34:19 +0000</created>
                <updated>Fri, 14 Jun 2019 04:50:15 +0000</updated>
                            <resolved>Mon, 25 Jun 2018 16:17:15 +0000</resolved>
                                    <version>7.9.0</version>
                                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16408114" author="jira-bot" created="Wed, 21 Mar 2018 15:44:36 +0000"  >&lt;p&gt;Commit 0cc14749903f51057cc75d011cbc8a02a4e42f4c in wicket&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt;-mobile-browsers from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=solomax&quot; class=&quot;user-hover&quot; rel=&quot;solomax&quot;&gt;solomax&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0cc1474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0cc1474&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; mobile browser detection is improved&lt;/p&gt;</comment>
                            <comment id="16408116" author="githubbot" created="Wed, 21 Mar 2018 15:45:30 +0000"  >&lt;p&gt;GitHub user solomax opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; mobile browser detection is improved&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt;-mobile-browsers&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #269&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0cc14749903f51057cc75d011cbc8a02a4e42f4c&lt;br/&gt;
Author: Maxim Solodovnik &amp;lt;solomax666@...&amp;gt;&lt;br/&gt;
Date:   2018-03-21T15:44:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; mobile browser detection is improved&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16408121" author="githubbot" created="Wed, 21 Mar 2018 15:46:52 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269#discussion_r176132347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269#discussion_r176132347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -680,6 +708,35 @@ public void konqueror()&lt;br/&gt;
     		}&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	@Test&lt;br/&gt;
    +	public void ffMobile()&lt;br/&gt;
    +	{&lt;br/&gt;
    +		final String userAgent = &quot;Mozilla/5.0 (iPhone; CPU iPhone OS 11_2_6 like Mac OS X) AppleWebKit/604.5.6 (KHTML, like Gecko) FxiOS/10.6b8836 Mobile/15D100 Safari/604.5.6&quot;;&lt;br/&gt;
    +		WebClientInfo webClientInfo = new WebClientInfo(requestCycleMock, userAgent);&lt;br/&gt;
    +&lt;br/&gt;
    +		assertThat(userAgent, webClientInfo.getProperties().getBrowserVersionMajor(),&lt;br/&gt;
    +			is(equalTo(10)));&lt;br/&gt;
    +		assertThat(userAgent, webClientInfo.getProperties().getBrowserVersionMinor(),&lt;br/&gt;
    +			is(equalTo(6)));&lt;br/&gt;
    +		assertThat(userAgent, webClientInfo.getProperties().isBrowserMozillaFirefox(),&lt;br/&gt;
    +			is(equalTo(true)));&lt;br/&gt;
    +		assertThat(userAgent, webClientInfo.getProperties().isBrowserMozilla(),&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This part is something I don;t really like in this PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16409160" author="githubbot" created="Thu, 22 Mar 2018 07:15:45 +0000"  >&lt;p&gt;Github user martin-g commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    With the addition of these new mobile browsers user agent strings the code becomes more complex.&lt;br/&gt;
    Maybe we should think in direction how to make use of external libraries to do this checks, e.g. &lt;a href=&quot;https://github.com/pieroxy/java-user-agent-detection&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pieroxy/java-user-agent-detection&lt;/a&gt; or &lt;a href=&quot;https://github.com/HaraldWalker/user-agent-utils&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/HaraldWalker/user-agent-utils&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16409162" author="githubbot" created="Thu, 22 Mar 2018 07:19:00 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    And/or maybe browser list and supported patterns can be cleaned up to support more recent versions only?&lt;/p&gt;</comment>
                            <comment id="16417692" author="githubbot" created="Wed, 28 Mar 2018 16:30:15 +0000"  >&lt;p&gt;Github user kbachl commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    drop this &quot;feature&quot; completely - it just wont work reliable anyway&lt;/p&gt;</comment>
                            <comment id="16423835" author="svenmeier" created="Tue, 3 Apr 2018 10:47:04 +0000"  >&lt;p&gt;We should differentiate between Wicket&apos;s internal usage of user agent sniffing, the JavaScript and Java API:&lt;/p&gt;

&lt;p&gt;Wicket.Browser in wicket-ajax-jquery.js offers a JS API for detection of some browsers, these methods are used 6 times (3 more times in wicket-autocomplete.js)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refusing to work on Safari &amp;lt; 2.0.0 (X)&lt;/li&gt;
	&lt;li&gt;handling redirect for firefox 3 (X)&lt;/li&gt;
	&lt;li&gt;uppercasing &amp;lt;script&amp;gt; for KHTML (X)&lt;/li&gt;
	&lt;li&gt;workaround for script onload for Firefox (X?)&lt;/li&gt;
	&lt;li&gt;workaround for createStyleSheet() in IE &amp;lt;11 (F)&lt;/li&gt;
	&lt;li&gt;workaround for dragging events for debug-window and ModalWindow&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The first four (marked with X) can probable just be removed, as such old browser aren&apos;t support anymore anyway (and who knows whether these special cases still apply?). For createStyleSheet (F) we can use feature detection instead (as Korbinian Bachl suggested).&lt;br/&gt;
I assume these JS methods to be internal and not (widely?) utilized by users.&lt;/p&gt;

&lt;p&gt;Regarding WebClientInfo&apos;s browser detection Java API:&lt;br/&gt;
#isBrowserInternetExplorer() is called a single time from DynamicJQueryResourceReference, to decide which jQuery version is to be used. We can easily remove this, since IE9 is no longer supported and users can still use their own jQuery version if really required.&lt;/p&gt;

&lt;p&gt;Apart from that the current browser detection relies an a very simplistic solution that applies some regex to &apos;guess&apos; the user agent. I cannot think of anybody daring to rely on that implementation, especially in the time of mobile browsers. Just take a look at pieroxy/java-user-agent-detection how much effort is put into a sophisticated solution.&lt;br/&gt;
But I don&apos;t see a reason why we should incorporate an alternative implementation either: Wicket isn&apos;t in need for it and users can just pass Wicket&apos;s user agent string to whatever detection algorithm they like.&lt;/p&gt;

&lt;p&gt;IMHO any effort we continue to put into the current solution will be obsolete in the future. So either drop it or leave it as is (until Wicket 9).&lt;/p&gt;</comment>
                            <comment id="16426055" author="githubbot" created="Wed, 4 Apr 2018 19:25:43 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I also looked a bit around and stumbled over Apache DeviceMap which has been moved into the Attic and from the Attic (&lt;a href=&quot;http://attic.apache.org/projects/devicemap.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://attic.apache.org/projects/devicemap.html&lt;/a&gt;) I followed the link to &lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt; which seems to be maintained.&lt;/p&gt;

&lt;p&gt;    @kbachl - I understand your suggestion to remove it because of reliability, but I would keep the functionality with the hint that there might be some not supported browsers which is better than no detection.&lt;/p&gt;</comment>
                            <comment id="16426607" author="githubbot" created="Thu, 5 Apr 2018 08:08:51 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I just tested a bit around and I would suggest the following changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Drop the support for minor version in exchange for a full version String (11.0, 3.5.8, 4.0b4a)&lt;/li&gt;
	&lt;li&gt;Change the implementation to yauaa - I also played around a bit and found some not correctly resolved version numbers (the browsers are all detected correctly) &lt;a href=&quot;https://github.com/nielsbasjes/yauaa/issues/75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa/issues/75&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Change the UserAgent enum to not handle excludes, but only browser names&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    If the issue is fixed I can provide a PR.&lt;/p&gt;</comment>
                            <comment id="16426777" author="githubbot" created="Thu, 5 Apr 2018 11:38:12 +0000"  >&lt;p&gt;Github user svenmeier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Guys I get it, there are many good solutions to choose from, but why should we make Wicket dependent on anyone of them?&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt; looks good, but do users really need assistance for this?&lt;/p&gt;

&lt;p&gt;    `UserAgent  userAgent = analyzer.parse(new WebClientInfo(requestCycle).getUserAgent());`&lt;/p&gt;</comment>
                            <comment id="16426818" author="githubbot" created="Thu, 5 Apr 2018 12:20:15 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    In my opinion and because of such a big pool of browsers I would say yes.&lt;/p&gt;</comment>
                            <comment id="16435029" author="githubbot" created="Thu, 12 Apr 2018 07:09:21 +0000"  >&lt;p&gt;GitHub user klopfdreh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; mobile browser detection is improved (with YAUAA)&lt;/p&gt;

&lt;p&gt;    Hi all,&lt;/p&gt;

&lt;p&gt;    here my 5 cent regarding the browser detection with &lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    you have to extend the test to see the real benefit.&lt;/p&gt;

&lt;p&gt;    kind regards&lt;/p&gt;

&lt;p&gt;    Tobias&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/klopfdreh/wicket&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/klopfdreh/wicket&lt;/a&gt; browser_version_detection&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #275&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 96bab261b5c9e96393737444ac9601eda97ef7bc&lt;br/&gt;
Author: Tobias Soloschenko &amp;lt;tsoloschenko@...&amp;gt;&lt;br/&gt;
Date:   2018-04-12T07:05:19Z&lt;/p&gt;

&lt;p&gt;    Browser / Version detection&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16435031" author="githubbot" created="Thu, 12 Apr 2018 07:11:03 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    See my suggestion over here: &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16436321" author="githubbot" created="Thu, 12 Apr 2018 21:17:13 +0000"  >&lt;p&gt;Github user svenmeier commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181224559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181224559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -46,14 +46,20 @@&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The user agent string from the User-Agent header, app. Theoretically, this might differ from&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* 
{@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()} property, which is&lt;br/&gt;
    -	 * not set until an actual reply from a browser (e.g. using {@link BrowserInfoPage} is set.&lt;br/&gt;
    +	 * {@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()}
&lt;p&gt; property,&lt;br/&gt;
    +	 * which is not set until an actual reply from a browser (e.g. using &lt;/p&gt;
{@link BrowserInfoPage}
&lt;p&gt; is&lt;br/&gt;
    +	 * set.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private final String userAgent;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Client properties object. */&lt;br/&gt;
     	private final ClientProperties properties;&lt;/p&gt;

&lt;p&gt;    +	private final static UserAgentAnalyzer UAA = UserAgentAnalyzer.newBuilder()&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    UserAgentAnalyzer isn&apos;t reentrant. Since it is expensive to create one, instances have to be pooled.&lt;/p&gt;</comment>
                            <comment id="16436776" author="githubbot" created="Fri, 13 Apr 2018 04:17:06 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181282313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181282313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -193,165 +198,117 @@ protected String getRemoteAddr(RequestCycle requestCycle)&lt;br/&gt;
     	 */&lt;br/&gt;
     	private void init()&lt;br/&gt;
     	{&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;setInternetExplorerProperties();&lt;/li&gt;
	&lt;li&gt;setOperaProperties();&lt;/li&gt;
	&lt;li&gt;setMozillaProperties();&lt;/li&gt;
	&lt;li&gt;setKonquerorProperties();&lt;/li&gt;
	&lt;li&gt;setChromeProperties();&lt;/li&gt;
	&lt;li&gt;setEdgeProperties();&lt;/li&gt;
	&lt;li&gt;setSafariProperties();&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = UAA.parse(getUserAgent());&lt;br/&gt;
    +		setInternetExplorerProperties(parsedUserAgent);&lt;br/&gt;
    +		setKonquerorProperties(parsedUserAgent);&lt;br/&gt;
    +		setMozillaProperties(parsedUserAgent);&lt;br/&gt;
    +		setOperaProperties(parsedUserAgent);&lt;br/&gt;
    +		setChromeProperties(parsedUserAgent);&lt;br/&gt;
    +		setEdgeProperties(parsedUserAgent);&lt;br/&gt;
    +		setSafariProperties(parsedUserAgent);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    All these methods looks very much the same ....&lt;/p&gt;</comment>
                            <comment id="16436780" author="githubbot" created="Fri, 13 Apr 2018 04:23:19 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181282823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181282823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -193,165 +198,117 @@ protected String getRemoteAddr(RequestCycle requestCycle)&lt;br/&gt;
     	 */&lt;br/&gt;
     	private void init()&lt;br/&gt;
     	{&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;setInternetExplorerProperties();&lt;/li&gt;
	&lt;li&gt;setOperaProperties();&lt;/li&gt;
	&lt;li&gt;setMozillaProperties();&lt;/li&gt;
	&lt;li&gt;setKonquerorProperties();&lt;/li&gt;
	&lt;li&gt;setChromeProperties();&lt;/li&gt;
	&lt;li&gt;setEdgeProperties();&lt;/li&gt;
	&lt;li&gt;setSafariProperties();&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = UAA.parse(getUserAgent());&lt;br/&gt;
    +		setInternetExplorerProperties(parsedUserAgent);&lt;br/&gt;
    +		setKonquerorProperties(parsedUserAgent);&lt;br/&gt;
    +		setMozillaProperties(parsedUserAgent);&lt;br/&gt;
    +		setOperaProperties(parsedUserAgent);&lt;br/&gt;
    +		setChromeProperties(parsedUserAgent);&lt;br/&gt;
    +		setEdgeProperties(parsedUserAgent);&lt;br/&gt;
    +		setSafariProperties(parsedUserAgent);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    can be replaced with&lt;br/&gt;
    String agent = parsedUserAgent.getValue(&quot;AgentName&quot;);&lt;br/&gt;
    properties.setBrowserKonqueror(UserAgent.KONQUEROR.getUaStrings().contains(agent));&lt;br/&gt;
    properties.setBrowserChrome(UserAgent.CHROME.getUaStrings().contains(agent));&lt;br/&gt;
    .................&lt;br/&gt;
    setBrowserVersion(parsedUserAgent);&lt;/p&gt;</comment>
                            <comment id="16436810" author="githubbot" created="Fri, 13 Apr 2018 05:02:58 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181286230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181286230&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -193,165 +198,117 @@ protected String getRemoteAddr(RequestCycle requestCycle)&lt;br/&gt;
     	 */&lt;br/&gt;
     	private void init()&lt;br/&gt;
     	{&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;setInternetExplorerProperties();&lt;/li&gt;
	&lt;li&gt;setOperaProperties();&lt;/li&gt;
	&lt;li&gt;setMozillaProperties();&lt;/li&gt;
	&lt;li&gt;setKonquerorProperties();&lt;/li&gt;
	&lt;li&gt;setChromeProperties();&lt;/li&gt;
	&lt;li&gt;setEdgeProperties();&lt;/li&gt;
	&lt;li&gt;setSafariProperties();&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = UAA.parse(getUserAgent());&lt;br/&gt;
    +		setInternetExplorerProperties(parsedUserAgent);&lt;br/&gt;
    +		setKonquerorProperties(parsedUserAgent);&lt;br/&gt;
    +		setMozillaProperties(parsedUserAgent);&lt;br/&gt;
    +		setOperaProperties(parsedUserAgent);&lt;br/&gt;
    +		setChromeProperties(parsedUserAgent);&lt;br/&gt;
    +		setEdgeProperties(parsedUserAgent);&lt;br/&gt;
    +		setSafariProperties(parsedUserAgent);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hi @solomax - yes indeed - it was due to the refactoring and those methods were present before - I just refactored them.&lt;/p&gt;</comment>
                            <comment id="16436819" author="githubbot" created="Fri, 13 Apr 2018 05:08:06 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181286646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181286646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -46,14 +46,20 @@&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The user agent string from the User-Agent header, app. Theoretically, this might differ from&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* 
{@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()} property, which is&lt;br/&gt;
    -	 * not set until an actual reply from a browser (e.g. using {@link BrowserInfoPage} is set.&lt;br/&gt;
    +	 * {@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()}
&lt;p&gt; property,&lt;br/&gt;
    +	 * which is not set until an actual reply from a browser (e.g. using &lt;/p&gt;
{@link BrowserInfoPage}
&lt;p&gt; is&lt;br/&gt;
    +	 * set.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private final String userAgent;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Client properties object. */&lt;br/&gt;
     	private final ClientProperties properties;&lt;/p&gt;

&lt;p&gt;    +	private final static UserAgentAnalyzer UAA = UserAgentAnalyzer.newBuilder()&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    The initialization is expensive, but the UserAgentAnalyzer is thread safe so it can be reused. Maybe we are able to use MetaDataKey&lt;/p&gt;</comment>
                            <comment id="16436897" author="githubbot" created="Fri, 13 Apr 2018 06:11:27 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Following changes have been made:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The init() method has been changed into gatherExtendedInfo() which is only be executed if org.apache.wicket.settings.RequestCycleSettings.setGatherExtendedBrowserInfo(boolean) is set to true&lt;/li&gt;
	&lt;li&gt;MetaDataKey has been used to initialize YAUAA&lt;/li&gt;
	&lt;li&gt;All browser specific methods have been moved into detectBrowserProperties&lt;/li&gt;
	&lt;li&gt;gatherExtendedInfo / detectBrowserProperties are protected / public so that the user may override them&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16436899" author="githubbot" created="Fri, 13 Apr 2018 06:12:34 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -147,6 +149,93 @@ private String getUserAgentStringLc()&lt;br/&gt;
     		return (getUserAgent() != null) ? getUserAgent().toLowerCase() : &quot;&quot;;&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Initializes the &lt;/p&gt;
{@link WebClientInfo}
&lt;p&gt; user agent detection. This can be overridden to choose&lt;br/&gt;
    +	 * a different detection as YAUAA (&lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;) - if you do so, you&lt;br/&gt;
    +	 * might exclude the maven dependency from your project in favor of a different framework.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public void initialize()&lt;br/&gt;
    +	{&lt;br/&gt;
    +		UserAgentAnalyzer userAgentAnalyzer = Application.get().getMetaData(UAA_META_DATA_KEY);&lt;br/&gt;
    +		if (userAgentAnalyzer == null)&lt;br/&gt;
    +		&lt;/p&gt;
{
    +			userAgentAnalyzer = UserAgentAnalyzer.newBuilder()
    +				.hideMatcherLoadStats()
    +				.withCache(25000)
    +				.build();
    +			Application.get().setMetaData(UAA_META_DATA_KEY, userAgentAnalyzer);
    +		}
&lt;p&gt;    +		detectBrowserProperties(userAgentAnalyzer);&lt;br/&gt;
    +	}&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Detects browser properties like versions or the type of the browser and applies them to the&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link ClientProperties}
&lt;p&gt;, override this method if there are errors within the browser /&lt;br/&gt;
    +	 * version detection due to newer browsers&lt;br/&gt;
    +	 * &lt;br/&gt;
    +	 * @param userAgentAnalyzer&lt;br/&gt;
    +	 *            the user agent analyzer to detect browsers and versions&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	protected void detectBrowserProperties(UserAgentAnalyzer userAgentAnalyzer)&lt;br/&gt;
    +	{&lt;br/&gt;
    +&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = userAgentAnalyzer&lt;br/&gt;
    +			.parse(getUserAgent());&lt;br/&gt;
    +		String userAgentName = parsedUserAgent.getValue(&quot;AgentName&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +		// Konqueror&lt;br/&gt;
    +		properties.setBrowserKonqueror(UserAgent.KONQUEROR.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Chrome&lt;br/&gt;
    +		properties.setBrowserChrome(UserAgent.CHROME.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Edge&lt;br/&gt;
    +		properties.setBrowserEdge(UserAgent.EDGE.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Safari&lt;br/&gt;
    +		properties.setBrowserSafari(UserAgent.SAFARI.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Opera&lt;br/&gt;
    +		properties.setBrowserOpera(UserAgent.OPERA.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Internet Explorer&lt;br/&gt;
    +		properties.setBrowserInternetExplorer(&lt;br/&gt;
    +			UserAgent.INTERNET_EXPLORER.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// FireFox&lt;br/&gt;
    +		boolean isFireFox = UserAgent.FIREFOX.getUaStrings()&lt;br/&gt;
    +			.contains(parsedUserAgent.getValue(&quot;AgentName&quot;));&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `userAgentName`&lt;/p&gt;</comment>
                            <comment id="16436900" author="githubbot" created="Fri, 13 Apr 2018 06:12:49 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293350&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -147,6 +149,93 @@ private String getUserAgentStringLc()&lt;br/&gt;
     		return (getUserAgent() != null) ? getUserAgent().toLowerCase() : &quot;&quot;;&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Initializes the &lt;/p&gt;
{@link WebClientInfo}
&lt;p&gt; user agent detection. This can be overridden to choose&lt;br/&gt;
    +	 * a different detection as YAUAA (&lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;) - if you do so, you&lt;br/&gt;
    +	 * might exclude the maven dependency from your project in favor of a different framework.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public void initialize()&lt;br/&gt;
    +	{&lt;br/&gt;
    +		UserAgentAnalyzer userAgentAnalyzer = Application.get().getMetaData(UAA_META_DATA_KEY);&lt;br/&gt;
    +		if (userAgentAnalyzer == null)&lt;br/&gt;
    +		&lt;/p&gt;
{
    +			userAgentAnalyzer = UserAgentAnalyzer.newBuilder()
    +				.hideMatcherLoadStats()
    +				.withCache(25000)
    +				.build();
    +			Application.get().setMetaData(UAA_META_DATA_KEY, userAgentAnalyzer);
    +		}
&lt;p&gt;    +		detectBrowserProperties(userAgentAnalyzer);&lt;br/&gt;
    +	}&lt;br/&gt;
    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Detects browser properties like versions or the type of the browser and applies them to the&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link ClientProperties}
&lt;p&gt;, override this method if there are errors within the browser /&lt;br/&gt;
    +	 * version detection due to newer browsers&lt;br/&gt;
    +	 * &lt;br/&gt;
    +	 * @param userAgentAnalyzer&lt;br/&gt;
    +	 *            the user agent analyzer to detect browsers and versions&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	protected void detectBrowserProperties(UserAgentAnalyzer userAgentAnalyzer)&lt;br/&gt;
    +	{&lt;br/&gt;
    +&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = userAgentAnalyzer&lt;br/&gt;
    +			.parse(getUserAgent());&lt;br/&gt;
    +		String userAgentName = parsedUserAgent.getValue(&quot;AgentName&quot;);&lt;br/&gt;
    +&lt;br/&gt;
    +		// Konqueror&lt;br/&gt;
    +		properties.setBrowserKonqueror(UserAgent.KONQUEROR.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Chrome&lt;br/&gt;
    +		properties.setBrowserChrome(UserAgent.CHROME.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Edge&lt;br/&gt;
    +		properties.setBrowserEdge(UserAgent.EDGE.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Safari&lt;br/&gt;
    +		properties.setBrowserSafari(UserAgent.SAFARI.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Opera&lt;br/&gt;
    +		properties.setBrowserOpera(UserAgent.OPERA.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Internet Explorer&lt;br/&gt;
    +		properties.setBrowserInternetExplorer(&lt;br/&gt;
    +			UserAgent.INTERNET_EXPLORER.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// FireFox&lt;br/&gt;
    +		boolean isFireFox = UserAgent.FIREFOX.getUaStrings()&lt;br/&gt;
    +			.contains(parsedUserAgent.getValue(&quot;AgentName&quot;));&lt;br/&gt;
    +		if (isFireFox)&lt;br/&gt;
    +		&lt;/p&gt;
{
    +			properties.setBrowserMozillaFirefox(true);
    +			properties.setBrowserMozilla(true);
    +		}
&lt;p&gt;    +		else&lt;br/&gt;
    +		{&lt;br/&gt;
    +			properties.setBrowserMozilla(&lt;br/&gt;
    +				UserAgent.MOZILLA.getUaStrings().contains(parsedUserAgent.getValue(&quot;AgentName&quot;)));&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `userAgentName`&lt;/p&gt;</comment>
                            <comment id="16436902" author="githubbot" created="Fri, 13 Apr 2018 06:14:42 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293591&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I would rather have all these as individual tests, to be able to see which one was failed&lt;br/&gt;
    And run all of them regardless failure state of others&lt;/p&gt;</comment>
                            <comment id="16436903" author="githubbot" created="Fri, 13 Apr 2018 06:15:21 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293658&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293658&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This might slow down the test execution because of the init of YAUAA - try it out.&lt;/p&gt;</comment>
                            <comment id="16436904" author="githubbot" created="Fri, 13 Apr 2018 06:15:46 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293718&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293718&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    You will see if something fails in the test results btw.&lt;/p&gt;</comment>
                            <comment id="16436905" author="githubbot" created="Fri, 13 Apr 2018 06:17:16 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181293918&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181293918&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    You can move init to `@BeforeClass` .....&lt;/p&gt;</comment>
                            <comment id="16436907" author="githubbot" created="Fri, 13 Apr 2018 06:18:55 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181294275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181294275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    All subsequent lines will not be executed in case of failure  ....&lt;/p&gt;</comment>
                            <comment id="16436912" author="githubbot" created="Fri, 13 Apr 2018 06:29:07 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181295733&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181295733&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yes that is true, but I think if you change the code / the browser detection you are going to investigate why the test is failing and fix the integration as long as every test is back working again.&lt;/p&gt;

&lt;p&gt;    @BeforeClass is not working, because WicketTestCase and at this stage no Application is attached to the main thread.&lt;/p&gt;</comment>
                            <comment id="16436915" author="githubbot" created="Fri, 13 Apr 2018 06:35:51 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181296712&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181296712&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    May you have any other good idea to keep the tests individual.&lt;/p&gt;

&lt;p&gt;    Just send a patch to me if something would fit the requirement and I am going to integrate it.&lt;/p&gt;</comment>
                            <comment id="16436917" author="githubbot" created="Fri, 13 Apr 2018 06:42:26 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181297750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181297750&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Will try to provide patch later tonight&lt;br/&gt;
    Have to do day time job right now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16436937" author="githubbot" created="Fri, 13 Apr 2018 07:15:14 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181303063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181303063&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hehe me too &#128516; - no hurry, because I think this is going to be released in a further version.&lt;/p&gt;</comment>
                            <comment id="16436969" author="githubbot" created="Fri, 13 Apr 2018 07:44:26 +0000"  >&lt;p&gt;Github user svenmeier commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181308489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181308489&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -46,14 +46,20 @@&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The user agent string from the User-Agent header, app. Theoretically, this might differ from&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* 
{@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()} property, which is&lt;br/&gt;
    -	 * not set until an actual reply from a browser (e.g. using {@link BrowserInfoPage} is set.&lt;br/&gt;
    +	 * {@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()}
&lt;p&gt; property,&lt;br/&gt;
    +	 * which is not set until an actual reply from a browser (e.g. using &lt;/p&gt;
{@link BrowserInfoPage}
&lt;p&gt; is&lt;br/&gt;
    +	 * set.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private final String userAgent;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Client properties object. */&lt;br/&gt;
     	private final ClientProperties properties;&lt;/p&gt;

&lt;p&gt;    +	private final static UserAgentAnalyzer UAA = UserAgentAnalyzer.newBuilder()&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    UserAgentAnalyzer#parse(UserAgent) is synchronized, please check its code. This is even mentioned on the project home page.&lt;/p&gt;</comment>
                            <comment id="16437040" author="githubbot" created="Fri, 13 Apr 2018 09:08:54 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r181328485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r181328485&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -46,14 +46,20 @@&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The user agent string from the User-Agent header, app. Theoretically, this might differ from&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* 
{@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()} property, which is&lt;br/&gt;
    -	 * not set until an actual reply from a browser (e.g. using {@link BrowserInfoPage} is set.&lt;br/&gt;
    +	 * {@link org.apache.wicket.protocol.http.ClientProperties#isNavigatorJavaEnabled()}
&lt;p&gt; property,&lt;br/&gt;
    +	 * which is not set until an actual reply from a browser (e.g. using &lt;/p&gt;
{@link BrowserInfoPage}
&lt;p&gt; is&lt;br/&gt;
    +	 * set.&lt;br/&gt;
     	 */&lt;br/&gt;
     	private final String userAgent;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/** Client properties object. */&lt;br/&gt;
     	private final ClientProperties properties;&lt;/p&gt;

&lt;p&gt;    +	private final static UserAgentAnalyzer UAA = UserAgentAnalyzer.newBuilder()&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Have a look at the recent changes. A lot of stuff changed already and I think it is ok like it is now (except the tests)&lt;/p&gt;</comment>
                            <comment id="16445504" author="githubbot" created="Fri, 20 Apr 2018 08:56:06 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r182987156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r182987156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -143,215 +150,133 @@ private String getUserAgentStringLc()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* When using ProxyPass, requestCycle().getHttpServletRequest(). getRemoteAddr() returns the IP&lt;/li&gt;
	&lt;li&gt;* of the machine forwarding the request. In order to maintain the clients ip address, the&lt;/li&gt;
	&lt;li&gt;* server places it in the &amp;lt;a&lt;/li&gt;
	&lt;li&gt;* href=&quot;http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#x-headers&quot;&amp;gt;X-Forwarded-For&amp;lt;/a&amp;gt;&lt;/li&gt;
	&lt;li&gt;* Header.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* Proxies may also mask the original client IP with tokens like &quot;hidden&quot; or &quot;unknown&quot;.&lt;/li&gt;
	&lt;li&gt;* If so, the last proxy ip address is returned.&lt;/li&gt;
	&lt;li&gt;*&lt;/li&gt;
	&lt;li&gt;* @param requestCycle&lt;/li&gt;
	&lt;li&gt;*            the request cycle&lt;/li&gt;
	&lt;li&gt;* @return remoteAddr IP address of the client, using the X-Forwarded-For header and defaulting&lt;/li&gt;
	&lt;li&gt;*         to: getHttpServletRequest().getRemoteAddr()&lt;br/&gt;
    +	 * Initializes the 
{@link WebClientInfo}
&lt;p&gt; user agent detection. This can be overridden to choose&lt;br/&gt;
    +	 * a different detection as YAUAA (&lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;) - if you do so, you&lt;br/&gt;
    +	 * might exclude the maven dependency from your project in favor of a different framework.&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;protected String getRemoteAddr(RequestCycle requestCycle)&lt;br/&gt;
    +	public void gatherExtendedInfo()&lt;br/&gt;
     	{&lt;/li&gt;
	&lt;li&gt;ServletWebRequest request = (ServletWebRequest)requestCycle.getRequest();&lt;/li&gt;
	&lt;li&gt;HttpServletRequest req = request.getContainerRequest();&lt;/li&gt;
	&lt;li&gt;String remoteAddr = request.getHeader(&quot;X-Forwarded-For&quot;);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (remoteAddr != null)&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;if (remoteAddr.contains(&quot;,&quot;))&lt;/li&gt;
	&lt;li&gt;{
    -				// sometimes the header is of form client ip,proxy 1 ip,proxy 2 ip,...,proxy n ip,
    -				// we just want the client
    -				remoteAddr = Strings.split(remoteAddr, &apos;,&apos;)[0].trim();
    -			}&lt;/li&gt;
	&lt;li&gt;try&lt;/li&gt;
	&lt;li&gt;{
    -				// If ip4/6 address string handed over, simply does pattern validation.
    -				InetAddress.getByName(remoteAddr);
    -			}&lt;/li&gt;
	&lt;li&gt;catch (UnknownHostException e)&lt;/li&gt;
	&lt;li&gt;{
    -				remoteAddr = req.getRemoteAddr();
    -			}&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;else&lt;br/&gt;
    +		UserAgentAnalyzer userAgentAnalyzer = Application.get().getMetaData(UAA_META_DATA_KEY);&lt;br/&gt;
    +		if (userAgentAnalyzer == null)
     		{
    -			remoteAddr = req.getRemoteAddr();
    +			userAgentAnalyzer = UserAgentAnalyzer.newBuilder()
    +				.hideMatcherLoadStats()
    +				.withCache(25000)
    +				.build();
    +			Application.get().setMetaData(UAA_META_DATA_KEY, userAgentAnalyzer);
     		}&lt;/li&gt;
	&lt;li&gt;return remoteAddr;&lt;br/&gt;
    +		detectBrowserProperties(userAgentAnalyzer);&lt;br/&gt;
     	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Initialize the client properties object&lt;br/&gt;
    +	 * Detects browser properties like versions or the type of the browser and applies them to the&lt;br/&gt;
    +	 * 
{@link ClientProperties}
&lt;p&gt;, override this method if there are errors within the browser /&lt;br/&gt;
    +	 * version detection due to newer browsers&lt;br/&gt;
    +	 * &lt;br/&gt;
    +	 * @param userAgentAnalyzer&lt;br/&gt;
    +	 *            the user agent analyzer to detect browsers and versions&lt;br/&gt;
     	 */&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;private void init()&lt;br/&gt;
    +	protected void detectBrowserProperties(UserAgentAnalyzer userAgentAnalyzer)&lt;br/&gt;
     	{&lt;/li&gt;
	&lt;li&gt;setInternetExplorerProperties();&lt;/li&gt;
	&lt;li&gt;setOperaProperties();&lt;/li&gt;
	&lt;li&gt;setMozillaProperties();&lt;/li&gt;
	&lt;li&gt;setKonquerorProperties();&lt;/li&gt;
	&lt;li&gt;setChromeProperties();&lt;/li&gt;
	&lt;li&gt;setEdgeProperties();&lt;/li&gt;
	&lt;li&gt;setSafariProperties();&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log.debug(&quot;determined user agent: {}&quot;, properties);&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    +		nl.basjes.parse.useragent.UserAgent parsedUserAgent = userAgentAnalyzer&lt;br/&gt;
    +			.parse(getUserAgent());&lt;br/&gt;
    +		String userAgentName = parsedUserAgent.getValue(&quot;AgentName&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* sets the konqueror specific properties&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void setKonquerorProperties()&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;properties.setBrowserKonqueror(UserAgent.KONQUEROR.matches(getUserAgent()));&lt;br/&gt;
    +		// Konqueror&lt;br/&gt;
    +		properties.setBrowserKonqueror(UserAgent.KONQUEROR.getUaStrings().contains(userAgentName));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (properties.isBrowserKonqueror())&lt;/li&gt;
	&lt;li&gt;{
    -			// e.g.: Mozilla/5.0 (compatible; Konqueror/4.2; Linux) KHTML/4.2.96 (like Gecko)
    -			setMajorMinorVersionByPattern(&quot;konqueror/(\\d+)\\.(\\d+)&quot;);
    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    +		// Chrome&lt;br/&gt;
    +		properties.setBrowserChrome(UserAgent.CHROME.getUaStrings().contains(userAgentName));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* sets the chrome specific properties&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void setChromeProperties()&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;properties.setBrowserChrome(UserAgent.CHROME.matches(getUserAgent()));&lt;br/&gt;
    +		// Edge&lt;br/&gt;
    +		properties.setBrowserEdge(UserAgent.EDGE.getUaStrings().contains(userAgentName));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (properties.isBrowserChrome())&lt;/li&gt;
	&lt;li&gt;{
    -			// e.g.: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.24 (KHTML, like Gecko)
    -// Chrome/12.0.702.0 Safari/534.24
    -			setMajorMinorVersionByPattern(&quot;chrome/(\\d+)\\.(\\d+)&quot;);
    -		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    +		// Safari&lt;br/&gt;
    +		properties.setBrowserSafari(UserAgent.SAFARI.getUaStrings().contains(userAgentName));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* sets the Edge specific properties&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void setEdgeProperties()&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;properties.setBrowserEdge(UserAgent.EDGE.matches(getUserAgent()));&lt;br/&gt;
    +		// Opera&lt;br/&gt;
    +		properties.setBrowserOpera(UserAgent.OPERA.getUaStrings().contains(userAgentName));&lt;br/&gt;
    +&lt;br/&gt;
    +		// Internet Explorer&lt;br/&gt;
    +		properties.setBrowserInternetExplorer(&lt;br/&gt;
    +			UserAgent.INTERNET_EXPLORER.getUaStrings().contains(userAgentName));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (properties.isBrowserEdge())&lt;br/&gt;
    +		// FireFox&lt;br/&gt;
    +		boolean isFireFox = UserAgent.FIREFOX.getUaStrings().contains(userAgentName);&lt;br/&gt;
    +		if (isFireFox)
     		{
    -			// e.g.: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)
    -			// Chrome/52.0.2743.116 Safari/537.36 Edge/15.15063
    -			setMajorMinorVersionByPattern(&quot;edge/(\\d+)\\.(\\d+)&quot;);
    +			properties.setBrowserMozillaFirefox(true);
    +			properties.setBrowserMozilla(true);
     		}&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;/**&lt;/li&gt;
	&lt;li&gt;* sets the safari specific properties&lt;/li&gt;
	&lt;li&gt;*/&lt;/li&gt;
	&lt;li&gt;private void setSafariProperties()&lt;/li&gt;
	&lt;li&gt;{&lt;/li&gt;
	&lt;li&gt;properties.setBrowserSafari(UserAgent.SAFARI.matches(getUserAgent()));&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (properties.isBrowserSafari())&lt;br/&gt;
    +		else&lt;br/&gt;
     		{&lt;/li&gt;
	&lt;li&gt;String userAgent = getUserAgentStringLc();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    `getUserAgentStringLc` is private and not used anymore&lt;/p&gt;</comment>
                            <comment id="16445524" author="githubbot" created="Fri, 20 Apr 2018 09:18:23 +0000"  >&lt;p&gt;Github user solomax commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r182993206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r182993206&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/test/java/org/apache/wicket/protocol/http/request/WebClientInfoTest.java &amp;#8212;&lt;br/&gt;
    @@ -59,9 +58,52 @@ public void before()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Test IE 6.x user-agent strings&lt;br/&gt;
    +	 * Test check check all user agents&lt;br/&gt;
     	 */&lt;br/&gt;
     	@Test&lt;br/&gt;
    +	public void testBrowsersAndVersionsOfUserAgents() {&lt;br/&gt;
    +		// Internet Explorers
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Sorry for delay, here is the code works for me:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    	private static ThreadLocal&amp;lt;UserAgentAnalyzer&amp;gt; localAnalyzer = new ThreadLocal&amp;lt;UserAgentAnalyzer&amp;gt;();&lt;/p&gt;

&lt;p&gt;    	@Before&lt;br/&gt;
    	public void before()&lt;br/&gt;
    	{&lt;br/&gt;
    		requestCycleMock = mock(RequestCycle.class);&lt;/p&gt;

&lt;p&gt;    		webRequest = mock(ServletWebRequest.class);&lt;br/&gt;
    		when(requestCycleMock.getRequest()).thenReturn(webRequest);&lt;/p&gt;

&lt;p&gt;    		servletRequest = mock(HttpServletRequest.class);&lt;br/&gt;
    		when(webRequest.getContainerRequest()).thenReturn(servletRequest);&lt;/p&gt;

&lt;p&gt;    		if (localAnalyzer.get() == null) &lt;/p&gt;
{
    			WebClientInfo webClientInfo = new WebClientInfo(requestCycleMock, &quot;test&quot;);
    			webClientInfo.gatherExtendedInfo();
    			localAnalyzer.set(Application.get().getMetaData(WebClientInfo.UAA_META_DATA_KEY));
    		}
&lt;p&gt; else &lt;/p&gt;
{
    			Application.get().setMetaData(WebClientInfo.UAA_META_DATA_KEY, localAnalyzer.get());
    		}
&lt;p&gt;    	}&lt;/p&gt;

&lt;p&gt;    	@AfterClass&lt;br/&gt;
    	public static void staticAfter()&lt;/p&gt;
    	{
    		localAnalyzer.set(null);
    	}
&lt;p&gt;    ```&lt;/p&gt;

&lt;p&gt;    Here are the measurment results:&lt;br/&gt;
    ```&lt;br/&gt;
    Combined tests&lt;br/&gt;
    real	0m24.123s&lt;br/&gt;
    user	1m30.748s&lt;br/&gt;
    sys	0m1.804s&lt;/p&gt;


&lt;p&gt;    Individual tests (after above changes were applied)&lt;br/&gt;
    real	0m22.844s&lt;br/&gt;
    user	1m23.948s&lt;br/&gt;
    sys	0m1.832s&lt;/p&gt;

&lt;p&gt;    ```&lt;/p&gt;</comment>
                            <comment id="16445578" author="githubbot" created="Fri, 20 Apr 2018 10:21:13 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @solomax - thanks a lot for the review. Because I am not able to work on it currently I am going to grant you access to my repo for further commits. Is this ok for you?&lt;/p&gt;
</comment>
                            <comment id="16445579" author="githubbot" created="Fri, 20 Apr 2018 10:22:30 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll merge my changes&lt;/p&gt;
</comment>
                            <comment id="16445583" author="githubbot" created="Fri, 20 Apr 2018 10:24:31 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I send you an invitation to the repo in which the branch of the PR is located. just push to it and merge if you are done. I think we are on a good way with this integration.&lt;/p&gt;</comment>
                            <comment id="16453530" author="githubbot" created="Thu, 26 Apr 2018 05:39:40 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    What about merging this? Or do we proceed with this PR after the release @bitstorm ?&lt;/p&gt;</comment>
                            <comment id="16453533" author="githubbot" created="Thu, 26 Apr 2018 05:45:06 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Close this one in favour of the mentioned one? (&lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16453548" author="githubbot" created="Thu, 26 Apr 2018 06:07:00 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    OK, let&apos;s close this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16453549" author="githubbot" created="Thu, 26 Apr 2018 06:07:01 +0000"  >&lt;p&gt;Github user solomax closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/269&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16453564" author="githubbot" created="Thu, 26 Apr 2018 06:25:59 +0000"  >&lt;p&gt;Github user svenmeier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    My concerns still hold &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    Most importantly: with that single UserAgentAnalyzer instance you&apos;ve introduced a bottleneck for all concurrent request that need to gatherExtendedInfo().&lt;/p&gt;</comment>
                            <comment id="16453594" author="githubbot" created="Thu, 26 Apr 2018 07:04:59 +0000"  >&lt;p&gt;Github user svenmeier commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r184288167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r184288167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -133,24 +140,99 @@ public final String getUserAgent()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* returns the user agent string (lower case).&lt;br/&gt;
    +	 * Initializes the 
{@link WebClientInfo}
&lt;p&gt; user agent detection. This can be overridden to choose&lt;br/&gt;
    +	 * a different detection as YAUAA (&lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;) - if you do so, you&lt;br/&gt;
    +	 * might exclude the maven dependency from your project in favor of a different framework.&lt;br/&gt;
    +	 */&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    No, you can&apos;t exclude the dependency - with UserAgentAnalyzer in the signature of #detectBrowserProperties(UserAgentAnalyzer) you will get a NoClassDefFoundError if the dependency is not present.&lt;/p&gt;</comment>
                            <comment id="16453809" author="githubbot" created="Thu, 26 Apr 2018 10:33:32 +0000"  >&lt;p&gt;Github user klopfdreh commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275#discussion_r184343253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275#discussion_r184343253&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java &amp;#8212;&lt;br/&gt;
    @@ -133,24 +140,99 @@ public final String getUserAgent()&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	/**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* returns the user agent string (lower case).&lt;br/&gt;
    +	 * Initializes the 
{@link WebClientInfo}
&lt;p&gt; user agent detection. This can be overridden to choose&lt;br/&gt;
    +	 * a different detection as YAUAA (&lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;) - if you do so, you&lt;br/&gt;
    +	 * might exclude the maven dependency from your project in favor of a different framework.&lt;br/&gt;
    +	 */&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Ok, then keep the dependency and just override it. We have to adjust the documentation here.&lt;/p&gt;</comment>
                            <comment id="16453813" author="githubbot" created="Thu, 26 Apr 2018 10:38:28 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    To create UserAgentAnalyzer takes rather a long time. Maybe we are able to find a way to resolve the bottleneck, but my concerns to implement the browser detection in such a bad way like it was before also still hold.&lt;/p&gt;

&lt;p&gt;    Also when I see the benchmarks I would consider to just inform about the bottleneck and keep it that way, or to turn it gatherExtendedInfo() off if 0.011ms are to much.&lt;/p&gt;</comment>
                            <comment id="16522261" author="githubbot" created="Mon, 25 Jun 2018 13:11:43 +0000"  >&lt;p&gt;Github user nielsbasjes commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @klopfdreh &lt;br/&gt;
    A few points about the slow startup.&lt;br/&gt;
    When you explicitly specify which fields you really need the system will completely &apos;not load&apos; the rules that have no impact. Especially if you do not need the DeviceBrand/DeviceName the impact will be quite large. You can simply pass something like this .withField(&quot;AgentName&quot;) .withField(&quot;DeviceClass&quot;) .withField(&quot;AgentVersion&quot;) and it will have a big impact on both startup times and run times for a not yet cached parse.&lt;/p&gt;

&lt;p&gt;    I had a look at your project and with this patch the startup time drops to less than 1.5 seconds.&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    diff --git pom.xml pom.xml&lt;br/&gt;
    index 00cc8f8..7910bd9 100644&lt;br/&gt;
    &amp;#8212; pom.xml&lt;br/&gt;
    +++ pom.xml&lt;br/&gt;
    @@ -146,7 +146,7 @@&lt;br/&gt;
                            &amp;lt;dependency&amp;gt;&lt;br/&gt;
                                &amp;lt;groupId&amp;gt;nl.basjes.parse.useragent&amp;lt;/groupId&amp;gt;&lt;br/&gt;
                                &amp;lt;artifactId&amp;gt;yauaa&amp;lt;/artifactId&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;4.2&amp;lt;/version&amp;gt;&lt;br/&gt;
    +                           &amp;lt;version&amp;gt;4.5&amp;lt;/version&amp;gt;&lt;br/&gt;
                            &amp;lt;/dependency&amp;gt;&lt;br/&gt;
                            &amp;lt;dependency&amp;gt;&lt;br/&gt;
                                    &amp;lt;groupId&amp;gt;com.google.code.findbugs&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    diff --git wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java&lt;br/&gt;
    index 5a02a3d..1e488e9 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java&lt;br/&gt;
    +++ wicket-core/src/main/java/org/apache/wicket/protocol/http/request/WebClientInfo.java&lt;br/&gt;
    @@ -151,6 +151,9 @@ public class WebClientInfo extends ClientInfo&lt;br/&gt;
                    {&lt;br/&gt;
                            userAgentAnalyzer = UserAgentAnalyzer.newBuilder()&lt;br/&gt;
                                    .hideMatcherLoadStats()&lt;br/&gt;
    +                               .dropTests()&lt;br/&gt;
    +                               .withField(&quot;AgentName&quot;)&lt;br/&gt;
    +                               .withField(&quot;AgentVersion&quot;)&lt;br/&gt;
                                    .withCache(25000)&lt;br/&gt;
                                    .build();&lt;br/&gt;
                            Application.get().setMetaData(UAA_META_DATA_KEY, userAgentAnalyzer);&lt;br/&gt;
    @@ -217,7 +220,7 @@ public class WebClientInfo extends ClientInfo&lt;br/&gt;
             */&lt;br/&gt;
            protected void setBrowserVersion(nl.basjes.parse.useragent.UserAgent parsedUserAgent)&lt;br/&gt;
            {&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;String value = parsedUserAgent.get(&quot;AgentVersion&quot;).getValue();&lt;br/&gt;
    +               String value = parsedUserAgent.getValue(&quot;AgentVersion&quot;);&lt;br/&gt;
                    if (!&quot;Hacker&quot;.equals(value))&lt;br/&gt;
                    {&lt;br/&gt;
                            properties.setBrowserVersion(value);&lt;br/&gt;
    ```&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="16522274" author="githubbot" created="Mon, 25 Jun 2018 13:27:44 +0000"  >&lt;p&gt;Github user nielsbasjes commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    On a more general note: I think the DeviceClass field might be useful for Wicket as it indicates if the device is a phone, tablet or desktop.&lt;/p&gt;
</comment>
                            <comment id="16522478" author="svenmeier" created="Mon, 25 Jun 2018 16:17:15 +0000"  >&lt;p&gt;As discussed on the mailing list, UserAgent and all related code was deprecated and is removed on master 9.x.&lt;/p&gt;

&lt;p&gt;Users are encouraged to utilize &lt;a href=&quot;https://github.com/nielsbasjes/yauaa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16522492" author="githubbot" created="Mon, 25 Jun 2018 16:25:54 +0000"  >&lt;p&gt;Github user svenmeier commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi Niels,&lt;br/&gt;
    thanks for chiming in, but just today we decided to drop all code related to user agent detection, as Wicket itself doesn&apos;t need/utilizes it.&lt;br/&gt;
    Actually your remarks affirm my position that user agent detection is hard business and Wicket shouldn&apos;t hide the details and configuration behind our very broad API.&lt;/p&gt;
</comment>
                            <comment id="16522525" author="githubbot" created="Mon, 25 Jun 2018 16:52:52 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I believe we can add browser detection as wicketstuff module and/or as confluence example&lt;br/&gt;
    Should be easy and useful&lt;/p&gt;</comment>
                            <comment id="16524595" author="githubbot" created="Wed, 27 Jun 2018 05:20:35 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Due to the vote that Wicket is going to drop the support of Browser detection I am closing this branch right now.&lt;/p&gt;

&lt;p&gt;    @solomax - yes why not a wicketstuff module. &#128077; &lt;/p&gt;

&lt;p&gt;    /closed&lt;/p&gt;

</comment>
                            <comment id="16524596" author="githubbot" created="Wed, 27 Jun 2018 05:20:36 +0000"  >&lt;p&gt;Github user klopfdreh closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16545234" author="githubbot" created="Mon, 16 Jul 2018 13:54:52 +0000"  >&lt;p&gt;Github user solomax commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @klopfdreh can you create wicketstuff module?&lt;/p&gt;</comment>
                            <comment id="16546420" author="githubbot" created="Tue, 17 Jul 2018 11:14:18 +0000"  >&lt;p&gt;Github user klopfdreh commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/wicket/pull/275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/pull/275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hey @solomax - sadly I am totally busy right now, but I try my best to change this. &lt;/p&gt;</comment>
                            <comment id="16637872" author="jira-bot" created="Thu, 4 Oct 2018 07:02:44 +0000"  >&lt;p&gt;Commit efc8ceb42ef47c91e15cbc9b24d7a1253aeade9b in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=efc8ceb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=efc8ceb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; Add deprecation message to DynamicJQueryResourceReference&lt;/p&gt;</comment>
                            <comment id="16658993" author="jira-bot" created="Mon, 22 Oct 2018 13:37:13 +0000"  >&lt;p&gt;Commit 098b473ad0021b6d927a6202b44578dc3b8663fa in wicket&apos;s branch refs/heads/wicket-8.x from Martin Tzvetanov Grigorov&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=098b473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=098b473&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6544&quot; title=&quot;Chrome and Firefox on iOS detected as Safari - removed UserAgent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6544&quot;&gt;&lt;del&gt;WICKET-6544&lt;/del&gt;&lt;/a&gt; Chrome and Firefox on iOS detected as Safari - removed UserAgent&lt;/p&gt;

&lt;p&gt;Add deprecation description to ClientProperties&apos; deprecated methods&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13185491">WICKET-6589</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rc1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>