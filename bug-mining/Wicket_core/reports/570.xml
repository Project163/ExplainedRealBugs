<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4505] AbstractTextComponent not escaping html data by default therefore user text is not redisplayed correctly</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4505</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;User input is not escaped in all text fields by default (and the default is not configurable).&lt;/p&gt;

&lt;p&gt;This leads to user entered text not being redisplayed correctly.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;You can replicate using the project from &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3330&quot; title=&quot;TextField shows HTML entities instead of UTF-8 characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3330&quot;&gt;&lt;del&gt;WICKET-3330&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;Just enter the text my&amp;frac12;companyname and press enter&lt;/li&gt;
	&lt;li&gt;The field will not redisplay the text entered properly&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12551265">WICKET-4505</key>
            <summary>AbstractTextComponent not escaping html data by default therefore user text is not redisplayed correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="jpboudreault">Jean-Philippe Boudreault</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 16:58:05 +0000</created>
                <updated>Tue, 28 Aug 2012 18:33:31 +0000</updated>
                            <resolved>Wed, 25 Apr 2012 07:55:53 +0000</resolved>
                                    <version>1.5.5</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>6.0.0-beta2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13255731" author="jpboudreault" created="Tue, 17 Apr 2012 17:10:44 +0000"  >&lt;p&gt;edit : I did more testing with XSS and I was not able to exploit it. Therefore I updated the description.&lt;/p&gt;</comment>
                            <comment id="13257481" author="bitstorm" created="Thu, 19 Apr 2012 13:53:37 +0000"  >&lt;p&gt;The input for text fields is unescaped by class TagAttributes when it is inserted inside value=&quot;&quot; attribute. Maybe this is done for security reasons?&lt;br/&gt;
Anyway, I think TagAttributes should replace any occurrence of character double-quotes (&quot;&apos;) before rendering attribute values. I would modify method &apos;unescapeHtml(Object value)&apos; like this:&lt;/p&gt;

&lt;p&gt;private static final Object unescapeHtml(Object value)&lt;br/&gt;
	{&lt;br/&gt;
		if (value instanceof CharSequence)&lt;/p&gt;
		{
			CharSequence unescapedMarkup = Strings.unescapeMarkup(value.toString());
			return Strings.replaceAll(unescapedMarkup, &quot;\&quot;&quot;, &quot;\\\&quot;&quot;);
		}
&lt;p&gt;		else&lt;/p&gt;
		{
			return value;
		}
&lt;p&gt;	}&lt;/p&gt;</comment>
                            <comment id="13257504" author="bitstorm" created="Thu, 19 Apr 2012 14:15:29 +0000"  >&lt;p&gt;Forget what I said about double-quotes replacing. Unescaping already convert double quotes into a safe &amp;quot;&lt;/p&gt;</comment>
                            <comment id="13257726" author="svenmeier" created="Thu, 19 Apr 2012 19:40:02 +0000"  >&lt;p&gt;I&apos;ve just tested with the project from 3330 and everything worked as expected: wicket-1.5.x, jetty, linux, firefox and chrome.&lt;/p&gt;

&lt;p&gt;my&amp;frac12;companyname stays my&amp;frac12;companyname after a submit.&lt;/p&gt;

&lt;p&gt;What container are you using?&lt;/p&gt;</comment>
                            <comment id="13257988" author="jpboudreault" created="Fri, 20 Apr 2012 02:46:15 +0000"  >&lt;p&gt;I am running the project from intelliJ on a windows 7 machine. The problem happens in chrome and in IE.&lt;br/&gt;
Here is my maven config :&lt;br/&gt;
	&amp;lt;properties&amp;gt;&lt;br/&gt;
		&amp;lt;wicket.version&amp;gt;1.5.5&amp;lt;/wicket.version&amp;gt;&lt;br/&gt;
		&amp;lt;jetty.version&amp;gt;6.1.25&amp;lt;/jetty.version&amp;gt;&lt;br/&gt;
	&amp;lt;/properties&amp;gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13258217" author="bitstorm" created="Fri, 20 Apr 2012 13:03:42 +0000"  >&lt;p&gt;The discussion from &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3608&quot; title=&quot;input button escapes escaped value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3608&quot;&gt;&lt;del&gt;WICKET-3608&lt;/del&gt;&lt;/a&gt; explains why it was choosen to unescape the value of the attributes when it is displayed (see Attila&apos;s comment on 26/Apr/11 ). &lt;/p&gt;

&lt;p&gt;@Sven&lt;br/&gt;
in order to reproduce the issue you must use Wicket 1.5-RC4 or any later version.&lt;/p&gt;</comment>
                            <comment id="13258243" author="svenmeier" created="Fri, 20 Apr 2012 13:41:08 +0000"  >&lt;p&gt;@Andrea&lt;br/&gt;
I&apos;ve tested this with current 1.5.x head, and it works.&lt;/p&gt;

&lt;p&gt;Note that we don&apos;t talk about attributes from the markup, but entered values sent from the browser.&lt;/p&gt;

&lt;p&gt;@Jean-Phillip&lt;br/&gt;
Can you confirm this?&lt;/p&gt;</comment>
                            <comment id="13258272" author="jpboudreault" created="Fri, 20 Apr 2012 14:25:33 +0000"  >&lt;p&gt;I just tested with head and the problem still happens. I am using an english (canada) locale if it does matter.&lt;/p&gt;

&lt;p&gt;Could anyone on windows confirm the behavior?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13258326" author="bitstorm" created="Fri, 20 Apr 2012 15:43:35 +0000"  >&lt;p&gt;It also happens to me under Linux Ubuntu 64bit, Jetty 6.1.26 and using current 1.5.x head. If I remove the overridden version of method put from class TagAttributes (i.e. value is no more unescaped) the input is redisplayd correctly.&lt;br/&gt;
I will do some more debugging as soon as possible.&lt;/p&gt;</comment>
                            <comment id="13258335" author="bitstorm" created="Fri, 20 Apr 2012 15:53:31 +0000"  >&lt;p&gt;@Sven&lt;br/&gt;
The attribute I&apos;m talking about is value=&quot;...&quot; added by class TextField inside method onComponentTag &lt;/p&gt;</comment>
                            <comment id="13259544" author="mgrigorov" created="Mon, 23 Apr 2012 11:46:05 +0000"  >&lt;p&gt;The demo app works fine for me too.&lt;br/&gt;
I ran &quot;mvn jetty:run&quot; with 6.1.26 and with Start.java with Jetty 7.5.0. Tested with Chrome/Ubuntu and IE9/Windows7. Wicket 1.5-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;Please attach a quickstart to this ticket that shows the problem without any modifications required by me. I needed to tweak the app from 3330 to be able to run it.&lt;/p&gt;</comment>
                            <comment id="13260458" author="jpboudreault" created="Tue, 24 Apr 2012 12:08:03 +0000"  >&lt;p&gt;What kind of problem are you having with the 3330 project? I just imported it in IntelliJ replaced wicket.version and jetty.version in the pom.xml and ran it trough the IDE without any problem. &lt;/p&gt;
</comment>
                            <comment id="13260463" author="mgrigorov" created="Tue, 24 Apr 2012 12:12:50 +0000"  >&lt;p&gt;This is also what I did and it didn&apos;t reproduce the problem.&lt;br/&gt;
I needed to add src/test from another project to have Start.java.&lt;/p&gt;</comment>
                            <comment id="13260656" author="bitstorm" created="Tue, 24 Apr 2012 15:26:02 +0000"  >&lt;p&gt;I&apos;ve attached a brand new quickstart project based on version 1.5.5. You should be able to reproduce the problem running the project via mvn jetty:run&lt;/p&gt;
</comment>
                            <comment id="13261036" author="svenmeier" created="Tue, 24 Apr 2012 21:28:55 +0000"  >&lt;p&gt;Thanks Andrea, I can confirm the problem with the new quickstart.&lt;/p&gt;

&lt;p&gt;It seems the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-3608&quot; title=&quot;input button escapes escaped value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-3608&quot;&gt;&lt;del&gt;WICKET-3608&lt;/del&gt;&lt;/a&gt; broke this one, see commit e9389ebdaf5b1eeb79a5ed3624eeaa529d322cf0 .&lt;/p&gt;

&lt;p&gt;The following line in TagAttributes doesn&apos;t make sense to me:&lt;/p&gt;

&lt;p&gt;	public final Object putInternal(String key, Object value)&lt;/p&gt;
	{
		return super.put(key, unescapeHtml(value));
	}

&lt;p&gt;How can TagAttributes know where the value is coming from and whether is needs to be unescaped?&lt;/p&gt;</comment>
                            <comment id="13261111" author="svenmeier" created="Tue, 24 Apr 2012 22:57:24 +0000"  >&lt;p&gt;Markup attributes are now unescaped while parsing the markup. I removed the unescaping during rendering of TagAttributes.&lt;br/&gt;
Tests and Andrea&apos;s quickstart work fine now.&lt;/p&gt;</comment>
                            <comment id="13261384" author="svenmeier" created="Wed, 25 Apr 2012 07:55:54 +0000"  >&lt;p&gt;unescape markup attribute during parsing, don&apos;t unescape while rendering&lt;/p&gt;</comment>
                            <comment id="13261593" author="jpboudreault" created="Wed, 25 Apr 2012 12:29:25 +0000"  >&lt;p&gt;Thanks for addressing and fixing the issue!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12503964">WICKET-3608</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12605207">WICKET-4734</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12522977" name="ASF.LICENSE.NOT.GRANTED--screenshot-1.jpg" size="61410" author="jpboudreault" created="Tue, 17 Apr 2012 17:00:24 +0000"/>
                            <attachment id="12523997" name="EscapeHtmlChars.zip" size="33475" author="bitstorm" created="Tue, 24 Apr 2012 15:23:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>