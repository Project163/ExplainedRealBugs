<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:21:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-5191] Session is created unnecessarily</title>
                <link>https://issues.apache.org/jira/browse/WICKET-5191</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;PageRenderer#getSessionId() should check for existence of a Session, otherwise session could creates multiple types. &lt;br/&gt;
For example if we mount home page, and starts an app, it will creates session 2 times, because of redirect, I think.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12647944">WICKET-5191</key>
            <summary>Session is created unnecessarily</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="svenmeier">Sven Meier</assignee>
                                    <reporter username="mzhavzharov">Michael Zhavzharov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 May 2013 11:55:08 +0000</created>
                <updated>Thu, 16 May 2013 14:35:45 +0000</updated>
                            <resolved>Thu, 16 May 2013 14:19:45 +0000</resolved>
                                    <version>6.6.0</version>
                                    <fixVersion>6.8.0</fixVersion>
                    <fixVersion>1.5.11</fixVersion>
                    <fixVersion>7.0.0-M1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13659463" author="mgrigorov" created="Thu, 16 May 2013 12:01:26 +0000"  >&lt;p&gt;Please attach a quickstart.&lt;br/&gt;
#getSessionId() is called when the response is stored (REDIRECT_TO_BUFFER strategy). That means the page is stateful and there must be a bound session.&lt;/p&gt;</comment>
                            <comment id="13659474" author="mzhavzharov" created="Thu, 16 May 2013 12:24:49 +0000"  >&lt;p&gt;When I created a quickstart, the StackTrace of app.newSession() method, have changed and do not calls getSessionId() method now.&lt;br/&gt;
Now for all session creation it is:&lt;br/&gt;
1)com.alee.WicketApplication.newSession(WicketApplication.java:37)&lt;br/&gt;
2)org.apache.wicket.Application.fetchCreateAndSetSession(Application.java:1557)&lt;br/&gt;
3)org.apache.wicket.Session.get(Session.java:152)&lt;br/&gt;
4)org.apache.wicket.RestartResponseAtInterceptPageException$InterceptData.get(RestartResponseAtInterceptPageException.java:146)&lt;br/&gt;
5)org.apache.wicket.RestartResponseAtInterceptPageException$1.matchedData(RestartResponseAtInterceptPageException.java:211)&lt;br/&gt;
6)org.apache.wicket.RestartResponseAtInterceptPageException$1.getCompatibilityScore(RestartResponseAtInterceptPageException.java:179)&lt;br/&gt;
7)org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:134)&lt;br/&gt;
8)org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:182)&lt;br/&gt;
9)org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:207)&lt;br/&gt;
10)org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:281)&lt;br/&gt;
11)org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)&lt;br/&gt;
12)org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:245)&lt;br/&gt;
13)org.apache.catalina.core.ApplicationFilterChain.internalDoFilter&lt;br/&gt;
...&lt;/p&gt;</comment>
                            <comment id="13659505" author="svenmeier" created="Thu, 16 May 2013 13:16:54 +0000"  >&lt;p&gt;Your quickstart runs with Wicket 6.0.0, in that version an unnecessary temporary Session was created by the intercept request mapper. This was mitigated with Wicket 6.6.0.&lt;/p&gt;

&lt;p&gt;Additionally each redirect causes a new temporary session to be created.&lt;/p&gt;</comment>
                            <comment id="13659515" author="bitstorm" created="Thu, 16 May 2013 13:26:40 +0000"  >&lt;p&gt;In addition your home page is stateless and this kind of page creates a temporary session each time is requested (if user doesn&apos;t already own a permanent session).&lt;/p&gt;</comment>
                            <comment id="13659537" author="mzhavzharov" created="Thu, 16 May 2013 13:58:57 +0000"  >&lt;p&gt;Sorry for my mistakes.&lt;br/&gt;
Now I created QuickStart with wicket 6.7.0, and make HomePage statefull, but problem is the same. When page loads, session creates 2 times.&lt;br/&gt;
StackTrace is different then previous:&lt;br/&gt;
1)com.alee.WicketApplication.newSession(WicketApplication.java:38)&lt;br/&gt;
2)org.apache.wicket.Application.fetchCreateAndSetSession(Application.java:1557)&lt;br/&gt;
3)org.apache.wicket.Session.get(Session.java:168)&lt;br/&gt;
4)org.apache.wicket.request.handler.render.PageRenderer.getSessionId(PageRenderer.java:101)&lt;br/&gt;
5)org.apache.wicket.request.handler.render.WebPageRenderer.getAndRemoveBufferedResponse(WebPageRenderer.java:79)&lt;br/&gt;
6)org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:168)&lt;br/&gt;
7)org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:165)&lt;br/&gt;
8)org.apache.wicket.request.cycle.RequestCycle&lt;/p&gt;</comment>
                            <comment id="13659554" author="mzhavzharov" created="Thu, 16 May 2013 14:09:13 +0000"  >&lt;p&gt;Also, maybe that I use Glassfish 3.0.1 as a server can cause such problems. Or I missing something else?&lt;/p&gt;</comment>
                            <comment id="13659561" author="svenmeier" created="Thu, 16 May 2013 14:18:26 +0000"  >&lt;p&gt;I&apos;ve change PageRenderer to check for the existence of the session. This will spare you the creation of one Session before a redirect.&lt;/p&gt;

&lt;p&gt;Apart from that it&apos;s quite normal for Wicket to create temporary sessions. You should restructure your application to make the creation of a session a cheap operation.&lt;/p&gt;</comment>
                            <comment id="13659565" author="svenmeier" created="Thu, 16 May 2013 14:19:45 +0000"  >&lt;p&gt;Session existence is now checked.&lt;/p&gt;</comment>
                            <comment id="13659568" author="mgrigorov" created="Thu, 16 May 2013 14:22:33 +0000"  >&lt;p&gt;Any reason why master branch has not be updated with this improvement ?&lt;/p&gt;

&lt;p&gt;(I still have doubts in the improvement though).&lt;/p&gt;</comment>
                            <comment id="13659575" author="svenmeier" created="Thu, 16 May 2013 14:24:49 +0000"  >&lt;p&gt;Master is updated too now. To repeat my explanation:&lt;/p&gt;

&lt;p&gt;In the quickstart there is no bound session.&lt;/p&gt;

&lt;p&gt;PageRenderer just checks whether there is a buffered response lingering around, but it isn&apos;t.&lt;br/&gt;
Note the warning logged in that case:&lt;/p&gt;

&lt;p&gt;            logger.warn(&quot;The Buffered response should be handled by BufferedResponseRequestHandler&quot;);&lt;/p&gt;

&lt;p&gt;Sven &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12583472" name="multiple_session.zip" size="49306" author="mzhavzharov" created="Thu, 16 May 2013 12:24:49 +0000"/>
                            <attachment id="12583481" name="multiple_session_wicket_670.zip" size="45701" author="mzhavzharov" created="Thu, 16 May 2013 13:58:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kn6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>