<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:20:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4652] AbstractAjaxTimerBehavior throws ComponentNotFoundException when its component is replaced in PageMap.</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4652</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;If a component with an AbstractAjaxTimerBehavior (or AjaxSelfUpdatingTimerBehavior) or any of its parents are replaced in the PageMap with another component, the next time behavior fires, you get a ComponentNotFoundException because the component with the attached behavior is no longer there.&lt;/p&gt;

&lt;p&gt;Not sure what js magic made this work in previous versions of wicket, but it wasn&apos;t an issue in 1.4.  Not sure about 1.5 as we are upgrading from 1.4 to 6.0.&lt;/p&gt;</description>
                <environment>Windows 7 with Jetty</environment>
        <key id="12598261">WICKET-4652</key>
            <summary>AbstractAjaxTimerBehavior throws ComponentNotFoundException when its component is replaced in PageMap.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="slowery23">Steve Lowery</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jul 2012 19:58:08 +0000</created>
                <updated>Mon, 23 Jul 2012 08:45:40 +0000</updated>
                            <resolved>Mon, 23 Jul 2012 08:45:39 +0000</resolved>
                                    <version>6.0.0-beta2</version>
                                    <fixVersion>6.0.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13410754" author="slowery23" created="Tue, 10 Jul 2012 20:00:14 +0000"  >&lt;p&gt;This java and html will show the described behavior&lt;/p&gt;</comment>
                            <comment id="13411288" author="mgrigorov" created="Wed, 11 Jul 2012 07:09:46 +0000"  >&lt;p&gt;I&apos;m not sure either how this worked for you in 1.4...&lt;br/&gt;
In 6.0 the timer behavior has an additional logic to clear the timer (JS: clearTimeout()) when it is stopped. Your code doesn&apos;t stop it, so I think it it a problem in your code.&lt;/p&gt;

&lt;p&gt;This is like not closing DB resources (connections, statements), Wicket cannot help you in cases like this.&lt;/p&gt;

&lt;p&gt;If you debug what made it working in 1.4 and prove that there is a regression in 6.0 then I&apos;ll reopen the ticket. Otherwise I recommend you to stop the timer behavior when you replace the connected component (see org.apache.wicket.ajax.AbstractAjaxTimerBehavior#stop(AjaxRequestTarget)). &lt;/p&gt;</comment>
                            <comment id="13411566" author="slowery23" created="Wed, 11 Jul 2012 14:30:24 +0000"  >&lt;p&gt;This is a regression in wicket 6.  Works fine in the 1.4 and 1.5 lines.  If I can read the javascript correctly, it looks like wicketAjaxGet/Post take in a precondition.  In wicket 1.5, the precondition is function() &lt;/p&gt;
{var c = Wicket.$(\&apos;myid\&apos;); return typeof(c) != \&apos;undefined\&apos; &amp;amp;&amp;amp; c != null}
&lt;p&gt;.bind(this), which is checking that the component is still on the page.  Looks like 6.0 is not providing a precondition, so it calls the url and fails when it attempts to update the component which is no longer on the page.&lt;/p&gt;

&lt;p&gt;I will attach an app with wicket 6.0 and wicket 1.5 and you can see it works in 1.5, but not 6.0.&lt;/p&gt;</comment>
                            <comment id="13411569" author="slowery23" created="Wed, 11 Jul 2012 14:32:14 +0000"  >&lt;p&gt;Notice last line stating &quot;Ajax GET stopped because of precondition...&quot;&lt;/p&gt;</comment>
                            <comment id="13411571" author="mgrigorov" created="Wed, 11 Jul 2012 14:33:19 +0000"  >&lt;p&gt;There is default precondition at wicket-ajax-jquery.js, line 442 (latest code in master):&lt;/p&gt;

&lt;p&gt;// the precondition to use if there are no explicit ones&lt;br/&gt;
				defaultPrecondition = [ function () {&lt;br/&gt;
					if (attrs.c) {&lt;br/&gt;
						if (attrs.f) &lt;/p&gt;
{
							return Wicket.$$(attrs.c) &amp;amp;&amp;amp; Wicket.$$(attrs.f);
						}
&lt;p&gt; else &lt;/p&gt;
{
							return Wicket.$$(attrs.c);
						}
&lt;p&gt;					}&lt;br/&gt;
				}];&lt;/p&gt;

&lt;p&gt;i.e. it checks whether the component is in the document.&lt;/p&gt;</comment>
                            <comment id="13411577" author="slowery23" created="Wed, 11 Jul 2012 14:38:58 +0000"  >&lt;p&gt;Are you saying you believe this is fixed in the master line?  This same code appears in 6.0.0-beta2 as well.&lt;/p&gt;</comment>
                            <comment id="13411579" author="mgrigorov" created="Wed, 11 Jul 2012 14:40:53 +0000"  >&lt;p&gt;No, this code is there since the rewrite of the Ajax code. For some reason it doesn&apos;t work for your case.&lt;br/&gt;
Please attach a proper quickstart app. Deploying .war and injecting fixes in it is very time consuming.&lt;/p&gt;</comment>
                            <comment id="13411619" author="slowery23" created="Wed, 11 Jul 2012 15:17:20 +0000"  >&lt;p&gt;This is the first quickstart I&apos;ve created.  If something is missing, or you need more, let me know.  The JUnit doesn&apos;t fail, but you can plainly see it fail in the browser.&lt;/p&gt;</comment>
                            <comment id="13420505" author="mgrigorov" created="Mon, 23 Jul 2012 08:45:40 +0000"  >&lt;p&gt;Fixed.&lt;br/&gt;
It was a problem in Wicket.DOM.inDoc() method.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12536035" name="ASF.LICENSE.NOT.GRANTED--Wicket 1.5 Ajax Debug Window.jpg" size="164451" author="slowery23" created="Wed, 11 Jul 2012 14:32:14 +0000"/>
                            <attachment id="12536040" name="timer-quickstart.zip" size="25986" author="slowery23" created="Wed, 11 Jul 2012 15:17:20 +0000"/>
                            <attachment id="12536032" name="timer15.war" size="1940471" author="slowery23" created="Wed, 11 Jul 2012 14:30:55 +0000"/>
                            <attachment id="12536031" name="timer6.war" size="2129033" author="slowery23" created="Wed, 11 Jul 2012 14:30:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k8dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>