<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:16:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-3311] Delete unused IPageSerializer &amp; co from o.a.w.Page class</title>
                <link>https://issues.apache.org/jira/browse/WICKET-3311</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;It seems the Page class holds remnants of some old (based on svn introcued in the first half of 2007) page serialization infrastructure that is no longer in use.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Definition of IPageSerializer interface. It is not implemented or referenced anywhere outside Page class.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final ThreadLocal&amp;lt;IPageSerializer&amp;gt; serializer: It is not used anywhere outside Page class and it is only read in Page class itself. It is a problematic code anyway because it can lead to nasty memory leaks if not cleaned properly.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;protected writeReplace() and package protected readPageObject(): not overridden or invoked from anywhere.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12494927">WICKET-3311</key>
            <summary>Delete unused IPageSerializer &amp; co from o.a.w.Page class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivaynberg">Igor Vaynberg</assignee>
                                    <reporter username="akiraly">Attila Kir&#225;ly</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Jan 2011 10:10:10 +0000</created>
                <updated>Mon, 10 Jan 2011 16:29:06 +0000</updated>
                            <resolved>Mon, 10 Jan 2011 16:29:00 +0000</resolved>
                                    <version>1.5-M3</version>
                                    <fixVersion>1.5-RC1</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12978715" author="akiraly" created="Fri, 7 Jan 2011 10:11:02 +0000"  >&lt;p&gt;Attaching patch made against trunk. Tests pass.&lt;/p&gt;</comment>
                            <comment id="12978723" author="mgrigorov" created="Fri, 7 Jan 2011 10:34:22 +0000"  >&lt;p&gt;Be careful with this. At least the last point in the description is wrong.&lt;br/&gt;
These methods are special for Java Serialization mechanisms and are used automatically by Object(Input|Output)Stream.&lt;/p&gt;</comment>
                            <comment id="12978732" author="akiraly" created="Fri, 7 Jan 2011 10:46:28 +0000"  >&lt;p&gt;You are right about writeReplace(). It&apos;s a standard method of java serialization and I forgot that (thanks for mentioning). However readPageObject() is not. It would be readResolve().&lt;/p&gt;

&lt;p&gt;It seems that using custom page serializers is broken (because it is only taken into account by writes). If a custom serializer is not set the writeReplace() does nothing.&lt;/p&gt;

&lt;p&gt;So I think the patch is still correct.&lt;/p&gt;</comment>
                            <comment id="12979545" author="akiraly" created="Mon, 10 Jan 2011 11:32:37 +0000"  >&lt;p&gt;After more analysis I think this is actually a bug not an improvement.&lt;/p&gt;

&lt;p&gt;A comparison about the mentioned code pieces in the 1.4 and in the trunk (1.5):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Page.serializer public static final ThreadLocal variable in 1.4 is used by protocol.http.pagestore.AbstractPageStore class and the Page class itself. However in 1.5 AbstractPageStore is deleted so the variable is only used and only for read by the Page class. This means that it is probably holding a null value all time.&lt;/li&gt;
	&lt;li&gt;Page.IPageSerializer interface is implemented in 1.4 with protocol.http.pagestore.AbstractPageStore.PageSerializer class. However in 1.5 this PageSerializer class (and the enclosing AbstractPageStore class) is deleted.&lt;/li&gt;
	&lt;li&gt;Page.IPageSerializer.deserializePage() method is used in 1.4 trough Page.readPageObject() which is invoked in Component.readObject(). However in 1.5 Component.readObject() is deleted so both Page.IPageSerializer.deserializePage() and Page.readPageObject() are not used anymore.&lt;/li&gt;
	&lt;li&gt;Page.IPageSerializer.serializePage() method is used in 1.4 trough Page.writePageObject(). However in 1.5 Page.writePageObject() is deleted so Page.IPageSerializer.serializePage() is not used anymore.&lt;/li&gt;
	&lt;li&gt;Page.IPageSerializer.getPageReplacementObject() method is used in 1.4 trough Page.writeReplace(). As Martin pointed it out this is part of Java serialization so it is stil called in wicket 1.5 too. But it does nothing when Page.serializer is not set which is the case for 1.5, as mentioned above.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If Page.serializer would be set by someone outside of wicket (seems very unlikely to me seeing how it was used in AbstractPageStore.serializePage() for example) it would break page serialization in 1.5 as it is only used by the serialization and not during deserialization.&lt;/p&gt;

&lt;p&gt;So it seems these were part of the 1.4 page serialization mechanism and they were only partially removed in the rewritten 1.5 version. Imho they should be deleted (see patch).&lt;/p&gt;</comment>
                            <comment id="12979628" author="ivaynberg" created="Mon, 10 Jan 2011 16:29:06 +0000"  >&lt;p&gt;thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467715" name="WICKET-3311.patch" size="4505" author="akiraly" created="Fri, 7 Jan 2011 10:11:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204117</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kbbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>