<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4116] Ajax link reports weird error when session is expired</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4116</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;Reproducing steps:&lt;/p&gt;

&lt;p&gt;1. Put below simple page into a Wicket application and get it mounted:&lt;/p&gt;

&lt;p&gt;TestPage.java:&lt;/p&gt;

&lt;p&gt;import org.apache.wicket.ajax.AjaxRequestTarget;&lt;br/&gt;
import org.apache.wicket.ajax.markup.html.AjaxLink;&lt;br/&gt;
import org.apache.wicket.markup.html.WebPage;&lt;/p&gt;

&lt;p&gt;@SuppressWarnings(&quot;serial&quot;)&lt;br/&gt;
public class TestPage extends WebPage {&lt;/p&gt;

&lt;p&gt;	public TestPage() {&lt;/p&gt;

&lt;p&gt;		add(new AjaxLink&amp;lt;Void&amp;gt;(&quot;test&quot;) {&lt;/p&gt;

&lt;p&gt;			@Override&lt;br/&gt;
			public void onClick(AjaxRequestTarget target) {&lt;br/&gt;
			}&lt;/p&gt;

&lt;p&gt;		});&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;TestPage.html:&lt;/p&gt;

&lt;p&gt;&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&amp;gt;&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;head&amp;gt;&lt;br/&gt;
		&amp;lt;title&amp;gt;Test Page&amp;lt;/title&amp;gt;&lt;br/&gt;
	&amp;lt;/head&amp;gt;&lt;br/&gt;
	&amp;lt;body&amp;gt;&lt;br/&gt;
		&amp;lt;a wicket:id=&quot;test&quot;&amp;gt;test&amp;lt;/a&amp;gt;&lt;br/&gt;
	&amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;/p&gt;

&lt;p&gt;2. Access the page in browser via mounted url, the page will display a link. &lt;/p&gt;

&lt;p&gt;3. Wait until current session is expired (do not refresh the page or click the link while waiting). &lt;/p&gt;

&lt;p&gt;4. Hit the link and below exception will be thrown:&lt;br/&gt;
Message: Cannot find behavior with id: 0 on component: [ &lt;span class=&quot;error&quot;&gt;&amp;#91;Component id = test&amp;#93;&lt;/span&gt;]. Perhaps the behavior did not properly implement getStatelessHint() and returned &apos;true&apos; to indicate that it is stateless instead of returning &apos;false&apos; to indicate that it is stateful.&lt;/p&gt;

&lt;p&gt;5. In wicket 1.5.0, this results in a PageExpiredException which is more comprehensive. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12526359">WICKET-4116</key>
            <summary>Ajax link reports weird error when session is expired</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="robinshine">Robin Shine</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Oct 2011 06:21:22 +0000</created>
                <updated>Fri, 13 Jan 2012 14:35:07 +0000</updated>
                            <resolved>Mon, 17 Oct 2011 18:10:26 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.5.2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13123660" author="mgrigorov" created="Sun, 9 Oct 2011 10:46:40 +0000"  >&lt;p&gt;With r1180580 if a request to listener interface is executed on expired page then a re-paint of the whole (and new) page is scheduled.&lt;br/&gt;
Additionally a debug message is logged.&lt;/p&gt;</comment>
                            <comment id="13123961" author="mgrigorov" created="Mon, 10 Oct 2011 09:07:31 +0000"  >&lt;p&gt;The change broke Wicket&apos;s StatelessForm. &lt;br/&gt;
I tested only Jolira&apos;s stateless components yesterday.&lt;/p&gt;</comment>
                            <comment id="13123978" author="mgrigorov" created="Mon, 10 Oct 2011 09:57:17 +0000"  >&lt;p&gt;Improved.&lt;br/&gt;
Now listener interfaces again can be executed on stateless pages.  &lt;/p&gt;</comment>
                            <comment id="13126866" author="ivaynberg" created="Thu, 13 Oct 2011 19:59:25 +0000"  >&lt;p&gt; fix broke a bunch of stuff&lt;/p&gt;

&lt;p&gt;for example we no longer redirect from /page to /page?0 which causes problems&lt;/p&gt;

&lt;p&gt;also querying request handlers for page instance no longer works. most&lt;br/&gt;
queries look like this:&lt;/p&gt;

&lt;p&gt;if (pageHandler.isPageInstanceCreated())&lt;br/&gt;
 return (Page)pageHandler.getPage();&lt;/p&gt;

&lt;p&gt;public final boolean isPageInstanceCreated() &lt;/p&gt;
{
 return !pageComponentProvider.isNewPageInstance(); }

&lt;p&gt;however, since isNewPageInstance() now caches the initial value of&lt;br/&gt;
&apos;true&apos; even though the page provider later did create the instance we&lt;br/&gt;
now erroneously assume the page instance was not created.&lt;/p&gt;

&lt;p&gt;isNewPageInstance() is a horrible name, it really should be&lt;br/&gt;
isPageInstanceCreated(). if we need something like&lt;br/&gt;
wasPageInstanceProvided() - to know whether or not page provider was&lt;br/&gt;
created with or without a page instance to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4116&quot; title=&quot;Ajax link reports weird error when session is expired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4116&quot;&gt;&lt;del&gt;WICKET-4116&lt;/del&gt;&lt;/a&gt; then we&lt;br/&gt;
should add it&lt;/p&gt;

&lt;p&gt;or perhaps simpler names:&lt;/p&gt;

&lt;p&gt;Page hasPageInstance() and boolean createdPageInstance()&lt;/p&gt;</comment>
                            <comment id="13127666" author="mgrigorov" created="Fri, 14 Oct 2011 16:21:23 +0000"  >&lt;p&gt;Can you attach a quickstart ?&lt;/p&gt;</comment>
                            <comment id="13127693" author="ivaynberg" created="Fri, 14 Oct 2011 16:55:28 +0000"  >&lt;p&gt;no need for a quickstart, check wicket-examples...&lt;/p&gt;</comment>
                            <comment id="13127814" author="mgrigorov" created="Fri, 14 Oct 2011 19:59:45 +0000"  >&lt;p&gt;I have tested almost all wicket-examples for 1,5,2 and I didn&apos;t notice anything wrong...&lt;br/&gt;
I&apos;m traveling now and I wont be able to do anything until Monday so either cancel 1.5.2 or improve &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4014&quot; title=&quot;Wicket 1.5 Form Post Action and Link Get discard Page Class Information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4014&quot;&gt;&lt;del&gt;WICKET-4014&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4116&quot; title=&quot;Ajax link reports weird error when session is expired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4116&quot;&gt;&lt;del&gt;WICKET-4116&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13127836" author="ivaynberg" created="Fri, 14 Oct 2011 20:32:46 +0000"  >&lt;p&gt;the examples will still work, but notice there is no redirect from /page to /page?0&lt;/p&gt;

&lt;p&gt;this also breaks cdi integration because that code only retrieves the page from the request handler if its created - it uses the isNewPageInstance() to check this, and now it never thinks it is created. i think this is the same root cause that creates the lack of the redirect.&lt;/p&gt;

&lt;p&gt;i already -1ed the release. im not sure if i will have time before monday myself...&lt;/p&gt;</comment>
                            <comment id="13128723" author="papegaaij" created="Mon, 17 Oct 2011 08:34:38 +0000"  >&lt;p&gt;I consider rev #1184776 an API break. Even though you will not get a compilation error, it breaks methods that worked fine before: RenderPageRequestHandler.isPageInstanceCreated now throws an IllegalStateException for our custom PageProvider where it did not do so before this change. It is not optional to implement IIntrospectablePageProvider, because core functionality depends on it. This is just as bad, or even worse, as adding the methods directly to IPageProvider.&lt;/p&gt;</comment>
                            <comment id="13128927" author="ivaynberg" created="Mon, 17 Oct 2011 15:07:22 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="13129053" author="mgrigorov" created="Mon, 17 Oct 2011 18:10:26 +0000"  >&lt;p&gt;Fixed with r1185315.&lt;/p&gt;</comment>
                            <comment id="13185604" author="helgoboss" created="Fri, 13 Jan 2012 14:27:04 +0000"  >&lt;p&gt;I would prefer if a PageExpiredException would be thrown in such a case. In our project, we need to show the user a special message if he clicks on an Ajax link but the session has expired. If the ListenerInterfaceRequestHandler just does a repaint, you have a hard time detecting what actually happened. Or am I missing something?&lt;/p&gt;

&lt;p&gt;Currently I use an ugly workaround on the page which is repainted to detect the timeout and throw a PageExpiredException:&lt;/p&gt;


&lt;p&gt;    @Override&lt;br/&gt;
    protected void onInitialize() {&lt;br/&gt;
        super.onInitialize();&lt;br/&gt;
        if (wasRequestedAfterSessionExpiration()) &lt;/p&gt;
{
            throw new PageExpiredException(&quot;attempt to invoke request on expired listener interface&quot;);
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;    private boolean wasRequestedAfterSessionExpiration() &lt;/p&gt;
{
        return getSession().isTemporary() &amp;amp;&amp;amp; isListenerInterfaceRequest(getRequest());
    }

&lt;p&gt;    private boolean isListenerInterfaceRequest(Request request) &lt;/p&gt;
{
        return extractPageComponentInfo(request.getUrl()) != null;
    }

&lt;p&gt;    private PageComponentInfo extractPageComponentInfo(Url url) {&lt;br/&gt;
        for (Url.QueryParameter p: url.getQueryParameters()) {&lt;br/&gt;
            if (Strings.isEmpty(p.getValue())) {&lt;br/&gt;
                PageComponentInfo i = PageComponentInfo.parse(p.getName());&lt;br/&gt;
                if (i != null) &lt;/p&gt;
{
                    return i;
                }
&lt;p&gt;            }&lt;br/&gt;
        }&lt;br/&gt;
        return null;&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="13185608" author="mgrigorov" created="Fri, 13 Jan 2012 14:35:07 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;This will be possible with &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4290&quot; title=&quot;Confusion between a form component&amp;#39;s wicket:id and a PageParameter in Wicket 1.5.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-4290&quot;&gt;&lt;del&gt;WICKET-4290&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
There is a new setting in IPageSettings which will switch that behavior.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12520994">WICKET-4014</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50918</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k99b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>