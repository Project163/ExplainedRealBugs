<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:19:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-4123] BaseWicketTester should use custom ServletWebRequest</title>
                <link>https://issues.apache.org/jira/browse/WICKET-4123</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;http://apache-wicket.1842946.n4.nabble.com/Custom-ServletWebRequest-and-BaseWicketTester-in-Wicket-1-5-tp3894285p3894285.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-wicket.1842946.n4.nabble.com/Custom-ServletWebRequest-and-BaseWicketTester-in-Wicket-1-5-tp3894285p3894285.html&lt;/a&gt; for a detailed description.&lt;br/&gt;
The BaseWicketTester should use the same settings like the used WebApplication e.g. WebSession, WebRequest and WebResponse. This works with a customized WebSession but not with overriden WebRequests (not tested for WebResponse). Instead a default ServletWebRequest implementation is used (see private method org.apache.wicket.util.tester.BaseWicketTester#newServletWebRequest()). Testing a page with the WicketTester, the following exception is thrown:&lt;/p&gt;

&lt;p&gt;org.apache.wicket.WicketRuntimeException: Can&apos;t instantiate page using constructor &apos;public org.test.HomePage(org.apache.wicket.request.mapper.parameter.PageParameters)&apos; and argument &apos;&apos;. Might be it doesn&apos;t exist, may be it is not visible (public).&lt;br/&gt;
	at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:196)&lt;br/&gt;
	at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:97)&lt;br/&gt;
	at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)&lt;br/&gt;
	at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:107)&lt;br/&gt;
	at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:263)&lt;br/&gt;
	at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:164)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider.get(BaseWicketTester.java:2534)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider.get(BaseWicketTester.java:2521)&lt;br/&gt;
	at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:146)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:712)&lt;br/&gt;
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:63)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:208)&lt;br/&gt;
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:251)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:595)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:515)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:487)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1125)&lt;br/&gt;
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1098)&lt;br/&gt;
	at org.test.TestHomePage.homepageRendersSuccessfully(TestHomePage.java:25)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Constructor.newInstance(Unknown Source)&lt;br/&gt;
	at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:173)&lt;br/&gt;
	... 41 more&lt;br/&gt;
Caused by: java.lang.ClassCastException: org.apache.wicket.protocol.http.servlet.ServletWebRequest cannot be cast to org.test.WicketApplication$FooServletWebRequest&lt;br/&gt;
	at org.test.HomePage.getFooServletWebRequest(HomePage.java:35)&lt;br/&gt;
	at org.test.HomePage.&amp;lt;init&amp;gt;(HomePage.java:19)&lt;br/&gt;
	... 46 more&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12526809">WICKET-4123</key>
            <summary>BaseWicketTester should use custom ServletWebRequest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="forchel">Dirk Forchel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 08:02:05 +0000</created>
                <updated>Wed, 12 Oct 2011 13:11:03 +0000</updated>
                            <resolved>Wed, 12 Oct 2011 13:11:03 +0000</resolved>
                                    <version>1.5.1</version>
                                    <fixVersion>1.5.2</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13125656" author="forchel" created="Wed, 12 Oct 2011 08:05:05 +0000"  >&lt;p&gt;Attached quickstart simple renders a test page and displays attributes of custom WebSession and custom WebRequest objects. The JUnit test is NOT running because of described problem.&lt;/p&gt;</comment>
                            <comment id="13125817" author="mgrigorov" created="Wed, 12 Oct 2011 13:11:03 +0000"  >&lt;p&gt;I fixed this by using reflection to create the ServletWebRequest with WebApplication.newWebRequest().&lt;/p&gt;

&lt;p&gt;For Wicket.next we should consider changing the visibility of this method to avoid using reflection.&lt;/p&gt;

&lt;p&gt;BaseWicketTester#newServletWebResponse() cannot be improved this way because it needs to handle cookies and thus uses a specialization of ServletWebResponse.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498715" name="wickettester.zip" size="26509" author="forchel" created="Wed, 12 Oct 2011 08:05:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k98f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>116313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>