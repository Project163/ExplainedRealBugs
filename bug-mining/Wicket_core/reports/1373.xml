<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:25:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6349] Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6349</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;When you set RecreateBookmarkablePagesAfterExpiry to false, you get a PageExpiredException when you use a stateless form/page.&lt;/p&gt;

&lt;p&gt;It is basically the same bug as described in &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-5521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-5521&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060054">WICKET-6349</key>
            <summary>Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrigorov">Martin Tzvetanov Grigorov</assignee>
                                    <reporter username="Jeroen1979">Jeroen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Mar 2017 14:30:24 +0000</created>
                <updated>Wed, 10 May 2017 08:32:45 +0000</updated>
                            <resolved>Wed, 3 May 2017 20:02:16 +0000</resolved>
                                    <version>7.6.0</version>
                                    <fixVersion>7.7.0</fixVersion>
                                    <component>wicket</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15947238" author="mgrigorov" created="Wed, 29 Mar 2017 14:34:20 +0000"  >&lt;p&gt;Can you please provide a quickstart app / failing test case ?&lt;/p&gt;</comment>
                            <comment id="15947300" author="jeroen1979" created="Wed, 29 Mar 2017 15:04:31 +0000"  >&lt;p&gt;I added a quickstart project based on the stateless project of the wicket-example page: &lt;a href=&quot;http://examples7x.wicket.apache.org/stateless/wicket/bookmarkable/org.apache.wicket.examples.stateless.AjaxStatelessExample&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://examples7x.wicket.apache.org/stateless/wicket/bookmarkable/org.apache.wicket.examples.stateless.AjaxStatelessExample&lt;/a&gt;. I added the following lines to the init method of the application:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;getPageSettings().setRecreateBookmarkablePagesAfterExpiry(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
getApplicationSettings().setPageExpiredErrorPage(ExpiredPage.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Steps to produce the failing case:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Start example application&lt;/li&gt;
	&lt;li&gt;Go to &lt;a href=&quot;http://localhost:8080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;When you increment the counter, you end up on the expired page&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Your console displays the following message: org.apache.wicket.protocol.http.PageExpiredException: Bookmarkable page with id &apos;null&apos; has expired.&lt;/p&gt;</comment>
                            <comment id="15949114" author="mgrigorov" created="Thu, 30 Mar 2017 14:04:22 +0000"  >&lt;p&gt;Thank you!&lt;br/&gt;
We will take a look soon!&lt;/p&gt;</comment>
                            <comment id="15950527" author="jeroen1979" created="Fri, 31 Mar 2017 08:30:36 +0000"  >&lt;p&gt;I see that in the Wicket 8 branch the first part of the check in the checkExpiration method in AbstractBookmarkableMapper has been changed (see &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-4201&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-4201&lt;/a&gt;). It has been changed from provider.isNewPageInstance() to provider.wasExpired(). The wasExpired method checks if the pageId is not null. Maybe the fix for the Wicket 7 branch is to add provider.getPageId() != null to the check?&lt;/p&gt;</comment>
                            <comment id="15961388" author="jira-bot" created="Fri, 7 Apr 2017 20:29:36 +0000"  >&lt;p&gt;Commit 05b8e686324651ba5f908331f10c2f7e1737ab97 in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=05b8e68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=05b8e68&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6349&quot; title=&quot;Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6349&quot;&gt;&lt;del&gt;WICKET-6349&lt;/del&gt;&lt;/a&gt; Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false&lt;/p&gt;</comment>
                            <comment id="15961412" author="mgrigorov" created="Fri, 7 Apr 2017 20:47:42 +0000"  >&lt;p&gt;6.x and 8.x behave as expected!&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="15961417" author="jira-bot" created="Fri, 7 Apr 2017 20:50:48 +0000"  >&lt;p&gt;Commit 5f4affeb62bbd4ec6286394e0572ec20633c939f in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrigorov&quot; class=&quot;user-hover&quot; rel=&quot;mgrigorov&quot;&gt;mgrigorov&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5f4affe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5f4affe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6349&quot; title=&quot;Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6349&quot;&gt;&lt;del&gt;WICKET-6349&lt;/del&gt;&lt;/a&gt; Stateless form does not work when RecreateBookmarkablePagesAfterExpiry is false&lt;/p&gt;

&lt;p&gt;Use the test cases from Wicket 7.x to protect us from regressions&lt;/p&gt;</comment>
                            <comment id="15972931" author="jeroen1979" created="Tue, 18 Apr 2017 15:39:33 +0000"  >&lt;p&gt;The counter is only updated once (from zero to one). The next click doesn&apos;t update the counter, so it is not behaving correctly.&lt;/p&gt;</comment>
                            <comment id="15991431" author="mgrigorov" created="Mon, 1 May 2017 19:59:17 +0000"  >&lt;p&gt;For me the counter increments with each click with 7.7.0-SNAPSHOT.&lt;br/&gt;
Could you please try again? &lt;/p&gt;</comment>
                            <comment id="15991440" author="mgrigorov" created="Mon, 1 May 2017 20:05:31 +0000"  >&lt;p&gt;I&apos;ll re-close for now in case we release 7.7.0 in the next few days.&lt;br/&gt;
If you still face the issue we can reopen or create a new ticket for 7.8.0.&lt;/p&gt;

&lt;p&gt;Please retest with 7.7.0-SNAPSHOT. I think you might have used older snapshot when it didn&apos;t work for you.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="15994408" author="jeroen1979" created="Wed, 3 May 2017 07:44:52 +0000"  >&lt;p&gt;I just checked and the counter still increments only the first time. I just downloaded the zip file from this ticket, set the wicket.version to 7.7.0-SNAPSHOT in the pom.xml and rebuilt. The following wicket libraries are in the WEB-INF\lib folder:&lt;/p&gt;

&lt;p&gt;wicket-core-7.7.0-20170501.193622-52.jar&lt;br/&gt;
wicket-extensions-7.7.0-20170501.193805-52.jar&lt;br/&gt;
wicket-request-7.7.0-20170501.193143-54.jar&lt;br/&gt;
wicket-util-7.7.0-20170501.193118-54.jar&lt;/p&gt;</comment>
                            <comment id="15994436" author="mgrigorov" created="Wed, 3 May 2017 07:56:28 +0000"  >&lt;p&gt;Strange. I&apos;ll re-check tonight again!&lt;/p&gt;</comment>
                            <comment id="15995539" author="mgrigorov" created="Wed, 3 May 2017 20:01:41 +0000"  >&lt;p&gt;OK. Now I&apos;ve spend more time on the application code and I think the problem is here.&lt;br/&gt;
Stateless applications should transfer the state back and forth with each request. This is what Wicket&apos;s StatelessLink does.&lt;br/&gt;
Your application updates the page parameters, but since the page is stateless a new instance is created for each click and thus the value of the counter always goes from 0 to 1.&lt;br/&gt;
You need to store the value with the Ajax response and send it back with the request.&lt;br/&gt;
Attaching a fixed version of AjaxStatelessExample.java...&lt;/p&gt;</comment>
                            <comment id="16004292" author="jeroen1979" created="Wed, 10 May 2017 08:32:45 +0000"  >&lt;p&gt;Thank you for the updated version!&lt;/p&gt;

&lt;p&gt;So basically if you set recreateBookmarkablePagesAfterExpiry to false, you have to &quot;remember&quot; the counter value. Maybe it is useful to put this example on the examples page (&lt;a href=&quot;http://examples7x.wicket.apache.org/stateless)?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://examples7x.wicket.apache.org/stateless)?&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12697655">WICKET-5521</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12866261" name="AjaxStatelessExample.java" size="4073" author="mgrigorov" created="Wed, 3 May 2017 20:02:06 +0000"/>
                            <attachment id="12861235" name="StatelessExpired.zip" size="31002" author="Jeroen1979" created="Thu, 30 Mar 2017 13:55:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cy5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>