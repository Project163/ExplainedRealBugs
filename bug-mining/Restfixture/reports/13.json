{"url":"https://api.github.com/repos/smartrics/RestFixture/issues/112","repository_url":"https://api.github.com/repos/smartrics/RestFixture","labels_url":"https://api.github.com/repos/smartrics/RestFixture/issues/112/labels{/name}","comments_url":"https://api.github.com/repos/smartrics/RestFixture/issues/112/comments","events_url":"https://api.github.com/repos/smartrics/RestFixture/issues/112/events","html_url":"https://github.com/smartrics/RestFixture/issues/112","id":56563810,"node_id":"MDU6SXNzdWU1NjU2MzgxMA==","number":112,"title":"Bad URL constucted when embedded question marks","user":{"login":"jplambert","id":10744293,"node_id":"MDQ6VXNlcjEwNzQ0Mjkz","avatar_url":"https://avatars.githubusercontent.com/u/10744293?v=4","gravatar_id":"","url":"https://api.github.com/users/jplambert","html_url":"https://github.com/jplambert","followers_url":"https://api.github.com/users/jplambert/followers","following_url":"https://api.github.com/users/jplambert/following{/other_user}","gists_url":"https://api.github.com/users/jplambert/gists{/gist_id}","starred_url":"https://api.github.com/users/jplambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jplambert/subscriptions","organizations_url":"https://api.github.com/users/jplambert/orgs","repos_url":"https://api.github.com/users/jplambert/repos","events_url":"https://api.github.com/users/jplambert/events{/privacy}","received_events_url":"https://api.github.com/users/jplambert/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-02-04T18:01:33Z","updated_at":"2015-05-04T00:35:12Z","closed_at":"2015-02-04T23:02:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I found out that using some convoluted URLs, RestFixture shows some very strange behaviors.\n\n| Table: Rest Fixture | http://localhost:8070 | hopconf|\n| GET | /abc/xyz?url=http://host/ws?g | | | |\n\n=> Will make the request go on http://localhost:8070/abc/xyz\n\nI found where is located the issue in the code, it is in RestFixture#doMethod(String, String, Map<String, String>, String): the url is split by the \"?\" character, the first part being taken as the base URL and the second part as the query part. However if there is more than two parts, the remaining is left out and things go wrong...\n\nIt is very easy to fix. One can concatenate all the remaining split parts when building up the query part. Or even more simple, just add the '2' value as a second parameter of the String.split(String, int) call so that it guarantees not to create more than two chunks.\n\nI will gladly make a Pull Request as soon as I managed to use GitHub... Unless I am beaten by somebody else on this :-)\n\nNote: I _do_ need this fix for the project I'm working on.\n","closed_by":{"login":"smartrics","id":140858,"node_id":"MDQ6VXNlcjE0MDg1OA==","avatar_url":"https://avatars.githubusercontent.com/u/140858?v=4","gravatar_id":"","url":"https://api.github.com/users/smartrics","html_url":"https://github.com/smartrics","followers_url":"https://api.github.com/users/smartrics/followers","following_url":"https://api.github.com/users/smartrics/following{/other_user}","gists_url":"https://api.github.com/users/smartrics/gists{/gist_id}","starred_url":"https://api.github.com/users/smartrics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smartrics/subscriptions","organizations_url":"https://api.github.com/users/smartrics/orgs","repos_url":"https://api.github.com/users/smartrics/repos","events_url":"https://api.github.com/users/smartrics/events{/privacy}","received_events_url":"https://api.github.com/users/smartrics/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/smartrics/RestFixture/issues/112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/smartrics/RestFixture/issues/112/timeline","performed_via_github_app":null,"state_reason":"completed"}