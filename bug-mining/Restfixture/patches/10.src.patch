diff --git a/pom.xml b/pom.xml
index b84aacc..f64284f 100644
--- a/pom.xml
+++ b/pom.xml
@@ -57,7 +57,7 @@
 		<dependency>
 			<groupId>org.fitnesse</groupId>
 			<artifactId>fitnesse</artifactId>
-			<version>20111025</version>
+			<version>20121220</version>
 		</dependency>
 		<dependency>
 			<groupId>smartrics.restfixture</groupId>
diff --git a/src/main/java/smartrics/rest/fitnesse/fixture/support/SlimVariables.java b/src/main/java/smartrics/rest/fitnesse/fixture/support/SlimVariables.java
new file mode 100644
index 0000000..b021e57
--- /dev/null
+++ b/src/main/java/smartrics/rest/fitnesse/fixture/support/SlimVariables.java
@@ -0,0 +1,149 @@
+/*  Copyright 2008 Fabrizio Cannizzo
+ *
+ *  This file is part of RestFixture.
+ *
+ *  RestFixture (http://code.google.com/p/rest-fixture/) is free software:
+ *  you can redistribute it and/or modify it under the terms of the
+ *  GNU Lesser General Public License as published by the Free Software Foundation,
+ *  either version 3 of the License, or (at your option) any later version.
+ *
+ *  RestFixture is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU Lesser General Public License for more details.
+ *
+ *  You should have received a copy of the GNU Lesser General Public License
+ *  along with RestFixture.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ *  If you want to contact the author please leave a comment here
+ *  http://smartrics.blogspot.com/2008/08/get-fitnesse-with-some-rest.html
+ */
+package smartrics.rest.fitnesse.fixture.support;
+
+import java.util.HashMap;
+import java.util.Map;
+import java.util.Map.Entry;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+
+import fit.Fixture;
+import fitnesse.slim.MethodExecutionResult;
+import fitnesse.slim.MethodExecutionResults;
+import fitnesse.slim.VariableStore;
+
+/**
+ * Facade to FitNesse global symbols map.
+ * 
+ * @author smartrics
+ */
+public class SlimVariables {
+	/**
+	 * pattern matching a variable name: {@code \%([a-zA-Z0-9_]+)\%}
+	 */
+	public static final Pattern VARIABLES_PATTERN = Pattern.compile("\\%([a-zA-Z0-9_]+)\\%");
+	private static final String FIT_NULL_VALUE = fitSymbolForNull();
+	private String nullValue = "null";
+	private VariableStore variableStore;
+
+	/**
+	 * initialises variables with default config. See @link
+	 * {@link #Variables(Config)}
+	 */
+	public SlimVariables() {
+		this(Config.getConfig());
+	}
+
+	/**
+	 * initialises the variables. reade
+	 * {@code restfixture.null.value.representation} to know how to render
+	 * {@code null}s.
+	 * 
+	 * @param c
+	 */
+	public SlimVariables(Config c) {
+		if (c != null) {
+			this.nullValue = c.get("restfixture.null.value.representation", "null");
+		}
+	}
+
+	/**
+	 * puts a value.
+	 * 
+	 * @param label
+	 * @param val
+	 */
+	public void put(String label, String val) {
+		variableStore.setSymbol(label, value);
+	}
+
+	/**
+	 * gets a value.
+	 * 
+	 * @param label
+	 * @return the value.
+	 */
+	public String get(String label) {
+		if (Fixture.hasSymbol(label)) {
+			return Fixture.getSymbol(label).toString();
+		}
+		return null;
+	}
+
+	/**
+	 * crears all variables
+	 */
+	public void clearAll() {
+		Fixture.ClearSymbols();
+	}
+
+	/**
+	 * replaces a text with variable values.
+	 * @param text
+	 * @return the substituted text.
+	 */
+	public String substitute(String text) {
+		if (text == null) {
+			return null;
+		}
+		Matcher m = VARIABLES_PATTERN.matcher(text);
+		Map<String, String> replacements = new HashMap<String, String>();
+		while (m.find()) {
+			int gc = m.groupCount();
+			if (gc == 1) {
+				String g0 = m.group(0);
+				String g1 = m.group(1);
+				String value = get(g1);
+				if (FIT_NULL_VALUE.equals(value)) {
+					value = nullValue;
+				}
+				replacements.put(g0, value);
+			}
+		}
+		String newText = text;
+		for (Entry<String, String> en : replacements.entrySet()) {
+			String k = en.getKey();
+			String replacement = replacements.get(k);
+			if (replacement != null) {
+				newText = newText.replaceAll(k, replacement);
+			}
+		}
+		return newText;
+	}
+
+	private static String fitSymbolForNull() {
+		final String k = "somerandomvaluetogettherepresentationofnull-1234567890";
+		Fixture.setSymbol(k, null);
+		return Fixture.getSymbol(k).toString();
+	}
+
+	/**
+	 * @param s
+	 * @return the null representation if the input is null.
+	 */
+	public String replaceNull(String s) {
+		if (s == null) {
+			return nullValue;
+		}
+		return s;
+	}
+}
diff --git a/src/main/java/smartrics/rest/fitnesse/fixture/support/Variables.java b/src/main/java/smartrics/rest/fitnesse/fixture/support/Variables.java
index 39fe200..0613020 100644
--- a/src/main/java/smartrics/rest/fitnesse/fixture/support/Variables.java
+++ b/src/main/java/smartrics/rest/fitnesse/fixture/support/Variables.java
@@ -27,6 +27,7 @@ import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 
 import fit.Fixture;
+import fitnesse.slim.VariableStore;
 
 /**
  * Facade to FitNesse global symbols map.
@@ -37,10 +38,10 @@ public class Variables {
 	/**
 	 * pattern matching a variable name: {@code \%([a-zA-Z0-9_]+)\%}
 	 */
-	public static final Pattern VARIABLES_PATTERN = Pattern
-			.compile("\\%([a-zA-Z0-9_]+)\\%");
+	public static final Pattern VARIABLES_PATTERN = Pattern.compile("\\%([a-zA-Z0-9_]+)\\%");
 	private static final String FIT_NULL_VALUE = fitSymbolForNull();
 	private String nullValue = "null";
+	private VariableStore variableStore;
 
 	/**
 	 * initialises variables with default config. See @link
@@ -59,8 +60,7 @@ public class Variables {
 	 */
 	public Variables(Config c) {
 		if (c != null) {
-			this.nullValue = c.get("restfixture.null.value.representation",
-					"null");
+			this.nullValue = c.get("restfixture.null.value.representation", "null");
 		}
 	}
 
diff --git a/src/test/java/smartrics/rest/fitnesse/fixture/support/ToolsTest.java b/src/test/java/smartrics/rest/fitnesse/fixture/support/ToolsTest.java
index 358fec0..a3e71ae 100644
--- a/src/test/java/smartrics/rest/fitnesse/fixture/support/ToolsTest.java
+++ b/src/test/java/smartrics/rest/fitnesse/fixture/support/ToolsTest.java
@@ -205,6 +205,15 @@ public class ToolsTest {
         assertEquals("test", Tools.extractXPath(ns, "/def:a/def:b", xml, XPathConstants.STRING, "UTF-8"));
     }
 
+    @Test
+    public void shouldExtractXPathsFromXmlDocumentAsNumberWithDefaultNamespace2() {
+        String xml = "<?xml version='1.0' encoding='UTF-8' standalone='yes'?><order xmlns='x:/pcat/1/catalog/order/v5_0'><orderIdentifier><orderSchema>/pcat/1/catalog/order/v5_0</orderSchema><orderNumber>1006LXMH</orderNumber><orderVersion>0</orderVersion><orderURL>/oe-platform-app/Order/Order/Published/1006LXMH?version=1</orderURL><rootOrderNumber>1006LXMH</rootOrderNumber></orderIdentifier><detail><general><proposalNumber>8619</proposalNumber><orderStatus>InProgress</orderStatus><orderVersionStatus>Master</orderVersionStatus><orderType>Install</orderType><orderCategory>Customer</orderCategory><createDate>2013-03-19T14:27:00.744Z</createDate><createBy>l3svc.oePlatform</createBy><sourceSystem>WFOE</sourceSystem><opptyID>313841</opptyID><DiscountedMRC>3963.0146</DiscountedMRC><AmortizedNRC>4000.0000</AmortizedNRC><totalNrc>4000.0000</totalNrc><orderDate><customerSignedDate>2013-03-18T00:00:00</customerSignedDate><installDate>2013-03-19T14:54:34.230Z</installDate></orderDate></general><customer><customerNumber>1-T8BD</customerNumber><customerName>SundayUAT</customerName></customer><billingAccount><billingAccountNumber>1-T8BD</billingAccountNumber></billingAccount></detail></order>";
+        HashMap<String, String> ns = new HashMap<String, String>();
+        ns.put("ns", "x:/pcat/1/catalog/order/v5_0");
+        assertEquals("8619", Tools.extractXPath(ns, "//ns:proposalNumber/text()", xml, XPathConstants.STRING, "UTF-8"));
+    }
+
+    
     @Test
     public void shouldExtractXPathsFromXmlDocumentAsNumberWithGenericNamespace() {
         String xml = "<?xml version='1.0' ?><a xmlns:ns1='http://ns1.com'><b>test</b><ns1:c>tada</ns1:c></a>";
diff --git a/src/test/java/smartrics/rest/fitnesse/fixture/support/sample.xml b/src/test/java/smartrics/rest/fitnesse/fixture/support/sample.xml
new file mode 100644
index 0000000..f914f7f
--- /dev/null
+++ b/src/test/java/smartrics/rest/fitnesse/fixture/support/sample.xml
@@ -0,0 +1,37 @@
+<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
+<order xmlns='/pcat/1/catalog/order/v5_0'>
+	<orderIdentifier>
+		<orderSchema>/pcat/1/catalog/order/v5_0</orderSchema>
+		<orderNumber>1006LXMH</orderNumber>
+		<orderVersion>0</orderVersion>
+		<orderURL>/oe-platform-app/Order/Order/Published/1006LXMH?version=1</orderURL>
+		<rootOrderNumber>1006LXMH</rootOrderNumber>
+	</orderIdentifier>
+	<detail>
+		<general>
+			<proposalNumber>8619</proposalNumber>
+			<orderStatus>InProgress</orderStatus>
+			<orderVersionStatus>Master</orderVersionStatus>
+			<orderType>Install</orderType>
+			<orderCategory>Customer</orderCategory>
+			<createDate>2013-03-19T14:27:00.744Z</createDate>
+			<createBy>l3svc.oePlatform</createBy>
+			<sourceSystem>WFOE</sourceSystem>
+			<opptyID>313841</opptyID>
+			<DiscountedMRC>3963.0146</DiscountedMRC>
+			<AmortizedNRC>4000.0000</AmortizedNRC>
+			<totalNrc>4000.0000</totalNrc>
+			<orderDate>
+				<customerSignedDate>2013-03-18T00:00:00</customerSignedDate>
+				<installDate>2013-03-19T14:54:34.230Z</installDate>
+			</orderDate>
+		</general>
+		<customer>
+			<customerNumber>1-T8BD</customerNumber>
+			<customerName>SundayUAT</customerName>
+		</customer>
+		<billingAccount>
+			<billingAccountNumber>1-T8BD</billingAccountNumber>
+		</billingAccount>
+	</detail>
+</order>
\ No newline at end of file
