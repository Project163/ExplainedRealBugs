diff --git a/src/test/java/net/openhft/chronicle/network/FileBasedHostnamePortLookupTableTest.java b/src/test/java/net/openhft/chronicle/network/FileBasedHostnamePortLookupTableTest.java
index 90107ec66d..b657f34b48 100644
--- a/src/test/java/net/openhft/chronicle/network/FileBasedHostnamePortLookupTableTest.java
+++ b/src/test/java/net/openhft/chronicle/network/FileBasedHostnamePortLookupTableTest.java
@@ -88,7 +88,7 @@ public class FileBasedHostnamePortLookupTableTest {
         long start = System.currentTimeMillis();
         IntStream stream = IntStream.range(0, Runtime.getRuntime().availableProcessors());
         if (parallel)
-            stream.parallel();
+            stream = stream.parallel();
 
         return stream.map(myId -> {
             Set<String> allMyAliases = new HashSet<>();
