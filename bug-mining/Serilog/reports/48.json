{"url":"https://api.github.com/repos/serilog/serilog/issues/567","repository_url":"https://api.github.com/repos/serilog/serilog","labels_url":"https://api.github.com/repos/serilog/serilog/issues/567/labels{/name}","comments_url":"https://api.github.com/repos/serilog/serilog/issues/567/comments","events_url":"https://api.github.com/repos/serilog/serilog/issues/567/events","html_url":"https://github.com/serilog/serilog/issues/567","id":115239844,"node_id":"MDU6SXNzdWUxMTUyMzk4NDQ=","number":567,"title":"Make JsonFormatter.WriteLiteral virtual","user":{"login":"inosik","id":11393003,"node_id":"MDQ6VXNlcjExMzkzMDAz","avatar_url":"https://avatars.githubusercontent.com/u/11393003?v=4","gravatar_id":"","url":"https://api.github.com/users/inosik","html_url":"https://github.com/inosik","followers_url":"https://api.github.com/users/inosik/followers","following_url":"https://api.github.com/users/inosik/following{/other_user}","gists_url":"https://api.github.com/users/inosik/gists{/gist_id}","starred_url":"https://api.github.com/users/inosik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inosik/subscriptions","organizations_url":"https://api.github.com/users/inosik/orgs","repos_url":"https://api.github.com/users/inosik/repos","events_url":"https://api.github.com/users/inosik/events{/privacy}","received_events_url":"https://api.github.com/users/inosik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-11-05T09:13:12Z","updated_at":"2015-11-13T11:17:48Z","closed_at":"2015-11-13T11:17:48Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm currently writing a sink for [LiteDB](http://www.litedb.org/) and need to write a custom `JsonFormatter` class, which would write dates and some other types in a [special format](https://github.com/mbdavid/LiteDB/wiki/Data-Structure#json-extended).\n\nI adapted the implementation of the [`MongoDBJsonFormatter` class](https://github.com/serilog/serilog-sinks-mongodb/blob/master/src/Serilog.Sinks.MongoDB/Sinks/MongoDB/MongoDBJsonFormatter.cs), and the `Timestamp`-Property of my log events is written correctly now.\n\nThe problem is, that dates in the `Properties` sub object cannot be written in that format, as in the [`JsonFormatter.WriteLiteral` method](https://github.com/serilog/serilog/blob/dev/src/Serilog/Formatting/Json/JsonFormatter.cs#L327) there is already a writer for `DateTime`. The next possible extension point is the [`JsonFormatter.WriteLiteralValue` method](https://github.com/serilog/serilog/blob/dev/src/Serilog/Formatting/Json/JsonFormatter.cs#L322), where I don't get into for `DateTime`, as it already [has been handled](https://github.com/serilog/serilog/blob/dev/src/Serilog/Formatting/Json/JsonFormatter.cs#L339).\n\nOne (probably) possible solution would be to override the implementations for [`LogEventPropertyValue` classes](https://github.com/serilog/serilog/blob/dev/src/Serilog/Formatting/Json/JsonFormatter.cs#L91-L94) and handle them in the `WriteJsonProperty` method, but I don't think that this is a good approach.\n\nThe `MongoDBJsonFormatter` suffers the same problem. It writes the `Timestamp` in the databases format, but dates in `Properties` get written as strings.\n","closed_by":{"login":"nblumhardt","id":342712,"node_id":"MDQ6VXNlcjM0MjcxMg==","avatar_url":"https://avatars.githubusercontent.com/u/342712?v=4","gravatar_id":"","url":"https://api.github.com/users/nblumhardt","html_url":"https://github.com/nblumhardt","followers_url":"https://api.github.com/users/nblumhardt/followers","following_url":"https://api.github.com/users/nblumhardt/following{/other_user}","gists_url":"https://api.github.com/users/nblumhardt/gists{/gist_id}","starred_url":"https://api.github.com/users/nblumhardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nblumhardt/subscriptions","organizations_url":"https://api.github.com/users/nblumhardt/orgs","repos_url":"https://api.github.com/users/nblumhardt/repos","events_url":"https://api.github.com/users/nblumhardt/events{/privacy}","received_events_url":"https://api.github.com/users/nblumhardt/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/serilog/serilog/issues/567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/serilog/serilog/issues/567/timeline","performed_via_github_app":null,"state_reason":"completed"}