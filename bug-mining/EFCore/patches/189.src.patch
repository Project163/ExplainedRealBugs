diff --git a/src/EFCore/Properties/CoreStrings.Designer.cs b/src/EFCore/Properties/CoreStrings.Designer.cs
index 5e977aed92..cda5e38a44 100644
--- a/src/EFCore/Properties/CoreStrings.Designer.cs
+++ b/src/EFCore/Properties/CoreStrings.Designer.cs
@@ -2413,6 +2413,14 @@ public static string RuntimeModelMissingData
         public static string RuntimeParameterMissingParameter
             => GetString("RuntimeParameterMissingParameter");
 
+        /// <summary>
+        ///     The same parameter instance with name '{parameterName}' was used in multiple lambdas in the query tree. Each lambda must have its own parameter instances.
+        /// </summary>
+        public static string SameParameterInstanceUsedInMultipleLambdas(object? parameterName)
+            => string.Format(
+                GetString("SameParameterInstanceUsedInMultipleLambdas", nameof(parameterName)),
+                parameterName);
+
         /// <summary>
         ///     Cannot save instance of '{entityType}' because it is an owned entity without any reference to its owner. Owned entities can only be saved as part of an aggregate also including the owner entity.
         /// </summary>
diff --git a/src/EFCore/Properties/CoreStrings.resx b/src/EFCore/Properties/CoreStrings.resx
index f3b9dc892c..a1165178f8 100644
--- a/src/EFCore/Properties/CoreStrings.resx
+++ b/src/EFCore/Properties/CoreStrings.resx
@@ -1343,6 +1343,9 @@
   <data name="RuntimeParameterMissingParameter" xml:space="preserve">
     <value>While registering a runtime parameter, the lambda expression must have only one parameter which must be same as 'QueryCompilationContext.QueryContextParameter' expression.</value>
   </data>
+  <data name="SameParameterInstanceUsedInMultipleLambdas" xml:space="preserve">
+    <value>The same parameter instance with name '{parameterName}' was used in multiple lambdas in the query tree. Each lambda must have its own parameter instances.</value>
+  </data>
   <data name="SaveOwnedWithoutOwner" xml:space="preserve">
     <value>Cannot save instance of '{entityType}' because it is an owned entity without any reference to its owner. Owned entities can only be saved as part of an aggregate also including the owner entity.</value>
   </data>
diff --git a/src/EFCore/Query/ExpressionEqualityComparer.cs b/src/EFCore/Query/ExpressionEqualityComparer.cs
index fd4bfd809a..773ae1c8ce 100644
--- a/src/EFCore/Query/ExpressionEqualityComparer.cs
+++ b/src/EFCore/Query/ExpressionEqualityComparer.cs
@@ -403,7 +403,9 @@ private bool CompareLambda(LambdaExpression a, LambdaExpression b)
 
             for (var i = 0; i < n; i++)
             {
-                if (a.Parameters[i].Type != b.Parameters[i].Type)
+                var (p1, p2) = (a.Parameters[i], b.Parameters[i]);
+
+                if (p1.Type != p2.Type)
                 {
                     for (var j = 0; j < i; j++)
                     {
@@ -413,7 +415,10 @@ private bool CompareLambda(LambdaExpression a, LambdaExpression b)
                     return false;
                 }
 
-                _parameterScope.Add(a.Parameters[i], b.Parameters[i]);
+                if (!_parameterScope.TryAdd(p1, p2))
+                {
+                    throw new InvalidOperationException(CoreStrings.SameParameterInstanceUsedInMultipleLambdas(p1.Name));
+                }
             }
 
             try
