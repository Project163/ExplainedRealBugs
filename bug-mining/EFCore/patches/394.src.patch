diff --git a/src/EFCore.Relational/Extensions/RelationalDatabaseFacadeExtensions.cs b/src/EFCore.Relational/Extensions/RelationalDatabaseFacadeExtensions.cs
index 8d88ec4b4f..52808962e0 100644
--- a/src/EFCore.Relational/Extensions/RelationalDatabaseFacadeExtensions.cs
+++ b/src/EFCore.Relational/Extensions/RelationalDatabaseFacadeExtensions.cs
@@ -297,7 +297,7 @@ public static void Migrate(this DatabaseFacade databaseFacade)
         try
         {
             var rawSqlCommand = facadeDependencies.RawSqlCommandBuilder
-                .Build(sql, parameters);
+                .Build(sql, parameters, databaseFacade.GetService<IModel>());
 
             return rawSqlCommand
                 .RelationalCommand
@@ -613,7 +613,7 @@ public static void Migrate(this DatabaseFacade databaseFacade)
         try
         {
             var rawSqlCommand = facadeDependencies.RawSqlCommandBuilder
-                .Build(sql, parameters);
+                .Build(sql, parameters, databaseFacade.GetService<IModel>());
 
             return await rawSqlCommand
                 .RelationalCommand
diff --git a/src/EFCore.Relational/Metadata/Internal/RelationalModel.cs b/src/EFCore.Relational/Metadata/Internal/RelationalModel.cs
index fba0787356..4359aa432c 100644
--- a/src/EFCore.Relational/Metadata/Internal/RelationalModel.cs
+++ b/src/EFCore.Relational/Metadata/Internal/RelationalModel.cs
@@ -600,7 +600,7 @@ static string GetColumnName(IProperty property)
         {
             Check.DebugAssert(tableBase.FindColumn(containerColumnName) == null, $"Table does not have column '{containerColumnName}'.");
 
-            var jsonColumnTypeMapping = relationalTypeMappingSource.FindMapping(typeof(JsonElement))!;
+            var jsonColumnTypeMapping = relationalTypeMappingSource.FindMapping(typeof(JsonElement), mappedType.Model)!;
             var jsonColumn = createColumn(containerColumnName, tableBase, jsonColumnTypeMapping);
             tableBase.Columns.Add(containerColumnName, jsonColumn);
             jsonColumn.IsNullable = !ownership.IsRequiredDependent || !ownership.IsUnique;
@@ -1268,7 +1268,7 @@ private static StoreFunction GetOrCreateStoreFunction(IRuntimeDbFunction dbFunct
                     storeStoredProcedure = new StoreStoredProcedure(storedProcedure.Name, storedProcedure.Schema, databaseModel);
                     if (storedProcedure.IsRowsAffectedReturned)
                     {
-                        var typeMapping = relationalTypeMappingSource.FindMapping(typeof(int))!;
+                        var typeMapping = relationalTypeMappingSource.FindMapping(typeof(int), databaseModel.Model)!;
                         storeStoredProcedure.ReturnValue = new StoreStoredProcedureReturnValue(
                             "",
                             typeMapping.StoreType,
diff --git a/src/EFCore.Relational/Query/SqlExpressionFactory.cs b/src/EFCore.Relational/Query/SqlExpressionFactory.cs
index 68b51d678e..0dbfacce2d 100644
--- a/src/EFCore.Relational/Query/SqlExpressionFactory.cs
+++ b/src/EFCore.Relational/Query/SqlExpressionFactory.cs
@@ -361,7 +361,7 @@ private InExpression ApplyTypeMappingOnIn(InExpression inExpression)
 
         // The index expression isn't inferred and is always just an int. Apply the default type mapping to it.
         var indexWithTypeMapping = ApplyDefaultTypeMapping(index);
-        var newPath = indexWithTypeMapping == index ? jsonScalarExpression.Path : new[] { new PathSegment(indexWithTypeMapping) };
+        var newPath = indexWithTypeMapping == index ? jsonScalarExpression.Path : [new PathSegment(indexWithTypeMapping)];
 
         // If a type mapping is being applied from the outside, it applies to the element resulting from the array indexing operation;
         // we can infer the array's type mapping from it. Otherwise there's nothing to do but apply the default type mapping to the array.
@@ -371,7 +371,7 @@ private InExpression ApplyTypeMappingOnIn(InExpression inExpression)
                 ApplyDefaultTypeMapping(array),
                 newPath,
                 jsonScalarExpression.Type,
-                _typeMappingSource.FindMapping(jsonScalarExpression.Type),
+                _typeMappingSource.FindMapping(jsonScalarExpression.Type, Dependencies.Model),
                 jsonScalarExpression.IsNullable);
         }
 
@@ -494,7 +494,7 @@ public virtual SqlFunctionExpression Coalesce(SqlExpression left, SqlExpression
             typeMappedArguments,
             nullable: true,
             // COALESCE is handled separately since it's only nullable if *all* arguments are null
-            argumentsPropagateNullability: new[] { false, false },
+            argumentsPropagateNullability: [false, false],
             resultType,
             inferredTypeMapping);
     }
diff --git a/src/EFCore.Relational/Storage/IRawSqlCommandBuilder.cs b/src/EFCore.Relational/Storage/IRawSqlCommandBuilder.cs
index b84cec5866..dc5ea0e2f8 100644
--- a/src/EFCore.Relational/Storage/IRawSqlCommandBuilder.cs
+++ b/src/EFCore.Relational/Storage/IRawSqlCommandBuilder.cs
@@ -41,4 +41,16 @@ public interface IRawSqlCommandBuilder
     RawSqlCommand Build(
         string sql,
         IEnumerable<object> parameters);
+
+    /// <summary>
+    ///     Creates a new command based on SQL command text.
+    /// </summary>
+    /// <param name="sql">The command text.</param>
+    /// <param name="parameters">Parameters for the command.</param>
+    /// <param name="model">The model.</param>
+    /// <returns>The newly created command.</returns>
+    RawSqlCommand Build(
+        string sql,
+        IEnumerable<object> parameters,
+        IModel model);
 }
diff --git a/src/EFCore.Relational/Storage/Internal/RawSqlCommandBuilder.cs b/src/EFCore.Relational/Storage/Internal/RawSqlCommandBuilder.cs
index 88db3f4604..5ae3287bb5 100644
--- a/src/EFCore.Relational/Storage/Internal/RawSqlCommandBuilder.cs
+++ b/src/EFCore.Relational/Storage/Internal/RawSqlCommandBuilder.cs
@@ -53,6 +53,15 @@ public virtual IRelationalCommand Build(string sql)
     ///     doing so can result in application failures when updating to a new Entity Framework Core release.
     /// </summary>
     public virtual RawSqlCommand Build(string sql, IEnumerable<object> parameters)
+        => Build(sql, parameters, null);
+
+    /// <summary>
+    ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to
+    ///     the same compatibility standards as public APIs. It may be changed or removed without notice in
+    ///     any release. You should only use it directly in your code with extreme caution and knowing that
+    ///     doing so can result in application failures when updating to a new Entity Framework Core release.
+    /// </summary>
+    public virtual RawSqlCommand Build(string sql, IEnumerable<object> parameters, IModel? model)
     {
         var relationalCommandBuilder = _relationalCommandBuilderFactory.Create();
 
@@ -81,8 +90,12 @@ public virtual RawSqlCommand Build(string sql, IEnumerable<object> parameters)
 
                 substitutions.Add(substitutedName);
                 var typeMapping = parameter == null
-                    ? _typeMappingSource.GetMappingForValue(null)
-                    : _typeMappingSource.GetMapping(parameter.GetType());
+                    ? model == null
+                        ? _typeMappingSource.GetMappingForValue(null)
+                        : _typeMappingSource.GetMappingForValue(null, model)
+                    : model == null
+                        ? _typeMappingSource.GetMapping(parameter.GetType())
+                        : _typeMappingSource.GetMapping(parameter.GetType(), model);
                 var nullable = parameter == null || parameter.GetType().IsNullableType();
 
                 relationalCommandBuilder.AddParameter(parameterName, substitutedName, typeMapping, nullable);
diff --git a/src/EFCore.Relational/Storage/RelationalTypeMappingSourceExtensions.cs b/src/EFCore.Relational/Storage/RelationalTypeMappingSourceExtensions.cs
index 90ec076033..db280bf349 100644
--- a/src/EFCore.Relational/Storage/RelationalTypeMappingSourceExtensions.cs
+++ b/src/EFCore.Relational/Storage/RelationalTypeMappingSourceExtensions.cs
@@ -56,16 +56,10 @@ public static class RelationalTypeMappingSourceExtensions
 
         var mapping = typeMappingSource.FindMapping(property);
 
-        if (mapping != null)
-        {
-            return mapping;
-        }
-
-        throw new InvalidOperationException(
-            RelationalStrings.UnsupportedPropertyType(
-                property.DeclaringType.DisplayName(),
-                property.Name,
-                property.ClrType.ShortDisplayName()));
+        return mapping ?? throw new InvalidOperationException(RelationalStrings.UnsupportedPropertyType(
+            property.DeclaringType.DisplayName(),
+            property.Name,
+            property.ClrType.ShortDisplayName()));
     }
 
     /// <summary>
@@ -81,12 +75,7 @@ public static class RelationalTypeMappingSourceExtensions
         Check.NotNull(clrType, nameof(clrType));
 
         var mapping = typeMappingSource.FindMapping(clrType);
-        if (mapping != null)
-        {
-            return mapping;
-        }
-
-        throw new InvalidOperationException(RelationalStrings.UnsupportedType(clrType.ShortDisplayName()));
+        return mapping ?? throw new InvalidOperationException(RelationalStrings.UnsupportedType(clrType.ShortDisplayName()));
     }
 
     /// <summary>
@@ -104,12 +93,7 @@ public static class RelationalTypeMappingSourceExtensions
         Check.NotNull(clrType, nameof(clrType));
 
         var mapping = typeMappingSource.FindMapping(clrType, model);
-        if (mapping != null)
-        {
-            return mapping;
-        }
-
-        throw new InvalidOperationException(RelationalStrings.UnsupportedType(clrType.ShortDisplayName()));
+        return mapping ?? throw new InvalidOperationException(RelationalStrings.UnsupportedType(clrType.ShortDisplayName()));
     }
 
     /// <summary>
@@ -129,11 +113,6 @@ public static class RelationalTypeMappingSourceExtensions
         Check.NotNull(typeName, nameof(typeName));
 
         var mapping = typeMappingSource.FindMapping(typeName);
-        if (mapping != null)
-        {
-            return mapping;
-        }
-
-        throw new InvalidOperationException(RelationalStrings.UnsupportedStoreType(typeName));
+        return mapping ?? throw new InvalidOperationException(RelationalStrings.UnsupportedStoreType(typeName));
     }
 }
diff --git a/test/EFCore.Cosmos.FunctionalTests/Query/NorthwindQueryCosmosFixture.cs b/test/EFCore.Cosmos.FunctionalTests/Query/NorthwindQueryCosmosFixture.cs
index d0e158a9ca..5ce1290588 100644
--- a/test/EFCore.Cosmos.FunctionalTests/Query/NorthwindQueryCosmosFixture.cs
+++ b/test/EFCore.Cosmos.FunctionalTests/Query/NorthwindQueryCosmosFixture.cs
@@ -6,7 +6,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public class NorthwindQueryCosmosFixture<TModelCustomizer> : NorthwindQueryFixtureBase<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => CosmosNorthwindTestStoreFactory.Instance;
diff --git a/test/EFCore.Cosmos.FunctionalTests/Query/QueryLoggingCosmosTest.cs b/test/EFCore.Cosmos.FunctionalTests/Query/QueryLoggingCosmosTest.cs
index 32902d47ad..d6236e5b27 100644
--- a/test/EFCore.Cosmos.FunctionalTests/Query/QueryLoggingCosmosTest.cs
+++ b/test/EFCore.Cosmos.FunctionalTests/Query/QueryLoggingCosmosTest.cs
@@ -9,7 +9,7 @@ public class QueryLoggingCosmosTest(QueryLoggingCosmosTest.NorthwindQueryCosmosF
     IClassFixture<QueryLoggingCosmosTest.NorthwindQueryCosmosFixtureInsensitive<NoopModelCustomizer>>
 {
     public class NorthwindQueryCosmosFixtureInsensitive<TModelCustomizer> : NorthwindQueryCosmosFixture<TModelCustomizer>
-        where TModelCustomizer : IModelCustomizer, new()
+        where TModelCustomizer : ITestModelCustomizer, new()
     {
         public override DbContextOptionsBuilder AddOptions(DbContextOptionsBuilder builder)
             => base.AddOptions(builder).EnableSensitiveDataLogging(false);
diff --git a/test/EFCore.InMemory.FunctionalTests/Query/NorthwindQueryInMemoryFixture.cs b/test/EFCore.InMemory.FunctionalTests/Query/NorthwindQueryInMemoryFixture.cs
index 0576e4d691..96c6087a08 100644
--- a/test/EFCore.InMemory.FunctionalTests/Query/NorthwindQueryInMemoryFixture.cs
+++ b/test/EFCore.InMemory.FunctionalTests/Query/NorthwindQueryInMemoryFixture.cs
@@ -4,7 +4,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public class NorthwindQueryInMemoryFixture<TModelCustomizer> : NorthwindQueryFixtureBase<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => InMemoryTestStoreFactory.Instance;
diff --git a/test/EFCore.Relational.Specification.Tests/BulkUpdates/NorthwindBulkUpdatesFixture.cs b/test/EFCore.Relational.Specification.Tests/BulkUpdates/NorthwindBulkUpdatesFixture.cs
index e0b5b213f1..5cf5e6e4b7 100644
--- a/test/EFCore.Relational.Specification.Tests/BulkUpdates/NorthwindBulkUpdatesFixture.cs
+++ b/test/EFCore.Relational.Specification.Tests/BulkUpdates/NorthwindBulkUpdatesFixture.cs
@@ -5,7 +5,7 @@ namespace Microsoft.EntityFrameworkCore.BulkUpdates;
 
 public abstract class NorthwindBulkUpdatesFixture<TModelCustomizer> : NorthwindQueryRelationalFixture<TModelCustomizer>,
     IBulkUpdatesFixtureBase
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override string StoreName
         => "BulkUpdatesNorthwind";
diff --git a/test/EFCore.Relational.Specification.Tests/Query/NorthwindQueryRelationalFixture.cs b/test/EFCore.Relational.Specification.Tests/Query/NorthwindQueryRelationalFixture.cs
index 511923ae44..b6a0da4048 100644
--- a/test/EFCore.Relational.Specification.Tests/Query/NorthwindQueryRelationalFixture.cs
+++ b/test/EFCore.Relational.Specification.Tests/Query/NorthwindQueryRelationalFixture.cs
@@ -4,7 +4,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public abstract class NorthwindQueryRelationalFixture<TModelCustomizer> : NorthwindQueryFixtureBase<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     public new RelationalTestStore TestStore
         => (RelationalTestStore)base.TestStore;
@@ -14,8 +14,7 @@ public TestSqlLoggerFactory TestSqlLoggerFactory
 
     public override DbContextOptionsBuilder AddOptions(DbContextOptionsBuilder builder)
         => base.AddOptions(builder).ConfigureWarnings(
-                c => c
-                    .Log(RelationalEventId.QueryPossibleUnintendedUseOfEqualsWarning))
+                c => c.Log(RelationalEventId.QueryPossibleUnintendedUseOfEqualsWarning))
             .EnableDetailedErrors();
 
     protected override bool ShouldLogCategory(string logCategory)
diff --git a/test/EFCore.Relational.Specification.Tests/Query/SqlExecutorTestBase.cs b/test/EFCore.Relational.Specification.Tests/Query/SqlExecutorTestBase.cs
index 465904c838..16edd772b4 100644
--- a/test/EFCore.Relational.Specification.Tests/Query/SqlExecutorTestBase.cs
+++ b/test/EFCore.Relational.Specification.Tests/Query/SqlExecutorTestBase.cs
@@ -1,6 +1,7 @@
 // Licensed to the .NET Foundation under one or more agreements.
 // The .NET Foundation licenses this file to you under the MIT license.
 
+using Microsoft.EntityFrameworkCore.TestModels.ConcurrencyModel;
 using Microsoft.EntityFrameworkCore.TestModels.Northwind;
 
 // ReSharper disable AccessToDisposedClosure
@@ -9,7 +10,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public abstract class SqlExecutorTestBase<TFixture> : IClassFixture<TFixture>
-    where TFixture : NorthwindQueryRelationalFixture<NoopModelCustomizer>, new()
+    where TFixture : NorthwindQueryRelationalFixture<SqlExecutorModelCustomizer>, new()
 {
     protected SqlExecutorTestBase(TFixture fixture)
     {
@@ -284,6 +285,25 @@ public virtual async Task Query_with_DbParameters_interpolated_2(bool async)
         Assert.Equal(-1, actual);
     }
 
+    [ConditionalTheory]
+    [InlineData(false)]
+    [InlineData(true)]
+    public virtual async Task Query_with_parameters_custom_converter(bool async)
+    {
+        var city = new City { Name = "London" };
+        var contactTitle = "Sales Representative";
+
+        using var context = CreateContext();
+
+        var actual = async
+            ? await context.Database.ExecuteSqlAsync(
+                $@"SELECT COUNT(*) FROM ""Customers"" WHERE ""City"" = {city} AND ""ContactTitle"" = {contactTitle}")
+            : context.Database.ExecuteSql(
+                $@"SELECT COUNT(*) FROM ""Customers"" WHERE ""City"" = {city} AND ""ContactTitle"" = {contactTitle}");
+
+        Assert.Equal(-1, actual);
+    }
+
     private static Customer Process(Customer c, ManualResetEventSlim e, SemaphoreSlim s)
     {
         e.Set();
@@ -303,3 +323,19 @@ protected NorthwindContext CreateContext()
 
     protected abstract string CustomerOrderHistoryWithGeneratedParameterSproc { get; }
 }
+
+public class SqlExecutorModelCustomizer : NoopModelCustomizer
+{
+    public override void ConfigureConventions(ModelConfigurationBuilder configurationBuilder)
+    {
+        configurationBuilder.DefaultTypeMapping<City>().HasConversion<CityToStringConverter>();
+    }
+
+    private sealed class CityToStringConverter : ValueConverter<City, string>
+    {
+        public CityToStringConverter()
+            : base(value => value.Name, value => new City { Name = value })
+        {
+        }
+    }
+}
diff --git a/test/EFCore.Relational.Tests/Extensions/RelationalDatabaseFacadeExtensionsTest.cs b/test/EFCore.Relational.Tests/Extensions/RelationalDatabaseFacadeExtensionsTest.cs
index 334d44afe8..1f6d0b97db 100644
--- a/test/EFCore.Relational.Tests/Extensions/RelationalDatabaseFacadeExtensionsTest.cs
+++ b/test/EFCore.Relational.Tests/Extensions/RelationalDatabaseFacadeExtensionsTest.cs
@@ -378,8 +378,7 @@ public async Task GetPendingMigrations_works(bool async)
                 .AddSingleton<IHistoryRepository>(repository)
                 .AddSingleton<IMigrationsAssembly>(migrationsAssembly));
 
-        Assert.Equal(
-            new[] { "00000000000003_Three" },
+        Assert.Equal(["00000000000003_Three"],
             async
                 ? await context.Database.GetPendingMigrationsAsync()
                 : context.Database.GetPendingMigrations());
@@ -412,7 +411,7 @@ public async Task Can_pass_no_params(bool async, bool cancellation)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(new List<object>(), commandBuilder.Parameters);
+        Assert.Equal([], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -429,7 +428,7 @@ public async Task Can_pass_array_of_int_params_as_object(bool async, bool cancel
             if (cancellation)
             {
                 var cancellationToken = new CancellationToken();
-                await context.Database.ExecuteSqlRawAsync("<Some query>", new object[] { 1, 2 }, cancellationToken);
+                await context.Database.ExecuteSqlRawAsync("<Some query>", [1, 2], cancellationToken);
             }
             else
             {
@@ -442,8 +441,7 @@ public async Task Can_pass_array_of_int_params_as_object(bool async, bool cancel
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1, 2 }, commandBuilder.Parameters);
+        Assert.Equal([1, 2], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -464,8 +462,7 @@ public async Task Can_pass_ints_as_params(bool async)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1, 2 }, commandBuilder.Parameters);
+        Assert.Equal([1, 2], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -482,7 +479,7 @@ public async Task Can_pass_mixed_array_of_params(bool async, bool cancellation)
             if (cancellation)
             {
                 var cancellationToken = new CancellationToken();
-                await context.Database.ExecuteSqlRawAsync("<Some query>", new object[] { 1, "Cheese" }, cancellationToken);
+                await context.Database.ExecuteSqlRawAsync("<Some query>", [1, "Cheese"], cancellationToken);
             }
             else
             {
@@ -495,8 +492,7 @@ public async Task Can_pass_mixed_array_of_params(bool async, bool cancellation)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1, "Cheese" }, commandBuilder.Parameters);
+        Assert.Equal([1, "Cheese"], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -514,7 +510,7 @@ public async Task Can_pass_list_of_int_params_as_object(bool async, bool cancell
             {
                 var cancellationToken = new CancellationToken();
                 await context.Database.ExecuteSqlRawAsync(
-                    "<Some query>", new List<object> { 1, 2 }, cancellationToken);
+                    "<Some query>", [1, 2], cancellationToken);
             }
             else
             {
@@ -529,8 +525,7 @@ public async Task Can_pass_list_of_int_params_as_object(bool async, bool cancell
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1, 2 }, commandBuilder.Parameters);
+        Assert.Equal([1, 2], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -548,7 +543,7 @@ public async Task Can_pass_mixed_list_of_params(bool async, bool cancellation)
             {
                 var cancellationToken = new CancellationToken();
                 await context.Database.ExecuteSqlRawAsync(
-                    "<Some query>", new List<object> { 1, "Pickle" }, cancellationToken);
+                    "<Some query>", [1, "Pickle"], cancellationToken);
             }
             else
             {
@@ -563,8 +558,7 @@ public async Task Can_pass_mixed_list_of_params(bool async, bool cancellation)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1, "Pickle" }, commandBuilder.Parameters);
+        Assert.Equal([1, "Pickle"], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -581,7 +575,7 @@ public async Task Can_pass_single_int_as_object(bool async, bool cancellation)
             if (cancellation)
             {
                 var cancellationToken = new CancellationToken();
-                await context.Database.ExecuteSqlRawAsync("<Some query>", new object[] { 1 }, cancellationToken);
+                await context.Database.ExecuteSqlRawAsync("<Some query>", [1], cancellationToken);
             }
             else
             {
@@ -594,8 +588,7 @@ public async Task Can_pass_single_int_as_object(bool async, bool cancellation)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { 1 }, commandBuilder.Parameters);
+        Assert.Equal([1], commandBuilder.Parameters);
     }
 
     [ConditionalTheory]
@@ -625,8 +618,7 @@ public async Task Can_pass_single_string(bool async, bool cancellation)
         }
 
         Assert.Equal("<Some query>", commandBuilder.Sql);
-        Assert.Equal(
-            new List<object> { "Branston" }, commandBuilder.Parameters);
+        Assert.Equal(["Branston"], commandBuilder.Parameters);
     }
 
     private class ThudContext : DbContext
@@ -653,6 +645,9 @@ public IRelationalCommand Build(string sql)
             => throw new NotImplementedException();
 
         public RawSqlCommand Build(string sql, IEnumerable<object> parameters)
+            => throw new NotImplementedException();
+
+        public RawSqlCommand Build(string sql, IEnumerable<object> parameters, IModel model)
         {
             Sql = sql;
             Parameters = parameters;
diff --git a/test/EFCore.Specification.Tests/Query/NorthwindQueryFiltersCustomizer.cs b/test/EFCore.Specification.Tests/Query/NorthwindQueryFiltersCustomizer.cs
index bc559c81e9..08dff11191 100644
--- a/test/EFCore.Specification.Tests/Query/NorthwindQueryFiltersCustomizer.cs
+++ b/test/EFCore.Specification.Tests/Query/NorthwindQueryFiltersCustomizer.cs
@@ -5,8 +5,8 @@
 
 namespace Microsoft.EntityFrameworkCore.Query;
 
-public class NorthwindQueryFiltersCustomizer : IModelCustomizer
+public class NorthwindQueryFiltersCustomizer : NoopModelCustomizer
 {
-    public void Customize(ModelBuilder modelBuilder, DbContext context)
+    public override void Customize(ModelBuilder modelBuilder, DbContext context)
         => ((NorthwindContext)context).ConfigureFilters(modelBuilder);
 }
diff --git a/test/EFCore.Specification.Tests/Query/NorthwindQueryFixtureBase.cs b/test/EFCore.Specification.Tests/Query/NorthwindQueryFixtureBase.cs
index 72b525e2b7..4b3bf87aeb 100644
--- a/test/EFCore.Specification.Tests/Query/NorthwindQueryFixtureBase.cs
+++ b/test/EFCore.Specification.Tests/Query/NorthwindQueryFixtureBase.cs
@@ -6,10 +6,10 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public abstract class NorthwindQueryFixtureBase<TModelCustomizer> : SharedStoreFixtureBase<NorthwindContext>, IFilteredQueryFixtureBase
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     public Func<DbContext> GetContextCreator()
-        => () => CreateContext();
+        => CreateContext;
 
     private readonly Dictionary<(bool, string, string), ISetSource> _expectedDataCache = new();
 
@@ -268,6 +268,9 @@ protected override string StoreName
     protected override bool UsePooling
         => typeof(TModelCustomizer) == typeof(NoopModelCustomizer);
 
+    protected override void ConfigureConventions(ModelConfigurationBuilder configurationBuilder)
+        => new TModelCustomizer().ConfigureConventions(configurationBuilder);
+
     protected override void OnModelCreating(ModelBuilder modelBuilder, DbContext context)
         => new TModelCustomizer().Customize(modelBuilder, context);
 
diff --git a/test/EFCore.Specification.Tests/TestUtilities/ITestModelCustomizer.cs b/test/EFCore.Specification.Tests/TestUtilities/ITestModelCustomizer.cs
new file mode 100644
index 0000000000..b45ab8d38f
--- /dev/null
+++ b/test/EFCore.Specification.Tests/TestUtilities/ITestModelCustomizer.cs
@@ -0,0 +1,9 @@
+// Licensed to the .NET Foundation under one or more agreements.
+// The .NET Foundation licenses this file to you under the MIT license.
+
+namespace Microsoft.EntityFrameworkCore.Infrastructure;
+
+public interface ITestModelCustomizer : IModelCustomizer
+{
+    void ConfigureConventions(ModelConfigurationBuilder configurationBuilder);
+}
diff --git a/test/EFCore.Specification.Tests/TestUtilities/NoopModelCustomizer.cs b/test/EFCore.Specification.Tests/TestUtilities/NoopModelCustomizer.cs
index 0befeaeafe..b91c065b38 100644
--- a/test/EFCore.Specification.Tests/TestUtilities/NoopModelCustomizer.cs
+++ b/test/EFCore.Specification.Tests/TestUtilities/NoopModelCustomizer.cs
@@ -3,9 +3,13 @@
 
 namespace Microsoft.EntityFrameworkCore.TestUtilities;
 
-public class NoopModelCustomizer : IModelCustomizer
+public class NoopModelCustomizer : ITestModelCustomizer
 {
-    public void Customize(ModelBuilder modelBuilder, DbContext context)
+    public virtual void ConfigureConventions(ModelConfigurationBuilder configurationBuilder)
+    {
+    }
+
+    public virtual void Customize(ModelBuilder modelBuilder, DbContext context)
     {
     }
 }
diff --git a/test/EFCore.SqlServer.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqlServerFixture.cs b/test/EFCore.SqlServer.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqlServerFixture.cs
index efd9f243a7..e95447f571 100644
--- a/test/EFCore.SqlServer.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqlServerFixture.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqlServerFixture.cs
@@ -6,7 +6,7 @@
 namespace Microsoft.EntityFrameworkCore.BulkUpdates;
 
 public class NorthwindBulkUpdatesSqlServerFixture<TModelCustomizer> : NorthwindBulkUpdatesFixture<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => SqlServerNorthwindTestStoreFactory.Instance;
diff --git a/test/EFCore.SqlServer.FunctionalTests/Query/NorthwindQuerySqlServerFixture.cs b/test/EFCore.SqlServer.FunctionalTests/Query/NorthwindQuerySqlServerFixture.cs
index 240c1a24b3..f53fd55384 100644
--- a/test/EFCore.SqlServer.FunctionalTests/Query/NorthwindQuerySqlServerFixture.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/Query/NorthwindQuerySqlServerFixture.cs
@@ -6,7 +6,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public class NorthwindQuerySqlServerFixture<TModelCustomizer> : NorthwindQueryRelationalFixture<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => SqlServerNorthwindTestStoreFactory.Instance;
diff --git a/test/EFCore.SqlServer.FunctionalTests/Query/SqlExecutorSqlServerTest.cs b/test/EFCore.SqlServer.FunctionalTests/Query/SqlExecutorSqlServerTest.cs
index e3dbcb7400..011a113bc9 100644
--- a/test/EFCore.SqlServer.FunctionalTests/Query/SqlExecutorSqlServerTest.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/Query/SqlExecutorSqlServerTest.cs
@@ -5,9 +5,9 @@
 
 namespace Microsoft.EntityFrameworkCore.Query;
 
-public class SqlExecutorSqlServerTest : SqlExecutorTestBase<NorthwindQuerySqlServerFixture<NoopModelCustomizer>>
+public class SqlExecutorSqlServerTest : SqlExecutorTestBase<NorthwindQuerySqlServerFixture<SqlExecutorModelCustomizer>>
 {
-    public SqlExecutorSqlServerTest(NorthwindQuerySqlServerFixture<NoopModelCustomizer> fixture, ITestOutputHelper testOutputHelper)
+    public SqlExecutorSqlServerTest(NorthwindQuerySqlServerFixture<SqlExecutorModelCustomizer> fixture, ITestOutputHelper testOutputHelper)
         : base(fixture)
     {
         Fixture.TestSqlLoggerFactory.Clear();
diff --git a/test/EFCore.SqlServer.Tests/ValueGeneration/SqlServerSequenceValueGeneratorTest.cs b/test/EFCore.SqlServer.Tests/ValueGeneration/SqlServerSequenceValueGeneratorTest.cs
index 58f97335d1..d4f4d20894 100644
--- a/test/EFCore.SqlServer.Tests/ValueGeneration/SqlServerSequenceValueGeneratorTest.cs
+++ b/test/EFCore.SqlServer.Tests/ValueGeneration/SqlServerSequenceValueGeneratorTest.cs
@@ -204,9 +204,13 @@ private class FakeRawSqlCommandBuilder(int blockSize) : IRawSqlCommandBuilder
         public IRelationalCommand Build(string sql)
             => new FakeRelationalCommand(this);
 
+        public RawSqlCommand Build(string sql, IEnumerable<object> parameters)
+            => throw new NotImplementedException();
+
         public RawSqlCommand Build(
             string sql,
-            IEnumerable<object> parameters)
+            IEnumerable<object> parameters,
+            IModel model)
             => new(new FakeRelationalCommand(this), new Dictionary<string, object>());
 
         private class FakeRelationalCommand(FakeRawSqlCommandBuilder commandBuilder) : IRelationalCommand
diff --git a/test/EFCore.Sqlite.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqliteFixture.cs b/test/EFCore.Sqlite.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqliteFixture.cs
index 2e9ea99c7c..dd849df5b5 100644
--- a/test/EFCore.Sqlite.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqliteFixture.cs
+++ b/test/EFCore.Sqlite.FunctionalTests/BulkUpdates/NorthwindBulkUpdatesSqliteFixture.cs
@@ -6,7 +6,7 @@
 namespace Microsoft.EntityFrameworkCore.BulkUpdates;
 
 public class NorthwindBulkUpdatesSqliteFixture<TModelCustomizer> : NorthwindBulkUpdatesFixture<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => SqliteTestStoreFactory.Instance;
diff --git a/test/EFCore.Sqlite.FunctionalTests/Query/NorthwindQuerySqliteFixture.cs b/test/EFCore.Sqlite.FunctionalTests/Query/NorthwindQuerySqliteFixture.cs
index 63a1806c28..ef5778093e 100644
--- a/test/EFCore.Sqlite.FunctionalTests/Query/NorthwindQuerySqliteFixture.cs
+++ b/test/EFCore.Sqlite.FunctionalTests/Query/NorthwindQuerySqliteFixture.cs
@@ -6,7 +6,7 @@
 namespace Microsoft.EntityFrameworkCore.Query;
 
 public class NorthwindQuerySqliteFixture<TModelCustomizer> : NorthwindQueryRelationalFixture<TModelCustomizer>
-    where TModelCustomizer : IModelCustomizer, new()
+    where TModelCustomizer : ITestModelCustomizer, new()
 {
     protected override ITestStoreFactory TestStoreFactory
         => SqliteNorthwindTestStoreFactory.Instance;
diff --git a/test/EFCore.VisualBasic.FunctionalTests/NorthwindVBQuerySqlServerFixture.vb b/test/EFCore.VisualBasic.FunctionalTests/NorthwindVBQuerySqlServerFixture.vb
index 3a7823cc8c..e777178c23 100644
--- a/test/EFCore.VisualBasic.FunctionalTests/NorthwindVBQuerySqlServerFixture.vb
+++ b/test/EFCore.VisualBasic.FunctionalTests/NorthwindVBQuerySqlServerFixture.vb
@@ -4,7 +4,7 @@
 Imports Microsoft.EntityFrameworkCore.Infrastructure
 Imports Microsoft.EntityFrameworkCore.Query
 
-Public Class NorthwindVBQuerySqlServerFixture(Of TModelCustomizer As {IModelCustomizer, New})
+Public Class NorthwindVBQuerySqlServerFixture(Of TModelCustomizer As {ITestModelCustomizer, New})
     Inherits NorthwindQuerySqlServerFixture(Of TModelCustomizer)
 
     Protected Overrides ReadOnly Property StoreName As String
