diff --git a/src/EFCore.SqlServer/Migrations/SqlServerMigrationsSqlGenerator.cs b/src/EFCore.SqlServer/Migrations/SqlServerMigrationsSqlGenerator.cs
index a46d20ce58..14fd173e8d 100644
--- a/src/EFCore.SqlServer/Migrations/SqlServerMigrationsSqlGenerator.cs
+++ b/src/EFCore.SqlServer/Migrations/SqlServerMigrationsSqlGenerator.cs
@@ -1395,11 +1395,13 @@ protected override void Generate(SqlOperation operation, IModel? model, Migratio
             .Replace("\\\r\n", "")
             .Split(["\r\n", "\n"], StringSplitOptions.None);
 
+        var quoted = false;
         var batchBuilder = new StringBuilder();
         foreach (var line in preBatched)
         {
             var trimmed = line.TrimStart();
-            if (trimmed.StartsWith("GO", StringComparison.OrdinalIgnoreCase)
+            if (!quoted
+                && trimmed.StartsWith("GO", StringComparison.OrdinalIgnoreCase)
                 && (trimmed.Length == 2
                     || char.IsWhiteSpace(trimmed[2])))
             {
@@ -1407,7 +1409,7 @@ protected override void Generate(SqlOperation operation, IModel? model, Migratio
                 batchBuilder.Clear();
 
                 var count = trimmed.Length >= 4
-                    && int.TryParse(trimmed.Substring(3), out var specifiedCount)
+                    && int.TryParse(trimmed.AsSpan(3), out var specifiedCount)
                         ? specifiedCount
                         : 1;
 
@@ -1418,6 +1420,32 @@ protected override void Generate(SqlOperation operation, IModel? model, Migratio
             }
             else
             {
+                var commentStart = false;
+                foreach (var c in trimmed)
+                {
+                    switch (c)
+                    {
+                        case '\'':
+                            quoted = !quoted;
+                            commentStart = false;
+                            break;
+                        case '-':
+                            if (!quoted)
+                            {
+                                if (commentStart)
+                                {
+                                    goto LineEnd;
+                                }
+                                commentStart = true;
+                            }
+                            break;
+                        default:
+                            commentStart = false;
+                            break;
+                    }
+                }
+
+                LineEnd:
                 batchBuilder.AppendLine(line);
             }
         }
diff --git a/test/EFCore.SqlServer.FunctionalTests/Migrations/MigrationsInfrastructureSqlServerTest.cs b/test/EFCore.SqlServer.FunctionalTests/Migrations/MigrationsInfrastructureSqlServerTest.cs
index f0fc3e5ccc..33e82d0142 100644
--- a/test/EFCore.SqlServer.FunctionalTests/Migrations/MigrationsInfrastructureSqlServerTest.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/Migrations/MigrationsInfrastructureSqlServerTest.cs
@@ -4,7 +4,6 @@
 #nullable disable
 
 using Identity30.Data;
-using Microsoft.Data.SqlClient;
 using Microsoft.EntityFrameworkCore.Diagnostics.Internal;
 using Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal;
 using Microsoft.EntityFrameworkCore.TestModels.AspNetIdentity;
@@ -18,12 +17,6 @@ public class MigrationsInfrastructureSqlServerTest(
         MigrationsInfrastructureSqlServerTest.MigrationsInfrastructureSqlServerFixture fixture)
         : MigrationsInfrastructureTestBase<MigrationsInfrastructureSqlServerTest.MigrationsInfrastructureSqlServerFixture>(fixture)
     {
-        public override void Can_apply_all_migrations() // Issue #32826
-            => Assert.Throws<SqlException>(base.Can_apply_all_migrations);
-
-        public override Task Can_apply_all_migrations_async() // Issue #32826
-            => Assert.ThrowsAsync<SqlException>(base.Can_apply_all_migrations_async);
-
         public override void Can_apply_range_of_migrations()
         {
             base.Can_apply_range_of_migrations();
@@ -174,13 +167,13 @@ Value With
 VALUES (N'00000000000006_Migration6', N'7.0.0-test');
 
 INSERT INTO Table1 (Id, Bar, Description) VALUES (-3, 5, '--Start
-
+GO
 Value With
 
-
+GO
 
 Empty Lines;
-
+GO
 ')
 
 INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
@@ -322,15 +315,12 @@ Value With
 
 INSERT INTO Table1 (Id, Bar, Description) VALUES (-3, 5, '--Start
 GO
-
 Value With
 
 GO
 
-
 Empty Lines;
 GO
-
 ')
 GO
 
