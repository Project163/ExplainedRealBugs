diff --git a/src/EFCore.Relational/Storage/RelationalCommand.cs b/src/EFCore.Relational/Storage/RelationalCommand.cs
index e1556dca99..3d271f5cd7 100644
--- a/src/EFCore.Relational/Storage/RelationalCommand.cs
+++ b/src/EFCore.Relational/Storage/RelationalCommand.cs
@@ -507,13 +507,11 @@ public virtual RelationalDataReader ExecuteReader(RelationalCommandParameterObje
         // Guid.NewGuid is expensive, do it only if needed
         var commandId = shouldLogCommandCreate || shouldLogCommandExecute ? Guid.NewGuid() : default;
 
-        var command = CreateDbCommand(parameterObject, commandId, DbCommandMethod.ExecuteReader);
-
         connection.Open();
 
+        var command = CreateDbCommand(parameterObject, commandId, DbCommandMethod.ExecuteReader);
         var readerOpen = false;
         DbDataReader reader;
-
         var stopwatch = SharedStopwatch.StartNew();
 
         try
@@ -635,13 +633,11 @@ public virtual RelationalDataReader ExecuteReader(RelationalCommandParameterObje
         // Guid.NewGuid is expensive, do it only if needed
         var commandId = shouldLogCommandCreate || shouldLogCommandExecute ? Guid.NewGuid() : default;
 
-        var command = CreateDbCommand(parameterObject, commandId, DbCommandMethod.ExecuteReader);
-
         await connection.OpenAsync(cancellationToken).ConfigureAwait(false);
 
+        var command = CreateDbCommand(parameterObject, commandId, DbCommandMethod.ExecuteReader);
         var readerOpen = false;
         DbDataReader reader;
-
         var stopwatch = SharedStopwatch.StartNew();
 
         try
diff --git a/test/EFCore.Relational.Specification.Tests/TransactionTestBase.cs b/test/EFCore.Relational.Specification.Tests/TransactionTestBase.cs
index 87e5192b62..f38bad5c05 100644
--- a/test/EFCore.Relational.Specification.Tests/TransactionTestBase.cs
+++ b/test/EFCore.Relational.Specification.Tests/TransactionTestBase.cs
@@ -384,13 +384,13 @@ public virtual async Task SaveChanges_uses_ambient_transaction(bool async, AutoT
                 Assert.Equal(
                     RelationalResources.LogAmbientTransactionEnlisted(new TestLogger<TestRelationalLoggingDefinitions>())
                         .GenerateMessage("Serializable"),
-                    Fixture.ListLoggerFactory.Log.Skip(3).First().Message);
+                    Fixture.ListLoggerFactory.Log.First().Message);
             }
             else
             {
                 Assert.Equal(
                     RelationalResources.LogAmbientTransaction(new TestLogger<TestRelationalLoggingDefinitions>()).GenerateMessage(),
-                    Fixture.ListLoggerFactory.Log.Skip(3).First().Message);
+                    Fixture.ListLoggerFactory.Log.First().Message);
 
                 using var context = CreateContext();
                 context.Entry(context.Set<TransactionCustomer>().Single(c => c.Id == -77)).State = EntityState.Deleted;
diff --git a/test/EFCore.SqlServer.FunctionalTests/Query/FromSqlQuerySqlServerTest.cs b/test/EFCore.SqlServer.FunctionalTests/Query/FromSqlQuerySqlServerTest.cs
index 06cba36b51..b4d7465676 100644
--- a/test/EFCore.SqlServer.FunctionalTests/Query/FromSqlQuerySqlServerTest.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/Query/FromSqlQuerySqlServerTest.cs
@@ -1,13 +1,16 @@
 // Licensed to the .NET Foundation under one or more agreements.
 // The .NET Foundation licenses this file to you under the MIT license.
 
+using System.Data;
 using Microsoft.Data.SqlClient;
+using Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal;
+using Microsoft.EntityFrameworkCore.TestModels.Northwind;
 
 namespace Microsoft.EntityFrameworkCore.Query;
 
-public class FromSqlQuerySqlServerTest : FromSqlQueryTestBase<NorthwindQuerySqlServerFixture<NoopModelCustomizer>>
+public class FromSqlQuerySqlServerTest : FromSqlQueryTestBase<FromSqlQuerySqlServerTest.FromSqlQuerySqlServerTestFixture>
 {
-    public FromSqlQuerySqlServerTest(NorthwindQuerySqlServerFixture<NoopModelCustomizer> fixture, ITestOutputHelper testOutputHelper)
+    public FromSqlQuerySqlServerTest(FromSqlQuerySqlServerTestFixture fixture, ITestOutputHelper testOutputHelper)
         : base(fixture)
     {
         Fixture.TestSqlLoggerFactory.SetTestOutputHelper(testOutputHelper);
@@ -436,7 +439,7 @@ public override async Task FromSqlRaw_queryable_with_null_parameter(bool async)
 
     public override async Task<string> FromSqlRaw_queryable_with_parameters_and_closure(bool async)
     {
-        var queryString = await base.FromSqlRaw_queryable_with_parameters_and_closure(async);
+        await base.FromSqlRaw_queryable_with_parameters_and_closure(async);
 
         AssertSql(
             """
@@ -979,9 +982,44 @@ public override async Task FromSqlRaw_composed_with_common_table_expression(bool
         Assert.Equal(RelationalStrings.FromSqlNonComposable, exception.Message);
     }
 
+    [ConditionalFact]
+    public virtual void FromSql_output_parameter_works_with_transient_errors()
+    {
+        using var context = Fixture.CreateContext();
+        var connection = (TestSqlServerConnection)context.GetService<ISqlServerConnection>();
+        connection.ExecutionFailures.Enqueue(new bool?[] { true });
+        connection.OpenFailures.Enqueue(new bool?[] { true });
+
+        var output =
+            new SqlParameter
+            {
+                ParameterName = "returnValue",
+                Value = -1,
+                Direction = ParameterDirection.InputOutput,
+                SqlDbType = SqlDbType.Int,
+            };
+
+        var orders = context.Set<OrderQuery>()
+                .FromSqlRaw(@"SET @returnValue = 3
+SELECT * FROM [Customers] WHERE [CustomerID] = 'ALFKI'", new[] { output } )
+                .ToList();
+
+        Assert.Equal(1, orders.Count);
+        Assert.Equal(3, output.Value);
+    }
+
     protected override DbParameter CreateDbParameter(string name, object value)
         => new SqlParameter { ParameterName = name, Value = value };
 
     private void AssertSql(params string[] expected)
         => Fixture.TestSqlLoggerFactory.AssertBaseline(expected);
+
+    public class FromSqlQuerySqlServerTestFixture : NorthwindQuerySqlServerFixture<NoopModelCustomizer>
+    {
+        protected override IServiceCollection AddServices(IServiceCollection serviceCollection)
+            => base.AddServices(serviceCollection)
+                .AddSingleton<IRelationalTransactionFactory, TestRelationalTransactionFactory>()
+                .AddScoped<ISqlServerConnection, TestSqlServerConnection>()
+                .AddSingleton<IRelationalCommandBuilderFactory, TestRelationalCommandBuilderFactory>();
+    }
 }
diff --git a/test/EFCore.SqlServer.FunctionalTests/TestUtilities/TestRelationalCommandBuilderFactory.cs b/test/EFCore.SqlServer.FunctionalTests/TestUtilities/TestRelationalCommandBuilderFactory.cs
index 0a9b268571..7fe6129c2d 100644
--- a/test/EFCore.SqlServer.FunctionalTests/TestUtilities/TestRelationalCommandBuilderFactory.cs
+++ b/test/EFCore.SqlServer.FunctionalTests/TestUtilities/TestRelationalCommandBuilderFactory.cs
@@ -209,7 +209,7 @@ public RelationalDataReader ExecuteReader(RelationalCommandParameterObject param
             RelationalCommandParameterObject parameterObject,
             Guid commandId,
             DbCommandMethod commandMethod)
-            => throw new NotSupportedException();
+            => _realRelationalCommand.CreateDbCommand(parameterObject, commandId, commandMethod);
 
         public void PopulateFrom(IRelationalCommandTemplate commandTemplate)
             => _realRelationalCommand.PopulateFrom(commandTemplate);
