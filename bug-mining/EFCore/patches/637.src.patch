diff --git a/src/EFCore.Relational/Diagnostics/DbConnectionInterceptor.cs b/src/EFCore.Relational/Diagnostics/DbConnectionInterceptor.cs
index a320c514b1..464b5e428e 100644
--- a/src/EFCore.Relational/Diagnostics/DbConnectionInterceptor.cs
+++ b/src/EFCore.Relational/Diagnostics/DbConnectionInterceptor.cs
@@ -97,4 +97,16 @@ public virtual void ConnectionFailed(DbConnection connection, ConnectionErrorEve
         ConnectionErrorEventData eventData,
         CancellationToken cancellationToken = default)
         => Task.CompletedTask;
+
+    /// <inheritdoc />
+    public virtual void ConnectionCanceled(DbConnection connection, ConnectionEndEventData eventData)
+    {
+    }
+
+    /// <inheritdoc />
+    public virtual Task ConnectionCanceledAsync(
+        DbConnection connection,
+        ConnectionEndEventData eventData,
+        CancellationToken cancellationToken = default)
+        => Task.CompletedTask;
 }
diff --git a/src/EFCore.Relational/Diagnostics/IDbConnectionInterceptor.cs b/src/EFCore.Relational/Diagnostics/IDbConnectionInterceptor.cs
index b8b9504383..d5d982ab73 100644
--- a/src/EFCore.Relational/Diagnostics/IDbConnectionInterceptor.cs
+++ b/src/EFCore.Relational/Diagnostics/IDbConnectionInterceptor.cs
@@ -261,7 +261,7 @@ Task ConnectionDisposedAsync(DbConnection connection, ConnectionEndEventData eve
         => Task.CompletedTask;
 
     /// <summary>
-    ///     Called when closing of a connection has failed with an exception.
+    ///     Called when a connection operation (e.g. open) has failed with an exception.
     /// </summary>
     /// <param name="connection">The connection.</param>
     /// <param name="eventData">Contextual information about the connection.</param>
@@ -270,7 +270,7 @@ void ConnectionFailed(DbConnection connection, ConnectionErrorEventData eventDat
     }
 
     /// <summary>
-    ///     Called when closing of a connection has failed with an exception.
+    ///     Called when a connection operation (e.g. open) has failed with an exception.
     /// </summary>
     /// <param name="connection">The connection.</param>
     /// <param name="eventData">Contextual information about the connection.</param>
@@ -279,4 +279,24 @@ void ConnectionFailed(DbConnection connection, ConnectionErrorEventData eventDat
     /// <exception cref="OperationCanceledException">If the <see cref="CancellationToken" /> is canceled.</exception>
     Task ConnectionFailedAsync(DbConnection connection, ConnectionErrorEventData eventData, CancellationToken cancellationToken = default)
         => Task.CompletedTask;
+
+    /// <summary>
+    ///     Called when the opening of a connection was canceled.
+    /// </summary>
+    /// <param name="connection">The connection.</param>
+    /// <param name="eventData">Contextual information about the connection.</param>
+    void ConnectionCanceled(DbConnection connection, ConnectionEndEventData eventData)
+    {
+    }
+
+    /// <summary>
+    ///     Called when the opening of a connection was canceled.
+    /// </summary>
+    /// <param name="connection">The connection.</param>
+    /// <param name="eventData">Contextual information about the connection.</param>
+    /// <param name="cancellationToken">A <see cref="CancellationToken" /> to observe while waiting for the task to complete.</param>
+    /// <returns>A <see cref="Task" /> representing the asynchronous operation.</returns>
+    /// <exception cref="OperationCanceledException">If the <see cref="CancellationToken" /> is canceled.</exception>
+    Task ConnectionCanceledAsync(DbConnection connection, ConnectionEndEventData eventData, CancellationToken cancellationToken = default)
+        => Task.CompletedTask;
 }
diff --git a/src/EFCore.Relational/Diagnostics/IRelationalCommandDiagnosticsLogger.cs b/src/EFCore.Relational/Diagnostics/IRelationalCommandDiagnosticsLogger.cs
index 919e063ec4..1737a69862 100644
--- a/src/EFCore.Relational/Diagnostics/IRelationalCommandDiagnosticsLogger.cs
+++ b/src/EFCore.Relational/Diagnostics/IRelationalCommandDiagnosticsLogger.cs
@@ -463,7 +463,7 @@ public interface IRelationalCommandDiagnosticsLogger : IDiagnosticsLogger<DbLogg
     /// <param name="commandId">The correlation ID associated with the given <see cref="DbCommand" />.</param>
     /// <param name="connectionId">The correlation ID associated with the <see cref="DbConnection" /> being used.</param>
     /// <param name="startTime">The time that execution began.</param>
-    /// <param name="duration">The amount of time that passed until the exception was raised.</param>
+    /// <param name="duration">The amount of time that passed until the command was canceled.</param>
     /// <param name="commandSource">Source of the command.</param>
     void CommandCanceled(
         IRelationalConnection connection,
@@ -488,7 +488,7 @@ public interface IRelationalCommandDiagnosticsLogger : IDiagnosticsLogger<DbLogg
     /// <param name="commandId">The correlation ID associated with the given <see cref="DbCommand" />.</param>
     /// <param name="connectionId">The correlation ID associated with the <see cref="DbConnection" /> being used.</param>
     /// <param name="startTime">The time that execution began.</param>
-    /// <param name="duration">The amount of time that passed until the exception was raised.</param>
+    /// <param name="duration">The amount of time that passed until the command was canceled.</param>
     /// <param name="commandSource">Source of the command.</param>
     /// <param name="cancellationToken">A <see cref="CancellationToken" /> to observe while waiting for the task to complete.</param>
     /// <returns>A <see cref="Task" /> representing the async operation.</returns>
diff --git a/src/EFCore.Relational/Diagnostics/IRelationalConnectionDiagnosticsLogger.cs b/src/EFCore.Relational/Diagnostics/IRelationalConnectionDiagnosticsLogger.cs
index a30d6370b1..18a4d111d3 100644
--- a/src/EFCore.Relational/Diagnostics/IRelationalConnectionDiagnosticsLogger.cs
+++ b/src/EFCore.Relational/Diagnostics/IRelationalConnectionDiagnosticsLogger.cs
@@ -210,6 +210,32 @@ public interface IRelationalConnectionDiagnosticsLogger : IDiagnosticsLogger<DbL
         bool logErrorAsDebug,
         CancellationToken cancellationToken = default);
 
+    /// <summary>
+    ///     Logs for the <see cref="RelationalEventId.ConnectionCanceled" /> event.
+    /// </summary>
+    /// <param name="connection">The connection.</param>
+    /// <param name="startTime">The time that the operation was started.</param>
+    /// <param name="duration">The amount of time that passed until the command was canceled.</param>
+    void ConnectionCanceled(
+        IRelationalConnection connection,
+        DateTimeOffset startTime,
+        TimeSpan duration);
+
+    /// <summary>
+    ///     Logs for the <see cref="RelationalEventId.ConnectionCanceled" /> event.
+    /// </summary>
+    /// <param name="connection">The connection.</param>
+    /// <param name="startTime">The time that the operation was started.</param>
+    /// <param name="duration">The amount of time that passed until the command was canceled.</param>
+    /// <param name="cancellationToken">A <see cref="CancellationToken" /> to observe while waiting for the task to complete.</param>
+    /// <returns>A <see cref="Task" /> representing the async operation.</returns>
+    /// <exception cref="OperationCanceledException">If the <see cref="CancellationToken" /> is canceled.</exception>
+    Task ConnectionCanceledAsync(
+        IRelationalConnection connection,
+        DateTimeOffset startTime,
+        TimeSpan duration,
+        CancellationToken cancellationToken = default);
+
     /// <summary>
     ///     Whether <see cref="RelationalEventId.ConnectionCreating" /> or <see cref="RelationalEventId.ConnectionCreated" /> need
     ///     to be logged.
diff --git a/src/EFCore.Relational/Diagnostics/Internal/RelationalConnectionDiagnosticsLogger.cs b/src/EFCore.Relational/Diagnostics/Internal/RelationalConnectionDiagnosticsLogger.cs
index 5777768e8a..0418bdc277 100644
--- a/src/EFCore.Relational/Diagnostics/Internal/RelationalConnectionDiagnosticsLogger.cs
+++ b/src/EFCore.Relational/Diagnostics/Internal/RelationalConnectionDiagnosticsLogger.cs
@@ -892,6 +892,121 @@ static string ConnectionError(EventDefinitionBase definition, EventData payload)
 
     #endregion ConnectionError
 
+    #region ConnectionCanceled
+
+    /// <summary>
+    ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to
+    ///     the same compatibility standards as public APIs. It may be changed or removed without notice in
+    ///     any release. You should only use it directly in your code with extreme caution and knowing that
+    ///     doing so can result in application failures when updating to a new Entity Framework Core release.
+    /// </summary>
+    public virtual void ConnectionCanceled(
+        IRelationalConnection connection,
+        DateTimeOffset startTime,
+        TimeSpan duration)
+    {
+        var definition = RelationalResources.LogConnectionCanceled(this);
+
+        LogConnectionCanceled(connection, definition);
+
+        if (NeedsEventData<IDbConnectionInterceptor>(
+                definition, out var interceptor, out var diagnosticSourceEnabled, out var simpleLogEnabled))
+        {
+            var eventData = BroadcastConnectionCanceled(
+                connection,
+                startTime,
+                duration,
+                async: false,
+                definition,
+                diagnosticSourceEnabled,
+                simpleLogEnabled);
+
+            interceptor?.ConnectionCanceled(connection.DbConnection, eventData);
+        }
+    }
+
+    /// <summary>
+    ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to
+    ///     the same compatibility standards as public APIs. It may be changed or removed without notice in
+    ///     any release. You should only use it directly in your code with extreme caution and knowing that
+    ///     doing so can result in application failures when updating to a new Entity Framework Core release.
+    /// </summary>
+    public virtual Task ConnectionCanceledAsync(
+        IRelationalConnection connection,
+        DateTimeOffset startTime,
+        TimeSpan duration,
+        CancellationToken cancellationToken = default)
+    {
+        var definition = RelationalResources.LogConnectionCanceled(this);
+
+        LogConnectionCanceled(connection, definition);
+
+        if (NeedsEventData<IDbConnectionInterceptor>(
+                definition, out var interceptor, out var diagnosticSourceEnabled, out var simpleLogEnabled))
+        {
+            var eventData = BroadcastConnectionCanceled(
+                connection,
+                startTime,
+                duration,
+                async: true,
+                definition,
+                diagnosticSourceEnabled,
+                simpleLogEnabled);
+
+            interceptor?.ConnectionCanceled(connection.DbConnection, eventData);
+        }
+
+        return Task.CompletedTask;
+    }
+
+    private ConnectionEndEventData BroadcastConnectionCanceled(
+        IRelationalConnection connection,
+        DateTimeOffset startTime,
+        TimeSpan duration,
+        bool async,
+        EventDefinition<string, string> definition,
+        bool diagnosticSourceEnabled,
+        bool simpleLogEnabled)
+    {
+        var eventData = new ConnectionEndEventData(
+            definition,
+            ConnectionCanceled,
+            connection.DbConnection,
+            connection.Context,
+            connection.ConnectionId,
+            async,
+            startTime,
+            duration);
+
+        DispatchEventData(definition, eventData, diagnosticSourceEnabled, simpleLogEnabled);
+
+        return eventData;
+
+        static string ConnectionCanceled(EventDefinitionBase definition, EventData payload)
+        {
+            var d = (EventDefinition<string, string>)definition;
+            var p = (ConnectionEndEventData)payload;
+            return d.GenerateMessage(
+                p.Connection.Database,
+                p.Connection.DataSource);
+        }
+    }
+
+    private void LogConnectionCanceled(
+        IRelationalConnection connection,
+        EventDefinition<string, string> definition)
+    {
+        if (ShouldLog(definition))
+        {
+            definition.Log(
+                this,
+                connection.DbConnection.Database,
+                connection.DbConnection.DataSource);
+        }
+    }
+
+    #endregion ConnectionCanceled
+
     #region ConnectionCreating
 
     /// <summary>
diff --git a/src/EFCore.Relational/Diagnostics/RelationalEventId.cs b/src/EFCore.Relational/Diagnostics/RelationalEventId.cs
index 0b1f48c527..e4bb8529c3 100644
--- a/src/EFCore.Relational/Diagnostics/RelationalEventId.cs
+++ b/src/EFCore.Relational/Diagnostics/RelationalEventId.cs
@@ -33,6 +33,7 @@ private enum Id
         ConnectionCreated,
         ConnectionDisposing,
         ConnectionDisposed,
+        ConnectionCanceled,
 
         // Command events
         CommandExecuting = CoreEventId.RelationalBaseId + 100,
@@ -217,6 +218,19 @@ private static EventId MakeConnectionId(Id id)
     /// </remarks>
     public static readonly EventId ConnectionError = MakeConnectionId(Id.ConnectionError);
 
+    /// <summary>
+    ///     A <see cref="DbConnection" /> open operation has been canceled.
+    /// </summary>
+    /// <remarks>
+    ///     <para>
+    ///         This event is in the <see cref="DbLoggerCategory.Database.Connection" /> category.
+    ///     </para>
+    ///     <para>
+    ///         This event uses the <see cref="ConnectionEndEventData" /> payload when used with a <see cref="DiagnosticSource" />.
+    ///     </para>
+    /// </remarks>
+    public static readonly EventId ConnectionCanceled = MakeConnectionId(Id.ConnectionCanceled);
+
     /// <summary>
     ///     A <see cref="DbConnection" /> is about to be created by EF.
     /// </summary>
diff --git a/src/EFCore.Relational/Diagnostics/RelationalLoggingDefinitions.cs b/src/EFCore.Relational/Diagnostics/RelationalLoggingDefinitions.cs
index 9634f027bf..a4c49f8b04 100644
--- a/src/EFCore.Relational/Diagnostics/RelationalLoggingDefinitions.cs
+++ b/src/EFCore.Relational/Diagnostics/RelationalLoggingDefinitions.cs
@@ -133,6 +133,15 @@ public abstract class RelationalLoggingDefinitions : LoggingDefinitions
     [EntityFrameworkInternal]
     public EventDefinitionBase? LogConnectionError;
 
+    /// <summary>
+    ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to
+    ///     the same compatibility standards as public APIs. It may be changed or removed without notice in
+    ///     any release. You should only use it directly in your code with extreme caution and knowing that
+    ///     doing so can result in application failures when updating to a new Entity Framework Core release.
+    /// </summary>
+    [EntityFrameworkInternal]
+    public EventDefinitionBase? LogConnectionCanceled;
+
     /// <summary>
     ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to
     ///     the same compatibility standards as public APIs. It may be changed or removed without notice in
diff --git a/src/EFCore.Relational/Properties/RelationalStrings.Designer.cs b/src/EFCore.Relational/Properties/RelationalStrings.Designer.cs
index 5220ac5bdd..13c8cbcf2a 100644
--- a/src/EFCore.Relational/Properties/RelationalStrings.Designer.cs
+++ b/src/EFCore.Relational/Properties/RelationalStrings.Designer.cs
@@ -2146,7 +2146,7 @@ public static string UnsupportedOperatorForSqlExpression(object? nodeType, objec
                 nodeType, expressionType);
 
         /// <summary>
-        ///     No relational type mapping can be found for property '{entity}.{property}' and the current provider doesn't specify a default store type for the properties of type '{clrType}'. 
+        ///     No relational type mapping can be found for property '{entity}.{property}' and the current provider doesn't specify a default store type for the properties of type '{clrType}'.
         /// </summary>
         public static string UnsupportedPropertyType(object? entity, object? property, object? clrType)
             => string.Format(
@@ -2971,6 +2971,31 @@ public static EventDefinition LogConnectionCreating(IDiagnosticsLogger logger)
             return (EventDefinition<string, string>)definition;
         }
 
+        /// <summary>
+        ///     A connection open was canceled to database '{database}' on server '{server}'.
+        /// </summary>
+        public static EventDefinition<string, string> LogConnectionCanceled(IDiagnosticsLogger logger)
+        {
+            var definition = ((RelationalLoggingDefinitions)logger.Definitions).LogConnectionCanceled;
+            if (definition == null)
+            {
+                definition = NonCapturingLazyInitializer.EnsureInitialized(
+                    ref ((RelationalLoggingDefinitions)logger.Definitions).LogConnectionCanceled,
+                    logger,
+                    static logger => new EventDefinition<string, string>(
+                        logger.Options,
+                        RelationalEventId.ConnectionCanceled,
+                        LogLevel.Debug,
+                        "RelationalEventId.ConnectionCanceled",
+                        level => LoggerMessage.Define<string, string>(
+                            level,
+                            RelationalEventId.ConnectionCanceled,
+                            _resourceManager.GetString("LogConnectionCanceled")!)));
+            }
+
+            return (EventDefinition<string, string>)definition;
+        }
+
         /// <summary>
         ///     Created transaction savepoint.
         /// </summary>
diff --git a/src/EFCore.Relational/Properties/RelationalStrings.resx b/src/EFCore.Relational/Properties/RelationalStrings.resx
index 2641f26d37..c5604c77a7 100644
--- a/src/EFCore.Relational/Properties/RelationalStrings.resx
+++ b/src/EFCore.Relational/Properties/RelationalStrings.resx
@@ -716,6 +716,10 @@
     <value>An error occurred using the connection to database '{database}' on server '{server}'.</value>
     <comment>Debug RelationalEventId.ConnectionError string string</comment>
   </data>
+  <data name="LogConnectionCanceled" xml:space="preserve">
+    <value>A connection open was canceled to database '{database}' on server '{server}'.</value>
+    <comment>Debug RelationalEventId.ConnectionCanceled string string string</comment>
+  </data>
   <data name="LogCreatedTransactionSavepoint" xml:space="preserve">
     <value>Created transaction savepoint.</value>
     <comment>Debug RelationalEventId.CreatedTransactionSavepoint</comment>
diff --git a/src/EFCore.Relational/Storage/RelationalConnection.cs b/src/EFCore.Relational/Storage/RelationalConnection.cs
index 8b1169d364..f550764833 100644
--- a/src/EFCore.Relational/Storage/RelationalConnection.cs
+++ b/src/EFCore.Relational/Storage/RelationalConnection.cs
@@ -42,6 +42,7 @@ public abstract class RelationalConnection : IRelationalConnection, ITransaction
     private readonly ConcurrentStack<Transaction> _ambientTransactions = new();
     private DbConnection? _connection;
     private readonly IRelationalCommandBuilder _relationalCommandBuilder;
+    private readonly IExceptionDetector _exceptionDetector;
     private IRelationalCommand? _cachedRelationalCommand;
 
     /// <summary>
@@ -74,6 +75,8 @@ protected RelationalConnection(RelationalConnectionDependencies dependencies)
         {
             _connectionOwned = true;
         }
+
+        _exceptionDetector = dependencies.ExceptionDetector;
     }
 
     /// <summary>
@@ -726,7 +729,14 @@ private void OpenInternal(bool errorsExpected)
         }
         catch (Exception e)
         {
-            logger.ConnectionError(this, e, startTime, stopwatch.Elapsed, errorsExpected);
+            if (_exceptionDetector.IsCancellation(e, CancellationToken.None))
+            {
+                logger.ConnectionCanceled(this, startTime, stopwatch.Elapsed);
+            }
+            else
+            {
+                logger.ConnectionError(this, e, startTime, stopwatch.Elapsed, errorsExpected);
+            }
 
             throw;
         }
@@ -773,14 +783,16 @@ await logger.ConnectionOpenedAsync(this, startTime, stopwatch.Elapsed, cancellat
         }
         catch (Exception e)
         {
-            await logger.ConnectionErrorAsync(
-                    this,
-                    e,
-                    startTime,
-                    stopwatch.Elapsed,
-                    errorsExpected,
-                    cancellationToken)
-                .ConfigureAwait(false);
+            if (_exceptionDetector.IsCancellation(e, CancellationToken.None))
+            {
+                await logger.ConnectionCanceledAsync(this, startTime, stopwatch.Elapsed, cancellationToken)
+                    .ConfigureAwait(false);
+            }
+            else
+            {
+                await logger.ConnectionErrorAsync(this, e, startTime, stopwatch.Elapsed, errorsExpected, cancellationToken)
+                    .ConfigureAwait(false);
+            }
 
             throw;
         }
diff --git a/src/EFCore.Relational/Storage/RelationalConnectionDependencies.cs b/src/EFCore.Relational/Storage/RelationalConnectionDependencies.cs
index c6797be24f..714b30e0a1 100644
--- a/src/EFCore.Relational/Storage/RelationalConnectionDependencies.cs
+++ b/src/EFCore.Relational/Storage/RelationalConnectionDependencies.cs
@@ -54,7 +54,8 @@ public sealed record RelationalConnectionDependencies
         INamedConnectionStringResolver connectionStringResolver,
         IRelationalTransactionFactory relationalTransactionFactory,
         ICurrentDbContext currentContext,
-        IRelationalCommandBuilderFactory relationalCommandBuilderFactory)
+        IRelationalCommandBuilderFactory relationalCommandBuilderFactory,
+        IExceptionDetector exceptionDetector)
     {
         ContextOptions = contextOptions;
         TransactionLogger = transactionLogger;
@@ -63,6 +64,7 @@ public sealed record RelationalConnectionDependencies
         RelationalTransactionFactory = relationalTransactionFactory;
         CurrentContext = currentContext;
         RelationalCommandBuilderFactory = relationalCommandBuilderFactory;
+        ExceptionDetector = exceptionDetector;
     }
 
     /// <summary>
@@ -100,4 +102,9 @@ public sealed record RelationalConnectionDependencies
     ///     Contains the <see cref="DbContext" /> instance currently in use.
     /// </summary>
     public IRelationalCommandBuilderFactory RelationalCommandBuilderFactory { get; init; }
+
+    /// <summary>
+    ///     The exception detector.
+    /// </summary>
+    public IExceptionDetector ExceptionDetector { get; init; }
 }
diff --git a/test/EFCore.Relational.Tests/RelationalConnectionTest.cs b/test/EFCore.Relational.Tests/RelationalConnectionTest.cs
index 2d26f14767..d89ada2dac 100644
--- a/test/EFCore.Relational.Tests/RelationalConnectionTest.cs
+++ b/test/EFCore.Relational.Tests/RelationalConnectionTest.cs
@@ -1073,6 +1073,32 @@ public void Does_not_dispose_when_changing_DbConnection_if_current_is_open_and_n
         Assert.Equal(ConnectionState.Open, dbConnection.State);
     }
 
+    [ConditionalFact]
+    public async Task Reports_command_diagnostic_on_cancellation()
+    {
+        var exception = new OperationCanceledException();
+
+        var connection = new FakeRelationalConnection(
+            CreateOptions(new FakeRelationalOptionsExtension().WithConnectionString("Database=FrodoLives")));
+
+        var diagnostics = connection.ConnectionDiagnosticEvents;
+
+        await Assert.ThrowsAsync<OperationCanceledException>(async () => await connection.OpenAsync(new CancellationToken(canceled: true)));
+
+        Assert.Collection(
+            diagnostics,
+            d => Assert.Equal(RelationalEventId.ConnectionCreating.Name, d.Item1),
+            d => Assert.Equal(RelationalEventId.ConnectionCreated.Name, d.Item1),
+            d => Assert.Equal(RelationalEventId.ConnectionOpening.Name, d.Item1),
+            d =>
+            {
+                Assert.Equal(RelationalEventId.ConnectionCanceled.Name, d.Item1);
+                var eventData = (ConnectionEndEventData)d.Item2;
+                Assert.Same(connection.DbConnection, eventData.Connection);
+                Assert.True(eventData.IsAsync);
+            });
+    }
+
     private static IDbContextOptions CreateOptions(params RelationalOptionsExtension[] optionsExtensions)
     {
         var optionsBuilder = new DbContextOptionsBuilder();
@@ -1084,4 +1110,26 @@ private static IDbContextOptions CreateOptions(params RelationalOptionsExtension
 
         return optionsBuilder.Options;
     }
+
+    private class FakeLoggingOptions(bool sensitiveDataLoggingEnabled, bool detailedErrorsEnabled = false) : ILoggingOptions
+    {
+        public void Initialize(IDbContextOptions options)
+        {
+        }
+
+        public void Validate(IDbContextOptions options)
+        {
+        }
+
+        public bool IsSensitiveDataLoggingEnabled { get; } = sensitiveDataLoggingEnabled;
+        public bool IsSensitiveDataLoggingWarned { get; set; }
+
+        public bool DetailedErrorsEnabled { get; } = detailedErrorsEnabled;
+
+        public WarningsConfiguration WarningsConfiguration
+            => null;
+
+        public virtual bool ShouldWarnForStringEnumValueInJson(Type enumType)
+            => true;
+    }
 }
diff --git a/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeDbConnection.cs b/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeDbConnection.cs
index 5017c4b2b5..09552f40be 100644
--- a/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeDbConnection.cs
+++ b/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeDbConnection.cs
@@ -50,6 +50,7 @@ public override void Open()
     public override Task OpenAsync(CancellationToken cancellationToken)
     {
         OpenAsyncCount++;
+        cancellationToken.ThrowIfCancellationRequested();
         return base.OpenAsync(cancellationToken);
     }
 
diff --git a/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeRelationalConnection.cs b/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeRelationalConnection.cs
index 03b66339c2..d36deb066a 100644
--- a/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeRelationalConnection.cs
+++ b/test/EFCore.Relational.Tests/TestUtilities/FakeProvider/FakeRelationalConnection.cs
@@ -7,35 +7,37 @@
 
 namespace Microsoft.EntityFrameworkCore.TestUtilities.FakeProvider;
 
-public class FakeRelationalConnection(IDbContextOptions options = null) : RelationalConnection(
-    new RelationalConnectionDependencies(
-        options ?? CreateOptions(),
-        new DiagnosticsLogger<DbLoggerCategory.Database.Transaction>(
-            new LoggerFactory(),
-            new LoggingOptions(),
-            new DiagnosticListener("FakeDiagnosticListener"),
-            new TestRelationalLoggingDefinitions(),
-            new NullDbContextLogger()),
-        new RelationalConnectionDiagnosticsLogger(
-            new LoggerFactory(),
-            new LoggingOptions(),
-            new DiagnosticListener("FakeDiagnosticListener"),
-            new TestRelationalLoggingDefinitions(),
-            new NullDbContextLogger(),
-            CreateOptions()),
-        new NamedConnectionStringResolver(options ?? CreateOptions()),
-        new RelationalTransactionFactory(
-            new RelationalTransactionFactoryDependencies(
-                new RelationalSqlGenerationHelper(
-                    new RelationalSqlGenerationHelperDependencies()))),
-        new CurrentDbContext(new FakeDbContext()),
-        new RelationalCommandBuilderFactory(
-            new RelationalCommandBuilderDependencies(
-                new TestRelationalTypeMappingSource(
-                    TestServiceFactory.Instance.Create<TypeMappingSourceDependencies>(),
-                    TestServiceFactory.Instance.Create<RelationalTypeMappingSourceDependencies>()),
-                new ExceptionDetector(),
-                new LoggingOptions()))))
+public class FakeRelationalConnection(IDbContextOptions options = null)
+    : RelationalConnection(
+        new RelationalConnectionDependencies(
+            options ?? CreateOptions(),
+            new DiagnosticsLogger<DbLoggerCategory.Database.Transaction>(
+                new LoggerFactory(),
+                new LoggingOptions(),
+                new ListDiagnosticSource(new List<Tuple<string, object>>()),
+                new TestRelationalLoggingDefinitions(),
+                new NullDbContextLogger()),
+            new RelationalConnectionDiagnosticsLogger(
+                new LoggerFactory(),
+                new LoggingOptions(),
+                new ListDiagnosticSource(new List<Tuple<string, object>>()),
+                new TestRelationalLoggingDefinitions(),
+                new NullDbContextLogger(),
+                CreateOptions()),
+            new NamedConnectionStringResolver(options ?? CreateOptions()),
+            new RelationalTransactionFactory(
+                new RelationalTransactionFactoryDependencies(
+                    new RelationalSqlGenerationHelper(
+                        new RelationalSqlGenerationHelperDependencies()))),
+            new CurrentDbContext(new FakeDbContext()),
+            new RelationalCommandBuilderFactory(
+                new RelationalCommandBuilderDependencies(
+                    new TestRelationalTypeMappingSource(
+                        TestServiceFactory.Instance.Create<TypeMappingSourceDependencies>(),
+                        TestServiceFactory.Instance.Create<RelationalTypeMappingSourceDependencies>()),
+                    new ExceptionDetector(),
+                    new LoggingOptions())),
+            new ExceptionDetector()))
 {
     private DbConnection _connection;
 
@@ -62,6 +64,12 @@ public override DbConnection DbConnection
     public IReadOnlyList<FakeDbConnection> DbConnections
         => _dbConnections;
 
+    public List<Tuple<string, object>> TransactionDiagnosticEvents
+        => ((ListDiagnosticSource)Dependencies.TransactionLogger.DiagnosticSource).DiagnosticList;
+
+    public List<Tuple<string, object>> ConnectionDiagnosticEvents
+        => ((ListDiagnosticSource)Dependencies.ConnectionLogger.DiagnosticSource).DiagnosticList;
+
     protected override DbConnection CreateDbConnection()
     {
         var connection = new FakeDbConnection(ConnectionString);
diff --git a/test/EFCore.SqlServer.Tests/Storage/Internal/SqlServerConnectionTest.cs b/test/EFCore.SqlServer.Tests/Storage/Internal/SqlServerConnectionTest.cs
index 0da120d5df..53b6ca920e 100644
--- a/test/EFCore.SqlServer.Tests/Storage/Internal/SqlServerConnectionTest.cs
+++ b/test/EFCore.SqlServer.Tests/Storage/Internal/SqlServerConnectionTest.cs
@@ -89,7 +89,8 @@ public static RelationalConnectionDependencies CreateDependencies(DbContextOptio
                         TestServiceFactory.Instance.Create<TypeMappingSourceDependencies>(),
                         TestServiceFactory.Instance.Create<RelationalTypeMappingSourceDependencies>()),
                     new SqlServerExceptionDetector(),
-                    new LoggingOptions())));
+                    new LoggingOptions())),
+            new SqlServerExceptionDetector());
     }
 
     private const string ConnectionString = "Fake Connection String";
