diff --git a/src/EFCore.Relational/Migrations/Internal/MigrationsAssembly.cs b/src/EFCore.Relational/Migrations/Internal/MigrationsAssembly.cs
index 9b0c75444c..277c0ca71a 100644
--- a/src/EFCore.Relational/Migrations/Internal/MigrationsAssembly.cs
+++ b/src/EFCore.Relational/Migrations/Internal/MigrationsAssembly.cs
@@ -60,7 +60,7 @@ public class MigrationsAssembly : IMigrationsAssembly
                 var items
                     = from t in Assembly.GetConstructibleTypes()
                       where t.IsSubclassOf(typeof(Migration))
-                          && t.GetCustomAttribute<DbContextAttribute>()?.ContextType == _contextType
+                          && t.GetCustomAttribute<DbContextAttribute>(inherit: false)?.ContextType == _contextType
                       let id = t.GetCustomAttribute<MigrationAttribute>()?.Id
                       orderby id
                       select (id, t);
@@ -94,7 +94,7 @@ orderby id
         => _modelSnapshot
             ??= (from t in Assembly.GetConstructibleTypes()
                  where t.IsSubclassOf(typeof(ModelSnapshot))
-                     && t.GetCustomAttribute<DbContextAttribute>()?.ContextType == _contextType
+                     && t.GetCustomAttribute<DbContextAttribute>(inherit: false)?.ContextType == _contextType
                  select (ModelSnapshot)Activator.CreateInstance(t.AsType())!)
             .FirstOrDefault();
 
diff --git a/test/EFCore.Relational.Tests/Migrations/Internal/MigrationsAssemblyTest.cs b/test/EFCore.Relational.Tests/Migrations/Internal/MigrationsAssemblyTest.cs
index cbc97dcd3d..bde3710811 100644
--- a/test/EFCore.Relational.Tests/Migrations/Internal/MigrationsAssemblyTest.cs
+++ b/test/EFCore.Relational.Tests/Migrations/Internal/MigrationsAssemblyTest.cs
@@ -40,7 +40,7 @@ public void Migrations_ignores_the_unattributed()
 
         var result = assembly.Migrations;
 
-        Assert.Equal(2, result.Count);
+        Assert.Equal(3, result.Count);
         Assert.DoesNotContain(result, t => t.GetType() == typeof(MigrationWithoutAttribute));
         Assert.Equal(
             RelationalResources.LogMigrationAttributeMissingWarning(logger).GenerateMessage(nameof(MigrationWithoutAttribute)),
@@ -84,4 +84,45 @@ protected override void Up(MigrationBuilder migrationBuilder)
         {
         }
     }
+
+    [ConditionalFact]
+    public void Migrations_handles_inherited_DbContextAttribute()
+    {
+        var assembly = CreateInheritedMigrationsAssembly();
+
+        // This should not throw AmbiguousMatchException
+        var result = assembly.Migrations;
+
+        Assert.Single(result);
+        Assert.Contains(result, t => t.Key == "20150302103200_InheritedMigration");
+    }
+
+    private IMigrationsAssembly CreateInheritedMigrationsAssembly()
+        => new MigrationsAssembly(
+            new CurrentDbContext(new DerivedContext()),
+            new DbContextOptions<DbContext>(
+                new Dictionary<Type, IDbContextOptionsExtension>
+                {
+                    { typeof(FakeRelationalOptionsExtension), new FakeRelationalOptionsExtension() }
+                }),
+            new MigrationsIdGenerator(),
+            new FakeDiagnosticsLogger<DbLoggerCategory.Migrations>());
+
+    private class DerivedContext : Context;
+
+    [DbContext(typeof(Context)), Migration("20150302103200_BaseMigration")]
+    private class BaseMigration : Migration
+    {
+        protected override void Up(MigrationBuilder migrationBuilder)
+        {
+        }
+    }
+
+    [DbContext(typeof(DerivedContext)), Migration("20150302103200_InheritedMigration")]
+    private class InheritedMigration : BaseMigration
+    {
+        protected override void Up(MigrationBuilder migrationBuilder)
+        {
+        }
+    }
 }
