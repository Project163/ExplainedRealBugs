{"url":"https://api.github.com/repos/dotnet/efcore/issues/32732","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/32732/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/32732/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/32732/events","html_url":"https://github.com/dotnet/efcore/issues/32732","id":2067905471,"node_id":"I_kwDOAPaMMs57Qbu_","number":32732,"title":"NullReferenceException in Get-Migration in EF Core 8","user":{"login":"bgoodearl","id":270818,"node_id":"MDQ6VXNlcjI3MDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/270818?v=4","gravatar_id":"","url":"https://api.github.com/users/bgoodearl","html_url":"https://github.com/bgoodearl","followers_url":"https://api.github.com/users/bgoodearl/followers","following_url":"https://api.github.com/users/bgoodearl/following{/other_user}","gists_url":"https://api.github.com/users/bgoodearl/gists{/gist_id}","starred_url":"https://api.github.com/users/bgoodearl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgoodearl/subscriptions","organizations_url":"https://api.github.com/users/bgoodearl/orgs","repos_url":"https://api.github.com/users/bgoodearl/repos","events_url":"https://api.github.com/users/bgoodearl/events{/privacy}","received_events_url":"https://api.github.com/users/bgoodearl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":514908713,"node_id":"MDU6TGFiZWw1MTQ5MDg3MTM=","url":"https://api.github.com/repos/dotnet/efcore/labels/regression","name":"regression","color":"ff1fff","default":false,"description":null},{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1017558838,"node_id":"MDU6TGFiZWwxMDE3NTU4ODM4","url":"https://api.github.com/repos/dotnet/efcore/labels/Servicing-approved","name":"Servicing-approved","color":"048708","default":false,"description":""},{"id":1900942474,"node_id":"MDU6TGFiZWwxOTAwOTQyNDc0","url":"https://api.github.com/repos/dotnet/efcore/labels/area-migrations","name":"area-migrations","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/188","html_url":"https://github.com/dotnet/efcore/milestone/188","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/188/labels","id":10432910,"node_id":"MI_kwDOAPaMMs4AnzGO","number":188,"title":"8.0.3","description":null,"creator":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":22,"state":"closed","created_at":"2024-01-18T01:09:32Z","updated_at":"2024-04-09T08:41:20Z","due_on":null,"closed_at":"2024-04-09T08:41:20Z"},"comments":9,"created_at":"2024-01-05T19:11:19Z","updated_at":"2025-06-15T19:56:47Z","closed_at":"2024-02-07T12:57:46Z","author_association":"NONE","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## File a bug\r\n\r\nSee details in issue 32487\r\n[efcore/issues/32487](https://github.com/dotnet/efcore/issues/32487)\r\n\r\nWe've spent a fair bit of time trying to reproduce the issue with a cut-down sample, but have not been successful.\r\n\r\nA colleague has debugged into the EF code with our client project and found where the exception is being thrown.\r\n\r\nI created a test sample with enough entities to have the entity where the exception was thrown, but that sample does not fail.\r\n\r\nWe can share the new test sample with you and include information about where the client code is failing and the new sample is not failing, but do not want to make the new sample public.\r\n\r\nCode that's failing:\r\n```C#\r\nstatic DeleteBehavior DefaultDeleteBehavior(IConventionSkipNavigation conventionSkipNavigation)\r\n{\r\n\tif (!conventionSkipNavigation.ForeignKey.IsRequired)\r\n\t{\r\n\t\treturn DeleteBehavior.ClientSetNull;\r\n\t}\r\n\treturn DeleteBehavior.Cascade;\r\n}\r\n```\r\nthis throws the exception: conventionSkipNavigation.ForeignKey.IsRequired due to ForeignKey being null\r\n\r\nThis problem is a show-stopper for converting this client project to .NET 8.\r\n\r\n### Include provider and version information\r\n\r\nEF Core version: 8.0.0\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer\r\nTarget framework: .NET 8.0\r\nOperating system: Windows 10\r\nIDE: Visual Studio 2022 17.8.3\r\n","closed_by":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/32732/timeline","performed_via_github_app":null,"state_reason":"completed"}