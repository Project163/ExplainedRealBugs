{"url":"https://api.github.com/repos/dotnet/efcore/issues/32892","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/32892/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/32892/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/32892/events","html_url":"https://github.com/dotnet/efcore/issues/32892","id":2095494601,"node_id":"I_kwDOAPaMMs585rXJ","number":32892,"title":"System.NotSupportedException: The property 'X.Y' does not have a value set and no value generator is available for properties of type 'bool'.","user":{"login":"Krzem0","id":636186,"node_id":"MDQ6VXNlcjYzNjE4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/636186?v=4","gravatar_id":"","url":"https://api.github.com/users/Krzem0","html_url":"https://github.com/Krzem0","followers_url":"https://api.github.com/users/Krzem0/followers","following_url":"https://api.github.com/users/Krzem0/following{/other_user}","gists_url":"https://api.github.com/users/Krzem0/gists{/gist_id}","starred_url":"https://api.github.com/users/Krzem0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Krzem0/subscriptions","organizations_url":"https://api.github.com/users/Krzem0/orgs","repos_url":"https://api.github.com/users/Krzem0/repos","events_url":"https://api.github.com/users/Krzem0/events{/privacy}","received_events_url":"https://api.github.com/users/Krzem0/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":514908713,"node_id":"MDU6TGFiZWw1MTQ5MDg3MTM=","url":"https://api.github.com/repos/dotnet/efcore/labels/regression","name":"regression","color":"ff1fff","default":false,"description":null},{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1900977179,"node_id":"MDU6TGFiZWwxOTAwOTc3MTc5","url":"https://api.github.com/repos/dotnet/efcore/labels/area-scaffolding","name":"area-scaffolding","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/180","html_url":"https://github.com/dotnet/efcore/milestone/180","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/180/labels","id":9963267,"node_id":"MI_kwDOAPaMMs4AmAcD","number":180,"title":"9.0.0","description":null,"creator":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":339,"state":"closed","created_at":"2023-09-25T15:41:58Z","updated_at":"2025-04-01T18:19:15Z","due_on":null,"closed_at":"2024-11-14T11:54:05Z"},"comments":3,"created_at":"2024-01-23T08:15:45Z","updated_at":"2025-06-15T19:57:35Z","closed_at":"2024-04-02T08:49:53Z","author_association":"NONE","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello, \r\n\r\nPlease forgive me for copy paste. At the begining I've [reported it in EFCorePowerTools](https://github.com/ErikEJ/EFCorePowerTools/issues/2121). but it seems like this bug could be in Entity Framework Core.\r\n\r\nI came across this exception today.\r\n\r\nSystem.NotSupportedException: The property 'Join.PrimaryGroup' does not have a value set and no value generator is available for properties of type 'bool'. Either set a value for the property before adding the entity or configure a value generator for properties of type 'bool' in 'OnModelCreating'.\r\n\r\n### Technical details\r\n\r\n- EF Core Power Tools version: 2.6.72\r\n\r\n- Exact Visual Studio version: Microsoft Visual Studio Professional 2022 (64-bit) - 17.8.5\r\n\r\n- Database engine: SQL Server 2019\r\n\r\n- EF Core version in use: \r\nMicrosoft.EntityFrameworkCore.SqlServer 8.0.1\r\nMicrosoft.EntityFrameworkCore.SqlServer.NetTopologySuite 8.0.1\r\n\r\n### Steps to reproduce a bug\r\n\r\n**Create two tables:**\r\n```sql\r\nCREATE SCHEMA Testing;\r\nGO\r\n\r\nCREATE TABLE [Testing].[List](\r\n\t[Id] [uniqueidentifier] NOT NULL,\r\n\t[Description] [nvarchar](max) NULL,\r\n CONSTRAINT [PK_TestingList] PRIMARY KEY CLUSTERED \r\n(\r\n\t[Id] ASC\r\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]\r\n) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]\r\nGO\r\n\r\nALTER TABLE [Testing].[List] ADD  DEFAULT (newsequentialid()) FOR [Id]\r\nGO\r\n\r\nALTER TABLE [Testing].[List]  WITH CHECK ADD  CONSTRAINT [CK_ID] CHECK  (([Id]<>'00000000-0000-0000-0000-000000000000'))\r\nGO\r\n\r\nALTER TABLE [Testing].[List] CHECK CONSTRAINT [CK_ID]\r\nGO\r\n\r\n\r\nCREATE TABLE [Testing].[Joins](\r\n\t[TargetId] [uniqueidentifier] NOT NULL,\r\n\t[SourceId] [uniqueidentifier] NOT NULL,\r\n\t[PrimaryGroup] [bit] NOT NULL,\r\n CONSTRAINT [PK_Way] PRIMARY KEY CLUSTERED \r\n(\r\n\t[TargetId] ASC,\r\n\t[SourceId] ASC,\r\n\t[PrimaryGroup] ASC\r\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]\r\n) ON [PRIMARY]\r\nGO\r\n\r\nALTER TABLE [Testing].[Joins] ADD  DEFAULT ((1)) FOR [PrimaryGroup]\r\nGO\r\n```\r\n\r\n**Add some data to table List e.g.**\r\n```\r\nId\tDescription\r\n18C2810D-58B9-EE11-B82E-000C296039A5\tTest1\r\n19C2810D-58B9-EE11-B82E-000C296039A5\tTest2\r\n1AC2810D-58B9-EE11-B82E-000C296039A5\tTest3\r\n1BC2810D-58B9-EE11-B82E-000C296039A5\tTest4\r\n5B72CC13-58B9-EE11-B82E-000C296039A5\tTest5\r\n```\r\n**Scaffold db by Reverse Enginering in Powertools**\r\nefpt.config.json config:\r\n```json\r\n{\r\n   \"CodeGenerationMode\": 4,\r\n   \"ContextClassName\": \"TestContext\",\r\n   \"ContextNamespace\": null,\r\n   \"DefaultDacpacSchema\": null,\r\n   \"FilterSchemas\": false,\r\n   \"IncludeConnectionString\": false,\r\n   \"ModelNamespace\": null,\r\n   \"OutputContextPath\": null,\r\n   \"OutputPath\": \"Models\",\r\n   \"PreserveCasingWithRegex\": true,\r\n   \"ProjectRootNamespace\": \"DB\",\r\n   \"Schemas\": null,\r\n   \"SelectedHandlebarsLanguage\": 2,\r\n   \"SelectedToBeGenerated\": 0,\r\n   \"T4TemplatePath\": null,\r\n   \"Tables\": [\r\n      {\r\n         \"Name\": \"[Testing].[Joins]\",\r\n         \"ObjectType\": 0\r\n      },\r\n      {\r\n         \"Name\": \"[Testing].[List]\",\r\n         \"ObjectType\": 0\r\n      }\r\n   ],\r\n   \"UiHint\": \"win-sql\\\\mssqlserver2019.Test.dbo\",\r\n   \"UncountableWords\": null,\r\n   \"UseBoolPropertiesWithoutDefaultSql\": true,\r\n   \"UseDatabaseNames\": false,\r\n   \"UseDateOnlyTimeOnly\": false,\r\n   \"UseDbContextSplitting\": false,\r\n   \"UseDecimalDataAnnotationForSprocResult\": true,\r\n   \"UseFluentApiOnly\": true,\r\n   \"UseHandleBars\": false,\r\n   \"UseHierarchyId\": false,\r\n   \"UseInflector\": true,\r\n   \"UseLegacyPluralizer\": false,\r\n   \"UseManyToManyEntity\": true,\r\n   \"UseNoDefaultConstructor\": false,\r\n   \"UseNoNavigations\": false,\r\n   \"UseNoObjectFilter\": false,\r\n   \"UseNodaTime\": false,\r\n   \"UseNullableReferences\": false,\r\n   \"UseSchemaFolders\": true,\r\n   \"UseSchemaNamespaces\": false,\r\n   \"UseSpatial\": true,\r\n   \"UseT4\": false\r\n}\r\n```\r\n**Should get classes:**\r\n```C#\r\n// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>\r\n#nullable disable\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nnamespace DB.Models;\r\n\r\npublic partial class TestContext : DbContext\r\n{\r\n    public TestContext(DbContextOptions<TestContext> options)\r\n        : base(options)\r\n    {\r\n    }\r\n\r\n    public virtual DbSet<Join> Joins { get; set; }\r\n\r\n    public virtual DbSet<List> Lists { get; set; }\r\n\r\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\r\n    {\r\n        modelBuilder.Entity<Join>(entity =>\r\n        {\r\n            entity.HasKey(e => new { e.TargetId, e.SourceId, e.PrimaryGroup }).HasName(\"PK_Way\");\r\n\r\n            entity.ToTable(\"Joins\", \"Testing\");\r\n\r\n            entity.Property(e => e.PrimaryGroup).HasDefaultValue(true);\r\n        });\r\n\r\n        modelBuilder.Entity<List>(entity =>\r\n        {\r\n            entity.HasKey(e => e.Id).HasName(\"PK_TestingList\");\r\n\r\n            entity.ToTable(\"List\", \"Testing\");\r\n\r\n            entity.Property(e => e.Id).HasDefaultValueSql(\"(newsequentialid())\");\r\n        });\r\n\r\n        OnModelCreatingPartial(modelBuilder);\r\n    }\r\n\r\n    partial void OnModelCreatingPartial(ModelBuilder modelBuilder);\r\n}\r\n\r\n// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>\r\n#nullable disable\r\nusing System;\r\nusing System.Collections.Generic;\r\n\r\nnamespace DB.Models;\r\n\r\npublic partial class List\r\n{\r\n    public Guid Id { get; set; }\r\n\r\n    public string Description { get; set; }\r\n}\r\n\r\n// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>\r\n#nullable disable\r\nusing System;\r\nusing System.Collections.Generic;\r\n\r\nnamespace DB.Models;\r\n\r\npublic partial class Join\r\n{\r\n    public Guid TargetId { get; set; }\r\n\r\n    public Guid SourceId { get; set; }\r\n\r\n    public bool PrimaryGroup { get; set; }\r\n}\r\n```\r\n**Create simple C# console app:**\r\n```C#\r\nusing DB.Models;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\ntry\r\n{\r\n    var connectionString = \"your connection string here\";\r\n    var optionsBuilder = new DbContextOptionsBuilder<TestContext>();\r\n    optionsBuilder.UseSqlServer(connectionString);\r\n    using var db = new TestContext(optionsBuilder.Options);\r\n\r\n    var list = db.Lists.ToList();\r\n    foreach (var listItem in list)\r\n        Console.WriteLine($\"{listItem.Id} : {listItem.Description}\");\r\n\r\n    var join = new Join { SourceId = list[0].Id, TargetId = list[1].Id, PrimaryGroup = true };\r\n    db.Joins.Add(join);\r\n\r\n    db.SaveChanges();\r\n}\r\ncatch (Exception ex)\r\n{\r\n    Console.WriteLine(ex);\r\n}\r\n```\r\n\r\n\r\nSaveChanges throws exception mentioned at top of this post.\r\n\r\nMeaby bool/bit column in primary key can be guilty and should be handled differently?\r\n\r\nBest regards Marcin\r\n","closed_by":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/32892/timeline","performed_via_github_app":null,"state_reason":"completed"}