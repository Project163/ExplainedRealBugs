{"url":"https://api.github.com/repos/dotnet/efcore/issues/33748","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/33748/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/33748/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/33748/events","html_url":"https://github.com/dotnet/efcore/issues/33748","id":2303770615,"node_id":"I_kwDOAPaMMs6JUL_3","number":33748,"title":"Misleading exception text: FromSqlRaw returns “missing column” error for wrong column","user":{"login":"simonmckenzie","id":17579442,"node_id":"MDQ6VXNlcjE3NTc5NDQy","avatar_url":"https://avatars.githubusercontent.com/u/17579442?v=4","gravatar_id":"","url":"https://api.github.com/users/simonmckenzie","html_url":"https://github.com/simonmckenzie","followers_url":"https://api.github.com/users/simonmckenzie/followers","following_url":"https://api.github.com/users/simonmckenzie/following{/other_user}","gists_url":"https://api.github.com/users/simonmckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/simonmckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonmckenzie/subscriptions","organizations_url":"https://api.github.com/users/simonmckenzie/orgs","repos_url":"https://api.github.com/users/simonmckenzie/repos","events_url":"https://api.github.com/users/simonmckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/simonmckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":2402623482,"node_id":"MDU6TGFiZWwyNDAyNjIzNDgy","url":"https://api.github.com/repos/dotnet/efcore/labels/community-contribution","name":"community-contribution","color":"004caa","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/180","html_url":"https://github.com/dotnet/efcore/milestone/180","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/180/labels","id":9963267,"node_id":"MI_kwDOAPaMMs4AmAcD","number":180,"title":"9.0.0","description":null,"creator":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":339,"state":"closed","created_at":"2023-09-25T15:41:58Z","updated_at":"2025-04-01T18:19:15Z","due_on":null,"closed_at":"2024-11-14T11:54:05Z"},"comments":8,"created_at":"2024-05-18T01:46:59Z","updated_at":"2024-10-12T07:40:48Z","closed_at":"2024-06-12T12:21:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When using FromSqlRaw, selecting insufficient columns, and one of the correct columns varies in case from the entity's field name, the exception thrown will indicate that the miscased column is missing, even though it's present.\r\n\r\nGiven this entity class:\r\n\r\n```csharp\r\n[Keyless]\r\npublic class TwoFieldEntity\r\n{\r\n    public string FirstProperty { get; set; }\r\n    public string SecondProperty { get; set; }\r\n}\r\n```\r\n \r\n... and this query:\r\n\r\n```csharp\r\nawait context\r\n    .Set<TwoFieldEntity>()\r\n    .FromSqlRaw(\"select 'x' FirstPROPERTY\")\r\n    .ToListAsync();\r\n```\r\n \r\nAn exception will be thrown (as expected):\r\n\r\n`System.InvalidOperationException: 'The required column 'FirstProperty' was not present in the results of a 'FromSql' operation.'`\r\n\r\nThe exception message is **incorrect**, as that property is _not_ missing. It's the second field (`SecondProperty`) that’s missing.\r\n\r\n_Note that EF does not mind about mismatched case in general, i.e. this query works fine:_\r\n\r\n```csharp\r\nawait context\r\n    .Set<TwoFieldEntity>()\r\n    .FromSqlRaw(\"select 'x' FirstPROPERTY, 'y' SecondPROPERTY\")\r\n    .ToListAsync();\r\n```\r\n\r\nEF Core version: 8.0.4\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer\r\nTarget framework: .NET 8.0\r\nOperating system: Windows 10/11\r\nIDE: Visual Studio 2022 17.9.7)\r\n","closed_by":{"login":"cincuranet","id":4540597,"node_id":"MDQ6VXNlcjQ1NDA1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/4540597?v=4","gravatar_id":"","url":"https://api.github.com/users/cincuranet","html_url":"https://github.com/cincuranet","followers_url":"https://api.github.com/users/cincuranet/followers","following_url":"https://api.github.com/users/cincuranet/following{/other_user}","gists_url":"https://api.github.com/users/cincuranet/gists{/gist_id}","starred_url":"https://api.github.com/users/cincuranet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cincuranet/subscriptions","organizations_url":"https://api.github.com/users/cincuranet/orgs","repos_url":"https://api.github.com/users/cincuranet/repos","events_url":"https://api.github.com/users/cincuranet/events{/privacy}","received_events_url":"https://api.github.com/users/cincuranet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/33748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/33748/timeline","performed_via_github_app":null,"state_reason":"completed"}