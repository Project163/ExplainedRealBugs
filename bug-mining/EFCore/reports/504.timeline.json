[{"id":13589722786,"node_id":"LE_lADOAPaMMs6QTBVkzwAAAAMqArai","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13589722786","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-20T13:47:52Z","label":{"name":"area-query","color":"32b37b"},"performed_via_github_app":null},{"id":13589722788,"node_id":"LE_lADOAPaMMs6QTBVkzwAAAAMqArak","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13589722788","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-20T13:47:52Z","label":{"name":"area-sqlserver","color":"32b37b"},"performed_via_github_app":null},{"id":13589722790,"node_id":"LE_lADOAPaMMs6QTBVkzwAAAAMqAram","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13589722790","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-20T13:47:52Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"id":13589722793,"node_id":"LE_lADOAPaMMs6QTBVkzwAAAAMqArap","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13589722793","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-20T13:47:52Z","label":{"name":"type-enhancement","color":"bfe5bf"},"performed_via_github_app":null},{"id":13589722797,"node_id":"MIE_lADOAPaMMs6QTBVkzwAAAAMqArat","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13589722797","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-07-20T13:47:52Z","milestone":{"title":"Backlog"},"performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:48:23Z","updated_at":"2024-07-20T13:48:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34246","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34246/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34246/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34246/events","html_url":"https://github.com/dotnet/efcore/issues/34246","id":2417530720,"node_id":"I_kwDOAPaMMs6QGJdg","number":34246,"title":"SQL Error: Cannot perform an aggregate function on an expression containing an aggregate or a subquery.","user":{"login":"RezaRahmatzadeh","id":171170801,"node_id":"U_kgDOCjPb8Q","avatar_url":"https://avatars.githubusercontent.com/u/171170801?v=4","gravatar_id":"","url":"https://api.github.com/users/RezaRahmatzadeh","html_url":"https://github.com/RezaRahmatzadeh","followers_url":"https://api.github.com/users/RezaRahmatzadeh/followers","following_url":"https://api.github.com/users/RezaRahmatzadeh/following{/other_user}","gists_url":"https://api.github.com/users/RezaRahmatzadeh/gists{/gist_id}","starred_url":"https://api.github.com/users/RezaRahmatzadeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RezaRahmatzadeh/subscriptions","organizations_url":"https://api.github.com/users/RezaRahmatzadeh/orgs","repos_url":"https://api.github.com/users/RezaRahmatzadeh/repos","events_url":"https://api.github.com/users/RezaRahmatzadeh/events{/privacy}","received_events_url":"https://api.github.com/users/RezaRahmatzadeh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-07-18T22:46:30Z","updated_at":"2025-06-16T08:47:27Z","closed_at":"2024-07-20T13:48:23Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"When I ran this query against my database, I encountered an error due to the aggregations in the final Select() projection. I need to return an IQueryable<>, and I want to avoid using AsEnumerable() to switch to in-memory processing, even though placing AsEnumerable() before the last Select() solves the problem.\r\n\r\nI'm looking for a way to run the entire query on the database side. It's worth mentioning that this query worked properly in a .NET Framework project. After migrating to the latest .NET version, I encountered this error. Based on my research, the issue arises because older EF versions automatically switched to in-memory processing, which no longer happens in the latest version. This change is beneficial as it makes developers more aware of what's happening under the hood.\r\n\r\nHere is the query. Could you help me figure out how to run the entire query on the database side without encountering SQL errors?\r\n\r\n```CSharp\r\nvar avgGrid = dbContext.TableName.Select(z => new DTO()\r\n{\r\n    IncidentDate = z.IncidentDate,\r\n    ReportReceivedDate = z.ReportReceived,\r\n    InitiatedDate = z.InitiatedDate,\r\n    FinalizedDate = z.FinalizedDate,\r\n    FirstReserveDate = dbContext.Reserves.Where(x => x.ClaimId == z.ClaimId && x.ReserveType == \"XYZ\").OrderBy(x => x.TransactionDate).FirstOrDefault().TransactionDate,\r\n    FirstPaymentDate = dbContext.Reserves.Where(x => x.ClaimId == z.ClaimId && (x.ReserveType == \"ABC\" || x.ReserveType == \"EFG\")).OrderBy(x => x.TransactionDate).FirstOrDefault().TransactionDate,\r\n    IncidentToReceivedDays = 0,\r\n    ReceivedToInitiatedDays = 0,\r\n    InitiatedToFirstReserveDays = 0,\r\n    InitiatedToFirstPaymentDays = 0,\r\n    InitiatedToFinalizedDays = 0,\r\n    ClaimIdentifier = z.ClaimIdentifier,\r\n    Category = z.UnderwritingPeriod == null ? \"\" :\r\n                    z.UnderwritingPeriod.PolicyNumber1 != null ? \"Type1\" :\r\n                    z.UnderwritingPeriod.PolicyNumber2 != null ? \"Type2\" :\r\n                    z.UnderwritingPeriod.PolicyNumber3 != null ? \"Type3\" : \"\",\r\n    PolicyIdentifier = z.UnderwritingPeriod == null ? \"\" : z.UnderwritingPeriod.Policy.PolicyIdentifier,\r\n\r\n}).Select(z => new ClaimsReactionsReportDto()\r\n{\r\n    IncidentDate = z.IncidentDate,\r\n    ReportReceivedDate = z.ReportReceivedDate,\r\n    InitiatedDate = z.InitiatedDate,\r\n    FinalizedDate = z.FinalizedDate,\r\n    FirstReserveDate = z.FirstReserveDate,\r\n    FirstPaymentDate = z.FirstPaymentDate,\r\n    IncidentToReceivedDays = (z.IncidentDate.HasValue && z.ReportReceivedDate.HasValue) ? EF.Functions.DateDiffDay(z.IncidentDate, z.ReportReceivedDate).Value : (int?)null,\r\n    ReceivedToInitiatedDays = (z.ReportReceivedDate.HasValue && z.InitiatedDate.HasValue) ? EF.Functions.DateDiffDay(z.ReportReceivedDate, z.InitiatedDate).Value : (int?)null,\r\n    InitiatedToFirstReserveDays = (z.InitiatedDate.HasValue && z.FirstReserveDate.HasValue) ? EF.Functions.DateDiffDay(z.InitiatedDate, z.FirstReserveDate).Value : (int?)null,\r\n    InitiatedToFirstPaymentDays = (z.InitiatedDate.HasValue && z.FirstPaymentDate.HasValue) ? EF.Functions.DateDiffDay(z.InitiatedDate, z.FirstPaymentDate).Value : (int?)null,\r\n    InitiatedToFinalizedDays = (z.InitiatedDate.HasValue && z.FinalizedDate.HasValue) ? EF.Functions.DateDiffDay(z.InitiatedDate, z.FinalizedDate).Value : (int?)null,\r\n    ClaimIdentifier = z.ClaimIdentifier,\r\n    Category = z.Category,\r\n    PolicyIdentifier = z.PolicyIdentifier,\r\n}).GroupBy(y => new { y.IncidentDate.Value.Year, y.IncidentDate.Value.Month })\r\n.Select(e => new ClaimsReactionsAVGReportDto()\r\n{\r\n    IncidentToReceivedDaysAVG = e.Average(x => x.IncidentToReceivedDays),\r\n    ReceivedToInitiatedDaysAVG = e.Average(x => x.ReceivedToInitiatedDays),\r\n    InitiatedToFirstReserveDaysAVG = e.Average(x => x.InitiatedToFirstReserveDays),\r\n    InitiatedToFirstPaymentDaysAVG = e.Average(x => x.InitiatedToFirstPaymentDays),\r\n    InitiatedToFinalizedDaysAVG = e.Average(x => x.InitiatedToFinalizedDays),\r\n    Year = e.Key.Year,\r\n    Month = e.Key.Month,\r\n    DateString = EF.Functions.DateTimeFromParts(e.Key.Year, e.Key.Month, 3, 1, 1, 1, 0),\r\n});\r\nvar test = avgGrid.ToList();//error here, this is just for test and In real world scenario it will return up to the UI Grid as Queryable object\r\n```","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34246/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:49:13Z","updated_at":"2024-07-20T13:49:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/28238","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/28238/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/28238/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/28238/events","html_url":"https://github.com/dotnet/efcore/issues/28238","id":1272089114,"node_id":"I_kwDOAPaMMs5L0ooa","number":28238,"title":"Sum followed by a group by: \"Cannot perform an aggregate function on an expression containing an aggregate or a subquery. \"","user":{"login":"cts-tradeit","id":71645109,"node_id":"MDQ6VXNlcjcxNjQ1MTA5","avatar_url":"https://avatars.githubusercontent.com/u/71645109?v=4","gravatar_id":"","url":"https://api.github.com/users/cts-tradeit","html_url":"https://github.com/cts-tradeit","followers_url":"https://api.github.com/users/cts-tradeit/followers","following_url":"https://api.github.com/users/cts-tradeit/following{/other_user}","gists_url":"https://api.github.com/users/cts-tradeit/gists{/gist_id}","starred_url":"https://api.github.com/users/cts-tradeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cts-tradeit/subscriptions","organizations_url":"https://api.github.com/users/cts-tradeit/orgs","repos_url":"https://api.github.com/users/cts-tradeit/repos","events_url":"https://api.github.com/users/cts-tradeit/events{/privacy}","received_events_url":"https://api.github.com/users/cts-tradeit/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":5092427335,"node_id":"LA_kwDOAPaMMs8AAAABL4hGRw","url":"https://api.github.com/repos/dotnet/efcore/labels/area-groupby","name":"area-groupby","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-06-15T11:25:52Z","updated_at":"2025-06-16T09:07:10Z","closed_at":"2024-07-20T13:49:24Z","author_association":"NONE","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This queryable:\r\n```C#\r\nIQueryable<Holding> holdings = dbContext\r\n            .Set<Position>()\r\n            .Join(contractIds, pos => pos.ContractId, contractId => contractId, (pos, contractId) => pos)\r\n            .Select(pos => new\r\n            {\r\n                pos.ContractId,\r\n                pos.AccountId,\r\n                pos.InstrumentId,\r\n                pos.BalanceTypeId,\r\n                pos.BalanceTimeType,\r\n                pos.Currency,\r\n                Quantity = pos.Quantity - dbContext\r\n                    .Set<Movement>()\r\n                    .Where(movement => movement.AccountId == pos.AccountId &&\r\n                                       movement.InstrumentId == pos.InstrumentId &&\r\n                                       movement.BalanceTypeId == pos.BalanceTypeId &&\r\n                                       movement.BalanceTimeType == pos.BalanceTimeType &&\r\n                                       ((movement.Currency == null && pos.Currency == null) && (movement.Currency == pos.Currency)) &&\r\n                                       movement.MovementDate.Date > targetDateTime.Date)\r\n                    .Sum(movement => movement.Quantity),\r\n            })\r\n            .GroupBy(pos => new { pos.ContractId, pos.AccountId, pos.InstrumentId, pos.BalanceTypeId, pos.Currency })\r\n            .Select(pos => new Holding\r\n            {\r\n                ContractId = pos.Key.ContractId,\r\n                AccountId = pos.Key.AccountId,\r\n                InstrumentId = pos.Key.InstrumentId,\r\n                BalanceTypeId = pos.Key.BalanceTypeId,\r\n                Currency = pos.Key.Currency,\r\n                TradedQuantity = pos.Sum(subPos => subPos.BalanceTimeType == tradeDateBalanceTimeType ? subPos.Quantity : 0),\r\n                SettledQuantity = pos.Sum(subPos => subPos.BalanceTimeType == settlementDateBalanceTimeType ? subPos.Quantity : 0),\r\n                CollateralInQuantity = pos.Sum(subPos => subPos.BalanceTimeType == collateralBalanceTimeType ? subPos.Quantity : 0),\r\n            });\r\n```\r\nProduces SQL query which is invalid:\r\n```\r\n[Parameters=[@__tradeDateBalanceTimeType_4='?' (DbType = Int32), @__targetDateTime_Date_3='?' (DbType = DateTime2), @__settlementDateBalanceTimeType_5='?' (DbType = Int32), @__collateralBalanceTimeType_6='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__targetDate_1='?' (DbType = Date), @__targetDate_2='?' (DbType = Date)], CommandType='Text', CommandTimeout='30']\r\nSELECT [p].[ContractId], [p].[AccountId], [p].[InstrumentId], [p].[BalanceTypeId], [p].[Currency], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__tradeDateBalanceTimeType_4 THEN [p].[Quantity] - (\r\n        SELECT COALESCE(SUM([m].[Quantity]), 0.0)\r\n        FROM [CTS CustodyWeb IMC].[imc].[Movements] AS [m]\r\n        WHERE ((((([m].[AccountId] = [p].[AccountId]) AND ([m].[InstrumentId] = [p].[InstrumentId])) AND ([m].[BalanceTypeId] = [p].[BalanceTypeId])) AND ([m].[BalanceTimeType] = [p].[BalanceTimeType])) AND ((([m].[Currency] IS NULL) AND ([p].[Currency] IS NULL)) AND (([m].[Currency] = [p].[Currency]) OR (([m].[Currency] IS NULL) AND ([p].[Currency] IS NULL))))) AND (CONVERT(date, [m].[MovementDate]) > @__targetDateTime_Date_3))\r\n    ELSE 0.0\r\nEND), 0.0) AS [TradedQuantity], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__settlementDateBalanceTimeType_5 THEN [p].[Quantity] - (\r\n        SELECT COALESCE(SUM([m0].[Quantity]), 0.0)\r\n        FROM [CTS CustodyWeb IMC].[imc].[Movements] AS [m0]\r\n        WHERE ((((([m0].[AccountId] = [p].[AccountId]) AND ([m0].[InstrumentId] = [p].[InstrumentId])) AND ([m0].[BalanceTypeId] = [p].[BalanceTypeId])) AND ([m0].[BalanceTimeType] = [p].[BalanceTimeType])) AND ((([m0].[Currency] IS NULL) AND ([p].[Currency] IS NULL)) AND (([m0].[Currency] = [p].[Currency]) OR (([m0].[Currency] IS NULL) AND ([p].[Currency] IS NULL))))) AND (CONVERT(date, [m0].[MovementDate]) > @__targetDateTime_Date_3))\r\n    ELSE 0.0\r\nEND), 0.0) AS [SettledQuantity], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__collateralBalanceTimeType_6 THEN [p].[Quantity] - (\r\n        SELECT COALESCE(SUM([m1].[Quantity]), 0.0)\r\n        FROM [CTS CustodyWeb IMC].[imc].[Movements] AS [m1]\r\n        WHERE ((((([m1].[AccountId] = [p].[AccountId]) AND ([m1].[InstrumentId] = [p].[InstrumentId])) AND ([m1].[BalanceTypeId] = [p].[BalanceTypeId])) AND ([m1].[BalanceTimeType] = [p].[BalanceTimeType])) AND ((([m1].[Currency] IS NULL) AND ([p].[Currency] IS NULL)) AND (([m1].[Currency] = [p].[Currency]) OR (([m1].[Currency] IS NULL) AND ([p].[Currency] IS NULL))))) AND (CONVERT(date, [m1].[MovementDate]) > @__targetDateTime_Date_3))\r\n    ELSE 0.0\r\nEND), 0.0) AS [CollateralInQuantity]\r\nFROM [CTS CustodyWeb IMC].[imc].[Positions] AS [p]\r\nINNER JOIN (\r\n    SELECT [u].[ContractId]\r\n    FROM [CTS CustodyWeb].[cw].[UserContracts] AS [u]\r\n    WHERE (([u].[UserId] = @__userId_0) AND ([u].[ValidFrom] <= @__targetDate_1)) AND (([u].[ValidTo] IS NULL) OR (@__targetDate_2 <= [u].[ValidTo]))\r\n) AS [t] ON [p].[ContractId] = [t].[ContractId]\r\nGROUP BY [p].[ContractId], [p].[AccountId], [p].[InstrumentId], [p].[BalanceTypeId], [p].[Currency]\r\n```\r\nHowever if we remove:\r\n```\r\nQuantity = pos.Quantity - dbContext\r\n                    .Set<Movement>()\r\n                    .Where(movement => movement.AccountId == pos.AccountId &&\r\n                                       movement.InstrumentId == pos.InstrumentId &&\r\n                                       movement.BalanceTypeId == pos.BalanceTypeId &&\r\n                                       movement.BalanceTimeType == pos.BalanceTimeType &&\r\n                                       ((movement.Currency == null && pos.Currency == null) && (movement.Currency == pos.Currency)) &&\r\n                                       movement.MovementDate.Date > targetDateTime.Date)\r\n                    .Sum(movement => movement.Quantity),\r\n```\r\nin the Select before GroupBy, we get:\r\n```\r\n[Parameters=[@__tradeDateBalanceTimeType_3='?' (DbType = Int32), @__settlementDateBalanceTimeType_4='?' (DbType = Int32), @__collateralBalanceTimeType_5='?' (DbType = Int32), @__userId_0='?' (DbType = Int32), @__targetDate_1='?' (DbType = Date), @__targetDate_2='?' (DbType = Date)], CommandType='Text', CommandTimeout='30']\r\nSELECT [p].[ContractId], [p].[AccountId], [p].[InstrumentId], [p].[BalanceTypeId], [p].[Currency], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__tradeDateBalanceTimeType_3 THEN [p].[Quantity]\r\n    ELSE 0.0\r\nEND), 0.0) AS [TradedQuantity], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__settlementDateBalanceTimeType_4 THEN [p].[Quantity]\r\n    ELSE 0.0\r\nEND), 0.0) AS [SettledQuantity], COALESCE(SUM(CASE\r\n    WHEN [p].[BalanceTimeType] = @__collateralBalanceTimeType_5 THEN [p].[Quantity]\r\n    ELSE 0.0\r\nEND), 0.0) AS [CollateralInQuantity]\r\nFROM [CTS CustodyWeb IMC].[imc].[Positions] AS [p]\r\nINNER JOIN (\r\n    SELECT [u].[ContractId]\r\n    FROM [CTS CustodyWeb].[cw].[UserContracts] AS [u]\r\n    WHERE (([u].[UserId] = @__userId_0) AND ([u].[ValidFrom] <= @__targetDate_1)) AND (([u].[ValidTo] IS NULL) OR (@__targetDate_2 <= [u].[ValidTo]))\r\n) AS [t] ON [p].[ContractId] = [t].[ContractId]\r\nGROUP BY [p].[ContractId], [p].[AccountId], [p].[InstrumentId], [p].[BalanceTypeId], [p].[Currency]\r\n```\r\n\r\nIt seems that the first Select is not used as sub-query but rather included within the SUMs from second SELECT (after .GroupBy()) which results in SUM(SELECT (Sum(...))).\r\n\r\nEFC: 6.0.5\r\nEFC.SqlServer: 6.0.5","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/28238/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/28238/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:50:39Z","updated_at":"2024-07-20T13:50:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/30173","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/30173/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/30173/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/30173/events","html_url":"https://github.com/dotnet/efcore/issues/30173","id":1561449656,"node_id":"I_kwDOAPaMMs5dEdS4","number":30173,"title":"Improve GroupBy support","user":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":4880995042,"node_id":"LA_kwDOAPaMMs8AAAABIu4S4g","url":"https://api.github.com/repos/dotnet/efcore/labels/composite-issue","name":"composite-issue","color":"c6415a","default":false,"description":"A grouping of multiple related issues into one issue"},{"id":5092427335,"node_id":"LA_kwDOAPaMMs8AAAABL4hGRw","url":"https://api.github.com/repos/dotnet/efcore/labels/area-groupby","name":"area-groupby","color":"32b37b","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/2","html_url":"https://github.com/dotnet/efcore/milestone/2","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/2/labels","id":648040,"node_id":"MDk6TWlsZXN0b25lNjQ4MDQw","number":2,"title":"Backlog","description":"Issues that have been approved but are not scheduled a specific release.","creator":{"login":"bricelam","id":1226749,"node_id":"MDQ6VXNlcjEyMjY3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1226749?v=4","gravatar_id":"","url":"https://api.github.com/users/bricelam","html_url":"https://github.com/bricelam","followers_url":"https://api.github.com/users/bricelam/followers","following_url":"https://api.github.com/users/bricelam/following{/other_user}","gists_url":"https://api.github.com/users/bricelam/gists{/gist_id}","starred_url":"https://api.github.com/users/bricelam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bricelam/subscriptions","organizations_url":"https://api.github.com/users/bricelam/orgs","repos_url":"https://api.github.com/users/bricelam/repos","events_url":"https://api.github.com/users/bricelam/events{/privacy}","received_events_url":"https://api.github.com/users/bricelam/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":2157,"closed_issues":10,"state":"open","created_at":"2014-05-03T18:58:28Z","updated_at":"2025-11-07T08:33:50Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2023-01-29T20:40:03Z","updated_at":"2025-06-15T18:59:07Z","closed_at":null,"author_association":"CONTRIBUTOR","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This is a grouping of related issues. Feel free to vote (ðŸ‘) for this issue to indicate that this is an area that you think we should spend time on, but consider also voting for individual issues for things you consider especially important.\n\n---\n\nThis is a composite issue grouping together all remaining (as of 7.0) issues still remaining for `GroupBy` translation.\n\n### Bugs\n\n- [ ] #20040\n- [x] #26016\n- [x] #26104\n- [ ] #26715\n- [ ] #26748\n- [ ] #27130\n- [ ] #27480\n- [ ] #28125\n- [ ] #28258\n- [ ] #29240\n- [ ] #29344\n- [ ] #29593\n- [ ] #30012\n- [ ] #30052\n- [ ] #30113\n- [ ] #31675\n- [x] #32014\n- [ ] #30173\n\n### Enhancements\n\n- [ ] #12747\n- [ ] #13393\n- [ ] #17313\n- [ ] #17673\n- [ ] #17761\n- [ ] #18923\n- [ ] #20887\n- [ ] #21965\n- [ ] #23206\n- [ ] #23650\n- [ ] #24106\n- [ ] #24452\n- [x] #25009\n- [ ] #26077\n- [ ] #26078\n- [ ] #26753\n- [ ] #26940\n- [ ] #27077\n- [ ] #27133\n- [ ] #27470\n- [ ] #27933\n- [ ] #27953\n- [ ] #28002\n- [x] #34256\n- [ ] #28525\n- [ ] #28622\n- [ ] #28977\n- [ ] #29011\n- [ ] #29013\n- [ ] #29014\n- [ ] #29018\n- [ ] #29171\n- [ ] #29287\n- [ ] #29670\n- [ ] #30025\n- [ ] #35991","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/30173/reactions","total_count":97,"+1":97,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/30173/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:51:11Z","updated_at":"2024-07-20T13:51:11Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/20559","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/20559/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/20559/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/20559/events","html_url":"https://github.com/dotnet/efcore/issues/20559","id":595994581,"node_id":"MDU6SXNzdWU1OTU5OTQ1ODE=","number":20559,"title":"Sum function - cannot perform an aggregate function on an expression containing an aggregate or a subquery","user":{"login":"danghyan","id":40120219,"node_id":"MDQ6VXNlcjQwMTIwMjE5","avatar_url":"https://avatars.githubusercontent.com/u/40120219?v=4","gravatar_id":"","url":"https://api.github.com/users/danghyan","html_url":"https://github.com/danghyan","followers_url":"https://api.github.com/users/danghyan/followers","following_url":"https://api.github.com/users/danghyan/following{/other_user}","gists_url":"https://api.github.com/users/danghyan/gists{/gist_id}","starred_url":"https://api.github.com/users/danghyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danghyan/subscriptions","organizations_url":"https://api.github.com/users/danghyan/orgs","repos_url":"https://api.github.com/users/danghyan/repos","events_url":"https://api.github.com/users/danghyan/events{/privacy}","received_events_url":"https://api.github.com/users/danghyan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-04-07T16:23:04Z","updated_at":"2025-06-16T09:31:04Z","closed_at":"2024-07-20T13:51:11Z","author_association":"NONE","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I transferred my models and code from the old .net to the new .net core. The same code works there and does not work here.\r\n\r\n``` c#\r\ndb.Lecture.Where(t => t.CourseId == id && t.isActive == true && t.ChapterGrpoup.Any(cg => cg.Chapter.Any(c => c.PerLevel >= Perlevel && c.isActive == true && c.isInnerPortal) && cg.isActive == true))\r\n  .Select(x => new\r\n  {\r\n\t  id = x.LecId,\r\n\t  x.Name,\r\n\t  x.Description,\r\n\t  x.Image,\r\n\t  nextlevel = 0,\r\n\t  BackCourseId = id,\r\n\t  access = true,\r\n\t  NotReadCount = (int?)x.ChapterGrpoup.Sum(cg => cg.Chapter.Count(e => e.EmployeeChapters.Where(r => r.EmployeeId == EmployeeId && r.dtEnd != null).Count() == 0 && e.ChapterGrpoup.IsNeed && e.PerLevel >= Perlevel && e.isActive == true && e.isInnerPortal))\r\n  }).ToList(); \r\n```\r\n\r\nThe problem is in NotReadCount param.  For verification, I highlighted this part of the code:\r\n```sql\r\n var test = (int?)db.ChapterGrpoup.Sum(cg => cg.Chapter.Count(e => e.EmployeeChapters.Where(r => r.EmployeeId == EmployeeId && r.dtEnd != null).Count() == 0 && e.ChapterGrpoup.IsNeed && e.PerLevel >= Perlevel && e.isActive == true && e.isInnerPortal))\r\n```\r\n\r\nThis efcore generate this:\r\n```sql\r\nSELECT SUM((\r\n    SELECT COUNT(*)\r\n    FROM [Academy].[CourseChapter] AS [c]\r\n    LEFT JOIN [Academy].[CourseChapterGrpoup] AS [c0] ON [c].[ChaptersGroupId] = [c0].[ChaptersGroupId]\r\n    WHERE ([c1].[ChaptersGroupId] = [c].[ChaptersGroupId]) AND ((((((\r\n        SELECT COUNT(*)\r\n        FROM [Academy].[EmployeeChapters] AS [e]\r\n        WHERE ([c].[ChapId] = [e].[ChapId]) AND (([e].[EmployeeId] = @__EmployeeId_0) AND [e].[dtEnd] IS NOT NULL)) = 0) AND ([c0].[IsNeed] = CAST(1 AS bit))) AND ([c].[PerLevel] >= @__Perlevel_1)) AND ([c].[isActive] = CAST(1 AS bit))) AND ([c].[isInnerPortal] = CAST(1 AS bit)))))\r\nFROM [Academy].[CourseChapterGrpoup] AS [c1]\r\n```\r\n\r\n\r\n**Technical information**\r\n.net Core: 3.1\r\nEfCore: 3.1.3\r\n\r\nEroor(sql):\r\ncannot perform an aggregate function on an expression containing an aggregate or a subquery","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/20559/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/20559/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:53:18Z","updated_at":"2024-07-20T13:53:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34173","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34173/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34173/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34173/events","html_url":"https://github.com/dotnet/efcore/issues/34173","id":2393456765,"node_id":"I_kwDOAPaMMs6OqUB9","number":34173,"title":"Supporting OUTER APPLY for aggregate queries","user":{"login":"Erichero","id":7926336,"node_id":"MDQ6VXNlcjc5MjYzMzY=","avatar_url":"https://avatars.githubusercontent.com/u/7926336?v=4","gravatar_id":"","url":"https://api.github.com/users/Erichero","html_url":"https://github.com/Erichero","followers_url":"https://api.github.com/users/Erichero/followers","following_url":"https://api.github.com/users/Erichero/following{/other_user}","gists_url":"https://api.github.com/users/Erichero/gists{/gist_id}","starred_url":"https://api.github.com/users/Erichero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Erichero/subscriptions","organizations_url":"https://api.github.com/users/Erichero/orgs","repos_url":"https://api.github.com/users/Erichero/repos","events_url":"https://api.github.com/users/Erichero/events{/privacy}","received_events_url":"https://api.github.com/users/Erichero/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-07-06T07:40:24Z","updated_at":"2025-06-16T08:47:38Z","closed_at":"2024-07-20T13:53:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I have posted a question on StackOverflow here:\r\nhttps://stackoverflow.com/questions/78126110/ef-core-cannot-perform-an-aggregate-function-on-an-expression-containing-an-agg\r\n\r\nThe problem is that I have a reporting query that was working in EF6 and EF would translate it to use OUTER APPLY, but in EF Core 7.0.5 I get the error \"Cannot perform an aggregate function on an expression containing an aggregate or a subquery\". I see EF Core 8 still has the issue too.\r\n\r\nI would like to know if there is a workaround or some way to get EF Core to translate this correctly to use OUTER APPLY, or if this is not supported then when it will come onto the roadmap. Thank you.","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34173/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:53:54Z","updated_at":"2024-07-20T13:53:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32014","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/32014/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/32014/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/32014/events","html_url":"https://github.com/dotnet/efcore/issues/32014","id":1935966174,"node_id":"I_kwDOAPaMMs5zZH_e","number":32014,"title":"GroupBy() isn't working as expected unless I first load the individual items into memory","user":{"login":"SoftCircuits","id":3191331,"node_id":"MDQ6VXNlcjMxOTEzMzE=","avatar_url":"https://avatars.githubusercontent.com/u/3191331?v=4","gravatar_id":"","url":"https://api.github.com/users/SoftCircuits","html_url":"https://github.com/SoftCircuits","followers_url":"https://api.github.com/users/SoftCircuits/followers","following_url":"https://api.github.com/users/SoftCircuits/following{/other_user}","gists_url":"https://api.github.com/users/SoftCircuits/gists{/gist_id}","starred_url":"https://api.github.com/users/SoftCircuits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SoftCircuits/subscriptions","organizations_url":"https://api.github.com/users/SoftCircuits/orgs","repos_url":"https://api.github.com/users/SoftCircuits/repos","events_url":"https://api.github.com/users/SoftCircuits/events{/privacy}","received_events_url":"https://api.github.com/users/SoftCircuits/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":5092427335,"node_id":"LA_kwDOAPaMMs8AAAABL4hGRw","url":"https://api.github.com/repos/dotnet/efcore/labels/area-groupby","name":"area-groupby","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-10-10T18:32:42Z","updated_at":"2025-06-16T08:55:45Z","closed_at":"2024-07-20T13:54:02Z","author_association":"NONE","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I have the following query. I'm expecting a number of results but I get only one.\r\n\r\n``` cs\r\nvar results = await DbContext.Trucks\r\n    .Where(t => t.Departure.HasValue)\r\n    .Select(t => new\r\n    {\r\n        t.Departure!.Value.Year,\r\n        t.Departure!.Value.Month,\r\n        Quantity = t.InboundQuantity + t.ToTransfers.Sum(x => x.Quantity) - t.FromTransfers.Sum(x => x.Quantity)\r\n    })\r\n    .GroupBy(t => new { t.Year, t.Month })\r\n    .ToDictionaryAsync(g => new DateTime(g.Key.Year, g.Key.Month, 1), g => g.Sum(x => x.Quantity));\r\n```\r\n\r\nResults:\r\n\r\n<!-- language: lang-none -->\r\n\r\n    results Count = 1\r\n    + [0]   {[{7/1/2021 12:00:00 AM}, 3842405714]}\r\n\r\nIf I rewrite the query to load all the rows into memory and then group, I then get the expected number of results.\r\n\r\n``` cs\r\nvar test = DbContext.Trucks\r\n    .Where(t => t.Departure.HasValue)\r\n    .Select(t => new\r\n    {\r\n        t.Departure!.Value.Year,\r\n        t.Departure!.Value.Month,\r\n        Quantity = t.InboundQuantity + t.ToTransfers.Sum(x => x.Quantity) - t.FromTransfers.Sum(x => x.Quantity)\r\n    })\r\n    .ToList();\r\n\r\nvar test2 = test\r\n    .GroupBy(t => new { t.Year, t.Month })\r\n    .ToDictionary(g => new DateTime(g.Key.Year, g.Key.Month, 1), g => g.Sum(x => x.Quantity));\r\n```\r\n\r\nResults:\r\n\r\n<!-- language: lang-none -->\r\n\r\n    test2   Count = 27\r\n    + [0]   {[{1/1/2022 12:00:00 AM}, 95309170]}\r\n    + [1]   {[{2/1/2022 12:00:00 AM}, 79737674]}\r\n    + [2]   {[{3/1/2022 12:00:00 AM}, 173875538]}\r\n    + [3]   {[{7/1/2021 12:00:00 AM}, 125219196]}\r\n    + [4]   {[{8/1/2021 12:00:00 AM}, 110993954]}\r\n    + [5]   {[{10/1/2021 12:00:00 AM}, 129282632]}\r\n    + [6]   {[{11/1/2021 12:00:00 AM}, 160927222]}\r\n    + [7]   {[{12/1/2021 12:00:00 AM}, 117813444]}\r\n    + [8]   {[{9/1/2021 12:00:00 AM}, 26260420]}\r\n    + [9]   {[{4/1/2022 12:00:00 AM}, 161695966]}\r\n    + [10]  {[{5/1/2022 12:00:00 AM}, 184781001]}\r\n    + [11]  {[{6/1/2022 12:00:00 AM}, 146985217]}\r\n    + [12]  {[{7/1/2022 12:00:00 AM}, 84260160]}\r\n    + [13]  {[{8/1/2022 12:00:00 AM}, 89769875]}\r\n    + [14]  {[{10/1/2022 12:00:00 AM}, 187958697]}\r\n    + [15]  {[{11/1/2022 12:00:00 AM}, 175034225]}\r\n    + [16]  {[{9/1/2022 12:00:00 AM}, 108421771]}\r\n    + [17]  {[{1/1/2023 12:00:00 AM}, 179720773]}\r\n    + [18]  {[{12/1/2022 12:00:00 AM}, 110000415]}\r\n    + [19]  {[{2/1/2023 12:00:00 AM}, 210461751]}\r\n    + [20]  {[{3/1/2023 12:00:00 AM}, 232239876]}\r\n    + [21]  {[{4/1/2023 12:00:00 AM}, 176482465]}\r\n    + [22]  {[{5/1/2023 12:00:00 AM}, 218732769]}\r\n    + [23]  {[{6/1/2023 12:00:00 AM}, 186324324]}\r\n    + [24]  {[{7/1/2023 12:00:00 AM}, 151700649]}\r\n    + [25]  {[{8/1/2023 12:00:00 AM}, 142653374]}\r\n    + [26]  {[{9/1/2023 12:00:00 AM}, 75763156]}\r\n\r\nIf I add a second `Select()` after the `GroupBy()`, I get an run-time exception.\r\n\r\n> Microsoft.Data.SqlClient.SqlException: 'Cannot perform an aggregate function on an expression containing an aggregate or a subquery. Cannot perform an aggregate function on an expression containing an aggregate or a subquery. Cannot perform an aggregate function on an expression containing an aggregate or a subquery. Cannot perform an aggregate function on an expression containing an aggregate or a subquery.'\r\n\r\nI understand that some expressions cannot be converted, but it seems odd that it would actually run without any error and then produce different results. In this case, an exception might actually be better.\r\n","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/32014/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T13:55:08Z","updated_at":"2024-07-20T13:55:08Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34020","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34020/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34020/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34020/events","html_url":"https://github.com/dotnet/efcore/issues/34020","id":2359825427,"node_id":"I_kwDOAPaMMs6MqBQT","number":34020,"title":"Aggregate of count on a nested table (one to many relationship) throws an exception ","user":{"login":"gustavnavar","id":30131949,"node_id":"MDQ6VXNlcjMwMTMxOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/30131949?v=4","gravatar_id":"","url":"https://api.github.com/users/gustavnavar","html_url":"https://github.com/gustavnavar","followers_url":"https://api.github.com/users/gustavnavar/followers","following_url":"https://api.github.com/users/gustavnavar/following{/other_user}","gists_url":"https://api.github.com/users/gustavnavar/gists{/gist_id}","starred_url":"https://api.github.com/users/gustavnavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gustavnavar/subscriptions","organizations_url":"https://api.github.com/users/gustavnavar/orgs","repos_url":"https://api.github.com/users/gustavnavar/repos","events_url":"https://api.github.com/users/gustavnavar/events{/privacy}","received_events_url":"https://api.github.com/users/gustavnavar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":2272800544,"node_id":"MDU6TGFiZWwyMjcyODAwNTQ0","url":"https://api.github.com/repos/dotnet/efcore/labels/area-sqlserver","name":"area-sqlserver","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-06-18T13:07:11Z","updated_at":"2025-06-16T08:47:55Z","closed_at":"2024-07-20T13:55:16Z","author_association":"NONE","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I want to calculate aggregates of count of rows on a nested table (one to many relationship). \r\n\r\nThe code that throws this exception is any of the following Linq statements:\r\n```c#\r\nvar sum = _context.Orders.Sum(r => r.OrderDetails.Count);\r\nvar avg = _context.Orders.Average(r => r.OrderDetails.Count);\r\nvar max = _context.Orders.Max(r => r.OrderDetails.Count);\r\nvar min = _context.Orders.Min(r => r.OrderDetails.Count);\r\n``` \r\n\r\nEF creates SQL queries for each statement that MS SQL Server can not execute and returns an exception:\r\n```sql\r\nSELECT COALESCE(SUM((\r\nï»¿          SELECT COUNT(*)\r\nï»¿          FROM [Order Details] AS [o0]\r\nï»¿          WHERE [o].[OrderID] = [o0].[OrderID])), 0)\r\nï»¿      FROM [Orders] AS [o]\r\n\r\nSELECT AVG(CAST((\r\nï»¿          SELECT COUNT(*)\r\nï»¿          FROM [Order Details] AS [o0]\r\nï»¿          WHERE [o].[OrderID] = [o0].[OrderID]) AS float))\r\nï»¿      FROM [Orders] AS [o]\r\n\r\nSELECT MAX((\r\nï»¿          SELECT COUNT(*)\r\nï»¿          FROM [Order Details] AS [o0]\r\nï»¿          WHERE [o].[OrderID] = [o0].[OrderID]))\r\nï»¿      FROM [Orders] AS [o]\r\n\r\nSELECT MIN((\r\nï»¿          SELECT COUNT(*)\r\nï»¿          FROM [Order Details] AS [o0]\r\nï»¿          WHERE [o].[OrderID] = [o0].[OrderID]))\r\nï»¿      FROM [Orders] AS [o]\r\n```\r\n\r\nThe exception returned is:\r\n```\r\nMicrosoft.Data.SqlClient.SqlException (0x80131904): Cannot perform an aggregate function on an expression containing an aggregate or a subquery.\r\n``` \r\n\r\nI was expecting that SQL queries created by EF would be as:\r\n```sql\r\nSELECT SUM(d.totalColumn) FROM (SELECT (SELECT COUNT(*) FROM [Order Details] AS od WHERE o.orderid = od.orderid) FROM orders AS o) AS d(totalColumn)\r\n\r\nSELECT AVG(CAST(d.totalColumn AS FLOAT)) FROM (SELECT (SELECT COUNT(*) FROM [Order Details] AS od WHERE o.orderid = od.orderid) FROM orders AS o) AS d(totalColumn)\r\n\r\nSELECT MAX(d.totalColumn) FROM (SELECT (SELECT COUNT(*) FROM [Order Details] AS od WHERE o.orderid = od.orderid) FROM orders AS o) AS d(totalColumn)\r\n\r\nSELECT MIN(d.totalColumn) FROM (SELECT (SELECT COUNT(*) FROM [Order Details] AS od WHERE o.orderid = od.orderid) FROM orders AS o) AS d(totalColumn)\r\n```\r\n\r\nThese SQL queries are executed by MS SQL server with no issues.\r\n\r\nI'm using the Northwind sample database for testing of this issue with the following model:\r\n```c#\r\npublic partial class Order\r\n{\r\n    [Key]\r\n    public int OrderID { get; set; }\r\n    public string CustomerID { get; set; }\r\n    public int? EmployeeID { get; set; }\r\n    public DateTime? OrderDate { get; set; }\r\n    public DateTime? RequiredDate { get; set; }\r\n    public DateTime? ShippedDate { get; set; }\r\n    public int? ShipVia { get; set; }\r\n    public decimal? Freight { get; set; }\r\n    public string ShipName { get; set; }\r\n    public string ShipAddress { get; set; }\r\n    public string ShipCity { get; set; }\r\n    public string ShipRegion { get; set; }\r\n    public string ShipPostalCode { get; set; }\r\n    public string ShipCountry { get; set; }\r\n\r\n    public virtual ICollection<OrderDetail> OrderDetails { get; set; }\r\n\r\n    public Order()\r\n    {\r\n        this.OrderDetails = new HashSet<OrderDetail>();\r\n    }\r\n}\r\n\r\n[Table(\"Order Details\")]\r\npublic partial class OrderDetail\r\n{\r\n    public int OrderID { get; set; }\r\n    public int ProductID { get; set; }\r\n    public decimal UnitPrice { get; set; }\r\n    public short Quantity { get; set; }\r\n    public float Discount { get; set; }\r\n\r\n    public OrderDetail()\r\n    { }\r\n}\r\n```\r\n\r\nSample code: \r\n[AggregatesOfCountDemo.zip](https://github.com/user-attachments/files/15887028/AggregatesOfCountDemo.zip)\r\n\r\nEF Core version:\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer 8.0.6\r\nTarget framework: .NET 8.0\r\nOperating system: Windows Pro 11\r\nIDE: Visual Studio 2022 17.10.2","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34020/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T14:00:48Z","updated_at":"2024-07-20T14:00:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/15937","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/15937/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/15937/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/15937/events","html_url":"https://github.com/dotnet/efcore/issues/15937","id":452114220,"node_id":"MDU6SXNzdWU0NTIxMTQyMjA=","number":15937,"title":"Query: Throw better exception when aggregate operation hits client eval","user":{"login":"smitpatel","id":1528107,"node_id":"MDQ6VXNlcjE1MjgxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/1528107?v=4","gravatar_id":"","url":"https://api.github.com/users/smitpatel","html_url":"https://github.com/smitpatel","followers_url":"https://api.github.com/users/smitpatel/followers","following_url":"https://api.github.com/users/smitpatel/following{/other_user}","gists_url":"https://api.github.com/users/smitpatel/gists{/gist_id}","starred_url":"https://api.github.com/users/smitpatel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smitpatel/subscriptions","organizations_url":"https://api.github.com/users/smitpatel/orgs","repos_url":"https://api.github.com/users/smitpatel/repos","events_url":"https://api.github.com/users/smitpatel/events{/privacy}","received_events_url":"https://api.github.com/users/smitpatel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-06-04T17:18:53Z","updated_at":"2025-06-15T17:58:26Z","closed_at":"2024-07-20T14:00:48Z","author_association":"CONTRIBUTOR","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":null,"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/15937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/15937/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2241160629","html_url":"https://github.com/dotnet/efcore/issues/34256#issuecomment-2241160629","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/34256","id":2241160629,"node_id":"IC_kwDOAPaMMs6FlWW1","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-20T14:01:34Z","updated_at":"2024-07-21T07:43:52Z","body":"Note: see all referencing issues just above for user reports that should be fixed by implementing this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2241160629/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13590357624,"node_id":"AE_lADOAPaMMs6QTBVkzwAAAAMqDGZ4","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13590357624","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-07-20T18:33:29Z","assignee":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":13592112959,"node_id":"REFE_lADOAPaMMs6QTBVkzwAAAAMqJy8_","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592112959","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f989a77a7ee4cd744d5795989bceea04e6d84ac7","commit_url":"https://api.github.com/repos/roji/efcore/commits/f989a77a7ee4cd744d5795989bceea04e6d84ac7","created_at":"2024-07-21T10:48:55Z","performed_via_github_app":null},{"id":13592115419,"node_id":"REFE_lADOAPaMMs6QTBVkzwAAAAMqJzjb","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592115419","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e7752d9d5a286fbfd246377d30134308d6d28003","commit_url":"https://api.github.com/repos/roji/efcore/commits/e7752d9d5a286fbfd246377d30134308d6d28003","created_at":"2024-07-21T10:50:11Z","performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-21T10:50:57Z","updated_at":"2024-07-21T10:50:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34262","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34262/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34262/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34262/events","html_url":"https://github.com/dotnet/efcore/pull/34262","id":2421343431,"node_id":"PR_kwDOAPaMMs52Aqor","number":34262,"title":"SQL Server: transform aggregate functions over subqueries","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-07-21T10:50:57Z","updated_at":"2024-09-23T11:15:57Z","closed_at":"2024-07-30T19:17:29Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/dotnet/efcore/pulls/34262","html_url":"https://github.com/dotnet/efcore/pull/34262","diff_url":"https://github.com/dotnet/efcore/pull/34262.diff","patch_url":"https://github.com/dotnet/efcore/pull/34262.patch","merged_at":"2024-07-30T19:17:29Z"},"body":"Single-handed weekend project!\r\n\r\nCloses #34256\r\n","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34262/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":3,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34262/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13592117544,"node_id":"DEME_lADOAPaMMs6QTBVkzwAAAAMqJ0Eo","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592117544","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2024-07-21T10:51:24Z","milestone":{"title":"Backlog"},"performed_via_github_app":null},{"id":13592117547,"node_id":"MIE_lADOAPaMMs6QTBVkzwAAAAMqJ0Er","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592117547","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-07-21T10:51:24Z","milestone":{"title":"9.0.0"},"performed_via_github_app":null},{"id":13592117635,"node_id":"LE_lADOAPaMMs6QTBVkzwAAAAMqJ0GD","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592117635","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-07-21T10:51:27Z","label":{"name":"closed-fixed","color":"777777"},"performed_via_github_app":null},{"id":13592243483,"node_id":"REFE_lADOAPaMMs6QTBVkzwAAAAMqKS0b","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13592243483","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"95146a87d039630cdae1a974fde9e25fe4a3803d","commit_url":"https://api.github.com/repos/roji/efcore/commits/95146a87d039630cdae1a974fde9e25fe4a3803d","created_at":"2024-07-21T11:59:34Z","performed_via_github_app":null},{"id":13699329181,"node_id":"REFE_lADOAPaMMs6QTBVkzwAAAAMwiyyd","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13699329181","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2e1f0f8ed32aa702265400c05277bab10f6a2eff","commit_url":"https://api.github.com/repos/roji/efcore/commits/2e1f0f8ed32aa702265400c05277bab10f6a2eff","created_at":"2024-07-30T17:38:00Z","performed_via_github_app":null},{"id":13700345074,"node_id":"CE_lADOAPaMMs6QTBVkzwAAAAMwmqzy","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13700345074","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-07-30T19:17:30Z","state_reason":null,"performed_via_github_app":null},{"id":13700345101,"node_id":"CE_lADOAPaMMs6QTBVkzwAAAAMwmq0N","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13700345101","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"390b5b0e64ab62a1eba60d9ad41a3dfe1b9fc022","commit_url":"https://api.github.com/repos/dotnet/efcore/commits/390b5b0e64ab62a1eba60d9ad41a3dfe1b9fc022","created_at":"2024-07-30T19:17:30Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-07T06:39:07Z","updated_at":"2024-08-07T06:39:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34375","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34375/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34375/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34375/events","html_url":"https://github.com/dotnet/efcore/issues/34375","id":2452668784,"node_id":"I_kwDOAPaMMs6SMMFw","number":34375,"title":"Sqlite: transform CROSS APPLY to projection when possible","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":2416018083,"node_id":"MDU6TGFiZWwyNDE2MDE4MDgz","url":"https://api.github.com/repos/dotnet/efcore/labels/area-sqlite","name":"area-sqlite","color":"32b37b","default":false,"description":""},{"id":2486106824,"node_id":"MDU6TGFiZWwyNDg2MTA2ODI0","url":"https://api.github.com/repos/dotnet/efcore/labels/consider-for-next-release","name":"consider-for-next-release","color":"fef2c0","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/2","html_url":"https://github.com/dotnet/efcore/milestone/2","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/2/labels","id":648040,"node_id":"MDk6TWlsZXN0b25lNjQ4MDQw","number":2,"title":"Backlog","description":"Issues that have been approved but are not scheduled a specific release.","creator":{"login":"bricelam","id":1226749,"node_id":"MDQ6VXNlcjEyMjY3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1226749?v=4","gravatar_id":"","url":"https://api.github.com/users/bricelam","html_url":"https://github.com/bricelam","followers_url":"https://api.github.com/users/bricelam/followers","following_url":"https://api.github.com/users/bricelam/following{/other_user}","gists_url":"https://api.github.com/users/bricelam/gists{/gist_id}","starred_url":"https://api.github.com/users/bricelam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bricelam/subscriptions","organizations_url":"https://api.github.com/users/bricelam/orgs","repos_url":"https://api.github.com/users/bricelam/repos","events_url":"https://api.github.com/users/bricelam/events{/privacy}","received_events_url":"https://api.github.com/users/bricelam/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":2157,"closed_issues":10,"state":"open","created_at":"2014-05-03T18:58:28Z","updated_at":"2025-11-07T08:33:50Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2024-08-07T06:39:07Z","updated_at":"2025-06-15T20:07:48Z","closed_at":null,"author_association":"MEMBER","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Consider the following query, where Contacts is mapped to a JSON column:\n\n```c#\n_ = context.Clients\n    .Select(c => new ClientDto\n    {\n      Id = c.Id,\n      Name = c.Name,\n      Contacts = c.Contacts.Select(contact => new ContactDto\n      {\n        FirstName = contact.FirstName,\n        LastName = contact.LastName,\n        Address = contact.Address,\n        Email = contact.Email,\n        PhoneNumber = contact.PhoneNumber\n      }).ToList()\n    });\n```\n\nEF translates the inner Select to a CROSS APPLY, with OPENJSON (on SQL Server) to extract the JSON data as relational for materialization:\n\n```sql\nSELECT [c].[Id], [c].[Name], JSON_VALUE([c0].[value], '$.FirstName'), JSON_VALUE([c0].[value], '$.LastName'), JSON_VALUE([c0].[value], '$.Address'), JSON_VALUE([c0].[value], '$.Email'), JSON_VALUE([c0].[value], '$.PhoneNumber'), [c0].[key]\nFROM [Clients] AS [c]\nOUTER APPLY OPENJSON([c].[Contacts], '$') AS [c0]\nORDER BY [c].[Id], CAST([c0].[key] AS int)\n```\n\nThis fails on SQLite, because CROSS/OUTER APPLY isn't supported there.\n\nIf the CROSS APPLY is only referenced in the projection (and not e.g. in a filter), then it should be able to transform the query to replace the CROSS APPLY with a projection subquery instead. This seems particularly useful around SQLite JSON processing, as above.\n\nNote the similarity with #34256, where we do the opposite, lifting a subquery projection to CROSS APPLY on SQL Server (where an aggregate function is involved).\n\nInitially raised in #34367","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34375/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13961152454,"node_id":"DEME_lADOAPaMMs6QTBVkzwAAAANAJkfG","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13961152454","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2024-08-21T14:11:44Z","milestone":{"title":"9.0.0"},"performed_via_github_app":null},{"id":13961152460,"node_id":"MIE_lADOAPaMMs6QTBVkzwAAAANAJkfM","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13961152460","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-08-21T14:11:44Z","milestone":{"title":"9.0.0-rc1"},"performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-23T11:23:31Z","updated_at":"2024-09-23T11:23:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34151","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34151/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34151/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34151/events","html_url":"https://github.com/dotnet/efcore/issues/34151","id":2389142245,"node_id":"I_kwDOAPaMMs6OZ2rl","number":34151,"title":"[9.0] New translations and SQL optimization/simplification","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":4880995042,"node_id":"LA_kwDOAPaMMs8AAAABIu4S4g","url":"https://api.github.com/repos/dotnet/efcore/labels/composite-issue","name":"composite-issue","color":"c6415a","default":false,"description":"A grouping of multiple related issues into one issue"}],"state":"closed","locked":false,"assignee":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/180","html_url":"https://github.com/dotnet/efcore/milestone/180","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/180/labels","id":9963267,"node_id":"MI_kwDOAPaMMs4AmAcD","number":180,"title":"9.0.0","description":null,"creator":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":339,"state":"closed","created_at":"2023-09-25T15:41:58Z","updated_at":"2025-04-01T18:19:15Z","due_on":null,"closed_at":"2024-11-14T11:54:05Z"},"comments":1,"created_at":"2024-07-03T17:40:32Z","updated_at":"2025-06-15T20:06:07Z","closed_at":"2024-09-23T18:55:08Z","author_association":"MEMBER","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Note: consider work went into Cosmos querying capabilities, and so the below doesn't include those improvements; see #33033 for Cosmos work done in 9.0, including all query improvements.\r\n\r\n## SQL optimizations\r\n\r\n* #31083\r\n    * #32668 \r\n* #32784\r\n    * #32757\r\n* #31482\r\n* Min/Max (GREATEST/LEAST) work\r\n    * #27794\r\n    * #31681\r\n    * #32332\r\n    * #32458\r\n* #34142\r\n* #34133 \r\n* Optimization of CASE/WHEN\r\n    * #18774\r\n    * #33869\r\n    * #18935\r\n    * #33934\r\n* Optimization of COALESCE \r\n    * #34002\r\n    * #33938 \r\n    * #34304\r\n* #33873\r\n* #33814\r\n* #33776\r\n* #34381\r\n\r\n## New translations\r\n\r\n* #33491\r\n* #32058\r\n* #33706\r\n* #16645\r\n* #27794\r\n* #28899\r\n* #33702\r\n* #33891\r\n* #33721\r\n\r\n## Provider-specific\r\n\r\n* #34256\r\n* #34124\r\n* #34080\r\n* #34168\r\n* #34213\r\n\r\nA big thank you goes out to @ranma42 for many of the above!","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34151/reactions","total_count":9,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":9,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34151/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":14616203217,"node_id":"DEME_lADOAPaMMs6QTBVkzwAAAANnMY_R","url":"https://api.github.com/repos/dotnet/efcore/issues/events/14616203217","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2024-10-12T07:42:23Z","milestone":{"title":"9.0.0-rc1"},"performed_via_github_app":null}]