[{"id":11135561012,"node_id":"LE_lADOAPaMMs54mNYJzwAAAAKXuy00","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135561012","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:20:18Z","label":{"name":"type-bug","color":"f7c6c7"},"performed_via_github_app":null},{"id":11135561024,"node_id":"LE_lADOAPaMMs54mNYJzwAAAAKXuy1A","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135561024","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:20:19Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"id":11135561032,"node_id":"LE_lADOAPaMMs54mNYJzwAAAAKXuy1I","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135561032","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:20:19Z","label":{"name":"area-query","color":"32b37b"},"performed_via_github_app":null},{"id":11135561034,"node_id":"LE_lADOAPaMMs54mNYJzwAAAAKXuy1K","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135561034","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:20:19Z","label":{"name":"area-primitive-collections","color":"32b37b"},"performed_via_github_app":null},{"id":11135561095,"node_id":"AE_lADOAPaMMs54mNYJzwAAAAKXuy2H","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135561095","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:20:19Z","assignee":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T08:21:07Z","updated_at":"2023-12-04T08:21:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004","repository_url":"https://api.github.com/repos/npgsql/efcore.pg","labels_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004/labels{/name}","comments_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004/comments","events_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004/events","html_url":"https://github.com/npgsql/efcore.pg/issues/3004","id":2022839119,"node_id":"I_kwDOA1URy854khNP","number":3004,"title":"Primitive collections in EF Core 8 - LINQ query for .SelectMany().Distinct() not working.","user":{"login":"moxplod","id":4554395,"node_id":"MDQ6VXNlcjQ1NTQzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4554395?v=4","gravatar_id":"","url":"https://api.github.com/users/moxplod","html_url":"https://github.com/moxplod","followers_url":"https://api.github.com/users/moxplod/followers","following_url":"https://api.github.com/users/moxplod/following{/other_user}","gists_url":"https://api.github.com/users/moxplod/gists{/gist_id}","starred_url":"https://api.github.com/users/moxplod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moxplod/subscriptions","organizations_url":"https://api.github.com/users/moxplod/orgs","repos_url":"https://api.github.com/users/moxplod/repos","events_url":"https://api.github.com/users/moxplod/events{/privacy}","received_events_url":"https://api.github.com/users/moxplod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-12-04T01:25:04Z","updated_at":"2025-04-01T09:09:11Z","closed_at":"2023-12-04T08:21:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":55906763,"node_id":"MDEwOlJlcG9zaXRvcnk1NTkwNjc2Mw==","name":"efcore.pg","full_name":"npgsql/efcore.pg","private":false,"owner":{"login":"npgsql","id":5766497,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU3NjY0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/5766497?v=4","gravatar_id":"","url":"https://api.github.com/users/npgsql","html_url":"https://github.com/npgsql","followers_url":"https://api.github.com/users/npgsql/followers","following_url":"https://api.github.com/users/npgsql/following{/other_user}","gists_url":"https://api.github.com/users/npgsql/gists{/gist_id}","starred_url":"https://api.github.com/users/npgsql/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npgsql/subscriptions","organizations_url":"https://api.github.com/users/npgsql/orgs","repos_url":"https://api.github.com/users/npgsql/repos","events_url":"https://api.github.com/users/npgsql/events{/privacy}","received_events_url":"https://api.github.com/users/npgsql/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/npgsql/efcore.pg","description":"Entity Framework Core provider for PostgreSQL","fork":false,"url":"https://api.github.com/repos/npgsql/efcore.pg","forks_url":"https://api.github.com/repos/npgsql/efcore.pg/forks","keys_url":"https://api.github.com/repos/npgsql/efcore.pg/keys{/key_id}","collaborators_url":"https://api.github.com/repos/npgsql/efcore.pg/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/npgsql/efcore.pg/teams","hooks_url":"https://api.github.com/repos/npgsql/efcore.pg/hooks","issue_events_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/events{/number}","events_url":"https://api.github.com/repos/npgsql/efcore.pg/events","assignees_url":"https://api.github.com/repos/npgsql/efcore.pg/assignees{/user}","branches_url":"https://api.github.com/repos/npgsql/efcore.pg/branches{/branch}","tags_url":"https://api.github.com/repos/npgsql/efcore.pg/tags","blobs_url":"https://api.github.com/repos/npgsql/efcore.pg/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/npgsql/efcore.pg/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/npgsql/efcore.pg/git/refs{/sha}","trees_url":"https://api.github.com/repos/npgsql/efcore.pg/git/trees{/sha}","statuses_url":"https://api.github.com/repos/npgsql/efcore.pg/statuses/{sha}","languages_url":"https://api.github.com/repos/npgsql/efcore.pg/languages","stargazers_url":"https://api.github.com/repos/npgsql/efcore.pg/stargazers","contributors_url":"https://api.github.com/repos/npgsql/efcore.pg/contributors","subscribers_url":"https://api.github.com/repos/npgsql/efcore.pg/subscribers","subscription_url":"https://api.github.com/repos/npgsql/efcore.pg/subscription","commits_url":"https://api.github.com/repos/npgsql/efcore.pg/commits{/sha}","git_commits_url":"https://api.github.com/repos/npgsql/efcore.pg/git/commits{/sha}","comments_url":"https://api.github.com/repos/npgsql/efcore.pg/comments{/number}","issue_comment_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/comments{/number}","contents_url":"https://api.github.com/repos/npgsql/efcore.pg/contents/{+path}","compare_url":"https://api.github.com/repos/npgsql/efcore.pg/compare/{base}...{head}","merges_url":"https://api.github.com/repos/npgsql/efcore.pg/merges","archive_url":"https://api.github.com/repos/npgsql/efcore.pg/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/npgsql/efcore.pg/downloads","issues_url":"https://api.github.com/repos/npgsql/efcore.pg/issues{/number}","pulls_url":"https://api.github.com/repos/npgsql/efcore.pg/pulls{/number}","milestones_url":"https://api.github.com/repos/npgsql/efcore.pg/milestones{/number}","notifications_url":"https://api.github.com/repos/npgsql/efcore.pg/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/npgsql/efcore.pg/labels{/name}","releases_url":"https://api.github.com/repos/npgsql/efcore.pg/releases{/id}","deployments_url":"https://api.github.com/repos/npgsql/efcore.pg/deployments","created_at":"2016-04-10T15:26:37Z","updated_at":"2025-11-08T12:48:36Z","pushed_at":"2025-10-30T13:49:28Z","git_url":"git://github.com/npgsql/efcore.pg.git","ssh_url":"git@github.com:npgsql/efcore.pg.git","clone_url":"https://github.com/npgsql/efcore.pg.git","svn_url":"https://github.com/npgsql/efcore.pg","homepage":null,"size":8462,"stargazers_count":1715,"watchers_count":1715,"language":"C#","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":249,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":281,"license":{"key":"postgresql","name":"PostgreSQL License","spdx_id":"PostgreSQL","url":"https://api.github.com/licenses/postgresql","node_id":"MDc6TGljZW5zZTMx"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["database","dotnet","entity-framework","entity-framework-core","npgsql","postgres","postgresql","sql"],"visibility":"public","forks":249,"open_issues":281,"watchers":1715,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Super excited for the new features in EF with primitive collections. \r\n\r\nI am building a tagging feature. With a list of tags in an entity. Example: \r\n\r\n```\r\n\r\npublic class Company\r\n{\r\n....\r\n    public List<string> Tags { get; set; }\r\n}\r\n\r\n```\r\nI want to get a distinct list of tags for populating the possible tag options.  \r\n\r\n`Context.Companies.SelectMany(c => c.Tags).Distinct().ToList();`\r\n\r\nAlso, the search for a tag I need to build \r\n\r\n`.SelectMany(c => c.Tags).Where(t => t.Contains(query)).Distinct().ToList();`\r\n\r\nBoth these queries cannot be translated. \r\n\r\n![image](https://github.com/npgsql/efcore.pg/assets/4554395/b28a2c27-9b9e-4b26-a378-853828872265)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/npgsql/efcore.pg/issues/3004/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"id":11135624419,"node_id":"RTE_lADOAPaMMs54mNYJzwAAAAKXvCTj","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11135624419","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-12-04T08:26:13Z","rename":{"from":"SelectMany over primitive collection fails","to":"SelectMany over primitive collection property fails"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1838080871","html_url":"https://github.com/dotnet/efcore/issues/32505#issuecomment-1838080871","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/32505","id":1838080871,"node_id":"IC_kwDOAPaMMs5tjuNn","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T08:44:35Z","updated_at":"2023-12-04T08:45:01Z","body":"Fix options:\r\n\r\n1. Move identification of property access to before calling base.Visit (possibly a bit heavy)\r\n2. Stop eagerly throwing in VisitMethodCall, throw only on top-level Translate method\r\n3. Instantiate a subquery visitor instance for the SelectMany lambda translation\r\n4. Preferred: move property access identification up to core (QueryableMethodTranslatingExpressionVisitor); this would start building support for primitive collections in non-relational providers.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1838080871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11136651486,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKXy9De","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11136651486","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d42f23a222f2fafe242e2a784824dbf5507a07a6","commit_url":"https://api.github.com/repos/roji/efcore/commits/d42f23a222f2fafe242e2a784824dbf5507a07a6","created_at":"2023-12-04T09:56:22Z","performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T09:57:23Z","updated_at":"2023-12-04T09:57:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32506","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/32506/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/32506/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/32506/events","html_url":"https://github.com/dotnet/efcore/pull/32506","id":2023450800,"node_id":"PR_kwDOAPaMMs5hCEen","number":32506,"title":"Refactor queryable collection support for non-relational providers","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-04T09:57:22Z","updated_at":"2023-12-23T08:31:13Z","closed_at":"2023-12-23T08:31:12Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/dotnet/efcore/pulls/32506","html_url":"https://github.com/dotnet/efcore/pull/32506","diff_url":"https://github.com/dotnet/efcore/pull/32506.diff","patch_url":"https://github.com/dotnet/efcore/pull/32506.patch","merged_at":"2023-12-23T08:31:12Z"},"body":"Pretty straightforward refactor that moves some basic queryable collection support from relational to core; this will make it easier to implement e.g. primitive collection support for non-relational providers.\r\n\r\nThis also fixes exception ordering issue which caused SelectMany over primitive collection properties to fail.\r\n\r\nFixes #32505\r\n","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/32506/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1838201360","html_url":"https://github.com/dotnet/efcore/issues/32505#issuecomment-1838201360","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/32505","id":1838201360,"node_id":"IC_kwDOAPaMMs5tkLoQ","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T09:58:24Z","updated_at":"2023-12-04T09:58:24Z","body":"Did option 4 above.\r\n\r\nIf further users run into the SelectMany issue, we can consider patching with a simpler fix.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1838201360/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":1},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11136676723,"node_id":"LE_lADOAPaMMs54mNYJzwAAAAKXzDNz","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11136676723","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T09:58:28Z","label":{"name":"closed-fixed","color":"777777"},"performed_via_github_app":null},{"id":11137438454,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKX19L2","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11137438454","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fc6f2431b20ade251f6058154c9350466bbff963","commit_url":"https://api.github.com/repos/roji/efcore/commits/fc6f2431b20ade251f6058154c9350466bbff963","created_at":"2023-12-04T10:56:50Z","performed_via_github_app":null},{"id":11138229498,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKX4-T6","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11138229498","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"442358135426515346d027c5de65a7ec1caa7f35","commit_url":"https://api.github.com/repos/roji/efcore/commits/442358135426515346d027c5de65a7ec1caa7f35","created_at":"2023-12-04T12:09:10Z","performed_via_github_app":null},{"actor":{"login":"SpaceOgre","id":381657,"node_id":"MDQ6VXNlcjM4MTY1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/381657?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceOgre","html_url":"https://github.com/SpaceOgre","followers_url":"https://api.github.com/users/SpaceOgre/followers","following_url":"https://api.github.com/users/SpaceOgre/following{/other_user}","gists_url":"https://api.github.com/users/SpaceOgre/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceOgre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceOgre/subscriptions","organizations_url":"https://api.github.com/users/SpaceOgre/orgs","repos_url":"https://api.github.com/users/SpaceOgre/repos","events_url":"https://api.github.com/users/SpaceOgre/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceOgre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-06T20:09:14Z","updated_at":"2023-12-06T20:09:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32477","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/32477/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/32477/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/32477/events","html_url":"https://github.com/dotnet/efcore/issues/32477","id":2020797046,"node_id":"I_kwDOAPaMMs54cup2","number":32477,"title":"Error with Primitive Collection and Outer/Cross Apply it","user":{"login":"SpaceOgre","id":381657,"node_id":"MDQ6VXNlcjM4MTY1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/381657?v=4","gravatar_id":"","url":"https://api.github.com/users/SpaceOgre","html_url":"https://github.com/SpaceOgre","followers_url":"https://api.github.com/users/SpaceOgre/followers","following_url":"https://api.github.com/users/SpaceOgre/following{/other_user}","gists_url":"https://api.github.com/users/SpaceOgre/gists{/gist_id}","starred_url":"https://api.github.com/users/SpaceOgre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpaceOgre/subscriptions","organizations_url":"https://api.github.com/users/SpaceOgre/orgs","repos_url":"https://api.github.com/users/SpaceOgre/repos","events_url":"https://api.github.com/users/SpaceOgre/events{/privacy}","received_events_url":"https://api.github.com/users/SpaceOgre/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-12-01T12:33:37Z","updated_at":"2025-06-16T08:54:26Z","closed_at":"2024-01-05T09:33:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We have started using Primitive Collections now and want to create the following SQL in LINQ:\r\n\r\n```sql\r\nSELECT sri.Id, STRING_AGG(s.Name, ', ') WITHIN GROUP (ORDER BY sri.Id) AS Skolor\r\nFROM StudentReportImports sri\r\nOUTER APPLY OPENJSON(sri.Schools) WITH ([value] nvarchar(10) '$') AS js\r\nINNER JOIN Schools s ON s.SchoolCode = js.value\r\nGROUP BY sri.Id\r\n```\r\n\r\nThis is only a small part of the LINQ that we build, we are going to join it based on the selected Id.\r\n\r\nI have tried lots of ways to try and solve this, usually I get an error of this typ:\r\n```\r\nSystem.InvalidOperationException: The LINQ expression 'EF.Property<List<string>>(StructuralTypeShaperExpression: \r\n    GR.Elevinformation.Library.DataAccess.Models.Elinfil\r\n    ValueBufferExpression: \r\n        ProjectionBindingExpression: EmptyProjectionMember\r\n    IsNullable: False\r\n, \"Schools\")' could not be translated\r\n```\r\n\r\n### Include your code\r\n\r\n```csharp\r\npublic class StudentReportImports\r\n{\r\n    public Guid Id { get; set; }\r\n    public List<string> Schools { get; set; }\r\n}\r\n\r\npublic class School\r\n{\r\n    public Guid Id { get; set; }\r\n    public string Code { get; set; }\r\n    public string Name { get; set; }\r\n}\r\n```\r\n\r\n\r\nI would like to write it something like this (this is not with the group by and string join because it gives the error anyway)\r\n```csharp\r\nfrom sri in _dbContext.StudentReportImports\r\nfrom schoolCode in sri.Schools //this seems to be the problem\r\njoin school in _dbContext.Schools\r\non schoolCode equals school.Code into schoolGroup\r\nfrom school in schoolGroup.DefaultIfEmpty()\r\nselect school\r\n```\r\n\r\nThis is working but I don't like that i have to include the `.First()` and it seems to verbose with the extra join on _dbContext.StudentReportImports\r\n```csharp\r\nfrom sri in _dbContext.StudentReportImports\r\n//There is more stuff here\r\nfrom namnSkolor in _dbContext.StudentReportImports\r\n    .Where(x => x.Id == sri.Id)\r\n    .Select(ef =>\r\n        ef.Schools\r\n            .Join(_dbContext.Schools, code=> code, s => s.Code, (_, school) => new { ef.Id, school.Name })\r\n            .Join(_dbContext.StudentReportImports, steg2 => steg2.Id, ef => ef.Id, (steg1, ef) => new { ef.Id, steg1.Name })\r\n            .GroupBy(y => y.Id)\r\n            .Select(y => string.Join(\";\", y.Select(x => x.Name).OrderBy(x => x)))\r\n            .First()\r\n    ).DefaultIfEmpty()\r\n```\r\n\r\nLike above I would like to be able to write it more like this:\r\n```csharp\r\nfrom sri in _dbContext.StudentReportImports\r\n//There is more stuff here\r\nfrom namnSkolor in sri.Schools //Not working\r\n        .Join(_dbContext.Schools, code=> code, s => s.Code, (_, school) => new { ef.Id, school.Name })\r\n        .Join(_dbContext.StudentReportImports, steg2 => steg2.Id, ef => ef.Id, (steg1, ef) => new { ef.Id, steg1.Name })\r\n        .GroupBy(y => y.Id)\r\n        .Select(y => string.Join(\";\", y.Select(x => x.Name).OrderBy(x => x)))\r\n        .DefaultIfEmpty()\r\n```\r\n\r\n### Include stack traces\r\n\r\n```\r\nSystem.InvalidOperationException: The LINQ expression 'EF.Property<List<string>>(StructuralTypeShaperExpression: \r\n    GR.Elevinformation.Library.DataAccess.Models.Elinfil\r\n    ValueBufferExpression: \r\n        ProjectionBindingExpression: EmptyProjectionMember\r\n    IsNullable: False\r\n, \"Schools\")' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelectMany(ShapedQueryExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass9_0`1.<Execute>b__0()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()\r\n   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\r\n   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\r\n```\r\n\r\n### Include provider and version information\r\n\r\nEF Core version: 8.0.0\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer\r\nTarget framework: .NET 8.0\r\nOperating system: Windows 11\r\nIDE: Visual Studio 2022 17.8\r\n","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/32477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/32477/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"id":11328466690,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKjOq8C","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11328466690","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"062aa1e5b44d10808790088dff030c503be83b87","commit_url":"https://api.github.com/repos/roji/efcore/commits/062aa1e5b44d10808790088dff030c503be83b87","created_at":"2023-12-22T17:44:59Z","performed_via_github_app":null},{"id":11328556101,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKjPAxF","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11328556101","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4976d1e656fcf129cd4975aa54b62264d71a5ff4","commit_url":"https://api.github.com/repos/roji/efcore/commits/4976d1e656fcf129cd4975aa54b62264d71a5ff4","created_at":"2023-12-22T18:02:25Z","performed_via_github_app":null},{"id":11330590410,"node_id":"CE_lADOAPaMMs54mNYJzwAAAAKjWxbK","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11330590410","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-12-23T08:31:13Z","state_reason":null,"performed_via_github_app":null},{"id":11330590476,"node_id":"REFE_lADOAPaMMs54mNYJzwAAAAKjWxcM","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11330590476","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5defd88b87056e0bebe6d41a2f5d2088413b19e5","commit_url":"https://api.github.com/repos/dotnet/efcore/commits/5defd88b87056e0bebe6d41a2f5d2088413b19e5","created_at":"2023-12-23T08:31:16Z","performed_via_github_app":null},{"id":11330590577,"node_id":"MIE_lADOAPaMMs54mNYJzwAAAAKjWxdx","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11330590577","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-12-23T08:31:23Z","milestone":{"title":"9.0.0"},"performed_via_github_app":null},{"id":11659074630,"node_id":"DEME_lADOAPaMMs54mNYJzwAAAAK271xG","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11659074630","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2024-01-31T17:25:34Z","milestone":{"title":"9.0.0"},"performed_via_github_app":null},{"id":11659074639,"node_id":"MIE_lADOAPaMMs54mNYJzwAAAAK271xP","url":"https://api.github.com/repos/dotnet/efcore/issues/events/11659074639","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-01-31T17:25:34Z","milestone":{"title":"9.0.0-preview1"},"performed_via_github_app":null},{"id":13169560007,"node_id":"UNLE_lADOAPaMMs54mNYJzwAAAAMQ94nH","url":"https://api.github.com/repos/dotnet/efcore/issues/events/13169560007","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-06-15T15:00:06Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-20T15:29:35Z","updated_at":"2024-08-20T15:29:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34479","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/34479/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/34479/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/34479/events","html_url":"https://github.com/dotnet/efcore/issues/34479","id":2475908214,"node_id":"I_kwDOAPaMMs6Tk1x2","number":34479,"title":"Primitive collections cannot be projected when using server evaluation","user":{"login":"mu88","id":4560672,"node_id":"MDQ6VXNlcjQ1NjA2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/4560672?v=4","gravatar_id":"","url":"https://api.github.com/users/mu88","html_url":"https://github.com/mu88","followers_url":"https://api.github.com/users/mu88/followers","following_url":"https://api.github.com/users/mu88/following{/other_user}","gists_url":"https://api.github.com/users/mu88/gists{/gist_id}","starred_url":"https://api.github.com/users/mu88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mu88/subscriptions","organizations_url":"https://api.github.com/users/mu88/orgs","repos_url":"https://api.github.com/users/mu88/repos","events_url":"https://api.github.com/users/mu88/events{/privacy}","received_events_url":"https://api.github.com/users/mu88/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1675384372,"node_id":"MDU6TGFiZWwxNjc1Mzg0Mzcy","url":"https://api.github.com/repos/dotnet/efcore/labels/area-query","name":"area-query","color":"32b37b","default":false,"description":""},{"id":4725071141,"node_id":"LA_kwDOAPaMMs8AAAABGaLdJQ","url":"https://api.github.com/repos/dotnet/efcore/labels/area-primitive-collections","name":"area-primitive-collections","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-08-20T15:13:22Z","updated_at":"2025-06-16T08:47:07Z","closed_at":"2024-08-20T15:30:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Report\r\n\r\nWhen trying to project a primitive collection, it fails when using server evaluation - only client evaluation works.\r\n\r\n### Include your code\r\n\r\n```C#\r\nusing Microsoft.Data.Sqlite;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nconst string buildingName = \"City hall\";\r\n\r\nvar connection = new SqliteConnection(\"Filename=:memory:\");\r\nawait connection.OpenAsync();\r\n\r\nvar contextOptions = new DbContextOptionsBuilder<CustomContext>()\r\n    .UseSqlite(connection)\r\n    .Options;\r\n\r\nawait using var context1 = new CustomContext(contextOptions);\r\nawait context1.Database.EnsureDeletedAsync();\r\nawait context1.Database.EnsureCreatedAsync();\r\ncontext1.Buildings.AddRange(\r\n    new Building { Id = \"1\", Name = buildingName, HouseKeys = [\"HK1\", \"HK2\"] },\r\n    new Building { Id = \"2\", Name = buildingName, HouseKeys = [\"HK3\", \"HK4\"] });\r\nawait context1.SaveChangesAsync();\r\n\r\nawait using var context2 = new CustomContext(contextOptions);\r\nvar clientHouseKeys = (await context2.Buildings\r\n        .Where(building => building.Name == buildingName)\r\n        .ToListAsync())\r\n    .SelectMany(building => building.HouseKeys);\r\nvar serverHouseKeys = await context2.Buildings\r\n    .Where(building => building.Name == buildingName)\r\n    .SelectMany(building => building.HouseKeys)\r\n    .ToListAsync();\r\n\r\nConsole.WriteLine($\"client eval: {string.Join(\", \", clientHouseKeys)}\");\r\nConsole.WriteLine($\"server eval: {string.Join(\", \", serverHouseKeys)}\");\r\n\r\npublic class CustomContext : DbContext\r\n{\r\n    public CustomContext(DbContextOptions<CustomContext> contextOptions) : base(contextOptions)\r\n    {\r\n    }\r\n\r\n    public DbSet<Building> Buildings { get; set; }\r\n}\r\n\r\npublic class Building\r\n{\r\n    public string Id { get; set; }\r\n    public string Name { get; set; }\r\n    public List<string> HouseKeys { get; set; }\r\n}\r\n```\r\n\r\nAnd the related `csproj`:  \r\n```xml\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n    <PropertyGroup>\r\n        <OutputType>Exe</OutputType>\r\n        <TargetFramework>net8.0</TargetFramework>\r\n        <ImplicitUsings>enable</ImplicitUsings>\r\n        <Nullable>enable</Nullable>\r\n    </PropertyGroup>\r\n    <ItemGroup>\r\n        <PackageReference Include=\"Microsoft.EntityFrameworkCore\" Version=\"8.0.8\" />\r\n        <PackageReference Include=\"Microsoft.EntityFrameworkCore.Sqlite\" Version=\"8.0.8\" />\r\n    </ItemGroup>\r\n</Project>\r\n```\r\n\r\n### Include stack traces\r\n\r\n```\r\nUnhandled exception. System.InvalidOperationException: The LINQ expression 'EF.Property<List<string>>(StructuralTypeShaperExpression: \r\n    Building\r\n    ValueBufferExpression: \r\n        ProjectionBindingExpression: EmptyProjectionMember\r\n    IsNullable: False\r\n, \"HouseKeys\")' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression) \r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelectMany(ShapedQueryExpression source, LambdaExpression collectionSelector, LambdaExpression resultSelector)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression) \r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression) \r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)\r\n   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)    \r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)\r\n   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Program.<Main>$(String[] args) in C:\\work\\temp\\Repro_EFCore\\Program.cs:line 24\r\n   at Program.<Main>$(String[] args) in C:\\work\\temp\\Repro_EFCore\\Program.cs:line 29\r\n   at Program.<Main>$(String[] args) in C:\\work\\temp\\Repro_EFCore\\Program.cs:line 29\r\n   at Program.<Main>(String[] args\r\n```\r\n\r\n### Include version information\r\n\r\nMicrosoft.Data.Sqlite version: `Microsoft.EntityFrameworkCore.Sqlite`, `v8.0.8`\r\nTarget framework: .NET 8 (`v8.0.303`)\r\nOperating system: Win 11 (23H2)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/34479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/34479/timeline","performed_via_github_app":null,"state_reason":"duplicate"}},"event":"cross-referenced"},{"id":14616186386,"node_id":"DEME_lADOAPaMMs54mNYJzwAAAANnMU4S","url":"https://api.github.com/repos/dotnet/efcore/issues/events/14616186386","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2024-10-12T07:33:57Z","milestone":{"title":"9.0.0-preview1"},"performed_via_github_app":null},{"id":14616186388,"node_id":"MIE_lADOAPaMMs54mNYJzwAAAANnMU4U","url":"https://api.github.com/repos/dotnet/efcore/issues/events/14616186388","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-10-12T07:33:57Z","milestone":{"title":"9.0.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2574913284","html_url":"https://github.com/dotnet/efcore/issues/32505#issuecomment-2574913284","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/32505","id":2574913284,"node_id":"IC_kwDOAPaMMs6Zeg8E","user":{"login":"mu88","id":4560672,"node_id":"MDQ6VXNlcjQ1NjA2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/4560672?v=4","gravatar_id":"","url":"https://api.github.com/users/mu88","html_url":"https://github.com/mu88","followers_url":"https://api.github.com/users/mu88/followers","following_url":"https://api.github.com/users/mu88/following{/other_user}","gists_url":"https://api.github.com/users/mu88/gists{/gist_id}","starred_url":"https://api.github.com/users/mu88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mu88/subscriptions","organizations_url":"https://api.github.com/users/mu88/orgs","repos_url":"https://api.github.com/users/mu88/repos","events_url":"https://api.github.com/users/mu88/events{/privacy}","received_events_url":"https://api.github.com/users/mu88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-07T10:19:55Z","updated_at":"2025-01-07T10:19:55Z","body":"@roji: is it on purpose that this fix does not apply to SQLite? I was hoping that I could now fix my code as #34479 has been resolved - but now it fails on SQLite instead of PostgreSQL, so no real practical progress for me here ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2574913284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mu88","id":4560672,"node_id":"MDQ6VXNlcjQ1NjA2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/4560672?v=4","gravatar_id":"","url":"https://api.github.com/users/mu88","html_url":"https://github.com/mu88","followers_url":"https://api.github.com/users/mu88/followers","following_url":"https://api.github.com/users/mu88/following{/other_user}","gists_url":"https://api.github.com/users/mu88/gists{/gist_id}","starred_url":"https://api.github.com/users/mu88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mu88/subscriptions","organizations_url":"https://api.github.com/users/mu88/orgs","repos_url":"https://api.github.com/users/mu88/repos","events_url":"https://api.github.com/users/mu88/events{/privacy}","received_events_url":"https://api.github.com/users/mu88/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15836710824,"node_id":"MEE_lADOAPaMMs54mNYJzwAAAAOv8Qeo","url":"https://api.github.com/repos/dotnet/efcore/issues/events/15836710824","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-07T10:19:56Z","performed_via_github_app":null},{"id":15836710838,"node_id":"SE_lADOAPaMMs54mNYJzwAAAAOv8Qe2","url":"https://api.github.com/repos/dotnet/efcore/issues/events/15836710838","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-07T10:19:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2575378290","html_url":"https://github.com/dotnet/efcore/issues/32505#issuecomment-2575378290","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/32505","id":2575378290,"node_id":"IC_kwDOAPaMMs6ZgSdy","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-07T14:07:23Z","updated_at":"2025-01-07T14:07:23Z","body":"@mu88 definitely not on purpose; if you're seeing a SQLite problem here, please open a new issue with a minimal repro and we'll investigate.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/2575378290/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}}]