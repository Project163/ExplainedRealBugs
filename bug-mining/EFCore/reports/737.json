{"url":"https://api.github.com/repos/dotnet/efcore/issues/37009","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/37009/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/37009/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/37009/events","html_url":"https://github.com/dotnet/efcore/issues/37009","id":3536923103,"node_id":"I_kwDOAPaMMs7S0Snf","number":37009,"title":"JSON property name is ignored in queries involving complex JSON types","user":{"login":"mario-mestrovic","id":3209068,"node_id":"MDQ6VXNlcjMyMDkwNjg=","avatar_url":"https://avatars.githubusercontent.com/u/3209068?v=4","gravatar_id":"","url":"https://api.github.com/users/mario-mestrovic","html_url":"https://github.com/mario-mestrovic","followers_url":"https://api.github.com/users/mario-mestrovic/followers","following_url":"https://api.github.com/users/mario-mestrovic/following{/other_user}","gists_url":"https://api.github.com/users/mario-mestrovic/gists{/gist_id}","starred_url":"https://api.github.com/users/mario-mestrovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mario-mestrovic/subscriptions","organizations_url":"https://api.github.com/users/mario-mestrovic/orgs","repos_url":"https://api.github.com/users/mario-mestrovic/repos","events_url":"https://api.github.com/users/mario-mestrovic/events{/privacy}","received_events_url":"https://api.github.com/users/mario-mestrovic/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1900941630,"node_id":"MDU6TGFiZWwxOTAwOTQxNjMw","url":"https://api.github.com/repos/dotnet/efcore/labels/area-model-building","name":"area-model-building","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/204","html_url":"https://github.com/dotnet/efcore/milestone/204","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/204/labels","id":11480673,"node_id":"MI_kwDOAPaMMs4Ary5h","number":204,"title":"10.0.0","description":"","creator":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":193,"state":"open","created_at":"2024-08-23T12:48:26Z","updated_at":"2025-11-05T08:24:30Z","due_on":null,"closed_at":null},"comments":3,"created_at":"2025-10-21T14:50:50Z","updated_at":"2025-10-24T16:13:32Z","closed_at":"2025-10-24T14:05:23Z","author_association":"NONE","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Bug description\n\nI've noticed a serialization/deserialization issue with complex properties in EF Core 10 RC2.\nThe issue only happens if I try to use a different Json property name for the complex collection of Rows.\n\nIf I remove the line \n`b.HasJsonPropertyName(nameof(DataTable.Rows).ToCamelCase());`\n\nIt serializes in the database as `'Rows'` and deserializes successfully on table fetch.\nIf I add the line again it successfully serializes as `'rows'` but it wont deserialize (`Rows` equal `null`) on table fetch.\n\nBtw note how the ConfigureComplexDataTable doesn't actually do anything except renaming the json properties. Would be ideal if EF Core team provides that functionality via configuration or if it serializes json in camelCase by default.\n\n### Your code\n\n```csharp\n\nentity.ComplexProperty(e => e.DataTable)\n    .ConfigureComplexDataTable()\n    .IsRequired();\n\n\n\npublic static ComplexPropertyBuilder<DataTable> ConfigureComplexDataTable(this ComplexPropertyBuilder<DataTable> complexBuilder)\n{\n    // Use JSON conversion for the entire DataTable object, this will map to a single column in the database\n    // of type nvarchar(max) or json if supported (compatibility mode for SQL Server and Azure SQL >= 170)\n    // By default the json keys will be in PascalCase, we will override them below to be in camelCase\n    complexBuilder.ToJson();\n\n\n    // Map properties to camelCase JSON keys, this is optional but recommended for consistency and JSON standards\n    // This is all this method does, the actual storage is handled by the ToJson() call above\n    complexBuilder.PrimitiveCollection(a => a.Headers)\n        .HasJsonPropertyName(nameof(DataTable.Headers).ToCamelCase());\n\n    complexBuilder.ComplexCollection(a => a.Rows, b =>\n    {\n        b.HasJsonPropertyName(nameof(DataTable.Rows).ToCamelCase());\n\n        b.Property(x => x.Name)\n            .HasJsonPropertyName(nameof(DataTable.DataTableRow.Name).ToCamelCase());\n\n        b.Property(x => x.Uuid)\n            .HasJsonPropertyName(nameof(DataTable.DataTableRow.Uuid).ToCamelCase());\n\n        b.PrimitiveCollection(x => x.Values)\n            .HasJsonPropertyName(nameof(DataTable.DataTableRow.Values).ToCamelCase());\n    });\n\n    return complexBuilder;\n}\n\n\npublic record DataTable\n{\n    public List<string> Headers { get; init; } = [];\n    public List<DataTableRow> Rows { get; init; } = [];\n\n    public record DataTableRow\n    {\n        public Guid Uuid { get; init; } = Guid.Empty;\n        public string Name { get; init; } = string.Empty;\n        public List<string> Values { get; init; } = [];\n    }\n}\n```\n\n### Stack traces\n\n```text\nNo exception\n```\n\n### Verbose output\n\n```text\n\n```\n\n### EF Core version\n\n10.0.0-rc.2.25502.107\n\n### Database provider\n\nMicrosoft.EntityFrameworkCore.SqlServer\n\n### Target framework\n\n.NET 10 RC2\n\n### Operating system\n\nWindows 11 localy, Azure Linux service plan\n\n### IDE\n\nVisual Studio 2026","closed_by":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/37009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/37009/timeline","performed_via_github_app":null,"state_reason":"completed"}