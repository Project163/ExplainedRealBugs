{"url":"https://api.github.com/repos/dotnet/efcore/issues/27301","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/27301/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/27301/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/27301/events","html_url":"https://github.com/dotnet/efcore/issues/27301","id":1116634626,"node_id":"I_kwDOAPaMMs5Cjn4C","number":27301,"title":"Optimize hangs and stops responding.","user":{"login":"leniency","id":173730,"node_id":"MDQ6VXNlcjE3MzczMA==","avatar_url":"https://avatars.githubusercontent.com/u/173730?v=4","gravatar_id":"","url":"https://api.github.com/users/leniency","html_url":"https://github.com/leniency","followers_url":"https://api.github.com/users/leniency/followers","following_url":"https://api.github.com/users/leniency/following{/other_user}","gists_url":"https://api.github.com/users/leniency/gists{/gist_id}","starred_url":"https://api.github.com/users/leniency/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leniency/subscriptions","organizations_url":"https://api.github.com/users/leniency/orgs","repos_url":"https://api.github.com/users/leniency/repos","events_url":"https://api.github.com/users/leniency/events{/privacy}","received_events_url":"https://api.github.com/users/leniency/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":1017558838,"node_id":"MDU6TGFiZWwxMDE3NTU4ODM4","url":"https://api.github.com/repos/dotnet/efcore/labels/Servicing-approved","name":"Servicing-approved","color":"048708","default":false,"description":""},{"id":1900941630,"node_id":"MDU6TGFiZWwxOTAwOTQxNjMw","url":"https://api.github.com/repos/dotnet/efcore/labels/area-model-building","name":"area-model-building","color":"32b37b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/133","html_url":"https://github.com/dotnet/efcore/milestone/133","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/133/labels","id":7585591,"node_id":"MI_kwDOAPaMMs4Ac783","number":133,"title":"6.0.3","description":null,"creator":{"login":"leecow","id":2212879,"node_id":"MDQ6VXNlcjIyMTI4Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2212879?v=4","gravatar_id":"","url":"https://api.github.com/users/leecow","html_url":"https://github.com/leecow","followers_url":"https://api.github.com/users/leecow/followers","following_url":"https://api.github.com/users/leecow/following{/other_user}","gists_url":"https://api.github.com/users/leecow/gists{/gist_id}","starred_url":"https://api.github.com/users/leecow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leecow/subscriptions","organizations_url":"https://api.github.com/users/leecow/orgs","repos_url":"https://api.github.com/users/leecow/repos","events_url":"https://api.github.com/users/leecow/events{/privacy}","received_events_url":"https://api.github.com/users/leecow/received_events","type":"User","user_view_type":"public","site_admin":true},"open_issues":0,"closed_issues":9,"state":"closed","created_at":"2022-01-18T18:17:07Z","updated_at":"2022-03-22T00:31:20Z","due_on":null,"closed_at":"2022-03-22T00:31:20Z"},"comments":7,"created_at":"2022-01-27T19:00:33Z","updated_at":"2025-06-15T18:45:17Z","closed_at":"2022-02-15T00:02:42Z","author_association":"CONTRIBUTOR","type":{"id":1092402,"node_id":"IT_kwDOAIt-yc4AEKsy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-07-26T10:20:14Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm having troubles with the dbcontext optimizer. The tool, both the powershell and cli versions, hang at a certain point in model generation. It doesn't proceed any further, just sits and does nothing.\r\n\r\nThe various web projects that use the DbContext work fine, it's just the optimizer. Here's an extract of the verbose logs that come out. Everything builds successfully, it logs some info about the configuration, and then hangs.\r\n\r\n```\r\n> dotnet ef dbcontext optimize --output-dir CompiledModels --namespace CompiledModels -v\r\n\r\n... Builds project successfully...\r\n\r\nUsing context 'ApplicationDbContext'.\r\nFinding design-time services referenced by assembly 'Enroller.Data'...\r\nFinding design-time services referenced by assembly 'Enroller.Data'...\r\nNo referenced design-time services were found.\r\nFinding design-time services for provider 'Microsoft.EntityFrameworkCore.SqlServer'...\r\nUsing design-time services from provider 'Microsoft.EntityFrameworkCore.SqlServer'.\r\nFinding IDesignTimeServices implementations in assembly 'Enroller.Data'...\r\nNo design-time services were found.\r\n\r\nNo relationship from 'UserRole' to 'Organization' has been configured by convention...\r\n... Lots of these, everything uses explicit configuration ...\r\nThe property 'User.Address#Address.UserId' was created in shadow state because there are no eligible CLR members with a matching name...\r\n... Some of these for complex types...\r\n... and then nothing - hangs here...\r\n```\r\n I've let it sit for 20+ minutes.\r\n\r\nEF Core version: 6.0.1\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer\r\nTarget framework: .NET 6.0\r\nTool: dotnet-ef 6.0.1\r\n\r\n","closed_by":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/27301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/27301/timeline","performed_via_github_app":null,"state_reason":"completed"}