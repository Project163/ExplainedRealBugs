{"url":"https://api.github.com/repos/dotnet/efcore/issues/35239","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/35239/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/35239/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/35239/events","html_url":"https://github.com/dotnet/efcore/issues/35239","id":2705336916,"node_id":"I_kwDOAPaMMs6hQCpU","number":35239,"title":"EF9: SaveChanges() is significantly slower in .NET9 vs. .NET8 when using .ToJson() Mapping vs. PostgreSQL Legacy POCO mapping","user":{"login":"c5racing","id":11325751,"node_id":"MDQ6VXNlcjExMzI1NzUx","avatar_url":"https://avatars.githubusercontent.com/u/11325751?v=4","gravatar_id":"","url":"https://api.github.com/users/c5racing","html_url":"https://github.com/c5racing","followers_url":"https://api.github.com/users/c5racing/followers","following_url":"https://api.github.com/users/c5racing/following{/other_user}","gists_url":"https://api.github.com/users/c5racing/gists{/gist_id}","starred_url":"https://api.github.com/users/c5racing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c5racing/subscriptions","organizations_url":"https://api.github.com/users/c5racing/orgs","repos_url":"https://api.github.com/users/c5racing/repos","events_url":"https://api.github.com/users/c5racing/events{/privacy}","received_events_url":"https://api.github.com/users/c5racing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":130861068,"node_id":"MDU6TGFiZWwxMzA4NjEwNjg=","url":"https://api.github.com/repos/dotnet/efcore/labels/area-perf","name":"area-perf","color":"5319e7","default":false,"description":""},{"id":936619505,"node_id":"MDU6TGFiZWw5MzY2MTk1MDU=","url":"https://api.github.com/repos/dotnet/efcore/labels/customer-reported","name":"customer-reported","color":"a4a5f9","default":false,"description":""},{"id":8130499638,"node_id":"LA_kwDOAPaMMs8AAAAB5J2UNg","url":"https://api.github.com/repos/dotnet/efcore/labels/preview-1","name":"preview-1","color":"ACB3D7","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"maumar","id":1591930,"node_id":"MDQ6VXNlcjE1OTE5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1591930?v=4","gravatar_id":"","url":"https://api.github.com/users/maumar","html_url":"https://github.com/maumar","followers_url":"https://api.github.com/users/maumar/followers","following_url":"https://api.github.com/users/maumar/following{/other_user}","gists_url":"https://api.github.com/users/maumar/gists{/gist_id}","starred_url":"https://api.github.com/users/maumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maumar/subscriptions","organizations_url":"https://api.github.com/users/maumar/orgs","repos_url":"https://api.github.com/users/maumar/repos","events_url":"https://api.github.com/users/maumar/events{/privacy}","received_events_url":"https://api.github.com/users/maumar/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"maumar","id":1591930,"node_id":"MDQ6VXNlcjE1OTE5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1591930?v=4","gravatar_id":"","url":"https://api.github.com/users/maumar","html_url":"https://github.com/maumar","followers_url":"https://api.github.com/users/maumar/followers","following_url":"https://api.github.com/users/maumar/following{/other_user}","gists_url":"https://api.github.com/users/maumar/gists{/gist_id}","starred_url":"https://api.github.com/users/maumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maumar/subscriptions","organizations_url":"https://api.github.com/users/maumar/orgs","repos_url":"https://api.github.com/users/maumar/repos","events_url":"https://api.github.com/users/maumar/events{/privacy}","received_events_url":"https://api.github.com/users/maumar/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/209","html_url":"https://github.com/dotnet/efcore/milestone/209","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/209/labels","id":12021339,"node_id":"MI_kwDOAPaMMs4At25b","number":209,"title":"9.0.2","description":null,"creator":{"login":"maumar","id":1591930,"node_id":"MDQ6VXNlcjE1OTE5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1591930?v=4","gravatar_id":"","url":"https://api.github.com/users/maumar","html_url":"https://github.com/maumar","followers_url":"https://api.github.com/users/maumar/followers","following_url":"https://api.github.com/users/maumar/following{/other_user}","gists_url":"https://api.github.com/users/maumar/gists{/gist_id}","starred_url":"https://api.github.com/users/maumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maumar/subscriptions","organizations_url":"https://api.github.com/users/maumar/orgs","repos_url":"https://api.github.com/users/maumar/repos","events_url":"https://api.github.com/users/maumar/events{/privacy}","received_events_url":"https://api.github.com/users/maumar/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2024-12-10T03:44:52Z","updated_at":"2025-02-05T21:49:43Z","due_on":null,"closed_at":"2025-02-05T21:49:43Z"},"comments":5,"created_at":"2024-11-29T14:42:35Z","updated_at":"2025-02-10T22:11:27Z","closed_at":"2025-01-06T21:57:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We use PostgreSQL and are in the process of migrating from .NET8 to .NET9 and in doing so, changing from the Legacy POCO mapping to the newer `.ToJson()` Mapping.\n\nIn the attached sample, there is no data actually being modified.  In all cases, `dbContext.ChangeTracker.HasChanges();` returns false.\n\n**.NET8, version 8.0.11**\nLegacy Poco Mapping:  0ms\n.ToJson():  300ms\n\n**.NET9, version 9.0.0**\nLegacy Poco Mapping:  0ms\n.ToJson():  2500ms\n\nIn both cases, `.ToJson()` takes longer; however, the difference between .NET8 and .NET9 is 10x more.\n\nThe sample references .NET9; however, can be changed to .NET8 for testing.  It also relies on Docker for Testcontainers.PostgreSql\n\n[https://drive.google.com/file/d/1A_VoN9XgrogMEeevV7mtLh5c2s-Ds2rt/view?usp=drive_link](https://drive.google.com/file/d/1A_VoN9XgrogMEeevV7mtLh5c2s-Ds2rt/view?usp=drive_link)","closed_by":{"login":"maumar","id":1591930,"node_id":"MDQ6VXNlcjE1OTE5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1591930?v=4","gravatar_id":"","url":"https://api.github.com/users/maumar","html_url":"https://github.com/maumar","followers_url":"https://api.github.com/users/maumar/followers","following_url":"https://api.github.com/users/maumar/following{/other_user}","gists_url":"https://api.github.com/users/maumar/gists{/gist_id}","starred_url":"https://api.github.com/users/maumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maumar/subscriptions","organizations_url":"https://api.github.com/users/maumar/orgs","repos_url":"https://api.github.com/users/maumar/repos","events_url":"https://api.github.com/users/maumar/events{/privacy}","received_events_url":"https://api.github.com/users/maumar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/35239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/35239/timeline","performed_via_github_app":null,"state_reason":"completed"}