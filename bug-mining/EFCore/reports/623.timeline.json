[{"id":16066197456,"node_id":"LE_lADOAPaMMs6niASCzwAAAAO9nrfQ","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066197456","actor":{"login":"henriquewr","id":111216098,"node_id":"U_kgDOBqEF4g","avatar_url":"https://avatars.githubusercontent.com/u/111216098?v=4","gravatar_id":"","url":"https://api.github.com/users/henriquewr","html_url":"https://github.com/henriquewr","followers_url":"https://api.github.com/users/henriquewr/followers","following_url":"https://api.github.com/users/henriquewr/following{/other_user}","gists_url":"https://api.github.com/users/henriquewr/gists{/gist_id}","starred_url":"https://api.github.com/users/henriquewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henriquewr/subscriptions","organizations_url":"https://api.github.com/users/henriquewr/orgs","repos_url":"https://api.github.com/users/henriquewr/repos","events_url":"https://api.github.com/users/henriquewr/events{/privacy}","received_events_url":"https://api.github.com/users/henriquewr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-25T02:40:40Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"actor":{"login":"henriquewr","id":111216098,"node_id":"U_kgDOBqEF4g","avatar_url":"https://avatars.githubusercontent.com/u/111216098?v=4","gravatar_id":"","url":"https://api.github.com/users/henriquewr","html_url":"https://github.com/henriquewr","followers_url":"https://api.github.com/users/henriquewr/followers","following_url":"https://api.github.com/users/henriquewr/following{/other_user}","gists_url":"https://api.github.com/users/henriquewr/gists{/gist_id}","starred_url":"https://api.github.com/users/henriquewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henriquewr/subscriptions","organizations_url":"https://api.github.com/users/henriquewr/orgs","repos_url":"https://api.github.com/users/henriquewr/repos","events_url":"https://api.github.com/users/henriquewr/events{/privacy}","received_events_url":"https://api.github.com/users/henriquewr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-25T03:45:06Z","updated_at":"2025-01-25T03:45:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/35529","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/35529/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/35529/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/35529/events","html_url":"https://github.com/dotnet/efcore/pull/35529","id":2810738856,"node_id":"PR_kwDOAPaMMs6I99eE","number":35529,"title":"Fixed lazy loading thread safety","user":{"login":"henriquewr","id":111216098,"node_id":"U_kgDOBqEF4g","avatar_url":"https://avatars.githubusercontent.com/u/111216098?v=4","gravatar_id":"","url":"https://api.github.com/users/henriquewr","html_url":"https://github.com/henriquewr","followers_url":"https://api.github.com/users/henriquewr/followers","following_url":"https://api.github.com/users/henriquewr/following{/other_user}","gists_url":"https://api.github.com/users/henriquewr/gists{/gist_id}","starred_url":"https://api.github.com/users/henriquewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henriquewr/subscriptions","organizations_url":"https://api.github.com/users/henriquewr/orgs","repos_url":"https://api.github.com/users/henriquewr/repos","events_url":"https://api.github.com/users/henriquewr/events{/privacy}","received_events_url":"https://api.github.com/users/henriquewr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2402623482,"node_id":"MDU6TGFiZWwyNDAyNjIzNDgy","url":"https://api.github.com/repos/dotnet/efcore/labels/community-contribution","name":"community-contribution","color":"004caa","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":6,"created_at":"2025-01-25T03:45:05Z","updated_at":"2025-02-01T03:54:09Z","closed_at":"2025-02-01T02:02:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/dotnet/efcore/pulls/35529","html_url":"https://github.com/dotnet/efcore/pull/35529","diff_url":"https://github.com/dotnet/efcore/pull/35529.diff","patch_url":"https://github.com/dotnet/efcore/pull/35529.patch","merged_at":"2025-02-01T02:02:56Z"},"body":"Added sync for lazy loading\r\n\r\nFixes #35528","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/35529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/35529/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":16066521560,"node_id":"LE_lADOAPaMMs6niASCzwAAAAO9o6nY","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066521560","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-25T05:15:16Z","label":{"name":"area-query","color":"32b37b"},"performed_via_github_app":null},{"id":16066521562,"node_id":"LE_lADOAPaMMs6niASCzwAAAAO9o6na","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066521562","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-25T05:15:16Z","label":{"name":"area-change-tracking","color":"32b37b"},"performed_via_github_app":null},{"id":16066522097,"node_id":"AE_lADOAPaMMs6niASCzwAAAAO9o6vx","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066522097","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2025-01-25T05:15:24Z","assignee":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":16066522394,"node_id":"LE_lADOAPaMMs6niASCzwAAAAO9o60a","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066522394","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-25T05:15:29Z","label":{"name":"type-bug","color":"f7c6c7"},"performed_via_github_app":null},{"id":16066522543,"node_id":"MIE_lADOAPaMMs6niASCzwAAAAO9o62v","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16066522543","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2025-01-25T05:15:34Z","milestone":{"title":"10.0.0"},"performed_via_github_app":null},{"id":16113840108,"node_id":"LE_lADOAPaMMs6niASCzwAAAAPAda_s","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16113840108","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-29T20:25:44Z","label":{"name":"closed-fixed","color":"777777"},"performed_via_github_app":null},{"id":16113840119,"node_id":"LE_lADOAPaMMs6niASCzwAAAAPAda_3","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16113840119","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-01-29T20:25:44Z","label":{"name":"community-contribution","color":"004caa"},"performed_via_github_app":null},{"id":16113840468,"node_id":"UNE_lADOAPaMMs6niASCzwAAAAPAdbFU","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16113840468","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2025-01-29T20:25:47Z","assignee":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":16147833495,"node_id":"CE_lADOAPaMMs6niASCzwAAAAPCfGKX","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16147833495","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-02-01T02:02:58Z","state_reason":null,"performed_via_github_app":null},{"id":16147833496,"node_id":"CE_lADOAPaMMs6niASCzwAAAAPCfGKY","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16147833496","actor":{"login":"AndriySvyryd","id":6539701,"node_id":"MDQ6VXNlcjY1Mzk3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6539701?v=4","gravatar_id":"","url":"https://api.github.com/users/AndriySvyryd","html_url":"https://github.com/AndriySvyryd","followers_url":"https://api.github.com/users/AndriySvyryd/followers","following_url":"https://api.github.com/users/AndriySvyryd/following{/other_user}","gists_url":"https://api.github.com/users/AndriySvyryd/gists{/gist_id}","starred_url":"https://api.github.com/users/AndriySvyryd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndriySvyryd/subscriptions","organizations_url":"https://api.github.com/users/AndriySvyryd/orgs","repos_url":"https://api.github.com/users/AndriySvyryd/repos","events_url":"https://api.github.com/users/AndriySvyryd/events{/privacy}","received_events_url":"https://api.github.com/users/AndriySvyryd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a149ce7a057bd304ea382c3dba7434268f099398","commit_url":"https://api.github.com/repos/dotnet/efcore/commits/a149ce7a057bd304ea382c3dba7434268f099398","created_at":"2025-02-01T02:02:58Z","state_reason":null,"performed_via_github_app":null},{"id":16153132152,"node_id":"REFE_lADOAPaMMs6niASCzwAAAAPCzTx4","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16153132152","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a149ce7a057bd304ea382c3dba7434268f099398","commit_url":"https://api.github.com/repos/roji/efcore/commits/a149ce7a057bd304ea382c3dba7434268f099398","created_at":"2025-02-02T16:35:27Z","performed_via_github_app":null},{"id":16271930372,"node_id":"LE_lADOAPaMMs6niASCzwAAAAPJ4fQE","url":"https://api.github.com/repos/dotnet/efcore/issues/events/16271930372","actor":{"login":"maumar","id":1591930,"node_id":"MDQ6VXNlcjE1OTE5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1591930?v=4","gravatar_id":"","url":"https://api.github.com/users/maumar","html_url":"https://github.com/maumar","followers_url":"https://api.github.com/users/maumar/followers","following_url":"https://api.github.com/users/maumar/following{/other_user}","gists_url":"https://api.github.com/users/maumar/gists{/gist_id}","starred_url":"https://api.github.com/users/maumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maumar/subscriptions","organizations_url":"https://api.github.com/users/maumar/orgs","repos_url":"https://api.github.com/users/maumar/repos","events_url":"https://api.github.com/users/maumar/events{/privacy}","received_events_url":"https://api.github.com/users/maumar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-02-11T22:05:06Z","label":{"name":"preview-2","color":"ACB3D7"},"performed_via_github_app":null},{"actor":{"login":"henriquewr","id":111216098,"node_id":"U_kgDOBqEF4g","avatar_url":"https://avatars.githubusercontent.com/u/111216098?v=4","gravatar_id":"","url":"https://api.github.com/users/henriquewr","html_url":"https://github.com/henriquewr","followers_url":"https://api.github.com/users/henriquewr/followers","following_url":"https://api.github.com/users/henriquewr/following{/other_user}","gists_url":"https://api.github.com/users/henriquewr/gists{/gist_id}","starred_url":"https://api.github.com/users/henriquewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henriquewr/subscriptions","organizations_url":"https://api.github.com/users/henriquewr/orgs","repos_url":"https://api.github.com/users/henriquewr/repos","events_url":"https://api.github.com/users/henriquewr/events{/privacy}","received_events_url":"https://api.github.com/users/henriquewr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-24T05:12:44Z","updated_at":"2025-03-24T05:12:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dotnet/efcore/issues/35832","repository_url":"https://api.github.com/repos/dotnet/efcore","labels_url":"https://api.github.com/repos/dotnet/efcore/issues/35832/labels{/name}","comments_url":"https://api.github.com/repos/dotnet/efcore/issues/35832/comments","events_url":"https://api.github.com/repos/dotnet/efcore/issues/35832/events","html_url":"https://github.com/dotnet/efcore/issues/35832","id":2941992323,"node_id":"I_kwDOAPaMMs6vWz2D","number":35832,"title":"Lazy loader performance issues","user":{"login":"henriquewr","id":111216098,"node_id":"U_kgDOBqEF4g","avatar_url":"https://avatars.githubusercontent.com/u/111216098?v=4","gravatar_id":"","url":"https://api.github.com/users/henriquewr","html_url":"https://github.com/henriquewr","followers_url":"https://api.github.com/users/henriquewr/followers","following_url":"https://api.github.com/users/henriquewr/following{/other_user}","gists_url":"https://api.github.com/users/henriquewr/gists{/gist_id}","starred_url":"https://api.github.com/users/henriquewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henriquewr/subscriptions","organizations_url":"https://api.github.com/users/henriquewr/orgs","repos_url":"https://api.github.com/users/henriquewr/repos","events_url":"https://api.github.com/users/henriquewr/events{/privacy}","received_events_url":"https://api.github.com/users/henriquewr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":130861068,"node_id":"MDU6TGFiZWwxMzA4NjEwNjg=","url":"https://api.github.com/repos/dotnet/efcore/labels/area-perf","name":"area-perf","color":"5319e7","default":false,"description":""},{"id":1901166749,"node_id":"MDU6TGFiZWwxOTAxMTY2NzQ5","url":"https://api.github.com/repos/dotnet/efcore/labels/area-change-tracking","name":"area-change-tracking","color":"32b37b","default":false,"description":""},{"id":2402623482,"node_id":"MDU6TGFiZWwyNDAyNjIzNDgy","url":"https://api.github.com/repos/dotnet/efcore/labels/community-contribution","name":"community-contribution","color":"004caa","default":false,"description":""},{"id":8345402620,"node_id":"LA_kwDOAPaMMs8AAAAB8Wy8_A","url":"https://api.github.com/repos/dotnet/efcore/labels/preview-4","name":"preview-4","color":"ACB3D7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/dotnet/efcore/milestones/204","html_url":"https://github.com/dotnet/efcore/milestone/204","labels_url":"https://api.github.com/repos/dotnet/efcore/milestones/204/labels","id":11480673,"node_id":"MI_kwDOAPaMMs4Ary5h","number":204,"title":"10.0.0","description":"","creator":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":193,"state":"open","created_at":"2024-08-23T12:48:26Z","updated_at":"2025-11-05T08:24:30Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2025-03-24T04:59:26Z","updated_at":"2025-06-15T20:15:12Z","closed_at":"2025-03-25T21:40:13Z","author_association":"CONTRIBUTOR","type":{"id":1092406,"node_id":"IT_kwDOAIt-yc4AEKs2","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T11:45:43Z","updated_at":"2024-10-08T09:10:05Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":16157746,"node_id":"MDEwOlJlcG9zaXRvcnkxNjE1Nzc0Ng==","name":"efcore","full_name":"dotnet/efcore","private":false,"owner":{"login":"dotnet","id":9141961,"node_id":"MDEyOk9yZ2FuaXphdGlvbjkxNDE5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/9141961?v=4","gravatar_id":"","url":"https://api.github.com/users/dotnet","html_url":"https://github.com/dotnet","followers_url":"https://api.github.com/users/dotnet/followers","following_url":"https://api.github.com/users/dotnet/following{/other_user}","gists_url":"https://api.github.com/users/dotnet/gists{/gist_id}","starred_url":"https://api.github.com/users/dotnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotnet/subscriptions","organizations_url":"https://api.github.com/users/dotnet/orgs","repos_url":"https://api.github.com/users/dotnet/repos","events_url":"https://api.github.com/users/dotnet/events{/privacy}","received_events_url":"https://api.github.com/users/dotnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dotnet/efcore","description":"EF Core is a modern object-database mapper for .NET. It supports LINQ queries, change tracking, updates, and schema migrations.","fork":false,"url":"https://api.github.com/repos/dotnet/efcore","forks_url":"https://api.github.com/repos/dotnet/efcore/forks","keys_url":"https://api.github.com/repos/dotnet/efcore/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dotnet/efcore/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dotnet/efcore/teams","hooks_url":"https://api.github.com/repos/dotnet/efcore/hooks","issue_events_url":"https://api.github.com/repos/dotnet/efcore/issues/events{/number}","events_url":"https://api.github.com/repos/dotnet/efcore/events","assignees_url":"https://api.github.com/repos/dotnet/efcore/assignees{/user}","branches_url":"https://api.github.com/repos/dotnet/efcore/branches{/branch}","tags_url":"https://api.github.com/repos/dotnet/efcore/tags","blobs_url":"https://api.github.com/repos/dotnet/efcore/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dotnet/efcore/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dotnet/efcore/git/refs{/sha}","trees_url":"https://api.github.com/repos/dotnet/efcore/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dotnet/efcore/statuses/{sha}","languages_url":"https://api.github.com/repos/dotnet/efcore/languages","stargazers_url":"https://api.github.com/repos/dotnet/efcore/stargazers","contributors_url":"https://api.github.com/repos/dotnet/efcore/contributors","subscribers_url":"https://api.github.com/repos/dotnet/efcore/subscribers","subscription_url":"https://api.github.com/repos/dotnet/efcore/subscription","commits_url":"https://api.github.com/repos/dotnet/efcore/commits{/sha}","git_commits_url":"https://api.github.com/repos/dotnet/efcore/git/commits{/sha}","comments_url":"https://api.github.com/repos/dotnet/efcore/comments{/number}","issue_comment_url":"https://api.github.com/repos/dotnet/efcore/issues/comments{/number}","contents_url":"https://api.github.com/repos/dotnet/efcore/contents/{+path}","compare_url":"https://api.github.com/repos/dotnet/efcore/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dotnet/efcore/merges","archive_url":"https://api.github.com/repos/dotnet/efcore/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dotnet/efcore/downloads","issues_url":"https://api.github.com/repos/dotnet/efcore/issues{/number}","pulls_url":"https://api.github.com/repos/dotnet/efcore/pulls{/number}","milestones_url":"https://api.github.com/repos/dotnet/efcore/milestones{/number}","notifications_url":"https://api.github.com/repos/dotnet/efcore/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dotnet/efcore/labels{/name}","releases_url":"https://api.github.com/repos/dotnet/efcore/releases{/id}","deployments_url":"https://api.github.com/repos/dotnet/efcore/deployments","created_at":"2014-01-23T00:52:01Z","updated_at":"2025-11-10T14:21:49Z","pushed_at":"2025-11-10T05:59:58Z","git_url":"git://github.com/dotnet/efcore.git","ssh_url":"git@github.com:dotnet/efcore.git","clone_url":"https://github.com/dotnet/efcore.git","svn_url":"https://github.com/dotnet/efcore","homepage":"https://learn.microsoft.com/ef/","size":215987,"stargazers_count":14455,"watchers_count":14455,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3324,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2430,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aspnet-product","c-sharp","database","dotnet-core","dotnet-framework","dotnet-standard","entity-framework","hacktoberfest","orm"],"visibility":"public","forks":3324,"open_issues":2430,"watchers":14455,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"The current implementation of LazyLoader is using AsyncLocal\nthe performance issue occurs when the GC collects the AsyncLocal instance created by the LazyLoader\n\nOn my tests loading a list of around 570 items takes:\n674 ms with AsyncLocal\n3 ms without AsyncLocal\n\n![Image](https://github.com/user-attachments/assets/71c3214b-f055-4d41-bae6-2c70c2a91853)\n\nThis issue is related to #35528 \n\nCode that reproduces the issue\nI didn't use BenchmarkDotNet because it takes a very, very long time to complete\nand that code reproduces the bug\n```\n    internal class Program\n    {\n        static void Main()\n        {\n            //change the implementation of LazyLoader in TestDbContext class\n            var dbContext = new TestDbContext();\n\n            dbContext.LazyLoadEntity.ExecuteDelete();\n            dbContext.SomeEntity.ExecuteDelete();\n\n            for (int i = 0; i < 10000; i++)\n            {\n                dbContext.LazyLoadEntity.Add(new LazyLoadEntity\n                {\n                    SomeEntity = new SomeEntity\n                    {\n                        StringData = Random.Shared.Next().ToString()\n                    }\n                });\n            }\n\n            dbContext.SaveChanges();\n\n            dbContext.Dispose();\n\n            // Get rid of any caches\n            dbContext = new TestDbContext();\n\n            var sw = Stopwatch.StartNew();\n\n            var list = dbContext.LazyLoadEntity.ToList();\n\n            foreach(var item in list)\n            {\n                var variable = item.SomeEntity.Id;\n            }\n\n            sw.Stop();\n\n            Console.WriteLine($\"Elapsed {sw.ElapsedMilliseconds} ms\");\n        }\n    }\n\n    public class TestDbContext : DbContext\n    {\n        public TestDbContext() : base()\n        {\n        }\n\n        protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n        {\n            optionsBuilder.UseSqlServer(CONNECTION_STRING);\n            optionsBuilder.UseLazyLoadingProxies();\n\n\n            //comment/uncomment the implementation\n            optionsBuilder.ReplaceService<ILazyLoader, LazyLoaderAsyncLocal>(); //current implementation\n            //optionsBuilder.ReplaceService<ILazyLoader, LazyLoaderWithoutAsyncLocal>();\n\n\n            base.OnConfiguring(optionsBuilder);\n        }\n\n        public DbSet<SomeEntity> SomeEntity { get; set; }\n        public DbSet<LazyLoadEntity> LazyLoadEntity { get; set; }\n    }\n\n    public class LazyLoaderAsyncLocal : ILazyLoader, IInjectableService\n    {\n        private QueryTrackingBehavior? _queryTrackingBehavior;\n        private bool _disposed;\n        private bool _detached;\n        private IDictionary<string, bool>? _loadedStates;\n        private readonly Lock _isLoadingLock = new Lock();\n        private readonly Dictionary<(object Entity, string NavigationName), (TaskCompletionSource TaskCompletionSource, AsyncLocal<int> Depth)> _isLoading = new(NavEntryEqualityComparer.Instance);\n        private HashSet<string>? _nonLazyNavigations;\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public LazyLoaderAsyncLocal(\n            ICurrentDbContext currentContext,\n            IDiagnosticsLogger<DbLoggerCategory.Infrastructure> logger)\n        {\n            Context = currentContext.Context;\n            Logger = logger;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Injected(DbContext context, object entity, QueryTrackingBehavior? queryTrackingBehavior, ITypeBase structuralType)\n        {\n            _queryTrackingBehavior = queryTrackingBehavior;\n            _nonLazyNavigations ??= InitNavigationsMetadata(\n                structuralType as IEntityType\n                ?? throw new NotImplementedException(\"Navigations on complex types are not supported\"));\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void SetLoaded(\n            object entity,\n            [CallerMemberName] string navigationName = \"\",\n            bool loaded = true)\n        {\n            _loadedStates ??= new Dictionary<string, bool>();\n\n            _loadedStates[navigationName] = loaded;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual bool IsLoaded(object entity, string navigationName = \"\")\n            => _loadedStates != null\n                && _loadedStates.TryGetValue(navigationName, out var loaded)\n                && loaded;\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        protected virtual IDiagnosticsLogger<DbLoggerCategory.Infrastructure> Logger { get; }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        protected virtual DbContext? Context { get; set; }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        // ReSharper disable once AssignNullToNotNullAttribute\n        public virtual void Load(object entity, [CallerMemberName] string navigationName = \"\")\n        {\n            var navEntry = (entity, navigationName);\n\n            bool exists;\n            (TaskCompletionSource TaskCompletionSource, AsyncLocal<int> Depth) isLoadingValue;\n\n            lock (_isLoadingLock)\n            {\n                ref var refIsLoadingValue = ref CollectionsMarshal.GetValueRefOrAddDefault(_isLoading, navEntry, out exists);\n                if (!exists)\n                {\n                    refIsLoadingValue = (new(), new());\n                }\n                isLoadingValue = refIsLoadingValue!;\n                isLoadingValue.Depth.Value++;\n            }\n\n            if (exists)\n            {\n                // Only waits for the outermost call on the call stack. See  #35528.\n                if (isLoadingValue.Depth.Value == 1)\n                {\n                    isLoadingValue.TaskCompletionSource.Task.Wait();\n                }\n                return;\n            }\n\n            try\n            {\n                // ShouldLoad is called after _isLoading.Add because it could attempt to load the property. See #13138.\n                if (ShouldLoad(entity, navigationName, out var entry))\n                {\n                    try\n                    {\n                        entry.Load(\n                            _queryTrackingBehavior == QueryTrackingBehavior.NoTrackingWithIdentityResolution\n                                ? LoadOptions.ForceIdentityResolution\n                                : LoadOptions.None);\n                    }\n                    catch\n                    {\n                        entry.IsLoaded = false;\n                        throw;\n                    }\n                }\n            }\n            finally\n            {\n                isLoadingValue.TaskCompletionSource.TrySetResult();\n                lock (_isLoadingLock)\n                {\n                    _isLoading.Remove(navEntry);\n                }\n            }\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual async Task LoadAsync(\n            object entity,\n            CancellationToken cancellationToken = default,\n            [CallerMemberName] string navigationName = \"\")\n        {\n            var navEntry = (entity, navigationName);\n\n            bool exists;\n            (TaskCompletionSource TaskCompletionSource, AsyncLocal<int> Depth) isLoadingValue;\n\n            lock (_isLoadingLock)\n            {\n                ref var refIsLoadingValue = ref CollectionsMarshal.GetValueRefOrAddDefault(_isLoading, navEntry, out exists);\n                if (!exists)\n                {\n                    refIsLoadingValue = (new(), new());\n                }\n                isLoadingValue = refIsLoadingValue!;\n                isLoadingValue.Depth.Value++;\n            }\n\n            if (exists)\n            {\n                // Only waits for the outermost call on the call stack. See  #35528.\n                if (isLoadingValue.Depth.Value == 1)\n                {\n                    await isLoadingValue.TaskCompletionSource.Task.WaitAsync(cancellationToken).ConfigureAwait(false);\n                }\n                return;\n            }\n\n            try\n            {\n                // ShouldLoad is called after _isLoading.Add because it could attempt to load the property. See #13138.\n                if (ShouldLoad(entity, navigationName, out var entry))\n                {\n                    try\n                    {\n                        await entry.LoadAsync(\n                                   _queryTrackingBehavior == QueryTrackingBehavior.NoTrackingWithIdentityResolution\n                                       ? LoadOptions.ForceIdentityResolution\n                                       : LoadOptions.None,\n                                   cancellationToken).ConfigureAwait(false);\n                    }\n                    catch\n                    {\n                        entry.IsLoaded = false;\n                        throw;\n                    }\n                }\n            }\n            finally\n            {\n                isLoadingValue.TaskCompletionSource.TrySetResult();\n                lock (_isLoadingLock)\n                {\n                    _isLoading.Remove(navEntry);\n                }\n            }\n        }\n\n        private sealed class NavEntryEqualityComparer : IEqualityComparer<(object Entity, string NavigationName)>\n        {\n            public static readonly NavEntryEqualityComparer Instance = new();\n\n            private NavEntryEqualityComparer()\n            {\n            }\n\n            public bool Equals((object Entity, string NavigationName) x, (object Entity, string NavigationName) y)\n                => ReferenceEquals(x.Entity, y.Entity)\n                    && string.Equals(x.NavigationName, y.NavigationName, StringComparison.Ordinal);\n\n            public int GetHashCode((object Entity, string NavigationName) obj)\n                => HashCode.Combine(RuntimeHelpers.GetHashCode(obj.Entity), obj.NavigationName.GetHashCode());\n        }\n\n        private bool ShouldLoad(object entity, string navigationName, [NotNullWhen(true)] out NavigationEntry? navigationEntry)\n        {\n            if (!_detached && !IsLoaded(entity, navigationName))\n            {\n                if (_nonLazyNavigations == null\n                    || !_nonLazyNavigations.Contains(navigationName))\n                {\n                    if (_disposed)\n                    {\n                        Logger.LazyLoadOnDisposedContextWarning(Context, entity, navigationName);\n                    }\n                    else if (Context!.ChangeTracker.LazyLoadingEnabled)\n                    {\n                        navigationEntry = Context.Entry(entity).Navigation(navigationName); // Will use local-DetectChanges, if enabled.\n                        if (!navigationEntry.IsLoaded) // Check again because the nav may be loaded without the loader knowing\n                        {\n                            Logger.NavigationLazyLoading(Context, entity, navigationName);\n\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            navigationEntry = null;\n            return false;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Dispose()\n        {\n            Context = null;\n            _disposed = true;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual bool Detaching(DbContext context, object entity)\n        {\n            _detached = true;\n            Dispose();\n            return false;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Attaching(DbContext context, IEntityType entityType, object entity)\n        {\n            _disposed = false;\n            _detached = false;\n            Context = context;\n            _nonLazyNavigations ??= InitNavigationsMetadata(entityType);\n        }\n\n        private HashSet<string> InitNavigationsMetadata(IEntityType entityType)\n            => entityType!.GetNavigations()\n                .Cast<INavigationBase>()\n                .Concat(entityType.GetSkipNavigations())\n                .Where(n => !n.LazyLoadingEnabled)\n                .Select(t => t.Name)\n                .ToHashSet();\n    }\n\n    public class LazyLoaderWithoutAsyncLocal : ILazyLoader, IInjectableService\n    {\n        private QueryTrackingBehavior? _queryTrackingBehavior;\n        private bool _disposed;\n        private bool _detached;\n        private IDictionary<string, bool>? _loadedStates;\n        private readonly Lock _isLoadingLock = new Lock();\n        private readonly Dictionary<(object Entity, string NavigationName), (TaskCompletionSource TaskCompletionSource, int ThreadId)> _isLoading = new(NavEntryEqualityComparer.Instance);\n        private HashSet<string>? _nonLazyNavigations;\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public LazyLoaderWithoutAsyncLocal(\n            ICurrentDbContext currentContext,\n            IDiagnosticsLogger<DbLoggerCategory.Infrastructure> logger)\n        {\n            Context = currentContext.Context;\n            Logger = logger;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Injected(DbContext context, object entity, QueryTrackingBehavior? queryTrackingBehavior, ITypeBase structuralType)\n        {\n            _queryTrackingBehavior = queryTrackingBehavior;\n            _nonLazyNavigations ??= InitNavigationsMetadata(\n                structuralType as IEntityType\n                ?? throw new NotImplementedException(\"Navigations on complex types are not supported\"));\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void SetLoaded(\n            object entity,\n            [CallerMemberName] string navigationName = \"\",\n            bool loaded = true)\n        {\n            _loadedStates ??= new Dictionary<string, bool>();\n\n            _loadedStates[navigationName] = loaded;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual bool IsLoaded(object entity, string navigationName = \"\")\n            => _loadedStates != null\n                && _loadedStates.TryGetValue(navigationName, out var loaded)\n                && loaded;\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        protected virtual IDiagnosticsLogger<DbLoggerCategory.Infrastructure> Logger { get; }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        protected virtual DbContext? Context { get; set; }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        // ReSharper disable once AssignNullToNotNullAttribute\n        public virtual void Load(object entity, [CallerMemberName] string navigationName = \"\")\n        {\n            var navEntry = (entity, navigationName);\n\n            bool exists;\n            (TaskCompletionSource TaskCompletionSource, int ThreadId) isLoadingValue;\n            var threadId = Environment.CurrentManagedThreadId;\n\n            lock (_isLoadingLock)\n            {\n                ref var refIsLoadingValue = ref CollectionsMarshal.GetValueRefOrAddDefault(_isLoading, navEntry, out exists);\n                if (!exists)\n                {\n                    refIsLoadingValue = (new(), threadId);\n                }\n                isLoadingValue = refIsLoadingValue!;\n            }\n\n            if (exists)\n            {\n                // If it's the same thread it comes from a recursive ShouldLoad call, and waiting for it makes a deadlock,  See  #35528, #35832.\n                if (threadId != isLoadingValue.ThreadId)\n                {\n                    isLoadingValue.TaskCompletionSource.Task.Wait();\n                }\n                return;\n            }\n\n            try\n            {\n                // ShouldLoad is called after _isLoading.Add because it could attempt to load the property. See #13138.\n                if (ShouldLoad(entity, navigationName, out var entry))\n                {\n                    try\n                    {\n                        entry.Load(\n                            _queryTrackingBehavior == QueryTrackingBehavior.NoTrackingWithIdentityResolution\n                                ? LoadOptions.ForceIdentityResolution\n                                : LoadOptions.None);\n                    }\n                    catch\n                    {\n                        entry.IsLoaded = false;\n                        throw;\n                    }\n                }\n            }\n            finally\n            {\n                isLoadingValue.TaskCompletionSource.TrySetResult();\n                lock (_isLoadingLock)\n                {\n                    _isLoading.Remove(navEntry);\n                }\n            }\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual async Task LoadAsync(\n            object entity,\n            CancellationToken cancellationToken = default,\n            [CallerMemberName] string navigationName = \"\")\n        {\n            var navEntry = (entity, navigationName);\n\n            bool exists;\n            (TaskCompletionSource TaskCompletionSource, int ThreadId) isLoadingValue;\n\n            lock (_isLoadingLock)\n            {\n                ref var refIsLoadingValue = ref CollectionsMarshal.GetValueRefOrAddDefault(_isLoading, navEntry, out exists);\n                if (!exists)\n                {\n                    refIsLoadingValue = (new(), 0);\n                }\n                isLoadingValue = refIsLoadingValue!;\n            }\n\n            if (exists)\n            {\n                await isLoadingValue.TaskCompletionSource.Task.WaitAsync(cancellationToken).ConfigureAwait(false);\n                return;\n            }\n\n            try\n            {\n                // ShouldLoad is called after _isLoading.Add because it could attempt to load the property. See #13138.\n                if (ShouldLoad(entity, navigationName, out var entry))\n                {\n                    try\n                    {\n                        await entry.LoadAsync(\n                                   _queryTrackingBehavior == QueryTrackingBehavior.NoTrackingWithIdentityResolution\n                                       ? LoadOptions.ForceIdentityResolution\n                                       : LoadOptions.None,\n                                   cancellationToken).ConfigureAwait(false);\n                    }\n                    catch\n                    {\n                        entry.IsLoaded = false;\n                        throw;\n                    }\n                }\n            }\n            finally\n            {\n                isLoadingValue.TaskCompletionSource.TrySetResult();\n                lock (_isLoadingLock)\n                {\n                    _isLoading.Remove(navEntry);\n                }\n            }\n        }\n\n        private sealed class NavEntryEqualityComparer : IEqualityComparer<(object Entity, string NavigationName)>\n        {\n            public static readonly NavEntryEqualityComparer Instance = new();\n\n            private NavEntryEqualityComparer()\n            {\n            }\n\n            public bool Equals((object Entity, string NavigationName) x, (object Entity, string NavigationName) y)\n                => ReferenceEquals(x.Entity, y.Entity)\n                    && string.Equals(x.NavigationName, y.NavigationName, StringComparison.Ordinal);\n\n            public int GetHashCode((object Entity, string NavigationName) obj)\n                => HashCode.Combine(RuntimeHelpers.GetHashCode(obj.Entity), obj.NavigationName.GetHashCode());\n        }\n\n        private bool ShouldLoad(object entity, string navigationName, [NotNullWhen(true)] out NavigationEntry? navigationEntry)\n        {\n            if (!_detached && !IsLoaded(entity, navigationName))\n            {\n                if (_nonLazyNavigations == null\n                    || !_nonLazyNavigations.Contains(navigationName))\n                {\n                    if (_disposed)\n                    {\n                        Logger.LazyLoadOnDisposedContextWarning(Context, entity, navigationName);\n                    }\n                    else if (Context!.ChangeTracker.LazyLoadingEnabled)\n                    {\n                        navigationEntry = Context.Entry(entity).Navigation(navigationName); // Will use local-DetectChanges, if enabled.\n                        if (!navigationEntry.IsLoaded) // Check again because the nav may be loaded without the loader knowing\n                        {\n                            Logger.NavigationLazyLoading(Context, entity, navigationName);\n\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            navigationEntry = null;\n            return false;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Dispose()\n        {\n            Context = null;\n            _disposed = true;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual bool Detaching(DbContext context, object entity)\n        {\n            _detached = true;\n            Dispose();\n            return false;\n        }\n\n        /// <summary>\n        ///     This is an internal API that supports the Entity Framework Core infrastructure and not subject to\n        ///     the same compatibility standards as public APIs. It may be changed or removed without notice in\n        ///     any release. You should only use it directly in your code with extreme caution and knowing that\n        ///     doing so can result in application failures when updating to a new Entity Framework Core release.\n        /// </summary>\n        public virtual void Attaching(DbContext context, IEntityType entityType, object entity)\n        {\n            _disposed = false;\n            _detached = false;\n            Context = context;\n            _nonLazyNavigations ??= InitNavigationsMetadata(entityType);\n        }\n\n        private HashSet<string> InitNavigationsMetadata(IEntityType entityType)\n            => entityType!.GetNavigations()\n                .Cast<INavigationBase>()\n                .Concat(entityType.GetSkipNavigations())\n                .Where(n => !n.LazyLoadingEnabled)\n                .Select(t => t.Name)\n                .ToHashSet();\n    }\n\n\n    public class LazyLoadEntity\n    {\n        [Key]\n        public int Id { get; set; }\n\n        [ForeignKey(nameof(SomeEntity))]\n        public int SomeEntityId { get; set; }\n\n        [ForeignKey(nameof(SomeEntityId))]\n        public virtual SomeEntity SomeEntity { get; set; }\n    }\n\n    public class SomeEntity\n    {\n        [Key]\n        public int Id { get; set; }\n\n        public string? StringData { get; set; }\n    }\n```","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/35832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dotnet/efcore/issues/35832/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":18159139714,"node_id":"UNLE_lADOAPaMMs6niASCzwAAAAQ6XnuC","url":"https://api.github.com/repos/dotnet/efcore/issues/events/18159139714","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2025-06-15T20:13:50Z","label":{"name":"type-bug","color":"f7c6c7"},"performed_via_github_app":null},{"id":18159139794,"node_id":"ITAE_lADOAPaMMs6niASCzwAAAAQ6XnvS","url":"https://api.github.com/repos/dotnet/efcore/issues/events/18159139794","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"issue_type_added","commit_id":null,"commit_url":null,"created_at":"2025-06-15T20:13:52Z","performed_via_github_app":null}]