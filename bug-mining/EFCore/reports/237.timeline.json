[{"id":9523105898,"node_id":"LE_lADOAPaMMs5oqi_szwAAAAI3nxBq","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9523105898","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-14T03:27:41Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1597143190","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1597143190","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1597143190,"node_id":"IC_kwDOAPaMMs5fMniW","user":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-19T12:57:36Z","updated_at":"2023-06-19T12:57:36Z","body":"I am not able to reproduce this--see my code below. Please attach a small, runnable project or post a small, runnable code listing that reproduces what you are seeing so that we can investigate.\r\n\r\n```C#\r\nusing (var context = new SomeDbContext())\r\n{\r\n    await context.Database.EnsureDeletedAsync();\r\n    await context.Database.EnsureCreatedAsync();\r\n\r\n    int code = 1;\r\n    var workQuery = context.WorkOrders.Where(x => x.OrderCode == code);\r\n    await context.Set<BomItem>()\r\n        .Where(x => x.OrderCode == code)\r\n        .ExecuteUpdateAsync(x =>\r\n            x.SetProperty(s => s.HasWorkOrder, b => workQuery.Where(o => o.BomItemId == b.Id).Any()));\r\n}\r\n\r\npublic class SomeDbContext : DbContext\r\n{\r\n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\r\n        => optionsBuilder\r\n            .UseSqlServer(@\"Data Source=(LocalDb)\\MSSQLLocalDB;Database=AllTogetherNow\")\r\n            .LogTo(Console.WriteLine, LogLevel.Information)\r\n            .EnableSensitiveDataLogging();\r\n\r\n    public DbSet<WorkOrder> WorkOrders => Set<WorkOrder>();\r\n\r\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\r\n    {\r\n        modelBuilder.Entity<BomItem>();\r\n    }\r\n}\r\n\r\npublic class WorkOrder\r\n{\r\n    public int Id { get; set; }\r\n    public int OrderCode { get; set; }\r\n    public int BomItemId { get; set; }\r\n}\r\n\r\npublic class BomItem\r\n{\r\n    public int Id { get; set; }\r\n    public int OrderCode { get; set; }\r\n    public bool HasWorkOrder { get; set; }\r\n}\r\n```\r\n\r\n```\r\ninfo: 6/19/2023 13:56:00.578 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command)\r\n      Executed DbCommand (18ms) [Parameters=[@__code_0='1'], CommandType='Text', CommandTimeout='30']\r\n      UPDATE [b]\r\n      SET [b].[HasWorkOrder] = CASE\r\n          WHEN EXISTS (\r\n              SELECT 1\r\n              FROM [WorkOrders] AS [w]\r\n              WHERE [w].[OrderCode] = @__code_0 AND [w].[BomItemId] = [b].[Id]) THEN CAST(1 AS bit)\r\n          ELSE CAST(0 AS bit)\r\n      END\r\n      FROM [BomItem] AS [b]\r\n      WHERE [b].[OrderCode] = @__code_0\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1597143190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604156479","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1604156479","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1604156479,"node_id":"IC_kwDOAPaMMs5fnXw_","user":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T11:35:35Z","updated_at":"2023-06-24T17:41:08Z","body":"We are seeing this on both SQL Server and PostgreSQL:\r\n\r\n```csharp\r\nusing Microsoft.EntityFrameworkCore;\r\nusing Microsoft.Extensions.Logging;\r\n\r\nusing (var context = new ExampleDbContext())\r\n{\r\n    await context.Database.EnsureDeletedAsync();\r\n    await context.Database.EnsureCreatedAsync();\r\n\r\n    var id = Guid.NewGuid();\r\n\r\n    await context.Orders\r\n        .Where(o => o.Id == id)\r\n        .Select(o => new\r\n        {\r\n            Order = o,\r\n            Total = o.OrderProducts.Sum(op => op.Amount * op.TotalCost)\r\n        })\r\n        .ExecuteUpdateAsync(e => e\r\n            .SetProperty(x => x.Order.Total, x => x.Total));\r\n}\r\n\r\npublic class ExampleDbContext : DbContext\r\n{\r\n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\r\n        => optionsBuilder\r\n            .UseSqlServer(@\"Data Source=(LocalDb)\\MSSQLLocalDB;Database=test\")\r\n            .LogTo(Console.WriteLine, LogLevel.Information)\r\n            .EnableSensitiveDataLogging();\r\n\r\n    public DbSet<Order> Orders => Set<Order>();\r\n    public DbSet<OrderProduct> OrderProducts => Set<OrderProduct>();\r\n}\r\n\r\npublic class Order\r\n{\r\n    public Guid Id { get; set; }\r\n    public decimal Total { get; set; }\r\n    public ICollection<OrderProduct> OrderProducts { get; set; } = new List<OrderProduct>();\r\n}\r\n\r\npublic class OrderProduct\r\n{\r\n    public Guid Id { get; set; }\r\n    public int Amount { get; set; }\r\n    public decimal TotalCost { get; set; }\r\n}\r\n```\r\nOutput for SQL Server:\r\n```\r\ninfo: 23/06/2023 13.31.58.648 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command)\r\n      Executed DbCommand (25ms) [Parameters=[@__id_0='4be338c6-7517-4b71-848c-8e2c0ef244fb'], CommandType='Text', CommandTimeout='30']\r\n      UPDATE [o]\r\n      SET [o].[Total] = (\r\n          SELECT COALESCE(SUM(CAST([o].[Amount] AS decimal(18,2)) * [o].[TotalCost]), 0.0)\r\n          FROM [OrderProducts] AS [o]\r\n          WHERE [o].[Id] = [o].[OrderId])\r\n      FROM [Orders] AS [o]\r\n      WHERE [o].[Id] = @__id_0\r\n```\r\nBoth `Orders` and `OrderProducts` are given the same alias so the condition will never be true:\r\n`WHERE [o].[Id] = [o].[OrderId]`\r\n\r\nOutput for PostgreSQL:\r\n```\r\ninfo: 23/06/2023 13.33.29.703 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command)\r\n      Executed DbCommand (27ms) [Parameters=[@__id_0='5e06b091-dc30-440f-abb8-2f0b71081bfb'], CommandType='Text', CommandTimeout='30']\r\n      UPDATE \"Orders\" AS o\r\n      SET \"Total\" = (\r\n          SELECT COALESCE(sum(o.\"Amount\"::numeric * o.\"TotalCost\"), 0.0)\r\n          FROM \"OrderProducts\" AS o\r\n          WHERE o.\"Id\" = o.\"OrderId\")\r\n      WHERE o.\"Id\" = @__id_0\r\n```\r\n\r\nEF Core version: 7.0.8\r\nDatabase provider: Microsoft.EntityFrameworkCore.SqlServer (7.0.8)\r\nDatabase provider: Npgsql.EntityFrameworkCore.PostgreSQL (7.0.4)\r\nTarget framework: NET 7.0\r\nOperating system: Windows 11 22H2\r\nIDE: Visual Studio 2022 17.4\r\n\r\nIf I change the name of the table, it works:\r\n```\r\npublic DbSet<Order> AOrders => Set<Order>();\r\n```\r\n```\r\ninfo: 23/06/2023 13.38.41.842 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command)\r\n      Executed DbCommand (29ms) [Parameters=[@__id_0='a016b51c-fa31-4b71-b061-7e73057677a5'], CommandType='Text', CommandTimeout='30']\r\n      UPDATE [a]\r\n      SET [a].[Total] = (\r\n          SELECT COALESCE(SUM(CAST([o].[Amount] AS decimal(18,2)) * [o].[TotalCost]), 0.0)\r\n          FROM [OrderProducts] AS [o]\r\n          WHERE [a].[Id] = [o].[OrderId])\r\n      FROM [AOrders] AS [a]\r\n      WHERE [a].[Id] = @__id_0\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604156479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604188365","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1604188365","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1604188365,"node_id":"IC_kwDOAPaMMs5fnfjN","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T12:05:48Z","updated_at":"2023-06-24T17:41:03Z","body":"@KernelCrap referencing navigations within the ExecuteUpdate currently supported; [see these docs](https://learn.microsoft.com/en-us/ef/core/saving/execute-insert-update-delete#navigations-and-related-entities) which include the workaround.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604188365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9617157061,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9OivF","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9617157061","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-23T12:05:49Z","performed_via_github_app":null},{"id":9617157074,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9OivS","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9617157074","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-23T12:05:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604198223","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1604198223","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1604198223,"node_id":"IC_kwDOAPaMMs5fnh9P","user":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T12:14:32Z","updated_at":"2023-06-23T12:14:32Z","body":"@roji The example is using the method described in your link.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604198223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9617226654,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9Ozue","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9617226654","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-23T12:14:32Z","performed_via_github_app":null},{"id":9617226674,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9Ozuy","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9617226674","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-23T12:14:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604600054","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1604600054","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1604600054,"node_id":"IC_kwDOAPaMMs5fpED2","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T17:29:11Z","updated_at":"2023-06-23T17:29:11Z","body":"@KernelCrap I'm seeing the following in your code sample:\r\n\r\n```c#\r\n        .ExecuteUpdateAsync(e => e\r\n            .SetProperty(x => x.Order.Total, x => x.Total));\r\n```\r\n\r\n`x.Order.Total` is using a navigation.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604600054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9620137327,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9Z6Vv","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9620137327","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-23T17:29:11Z","performed_via_github_app":null},{"id":9620137340,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9Z6V8","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9620137340","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-23T17:29:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604918057","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1604918057","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1604918057,"node_id":"IC_kwDOAPaMMs5fqRsp","user":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T20:34:00Z","updated_at":"2023-06-23T20:34:00Z","body":"@roji Here is the example from the [documentation:](https://learn.microsoft.com/en-us/ef/core/saving/execute-insert-update-delete#navigations-and-related-entities)\r\n```csharp\r\ncontext.Blogs\r\n    .Select(b => new { Blog = b, NewRating = b.Posts.Average(p => p.Rating) })\r\n    .ExecuteUpdate(setters => setters.SetProperty(b => b.Blog.Rating, b => b.NewRating));\r\n```\r\nIt is supported when using `Select` to project it to an anonymous type first (which is what my example does).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1604918057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9622332595,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9iSSz","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9622332595","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-23T20:34:01Z","performed_via_github_app":null},{"id":9622332602,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9iSS6","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9622332602","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-23T20:34:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605245652","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1605245652","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1605245652,"node_id":"IC_kwDOAPaMMs5frhrU","user":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-24T03:11:02Z","updated_at":"2023-06-24T03:20:27Z","body":"@ajcvickers \r\nThank you for your response, and I apologize for taking so long to reply. I created a completely new project based on my project environment, and I obtained the same results as you did. The problem did not reproduce. It's possible that this is unrelated to EF Core, but it does indeed exist in my original project.\r\nThe address of the new project is [efcoretest](https://github.com/hexianggui/efcoreTest) ,but the problem could not be reproduced!\r\n![2023-06-24_102915](https://github.com/dotnet/efcore/assets/30622318/c16af40b-1bd6-416c-8958-178d865fffa4)\r\nNext, I will attempt to reproduce the issue in the new project, and I will inform you of the results. Thank you once again for your attention!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605245652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9624425721,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9qRT5","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9624425721","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-24T03:11:02Z","performed_via_github_app":null},{"id":9624425724,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9qRT8","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9624425724","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-24T03:11:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605405009","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1605405009","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1605405009,"node_id":"IC_kwDOAPaMMs5fsIlR","user":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-24T11:31:24Z","updated_at":"2023-06-24T11:31:58Z","body":"@hexianggui In your new project, your tables are named `BomItem` and `WorkOrder`, but in your original comment the tables were `MesWorkOrder` and `MesBomItem`.\r\n\r\nFrom my testing, it breaks when two tables use the same prefix. In my example, before my comment was hidden, I experienced the same thing with two tables named `Order` and `OrderProduct`, but it worked fine when renaming one of the tables to something that didn't start with `Order`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605405009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9625832346,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI9voua","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9625832346","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-24T11:31:24Z","performed_via_github_app":null},{"id":9625832355,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI9vouj","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9625832355","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-24T11:31:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605906267","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1605906267","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1605906267,"node_id":"IC_kwDOAPaMMs5fuC9b","user":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-25T07:10:59Z","updated_at":"2023-06-25T08:22:25Z","body":"> @hexianggui In your new project, your tables are named `BomItem` and `WorkOrder`, but in your original comment the tables were `MesWorkOrder` and `MesBomItem`.\r\n> \r\n> From my testing, it breaks when two tables use the same prefix. In my example, before my comment was hidden, I experienced the same thing with two tables named `Order` and `OrderProduct`, but it worked fine when renaming one of the tables to something that didn't start with `Order`.\r\n\r\n @KernelCrap  Yes, you are right. Thank you very much! I added a prefix and now I have successfully reproduced the previous issue!   [exampleProject](https://github.com/hexianggui/efcoreTest)\r\n  Your previous comment was probably hidden, and I didn't see it. Now I can see it!\r\n\r\n![2023-06-25_143339](https://github.com/dotnet/efcore/assets/30622318/b2c3a57e-7206-4c38-bacf-ec500623f4b4)\r\n@ajcvickers After running the project (before running, make sure to execute the database migration), you can execute the APIs in Swagger, and you will get the results in the console. Thank you, everyone!\r\n\r\nFurthermore, to maintain consistency with the original project environment, I built the project using ABPvNext. I have not conducted any testing to determine if the same results can be achieved without using any additional frameworks.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605906267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9628929837,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI97c8t","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929837","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:10:59Z","performed_via_github_app":null},{"id":9628929844,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI97c80","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929844","actor":{"login":"KernelCrap","id":747190,"node_id":"MDQ6VXNlcjc0NzE5MA==","avatar_url":"https://avatars.githubusercontent.com/u/747190?v=4","gravatar_id":"","url":"https://api.github.com/users/KernelCrap","html_url":"https://github.com/KernelCrap","followers_url":"https://api.github.com/users/KernelCrap/followers","following_url":"https://api.github.com/users/KernelCrap/following{/other_user}","gists_url":"https://api.github.com/users/KernelCrap/gists{/gist_id}","starred_url":"https://api.github.com/users/KernelCrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KernelCrap/subscriptions","organizations_url":"https://api.github.com/users/KernelCrap/orgs","repos_url":"https://api.github.com/users/KernelCrap/repos","events_url":"https://api.github.com/users/KernelCrap/events{/privacy}","received_events_url":"https://api.github.com/users/KernelCrap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:10:59Z","performed_via_github_app":null},{"id":9628929849,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI97c85","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929849","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:10:59Z","performed_via_github_app":null},{"id":9628929857,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI97c9B","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929857","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:10:59Z","performed_via_github_app":null},{"id":9628929864,"node_id":"MEE_lADOAPaMMs5oqi_szwAAAAI97c9I","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929864","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:11:00Z","performed_via_github_app":null},{"id":9628929870,"node_id":"SE_lADOAPaMMs5oqi_szwAAAAI97c9O","url":"https://api.github.com/repos/dotnet/efcore/issues/events/9628929870","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-25T07:11:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605916129","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1605916129","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1605916129,"node_id":"IC_kwDOAPaMMs5fuFXh","user":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-25T07:43:18Z","updated_at":"2023-06-25T08:18:31Z","body":"I haven't read the source code, but based on the above observations, it appears that table aliases are derived from the initial letter of the table name. For example, the aliases for \"**BomItem**\" and \"**WorkOrder**\" are \"**b**\" and \"**w**\" respectively, while the aliases for \"**MesBomItem**\" and \"**MesWorkOrder**\" are both \"**m**\". If that's the case, having two or more table names with the same initial letter in the same SQL statement can lead to confusion.\r\nHowever, from what I can see currently, this situation only occurs in subquery statements. When I perform a join query using LINQ, the generated SQL statement includes correct aliases. For example, when joining \"MesBomItem\" and \"MesBom\", the generated aliases are \"m\" and \"m0\" respectively.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605916129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hexianggui","id":30622318,"node_id":"MDQ6VXNlcjMwNjIyMzE4","avatar_url":"https://avatars.githubusercontent.com/u/30622318?v=4","gravatar_id":"","url":"https://api.github.com/users/hexianggui","html_url":"https://github.com/hexianggui","followers_url":"https://api.github.com/users/hexianggui/followers","following_url":"https://api.github.com/users/hexianggui/following{/other_user}","gists_url":"https://api.github.com/users/hexianggui/gists{/gist_id}","starred_url":"https://api.github.com/users/hexianggui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexianggui/subscriptions","organizations_url":"https://api.github.com/users/hexianggui/orgs","repos_url":"https://api.github.com/users/hexianggui/repos","events_url":"https://api.github.com/users/hexianggui/events{/privacy}","received_events_url":"https://api.github.com/users/hexianggui/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605939259","html_url":"https://github.com/dotnet/efcore/issues/31078#issuecomment-1605939259","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31078","id":1605939259,"node_id":"IC_kwDOAPaMMs5fuLA7","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-25T08:36:33Z","updated_at":"2023-06-25T08:36:33Z","body":"@KernelCrap apologies, I read your code sample too quickly. I can see the error happening, we'll investigate this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1605939259/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}}]