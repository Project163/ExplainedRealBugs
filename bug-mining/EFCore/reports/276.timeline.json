[{"id":10169838734,"node_id":"LE_lADOAPaMMs5vD20EzwAAAAJeK2yO","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10169838734","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-08-23T12:55:59Z","label":{"name":"customer-reported","color":"a4a5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690029998","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1690029998","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1690029998,"node_id":"IC_kwDOAPaMMs5ku8-u","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T14:06:02Z","updated_at":"2023-08-23T14:06:02Z","body":"It seems like what's actually occupying memory is many `object[]` instances; can you please drill down to see the path which roots them (e.g. inside ServiceProviderCache), and also report what they actually contain?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690029998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690692035","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1690692035","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1690692035,"node_id":"IC_kwDOAPaMMs5kxenD","user":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T21:50:09Z","updated_at":"2023-08-23T21:54:35Z","body":"Second this - we are having an issue that is very similar to this.\r\n\r\n- Multitenant app - database per tenant, ~160 tenants, Azure SQL\r\n- We use this pattern for switching between models:\r\n\r\n``` csharp\r\npublic sealed class DynamicModelCacheKeyFactory : IModelCacheKeyFactory\r\n{\r\n\tpublic object Create(DbContext context, bool designTime) =>\r\n\t\tcontext is IDynamicModelDbContext { CacheKey: not null } dynamicDbModelContext\r\n\t\t\t? new DynamicModelCacheKey(context, designTime, dynamicDbModelContext.CacheKey)\r\n\t\t\t: new ModelCacheKey(context, designTime);\r\n}\r\n```\r\n\r\n```csharp\r\npublic sealed class DynamicModelCacheKey : ModelCacheKey\r\n{\r\n\tprivate readonly string cacheKey;\r\n\r\n\tpublic DynamicModelCacheKey(DbContext context, bool designTime, string cacheKey)\r\n\t\t: base(context, designTime) =>\r\n\t\tthis.cacheKey = cacheKey;\r\n\r\n\tprotected override bool Equals(ModelCacheKey other) => other is DynamicModelCacheKey otherCacheKey\r\n\t\t\t&& base.Equals(otherCacheKey)\r\n\t\t\t&& otherCacheKey.cacheKey == cacheKey;\r\n\r\n\tpublic override int GetHashCode() => HashCode.Combine(base.GetHashCode(), cacheKey);\r\n}\r\n```\r\n\r\n- We see the `SqlServerValueGeneratorCache` grow steadily during peak hours\r\n![image](https://github.com/dotnet/efcore/assets/5933904/09183d8e-b54e-4696-bd81-014b457e9854)\r\n\r\n  - But we reboot servers in the evening in order to wipe the memory - it does not seem to get released by itself.\r\n\r\nOne difference is that we run on linux machines.\r\n\r\nWe also have some memory analysis that we can post, I just dont have access to them right now. \r\n ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690692035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690718108","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1690718108","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1690718108,"node_id":"IC_kwDOAPaMMs5kxk-c","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T22:18:21Z","updated_at":"2023-08-23T22:18:21Z","body":"@abydal you seem to be reporting a case where the number of SqlServerValueGeneratorCache is growing, whereas the original report above seems to have only two instances (which themselves hold a huge number of `object[]` instances.\r\n\r\nThough I might be misunderstanding here. The easiest thing really is for someone to produce a minimal, runnable code sample with a loop, showing the memory growing and not getting collected.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1690718108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10174983501,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJeee1N","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10174983501","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-23T22:18:22Z","performed_via_github_app":null},{"id":10174983511,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJeee1X","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10174983511","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-23T22:18:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691226313","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1691226313","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1691226313,"node_id":"IC_kwDOAPaMMs5kzhDJ","user":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T08:18:27Z","updated_at":"2023-08-24T08:18:27Z","body":"@roji It's a bit of a mystery to me what these object arrays are. The content seems to be a bit of everything from what I can see in dotMemory. There are 103 of them in this dump, but they are not the same kind of objects. Only one retain a lot of memory, the others don't. Drilling into the one instance with 2.4GB retained bytes shows the following:\r\n\r\n![image](https://github.com/dotnet/efcore/assets/29543642/f69f202f-c837-4cdc-88f1-96b705fa3229)\r\n\r\n![image](https://github.com/dotnet/efcore/assets/29543642/b63522f0-ba71-46d9-9552-5b1b405afcf8)\r\n\r\n![image](https://github.com/dotnet/efcore/assets/29543642/d027bae0-dd29-405a-a3a3-9b93b5b1039d)\r\n\r\nSo it's an object array of size 4080. A lot of different stuff in there, including 1 reference to ServiceProviderCache, holding onto 2.4GB of memory:\r\n\r\n![image](https://github.com/dotnet/efcore/assets/29543642/1991001a-cd9b-4fe2-b7d1-fda4fbc654ee)\r\n\r\nNot really been able to reproduce this scenario locally with profiling, so I'm looking at prod memory dumps.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691226313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10178350652,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJerU48","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10178350652","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-24T08:18:27Z","performed_via_github_app":null},{"id":10178350663,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJerU5H","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10178350663","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-24T08:18:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691287827","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1691287827","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1691287827,"node_id":"IC_kwDOAPaMMs5kzwET","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T08:58:14Z","updated_at":"2023-08-24T08:58:14Z","body":"@easaevik can you drill down into ServiceProviderCache to show the ownership path leading to the huge data?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691287827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10178753541,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJes3QF","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10178753541","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-24T08:58:14Z","performed_via_github_app":null},{"id":10178753563,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJes3Qb","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10178753563","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-24T08:58:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691327139","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1691327139","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1691327139,"node_id":"IC_kwDOAPaMMs5kz5qj","user":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T09:22:52Z","updated_at":"2023-08-24T09:22:52Z","body":"This is our dominators tree, with `SqlServerValueGeneratorCache`being the top footprint.\r\n![image](https://github.com/dotnet/efcore/assets/5933904/476fc3e4-b7af-41f9-bc21-35bf2e27642c)\r\nWe do `services.AddScoped<OurDbContext, OurDbContext>()` so it seems that all the DI wrappings are not present in our stack. \r\nTo me these two cases seems related, but do you still believe this is not the case @roji ?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691327139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10179012392,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJet2co","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10179012392","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-24T09:22:52Z","performed_via_github_app":null},{"id":10179012404,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJet2c0","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10179012404","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-24T09:22:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691368326","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1691368326","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1691368326,"node_id":"IC_kwDOAPaMMs5k0DuG","user":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T09:49:50Z","updated_at":"2023-08-24T09:49:50Z","body":"@roji Here is the drill down into the ServiceProviderCache:\r\n\r\n![image](https://github.com/dotnet/efcore/assets/29543642/a95888e8-6cb3-4101-84aa-76e4321c05a9)\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1691368326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10179286261,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJeu5T1","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10179286261","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-24T09:49:51Z","performed_via_github_app":null},{"id":10179286276,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJeu5UE","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10179286276","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-24T09:49:51Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696279752","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1696279752","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1696279752,"node_id":"IC_kwDOAPaMMs5lGyzI","user":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-28T19:42:55Z","updated_at":"2023-08-28T19:42:55Z","body":"I think we can say that we have identified the issue on our end at least. I suspect this is your problem as well @easaevik.\r\nI will try to explain. \r\nThe root issue is in the class  `ValueGeneratorCache` [here](https://github.com/dotnet/efcore/blob/affd44045f41a2dd58c5667ce3938e42568fbe84/src/EFCore/ValueGeneration/ValueGeneratorCache.cs#L28). This class sets up a cache for all value generators for all models for all dbcontexts where the CacheKey is a struct that contains `IProperty` and `ITypeBase`. When the application is designed to be multi-tenant using one database per tenant, it leads to, in our case, that we get one entry in this cache per model per tenant. And the cache keys in on themselves takes up quite a bit of memory each. We have over 100 models  in our db context and close to 150  tenants which leads to 100*150 entries * the size of the entry and the CacheKey. Its just too big a footprint per customer in our case.\r\n\r\nWe have currently solved this by implementing our own version of this class where we have a slightly different implementation of the `Equals` function and differentiate on `EntityType.ClrType` instead of just `EntityType`. \r\n```csharp\r\npublic class MultiTenantValueGeneratorCache : IValueGeneratorCache\r\n{\r\n\tpublic MultiTenantValueGeneratorCache(ValueGeneratorCacheDependencies dependencies) => Dependencies = dependencies;\r\n\tprotected virtual ValueGeneratorCacheDependencies Dependencies { get; }\r\n\tprivate readonly ConcurrentDictionary<CacheKey, ValueGenerator> cache = new();\r\n\tprivate readonly struct CacheKey : IEquatable<CacheKey>\r\n\t{\r\n\t\tpublic CacheKey(IProperty property, IEntityType entityType)\r\n\t\t{\r\n\t\t\tProperty = property;\r\n\t\t\tEntityType = entityType;\r\n\t\t}\r\n\t\tpublic IProperty Property { get; }\r\n\t\tpublic IEntityType EntityType { get; }\r\n\t\tpublic bool Equals(CacheKey other) =>\r\n\t\t\tEntityType.ClrType == other.EntityType.ClrType && Property.Name == other.Property.Name;\r\n\t\tpublic override bool Equals(object obj) => obj is CacheKey cacheKey && Equals(cacheKey);\r\n\t\tpublic override int GetHashCode() => HashCode.Combine(Property.Name, EntityType.ClrType);\r\n\t}\r\n\tpublic virtual ValueGenerator GetOrAdd(\r\n\t\tIProperty property,\r\n\t\tIEntityType entityType,\r\n\t\tFunc<IProperty, IEntityType, ValueGenerator> factory)\r\n\t\t=> cache.GetOrAdd(new CacheKey(property, entityType), static (ck, f) => f(ck.Property, ck.EntityType), factory);\r\n}\r\n```\r\nThis will eliminate duplicate entries in this cache and it reduced our memory-footprint quite drastically.\r\nThere are probably some internal functionality in EFCore that will break with this implementation. I'm imagining HiLo will not work, but we dont use it so that is noe issue for us. So far it seems to work for us. All tests are green. Maybe you can chime in on this @roji ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696279752/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10213041128,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJgvqPo","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213041128","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:42:55Z","performed_via_github_app":null},{"id":10213041151,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJgvqP_","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213041151","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:42:55Z","performed_via_github_app":null},{"id":10213041197,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJgvqQt","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213041197","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:42:55Z","performed_via_github_app":null},{"id":10213041228,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJgvqRM","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213041228","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:42:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696311132","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1696311132","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1696311132,"node_id":"IC_kwDOAPaMMs5lG6dc","user":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-28T19:55:25Z","updated_at":"2023-08-28T19:55:25Z","body":"Thanks for the analysis... Definitely interesting and important stuff. Just to set expectations, we're heads-down stabilizing the 8.0 release, so it's likely to take a bit of time before we can look into this.\r\n\r\n/cc @ajcvickers\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696311132/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"roji","id":1862641,"node_id":"MDQ6VXNlcjE4NjI2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1862641?v=4","gravatar_id":"","url":"https://api.github.com/users/roji","html_url":"https://github.com/roji","followers_url":"https://api.github.com/users/roji/followers","following_url":"https://api.github.com/users/roji/following{/other_user}","gists_url":"https://api.github.com/users/roji/gists{/gist_id}","starred_url":"https://api.github.com/users/roji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roji/subscriptions","organizations_url":"https://api.github.com/users/roji/orgs","repos_url":"https://api.github.com/users/roji/repos","events_url":"https://api.github.com/users/roji/events{/privacy}","received_events_url":"https://api.github.com/users/roji/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10213232365,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJgwY7t","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213232365","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:55:25Z","performed_via_github_app":null},{"id":10213232381,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJgwY79","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10213232381","actor":{"login":"ajcvickers","id":1430078,"node_id":"MDQ6VXNlcjE0MzAwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/1430078?v=4","gravatar_id":"","url":"https://api.github.com/users/ajcvickers","html_url":"https://github.com/ajcvickers","followers_url":"https://api.github.com/users/ajcvickers/followers","following_url":"https://api.github.com/users/ajcvickers/following{/other_user}","gists_url":"https://api.github.com/users/ajcvickers/gists{/gist_id}","starred_url":"https://api.github.com/users/ajcvickers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajcvickers/subscriptions","organizations_url":"https://api.github.com/users/ajcvickers/orgs","repos_url":"https://api.github.com/users/ajcvickers/repos","events_url":"https://api.github.com/users/ajcvickers/events{/privacy}","received_events_url":"https://api.github.com/users/ajcvickers/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-28T19:55:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696316151","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1696316151","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1696316151,"node_id":"IC_kwDOAPaMMs5lG7r3","user":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-28T19:58:07Z","updated_at":"2023-08-28T19:58:07Z","body":"So far this works for us, so there is no rush. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1696316151/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1697009817","html_url":"https://github.com/dotnet/efcore/issues/31539#issuecomment-1697009817","issue_url":"https://api.github.com/repos/dotnet/efcore/issues/31539","id":1697009817,"node_id":"IC_kwDOAPaMMs5lJlCZ","user":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-29T08:37:00Z","updated_at":"2023-08-29T08:37:00Z","body":"Interesting @abydal. How do you replace ValueGeneratorCache with your custom MultiTenantValueGeneratorCache?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/dotnet/efcore/issues/comments/1697009817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"easaevik","id":29543642,"node_id":"MDQ6VXNlcjI5NTQzNjQy","avatar_url":"https://avatars.githubusercontent.com/u/29543642?v=4","gravatar_id":"","url":"https://api.github.com/users/easaevik","html_url":"https://github.com/easaevik","followers_url":"https://api.github.com/users/easaevik/followers","following_url":"https://api.github.com/users/easaevik/following{/other_user}","gists_url":"https://api.github.com/users/easaevik/gists{/gist_id}","starred_url":"https://api.github.com/users/easaevik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/easaevik/subscriptions","organizations_url":"https://api.github.com/users/easaevik/orgs","repos_url":"https://api.github.com/users/easaevik/repos","events_url":"https://api.github.com/users/easaevik/events{/privacy}","received_events_url":"https://api.github.com/users/easaevik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10218095800,"node_id":"MEE_lADOAPaMMs5vD20EzwAAAAJhC8S4","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10218095800","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-29T08:37:01Z","performed_via_github_app":null},{"id":10218095822,"node_id":"SE_lADOAPaMMs5vD20EzwAAAAJhC8TO","url":"https://api.github.com/repos/dotnet/efcore/issues/events/10218095822","actor":{"login":"abydal","id":5933904,"node_id":"MDQ6VXNlcjU5MzM5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5933904?v=4","gravatar_id":"","url":"https://api.github.com/users/abydal","html_url":"https://github.com/abydal","followers_url":"https://api.github.com/users/abydal/followers","following_url":"https://api.github.com/users/abydal/following{/other_user}","gists_url":"https://api.github.com/users/abydal/gists{/gist_id}","starred_url":"https://api.github.com/users/abydal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abydal/subscriptions","organizations_url":"https://api.github.com/users/abydal/orgs","repos_url":"https://api.github.com/users/abydal/repos","events_url":"https://api.github.com/users/abydal/events{/privacy}","received_events_url":"https://api.github.com/users/abydal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-29T08:37:01Z","performed_via_github_app":null}]