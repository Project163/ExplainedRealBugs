diff --git a/hbase-common/src/main/java/org/apache/hadoop/hbase/util/VersionInfo.java b/hbase-common/src/main/java/org/apache/hadoop/hbase/util/VersionInfo.java
index 44bb89f3c9..967d73a1c9 100644
--- a/hbase-common/src/main/java/org/apache/hadoop/hbase/util/VersionInfo.java
+++ b/hbase-common/src/main/java/org/apache/hadoop/hbase/util/VersionInfo.java
@@ -33,6 +33,10 @@ import org.apache.hadoop.hbase.classification.InterfaceAudience;
 public class VersionInfo {
   private static final Log LOG = LogFactory.getLog(VersionInfo.class.getName());
 
+  // If between two dots there is not a number, we regard it as a very large number so it is
+  // higher than any numbers in the version.
+  private static int VERY_LARGE_NUMBER = 100000;
+
   /**
    * Get the hbase version.
    * @return the hbase version string, eg. "0.6.3-dev"
@@ -108,6 +112,45 @@ public class VersionInfo {
     }
   }
 
+  public static int compareVersion(String v1, String v2) {
+    //fast compare equals first
+    if (v1.equals(v2)) {
+      return 0;
+    }
+
+    String s1[] = v1.split("\\.|-");//1.2.3-hotfix -> [1, 2, 3, hotfix]
+    String s2[] = v2.split("\\.|-");
+    int index = 0;
+    while (index < s1.length && index < s2.length) {
+      int va = VERY_LARGE_NUMBER, vb = VERY_LARGE_NUMBER;
+      try {
+        va = Integer.parseInt(s1[index]);
+      } catch (Exception ingore) {
+      }
+      try {
+        vb = Integer.parseInt(s2[index]);
+      } catch (Exception ingore) {
+      }
+      if (va != vb) {
+        return va - vb;
+      }
+      if (va == VERY_LARGE_NUMBER) {
+        // compare as String
+        int c = s1[index].compareTo(s2[index]);
+        if (c != 0) {
+          return c;
+        }
+      }
+      index++;
+    }
+    if (index < s1.length) {
+      // s1 is longer
+      return 1;
+    }
+    //s2 is longer
+    return -1;
+  }
+
   public static void main(String[] args) {
     writeTo(System.out);
   }
diff --git a/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestVersionInfo.java b/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestVersionInfo.java
new file mode 100644
index 0000000000..896c5241ec
--- /dev/null
+++ b/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestVersionInfo.java
@@ -0,0 +1,35 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.hadoop.hbase.util;
+
+import org.apache.hadoop.hbase.testclassification.SmallTests;
+import static org.junit.Assert.assertTrue;
+import org.junit.Test;
+import org.junit.experimental.categories.Category;
+
+@Category(SmallTests.class)
+public class TestVersionInfo {
+
+  @Test
+  public void testCompareVersion() {
+    assertTrue(VersionInfo.compareVersion("1.0.0", "0.98.11") > 0);
+    assertTrue(VersionInfo.compareVersion("0.98.11", "1.0.1") < 0);
+    assertTrue(VersionInfo.compareVersion("2.0.0", "1.4.0") > 0);
+    assertTrue(VersionInfo.compareVersion("2.0.0", "2.0.0-SNAPSHOT") < 0);
+  }
+}
\ No newline at end of file
