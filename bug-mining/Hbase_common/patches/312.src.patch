diff --git a/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java b/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java
index 09dc37fd36..86f8678950 100644
--- a/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java
+++ b/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java
@@ -27,16 +27,17 @@ import javax.annotation.Nonnull;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 import org.apache.hadoop.hbase.Cell;
+import org.apache.hadoop.hbase.HBaseInterfaceAudience;
 import org.apache.hadoop.hbase.classification.InterfaceAudience;
 
 /**
  * TODO javadoc
  */
-@InterfaceAudience.Private
+@InterfaceAudience.LimitedPrivate({HBaseInterfaceAudience.COPROC, HBaseInterfaceAudience.PHOENIX})
 public abstract class BaseDecoder implements Codec.Decoder {
   protected static final Log LOG = LogFactory.getLog(BaseDecoder.class);
 
-  protected final PBIS in;
+  protected final InputStream in;
   private Cell current = null;
 
   protected static class PBIS extends PushbackInputStream {
@@ -60,13 +61,13 @@ public abstract class BaseDecoder implements Codec.Decoder {
     if (firstByte == -1) {
       return false;
     } else {
-      in.unread(firstByte);
+      ((PBIS)in).unread(firstByte);
     }
 
     try {
       this.current = parseCell();
     } catch (IOException ioEx) {
-      in.resetBuf(1); // reset the buffer in case the underlying stream is read from upper layers
+      ((PBIS)in).resetBuf(1); // reset the buffer in case the underlying stream is read from upper layers
       rethrowEofException(ioEx);
     }
     return true;
@@ -88,6 +89,10 @@ public abstract class BaseDecoder implements Codec.Decoder {
     throw eofEx;
   }
 
+  protected InputStream getInputStream() {
+    return in;
+  }
+
   /**
    * Extract a Cell.
    * @return a parsed Cell or throws an Exception. EOFException or a generic IOException maybe
diff --git a/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseEncoder.java b/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseEncoder.java
index 7a96abe5cf..d3b2365d9e 100644
--- a/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseEncoder.java
+++ b/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseEncoder.java
@@ -21,13 +21,15 @@ import java.io.IOException;
 import java.io.OutputStream;
 
 import org.apache.hadoop.hbase.Cell;
+import org.apache.hadoop.hbase.HBaseInterfaceAudience;
 import org.apache.hadoop.hbase.classification.InterfaceAudience;
 
+
 /**
  * TODO javadoc
  */
 
-@InterfaceAudience.Private
+@InterfaceAudience.LimitedPrivate({HBaseInterfaceAudience.COPROC, HBaseInterfaceAudience.PHOENIX})
 public abstract class BaseEncoder implements Codec.Encoder {
   protected final OutputStream out;
   // This encoder is 'done' once flush has been called.
@@ -37,6 +39,10 @@ public abstract class BaseEncoder implements Codec.Encoder {
     this.out = out;
   }
 
+  protected OutputStream getOuputStream() {
+    return out;
+  }
+
   @Override
   public abstract void write(Cell cell) throws IOException;
 
